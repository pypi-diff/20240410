# Comparing `tmp/aistudio_sdk-0.1.7-py3-none-any.whl.zip` & `tmp/aistudio_sdk-0.2.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,20 +1,25 @@
-Zip file size: 21874 bytes, number of entries: 18
--rw-r--r--  2.0 unx      651 b- defN 23-Sep-08 07:40 aistudio_sdk/__init__.py
--rw-r--r--  2.0 unx    20257 b- defN 24-Jan-26 08:18 aistudio_sdk/api_requester.py
--rw-r--r--  2.0 unx     5653 b- defN 24-Jan-30 02:13 aistudio_sdk/bos_sdk.py
--rw-r--r--  2.0 unx     1398 b- defN 24-Jan-16 08:41 aistudio_sdk/config.py
--rw-r--r--  2.0 unx     1199 b- defN 23-Nov-20 09:11 aistudio_sdk/err_code.py
--rw-r--r--  2.0 unx    24363 b- defN 24-Jan-26 08:18 aistudio_sdk/hub.py
--rw-r--r--  2.0 unx     1539 b- defN 23-Sep-08 07:40 aistudio_sdk/log.py
--rw-r--r--  2.0 unx     4161 b- defN 24-Jan-16 08:41 aistudio_sdk/util.py
--rw-r--r--  2.0 unx      387 b- defN 24-Jan-26 07:25 aistudio_sdk/version.py
--rw-r--r--  2.0 unx        0 b- defN 23-Aug-15 07:52 aistudio_sdk/model_resources/__init__.py
--rw-r--r--  2.0 unx     1394 b- defN 23-Oct-18 11:02 aistudio_sdk/model_resources/abstract.py
--rw-r--r--  2.0 unx      863 b- defN 23-Sep-08 07:40 aistudio_sdk/model_resources/chat.py
--rw-r--r--  2.0 unx      893 b- defN 23-Sep-08 07:40 aistudio_sdk/model_resources/embed.py
--rw-r--r--  2.0 unx        0 b- defN 23-Aug-15 07:52 aistudio_sdk/tests/__init__.py
--rw-r--r--  2.0 unx     1082 b- defN 24-Jan-30 02:14 aistudio_sdk-0.1.7.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Jan-30 02:14 aistudio_sdk-0.1.7.dist-info/WHEEL
--rw-r--r--  2.0 unx       13 b- defN 24-Jan-30 02:14 aistudio_sdk-0.1.7.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     1494 b- defN 24-Jan-30 02:14 aistudio_sdk-0.1.7.dist-info/RECORD
-18 files, 65439 bytes uncompressed, 19416 bytes compressed:  70.3%
+Zip file size: 27597 bytes, number of entries: 23
+-rw-r--r--  2.0 unx      534 b- defN 24-Apr-10 03:07 aistudio_sdk/__init__.py
+-rw-r--r--  2.0 unx     4896 b- defN 24-Apr-10 03:07 aistudio_sdk/cmdline.py
+-rw-r--r--  2.0 unx     1397 b- defN 24-Apr-10 03:07 aistudio_sdk/config.py
+-rw-r--r--  2.0 unx    25051 b- defN 24-Apr-10 03:07 aistudio_sdk/hub.py
+-rw-r--r--  2.0 unx     1898 b- defN 24-Apr-10 03:07 aistudio_sdk/log.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-10 03:07 aistudio_sdk/constant/__init__.py
+-rw-r--r--  2.0 unx      626 b- defN 24-Apr-10 03:07 aistudio_sdk/constant/const.py
+-rw-r--r--  2.0 unx     2386 b- defN 24-Apr-10 03:07 aistudio_sdk/constant/err_code.py
+-rw-r--r--  2.0 unx      387 b- defN 24-Apr-10 03:07 aistudio_sdk/constant/version.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-10 03:07 aistudio_sdk/requests/__init__.py
+-rw-r--r--  2.0 unx    16430 b- defN 24-Apr-10 03:07 aistudio_sdk/requests/hub.py
+-rw-r--r--  2.0 unx     5201 b- defN 24-Apr-10 03:07 aistudio_sdk/requests/pipeline.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-10 03:07 aistudio_sdk/sdk/__init__.py
+-rw-r--r--  2.0 unx    12521 b- defN 24-Apr-10 03:07 aistudio_sdk/sdk/pipeline.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-10 03:07 aistudio_sdk/tests/__init__.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-10 03:07 aistudio_sdk/utils/__init__.py
+-rw-r--r--  2.0 unx     5653 b- defN 24-Apr-10 03:07 aistudio_sdk/utils/bos_sdk.py
+-rw-r--r--  2.0 unx     4785 b- defN 24-Apr-10 03:07 aistudio_sdk/utils/util.py
+-rw-r--r--  2.0 unx     1130 b- defN 24-Apr-10 03:07 aistudio_sdk-0.2.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-10 03:07 aistudio_sdk-0.2.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx       55 b- defN 24-Apr-10 03:07 aistudio_sdk-0.2.0.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       13 b- defN 24-Apr-10 03:07 aistudio_sdk-0.2.0.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     1929 b- defN 24-Apr-10 03:07 aistudio_sdk-0.2.0.dist-info/RECORD
+23 files, 84984 bytes uncompressed, 24441 bytes compressed:  71.2%
```

## zipnote {}

```diff
@@ -1,55 +1,70 @@
 Filename: aistudio_sdk/__init__.py
 Comment: 
 
-Filename: aistudio_sdk/api_requester.py
+Filename: aistudio_sdk/cmdline.py
 Comment: 
 
-Filename: aistudio_sdk/bos_sdk.py
+Filename: aistudio_sdk/config.py
 Comment: 
 
-Filename: aistudio_sdk/config.py
+Filename: aistudio_sdk/hub.py
+Comment: 
+
+Filename: aistudio_sdk/log.py
 Comment: 
 
-Filename: aistudio_sdk/err_code.py
+Filename: aistudio_sdk/constant/__init__.py
 Comment: 
 
-Filename: aistudio_sdk/hub.py
+Filename: aistudio_sdk/constant/const.py
 Comment: 
 
-Filename: aistudio_sdk/log.py
+Filename: aistudio_sdk/constant/err_code.py
 Comment: 
 
-Filename: aistudio_sdk/util.py
+Filename: aistudio_sdk/constant/version.py
 Comment: 
 
-Filename: aistudio_sdk/version.py
+Filename: aistudio_sdk/requests/__init__.py
 Comment: 
 
-Filename: aistudio_sdk/model_resources/__init__.py
+Filename: aistudio_sdk/requests/hub.py
 Comment: 
 
-Filename: aistudio_sdk/model_resources/abstract.py
+Filename: aistudio_sdk/requests/pipeline.py
 Comment: 
 
-Filename: aistudio_sdk/model_resources/chat.py
+Filename: aistudio_sdk/sdk/__init__.py
 Comment: 
 
-Filename: aistudio_sdk/model_resources/embed.py
+Filename: aistudio_sdk/sdk/pipeline.py
 Comment: 
 
 Filename: aistudio_sdk/tests/__init__.py
 Comment: 
 
-Filename: aistudio_sdk-0.1.7.dist-info/METADATA
+Filename: aistudio_sdk/utils/__init__.py
+Comment: 
+
+Filename: aistudio_sdk/utils/bos_sdk.py
+Comment: 
+
+Filename: aistudio_sdk/utils/util.py
+Comment: 
+
+Filename: aistudio_sdk-0.2.0.dist-info/METADATA
+Comment: 
+
+Filename: aistudio_sdk-0.2.0.dist-info/WHEEL
 Comment: 
 
-Filename: aistudio_sdk-0.1.7.dist-info/WHEEL
+Filename: aistudio_sdk-0.2.0.dist-info/entry_points.txt
 Comment: 
 
-Filename: aistudio_sdk-0.1.7.dist-info/top_level.txt
+Filename: aistudio_sdk-0.2.0.dist-info/top_level.txt
 Comment: 
 
-Filename: aistudio_sdk-0.1.7.dist-info/RECORD
+Filename: aistudio_sdk-0.2.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## aistudio_sdk/__init__.py

```diff
@@ -5,21 +5,17 @@
 # Copyright (c) 2023 Baidu.com, Inc. All Rights Reserved
 #
 ################################################################################
 """
 Authors: xiangyiqing(xiangyiqing@baidu.com)
 Date:    2023/07/24
 """
-import os
-from aistudio_sdk import config
-from aistudio_sdk.version import VERSION
-from aistudio_sdk.model_resources import chat, embed
+from aistudio_sdk.constant.version import VERSION
+from aistudio_sdk.log import get_level
 from aistudio_sdk import hub
 
-log_level = os.environ.get("AISTUDIO_LOG", config.DEFAULT_LOG_LEVEL)
+log_level = get_level()
 
 __version__ = VERSION
 __all__ = [
-    "chat",
-    "embed",
     "hub",
 ]
```

## aistudio_sdk/config.py

```diff
@@ -21,19 +21,21 @@
 
 COMMON_FILE_SIZE_LIMIT = 5 * 1024 * 1024  # 5M
 LFS_FILE_SIZE_LIMIT = 50 * 1024 * 1024 * 1024 # 50G
 LFS_FILE_SIZE_LIMIT_PUT = 5 * 1024 * 1024 * 1024 # 5G
 
 # host
 STUDIO_GIT_HOST_DEFAULT = "http://git.aistudio.baidu.com"
-STUDIO_MODEL_API_URL_PREFIX_DEFAULT = "https://aistudio.baidu.com"
+STUDIO_MODEL_API_URL_PREFIX_DEFAULT = "https://sandbox-aistudio.baidu.com"
 
-# AI Studio API
-COMPLETION_URL = "/llm/lmapi/api/v1/chat/completions"
-EMBEDDING_URL = "/llm/lmapi/api/v1/embedding"
+# Hub API
 HUB_URL = "/studio/model/sdk/add"
 HUB_URL_VISIBLE_CHECK = "/modelcenter/v2/models/sdk/checkPermit"
 
-# 文心千帆官方API https://cloud.baidu.com/doc/WENXINWORKSHOP/s/Nlks5zkzu
-WENXIN_URL_PREFIX = "https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop"
-WENXIN_ERNIE_BOT_URL = "/chat/completions?access_token=xxx"
-WENXIN_EMBEDDING_V1_URL = "/embeddings/embedding-v1?access_token=xxx"
+# PP Pipeline API
+MOUNT_DATASET_LIMIT = 3
+PIPELINE_CODE_SIZE_LIMIT = 50 * 1024 * 1024     # bytes
+PIPELINE_CREATE_URL = "/paddlex/v3/pipelines/sdk/create"
+PIPELINE_CREATE_CALLBACK_URL = "/paddlex/v3/pipelines/sdk/create/callback"
+PIPELINE_BOSACL_URL = "/paddlex/v3/file/api/bosacl"
+PIPELINE_QUERY_URL = "/paddlex/v3/pipelines/sdk/list"
+PIPELINE_STOP_URL = "/paddlex/v3/pipelines/sdk/stop"
```

### encoding

```diff
@@ -1 +1 @@
-utf-8
+us-ascii
```

## aistudio_sdk/hub.py

```diff
@@ -4,37 +4,45 @@
 #
 # Copyright (c) 2023 Baidu.com, Inc. All Rights Reserved
 #
 ################################################################################
 """
 本文件实现了模型库hub接口封装
 
+TODO: 
+    当前脚本后续将移动至sdk目录下, 但用法将发生变化, 需和pm确认
+    旧：
+        from aistudio_sdk.hub import create_repo
+        create_repo()
+    新：
+        from aistudio_sdk import hub
+        hub.create_repo()
+
 Authors: linyichong(linyichong@baidu.com)
 Date:    2023/08/21
 """
 import os
 import logging
 import traceback
 from pathlib import Path
 from urllib.parse import quote
-from aistudio_sdk.model_resources.abstract import APIResource
-from aistudio_sdk.api_requester import request_aistudio_hub
-from aistudio_sdk.api_requester import request_aistudio_git_download
-from aistudio_sdk.api_requester import request_aistudio_git_file_info
-from aistudio_sdk.api_requester import request_aistudio_git_file_type
-from aistudio_sdk.api_requester import request_aistudio_git_upload_access
-from aistudio_sdk.api_requester import request_bos_upload
-from aistudio_sdk.api_requester import request_aistudio_git_upload_pointer
-from aistudio_sdk.api_requester import request_aistudio_git_upload_common
-from aistudio_sdk.api_requester import get_exist_file_old_sha
-from aistudio_sdk.api_requester import request_aistudio_repo_visible
-from aistudio_sdk.api_requester import request_aistudio_verify_lfs_file
-from aistudio_sdk.util import convert_to_dict_object, is_valid_host, calculate_sha256
-from aistudio_sdk.util import err_resp
-from aistudio_sdk import err_code
+from aistudio_sdk.constant.err_code import ErrorEnum
+from aistudio_sdk.requests.hub import request_aistudio_hub
+from aistudio_sdk.requests.hub import request_aistudio_git_download
+from aistudio_sdk.requests.hub import request_aistudio_git_file_info
+from aistudio_sdk.requests.hub import request_aistudio_git_file_type
+from aistudio_sdk.requests.hub import request_aistudio_git_upload_access
+from aistudio_sdk.requests.hub import request_bos_upload
+from aistudio_sdk.requests.hub import request_aistudio_git_upload_pointer
+from aistudio_sdk.requests.hub import request_aistudio_git_upload_common
+from aistudio_sdk.requests.hub import get_exist_file_old_sha
+from aistudio_sdk.requests.hub import request_aistudio_repo_visible
+from aistudio_sdk.requests.hub import request_aistudio_verify_lfs_file
+from aistudio_sdk.utils.util import convert_to_dict_object, is_valid_host, calculate_sha256
+from aistudio_sdk.utils.util import err_resp
 from aistudio_sdk import config
 
 
 __all__ = [
     "create_repo",
     "download",
     "upload",
@@ -43,15 +51,15 @@
 
 class UploadFileException(Exception):
     """
     上传文件异常
     """
     pass
 
-class Hub(APIResource):
+class Hub():
     """Hub类"""
     OBJECT_NAME = "hub"
 
     def __init__(self):
         """初始化函数，从本地磁盘加载AI Studio认证令牌。
         
         Args:
@@ -74,48 +82,48 @@
     def create_repo(self, **kwargs):
         """
         创建一个repo仓库并返回创建成功后的信息。
         """
         # 参数检查
         str_params_not_valid = 'params not valid.'
         if "repo_id" not in kwargs:
-            return err_resp(err_code.ERR_PARAMS_INVALID, 
-                            str_params_not_valid)
+            return err_resp(ErrorEnum.PARAMS_INVALID.code, 
+                            ErrorEnum.PARAMS_INVALID.message)
 
         if 'private' in kwargs and kwargs['private'] not in (True, False):
-            return err_resp(err_code.ERR_PARAMS_INVALID, 
-                            str_params_not_valid)
+            return err_resp(ErrorEnum.PARAMS_INVALID.code, 
+                            ErrorEnum.PARAMS_INVALID.message)
         for key in ['repo_id', 'model_name', 'license', 'token']:
             if key in kwargs:
                 if type(kwargs[key]) != str:
-                    return err_resp(err_code.ERR_PARAMS_INVALID, 
-                                    str_params_not_valid)
+                    return err_resp(ErrorEnum.PARAMS_INVALID.code, 
+                                    ErrorEnum.PARAMS_INVALID.message)
                 kwargs[key] = kwargs[key].strip()
                 if not kwargs[key]:
-                    return err_resp(err_code.ERR_PARAMS_INVALID, 
-                                    str_params_not_valid)
+                    return err_resp(ErrorEnum.PARAMS_INVALID.code, 
+                                    ErrorEnum.PARAMS_INVALID.message)
 
         if not os.getenv("AISTUDIO_ACCESS_TOKEN") and 'token' not in kwargs:
-            return err_resp(err_code.ERR_TOKEN_IS_EMPTY,
-                            'token have not been set.')
+            return err_resp(ErrorEnum.TOKEN_IS_EMPTY.code,
+                            ErrorEnum.TOKEN_IS_EMPTY.message)
 
         if 'desc' in kwargs \
                 and type(kwargs['desc']) != str:
-            return err_resp(err_code.ERR_PARAMS_INVALID, 
-                            str_params_not_valid)
+            return err_resp(ErrorEnum.PARAMS_INVALID.code, 
+                            ErrorEnum.PARAMS_INVALID.message)
 
         # 兼容 带前缀的入参写法
         repo_name_raw = kwargs['repo_id']
         if "/" in repo_name_raw:
             user_name, repo_name = repo_name_raw.split('/')
             user_name = user_name.strip()
             repo_name = repo_name.strip()
             if not repo_name or not user_name:
-                return err_resp(err_code.ERR_PARAMS_INVALID, 
-                                str_params_not_valid)
+                return err_resp(ErrorEnum.PARAMS_INVALID.code, 
+                                ErrorEnum.PARAMS_INVALID.message)
             kwargs['repo_id'] = repo_name
         else:
             kwargs['repo_id'] = repo_name_raw
 
         params = {
             'repoType': 0 if kwargs.get('private') else 1,
             'repoName': kwargs['repo_id'],
@@ -123,20 +131,20 @@
             'desc': kwargs.get('desc', ''),
             'license': kwargs['license'].strip() if kwargs.get('license') else 'Apache License 2.0',
             'token': kwargs['token'] if 'token' in kwargs else ''
         }
         resp = convert_to_dict_object(request_aistudio_hub(**params))
         if 'errorCode' in resp and resp['errorCode'] != 0:
             if "repo already created" in resp['errorMsg']:
-                res = err_resp(err_code.ERR_REPO_EXISTS, 
+                res = err_resp(ErrorEnum.REPO_ALREADY_EXIST.code, 
                                resp['errorMsg'],
                                resp['errorCode'],
                                resp['logId'])  # 错误logid透传
             else:
-                res = err_resp(err_code.ERR_AISTUDIO_CREATE_REPO_FAILED, 
+                res = err_resp(ErrorEnum.AISTUDIO_CREATE_REPO_FAILED.code, 
                                resp['errorMsg'],
                                resp['errorCode'],
                                resp['logId'])
             return res
 
         res = {
             'model_name': resp['result']['modelName'],
@@ -157,65 +165,65 @@
             cache_dir: 下载后存放的目录，会存放一个软链接文件
             revision: 分支名
             token: 认证令牌
         """
         # 参数检查
         str_params_not_valid = 'params not valid.'
         if "repo_id" not in kwargs or "filename" not in kwargs:
-            return err_resp(err_code.ERR_PARAMS_INVALID,
-                            str_params_not_valid + "should provide param repo_id and filename")
+            return err_resp(ErrorEnum.PARAMS_INVALID.code,
+                            ErrorEnum.PARAMS_INVALID.message + "should provide param repo_id and filename")
 
         for key in ['filename', 'repo_id', 'revision', 'cache_dir', 'token']:
             if key in kwargs:
                 if type(kwargs[key]) != str:
-                    return err_resp(err_code.ERR_PARAMS_INVALID, 
-                                    str_params_not_valid + "should be str type: " + key)
+                    return err_resp(ErrorEnum.PARAMS_INVALID.code, 
+                                    ErrorEnum.PARAMS_INVALID.message + "should be str type: " + key)
                 kwargs[key] = kwargs[key].strip()
                 if not kwargs[key]:
-                    return err_resp(err_code.ERR_PARAMS_INVALID, 
-                                    str_params_not_valid + "should not be empty: " + key)
+                    return err_resp(ErrorEnum.PARAMS_INVALID.code, 
+                                    ErrorEnum.PARAMS_INVALID.message + "should not be empty: " + key)
         revision = kwargs['revision'] if kwargs.get('revision') else 'master'
         file_path = kwargs['filename']
         token = kwargs['token'] if 'token' in kwargs else ''
 
         repo_name = kwargs['repo_id']
         if "/" not in repo_name:
-            return err_resp(err_code.ERR_PARAMS_INVALID, 
-                            str_params_not_valid + "repo_name should be user_name/repo_name format.")
+            return err_resp(ErrorEnum.PARAMS_INVALID.code, 
+                            ErrorEnum.PARAMS_INVALID.message + "repo_name should be user_name/repo_name format.")
 
         user_name, repo_name = repo_name.split('/')
         user_name = user_name.strip()
         repo_name = repo_name.strip()
         if not repo_name or not user_name:
-            return err_resp(err_code.ERR_PARAMS_INVALID, 
-                            str_params_not_valid + "repo_name or user_name is empty.")
+            return err_resp(ErrorEnum.PARAMS_INVALID.code, 
+                            ErrorEnum.PARAMS_INVALID.message + "repo_name or user_name is empty.")
 
         git_host = os.getenv("STUDIO_GIT_HOST", default=config.STUDIO_GIT_HOST_DEFAULT)
         if not is_valid_host(git_host):
-            return err_resp(err_code.ERR_PARAMS_INVALID, 
+            return err_resp(ErrorEnum.PARAMS_INVALID.code, 
                             'host not valid.')
 
         # 检查仓库可见权限(他人的预发布仓库不能下载、查看)
         if os.environ.get("SKIP_REPO_VISIBLE_CHECK", default="false") != "true":
             params = {
                 'repoId': kwargs['repo_id'],
                 'token': kwargs['token'] if 'token' in kwargs else ''
             }
             resp = convert_to_dict_object(request_aistudio_repo_visible(**params))
             if 'errorCode' in resp and resp['errorCode'] != 0:
-                res = err_resp(err_code.ERR_AISTUDIO_NO_REPO_READ_AUTH,
+                res = err_resp(ErrorEnum.AISTUDIO_NO_REPO_READ_AUTH.code,
                                 resp['errorMsg'],
                                 resp['errorCode'],
                                 resp['logId'])
                 return res
 
         # 查询文件sha值
         info_res = request_aistudio_git_file_info(git_host, user_name, repo_name, file_path,
                                                   revision, token)
-        if 'error_code' in info_res and info_res['error_code'] != err_code.ERR_OK:
+        if 'error_code' in info_res and info_res['error_code'] != ErrorEnum.SUCCESS.code:
             return info_res
         file_sha = info_res['sha']
 
         # 构建source_path
         home = os.getenv("HOME")
         cache_home = os.getenv("AISTUDIO_CACHE_HOME", default=home)
         source_dir = Path(f"{cache_home}/.cache/aistudio/models/{repo_name}/blobs")
@@ -231,15 +239,15 @@
                 f"{git_host}/api/v1/repos/"
                 f"{quote(user_name, safe='')}/"
                 f"{quote(repo_name, safe='')}/media/"
                 f"{quote(file_path, safe='')}")
             if revision != 'master':
                 url += f"?ref={quote(revision, safe='')}"
             download_res = request_aistudio_git_download(url, source_path, token)
-            if 'error_code' in download_res and download_res['error_code'] != err_code.ERR_OK:
+            if 'error_code' in download_res and download_res['error_code'] != ErrorEnum.SUCCESS.code:
                 return download_res
 
         # 构建软链接的路径
         if 'cache_dir' in kwargs:
             cache_dir = kwargs['cache_dir']
             target_dir = Path(cache_dir)
         else:
@@ -317,15 +325,15 @@
 
         def _uploading_using_http():
             """
             使用http上传文件
             """
             try:
                 res = request_bos_upload(upload_href, file_path)
-                if 'error_code' in res and res['error_code'] != err_code.ERR_OK:
+                if 'error_code' in res and res['error_code'] != ErrorEnum.SUCCESS.code:
                     return res
                 return True
             except Exception as e:
                 raise UploadFileException(e)
 
         functions = []
         if is_sts_valid:
@@ -368,131 +376,133 @@
             token: 认证令牌
         return:
             message
         """
         # 参数检查
         str_params_not_valid = 'params not valid.'
         if "repo_id" not in kwargs or "path_or_fileobj" not in kwargs or "path_in_repo" not in kwargs:
-            return err_resp(err_code.ERR_PARAMS_INVALID,
-                            str_params_not_valid + "should provide param repo_id, path_or_fileobj and path_in_repo")
+            return err_resp(ErrorEnum.PARAMS_INVALID.code,
+                            ErrorEnum.PARAMS_INVALID.message 
+                            + "should provide param repo_id, path_or_fileobj and path_in_repo")
 
         for key in ['path_or_fileobj', 'repo_id', 'revision', 'path_in_repo', 
                     'commit_message', 'token']:
             if key in kwargs:
                 if type(kwargs[key]) != str:
-                    return err_resp(err_code.ERR_PARAMS_INVALID, 
-                                    str_params_not_valid + "should be str type: " + key)
+                    return err_resp(ErrorEnum.PARAMS_INVALID.code, 
+                                    ErrorEnum.PARAMS_INVALID.message + "should be str type: " + key)
                 kwargs[key] = kwargs[key].strip()
                 if not kwargs[key]:
-                    return err_resp(err_code.ERR_PARAMS_INVALID, 
-                                    str_params_not_valid + "should not be empty: " + key)
+                    return err_resp(ErrorEnum.PARAMS_INVALID.code, 
+                                    ErrorEnum.PARAMS_INVALID.message + "should not be empty: " + key)
 
         if not os.getenv("AISTUDIO_ACCESS_TOKEN") and 'token' not in kwargs:
-            return err_resp(err_code.ERR_TOKEN_IS_EMPTY,
-                            'token have not been set.')
+            return err_resp(ErrorEnum.TOKEN_IS_EMPTY.code,
+                            ErrorEnum.TOKEN_IS_EMPTY.message)
 
         revision = kwargs['revision'] if kwargs.get('revision') else 'master'
         commit_message = kwargs['commit_message'] if kwargs.get('commit_message') else ''
         token = kwargs['token'] if kwargs.get('token') else ''
 
         path_or_fileobj = Path(kwargs['path_or_fileobj'])
         path_in_repo = kwargs['path_in_repo']
 
         repo_id = kwargs['repo_id']
         if "/" not in repo_id:
-            return err_resp(err_code.ERR_PARAMS_INVALID, 
-                            str_params_not_valid + "repo_name should be user_name/repo_name format.")
+            return err_resp(ErrorEnum.PARAMS_INVALID.code, 
+                            ErrorEnum.PARAMS_INVALID.message + "repo_name should be user_name/repo_name format.")
 
         user_name, repo_name = repo_id.split('/')
         user_name = user_name.strip()
         repo_name = repo_name.strip()
         if not repo_name or not user_name:
-            return err_resp(err_code.ERR_PARAMS_INVALID, 
-                            str_params_not_valid + "repo_name or user_name is empty.")
+            return err_resp(ErrorEnum.PARAMS_INVALID.code, 
+                            ErrorEnum.PARAMS_INVALID.message + "repo_name or user_name is empty.")
 
         git_host = os.getenv("STUDIO_GIT_HOST", default=config.STUDIO_GIT_HOST_DEFAULT)
         if not is_valid_host(git_host):
-            return err_resp(err_code.ERR_PARAMS_INVALID, 
+            return err_resp(ErrorEnum.PARAMS_INVALID.code, 
                             'git host not valid.')
 
         # 检查待上传文件在本地磁盘是否存在
         if not os.path.exists(path_or_fileobj):
-            return err_resp(err_code.ERR_UPLOAD_FILE_NOT_FOUND,
+            return err_resp(ErrorEnum.UPLOAD_FILE_NOT_FOUND.code,
                             'file not found in path. ' + str(path_or_fileobj))
 
         # 检查待上传文件类型，不能是folder（目录）
         if os.path.isdir(path_or_fileobj):
-            return err_resp(err_code.ERR_UPLOAD_FOLDER_NO_SUPPORT,
+            return err_resp(ErrorEnum.UPLOAD_FOLDER_NO_SUPPORT.code,
                             'upload folder no support.' + str(path_or_fileobj))
 
         # 计算文件大小（byte）
         file_size = os.path.getsize(path_or_fileobj)
 
         
         # 第一步: 检查文件是否需要走LFS上传流程
         print("checking is file using lfs ..")
         res = request_aistudio_git_file_type(git_host, user_name, repo_name,
                                              revision, path_in_repo, token)
-        if 'error_code' in res and res['error_code'] != err_code.ERR_OK:
+        if 'error_code' in res and res['error_code'] != ErrorEnum.SUCCESS.code:
             return res
         is_lfs = res['is_lfs']
 
         # 计算sha256
         sha256 = calculate_sha256(path_or_fileobj)
 
         if is_lfs:
             print("Start uploading LFS file.")
             # 第二步：申请上传LFS文件
 
             res = request_aistudio_git_upload_access(git_host, user_name, repo_name, revision,
                                                      file_size, sha256, token)
             logging.debug(f"request_aistudio_git_upload_access res: {res}")
-            if 'error_code' in res and res['error_code'] != err_code.ERR_OK:
+            if 'error_code' in res and res['error_code'] != ErrorEnum.SUCCESS.code:
                 return res
 
             # 第三步：上传LFS文件
             if res.get('upload'):
 
                 upload_res = self._upload_lfs_file(res, path_or_fileobj, file_size)
                 if not upload_res:
                     logging.error("upload lfs file failed. 文件上传终止")
-                    return err_resp(err_code.ERR_GITEA_UPLOAD_FILE_FAILED, "lfs 文件上传失败")
+                    return err_resp(ErrorEnum.GITEA_UPLOAD_FILE_FAILED.code, 
+                                    f"lfs {ErrorEnum.GITEA_UPLOAD_FILE_FAILED.message}")
 
             else:
                 # bos存储中该文件已存在。只需要再创建一次指针文件到指定分支即可。
                 pass
 
             # 第四步：verify LFS file（判断文件是否存在）
             if res.get("verify_href"):
                 verify_res = request_aistudio_verify_lfs_file(res.get("verify_href"), sha256, file_size)
                 logging.info(f"verify lfs file res: {verify_res}")
-                if 'error_code' in verify_res and verify_res['error_code'] != err_code.ERR_OK:
+                if 'error_code' in verify_res and verify_res['error_code'] != ErrorEnum.SUCCESS.code:
                     logging.error("verify lfs file failed. 文件上传终止")
                     return verify_res
 
             # 第五步：上传LFS指针文件（到仓库）
             lfs_res = request_aistudio_git_upload_pointer(git_host, user_name, repo_name, revision,
                                                     commit_message, sha256, file_size, path_in_repo,
                                                     token)
-            if 'error_code' in lfs_res and lfs_res['error_code'] != err_code.ERR_OK:
+            if 'error_code' in lfs_res and lfs_res['error_code'] != ErrorEnum.SUCCESS.code:
                 return lfs_res
             logging.info(f"upload lfs pointer file success")
 
         else:
             print("Start uploading common file.")
             # 如果大小超标，报错返回
             if file_size > config.COMMON_FILE_SIZE_LIMIT:
-                return err_resp(err_code.ERR_UPLOAD_FILE_TOO_LARGE,
-                                'file too large(>5MB).')
+                return err_resp(ErrorEnum.FILE_TOO_LARGE.code,
+                                ErrorEnum.FILE_TOO_LARGE.message + '(>5MB).')
 
             # 上传普通文件（到仓库）
             res = request_aistudio_git_upload_common(git_host, user_name, repo_name, revision,
                                                      commit_message, path_or_fileobj, path_in_repo,
                                                      token)
-            if 'error_code' in res and res['error_code'] != err_code.ERR_OK:
+            if 'error_code' in res and res['error_code'] != ErrorEnum.SUCCESS.code:
                 return res
 
         return {'message': 'Upload Done.'}
 
 
     def file_exists(self, repo_id, filename, *args, **kwargs):
         """
@@ -508,50 +518,50 @@
         kwargs['repo_id'] = repo_id
         kwargs['filename'] = filename
 
         # 检查入参值的格式类型
         for key in ['filename', 'repo_id', 'revision', 'token']:
             if key in kwargs:
                 if type(kwargs[key]) != str:
-                    return err_resp(err_code.ERR_PARAMS_INVALID, 
-                                    str_params_not_valid)
+                    return err_resp(ErrorEnum.PARAMS_INVALID.code, 
+                                    ErrorEnum.PARAMS_INVALID.message)
                 kwargs[key] = kwargs[key].strip()
                 if not kwargs[key]:
-                    return err_resp(err_code.ERR_PARAMS_INVALID, 
-                                    str_params_not_valid)
+                    return err_resp(ErrorEnum.PARAMS_INVALID.code, 
+                                    ErrorEnum.PARAMS_INVALID.message)
         revision = kwargs['revision'] if kwargs.get('revision') else 'master'
         file_path = kwargs['filename']
         token = kwargs['token'] if 'token' in kwargs else ''
 
         repo_name = kwargs['repo_id']
         if "/" not in repo_name:
-            return err_resp(err_code.ERR_PARAMS_INVALID, 
-                            str_params_not_valid)
+            return err_resp(ErrorEnum.PARAMS_INVALID.code, 
+                            ErrorEnum.PARAMS_INVALID.message)
 
         user_name, repo_name = repo_name.split('/')
         user_name = user_name.strip()
         repo_name = repo_name.strip()
         if not repo_name or not user_name:
-            return err_resp(err_code.ERR_PARAMS_INVALID, 
-                            str_params_not_valid)
+            return err_resp(ErrorEnum.PARAMS_INVALID.code, 
+                            ErrorEnum.PARAMS_INVALID.message)
 
         call_host = os.getenv("STUDIO_GIT_HOST", default=config.STUDIO_GIT_HOST_DEFAULT)
         if not is_valid_host(call_host):
-            return err_resp(err_code.ERR_PARAMS_INVALID, 
+            return err_resp(ErrorEnum.PARAMS_INVALID.code, 
                             'host not valid.')
 
         if os.environ.get("SKIP_REPO_VISIBLE_CHECK", default="false") != "true":
             # 检查仓库可见权限(他人的预发布仓库不能下载、查看)
             params = {
                 'repoId': kwargs['repo_id'],
                 'token': kwargs['token'] if 'token' in kwargs else ''
             }
             resp = convert_to_dict_object(request_aistudio_repo_visible(**params))
             if 'errorCode' in resp and resp['errorCode'] != 0:
-                res = err_resp(err_code.ERR_AISTUDIO_NO_REPO_READ_AUTH,
+                res = err_resp(ErrorEnum.AISTUDIO_NO_REPO_READ_AUTH.code,
                                 resp['errorMsg'],
                                 resp['errorCode'],
                                 resp['logId'])
                 return res
 
         # 查询文件是否存在
         info_res = request_aistudio_git_file_info(call_host, user_name, repo_name, file_path,
```

## aistudio_sdk/log.py

```diff
@@ -10,59 +10,70 @@
 
 Authors: xiangyiqing(xiangyiqing@baidu.com)
 Date:    2023/07/24
 """
 import os
 import logging
 from aistudio_sdk import config
+from aistudio_sdk.constant.const import LOG_LEVEL_FILE
 
+__all__ = [
+    "info",
+    "debug",
+    "warn",
+    "error",
+    "get_level",
+]
+
+
+def get_level():
+    """
+    三种设置日志级别的方式，优先级从高到低：
+    1、执行前, 设置环境变量 AISTUDIO_LOG 的值
+    2、执行前, 设置level值到文件 ${AISTUDIO_CACHE_HOME}/.cache/aistudio/.log/level
+    3、执行前, 设置config文件中DEFAULT_LOG_LEVEL的值
+    """
+    if "AISTUDIO_LOG" in os.environ:
+        return os.getenv("AISTUDIO_LOG")
+    
+    if os.path.exists(LOG_LEVEL_FILE):
+        try:
+            with open(LOG_LEVEL_FILE, 'r') as file:
+                return file.read().strip()
+        except:
+            pass
+        
+    return config.DEFAULT_LOG_LEVEL
+
+
+# 初始化
 logger = logging.getLogger("aistudio_sdk")
-logger.setLevel(logging.INFO)
+level = get_level()
+if level == "debug":
+    logger.setLevel(logging.DEBUG)
+else:
+    logger.setLevel(logging.INFO)
 
 # 日志输出格式
 formatter = logging.Formatter(fmt='%(message)s')
 
 # 控制台输出
 console_handler = logging.StreamHandler()
 console_handler.setFormatter(formatter)
 logger.addHandler(console_handler)
 
-__all__ = [
-    "info",
-    "debug",
-    "warn",
-    "error",
-]
-
-def set_log_level(f):
-    """设置日志级别: info / debug"""
-    def wrapper(*args, **kwargs):
-        """log wrapper"""
-        level = os.environ.get("AISTUDIO_LOG", config.DEFAULT_LOG_LEVEL)
-        if level == "info":
-            logger.setLevel(logging.INFO)
-        else:
-            logger.setLevel(logging.DEBUG)
-        
-        return f(*args, **kwargs)
-    return wrapper
-
 
-@set_log_level
 def info(msg):
     """log evel: INFO"""
     logger.log(logging.INFO, msg)
 
-@set_log_level
 def debug(msg):
     """log evel: DEBUG"""
-    logger.log(logging.DEBUG, msg)
+    logger.log(logging.DEBUG, f"[DEBUG] {msg}")
 
-@set_log_level
 def warn(msg):
     """log evel: WARN"""
     logger.log(logging.WARN, msg)
 
-@set_log_level
 def error(msg):
     """log evel: ERROR"""
     logger.log(logging.ERROR, msg)
```

## Comparing `aistudio_sdk/api_requester.py` & `aistudio_sdk/requests/hub.py`

 * *Files 12% similar despite different names*

```diff
@@ -2,165 +2,41 @@
 # -*- coding: UTF-8 -*-
 ################################################################################
 #
 # Copyright (c) 2023 Baidu.com, Inc. All Rights Reserved
 #
 ################################################################################
 """
-本文件实现了请求过程
+本文件实现了请求hub
 
 Authors: xiangyiqing(xiangyiqing@baidu.com)
 Date:    2023/07/24
 """
 import os
 import time
 import tqdm
 import json
 import requests
 import logging
 from urllib.parse import quote
-from aistudio_sdk import err_code
+from aistudio_sdk.constant.err_code import ErrorEnum
+from aistudio_sdk.constant import err_code
 from aistudio_sdk import config, log
-from aistudio_sdk.util import err_resp
-from aistudio_sdk.util import gen_ISO_format_datestr
-from aistudio_sdk.util import file_to_base64
-from aistudio_sdk.util import create_sha256_file_and_encode_base64
-from aistudio_sdk.version import VERSION
+from aistudio_sdk.utils.util import err_resp
+from aistudio_sdk.utils.util import gen_ISO_format_datestr
+from aistudio_sdk.utils.util import file_to_base64
+from aistudio_sdk.utils.util import create_sha256_file_and_encode_base64
+from aistudio_sdk.constant.version import VERSION
 
 CONNECTION_RETRY_TIMES = config.CONNECTION_RETRY_TIMES
 CONNECTION_TIMEOUT = config.CONNECTION_TIMEOUT
 CONNECTION_TIMEOUT_DOWNLOAD = config.CONNECTION_TIMEOUT_DOWNLOAD
 CONNECTION_TIMEOUT_UPLOAD = config.CONNECTION_TIMEOUT_UPLOAD
 
 
-def _request(method, url, headers, data):
-    """
-    Params
-        :url: http url
-        :headers: dictionary of HTTP Headers to send
-        :json_data: json data to send in the body
-        :data: dictionary, list of tuples, bytes, or file-like object to send in the body
-    Returns
-        response data in json format
-    """
-    for _ in range(CONNECTION_RETRY_TIMES):
-        try:
-            err_msg = ''
-            response = requests.request(method, url, headers=headers, data=data, timeout=CONNECTION_TIMEOUT)
-            return response.json()
-        except requests.exceptions.JSONDecodeError:
-            err_msg = "Response body does not contain valid json: {}".format(response)
-        except Exception as e:
-            err_msg = 'Error occurred when request for "{}": {}.'.format(url, str(e))
-
-    log.debug(err_msg)
-    return err_resp(err_code.ERR_FAILED, 
-                    err_msg[:500])
-
-
-#################### AIStudio API ####################
-def _post_aistudio(model_url, **kwargs):
-    """请求AIStudio API"""
-    url = "{}{}".format(
-        os.getenv("STUDIO_MODEL_API_URL_PREFIX", default=config.STUDIO_MODEL_API_URL_PREFIX_DEFAULT),
-        model_url
-    )
-    authorization = kwargs.pop("authorization", "")
-    body = {k: v for k, v in kwargs.items()}
-    log.debug(body)
-    
-    payload = json.dumps(body)
-    headers = {
-        'Content-Type': 'application/json',
-        'Authorization': authorization,
-        'SDK-Version': str(VERSION),
-    }
-    resp = _request('POST', url, headers, payload)
-
-    def extract_ernie_response(resp):
-        """
-        extract ernie bot response from aistudio response
-        Param
-            :resp: {'logId': '67635a456177a8665cc5e4060e4b7f76', 'errorCode': 0, 'errorMsg': 'success', 'result': <ernie_bot_response_info...>}
-        Return
-            <ernie_bot_response_info>
-        """
-        # no response
-        if not resp:
-            return err_resp(err_code.ERR_FAILED,
-                            "Ernie response is empty.")
-        
-        # not aistudio-formatted
-        if "logId" not in resp:
-            return resp
-        
-        error_code = resp.get("errorCode", None)
-        # success
-        if error_code == err_code.ERR_OK:
-            return resp.get("result", None)
-        # error
-        log.debug(resp)
-        error_msg = resp.get("errorMsg", None)
-        return err_resp(error_code, error_msg)
-
-    return extract_ernie_response(resp)
-
-
-def request_aistudio_completion(**kwargs):
-    """
-    请求AIStudio chat completion
-    """
-    url = config.COMPLETION_URL
-    kwargs.update({'authorization': 'token {} {}'.format(kwargs.pop("user_id", ""), kwargs.pop("token", ""))})
-    return _post_aistudio(url, **kwargs)
-
-
-def request_aistudio_embedding(**kwargs):
-    """
-    请求AIStudio embed
-    """
-    url = config.EMBEDDING_URL
-    kwargs.update({'authorization': 'token {} {}'.format(kwargs.pop("user_id", ""), kwargs.pop("token", ""))})
-    return _post_aistudio(url, **kwargs)
-
-
-#################### 文心千帆官方API ####################
-def _post_wenxinworkshop(url, **kwargs):
-    """
-    请求文心千帆官方API
-    Params
-        url: http url后缀
-    """
-    url = "{}{}".format(config.WENXIN_URL_PREFIX, url)
-    body = {k: v for k, v in kwargs.items()}
-    payload = json.dumps(body)
-    headers = {
-        'Content-Type': 'application/json'
-    }
-    return _request('POST', url, headers, payload)
-
-
-def request_wenxin_ernie_bot(**kwargs):
-    """
-    请求文心千帆 ERNIE-Bot 模型
-    - doc: https://cloud.baidu.com/doc/WENXINWORKSHOP/s/jlil56u11
-    """
-    url = config.WENXIN_ERNIE_BOT_URL
-    return _post_wenxinworkshop(url, **kwargs)
-
-
-def request_wenxin_embedding_v1(**kwargs):
-    """
-    请求文心千帆 Embedding-V1 模型
-    - doc: https://cloud.baidu.com/doc/WENXINWORKSHOP/s/alj562vvu
-    """
-    url = config.WENXIN_EMBEDDING_V1_URL
-    return _post_wenxinworkshop(url, **kwargs)
-
-
 #################### AIStudio 云端模型库 API ####################
 def _request_aistudio_hub(method, url, headers, data):
     """
     request aistudio hub
     """
     for _ in range(CONNECTION_RETRY_TIMES):
         try:
@@ -169,15 +45,15 @@
                                         data=data, timeout=CONNECTION_TIMEOUT)
             return response.json()
         except requests.exceptions.JSONDecodeError:
             err_msg = "Response body does not contain valid json: {}".format(response)
             biz_code = response.status_code
 
     log.debug(err_msg)
-    return err_resp(err_code.ERR_FAILED, 
+    return err_resp(ErrorEnum.INTERNAL_ERROR.code, 
                     err_msg[:500],
                     biz_code)
 
 
 def request_aistudio_hub(**kwargs):
     """
     请求AIStudio hub
@@ -216,15 +92,15 @@
         response = requests.request(method, url, headers=headers,
                                     timeout=CONNECTION_TIMEOUT)
         return response.json()
     except requests.exceptions.JSONDecodeError:
         err_msg = "Response body does not contain valid json: {}".format(response)
         biz_code = response.status_code
 
-    return err_resp(err_code.ERR_FAILED, 
+    return err_resp(ErrorEnum.INTERNAL_ERROR.code, 
                     err_msg[:500],
                     biz_code)
 
 
 #################### AIStudio Gitea API ####################
 def _request_gitea(method, url, headers, data):
     """
@@ -232,16 +108,16 @@
     """
     for _ in range(CONNECTION_RETRY_TIMES):
         session = requests.Session()
         response = session.request(method, url, headers=headers, data=data, timeout=CONNECTION_TIMEOUT)
         session.close()
 
         if response.status_code not in (200, 201):
-            return err_resp(err_code.ERR_GITEA_DOWNLOAD_FILE_FAILED if
-                            method == "GET" else err_code.ERR_GITEA_UPLOAD_FILE_FAILED,
+            return err_resp(ErrorEnum.GITEA_DOWNLOAD_FILE_FAILED.code if
+                            method == "GET" else ErrorEnum.GITEA_UPLOAD_FILE_FAILED.code,
                             response.content.decode()[:500],
                             biz_code=response.status_code)
         else:
             return response.json()
 
 
 def timing_decorator(func):
@@ -265,15 +141,15 @@
     """
     session = requests.Session()
     response = session.request(method, url, headers=headers, data=data, 
                                stream=True, timeout=CONNECTION_TIMEOUT_UPLOAD)
     session.close()
 
     if response.status_code not in (200, 201):
-        return err_resp(err_code.ERR_GITEA_UPLOAD_FILE_FAILED, 
+        return err_resp(ErrorEnum.GITEA_UPLOAD_FILE_FAILED.code, 
                         response.content[:500],
                         biz_code=response.status_code)
     else:
         return response.json()
 
 
 @timing_decorator
@@ -294,19 +170,19 @@
         ret = {}
     elif response.status_code == 404:
         try:
             message = response.json()["message"]
         except requests.exceptions.JSONDecodeError:
             message = response.content.decode()
 
-        ret = err_resp(err_code.ERR_FILE_NOT_FOUND, 
+        ret = err_resp(ErrorEnum.FILE_NOT_FOUND.code, 
                         message,
                         response.status_code)
     else:
-        ret = err_resp(err_code.ERR_GITEA_DOWNLOAD_FILE_FAILED, 
+        ret = err_resp(ErrorEnum.GITEA_DOWNLOAD_FILE_FAILED.code, 
                         f'Download failed, response code: {response.status_code}',
                         response.status_code)
 
     total_size = int(response.headers.get('content-length', 0))
     block_size = 1024 * 100
     progress_bar = tqdm.tqdm(total=total_size, ncols=50, unit='iB', unit_scale=True, 
                              desc='Downloading file')
@@ -367,15 +243,15 @@
 
     payload = json.dumps(params)
     result = _request_gitea('POST', url, headers, data=payload)
     logging.debug(f"...result of POST /preupload: {result}")
     if 'error_code' in result:
         res = result
     elif 'files' not in result or not result['files'] or 'lfs' not in result['files'][0]:
-        res = err_resp(err_code.ERR_GITEA_FAILED, 
+        res = err_resp(ErrorEnum.GITEA_FAILED.code, 
                         str(result)[:500])
     else:
         res = {
             'is_lfs': result['files'][0]['lfs']
         }
 
     return res
@@ -450,15 +326,15 @@
     
     payload = json.dumps(params)
     result = _request_gitea('POST', url, headers, payload)
     logging.debug(f"...result of POST /batch: {result}")
     if 'error_code' in result:
         res = result
     elif 'objects' not in result or not result['objects']:
-        res = err_resp(err_code.ERR_GITEA_FAILED, 
+        res = err_resp(ErrorEnum.GITEA_FAILED.code, 
                         str(result)[:500])
     else:
         tmp = result['objects'][0]
         # 已经存在的文件，不需要上传，actions为空
         res = {
             'upload': True if 'actions' in tmp and 'upload' in tmp['actions'] else False,
             'upload_href': tmp['actions']['upload']['href'] if 'actions' in tmp else '',
@@ -598,15 +474,15 @@
         "oid": oid,
         "size": size
     }
     header = _header_fill(headers, token=token)
     res = requests.request("POST", call_host, headers=header, json=params, data=json.dumps(params))
     logging.debug(f"...result of POST /verify: {res.text}")
     if res.status_code not in (200, 201):
-        return err_resp(err_code.ERR_GITEA_UPLOAD_FILE_FAILED,
+        return err_resp(ErrorEnum.GITEA_UPLOAD_FILE_FAILED.code,
                         res.json(),
                         biz_code=res.status_code)
     else:
         return res.json()
 
 
 def _header_fill(params=None, token=''):
```

## Comparing `aistudio_sdk/bos_sdk.py` & `aistudio_sdk/utils/bos_sdk.py`

 * *Files identical despite different names*

## Comparing `aistudio_sdk/util.py` & `aistudio_sdk/utils/util.py`

 * *Files 14% similar despite different names*

```diff
@@ -7,18 +7,21 @@
 ################################################################################
 """
 本文件实现了常用的工具函数
 
 Authors: xiangyiqing(xiangyiqing@baidu.com)
 Date:    2023/07/24
 """
+import os
 import re
 import base64
 import hashlib
 from datetime import datetime
+import zipfile
+
 
 class Dict(dict):
     """dict class"""
     def __getattr__(self, key):
         value = self.get(key, None)
         return Dict(value) if isinstance(value, dict) else value
     
@@ -127,15 +130,14 @@
     # 将原始字符串编码为字节数组
     bytes_data = original_string.encode('utf-8')
     # 使用base64进行编码
     base64_encoded = base64.b64encode(bytes_data).decode('utf-8')
     return base64_encoded
 
 
-import os
 def create_sha256_file_and_encode_base64(sha256, size):
     """生成指定内容的文件并进行base64编码字符串返回"""
     content = f"version https://git-lfs.github.com/spec/v1\noid sha256:{sha256}\nsize {size}"
     name = 'sha256_value'
     with open(name, 'w') as file:
         file.write(content)
 
@@ -146,7 +148,24 @@
 
 def file_to_base64(filename):
     """读取文件内容并进行Base64编码"""
     with open(filename, "rb") as file:
         contents = file.read()
         encoded_contents = base64.b64encode(contents)
     return encoded_contents.decode('utf-8')
+
+
+def zip_dir(dirpath, out_full_name):
+    """
+    压缩指定文件夹
+    :param dirpath: 目标文件夹路径
+    :param out_full_name: 压缩文件保存路径 xxxx.zip
+    :return: 无
+    """
+    zip_obj = zipfile.ZipFile(out_full_name, "w", zipfile.ZIP_DEFLATED)
+    for path, dirnames, filenames in os.walk(dirpath):
+        # 去掉目标跟路径，只对目标文件夹下边的文件及文件夹进行压缩
+        fpath = path.replace(dirpath, '')
+ 
+        for filename in filenames:
+            zip_obj.write(os.path.join(path, filename), os.path.join(fpath, filename))
+    zip_obj.close()
```

