# Comparing `tmp/ip_check-1.5.4-py3-none-any.whl.zip` & `tmp/ip_check-1.5.5-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,33 +1,33 @@
-Zip file size: 38141 bytes, number of entries: 31
+Zip file size: 38567 bytes, number of entries: 31
 -rw-rw-r--  2.0 unx      383 b- defN 24-Mar-19 08:00 ipcheck/__init__.py
--rw-rw-r--  2.0 unx     6184 b- defN 24-Apr-09 05:35 ipcheck/geoinfo.py
--rw-rw-r--  2.0 unx    10544 b- defN 24-Apr-09 07:16 ipcheck/main.py
+-rw-rw-r--  2.0 unx     6184 b- defN 24-Apr-09 08:53 ipcheck/geoinfo.py
+-rw-rw-r--  2.0 unx    10289 b- defN 24-Apr-10 02:31 ipcheck/main.py
 -rw-rw-r--  2.0 unx        0 b- defN 24-Mar-14 08:04 ipcheck/app/__init__.py
 -rw-rw-r--  2.0 unx      726 b- defN 24-Mar-14 08:04 ipcheck/app/base_config.py
 -rw-rw-r--  2.0 unx      388 b- defN 24-Mar-14 08:04 ipcheck/app/common_config.py
--rw-rw-r--  2.0 unx     6052 b- defN 24-Mar-25 07:07 ipcheck/app/config.py
+-rw-rw-r--  2.0 unx     6117 b- defN 24-Apr-10 01:08 ipcheck/app/config.py
 -rw-rw-r--  2.0 unx     1773 b- defN 24-Mar-19 08:00 ipcheck/app/default_config.py
--rw-rw-r--  2.0 unx     1233 b- defN 24-Apr-09 03:10 ipcheck/app/gen_ip_utils.py
--rw-rw-r--  2.0 unx     1894 b- defN 24-Apr-09 01:00 ipcheck/app/ip_info.py
+-rw-rw-r--  2.0 unx     1483 b- defN 24-Apr-10 03:18 ipcheck/app/gen_ip_utils.py
+-rw-rw-r--  2.0 unx     1918 b- defN 24-Apr-10 01:23 ipcheck/app/ip_info.py
 -rw-rw-r--  2.0 unx     2546 b- defN 24-Mar-14 08:04 ipcheck/app/rtt_test.py
 -rw-rw-r--  2.0 unx      223 b- defN 24-Mar-14 08:04 ipcheck/app/rtt_test_config.py
--rw-rw-r--  2.0 unx     5656 b- defN 24-Apr-08 09:02 ipcheck/app/speed_test.py
+-rw-rw-r--  2.0 unx     5656 b- defN 24-Apr-09 08:53 ipcheck/app/speed_test.py
 -rw-rw-r--  2.0 unx      223 b- defN 24-Mar-14 08:04 ipcheck/app/speed_test_config.py
--rw-rw-r--  2.0 unx     2537 b- defN 24-Apr-09 02:27 ipcheck/app/utils.py
--rw-rw-r--  2.0 unx     3765 b- defN 24-Apr-09 05:22 ipcheck/app/valid_test.py
--rw-rw-r--  2.0 unx      362 b- defN 24-Apr-09 01:09 ipcheck/app/valid_test_config.py
--rw-rw-r--  2.0 unx        0 b- defN 24-Apr-09 01:18 ipcheck/app/ipparser/__init__.py
--rw-rw-r--  2.0 unx      364 b- defN 24-Apr-09 02:58 ipcheck/app/ipparser/base_parser.py
--rw-rw-r--  2.0 unx      671 b- defN 24-Apr-09 02:57 ipcheck/app/ipparser/ip_cidr_parser.py
--rw-rw-r--  2.0 unx      804 b- defN 24-Apr-09 06:09 ipcheck/app/ipparser/ip_dir_parser.py
--rw-rw-r--  2.0 unx     1110 b- defN 24-Apr-09 03:05 ipcheck/app/ipparser/ip_file_parser.py
--rw-rw-r--  2.0 unx      502 b- defN 24-Apr-09 02:57 ipcheck/app/ipparser/ip_parser.py
+-rw-rw-r--  2.0 unx     3149 b- defN 24-Apr-10 01:20 ipcheck/app/utils.py
+-rw-rw-r--  2.0 unx     3765 b- defN 24-Apr-09 08:53 ipcheck/app/valid_test.py
+-rw-rw-r--  2.0 unx      362 b- defN 24-Apr-09 08:53 ipcheck/app/valid_test_config.py
+-rw-rw-r--  2.0 unx        0 b- defN 24-Apr-09 08:53 ipcheck/app/ipparser/__init__.py
+-rw-rw-r--  2.0 unx      954 b- defN 24-Apr-10 02:18 ipcheck/app/ipparser/base_parser.py
+-rw-rw-r--  2.0 unx      673 b- defN 24-Apr-10 01:43 ipcheck/app/ipparser/ip_cidr_parser.py
+-rw-rw-r--  2.0 unx      835 b- defN 24-Apr-10 02:27 ipcheck/app/ipparser/ip_dir_parser.py
+-rw-rw-r--  2.0 unx     1138 b- defN 24-Apr-10 03:17 ipcheck/app/ipparser/ip_file_parser.py
+-rw-rw-r--  2.0 unx      522 b- defN 24-Apr-10 01:48 ipcheck/app/ipparser/ip_parser.py
 -rw-r--r--  2.0 unx      738 b- defN 24-Apr-09 02:56 ipcheck/app/ipparser/ip_path_parser.py
--rw-rw-r--  2.0 unx     1071 b- defN 24-Apr-09 02:56 ipcheck/app/ipparser/ip_port_parser.py
--rw-rw-r--  2.0 unx    35148 b- defN 24-Apr-09 07:24 ip_check-1.5.4.dist-info/LICENSE
--rw-rw-r--  2.0 unx     5483 b- defN 24-Apr-09 07:24 ip_check-1.5.4.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 24-Apr-09 07:24 ip_check-1.5.4.dist-info/WHEEL
--rw-r--r--  2.0 unx      201 b- defN 24-Apr-09 07:24 ip_check-1.5.4.dist-info/entry_points.txt
--rw-r--r--  2.0 unx        8 b- defN 24-Apr-09 07:24 ip_check-1.5.4.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2601 b- defN 24-Apr-09 07:24 ip_check-1.5.4.dist-info/RECORD
-31 files, 93282 bytes uncompressed, 33945 bytes compressed:  63.6%
+-rw-rw-r--  2.0 unx     1078 b- defN 24-Apr-10 02:10 ipcheck/app/ipparser/ip_port_parser.py
+-rw-rw-r--  2.0 unx    35148 b- defN 24-Apr-10 03:23 ip_check-1.5.5.dist-info/LICENSE
+-rw-rw-r--  2.0 unx     5522 b- defN 24-Apr-10 03:23 ip_check-1.5.5.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 24-Apr-10 03:23 ip_check-1.5.5.dist-info/WHEEL
+-rw-r--r--  2.0 unx      201 b- defN 24-Apr-10 03:23 ip_check-1.5.5.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx        8 b- defN 24-Apr-10 03:23 ip_check-1.5.5.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     2601 b- defN 24-Apr-10 03:23 ip_check-1.5.5.dist-info/RECORD
+31 files, 94695 bytes uncompressed, 34371 bytes compressed:  63.7%
```

## zipnote {}

```diff
@@ -69,26 +69,26 @@
 
 Filename: ipcheck/app/ipparser/ip_path_parser.py
 Comment: 
 
 Filename: ipcheck/app/ipparser/ip_port_parser.py
 Comment: 
 
-Filename: ip_check-1.5.4.dist-info/LICENSE
+Filename: ip_check-1.5.5.dist-info/LICENSE
 Comment: 
 
-Filename: ip_check-1.5.4.dist-info/METADATA
+Filename: ip_check-1.5.5.dist-info/METADATA
 Comment: 
 
-Filename: ip_check-1.5.4.dist-info/WHEEL
+Filename: ip_check-1.5.5.dist-info/WHEEL
 Comment: 
 
-Filename: ip_check-1.5.4.dist-info/entry_points.txt
+Filename: ip_check-1.5.5.dist-info/entry_points.txt
 Comment: 
 
-Filename: ip_check-1.5.4.dist-info/top_level.txt
+Filename: ip_check-1.5.5.dist-info/top_level.txt
 Comment: 
 
-Filename: ip_check-1.5.4.dist-info/RECORD
+Filename: ip_check-1.5.5.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## ipcheck/main.py

```diff
@@ -6,15 +6,15 @@
 import sys
 import subprocess
 import signal
 import ipcheck
 from ipcheck.app.config import Config
 from ipcheck.app.ip_info import IpInfo
 import argparse
-from ipcheck.app.gen_ip_utils import gen_ip_list_by_arg, filter_ip_list_by_white_list, filter_ip_list_by_block_list
+from ipcheck.app.gen_ip_utils import gen_ip_list_by_arg
 from ipcheck.app.valid_test import ValidTest
 from ipcheck.app.rtt_test import RttTest
 from ipcheck.app.speed_test import SpeedTest
 from typing import List
 from ipcheck.app.utils import is_ip_address, is_ip_network, gen_time_desc, write_file
 from ipcheck.geoinfo import get_geo_info
 
@@ -67,15 +67,16 @@
     if config_path and os.path.exists(config_path):
         pass
     else:
         defalt_config_path = os.path.join(os.path.dirname(__file__), 'config.ini')
         check_or_gen_def_config(defalt_config_path)
         config_path = defalt_config_path
     print('当前配置文件为:', config_path)
-    config = Config(config_path)
+    Config.CONFIG_PATH = config_path
+    config = Config()
     config.verbose = args.verbose
     print('是否开启调试信息: {}'.format(config.verbose))
     config.ip_source = args.source
     print('测试源文件为:', config.ip_source)
     block_list, white_list = args.block_list, args.white_list
     if block_list and white_list:
         print('偏好参数与黑名单参数同时存在，自动忽略黑名单参数！')
@@ -138,23 +139,20 @@
         config.rt_ip_limit_count = lr
     if lb:
         config.st_ip_limit_count = lb
     config.rt_max_loss = loss
     return config
 
 # 生成ip 列表
-def gen_ip_list(config: Config):
+def gen_ip_list():
+    config = Config()
     ip_list = []
     for source in config.ip_source:
-        ip_list.extend(gen_ip_list_by_arg(source, port=config.ip_port))
+        ip_list.extend(gen_ip_list_by_arg(source))
     ip_list = list(dict.fromkeys(ip_list))
-    if config.white_list:
-        ip_list = filter_ip_list_by_white_list(ip_list, config.white_list)
-    if config.block_list:
-        ip_list = filter_ip_list_by_block_list(ip_list, config.block_list)
     random.shuffle(ip_list)
     return ip_list
 
 
 def print_better_ips(ips: List[IpInfo]):
     print('优选ip 如下: ')
     for ip_info in ips:
@@ -170,15 +168,15 @@
         f.write(gen_time_desc())
         f.write('\n')
     print('测试通过%d个优选ip 已导出到' % len(ips), path)
 
 
 def main():
     config = load_config()
-    ip_list = gen_ip_list(config)
+    ip_list = gen_ip_list()
     ip_list_size = len(ip_list)
     if not ip_list_size:
         print('没有从参数中生产待测试ip 列表，请检查参数！')
         os._exit(0)
     else:
         print('从参数中生成了{} 个待测试ip'.format(ip_list_size))
     # 可用性测试
```

## ipcheck/app/config.py

```diff
@@ -4,14 +4,15 @@
 import configparser
 import sys
 
 from ipcheck.app.common_config import CommonConfig
 from ipcheck.app.valid_test_config import ValidTestConfig
 from ipcheck.app.rtt_test_config import RttTestConfig
 from ipcheck.app.speed_test_config import SpeedTestConfig
+from ipcheck.app.utils import singleton
 
 SECTION_COMMON = 'common'
 SECTION_COMMON_PREFIX = ''
 
 SECTION_VALID = 'valid test'
 SECTION_VALID_PREFIX = 'vt_'
 
@@ -26,18 +27,19 @@
     SECTION_COMMON_PREFIX: SECTION_COMMON,
     SECTION_VALID_PREFIX: SECTION_VALID,
     SECTION_RTT_PREFIX: SECTION_RTT,
     SECTION_DOWNLOAD_PREFIX: SECTION_DOWNLOAD
 }
 SECTION_PREFIX_PAIRS = {v: k for k, v in PREFIX_SECTION_PAIRS.items()}
 
-
+@singleton
 class Config(CommonConfig):
+    CONFIG_PATH = None
 
-    def __init__(self, config_path=None):
+    def __init__(self):
         # common 部分配置
         self.ip_port = 443
         self.no_save = False
         # 以下仅仅在运行时支持修改，不支持文件配置
         # 测试ip 源, 可选ip、ip cidr、文本(读取ip、ip cidr)、zip 压缩包(遍历其中的txt 文本，读取ip、ip cidr)
         self.ip_source = None
         self.out_file = None
@@ -104,16 +106,16 @@
         # 下载时长限制, 单位 s
         self.st_download_time = 10
         # 最小达标速度, 单位 kB/s
         self.st_download_speed = 5000
         # 是否执行快速测速开关
         self.st_fast_check = False
 
-        if config_path:
-            self.__update(config_path)
+        if self.CONFIG_PATH:
+            self.__update(self.CONFIG_PATH)
 
     def __update(self, path):
         parser = configparser.ConfigParser()
         parser.read(path, 'utf-8')
         variables = vars(self)
         for section in parser.sections():
             prefix = SECTION_PREFIX_PAIRS.get(section, None)
```

## ipcheck/app/gen_ip_utils.py

```diff
@@ -1,34 +1,40 @@
 #!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 
 
 from typing import List
+from ipcheck.app.config import Config
 from ipcheck.app.ip_info import IpInfo
 from ipcheck.app.ipparser.ip_dir_parser import IpDirParser
 from ipcheck.app.ipparser.ip_file_parser import IpFileParser
 from ipcheck.app.ipparser.ip_cidr_parser import IpCidrParser
 from ipcheck.app.ipparser.ip_parser import IpParser
 from ipcheck.app.ipparser.ip_port_parser import IpPortParser
 
 
-def gen_ip_list_by_arg(source, port=443) -> List[IpInfo]:
+def gen_ip_list_by_arg(source) -> List[IpInfo]:
     ip_list = []
-    parsers = [IpDirParser(source, port), IpFileParser(source, port), IpCidrParser(source, port), IpParser(source, port), IpPortParser(source, port)]
+    parsers = [IpDirParser(source), IpFileParser(source), IpParser(source), IpCidrParser(source), IpPortParser(source)]
     for parser in parsers:
         if parser.is_valid:
             ips = parser.parse()
             ip_list.extend(ips)
             break
+    config = Config()
+    if config.white_list:
+        ip_list = filter_ip_list_by_white_list(ip_list, config.white_list)
+    if config.block_list:
+        ip_list = filter_ip_list_by_block_list(ip_list, config.block_list)
     return ip_list
 
-def filter_ip_list_by_white_list(ip_list, white_list):
+def filter_ip_list_by_white_list(ip_list: List[IpInfo], white_list):
     fixed_list = []
     for pref_str in white_list:
         fixed_list = [ip_info for ip_info in ip_list if ip_info.ip.startswith(pref_str)]
     return fixed_list
 
-def filter_ip_list_by_block_list(ip_list, block_list):
+def filter_ip_list_by_block_list(ip_list: List[IpInfo], block_list):
     fixed_list = []
     for block_str in block_list:
         fixed_list = [ip_info for ip_info in ip_list if not ip_info.ip.startswith(block_str)]
     return fixed_list
```

## ipcheck/app/ip_info.py

```diff
@@ -1,9 +1,10 @@
 #!/usr/bin/env python3
 # -*- coding: utf-8 -*-
+from typing import List
 from ipcheck.app.utils import get_ip_version
 
 class IpInfo:
 
     def __init__(self, ip,
                 port=443,
                 rtt=-1,
```

## ipcheck/app/utils.py

```diff
@@ -1,10 +1,11 @@
 #!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 
+import functools
 import ipaddress
 import os
 import random
 from datetime import datetime
 import sys
 import requests
 from tqdm import tqdm
@@ -90,8 +91,32 @@
         ) as bar:
             for data in response.iter_content(chunk_size=1024):
                 # 写入文件并更新进度条
                 file.write(data)
                 bar.update(len(data))
             return True
     except Exception:
-        return False
+        return False
+
+def singleton(cls):
+    """
+    将一个类作为单例
+    来自 https://wiki.python.org/moin/PythonDecoratorLibrary#Singleton
+    """
+
+    cls.__new_original__ = cls.__new__
+
+    @functools.wraps(cls.__new__)
+    def singleton_new(cls, *args, **kw):
+        it = cls.__dict__.get('__it__')
+        if it is not None:
+            return it
+
+        cls.__it__ = it = cls.__new_original__(cls, *args, **kw)
+        it.__init_original__(*args, **kw)
+        return it
+
+    cls.__new__ = singleton_new
+    cls.__init_original__ = cls.__init__
+    cls.__init__ = object.__init__
+
+    return cls
```

## ipcheck/app/ipparser/base_parser.py

```diff
@@ -1,18 +1,35 @@
 #!/usr/bin/env python3
 # -*- coding: utf-8 -*-
 
 from typing import List
 from ipcheck.app.ip_info import IpInfo
+from ipcheck.app.config import Config
 
 class BaseParser:
 
-    def __init__(self, source: str, port: int) -> None:
+    def __init__(self, source: str) -> None:
         self.source = source
-        self.port = port
+        self.port = Config().ip_port
 
     @property
     def is_valid(self) -> bool:
-        return False
+        return self.check_source_type() and self.is_source_valid()
 
     def parse(self) -> List[IpInfo]:
-        return []
+        return []
+
+    def check_source_type(self) -> bool:
+        return False
+
+    def is_source_valid(self) -> bool:
+        if Config().white_list:
+            for expr_str in Config().white_list:
+                if self.source.startswith(expr_str):
+                    return True
+            return False
+        if Config().block_list:
+            for expr_str in Config().block_list:
+                if self.source.startswith(expr_str):
+                    return False
+            return True
+        return True
```

## ipcheck/app/ipparser/ip_cidr_parser.py

```diff
@@ -8,19 +8,18 @@
 import ipaddress
 
 class IpCidrParser(BaseParser):
     '''
     解析ip cidr 格式
     '''
 
-    @property
-    def is_valid(self) -> bool:
+    def check_source_type(self) -> bool:
         return is_ip_network(self.source)
 
     def parse(self) -> List[IpInfo]:
-        if not self.is_valid:
-            return []
-        net = ipaddress.ip_network(self.source, strict=False)
-        hosts = list(net.hosts())
-        all_ips = [IpInfo(str(ip), self.port) for ip in hosts]
-        return all_ips
+        ip_list = []
+        if self.is_valid:
+            net = ipaddress.ip_network(self.source, strict=False)
+            hosts = list(net.hosts())
+            ip_list = [IpInfo(str(ip), self.port) for ip in hosts]
+        return ip_list
```

## ipcheck/app/ipparser/ip_dir_parser.py

```diff
@@ -9,20 +9,21 @@
 from ipcheck.app.utils import find_txt_in_dir
 
 class IpDirParser(BaseParser):
     '''
     从目录中的文本中解析ip
     '''
 
-    @property
-    def is_valid(self) -> bool:
+    def check_source_type(self) -> bool:
         return path.exists(self.source) and path.isdir(self.source)
 
     def parse(self) -> List[IpInfo]:
-        if not self.is_valid:
-            return False
         ip_list = []
-        sources = find_txt_in_dir(self.source)
-        for source in sources:
-            parser = IpFileParser(source, self.port)
-            ip_list.extend(parser.parse())
-        return ip_list
+        if self.is_valid:
+            sources = find_txt_in_dir(self.source)
+            for source in sources:
+                parser = IpFileParser(source)
+                ip_list.extend(parser.parse())
+        return ip_list
+
+    def is_source_valid(self) -> bool:
+        return True
```

## ipcheck/app/ipparser/ip_file_parser.py

```diff
@@ -10,24 +10,25 @@
 from ipcheck.app.ipparser.ip_port_parser import IpPortParser
 
 class IpFileParser(BaseParser):
     '''
     从文本中解析ip
     '''
 
-    @property
-    def is_valid(self) -> bool:
+    def check_source_type(self) -> bool:
         return path.exists(self.source) and path.isfile(self.source)
 
     def parse(self) -> List[IpInfo]:
-        if not self.is_valid:
-            return []
         ip_list = []
-        with open(self.source, 'r') as f:
-            sources = [line.strip() for line in f.readlines()]
-            for source in sources:
-                parsers = [IpCidrParser(source, self.port), IpParser(source, self.port), IpPortParser(source, self.port)]
-                for parser in parsers:
-                    if parser.is_valid:
-                        ip_list.extend(parser.parse())
-                        break
-        return ip_list
+        if self.is_valid:
+            with open(self.source, 'r') as f:
+                sources = [line.strip() for line in f.readlines()]
+                for source in sources:
+                    parsers = [IpParser(source), IpCidrParser(source), IpPortParser(source)]
+                    for parser in parsers:
+                        if parser.is_valid:
+                            ip_list.extend(parser.parse())
+                            break
+        return ip_list
+
+    def is_source_valid(self) -> bool:
+        return True
```

## ipcheck/app/ipparser/ip_parser.py

```diff
@@ -7,15 +7,15 @@
 from ipcheck.app.utils import is_ip_address
 
 class IpParser(BaseParser):
     '''
     解析ip 格式
     '''
 
-    @property
-    def is_valid(self) -> bool:
+    def check_source_type(self) -> bool:
         return is_ip_address(self.source)
 
     def parse(self) -> List[IpInfo]:
-        if not self.is_valid:
-            return []
-        return [IpInfo(self.source, self.port)]
+        ip_list = []
+        if self.is_valid:
+            ip_list.append(IpInfo(self.ip, self.port))
+        return ip_list
```

## ipcheck/app/ipparser/ip_port_parser.py

```diff
@@ -7,20 +7,19 @@
 from ipcheck.app.utils import is_valid_port, is_ip_address
 
 class IpPortParser(BaseParser):
     '''
     解析ip:port 格式
     '''
 
-    def __init__(self, source: str, port: int) -> None:
+    def __init__(self, source: str) -> None:
         self.ip = None
-        super().__init__(source, port)
+        super().__init__(source)
 
-    @property
-    def is_valid(self) -> bool:
+    def check_source_type(self) -> bool:
         try:
             index = self.source.rindex(':')
             ip_str = self.source[:index]
             if ip_str.startswith('[') and ip_str.endswith(']'):
                 ip_str = ip_str[1: -1]
             port_str = self.source[index + 1:]
             if is_ip_address(ip_str) and is_valid_port(port_str):
@@ -29,10 +28,11 @@
                 return True
         except:
             pass
         return False
 
 
     def parse(self) -> List[IpInfo]:
-        if not self.is_valid:
-            return []
-        return [IpInfo(self.ip, self.port)]
+        ip_list = []
+        if self.is_valid:
+            ip_list.append(IpInfo(self.ip, self.port))
+        return ip_list
```

## Comparing `ip_check-1.5.4.dist-info/LICENSE` & `ip_check-1.5.5.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `ip_check-1.5.4.dist-info/METADATA` & `ip_check-1.5.5.dist-info/METADATA`

 * *Files 7% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: ip-check
-Version: 1.5.4
+Version: 1.5.5
 Summary: Powerful cdn network speed test utils.
 Author: nobitaqaq
 Author-email: xiaoleigs@gmail.com
 Keywords: cdn,speed test,network speed
 Requires-Python: >=3.8
 Description-Content-Type: text/markdown
 License-File: LICENSE
@@ -175,14 +175,17 @@
 
 optional arguments:
   -h, --help  show this help message and exit
 ```
 
 ## Release Note
 
+- V1.5.5
+  - 黑白名单过滤优化
+
 - V1.5.4
   - 修正带路径分隔符输出文件名异常的bug
 
 - V1.5.3
   - 把ip 输入源解析重构，方便以后拓展
 
 - V1.5.2
```

## Comparing `ip_check-1.5.4.dist-info/RECORD` & `ip_check-1.5.5.dist-info/RECORD`

 * *Files 12% similar despite different names*

```diff
@@ -1,31 +1,31 @@
 ipcheck/__init__.py,sha256=mjRHWAo73u50fxwseCRsTdvj9pPNZuTmsKW8Qpj-cNk,383
 ipcheck/geoinfo.py,sha256=WOt1q-vjOFkbaU8S4jHDoB3FDw6Urz6N6m8QC4jnsGo,6184
-ipcheck/main.py,sha256=1cO9kblhI2G1An9vwq0aVXvioOWqPZ0tSEZFRI6YBcA,10544
+ipcheck/main.py,sha256=u0sXMq8Jumgw2dfIb_pxuBmrZ-wt_W4Xddszls49VxA,10289
 ipcheck/app/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 ipcheck/app/base_config.py,sha256=PxNW4PXHagvULNc9FgDwMtu7aCn91RYx2SqBYd4-nd4,726
 ipcheck/app/common_config.py,sha256=s5WjPy45UhxBgymYgZRaQugaSvxBM-96_PXUUa7Pc9U,388
-ipcheck/app/config.py,sha256=_vvb-xuD7R2rR6wqEVWCBDtOeIuf-bMlZiexKu7RmZo,6052
+ipcheck/app/config.py,sha256=ebLtbUx8gziMz3RXXFR7S27PFDemAmFLMxBTdH9ottE,6117
 ipcheck/app/default_config.py,sha256=7OP6pibA78-xkmVGZ4kLsmWzV8fKRff8bCXd9sceFPU,1773
-ipcheck/app/gen_ip_utils.py,sha256=aof1-l6bdMpWqZyIZgZapWPFgIYMz7NMQr6NhBF3AbI,1233
-ipcheck/app/ip_info.py,sha256=4jATfWFztXQqGa3wJZhx72Zx7RIltFKt4_cMmzb-xns,1894
+ipcheck/app/gen_ip_utils.py,sha256=bP7RHSLFuVS6DSVwue8PyhzAvCq20N1TBqWwH-qmrhM,1483
+ipcheck/app/ip_info.py,sha256=Wbfq8uGMX9j01QLfbz6nYQEV-ZYFZVCI6v8MQt3yZW0,1918
 ipcheck/app/rtt_test.py,sha256=d1_iC3OFeqBAFqqHBdRN_IH5jlRgtd5USn0vV0_CM8M,2546
 ipcheck/app/rtt_test_config.py,sha256=PK7M7uLst4Zi3v2DgKA8rfpZsXIRnwfTxYa12bPDeb8,223
 ipcheck/app/speed_test.py,sha256=LKolSAPbkIkDrfJyW5fVHlMzWuGXaPOckat6S8kqebY,5656
 ipcheck/app/speed_test_config.py,sha256=Ji1jUEqSjAIqkzUzeE1BBHPfoJ2E-JeG36DJiHJ3CYA,223
-ipcheck/app/utils.py,sha256=nmxWod8DqtxVl4I8YgX1x7qNLiD5JeJ_XKUTGglJlMU,2537
+ipcheck/app/utils.py,sha256=xXc_6aCN4-lRZ5fUOc4g6cmy3_E1jWhwTWp_X8z625I,3149
 ipcheck/app/valid_test.py,sha256=e6t81vxstm-dy3T2cKxwhtLP7_xNE9b_rSf_WaRy8_w,3765
 ipcheck/app/valid_test_config.py,sha256=akRLXfL1XAFVwIQKvszMRj9TfdI1oQkob3HUEr_grvQ,362
 ipcheck/app/ipparser/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-ipcheck/app/ipparser/base_parser.py,sha256=az8t4Crxo6vhmm4pzSSCPQnZStMT4fstMHRtHfmZZtw,364
-ipcheck/app/ipparser/ip_cidr_parser.py,sha256=HYB6voUAH3-CB6TqtF0pmd7neHWg4cTQD8DMGlRML18,671
-ipcheck/app/ipparser/ip_dir_parser.py,sha256=-nanGalrEIw7dE3arnO5JPPxzBG6B71OswAMlYr6Fm4,804
-ipcheck/app/ipparser/ip_file_parser.py,sha256=CTxRIwMrubm2tWEm1m1rpeaLr3yZxylLfNyYdR4oZP4,1110
-ipcheck/app/ipparser/ip_parser.py,sha256=gTbQSD81Tc0Qra4jAbHMvMC6BiOyTEEaSSh4ov3GGqg,502
+ipcheck/app/ipparser/base_parser.py,sha256=owfTs_Yd7i0yVUQAuj_dFP0jZRjqK1CefKeMNnqX3mc,954
+ipcheck/app/ipparser/ip_cidr_parser.py,sha256=N1z0YycVvizUBRpuvvgQ5YjPv5VPA3npQZfEOawGTzE,673
+ipcheck/app/ipparser/ip_dir_parser.py,sha256=KZnmBh5JArVVuumb9WoIt-iYp6LAYeqbOmmFVUFaop8,835
+ipcheck/app/ipparser/ip_file_parser.py,sha256=HFt7gPZz5miGtX5TGoT5GuJTOagdSCA5TJuNeiV60Xg,1138
+ipcheck/app/ipparser/ip_parser.py,sha256=570gZiyVfYnYsO-dNm1LwftXzzeLAh1_IoqTE3cQE5A,522
 ipcheck/app/ipparser/ip_path_parser.py,sha256=oXnN_PK-s10y2OUeYIskLLH_DHbPWSiYdETkoxVDV1Q,738
-ipcheck/app/ipparser/ip_port_parser.py,sha256=0gGOCyHHiCXZS5iByf9ycHVoArRCEonMW6X0WNVwdsw,1071
-ip_check-1.5.4.dist-info/LICENSE,sha256=ixuiBLtpoK3iv89l7ylKkg9rs2GzF9ukPH7ynZYzK5s,35148
-ip_check-1.5.4.dist-info/METADATA,sha256=gMB-8wzmTAity8FhlrD5TDeY-DWyl4PIHbjcN-aBkt0,5483
-ip_check-1.5.4.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-ip_check-1.5.4.dist-info/entry_points.txt,sha256=LbstGY5z6sejWLCwyd9pTq4qRdfCsligLhJHjwp-Pd0,201
-ip_check-1.5.4.dist-info/top_level.txt,sha256=24binHFMOV_-4WIWZrtgRz4y7uY3vUxlJBq2UXMMfvY,8
-ip_check-1.5.4.dist-info/RECORD,,
+ipcheck/app/ipparser/ip_port_parser.py,sha256=Q88_q7RJfPM58DtPyMCduymncBUPWsJTZZ5Ates6ZZM,1078
+ip_check-1.5.5.dist-info/LICENSE,sha256=ixuiBLtpoK3iv89l7ylKkg9rs2GzF9ukPH7ynZYzK5s,35148
+ip_check-1.5.5.dist-info/METADATA,sha256=i1Z4QsRsRn8HWu25iXBM-SYvewTaZbdJ9U3OZgJZcGc,5522
+ip_check-1.5.5.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
+ip_check-1.5.5.dist-info/entry_points.txt,sha256=LbstGY5z6sejWLCwyd9pTq4qRdfCsligLhJHjwp-Pd0,201
+ip_check-1.5.5.dist-info/top_level.txt,sha256=24binHFMOV_-4WIWZrtgRz4y7uY3vUxlJBq2UXMMfvY,8
+ip_check-1.5.5.dist-info/RECORD,,
```

