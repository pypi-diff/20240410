# Comparing `tmp/kmport-2.1.4.tar.gz` & `tmp/kmport-2.1.5.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "kmport-2.1.4.tar", last modified: Fri Apr  5 13:54:07 2024, max compression
+gzip compressed data, was "kmport-2.1.5.tar", last modified: Tue Apr  9 05:04:15 2024, max compression
```

## Comparing `kmport-2.1.4.tar` & `kmport-2.1.5.tar`

### file list

```diff
@@ -1,14 +1,14 @@
-drwxr-xr-x   0 kage      (1000) kage      (1000)        0 2024-04-05 13:54:07.339776 kmport-2.1.4/
--rw-rw-r--   0 kage      (1000) kage      (1000)     1066 2021-12-15 17:55:20.000000 kmport-2.1.4/LICENSE
--rw-r--r--   0 kage      (1000) kage      (1000)    26011 2024-04-05 13:54:07.339776 kmport-2.1.4/PKG-INFO
--rw-rw-r--   0 kage      (1000) kage      (1000)    25593 2022-12-30 02:48:56.000000 kmport-2.1.4/README.md
-drwxr-xr-x   0 kage      (1000) kage      (1000)        0 2024-04-05 13:54:07.338776 kmport-2.1.4/kmport/
--rw-r--r--   0 kage      (1000) kage      (1000)   304320 2024-04-05 13:53:30.000000 kmport-2.1.4/kmport/__init__.py
-drwxr-xr-x   0 kage      (1000) kage      (1000)        0 2024-04-05 13:54:07.339776 kmport-2.1.4/kmport.egg-info/
--rw-rw-r--   0 kage      (1000) kage      (1000)    26011 2024-04-05 13:54:07.000000 kmport-2.1.4/kmport.egg-info/PKG-INFO
--rw-rw-r--   0 kage      (1000) kage      (1000)      180 2024-04-05 13:54:07.000000 kmport-2.1.4/kmport.egg-info/SOURCES.txt
--rw-rw-r--   0 kage      (1000) kage      (1000)        1 2024-04-05 13:54:07.000000 kmport-2.1.4/kmport.egg-info/dependency_links.txt
--rw-rw-r--   0 kage      (1000) kage      (1000)        7 2024-04-05 13:54:07.000000 kmport-2.1.4/kmport.egg-info/top_level.txt
--rw-rw-r--   0 kage      (1000) kage      (1000)      104 2021-12-15 17:55:20.000000 kmport-2.1.4/pyproject.toml
--rw-r--r--   0 kage      (1000) kage      (1000)       38 2024-04-05 13:54:07.339776 kmport-2.1.4/setup.cfg
--rw-rw-r--   0 kage      (1000) kage      (1000)     1975 2022-03-19 17:08:26.000000 kmport-2.1.4/setup.py
+drwxr-xr-x   0 kage      (1000) kage      (1000)        0 2024-04-09 05:04:15.140057 kmport-2.1.5/
+-rw-rw-r--   0 kage      (1000) kage      (1000)     1066 2021-12-15 17:55:20.000000 kmport-2.1.5/LICENSE
+-rw-r--r--   0 kage      (1000) kage      (1000)    26011 2024-04-09 05:04:15.140057 kmport-2.1.5/PKG-INFO
+-rw-rw-r--   0 kage      (1000) kage      (1000)    25593 2022-12-30 02:48:56.000000 kmport-2.1.5/README.md
+drwxr-xr-x   0 kage      (1000) kage      (1000)        0 2024-04-09 05:04:15.139057 kmport-2.1.5/kmport/
+-rw-r--r--   0 kage      (1000) kage      (1000)   304224 2024-04-09 05:03:06.000000 kmport-2.1.5/kmport/__init__.py
+drwxr-xr-x   0 kage      (1000) kage      (1000)        0 2024-04-09 05:04:15.140057 kmport-2.1.5/kmport.egg-info/
+-rw-rw-r--   0 kage      (1000) kage      (1000)    26011 2024-04-09 05:04:15.000000 kmport-2.1.5/kmport.egg-info/PKG-INFO
+-rw-rw-r--   0 kage      (1000) kage      (1000)      180 2024-04-09 05:04:15.000000 kmport-2.1.5/kmport.egg-info/SOURCES.txt
+-rw-rw-r--   0 kage      (1000) kage      (1000)        1 2024-04-09 05:04:15.000000 kmport-2.1.5/kmport.egg-info/dependency_links.txt
+-rw-rw-r--   0 kage      (1000) kage      (1000)        7 2024-04-09 05:04:15.000000 kmport-2.1.5/kmport.egg-info/top_level.txt
+-rw-rw-r--   0 kage      (1000) kage      (1000)      104 2021-12-15 17:55:20.000000 kmport-2.1.5/pyproject.toml
+-rw-r--r--   0 kage      (1000) kage      (1000)       38 2024-04-09 05:04:15.140057 kmport-2.1.5/setup.cfg
+-rw-rw-r--   0 kage      (1000) kage      (1000)     1975 2022-03-19 17:08:26.000000 kmport-2.1.5/setup.py
```

### Comparing `kmport-2.1.4/LICENSE` & `kmport-2.1.5/LICENSE`

 * *Files identical despite different names*

### Comparing `kmport-2.1.4/PKG-INFO` & `kmport-2.1.5/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: kmport
-Version: 2.1.4
+Version: 2.1.5
 Summary: Extended import function
 Home-page: https://github.com/kagepark/Import
 Author: Kage Park
 License: MIT
 Classifier: Programming Language :: Python :: 2
 Classifier: Programming Language :: Python :: 3
 Classifier: License :: OSI Approved :: MIT License
```

### Comparing `kmport-2.1.4/README.md` & `kmport-2.1.5/README.md`

 * *Files identical despite different names*

### Comparing `kmport-2.1.4/kmport/__init__.py` & `kmport-2.1.5/kmport/__init__.py`

 * *Files 0% similar despite different names*

```diff
@@ -12876,6145 +12876,6139 @@
 000324b0: 2020 636f 6e74 696e 7565 0a20 2020 2020    continue.     
 000324c0: 2020 2020 2020 2065 6c69 6620 5479 7065         elif Type
 000324d0: 2869 2c64 6963 7429 3a0a 2020 2020 2020  (i,dict):.      
 000324e0: 2020 2020 2020 2020 2020 7274 3d72 742b            rt=rt+
 000324f0: 4c69 7374 2872 742c 692c 2a2a 6f70 7473  List(rt,i,**opts
 00032500: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
 00032510: 2020 636f 6e74 696e 7565 0a20 2020 2020    continue.     
-00032520: 2020 2020 2020 2070 7269 6e74 2827 3e3e         print('>>
-00032530: 272c 692c 273a 272c 6967 6e6f 7265 732c  ',i,':',ignores,
-00032540: 6973 696e 7374 616e 6365 2869 676e 6f72  isinstance(ignor
-00032550: 6573 2c74 7570 6c65 292c 5479 7065 2869  es,tuple),Type(i
-00032560: 2c69 676e 6f72 6573 292c 4973 496e 2869  ,ignores),IsIn(i
-00032570: 2c69 676e 6f72 6573 2929 0a20 2020 2020  ,ignores)).     
-00032580: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00032590: 616e 6365 2869 676e 6f72 6573 2c74 7570  ance(ignores,tup
-000325a0: 6c65 2920 616e 6420 2854 7970 6528 692c  le) and (Type(i,
-000325b0: 6967 6e6f 7265 7329 206f 7220 4973 496e  ignores) or IsIn
-000325c0: 2869 2c69 676e 6f72 6573 2929 3a0a 2020  (i,ignores)):.  
-000325d0: 2020 2020 2020 2020 2020 2020 2020 636f                co
-000325e0: 6e74 696e 7565 0a20 2020 2020 2020 2020  ntinue.         
-000325f0: 2020 2072 742e 6170 7065 6e64 2869 290a     rt.append(i).
-00032600: 2020 2020 6966 206f 7074 732e 6765 7428      if opts.get(
-00032610: 2773 7472 6970 2729 3a0a 2020 2020 2020  'strip'):.      
-00032620: 2020 7274 3d5b 692e 7374 7269 7028 2920    rt=[i.strip() 
-00032630: 6966 2069 7369 6e73 7461 6e63 6528 692c  if isinstance(i,
-00032640: 2873 7472 2c62 7974 6573 2929 2065 6c73  (str,bytes)) els
-00032650: 6520 6920 666f 7220 6920 696e 2072 745d  e i for i in rt]
-00032660: 0a20 2020 2069 6620 6f70 7473 2e67 6574  .    if opts.get
-00032670: 2827 756e 6971 2729 3a0a 2020 2020 2020  ('uniq'):.      
-00032680: 2020 7265 7475 726e 2055 6e69 7128 7274    return Uniq(rt
-00032690: 290a 2020 2020 6964 783d 6f70 7473 2e67  ).    idx=opts.g
-000326a0: 6574 2827 6964 7827 290a 2020 2020 6966  et('idx').    if
-000326b0: 206e 6f74 2049 734e 6f6e 6528 6964 7829   not IsNone(idx)
-000326c0: 3a0a 2020 2020 2020 2020 6f6b 2c69 6478  :.        ok,idx
-000326d0: 3d49 6e64 6578 466f 726d 2869 6478 2c69  =IndexForm(idx,i
-000326e0: 6478 5f6f 6e6c 793d 5472 7565 2c73 796d  dx_only=True,sym
-000326f0: 626f 6c3d 272c 2729 0a20 2020 2020 2020  bol=',').       
-00032700: 2069 6620 6f6b 2069 7320 4661 6c73 653a   if ok is False:
-00032710: 2072 6574 7572 6e20 6f70 7473 2e67 6574   return opts.get
-00032720: 2827 6465 6661 756c 7427 2c46 616c 7365  ('default',False
-00032730: 290a 2020 2020 2020 2020 6966 2069 7369  ).        if isi
-00032740: 6e73 7461 6e63 6528 6964 782c 7475 706c  nstance(idx,tupl
-00032750: 6529 2061 6e64 206c 656e 2869 6478 2920  e) and len(idx) 
-00032760: 3d3d 2032 3a0a 2020 2020 2020 2020 2020  == 2:.          
-00032770: 2020 6964 783d 7261 6e67 6528 6964 785b    idx=range(idx[
-00032780: 305d 2c69 6478 5b31 5d2b 3129 0a20 2020  0],idx[1]+1).   
-00032790: 2020 2020 2069 6620 6e6f 7420 5479 7065       if not Type
-000327a0: 2869 6478 2c28 6c69 7374 2c74 7570 6c65  (idx,(list,tuple
-000327b0: 2c27 7261 6e67 6527 2929 3a20 6964 783d  ,'range')): idx=
-000327c0: 5b69 6478 5d0a 2020 2020 2020 2020 7474  [idx].        tt
-000327d0: 3d5b 5d0a 2020 2020 2020 2020 666f 7220  =[].        for 
-000327e0: 6920 696e 2069 6478 3a0a 2020 2020 2020  i in idx:.      
-000327f0: 2020 2020 2020 6966 206d 6f64 6520 3d3d        if mode ==
-00032800: 2027 6175 746f 273a 0a20 2020 2020 2020   'auto':.       
-00032810: 2020 2020 2020 2020 2069 3d46 6978 496e           i=FixIn
-00032820: 6465 7828 7274 2c69 2c64 6566 6175 6c74  dex(rt,i,default
-00032830: 3d46 616c 7365 2c65 7272 3d46 616c 7365  =False,err=False
-00032840: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-00032850: 6966 206d 6f64 6520 696e 205b 2765 7272  if mode in ['err
-00032860: 272c 2769 676e 6f72 6527 5d3a 0a20 2020  ','ignore']:.   
-00032870: 2020 2020 2020 2020 2020 2020 2069 3d46               i=F
-00032880: 6978 496e 6465 7828 7274 2c69 2c64 6566  ixIndex(rt,i,def
-00032890: 6175 6c74 3d46 616c 7365 2c65 7272 3d54  ault=False,err=T
-000328a0: 7275 6529 0a20 2020 2020 2020 2020 2020  rue).           
-000328b0: 2069 6620 6920 6973 2046 616c 7365 3a0a   if i is False:.
-000328c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000328d0: 6966 206d 6f64 6520 3d3d 2027 6572 7227  if mode == 'err'
-000328e0: 3a20 7265 7475 726e 206f 7074 732e 6765  : return opts.ge
-000328f0: 7428 2764 6566 6175 6c74 272c 4661 6c73  t('default',Fals
-00032900: 6529 0a20 2020 2020 2020 2020 2020 2065  e).            e
-00032910: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00032920: 2020 2020 2074 742e 6170 7065 6e64 2872       tt.append(r
-00032930: 745b 695d 290a 2020 2020 2020 2020 7265  t[i]).        re
-00032940: 7475 726e 2074 740a 2020 2020 6966 206e  turn tt.    if n
-00032950: 6f74 2049 734e 6f6e 6528 6f70 7473 2e67  ot IsNone(opts.g
-00032960: 6574 2827 726d 2729 293a 0a20 2020 2020  et('rm')):.     
-00032970: 2020 2072 6574 7572 6e20 726d 2872 742c     return rm(rt,
-00032980: 2a6f 7074 732e 6765 7428 2772 6d27 2920  *opts.get('rm') 
-00032990: 6966 2054 7970 6528 6f70 7473 2e67 6574  if Type(opts.get
-000329a0: 2827 726d 2729 2c28 6c69 7374 2c74 7570  ('rm'),(list,tup
-000329b0: 6c65 2929 2065 6c73 6520 6f70 7473 2e67  le)) else opts.g
-000329c0: 6574 2827 726d 2729 290a 2020 2020 6669  et('rm')).    fi
-000329d0: 7273 743d 6f70 7473 2e67 6574 2827 6669  rst=opts.get('fi
-000329e0: 7273 7427 290a 2020 2020 6966 206e 6f74  rst').    if not
-000329f0: 2049 734e 6f6e 6528 6669 7273 7429 2061   IsNone(first) a
-00032a00: 6e64 2066 6972 7374 2069 6e20 7274 3a0a  nd first in rt:.
-00032a10: 2020 2020 2020 2020 7265 7475 726e 205b          return [
-00032a20: 6669 7273 745d 2b5b 6920 666f 7220 6920  first]+[i for i 
-00032a30: 696e 2072 7420 6966 2069 2021 3d20 6669  in rt if i != fi
-00032a40: 7273 745d 0a20 2020 2065 6e64 3d6f 7074  rst].    end=opt
-00032a50: 732e 6765 7428 2765 6e64 2729 0a20 2020  s.get('end').   
-00032a60: 2069 6620 6e6f 7420 4973 4e6f 6e65 2865   if not IsNone(e
-00032a70: 6e64 2920 616e 6420 656e 6420 696e 2072  nd) and end in r
-00032a80: 743a 0a20 2020 2020 2020 2072 6574 7572  t:.        retur
-00032a90: 6e20 5b69 2066 6f72 2069 2069 6e20 7274  n [i for i in rt
-00032aa0: 2069 6620 6920 213d 2065 6e64 5d2b 5b65   if i != end]+[e
-00032ab0: 6e64 5d0a 2020 2020 6669 6e64 3d6f 7074  nd].    find=opt
-00032ac0: 732e 6765 7428 2766 696e 6427 290a 2020  s.get('find').  
-00032ad0: 2020 6966 206e 6f74 2049 734e 6f6e 6528    if not IsNone(
-00032ae0: 6669 6e64 293a 0a20 2020 2020 2020 2069  find):.        i
-00032af0: 6620 6e6f 7420 5479 7065 2866 696e 642c  f not Type(find,
-00032b00: 286c 6973 742c 7475 706c 6529 293a 2066  (list,tuple)): f
-00032b10: 696e 643d 5b66 696e 645d 0a20 2020 2020  ind=[find].     
-00032b20: 2020 2074 743d 5b5d 0a20 2020 2020 2020     tt=[].       
-00032b30: 2066 6f72 2069 2069 6e20 6669 6e64 3a0a   for i in find:.
-00032b40: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00032b50: 7a20 696e 2072 616e 6765 2830 2c6c 656e  z in range(0,len
-00032b60: 2872 7429 293a 0a20 2020 2020 2020 2020  (rt)):.         
-00032b70: 2020 2020 2020 2069 6620 5479 7065 2869         if Type(i
-00032b80: 2c28 2773 7472 272c 2762 7974 6573 2729  ,('str','bytes')
-00032b90: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00032ba0: 2020 2020 2020 206a 3d69 2e72 6570 6c61         j=i.repla
-00032bb0: 6365 2827 2a27 2c27 2e2b 2729 2e72 6570  ce('*','.+').rep
-00032bc0: 6c61 6365 2827 3f27 2c27 2e27 290a 2020  lace('?','.').  
-00032bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032be0: 2020 6d6d 3d72 652e 636f 6d70 696c 6528    mm=re.compile(
-00032bf0: 6a29 0a20 2020 2020 2020 2020 2020 2020  j).             
-00032c00: 2020 2020 2020 2069 6620 626f 6f6c 2872         if bool(r
-00032c10: 652e 6d61 7463 6828 6d6d 2c72 745b 7a5d  e.match(mm,rt[z]
-00032c20: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-00032c30: 2020 2020 2020 2020 2020 2020 7474 2e61              tt.a
-00032c40: 7070 656e 6428 7a29 0a20 2020 2020 2020  ppend(z).       
-00032c50: 2020 2020 2020 2020 2065 6c69 6620 7274           elif rt
-00032c60: 5b7a 5d20 3d3d 2069 3a20 7474 2e61 7070  [z] == i: tt.app
-00032c70: 656e 6428 7a29 0a20 2020 2020 2020 2072  end(z).        r
-00032c80: 6574 7572 6e20 7474 0a20 2020 2072 6574  eturn tt.    ret
-00032c90: 7572 6e20 7274 0a0a 6465 6620 5265 706c  urn rt..def Repl
-00032ca0: 6163 6528 7372 632c 7265 706c 6163 655f  ace(src,replace_
-00032cb0: 7768 6174 2c72 6570 6c61 6365 5f74 6f2c  what,replace_to,
-00032cc0: 6465 6661 756c 743d 4e6f 6e65 2c6e 6577  default=None,new
-00032cd0: 6c69 6e65 3d27 5c6e 2729 3a0a 2020 2020  line='\n'):.    
-00032ce0: 2727 270a 2020 2020 7265 706c 6163 6520  '''.    replace 
-00032cf0: 7374 7269 6e67 2028 7372 632c 2066 726f  string (src, fro
-00032d00: 6d2c 2074 6f29 0a20 2020 2069 6620 6e6f  m, to).    if no
-00032d10: 7420 7374 7269 6e67 2074 6865 6e20 7265  t string then re
-00032d20: 7475 726e 2064 6566 6175 6c74 0a20 2020  turn default.   
-00032d30: 2064 6566 6175 6c74 3a20 7265 7475 726e   default: return
-00032d40: 2064 6566 696e 6564 2076 616c 7565 2077   defined value w
-00032d50: 6865 6e20 6e6f 7420 7374 7269 6e67 0a20  hen not string. 
-00032d60: 2020 2020 2027 6f72 6727 3a20 7265 7475       'org': retu
-00032d70: 726e 2073 7263 0a20 2020 2020 202e 2e2e  rn src.      ...
-00032d80: 2020 3a20 7265 7475 726e 2064 6566 696e    : return defin
-00032d90: 6564 2064 6566 6175 6c74 0a20 2020 2027  ed default.    '
-00032da0: 2727 0a20 2020 2064 6566 205f 535f 2873  ''.    def _S_(s
-00032db0: 7263 2c70 293a 0a20 2020 2020 2020 2069  rc,p):.        i
-00032dc0: 6620 6973 696e 7374 616e 6365 2870 2c6c  f isinstance(p,l
-00032dd0: 6973 7429 3a0a 2020 2020 2020 2020 2020  ist):.          
-00032de0: 2020 743d 5b5d 0a20 2020 2020 2020 2020    t=[].         
-00032df0: 2020 206d 3d6c 656e 2870 292d 310a 2020     m=len(p)-1.  
-00032e00: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
-00032e10: 696e 2072 616e 6765 2830 2c6d 2b31 293a  in range(0,m+1):
-00032e20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00032e30: 2069 6620 6920 3d3d 2030 3a0a 2020 2020   if i == 0:.    
-00032e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00032e50: 742e 6170 7065 6e64 2873 7263 5b3a 705b  t.append(src[:p[
-00032e60: 695d 5b30 5d5d 290a 2020 2020 2020 2020  i][0]]).        
-00032e70: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00032e80: 3d3d 6d3a 0a20 2020 2020 2020 2020 2020  ==m:.           
-00032e90: 2020 2020 2020 2020 2020 2020 2074 2e61               t.a
-00032ea0: 7070 656e 6428 7372 635b 705b 695d 5b31  ppend(src[p[i][1
-00032eb0: 5d3a 5d29 0a20 2020 2020 2020 2020 2020  ]:]).           
-00032ec0: 2020 2020 2065 6c69 6620 6920 3c20 6d3a       elif i < m:
-00032ed0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00032ee0: 2020 2020 2074 2e61 7070 656e 6428 7372       t.append(sr
-00032ef0: 635b 705b 692d 315d 5b31 5d3a 705b 695d  c[p[i-1][1]:p[i]
-00032f00: 5b30 5d5d 290a 2020 2020 2020 2020 2020  [0]]).          
-00032f10: 2020 2020 2020 656c 6966 2069 203d 3d20        elif i == 
-00032f20: 6d3a 0a20 2020 2020 2020 2020 2020 2020  m:.             
-00032f30: 2020 2020 2020 2074 2e61 7070 656e 6428         t.append(
-00032f40: 7372 635b 705b 692d 315d 5b31 5d3a 705b  src[p[i-1][1]:p[
-00032f50: 695d 5b30 5d5d 290a 2020 2020 2020 2020  i][0]]).        
-00032f60: 2020 2020 2020 2020 2020 2020 742e 6170              t.ap
-00032f70: 7065 6e64 2873 7263 5b70 5b69 5d5b 315d  pend(src[p[i][1]
-00032f80: 3a5d 290a 2020 2020 2020 2020 2020 2020  :]).            
-00032f90: 7265 7475 726e 2074 0a0a 2020 2020 6966  return t..    if
-00032fa0: 206e 6f74 2054 7970 6528 7372 632c 2827   not Type(src,('
-00032fb0: 7374 7227 2c27 6279 7465 7327 2929 3a0a  str','bytes')):.
-00032fc0: 2020 2020 2020 2020 7265 7475 726e 2044          return D
-00032fd0: 6566 6175 6c74 2873 7263 2c64 6566 6175  efault(src,defau
-00032fe0: 6c74 290a 2020 2020 6966 2054 7970 6528  lt).    if Type(
-00032ff0: 7372 632c 2762 7974 6573 2729 3a0a 2020  src,'bytes'):.  
-00033000: 2020 2020 2020 7265 706c 6163 655f 7768        replace_wh
-00033010: 6174 3d42 7974 6573 2872 6570 6c61 6365  at=Bytes(replace
-00033020: 5f77 6861 7429 0a20 2020 2020 2020 2072  _what).        r
-00033030: 6570 6c61 6365 5f74 6f3d 4279 7465 7328  eplace_to=Bytes(
-00033040: 7265 706c 6163 655f 746f 290a 2020 2020  replace_to).    
-00033050: 2020 2020 6e65 776c 696e 653d 4279 7465      newline=Byte
-00033060: 7328 6e65 776c 696e 6529 0a20 2020 2065  s(newline).    e
-00033070: 6c73 653a 0a20 2020 2020 2020 2072 6570  lse:.        rep
-00033080: 6c61 6365 5f77 6861 743d 5374 7228 7265  lace_what=Str(re
-00033090: 706c 6163 655f 7768 6174 290a 2020 2020  place_what).    
-000330a0: 2020 2020 7265 706c 6163 655f 746f 3d53      replace_to=S
-000330b0: 7472 2872 6570 6c61 6365 5f74 6f29 0a20  tr(replace_to). 
-000330c0: 2020 2020 2020 206e 6577 6c69 6e65 3d53         newline=S
-000330d0: 7472 286e 6577 6c69 6e65 290a 2020 2020  tr(newline).    
-000330e0: 746d 703d 5b5d 0a20 2020 2066 6f72 2069  tmp=[].    for i
-000330f0: 6920 696e 2073 7263 2e73 706c 6974 286e  i in src.split(n
-00033100: 6577 6c69 6e65 293a 0a20 2020 2020 2020  ewline):.       
-00033110: 2074 743d 5f53 5f28 6969 2c46 6f75 6e64   tt=_S_(ii,Found
-00033120: 2869 692c 7265 706c 6163 655f 7768 6174  (ii,replace_what
-00033130: 2c6c 6f63 6174 696f 6e3d 5472 7565 2929  ,location=True))
-00033140: 0a20 2020 2020 2020 2074 6d70 2e61 7070  .        tmp.app
-00033150: 656e 6428 4a6f 696e 2874 742c 7265 706c  end(Join(tt,repl
-00033160: 6163 655f 746f 2920 6966 2074 7420 656c  ace_to) if tt el
-00033170: 7365 2069 6929 0a20 2020 2072 6574 7572  se ii).    retur
-00033180: 6e20 4a6f 696e 2874 6d70 2c6e 6577 6c69  n Join(tmp,newli
-00033190: 6e65 290a 0a64 6566 206b 7263 2872 743d  ne)..def krc(rt=
-000331a0: 4e6f 6e65 2c63 686b 3d27 5f27 2c72 7464  None,chk='_',rtd
-000331b0: 3d4e 6f6e 652c 6465 6661 756c 743d 4661  =None,default=Fa
-000331c0: 6c73 652c 6d6f 6465 3d4e 6f6e 652c 6578  lse,mode=None,ex
-000331d0: 743d 2773 6865 6c6c 2729 3a0a 2020 2020  t='shell'):.    
-000331e0: 676c 6f62 616c 206b 7263 5f64 6566 696e  global krc_defin
-000331f0: 650a 2020 2020 6e72 7464 3d43 6f70 7928  e.    nrtd=Copy(
-00033200: 6b72 635f 6465 6669 6e65 2c64 6565 703d  krc_define,deep=
-00033210: 5472 7565 2920 6966 2072 7464 2069 7320  True) if rtd is 
-00033220: 4e6f 6e65 2065 6c73 6520 436f 7079 2872  None else Copy(r
-00033230: 7464 2c64 6565 703d 5472 7565 290a 2020  td,deep=True).  
-00033240: 2020 6966 2065 7874 203d 3d20 2773 6865    if ext == 'she
-00033250: 6c6c 273a 2023 2070 7974 686f 6e0a 2020  ll': # python.  
-00033260: 2020 2020 2020 6966 206e 6f74 2049 7349        if not IsI
-00033270: 6e28 302c 6e72 7464 5b27 474f 4f44 275d  n(0,nrtd['GOOD']
-00033280: 293a 206e 7274 645b 2747 4f4f 4427 5d2e  ): nrtd['GOOD'].
-00033290: 6170 7065 6e64 2830 290a 2020 2020 2020  append(0).      
-000332a0: 2020 6966 206e 6f74 2049 7349 6e28 312c    if not IsIn(1,
-000332b0: 6e72 7464 5b27 4552 524f 275d 293a 206e  nrtd['ERRO']): n
-000332c0: 7274 645b 2745 5252 4f27 5d3d 6e72 7464  rtd['ERRO']=nrtd
-000332d0: 5b27 4552 524f 275d 2b5b 312c 3132 362c  ['ERRO']+[1,126,
-000332e0: 3132 382c 3133 302c 3235 355d 0a20 2020  128,130,255].   
-000332f0: 2020 2020 2069 6620 6e6f 7420 4973 496e       if not IsIn
-00033300: 2831 3237 2c6e 7274 645b 274e 464e 4427  (127,nrtd['NFND'
-00033310: 5d29 3a20 6e72 7464 5b27 4e46 4e44 275d  ]): nrtd['NFND']
-00033320: 2e61 7070 656e 6428 3132 3729 0a20 2020  .append(127).   
-00033330: 2065 6c69 6620 6578 7420 3d3d 2027 7079   elif ext == 'py
-00033340: 7468 6f6e 273a 2023 2070 7974 686f 6e0a  thon': # python.
-00033350: 2020 2020 2020 2020 6966 206e 6f74 2049          if not I
-00033360: 7349 6e28 312c 6e72 7464 5b27 474f 4f44  sIn(1,nrtd['GOOD
-00033370: 275d 293a 206e 7274 645b 2747 4f4f 4427  ']): nrtd['GOOD'
-00033380: 5d2e 6170 7065 6e64 2831 2923 2050 7974  ].append(1)# Pyt
-00033390: 686f 6e27 7320 5472 7565 206c 6576 656c  hon's True level
-000333a0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-000333b0: 4973 496e 2830 2c6e 7274 645b 2746 4149  IsIn(0,nrtd['FAI
-000333c0: 4c27 5d29 3a20 6e72 7464 5b27 4641 494c  L']): nrtd['FAIL
-000333d0: 275d 2e61 7070 656e 6428 3029 2320 5079  '].append(0)# Py
-000333e0: 7468 6f6e 2773 2046 616c 7365 206c 6576  thon's False lev
-000333f0: 656c 0a20 2020 2027 2727 0a20 2020 2053  el.    '''.    S
-00033400: 6865 6c6c 2065 7869 7420 636f 6465 3a0a  hell exit code:.
-00033410: 2020 2020 2020 3120 2020 2d20 4361 7463        1   - Catc
-00033420: 6861 6c6c 2066 6f72 2067 656e 6572 616c  hall for general
-00033430: 2065 7272 6f72 730a 2020 2020 2020 3220   errors.      2 
-00033440: 2020 2d20 4d69 7375 7365 206f 6620 7368    - Misuse of sh
-00033450: 656c 6c20 6275 696c 7469 6e73 2028 6163  ell builtins (ac
-00033460: 636f 7264 696e 6720 746f 2042 6173 6820  cording to Bash 
-00033470: 646f 6375 6d65 6e74 6174 696f 6e29 0a20  documentation). 
-00033480: 2020 2031 3236 2020 202d 2043 6f6d 6d61     126   - Comma
-00033490: 6e64 2069 6e76 6f6b 6564 2063 616e 6e6f  nd invoked canno
-000334a0: 7420 6578 6563 7574 650a 2020 2020 3132  t execute.    12
-000334b0: 3720 2020 2d20 e280 9c63 6f6d 6d61 6e64  7   - ...command
-000334c0: 206e 6f74 2066 6f75 6e64 e280 9d0a 2020   not found....  
-000334d0: 2020 3132 3820 2020 2d20 496e 7661 6c69    128   - Invali
-000334e0: 6420 6172 6775 6d65 6e74 2074 6f20 6578  d argument to ex
-000334f0: 6974 0a20 2020 2031 3238 2b6e 202d 2046  it.    128+n - F
-00033500: 6174 616c 2065 7272 6f72 2073 6967 6e61  atal error signa
-00033510: 6c20 e280 9c6e e280 9d0a 2020 2020 3133  l ...n....    13
-00033520: 3020 2020 2d20 5363 7269 7074 2074 6572  0   - Script ter
-00033530: 6d69 6e61 7465 6420 6279 2043 6f6e 7472  minated by Contr
-00033540: 6f6c 2d43 0a20 2020 2032 3535 5c2a 202d  ol-C.    255\* -
-00033550: 2045 7869 7420 7374 6174 7573 206f 7574   Exit status out
-00033560: 206f 6620 7261 6e67 650a 2020 2020 2727   of range.    ''
-00033570: 270a 2020 2020 6966 206d 6f64 6520 3d3d  '.    if mode ==
-00033580: 2027 6765 7427 3a0a 2020 2020 2020 2020   'get':.        
-00033590: 7265 7475 726e 206e 7274 640a 2020 2020  return nrtd.    
-000335a0: 656c 6966 206d 6f64 6520 3d3d 2027 6b65  elif mode == 'ke
-000335b0: 7973 273a 0a20 2020 2020 2020 2069 6620  ys':.        if 
-000335c0: 6973 696e 7374 616e 6365 286e 7274 642c  isinstance(nrtd,
-000335d0: 6469 6374 293a 0a20 2020 2020 2020 2020  dict):.         
-000335e0: 2020 2072 6574 7572 6e20 6e72 7464 2e6b     return nrtd.k
-000335f0: 6579 7328 290a 2020 2020 6465 6620 7472  eys().    def tr
-00033600: 616e 7328 6972 7429 3a0a 2020 2020 2020  ans(irt):.      
-00033610: 2020 7479 7065 5f69 7274 3d74 7970 6528    type_irt=type(
-00033620: 6972 7429 0a20 2020 2020 2020 2066 6f72  irt).        for
-00033630: 2069 6920 696e 206e 7274 643a 0a20 2020   ii in nrtd:.   
-00033640: 2020 2020 2020 2020 2066 6f72 206a 6a20           for jj 
-00033650: 696e 206e 7274 645b 6969 5d3a 0a20 2020  in nrtd[ii]:.   
-00033660: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00033670: 7479 7065 286a 6a29 203d 3d20 7479 7065  type(jj) == type
-00033680: 5f69 7274 2061 6e64 2028 2874 7970 655f  _irt and ((type_
-00033690: 6972 7420 6973 2073 7472 2061 6e64 206a  irt is str and j
-000336a0: 6a2e 6c6f 7765 7228 2920 3d3d 2069 7274  j.lower() == irt
-000336b0: 2e6c 6f77 6572 2829 2920 6f72 206a 6a20  .lower()) or jj 
-000336c0: 3d3d 2069 7274 293a 0a20 2020 2020 2020  == irt):.       
-000336d0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-000336e0: 7572 6e20 6969 0a20 2020 2020 2020 2072  urn ii.        r
-000336f0: 6574 7572 6e20 2755 4e4b 4e27 0a20 2020  eturn 'UNKN'.   
-00033700: 2072 7463 3d47 6574 2872 742c 2730 7c72   rtc=Get(rt,'0|r
-00033710: 6327 2c65 7272 3d54 7275 652c 6465 6661  c',err=True,defa
-00033720: 756c 743d 276f 7267 272c 7479 7065 3d28  ult='org',type=(
-00033730: 626f 6f6c 2c69 6e74 2c6c 6973 742c 7475  bool,int,list,tu
-00033740: 706c 652c 6469 6374 2929 0a20 2020 206e  ple,dict)).    n
-00033750: 7274 633d 7472 616e 7328 5065 656c 2872  rtc=trans(Peel(r
-00033760: 7463 2c65 7272 3d46 616c 7365 2c64 6566  tc,err=False,def
-00033770: 6175 6c74 3d27 756e 6b6e 6f77 6e27 2929  ault='unknown'))
-00033780: 2023 4966 2047 6574 2829 2067 6f74 206d   #If Get() got m
-00033790: 756c 7469 2064 6174 6120 7468 656e 2075  ulti data then u
-000337a0: 7365 2066 6972 7374 2064 6174 610a 2020  se first data.  
-000337b0: 2020 6966 2063 686b 2021 3d20 275f 273a    if chk != '_':
-000337c0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-000337d0: 6973 696e 7374 616e 6365 2863 686b 2c6c  isinstance(chk,l
-000337e0: 6973 7429 3a20 6368 6b3d 5b63 686b 5d0a  ist): chk=[chk].
-000337f0: 2020 2020 2020 2020 666f 7220 6363 2069          for cc i
-00033800: 6e20 6368 6b3a 0a20 2020 2020 2020 2020  n chk:.         
-00033810: 2020 2069 6620 7472 616e 7328 6363 2920     if trans(cc) 
-00033820: 3d3d 206e 7274 633a 0a20 2020 2020 2020  == nrtc:.       
-00033830: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00033840: 5472 7565 0a20 2020 2020 2020 2020 2020  True.           
-00033850: 2069 6620 6e72 7463 203d 3d20 2755 4e4b   if nrtc == 'UNK
-00033860: 4e27 2061 6e64 2064 6566 6175 6c74 203d  N' and default =
-00033870: 3d20 276f 7267 273a 0a20 2020 2020 2020  = 'org':.       
-00033880: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00033890: 7274 630a 2020 2020 2020 2020 7265 7475  rtc.        retu
-000338a0: 726e 2044 6566 6175 6c74 2872 742c 6465  rn Default(rt,de
-000338b0: 6661 756c 7429 0a20 2020 2072 6574 7572  fault).    retur
-000338c0: 6e20 6e72 7463 0a0a 6465 6620 4f75 7446  n nrtc..def OutF
-000338d0: 6f72 6d61 7428 6461 7461 2c6f 7574 3d4e  ormat(data,out=N
-000338e0: 6f6e 652c 7374 7269 703d 4661 6c73 652c  one,strip=False,
-000338f0: 7065 656c 3d4e 6f6e 652c 6f72 673d 4e6f  peel=None,org=No
-00033900: 6e65 2c64 6566 6175 6c74 3d4e 6f6e 6529  ne,default=None)
-00033910: 3a0a 2020 2020 2727 270a 2020 2020 4f75  :.    '''.    Ou
-00033920: 7470 7574 2046 6f72 6d61 7420 6d61 6b65  tput Format make
-00033930: 720a 2020 2020 3c6f 7074 696f 6e3e 0a20  r.    <option>. 
-00033940: 2020 2020 206f 7574 0a20 2020 2020 2020       out.       
-00033950: 204e 6f6e 653a 204e 6f74 2063 6f6e 7665   None: Not conve
-00033960: 7274 0a20 2020 2020 2020 2073 7472 2c69  rt.        str,i
-00033970: 6e74 2c6c 6973 742c 6469 6374 203a 2063  nt,list,dict : c
-00033980: 6f6e 7665 7274 2064 6174 6120 746f 2077  onvert data to w
-00033990: 616e 7420 666f 726d 6174 0a20 2020 2020  ant format.     
-000339a0: 2020 2072 6177 203a 2050 6565 6c65 6420     raw : Peeled 
-000339b0: 6461 7461 2077 6865 6e20 7369 6e67 6c65  data when single
-000339c0: 2064 6174 6128 5b27 6127 5d2c 2827 6127   data(['a'],('a'
-000339d0: 292c 7b27 6127 3a27 6162 6327 7d29 206f  ),{'a':'abc'}) o
-000339e0: 7468 6572 7320 7468 656e 2072 6574 7572  thers then retur
-000339f0: 6e20 6f72 6967 6e61 6c0a 2020 2020 2020  n orignal.      
-00033a00: 7065 656c 0a20 2020 2020 2020 204e 6f6e  peel.        Non
-00033a10: 6520 3a20 6175 746f 6d61 7469 6361 6c6c  e : automaticall
-00033a20: 7920 776f 726b 696e 6720 6163 636f 7264  y working accord
-00033a30: 696e 6720 746f 206f 7574 0a20 2020 2020  ing to out.     
-00033a40: 2020 2054 7275 6520 3a20 5065 656c 696e     True : Peelin
-00033a50: 6720 6461 7461 0a20 2020 2020 2020 2046  g data.        F
-00033a60: 616c 7365 3a20 4e6f 7420 5065 656c 696e  alse: Not Peelin
-00033a70: 670a 2020 2020 2020 7374 7269 7020 0a20  g.      strip . 
-00033a80: 2020 2020 2020 2046 616c 7365 3a20 6e6f         False: no
-00033a90: 7420 7265 6d6f 7665 2077 6869 7465 2073  t remove white s
-00033aa0: 7061 6365 0a20 2020 2020 2020 2054 7275  pace.        Tru
-00033ab0: 6520 3a20 7265 6d6f 7665 2077 6869 7465  e : remove white
-00033ac0: 2073 7061 6365 0a20 2020 2027 2727 0a20   space.    '''. 
-00033ad0: 2020 206f 7574 5f64 6174 613d 4e6f 6e65     out_data=None
-00033ae0: 0a20 2020 2069 6620 4973 496e 2864 6174  .    if IsIn(dat
-00033af0: 612c 5b5b 5d2c 7b7d 5d29 2061 6e64 2049  a,[[],{}]) and I
-00033b00: 7349 6e28 6465 6661 756c 742c 5b27 6f72  sIn(default,['or
-00033b10: 6727 2c27 6f72 6967 696e 616c 275d 293a  g','original']):
-00033b20: 0a20 2020 2020 2020 2023 4966 206e 6f20  .        #If no 
-00033b30: 6461 7461 2061 6e64 2064 6566 6175 6c74  data and default
-00033b40: 2069 7320 6f72 6967 696e 616c 2074 6865   is original the
-00033b50: 6e20 636f 6e76 6572 7420 6f72 6967 696e  n convert origin
-00033b60: 616c 2074 6f20 6f75 740a 2020 2020 2020  al to out.      
-00033b70: 2020 6461 7461 3d6f 7267 0a20 2020 2069    data=org.    i
-00033b80: 6620 4973 496e 286f 7574 2c5b 7475 706c  f IsIn(out,[tupl
-00033b90: 652c 2774 7570 6c65 272c 6c69 7374 2c27  e,'tuple',list,'
-00033ba0: 6c69 7374 275d 293a 0a20 2020 2020 2020  list']):.       
-00033bb0: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
-00033bc0: 6365 2864 6174 612c 2874 7570 6c65 2c6c  ce(data,(tuple,l
-00033bd0: 6973 7429 293a 0a20 2020 2020 2020 2020  ist)):.         
-00033be0: 2020 206f 7574 5f64 6174 613d 5b64 6174     out_data=[dat
-00033bf0: 615d 0a20 2020 2020 2020 2065 6c73 653a  a].        else:
-00033c00: 0a20 2020 2020 2020 2020 2020 206f 7574  .            out
-00033c10: 5f64 6174 613d 6c69 7374 2864 6174 6129  _data=list(data)
-00033c20: 0a20 2020 2020 2020 2069 6620 6f75 7420  .        if out 
-00033c30: 696e 205b 7475 706c 652c 2774 7570 6c65  in [tuple,'tuple
-00033c40: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-00033c50: 6966 206f 7574 5f64 6174 613a 0a20 2020  if out_data:.   
-00033c60: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00033c70: 7572 6e20 7475 706c 6528 6f75 745f 6461  urn tuple(out_da
-00033c80: 7461 290a 2020 2020 2020 2020 2020 2020  ta).            
-00033c90: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
-00033ca0: 6465 6661 756c 742c 7475 706c 6529 3a0a  default,tuple):.
-00033cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00033cc0: 7265 7475 726e 2064 6566 6175 6c74 0a20  return default. 
-00033cd0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00033ce0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00033cf0: 2072 6574 7572 6e20 2844 6566 6175 6c74   return (Default
-00033d00: 286f 7267 2c64 6566 6175 6c74 2929 0a20  (org,default)). 
-00033d10: 2020 2020 2020 2069 6620 6f75 745f 6461         if out_da
-00033d20: 7461 3a0a 2020 2020 2020 2020 2020 2020  ta:.            
-00033d30: 7265 7475 726e 206f 7574 5f64 6174 610a  return out_data.
-00033d40: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
-00033d50: 6e73 7461 6e63 6528 6465 6661 756c 742c  nstance(default,
-00033d60: 6c69 7374 293a 0a20 2020 2020 2020 2020  list):.         
-00033d70: 2020 2072 6574 7572 6e20 6465 6661 756c     return defaul
-00033d80: 740a 2020 2020 2020 2020 656c 7365 3a0a  t.        else:.
-00033d90: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00033da0: 726e 205b 4465 6661 756c 7428 6f72 672c  rn [Default(org,
-00033db0: 6465 6661 756c 7429 5d0a 2020 2020 656c  default)].    el
-00033dc0: 6966 2049 7349 6e28 6f75 742c 5b64 6963  if IsIn(out,[dic
-00033dd0: 742c 2764 6963 7427 5d29 3a0a 2020 2020  t,'dict']):.    
-00033de0: 2020 2020 6966 2064 6174 613a 0a20 2020      if data:.   
-00033df0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00033e00: 4469 6374 2864 6174 6129 0a20 2020 2020  Dict(data).     
-00033e10: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
-00033e20: 6365 2864 6566 6175 6c74 2c64 6963 7429  ce(default,dict)
-00033e30: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00033e40: 7475 726e 2064 6566 6175 6c74 0a20 2020  turn default.   
-00033e50: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00033e60: 2020 2020 2020 2072 6574 7572 6e20 4465         return De
-00033e70: 6661 756c 7428 6f72 672c 6465 6661 756c  fault(org,defaul
-00033e80: 7429 0a20 2020 2065 6c69 6620 4973 496e  t).    elif IsIn
-00033e90: 286f 7574 2c5b 2773 7472 272c 7374 722c  (out,['str',str,
-00033ea0: 2773 7472 696e 6727 2c27 7465 7874 275d  'string','text']
-00033eb0: 293a 0a20 2020 2020 2020 206f 7574 5f64  ):.        out_d
-00033ec0: 6174 613d 5768 6974 6553 7472 6970 2850  ata=WhiteStrip(P
-00033ed0: 6565 6c28 5374 7228 6461 7461 292c 7065  eel(Str(data),pe
-00033ee0: 656c 292c 7374 7269 7029 0a20 2020 2065  el),strip).    e
-00033ef0: 6c69 6620 4973 496e 286f 7574 2c5b 2769  lif IsIn(out,['i
-00033f00: 6e74 272c 696e 742c 2769 6e74 6567 6572  nt',int,'integer
-00033f10: 272c 276e 756d 6265 7227 2c27 6e75 6d65  ','number','nume
-00033f20: 7269 6327 5d29 3a0a 2020 2020 2020 2020  ric']):.        
-00033f30: 6f75 745f 6461 7461 3d49 6e74 2857 6869  out_data=Int(Whi
-00033f40: 7465 5374 7269 7028 5065 656c 2864 6174  teStrip(Peel(dat
-00033f50: 612c 7065 656c 292c 7374 7269 7029 290a  a,peel),strip)).
-00033f60: 2020 2020 6966 206f 7574 5f64 6174 6120      if out_data 
-00033f70: 6973 2046 616c 7365 3a20 2369 6620 7374  is False: #if st
-00033f80: 7220 6f72 2069 6e74 2067 6f74 2046 616c  r or int got Fal
-00033f90: 7365 2074 6865 6e20 0a20 2020 2020 2020  se then .       
-00033fa0: 2072 6574 7572 6e20 4465 6661 756c 7428   return Default(
-00033fb0: 6f72 672c 6465 6661 756c 7429 0a20 2020  org,default).   
-00033fc0: 2069 6620 4973 4e6f 6e65 2870 6565 6c29   if IsNone(peel)
-00033fd0: 3a20 7065 656c 3d54 7275 650a 2020 2020  : peel=True.    
-00033fe0: 6f75 745f 6461 7461 3d57 6869 7465 5374  out_data=WhiteSt
-00033ff0: 7269 7028 5065 656c 2864 6174 612c 7065  rip(Peel(data,pe
-00034000: 656c 292c 7374 7269 7029 0a20 2020 2069  el),strip).    i
-00034010: 6620 6f75 745f 6461 7461 3a20 7265 7475  f out_data: retu
-00034020: 726e 206f 7574 5f64 6174 610a 2020 2020  rn out_data.    
-00034030: 7265 7475 726e 2044 6566 6175 6c74 286f  return Default(o
-00034040: 7267 2c64 6566 6175 6c74 290a 0a64 6566  rg,default)..def
-00034050: 2046 6565 6446 756e 6328 6f62 6a2c 2a69   FeedFunc(obj,*i
-00034060: 6e70 732c 2a2a 6f70 7473 293a 0a20 2020  nps,**opts):.   
-00034070: 2027 2727 0a20 2020 2041 7574 6f6d 6174   '''.    Automat
-00034080: 6963 616c 6c79 2046 6565 6420 6d61 7463  ically Feed matc
-00034090: 6865 6420 7661 7269 6162 6c65 7320 746f  hed variables to
-000340a0: 2066 756e 6374 696f 6e0a 2020 2020 4665   function.    Fe
-000340b0: 6564 4675 6e63 283c 6675 6e63 3e2c 3c66  edFunc(<func>,<f
-000340c0: 756e 6374 696f 6e27 7320 6172 6775 6d65  unction's argume
-000340d0: 6e74 733e 2c3c 6675 6e63 7469 6f6e 2773  nts>,<function's
-000340e0: 2076 6172 6961 626c 6573 3e29 0a20 2020   variables>).   
-000340f0: 2069 6620 736f 6d65 7468 696e 6720 7772   if something wr
-00034100: 6f6e 6720 7468 656e 2072 6574 7572 6e20  ong then return 
-00034110: 4661 6c73 650a 2020 2020 6966 2063 6f72  False.    if cor
-00034120: 7265 6374 2074 6865 6e20 7265 7475 726e  rect then return
-00034130: 206f 7574 7075 7420 6f66 2072 616e 2074   output of ran t
-00034140: 6865 2046 756e 6374 696f 6e20 7769 7468  he Function with
-00034150: 2069 6e70 7574 730a 2020 2020 2727 270a   inputs.    '''.
-00034160: 2020 2020 6966 2054 7970 6528 6f62 6a2c      if Type(obj,
-00034170: 2773 7472 2729 2061 6e64 206e 6f74 2069  'str') and not i
-00034180: 6e73 7065 6374 2e69 7363 6c61 7373 286f  nspect.isclass(o
-00034190: 626a 293a 2023 2066 6f72 2073 7472 2063  bj): # for str c
-000341a0: 6c61 7373 0a20 2020 2020 2020 206d 796d  lass.        mym
-000341b0: 6f64 3d4d 794d 6f64 756c 6528 6465 6661  od=MyModule(defa
-000341c0: 756c 743d 4661 6c73 652c 7061 7265 6e74  ult=False,parent
-000341d0: 3d31 290a 2020 2020 2020 2020 6966 206d  =1).        if m
-000341e0: 796d 6f64 2069 7320 4661 6c73 653a 0a20  ymod is False:. 
-000341f0: 2020 2020 2020 2020 2020 206d 796d 6f64             mymod
-00034200: 3d4d 794d 6f64 756c 6528 6465 6661 756c  =MyModule(defaul
-00034210: 743d 4661 6c73 652c 7061 7265 6e74 3d30  t=False,parent=0
-00034220: 290a 2020 2020 2020 2020 6966 206d 796d  ).        if mym
-00034230: 6f64 2069 7320 4661 6c73 653a 0a20 2020  od is False:.   
-00034240: 2020 2020 2020 2020 206d 796d 6f64 3d4d           mymod=M
-00034250: 794d 6f64 756c 6528 6465 6661 756c 743d  yModule(default=
-00034260: 4661 6c73 652c 7061 7265 6e74 3d2d 3129  False,parent=-1)
-00034270: 0a20 2020 2020 2020 2069 6620 5479 7065  .        if Type
-00034280: 286d 796d 6f64 2c27 6d6f 6475 6c65 2729  (mymod,'module')
-00034290: 3a0a 2020 2020 2020 2020 2020 2020 7472  :.            tr
-000342a0: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
-000342b0: 2020 206f 626a 3d67 6574 6174 7472 286d     obj=getattr(m
-000342c0: 796d 6f64 2c6f 626a 2c4e 6f6e 6529 0a20  ymod,obj,None). 
-000342d0: 2020 2020 2020 2020 2020 2065 7863 6570             excep
-000342e0: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-000342f0: 2020 2053 7464 4572 7228 2746 756e 6374     StdErr('Funct
-00034300: 696f 6e20 6e61 6d65 2022 7b7d 2220 6e6f  ion name "{}" no
-00034310: 7420 666f 756e 6420 696e 2074 6865 206d  t found in the m
-00034320: 6f64 756c 655c 6e27 2e66 6f72 6d61 7428  odule\n'.format(
-00034330: 6f62 6a29 290a 2020 2020 2020 2020 2020  obj)).          
-00034340: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
-00034350: 7365 0a20 2020 2069 6620 5479 7065 286f  se.    if Type(o
-00034360: 626a 2c28 2766 756e 6374 696f 6e27 2c27  bj,('function','
-00034370: 6d65 7468 6f64 272c 2762 7569 6c74 696e  method','builtin
-00034380: 5f66 756e 6374 696f 6e5f 6f72 5f6d 6574  _function_or_met
-00034390: 686f 6427 2c27 7479 7065 272c 2769 6e74  hod','type','int
-000343a0: 272c 2773 7472 272c 276c 6973 7427 2c27  ','str','list','
-000343b0: 6469 6374 2729 293a 0a20 2020 2020 2020  dict')):.       
-000343c0: 2066 6361 7267 733d 4675 6e63 7469 6f6e   fcargs=Function
-000343d0: 4172 6773 286f 626a 2c6d 6f64 653d 2764  Args(obj,mode='d
-000343e0: 6574 6169 6c27 2c64 6566 6175 6c74 3d7b  etail',default={
-000343f0: 7d29 0a20 2020 2020 2020 206e 696e 7073  }).        ninps
-00034400: 3d5b 5d0a 2020 2020 2020 2020 6e6f 7074  =[].        nopt
-00034410: 733d 7b7d 0a20 2020 2020 2020 2023 5370  s={}.        #Sp
-00034420: 6563 6961 6c20 6361 7365 2069 6e74 2c73  ecial case int,s
-00034430: 7472 2c6c 6973 742c 6469 6374 0a20 2020  tr,list,dict.   
-00034440: 2020 2020 2069 6620 5479 7065 286f 626a       if Type(obj
-00034450: 2c20 2827 696e 7427 2c27 7374 7227 2c27  , ('int','str','
-00034460: 6c69 7374 272c 2764 6963 7427 2929 3a0a  list','dict')):.
-00034470: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00034480: 6e70 733a 206e 696e 7073 2e61 7070 656e  nps: ninps.appen
-00034490: 6428 696e 7073 5b30 5d29 0a20 2020 2020  d(inps[0]).     
-000344a0: 2020 2020 2020 2069 6620 2762 6173 6527         if 'base'
-000344b0: 2069 6e20 6f70 7473 3a20 2369 6e74 2829   in opts: #int()
-000344c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000344d0: 206e 6f70 7473 5b27 6261 7365 275d 3d6f   nopts['base']=o
-000344e0: 7074 735b 2762 6173 6527 5d0a 2020 2020  pts['base'].    
-000344f0: 2020 2020 2020 2020 6966 2027 656e 636f          if 'enco
-00034500: 6469 6e67 2720 696e 206f 7074 733a 2023  ding' in opts: #
-00034510: 2073 7472 2829 0a20 2020 2020 2020 2020   str().         
-00034520: 2020 2020 2020 206e 6f70 7473 5b27 656e         nopts['en
-00034530: 636f 6469 6e67 275d 3d6f 7074 735b 2765  coding']=opts['e
-00034540: 6e63 6f64 696e 6727 5d0a 2020 2020 2020  ncoding'].      
-00034550: 2020 2020 2020 656c 6966 2054 7970 6528        elif Type(
-00034560: 6f62 6a2c 2773 7472 2729 2061 6e64 206e  obj,'str') and n
-00034570: 696e 7073 2061 6e64 2054 7970 6528 6e69  inps and Type(ni
-00034580: 6e70 735b 305d 2c27 6279 7465 7327 2920  nps[0],'bytes') 
-00034590: 616e 6420 2765 6e63 6f64 696e 6727 206e  and 'encoding' n
-000345a0: 6f74 2069 6e20 6f70 7473 3a20 2320 7374  ot in opts: # st
-000345b0: 7228 290a 2020 2020 2020 2020 2020 2020  r().            
-000345c0: 2020 2020 6e6f 7074 735b 2765 6e63 6f64      nopts['encod
-000345d0: 696e 6727 5d3d 2761 7363 6969 270a 2020  ing']='ascii'.  
-000345e0: 2020 2020 2020 6964 783d 300a 2020 2020        idx=0.    
-000345f0: 2020 2020 6966 2027 6172 6773 2720 696e      if 'args' in
-00034600: 2066 6361 7267 733a 0a20 2020 2020 2020   fcargs:.       
-00034610: 2020 2020 2066 6f72 2069 2069 6e20 6663       for i in fc
-00034620: 6172 6773 5b27 6172 6773 275d 3a0a 2020  args['args']:.  
-00034630: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00034640: 206c 656e 2869 6e70 7329 203e 2069 6478   len(inps) > idx
-00034650: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00034660: 2020 2020 2020 6e69 6e70 732e 6170 7065        ninps.appe
-00034670: 6e64 2869 6e70 735b 6964 785d 290a 2020  nd(inps[idx]).  
-00034680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034690: 2020 6964 782b 3d31 0a20 2020 2020 2020    idx+=1.       
-000346a0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-000346b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000346c0: 2020 2069 6620 6920 696e 206f 7074 733a     if i in opts:
-000346d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000346e0: 2020 2020 2020 2020 206e 696e 7073 2e61           ninps.a
-000346f0: 7070 656e 6428 6f70 7473 2e70 6f70 2869  ppend(opts.pop(i
-00034700: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
-00034710: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00034720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034730: 2020 2020 2053 7464 4572 7228 2769 6e70       StdErr('inp
-00034740: 7574 2070 6172 616d 6574 6572 2022 7b7d  ut parameter "{}
-00034750: 2220 6e6f 7420 666f 756e 645c 6e27 2e66  " not found\n'.f
-00034760: 6f72 6d61 7428 6929 290a 2020 2020 2020  ormat(i)).      
-00034770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034780: 2020 7265 7475 726e 2046 616c 7365 0a20    return False. 
-00034790: 2020 2020 2020 2069 6620 2776 6172 6172         if 'varar
-000347a0: 6773 2720 696e 2066 6361 7267 733a 0a20  gs' in fcargs:. 
-000347b0: 2020 2020 2020 2020 2020 206e 696e 7073             ninps
-000347c0: 3d6e 696e 7073 2b6c 6973 7428 696e 7073  =ninps+list(inps
-000347d0: 5b69 6478 3a5d 290a 2020 2020 2020 2020  [idx:]).        
-000347e0: 6966 2027 6465 6661 756c 7473 2720 696e  if 'defaults' in
-000347f0: 2066 6361 7267 733a 0a20 2020 2020 2020   fcargs:.       
-00034800: 2020 2020 2066 6f72 2069 2069 6e20 6663       for i in fc
-00034810: 6172 6773 5b27 6465 6661 756c 7473 275d  args['defaults']
-00034820: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00034830: 2020 6966 2069 2069 6e20 6f70 7473 3a0a    if i in opts:.
-00034840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034850: 2020 2020 6e6f 7074 735b 695d 3d6f 7074      nopts[i]=opt
-00034860: 732e 706f 7028 6929 2023 6d61 6b65 2077  s.pop(i) #make w
-00034870: 6974 6820 696e 7075 7420 7661 6c75 650a  ith input value.
-00034880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034890: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-000348a0: 2020 2020 2020 2020 2020 6e6f 7074 735b            nopts[
-000348b0: 695d 3d66 6361 7267 735b 2764 6566 6175  i]=fcargs['defau
-000348c0: 6c74 7327 5d5b 695d 2023 206d 616b 6520  lts'][i] # make 
-000348d0: 7769 7468 2064 6566 6175 6c74 2076 616c  with default val
-000348e0: 7565 0a20 2020 2020 2020 2069 6620 276b  ue.        if 'k
-000348f0: 6579 776f 7264 7327 2069 6e20 6663 6172  eywords' in fcar
-00034900: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
-00034910: 6e6f 7074 732e 7570 6461 7465 286f 7074  nopts.update(opt
-00034920: 7329 0a20 2020 2020 2020 2023 5275 6e20  s).        #Run 
-00034930: 6675 6e63 7469 6f6e 2077 6974 6820 666f  function with fo
-00034940: 756e 6420 6172 6775 6d65 6e74 730a 2020  und arguments.  
-00034950: 2020 2020 2020 6966 206e 696e 7073 2061        if ninps a
-00034960: 6e64 206e 6f70 7473 3a0a 2020 2020 2020  nd nopts:.      
-00034970: 2020 2020 2020 6966 2054 7970 6528 6f62        if Type(ob
-00034980: 6a2c 2827 696e 7427 2c27 7374 7227 2929  j,('int','str'))
-00034990: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000349a0: 2020 7265 7475 726e 206f 626a 286e 696e    return obj(nin
-000349b0: 7073 5b30 5d2c 2a2a 6e6f 7074 7329 0a20  ps[0],**nopts). 
-000349c0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-000349d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000349e0: 2072 6574 7572 6e20 6f62 6a28 2a6e 696e   return obj(*nin
-000349f0: 7073 2c2a 2a6e 6f70 7473 290a 2020 2020  ps,**nopts).    
-00034a00: 2020 2020 656c 6966 206e 696e 7073 3a0a      elif ninps:.
-00034a10: 2020 2020 2020 2020 2020 2020 6966 2054              if T
-00034a20: 7970 6528 6f62 6a2c 2827 696e 7427 2c27  ype(obj,('int','
-00034a30: 7374 7227 2c27 6c69 7374 272c 2764 6963  str','list','dic
-00034a40: 7427 2929 3a0a 2020 2020 2020 2020 2020  t')):.          
-00034a50: 2020 2020 2020 7265 7475 726e 206f 626a        return obj
-00034a60: 286e 696e 7073 5b30 5d29 0a20 2020 2020  (ninps[0]).     
-00034a70: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00034a80: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00034a90: 7572 6e20 6f62 6a28 2a6e 696e 7073 290a  urn obj(*ninps).
-00034aa0: 2020 2020 2020 2020 656c 6966 206e 6f70          elif nop
-00034ab0: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
-00034ac0: 7265 7475 726e 206f 626a 282a 2a6e 6f70  return obj(**nop
-00034ad0: 7473 290a 2020 2020 2020 2020 656c 7365  ts).        else
-00034ae0: 3a0a 2020 2020 2020 2020 2020 2020 7472  :.            tr
-00034af0: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
-00034b00: 2020 2072 6574 7572 6e20 6f62 6a28 290a     return obj().
-00034b10: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-00034b20: 7074 3a0a 2020 2020 2020 2020 2020 2020  pt:.            
-00034b30: 2020 2020 653d 4578 6365 7074 4d65 7373      e=ExceptMess
-00034b40: 6167 6528 290a 2020 2020 2020 2020 2020  age().          
-00034b50: 2020 2020 2020 5374 6445 7272 2865 290a        StdErr(e).
-00034b60: 2020 2020 7265 7475 726e 2046 616c 7365      return False
-00034b70: 0a0a 6465 6620 7072 696e 7466 282a 6d73  ..def printf(*ms
-00034b80: 672c 2a2a 6f70 7473 293a 0a20 2020 2027  g,**opts):.    '
-00034b90: 2727 0a20 2020 2053 696d 696c 6172 2061  ''.    Similar a
-00034ba0: 7320 7072 696e 7428 290a 2020 2020 6461  s print().    da
-00034bb0: 7465 3d54 7275 652f 4661 6c73 6520 2020  te=True/False   
-00034bc0: 2020 2020 2020 2020 2020 203a 2028 5472             : (Tr
-00034bd0: 7565 2920 7072 696e 7420 6461 7465 2069  ue) print date i
-00034be0: 6e69 7469 616c 206c 696e 650a 2020 2020  nitial line.    
-00034bf0: 6461 7465 5f66 6f72 6d61 7420 2020 2020  date_format     
-00034c00: 2020 2020 2020 2020 2020 2020 203a 2069               : i
-00034c10: 6620 6465 6669 6e65 6420 6461 7465 5f66  f defined date_f
-00034c20: 6f72 6d61 7420 7468 656e 2070 7269 6e74  ormat then print
-00034c30: 2064 6174 6520 7769 7468 2064 6174 655f   date with date_
-00034c40: 666f 726d 6174 0a20 2020 2064 6972 6563  format.    direc
-00034c50: 743d 4661 6c73 652f 5472 7565 2020 2020  t=False/True    
-00034c60: 2020 2020 2020 2020 3a20 2854 7275 6529          : (True)
-00034c70: 2070 7269 6e74 2077 6974 686f 7574 206e   print without n
-00034c80: 6577 6c69 6e65 2061 6e64 2061 6e79 2069  ewline and any i
-00034c90: 6e74 726f 2069 6e66 6f72 6d61 7469 6f6e  ntro information
-00034ca0: 0a20 2020 206c 6f67 6669 6c65 3d20 2020  .    logfile=   
-00034cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034cc0: 2020 3a20 7361 7665 696e 6720 6c6f 6720    : saveing log 
-00034cd0: 746f 206c 6f67 6669 6c65 0a20 2020 2063  to logfile.    c
-00034ce0: 616c 6c65 725f 6465 7461 696c 3d46 616c  aller_detail=Fal
-00034cf0: 7365 2f54 7275 6520 2020 2020 3a20 7072  se/True     : pr
-00034d00: 696e 7420 6361 6c6c 6572 2069 6e66 6f72  int caller infor
-00034d10: 6d61 7469 6f6e 0a20 2020 2020 2020 5472  mation.       Tr
-00034d20: 7565 3a0a 2020 2020 2020 2020 2020 2020  ue:.            
-00034d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034d40: 2020 2020 202d 206c 696e 6520 6e75 6d62       - line numb
-00034d50: 6572 2c20 6669 6c65 6e61 6d65 2c20 6172  er, filename, ar
-00034d60: 6773 2c20 6f70 7469 6f6e 616c 2063 616c  gs, optional cal
-00034d70: 6c65 725f 6675 6c6c 5f66 696c 656e 616d  ler_full_filenam
-00034d80: 650a 2020 2020 2020 2046 616c 7365 3a20  e.       False: 
-00034d90: 2864 6574 6169 6c20 7365 6c65 6374 696f  (detail selectio
-00034da0: 6e29 0a20 2020 2020 2020 2020 2063 616c  n).          cal
-00034db0: 6c65 725f 6172 6773 3d46 616c 7365 2f54  ler_args=False/T
-00034dc0: 7275 6520 3a20 2846 616c 7365 2920 7072  rue : (False) pr
-00034dd0: 696e 7420 6172 6773 206f 6620 6675 6e63  int args of func
-00034de0: 7469 6f6e 0a20 2020 2020 2020 2020 2063  tion.          c
-00034df0: 616c 6c65 725f 6669 6c65 6e61 6d65 3d46  aller_filename=F
-00034e00: 616c 7365 2f54 7275 6520 3a20 2846 616c  alse/True : (Fal
-00034e10: 7365 2920 7072 696e 7420 6669 6c65 6e61  se) print filena
-00034e20: 6d65 0a20 2020 2020 2020 2020 2063 616c  me.          cal
-00034e30: 6c65 725f 6675 6c6c 5f66 696c 656e 616d  ler_full_filenam
-00034e40: 653d 4661 6c73 652f 5472 7565 203a 2028  e=False/True : (
-00034e50: 4661 6c73 6529 2070 7269 6e74 2066 756c  False) print ful
-00034e60: 6c20 7061 7468 2066 696c 656e 616d 650a  l path filename.
-00034e70: 2020 2020 2020 2020 2020 6361 6c6c 6572            caller
-00034e80: 5f6c 696e 655f 6e75 6d62 6572 3d46 616c  _line_number=Fal
-00034e90: 7365 2f54 7275 6520 3a20 2846 616c 7365  se/True : (False
-00034ea0: 2920 7072 696e 7420 6c69 6e65 206e 756d  ) print line num
-00034eb0: 6265 7220 0a20 2020 2063 616c 6c65 725f  ber .    caller_
-00034ec0: 7472 6565 3d46 616c 7365 2f54 7275 6520  tree=False/True 
-00034ed0: 2020 2020 2020 3a20 7072 696e 7420 7472        : print tr
-00034ee0: 6565 206f 6620 6361 6c6c 6572 2068 6973  ee of caller his
-00034ef0: 746f 7279 0a20 2020 2020 2020 5472 7565  tory.       True
-00034f00: 3a0a 2020 2020 2020 2020 2020 2d20 7472  :.          - tr
-00034f10: 6565 2061 6e64 2068 6973 746f 7279 0a20  ee and history. 
-00034f20: 2020 2020 2020 4661 6c73 653a 0a20 2020        False:.   
-00034f30: 2020 2020 2020 2063 616c 6c65 725f 6869         caller_hi
-00034f40: 7374 6f72 793d 4661 6c73 652f 5472 7565  story=False/True
-00034f50: 203a 2072 6574 7572 6e20 6869 7374 6f72   : return histor
-00034f60: 7920 7769 7468 6f75 7420 7472 6565 0a20  y without tree. 
-00034f70: 2020 2073 7973 6c6f 6764 3d20 2020 2020     syslogd=     
-00034f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034f90: 3a20 6c6f 6767 696e 6720 746f 2073 7973  : logging to sys
-00034fa0: 6c6f 6764 2064 6165 6d6f 6e0a 2020 2020  logd daemon.    
-00034fb0: 656e 645f 6e65 776c 696e 653d 5472 7565  end_newline=True
-00034fc0: 2f46 616c 7365 2020 2020 2020 203a 206d  /False       : m
-00034fd0: 6172 6b20 6e65 7720 6c69 6e65 2061 7420  ark new line at 
-00034fe0: 656e 6420 6f66 2074 6865 206c 696e 650a  end of the line.
-00034ff0: 2020 2020 7374 6172 745f 6e65 776c 696e      start_newlin
-00035000: 653d 4661 6c73 652f 5472 7565 2020 2020  e=False/True    
-00035010: 203a 206d 6172 6b20 6e65 7720 6c69 6e65   : mark new line
-00035020: 2061 7420 7374 6172 7420 6f66 2074 6865   at start of the
-00035030: 206c 696e 650a 2020 2020 696e 7472 6f3d   line.    intro=
-00035040: 3c73 7472 3e20 2020 2020 2020 2020 2020  <str>           
-00035050: 2020 2020 2020 203a 206c 6f67 2069 6e74         : log int
-00035060: 726f 2073 7472 696e 6720 6265 666f 7265  ro string before
-00035070: 206c 6f67 2064 6174 610a 2020 2020 6e6f   log data.    no
-00035080: 5f69 6e74 726f 2020 2020 2020 2020 2020  _intro          
-00035090: 2020 2020 2020 2020 2020 203a 2054 7275             : Tru
-000350a0: 653a 2074 656d 706f 7261 7279 2072 656d  e: temporary rem
-000350b0: 6f76 6520 696e 7472 6f20 2c20 4661 6c73  ove intro , Fals
-000350c0: 6528 6465 6661 756c 7429 3a20 496e 7472  e(default): Intr
-000350d0: 6f20 7768 656e 2065 7869 7374 2069 6e74  o when exist int
-000350e0: 726f 2c20 4e6f 6e65 3a20 7370 6163 6520  ro, None: space 
-000350f0: 696e 7374 6561 6420 696e 7472 6f20 7374  instead intro st
-00035100: 7269 6e67 0a20 2020 206c 6f67 5f6c 6576  ring.    log_lev
-00035110: 656c 3d3c 696e 743e 2020 2020 2020 2020  el=<int>        
-00035120: 2020 2020 2020 3a20 6d61 6b65 206c 6f67        : make log
-00035130: 2d6c 6576 656c 0a20 2020 2020 2020 2070  -level.        p
-00035140: 7269 6e74 665f 6c6f 675f 6261 7365 3d36  rintf_log_base=6
-00035150: 0a20 2020 2020 2020 2070 7269 6e74 6628  .        printf(
-00035160: 2761 6161 6161 272c 6c6f 675f 6c65 7665  'aaaaa',log_leve
-00035170: 6c3d 3329 202d 3e20 7468 6973 2077 696c  l=3) -> this wil
-00035180: 6c20 7072 696e 740a 2020 2020 2020 2020  l print.        
-00035190: 7072 696e 7466 2827 6262 6262 6227 2c6c  printf('bbbbb',l
-000351a0: 6f67 5f6c 6576 656c 3d38 2920 2d3e 2074  og_level=8) -> t
-000351b0: 6869 7320 6e6f 7420 7072 696e 742e 2062  his not print. b
-000351c0: 7574 2069 6620 6368 616e 6765 2070 7269  ut if change pri
-000351d0: 6e74 665f 6c6f 675f 6261 7365 2074 6f20  ntf_log_base to 
-000351e0: 3920 7468 656e 2069 7420 7769 6c6c 2070  9 then it will p
-000351f0: 7269 6e74 0a20 2020 206c 6f67 3d3c 6675  rint.    log=<fu
-00035200: 6e63 3e20 2020 2020 2020 2020 2020 2020  nc>             
-00035210: 2020 2020 2020 3a20 7075 7420 6c6f 6767        : put logg
-00035220: 696e 6720 6461 7461 2074 6f20 6c6f 6720  ing data to log 
-00035230: 6675 6e63 7469 6f6e 0a20 2020 2064 7370  function.    dsp
-00035240: 3d20 2020 2020 2020 2020 2020 2020 2020  =               
-00035250: 2020 2020 2020 2020 2020 3a20 4469 7370            : Disp
-00035260: 6c61 7920 666f 726d 6174 0a20 2020 2020  lay format.     
-00035270: 2020 2061 2020 3a20 6175 746f 0a20 2020     a  : auto.   
-00035280: 2020 2020 2073 2020 3a20 7363 7265 656e       s  : screen
-00035290: 0a20 2020 2020 2020 2066 2020 3a20 7361  .        f  : sa
-000352a0: 7665 2074 6f20 6669 6c65 0a20 2020 2020  ve to file.     
-000352b0: 2020 2064 2020 3a20 7361 7665 2074 6f20     d  : save to 
-000352c0: 6465 6275 6720 6669 6c65 0a20 2020 2020  debug file.     
-000352d0: 2020 2065 2020 3a20 6c6f 6720 746f 2073     e  : log to s
-000352e0: 7461 6e64 6172 6420 6572 726f 7220 0a20  tandard error . 
-000352f0: 2020 2020 2020 2063 2020 3a20 636f 6e73         c  : cons
-00035300: 6f6c 650a 2020 2020 2020 2020 6920 203a  ole.        i  :
-00035310: 2069 676e 6f72 6520 7072 696e 740a 2020   ignore print.  
-00035320: 2020 2020 2020 7220 203a 2072 6574 7572        r  : retur
-00035330: 6e0a 2020 2020 2020 2020 2020 2072 743d  n.           rt=
-00035340: 7072 696e 7466 2827 7878 7878 272c 6473  printf('xxxx',ds
-00035350: 703d 2772 2729 0a20 2020 2020 2020 2020  p='r').         
-00035360: 2020 7072 696e 7428 7274 290a 2020 2020    print(rt).    
-00035370: 2727 270a 2020 2020 676c 6f62 616c 2070  '''.    global p
-00035380: 7269 6e74 665f 6361 6c6c 6572 5f64 6574  rintf_caller_det
-00035390: 6169 6c0a 2020 2020 676c 6f62 616c 2070  ail.    global p
-000353a0: 7269 6e74 665f 6361 6c6c 6572 5f74 7265  rintf_caller_tre
-000353b0: 650a 2020 2020 676c 6f62 616c 2070 7269  e.    global pri
-000353c0: 6e74 665f 6c6f 675f 6261 7365 0a20 2020  ntf_log_base.   
-000353d0: 2067 6c6f 6261 6c20 7072 696e 7466 5f63   global printf_c
-000353e0: 616c 6c65 725f 6e61 6d65 0a20 2020 2067  aller_name.    g
-000353f0: 6c6f 6261 6c20 7072 696e 7466 5f6e 6577  lobal printf_new
-00035400: 6c69 6e65 5f69 6e66 6f0a 2020 2020 676c  line_info.    gl
-00035410: 6f62 616c 2070 7269 6e74 665f 6967 6e6f  obal printf_igno
-00035420: 7265 5f65 6d70 7479 0a20 2020 2067 6c6f  re_empty.    glo
-00035430: 6261 6c20 7072 696e 7466 5f64 6267 5f65  bal printf_dbg_e
-00035440: 6d70 7479 0a20 2020 2067 6c6f 6261 6c20  mpty.    global 
-00035450: 7072 696e 7466 5f73 6372 5f64 6267 0a20  printf_scr_dbg. 
-00035460: 2020 2064 6972 6563 743d 6f70 7473 2e67     direct=opts.g
-00035470: 6574 2827 6469 7265 6374 272c 4661 6c73  et('direct',Fals
-00035480: 6529 0a20 2020 2064 7370 3d6f 7074 732e  e).    dsp=opts.
-00035490: 6765 7428 2764 7370 272c 6f70 7473 2e67  get('dsp',opts.g
-000354a0: 6574 2827 6d6f 6465 272c 2761 2729 290a  et('mode','a')).
-000354b0: 2020 2020 6966 206e 6f74 2064 7370 3a20      if not dsp: 
-000354c0: 6473 703d 2761 270a 2020 2020 6966 2064  dsp='a'.    if d
-000354d0: 7370 203d 3d20 2769 273a 2072 6574 7572  sp == 'i': retur
-000354e0: 6e20 2320 6967 6e6f 7265 2070 7269 6e74  n # ignore print
-000354f0: 0a20 2020 206c 6f67 3d6f 7074 732e 6765  .    log=opts.ge
-00035500: 7428 276c 6f67 272c 4e6f 6e65 290a 2020  t('log',None).  
-00035510: 2020 6c6f 675f 6c65 7665 6c3d 6f70 7473    log_level=opts
-00035520: 2e67 6574 2827 6c6f 675f 6c65 7665 6c27  .get('log_level'
-00035530: 2c4e 6f6e 6529 0a20 2020 2070 6172 656e  ,None).    paren
-00035540: 745f 6e3d 6f70 7473 2e67 6574 2827 6361  t_n=opts.get('ca
-00035550: 6c6c 6572 5f70 6172 656e 7427 2c31 290a  ller_parent',1).
-00035560: 2020 2020 6361 6c6c 6572 5f64 6574 6169      caller_detai
-00035570: 6c3d 6f70 7473 2e67 6574 2827 6361 6c6c  l=opts.get('call
-00035580: 6572 272c 6f70 7473 2e67 6574 2827 6361  er',opts.get('ca
-00035590: 6c6c 6572 5f64 6574 6169 6c27 2c70 7269  ller_detail',pri
-000355a0: 6e74 665f 6361 6c6c 6572 5f64 6574 6169  ntf_caller_detai
-000355b0: 6c29 290a 2020 2020 6361 6c6c 6572 5f74  l)).    caller_t
-000355c0: 7265 653d 6f70 7473 2e67 6574 2827 6361  ree=opts.get('ca
-000355d0: 6c6c 6572 5f74 7265 6527 2c70 7269 6e74  ller_tree',print
-000355e0: 665f 6361 6c6c 6572 5f74 7265 6529 0a20  f_caller_tree). 
-000355f0: 2020 2063 616c 6c65 725f 6869 7374 6f72     caller_histor
-00035600: 793d 6f70 7473 2e67 6574 2827 6361 6c6c  y=opts.get('call
-00035610: 6572 5f68 6973 746f 7279 272c 4661 6c73  er_history',Fals
-00035620: 6529 0a20 2020 2063 616c 6c65 725f 6967  e).    caller_ig
-00035630: 6e6f 7265 3d6f 7074 732e 6765 7428 2763  nore=opts.get('c
-00035640: 616c 6c65 725f 6967 6e6f 7265 272c 6f70  aller_ignore',op
-00035650: 7473 2e67 6574 2827 6361 6c6c 6572 5f75  ts.get('caller_u
-00035660: 7070 6572 272c 5b5d 2929 0a20 2020 2063  pper',[])).    c
-00035670: 616c 6c65 725f 6675 6c6c 5f66 696c 656e  aller_full_filen
-00035680: 616d 653d 6f70 7473 2e67 6574 2827 6361  ame=opts.get('ca
-00035690: 6c6c 6572 5f66 756c 6c5f 6669 6c65 6e61  ller_full_filena
-000356a0: 6d65 272c 4661 6c73 6529 0a20 2020 2063  me',False).    c
-000356b0: 616c 6c65 725f 6669 6c65 6e61 6d65 3d6f  aller_filename=o
-000356c0: 7074 732e 6765 7428 2763 616c 6c65 725f  pts.get('caller_
-000356d0: 6669 6c65 6e61 6d65 272c 4661 6c73 6529  filename',False)
-000356e0: 0a20 2020 2063 616c 6c65 725f 6c69 6e65  .    caller_line
-000356f0: 5f6e 756d 6265 723d 6f70 7473 2e67 6574  _number=opts.get
-00035700: 2827 6361 6c6c 6572 5f6c 696e 655f 6e75  ('caller_line_nu
-00035710: 6d62 6572 272c 4661 6c73 6529 0a20 2020  mber',False).   
-00035720: 2063 616c 6c65 725f 6172 6773 3d6f 7074   caller_args=opt
-00035730: 732e 6765 7428 2763 616c 6c65 725f 6172  s.get('caller_ar
-00035740: 6773 272c 4661 6c73 6529 0a20 2020 2063  gs',False).    c
-00035750: 616c 6c65 725f 6e61 6d65 3d6f 7074 732e  aller_name=opts.
-00035760: 6765 7428 2763 616c 6c65 725f 6e61 6d65  get('caller_name
-00035770: 272c 7072 696e 7466 5f63 616c 6c65 725f  ',printf_caller_
-00035780: 6e61 6d65 290a 2020 2020 7379 736c 6f67  name).    syslog
-00035790: 643d 6f70 7473 2e67 6574 2827 7379 736c  d=opts.get('sysl
-000357a0: 6f67 6427 2c4e 6f6e 6529 0a20 2020 2073  ogd',None).    s
-000357b0: 6372 5f64 6267 3d6f 7074 732e 6765 7428  cr_dbg=opts.get(
-000357c0: 2773 6372 5f64 6267 272c 7072 696e 7466  'scr_dbg',printf
-000357d0: 5f73 6372 5f64 6267 290a 2020 2020 7363  _scr_dbg).    sc
-000357e0: 725f 6462 675f 636f 6e64 6974 696f 6e3d  r_dbg_condition=
-000357f0: 6f70 7473 2e67 6574 2827 7363 725f 6462  opts.get('scr_db
-00035800: 675f 636f 6e64 6974 696f 6e27 290a 2020  g_condition').  
-00035810: 2020 6e6f 5f69 6e74 726f 3d6f 7074 732e    no_intro=opts.
-00035820: 6765 7428 276e 6f5f 696e 7472 6f27 2c46  get('no_intro',F
-00035830: 616c 7365 290a 2020 2020 6967 6e6f 7265  alse).    ignore
-00035840: 5f65 6d70 7479 3d6f 7074 732e 6765 7428  _empty=opts.get(
-00035850: 2769 676e 6f72 655f 656d 7074 7927 2c70  'ignore_empty',p
-00035860: 7269 6e74 665f 6967 6e6f 7265 5f65 6d70  rintf_ignore_emp
-00035870: 7479 290a 2020 2020 6462 675f 656d 7074  ty).    dbg_empt
-00035880: 793d 6f70 7473 2e67 6574 2827 6462 675f  y=opts.get('dbg_
-00035890: 656d 7074 7927 2c70 7269 6e74 665f 6462  empty',printf_db
-000358a0: 675f 656d 7074 7929 0a20 2020 206d 7367  g_empty).    msg
-000358b0: 5f73 706c 6974 3d6f 7074 732e 6765 7428  _split=opts.get(
-000358c0: 276d 7367 5f73 706c 6974 272c 2720 2729  'msg_split',' ')
-000358d0: 0a20 2020 206d 7367 3d6c 6973 7428 6d73  .    msg=list(ms
-000358e0: 6729 0a20 2020 2069 6620 6e6f 5f69 6e74  g).    if no_int
-000358f0: 726f 2069 7320 5472 7565 206f 7220 6469  ro is True or di
-00035900: 7265 6374 3a0a 2020 2020 2020 2020 6461  rect:.        da
-00035910: 7465 5f66 6f72 6d61 743d 4e6f 6e65 0a20  te_format=None. 
-00035920: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00035930: 2064 6174 655f 666f 726d 6174 3d6f 7074   date_format=opt
-00035940: 732e 6765 7428 2764 6174 655f 666f 726d  s.get('date_form
-00035950: 6174 272c 2725 6d2f 2564 2f25 5920 2548  at','%m/%d/%Y %H
-00035960: 3a25 4d3a 2553 2720 6966 206f 7074 732e  :%M:%S' if opts.
-00035970: 6765 7428 2764 6174 6527 2920 656c 7365  get('date') else
-00035980: 204e 6f6e 6529 0a20 2020 2023 2065 6e64   None).    # end
-00035990: 206e 6577 6c69 6e65 2064 6573 6967 6e0a   newline design.
-000359a0: 2020 2020 6e65 775f 6c69 6e65 3d27 2720      new_line='' 
-000359b0: 6966 2064 6972 6563 7420 656c 7365 206f  if direct else o
-000359c0: 7074 732e 6765 7428 276e 6577 5f6c 696e  pts.get('new_lin
-000359d0: 6527 2c6f 7074 732e 6765 7428 276e 6577  e',opts.get('new
-000359e0: 6c69 6e65 272c 6f70 7473 2e67 6574 2827  line',opts.get('
-000359f0: 656e 6427 2c6f 7074 732e 6765 7428 2765  end',opts.get('e
-00035a00: 6e64 5f6e 6577 6c69 6e65 272c 6f70 7473  nd_newline',opts
-00035a10: 2e67 6574 2827 706f 7374 5f6e 6577 6c69  .get('post_newli
-00035a20: 6e65 272c 275c 6e27 2929 2929 290a 2020  ne','\n'))))).  
-00035a30: 2020 6966 206e 6577 5f6c 696e 6520 6e6f    if new_line no
-00035a40: 7420 696e 205b 2727 2c27 5c6e 275d 3a6e  t in ['','\n']:n
-00035a50: 6577 5f6c 696e 653d 275c 6e27 2069 6620  ew_line='\n' if 
-00035a60: 6e65 775f 6c69 6e65 2061 6e64 206e 6f74  new_line and not
-00035a70: 2064 6972 6563 7420 656c 7365 2027 270a   direct else ''.
-00035a80: 2020 2020 2320 7374 6172 7420 6e65 776c      # start newl
-00035a90: 696e 6520 6465 7369 676e 0a20 2020 206e  ine design.    n
-00035aa0: 6f5f 7374 6172 745f 6e65 776c 696e 653d  o_start_newline=
-00035ab0: 6f70 7473 2e67 6574 2827 6e6f 5f73 7461  opts.get('no_sta
-00035ac0: 7274 5f6e 6577 6c69 6e65 2729 0a20 2020  rt_newline').   
-00035ad0: 2073 7461 7274 5f6e 6577 6c69 6e65 3d27   start_newline='
-00035ae0: 2720 6966 206e 6f5f 7374 6172 745f 6e65  ' if no_start_ne
-00035af0: 776c 696e 6520 6973 2054 7275 6520 656c  wline is True el
-00035b00: 7365 206f 7074 732e 6765 7428 2773 7461  se opts.get('sta
-00035b10: 7274 5f6e 6577 6c69 6e65 272c 6f70 7473  rt_newline',opts
-00035b20: 2e67 6574 2827 7374 6172 7427 2c6f 7074  .get('start',opt
-00035b30: 732e 6765 7428 2770 7265 5f6e 6577 6c69  s.get('pre_newli
-00035b40: 6e65 2729 2929 0a20 2020 2069 6620 6e6f  ne'))).    if no
-00035b50: 5f73 7461 7274 5f6e 6577 6c69 6e65 3a0a  _start_newline:.
-00035b60: 2020 2020 2020 2020 7374 6172 745f 6e65          start_ne
-00035b70: 776c 696e 653d 2727 0a20 2020 2065 6c73  wline=''.    els
-00035b80: 653a 0a20 2020 2020 2020 2069 6620 7374  e:.        if st
-00035b90: 6172 745f 6e65 776c 696e 6520 6973 2054  art_newline is T
-00035ba0: 7275 653a 0a20 2020 2020 2020 2020 2020  rue:.           
-00035bb0: 2073 7461 7274 5f6e 6577 6c69 6e65 3d27   start_newline='
-00035bc0: 5c6e 270a 2020 2020 2020 2020 656c 6966  \n'.        elif
-00035bd0: 2049 7349 6e28 7374 6172 745f 6e65 776c   IsIn(start_newl
-00035be0: 696e 652c 5b27 4127 2c27 4175 746f 275d  ine,['A','Auto']
-00035bf0: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
-00035c00: 7461 7274 5f6e 6577 6c69 6e65 3d27 6175  tart_newline='au
-00035c10: 746f 270a 2020 2020 2020 2020 656c 7365  to'.        else
-00035c20: 3a0a 2020 2020 2020 2020 2020 2020 7374  :.            st
+00032520: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00032530: 616e 6365 2869 676e 6f72 6573 2c74 7570  ance(ignores,tup
+00032540: 6c65 2920 616e 6420 2854 7970 6528 692c  le) and (Type(i,
+00032550: 6967 6e6f 7265 7329 206f 7220 4973 496e  ignores) or IsIn
+00032560: 2869 2c69 676e 6f72 6573 2929 3a0a 2020  (i,ignores)):.  
+00032570: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00032580: 6e74 696e 7565 0a20 2020 2020 2020 2020  ntinue.         
+00032590: 2020 2072 742e 6170 7065 6e64 2869 290a     rt.append(i).
+000325a0: 2020 2020 6966 206f 7074 732e 6765 7428      if opts.get(
+000325b0: 2773 7472 6970 2729 3a0a 2020 2020 2020  'strip'):.      
+000325c0: 2020 7274 3d5b 692e 7374 7269 7028 2920    rt=[i.strip() 
+000325d0: 6966 2069 7369 6e73 7461 6e63 6528 692c  if isinstance(i,
+000325e0: 2873 7472 2c62 7974 6573 2929 2065 6c73  (str,bytes)) els
+000325f0: 6520 6920 666f 7220 6920 696e 2072 745d  e i for i in rt]
+00032600: 0a20 2020 2069 6620 6f70 7473 2e67 6574  .    if opts.get
+00032610: 2827 756e 6971 2729 3a0a 2020 2020 2020  ('uniq'):.      
+00032620: 2020 7265 7475 726e 2055 6e69 7128 7274    return Uniq(rt
+00032630: 290a 2020 2020 6964 783d 6f70 7473 2e67  ).    idx=opts.g
+00032640: 6574 2827 6964 7827 290a 2020 2020 6966  et('idx').    if
+00032650: 206e 6f74 2049 734e 6f6e 6528 6964 7829   not IsNone(idx)
+00032660: 3a0a 2020 2020 2020 2020 6f6b 2c69 6478  :.        ok,idx
+00032670: 3d49 6e64 6578 466f 726d 2869 6478 2c69  =IndexForm(idx,i
+00032680: 6478 5f6f 6e6c 793d 5472 7565 2c73 796d  dx_only=True,sym
+00032690: 626f 6c3d 272c 2729 0a20 2020 2020 2020  bol=',').       
+000326a0: 2069 6620 6f6b 2069 7320 4661 6c73 653a   if ok is False:
+000326b0: 2072 6574 7572 6e20 6f70 7473 2e67 6574   return opts.get
+000326c0: 2827 6465 6661 756c 7427 2c46 616c 7365  ('default',False
+000326d0: 290a 2020 2020 2020 2020 6966 2069 7369  ).        if isi
+000326e0: 6e73 7461 6e63 6528 6964 782c 7475 706c  nstance(idx,tupl
+000326f0: 6529 2061 6e64 206c 656e 2869 6478 2920  e) and len(idx) 
+00032700: 3d3d 2032 3a0a 2020 2020 2020 2020 2020  == 2:.          
+00032710: 2020 6964 783d 7261 6e67 6528 6964 785b    idx=range(idx[
+00032720: 305d 2c69 6478 5b31 5d2b 3129 0a20 2020  0],idx[1]+1).   
+00032730: 2020 2020 2069 6620 6e6f 7420 5479 7065       if not Type
+00032740: 2869 6478 2c28 6c69 7374 2c74 7570 6c65  (idx,(list,tuple
+00032750: 2c27 7261 6e67 6527 2929 3a20 6964 783d  ,'range')): idx=
+00032760: 5b69 6478 5d0a 2020 2020 2020 2020 7474  [idx].        tt
+00032770: 3d5b 5d0a 2020 2020 2020 2020 666f 7220  =[].        for 
+00032780: 6920 696e 2069 6478 3a0a 2020 2020 2020  i in idx:.      
+00032790: 2020 2020 2020 6966 206d 6f64 6520 3d3d        if mode ==
+000327a0: 2027 6175 746f 273a 0a20 2020 2020 2020   'auto':.       
+000327b0: 2020 2020 2020 2020 2069 3d46 6978 496e           i=FixIn
+000327c0: 6465 7828 7274 2c69 2c64 6566 6175 6c74  dex(rt,i,default
+000327d0: 3d46 616c 7365 2c65 7272 3d46 616c 7365  =False,err=False
+000327e0: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
+000327f0: 6966 206d 6f64 6520 696e 205b 2765 7272  if mode in ['err
+00032800: 272c 2769 676e 6f72 6527 5d3a 0a20 2020  ','ignore']:.   
+00032810: 2020 2020 2020 2020 2020 2020 2069 3d46               i=F
+00032820: 6978 496e 6465 7828 7274 2c69 2c64 6566  ixIndex(rt,i,def
+00032830: 6175 6c74 3d46 616c 7365 2c65 7272 3d54  ault=False,err=T
+00032840: 7275 6529 0a20 2020 2020 2020 2020 2020  rue).           
+00032850: 2069 6620 6920 6973 2046 616c 7365 3a0a   if i is False:.
+00032860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032870: 6966 206d 6f64 6520 3d3d 2027 6572 7227  if mode == 'err'
+00032880: 3a20 7265 7475 726e 206f 7074 732e 6765  : return opts.ge
+00032890: 7428 2764 6566 6175 6c74 272c 4661 6c73  t('default',Fals
+000328a0: 6529 0a20 2020 2020 2020 2020 2020 2065  e).            e
+000328b0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+000328c0: 2020 2020 2074 742e 6170 7065 6e64 2872       tt.append(r
+000328d0: 745b 695d 290a 2020 2020 2020 2020 7265  t[i]).        re
+000328e0: 7475 726e 2074 740a 2020 2020 6966 206e  turn tt.    if n
+000328f0: 6f74 2049 734e 6f6e 6528 6f70 7473 2e67  ot IsNone(opts.g
+00032900: 6574 2827 726d 2729 293a 0a20 2020 2020  et('rm')):.     
+00032910: 2020 2072 6574 7572 6e20 726d 2872 742c     return rm(rt,
+00032920: 2a6f 7074 732e 6765 7428 2772 6d27 2920  *opts.get('rm') 
+00032930: 6966 2054 7970 6528 6f70 7473 2e67 6574  if Type(opts.get
+00032940: 2827 726d 2729 2c28 6c69 7374 2c74 7570  ('rm'),(list,tup
+00032950: 6c65 2929 2065 6c73 6520 6f70 7473 2e67  le)) else opts.g
+00032960: 6574 2827 726d 2729 290a 2020 2020 6669  et('rm')).    fi
+00032970: 7273 743d 6f70 7473 2e67 6574 2827 6669  rst=opts.get('fi
+00032980: 7273 7427 290a 2020 2020 6966 206e 6f74  rst').    if not
+00032990: 2049 734e 6f6e 6528 6669 7273 7429 2061   IsNone(first) a
+000329a0: 6e64 2066 6972 7374 2069 6e20 7274 3a0a  nd first in rt:.
+000329b0: 2020 2020 2020 2020 7265 7475 726e 205b          return [
+000329c0: 6669 7273 745d 2b5b 6920 666f 7220 6920  first]+[i for i 
+000329d0: 696e 2072 7420 6966 2069 2021 3d20 6669  in rt if i != fi
+000329e0: 7273 745d 0a20 2020 2065 6e64 3d6f 7074  rst].    end=opt
+000329f0: 732e 6765 7428 2765 6e64 2729 0a20 2020  s.get('end').   
+00032a00: 2069 6620 6e6f 7420 4973 4e6f 6e65 2865   if not IsNone(e
+00032a10: 6e64 2920 616e 6420 656e 6420 696e 2072  nd) and end in r
+00032a20: 743a 0a20 2020 2020 2020 2072 6574 7572  t:.        retur
+00032a30: 6e20 5b69 2066 6f72 2069 2069 6e20 7274  n [i for i in rt
+00032a40: 2069 6620 6920 213d 2065 6e64 5d2b 5b65   if i != end]+[e
+00032a50: 6e64 5d0a 2020 2020 6669 6e64 3d6f 7074  nd].    find=opt
+00032a60: 732e 6765 7428 2766 696e 6427 290a 2020  s.get('find').  
+00032a70: 2020 6966 206e 6f74 2049 734e 6f6e 6528    if not IsNone(
+00032a80: 6669 6e64 293a 0a20 2020 2020 2020 2069  find):.        i
+00032a90: 6620 6e6f 7420 5479 7065 2866 696e 642c  f not Type(find,
+00032aa0: 286c 6973 742c 7475 706c 6529 293a 2066  (list,tuple)): f
+00032ab0: 696e 643d 5b66 696e 645d 0a20 2020 2020  ind=[find].     
+00032ac0: 2020 2074 743d 5b5d 0a20 2020 2020 2020     tt=[].       
+00032ad0: 2066 6f72 2069 2069 6e20 6669 6e64 3a0a   for i in find:.
+00032ae0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00032af0: 7a20 696e 2072 616e 6765 2830 2c6c 656e  z in range(0,len
+00032b00: 2872 7429 293a 0a20 2020 2020 2020 2020  (rt)):.         
+00032b10: 2020 2020 2020 2069 6620 5479 7065 2869         if Type(i
+00032b20: 2c28 2773 7472 272c 2762 7974 6573 2729  ,('str','bytes')
+00032b30: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00032b40: 2020 2020 2020 206a 3d69 2e72 6570 6c61         j=i.repla
+00032b50: 6365 2827 2a27 2c27 2e2b 2729 2e72 6570  ce('*','.+').rep
+00032b60: 6c61 6365 2827 3f27 2c27 2e27 290a 2020  lace('?','.').  
+00032b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032b80: 2020 6d6d 3d72 652e 636f 6d70 696c 6528    mm=re.compile(
+00032b90: 6a29 0a20 2020 2020 2020 2020 2020 2020  j).             
+00032ba0: 2020 2020 2020 2069 6620 626f 6f6c 2872         if bool(r
+00032bb0: 652e 6d61 7463 6828 6d6d 2c72 745b 7a5d  e.match(mm,rt[z]
+00032bc0: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+00032bd0: 2020 2020 2020 2020 2020 2020 7474 2e61              tt.a
+00032be0: 7070 656e 6428 7a29 0a20 2020 2020 2020  ppend(z).       
+00032bf0: 2020 2020 2020 2020 2065 6c69 6620 7274           elif rt
+00032c00: 5b7a 5d20 3d3d 2069 3a20 7474 2e61 7070  [z] == i: tt.app
+00032c10: 656e 6428 7a29 0a20 2020 2020 2020 2072  end(z).        r
+00032c20: 6574 7572 6e20 7474 0a20 2020 2072 6574  eturn tt.    ret
+00032c30: 7572 6e20 7274 0a0a 6465 6620 5265 706c  urn rt..def Repl
+00032c40: 6163 6528 7372 632c 7265 706c 6163 655f  ace(src,replace_
+00032c50: 7768 6174 2c72 6570 6c61 6365 5f74 6f2c  what,replace_to,
+00032c60: 6465 6661 756c 743d 4e6f 6e65 2c6e 6577  default=None,new
+00032c70: 6c69 6e65 3d27 5c6e 2729 3a0a 2020 2020  line='\n'):.    
+00032c80: 2727 270a 2020 2020 7265 706c 6163 6520  '''.    replace 
+00032c90: 7374 7269 6e67 2028 7372 632c 2066 726f  string (src, fro
+00032ca0: 6d2c 2074 6f29 0a20 2020 2069 6620 6e6f  m, to).    if no
+00032cb0: 7420 7374 7269 6e67 2074 6865 6e20 7265  t string then re
+00032cc0: 7475 726e 2064 6566 6175 6c74 0a20 2020  turn default.   
+00032cd0: 2064 6566 6175 6c74 3a20 7265 7475 726e   default: return
+00032ce0: 2064 6566 696e 6564 2076 616c 7565 2077   defined value w
+00032cf0: 6865 6e20 6e6f 7420 7374 7269 6e67 0a20  hen not string. 
+00032d00: 2020 2020 2027 6f72 6727 3a20 7265 7475       'org': retu
+00032d10: 726e 2073 7263 0a20 2020 2020 202e 2e2e  rn src.      ...
+00032d20: 2020 3a20 7265 7475 726e 2064 6566 696e    : return defin
+00032d30: 6564 2064 6566 6175 6c74 0a20 2020 2027  ed default.    '
+00032d40: 2727 0a20 2020 2064 6566 205f 535f 2873  ''.    def _S_(s
+00032d50: 7263 2c70 293a 0a20 2020 2020 2020 2069  rc,p):.        i
+00032d60: 6620 6973 696e 7374 616e 6365 2870 2c6c  f isinstance(p,l
+00032d70: 6973 7429 3a0a 2020 2020 2020 2020 2020  ist):.          
+00032d80: 2020 743d 5b5d 0a20 2020 2020 2020 2020    t=[].         
+00032d90: 2020 206d 3d6c 656e 2870 292d 310a 2020     m=len(p)-1.  
+00032da0: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
+00032db0: 696e 2072 616e 6765 2830 2c6d 2b31 293a  in range(0,m+1):
+00032dc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00032dd0: 2069 6620 6920 3d3d 2030 3a0a 2020 2020   if i == 0:.    
+00032de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00032df0: 742e 6170 7065 6e64 2873 7263 5b3a 705b  t.append(src[:p[
+00032e00: 695d 5b30 5d5d 290a 2020 2020 2020 2020  i][0]]).        
+00032e10: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00032e20: 3d3d 6d3a 0a20 2020 2020 2020 2020 2020  ==m:.           
+00032e30: 2020 2020 2020 2020 2020 2020 2074 2e61               t.a
+00032e40: 7070 656e 6428 7372 635b 705b 695d 5b31  ppend(src[p[i][1
+00032e50: 5d3a 5d29 0a20 2020 2020 2020 2020 2020  ]:]).           
+00032e60: 2020 2020 2065 6c69 6620 6920 3c20 6d3a       elif i < m:
+00032e70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00032e80: 2020 2020 2074 2e61 7070 656e 6428 7372       t.append(sr
+00032e90: 635b 705b 692d 315d 5b31 5d3a 705b 695d  c[p[i-1][1]:p[i]
+00032ea0: 5b30 5d5d 290a 2020 2020 2020 2020 2020  [0]]).          
+00032eb0: 2020 2020 2020 656c 6966 2069 203d 3d20        elif i == 
+00032ec0: 6d3a 0a20 2020 2020 2020 2020 2020 2020  m:.             
+00032ed0: 2020 2020 2020 2074 2e61 7070 656e 6428         t.append(
+00032ee0: 7372 635b 705b 692d 315d 5b31 5d3a 705b  src[p[i-1][1]:p[
+00032ef0: 695d 5b30 5d5d 290a 2020 2020 2020 2020  i][0]]).        
+00032f00: 2020 2020 2020 2020 2020 2020 742e 6170              t.ap
+00032f10: 7065 6e64 2873 7263 5b70 5b69 5d5b 315d  pend(src[p[i][1]
+00032f20: 3a5d 290a 2020 2020 2020 2020 2020 2020  :]).            
+00032f30: 7265 7475 726e 2074 0a0a 2020 2020 6966  return t..    if
+00032f40: 206e 6f74 2054 7970 6528 7372 632c 2827   not Type(src,('
+00032f50: 7374 7227 2c27 6279 7465 7327 2929 3a0a  str','bytes')):.
+00032f60: 2020 2020 2020 2020 7265 7475 726e 2044          return D
+00032f70: 6566 6175 6c74 2873 7263 2c64 6566 6175  efault(src,defau
+00032f80: 6c74 290a 2020 2020 6966 2054 7970 6528  lt).    if Type(
+00032f90: 7372 632c 2762 7974 6573 2729 3a0a 2020  src,'bytes'):.  
+00032fa0: 2020 2020 2020 7265 706c 6163 655f 7768        replace_wh
+00032fb0: 6174 3d42 7974 6573 2872 6570 6c61 6365  at=Bytes(replace
+00032fc0: 5f77 6861 7429 0a20 2020 2020 2020 2072  _what).        r
+00032fd0: 6570 6c61 6365 5f74 6f3d 4279 7465 7328  eplace_to=Bytes(
+00032fe0: 7265 706c 6163 655f 746f 290a 2020 2020  replace_to).    
+00032ff0: 2020 2020 6e65 776c 696e 653d 4279 7465      newline=Byte
+00033000: 7328 6e65 776c 696e 6529 0a20 2020 2065  s(newline).    e
+00033010: 6c73 653a 0a20 2020 2020 2020 2072 6570  lse:.        rep
+00033020: 6c61 6365 5f77 6861 743d 5374 7228 7265  lace_what=Str(re
+00033030: 706c 6163 655f 7768 6174 290a 2020 2020  place_what).    
+00033040: 2020 2020 7265 706c 6163 655f 746f 3d53      replace_to=S
+00033050: 7472 2872 6570 6c61 6365 5f74 6f29 0a20  tr(replace_to). 
+00033060: 2020 2020 2020 206e 6577 6c69 6e65 3d53         newline=S
+00033070: 7472 286e 6577 6c69 6e65 290a 2020 2020  tr(newline).    
+00033080: 746d 703d 5b5d 0a20 2020 2066 6f72 2069  tmp=[].    for i
+00033090: 6920 696e 2073 7263 2e73 706c 6974 286e  i in src.split(n
+000330a0: 6577 6c69 6e65 293a 0a20 2020 2020 2020  ewline):.       
+000330b0: 2074 743d 5f53 5f28 6969 2c46 6f75 6e64   tt=_S_(ii,Found
+000330c0: 2869 692c 7265 706c 6163 655f 7768 6174  (ii,replace_what
+000330d0: 2c6c 6f63 6174 696f 6e3d 5472 7565 2929  ,location=True))
+000330e0: 0a20 2020 2020 2020 2074 6d70 2e61 7070  .        tmp.app
+000330f0: 656e 6428 4a6f 696e 2874 742c 7265 706c  end(Join(tt,repl
+00033100: 6163 655f 746f 2920 6966 2074 7420 656c  ace_to) if tt el
+00033110: 7365 2069 6929 0a20 2020 2072 6574 7572  se ii).    retur
+00033120: 6e20 4a6f 696e 2874 6d70 2c6e 6577 6c69  n Join(tmp,newli
+00033130: 6e65 290a 0a64 6566 206b 7263 2872 743d  ne)..def krc(rt=
+00033140: 4e6f 6e65 2c63 686b 3d27 5f27 2c72 7464  None,chk='_',rtd
+00033150: 3d4e 6f6e 652c 6465 6661 756c 743d 4661  =None,default=Fa
+00033160: 6c73 652c 6d6f 6465 3d4e 6f6e 652c 6578  lse,mode=None,ex
+00033170: 743d 2773 6865 6c6c 2729 3a0a 2020 2020  t='shell'):.    
+00033180: 676c 6f62 616c 206b 7263 5f64 6566 696e  global krc_defin
+00033190: 650a 2020 2020 6e72 7464 3d43 6f70 7928  e.    nrtd=Copy(
+000331a0: 6b72 635f 6465 6669 6e65 2c64 6565 703d  krc_define,deep=
+000331b0: 5472 7565 2920 6966 2072 7464 2069 7320  True) if rtd is 
+000331c0: 4e6f 6e65 2065 6c73 6520 436f 7079 2872  None else Copy(r
+000331d0: 7464 2c64 6565 703d 5472 7565 290a 2020  td,deep=True).  
+000331e0: 2020 6966 2065 7874 203d 3d20 2773 6865    if ext == 'she
+000331f0: 6c6c 273a 2023 2070 7974 686f 6e0a 2020  ll': # python.  
+00033200: 2020 2020 2020 6966 206e 6f74 2049 7349        if not IsI
+00033210: 6e28 302c 6e72 7464 5b27 474f 4f44 275d  n(0,nrtd['GOOD']
+00033220: 293a 206e 7274 645b 2747 4f4f 4427 5d2e  ): nrtd['GOOD'].
+00033230: 6170 7065 6e64 2830 290a 2020 2020 2020  append(0).      
+00033240: 2020 6966 206e 6f74 2049 7349 6e28 312c    if not IsIn(1,
+00033250: 6e72 7464 5b27 4552 524f 275d 293a 206e  nrtd['ERRO']): n
+00033260: 7274 645b 2745 5252 4f27 5d3d 6e72 7464  rtd['ERRO']=nrtd
+00033270: 5b27 4552 524f 275d 2b5b 312c 3132 362c  ['ERRO']+[1,126,
+00033280: 3132 382c 3133 302c 3235 355d 0a20 2020  128,130,255].   
+00033290: 2020 2020 2069 6620 6e6f 7420 4973 496e       if not IsIn
+000332a0: 2831 3237 2c6e 7274 645b 274e 464e 4427  (127,nrtd['NFND'
+000332b0: 5d29 3a20 6e72 7464 5b27 4e46 4e44 275d  ]): nrtd['NFND']
+000332c0: 2e61 7070 656e 6428 3132 3729 0a20 2020  .append(127).   
+000332d0: 2065 6c69 6620 6578 7420 3d3d 2027 7079   elif ext == 'py
+000332e0: 7468 6f6e 273a 2023 2070 7974 686f 6e0a  thon': # python.
+000332f0: 2020 2020 2020 2020 6966 206e 6f74 2049          if not I
+00033300: 7349 6e28 312c 6e72 7464 5b27 474f 4f44  sIn(1,nrtd['GOOD
+00033310: 275d 293a 206e 7274 645b 2747 4f4f 4427  ']): nrtd['GOOD'
+00033320: 5d2e 6170 7065 6e64 2831 2923 2050 7974  ].append(1)# Pyt
+00033330: 686f 6e27 7320 5472 7565 206c 6576 656c  hon's True level
+00033340: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00033350: 4973 496e 2830 2c6e 7274 645b 2746 4149  IsIn(0,nrtd['FAI
+00033360: 4c27 5d29 3a20 6e72 7464 5b27 4641 494c  L']): nrtd['FAIL
+00033370: 275d 2e61 7070 656e 6428 3029 2320 5079  '].append(0)# Py
+00033380: 7468 6f6e 2773 2046 616c 7365 206c 6576  thon's False lev
+00033390: 656c 0a20 2020 2027 2727 0a20 2020 2053  el.    '''.    S
+000333a0: 6865 6c6c 2065 7869 7420 636f 6465 3a0a  hell exit code:.
+000333b0: 2020 2020 2020 3120 2020 2d20 4361 7463        1   - Catc
+000333c0: 6861 6c6c 2066 6f72 2067 656e 6572 616c  hall for general
+000333d0: 2065 7272 6f72 730a 2020 2020 2020 3220   errors.      2 
+000333e0: 2020 2d20 4d69 7375 7365 206f 6620 7368    - Misuse of sh
+000333f0: 656c 6c20 6275 696c 7469 6e73 2028 6163  ell builtins (ac
+00033400: 636f 7264 696e 6720 746f 2042 6173 6820  cording to Bash 
+00033410: 646f 6375 6d65 6e74 6174 696f 6e29 0a20  documentation). 
+00033420: 2020 2031 3236 2020 202d 2043 6f6d 6d61     126   - Comma
+00033430: 6e64 2069 6e76 6f6b 6564 2063 616e 6e6f  nd invoked canno
+00033440: 7420 6578 6563 7574 650a 2020 2020 3132  t execute.    12
+00033450: 3720 2020 2d20 e280 9c63 6f6d 6d61 6e64  7   - ...command
+00033460: 206e 6f74 2066 6f75 6e64 e280 9d0a 2020   not found....  
+00033470: 2020 3132 3820 2020 2d20 496e 7661 6c69    128   - Invali
+00033480: 6420 6172 6775 6d65 6e74 2074 6f20 6578  d argument to ex
+00033490: 6974 0a20 2020 2031 3238 2b6e 202d 2046  it.    128+n - F
+000334a0: 6174 616c 2065 7272 6f72 2073 6967 6e61  atal error signa
+000334b0: 6c20 e280 9c6e e280 9d0a 2020 2020 3133  l ...n....    13
+000334c0: 3020 2020 2d20 5363 7269 7074 2074 6572  0   - Script ter
+000334d0: 6d69 6e61 7465 6420 6279 2043 6f6e 7472  minated by Contr
+000334e0: 6f6c 2d43 0a20 2020 2032 3535 5c2a 202d  ol-C.    255\* -
+000334f0: 2045 7869 7420 7374 6174 7573 206f 7574   Exit status out
+00033500: 206f 6620 7261 6e67 650a 2020 2020 2727   of range.    ''
+00033510: 270a 2020 2020 6966 206d 6f64 6520 3d3d  '.    if mode ==
+00033520: 2027 6765 7427 3a0a 2020 2020 2020 2020   'get':.        
+00033530: 7265 7475 726e 206e 7274 640a 2020 2020  return nrtd.    
+00033540: 656c 6966 206d 6f64 6520 3d3d 2027 6b65  elif mode == 'ke
+00033550: 7973 273a 0a20 2020 2020 2020 2069 6620  ys':.        if 
+00033560: 6973 696e 7374 616e 6365 286e 7274 642c  isinstance(nrtd,
+00033570: 6469 6374 293a 0a20 2020 2020 2020 2020  dict):.         
+00033580: 2020 2072 6574 7572 6e20 6e72 7464 2e6b     return nrtd.k
+00033590: 6579 7328 290a 2020 2020 6465 6620 7472  eys().    def tr
+000335a0: 616e 7328 6972 7429 3a0a 2020 2020 2020  ans(irt):.      
+000335b0: 2020 7479 7065 5f69 7274 3d74 7970 6528    type_irt=type(
+000335c0: 6972 7429 0a20 2020 2020 2020 2066 6f72  irt).        for
+000335d0: 2069 6920 696e 206e 7274 643a 0a20 2020   ii in nrtd:.   
+000335e0: 2020 2020 2020 2020 2066 6f72 206a 6a20           for jj 
+000335f0: 696e 206e 7274 645b 6969 5d3a 0a20 2020  in nrtd[ii]:.   
+00033600: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00033610: 7479 7065 286a 6a29 203d 3d20 7479 7065  type(jj) == type
+00033620: 5f69 7274 2061 6e64 2028 2874 7970 655f  _irt and ((type_
+00033630: 6972 7420 6973 2073 7472 2061 6e64 206a  irt is str and j
+00033640: 6a2e 6c6f 7765 7228 2920 3d3d 2069 7274  j.lower() == irt
+00033650: 2e6c 6f77 6572 2829 2920 6f72 206a 6a20  .lower()) or jj 
+00033660: 3d3d 2069 7274 293a 0a20 2020 2020 2020  == irt):.       
+00033670: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00033680: 7572 6e20 6969 0a20 2020 2020 2020 2072  urn ii.        r
+00033690: 6574 7572 6e20 2755 4e4b 4e27 0a20 2020  eturn 'UNKN'.   
+000336a0: 2072 7463 3d47 6574 2872 742c 2730 7c72   rtc=Get(rt,'0|r
+000336b0: 6327 2c65 7272 3d54 7275 652c 6465 6661  c',err=True,defa
+000336c0: 756c 743d 276f 7267 272c 7479 7065 3d28  ult='org',type=(
+000336d0: 626f 6f6c 2c69 6e74 2c6c 6973 742c 7475  bool,int,list,tu
+000336e0: 706c 652c 6469 6374 2929 0a20 2020 206e  ple,dict)).    n
+000336f0: 7274 633d 7472 616e 7328 5065 656c 2872  rtc=trans(Peel(r
+00033700: 7463 2c65 7272 3d46 616c 7365 2c64 6566  tc,err=False,def
+00033710: 6175 6c74 3d27 756e 6b6e 6f77 6e27 2929  ault='unknown'))
+00033720: 2023 4966 2047 6574 2829 2067 6f74 206d   #If Get() got m
+00033730: 756c 7469 2064 6174 6120 7468 656e 2075  ulti data then u
+00033740: 7365 2066 6972 7374 2064 6174 610a 2020  se first data.  
+00033750: 2020 6966 2063 686b 2021 3d20 275f 273a    if chk != '_':
+00033760: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00033770: 6973 696e 7374 616e 6365 2863 686b 2c6c  isinstance(chk,l
+00033780: 6973 7429 3a20 6368 6b3d 5b63 686b 5d0a  ist): chk=[chk].
+00033790: 2020 2020 2020 2020 666f 7220 6363 2069          for cc i
+000337a0: 6e20 6368 6b3a 0a20 2020 2020 2020 2020  n chk:.         
+000337b0: 2020 2069 6620 7472 616e 7328 6363 2920     if trans(cc) 
+000337c0: 3d3d 206e 7274 633a 0a20 2020 2020 2020  == nrtc:.       
+000337d0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000337e0: 5472 7565 0a20 2020 2020 2020 2020 2020  True.           
+000337f0: 2069 6620 6e72 7463 203d 3d20 2755 4e4b   if nrtc == 'UNK
+00033800: 4e27 2061 6e64 2064 6566 6175 6c74 203d  N' and default =
+00033810: 3d20 276f 7267 273a 0a20 2020 2020 2020  = 'org':.       
+00033820: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00033830: 7274 630a 2020 2020 2020 2020 7265 7475  rtc.        retu
+00033840: 726e 2044 6566 6175 6c74 2872 742c 6465  rn Default(rt,de
+00033850: 6661 756c 7429 0a20 2020 2072 6574 7572  fault).    retur
+00033860: 6e20 6e72 7463 0a0a 6465 6620 4f75 7446  n nrtc..def OutF
+00033870: 6f72 6d61 7428 6461 7461 2c6f 7574 3d4e  ormat(data,out=N
+00033880: 6f6e 652c 7374 7269 703d 4661 6c73 652c  one,strip=False,
+00033890: 7065 656c 3d4e 6f6e 652c 6f72 673d 4e6f  peel=None,org=No
+000338a0: 6e65 2c64 6566 6175 6c74 3d4e 6f6e 6529  ne,default=None)
+000338b0: 3a0a 2020 2020 2727 270a 2020 2020 4f75  :.    '''.    Ou
+000338c0: 7470 7574 2046 6f72 6d61 7420 6d61 6b65  tput Format make
+000338d0: 720a 2020 2020 3c6f 7074 696f 6e3e 0a20  r.    <option>. 
+000338e0: 2020 2020 206f 7574 0a20 2020 2020 2020       out.       
+000338f0: 204e 6f6e 653a 204e 6f74 2063 6f6e 7665   None: Not conve
+00033900: 7274 0a20 2020 2020 2020 2073 7472 2c69  rt.        str,i
+00033910: 6e74 2c6c 6973 742c 6469 6374 203a 2063  nt,list,dict : c
+00033920: 6f6e 7665 7274 2064 6174 6120 746f 2077  onvert data to w
+00033930: 616e 7420 666f 726d 6174 0a20 2020 2020  ant format.     
+00033940: 2020 2072 6177 203a 2050 6565 6c65 6420     raw : Peeled 
+00033950: 6461 7461 2077 6865 6e20 7369 6e67 6c65  data when single
+00033960: 2064 6174 6128 5b27 6127 5d2c 2827 6127   data(['a'],('a'
+00033970: 292c 7b27 6127 3a27 6162 6327 7d29 206f  ),{'a':'abc'}) o
+00033980: 7468 6572 7320 7468 656e 2072 6574 7572  thers then retur
+00033990: 6e20 6f72 6967 6e61 6c0a 2020 2020 2020  n orignal.      
+000339a0: 7065 656c 0a20 2020 2020 2020 204e 6f6e  peel.        Non
+000339b0: 6520 3a20 6175 746f 6d61 7469 6361 6c6c  e : automaticall
+000339c0: 7920 776f 726b 696e 6720 6163 636f 7264  y working accord
+000339d0: 696e 6720 746f 206f 7574 0a20 2020 2020  ing to out.     
+000339e0: 2020 2054 7275 6520 3a20 5065 656c 696e     True : Peelin
+000339f0: 6720 6461 7461 0a20 2020 2020 2020 2046  g data.        F
+00033a00: 616c 7365 3a20 4e6f 7420 5065 656c 696e  alse: Not Peelin
+00033a10: 670a 2020 2020 2020 7374 7269 7020 0a20  g.      strip . 
+00033a20: 2020 2020 2020 2046 616c 7365 3a20 6e6f         False: no
+00033a30: 7420 7265 6d6f 7665 2077 6869 7465 2073  t remove white s
+00033a40: 7061 6365 0a20 2020 2020 2020 2054 7275  pace.        Tru
+00033a50: 6520 3a20 7265 6d6f 7665 2077 6869 7465  e : remove white
+00033a60: 2073 7061 6365 0a20 2020 2027 2727 0a20   space.    '''. 
+00033a70: 2020 206f 7574 5f64 6174 613d 4e6f 6e65     out_data=None
+00033a80: 0a20 2020 2069 6620 4973 496e 2864 6174  .    if IsIn(dat
+00033a90: 612c 5b5b 5d2c 7b7d 5d29 2061 6e64 2049  a,[[],{}]) and I
+00033aa0: 7349 6e28 6465 6661 756c 742c 5b27 6f72  sIn(default,['or
+00033ab0: 6727 2c27 6f72 6967 696e 616c 275d 293a  g','original']):
+00033ac0: 0a20 2020 2020 2020 2023 4966 206e 6f20  .        #If no 
+00033ad0: 6461 7461 2061 6e64 2064 6566 6175 6c74  data and default
+00033ae0: 2069 7320 6f72 6967 696e 616c 2074 6865   is original the
+00033af0: 6e20 636f 6e76 6572 7420 6f72 6967 696e  n convert origin
+00033b00: 616c 2074 6f20 6f75 740a 2020 2020 2020  al to out.      
+00033b10: 2020 6461 7461 3d6f 7267 0a20 2020 2069    data=org.    i
+00033b20: 6620 4973 496e 286f 7574 2c5b 7475 706c  f IsIn(out,[tupl
+00033b30: 652c 2774 7570 6c65 272c 6c69 7374 2c27  e,'tuple',list,'
+00033b40: 6c69 7374 275d 293a 0a20 2020 2020 2020  list']):.       
+00033b50: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
+00033b60: 6365 2864 6174 612c 2874 7570 6c65 2c6c  ce(data,(tuple,l
+00033b70: 6973 7429 293a 0a20 2020 2020 2020 2020  ist)):.         
+00033b80: 2020 206f 7574 5f64 6174 613d 5b64 6174     out_data=[dat
+00033b90: 615d 0a20 2020 2020 2020 2065 6c73 653a  a].        else:
+00033ba0: 0a20 2020 2020 2020 2020 2020 206f 7574  .            out
+00033bb0: 5f64 6174 613d 6c69 7374 2864 6174 6129  _data=list(data)
+00033bc0: 0a20 2020 2020 2020 2069 6620 6f75 7420  .        if out 
+00033bd0: 696e 205b 7475 706c 652c 2774 7570 6c65  in [tuple,'tuple
+00033be0: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+00033bf0: 6966 206f 7574 5f64 6174 613a 0a20 2020  if out_data:.   
+00033c00: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00033c10: 7572 6e20 7475 706c 6528 6f75 745f 6461  urn tuple(out_da
+00033c20: 7461 290a 2020 2020 2020 2020 2020 2020  ta).            
+00033c30: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
+00033c40: 6465 6661 756c 742c 7475 706c 6529 3a0a  default,tuple):.
+00033c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00033c60: 7265 7475 726e 2064 6566 6175 6c74 0a20  return default. 
+00033c70: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00033c80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00033c90: 2072 6574 7572 6e20 2844 6566 6175 6c74   return (Default
+00033ca0: 286f 7267 2c64 6566 6175 6c74 2929 0a20  (org,default)). 
+00033cb0: 2020 2020 2020 2069 6620 6f75 745f 6461         if out_da
+00033cc0: 7461 3a0a 2020 2020 2020 2020 2020 2020  ta:.            
+00033cd0: 7265 7475 726e 206f 7574 5f64 6174 610a  return out_data.
+00033ce0: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
+00033cf0: 6e73 7461 6e63 6528 6465 6661 756c 742c  nstance(default,
+00033d00: 6c69 7374 293a 0a20 2020 2020 2020 2020  list):.         
+00033d10: 2020 2072 6574 7572 6e20 6465 6661 756c     return defaul
+00033d20: 740a 2020 2020 2020 2020 656c 7365 3a0a  t.        else:.
+00033d30: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00033d40: 726e 205b 4465 6661 756c 7428 6f72 672c  rn [Default(org,
+00033d50: 6465 6661 756c 7429 5d0a 2020 2020 656c  default)].    el
+00033d60: 6966 2049 7349 6e28 6f75 742c 5b64 6963  if IsIn(out,[dic
+00033d70: 742c 2764 6963 7427 5d29 3a0a 2020 2020  t,'dict']):.    
+00033d80: 2020 2020 6966 2064 6174 613a 0a20 2020      if data:.   
+00033d90: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00033da0: 4469 6374 2864 6174 6129 0a20 2020 2020  Dict(data).     
+00033db0: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
+00033dc0: 6365 2864 6566 6175 6c74 2c64 6963 7429  ce(default,dict)
+00033dd0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00033de0: 7475 726e 2064 6566 6175 6c74 0a20 2020  turn default.   
+00033df0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00033e00: 2020 2020 2020 2072 6574 7572 6e20 4465         return De
+00033e10: 6661 756c 7428 6f72 672c 6465 6661 756c  fault(org,defaul
+00033e20: 7429 0a20 2020 2065 6c69 6620 4973 496e  t).    elif IsIn
+00033e30: 286f 7574 2c5b 2773 7472 272c 7374 722c  (out,['str',str,
+00033e40: 2773 7472 696e 6727 2c27 7465 7874 275d  'string','text']
+00033e50: 293a 0a20 2020 2020 2020 206f 7574 5f64  ):.        out_d
+00033e60: 6174 613d 5768 6974 6553 7472 6970 2850  ata=WhiteStrip(P
+00033e70: 6565 6c28 5374 7228 6461 7461 292c 7065  eel(Str(data),pe
+00033e80: 656c 292c 7374 7269 7029 0a20 2020 2065  el),strip).    e
+00033e90: 6c69 6620 4973 496e 286f 7574 2c5b 2769  lif IsIn(out,['i
+00033ea0: 6e74 272c 696e 742c 2769 6e74 6567 6572  nt',int,'integer
+00033eb0: 272c 276e 756d 6265 7227 2c27 6e75 6d65  ','number','nume
+00033ec0: 7269 6327 5d29 3a0a 2020 2020 2020 2020  ric']):.        
+00033ed0: 6f75 745f 6461 7461 3d49 6e74 2857 6869  out_data=Int(Whi
+00033ee0: 7465 5374 7269 7028 5065 656c 2864 6174  teStrip(Peel(dat
+00033ef0: 612c 7065 656c 292c 7374 7269 7029 290a  a,peel),strip)).
+00033f00: 2020 2020 6966 206f 7574 5f64 6174 6120      if out_data 
+00033f10: 6973 2046 616c 7365 3a20 2369 6620 7374  is False: #if st
+00033f20: 7220 6f72 2069 6e74 2067 6f74 2046 616c  r or int got Fal
+00033f30: 7365 2074 6865 6e20 0a20 2020 2020 2020  se then .       
+00033f40: 2072 6574 7572 6e20 4465 6661 756c 7428   return Default(
+00033f50: 6f72 672c 6465 6661 756c 7429 0a20 2020  org,default).   
+00033f60: 2069 6620 4973 4e6f 6e65 2870 6565 6c29   if IsNone(peel)
+00033f70: 3a20 7065 656c 3d54 7275 650a 2020 2020  : peel=True.    
+00033f80: 6f75 745f 6461 7461 3d57 6869 7465 5374  out_data=WhiteSt
+00033f90: 7269 7028 5065 656c 2864 6174 612c 7065  rip(Peel(data,pe
+00033fa0: 656c 292c 7374 7269 7029 0a20 2020 2069  el),strip).    i
+00033fb0: 6620 6f75 745f 6461 7461 3a20 7265 7475  f out_data: retu
+00033fc0: 726e 206f 7574 5f64 6174 610a 2020 2020  rn out_data.    
+00033fd0: 7265 7475 726e 2044 6566 6175 6c74 286f  return Default(o
+00033fe0: 7267 2c64 6566 6175 6c74 290a 0a64 6566  rg,default)..def
+00033ff0: 2046 6565 6446 756e 6328 6f62 6a2c 2a69   FeedFunc(obj,*i
+00034000: 6e70 732c 2a2a 6f70 7473 293a 0a20 2020  nps,**opts):.   
+00034010: 2027 2727 0a20 2020 2041 7574 6f6d 6174   '''.    Automat
+00034020: 6963 616c 6c79 2046 6565 6420 6d61 7463  ically Feed matc
+00034030: 6865 6420 7661 7269 6162 6c65 7320 746f  hed variables to
+00034040: 2066 756e 6374 696f 6e0a 2020 2020 4665   function.    Fe
+00034050: 6564 4675 6e63 283c 6675 6e63 3e2c 3c66  edFunc(<func>,<f
+00034060: 756e 6374 696f 6e27 7320 6172 6775 6d65  unction's argume
+00034070: 6e74 733e 2c3c 6675 6e63 7469 6f6e 2773  nts>,<function's
+00034080: 2076 6172 6961 626c 6573 3e29 0a20 2020   variables>).   
+00034090: 2069 6620 736f 6d65 7468 696e 6720 7772   if something wr
+000340a0: 6f6e 6720 7468 656e 2072 6574 7572 6e20  ong then return 
+000340b0: 4661 6c73 650a 2020 2020 6966 2063 6f72  False.    if cor
+000340c0: 7265 6374 2074 6865 6e20 7265 7475 726e  rect then return
+000340d0: 206f 7574 7075 7420 6f66 2072 616e 2074   output of ran t
+000340e0: 6865 2046 756e 6374 696f 6e20 7769 7468  he Function with
+000340f0: 2069 6e70 7574 730a 2020 2020 2727 270a   inputs.    '''.
+00034100: 2020 2020 6966 2054 7970 6528 6f62 6a2c      if Type(obj,
+00034110: 2773 7472 2729 2061 6e64 206e 6f74 2069  'str') and not i
+00034120: 6e73 7065 6374 2e69 7363 6c61 7373 286f  nspect.isclass(o
+00034130: 626a 293a 2023 2066 6f72 2073 7472 2063  bj): # for str c
+00034140: 6c61 7373 0a20 2020 2020 2020 206d 796d  lass.        mym
+00034150: 6f64 3d4d 794d 6f64 756c 6528 6465 6661  od=MyModule(defa
+00034160: 756c 743d 4661 6c73 652c 7061 7265 6e74  ult=False,parent
+00034170: 3d31 290a 2020 2020 2020 2020 6966 206d  =1).        if m
+00034180: 796d 6f64 2069 7320 4661 6c73 653a 0a20  ymod is False:. 
+00034190: 2020 2020 2020 2020 2020 206d 796d 6f64             mymod
+000341a0: 3d4d 794d 6f64 756c 6528 6465 6661 756c  =MyModule(defaul
+000341b0: 743d 4661 6c73 652c 7061 7265 6e74 3d30  t=False,parent=0
+000341c0: 290a 2020 2020 2020 2020 6966 206d 796d  ).        if mym
+000341d0: 6f64 2069 7320 4661 6c73 653a 0a20 2020  od is False:.   
+000341e0: 2020 2020 2020 2020 206d 796d 6f64 3d4d           mymod=M
+000341f0: 794d 6f64 756c 6528 6465 6661 756c 743d  yModule(default=
+00034200: 4661 6c73 652c 7061 7265 6e74 3d2d 3129  False,parent=-1)
+00034210: 0a20 2020 2020 2020 2069 6620 5479 7065  .        if Type
+00034220: 286d 796d 6f64 2c27 6d6f 6475 6c65 2729  (mymod,'module')
+00034230: 3a0a 2020 2020 2020 2020 2020 2020 7472  :.            tr
+00034240: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
+00034250: 2020 206f 626a 3d67 6574 6174 7472 286d     obj=getattr(m
+00034260: 796d 6f64 2c6f 626a 2c4e 6f6e 6529 0a20  ymod,obj,None). 
+00034270: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+00034280: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+00034290: 2020 2053 7464 4572 7228 2746 756e 6374     StdErr('Funct
+000342a0: 696f 6e20 6e61 6d65 2022 7b7d 2220 6e6f  ion name "{}" no
+000342b0: 7420 666f 756e 6420 696e 2074 6865 206d  t found in the m
+000342c0: 6f64 756c 655c 6e27 2e66 6f72 6d61 7428  odule\n'.format(
+000342d0: 6f62 6a29 290a 2020 2020 2020 2020 2020  obj)).          
+000342e0: 2020 2020 2020 7265 7475 726e 2046 616c        return Fal
+000342f0: 7365 0a20 2020 2069 6620 5479 7065 286f  se.    if Type(o
+00034300: 626a 2c28 2766 756e 6374 696f 6e27 2c27  bj,('function','
+00034310: 6d65 7468 6f64 272c 2762 7569 6c74 696e  method','builtin
+00034320: 5f66 756e 6374 696f 6e5f 6f72 5f6d 6574  _function_or_met
+00034330: 686f 6427 2c27 7479 7065 272c 2769 6e74  hod','type','int
+00034340: 272c 2773 7472 272c 276c 6973 7427 2c27  ','str','list','
+00034350: 6469 6374 2729 293a 0a20 2020 2020 2020  dict')):.       
+00034360: 2066 6361 7267 733d 4675 6e63 7469 6f6e   fcargs=Function
+00034370: 4172 6773 286f 626a 2c6d 6f64 653d 2764  Args(obj,mode='d
+00034380: 6574 6169 6c27 2c64 6566 6175 6c74 3d7b  etail',default={
+00034390: 7d29 0a20 2020 2020 2020 206e 696e 7073  }).        ninps
+000343a0: 3d5b 5d0a 2020 2020 2020 2020 6e6f 7074  =[].        nopt
+000343b0: 733d 7b7d 0a20 2020 2020 2020 2023 5370  s={}.        #Sp
+000343c0: 6563 6961 6c20 6361 7365 2069 6e74 2c73  ecial case int,s
+000343d0: 7472 2c6c 6973 742c 6469 6374 0a20 2020  tr,list,dict.   
+000343e0: 2020 2020 2069 6620 5479 7065 286f 626a       if Type(obj
+000343f0: 2c20 2827 696e 7427 2c27 7374 7227 2c27  , ('int','str','
+00034400: 6c69 7374 272c 2764 6963 7427 2929 3a0a  list','dict')):.
+00034410: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00034420: 6e70 733a 206e 696e 7073 2e61 7070 656e  nps: ninps.appen
+00034430: 6428 696e 7073 5b30 5d29 0a20 2020 2020  d(inps[0]).     
+00034440: 2020 2020 2020 2069 6620 2762 6173 6527         if 'base'
+00034450: 2069 6e20 6f70 7473 3a20 2369 6e74 2829   in opts: #int()
+00034460: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00034470: 206e 6f70 7473 5b27 6261 7365 275d 3d6f   nopts['base']=o
+00034480: 7074 735b 2762 6173 6527 5d0a 2020 2020  pts['base'].    
+00034490: 2020 2020 2020 2020 6966 2027 656e 636f          if 'enco
+000344a0: 6469 6e67 2720 696e 206f 7074 733a 2023  ding' in opts: #
+000344b0: 2073 7472 2829 0a20 2020 2020 2020 2020   str().         
+000344c0: 2020 2020 2020 206e 6f70 7473 5b27 656e         nopts['en
+000344d0: 636f 6469 6e67 275d 3d6f 7074 735b 2765  coding']=opts['e
+000344e0: 6e63 6f64 696e 6727 5d0a 2020 2020 2020  ncoding'].      
+000344f0: 2020 2020 2020 656c 6966 2054 7970 6528        elif Type(
+00034500: 6f62 6a2c 2773 7472 2729 2061 6e64 206e  obj,'str') and n
+00034510: 696e 7073 2061 6e64 2054 7970 6528 6e69  inps and Type(ni
+00034520: 6e70 735b 305d 2c27 6279 7465 7327 2920  nps[0],'bytes') 
+00034530: 616e 6420 2765 6e63 6f64 696e 6727 206e  and 'encoding' n
+00034540: 6f74 2069 6e20 6f70 7473 3a20 2320 7374  ot in opts: # st
+00034550: 7228 290a 2020 2020 2020 2020 2020 2020  r().            
+00034560: 2020 2020 6e6f 7074 735b 2765 6e63 6f64      nopts['encod
+00034570: 696e 6727 5d3d 2761 7363 6969 270a 2020  ing']='ascii'.  
+00034580: 2020 2020 2020 6964 783d 300a 2020 2020        idx=0.    
+00034590: 2020 2020 6966 2027 6172 6773 2720 696e      if 'args' in
+000345a0: 2066 6361 7267 733a 0a20 2020 2020 2020   fcargs:.       
+000345b0: 2020 2020 2066 6f72 2069 2069 6e20 6663       for i in fc
+000345c0: 6172 6773 5b27 6172 6773 275d 3a0a 2020  args['args']:.  
+000345d0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000345e0: 206c 656e 2869 6e70 7329 203e 2069 6478   len(inps) > idx
+000345f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00034600: 2020 2020 2020 6e69 6e70 732e 6170 7065        ninps.appe
+00034610: 6e64 2869 6e70 735b 6964 785d 290a 2020  nd(inps[idx]).  
+00034620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034630: 2020 6964 782b 3d31 0a20 2020 2020 2020    idx+=1.       
+00034640: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00034650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034660: 2020 2069 6620 6920 696e 206f 7074 733a     if i in opts:
+00034670: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00034680: 2020 2020 2020 2020 206e 696e 7073 2e61           ninps.a
+00034690: 7070 656e 6428 6f70 7473 2e70 6f70 2869  ppend(opts.pop(i
+000346a0: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
+000346b0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+000346c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000346d0: 2020 2020 2053 7464 4572 7228 2769 6e70       StdErr('inp
+000346e0: 7574 2070 6172 616d 6574 6572 2022 7b7d  ut parameter "{}
+000346f0: 2220 6e6f 7420 666f 756e 645c 6e27 2e66  " not found\n'.f
+00034700: 6f72 6d61 7428 6929 290a 2020 2020 2020  ormat(i)).      
+00034710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034720: 2020 7265 7475 726e 2046 616c 7365 0a20    return False. 
+00034730: 2020 2020 2020 2069 6620 2776 6172 6172         if 'varar
+00034740: 6773 2720 696e 2066 6361 7267 733a 0a20  gs' in fcargs:. 
+00034750: 2020 2020 2020 2020 2020 206e 696e 7073             ninps
+00034760: 3d6e 696e 7073 2b6c 6973 7428 696e 7073  =ninps+list(inps
+00034770: 5b69 6478 3a5d 290a 2020 2020 2020 2020  [idx:]).        
+00034780: 6966 2027 6465 6661 756c 7473 2720 696e  if 'defaults' in
+00034790: 2066 6361 7267 733a 0a20 2020 2020 2020   fcargs:.       
+000347a0: 2020 2020 2066 6f72 2069 2069 6e20 6663       for i in fc
+000347b0: 6172 6773 5b27 6465 6661 756c 7473 275d  args['defaults']
+000347c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000347d0: 2020 6966 2069 2069 6e20 6f70 7473 3a0a    if i in opts:.
+000347e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000347f0: 2020 2020 6e6f 7074 735b 695d 3d6f 7074      nopts[i]=opt
+00034800: 732e 706f 7028 6929 2023 6d61 6b65 2077  s.pop(i) #make w
+00034810: 6974 6820 696e 7075 7420 7661 6c75 650a  ith input value.
+00034820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034830: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00034840: 2020 2020 2020 2020 2020 6e6f 7074 735b            nopts[
+00034850: 695d 3d66 6361 7267 735b 2764 6566 6175  i]=fcargs['defau
+00034860: 6c74 7327 5d5b 695d 2023 206d 616b 6520  lts'][i] # make 
+00034870: 7769 7468 2064 6566 6175 6c74 2076 616c  with default val
+00034880: 7565 0a20 2020 2020 2020 2069 6620 276b  ue.        if 'k
+00034890: 6579 776f 7264 7327 2069 6e20 6663 6172  eywords' in fcar
+000348a0: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
+000348b0: 6e6f 7074 732e 7570 6461 7465 286f 7074  nopts.update(opt
+000348c0: 7329 0a20 2020 2020 2020 2023 5275 6e20  s).        #Run 
+000348d0: 6675 6e63 7469 6f6e 2077 6974 6820 666f  function with fo
+000348e0: 756e 6420 6172 6775 6d65 6e74 730a 2020  und arguments.  
+000348f0: 2020 2020 2020 6966 206e 696e 7073 2061        if ninps a
+00034900: 6e64 206e 6f70 7473 3a0a 2020 2020 2020  nd nopts:.      
+00034910: 2020 2020 2020 6966 2054 7970 6528 6f62        if Type(ob
+00034920: 6a2c 2827 696e 7427 2c27 7374 7227 2929  j,('int','str'))
+00034930: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00034940: 2020 7265 7475 726e 206f 626a 286e 696e    return obj(nin
+00034950: 7073 5b30 5d2c 2a2a 6e6f 7074 7329 0a20  ps[0],**nopts). 
+00034960: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00034970: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00034980: 2072 6574 7572 6e20 6f62 6a28 2a6e 696e   return obj(*nin
+00034990: 7073 2c2a 2a6e 6f70 7473 290a 2020 2020  ps,**nopts).    
+000349a0: 2020 2020 656c 6966 206e 696e 7073 3a0a      elif ninps:.
+000349b0: 2020 2020 2020 2020 2020 2020 6966 2054              if T
+000349c0: 7970 6528 6f62 6a2c 2827 696e 7427 2c27  ype(obj,('int','
+000349d0: 7374 7227 2c27 6c69 7374 272c 2764 6963  str','list','dic
+000349e0: 7427 2929 3a0a 2020 2020 2020 2020 2020  t')):.          
+000349f0: 2020 2020 2020 7265 7475 726e 206f 626a        return obj
+00034a00: 286e 696e 7073 5b30 5d29 0a20 2020 2020  (ninps[0]).     
+00034a10: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00034a20: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00034a30: 7572 6e20 6f62 6a28 2a6e 696e 7073 290a  urn obj(*ninps).
+00034a40: 2020 2020 2020 2020 656c 6966 206e 6f70          elif nop
+00034a50: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
+00034a60: 7265 7475 726e 206f 626a 282a 2a6e 6f70  return obj(**nop
+00034a70: 7473 290a 2020 2020 2020 2020 656c 7365  ts).        else
+00034a80: 3a0a 2020 2020 2020 2020 2020 2020 7472  :.            tr
+00034a90: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
+00034aa0: 2020 2072 6574 7572 6e20 6f62 6a28 290a     return obj().
+00034ab0: 2020 2020 2020 2020 2020 2020 6578 6365              exce
+00034ac0: 7074 3a0a 2020 2020 2020 2020 2020 2020  pt:.            
+00034ad0: 2020 2020 653d 4578 6365 7074 4d65 7373      e=ExceptMess
+00034ae0: 6167 6528 290a 2020 2020 2020 2020 2020  age().          
+00034af0: 2020 2020 2020 5374 6445 7272 2865 290a        StdErr(e).
+00034b00: 2020 2020 7265 7475 726e 2046 616c 7365      return False
+00034b10: 0a0a 6465 6620 7072 696e 7466 282a 6d73  ..def printf(*ms
+00034b20: 672c 2a2a 6f70 7473 293a 0a20 2020 2027  g,**opts):.    '
+00034b30: 2727 0a20 2020 2053 696d 696c 6172 2061  ''.    Similar a
+00034b40: 7320 7072 696e 7428 290a 2020 2020 6461  s print().    da
+00034b50: 7465 3d54 7275 652f 4661 6c73 6520 2020  te=True/False   
+00034b60: 2020 2020 2020 2020 2020 203a 2028 5472             : (Tr
+00034b70: 7565 2920 7072 696e 7420 6461 7465 2069  ue) print date i
+00034b80: 6e69 7469 616c 206c 696e 650a 2020 2020  nitial line.    
+00034b90: 6461 7465 5f66 6f72 6d61 7420 2020 2020  date_format     
+00034ba0: 2020 2020 2020 2020 2020 2020 203a 2069               : i
+00034bb0: 6620 6465 6669 6e65 6420 6461 7465 5f66  f defined date_f
+00034bc0: 6f72 6d61 7420 7468 656e 2070 7269 6e74  ormat then print
+00034bd0: 2064 6174 6520 7769 7468 2064 6174 655f   date with date_
+00034be0: 666f 726d 6174 0a20 2020 2064 6972 6563  format.    direc
+00034bf0: 743d 4661 6c73 652f 5472 7565 2020 2020  t=False/True    
+00034c00: 2020 2020 2020 2020 3a20 2854 7275 6529          : (True)
+00034c10: 2070 7269 6e74 2077 6974 686f 7574 206e   print without n
+00034c20: 6577 6c69 6e65 2061 6e64 2061 6e79 2069  ewline and any i
+00034c30: 6e74 726f 2069 6e66 6f72 6d61 7469 6f6e  ntro information
+00034c40: 0a20 2020 206c 6f67 6669 6c65 3d20 2020  .    logfile=   
+00034c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034c60: 2020 3a20 7361 7665 696e 6720 6c6f 6720    : saveing log 
+00034c70: 746f 206c 6f67 6669 6c65 0a20 2020 2063  to logfile.    c
+00034c80: 616c 6c65 725f 6465 7461 696c 3d46 616c  aller_detail=Fal
+00034c90: 7365 2f54 7275 6520 2020 2020 3a20 7072  se/True     : pr
+00034ca0: 696e 7420 6361 6c6c 6572 2069 6e66 6f72  int caller infor
+00034cb0: 6d61 7469 6f6e 0a20 2020 2020 2020 5472  mation.       Tr
+00034cc0: 7565 3a0a 2020 2020 2020 2020 2020 2020  ue:.            
+00034cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034ce0: 2020 2020 202d 206c 696e 6520 6e75 6d62       - line numb
+00034cf0: 6572 2c20 6669 6c65 6e61 6d65 2c20 6172  er, filename, ar
+00034d00: 6773 2c20 6f70 7469 6f6e 616c 2063 616c  gs, optional cal
+00034d10: 6c65 725f 6675 6c6c 5f66 696c 656e 616d  ler_full_filenam
+00034d20: 650a 2020 2020 2020 2046 616c 7365 3a20  e.       False: 
+00034d30: 2864 6574 6169 6c20 7365 6c65 6374 696f  (detail selectio
+00034d40: 6e29 0a20 2020 2020 2020 2020 2063 616c  n).          cal
+00034d50: 6c65 725f 6172 6773 3d46 616c 7365 2f54  ler_args=False/T
+00034d60: 7275 6520 3a20 2846 616c 7365 2920 7072  rue : (False) pr
+00034d70: 696e 7420 6172 6773 206f 6620 6675 6e63  int args of func
+00034d80: 7469 6f6e 0a20 2020 2020 2020 2020 2063  tion.          c
+00034d90: 616c 6c65 725f 6669 6c65 6e61 6d65 3d46  aller_filename=F
+00034da0: 616c 7365 2f54 7275 6520 3a20 2846 616c  alse/True : (Fal
+00034db0: 7365 2920 7072 696e 7420 6669 6c65 6e61  se) print filena
+00034dc0: 6d65 0a20 2020 2020 2020 2020 2063 616c  me.          cal
+00034dd0: 6c65 725f 6675 6c6c 5f66 696c 656e 616d  ler_full_filenam
+00034de0: 653d 4661 6c73 652f 5472 7565 203a 2028  e=False/True : (
+00034df0: 4661 6c73 6529 2070 7269 6e74 2066 756c  False) print ful
+00034e00: 6c20 7061 7468 2066 696c 656e 616d 650a  l path filename.
+00034e10: 2020 2020 2020 2020 2020 6361 6c6c 6572            caller
+00034e20: 5f6c 696e 655f 6e75 6d62 6572 3d46 616c  _line_number=Fal
+00034e30: 7365 2f54 7275 6520 3a20 2846 616c 7365  se/True : (False
+00034e40: 2920 7072 696e 7420 6c69 6e65 206e 756d  ) print line num
+00034e50: 6265 7220 0a20 2020 2063 616c 6c65 725f  ber .    caller_
+00034e60: 7472 6565 3d46 616c 7365 2f54 7275 6520  tree=False/True 
+00034e70: 2020 2020 2020 3a20 7072 696e 7420 7472        : print tr
+00034e80: 6565 206f 6620 6361 6c6c 6572 2068 6973  ee of caller his
+00034e90: 746f 7279 0a20 2020 2020 2020 5472 7565  tory.       True
+00034ea0: 3a0a 2020 2020 2020 2020 2020 2d20 7472  :.          - tr
+00034eb0: 6565 2061 6e64 2068 6973 746f 7279 0a20  ee and history. 
+00034ec0: 2020 2020 2020 4661 6c73 653a 0a20 2020        False:.   
+00034ed0: 2020 2020 2020 2063 616c 6c65 725f 6869         caller_hi
+00034ee0: 7374 6f72 793d 4661 6c73 652f 5472 7565  story=False/True
+00034ef0: 203a 2072 6574 7572 6e20 6869 7374 6f72   : return histor
+00034f00: 7920 7769 7468 6f75 7420 7472 6565 0a20  y without tree. 
+00034f10: 2020 2073 7973 6c6f 6764 3d20 2020 2020     syslogd=     
+00034f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034f30: 3a20 6c6f 6767 696e 6720 746f 2073 7973  : logging to sys
+00034f40: 6c6f 6764 2064 6165 6d6f 6e0a 2020 2020  logd daemon.    
+00034f50: 656e 645f 6e65 776c 696e 653d 5472 7565  end_newline=True
+00034f60: 2f46 616c 7365 2020 2020 2020 203a 206d  /False       : m
+00034f70: 6172 6b20 6e65 7720 6c69 6e65 2061 7420  ark new line at 
+00034f80: 656e 6420 6f66 2074 6865 206c 696e 650a  end of the line.
+00034f90: 2020 2020 7374 6172 745f 6e65 776c 696e      start_newlin
+00034fa0: 653d 4661 6c73 652f 5472 7565 2020 2020  e=False/True    
+00034fb0: 203a 206d 6172 6b20 6e65 7720 6c69 6e65   : mark new line
+00034fc0: 2061 7420 7374 6172 7420 6f66 2074 6865   at start of the
+00034fd0: 206c 696e 650a 2020 2020 696e 7472 6f3d   line.    intro=
+00034fe0: 3c73 7472 3e20 2020 2020 2020 2020 2020  <str>           
+00034ff0: 2020 2020 2020 203a 206c 6f67 2069 6e74         : log int
+00035000: 726f 2073 7472 696e 6720 6265 666f 7265  ro string before
+00035010: 206c 6f67 2064 6174 610a 2020 2020 6e6f   log data.    no
+00035020: 5f69 6e74 726f 2020 2020 2020 2020 2020  _intro          
+00035030: 2020 2020 2020 2020 2020 203a 2054 7275             : Tru
+00035040: 653a 2074 656d 706f 7261 7279 2072 656d  e: temporary rem
+00035050: 6f76 6520 696e 7472 6f20 2c20 4661 6c73  ove intro , Fals
+00035060: 6528 6465 6661 756c 7429 3a20 496e 7472  e(default): Intr
+00035070: 6f20 7768 656e 2065 7869 7374 2069 6e74  o when exist int
+00035080: 726f 2c20 4e6f 6e65 3a20 7370 6163 6520  ro, None: space 
+00035090: 696e 7374 6561 6420 696e 7472 6f20 7374  instead intro st
+000350a0: 7269 6e67 0a20 2020 206c 6f67 5f6c 6576  ring.    log_lev
+000350b0: 656c 3d3c 696e 743e 2020 2020 2020 2020  el=<int>        
+000350c0: 2020 2020 2020 3a20 6d61 6b65 206c 6f67        : make log
+000350d0: 2d6c 6576 656c 0a20 2020 2020 2020 2070  -level.        p
+000350e0: 7269 6e74 665f 6c6f 675f 6261 7365 3d36  rintf_log_base=6
+000350f0: 0a20 2020 2020 2020 2070 7269 6e74 6628  .        printf(
+00035100: 2761 6161 6161 272c 6c6f 675f 6c65 7665  'aaaaa',log_leve
+00035110: 6c3d 3329 202d 3e20 7468 6973 2077 696c  l=3) -> this wil
+00035120: 6c20 7072 696e 740a 2020 2020 2020 2020  l print.        
+00035130: 7072 696e 7466 2827 6262 6262 6227 2c6c  printf('bbbbb',l
+00035140: 6f67 5f6c 6576 656c 3d38 2920 2d3e 2074  og_level=8) -> t
+00035150: 6869 7320 6e6f 7420 7072 696e 742e 2062  his not print. b
+00035160: 7574 2069 6620 6368 616e 6765 2070 7269  ut if change pri
+00035170: 6e74 665f 6c6f 675f 6261 7365 2074 6f20  ntf_log_base to 
+00035180: 3920 7468 656e 2069 7420 7769 6c6c 2070  9 then it will p
+00035190: 7269 6e74 0a20 2020 206c 6f67 3d3c 6675  rint.    log=<fu
+000351a0: 6e63 3e20 2020 2020 2020 2020 2020 2020  nc>             
+000351b0: 2020 2020 2020 3a20 7075 7420 6c6f 6767        : put logg
+000351c0: 696e 6720 6461 7461 2074 6f20 6c6f 6720  ing data to log 
+000351d0: 6675 6e63 7469 6f6e 0a20 2020 2064 7370  function.    dsp
+000351e0: 3d20 2020 2020 2020 2020 2020 2020 2020  =               
+000351f0: 2020 2020 2020 2020 2020 3a20 4469 7370            : Disp
+00035200: 6c61 7920 666f 726d 6174 0a20 2020 2020  lay format.     
+00035210: 2020 2061 2020 3a20 6175 746f 0a20 2020     a  : auto.   
+00035220: 2020 2020 2073 2020 3a20 7363 7265 656e       s  : screen
+00035230: 0a20 2020 2020 2020 2066 2020 3a20 7361  .        f  : sa
+00035240: 7665 2074 6f20 6669 6c65 0a20 2020 2020  ve to file.     
+00035250: 2020 2064 2020 3a20 7361 7665 2074 6f20     d  : save to 
+00035260: 6465 6275 6720 6669 6c65 0a20 2020 2020  debug file.     
+00035270: 2020 2065 2020 3a20 6c6f 6720 746f 2073     e  : log to s
+00035280: 7461 6e64 6172 6420 6572 726f 7220 0a20  tandard error . 
+00035290: 2020 2020 2020 2063 2020 3a20 636f 6e73         c  : cons
+000352a0: 6f6c 650a 2020 2020 2020 2020 6920 203a  ole.        i  :
+000352b0: 2069 676e 6f72 6520 7072 696e 740a 2020   ignore print.  
+000352c0: 2020 2020 2020 7220 203a 2072 6574 7572        r  : retur
+000352d0: 6e0a 2020 2020 2020 2020 2020 2072 743d  n.           rt=
+000352e0: 7072 696e 7466 2827 7878 7878 272c 6473  printf('xxxx',ds
+000352f0: 703d 2772 2729 0a20 2020 2020 2020 2020  p='r').         
+00035300: 2020 7072 696e 7428 7274 290a 2020 2020    print(rt).    
+00035310: 2727 270a 2020 2020 676c 6f62 616c 2070  '''.    global p
+00035320: 7269 6e74 665f 6361 6c6c 6572 5f64 6574  rintf_caller_det
+00035330: 6169 6c0a 2020 2020 676c 6f62 616c 2070  ail.    global p
+00035340: 7269 6e74 665f 6361 6c6c 6572 5f74 7265  rintf_caller_tre
+00035350: 650a 2020 2020 676c 6f62 616c 2070 7269  e.    global pri
+00035360: 6e74 665f 6c6f 675f 6261 7365 0a20 2020  ntf_log_base.   
+00035370: 2067 6c6f 6261 6c20 7072 696e 7466 5f63   global printf_c
+00035380: 616c 6c65 725f 6e61 6d65 0a20 2020 2067  aller_name.    g
+00035390: 6c6f 6261 6c20 7072 696e 7466 5f6e 6577  lobal printf_new
+000353a0: 6c69 6e65 5f69 6e66 6f0a 2020 2020 676c  line_info.    gl
+000353b0: 6f62 616c 2070 7269 6e74 665f 6967 6e6f  obal printf_igno
+000353c0: 7265 5f65 6d70 7479 0a20 2020 2067 6c6f  re_empty.    glo
+000353d0: 6261 6c20 7072 696e 7466 5f64 6267 5f65  bal printf_dbg_e
+000353e0: 6d70 7479 0a20 2020 2067 6c6f 6261 6c20  mpty.    global 
+000353f0: 7072 696e 7466 5f73 6372 5f64 6267 0a20  printf_scr_dbg. 
+00035400: 2020 2064 6972 6563 743d 6f70 7473 2e67     direct=opts.g
+00035410: 6574 2827 6469 7265 6374 272c 4661 6c73  et('direct',Fals
+00035420: 6529 0a20 2020 2064 7370 3d6f 7074 732e  e).    dsp=opts.
+00035430: 6765 7428 2764 7370 272c 6f70 7473 2e67  get('dsp',opts.g
+00035440: 6574 2827 6d6f 6465 272c 2761 2729 290a  et('mode','a')).
+00035450: 2020 2020 6966 206e 6f74 2064 7370 3a20      if not dsp: 
+00035460: 6473 703d 2761 270a 2020 2020 6966 2064  dsp='a'.    if d
+00035470: 7370 203d 3d20 2769 273a 2072 6574 7572  sp == 'i': retur
+00035480: 6e20 2320 6967 6e6f 7265 2070 7269 6e74  n # ignore print
+00035490: 0a20 2020 206c 6f67 3d6f 7074 732e 6765  .    log=opts.ge
+000354a0: 7428 276c 6f67 272c 4e6f 6e65 290a 2020  t('log',None).  
+000354b0: 2020 6c6f 675f 6c65 7665 6c3d 6f70 7473    log_level=opts
+000354c0: 2e67 6574 2827 6c6f 675f 6c65 7665 6c27  .get('log_level'
+000354d0: 2c4e 6f6e 6529 0a20 2020 2070 6172 656e  ,None).    paren
+000354e0: 745f 6e3d 6f70 7473 2e67 6574 2827 6361  t_n=opts.get('ca
+000354f0: 6c6c 6572 5f70 6172 656e 7427 2c31 290a  ller_parent',1).
+00035500: 2020 2020 6361 6c6c 6572 5f64 6574 6169      caller_detai
+00035510: 6c3d 6f70 7473 2e67 6574 2827 6361 6c6c  l=opts.get('call
+00035520: 6572 272c 6f70 7473 2e67 6574 2827 6361  er',opts.get('ca
+00035530: 6c6c 6572 5f64 6574 6169 6c27 2c70 7269  ller_detail',pri
+00035540: 6e74 665f 6361 6c6c 6572 5f64 6574 6169  ntf_caller_detai
+00035550: 6c29 290a 2020 2020 6361 6c6c 6572 5f74  l)).    caller_t
+00035560: 7265 653d 6f70 7473 2e67 6574 2827 6361  ree=opts.get('ca
+00035570: 6c6c 6572 5f74 7265 6527 2c70 7269 6e74  ller_tree',print
+00035580: 665f 6361 6c6c 6572 5f74 7265 6529 0a20  f_caller_tree). 
+00035590: 2020 2063 616c 6c65 725f 6869 7374 6f72     caller_histor
+000355a0: 793d 6f70 7473 2e67 6574 2827 6361 6c6c  y=opts.get('call
+000355b0: 6572 5f68 6973 746f 7279 272c 4661 6c73  er_history',Fals
+000355c0: 6529 0a20 2020 2063 616c 6c65 725f 6967  e).    caller_ig
+000355d0: 6e6f 7265 3d6f 7074 732e 6765 7428 2763  nore=opts.get('c
+000355e0: 616c 6c65 725f 6967 6e6f 7265 272c 6f70  aller_ignore',op
+000355f0: 7473 2e67 6574 2827 6361 6c6c 6572 5f75  ts.get('caller_u
+00035600: 7070 6572 272c 5b5d 2929 0a20 2020 2063  pper',[])).    c
+00035610: 616c 6c65 725f 6675 6c6c 5f66 696c 656e  aller_full_filen
+00035620: 616d 653d 6f70 7473 2e67 6574 2827 6361  ame=opts.get('ca
+00035630: 6c6c 6572 5f66 756c 6c5f 6669 6c65 6e61  ller_full_filena
+00035640: 6d65 272c 4661 6c73 6529 0a20 2020 2063  me',False).    c
+00035650: 616c 6c65 725f 6669 6c65 6e61 6d65 3d6f  aller_filename=o
+00035660: 7074 732e 6765 7428 2763 616c 6c65 725f  pts.get('caller_
+00035670: 6669 6c65 6e61 6d65 272c 4661 6c73 6529  filename',False)
+00035680: 0a20 2020 2063 616c 6c65 725f 6c69 6e65  .    caller_line
+00035690: 5f6e 756d 6265 723d 6f70 7473 2e67 6574  _number=opts.get
+000356a0: 2827 6361 6c6c 6572 5f6c 696e 655f 6e75  ('caller_line_nu
+000356b0: 6d62 6572 272c 4661 6c73 6529 0a20 2020  mber',False).   
+000356c0: 2063 616c 6c65 725f 6172 6773 3d6f 7074   caller_args=opt
+000356d0: 732e 6765 7428 2763 616c 6c65 725f 6172  s.get('caller_ar
+000356e0: 6773 272c 4661 6c73 6529 0a20 2020 2063  gs',False).    c
+000356f0: 616c 6c65 725f 6e61 6d65 3d6f 7074 732e  aller_name=opts.
+00035700: 6765 7428 2763 616c 6c65 725f 6e61 6d65  get('caller_name
+00035710: 272c 7072 696e 7466 5f63 616c 6c65 725f  ',printf_caller_
+00035720: 6e61 6d65 290a 2020 2020 7379 736c 6f67  name).    syslog
+00035730: 643d 6f70 7473 2e67 6574 2827 7379 736c  d=opts.get('sysl
+00035740: 6f67 6427 2c4e 6f6e 6529 0a20 2020 2073  ogd',None).    s
+00035750: 6372 5f64 6267 3d6f 7074 732e 6765 7428  cr_dbg=opts.get(
+00035760: 2773 6372 5f64 6267 272c 7072 696e 7466  'scr_dbg',printf
+00035770: 5f73 6372 5f64 6267 290a 2020 2020 7363  _scr_dbg).    sc
+00035780: 725f 6462 675f 636f 6e64 6974 696f 6e3d  r_dbg_condition=
+00035790: 6f70 7473 2e67 6574 2827 7363 725f 6462  opts.get('scr_db
+000357a0: 675f 636f 6e64 6974 696f 6e27 290a 2020  g_condition').  
+000357b0: 2020 6e6f 5f69 6e74 726f 3d6f 7074 732e    no_intro=opts.
+000357c0: 6765 7428 276e 6f5f 696e 7472 6f27 2c46  get('no_intro',F
+000357d0: 616c 7365 290a 2020 2020 6967 6e6f 7265  alse).    ignore
+000357e0: 5f65 6d70 7479 3d6f 7074 732e 6765 7428  _empty=opts.get(
+000357f0: 2769 676e 6f72 655f 656d 7074 7927 2c70  'ignore_empty',p
+00035800: 7269 6e74 665f 6967 6e6f 7265 5f65 6d70  rintf_ignore_emp
+00035810: 7479 290a 2020 2020 6462 675f 656d 7074  ty).    dbg_empt
+00035820: 793d 6f70 7473 2e67 6574 2827 6462 675f  y=opts.get('dbg_
+00035830: 656d 7074 7927 2c70 7269 6e74 665f 6462  empty',printf_db
+00035840: 675f 656d 7074 7929 0a20 2020 206d 7367  g_empty).    msg
+00035850: 5f73 706c 6974 3d6f 7074 732e 6765 7428  _split=opts.get(
+00035860: 276d 7367 5f73 706c 6974 272c 2720 2729  'msg_split',' ')
+00035870: 0a20 2020 206d 7367 3d6c 6973 7428 6d73  .    msg=list(ms
+00035880: 6729 0a20 2020 2069 6620 6e6f 5f69 6e74  g).    if no_int
+00035890: 726f 2069 7320 5472 7565 206f 7220 6469  ro is True or di
+000358a0: 7265 6374 3a0a 2020 2020 2020 2020 6461  rect:.        da
+000358b0: 7465 5f66 6f72 6d61 743d 4e6f 6e65 0a20  te_format=None. 
+000358c0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+000358d0: 2064 6174 655f 666f 726d 6174 3d6f 7074   date_format=opt
+000358e0: 732e 6765 7428 2764 6174 655f 666f 726d  s.get('date_form
+000358f0: 6174 272c 2725 6d2f 2564 2f25 5920 2548  at','%m/%d/%Y %H
+00035900: 3a25 4d3a 2553 2720 6966 206f 7074 732e  :%M:%S' if opts.
+00035910: 6765 7428 2764 6174 6527 2920 656c 7365  get('date') else
+00035920: 204e 6f6e 6529 0a20 2020 2023 2065 6e64   None).    # end
+00035930: 206e 6577 6c69 6e65 2064 6573 6967 6e0a   newline design.
+00035940: 2020 2020 6e65 775f 6c69 6e65 3d27 2720      new_line='' 
+00035950: 6966 2064 6972 6563 7420 656c 7365 206f  if direct else o
+00035960: 7074 732e 6765 7428 276e 6577 5f6c 696e  pts.get('new_lin
+00035970: 6527 2c6f 7074 732e 6765 7428 276e 6577  e',opts.get('new
+00035980: 6c69 6e65 272c 6f70 7473 2e67 6574 2827  line',opts.get('
+00035990: 656e 6427 2c6f 7074 732e 6765 7428 2765  end',opts.get('e
+000359a0: 6e64 5f6e 6577 6c69 6e65 272c 6f70 7473  nd_newline',opts
+000359b0: 2e67 6574 2827 706f 7374 5f6e 6577 6c69  .get('post_newli
+000359c0: 6e65 272c 275c 6e27 2929 2929 290a 2020  ne','\n'))))).  
+000359d0: 2020 6966 206e 6577 5f6c 696e 6520 6e6f    if new_line no
+000359e0: 7420 696e 205b 2727 2c27 5c6e 275d 3a6e  t in ['','\n']:n
+000359f0: 6577 5f6c 696e 653d 275c 6e27 2069 6620  ew_line='\n' if 
+00035a00: 6e65 775f 6c69 6e65 2061 6e64 206e 6f74  new_line and not
+00035a10: 2064 6972 6563 7420 656c 7365 2027 270a   direct else ''.
+00035a20: 2020 2020 2320 7374 6172 7420 6e65 776c      # start newl
+00035a30: 696e 6520 6465 7369 676e 0a20 2020 206e  ine design.    n
+00035a40: 6f5f 7374 6172 745f 6e65 776c 696e 653d  o_start_newline=
+00035a50: 6f70 7473 2e67 6574 2827 6e6f 5f73 7461  opts.get('no_sta
+00035a60: 7274 5f6e 6577 6c69 6e65 2729 0a20 2020  rt_newline').   
+00035a70: 2073 7461 7274 5f6e 6577 6c69 6e65 3d27   start_newline='
+00035a80: 2720 6966 206e 6f5f 7374 6172 745f 6e65  ' if no_start_ne
+00035a90: 776c 696e 6520 6973 2054 7275 6520 656c  wline is True el
+00035aa0: 7365 206f 7074 732e 6765 7428 2773 7461  se opts.get('sta
+00035ab0: 7274 5f6e 6577 6c69 6e65 272c 6f70 7473  rt_newline',opts
+00035ac0: 2e67 6574 2827 7374 6172 7427 2c6f 7074  .get('start',opt
+00035ad0: 732e 6765 7428 2770 7265 5f6e 6577 6c69  s.get('pre_newli
+00035ae0: 6e65 2729 2929 0a20 2020 2069 6620 6e6f  ne'))).    if no
+00035af0: 5f73 7461 7274 5f6e 6577 6c69 6e65 3a0a  _start_newline:.
+00035b00: 2020 2020 2020 2020 7374 6172 745f 6e65          start_ne
+00035b10: 776c 696e 653d 2727 0a20 2020 2065 6c73  wline=''.    els
+00035b20: 653a 0a20 2020 2020 2020 2069 6620 7374  e:.        if st
+00035b30: 6172 745f 6e65 776c 696e 6520 6973 2054  art_newline is T
+00035b40: 7275 653a 0a20 2020 2020 2020 2020 2020  rue:.           
+00035b50: 2073 7461 7274 5f6e 6577 6c69 6e65 3d27   start_newline='
+00035b60: 5c6e 270a 2020 2020 2020 2020 656c 6966  \n'.        elif
+00035b70: 2049 7349 6e28 7374 6172 745f 6e65 776c   IsIn(start_newl
+00035b80: 696e 652c 5b27 4127 2c27 4175 746f 275d  ine,['A','Auto']
+00035b90: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
+00035ba0: 7461 7274 5f6e 6577 6c69 6e65 3d27 6175  tart_newline='au
+00035bb0: 746f 270a 2020 2020 2020 2020 656c 7365  to'.        else
+00035bc0: 3a0a 2020 2020 2020 2020 2020 2020 7374  :.            st
+00035bd0: 6172 745f 6e65 776c 696e 653d 2727 0a0a  art_newline=''..
+00035be0: 2020 2020 6966 206e 6f5f 696e 7472 6f20      if no_intro 
+00035bf0: 6973 2054 7275 653a 2023 2069 6620 6e6f  is True: # if no
+00035c00: 5f69 6e74 726f 2074 6865 6e20 6967 6e6f  _intro then igno
+00035c10: 7265 2073 7461 7274 5f6e 6577 6c69 6e65  re start_newline
+00035c20: 206d 6172 6b0a 2020 2020 2020 2020 7374   mark.        st
 00035c30: 6172 745f 6e65 776c 696e 653d 2727 0a0a  art_newline=''..
-00035c40: 2020 2020 6966 206e 6f5f 696e 7472 6f20      if no_intro 
-00035c50: 6973 2054 7275 653a 2023 2069 6620 6e6f  is True: # if no
-00035c60: 5f69 6e74 726f 2074 6865 6e20 6967 6e6f  _intro then igno
-00035c70: 7265 2073 7461 7274 5f6e 6577 6c69 6e65  re start_newline
-00035c80: 206d 6172 6b0a 2020 2020 2020 2020 7374   mark.        st
-00035c90: 6172 745f 6e65 776c 696e 653d 2727 0a0a  art_newline=''..
-00035ca0: 2020 2020 696e 7472 6f3d 6f70 7473 2e67      intro=opts.g
-00035cb0: 6574 2827 696e 7472 6f27 2c4e 6f6e 6529  et('intro',None)
-00035cc0: 0a20 2020 206c 6f67 6669 6c65 3d6f 7074  .    logfile=opt
-00035cd0: 732e 6765 7428 276c 6f67 6669 6c65 272c  s.get('logfile',
-00035ce0: 6f70 7473 2e67 6574 2827 6c6f 675f 6669  opts.get('log_fi
-00035cf0: 6c65 272c 5b5d 2929 0a20 2020 2069 676e  le',[])).    ign
-00035d00: 6f72 655f 6d79 7365 6c66 3d6f 7074 732e  ore_myself=opts.
-00035d10: 6765 7428 2769 676e 6f72 655f 6d79 7365  get('ignore_myse
-00035d20: 6c66 272c 5472 7565 290a 2020 2020 6465  lf',True).    de
-00035d30: 6620 6d73 675f 6d61 6b65 7228 2a6d 7367  f msg_maker(*msg
-00035d40: 2c6d 7367 5f73 706c 6974 3d27 2027 2c69  ,msg_split=' ',i
-00035d50: 6e74 726f 5f6c 656e 3d30 2c69 6e74 726f  ntro_len=0,intro
-00035d60: 5f6d 7367 3d27 2729 3a0a 2020 2020 2020  _msg=''):.      
-00035d70: 2020 2320 4d61 6b65 2069 6e70 7574 2064    # Make input d
-00035d80: 6174 6120 746f 2061 2073 7472 696e 6720  ata to a string 
-00035d90: 6d73 6720 0a20 2020 2020 2020 206d 7367  msg .        msg
-00035da0: 5f73 7472 3d27 270a 2020 2020 2020 2020  _str=''.        
-00035db0: 5454 3d30 2020 2320 466f 7220 275c 6e27  TT=0  # For '\n'
-00035dc0: 206f 7220 275c 6e5c 6e27 202e 2e2e 0a20   or '\n\n' .... 
-00035dd0: 2020 2020 2020 2066 6f72 2069 6920 696e         for ii in
-00035de0: 206d 7367 3a0a 2020 2020 2020 2020 2020   msg:.          
-00035df0: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
-00035e00: 6e63 6528 6969 2c73 7472 293a 0a20 2020  nce(ii,str):.   
-00035e10: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00035e20: 696e 7472 6f5f 6c65 6e3a 0a20 2020 2020  intro_len:.     
-00035e30: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00035e40: 3d43 6f6c 6f72 5374 7228 5772 6170 5374  =ColorStr(WrapSt
-00035e50: 7269 6e67 2853 7472 2870 7072 696e 742e  ring(Str(pprint.
-00035e60: 7066 6f72 6d61 7428 6969 292c 6465 6661  pformat(ii),defa
-00035e70: 756c 743d 276f 7267 2729 2c66 7370 6163  ult='org'),fspac
-00035e80: 653d 3020 6966 206e 6f74 206d 7367 5f73  e=0 if not msg_s
-00035e90: 7472 206f 7220 6d73 675f 7370 6c69 7420  tr or msg_split 
-00035ea0: 213d 2027 5c6e 2720 6f72 2054 5420 656c  != '\n' or TT el
-00035eb0: 7365 2069 6e74 726f 5f6c 656e 2c20 6e73  se intro_len, ns
-00035ec0: 7061 6365 3d69 6e74 726f 5f6c 656e 2c6d  pace=intro_len,m
-00035ed0: 6f64 653d 2773 7061 6365 2729 2c2a 2a6f  ode='space'),**o
-00035ee0: 7074 7329 0a20 2020 2020 2020 2020 2020  pts).           
-00035ef0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00035f00: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00035f10: 3d43 6f6c 6f72 5374 7228 5374 7228 7070  =ColorStr(Str(pp
-00035f20: 7269 6e74 2e70 666f 726d 6174 2869 6929  rint.pformat(ii)
-00035f30: 2c64 6566 6175 6c74 3d27 6f72 6727 292c  ,default='org'),
-00035f40: 2a2a 6f70 7473 290a 2020 2020 2020 2020  **opts).        
-00035f50: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00035f60: 2020 2020 2020 2020 2020 6966 2027 5c6e            if '\n
-00035f70: 2720 696e 2069 6920 616e 6420 6e6f 7420  ' in ii and not 
-00035f80: 6969 2e72 6570 6c61 6365 2827 5c6e 272c  ii.replace('\n',
-00035f90: 2727 293a 2023 636f 6e76 6572 7420 5c6e  ''): #convert \n
-00035fa0: 206f 7220 5c6e 5c6e 202e 2e2e 2e20 746f   or \n\n .... to
-00035fb0: 2077 7261 7070 696e 6720 666f 726d 6174   wrapping format
-00035fc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00035fd0: 2020 2020 2054 542b 3d31 0a20 2020 2020       TT+=1.     
-00035fe0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00035ff0: 693d 6969 2b27 5427 0a20 2020 2020 2020  i=ii+'T'.       
-00036000: 2020 2020 2020 2020 2069 6620 696e 7472           if intr
-00036010: 6f5f 6c65 6e3a 0a20 2020 2020 2020 2020  o_len:.         
-00036020: 2020 2020 2020 2020 2020 2061 3d43 6f6c             a=Col
-00036030: 6f72 5374 7228 5772 6170 5374 7269 6e67  orStr(WrapString
-00036040: 2853 7472 2869 692c 6465 6661 756c 743d  (Str(ii,default=
-00036050: 276f 7267 2729 2c66 7370 6163 653d 3020  'org'),fspace=0 
-00036060: 6966 206e 6f74 206d 7367 5f73 7472 206f  if not msg_str o
-00036070: 7220 6d73 675f 7370 6c69 7420 213d 2027  r msg_split != '
-00036080: 5c6e 2720 6f72 2054 5420 656c 7365 2069  \n' or TT else i
-00036090: 6e74 726f 5f6c 656e 2c20 6e73 7061 6365  ntro_len, nspace
-000360a0: 3d69 6e74 726f 5f6c 656e 2c6d 6f64 653d  =intro_len,mode=
-000360b0: 2773 7061 6365 2729 2c2a 2a6f 7074 7329  'space'),**opts)
-000360c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000360d0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-000360e0: 2020 2020 2020 2020 2020 2061 3d43 6f6c             a=Col
-000360f0: 6f72 5374 7228 5374 7228 6969 2c64 6566  orStr(Str(ii,def
-00036100: 6175 6c74 3d27 6f72 6727 292c 2a2a 6f70  ault='org'),**op
-00036110: 7473 290a 2020 2020 2020 2020 2020 2020  ts).            
-00036120: 2020 2020 2352 6563 6f76 6572 2061 6464      #Recover add
-00036130: 6564 2054 2066 6f72 2077 7261 7070 696e  ed T for wrappin
-00036140: 6720 666f 726d 6174 2074 6f20 6f72 6967  g format to orig
-00036150: 696e 616c 0a20 2020 2020 2020 2020 2020  inal.           
-00036160: 2020 2020 2069 6620 5454 2061 6e64 2027       if TT and '
-00036170: 5c6e 2720 696e 2069 6920 616e 6420 6969  \n' in ii and ii
-00036180: 2e72 6570 6c61 6365 2827 5c6e 272c 2727  .replace('\n',''
-00036190: 2920 3d3d 2027 5427 3a20 613d 615b 3a2d  ) == 'T': a=a[:-
-000361a0: 315d 0a20 2020 2020 2020 2020 2020 2069  1].            i
-000361b0: 6620 6d73 675f 7374 723a 0a20 2020 2020  f msg_str:.     
-000361c0: 2020 2020 2020 2020 2020 2069 6620 5454             if TT
-000361d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000361e0: 2020 2020 2020 2369 6620 6d65 7373 6167        #if messag
-000361f0: 6520 7370 6c69 7465 7220 6578 6973 7420  e spliter exist 
-00036200: 616e 6420 6669 7820 746f 2066 6972 7374  and fix to first
-00036210: 2063 6861 7261 6374 6572 0a20 2020 2020   character.     
-00036220: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00036230: 6620 5454 203d 3d20 3120 616e 6420 6e6f  f TT == 1 and no
-00036240: 7420 6969 2e72 6570 6c61 6365 2827 5c6e  t ii.replace('\n
-00036250: 272c 2727 293a 0a20 2020 2020 2020 2020  ',''):.         
-00036260: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-00036270: 7367 5f73 7472 3d6d 7367 5f73 7472 202b  sg_str=msg_str +
-00036280: 206d 7367 5f73 706c 6974 202b 2061 0a20   msg_split + a. 
-00036290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000362a0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000362b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000362c0: 206d 7367 5f73 7472 3d6d 7367 5f73 7472   msg_str=msg_str
-000362d0: 202b 2061 0a20 2020 2020 2020 2020 2020   + a.           
-000362e0: 2020 2020 2020 2020 2069 6620 6969 2e72           if ii.r
-000362f0: 6570 6c61 6365 2827 5c6e 272c 2727 293a  eplace('\n',''):
-00036300: 2054 543d 3020 2320 7265 6d6f 7665 2073   TT=0 # remove s
-00036310: 7065 6369 616c 2066 6f72 6d61 7420 7461  pecial format ta
-00036320: 670a 2020 2020 2020 2020 2020 2020 2020  g.              
-00036330: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00036340: 2020 2020 2020 2020 2020 2020 6d73 675f              msg_
-00036350: 7374 723d 6d73 675f 7374 7220 2b20 6d73  str=msg_str + ms
-00036360: 675f 7370 6c69 7420 2b20 610a 2020 2020  g_split + a.    
-00036370: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00036380: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00036390: 2069 6e74 726f 5f6d 7367 3a0a 2020 2020   intro_msg:.    
-000363a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000363b0: 6d73 675f 7374 723d 696e 7472 6f5f 6d73  msg_str=intro_ms
-000363c0: 6720 2b20 6120 0a20 2020 2020 2020 2020  g + a .         
-000363d0: 2020 2020 2020 2065 6c69 6620 696e 7472         elif intr
-000363e0: 6f5f 6c65 6e3a 0a20 2020 2020 2020 2020  o_len:.         
-000363f0: 2020 2020 2020 2020 2020 206d 7367 5f73             msg_s
-00036400: 7472 3d20 5370 6163 6528 6e75 6d3d 696e  tr= Space(num=in
-00036410: 7472 6f5f 6c65 6e29 202b 2061 0a20 2020  tro_len) + a.   
-00036420: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00036430: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00036440: 2020 2020 2020 206d 7367 5f73 7472 3d61         msg_str=a
-00036450: 200a 2020 2020 2020 2020 2020 2020 2320   .            # 
-00036460: 6966 2065 6e64 206f 6620 7468 6520 6c69  if end of the li
-00036470: 6e65 2068 6173 2065 7874 7261 2027 5c6e  ne has extra '\n
-00036480: 2720 7468 656e 2072 6563 6f76 6572 2074  ' then recover t
-00036490: 6865 206c 6f73 7465 6420 275c 6e27 2062  he losted '\n' b
-000364a0: 7920 5772 6170 5374 7269 6e67 2829 0a20  y WrapString(). 
-000364b0: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-000364c0: 696e 7374 616e 6365 2869 692c 7374 7229  instance(ii,str)
-000364d0: 2061 6e64 206c 656e 2869 6929 203e 2031   and len(ii) > 1
-000364e0: 2061 6e64 2069 695b 2d31 5d20 3d3d 2027   and ii[-1] == '
-000364f0: 5c6e 273a 0a20 2020 2020 2020 2020 2020  \n':.           
-00036500: 2020 2020 206d 7367 5f73 7472 3d6d 7367       msg_str=msg
-00036510: 5f73 7472 202b 2069 695b 2d31 5d0a 2020  _str + ii[-1].  
-00036520: 2020 2020 2020 7265 7475 726e 206d 7367        return msg
-00036530: 5f73 7472 0a0a 2020 2020 2347 6574 204c  _str..    #Get L
-00036540: 6f67 6669 6c65 2069 6e66 6f72 6d61 7469  ogfile informati
-00036550: 6f6e 2066 6f72 204f 4c44 2076 6572 7369  on for OLD versi
-00036560: 6f6e 2061 6e64 2072 656d 6f76 6520 7468  on and remove th
-00036570: 6520 4c6f 6766 696c 6520 696e 666f 726d  e Logfile inform
-00036580: 6174 696f 6e20 696e 2074 6865 206d 6573  ation in the mes
-00036590: 7361 6765 730a 2020 2020 6966 2069 7369  sages.    if isi
-000365a0: 6e73 7461 6e63 6528 6c6f 6766 696c 652c  nstance(logfile,
-000365b0: 7374 7229 3a0a 2020 2020 2020 2020 6c6f  str):.        lo
-000365c0: 6766 696c 653d 6c6f 6766 696c 652e 7370  gfile=logfile.sp
-000365d0: 6c69 7428 272c 2729 0a20 2020 2065 6c69  lit(',').    eli
-000365e0: 6620 6973 696e 7374 616e 6365 286c 6f67  f isinstance(log
-000365f0: 6669 6c65 2c74 7570 6c65 293a 0a20 2020  file,tuple):.   
-00036600: 2020 2020 206c 6f67 6669 6c65 3d6c 6973       logfile=lis
-00036610: 7428 7475 706c 6529 0a20 2020 2069 6620  t(tuple).    if 
-00036620: 6e6f 7420 6973 696e 7374 616e 6365 286c  not isinstance(l
-00036630: 6f67 6669 6c65 2c6c 6973 7429 3a0a 2020  ogfile,list):.  
-00036640: 2020 2020 2020 6c6f 6766 696c 653d 5b5d        logfile=[]
-00036650: 0a20 2020 2066 6f72 2069 6920 696e 206d  .    for ii in m
-00036660: 7367 3a0a 2020 2020 2020 2020 6966 2069  sg:.        if i
-00036670: 7369 6e73 7461 6e63 6528 6969 2c73 7472  sinstance(ii,str
-00036680: 2920 616e 6420 273a 2720 696e 2069 693a  ) and ':' in ii:
-00036690: 0a20 2020 2020 2020 2020 2020 206c 6f67  .            log
-000366a0: 6669 6c65 5f6c 6973 743d 6969 2e73 706c  file_list=ii.spl
-000366b0: 6974 2827 3a27 290a 2020 2020 2020 2020  it(':').        
-000366c0: 2020 2020 6966 206c 6f67 6669 6c65 5f6c      if logfile_l
-000366d0: 6973 745b 305d 2069 6e20 5b27 6c6f 675f  ist[0] in ['log_
-000366e0: 6669 6c65 272c 276c 6f67 6669 6c65 275d  file','logfile']
-000366f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00036700: 2020 6966 206c 656e 286c 6f67 6669 6c65    if len(logfile
-00036710: 5f6c 6973 7429 203e 2032 3a0a 2020 2020  _list) > 2:.    
-00036720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00036730: 666f 7220 6a6a 2069 6e20 6c6f 6766 696c  for jj in logfil
-00036740: 655f 6c69 7374 5b31 3a5d 3a0a 2020 2020  e_list[1:]:.    
-00036750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00036760: 2020 2020 6c6f 6766 696c 652e 6170 7065      logfile.appe
-00036770: 6e64 286a 6a29 0a20 2020 2020 2020 2020  nd(jj).         
-00036780: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00036790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000367a0: 206c 6f67 6669 6c65 3d6c 6f67 6669 6c65   logfile=logfile
-000367b0: 2b6c 6f67 6669 6c65 5f6c 6973 745b 315d  +logfile_list[1]
-000367c0: 2e73 706c 6974 2827 2c27 290a 2020 2020  .split(',').    
-000367d0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-000367e0: 7369 6e73 7461 6e63 6528 6d73 672c 7475  sinstance(msg,tu
-000367f0: 706c 6529 3a0a 2020 2020 2020 2020 2020  ple):.          
-00036800: 2020 2020 2020 2020 2020 6d73 673d 6c69            msg=li
-00036810: 7374 286d 7367 290a 2020 2020 2020 2020  st(msg).        
-00036820: 2020 2020 2020 2020 2020 2020 6d73 672e              msg.
-00036830: 7265 6d6f 7665 2869 6929 0a20 2020 2020  remove(ii).     
-00036840: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-00036850: 7367 3d74 7570 6c65 286d 7367 290a 2020  sg=tuple(msg).  
-00036860: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00036870: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00036880: 2020 2020 2020 2020 6d73 672e 7265 6d6f          msg.remo
-00036890: 7665 2869 6929 0a20 2020 200a 2020 2020  ve(ii).    .    
-000368a0: 2320 7361 7665 206d 7367 2872 656d 6f76  # save msg(remov
-000368b0: 6564 206c 6f67 5f66 696c 6520 696e 666f  ed log_file info
-000368c0: 726d 6174 696f 6e29 2074 6f20 7379 736c  rmation) to sysl
-000368d0: 6f67 6420 0a20 2020 2069 6620 7379 736c  ogd .    if sysl
-000368e0: 6f67 643a 0a20 2020 2020 2020 2023 204d  ogd:.        # M
-000368f0: 616b 6520 6120 6d65 7373 6167 6520 746f  ake a message to
-00036900: 2073 696e 676c 6520 6c69 6e65 0a20 2020   single line.   
-00036910: 2020 2020 2074 6d70 5f73 7472 3d6d 7367       tmp_str=msg
-00036920: 5f6d 616b 6572 282a 6d73 672c 6d73 675f  _maker(*msg,msg_
-00036930: 7370 6c69 743d 6d73 675f 7370 6c69 7429  split=msg_split)
-00036940: 0a20 2020 2020 2020 2069 6620 7379 736c  .        if sysl
-00036950: 6f67 6420 696e 205b 2749 4e46 4f27 2c27  ogd in ['INFO','
-00036960: 696e 666f 275d 3a0a 2020 2020 2020 2020  info']:.        
-00036970: 2020 2020 7379 736c 6f67 2e73 7973 6c6f      syslog.syslo
-00036980: 6728 7379 736c 6f67 2e4c 4f47 5f49 4e46  g(syslog.LOG_INF
-00036990: 4f2c 746d 705f 7374 7229 0a20 2020 2020  O,tmp_str).     
-000369a0: 2020 2065 6c69 6620 7379 736c 6f67 6420     elif syslogd 
-000369b0: 696e 205b 274b 4552 4e27 2c27 6b65 726e  in ['KERN','kern
-000369c0: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-000369d0: 7379 736c 6f67 2e73 7973 6c6f 6728 7379  syslog.syslog(sy
-000369e0: 736c 6f67 2e4c 4f47 5f4b 4552 4e2c 746d  slog.LOG_KERN,tm
-000369f0: 705f 7374 7229 0a20 2020 2020 2020 2065  p_str).        e
-00036a00: 6c69 6620 7379 736c 6f67 6420 696e 205b  lif syslogd in [
-00036a10: 2745 5252 272c 2765 7272 275d 3a0a 2020  'ERR','err']:.  
-00036a20: 2020 2020 2020 2020 2020 7379 736c 6f67            syslog
-00036a30: 2e73 7973 6c6f 6728 7379 736c 6f67 2e4c  .syslog(syslog.L
-00036a40: 4f47 5f45 5252 2c74 6d70 5f73 7472 290a  OG_ERR,tmp_str).
-00036a50: 2020 2020 2020 2020 656c 6966 2073 7973          elif sys
-00036a60: 6c6f 6764 2069 6e20 5b27 4352 4954 272c  logd in ['CRIT',
-00036a70: 2763 7269 7427 5d3a 0a20 2020 2020 2020  'crit']:.       
-00036a80: 2020 2020 2073 7973 6c6f 672e 7379 736c       syslog.sysl
-00036a90: 6f67 2873 7973 6c6f 672e 4c4f 475f 4352  og(syslog.LOG_CR
-00036aa0: 4954 2c74 6d70 5f73 7472 290a 2020 2020  IT,tmp_str).    
-00036ab0: 2020 2020 656c 6966 2073 7973 6c6f 6764      elif syslogd
-00036ac0: 2069 6e20 5b27 5741 524e 272c 2777 6172   in ['WARN','war
-00036ad0: 6e27 5d3a 0a20 2020 2020 2020 2020 2020  n']:.           
-00036ae0: 2073 7973 6c6f 672e 7379 736c 6f67 2873   syslog.syslog(s
-00036af0: 7973 6c6f 672e 4c4f 475f 5741 524e 494e  yslog.LOG_WARNIN
-00036b00: 472c 746d 705f 7374 7229 0a20 2020 2020  G,tmp_str).     
-00036b10: 2020 2065 6c69 6620 7379 736c 6f67 6420     elif syslogd 
-00036b20: 696e 205b 2744 4247 272c 2744 4542 5547  in ['DBG','DEBUG
-00036b30: 272c 2764 6267 272c 2764 6562 7567 275d  ','dbg','debug']
-00036b40: 3a0a 2020 2020 2020 2020 2020 2020 7379  :.            sy
-00036b50: 736c 6f67 2e73 7973 6c6f 6728 7379 736c  slog.syslog(sysl
-00036b60: 6f67 2e4c 4f47 5f44 4542 5547 2c74 6d70  og.LOG_DEBUG,tmp
-00036b70: 5f73 7472 290a 2020 2020 2020 2020 656c  _str).        el
-00036b80: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00036b90: 7379 736c 6f67 2e73 7973 6c6f 6728 746d  syslog.syslog(tm
-00036ba0: 705f 7374 7229 0a0a 2020 2020 2357 6865  p_str)..    #Whe
-00036bb0: 6e20 6861 7669 6e67 204c 6f67 2066 756e  n having Log fun
-00036bc0: 6374 696f 6e20 7468 656e 2067 6976 6520  ction then give 
-00036bd0: 7468 6520 6461 7461 2074 6f20 6c6f 6720  the data to log 
-00036be0: 6675 6e63 7469 6f6e 0a20 2020 206c 6f67  function.    log
-00036bf0: 5f70 3d46 616c 7365 0a20 2020 2069 6620  _p=False.    if 
-00036c00: 4973 4675 6e63 7469 6f6e 286c 6f67 293a  IsFunction(log):
-00036c10: 2023 204c 6f67 2066 756e 6374 696f 6e28   # Log function(
-00036c20: 2064 6562 7567 206d 6f64 6520 6c6f 6720   debug mode log 
-00036c30: 6675 6e63 7469 6f6e 2074 6f6f 2029 0a20  function too ). 
-00036c40: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
-00036c50: 2020 2020 2020 2020 6966 2028 2764 2720          if ('d' 
-00036c60: 696e 2064 7370 206f 7220 2766 2720 696e  in dsp or 'f' in
-00036c70: 2064 7370 2920 616e 6420 6c6f 6766 696c   dsp) and logfil
-00036c80: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00036c90: 2020 2069 6620 2763 616c 6c65 725f 7061     if 'caller_pa
-00036ca0: 7265 6e74 2720 696e 206f 7074 733a 0a20  rent' in opts:. 
-00036cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00036cc0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00036cd0: 286f 7074 735b 2763 616c 6c65 725f 7061  (opts['caller_pa
-00036ce0: 7265 6e74 275d 2c69 6e74 293a 0a20 2020  rent'],int):.   
+00035c40: 2020 2020 696e 7472 6f3d 6f70 7473 2e67      intro=opts.g
+00035c50: 6574 2827 696e 7472 6f27 2c4e 6f6e 6529  et('intro',None)
+00035c60: 0a20 2020 206c 6f67 6669 6c65 3d6f 7074  .    logfile=opt
+00035c70: 732e 6765 7428 276c 6f67 6669 6c65 272c  s.get('logfile',
+00035c80: 6f70 7473 2e67 6574 2827 6c6f 675f 6669  opts.get('log_fi
+00035c90: 6c65 272c 5b5d 2929 0a20 2020 2069 676e  le',[])).    ign
+00035ca0: 6f72 655f 6d79 7365 6c66 3d6f 7074 732e  ore_myself=opts.
+00035cb0: 6765 7428 2769 676e 6f72 655f 6d79 7365  get('ignore_myse
+00035cc0: 6c66 272c 5472 7565 290a 2020 2020 6465  lf',True).    de
+00035cd0: 6620 6d73 675f 6d61 6b65 7228 2a6d 7367  f msg_maker(*msg
+00035ce0: 2c6d 7367 5f73 706c 6974 3d27 2027 2c69  ,msg_split=' ',i
+00035cf0: 6e74 726f 5f6c 656e 3d30 2c69 6e74 726f  ntro_len=0,intro
+00035d00: 5f6d 7367 3d27 2729 3a0a 2020 2020 2020  _msg=''):.      
+00035d10: 2020 2320 4d61 6b65 2069 6e70 7574 2064    # Make input d
+00035d20: 6174 6120 746f 2061 2073 7472 696e 6720  ata to a string 
+00035d30: 6d73 6720 0a20 2020 2020 2020 206d 7367  msg .        msg
+00035d40: 5f73 7472 3d27 270a 2020 2020 2020 2020  _str=''.        
+00035d50: 5454 3d30 2020 2320 466f 7220 275c 6e27  TT=0  # For '\n'
+00035d60: 206f 7220 275c 6e5c 6e27 202e 2e2e 0a20   or '\n\n' .... 
+00035d70: 2020 2020 2020 2066 6f72 2069 6920 696e         for ii in
+00035d80: 206d 7367 3a0a 2020 2020 2020 2020 2020   msg:.          
+00035d90: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
+00035da0: 6e63 6528 6969 2c73 7472 293a 0a20 2020  nce(ii,str):.   
+00035db0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00035dc0: 696e 7472 6f5f 6c65 6e3a 0a20 2020 2020  intro_len:.     
+00035dd0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00035de0: 3d43 6f6c 6f72 5374 7228 5772 6170 5374  =ColorStr(WrapSt
+00035df0: 7269 6e67 2853 7472 2870 7072 696e 742e  ring(Str(pprint.
+00035e00: 7066 6f72 6d61 7428 6969 292c 6465 6661  pformat(ii),defa
+00035e10: 756c 743d 276f 7267 2729 2c66 7370 6163  ult='org'),fspac
+00035e20: 653d 3020 6966 206e 6f74 206d 7367 5f73  e=0 if not msg_s
+00035e30: 7472 206f 7220 6d73 675f 7370 6c69 7420  tr or msg_split 
+00035e40: 213d 2027 5c6e 2720 6f72 2054 5420 656c  != '\n' or TT el
+00035e50: 7365 2069 6e74 726f 5f6c 656e 2c20 6e73  se intro_len, ns
+00035e60: 7061 6365 3d69 6e74 726f 5f6c 656e 2c6d  pace=intro_len,m
+00035e70: 6f64 653d 2773 7061 6365 2729 2c2a 2a6f  ode='space'),**o
+00035e80: 7074 7329 0a20 2020 2020 2020 2020 2020  pts).           
+00035e90: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00035ea0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00035eb0: 3d43 6f6c 6f72 5374 7228 5374 7228 7070  =ColorStr(Str(pp
+00035ec0: 7269 6e74 2e70 666f 726d 6174 2869 6929  rint.pformat(ii)
+00035ed0: 2c64 6566 6175 6c74 3d27 6f72 6727 292c  ,default='org'),
+00035ee0: 2a2a 6f70 7473 290a 2020 2020 2020 2020  **opts).        
+00035ef0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00035f00: 2020 2020 2020 2020 2020 6966 2027 5c6e            if '\n
+00035f10: 2720 696e 2069 6920 616e 6420 6e6f 7420  ' in ii and not 
+00035f20: 6969 2e72 6570 6c61 6365 2827 5c6e 272c  ii.replace('\n',
+00035f30: 2727 293a 2023 636f 6e76 6572 7420 5c6e  ''): #convert \n
+00035f40: 206f 7220 5c6e 5c6e 202e 2e2e 2e20 746f   or \n\n .... to
+00035f50: 2077 7261 7070 696e 6720 666f 726d 6174   wrapping format
+00035f60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00035f70: 2020 2020 2054 542b 3d31 0a20 2020 2020       TT+=1.     
+00035f80: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00035f90: 693d 6969 2b27 5427 0a20 2020 2020 2020  i=ii+'T'.       
+00035fa0: 2020 2020 2020 2020 2069 6620 696e 7472           if intr
+00035fb0: 6f5f 6c65 6e3a 0a20 2020 2020 2020 2020  o_len:.         
+00035fc0: 2020 2020 2020 2020 2020 2061 3d43 6f6c             a=Col
+00035fd0: 6f72 5374 7228 5772 6170 5374 7269 6e67  orStr(WrapString
+00035fe0: 2853 7472 2869 692c 6465 6661 756c 743d  (Str(ii,default=
+00035ff0: 276f 7267 2729 2c66 7370 6163 653d 3020  'org'),fspace=0 
+00036000: 6966 206e 6f74 206d 7367 5f73 7472 206f  if not msg_str o
+00036010: 7220 6d73 675f 7370 6c69 7420 213d 2027  r msg_split != '
+00036020: 5c6e 2720 6f72 2054 5420 656c 7365 2069  \n' or TT else i
+00036030: 6e74 726f 5f6c 656e 2c20 6e73 7061 6365  ntro_len, nspace
+00036040: 3d69 6e74 726f 5f6c 656e 2c6d 6f64 653d  =intro_len,mode=
+00036050: 2773 7061 6365 2729 2c2a 2a6f 7074 7329  'space'),**opts)
+00036060: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00036070: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00036080: 2020 2020 2020 2020 2020 2061 3d43 6f6c             a=Col
+00036090: 6f72 5374 7228 5374 7228 6969 2c64 6566  orStr(Str(ii,def
+000360a0: 6175 6c74 3d27 6f72 6727 292c 2a2a 6f70  ault='org'),**op
+000360b0: 7473 290a 2020 2020 2020 2020 2020 2020  ts).            
+000360c0: 2020 2020 2352 6563 6f76 6572 2061 6464      #Recover add
+000360d0: 6564 2054 2066 6f72 2077 7261 7070 696e  ed T for wrappin
+000360e0: 6720 666f 726d 6174 2074 6f20 6f72 6967  g format to orig
+000360f0: 696e 616c 0a20 2020 2020 2020 2020 2020  inal.           
+00036100: 2020 2020 2069 6620 5454 2061 6e64 2027       if TT and '
+00036110: 5c6e 2720 696e 2069 6920 616e 6420 6969  \n' in ii and ii
+00036120: 2e72 6570 6c61 6365 2827 5c6e 272c 2727  .replace('\n',''
+00036130: 2920 3d3d 2027 5427 3a20 613d 615b 3a2d  ) == 'T': a=a[:-
+00036140: 315d 0a20 2020 2020 2020 2020 2020 2069  1].            i
+00036150: 6620 6d73 675f 7374 723a 0a20 2020 2020  f msg_str:.     
+00036160: 2020 2020 2020 2020 2020 2069 6620 5454             if TT
+00036170: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00036180: 2020 2020 2020 2369 6620 6d65 7373 6167        #if messag
+00036190: 6520 7370 6c69 7465 7220 6578 6973 7420  e spliter exist 
+000361a0: 616e 6420 6669 7820 746f 2066 6972 7374  and fix to first
+000361b0: 2063 6861 7261 6374 6572 0a20 2020 2020   character.     
+000361c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000361d0: 6620 5454 203d 3d20 3120 616e 6420 6e6f  f TT == 1 and no
+000361e0: 7420 6969 2e72 6570 6c61 6365 2827 5c6e  t ii.replace('\n
+000361f0: 272c 2727 293a 0a20 2020 2020 2020 2020  ',''):.         
+00036200: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00036210: 7367 5f73 7472 3d6d 7367 5f73 7472 202b  sg_str=msg_str +
+00036220: 206d 7367 5f73 706c 6974 202b 2061 0a20   msg_split + a. 
+00036230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036240: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00036250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036260: 206d 7367 5f73 7472 3d6d 7367 5f73 7472   msg_str=msg_str
+00036270: 202b 2061 0a20 2020 2020 2020 2020 2020   + a.           
+00036280: 2020 2020 2020 2020 2069 6620 6969 2e72           if ii.r
+00036290: 6570 6c61 6365 2827 5c6e 272c 2727 293a  eplace('\n',''):
+000362a0: 2054 543d 3020 2320 7265 6d6f 7665 2073   TT=0 # remove s
+000362b0: 7065 6369 616c 2066 6f72 6d61 7420 7461  pecial format ta
+000362c0: 670a 2020 2020 2020 2020 2020 2020 2020  g.              
+000362d0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+000362e0: 2020 2020 2020 2020 2020 2020 6d73 675f              msg_
+000362f0: 7374 723d 6d73 675f 7374 7220 2b20 6d73  str=msg_str + ms
+00036300: 675f 7370 6c69 7420 2b20 610a 2020 2020  g_split + a.    
+00036310: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00036320: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00036330: 2069 6e74 726f 5f6d 7367 3a0a 2020 2020   intro_msg:.    
+00036340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036350: 6d73 675f 7374 723d 696e 7472 6f5f 6d73  msg_str=intro_ms
+00036360: 6720 2b20 6120 0a20 2020 2020 2020 2020  g + a .         
+00036370: 2020 2020 2020 2065 6c69 6620 696e 7472         elif intr
+00036380: 6f5f 6c65 6e3a 0a20 2020 2020 2020 2020  o_len:.         
+00036390: 2020 2020 2020 2020 2020 206d 7367 5f73             msg_s
+000363a0: 7472 3d20 5370 6163 6528 6e75 6d3d 696e  tr= Space(num=in
+000363b0: 7472 6f5f 6c65 6e29 202b 2061 0a20 2020  tro_len) + a.   
+000363c0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+000363d0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+000363e0: 2020 2020 2020 206d 7367 5f73 7472 3d61         msg_str=a
+000363f0: 200a 2020 2020 2020 2020 2020 2020 2320   .            # 
+00036400: 6966 2065 6e64 206f 6620 7468 6520 6c69  if end of the li
+00036410: 6e65 2068 6173 2065 7874 7261 2027 5c6e  ne has extra '\n
+00036420: 2720 7468 656e 2072 6563 6f76 6572 2074  ' then recover t
+00036430: 6865 206c 6f73 7465 6420 275c 6e27 2062  he losted '\n' b
+00036440: 7920 5772 6170 5374 7269 6e67 2829 0a20  y WrapString(). 
+00036450: 2020 2020 2020 2020 2020 2069 6620 6973             if is
+00036460: 696e 7374 616e 6365 2869 692c 7374 7229  instance(ii,str)
+00036470: 2061 6e64 206c 656e 2869 6929 203e 2031   and len(ii) > 1
+00036480: 2061 6e64 2069 695b 2d31 5d20 3d3d 2027   and ii[-1] == '
+00036490: 5c6e 273a 0a20 2020 2020 2020 2020 2020  \n':.           
+000364a0: 2020 2020 206d 7367 5f73 7472 3d6d 7367       msg_str=msg
+000364b0: 5f73 7472 202b 2069 695b 2d31 5d0a 2020  _str + ii[-1].  
+000364c0: 2020 2020 2020 7265 7475 726e 206d 7367        return msg
+000364d0: 5f73 7472 0a0a 2020 2020 2347 6574 204c  _str..    #Get L
+000364e0: 6f67 6669 6c65 2069 6e66 6f72 6d61 7469  ogfile informati
+000364f0: 6f6e 2066 6f72 204f 4c44 2076 6572 7369  on for OLD versi
+00036500: 6f6e 2061 6e64 2072 656d 6f76 6520 7468  on and remove th
+00036510: 6520 4c6f 6766 696c 6520 696e 666f 726d  e Logfile inform
+00036520: 6174 696f 6e20 696e 2074 6865 206d 6573  ation in the mes
+00036530: 7361 6765 730a 2020 2020 6966 2069 7369  sages.    if isi
+00036540: 6e73 7461 6e63 6528 6c6f 6766 696c 652c  nstance(logfile,
+00036550: 7374 7229 3a0a 2020 2020 2020 2020 6c6f  str):.        lo
+00036560: 6766 696c 653d 6c6f 6766 696c 652e 7370  gfile=logfile.sp
+00036570: 6c69 7428 272c 2729 0a20 2020 2065 6c69  lit(',').    eli
+00036580: 6620 6973 696e 7374 616e 6365 286c 6f67  f isinstance(log
+00036590: 6669 6c65 2c74 7570 6c65 293a 0a20 2020  file,tuple):.   
+000365a0: 2020 2020 206c 6f67 6669 6c65 3d6c 6973       logfile=lis
+000365b0: 7428 7475 706c 6529 0a20 2020 2069 6620  t(tuple).    if 
+000365c0: 6e6f 7420 6973 696e 7374 616e 6365 286c  not isinstance(l
+000365d0: 6f67 6669 6c65 2c6c 6973 7429 3a0a 2020  ogfile,list):.  
+000365e0: 2020 2020 2020 6c6f 6766 696c 653d 5b5d        logfile=[]
+000365f0: 0a20 2020 2066 6f72 2069 6920 696e 206d  .    for ii in m
+00036600: 7367 3a0a 2020 2020 2020 2020 6966 2069  sg:.        if i
+00036610: 7369 6e73 7461 6e63 6528 6969 2c73 7472  sinstance(ii,str
+00036620: 2920 616e 6420 273a 2720 696e 2069 693a  ) and ':' in ii:
+00036630: 0a20 2020 2020 2020 2020 2020 206c 6f67  .            log
+00036640: 6669 6c65 5f6c 6973 743d 6969 2e73 706c  file_list=ii.spl
+00036650: 6974 2827 3a27 290a 2020 2020 2020 2020  it(':').        
+00036660: 2020 2020 6966 206c 6f67 6669 6c65 5f6c      if logfile_l
+00036670: 6973 745b 305d 2069 6e20 5b27 6c6f 675f  ist[0] in ['log_
+00036680: 6669 6c65 272c 276c 6f67 6669 6c65 275d  file','logfile']
+00036690: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000366a0: 2020 6966 206c 656e 286c 6f67 6669 6c65    if len(logfile
+000366b0: 5f6c 6973 7429 203e 2032 3a0a 2020 2020  _list) > 2:.    
+000366c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000366d0: 666f 7220 6a6a 2069 6e20 6c6f 6766 696c  for jj in logfil
+000366e0: 655f 6c69 7374 5b31 3a5d 3a0a 2020 2020  e_list[1:]:.    
+000366f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036700: 2020 2020 6c6f 6766 696c 652e 6170 7065      logfile.appe
+00036710: 6e64 286a 6a29 0a20 2020 2020 2020 2020  nd(jj).         
+00036720: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00036730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036740: 206c 6f67 6669 6c65 3d6c 6f67 6669 6c65   logfile=logfile
+00036750: 2b6c 6f67 6669 6c65 5f6c 6973 745b 315d  +logfile_list[1]
+00036760: 2e73 706c 6974 2827 2c27 290a 2020 2020  .split(',').    
+00036770: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00036780: 7369 6e73 7461 6e63 6528 6d73 672c 7475  sinstance(msg,tu
+00036790: 706c 6529 3a0a 2020 2020 2020 2020 2020  ple):.          
+000367a0: 2020 2020 2020 2020 2020 6d73 673d 6c69            msg=li
+000367b0: 7374 286d 7367 290a 2020 2020 2020 2020  st(msg).        
+000367c0: 2020 2020 2020 2020 2020 2020 6d73 672e              msg.
+000367d0: 7265 6d6f 7665 2869 6929 0a20 2020 2020  remove(ii).     
+000367e0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+000367f0: 7367 3d74 7570 6c65 286d 7367 290a 2020  sg=tuple(msg).  
+00036800: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00036810: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00036820: 2020 2020 2020 2020 6d73 672e 7265 6d6f          msg.remo
+00036830: 7665 2869 6929 0a20 2020 200a 2020 2020  ve(ii).    .    
+00036840: 2320 7361 7665 206d 7367 2872 656d 6f76  # save msg(remov
+00036850: 6564 206c 6f67 5f66 696c 6520 696e 666f  ed log_file info
+00036860: 726d 6174 696f 6e29 2074 6f20 7379 736c  rmation) to sysl
+00036870: 6f67 6420 0a20 2020 2069 6620 7379 736c  ogd .    if sysl
+00036880: 6f67 643a 0a20 2020 2020 2020 2023 204d  ogd:.        # M
+00036890: 616b 6520 6120 6d65 7373 6167 6520 746f  ake a message to
+000368a0: 2073 696e 676c 6520 6c69 6e65 0a20 2020   single line.   
+000368b0: 2020 2020 2074 6d70 5f73 7472 3d6d 7367       tmp_str=msg
+000368c0: 5f6d 616b 6572 282a 6d73 672c 6d73 675f  _maker(*msg,msg_
+000368d0: 7370 6c69 743d 6d73 675f 7370 6c69 7429  split=msg_split)
+000368e0: 0a20 2020 2020 2020 2069 6620 7379 736c  .        if sysl
+000368f0: 6f67 6420 696e 205b 2749 4e46 4f27 2c27  ogd in ['INFO','
+00036900: 696e 666f 275d 3a0a 2020 2020 2020 2020  info']:.        
+00036910: 2020 2020 7379 736c 6f67 2e73 7973 6c6f      syslog.syslo
+00036920: 6728 7379 736c 6f67 2e4c 4f47 5f49 4e46  g(syslog.LOG_INF
+00036930: 4f2c 746d 705f 7374 7229 0a20 2020 2020  O,tmp_str).     
+00036940: 2020 2065 6c69 6620 7379 736c 6f67 6420     elif syslogd 
+00036950: 696e 205b 274b 4552 4e27 2c27 6b65 726e  in ['KERN','kern
+00036960: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+00036970: 7379 736c 6f67 2e73 7973 6c6f 6728 7379  syslog.syslog(sy
+00036980: 736c 6f67 2e4c 4f47 5f4b 4552 4e2c 746d  slog.LOG_KERN,tm
+00036990: 705f 7374 7229 0a20 2020 2020 2020 2065  p_str).        e
+000369a0: 6c69 6620 7379 736c 6f67 6420 696e 205b  lif syslogd in [
+000369b0: 2745 5252 272c 2765 7272 275d 3a0a 2020  'ERR','err']:.  
+000369c0: 2020 2020 2020 2020 2020 7379 736c 6f67            syslog
+000369d0: 2e73 7973 6c6f 6728 7379 736c 6f67 2e4c  .syslog(syslog.L
+000369e0: 4f47 5f45 5252 2c74 6d70 5f73 7472 290a  OG_ERR,tmp_str).
+000369f0: 2020 2020 2020 2020 656c 6966 2073 7973          elif sys
+00036a00: 6c6f 6764 2069 6e20 5b27 4352 4954 272c  logd in ['CRIT',
+00036a10: 2763 7269 7427 5d3a 0a20 2020 2020 2020  'crit']:.       
+00036a20: 2020 2020 2073 7973 6c6f 672e 7379 736c       syslog.sysl
+00036a30: 6f67 2873 7973 6c6f 672e 4c4f 475f 4352  og(syslog.LOG_CR
+00036a40: 4954 2c74 6d70 5f73 7472 290a 2020 2020  IT,tmp_str).    
+00036a50: 2020 2020 656c 6966 2073 7973 6c6f 6764      elif syslogd
+00036a60: 2069 6e20 5b27 5741 524e 272c 2777 6172   in ['WARN','war
+00036a70: 6e27 5d3a 0a20 2020 2020 2020 2020 2020  n']:.           
+00036a80: 2073 7973 6c6f 672e 7379 736c 6f67 2873   syslog.syslog(s
+00036a90: 7973 6c6f 672e 4c4f 475f 5741 524e 494e  yslog.LOG_WARNIN
+00036aa0: 472c 746d 705f 7374 7229 0a20 2020 2020  G,tmp_str).     
+00036ab0: 2020 2065 6c69 6620 7379 736c 6f67 6420     elif syslogd 
+00036ac0: 696e 205b 2744 4247 272c 2744 4542 5547  in ['DBG','DEBUG
+00036ad0: 272c 2764 6267 272c 2764 6562 7567 275d  ','dbg','debug']
+00036ae0: 3a0a 2020 2020 2020 2020 2020 2020 7379  :.            sy
+00036af0: 736c 6f67 2e73 7973 6c6f 6728 7379 736c  slog.syslog(sysl
+00036b00: 6f67 2e4c 4f47 5f44 4542 5547 2c74 6d70  og.LOG_DEBUG,tmp
+00036b10: 5f73 7472 290a 2020 2020 2020 2020 656c  _str).        el
+00036b20: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00036b30: 7379 736c 6f67 2e73 7973 6c6f 6728 746d  syslog.syslog(tm
+00036b40: 705f 7374 7229 0a0a 2020 2020 2357 6865  p_str)..    #Whe
+00036b50: 6e20 6861 7669 6e67 204c 6f67 2066 756e  n having Log fun
+00036b60: 6374 696f 6e20 7468 656e 2067 6976 6520  ction then give 
+00036b70: 7468 6520 6461 7461 2074 6f20 6c6f 6720  the data to log 
+00036b80: 6675 6e63 7469 6f6e 0a20 2020 206c 6f67  function.    log
+00036b90: 5f70 3d46 616c 7365 0a20 2020 2069 6620  _p=False.    if 
+00036ba0: 4973 4675 6e63 7469 6f6e 286c 6f67 293a  IsFunction(log):
+00036bb0: 2023 204c 6f67 2066 756e 6374 696f 6e28   # Log function(
+00036bc0: 2064 6562 7567 206d 6f64 6520 6c6f 6720   debug mode log 
+00036bd0: 6675 6e63 7469 6f6e 2074 6f6f 2029 0a20  function too ). 
+00036be0: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
+00036bf0: 2020 2020 2020 2020 6966 2028 2764 2720          if ('d' 
+00036c00: 696e 2064 7370 206f 7220 2766 2720 696e  in dsp or 'f' in
+00036c10: 2064 7370 2920 616e 6420 6c6f 6766 696c   dsp) and logfil
+00036c20: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00036c30: 2020 2069 6620 2763 616c 6c65 725f 7061     if 'caller_pa
+00036c40: 7265 6e74 2720 696e 206f 7074 733a 0a20  rent' in opts:. 
+00036c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036c60: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00036c70: 286f 7074 735b 2763 616c 6c65 725f 7061  (opts['caller_pa
+00036c80: 7265 6e74 275d 2c69 6e74 293a 0a20 2020  rent'],int):.   
+00036c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036ca0: 2020 2020 206f 7074 735b 2763 616c 6c65       opts['calle
+00036cb0: 725f 7061 7265 6e74 275d 3d6f 7074 735b  r_parent']=opts[
+00036cc0: 2763 616c 6c65 725f 7061 7265 6e74 275d  'caller_parent']
+00036cd0: 2b31 0a20 2020 2020 2020 2020 2020 2020  +1.             
+00036ce0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
 00036cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00036d00: 2020 2020 206f 7074 735b 2763 616c 6c65       opts['calle
-00036d10: 725f 7061 7265 6e74 275d 3d6f 7074 735b  r_parent']=opts[
-00036d20: 2763 616c 6c65 725f 7061 7265 6e74 275d  'caller_parent']
-00036d30: 2b31 0a20 2020 2020 2020 2020 2020 2020  +1.             
-00036d40: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00036d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00036d60: 2020 2020 206f 7074 735b 2763 616c 6c65       opts['calle
-00036d70: 725f 7061 7265 6e74 275d 3d32 0a20 2020  r_parent']=2.   
-00036d80: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00036d90: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00036da0: 2020 2020 2020 206f 7074 735b 2763 616c         opts['cal
-00036db0: 6c65 725f 7061 7265 6e74 275d 3d32 0a20  ler_parent']=2. 
-00036dc0: 2020 2020 2020 2020 2020 2046 6565 6446             FeedF
-00036dd0: 756e 6328 6c6f 672c 2a6d 7367 2c2a 2a6f  unc(log,*msg,**o
-00036de0: 7074 7329 0a20 2020 2020 2020 2020 2020  pts).           
-00036df0: 2023 2049 6620 6c6f 6720 6675 6e63 7469   # If log functi
-00036e00: 6f6e 2074 616b 6520 6f76 6572 2074 6865  on take over the
-00036e10: 206c 6f67 2074 6865 6e20 6e6f 206d 6f72   log then no mor
-00036e20: 6520 7072 696e 7420 746f 206f 7468 6572  e print to other
-00036e30: 730a 2020 2020 2020 2020 2020 2020 7265  s.            re
-00036e40: 7475 726e 0a20 2020 2020 2020 2065 7863  turn.        exc
-00036e50: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
-00036e60: 2070 6173 730a 0a20 2020 2023 204d 616b   pass..    # Mak
-00036e70: 6520 6120 496e 7472 6f0a 2020 2020 696e  e a Intro.    in
-00036e80: 7472 6f5f 6c65 6e3d 300a 2020 2020 696e  tro_len=0.    in
-00036e90: 7472 6f5f 6d73 673d 2727 0a20 2020 2069  tro_msg=''.    i
-00036ea0: 6620 6e6f 7420 6469 7265 6374 2061 6e64  f not direct and
-00036eb0: 206e 6f74 206e 6f5f 696e 7472 6f3a 0a20   not no_intro:. 
-00036ec0: 2020 2020 2020 2069 6e74 726f 5f6d 7367         intro_msg
-00036ed0: 3d27 7b30 7d20 272e 666f 726d 6174 2854  ='{0} '.format(T
-00036ee0: 494d 4528 292e 4e6f 7728 292e 7374 7266  IME().Now().strf
-00036ef0: 7469 6d65 2864 6174 655f 666f 726d 6174  time(date_format
-00036f00: 2929 2069 6620 6461 7465 5f66 6f72 6d61  )) if date_forma
-00036f10: 7420 616e 6420 6e6f 7420 7379 736c 6f67  t and not syslog
-00036f20: 6420 656c 7365 2027 270a 2020 2020 2020  d else ''.      
-00036f30: 2020 696e 7472 6f5f 6c65 6e3d 6c65 6e28    intro_len=len(
-00036f40: 696e 7472 6f5f 6d73 6729 0a20 2020 2020  intro_msg).     
-00036f50: 2020 2069 6620 6361 6c6c 6572 5f64 6574     if caller_det
-00036f60: 6169 6c20 6f72 2063 616c 6c65 725f 7472  ail or caller_tr
-00036f70: 6565 206f 7220 6361 6c6c 6572 5f68 6973  ee or caller_his
-00036f80: 746f 7279 206f 7220 6361 6c6c 6572 5f69  tory or caller_i
-00036f90: 676e 6f72 653a 0a20 2020 2020 2020 2020  gnore:.         
-00036fa0: 2020 2069 6620 6967 6e6f 7265 5f6d 7973     if ignore_mys
-00036fb0: 656c 663a 0a20 2020 2020 2020 2020 2020  elf:.           
-00036fc0: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
-00036fd0: 7374 616e 6365 2863 616c 6c65 725f 6967  stance(caller_ig
-00036fe0: 6e6f 7265 2c6c 6973 7429 3a20 6361 6c6c  nore,list): call
-00036ff0: 6572 5f69 676e 6f72 653d 5b5d 0a20 2020  er_ignore=[].   
-00037000: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00037010: 2746 6565 6446 756e 6327 206e 6f74 2069  'FeedFunc' not i
-00037020: 6e20 6361 6c6c 6572 5f69 676e 6f72 653a  n caller_ignore:
-00037030: 2063 616c 6c65 725f 6967 6e6f 7265 2e61   caller_ignore.a
-00037040: 7070 656e 6428 2746 6565 6446 756e 6327  ppend('FeedFunc'
-00037050: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00037060: 2020 6966 2027 7072 696e 7466 2720 6e6f    if 'printf' no
-00037070: 7420 696e 2063 616c 6c65 725f 6967 6e6f  t in caller_igno
-00037080: 7265 3a20 6361 6c6c 6572 5f69 676e 6f72  re: caller_ignor
-00037090: 652e 6170 7065 6e64 2827 7072 696e 7466  e.append('printf
-000370a0: 2729 0a20 2020 2020 2020 2069 6620 6361  ').        if ca
-000370b0: 6c6c 6572 5f69 676e 6f72 6520 616e 6420  ller_ignore and 
-000370c0: 6973 696e 7374 616e 6365 2863 616c 6c65  isinstance(calle
-000370d0: 725f 6967 6e6f 7265 2c6c 6973 7429 3a0a  r_ignore,list):.
-000370e0: 2020 2020 2020 2020 2020 2020 6172 673d              arg=
-000370f0: 7b27 7061 7265 6e74 273a 7061 7265 6e74  {'parent':parent
-00037100: 5f6e 2c27 6172 6773 273a 4661 6c73 652c  _n,'args':False,
-00037110: 2768 6973 746f 7279 273a 5472 7565 2c27  'history':True,'
-00037120: 7472 6565 273a 4661 6c73 657d 0a20 2020  tree':False}.   
-00037130: 2020 2020 2020 2020 2063 616c 6c5f 6e61           call_na
-00037140: 6d65 3d46 756e 6374 696f 6e4e 616d 6528  me=FunctionName(
-00037150: 2a2a 6172 6729 0a20 2020 2020 2020 2020  **arg).         
-00037160: 2020 206e 6577 5f70 3d30 0a20 2020 2020     new_p=0.     
-00037170: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-00037180: 7261 6e67 6528 6c65 6e28 6361 6c6c 5f6e  range(len(call_n
-00037190: 616d 6529 2d31 2c30 2c2d 3129 3a0a 2020  ame)-1,0,-1):.  
-000371a0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000371b0: 2063 616c 6c5f 6e61 6d65 5b69 5d5b 305d   call_name[i][0]
-000371c0: 2069 6e20 6361 6c6c 6572 5f69 676e 6f72   in caller_ignor
-000371d0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-000371e0: 2020 2020 2020 206e 6577 5f70 2b3d 310a         new_p+=1.
-000371f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037200: 2020 2020 636f 6e74 696e 7565 0a20 2020      continue.   
-00037210: 2020 2020 2020 2020 2020 2020 2062 7265               bre
-00037220: 616b 0a20 2020 2020 2020 2020 2020 2069  ak.            i
-00037230: 6620 6973 696e 7374 616e 6365 2870 6172  f isinstance(par
-00037240: 656e 745f 6e2c 7374 7229 3a0a 2020 2020  ent_n,str):.    
-00037250: 2020 2020 2020 2020 2020 2020 7061 7265              pare
-00037260: 6e74 5f6e 5f61 3d70 6172 656e 745f 6e2e  nt_n_a=parent_n.
-00037270: 7370 6c69 7428 272d 2729 0a20 2020 2020  split('-').     
-00037280: 2020 2020 2020 2020 2020 2069 6620 7061             if pa
-00037290: 7265 6e74 5f6e 5f61 5b30 5d3a 0a20 2020  rent_n_a[0]:.   
-000372a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000372b0: 2070 6172 656e 745f 6e5f 615b 305d 3d27   parent_n_a[0]='
-000372c0: 7b7d 272e 666f 726d 6174 2869 6e74 2870  {}'.format(int(p
-000372d0: 6172 656e 745f 6e5f 615b 305d 292b 6e65  arent_n_a[0])+ne
-000372e0: 775f 7029 0a20 2020 2020 2020 2020 2020  w_p).           
-000372f0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00037300: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00037310: 6172 656e 745f 6e5f 615b 305d 3d27 7b7d  arent_n_a[0]='{}
-00037320: 272e 666f 726d 6174 286e 6577 5f70 290a  '.format(new_p).
-00037330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037340: 6966 206c 656e 2870 6172 656e 745f 6e5f  if len(parent_n_
-00037350: 6129 203d 3d20 3220 616e 6420 7061 7265  a) == 2 and pare
-00037360: 6e74 5f6e 5f61 5b31 5d3a 0a20 2020 2020  nt_n_a[1]:.     
-00037370: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00037380: 6172 656e 745f 6e5f 615b 315d 3d27 7b7d  arent_n_a[1]='{}
-00037390: 272e 666f 726d 6174 2869 6e74 2870 6172  '.format(int(par
-000373a0: 656e 745f 6e5f 615b 315d 292b 6e65 775f  ent_n_a[1])+new_
-000373b0: 7029 0a20 2020 2020 2020 2020 2020 2020  p).             
-000373c0: 2020 2070 6172 656e 745f 6e3d 272d 272e     parent_n='-'.
-000373d0: 6a6f 696e 2870 6172 656e 745f 6e5f 6129  join(parent_n_a)
-000373e0: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-000373f0: 6620 6973 696e 7374 616e 6365 2870 6172  f isinstance(par
-00037400: 656e 745f 6e2c 696e 7429 3a0a 2020 2020  ent_n,int):.    
-00037410: 2020 2020 2020 2020 2020 2020 7061 7265              pare
-00037420: 6e74 5f6e 3d70 6172 656e 745f 6e2b 6e65  nt_n=parent_n+ne
-00037430: 775f 700a 2020 2020 2020 2020 6966 2063  w_p.        if c
-00037440: 616c 6c65 725f 6e61 6d65 206f 7220 6361  aller_name or ca
-00037450: 6c6c 6572 5f69 676e 6f72 653a 0a20 2020  ller_ignore:.   
-00037460: 2020 2020 2020 2020 2061 7267 3d7b 2770           arg={'p
-00037470: 6172 656e 7427 3a70 6172 656e 745f 6e7d  arent':parent_n}
-00037480: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00037490: 6361 6c6c 6572 5f64 6574 6169 6c3a 0a20  caller_detail:. 
-000374a0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-000374b0: 7267 2e75 7064 6174 6528 7b27 6c69 6e65  rg.update({'line
-000374c0: 5f6e 756d 6265 7227 3a54 7275 652c 2766  _number':True,'f
-000374d0: 756c 6c5f 6669 6c65 6e61 6d65 273a 6361  ull_filename':ca
-000374e0: 6c6c 6572 5f66 756c 6c5f 6669 6c65 6e61  ller_full_filena
-000374f0: 6d65 2c27 6669 6c65 6e61 6d65 273a 5472  me,'filename':Tr
-00037500: 7565 2c27 6172 6773 273a 5472 7565 7d29  ue,'args':True})
-00037510: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00037520: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00037530: 2020 2061 7267 5b27 6c69 6e65 5f6e 756d     arg['line_num
-00037540: 6265 7227 5d3d 6361 6c6c 6572 5f6c 696e  ber']=caller_lin
-00037550: 655f 6e75 6d62 6572 0a20 2020 2020 2020  e_number.       
-00037560: 2020 2020 2020 2020 2061 7267 5b27 6675           arg['fu
-00037570: 6c6c 5f66 696c 656e 616d 6527 5d3d 6361  ll_filename']=ca
-00037580: 6c6c 6572 5f66 756c 6c5f 6669 6c65 6e61  ller_full_filena
-00037590: 6d65 0a20 2020 2020 2020 2020 2020 2020  me.             
-000375a0: 2020 2061 7267 5b27 6172 6773 275d 3d63     arg['args']=c
-000375b0: 616c 6c65 725f 6172 6773 0a20 2020 2020  aller_args.     
-000375c0: 2020 2020 2020 2020 2020 2061 7267 5b27             arg['
-000375d0: 6669 6c65 6e61 6d65 275d 3d63 616c 6c65  filename']=calle
-000375e0: 725f 6669 6c65 6e61 6d65 0a20 2020 2020  r_filename.     
-000375f0: 2020 2020 2020 2069 6620 6361 6c6c 6572         if caller
-00037600: 5f74 7265 653a 0a20 2020 2020 2020 2020  _tree:.         
-00037610: 2020 2020 2020 2061 7267 2e75 7064 6174         arg.updat
-00037620: 6528 7b27 6869 7374 6f72 7927 3a54 7275  e({'history':Tru
-00037630: 652c 2774 7265 6527 3a54 7275 657d 290a  e,'tree':True}).
-00037640: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00037650: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00037660: 2020 6172 675b 2768 6973 746f 7279 275d    arg['history']
-00037670: 3d63 616c 6c65 725f 6869 7374 6f72 790a  =caller_history.
-00037680: 2020 2020 2020 2020 2020 2020 6361 6c6c              call
-00037690: 5f6e 616d 653d 4675 6e63 7469 6f6e 4e61  _name=FunctionNa
-000376a0: 6d65 282a 2a61 7267 290a 2020 2020 2020  me(**arg).      
-000376b0: 2020 2020 2020 6966 2063 616c 6c5f 6e61        if call_na
-000376c0: 6d65 3a0a 2020 2020 2020 2020 2020 2020  me:.            
-000376d0: 2020 2020 2320 6966 206c 696e 655f 6e75      # if line_nu
-000376e0: 6d62 6572 2061 6e64 2066 696c 656e 616d  mber and filenam
-000376f0: 6520 7468 656e 2070 7269 6e74 206c 6f67  e then print log
-00037700: 6769 6e67 2061 7420 6e65 7874 206c 696e  ging at next lin
-00037710: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00037720: 2020 2320 6966 2064 6174 655f 666f 726d    # if date_form
-00037730: 6174 2074 6865 6e20 6c6f 6767 696e 6727  at then logging'
-00037740: 7320 696e 7472 6f20 6c65 6e67 7468 2077  s intro length w
-00037750: 696c 6c20 6265 2064 6174 6520 666f 726d  ill be date form
-00037760: 6174 0a20 2020 2020 2020 2020 2020 2020  at.             
-00037770: 2020 2023 2069 6620 6e6f 7420 6461 7465     # if not date
-00037780: 5f66 6f72 6d61 7420 7468 656e 206c 6f67  _format then log
-00037790: 6769 6e27 7320 696e 7472 6f20 6c65 6e67  gin's intro leng
-000377a0: 7468 2077 696c 6c20 6265 2073 7465 7070  th will be stepp
-000377b0: 696e 6720 6c65 6e67 7468 0a20 2020 2020  ing length.     
-000377c0: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-000377d0: 696e 7374 616e 6365 2863 616c 6c5f 6e61  instance(call_na
-000377e0: 6d65 2c73 7472 293a 2063 616c 6c5f 6e61  me,str): call_na
-000377f0: 6d65 3d5b 6361 6c6c 5f6e 616d 655d 0a20  me=[call_name]. 
-00037800: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00037810: 6620 6361 6c6c 6572 5f74 7265 6520 6f72  f caller_tree or
-00037820: 2063 616c 6c65 725f 6869 7374 6f72 793a   caller_history:
-00037830: 2063 616c 6c5f 6e61 6d65 3d63 616c 6c5f   call_name=call_
-00037840: 6e61 6d65 2b5b 2727 5d20 6966 2064 6174  name+[''] if dat
-00037850: 655f 666f 726d 6174 2065 6c73 6520 6361  e_format else ca
-00037860: 6c6c 5f6e 616d 652b 5b27 2027 5d0a 2020  ll_name+[' '].  
-00037870: 2020 2020 2020 2020 2020 2020 2020 696e                in
-00037880: 7472 6f5f 6d73 673d 696e 7472 6f5f 6d73  tro_msg=intro_ms
-00037890: 672b 5772 6170 5374 7269 6e67 284a 6f69  g+WrapString(Joi
-000378a0: 6e28 6361 6c6c 5f6e 616d 652c 275c 6e27  n(call_name,'\n'
-000378b0: 292c 6673 7061 6365 3d30 2c20 6e73 7061  ),fspace=0, nspa
-000378c0: 6365 3d6c 656e 2869 6e74 726f 5f6d 7367  ce=len(intro_msg
-000378d0: 292c 6d6f 6465 3d27 7370 6163 6527 2c69  ),mode='space',i
-000378e0: 676e 6f72 655f 656d 7074 795f 656e 646c  gnore_empty_endl
-000378f0: 696e 653d 4661 6c73 6529 202b 2027 3a20  ine=False) + ': 
-00037900: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
-00037910: 2020 696e 7472 6f5f 6c65 6e3d 696e 7472    intro_len=intr
-00037920: 6f5f 6c65 6e2b 6c65 6e28 6361 6c6c 5f6e  o_len+len(call_n
-00037930: 616d 655b 2d31 5d29 2b32 0a20 2020 2020  ame[-1])+2.     
-00037940: 2020 2069 6620 5479 7065 2869 6e74 726f     if Type(intro
-00037950: 2c27 7374 7227 2920 616e 6420 696e 7472  ,'str') and intr
-00037960: 6f3a 0a20 2020 2020 2020 2020 2020 2069  o:.            i
-00037970: 6e74 726f 5f6d 7367 3d69 6e74 726f 5f6d  ntro_msg=intro_m
-00037980: 7367 2b69 6e74 726f 2b27 3a20 270a 2020  sg+intro+': '.  
-00037990: 2020 2020 2020 2020 2020 696e 7472 6f5f            intro_
-000379a0: 6c65 6e3d 696e 7472 6f5f 6c65 6e2b 6c65  len=intro_len+le
-000379b0: 6e28 696e 7472 6f29 2b32 0a0a 2020 2020  n(intro)+2..    
-000379c0: 2320 4d61 6b65 2069 6e70 7574 2064 6174  # Make input dat
-000379d0: 6120 746f 2061 2073 7472 696e 6720 6d73  a to a string ms
-000379e0: 6720 0a20 2020 2069 6620 7374 6172 745f  g .    if start_
-000379f0: 6e65 776c 696e 653a 0a20 2020 2020 2020  newline:.       
-00037a00: 2069 6620 6c65 6e28 6d73 6729 2061 6e64   if len(msg) and
-00037a10: 2069 7369 6e73 7461 6e63 6528 6d73 675b   isinstance(msg[
-00037a20: 305d 2c73 7472 2920 616e 6420 6c65 6e28  0],str) and len(
-00037a30: 6d73 675b 305d 2920 616e 6420 6d73 675b  msg[0]) and msg[
-00037a40: 305d 5b30 5d20 3d3d 2027 5c6e 273a 206d  0][0] == '\n': m
-00037a50: 7367 5b30 5d3d 6d73 675b 305d 5b31 3a5d  sg[0]=msg[0][1:]
-00037a60: 0a20 2020 2020 2020 2069 6620 7374 6172  .        if star
-00037a70: 745f 6e65 776c 696e 6520 3d3d 2027 6175  t_newline == 'au
-00037a80: 746f 273a 0a20 2020 2020 2020 2020 2020  to':.           
-00037a90: 2069 6620 7072 696e 7466 5f6e 6577 6c69   if printf_newli
-00037aa0: 6e65 5f69 6e66 6f2e 4765 7428 6473 7029  ne_info.Get(dsp)
-00037ab0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00037ac0: 2020 7374 6172 745f 6e65 776c 696e 653d    start_newline=
-00037ad0: 275c 6e27 0a20 2020 2020 2020 2020 2020  '\n'.           
-00037ae0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00037af0: 2020 2020 2020 2073 7461 7274 5f6e 6577         start_new
-00037b00: 6c69 6e65 3d27 270a 2020 2020 6d73 675f  line=''.    msg_
-00037b10: 7374 723d 6d73 675f 6d61 6b65 7228 2a6d  str=msg_maker(*m
-00037b20: 7367 2c6d 7367 5f73 706c 6974 3d6d 7367  sg,msg_split=msg
-00037b30: 5f73 706c 6974 2c69 6e74 726f 5f6c 656e  _split,intro_len
-00037b40: 3d69 6e74 726f 5f6c 656e 2c69 6e74 726f  =intro_len,intro
-00037b50: 5f6d 7367 3d27 2720 6966 206e 6f5f 696e  _msg='' if no_in
-00037b60: 7472 6f20 6973 204e 6f6e 6520 656c 7365  tro is None else
-00037b70: 2069 6e74 726f 5f6d 7367 290a 2320 444f   intro_msg).# DO
-00037b80: 6e27 7420 6e65 6564 2062 656c 6f77 2063  n't need below c
-00037b90: 6f64 650a 2320 2020 2069 6620 6e65 775f  ode.#    if new_
-00037ba0: 6c69 6e65 3a0a 2320 2020 2020 2020 2069  line:.#        i
-00037bb0: 6620 6d73 675f 7374 7220 616e 6420 6d73  f msg_str and ms
-00037bc0: 675f 7374 725b 2d31 5d20 3d3d 2027 5c6e  g_str[-1] == '\n
-00037bd0: 273a 206d 7367 5f73 7472 3d6d 7367 5f73  ': msg_str=msg_s
-00037be0: 7472 5b3a 2d31 5d0a 0a20 2020 2023 2320  tr[:-1]..    ## 
-00037bf0: 6966 2065 6e64 206f 6620 6c69 6e65 2068  if end of line h
-00037c00: 6176 6520 6e6f 206e 6577 6c69 6e65 2c20  ave no newline, 
-00037c10: 6275 7420 6974 2068 6173 2069 6e74 726f  but it has intro
-00037c20: 2074 6865 6e20 6164 6469 6e67 2073 7461   then adding sta
-00037c30: 7274 5f6e 6577 6c69 6e65 0a20 2020 2023  rt_newline.    #
-00037c40: 6966 2069 6e74 726f 5f6d 7367 2061 6e64  if intro_msg and
-00037c50: 206e 6f74 206e 6f5f 7374 6172 745f 6e65   not no_start_ne
-00037c60: 776c 696e 653a 0a20 2020 2023 2020 2020  wline:.    #    
-00037c70: 6966 2070 7269 6e74 665f 6e65 776c 696e  if printf_newlin
-00037c80: 655f 696e 666f 2e47 6574 2864 7370 293a  e_info.Get(dsp):
-00037c90: 200a 2020 2020 2320 2020 2020 2020 2073   .    #        s
-00037ca0: 7461 7274 5f6e 6577 6c69 6e65 3d27 5c6e  tart_newline='\n
-00037cb0: 270a 0a20 2020 2023 4442 4720 4d4f 4445  '..    #DBG MODE
-00037cc0: 2066 6f72 2070 7269 6e74 696e 670a 2020   for printing.  
-00037cd0: 2020 7363 725f 6462 675f 7072 696e 743d    scr_dbg_print=
-00037ce0: 4661 6c73 650a 2020 2020 6966 2073 6372  False.    if scr
-00037cf0: 5f64 6267 2069 7320 5472 7565 3a0a 2020  _dbg is True:.  
-00037d00: 2020 2020 2020 6966 2073 6372 5f64 6267        if scr_dbg
-00037d10: 5f63 6f6e 6469 7469 6f6e 2069 7320 4e6f  _condition is No
-00037d20: 6e65 206f 7220 6d73 675f 7374 7220 3d3d  ne or msg_str ==
-00037d30: 2073 6372 5f64 6267 5f63 6f6e 6469 7469   scr_dbg_conditi
-00037d40: 6f6e 3a0a 2020 2020 2020 2020 2020 2020  on:.            
-00037d50: 7363 725f 6462 675f 7072 696e 743d 5472  scr_dbg_print=Tr
-00037d60: 7565 0a20 2020 2020 2020 2020 2020 2061  ue.            a
-00037d70: 7267 3d7b 2770 6172 656e 7427 3a27 312d  rg={'parent':'1-
-00037d80: 3927 2c27 6c69 6e65 5f6e 756d 6265 7227  9','line_number'
-00037d90: 3a54 7275 652c 2766 696c 656e 616d 6527  :True,'filename'
-00037da0: 3a54 7275 652c 2761 7267 7327 3a46 616c  :True,'args':Fal
-00037db0: 7365 2c27 6869 7374 6f72 7927 3a54 7275  se,'history':Tru
-00037dc0: 652c 2774 7265 6527 3a54 7275 657d 0a20  e,'tree':True}. 
-00037dd0: 2020 2020 2020 2020 2020 2063 616c 6c5f             call_
-00037de0: 6e61 6d65 3d46 756e 6374 696f 6e4e 616d  name=FunctionNam
-00037df0: 6528 2a2a 6172 6729 0a20 2020 2020 2020  e(**arg).       
-00037e00: 2020 2020 2070 7269 6e74 2827 2d2d 2d2d       print('----
-00037e10: 2d2d 2d2d 2d2d 2d2d 2d46 554e 4354 494f  ---------FUNCTIO
-00037e20: 4e2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  N---------------
-00037e30: 2d2d 2d2d 2d27 290a 2020 2020 2020 2020  -----').        
-00037e40: 2020 2020 7072 696e 7428 4a6f 696e 2863      print(Join(c
-00037e50: 616c 6c5f 6e61 6d65 2c27 5c6e 2729 290a  all_name,'\n')).
-00037e60: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00037e70: 7428 272d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  t('-------------
-00037e80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00037e90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2729 0a20  ------------'). 
-00037ea0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00037eb0: 2827 6c6f 6720 2020 2020 2020 2020 2020  ('log           
-00037ec0: 2020 2020 2020 2020 3a7b 7d20 2866 756e          :{} (fun
-00037ed0: 6374 696f 6e3a 7b7d 3a7b 7d29 272e 666f  ction:{}:{})'.fo
-00037ee0: 726d 6174 286c 6f67 2c49 7346 756e 6374  rmat(log,IsFunct
-00037ef0: 696f 6e28 6c6f 6729 2c6f 7074 7329 290a  ion(log),opts)).
-00037f00: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00037f10: 7428 276c 6f67 6669 6c65 2020 2020 2020  t('logfile      
-00037f20: 2020 2020 2020 2020 203a 7b7d 272e 666f           :{}'.fo
-00037f30: 726d 6174 286c 6f67 6669 6c65 2929 0a20  rmat(logfile)). 
-00037f40: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00037f50: 2827 6e65 776c 696e 6520 696e 666f 2020  ('newline info  
-00037f60: 2020 2020 2020 2020 3a7b 7d27 2e66 6f72          :{}'.for
-00037f70: 6d61 7428 7072 696e 7466 5f6e 6577 6c69  mat(printf_newli
-00037f80: 6e65 5f69 6e66 6f2e 6461 7461 2929 0a20  ne_info.data)). 
-00037f90: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00037fa0: 2827 666f 7263 6520 6e6f 2073 7461 7274  ('force no start
-00037fb0: 206e 6577 6c69 6e65 3a7b 7d27 2e66 6f72   newline:{}'.for
-00037fc0: 6d61 7428 6e6f 5f73 7461 7274 5f6e 6577  mat(no_start_new
-00037fd0: 6c69 6e65 2929 0a20 2020 2020 2020 2020  line)).         
-00037fe0: 2020 2070 7269 6e74 2827 6e65 776c 696e     print('newlin
-00037ff0: 6520 2020 2020 2020 2020 2020 2020 2020  e               
-00038000: 3a28 6469 7265 6374 3a7b 7d2c 7374 6172  :(direct:{},star
-00038010: 743a 7b7d 2c65 6e64 3a7b 7d29 272e 666f  t:{},end:{})'.fo
-00038020: 726d 6174 2864 6972 6563 742c 5472 7565  rmat(direct,True
-00038030: 2069 6620 7374 6172 745f 6e65 776c 696e   if start_newlin
-00038040: 6520 656c 7365 2046 616c 7365 2c54 7275  e else False,Tru
-00038050: 6520 6966 206e 6577 5f6c 696e 6520 656c  e if new_line el
-00038060: 7365 2046 616c 7365 2929 0a20 2020 2020  se False)).     
-00038070: 2020 2020 2020 2070 7269 6e74 2827 6967         print('ig
-00038080: 6e6f 7265 5f65 6d70 7479 2020 2020 2020  nore_empty      
-00038090: 2020 2020 3a7b 7d27 2e66 6f72 6d61 7428      :{}'.format(
-000380a0: 6967 6e6f 7265 5f65 6d70 7479 2929 0a20  ignore_empty)). 
-000380b0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-000380c0: 2827 6d65 7373 6167 6520 2020 2020 2020  ('message       
-000380d0: 2020 2020 2020 2020 3a5b 7b7d 5d27 2e66          :[{}]'.f
-000380e0: 6f72 6d61 7428 6d73 6729 290a 2020 2020  ormat(msg)).    
-000380f0: 2020 2020 2020 2020 7072 696e 7428 2769          print('i
-00038100: 6e74 726f 2020 2020 2020 2020 2020 2020  ntro            
-00038110: 2020 2020 203a 5b7b 7d5d 272e 666f 726d       :[{}]'.form
-00038120: 6174 2869 6e74 726f 5f6d 7367 2929 0a20  at(intro_msg)). 
-00038130: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00038140: 2827 6c6f 6720 6c65 7665 6c20 2020 2020  ('log level     
-00038150: 2020 2020 2020 2020 3a7b 7d20 3c20 7b7d          :{} < {}
-00038160: 2028 7072 696e 743a 7b7d 2927 2e66 6f72   (print:{})'.for
-00038170: 6d61 7428 7072 696e 7466 5f6c 6f67 5f62  mat(printf_log_b
-00038180: 6173 652c 6c6f 675f 6c65 7665 6c2c 2070  ase,log_level, p
-00038190: 7269 6e74 665f 6c6f 675f 6261 7365 203c  rintf_log_base <
-000381a0: 206c 6f67 5f6c 6576 656c 2069 6620 4973   log_level if Is
-000381b0: 496e 7428 7072 696e 7466 5f6c 6f67 5f62  Int(printf_log_b
-000381c0: 6173 6529 2061 6e64 2049 7349 6e74 286c  ase) and IsInt(l
-000381d0: 6f67 5f6c 6576 656c 2920 656c 7365 2054  og_level) else T
-000381e0: 7275 6529 290a 2020 2020 2020 2020 2020  rue)).          
-000381f0: 2020 7072 696e 7428 2762 6566 6f72 6520    print('before 
-00038200: 6d6f 6465 2070 7269 6e74 2020 2020 203a  mode print     :
-00038210: 5b7b 7d5d 272e 666f 726d 6174 2873 7461  [{}]'.format(sta
-00038220: 7274 5f6e 6577 6c69 6e65 2b6d 7367 5f73  rt_newline+msg_s
-00038230: 7472 2b6e 6577 5f6c 696e 6529 290a 0a20  tr+new_line)).. 
-00038240: 2020 2023 2053 6176 6520 746f 2066 696c     # Save to fil
-00038250: 6520 6f72 2070 7269 6e74 2074 6f20 7363  e or print to sc
-00038260: 7265 656e 2066 696c 7465 7220 7769 7468  reen filter with
-00038270: 206c 6f67 5f6c 6576 656c 2061 6e64 2061   log_level and a
-00038280: 6c72 6561 6479 206c 6f67 6769 6e67 2077  lready logging w
-00038290: 6974 6820 6c6f 6720 6675 6e63 7469 6f6e  ith log function
-000382a0: 206f 7220 6e6f 742e 0a20 2020 2069 6620   or not..    if 
-000382b0: 2764 2720 696e 2064 7370 2061 6e64 2049  'd' in dsp and I
-000382c0: 7349 6e74 2870 7269 6e74 665f 6c6f 675f  sInt(printf_log_
-000382d0: 6261 7365 2920 616e 6420 4973 496e 7428  base) and IsInt(
-000382e0: 6c6f 675f 6c65 7665 6c29 3a0a 2020 2020  log_level):.    
-000382f0: 2020 2020 6966 2070 7269 6e74 665f 6c6f      if printf_lo
-00038300: 675f 6261 7365 203c 206c 6f67 5f6c 6576  g_base < log_lev
-00038310: 656c 3a0a 2020 2020 2020 2020 2020 2020  el:.            
-00038320: 7265 7475 726e 0a20 2020 2023 2069 6620  return.    # if 
-00038330: 6a75 7374 2077 6869 7465 7370 6163 6520  just whitespace 
-00038340: 7468 656e 206e 6f74 206e 6577 6c69 6e65  then not newline
-00038350: 2c20 736f 6d65 7468 696e 6720 656c 7365  , something else
-00038360: 2077 6974 6820 6461 7461 2074 6865 6e20   with data then 
-00038370: 7768 6174 2065 7665 720a 2020 2020 2320  what ever.    # 
-00038380: 5361 7665 206d 7367 2074 6f20 6c6f 6766  Save msg to logf
-00038390: 696c 6520 7768 656e 2064 6566 696e 6564  ile when defined
-000383a0: 206c 6f67 6669 6c65 0a20 2020 2069 6620   logfile.    if 
-000383b0: 6c6f 6766 696c 653a 2023 2061 6c6c 206d  logfile: # all m
-000383c0: 6f64 6520 6361 6e20 2865 7665 6e20 6966  ode can (even if
-000383d0: 2064 2c20 662c 2069 2920 6a75 7374 206c   d, f, i) just l
-000383e0: 6f67 696e 6720 746f 2066 696c 652e 0a20  oging to file.. 
-000383f0: 2020 2020 2020 2066 6f72 2069 6920 696e         for ii in
-00038400: 206c 6f67 6669 6c65 3a0a 2020 2020 2020   logfile:.      
-00038410: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-00038420: 6e63 6528 6969 2c73 7472 2920 616e 6420  nce(ii,str) and 
-00038430: 6969 3a0a 2020 2020 2020 2020 2020 2020  ii:.            
-00038440: 2020 2020 6969 5f64 3d6f 732e 7061 7468      ii_d=os.path
-00038450: 2e64 6972 6e61 6d65 2869 6929 0a20 2020  .dirname(ii).   
-00038460: 2020 2020 2020 2020 2020 2020 2069 695f               ii_
-00038470: 643d 6969 5f64 2069 6620 6969 5f64 2065  d=ii_d if ii_d e
-00038480: 6c73 6520 272e 2720 2320 4966 206a 7573  lse '.' # If jus
-00038490: 7420 6669 6c65 6e61 6d65 2074 6865 6e20  t filename then 
-000384a0: 6469 7265 6374 6f72 7920 746f 202e 2863  directory to .(c
-000384b0: 7572 7265 6e74 2064 6972 6563 746f 7279  urrent directory
-000384c0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000384d0: 2020 6966 2069 6920 616e 6420 6f73 2e70    if ii and os.p
-000384e0: 6174 682e 6973 6469 7228 6969 5f64 293a  ath.isdir(ii_d):
-000384f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00038500: 2020 2020 2069 6620 6e6f 7420 6d73 675f       if not msg_
-00038510: 7374 723a 0a20 2020 2020 2020 2020 2020  str:.           
-00038520: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00038530: 6462 675f 656d 7074 7920 616e 6420 6e6f  dbg_empty and no
-00038540: 7420 6967 6e6f 7265 5f65 6d70 7479 3a20  t ignore_empty: 
-00038550: 2020 2320 4967 6e6f 7265 2065 6d70 7479    # Ignore empty
-00038560: 2064 6174 6120 6f6e 2073 6372 6565 6e20   data on screen 
-00038570: 772f 6f20 6465 6275 6767 696e 6720 0a20  w/o debugging . 
-00038580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038590: 2020 2020 2020 2020 2020 2070 6172 656e             paren
-000385a0: 745f 6e3d 6f70 7473 2e67 6574 2827 6361  t_n=opts.get('ca
-000385b0: 6c6c 6572 5f70 6172 656e 7427 2920 6966  ller_parent') if
-000385c0: 2069 7369 6e73 7461 6e63 6528 6f70 7473   isinstance(opts
-000385d0: 2e67 6574 2827 6361 6c6c 6572 5f70 6172  .get('caller_par
-000385e0: 656e 7427 292c 696e 7429 2065 6c73 6520  ent'),int) else 
-000385f0: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
-00038600: 2020 2020 2020 2020 2020 2020 2020 6172                ar
-00038610: 673d 7b27 7061 7265 6e74 273a 7061 7265  g={'parent':pare
-00038620: 6e74 5f6e 2c27 6c69 6e65 5f6e 756d 6265  nt_n,'line_numbe
-00038630: 7227 3a54 7275 652c 2766 696c 656e 616d  r':True,'filenam
-00038640: 6527 3a54 7275 652c 2761 7267 7327 3a46  e':True,'args':F
-00038650: 616c 7365 2c27 6869 7374 6f72 7927 3a46  alse,'history':F
-00038660: 616c 7365 2c27 7472 6565 273a 4661 6c73  alse,'tree':Fals
-00038670: 657d 0a20 2020 2020 2020 2020 2020 2020  e}.             
-00038680: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00038690: 616c 6c5f 6e61 6d65 3d46 756e 6374 696f  all_name=Functio
-000386a0: 6e4e 616d 6528 2a2a 6172 6729 0a20 2020  nName(**arg).   
-000386b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000386c0: 2020 2020 2020 2020 206d 7367 5f73 7472           msg_str
-000386d0: 3d69 6e74 726f 5f6d 7367 202b 2043 6f6c  =intro_msg + Col
-000386e0: 6f72 5374 7228 5772 6170 5374 7269 6e67  orStr(WrapString
-000386f0: 2827 5b2a 2a20 456d 7074 792d 4461 7461  ('[** Empty-Data
-00038700: 202a 2a5d 2028 7b7d 2927 2e66 6f72 6d61   **] ({})'.forma
-00038710: 7428 6361 6c6c 5f6e 616d 6529 2c66 7370  t(call_name),fsp
-00038720: 6163 653d 696e 7472 6f5f 6c65 6e2c 206e  ace=intro_len, n
-00038730: 7370 6163 653d 696e 7472 6f5f 6c65 6e2c  space=intro_len,
-00038740: 6d6f 6465 3d27 7370 6163 6527 292c 2a2a  mode='space'),**
-00038750: 6f70 7473 290a 2020 2020 2020 2020 2020  opts).          
-00038760: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-00038770: 206d 7367 5f73 7472 3a20 7265 7475 726e   msg_str: return
-00038780: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00038790: 2020 2020 2020 2320 6966 2065 6e64 206f        # if end o
-000387a0: 6620 6c69 6e65 2068 6176 6520 6e6f 206e  f line have no n
-000387b0: 6577 6c69 6e65 2c20 6275 7420 6974 2068  ewline, but it h
-000387c0: 6173 2069 6e74 726f 2074 6865 6e20 6164  as intro then ad
-000387d0: 6469 6e67 2073 7461 7274 5f6e 6577 6c69  ding start_newli
-000387e0: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
-000387f0: 2020 2020 2020 2069 6620 696e 7472 6f5f         if intro_
-00038800: 6d73 6720 616e 6420 6e6f 7420 6e6f 5f73  msg and not no_s
-00038810: 7461 7274 5f6e 6577 6c69 6e65 3a0a 2020  tart_newline:.  
-00038820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038830: 2020 2020 2020 6966 2070 7269 6e74 665f        if printf_
-00038840: 6e65 776c 696e 655f 696e 666f 2e47 6574  newline_info.Get
-00038850: 2842 7974 6573 2869 6929 293a 200a 2020  (Bytes(ii)): .  
-00038860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038870: 2020 2020 2020 2020 2020 7374 6172 745f            start_
-00038880: 6e65 776c 696e 653d 275c 6e27 0a20 2020  newline='\n'.   
-00038890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000388a0: 2069 6620 7363 725f 6462 675f 7072 696e   if scr_dbg_prin
-000388b0: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-000388c0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-000388d0: 2827 6d6f 6465 2020 2020 2020 2020 2020  ('mode          
-000388e0: 2020 2020 2020 2020 3a7b 7d20 2862 6566          :{} (bef
-000388f0: 6f72 6520 6e6f 206e 6577 6c69 6e65 3a7b  ore no newline:{
-00038900: 7d29 272e 666f 726d 6174 2869 692c 5472  })'.format(ii,Tr
-00038910: 7565 2069 6620 7072 696e 7466 5f6e 6577  ue if printf_new
-00038920: 6c69 6e65 5f69 6e66 6f2e 4765 7428 4279  line_info.Get(By
-00038930: 7465 7328 6969 2929 2065 6c73 6520 4661  tes(ii)) else Fa
-00038940: 6c73 6529 290a 2020 2020 2020 2020 2020  lse)).          
-00038950: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-00038960: 696e 7428 2775 7064 6174 6564 2073 7461  int('updated sta
-00038970: 7274 206e 6577 6c69 6e65 203a 7b7d 272e  rt newline :{}'.
-00038980: 666f 726d 6174 2854 7275 6520 6966 2073  format(True if s
-00038990: 7461 7274 5f6e 6577 6c69 6e65 2065 6c73  tart_newline els
-000389a0: 6520 4661 6c73 6529 290a 2020 2020 2020  e False)).      
+00036d10: 725f 7061 7265 6e74 275d 3d32 0a20 2020  r_parent']=2.   
+00036d20: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+00036d30: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00036d40: 2020 2020 2020 206f 7074 735b 2763 616c         opts['cal
+00036d50: 6c65 725f 7061 7265 6e74 275d 3d32 0a20  ler_parent']=2. 
+00036d60: 2020 2020 2020 2020 2020 2046 6565 6446             FeedF
+00036d70: 756e 6328 6c6f 672c 2a6d 7367 2c2a 2a6f  unc(log,*msg,**o
+00036d80: 7074 7329 0a20 2020 2020 2020 2020 2020  pts).           
+00036d90: 2023 2049 6620 6c6f 6720 6675 6e63 7469   # If log functi
+00036da0: 6f6e 2074 616b 6520 6f76 6572 2074 6865  on take over the
+00036db0: 206c 6f67 2074 6865 6e20 6e6f 206d 6f72   log then no mor
+00036dc0: 6520 7072 696e 7420 746f 206f 7468 6572  e print to other
+00036dd0: 730a 2020 2020 2020 2020 2020 2020 7265  s.            re
+00036de0: 7475 726e 0a20 2020 2020 2020 2065 7863  turn.        exc
+00036df0: 6570 743a 0a20 2020 2020 2020 2020 2020  ept:.           
+00036e00: 2070 6173 730a 0a20 2020 2023 204d 616b   pass..    # Mak
+00036e10: 6520 6120 496e 7472 6f0a 2020 2020 696e  e a Intro.    in
+00036e20: 7472 6f5f 6c65 6e3d 300a 2020 2020 696e  tro_len=0.    in
+00036e30: 7472 6f5f 6d73 673d 2727 0a20 2020 2069  tro_msg=''.    i
+00036e40: 6620 6e6f 7420 6469 7265 6374 2061 6e64  f not direct and
+00036e50: 206e 6f74 206e 6f5f 696e 7472 6f3a 0a20   not no_intro:. 
+00036e60: 2020 2020 2020 2069 6e74 726f 5f6d 7367         intro_msg
+00036e70: 3d27 7b30 7d20 272e 666f 726d 6174 2854  ='{0} '.format(T
+00036e80: 494d 4528 292e 4e6f 7728 292e 7374 7266  IME().Now().strf
+00036e90: 7469 6d65 2864 6174 655f 666f 726d 6174  time(date_format
+00036ea0: 2929 2069 6620 6461 7465 5f66 6f72 6d61  )) if date_forma
+00036eb0: 7420 616e 6420 6e6f 7420 7379 736c 6f67  t and not syslog
+00036ec0: 6420 656c 7365 2027 270a 2020 2020 2020  d else ''.      
+00036ed0: 2020 696e 7472 6f5f 6c65 6e3d 6c65 6e28    intro_len=len(
+00036ee0: 696e 7472 6f5f 6d73 6729 0a20 2020 2020  intro_msg).     
+00036ef0: 2020 2069 6620 6361 6c6c 6572 5f64 6574     if caller_det
+00036f00: 6169 6c20 6f72 2063 616c 6c65 725f 7472  ail or caller_tr
+00036f10: 6565 206f 7220 6361 6c6c 6572 5f68 6973  ee or caller_his
+00036f20: 746f 7279 206f 7220 6361 6c6c 6572 5f69  tory or caller_i
+00036f30: 676e 6f72 653a 0a20 2020 2020 2020 2020  gnore:.         
+00036f40: 2020 2069 6620 6967 6e6f 7265 5f6d 7973     if ignore_mys
+00036f50: 656c 663a 0a20 2020 2020 2020 2020 2020  elf:.           
+00036f60: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
+00036f70: 7374 616e 6365 2863 616c 6c65 725f 6967  stance(caller_ig
+00036f80: 6e6f 7265 2c6c 6973 7429 3a20 6361 6c6c  nore,list): call
+00036f90: 6572 5f69 676e 6f72 653d 5b5d 0a20 2020  er_ignore=[].   
+00036fa0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00036fb0: 2746 6565 6446 756e 6327 206e 6f74 2069  'FeedFunc' not i
+00036fc0: 6e20 6361 6c6c 6572 5f69 676e 6f72 653a  n caller_ignore:
+00036fd0: 2063 616c 6c65 725f 6967 6e6f 7265 2e61   caller_ignore.a
+00036fe0: 7070 656e 6428 2746 6565 6446 756e 6327  ppend('FeedFunc'
+00036ff0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00037000: 2020 6966 2027 7072 696e 7466 2720 6e6f    if 'printf' no
+00037010: 7420 696e 2063 616c 6c65 725f 6967 6e6f  t in caller_igno
+00037020: 7265 3a20 6361 6c6c 6572 5f69 676e 6f72  re: caller_ignor
+00037030: 652e 6170 7065 6e64 2827 7072 696e 7466  e.append('printf
+00037040: 2729 0a20 2020 2020 2020 2069 6620 6361  ').        if ca
+00037050: 6c6c 6572 5f69 676e 6f72 6520 616e 6420  ller_ignore and 
+00037060: 6973 696e 7374 616e 6365 2863 616c 6c65  isinstance(calle
+00037070: 725f 6967 6e6f 7265 2c6c 6973 7429 3a0a  r_ignore,list):.
+00037080: 2020 2020 2020 2020 2020 2020 6172 673d              arg=
+00037090: 7b27 7061 7265 6e74 273a 7061 7265 6e74  {'parent':parent
+000370a0: 5f6e 2c27 6172 6773 273a 4661 6c73 652c  _n,'args':False,
+000370b0: 2768 6973 746f 7279 273a 5472 7565 2c27  'history':True,'
+000370c0: 7472 6565 273a 4661 6c73 657d 0a20 2020  tree':False}.   
+000370d0: 2020 2020 2020 2020 2063 616c 6c5f 6e61           call_na
+000370e0: 6d65 3d46 756e 6374 696f 6e4e 616d 6528  me=FunctionName(
+000370f0: 2a2a 6172 6729 0a20 2020 2020 2020 2020  **arg).         
+00037100: 2020 206e 6577 5f70 3d30 0a20 2020 2020     new_p=0.     
+00037110: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+00037120: 7261 6e67 6528 6c65 6e28 6361 6c6c 5f6e  range(len(call_n
+00037130: 616d 6529 2d31 2c30 2c2d 3129 3a0a 2020  ame)-1,0,-1):.  
+00037140: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00037150: 2063 616c 6c5f 6e61 6d65 5b69 5d5b 305d   call_name[i][0]
+00037160: 2069 6e20 6361 6c6c 6572 5f69 676e 6f72   in caller_ignor
+00037170: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00037180: 2020 2020 2020 206e 6577 5f70 2b3d 310a         new_p+=1.
+00037190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000371a0: 2020 2020 636f 6e74 696e 7565 0a20 2020      continue.   
+000371b0: 2020 2020 2020 2020 2020 2020 2062 7265               bre
+000371c0: 616b 0a20 2020 2020 2020 2020 2020 2069  ak.            i
+000371d0: 6620 6973 696e 7374 616e 6365 2870 6172  f isinstance(par
+000371e0: 656e 745f 6e2c 7374 7229 3a0a 2020 2020  ent_n,str):.    
+000371f0: 2020 2020 2020 2020 2020 2020 7061 7265              pare
+00037200: 6e74 5f6e 5f61 3d70 6172 656e 745f 6e2e  nt_n_a=parent_n.
+00037210: 7370 6c69 7428 272d 2729 0a20 2020 2020  split('-').     
+00037220: 2020 2020 2020 2020 2020 2069 6620 7061             if pa
+00037230: 7265 6e74 5f6e 5f61 5b30 5d3a 0a20 2020  rent_n_a[0]:.   
+00037240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00037250: 2070 6172 656e 745f 6e5f 615b 305d 3d27   parent_n_a[0]='
+00037260: 7b7d 272e 666f 726d 6174 2869 6e74 2870  {}'.format(int(p
+00037270: 6172 656e 745f 6e5f 615b 305d 292b 6e65  arent_n_a[0])+ne
+00037280: 775f 7029 0a20 2020 2020 2020 2020 2020  w_p).           
+00037290: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000372a0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+000372b0: 6172 656e 745f 6e5f 615b 305d 3d27 7b7d  arent_n_a[0]='{}
+000372c0: 272e 666f 726d 6174 286e 6577 5f70 290a  '.format(new_p).
+000372d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000372e0: 6966 206c 656e 2870 6172 656e 745f 6e5f  if len(parent_n_
+000372f0: 6129 203d 3d20 3220 616e 6420 7061 7265  a) == 2 and pare
+00037300: 6e74 5f6e 5f61 5b31 5d3a 0a20 2020 2020  nt_n_a[1]:.     
+00037310: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00037320: 6172 656e 745f 6e5f 615b 315d 3d27 7b7d  arent_n_a[1]='{}
+00037330: 272e 666f 726d 6174 2869 6e74 2870 6172  '.format(int(par
+00037340: 656e 745f 6e5f 615b 315d 292b 6e65 775f  ent_n_a[1])+new_
+00037350: 7029 0a20 2020 2020 2020 2020 2020 2020  p).             
+00037360: 2020 2070 6172 656e 745f 6e3d 272d 272e     parent_n='-'.
+00037370: 6a6f 696e 2870 6172 656e 745f 6e5f 6129  join(parent_n_a)
+00037380: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
+00037390: 6620 6973 696e 7374 616e 6365 2870 6172  f isinstance(par
+000373a0: 656e 745f 6e2c 696e 7429 3a0a 2020 2020  ent_n,int):.    
+000373b0: 2020 2020 2020 2020 2020 2020 7061 7265              pare
+000373c0: 6e74 5f6e 3d70 6172 656e 745f 6e2b 6e65  nt_n=parent_n+ne
+000373d0: 775f 700a 2020 2020 2020 2020 6966 2063  w_p.        if c
+000373e0: 616c 6c65 725f 6e61 6d65 206f 7220 6361  aller_name or ca
+000373f0: 6c6c 6572 5f69 676e 6f72 653a 0a20 2020  ller_ignore:.   
+00037400: 2020 2020 2020 2020 2061 7267 3d7b 2770           arg={'p
+00037410: 6172 656e 7427 3a70 6172 656e 745f 6e7d  arent':parent_n}
+00037420: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00037430: 6361 6c6c 6572 5f64 6574 6169 6c3a 0a20  caller_detail:. 
+00037440: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00037450: 7267 2e75 7064 6174 6528 7b27 6c69 6e65  rg.update({'line
+00037460: 5f6e 756d 6265 7227 3a54 7275 652c 2766  _number':True,'f
+00037470: 756c 6c5f 6669 6c65 6e61 6d65 273a 6361  ull_filename':ca
+00037480: 6c6c 6572 5f66 756c 6c5f 6669 6c65 6e61  ller_full_filena
+00037490: 6d65 2c27 6669 6c65 6e61 6d65 273a 5472  me,'filename':Tr
+000374a0: 7565 2c27 6172 6773 273a 5472 7565 7d29  ue,'args':True})
+000374b0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+000374c0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+000374d0: 2020 2061 7267 5b27 6c69 6e65 5f6e 756d     arg['line_num
+000374e0: 6265 7227 5d3d 6361 6c6c 6572 5f6c 696e  ber']=caller_lin
+000374f0: 655f 6e75 6d62 6572 0a20 2020 2020 2020  e_number.       
+00037500: 2020 2020 2020 2020 2061 7267 5b27 6675           arg['fu
+00037510: 6c6c 5f66 696c 656e 616d 6527 5d3d 6361  ll_filename']=ca
+00037520: 6c6c 6572 5f66 756c 6c5f 6669 6c65 6e61  ller_full_filena
+00037530: 6d65 0a20 2020 2020 2020 2020 2020 2020  me.             
+00037540: 2020 2061 7267 5b27 6172 6773 275d 3d63     arg['args']=c
+00037550: 616c 6c65 725f 6172 6773 0a20 2020 2020  aller_args.     
+00037560: 2020 2020 2020 2020 2020 2061 7267 5b27             arg['
+00037570: 6669 6c65 6e61 6d65 275d 3d63 616c 6c65  filename']=calle
+00037580: 725f 6669 6c65 6e61 6d65 0a20 2020 2020  r_filename.     
+00037590: 2020 2020 2020 2069 6620 6361 6c6c 6572         if caller
+000375a0: 5f74 7265 653a 0a20 2020 2020 2020 2020  _tree:.         
+000375b0: 2020 2020 2020 2061 7267 2e75 7064 6174         arg.updat
+000375c0: 6528 7b27 6869 7374 6f72 7927 3a54 7275  e({'history':Tru
+000375d0: 652c 2774 7265 6527 3a54 7275 657d 290a  e,'tree':True}).
+000375e0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+000375f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00037600: 2020 6172 675b 2768 6973 746f 7279 275d    arg['history']
+00037610: 3d63 616c 6c65 725f 6869 7374 6f72 790a  =caller_history.
+00037620: 2020 2020 2020 2020 2020 2020 6361 6c6c              call
+00037630: 5f6e 616d 653d 4675 6e63 7469 6f6e 4e61  _name=FunctionNa
+00037640: 6d65 282a 2a61 7267 290a 2020 2020 2020  me(**arg).      
+00037650: 2020 2020 2020 6966 2063 616c 6c5f 6e61        if call_na
+00037660: 6d65 3a0a 2020 2020 2020 2020 2020 2020  me:.            
+00037670: 2020 2020 2320 6966 206c 696e 655f 6e75      # if line_nu
+00037680: 6d62 6572 2061 6e64 2066 696c 656e 616d  mber and filenam
+00037690: 6520 7468 656e 2070 7269 6e74 206c 6f67  e then print log
+000376a0: 6769 6e67 2061 7420 6e65 7874 206c 696e  ging at next lin
+000376b0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+000376c0: 2020 2320 6966 2064 6174 655f 666f 726d    # if date_form
+000376d0: 6174 2074 6865 6e20 6c6f 6767 696e 6727  at then logging'
+000376e0: 7320 696e 7472 6f20 6c65 6e67 7468 2077  s intro length w
+000376f0: 696c 6c20 6265 2064 6174 6520 666f 726d  ill be date form
+00037700: 6174 0a20 2020 2020 2020 2020 2020 2020  at.             
+00037710: 2020 2023 2069 6620 6e6f 7420 6461 7465     # if not date
+00037720: 5f66 6f72 6d61 7420 7468 656e 206c 6f67  _format then log
+00037730: 6769 6e27 7320 696e 7472 6f20 6c65 6e67  gin's intro leng
+00037740: 7468 2077 696c 6c20 6265 2073 7465 7070  th will be stepp
+00037750: 696e 6720 6c65 6e67 7468 0a20 2020 2020  ing length.     
+00037760: 2020 2020 2020 2020 2020 2069 6620 6973             if is
+00037770: 696e 7374 616e 6365 2863 616c 6c5f 6e61  instance(call_na
+00037780: 6d65 2c73 7472 293a 2063 616c 6c5f 6e61  me,str): call_na
+00037790: 6d65 3d5b 6361 6c6c 5f6e 616d 655d 0a20  me=[call_name]. 
+000377a0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000377b0: 6620 6361 6c6c 6572 5f74 7265 6520 6f72  f caller_tree or
+000377c0: 2063 616c 6c65 725f 6869 7374 6f72 793a   caller_history:
+000377d0: 2063 616c 6c5f 6e61 6d65 3d63 616c 6c5f   call_name=call_
+000377e0: 6e61 6d65 2b5b 2727 5d20 6966 2064 6174  name+[''] if dat
+000377f0: 655f 666f 726d 6174 2065 6c73 6520 6361  e_format else ca
+00037800: 6c6c 5f6e 616d 652b 5b27 2027 5d0a 2020  ll_name+[' '].  
+00037810: 2020 2020 2020 2020 2020 2020 2020 696e                in
+00037820: 7472 6f5f 6d73 673d 696e 7472 6f5f 6d73  tro_msg=intro_ms
+00037830: 672b 5772 6170 5374 7269 6e67 284a 6f69  g+WrapString(Joi
+00037840: 6e28 6361 6c6c 5f6e 616d 652c 275c 6e27  n(call_name,'\n'
+00037850: 292c 6673 7061 6365 3d30 2c20 6e73 7061  ),fspace=0, nspa
+00037860: 6365 3d6c 656e 2869 6e74 726f 5f6d 7367  ce=len(intro_msg
+00037870: 292c 6d6f 6465 3d27 7370 6163 6527 2c69  ),mode='space',i
+00037880: 676e 6f72 655f 656d 7074 795f 656e 646c  gnore_empty_endl
+00037890: 696e 653d 4661 6c73 6529 202b 2027 3a20  ine=False) + ': 
+000378a0: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
+000378b0: 2020 696e 7472 6f5f 6c65 6e3d 696e 7472    intro_len=intr
+000378c0: 6f5f 6c65 6e2b 6c65 6e28 6361 6c6c 5f6e  o_len+len(call_n
+000378d0: 616d 655b 2d31 5d29 2b32 0a20 2020 2020  ame[-1])+2.     
+000378e0: 2020 2069 6620 5479 7065 2869 6e74 726f     if Type(intro
+000378f0: 2c27 7374 7227 2920 616e 6420 696e 7472  ,'str') and intr
+00037900: 6f3a 0a20 2020 2020 2020 2020 2020 2069  o:.            i
+00037910: 6e74 726f 5f6d 7367 3d69 6e74 726f 5f6d  ntro_msg=intro_m
+00037920: 7367 2b69 6e74 726f 2b27 3a20 270a 2020  sg+intro+': '.  
+00037930: 2020 2020 2020 2020 2020 696e 7472 6f5f            intro_
+00037940: 6c65 6e3d 696e 7472 6f5f 6c65 6e2b 6c65  len=intro_len+le
+00037950: 6e28 696e 7472 6f29 2b32 0a0a 2020 2020  n(intro)+2..    
+00037960: 2320 4d61 6b65 2069 6e70 7574 2064 6174  # Make input dat
+00037970: 6120 746f 2061 2073 7472 696e 6720 6d73  a to a string ms
+00037980: 6720 0a20 2020 2069 6620 7374 6172 745f  g .    if start_
+00037990: 6e65 776c 696e 653a 0a20 2020 2020 2020  newline:.       
+000379a0: 2069 6620 6c65 6e28 6d73 6729 2061 6e64   if len(msg) and
+000379b0: 2069 7369 6e73 7461 6e63 6528 6d73 675b   isinstance(msg[
+000379c0: 305d 2c73 7472 2920 616e 6420 6c65 6e28  0],str) and len(
+000379d0: 6d73 675b 305d 2920 616e 6420 6d73 675b  msg[0]) and msg[
+000379e0: 305d 5b30 5d20 3d3d 2027 5c6e 273a 206d  0][0] == '\n': m
+000379f0: 7367 5b30 5d3d 6d73 675b 305d 5b31 3a5d  sg[0]=msg[0][1:]
+00037a00: 0a20 2020 2020 2020 2069 6620 7374 6172  .        if star
+00037a10: 745f 6e65 776c 696e 6520 3d3d 2027 6175  t_newline == 'au
+00037a20: 746f 273a 0a20 2020 2020 2020 2020 2020  to':.           
+00037a30: 2069 6620 7072 696e 7466 5f6e 6577 6c69   if printf_newli
+00037a40: 6e65 5f69 6e66 6f2e 4765 7428 6473 7029  ne_info.Get(dsp)
+00037a50: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00037a60: 2020 7374 6172 745f 6e65 776c 696e 653d    start_newline=
+00037a70: 275c 6e27 0a20 2020 2020 2020 2020 2020  '\n'.           
+00037a80: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00037a90: 2020 2020 2020 2073 7461 7274 5f6e 6577         start_new
+00037aa0: 6c69 6e65 3d27 270a 2020 2020 6d73 675f  line=''.    msg_
+00037ab0: 7374 723d 6d73 675f 6d61 6b65 7228 2a6d  str=msg_maker(*m
+00037ac0: 7367 2c6d 7367 5f73 706c 6974 3d6d 7367  sg,msg_split=msg
+00037ad0: 5f73 706c 6974 2c69 6e74 726f 5f6c 656e  _split,intro_len
+00037ae0: 3d69 6e74 726f 5f6c 656e 2c69 6e74 726f  =intro_len,intro
+00037af0: 5f6d 7367 3d27 2720 6966 206e 6f5f 696e  _msg='' if no_in
+00037b00: 7472 6f20 6973 204e 6f6e 6520 656c 7365  tro is None else
+00037b10: 2069 6e74 726f 5f6d 7367 290a 2320 444f   intro_msg).# DO
+00037b20: 6e27 7420 6e65 6564 2062 656c 6f77 2063  n't need below c
+00037b30: 6f64 650a 2320 2020 2069 6620 6e65 775f  ode.#    if new_
+00037b40: 6c69 6e65 3a0a 2320 2020 2020 2020 2069  line:.#        i
+00037b50: 6620 6d73 675f 7374 7220 616e 6420 6d73  f msg_str and ms
+00037b60: 675f 7374 725b 2d31 5d20 3d3d 2027 5c6e  g_str[-1] == '\n
+00037b70: 273a 206d 7367 5f73 7472 3d6d 7367 5f73  ': msg_str=msg_s
+00037b80: 7472 5b3a 2d31 5d0a 0a20 2020 2023 2320  tr[:-1]..    ## 
+00037b90: 6966 2065 6e64 206f 6620 6c69 6e65 2068  if end of line h
+00037ba0: 6176 6520 6e6f 206e 6577 6c69 6e65 2c20  ave no newline, 
+00037bb0: 6275 7420 6974 2068 6173 2069 6e74 726f  but it has intro
+00037bc0: 2074 6865 6e20 6164 6469 6e67 2073 7461   then adding sta
+00037bd0: 7274 5f6e 6577 6c69 6e65 0a20 2020 2023  rt_newline.    #
+00037be0: 6966 2069 6e74 726f 5f6d 7367 2061 6e64  if intro_msg and
+00037bf0: 206e 6f74 206e 6f5f 7374 6172 745f 6e65   not no_start_ne
+00037c00: 776c 696e 653a 0a20 2020 2023 2020 2020  wline:.    #    
+00037c10: 6966 2070 7269 6e74 665f 6e65 776c 696e  if printf_newlin
+00037c20: 655f 696e 666f 2e47 6574 2864 7370 293a  e_info.Get(dsp):
+00037c30: 200a 2020 2020 2320 2020 2020 2020 2073   .    #        s
+00037c40: 7461 7274 5f6e 6577 6c69 6e65 3d27 5c6e  tart_newline='\n
+00037c50: 270a 0a20 2020 2023 4442 4720 4d4f 4445  '..    #DBG MODE
+00037c60: 2066 6f72 2070 7269 6e74 696e 670a 2020   for printing.  
+00037c70: 2020 7363 725f 6462 675f 7072 696e 743d    scr_dbg_print=
+00037c80: 4661 6c73 650a 2020 2020 6966 2073 6372  False.    if scr
+00037c90: 5f64 6267 2069 7320 5472 7565 3a0a 2020  _dbg is True:.  
+00037ca0: 2020 2020 2020 6966 2073 6372 5f64 6267        if scr_dbg
+00037cb0: 5f63 6f6e 6469 7469 6f6e 2069 7320 4e6f  _condition is No
+00037cc0: 6e65 206f 7220 6d73 675f 7374 7220 3d3d  ne or msg_str ==
+00037cd0: 2073 6372 5f64 6267 5f63 6f6e 6469 7469   scr_dbg_conditi
+00037ce0: 6f6e 3a0a 2020 2020 2020 2020 2020 2020  on:.            
+00037cf0: 7363 725f 6462 675f 7072 696e 743d 5472  scr_dbg_print=Tr
+00037d00: 7565 0a20 2020 2020 2020 2020 2020 2061  ue.            a
+00037d10: 7267 3d7b 2770 6172 656e 7427 3a27 312d  rg={'parent':'1-
+00037d20: 3927 2c27 6c69 6e65 5f6e 756d 6265 7227  9','line_number'
+00037d30: 3a54 7275 652c 2766 696c 656e 616d 6527  :True,'filename'
+00037d40: 3a54 7275 652c 2761 7267 7327 3a46 616c  :True,'args':Fal
+00037d50: 7365 2c27 6869 7374 6f72 7927 3a54 7275  se,'history':Tru
+00037d60: 652c 2774 7265 6527 3a54 7275 657d 0a20  e,'tree':True}. 
+00037d70: 2020 2020 2020 2020 2020 2063 616c 6c5f             call_
+00037d80: 6e61 6d65 3d46 756e 6374 696f 6e4e 616d  name=FunctionNam
+00037d90: 6528 2a2a 6172 6729 0a20 2020 2020 2020  e(**arg).       
+00037da0: 2020 2020 2070 7269 6e74 2827 2d2d 2d2d       print('----
+00037db0: 2d2d 2d2d 2d2d 2d2d 2d46 554e 4354 494f  ---------FUNCTIO
+00037dc0: 4e2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  N---------------
+00037dd0: 2d2d 2d2d 2d27 290a 2020 2020 2020 2020  -----').        
+00037de0: 2020 2020 7072 696e 7428 4a6f 696e 2863      print(Join(c
+00037df0: 616c 6c5f 6e61 6d65 2c27 5c6e 2729 290a  all_name,'\n')).
+00037e00: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00037e10: 7428 272d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  t('-------------
+00037e20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00037e30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2729 0a20  ------------'). 
+00037e40: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00037e50: 2827 6c6f 6720 2020 2020 2020 2020 2020  ('log           
+00037e60: 2020 2020 2020 2020 3a7b 7d20 2866 756e          :{} (fun
+00037e70: 6374 696f 6e3a 7b7d 3a7b 7d29 272e 666f  ction:{}:{})'.fo
+00037e80: 726d 6174 286c 6f67 2c49 7346 756e 6374  rmat(log,IsFunct
+00037e90: 696f 6e28 6c6f 6729 2c6f 7074 7329 290a  ion(log),opts)).
+00037ea0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00037eb0: 7428 276c 6f67 6669 6c65 2020 2020 2020  t('logfile      
+00037ec0: 2020 2020 2020 2020 203a 7b7d 272e 666f           :{}'.fo
+00037ed0: 726d 6174 286c 6f67 6669 6c65 2929 0a20  rmat(logfile)). 
+00037ee0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00037ef0: 2827 6e65 776c 696e 6520 696e 666f 2020  ('newline info  
+00037f00: 2020 2020 2020 2020 3a7b 7d27 2e66 6f72          :{}'.for
+00037f10: 6d61 7428 7072 696e 7466 5f6e 6577 6c69  mat(printf_newli
+00037f20: 6e65 5f69 6e66 6f2e 6461 7461 2929 0a20  ne_info.data)). 
+00037f30: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00037f40: 2827 666f 7263 6520 6e6f 2073 7461 7274  ('force no start
+00037f50: 206e 6577 6c69 6e65 3a7b 7d27 2e66 6f72   newline:{}'.for
+00037f60: 6d61 7428 6e6f 5f73 7461 7274 5f6e 6577  mat(no_start_new
+00037f70: 6c69 6e65 2929 0a20 2020 2020 2020 2020  line)).         
+00037f80: 2020 2070 7269 6e74 2827 6e65 776c 696e     print('newlin
+00037f90: 6520 2020 2020 2020 2020 2020 2020 2020  e               
+00037fa0: 3a28 6469 7265 6374 3a7b 7d2c 7374 6172  :(direct:{},star
+00037fb0: 743a 7b7d 2c65 6e64 3a7b 7d29 272e 666f  t:{},end:{})'.fo
+00037fc0: 726d 6174 2864 6972 6563 742c 5472 7565  rmat(direct,True
+00037fd0: 2069 6620 7374 6172 745f 6e65 776c 696e   if start_newlin
+00037fe0: 6520 656c 7365 2046 616c 7365 2c54 7275  e else False,Tru
+00037ff0: 6520 6966 206e 6577 5f6c 696e 6520 656c  e if new_line el
+00038000: 7365 2046 616c 7365 2929 0a20 2020 2020  se False)).     
+00038010: 2020 2020 2020 2070 7269 6e74 2827 6967         print('ig
+00038020: 6e6f 7265 5f65 6d70 7479 2020 2020 2020  nore_empty      
+00038030: 2020 2020 3a7b 7d27 2e66 6f72 6d61 7428      :{}'.format(
+00038040: 6967 6e6f 7265 5f65 6d70 7479 2929 0a20  ignore_empty)). 
+00038050: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00038060: 2827 6d65 7373 6167 6520 2020 2020 2020  ('message       
+00038070: 2020 2020 2020 2020 3a5b 7b7d 5d27 2e66          :[{}]'.f
+00038080: 6f72 6d61 7428 6d73 6729 290a 2020 2020  ormat(msg)).    
+00038090: 2020 2020 2020 2020 7072 696e 7428 2769          print('i
+000380a0: 6e74 726f 2020 2020 2020 2020 2020 2020  ntro            
+000380b0: 2020 2020 203a 5b7b 7d5d 272e 666f 726d       :[{}]'.form
+000380c0: 6174 2869 6e74 726f 5f6d 7367 2929 0a20  at(intro_msg)). 
+000380d0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+000380e0: 2827 6c6f 6720 6c65 7665 6c20 2020 2020  ('log level     
+000380f0: 2020 2020 2020 2020 3a7b 7d20 3c20 7b7d          :{} < {}
+00038100: 2028 7072 696e 743a 7b7d 2927 2e66 6f72   (print:{})'.for
+00038110: 6d61 7428 7072 696e 7466 5f6c 6f67 5f62  mat(printf_log_b
+00038120: 6173 652c 6c6f 675f 6c65 7665 6c2c 2070  ase,log_level, p
+00038130: 7269 6e74 665f 6c6f 675f 6261 7365 203c  rintf_log_base <
+00038140: 206c 6f67 5f6c 6576 656c 2069 6620 4973   log_level if Is
+00038150: 496e 7428 7072 696e 7466 5f6c 6f67 5f62  Int(printf_log_b
+00038160: 6173 6529 2061 6e64 2049 7349 6e74 286c  ase) and IsInt(l
+00038170: 6f67 5f6c 6576 656c 2920 656c 7365 2054  og_level) else T
+00038180: 7275 6529 290a 2020 2020 2020 2020 2020  rue)).          
+00038190: 2020 7072 696e 7428 2762 6566 6f72 6520    print('before 
+000381a0: 6d6f 6465 2070 7269 6e74 2020 2020 203a  mode print     :
+000381b0: 5b7b 7d5d 272e 666f 726d 6174 2873 7461  [{}]'.format(sta
+000381c0: 7274 5f6e 6577 6c69 6e65 2b6d 7367 5f73  rt_newline+msg_s
+000381d0: 7472 2b6e 6577 5f6c 696e 6529 290a 0a20  tr+new_line)).. 
+000381e0: 2020 2023 2053 6176 6520 746f 2066 696c     # Save to fil
+000381f0: 6520 6f72 2070 7269 6e74 2074 6f20 7363  e or print to sc
+00038200: 7265 656e 2066 696c 7465 7220 7769 7468  reen filter with
+00038210: 206c 6f67 5f6c 6576 656c 2061 6e64 2061   log_level and a
+00038220: 6c72 6561 6479 206c 6f67 6769 6e67 2077  lready logging w
+00038230: 6974 6820 6c6f 6720 6675 6e63 7469 6f6e  ith log function
+00038240: 206f 7220 6e6f 742e 0a20 2020 2069 6620   or not..    if 
+00038250: 2764 2720 696e 2064 7370 2061 6e64 2049  'd' in dsp and I
+00038260: 7349 6e74 2870 7269 6e74 665f 6c6f 675f  sInt(printf_log_
+00038270: 6261 7365 2920 616e 6420 4973 496e 7428  base) and IsInt(
+00038280: 6c6f 675f 6c65 7665 6c29 3a0a 2020 2020  log_level):.    
+00038290: 2020 2020 6966 2070 7269 6e74 665f 6c6f      if printf_lo
+000382a0: 675f 6261 7365 203c 206c 6f67 5f6c 6576  g_base < log_lev
+000382b0: 656c 3a0a 2020 2020 2020 2020 2020 2020  el:.            
+000382c0: 7265 7475 726e 0a20 2020 2023 2069 6620  return.    # if 
+000382d0: 6a75 7374 2077 6869 7465 7370 6163 6520  just whitespace 
+000382e0: 7468 656e 206e 6f74 206e 6577 6c69 6e65  then not newline
+000382f0: 2c20 736f 6d65 7468 696e 6720 656c 7365  , something else
+00038300: 2077 6974 6820 6461 7461 2074 6865 6e20   with data then 
+00038310: 7768 6174 2065 7665 720a 2020 2020 2320  what ever.    # 
+00038320: 5361 7665 206d 7367 2074 6f20 6c6f 6766  Save msg to logf
+00038330: 696c 6520 7768 656e 2064 6566 696e 6564  ile when defined
+00038340: 206c 6f67 6669 6c65 0a20 2020 2069 6620   logfile.    if 
+00038350: 6c6f 6766 696c 653a 2023 2061 6c6c 206d  logfile: # all m
+00038360: 6f64 6520 6361 6e20 2865 7665 6e20 6966  ode can (even if
+00038370: 2064 2c20 662c 2069 2920 6a75 7374 206c   d, f, i) just l
+00038380: 6f67 696e 6720 746f 2066 696c 652e 0a20  oging to file.. 
+00038390: 2020 2020 2020 2066 6f72 2069 6920 696e         for ii in
+000383a0: 206c 6f67 6669 6c65 3a0a 2020 2020 2020   logfile:.      
+000383b0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+000383c0: 6e63 6528 6969 2c73 7472 2920 616e 6420  nce(ii,str) and 
+000383d0: 6969 3a0a 2020 2020 2020 2020 2020 2020  ii:.            
+000383e0: 2020 2020 6969 5f64 3d6f 732e 7061 7468      ii_d=os.path
+000383f0: 2e64 6972 6e61 6d65 2869 6929 0a20 2020  .dirname(ii).   
+00038400: 2020 2020 2020 2020 2020 2020 2069 695f               ii_
+00038410: 643d 6969 5f64 2069 6620 6969 5f64 2065  d=ii_d if ii_d e
+00038420: 6c73 6520 272e 2720 2320 4966 206a 7573  lse '.' # If jus
+00038430: 7420 6669 6c65 6e61 6d65 2074 6865 6e20  t filename then 
+00038440: 6469 7265 6374 6f72 7920 746f 202e 2863  directory to .(c
+00038450: 7572 7265 6e74 2064 6972 6563 746f 7279  urrent directory
+00038460: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00038470: 2020 6966 2069 6920 616e 6420 6f73 2e70    if ii and os.p
+00038480: 6174 682e 6973 6469 7228 6969 5f64 293a  ath.isdir(ii_d):
+00038490: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000384a0: 2020 2020 2069 6620 6e6f 7420 6d73 675f       if not msg_
+000384b0: 7374 723a 0a20 2020 2020 2020 2020 2020  str:.           
+000384c0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000384d0: 6462 675f 656d 7074 7920 616e 6420 6e6f  dbg_empty and no
+000384e0: 7420 6967 6e6f 7265 5f65 6d70 7479 3a20  t ignore_empty: 
+000384f0: 2020 2320 4967 6e6f 7265 2065 6d70 7479    # Ignore empty
+00038500: 2064 6174 6120 6f6e 2073 6372 6565 6e20   data on screen 
+00038510: 772f 6f20 6465 6275 6767 696e 6720 0a20  w/o debugging . 
+00038520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038530: 2020 2020 2020 2020 2020 2070 6172 656e             paren
+00038540: 745f 6e3d 6f70 7473 2e67 6574 2827 6361  t_n=opts.get('ca
+00038550: 6c6c 6572 5f70 6172 656e 7427 2920 6966  ller_parent') if
+00038560: 2069 7369 6e73 7461 6e63 6528 6f70 7473   isinstance(opts
+00038570: 2e67 6574 2827 6361 6c6c 6572 5f70 6172  .get('caller_par
+00038580: 656e 7427 292c 696e 7429 2065 6c73 6520  ent'),int) else 
+00038590: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
+000385a0: 2020 2020 2020 2020 2020 2020 2020 6172                ar
+000385b0: 673d 7b27 7061 7265 6e74 273a 7061 7265  g={'parent':pare
+000385c0: 6e74 5f6e 2c27 6c69 6e65 5f6e 756d 6265  nt_n,'line_numbe
+000385d0: 7227 3a54 7275 652c 2766 696c 656e 616d  r':True,'filenam
+000385e0: 6527 3a54 7275 652c 2761 7267 7327 3a46  e':True,'args':F
+000385f0: 616c 7365 2c27 6869 7374 6f72 7927 3a46  alse,'history':F
+00038600: 616c 7365 2c27 7472 6565 273a 4661 6c73  alse,'tree':Fals
+00038610: 657d 0a20 2020 2020 2020 2020 2020 2020  e}.             
+00038620: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00038630: 616c 6c5f 6e61 6d65 3d46 756e 6374 696f  all_name=Functio
+00038640: 6e4e 616d 6528 2a2a 6172 6729 0a20 2020  nName(**arg).   
+00038650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038660: 2020 2020 2020 2020 206d 7367 5f73 7472           msg_str
+00038670: 3d69 6e74 726f 5f6d 7367 202b 2043 6f6c  =intro_msg + Col
+00038680: 6f72 5374 7228 5772 6170 5374 7269 6e67  orStr(WrapString
+00038690: 2827 5b2a 2a20 456d 7074 792d 4461 7461  ('[** Empty-Data
+000386a0: 202a 2a5d 2028 7b7d 2927 2e66 6f72 6d61   **] ({})'.forma
+000386b0: 7428 6361 6c6c 5f6e 616d 6529 2c66 7370  t(call_name),fsp
+000386c0: 6163 653d 696e 7472 6f5f 6c65 6e2c 206e  ace=intro_len, n
+000386d0: 7370 6163 653d 696e 7472 6f5f 6c65 6e2c  space=intro_len,
+000386e0: 6d6f 6465 3d27 7370 6163 6527 292c 2a2a  mode='space'),**
+000386f0: 6f70 7473 290a 2020 2020 2020 2020 2020  opts).          
+00038700: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+00038710: 206d 7367 5f73 7472 3a20 7265 7475 726e   msg_str: return
+00038720: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00038730: 2020 2020 2020 2320 6966 2065 6e64 206f        # if end o
+00038740: 6620 6c69 6e65 2068 6176 6520 6e6f 206e  f line have no n
+00038750: 6577 6c69 6e65 2c20 6275 7420 6974 2068  ewline, but it h
+00038760: 6173 2069 6e74 726f 2074 6865 6e20 6164  as intro then ad
+00038770: 6469 6e67 2073 7461 7274 5f6e 6577 6c69  ding start_newli
+00038780: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
+00038790: 2020 2020 2020 2069 6620 696e 7472 6f5f         if intro_
+000387a0: 6d73 6720 616e 6420 6e6f 7420 6e6f 5f73  msg and not no_s
+000387b0: 7461 7274 5f6e 6577 6c69 6e65 3a0a 2020  tart_newline:.  
+000387c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000387d0: 2020 2020 2020 6966 2070 7269 6e74 665f        if printf_
+000387e0: 6e65 776c 696e 655f 696e 666f 2e47 6574  newline_info.Get
+000387f0: 2842 7974 6573 2869 6929 293a 200a 2020  (Bytes(ii)): .  
+00038800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038810: 2020 2020 2020 2020 2020 7374 6172 745f            start_
+00038820: 6e65 776c 696e 653d 275c 6e27 0a20 2020  newline='\n'.   
+00038830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038840: 2069 6620 7363 725f 6462 675f 7072 696e   if scr_dbg_prin
+00038850: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+00038860: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00038870: 2827 6d6f 6465 2020 2020 2020 2020 2020  ('mode          
+00038880: 2020 2020 2020 2020 3a7b 7d20 2862 6566          :{} (bef
+00038890: 6f72 6520 6e6f 206e 6577 6c69 6e65 3a7b  ore no newline:{
+000388a0: 7d29 272e 666f 726d 6174 2869 692c 5472  })'.format(ii,Tr
+000388b0: 7565 2069 6620 7072 696e 7466 5f6e 6577  ue if printf_new
+000388c0: 6c69 6e65 5f69 6e66 6f2e 4765 7428 4279  line_info.Get(By
+000388d0: 7465 7328 6969 2929 2065 6c73 6520 4661  tes(ii)) else Fa
+000388e0: 6c73 6529 290a 2020 2020 2020 2020 2020  lse)).          
+000388f0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+00038900: 696e 7428 2775 7064 6174 6564 2073 7461  int('updated sta
+00038910: 7274 206e 6577 6c69 6e65 203a 7b7d 272e  rt newline :{}'.
+00038920: 666f 726d 6174 2854 7275 6520 6966 2073  format(True if s
+00038930: 7461 7274 5f6e 6577 6c69 6e65 2065 6c73  tart_newline els
+00038940: 6520 4661 6c73 6529 290a 2020 2020 2020  e False)).      
+00038950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038960: 2020 7072 696e 7428 2770 7269 6e74 2020    print('print  
+00038970: 2020 2020 2020 2020 2020 2020 2020 203a                 :
+00038980: 5b7b 7d5d 272e 666f 726d 6174 2873 7461  [{}]'.format(sta
+00038990: 7274 5f6e 6577 6c69 6e65 2b6d 7367 5f73  rt_newline+msg_s
+000389a0: 7472 2b6e 6577 5f6c 696e 6529 290a 2020  tr+new_line)).  
 000389b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000389c0: 2020 7072 696e 7428 2770 7269 6e74 2020    print('print  
-000389d0: 2020 2020 2020 2020 2020 2020 2020 203a                 :
-000389e0: 5b7b 7d5d 272e 666f 726d 6174 2873 7461  [{}]'.format(sta
-000389f0: 7274 5f6e 6577 6c69 6e65 2b6d 7367 5f73  rt_newline+msg_s
-00038a00: 7472 2b6e 6577 5f6c 696e 6529 290a 2020  tr+new_line)).  
-00038a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038a20: 2020 2020 2020 7072 696e 7428 272d 2d2d        print('---
-00038a30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038a40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038a50: 2d2d 2d2d 2d2d 2729 0a20 2020 2020 2020  ------').       
-00038a60: 2020 2020 2020 2020 2020 2020 206c 6f67               log
-00038a70: 5f70 3d54 7275 6520 2023 2077 7269 7469  _p=True  # writi
-00038a80: 6e67 2074 6f20 6c6f 675f 6669 6c65 0a20  ng to log_file. 
-00038a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038aa0: 2020 2077 6974 6820 6f70 656e 2869 692c     with open(ii,
-00038ab0: 2761 2b27 2920 6173 2066 3a0a 2020 2020  'a+') as f:.    
+000389c0: 2020 2020 2020 7072 696e 7428 272d 2d2d        print('---
+000389d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000389e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000389f0: 2d2d 2d2d 2d2d 2729 0a20 2020 2020 2020  ------').       
+00038a00: 2020 2020 2020 2020 2020 2020 206c 6f67               log
+00038a10: 5f70 3d54 7275 6520 2023 2077 7269 7469  _p=True  # writi
+00038a20: 6e67 2074 6f20 6c6f 675f 6669 6c65 0a20  ng to log_file. 
+00038a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038a40: 2020 2077 6974 6820 6f70 656e 2869 692c     with open(ii,
+00038a50: 2761 2b27 2920 6173 2066 3a0a 2020 2020  'a+') as f:.    
+00038a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038a70: 2020 2020 662e 7772 6974 6528 7374 6172      f.write(star
+00038a80: 745f 6e65 776c 696e 652b 6d73 675f 7374  t_newline+msg_st
+00038a90: 722b 6e65 775f 6c69 6e65 290a 2020 2020  r+new_line).    
+00038aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00038ab0: 6966 206e 6577 5f6c 696e 653a 0a20 2020  if new_line:.   
 00038ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038ad0: 2020 2020 662e 7772 6974 6528 7374 6172      f.write(star
-00038ae0: 745f 6e65 776c 696e 652b 6d73 675f 7374  t_newline+msg_st
-00038af0: 722b 6e65 775f 6c69 6e65 290a 2020 2020  r+new_line).    
-00038b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038b10: 6966 206e 6577 5f6c 696e 653a 0a20 2020  if new_line:.   
-00038b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038b30: 2020 2020 2070 7269 6e74 665f 6e65 776c       printf_newl
-00038b40: 696e 655f 696e 666f 2e44 656c 2842 7974  ine_info.Del(Byt
-00038b50: 6573 2869 6929 290a 2020 2020 2020 2020  es(ii)).        
-00038b60: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00038b70: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00038b80: 2020 2020 2020 2020 2020 7072 696e 7466            printf
-00038b90: 5f6e 6577 6c69 6e65 5f69 6e66 6f2e 5075  _newline_info.Pu
-00038ba0: 7428 4279 7465 7328 6969 292c 5472 7565  t(Bytes(ii),True
-00038bb0: 290a 2020 2020 6966 2069 676e 6f72 655f  ).    if ignore_
-00038bc0: 656d 7074 7920 6973 2054 7275 6520 616e  empty is True an
-00038bd0: 6420 6e6f 7420 6d73 675f 7374 723a 2072  d not msg_str: r
-00038be0: 6574 7572 6e20 2320 4967 6e6f 7265 2065  eturn # Ignore e
-00038bf0: 6d70 7479 2064 6174 6120 6f6e 2073 6372  mpty data on scr
-00038c00: 6565 6e0a 2020 2020 2320 7072 696e 7420  een.    # print 
-00038c10: 6d73 6720 746f 2073 6372 6565 6e20 7768  msg to screen wh
-00038c20: 656e 2064 6964 206e 6f74 2064 6f6e 6520  en did not done 
-00038c30: 7769 7468 206c 6f67 6669 6c65 206f 7220  with logfile or 
-00038c40: 6c6f 6720 6675 6e63 7469 6f6e 0a20 2020  log function.   
-00038c50: 2069 6620 2765 2720 696e 2064 7370 3a0a   if 'e' in dsp:.
-00038c60: 2020 2020 2020 2020 2320 6966 2065 6e64          # if end
-00038c70: 206f 6620 6c69 6e65 2068 6176 6520 6e6f   of line have no
-00038c80: 206e 6577 6c69 6e65 2c20 6275 7420 6974   newline, but it
-00038c90: 2068 6173 2069 6e74 726f 2074 6865 6e20   has intro then 
-00038ca0: 6164 6469 6e67 2073 7461 7274 5f6e 6577  adding start_new
-00038cb0: 6c69 6e65 0a20 2020 2020 2020 2069 6620  line.        if 
-00038cc0: 696e 7472 6f5f 6d73 6720 616e 6420 6e6f  intro_msg and no
-00038cd0: 7420 6e6f 5f73 7461 7274 5f6e 6577 6c69  t no_start_newli
-00038ce0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00038cf0: 6966 2070 7269 6e74 665f 6e65 776c 696e  if printf_newlin
-00038d00: 655f 696e 666f 2e47 6574 2827 6527 293a  e_info.Get('e'):
-00038d10: 200a 2020 2020 2020 2020 2020 2020 2020   .              
-00038d20: 2020 7374 6172 745f 6e65 776c 696e 653d    start_newline=
-00038d30: 275c 6e27 0a20 2020 2020 2020 2069 6620  '\n'.        if 
-00038d40: 7363 725f 6462 675f 7072 696e 743a 0a20  scr_dbg_print:. 
-00038d50: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00038d60: 2827 6d6f 6465 2020 2020 2020 2020 2020  ('mode          
-00038d70: 2020 2020 2020 2020 3a7b 7d20 2862 6566          :{} (bef
-00038d80: 6f72 6520 6e6f 206e 6577 6c69 6e65 3a7b  ore no newline:{
-00038d90: 7d29 272e 666f 726d 6174 2827 6527 2c54  })'.format('e',T
-00038da0: 7275 6520 6966 2070 7269 6e74 665f 6e65  rue if printf_ne
-00038db0: 776c 696e 655f 696e 666f 2e47 6574 2827  wline_info.Get('
-00038dc0: 6527 2920 656c 7365 2046 616c 7365 2929  e') else False))
-00038dd0: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-00038de0: 6e74 2827 7570 6461 7465 6420 7374 6172  nt('updated star
-00038df0: 7420 6e65 776c 696e 6520 3a7b 7d27 2e66  t newline :{}'.f
-00038e00: 6f72 6d61 7428 5472 7565 2069 6620 7374  ormat(True if st
-00038e10: 6172 745f 6e65 776c 696e 6520 656c 7365  art_newline else
-00038e20: 2046 616c 7365 2929 0a20 2020 2020 2020   False)).       
-00038e30: 2020 2020 2070 7269 6e74 2827 7072 696e       print('prin
-00038e40: 7420 2020 2020 2020 2020 2020 2020 2020  t               
-00038e50: 2020 3a5b 7b7d 5d27 2e66 6f72 6d61 7428    :[{}]'.format(
-00038e60: 7374 6172 745f 6e65 776c 696e 652b 6d73  start_newline+ms
-00038e70: 675f 7374 722b 6e65 775f 6c69 6e65 2929  g_str+new_line))
-00038e80: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-00038e90: 6e74 2827 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  nt('------------
-00038ea0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00038eb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d27 290a  -------------').
-00038ec0: 2020 2020 2020 2020 5374 6445 7272 2873          StdErr(s
-00038ed0: 7461 7274 5f6e 6577 6c69 6e65 2b6d 7367  tart_newline+msg
-00038ee0: 5f73 7472 2b6e 6577 5f6c 696e 6529 0a20  _str+new_line). 
-00038ef0: 2020 2020 2020 2070 7269 6e74 665f 6e65         printf_ne
-00038f00: 776c 696e 655f 696e 666f 2e50 7574 2827  wline_info.Put('
-00038f10: 6527 2c46 616c 7365 2069 6620 6e65 775f  e',False if new_
-00038f20: 6c69 6e65 2065 6c73 6520 5472 7565 290a  line else True).
-00038f30: 2020 2020 656c 6966 2027 6327 2069 6e20      elif 'c' in 
-00038f40: 6473 703a 2023 4469 7370 6c61 7920 746f  dsp: #Display to
-00038f50: 2063 6f6e 736f 6c65 2028 6974 2061 6c73   console (it als
-00038f60: 6f20 776f 726b 2077 6974 6820 526f 626f  o work with Robo
-00038f70: 7420 4672 616d 6577 6f72 6b29 0a20 2020  t Framework).   
-00038f80: 2020 2020 2070 7269 6e74 2873 7461 7274       print(start
-00038f90: 5f6e 6577 6c69 6e65 2b6d 7367 5f73 7472  _newline+msg_str
-00038fa0: 2b6e 6577 5f6c 696e 652c 656e 643d 2727  +new_line,end=''
-00038fb0: 2c66 696c 653d 7379 732e 5f5f 7374 646f  ,file=sys.__stdo
-00038fc0: 7574 5f5f 290a 2020 2020 656c 6966 2027  ut__).    elif '
-00038fd0: 7327 2069 6e20 6473 7020 6f72 2027 6127  s' in dsp or 'a'
-00038fe0: 2069 6e20 6473 703a 2023 2050 7269 6e74   in dsp: # Print
-00038ff0: 206f 7574 206f 6e20 7363 7265 656e 0a20   out on screen. 
-00039000: 2020 2020 2020 2069 6620 696e 7472 6f5f         if intro_
-00039010: 6d73 6720 616e 6420 6e6f 7420 6e6f 5f73  msg and not no_s
-00039020: 7461 7274 5f6e 6577 6c69 6e65 3a0a 2020  tart_newline:.  
-00039030: 2020 2020 2020 2020 2020 6966 2070 7269            if pri
-00039040: 6e74 665f 6e65 776c 696e 655f 696e 666f  ntf_newline_info
-00039050: 2e47 6574 2827 6127 2069 6620 2761 2720  .Get('a' if 'a' 
-00039060: 696e 2064 7370 2065 6c73 6520 2773 2729  in dsp else 's')
-00039070: 3a20 0a20 2020 2020 2020 2020 2020 2020  : .             
-00039080: 2020 2073 7461 7274 5f6e 6577 6c69 6e65     start_newline
-00039090: 3d27 5c6e 270a 2020 2020 2020 2020 6966  ='\n'.        if
-000390a0: 2073 6372 5f64 6267 5f70 7269 6e74 3a0a   scr_dbg_print:.
-000390b0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-000390c0: 7428 276d 6f64 6520 2020 2020 2020 2020  t('mode         
-000390d0: 2020 2020 2020 2020 203a 7b7d 2028 6265           :{} (be
-000390e0: 666f 7265 206e 6f20 6e65 776c 696e 653a  fore no newline:
-000390f0: 7b7d 2927 2e66 6f72 6d61 7428 2761 272c  {})'.format('a',
-00039100: 5472 7565 2069 6620 7072 696e 7466 5f6e  True if printf_n
-00039110: 6577 6c69 6e65 5f69 6e66 6f2e 4765 7428  ewline_info.Get(
-00039120: 2761 2720 6966 2027 6127 2069 6e20 6473  'a' if 'a' in ds
-00039130: 7020 656c 7365 2027 7327 2920 656c 7365  p else 's') else
-00039140: 2046 616c 7365 2929 0a20 2020 2020 2020   False)).       
-00039150: 2020 2020 2070 7269 6e74 2827 7570 6461       print('upda
-00039160: 7465 6420 7374 6172 7420 6e65 776c 696e  ted start newlin
-00039170: 6520 3a7b 7d27 2e66 6f72 6d61 7428 5472  e :{}'.format(Tr
-00039180: 7565 2069 6620 7374 6172 745f 6e65 776c  ue if start_newl
-00039190: 696e 6520 656c 7365 2046 616c 7365 2929  ine else False))
-000391a0: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-000391b0: 6e74 2827 7072 696e 7420 2020 2020 2020  nt('print       
-000391c0: 2020 2020 2020 2020 2020 3a5b 7b7d 5d27            :[{}]'
-000391d0: 2e66 6f72 6d61 7428 7374 6172 745f 6e65  .format(start_ne
-000391e0: 776c 696e 652b 6d73 675f 7374 722b 6e65  wline+msg_str+ne
-000391f0: 775f 6c69 6e65 2929 0a20 2020 2020 2020  w_line)).       
-00039200: 2020 2020 2070 7269 6e74 2827 2d2d 2d2d       print('----
-00039210: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00039220: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00039230: 2d2d 2d2d 2d27 290a 2020 2020 2020 2020  -----').        
-00039240: 2320 6966 2065 6e64 206f 6620 6c69 6e65  # if end of line
-00039250: 2068 6176 6520 6e6f 206e 6577 6c69 6e65   have no newline
-00039260: 2c20 6275 7420 6974 2068 6173 2069 6e74  , but it has int
-00039270: 726f 2074 6865 6e20 6164 6469 6e67 2073  ro then adding s
-00039280: 7461 7274 5f6e 6577 6c69 6e65 0a20 2020  tart_newline.   
-00039290: 2020 2020 2053 7464 4f75 7428 7374 6172       StdOut(star
-000392a0: 745f 6e65 776c 696e 652b 6d73 675f 7374  t_newline+msg_st
-000392b0: 722b 6e65 775f 6c69 6e65 290a 2020 2020  r+new_line).    
-000392c0: 2020 2020 7072 696e 7466 5f6e 6577 6c69      printf_newli
-000392d0: 6e65 5f69 6e66 6f2e 5075 7428 2761 2720  ne_info.Put('a' 
-000392e0: 6966 2027 6127 2069 6e20 6473 7020 656c  if 'a' in dsp el
-000392f0: 7365 2027 7327 2c46 616c 7365 2069 6620  se 's',False if 
-00039300: 6e65 775f 6c69 6e65 2065 6c73 6520 5472  new_line else Tr
-00039310: 7565 290a 2020 2020 2320 7265 7475 726e  ue).    # return
-00039320: 206d 7367 2077 6865 6e20 7265 7175 6972   msg when requir
-00039330: 6564 2072 6574 7572 6e20 7768 6174 6576  ed return whatev
-00039340: 6572 2063 6f6e 6469 7469 6f6e 0a20 2020  er condition.   
-00039350: 2069 6620 2772 2720 696e 2064 7370 3a0a   if 'r' in dsp:.
-00039360: 2020 2020 2020 2020 7265 7475 726e 206d          return m
-00039370: 7367 5f73 7472 0a0a 6465 6620 436f 6c6f  sg_str..def Colo
-00039380: 7253 7472 286d 7367 2c2a 2a6f 7074 7329  rStr(msg,**opts)
-00039390: 3a0a 2020 2020 636f 6c6f 723d 6f70 7473  :.    color=opts
-000393a0: 2e67 6574 2827 636f 6c6f 7227 2c4e 6f6e  .get('color',Non
-000393b0: 6529 0a20 2020 2063 6f6c 6f72 5f64 623d  e).    color_db=
-000393c0: 6f70 7473 2e67 6574 2827 636f 6c6f 725f  opts.get('color_
-000393d0: 6462 272c 7b27 626c 7565 273a 2033 342c  db',{'blue': 34,
-000393e0: 2027 6772 6579 273a 2033 302c 2027 7965   'grey': 30, 'ye
-000393f0: 6c6c 6f77 273a 2033 332c 2027 6772 6565  llow': 33, 'gree
-00039400: 6e27 3a20 3332 2c20 2763 7961 6e27 3a20  n': 32, 'cyan': 
-00039410: 3336 2c20 276d 6167 656e 7461 273a 2033  36, 'magenta': 3
-00039420: 352c 2027 7768 6974 6527 3a20 3337 2c20  5, 'white': 37, 
-00039430: 2772 6564 273a 2033 317d 290a 2020 2020  'red': 31}).    
-00039440: 6267 5f63 6f6c 6f72 3d6f 7074 732e 6765  bg_color=opts.ge
-00039450: 7428 2762 675f 636f 6c6f 7227 2c4e 6f6e  t('bg_color',Non
-00039460: 6529 0a20 2020 2062 675f 636f 6c6f 725f  e).    bg_color_
-00039470: 6462 3d6f 7074 732e 6765 7428 2762 675f  db=opts.get('bg_
-00039480: 636f 6c6f 725f 6462 272c 7b27 6379 616e  color_db',{'cyan
-00039490: 273a 2034 362c 2027 7768 6974 6527 3a20  ': 46, 'white': 
-000394a0: 3437 2c20 2767 7265 7927 3a20 3430 2c20  47, 'grey': 40, 
-000394b0: 2779 656c 6c6f 7727 3a20 3433 2c20 2762  'yellow': 43, 'b
-000394c0: 6c75 6527 3a20 3434 2c20 276d 6167 656e  lue': 44, 'magen
-000394d0: 7461 273a 2034 352c 2027 7265 6427 3a20  ta': 45, 'red': 
-000394e0: 3431 2c20 2767 7265 656e 273a 2034 327d  41, 'green': 42}
-000394f0: 290a 2020 2020 6174 7472 3d6f 7074 732e  ).    attr=opts.
-00039500: 6765 7428 2761 7474 7227 2c4e 6f6e 6529  get('attr',None)
-00039510: 0a20 2020 2061 7474 725f 6462 3d6f 7074  .    attr_db=opt
-00039520: 732e 6765 7428 2761 7474 725f 6462 272c  s.get('attr_db',
-00039530: 7b27 7265 7665 7273 6527 3a20 372c 2027  {'reverse': 7, '
-00039540: 626c 696e 6b27 3a20 352c 2763 6f6e 6365  blink': 5,'conce
-00039550: 616c 6564 273a 2038 2c20 2775 6e64 6572  aled': 8, 'under
-00039560: 6c69 6e65 273a 2034 2c20 2762 6f6c 6427  line': 4, 'bold'
-00039570: 3a20 317d 290a 2020 2020 6966 2049 734e  : 1}).    if IsN
-00039580: 6f6e 6528 6f73 2e67 6574 656e 7628 2741  one(os.getenv('A
-00039590: 4e53 495f 434f 4c4f 5253 5f44 4953 4142  NSI_COLORS_DISAB
-000395a0: 4c45 4427 2929 2061 6e64 2028 636f 6c6f  LED')) and (colo
-000395b0: 7220 6f72 2062 675f 636f 6c6f 7220 6f72  r or bg_color or
-000395c0: 2061 7474 7229 3a0a 2020 2020 2020 2020   attr):.        
-000395d0: 7265 7365 743d 2727 275c 3033 335b 306d  reset='''\033[0m
-000395e0: 2727 270a 2020 2020 2020 2020 666d 745f  '''.        fmt_
-000395f0: 6d73 673d 2727 275c 3033 335b 2564 6d25  msg='''\033[%dm%
-00039600: 7327 2727 0a20 2020 2020 2020 2069 6620  s'''.        if 
-00039610: 636f 6c6f 7220 616e 6420 636f 6c6f 7220  color and color 
-00039620: 696e 2063 6f6c 6f72 5f64 623a 0a20 2020  in color_db:.   
-00039630: 2020 2020 2020 2020 206d 7367 3d66 6d74           msg=fmt
-00039640: 5f6d 7367 2025 2028 636f 6c6f 725f 6462  _msg % (color_db
-00039650: 5b63 6f6c 6f72 5d2c 6d73 6729 0a20 2020  [color],msg).   
-00039660: 2020 2020 2069 6620 6267 5f63 6f6c 6f72       if bg_color
-00039670: 2061 6e64 2062 675f 636f 6c6f 7220 696e   and bg_color in
-00039680: 2062 675f 636f 6c6f 725f 6462 3a0a 2020   bg_color_db:.  
-00039690: 2020 2020 2020 2020 2020 6d73 673d 666d            msg=fm
-000396a0: 745f 6d73 6720 2520 2863 6f6c 6f72 5f64  t_msg % (color_d
-000396b0: 625b 6267 5f63 6f6c 6f72 5d2c 6d73 6729  b[bg_color],msg)
-000396c0: 0a20 2020 2020 2020 2069 6620 6174 7472  .        if attr
-000396d0: 2061 6e64 2061 7474 7220 696e 2061 7474   and attr in att
-000396e0: 725f 6462 3a0a 2020 2020 2020 2020 2020  r_db:.          
-000396f0: 2020 6d73 673d 666d 745f 6d73 6720 2520    msg=fmt_msg % 
-00039700: 2861 7474 725f 6462 5b61 7474 725d 2c6d  (attr_db[attr],m
-00039710: 7367 290a 2020 2020 2020 2020 7265 7475  sg).        retu
-00039720: 726e 206d 7367 2b72 6573 6574 2023 5375  rn msg+reset #Su
-00039730: 7070 6f72 7420 436f 6c6f 720a 2020 2020  pport Color.    
-00039740: 7265 7475 726e 206d 7367 2023 4e6f 7420  return msg #Not 
-00039750: 7375 7070 6f72 7420 636f 6c6f 720a 0a64  support color..d
-00039760: 6566 2043 6c65 616e 416e 7369 2864 6174  ef CleanAnsi(dat
-00039770: 6129 3a0a 2020 2020 616e 7369 5f65 7363  a):.    ansi_esc
-00039780: 6170 6520 3d20 7265 2e63 6f6d 7069 6c65  ape = re.compile
-00039790: 2872 275c 7831 425c 5b5b 302d 3f5d 2a5b  (r'\x1B\[[0-?]*[
-000397a0: 202d 2f5d 2a5b 402d 7e5d 2729 0a20 2020   -/]*[@-~]').   
-000397b0: 2069 6620 5479 7065 2864 6174 612c 2827   if Type(data,('
-000397c0: 7374 7227 2c27 6279 7465 7327 2929 3a0a  str','bytes')):.
-000397d0: 2020 2020 2020 2020 7265 7475 726e 2061          return a
-000397e0: 6e73 695f 6573 6361 7065 2e73 7562 2827  nsi_escape.sub('
-000397f0: 272c 5374 7228 6461 7461 2929 0a20 2020  ',Str(data)).   
-00039800: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
-00039810: 2864 6174 612c 286c 6973 742c 7475 706c  (data,(list,tupl
-00039820: 6529 293a 0a20 2020 2020 2020 2072 6574  e)):.        ret
-00039830: 7572 6e20 5b43 6c65 616e 416e 7369 2869  urn [CleanAnsi(i
-00039840: 6929 2066 6f72 2069 6920 696e 2064 6174  i) for ii in dat
-00039850: 615d 0a20 2020 2065 6c69 6620 6973 696e  a].    elif isin
-00039860: 7374 616e 6365 2864 6174 612c 6469 6374  stance(data,dict
-00039870: 293a 0a20 2020 2020 2020 2066 6f72 2069  ):.        for i
-00039880: 2069 6e20 6461 7461 3a0a 2020 2020 2020   in data:.      
-00039890: 2020 2020 2020 6461 7461 5b69 5d3d 436c        data[i]=Cl
-000398a0: 6561 6e41 6e73 6928 6461 7461 5b69 5d29  eanAnsi(data[i])
-000398b0: 0a20 2020 2072 6574 7572 6e20 6461 7461  .    return data
-000398c0: 0a0a 6465 6620 636c 695f 696e 7075 7428  ..def cli_input(
-000398d0: 6d73 672c 2a2a 6f70 7473 293a 0a20 2020  msg,**opts):.   
-000398e0: 2027 2727 0a20 2020 2043 4c49 2049 6e70   '''.    CLI Inp
-000398f0: 7574 2063 6f6d 6d61 6e64 0a20 2020 2068  ut command.    h
-00039900: 6964 6465 6e20 6f72 2070 6173 7377 6420  idden or passwd 
-00039910: 3d20 5472 7565 203a 2069 6e70 7574 2061  = True : input a
-00039920: 7320 7061 7373 776f 7264 2c20 4661 6c73  s password, Fals
-00039930: 653a 2028 6465 6661 756c 7429 206e 6f72  e: (default) nor
-00039940: 6d61 6c20 7465 7874 2069 6e70 7574 0a20  mal text input. 
-00039950: 2020 2027 2727 0a20 2020 2068 6964 6465     '''.    hidde
-00039960: 6e3d 6f70 7473 2e67 6574 2827 6869 6464  n=opts.get('hidd
-00039970: 656e 272c 6f70 7473 2e67 6574 2827 7061  en',opts.get('pa
-00039980: 7373 7764 272c 6f70 7473 2e67 6574 2827  sswd',opts.get('
-00039990: 7061 7373 776f 7264 272c 4661 6c73 6529  password',False)
-000399a0: 2929 0a20 2020 2069 6620 6869 6464 656e  )).    if hidden
-000399b0: 3a0a 2020 2020 2020 2020 6966 2073 7973  :.        if sys
-000399c0: 2e73 7464 696e 2e69 7361 7474 7928 293a  .stdin.isatty():
-000399d0: 0a20 2020 2020 2020 2020 2020 2070 203d  .            p =
-000399e0: 2067 6574 7061 7373 2e67 6574 7061 7373   getpass.getpass
-000399f0: 286d 7367 290a 2020 2020 2020 2020 656c  (msg).        el
-00039a00: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00039a10: 7072 696e 7466 286d 7367 2c65 6e64 5f6c  printf(msg,end_l
-00039a20: 696e 653d 2727 290a 2020 2020 2020 2020  ine='').        
-00039a30: 2020 2020 7020 3d20 7379 732e 7374 6469      p = sys.stdi
-00039a40: 6e2e 7265 6164 6c69 6e65 2829 2e72 7374  n.readline().rst
-00039a50: 7269 7028 290a 2020 2020 656c 7365 3a0a  rip().    else:.
-00039a60: 2020 2020 2020 2020 6966 2050 7956 6572          if PyVer
-00039a70: 2832 293a 0a20 2020 2020 2020 2020 2020  (2):.           
-00039a80: 2070 3d72 6177 5f69 6e70 7574 286d 7367   p=raw_input(msg
-00039a90: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
-00039aa0: 2020 2020 2020 2020 2020 2020 703d 696e              p=in
-00039ab0: 7075 7428 6d73 6729 0a20 2020 2072 6574  put(msg).    ret
-00039ac0: 7572 6e20 700a 0a64 6566 2054 7970 6544  urn p..def TypeD
-00039ad0: 6174 6128 7372 632c 7761 6e74 5f74 7970  ata(src,want_typ
-00039ae0: 653d 4e6f 6e65 2c64 6566 6175 6c74 3d27  e=None,default='
-00039af0: 6f72 6727 2c73 706c 6974 6572 3d4e 6f6e  org',spliter=Non
-00039b00: 6529 3a0a 2020 2020 2727 2743 6f6e 7665  e):.    '''Conve
-00039b10: 7274 2028 696e 7075 7429 6461 7461 2074  rt (input)data t
-00039b20: 6f20 7761 6e74 2074 7970 6520 2865 783a  o want type (ex:
-00039b30: 2073 7472 202d 3e20 6c69 7374 2c20 696e   str -> list, in
-00039b40: 742c 202e 2e2e 292c 2063 616e 206e 6f74  t, ...), can not
-00039b50: 2063 6f6e 7665 7274 2074 6f20 7479 7065   convert to type
-00039b60: 2074 6865 6e20 7265 7475 726e 2046 616c   then return Fal
-00039b70: 7365 2727 270a 2020 2020 6966 2054 7970  se'''.    if Typ
-00039b80: 6528 7761 6e74 5f74 7970 652c 2773 7472  e(want_type,'str
-00039b90: 2729 3a0a 2020 2020 2020 2020 6966 2069  '):.        if i
-00039ba0: 7369 6e73 7461 6e63 6528 7372 632c 286c  sinstance(src,(l
-00039bb0: 6973 742c 7475 706c 6529 293a 0a20 2020  ist,tuple)):.   
-00039bc0: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-00039bd0: 6973 696e 7374 616e 6365 2873 706c 6974  isinstance(split
-00039be0: 6572 2c73 7472 293a 2073 706c 6974 6572  er,str): spliter
-00039bf0: 3d27 2027 0a20 2020 2020 2020 2020 2020  =' '.           
-00039c00: 2072 6574 7572 6e20 4a6f 696e 2853 7472   return Join(Str
-00039c10: 2873 7263 292c 5374 7228 7370 6c69 7465  (src),Str(splite
-00039c20: 7229 290a 2020 2020 2020 2020 656c 7365  r)).        else
-00039c30: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00039c40: 7475 726e 2053 7472 2873 7263 2c6d 6f64  turn Str(src,mod
-00039c50: 653d 2766 6f72 6365 2729 0a20 2020 2065  e='force').    e
-00039c60: 6c69 6620 5479 7065 2877 616e 745f 7479  lif Type(want_ty
-00039c70: 7065 2c27 6279 7465 7327 293a 0a20 2020  pe,'bytes'):.   
-00039c80: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-00039c90: 6365 2873 7263 2c28 6c69 7374 2c74 7570  ce(src,(list,tup
-00039ca0: 6c65 2929 3a0a 2020 2020 2020 2020 2020  le)):.          
-00039cb0: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
-00039cc0: 6e63 6528 7370 6c69 7465 722c 7374 7229  nce(spliter,str)
-00039cd0: 3a20 7370 6c69 7465 723d 6227 2027 0a20  : spliter=b' '. 
-00039ce0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00039cf0: 6e20 4a6f 696e 2842 7974 6573 2873 7263  n Join(Bytes(src
-00039d00: 292c 4279 7465 7328 7370 6c69 7465 7229  ),Bytes(spliter)
-00039d10: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
-00039d20: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00039d30: 726e 2042 7974 6573 2873 7263 290a 2020  rn Bytes(src).  
-00039d40: 2020 656c 6966 2054 7970 6528 7761 6e74    elif Type(want
-00039d50: 5f74 7970 652c 2769 6e74 2729 3a0a 2020  _type,'int'):.  
-00039d60: 2020 2020 2020 7265 7475 726e 2049 6e74        return Int
-00039d70: 2873 7263 2c65 7272 3d54 7275 6529 0a20  (src,err=True). 
-00039d80: 2020 2065 6c69 6620 5479 7065 2877 616e     elif Type(wan
-00039d90: 745f 7479 7065 2c28 276c 6973 7427 2c27  t_type,('list','
-00039da0: 7475 706c 6527 2929 2061 6e64 2069 7369  tuple')) and isi
-00039db0: 6e73 7461 6e63 6528 7372 632c 7374 7229  nstance(src,str)
-00039dc0: 2061 6e64 2069 7369 6e73 7461 6e63 6528   and isinstance(
-00039dd0: 7370 6c69 7465 722c 7374 7229 3a0a 2020  spliter,str):.  
-00039de0: 2020 2020 2020 6966 2054 7970 6528 7761        if Type(wa
-00039df0: 6e74 5f74 7970 652c 2774 7570 6c65 2729  nt_type,'tuple')
-00039e00: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00039e10: 7475 726e 2074 7570 6c65 2853 706c 6974  turn tuple(Split
-00039e20: 2873 7263 2c73 706c 6974 6572 2929 0a20  (src,spliter)). 
-00039e30: 2020 2020 2020 2072 6574 7572 6e20 5370         return Sp
-00039e40: 6c69 7428 7372 632c 7370 6c69 7465 7229  lit(src,spliter)
-00039e50: 0a20 2020 2065 6c69 6620 5479 7065 2877  .    elif Type(w
-00039e60: 616e 745f 7479 7065 2c27 7475 706c 6527  ant_type,'tuple'
-00039e70: 2920 616e 6420 6973 696e 7374 616e 6365  ) and isinstance
-00039e80: 2873 7263 2c28 6c69 7374 2c64 6963 7429  (src,(list,dict)
-00039e90: 293a 0a20 2020 2020 2020 2069 6620 6973  ):.        if is
-00039ea0: 696e 7374 616e 6365 2873 7263 2c64 6963  instance(src,dic
-00039eb0: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
-00039ec0: 6966 2073 706c 6974 6572 203d 3d20 276b  if spliter == 'k
-00039ed0: 6579 273a 0a20 2020 2020 2020 2020 2020  ey':.           
-00039ee0: 2020 2020 2072 6574 7572 6e20 7475 706c       return tupl
-00039ef0: 6528 7372 632e 6b65 7973 2829 290a 2020  e(src.keys()).  
-00039f00: 2020 2020 2020 2020 2020 656c 6966 2073            elif s
-00039f10: 706c 6974 6572 203d 3d20 2776 616c 7565  pliter == 'value
-00039f20: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-00039f30: 2020 2072 6574 7572 6e20 7475 706c 6528     return tuple(
-00039f40: 7372 632e 7661 6c75 6573 2829 290a 2020  src.values()).  
-00039f50: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00039f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00039f70: 7265 7475 726e 2074 7570 6c65 2873 7263  return tuple(src
-00039f80: 2e69 7465 6d73 2829 290a 2020 2020 2020  .items()).      
-00039f90: 2020 7265 7475 726e 2074 7570 6c65 2873    return tuple(s
-00039fa0: 7263 290a 2020 2020 656c 6966 2054 7970  rc).    elif Typ
-00039fb0: 6528 7761 6e74 5f74 7970 652c 276c 6973  e(want_type,'lis
-00039fc0: 7427 2920 616e 6420 6973 696e 7374 616e  t') and isinstan
-00039fd0: 6365 2873 7263 2c28 7475 706c 652c 6469  ce(src,(tuple,di
-00039fe0: 6374 2929 3a0a 2020 2020 2020 2020 6966  ct)):.        if
-00039ff0: 2069 7369 6e73 7461 6e63 6528 7372 632c   isinstance(src,
-0003a000: 6469 6374 293a 0a20 2020 2020 2020 2020  dict):.         
-0003a010: 2020 2069 6620 7370 6c69 7465 7220 3d3d     if spliter ==
-0003a020: 2027 6b65 7927 3a0a 2020 2020 2020 2020   'key':.        
-0003a030: 2020 2020 2020 2020 7265 7475 726e 206c          return l
-0003a040: 6973 7428 7372 632e 6b65 7973 2829 290a  ist(src.keys()).
-0003a050: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-0003a060: 2073 706c 6974 6572 203d 3d20 2776 616c   spliter == 'val
-0003a070: 7565 273a 0a20 2020 2020 2020 2020 2020  ue':.           
-0003a080: 2020 2020 2072 6574 7572 6e20 6c69 7374       return list
-0003a090: 2873 7263 2e76 616c 7565 7328 2929 0a20  (src.values()). 
-0003a0a0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0003a0b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003a0c0: 2072 6574 7572 6e20 6c69 7374 2873 7263   return list(src
-0003a0d0: 2e69 7465 6d73 2829 290a 2020 2020 2020  .items()).      
-0003a0e0: 2020 7265 7475 726e 206c 6973 7428 7372    return list(sr
-0003a0f0: 6329 0a20 2020 2065 6c69 6620 5479 7065  c).    elif Type
-0003a100: 2873 7263 2c77 616e 745f 7479 7065 293a  (src,want_type):
-0003a110: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0003a120: 7372 630a 2020 2020 6966 2054 7970 6528  src.    if Type(
-0003a130: 7372 632c 2827 7374 7227 2c27 6279 7465  src,('str','byte
-0003a140: 7327 2929 3a0a 2020 2020 2020 2020 7265  s')):.        re
-0003a150: 7475 726e 2046 6f72 6d44 6174 6128 7372  turn FormData(sr
-0003a160: 632c 6465 6661 756c 743d 276f 7267 2729  c,default='org')
-0003a170: 0a20 2020 2072 6574 7572 6e20 4465 6661  .    return Defa
-0003a180: 756c 7428 7372 632c 6465 6661 756c 7429  ult(src,default)
-0003a190: 0a0a 6465 6620 4d6f 7665 4461 7461 2873  ..def MoveData(s
-0003a1a0: 7263 2c64 6174 613d 4e6f 6e65 2c74 6f3d  rc,data=None,to=
-0003a1b0: 4e6f 6e65 2c66 726f 6d5f 6964 783d 4e6f  None,from_idx=No
-0003a1c0: 6e65 2c66 6f72 6365 3d46 616c 7365 2c64  ne,force=False,d
-0003a1d0: 6566 6175 6c74 3d27 6f72 6727 293a 0a20  efault='org'):. 
-0003a1e0: 2020 2027 2727 0a20 2020 2073 7570 706f     '''.    suppo
-0003a1f0: 7274 2073 7263 2074 7970 6520 6973 206c  rt src type is l
-0003a200: 6973 742c 7374 722c 2874 7570 6c65 290a  ist,str,(tuple).
-0003a210: 2020 2020 6d6f 7669 6e67 2066 6f72 6d61      moving forma
-0003a220: 7420 3a20 6461 7461 2864 6174 6129 206f  t : data(data) o
-0003a230: 7220 6672 6f6d 5f69 6478 2869 6e74 290a  r from_idx(int).
-0003a240: 2020 2020 2020 2d20 6461 7461 203a 2069        - data : i
-0003a250: 6620 7372 6320 6861 7320 6d61 6e79 2073  f src has many s
-0003a260: 616d 6520 6461 7461 2074 6865 6e20 6a75  ame data then ju
-0003a270: 7374 206b 6565 7020 7369 6e67 6c65 2064  st keep single d
-0003a280: 6174 6120 6174 206d 6f76 6564 0a20 2020  ata at moved.   
-0003a290: 206d 6f76 696e 6720 6465 7374 2020 203a   moving dest   :
-0003a2a0: 2074 6f28 696e 7429 0a20 2020 206d 6f76   to(int).    mov
-0003a2b0: 6520 6461 7461 206f 7220 696e 6465 7828  e data or index(
-0003a2c0: 6672 6f6d 5f69 6478 2920 746f 2077 616e  from_idx) to wan
-0003a2d0: 7420 696e 6465 7828 746f 290a 2020 2020  t index(to).    
-0003a2e0: 2020 666f 7263 653d 5472 7565 3a20 6576    force=True: ev
-0003a2f0: 656e 2074 7570 6c65 2074 6f20 6d6f 7665  en tuple to move
-0003a300: 0a20 2020 2069 6620 6e6f 7420 7375 7070  .    if not supp
-0003a310: 6f72 7420 7468 656e 2072 6574 7572 6e20  ort then return 
-0003a320: 6465 6661 756c 740a 2020 2020 6465 6661  default.    defa
-0003a330: 756c 7420 3a20 6f72 670a 2020 2020 2727  ult : org.    ''
-0003a340: 270a 2020 2020 5f74 7570 6c65 3d46 616c  '.    _tuple=Fal
-0003a350: 7365 0a20 2020 2073 7263 5f74 7970 653d  se.    src_type=
-0003a360: 5479 7065 4e61 6d65 2873 7263 290a 2020  TypeName(src).  
-0003a370: 2020 6966 2073 7263 5f74 7970 6520 3d3d    if src_type ==
-0003a380: 2027 7475 706c 6527 3a0a 2020 2020 2020   'tuple':.      
-0003a390: 2020 6966 206e 6f74 2066 6f72 6365 3a20    if not force: 
-0003a3a0: 7265 7475 726e 2044 6566 6175 6c74 2873  return Default(s
-0003a3b0: 7263 2c64 6566 6175 6c74 290a 2020 2020  rc,default).    
-0003a3c0: 2020 2020 5f74 7570 6c65 3d54 7275 650a      _tuple=True.
-0003a3d0: 2020 2020 2020 2020 7372 635f 7479 7065          src_type
-0003a3e0: 3d27 6c69 7374 270a 2020 2020 6966 2073  ='list'.    if s
-0003a3f0: 7263 5f74 7970 6520 696e 205b 276c 6973  rc_type in ['lis
-0003a400: 7427 2c27 7374 7227 5d20 616e 6420 7372  t','str'] and sr
-0003a410: 633a 0a20 2020 2020 2020 2073 7263 3d6c  c:.        src=l
-0003a420: 6973 7428 7372 6329 0a20 2020 2020 2020  ist(src).       
-0003a430: 2069 6620 746f 203d 3d20 276c 6173 7427   if to == 'last'
-0003a440: 3a20 746f 3d2d 310a 2020 2020 2020 2020  : to=-1.        
-0003a450: 656c 6966 2074 6f20 3d3d 2027 6669 7273  elif to == 'firs
-0003a460: 7427 3a20 746f 3d30 0a20 2020 2020 2020  t': to=0.       
-0003a470: 2069 6620 6973 696e 7374 616e 6365 2866   if isinstance(f
-0003a480: 726f 6d5f 6964 782c 696e 7429 2061 6e64  rom_idx,int) and
-0003a490: 2069 7369 6e73 7461 6e63 6528 746f 2c69   isinstance(to,i
-0003a4a0: 6e74 293a 0a20 2020 2020 2020 2020 2020  nt):.           
-0003a4b0: 2069 6620 6c65 6e28 7372 6329 203e 2061   if len(src) > a
-0003a4c0: 6273 2866 726f 6d5f 6964 7829 3a0a 2020  bs(from_idx):.  
-0003a4d0: 2020 2020 2020 2020 2020 2020 2020 746f                to
-0003a4e0: 3d46 6978 496e 6465 7828 7372 632c 746f  =FixIndex(src,to
-0003a4f0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0003a500: 2020 6966 2066 726f 6d5f 6964 7821 3d74    if from_idx!=t
-0003a510: 6f3a 0a20 2020 2020 2020 2020 2020 2020  o:.             
-0003a520: 2020 2020 2020 2069 6620 746f 203d 3d20         if to == 
-0003a530: 2d31 3a0a 2020 2020 2020 2020 2020 2020  -1:.            
-0003a540: 2020 2020 2020 2020 2020 2020 7372 632e              src.
-0003a550: 6170 7065 6e64 2873 7263 5b66 726f 6d5f  append(src[from_
-0003a560: 6964 785d 290a 2020 2020 2020 2020 2020  idx]).          
-0003a570: 2020 2020 2020 2020 2020 656c 6966 2074            elif t
-0003a580: 6f20 3d3d 2030 3a0a 2020 2020 2020 2020  o == 0:.        
-0003a590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003a5a0: 7372 633d 5b73 7263 5b66 726f 6d5f 6964  src=[src[from_id
-0003a5b0: 785d 5d2b 7372 630a 2020 2020 2020 2020  x]]+src.        
-0003a5c0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0003a5d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0003a5e0: 2020 2020 2020 2020 2020 7372 633d 7372            src=sr
-0003a5f0: 635b 3a74 6f5d 2b5b 7372 635b 6672 6f6d  c[:to]+[src[from
-0003a600: 5f69 6478 5d5d 2b73 7263 5b74 6f3a 5d0a  _idx]]+src[to:].
-0003a610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003a620: 2020 2020 7372 635b 746f 5d3d 7372 635b      src[to]=src[
-0003a630: 6672 6f6d 5f69 6478 5d0a 2020 2020 2020  from_idx].      
-0003a640: 2020 2020 2020 2020 2020 2020 2020 6465                de
-0003a650: 6c20 7372 635b 6672 6f6d 5f69 6478 5d0a  l src[from_idx].
-0003a660: 2020 2020 2020 2020 656c 6966 206e 6f74          elif not
-0003a670: 2049 734e 6f6e 6528 6461 7461 2920 616e   IsNone(data) an
-0003a680: 6420 6973 696e 7374 616e 6365 2874 6f2c  d isinstance(to,
-0003a690: 696e 7429 3a0a 2020 2020 2020 2020 2020  int):.          
-0003a6a0: 2020 746f 3d46 6978 496e 6465 7828 7372    to=FixIndex(sr
-0003a6b0: 632c 746f 290a 2020 2020 2020 2020 2020  c,to).          
-0003a6c0: 2020 7372 633d 5b69 2066 6f72 2069 2069    src=[i for i i
-0003a6d0: 6e20 7372 6320 6966 2069 213d 6461 7461  n src if i!=data
-0003a6e0: 5d0a 2020 2020 2020 2020 2020 2020 6966  ].            if
-0003a6f0: 2074 6f20 3d3d 202d 313a 0a20 2020 2020   to == -1:.     
-0003a700: 2020 2020 2020 2020 2020 2073 7263 2e61             src.a
-0003a710: 7070 656e 6428 6461 7461 290a 2020 2020  ppend(data).    
-0003a720: 2020 2020 2020 2020 656c 6966 2074 6f20          elif to 
-0003a730: 3d3d 2030 3a0a 2020 2020 2020 2020 2020  == 0:.          
-0003a740: 2020 2020 2020 7372 633d 5b64 6174 615d        src=[data]
-0003a750: 2b73 7263 0a20 2020 2020 2020 2020 2020  +src.           
-0003a760: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0003a770: 2020 2020 2020 2073 7263 3d73 7263 5b3a         src=src[:
-0003a780: 746f 5d2b 5b64 6174 615d 2b73 7263 5b74  to]+[data]+src[t
-0003a790: 6f3a 5d0a 2020 2020 2020 2020 6966 205f  o:].        if _
-0003a7a0: 7475 706c 653a 2072 6574 7572 6e20 7475  tuple: return tu
-0003a7b0: 706c 6528 7372 6329 0a20 2020 2020 2020  ple(src).       
-0003a7c0: 2065 6c69 6620 7372 635f 7479 7065 203d   elif src_type =
-0003a7d0: 3d20 2773 7472 273a 2072 6574 7572 6e20  = 'str': return 
-0003a7e0: 4a6f 696e 2873 7263 2c27 2729 0a20 2020  Join(src,'').   
-0003a7f0: 2020 2020 2072 6574 7572 6e20 7372 630a       return src.
-0003a800: 2020 2020 7265 7475 726e 2044 6566 6175      return Defau
-0003a810: 6c74 2873 7263 2c64 6566 6175 6c74 290a  lt(src,default).
-0003a820: 0a64 6566 2052 616e 646f 6d28 6c65 6e67  .def Random(leng
-0003a830: 7468 3d38 2c6d 6f64 653d 4e6f 6e65 2c73  th=8,mode=None,s
-0003a840: 7472 733d 4e6f 6e65 2c2a 2a6f 7074 7329  trs=None,**opts)
-0003a850: 3a0a 2020 2020 2727 270a 2020 2020 6d61  :.    '''.    ma
-0003a860: 6b65 2072 616e 646f 6d20 6e75 6d62 6572  ke random number
-0003a870: 2f73 7472 696e 672f 6368 6172 6163 7465  /string/characte
-0003a880: 7273 0a20 2020 206c 656e 6774 6820 2020  rs.    length   
-0003a890: 3a20 7261 6e64 6f6d 2073 7472 696e 6720  : random string 
-0003a8a0: 6c65 6e67 7468 2028 6465 6661 756c 743a  length (default:
-0003a8b0: 2038 290a 2020 2020 6d6f 6465 2028 6465   8).    mode (de
-0003a8c0: 6661 756c 743a 2041 6c70 6861 6e75 6d29  fault: Alphanum)
-0003a8d0: 0a20 2020 2020 2d20 616c 7068 6120 3a20  .     - alpha : 
-0003a8e0: 6c6f 7765 7220 616c 7068 6162 6574 0a20  lower alphabet. 
-0003a8f0: 2020 2020 2d20 414c 5048 4120 3a20 7570      - ALPHA : up
-0003a900: 7065 7220 616c 7068 6162 6574 0a20 2020  per alphabet.   
-0003a910: 2020 2d20 416c 7068 6120 3a20 6c6f 7765    - Alpha : lowe
-0003a920: 7220 2b20 7570 7065 7220 616c 7068 6162  r + upper alphab
-0003a930: 6574 0a20 2020 2020 2d20 6e75 6d20 2020  et.     - num   
-0003a940: 3a20 6e75 6d62 6572 0a20 2020 2020 2d20  : number.     - 
-0003a950: 6368 6172 2020 3a20 6c69 6e75 7820 636f  char  : linux co
-0003a960: 6e73 6f6c 6520 7573 6162 6c65 2073 796d  nsole usable sym
-0003a970: 626f 6c20 6368 6172 6163 7465 7273 0a20  bol characters. 
-0003a980: 2020 2020 2d20 7379 6d20 2020 3a20 616c      - sym   : al
-0003a990: 6c20 7379 6d62 6f6c 2063 6861 7261 6374  l symbol charact
-0003a9a0: 6572 730a 2020 2020 202d 2063 6f6d 6269  ers.     - combi
-0003a9b0: 6e20 6162 6f76 6520 6d6f 6465 7320 2865  n above modes (e
-0003a9c0: 783a 2041 6c70 6861 6e75 6d29 0a20 2020  x: Alphanum).   
-0003a9d0: 2073 7472 7320 2020 2020 3a20 6966 2079   strs     : if y
-0003a9e0: 6f75 2077 616e 7420 6d61 6b65 2061 2072  ou want make a r
-0003a9f0: 616e 646f 6d20 7374 7269 6e67 2077 6974  andom string wit
-0003aa00: 6820 796f 7572 206f 776e 2073 7065 6369  h your own speci
-0003aa10: 616c 2063 6861 7261 6374 6572 730a 2020  al characters.  
-0003aa20: 2020 2727 270a 2020 2020 616c 7068 613d    '''.    alpha=
-0003aa30: 2761 6263 6465 6667 6869 6a6b 6c6d 6e6f  'abcdefghijklmno
-0003aa40: 7071 7273 7475 7677 7879 7a27 0a20 2020  pqrstuvwxyz'.   
-0003aa50: 2041 6c70 6861 3d27 4142 4344 4546 4748   Alpha='ABCDEFGH
-0003aa60: 494a 4b4c 4d4e 4f50 5152 5354 5556 5758  IJKLMNOPQRSTUVWX
-0003aa70: 595a 270a 2020 2020 6e75 6d3d 2730 3132  YZ'.    num='012
-0003aa80: 3334 3536 3738 3927 0a20 2020 2073 796d  3456789'.    sym
-0003aa90: 626f 6c3d 2727 277e 2140 2324 255e 5f2b  bol='''~!@#$%^_+
-0003aaa0: 2d3d 7b7d 5b5d 3a2c 2e27 2727 0a20 2020  -={}[]:,.'''.   
-0003aab0: 2053 796d 626f 6c3d 2727 2760 2a28 2926   Symbol='''`*()&
-0003aac0: 7c5c 5c27 3b22 2f69 3c3e 3f27 2727 0a20  |\\';"/i<>?'''. 
-0003aad0: 2020 2073 7061 6365 3d27 2027 0a20 2020     space=' '.   
-0003aae0: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
-0003aaf0: 6365 2873 7472 732c 7374 7229 206f 7220  ce(strs,str) or 
-0003ab00: 6e6f 7420 7374 7273 3a0a 2020 2020 2020  not strs:.      
-0003ab10: 2020 7374 7273 3d27 270a 2020 2020 2020    strs=''.      
-0003ab20: 2020 6966 206d 6f64 6520 696e 205b 2761    if mode in ['a
-0003ab30: 6c6c 272c 272a 275d 3a0a 2020 2020 2020  ll','*']:.      
-0003ab40: 2020 2020 2020 7374 7273 3d61 6c70 6861        strs=alpha
-0003ab50: 2b41 6c70 6861 2b6e 756d 2b73 796d 626f  +Alpha+num+symbo
-0003ab60: 6c2b 5379 6d62 6f6c 2b73 7061 6365 0a20  l+Symbol+space. 
-0003ab70: 2020 2020 2020 2065 6c69 6620 6973 696e         elif isin
-0003ab80: 7374 616e 6365 286d 6f64 652c 7374 7229  stance(mode,str)
-0003ab90: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-0003aba0: 2027 616c 7068 6127 2069 6e20 6d6f 6465   'alpha' in mode
-0003abb0: 3a20 7374 7273 3d61 6c70 6861 0a20 2020  : strs=alpha.   
-0003abc0: 2020 2020 2020 2020 2069 6620 2741 6c70           if 'Alp
-0003abd0: 6861 2720 696e 206d 6f64 653a 2073 7472  ha' in mode: str
-0003abe0: 733d 616c 7068 612b 416c 7068 610a 2020  s=alpha+Alpha.  
-0003abf0: 2020 2020 2020 2020 2020 6966 2027 414c            if 'AL
-0003ac00: 5048 4127 2069 6e20 6d6f 6465 3a20 7374  PHA' in mode: st
-0003ac10: 7273 3d41 6c70 6861 0a20 2020 2020 2020  rs=Alpha.       
-0003ac20: 2020 2020 2069 6620 276e 756d 2720 696e       if 'num' in
-0003ac30: 206d 6f64 653a 2073 7472 733d 7374 7273   mode: strs=strs
-0003ac40: 2b6e 756d 0a20 2020 2020 2020 2020 2020  +num.           
-0003ac50: 2069 6620 2763 6861 7227 2069 6e20 6d6f   if 'char' in mo
-0003ac60: 6465 3a20 7374 7273 3d73 7472 732b 7379  de: strs=strs+sy
-0003ac70: 6d62 6f6c 0a20 2020 2020 2020 2020 2020  mbol.           
-0003ac80: 2065 6c69 6620 2773 796d 2720 696e 206d   elif 'sym' in m
-0003ac90: 6f64 653a 2073 7472 733d 7374 7273 2b73  ode: strs=strs+s
-0003aca0: 796d 626f 6c2b 5379 6d62 6f6c 2b73 7061  ymbol+Symbol+spa
-0003acb0: 6365 0a20 2020 2069 6620 6e6f 7420 7374  ce.    if not st
-0003acc0: 7273 3a20 7374 7273 3d61 6c70 6861 2b41  rs: strs=alpha+A
-0003acd0: 6c70 6861 2b6e 756d 0a20 2020 2073 7472  lpha+num.    str
-0003ace0: 6e3d 6c65 6e28 7374 7273 292d 310a 2020  n=len(strs)-1.  
-0003acf0: 2020 7374 7261 3d6c 6973 7428 7374 7273    stra=list(strs
-0003ad00: 290a 2020 2020 6f75 743d 5b5d 0a20 2020  ).    out=[].   
-0003ad10: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
-0003ad20: 302c 6c65 6e67 7468 293a 0a20 2020 2020  0,length):.     
-0003ad30: 2020 2072 616e 646f 6d2e 7368 7566 666c     random.shuffl
-0003ad40: 6528 7374 7261 290a 2020 2020 2020 2020  e(stra).        
-0003ad50: 6f75 742e 6170 7065 6e64 2873 7472 615b  out.append(stra[
-0003ad60: 7261 6e64 6f6d 2e72 616e 6469 6e74 2830  random.randint(0
-0003ad70: 2c73 7472 6e29 5d29 0a20 2020 2072 6574  ,strn)]).    ret
-0003ad80: 7572 6e20 696e 7428 2727 2e6a 6f69 6e28  urn int(''.join(
-0003ad90: 6f75 7429 2920 6966 206d 6f64 6520 3d3d  out)) if mode ==
-0003ada0: 2027 6e75 6d27 2065 6c73 6520 2727 2e6a   'num' else ''.j
-0003adb0: 6f69 6e28 6f75 7429 0a0a 6465 6620 4973  oin(out)..def Is
-0003adc0: 416c 6c53 616d 6553 7472 2873 7263 2c66  AllSameStr(src,f
-0003add0: 696e 6429 3a0a 2020 2020 2727 2743 6865  ind):.    '''Che
-0003ade0: 636b 2069 6e70 7574 2073 7472 696e 6720  ck input string 
-0003adf0: 6973 2041 6c6c 2073 616d 6520 7374 7269  is All same stri
-0003ae00: 6e67 206f 7220 6e6f 7427 2727 0a20 2020  ng or not'''.   
-0003ae10: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
-0003ae20: 7263 2c73 7472 2920 616e 6420 6973 696e  rc,str) and isin
-0003ae30: 7374 616e 6365 2866 696e 642c 7374 7229  stance(find,str)
-0003ae40: 3a0a 2020 2020 2020 2020 6966 2073 7263  :.        if src
-0003ae50: 2e63 6f75 6e74 2866 696e 6429 203d 3d20  .count(find) == 
-0003ae60: 6c65 6e28 7372 6329 2f6c 656e 2866 696e  len(src)/len(fin
-0003ae70: 6429 3a0a 2020 2020 2020 2020 2020 2020  d):.            
-0003ae80: 7265 7475 726e 2054 7275 650a 2020 2020  return True.    
-0003ae90: 7265 7475 726e 2046 616c 7365 0a0a 6465  return False..de
-0003aea0: 6620 4d6b 5465 6d70 2866 696c 656e 616d  f MkTemp(filenam
-0003aeb0: 653d 4e6f 6e65 2c73 7566 6669 783d 4e6f  e=None,suffix=No
-0003aec0: 6e65 2c73 706c 6974 3d27 2d27 2c6f 7074  ne,split='-',opt
-0003aed0: 3d27 6472 7927 2c62 6173 655f 6469 723d  ='dry',base_dir=
-0003aee0: 4e6f 6e65 2c75 6e69 713d 4661 6c73 652c  None,uniq=False,
-0003aef0: 6465 6661 756c 745f 6c65 6e67 7468 3d38  default_length=8
-0003af00: 2c6d 6f64 653d 4e6f 6e65 2c2a 2a6f 7074  ,mode=None,**opt
-0003af10: 7329 3a0a 2020 2020 2727 270a 2020 2020  s):.    '''.    
-0003af20: 6d61 6b65 2061 2072 616e 646f 6d20 7374  make a random st
-0003af30: 7269 6e67 0a20 2020 2066 696c 656e 616d  ring.    filenam
-0003af40: 653a 200a 2020 2020 2020 4e6f 6e65 2020  e: .      None  
-0003af50: 3a20 6765 6e65 7261 7465 2072 616e 646f  : generate rando
-0003af60: 6d20 7374 7269 6e67 0a20 2020 2020 2061  m string.      a
-0003af70: 6263 2d58 5858 5858 2e6c 6f67 203a 2061  bc-XXXXX.log : a
-0003af80: 6263 2d3c 7261 6e64 6f6d 2035 2063 6861  bc-<random 5 cha
-0003af90: 7261 6374 6572 733e 2e6c 6f67 0a20 2020  racters>.log.   
-0003afa0: 2020 2061 6263 2d4e 4e4e 2d61 6263 642e     abc-NNN-abcd.
-0003afb0: 6c6f 6720 2020 3a20 6162 632d 3c72 616e  log   : abc-<ran
-0003afc0: 646f 6d20 3320 6e75 6d62 6572 733e 2d61  dom 3 numbers>-a
-0003afd0: 6263 642e 6c6f 670a 2020 2020 2020 6162  bcd.log.      ab
-0003afe0: 632e 6c6f 672d 5858 5858 2020 3a20 6162  c.log-XXXX  : ab
-0003aff0: 632e 6c6f 672d 3c72 616e 646f 6d20 3420  c.log-<random 4 
-0003b000: 6368 6172 6163 7465 7273 3e0a 2020 2020  characters>.    
-0003b010: 7375 6666 6978 2020 3a20 6966 2079 6f75  suffix  : if you
-0003b020: 206e 6565 6420 6164 6469 6e67 2066 696c   need adding fil
-0003b030: 6520 6578 7461 6e64 2873 7566 6669 7829  e extand(suffix)
-0003b040: 2028 6578 3a20 7375 6666 6978 3d27 6c6f   (ex: suffix='lo
-0003b050: 6727 203d 3e20 5858 5858 582e 6c6f 6729  g' => XXXXX.log)
-0003b060: 0a20 2020 2073 706c 6974 2020 203a 2064  .    split   : d
-0003b070: 6566 6175 6c74 202d 2c20 7370 6c69 7420  efault -, split 
-0003b080: 7379 6d62 6f6c 2066 6f72 2074 6865 2066  symbol for the f
-0003b090: 696c 656e 616d 650a 2020 2020 6f70 740a  ilename.    opt.
-0003b0a0: 2020 2020 2020 2d20 6472 7920 3a20 6472        - dry : dr
-0003b0b0: 7920 7275 6e20 2872 6574 7572 6e20 7374  y run (return st
-0003b0c0: 7269 6e67 2928 6465 6661 756c 7429 0a20  ring)(default). 
-0003b0d0: 2020 2020 202d 2066 696c 653a 206d 616b       - file: mak
-0003b0e0: 6520 6120 6669 6c65 0a20 2020 2020 202d  e a file.      -
-0003b0f0: 2064 6972 203a 206d 616b 6520 6120 6469   dir : make a di
-0003b100: 7265 6374 6f72 790a 2020 2020 6261 7365  rectory.    base
-0003b110: 5f64 6972 3a20 6966 2079 6f75 2077 616e  _dir: if you wan
-0003b120: 7420 6120 7374 7269 6e67 2075 6e64 6572  t a string under
-0003b130: 2062 6173 655f 6469 720a 2020 2020 756e   base_dir.    un
-0003b140: 6971 2020 2020 3a20 6966 2079 6f75 2077  iq    : if you w
-0003b150: 616e 7420 6d61 6b65 2061 2075 6e69 7120  ant make a uniq 
-0003b160: 7374 7269 6e67 2028 6e6f 7420 6578 6973  string (not exis
-0003b170: 7469 6e67 2066 696c 656e 616d 6520 696e  ting filename in
-0003b180: 2074 6865 2028 6261 7365 5f64 6972 2964   the (base_dir)d
-0003b190: 6972 6563 746f 7279 290a 2020 2020 2020  irectory).      
-0003b1a0: 7365 6972 6961 6c20 696e 6372 6561 7365  seirial increase
-0003b1b0: 206e 756d 6265 720a 2020 2020 2020 2020   number.        
-0003b1c0: 6966 2065 7869 7374 2061 6263 2e6c 6f67  if exist abc.log
-0003b1d0: 2074 6865 6e20 6162 632e 6c6f 672d 3030   then abc.log-00
-0003b1e0: 3030 3030 3030 0a20 2020 2020 2020 2069  000000.        i
-0003b1f0: 6620 6578 6973 7420 6162 632e 6c6f 672c  f exist abc.log,
-0003b200: 6162 632e 6c6f 672d 3030 3030 3030 3030  abc.log-00000000
-0003b210: 2074 6865 6e20 6162 632e 6c6f 672d 3030   then abc.log-00
-0003b220: 3030 3030 3031 0a20 2020 2020 2066 696c  000001.      fil
-0003b230: 656e 616d 653d 2761 6263 272c 7375 6666  ename='abc',suff
-0003b240: 6978 3d27 6c6f 6727 2c75 6e69 713d 5472  ix='log',uniq=Tr
-0003b250: 7565 0a20 2020 2020 2020 2069 6620 6578  ue.        if ex
-0003b260: 6973 7420 6162 632e 6c6f 6720 7468 656e  ist abc.log then
-0003b270: 2061 6263 2d30 3030 3030 3030 302e 6c6f   abc-00000000.lo
-0003b280: 670a 2020 2020 2020 2020 6966 2065 7869  g.        if exi
-0003b290: 7374 2061 6263 2e6c 6f67 2c61 6263 2d30  st abc.log,abc-0
-0003b2a0: 3030 3030 3030 302e 6c6f 6720 7468 656e  0000000.log then
-0003b2b0: 2061 6263 2d30 3030 3030 3030 312e 6c6f   abc-00000001.lo
-0003b2c0: 670a 2020 2020 6465 6661 756c 745f 6c65  g.    default_le
-0003b2d0: 6e67 7468 3a20 7261 6e64 6f6d 2073 7472  ngth: random str
-0003b2e0: 696e 6720 6c65 6e67 7468 0a20 2020 206d  ing length.    m
-0003b2f0: 6f64 6520 2020 203a 2072 616e 646f 6d20  ode    : random 
-0003b300: 7374 7269 6e67 206d 6f64 6520 2873 616d  string mode (sam
-0003b310: 6520 6173 2052 616e 646f 6d28 2927 7320  e as Random()'s 
-0003b320: 6d6f 6465 290a 2020 2020 6375 7374 6f6d  mode).    custom
-0003b330: 2020 3a20 6375 7374 6f6d 2072 616e 646f    : custom rando
-0003b340: 6d20 7374 7269 6e67 2073 6f75 7263 6520  m string source 
-0003b350: 2873 616d 6520 6173 2052 616e 646f 6d28  (same as Random(
-0003b360: 2927 7320 7374 7273 2070 6172 616d 6574  )'s strs paramet
-0003b370: 6572 290a 2020 2020 2727 270a 2020 2020  er).    '''.    
-0003b380: 2353 7570 706f 7274 204f 4c44 204d 6b54  #Support OLD MkT
-0003b390: 656d 7028 2920 0a20 2020 2069 6620 6973  emp() .    if is
-0003b3a0: 696e 7374 616e 6365 2873 7566 6669 782c  instance(suffix,
-0003b3b0: 7374 7229 2061 6e64 2069 7369 6e73 7461  str) and isinsta
-0003b3c0: 6e63 6528 6669 6c65 6e61 6d65 2c73 7472  nce(filename,str
-0003b3d0: 293a 0a20 2020 2020 2020 2069 6620 7375  ):.        if su
-0003b3e0: 6666 6978 5b30 5d3d 3d27 2d27 3a0a 2020  ffix[0]=='-':.  
-0003b3f0: 2020 2020 2020 2020 2020 6966 2049 7341            if IsA
+00038ad0: 2020 2020 2070 7269 6e74 665f 6e65 776c       printf_newl
+00038ae0: 696e 655f 696e 666f 2e44 656c 2842 7974  ine_info.Del(Byt
+00038af0: 6573 2869 6929 290a 2020 2020 2020 2020  es(ii)).        
+00038b00: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00038b10: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00038b20: 2020 2020 2020 2020 2020 7072 696e 7466            printf
+00038b30: 5f6e 6577 6c69 6e65 5f69 6e66 6f2e 5075  _newline_info.Pu
+00038b40: 7428 4279 7465 7328 6969 292c 5472 7565  t(Bytes(ii),True
+00038b50: 290a 2020 2020 6966 2069 676e 6f72 655f  ).    if ignore_
+00038b60: 656d 7074 7920 6973 2054 7275 6520 616e  empty is True an
+00038b70: 6420 6e6f 7420 6d73 675f 7374 723a 2072  d not msg_str: r
+00038b80: 6574 7572 6e20 2320 4967 6e6f 7265 2065  eturn # Ignore e
+00038b90: 6d70 7479 2064 6174 6120 6f6e 2073 6372  mpty data on scr
+00038ba0: 6565 6e0a 2020 2020 2320 7072 696e 7420  een.    # print 
+00038bb0: 6d73 6720 746f 2073 6372 6565 6e20 7768  msg to screen wh
+00038bc0: 656e 2064 6964 206e 6f74 2064 6f6e 6520  en did not done 
+00038bd0: 7769 7468 206c 6f67 6669 6c65 206f 7220  with logfile or 
+00038be0: 6c6f 6720 6675 6e63 7469 6f6e 0a20 2020  log function.   
+00038bf0: 2069 6620 2765 2720 696e 2064 7370 3a0a   if 'e' in dsp:.
+00038c00: 2020 2020 2020 2020 2320 6966 2065 6e64          # if end
+00038c10: 206f 6620 6c69 6e65 2068 6176 6520 6e6f   of line have no
+00038c20: 206e 6577 6c69 6e65 2c20 6275 7420 6974   newline, but it
+00038c30: 2068 6173 2069 6e74 726f 2074 6865 6e20   has intro then 
+00038c40: 6164 6469 6e67 2073 7461 7274 5f6e 6577  adding start_new
+00038c50: 6c69 6e65 0a20 2020 2020 2020 2069 6620  line.        if 
+00038c60: 696e 7472 6f5f 6d73 6720 616e 6420 6e6f  intro_msg and no
+00038c70: 7420 6e6f 5f73 7461 7274 5f6e 6577 6c69  t no_start_newli
+00038c80: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00038c90: 6966 2070 7269 6e74 665f 6e65 776c 696e  if printf_newlin
+00038ca0: 655f 696e 666f 2e47 6574 2827 6527 293a  e_info.Get('e'):
+00038cb0: 200a 2020 2020 2020 2020 2020 2020 2020   .              
+00038cc0: 2020 7374 6172 745f 6e65 776c 696e 653d    start_newline=
+00038cd0: 275c 6e27 0a20 2020 2020 2020 2069 6620  '\n'.        if 
+00038ce0: 7363 725f 6462 675f 7072 696e 743a 0a20  scr_dbg_print:. 
+00038cf0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00038d00: 2827 6d6f 6465 2020 2020 2020 2020 2020  ('mode          
+00038d10: 2020 2020 2020 2020 3a7b 7d20 2862 6566          :{} (bef
+00038d20: 6f72 6520 6e6f 206e 6577 6c69 6e65 3a7b  ore no newline:{
+00038d30: 7d29 272e 666f 726d 6174 2827 6527 2c54  })'.format('e',T
+00038d40: 7275 6520 6966 2070 7269 6e74 665f 6e65  rue if printf_ne
+00038d50: 776c 696e 655f 696e 666f 2e47 6574 2827  wline_info.Get('
+00038d60: 6527 2920 656c 7365 2046 616c 7365 2929  e') else False))
+00038d70: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
+00038d80: 6e74 2827 7570 6461 7465 6420 7374 6172  nt('updated star
+00038d90: 7420 6e65 776c 696e 6520 3a7b 7d27 2e66  t newline :{}'.f
+00038da0: 6f72 6d61 7428 5472 7565 2069 6620 7374  ormat(True if st
+00038db0: 6172 745f 6e65 776c 696e 6520 656c 7365  art_newline else
+00038dc0: 2046 616c 7365 2929 0a20 2020 2020 2020   False)).       
+00038dd0: 2020 2020 2070 7269 6e74 2827 7072 696e       print('prin
+00038de0: 7420 2020 2020 2020 2020 2020 2020 2020  t               
+00038df0: 2020 3a5b 7b7d 5d27 2e66 6f72 6d61 7428    :[{}]'.format(
+00038e00: 7374 6172 745f 6e65 776c 696e 652b 6d73  start_newline+ms
+00038e10: 675f 7374 722b 6e65 775f 6c69 6e65 2929  g_str+new_line))
+00038e20: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
+00038e30: 6e74 2827 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  nt('------------
+00038e40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00038e50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d27 290a  -------------').
+00038e60: 2020 2020 2020 2020 5374 6445 7272 2873          StdErr(s
+00038e70: 7461 7274 5f6e 6577 6c69 6e65 2b6d 7367  tart_newline+msg
+00038e80: 5f73 7472 2b6e 6577 5f6c 696e 6529 0a20  _str+new_line). 
+00038e90: 2020 2020 2020 2070 7269 6e74 665f 6e65         printf_ne
+00038ea0: 776c 696e 655f 696e 666f 2e50 7574 2827  wline_info.Put('
+00038eb0: 6527 2c46 616c 7365 2069 6620 6e65 775f  e',False if new_
+00038ec0: 6c69 6e65 2065 6c73 6520 5472 7565 290a  line else True).
+00038ed0: 2020 2020 656c 6966 2027 6327 2069 6e20      elif 'c' in 
+00038ee0: 6473 703a 2023 4469 7370 6c61 7920 746f  dsp: #Display to
+00038ef0: 2063 6f6e 736f 6c65 2028 6974 2061 6c73   console (it als
+00038f00: 6f20 776f 726b 2077 6974 6820 526f 626f  o work with Robo
+00038f10: 7420 4672 616d 6577 6f72 6b29 0a20 2020  t Framework).   
+00038f20: 2020 2020 2070 7269 6e74 2873 7461 7274       print(start
+00038f30: 5f6e 6577 6c69 6e65 2b6d 7367 5f73 7472  _newline+msg_str
+00038f40: 2b6e 6577 5f6c 696e 652c 656e 643d 2727  +new_line,end=''
+00038f50: 2c66 696c 653d 7379 732e 5f5f 7374 646f  ,file=sys.__stdo
+00038f60: 7574 5f5f 290a 2020 2020 656c 6966 2027  ut__).    elif '
+00038f70: 7327 2069 6e20 6473 7020 6f72 2027 6127  s' in dsp or 'a'
+00038f80: 2069 6e20 6473 703a 2023 2050 7269 6e74   in dsp: # Print
+00038f90: 206f 7574 206f 6e20 7363 7265 656e 0a20   out on screen. 
+00038fa0: 2020 2020 2020 2069 6620 696e 7472 6f5f         if intro_
+00038fb0: 6d73 6720 616e 6420 6e6f 7420 6e6f 5f73  msg and not no_s
+00038fc0: 7461 7274 5f6e 6577 6c69 6e65 3a0a 2020  tart_newline:.  
+00038fd0: 2020 2020 2020 2020 2020 6966 2070 7269            if pri
+00038fe0: 6e74 665f 6e65 776c 696e 655f 696e 666f  ntf_newline_info
+00038ff0: 2e47 6574 2827 6127 2069 6620 2761 2720  .Get('a' if 'a' 
+00039000: 696e 2064 7370 2065 6c73 6520 2773 2729  in dsp else 's')
+00039010: 3a20 0a20 2020 2020 2020 2020 2020 2020  : .             
+00039020: 2020 2073 7461 7274 5f6e 6577 6c69 6e65     start_newline
+00039030: 3d27 5c6e 270a 2020 2020 2020 2020 6966  ='\n'.        if
+00039040: 2073 6372 5f64 6267 5f70 7269 6e74 3a0a   scr_dbg_print:.
+00039050: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00039060: 7428 276d 6f64 6520 2020 2020 2020 2020  t('mode         
+00039070: 2020 2020 2020 2020 203a 7b7d 2028 6265           :{} (be
+00039080: 666f 7265 206e 6f20 6e65 776c 696e 653a  fore no newline:
+00039090: 7b7d 2927 2e66 6f72 6d61 7428 2761 272c  {})'.format('a',
+000390a0: 5472 7565 2069 6620 7072 696e 7466 5f6e  True if printf_n
+000390b0: 6577 6c69 6e65 5f69 6e66 6f2e 4765 7428  ewline_info.Get(
+000390c0: 2761 2720 6966 2027 6127 2069 6e20 6473  'a' if 'a' in ds
+000390d0: 7020 656c 7365 2027 7327 2920 656c 7365  p else 's') else
+000390e0: 2046 616c 7365 2929 0a20 2020 2020 2020   False)).       
+000390f0: 2020 2020 2070 7269 6e74 2827 7570 6461       print('upda
+00039100: 7465 6420 7374 6172 7420 6e65 776c 696e  ted start newlin
+00039110: 6520 3a7b 7d27 2e66 6f72 6d61 7428 5472  e :{}'.format(Tr
+00039120: 7565 2069 6620 7374 6172 745f 6e65 776c  ue if start_newl
+00039130: 696e 6520 656c 7365 2046 616c 7365 2929  ine else False))
+00039140: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
+00039150: 6e74 2827 7072 696e 7420 2020 2020 2020  nt('print       
+00039160: 2020 2020 2020 2020 2020 3a5b 7b7d 5d27            :[{}]'
+00039170: 2e66 6f72 6d61 7428 7374 6172 745f 6e65  .format(start_ne
+00039180: 776c 696e 652b 6d73 675f 7374 722b 6e65  wline+msg_str+ne
+00039190: 775f 6c69 6e65 2929 0a20 2020 2020 2020  w_line)).       
+000391a0: 2020 2020 2070 7269 6e74 2827 2d2d 2d2d       print('----
+000391b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000391c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000391d0: 2d2d 2d2d 2d27 290a 2020 2020 2020 2020  -----').        
+000391e0: 2320 6966 2065 6e64 206f 6620 6c69 6e65  # if end of line
+000391f0: 2068 6176 6520 6e6f 206e 6577 6c69 6e65   have no newline
+00039200: 2c20 6275 7420 6974 2068 6173 2069 6e74  , but it has int
+00039210: 726f 2074 6865 6e20 6164 6469 6e67 2073  ro then adding s
+00039220: 7461 7274 5f6e 6577 6c69 6e65 0a20 2020  tart_newline.   
+00039230: 2020 2020 2053 7464 4f75 7428 7374 6172       StdOut(star
+00039240: 745f 6e65 776c 696e 652b 6d73 675f 7374  t_newline+msg_st
+00039250: 722b 6e65 775f 6c69 6e65 290a 2020 2020  r+new_line).    
+00039260: 2020 2020 7072 696e 7466 5f6e 6577 6c69      printf_newli
+00039270: 6e65 5f69 6e66 6f2e 5075 7428 2761 2720  ne_info.Put('a' 
+00039280: 6966 2027 6127 2069 6e20 6473 7020 656c  if 'a' in dsp el
+00039290: 7365 2027 7327 2c46 616c 7365 2069 6620  se 's',False if 
+000392a0: 6e65 775f 6c69 6e65 2065 6c73 6520 5472  new_line else Tr
+000392b0: 7565 290a 2020 2020 2320 7265 7475 726e  ue).    # return
+000392c0: 206d 7367 2077 6865 6e20 7265 7175 6972   msg when requir
+000392d0: 6564 2072 6574 7572 6e20 7768 6174 6576  ed return whatev
+000392e0: 6572 2063 6f6e 6469 7469 6f6e 0a20 2020  er condition.   
+000392f0: 2069 6620 2772 2720 696e 2064 7370 3a0a   if 'r' in dsp:.
+00039300: 2020 2020 2020 2020 7265 7475 726e 206d          return m
+00039310: 7367 5f73 7472 0a0a 6465 6620 436f 6c6f  sg_str..def Colo
+00039320: 7253 7472 286d 7367 2c2a 2a6f 7074 7329  rStr(msg,**opts)
+00039330: 3a0a 2020 2020 636f 6c6f 723d 6f70 7473  :.    color=opts
+00039340: 2e67 6574 2827 636f 6c6f 7227 2c4e 6f6e  .get('color',Non
+00039350: 6529 0a20 2020 2063 6f6c 6f72 5f64 623d  e).    color_db=
+00039360: 6f70 7473 2e67 6574 2827 636f 6c6f 725f  opts.get('color_
+00039370: 6462 272c 7b27 626c 7565 273a 2033 342c  db',{'blue': 34,
+00039380: 2027 6772 6579 273a 2033 302c 2027 7965   'grey': 30, 'ye
+00039390: 6c6c 6f77 273a 2033 332c 2027 6772 6565  llow': 33, 'gree
+000393a0: 6e27 3a20 3332 2c20 2763 7961 6e27 3a20  n': 32, 'cyan': 
+000393b0: 3336 2c20 276d 6167 656e 7461 273a 2033  36, 'magenta': 3
+000393c0: 352c 2027 7768 6974 6527 3a20 3337 2c20  5, 'white': 37, 
+000393d0: 2772 6564 273a 2033 317d 290a 2020 2020  'red': 31}).    
+000393e0: 6267 5f63 6f6c 6f72 3d6f 7074 732e 6765  bg_color=opts.ge
+000393f0: 7428 2762 675f 636f 6c6f 7227 2c4e 6f6e  t('bg_color',Non
+00039400: 6529 0a20 2020 2062 675f 636f 6c6f 725f  e).    bg_color_
+00039410: 6462 3d6f 7074 732e 6765 7428 2762 675f  db=opts.get('bg_
+00039420: 636f 6c6f 725f 6462 272c 7b27 6379 616e  color_db',{'cyan
+00039430: 273a 2034 362c 2027 7768 6974 6527 3a20  ': 46, 'white': 
+00039440: 3437 2c20 2767 7265 7927 3a20 3430 2c20  47, 'grey': 40, 
+00039450: 2779 656c 6c6f 7727 3a20 3433 2c20 2762  'yellow': 43, 'b
+00039460: 6c75 6527 3a20 3434 2c20 276d 6167 656e  lue': 44, 'magen
+00039470: 7461 273a 2034 352c 2027 7265 6427 3a20  ta': 45, 'red': 
+00039480: 3431 2c20 2767 7265 656e 273a 2034 327d  41, 'green': 42}
+00039490: 290a 2020 2020 6174 7472 3d6f 7074 732e  ).    attr=opts.
+000394a0: 6765 7428 2761 7474 7227 2c4e 6f6e 6529  get('attr',None)
+000394b0: 0a20 2020 2061 7474 725f 6462 3d6f 7074  .    attr_db=opt
+000394c0: 732e 6765 7428 2761 7474 725f 6462 272c  s.get('attr_db',
+000394d0: 7b27 7265 7665 7273 6527 3a20 372c 2027  {'reverse': 7, '
+000394e0: 626c 696e 6b27 3a20 352c 2763 6f6e 6365  blink': 5,'conce
+000394f0: 616c 6564 273a 2038 2c20 2775 6e64 6572  aled': 8, 'under
+00039500: 6c69 6e65 273a 2034 2c20 2762 6f6c 6427  line': 4, 'bold'
+00039510: 3a20 317d 290a 2020 2020 6966 2049 734e  : 1}).    if IsN
+00039520: 6f6e 6528 6f73 2e67 6574 656e 7628 2741  one(os.getenv('A
+00039530: 4e53 495f 434f 4c4f 5253 5f44 4953 4142  NSI_COLORS_DISAB
+00039540: 4c45 4427 2929 2061 6e64 2028 636f 6c6f  LED')) and (colo
+00039550: 7220 6f72 2062 675f 636f 6c6f 7220 6f72  r or bg_color or
+00039560: 2061 7474 7229 3a0a 2020 2020 2020 2020   attr):.        
+00039570: 7265 7365 743d 2727 275c 3033 335b 306d  reset='''\033[0m
+00039580: 2727 270a 2020 2020 2020 2020 666d 745f  '''.        fmt_
+00039590: 6d73 673d 2727 275c 3033 335b 2564 6d25  msg='''\033[%dm%
+000395a0: 7327 2727 0a20 2020 2020 2020 2069 6620  s'''.        if 
+000395b0: 636f 6c6f 7220 616e 6420 636f 6c6f 7220  color and color 
+000395c0: 696e 2063 6f6c 6f72 5f64 623a 0a20 2020  in color_db:.   
+000395d0: 2020 2020 2020 2020 206d 7367 3d66 6d74           msg=fmt
+000395e0: 5f6d 7367 2025 2028 636f 6c6f 725f 6462  _msg % (color_db
+000395f0: 5b63 6f6c 6f72 5d2c 6d73 6729 0a20 2020  [color],msg).   
+00039600: 2020 2020 2069 6620 6267 5f63 6f6c 6f72       if bg_color
+00039610: 2061 6e64 2062 675f 636f 6c6f 7220 696e   and bg_color in
+00039620: 2062 675f 636f 6c6f 725f 6462 3a0a 2020   bg_color_db:.  
+00039630: 2020 2020 2020 2020 2020 6d73 673d 666d            msg=fm
+00039640: 745f 6d73 6720 2520 2863 6f6c 6f72 5f64  t_msg % (color_d
+00039650: 625b 6267 5f63 6f6c 6f72 5d2c 6d73 6729  b[bg_color],msg)
+00039660: 0a20 2020 2020 2020 2069 6620 6174 7472  .        if attr
+00039670: 2061 6e64 2061 7474 7220 696e 2061 7474   and attr in att
+00039680: 725f 6462 3a0a 2020 2020 2020 2020 2020  r_db:.          
+00039690: 2020 6d73 673d 666d 745f 6d73 6720 2520    msg=fmt_msg % 
+000396a0: 2861 7474 725f 6462 5b61 7474 725d 2c6d  (attr_db[attr],m
+000396b0: 7367 290a 2020 2020 2020 2020 7265 7475  sg).        retu
+000396c0: 726e 206d 7367 2b72 6573 6574 2023 5375  rn msg+reset #Su
+000396d0: 7070 6f72 7420 436f 6c6f 720a 2020 2020  pport Color.    
+000396e0: 7265 7475 726e 206d 7367 2023 4e6f 7420  return msg #Not 
+000396f0: 7375 7070 6f72 7420 636f 6c6f 720a 0a64  support color..d
+00039700: 6566 2043 6c65 616e 416e 7369 2864 6174  ef CleanAnsi(dat
+00039710: 6129 3a0a 2020 2020 616e 7369 5f65 7363  a):.    ansi_esc
+00039720: 6170 6520 3d20 7265 2e63 6f6d 7069 6c65  ape = re.compile
+00039730: 2872 275c 7831 425c 5b5b 302d 3f5d 2a5b  (r'\x1B\[[0-?]*[
+00039740: 202d 2f5d 2a5b 402d 7e5d 2729 0a20 2020   -/]*[@-~]').   
+00039750: 2069 6620 5479 7065 2864 6174 612c 2827   if Type(data,('
+00039760: 7374 7227 2c27 6279 7465 7327 2929 3a0a  str','bytes')):.
+00039770: 2020 2020 2020 2020 7265 7475 726e 2061          return a
+00039780: 6e73 695f 6573 6361 7065 2e73 7562 2827  nsi_escape.sub('
+00039790: 272c 5374 7228 6461 7461 2929 0a20 2020  ',Str(data)).   
+000397a0: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
+000397b0: 2864 6174 612c 286c 6973 742c 7475 706c  (data,(list,tupl
+000397c0: 6529 293a 0a20 2020 2020 2020 2072 6574  e)):.        ret
+000397d0: 7572 6e20 5b43 6c65 616e 416e 7369 2869  urn [CleanAnsi(i
+000397e0: 6929 2066 6f72 2069 6920 696e 2064 6174  i) for ii in dat
+000397f0: 615d 0a20 2020 2065 6c69 6620 6973 696e  a].    elif isin
+00039800: 7374 616e 6365 2864 6174 612c 6469 6374  stance(data,dict
+00039810: 293a 0a20 2020 2020 2020 2066 6f72 2069  ):.        for i
+00039820: 2069 6e20 6461 7461 3a0a 2020 2020 2020   in data:.      
+00039830: 2020 2020 2020 6461 7461 5b69 5d3d 436c        data[i]=Cl
+00039840: 6561 6e41 6e73 6928 6461 7461 5b69 5d29  eanAnsi(data[i])
+00039850: 0a20 2020 2072 6574 7572 6e20 6461 7461  .    return data
+00039860: 0a0a 6465 6620 636c 695f 696e 7075 7428  ..def cli_input(
+00039870: 6d73 672c 2a2a 6f70 7473 293a 0a20 2020  msg,**opts):.   
+00039880: 2027 2727 0a20 2020 2043 4c49 2049 6e70   '''.    CLI Inp
+00039890: 7574 2063 6f6d 6d61 6e64 0a20 2020 2068  ut command.    h
+000398a0: 6964 6465 6e20 6f72 2070 6173 7377 6420  idden or passwd 
+000398b0: 3d20 5472 7565 203a 2069 6e70 7574 2061  = True : input a
+000398c0: 7320 7061 7373 776f 7264 2c20 4661 6c73  s password, Fals
+000398d0: 653a 2028 6465 6661 756c 7429 206e 6f72  e: (default) nor
+000398e0: 6d61 6c20 7465 7874 2069 6e70 7574 0a20  mal text input. 
+000398f0: 2020 2027 2727 0a20 2020 2068 6964 6465     '''.    hidde
+00039900: 6e3d 6f70 7473 2e67 6574 2827 6869 6464  n=opts.get('hidd
+00039910: 656e 272c 6f70 7473 2e67 6574 2827 7061  en',opts.get('pa
+00039920: 7373 7764 272c 6f70 7473 2e67 6574 2827  sswd',opts.get('
+00039930: 7061 7373 776f 7264 272c 4661 6c73 6529  password',False)
+00039940: 2929 0a20 2020 2069 6620 6869 6464 656e  )).    if hidden
+00039950: 3a0a 2020 2020 2020 2020 6966 2073 7973  :.        if sys
+00039960: 2e73 7464 696e 2e69 7361 7474 7928 293a  .stdin.isatty():
+00039970: 0a20 2020 2020 2020 2020 2020 2070 203d  .            p =
+00039980: 2067 6574 7061 7373 2e67 6574 7061 7373   getpass.getpass
+00039990: 286d 7367 290a 2020 2020 2020 2020 656c  (msg).        el
+000399a0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+000399b0: 7072 696e 7466 286d 7367 2c65 6e64 5f6c  printf(msg,end_l
+000399c0: 696e 653d 2727 290a 2020 2020 2020 2020  ine='').        
+000399d0: 2020 2020 7020 3d20 7379 732e 7374 6469      p = sys.stdi
+000399e0: 6e2e 7265 6164 6c69 6e65 2829 2e72 7374  n.readline().rst
+000399f0: 7269 7028 290a 2020 2020 656c 7365 3a0a  rip().    else:.
+00039a00: 2020 2020 2020 2020 6966 2050 7956 6572          if PyVer
+00039a10: 2832 293a 0a20 2020 2020 2020 2020 2020  (2):.           
+00039a20: 2070 3d72 6177 5f69 6e70 7574 286d 7367   p=raw_input(msg
+00039a30: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+00039a40: 2020 2020 2020 2020 2020 2020 703d 696e              p=in
+00039a50: 7075 7428 6d73 6729 0a20 2020 2072 6574  put(msg).    ret
+00039a60: 7572 6e20 700a 0a64 6566 2054 7970 6544  urn p..def TypeD
+00039a70: 6174 6128 7372 632c 7761 6e74 5f74 7970  ata(src,want_typ
+00039a80: 653d 4e6f 6e65 2c64 6566 6175 6c74 3d27  e=None,default='
+00039a90: 6f72 6727 2c73 706c 6974 6572 3d4e 6f6e  org',spliter=Non
+00039aa0: 6529 3a0a 2020 2020 2727 2743 6f6e 7665  e):.    '''Conve
+00039ab0: 7274 2028 696e 7075 7429 6461 7461 2074  rt (input)data t
+00039ac0: 6f20 7761 6e74 2074 7970 6520 2865 783a  o want type (ex:
+00039ad0: 2073 7472 202d 3e20 6c69 7374 2c20 696e   str -> list, in
+00039ae0: 742c 202e 2e2e 292c 2063 616e 206e 6f74  t, ...), can not
+00039af0: 2063 6f6e 7665 7274 2074 6f20 7479 7065   convert to type
+00039b00: 2074 6865 6e20 7265 7475 726e 2046 616c   then return Fal
+00039b10: 7365 2727 270a 2020 2020 6966 2054 7970  se'''.    if Typ
+00039b20: 6528 7761 6e74 5f74 7970 652c 2773 7472  e(want_type,'str
+00039b30: 2729 3a0a 2020 2020 2020 2020 6966 2069  '):.        if i
+00039b40: 7369 6e73 7461 6e63 6528 7372 632c 286c  sinstance(src,(l
+00039b50: 6973 742c 7475 706c 6529 293a 0a20 2020  ist,tuple)):.   
+00039b60: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00039b70: 6973 696e 7374 616e 6365 2873 706c 6974  isinstance(split
+00039b80: 6572 2c73 7472 293a 2073 706c 6974 6572  er,str): spliter
+00039b90: 3d27 2027 0a20 2020 2020 2020 2020 2020  =' '.           
+00039ba0: 2072 6574 7572 6e20 4a6f 696e 2853 7472   return Join(Str
+00039bb0: 2873 7263 292c 5374 7228 7370 6c69 7465  (src),Str(splite
+00039bc0: 7229 290a 2020 2020 2020 2020 656c 7365  r)).        else
+00039bd0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00039be0: 7475 726e 2053 7472 2873 7263 2c6d 6f64  turn Str(src,mod
+00039bf0: 653d 2766 6f72 6365 2729 0a20 2020 2065  e='force').    e
+00039c00: 6c69 6620 5479 7065 2877 616e 745f 7479  lif Type(want_ty
+00039c10: 7065 2c27 6279 7465 7327 293a 0a20 2020  pe,'bytes'):.   
+00039c20: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+00039c30: 6365 2873 7263 2c28 6c69 7374 2c74 7570  ce(src,(list,tup
+00039c40: 6c65 2929 3a0a 2020 2020 2020 2020 2020  le)):.          
+00039c50: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
+00039c60: 6e63 6528 7370 6c69 7465 722c 7374 7229  nce(spliter,str)
+00039c70: 3a20 7370 6c69 7465 723d 6227 2027 0a20  : spliter=b' '. 
+00039c80: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00039c90: 6e20 4a6f 696e 2842 7974 6573 2873 7263  n Join(Bytes(src
+00039ca0: 292c 4279 7465 7328 7370 6c69 7465 7229  ),Bytes(spliter)
+00039cb0: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+00039cc0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00039cd0: 726e 2042 7974 6573 2873 7263 290a 2020  rn Bytes(src).  
+00039ce0: 2020 656c 6966 2054 7970 6528 7761 6e74    elif Type(want
+00039cf0: 5f74 7970 652c 2769 6e74 2729 3a0a 2020  _type,'int'):.  
+00039d00: 2020 2020 2020 7265 7475 726e 2049 6e74        return Int
+00039d10: 2873 7263 2c65 7272 3d54 7275 6529 0a20  (src,err=True). 
+00039d20: 2020 2065 6c69 6620 5479 7065 2877 616e     elif Type(wan
+00039d30: 745f 7479 7065 2c28 276c 6973 7427 2c27  t_type,('list','
+00039d40: 7475 706c 6527 2929 2061 6e64 2069 7369  tuple')) and isi
+00039d50: 6e73 7461 6e63 6528 7372 632c 7374 7229  nstance(src,str)
+00039d60: 2061 6e64 2069 7369 6e73 7461 6e63 6528   and isinstance(
+00039d70: 7370 6c69 7465 722c 7374 7229 3a0a 2020  spliter,str):.  
+00039d80: 2020 2020 2020 6966 2054 7970 6528 7761        if Type(wa
+00039d90: 6e74 5f74 7970 652c 2774 7570 6c65 2729  nt_type,'tuple')
+00039da0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00039db0: 7475 726e 2074 7570 6c65 2853 706c 6974  turn tuple(Split
+00039dc0: 2873 7263 2c73 706c 6974 6572 2929 0a20  (src,spliter)). 
+00039dd0: 2020 2020 2020 2072 6574 7572 6e20 5370         return Sp
+00039de0: 6c69 7428 7372 632c 7370 6c69 7465 7229  lit(src,spliter)
+00039df0: 0a20 2020 2065 6c69 6620 5479 7065 2877  .    elif Type(w
+00039e00: 616e 745f 7479 7065 2c27 7475 706c 6527  ant_type,'tuple'
+00039e10: 2920 616e 6420 6973 696e 7374 616e 6365  ) and isinstance
+00039e20: 2873 7263 2c28 6c69 7374 2c64 6963 7429  (src,(list,dict)
+00039e30: 293a 0a20 2020 2020 2020 2069 6620 6973  ):.        if is
+00039e40: 696e 7374 616e 6365 2873 7263 2c64 6963  instance(src,dic
+00039e50: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
+00039e60: 6966 2073 706c 6974 6572 203d 3d20 276b  if spliter == 'k
+00039e70: 6579 273a 0a20 2020 2020 2020 2020 2020  ey':.           
+00039e80: 2020 2020 2072 6574 7572 6e20 7475 706c       return tupl
+00039e90: 6528 7372 632e 6b65 7973 2829 290a 2020  e(src.keys()).  
+00039ea0: 2020 2020 2020 2020 2020 656c 6966 2073            elif s
+00039eb0: 706c 6974 6572 203d 3d20 2776 616c 7565  pliter == 'value
+00039ec0: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+00039ed0: 2020 2072 6574 7572 6e20 7475 706c 6528     return tuple(
+00039ee0: 7372 632e 7661 6c75 6573 2829 290a 2020  src.values()).  
+00039ef0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00039f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00039f10: 7265 7475 726e 2074 7570 6c65 2873 7263  return tuple(src
+00039f20: 2e69 7465 6d73 2829 290a 2020 2020 2020  .items()).      
+00039f30: 2020 7265 7475 726e 2074 7570 6c65 2873    return tuple(s
+00039f40: 7263 290a 2020 2020 656c 6966 2054 7970  rc).    elif Typ
+00039f50: 6528 7761 6e74 5f74 7970 652c 276c 6973  e(want_type,'lis
+00039f60: 7427 2920 616e 6420 6973 696e 7374 616e  t') and isinstan
+00039f70: 6365 2873 7263 2c28 7475 706c 652c 6469  ce(src,(tuple,di
+00039f80: 6374 2929 3a0a 2020 2020 2020 2020 6966  ct)):.        if
+00039f90: 2069 7369 6e73 7461 6e63 6528 7372 632c   isinstance(src,
+00039fa0: 6469 6374 293a 0a20 2020 2020 2020 2020  dict):.         
+00039fb0: 2020 2069 6620 7370 6c69 7465 7220 3d3d     if spliter ==
+00039fc0: 2027 6b65 7927 3a0a 2020 2020 2020 2020   'key':.        
+00039fd0: 2020 2020 2020 2020 7265 7475 726e 206c          return l
+00039fe0: 6973 7428 7372 632e 6b65 7973 2829 290a  ist(src.keys()).
+00039ff0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+0003a000: 2073 706c 6974 6572 203d 3d20 2776 616c   spliter == 'val
+0003a010: 7565 273a 0a20 2020 2020 2020 2020 2020  ue':.           
+0003a020: 2020 2020 2072 6574 7572 6e20 6c69 7374       return list
+0003a030: 2873 7263 2e76 616c 7565 7328 2929 0a20  (src.values()). 
+0003a040: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0003a050: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003a060: 2072 6574 7572 6e20 6c69 7374 2873 7263   return list(src
+0003a070: 2e69 7465 6d73 2829 290a 2020 2020 2020  .items()).      
+0003a080: 2020 7265 7475 726e 206c 6973 7428 7372    return list(sr
+0003a090: 6329 0a20 2020 2065 6c69 6620 5479 7065  c).    elif Type
+0003a0a0: 2873 7263 2c77 616e 745f 7479 7065 293a  (src,want_type):
+0003a0b0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0003a0c0: 7372 630a 2020 2020 6966 2054 7970 6528  src.    if Type(
+0003a0d0: 7372 632c 2827 7374 7227 2c27 6279 7465  src,('str','byte
+0003a0e0: 7327 2929 3a0a 2020 2020 2020 2020 7265  s')):.        re
+0003a0f0: 7475 726e 2046 6f72 6d44 6174 6128 7372  turn FormData(sr
+0003a100: 632c 6465 6661 756c 743d 276f 7267 2729  c,default='org')
+0003a110: 0a20 2020 2072 6574 7572 6e20 4465 6661  .    return Defa
+0003a120: 756c 7428 7372 632c 6465 6661 756c 7429  ult(src,default)
+0003a130: 0a0a 6465 6620 4d6f 7665 4461 7461 2873  ..def MoveData(s
+0003a140: 7263 2c64 6174 613d 4e6f 6e65 2c74 6f3d  rc,data=None,to=
+0003a150: 4e6f 6e65 2c66 726f 6d5f 6964 783d 4e6f  None,from_idx=No
+0003a160: 6e65 2c66 6f72 6365 3d46 616c 7365 2c64  ne,force=False,d
+0003a170: 6566 6175 6c74 3d27 6f72 6727 293a 0a20  efault='org'):. 
+0003a180: 2020 2027 2727 0a20 2020 2073 7570 706f     '''.    suppo
+0003a190: 7274 2073 7263 2074 7970 6520 6973 206c  rt src type is l
+0003a1a0: 6973 742c 7374 722c 2874 7570 6c65 290a  ist,str,(tuple).
+0003a1b0: 2020 2020 6d6f 7669 6e67 2066 6f72 6d61      moving forma
+0003a1c0: 7420 3a20 6461 7461 2864 6174 6129 206f  t : data(data) o
+0003a1d0: 7220 6672 6f6d 5f69 6478 2869 6e74 290a  r from_idx(int).
+0003a1e0: 2020 2020 2020 2d20 6461 7461 203a 2069        - data : i
+0003a1f0: 6620 7372 6320 6861 7320 6d61 6e79 2073  f src has many s
+0003a200: 616d 6520 6461 7461 2074 6865 6e20 6a75  ame data then ju
+0003a210: 7374 206b 6565 7020 7369 6e67 6c65 2064  st keep single d
+0003a220: 6174 6120 6174 206d 6f76 6564 0a20 2020  ata at moved.   
+0003a230: 206d 6f76 696e 6720 6465 7374 2020 203a   moving dest   :
+0003a240: 2074 6f28 696e 7429 0a20 2020 206d 6f76   to(int).    mov
+0003a250: 6520 6461 7461 206f 7220 696e 6465 7828  e data or index(
+0003a260: 6672 6f6d 5f69 6478 2920 746f 2077 616e  from_idx) to wan
+0003a270: 7420 696e 6465 7828 746f 290a 2020 2020  t index(to).    
+0003a280: 2020 666f 7263 653d 5472 7565 3a20 6576    force=True: ev
+0003a290: 656e 2074 7570 6c65 2074 6f20 6d6f 7665  en tuple to move
+0003a2a0: 0a20 2020 2069 6620 6e6f 7420 7375 7070  .    if not supp
+0003a2b0: 6f72 7420 7468 656e 2072 6574 7572 6e20  ort then return 
+0003a2c0: 6465 6661 756c 740a 2020 2020 6465 6661  default.    defa
+0003a2d0: 756c 7420 3a20 6f72 670a 2020 2020 2727  ult : org.    ''
+0003a2e0: 270a 2020 2020 5f74 7570 6c65 3d46 616c  '.    _tuple=Fal
+0003a2f0: 7365 0a20 2020 2073 7263 5f74 7970 653d  se.    src_type=
+0003a300: 5479 7065 4e61 6d65 2873 7263 290a 2020  TypeName(src).  
+0003a310: 2020 6966 2073 7263 5f74 7970 6520 3d3d    if src_type ==
+0003a320: 2027 7475 706c 6527 3a0a 2020 2020 2020   'tuple':.      
+0003a330: 2020 6966 206e 6f74 2066 6f72 6365 3a20    if not force: 
+0003a340: 7265 7475 726e 2044 6566 6175 6c74 2873  return Default(s
+0003a350: 7263 2c64 6566 6175 6c74 290a 2020 2020  rc,default).    
+0003a360: 2020 2020 5f74 7570 6c65 3d54 7275 650a      _tuple=True.
+0003a370: 2020 2020 2020 2020 7372 635f 7479 7065          src_type
+0003a380: 3d27 6c69 7374 270a 2020 2020 6966 2073  ='list'.    if s
+0003a390: 7263 5f74 7970 6520 696e 205b 276c 6973  rc_type in ['lis
+0003a3a0: 7427 2c27 7374 7227 5d20 616e 6420 7372  t','str'] and sr
+0003a3b0: 633a 0a20 2020 2020 2020 2073 7263 3d6c  c:.        src=l
+0003a3c0: 6973 7428 7372 6329 0a20 2020 2020 2020  ist(src).       
+0003a3d0: 2069 6620 746f 203d 3d20 276c 6173 7427   if to == 'last'
+0003a3e0: 3a20 746f 3d2d 310a 2020 2020 2020 2020  : to=-1.        
+0003a3f0: 656c 6966 2074 6f20 3d3d 2027 6669 7273  elif to == 'firs
+0003a400: 7427 3a20 746f 3d30 0a20 2020 2020 2020  t': to=0.       
+0003a410: 2069 6620 6973 696e 7374 616e 6365 2866   if isinstance(f
+0003a420: 726f 6d5f 6964 782c 696e 7429 2061 6e64  rom_idx,int) and
+0003a430: 2069 7369 6e73 7461 6e63 6528 746f 2c69   isinstance(to,i
+0003a440: 6e74 293a 0a20 2020 2020 2020 2020 2020  nt):.           
+0003a450: 2069 6620 6c65 6e28 7372 6329 203e 2061   if len(src) > a
+0003a460: 6273 2866 726f 6d5f 6964 7829 3a0a 2020  bs(from_idx):.  
+0003a470: 2020 2020 2020 2020 2020 2020 2020 746f                to
+0003a480: 3d46 6978 496e 6465 7828 7372 632c 746f  =FixIndex(src,to
+0003a490: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0003a4a0: 2020 6966 2066 726f 6d5f 6964 7821 3d74    if from_idx!=t
+0003a4b0: 6f3a 0a20 2020 2020 2020 2020 2020 2020  o:.             
+0003a4c0: 2020 2020 2020 2069 6620 746f 203d 3d20         if to == 
+0003a4d0: 2d31 3a0a 2020 2020 2020 2020 2020 2020  -1:.            
+0003a4e0: 2020 2020 2020 2020 2020 2020 7372 632e              src.
+0003a4f0: 6170 7065 6e64 2873 7263 5b66 726f 6d5f  append(src[from_
+0003a500: 6964 785d 290a 2020 2020 2020 2020 2020  idx]).          
+0003a510: 2020 2020 2020 2020 2020 656c 6966 2074            elif t
+0003a520: 6f20 3d3d 2030 3a0a 2020 2020 2020 2020  o == 0:.        
+0003a530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003a540: 7372 633d 5b73 7263 5b66 726f 6d5f 6964  src=[src[from_id
+0003a550: 785d 5d2b 7372 630a 2020 2020 2020 2020  x]]+src.        
+0003a560: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0003a570: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003a580: 2020 2020 2020 2020 2020 7372 633d 7372            src=sr
+0003a590: 635b 3a74 6f5d 2b5b 7372 635b 6672 6f6d  c[:to]+[src[from
+0003a5a0: 5f69 6478 5d5d 2b73 7263 5b74 6f3a 5d0a  _idx]]+src[to:].
+0003a5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003a5c0: 2020 2020 7372 635b 746f 5d3d 7372 635b      src[to]=src[
+0003a5d0: 6672 6f6d 5f69 6478 5d0a 2020 2020 2020  from_idx].      
+0003a5e0: 2020 2020 2020 2020 2020 2020 2020 6465                de
+0003a5f0: 6c20 7372 635b 6672 6f6d 5f69 6478 5d0a  l src[from_idx].
+0003a600: 2020 2020 2020 2020 656c 6966 206e 6f74          elif not
+0003a610: 2049 734e 6f6e 6528 6461 7461 2920 616e   IsNone(data) an
+0003a620: 6420 6973 696e 7374 616e 6365 2874 6f2c  d isinstance(to,
+0003a630: 696e 7429 3a0a 2020 2020 2020 2020 2020  int):.          
+0003a640: 2020 746f 3d46 6978 496e 6465 7828 7372    to=FixIndex(sr
+0003a650: 632c 746f 290a 2020 2020 2020 2020 2020  c,to).          
+0003a660: 2020 7372 633d 5b69 2066 6f72 2069 2069    src=[i for i i
+0003a670: 6e20 7372 6320 6966 2069 213d 6461 7461  n src if i!=data
+0003a680: 5d0a 2020 2020 2020 2020 2020 2020 6966  ].            if
+0003a690: 2074 6f20 3d3d 202d 313a 0a20 2020 2020   to == -1:.     
+0003a6a0: 2020 2020 2020 2020 2020 2073 7263 2e61             src.a
+0003a6b0: 7070 656e 6428 6461 7461 290a 2020 2020  ppend(data).    
+0003a6c0: 2020 2020 2020 2020 656c 6966 2074 6f20          elif to 
+0003a6d0: 3d3d 2030 3a0a 2020 2020 2020 2020 2020  == 0:.          
+0003a6e0: 2020 2020 2020 7372 633d 5b64 6174 615d        src=[data]
+0003a6f0: 2b73 7263 0a20 2020 2020 2020 2020 2020  +src.           
+0003a700: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0003a710: 2020 2020 2020 2073 7263 3d73 7263 5b3a         src=src[:
+0003a720: 746f 5d2b 5b64 6174 615d 2b73 7263 5b74  to]+[data]+src[t
+0003a730: 6f3a 5d0a 2020 2020 2020 2020 6966 205f  o:].        if _
+0003a740: 7475 706c 653a 2072 6574 7572 6e20 7475  tuple: return tu
+0003a750: 706c 6528 7372 6329 0a20 2020 2020 2020  ple(src).       
+0003a760: 2065 6c69 6620 7372 635f 7479 7065 203d   elif src_type =
+0003a770: 3d20 2773 7472 273a 2072 6574 7572 6e20  = 'str': return 
+0003a780: 4a6f 696e 2873 7263 2c27 2729 0a20 2020  Join(src,'').   
+0003a790: 2020 2020 2072 6574 7572 6e20 7372 630a       return src.
+0003a7a0: 2020 2020 7265 7475 726e 2044 6566 6175      return Defau
+0003a7b0: 6c74 2873 7263 2c64 6566 6175 6c74 290a  lt(src,default).
+0003a7c0: 0a64 6566 2052 616e 646f 6d28 6c65 6e67  .def Random(leng
+0003a7d0: 7468 3d38 2c6d 6f64 653d 4e6f 6e65 2c73  th=8,mode=None,s
+0003a7e0: 7472 733d 4e6f 6e65 2c2a 2a6f 7074 7329  trs=None,**opts)
+0003a7f0: 3a0a 2020 2020 2727 270a 2020 2020 6d61  :.    '''.    ma
+0003a800: 6b65 2072 616e 646f 6d20 6e75 6d62 6572  ke random number
+0003a810: 2f73 7472 696e 672f 6368 6172 6163 7465  /string/characte
+0003a820: 7273 0a20 2020 206c 656e 6774 6820 2020  rs.    length   
+0003a830: 3a20 7261 6e64 6f6d 2073 7472 696e 6720  : random string 
+0003a840: 6c65 6e67 7468 2028 6465 6661 756c 743a  length (default:
+0003a850: 2038 290a 2020 2020 6d6f 6465 2028 6465   8).    mode (de
+0003a860: 6661 756c 743a 2041 6c70 6861 6e75 6d29  fault: Alphanum)
+0003a870: 0a20 2020 2020 2d20 616c 7068 6120 3a20  .     - alpha : 
+0003a880: 6c6f 7765 7220 616c 7068 6162 6574 0a20  lower alphabet. 
+0003a890: 2020 2020 2d20 414c 5048 4120 3a20 7570      - ALPHA : up
+0003a8a0: 7065 7220 616c 7068 6162 6574 0a20 2020  per alphabet.   
+0003a8b0: 2020 2d20 416c 7068 6120 3a20 6c6f 7765    - Alpha : lowe
+0003a8c0: 7220 2b20 7570 7065 7220 616c 7068 6162  r + upper alphab
+0003a8d0: 6574 0a20 2020 2020 2d20 6e75 6d20 2020  et.     - num   
+0003a8e0: 3a20 6e75 6d62 6572 0a20 2020 2020 2d20  : number.     - 
+0003a8f0: 6368 6172 2020 3a20 6c69 6e75 7820 636f  char  : linux co
+0003a900: 6e73 6f6c 6520 7573 6162 6c65 2073 796d  nsole usable sym
+0003a910: 626f 6c20 6368 6172 6163 7465 7273 0a20  bol characters. 
+0003a920: 2020 2020 2d20 7379 6d20 2020 3a20 616c      - sym   : al
+0003a930: 6c20 7379 6d62 6f6c 2063 6861 7261 6374  l symbol charact
+0003a940: 6572 730a 2020 2020 202d 2063 6f6d 6269  ers.     - combi
+0003a950: 6e20 6162 6f76 6520 6d6f 6465 7320 2865  n above modes (e
+0003a960: 783a 2041 6c70 6861 6e75 6d29 0a20 2020  x: Alphanum).   
+0003a970: 2073 7472 7320 2020 2020 3a20 6966 2079   strs     : if y
+0003a980: 6f75 2077 616e 7420 6d61 6b65 2061 2072  ou want make a r
+0003a990: 616e 646f 6d20 7374 7269 6e67 2077 6974  andom string wit
+0003a9a0: 6820 796f 7572 206f 776e 2073 7065 6369  h your own speci
+0003a9b0: 616c 2063 6861 7261 6374 6572 730a 2020  al characters.  
+0003a9c0: 2020 2727 270a 2020 2020 616c 7068 613d    '''.    alpha=
+0003a9d0: 2761 6263 6465 6667 6869 6a6b 6c6d 6e6f  'abcdefghijklmno
+0003a9e0: 7071 7273 7475 7677 7879 7a27 0a20 2020  pqrstuvwxyz'.   
+0003a9f0: 2041 6c70 6861 3d27 4142 4344 4546 4748   Alpha='ABCDEFGH
+0003aa00: 494a 4b4c 4d4e 4f50 5152 5354 5556 5758  IJKLMNOPQRSTUVWX
+0003aa10: 595a 270a 2020 2020 6e75 6d3d 2730 3132  YZ'.    num='012
+0003aa20: 3334 3536 3738 3927 0a20 2020 2073 796d  3456789'.    sym
+0003aa30: 626f 6c3d 2727 277e 2140 2324 255e 5f2b  bol='''~!@#$%^_+
+0003aa40: 2d3d 7b7d 5b5d 3a2c 2e27 2727 0a20 2020  -={}[]:,.'''.   
+0003aa50: 2053 796d 626f 6c3d 2727 2760 2a28 2926   Symbol='''`*()&
+0003aa60: 7c5c 5c27 3b22 2f69 3c3e 3f27 2727 0a20  |\\';"/i<>?'''. 
+0003aa70: 2020 2073 7061 6365 3d27 2027 0a20 2020     space=' '.   
+0003aa80: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
+0003aa90: 6365 2873 7472 732c 7374 7229 206f 7220  ce(strs,str) or 
+0003aaa0: 6e6f 7420 7374 7273 3a0a 2020 2020 2020  not strs:.      
+0003aab0: 2020 7374 7273 3d27 270a 2020 2020 2020    strs=''.      
+0003aac0: 2020 6966 206d 6f64 6520 696e 205b 2761    if mode in ['a
+0003aad0: 6c6c 272c 272a 275d 3a0a 2020 2020 2020  ll','*']:.      
+0003aae0: 2020 2020 2020 7374 7273 3d61 6c70 6861        strs=alpha
+0003aaf0: 2b41 6c70 6861 2b6e 756d 2b73 796d 626f  +Alpha+num+symbo
+0003ab00: 6c2b 5379 6d62 6f6c 2b73 7061 6365 0a20  l+Symbol+space. 
+0003ab10: 2020 2020 2020 2065 6c69 6620 6973 696e         elif isin
+0003ab20: 7374 616e 6365 286d 6f64 652c 7374 7229  stance(mode,str)
+0003ab30: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+0003ab40: 2027 616c 7068 6127 2069 6e20 6d6f 6465   'alpha' in mode
+0003ab50: 3a20 7374 7273 3d61 6c70 6861 0a20 2020  : strs=alpha.   
+0003ab60: 2020 2020 2020 2020 2069 6620 2741 6c70           if 'Alp
+0003ab70: 6861 2720 696e 206d 6f64 653a 2073 7472  ha' in mode: str
+0003ab80: 733d 616c 7068 612b 416c 7068 610a 2020  s=alpha+Alpha.  
+0003ab90: 2020 2020 2020 2020 2020 6966 2027 414c            if 'AL
+0003aba0: 5048 4127 2069 6e20 6d6f 6465 3a20 7374  PHA' in mode: st
+0003abb0: 7273 3d41 6c70 6861 0a20 2020 2020 2020  rs=Alpha.       
+0003abc0: 2020 2020 2069 6620 276e 756d 2720 696e       if 'num' in
+0003abd0: 206d 6f64 653a 2073 7472 733d 7374 7273   mode: strs=strs
+0003abe0: 2b6e 756d 0a20 2020 2020 2020 2020 2020  +num.           
+0003abf0: 2069 6620 2763 6861 7227 2069 6e20 6d6f   if 'char' in mo
+0003ac00: 6465 3a20 7374 7273 3d73 7472 732b 7379  de: strs=strs+sy
+0003ac10: 6d62 6f6c 0a20 2020 2020 2020 2020 2020  mbol.           
+0003ac20: 2065 6c69 6620 2773 796d 2720 696e 206d   elif 'sym' in m
+0003ac30: 6f64 653a 2073 7472 733d 7374 7273 2b73  ode: strs=strs+s
+0003ac40: 796d 626f 6c2b 5379 6d62 6f6c 2b73 7061  ymbol+Symbol+spa
+0003ac50: 6365 0a20 2020 2069 6620 6e6f 7420 7374  ce.    if not st
+0003ac60: 7273 3a20 7374 7273 3d61 6c70 6861 2b41  rs: strs=alpha+A
+0003ac70: 6c70 6861 2b6e 756d 0a20 2020 2073 7472  lpha+num.    str
+0003ac80: 6e3d 6c65 6e28 7374 7273 292d 310a 2020  n=len(strs)-1.  
+0003ac90: 2020 7374 7261 3d6c 6973 7428 7374 7273    stra=list(strs
+0003aca0: 290a 2020 2020 6f75 743d 5b5d 0a20 2020  ).    out=[].   
+0003acb0: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
+0003acc0: 302c 6c65 6e67 7468 293a 0a20 2020 2020  0,length):.     
+0003acd0: 2020 2072 616e 646f 6d2e 7368 7566 666c     random.shuffl
+0003ace0: 6528 7374 7261 290a 2020 2020 2020 2020  e(stra).        
+0003acf0: 6f75 742e 6170 7065 6e64 2873 7472 615b  out.append(stra[
+0003ad00: 7261 6e64 6f6d 2e72 616e 6469 6e74 2830  random.randint(0
+0003ad10: 2c73 7472 6e29 5d29 0a20 2020 2072 6574  ,strn)]).    ret
+0003ad20: 7572 6e20 696e 7428 2727 2e6a 6f69 6e28  urn int(''.join(
+0003ad30: 6f75 7429 2920 6966 206d 6f64 6520 3d3d  out)) if mode ==
+0003ad40: 2027 6e75 6d27 2065 6c73 6520 2727 2e6a   'num' else ''.j
+0003ad50: 6f69 6e28 6f75 7429 0a0a 6465 6620 4973  oin(out)..def Is
+0003ad60: 416c 6c53 616d 6553 7472 2873 7263 2c66  AllSameStr(src,f
+0003ad70: 696e 6429 3a0a 2020 2020 2727 2743 6865  ind):.    '''Che
+0003ad80: 636b 2069 6e70 7574 2073 7472 696e 6720  ck input string 
+0003ad90: 6973 2041 6c6c 2073 616d 6520 7374 7269  is All same stri
+0003ada0: 6e67 206f 7220 6e6f 7427 2727 0a20 2020  ng or not'''.   
+0003adb0: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
+0003adc0: 7263 2c73 7472 2920 616e 6420 6973 696e  rc,str) and isin
+0003add0: 7374 616e 6365 2866 696e 642c 7374 7229  stance(find,str)
+0003ade0: 3a0a 2020 2020 2020 2020 6966 2073 7263  :.        if src
+0003adf0: 2e63 6f75 6e74 2866 696e 6429 203d 3d20  .count(find) == 
+0003ae00: 6c65 6e28 7372 6329 2f6c 656e 2866 696e  len(src)/len(fin
+0003ae10: 6429 3a0a 2020 2020 2020 2020 2020 2020  d):.            
+0003ae20: 7265 7475 726e 2054 7275 650a 2020 2020  return True.    
+0003ae30: 7265 7475 726e 2046 616c 7365 0a0a 6465  return False..de
+0003ae40: 6620 4d6b 5465 6d70 2866 696c 656e 616d  f MkTemp(filenam
+0003ae50: 653d 4e6f 6e65 2c73 7566 6669 783d 4e6f  e=None,suffix=No
+0003ae60: 6e65 2c73 706c 6974 3d27 2d27 2c6f 7074  ne,split='-',opt
+0003ae70: 3d27 6472 7927 2c62 6173 655f 6469 723d  ='dry',base_dir=
+0003ae80: 4e6f 6e65 2c75 6e69 713d 4661 6c73 652c  None,uniq=False,
+0003ae90: 6465 6661 756c 745f 6c65 6e67 7468 3d38  default_length=8
+0003aea0: 2c6d 6f64 653d 4e6f 6e65 2c2a 2a6f 7074  ,mode=None,**opt
+0003aeb0: 7329 3a0a 2020 2020 2727 270a 2020 2020  s):.    '''.    
+0003aec0: 6d61 6b65 2061 2072 616e 646f 6d20 7374  make a random st
+0003aed0: 7269 6e67 0a20 2020 2066 696c 656e 616d  ring.    filenam
+0003aee0: 653a 200a 2020 2020 2020 4e6f 6e65 2020  e: .      None  
+0003aef0: 3a20 6765 6e65 7261 7465 2072 616e 646f  : generate rando
+0003af00: 6d20 7374 7269 6e67 0a20 2020 2020 2061  m string.      a
+0003af10: 6263 2d58 5858 5858 2e6c 6f67 203a 2061  bc-XXXXX.log : a
+0003af20: 6263 2d3c 7261 6e64 6f6d 2035 2063 6861  bc-<random 5 cha
+0003af30: 7261 6374 6572 733e 2e6c 6f67 0a20 2020  racters>.log.   
+0003af40: 2020 2061 6263 2d4e 4e4e 2d61 6263 642e     abc-NNN-abcd.
+0003af50: 6c6f 6720 2020 3a20 6162 632d 3c72 616e  log   : abc-<ran
+0003af60: 646f 6d20 3320 6e75 6d62 6572 733e 2d61  dom 3 numbers>-a
+0003af70: 6263 642e 6c6f 670a 2020 2020 2020 6162  bcd.log.      ab
+0003af80: 632e 6c6f 672d 5858 5858 2020 3a20 6162  c.log-XXXX  : ab
+0003af90: 632e 6c6f 672d 3c72 616e 646f 6d20 3420  c.log-<random 4 
+0003afa0: 6368 6172 6163 7465 7273 3e0a 2020 2020  characters>.    
+0003afb0: 7375 6666 6978 2020 3a20 6966 2079 6f75  suffix  : if you
+0003afc0: 206e 6565 6420 6164 6469 6e67 2066 696c   need adding fil
+0003afd0: 6520 6578 7461 6e64 2873 7566 6669 7829  e extand(suffix)
+0003afe0: 2028 6578 3a20 7375 6666 6978 3d27 6c6f   (ex: suffix='lo
+0003aff0: 6727 203d 3e20 5858 5858 582e 6c6f 6729  g' => XXXXX.log)
+0003b000: 0a20 2020 2073 706c 6974 2020 203a 2064  .    split   : d
+0003b010: 6566 6175 6c74 202d 2c20 7370 6c69 7420  efault -, split 
+0003b020: 7379 6d62 6f6c 2066 6f72 2074 6865 2066  symbol for the f
+0003b030: 696c 656e 616d 650a 2020 2020 6f70 740a  ilename.    opt.
+0003b040: 2020 2020 2020 2d20 6472 7920 3a20 6472        - dry : dr
+0003b050: 7920 7275 6e20 2872 6574 7572 6e20 7374  y run (return st
+0003b060: 7269 6e67 2928 6465 6661 756c 7429 0a20  ring)(default). 
+0003b070: 2020 2020 202d 2066 696c 653a 206d 616b       - file: mak
+0003b080: 6520 6120 6669 6c65 0a20 2020 2020 202d  e a file.      -
+0003b090: 2064 6972 203a 206d 616b 6520 6120 6469   dir : make a di
+0003b0a0: 7265 6374 6f72 790a 2020 2020 6261 7365  rectory.    base
+0003b0b0: 5f64 6972 3a20 6966 2079 6f75 2077 616e  _dir: if you wan
+0003b0c0: 7420 6120 7374 7269 6e67 2075 6e64 6572  t a string under
+0003b0d0: 2062 6173 655f 6469 720a 2020 2020 756e   base_dir.    un
+0003b0e0: 6971 2020 2020 3a20 6966 2079 6f75 2077  iq    : if you w
+0003b0f0: 616e 7420 6d61 6b65 2061 2075 6e69 7120  ant make a uniq 
+0003b100: 7374 7269 6e67 2028 6e6f 7420 6578 6973  string (not exis
+0003b110: 7469 6e67 2066 696c 656e 616d 6520 696e  ting filename in
+0003b120: 2074 6865 2028 6261 7365 5f64 6972 2964   the (base_dir)d
+0003b130: 6972 6563 746f 7279 290a 2020 2020 2020  irectory).      
+0003b140: 7365 6972 6961 6c20 696e 6372 6561 7365  seirial increase
+0003b150: 206e 756d 6265 720a 2020 2020 2020 2020   number.        
+0003b160: 6966 2065 7869 7374 2061 6263 2e6c 6f67  if exist abc.log
+0003b170: 2074 6865 6e20 6162 632e 6c6f 672d 3030   then abc.log-00
+0003b180: 3030 3030 3030 0a20 2020 2020 2020 2069  000000.        i
+0003b190: 6620 6578 6973 7420 6162 632e 6c6f 672c  f exist abc.log,
+0003b1a0: 6162 632e 6c6f 672d 3030 3030 3030 3030  abc.log-00000000
+0003b1b0: 2074 6865 6e20 6162 632e 6c6f 672d 3030   then abc.log-00
+0003b1c0: 3030 3030 3031 0a20 2020 2020 2066 696c  000001.      fil
+0003b1d0: 656e 616d 653d 2761 6263 272c 7375 6666  ename='abc',suff
+0003b1e0: 6978 3d27 6c6f 6727 2c75 6e69 713d 5472  ix='log',uniq=Tr
+0003b1f0: 7565 0a20 2020 2020 2020 2069 6620 6578  ue.        if ex
+0003b200: 6973 7420 6162 632e 6c6f 6720 7468 656e  ist abc.log then
+0003b210: 2061 6263 2d30 3030 3030 3030 302e 6c6f   abc-00000000.lo
+0003b220: 670a 2020 2020 2020 2020 6966 2065 7869  g.        if exi
+0003b230: 7374 2061 6263 2e6c 6f67 2c61 6263 2d30  st abc.log,abc-0
+0003b240: 3030 3030 3030 302e 6c6f 6720 7468 656e  0000000.log then
+0003b250: 2061 6263 2d30 3030 3030 3030 312e 6c6f   abc-00000001.lo
+0003b260: 670a 2020 2020 6465 6661 756c 745f 6c65  g.    default_le
+0003b270: 6e67 7468 3a20 7261 6e64 6f6d 2073 7472  ngth: random str
+0003b280: 696e 6720 6c65 6e67 7468 0a20 2020 206d  ing length.    m
+0003b290: 6f64 6520 2020 203a 2072 616e 646f 6d20  ode    : random 
+0003b2a0: 7374 7269 6e67 206d 6f64 6520 2873 616d  string mode (sam
+0003b2b0: 6520 6173 2052 616e 646f 6d28 2927 7320  e as Random()'s 
+0003b2c0: 6d6f 6465 290a 2020 2020 6375 7374 6f6d  mode).    custom
+0003b2d0: 2020 3a20 6375 7374 6f6d 2072 616e 646f    : custom rando
+0003b2e0: 6d20 7374 7269 6e67 2073 6f75 7263 6520  m string source 
+0003b2f0: 2873 616d 6520 6173 2052 616e 646f 6d28  (same as Random(
+0003b300: 2927 7320 7374 7273 2070 6172 616d 6574  )'s strs paramet
+0003b310: 6572 290a 2020 2020 2727 270a 2020 2020  er).    '''.    
+0003b320: 2353 7570 706f 7274 204f 4c44 204d 6b54  #Support OLD MkT
+0003b330: 656d 7028 2920 0a20 2020 2069 6620 6973  emp() .    if is
+0003b340: 696e 7374 616e 6365 2873 7566 6669 782c  instance(suffix,
+0003b350: 7374 7229 2061 6e64 2069 7369 6e73 7461  str) and isinsta
+0003b360: 6e63 6528 6669 6c65 6e61 6d65 2c73 7472  nce(filename,str
+0003b370: 293a 0a20 2020 2020 2020 2069 6620 7375  ):.        if su
+0003b380: 6666 6978 5b30 5d3d 3d27 2d27 3a0a 2020  ffix[0]=='-':.  
+0003b390: 2020 2020 2020 2020 2020 6966 2049 7341            if IsA
+0003b3a0: 6c6c 5361 6d65 5374 7228 7375 6666 6978  llSameStr(suffix
+0003b3b0: 5b31 3a5d 2c27 5827 2920 6f72 2049 7341  [1:],'X') or IsA
+0003b3c0: 6c6c 5361 6d65 5374 7228 7375 6666 6978  llSameStr(suffix
+0003b3d0: 5b31 3a5d 2c27 4e27 2920 6f72 2049 7341  [1:],'N') or IsA
+0003b3e0: 6c6c 5361 6d65 5374 7228 7375 6666 6978  llSameStr(suffix
+0003b3f0: 5b31 3a5d 2c27 7827 2920 6f72 2049 7341  [1:],'x') or IsA
 0003b400: 6c6c 5361 6d65 5374 7228 7375 6666 6978  llSameStr(suffix
-0003b410: 5b31 3a5d 2c27 5827 2920 6f72 2049 7341  [1:],'X') or IsA
-0003b420: 6c6c 5361 6d65 5374 7228 7375 6666 6978  llSameStr(suffix
-0003b430: 5b31 3a5d 2c27 4e27 2920 6f72 2049 7341  [1:],'N') or IsA
-0003b440: 6c6c 5361 6d65 5374 7228 7375 6666 6978  llSameStr(suffix
-0003b450: 5b31 3a5d 2c27 7827 2920 6f72 2049 7341  [1:],'x') or IsA
-0003b460: 6c6c 5361 6d65 5374 7228 7375 6666 6978  llSameStr(suffix
-0003b470: 5b31 3a5d 2c27 6e27 293a 0a20 2020 2020  [1:],'n'):.     
-0003b480: 2020 2020 2020 2020 2020 2064 6566 6175             defau
-0003b490: 6c74 5f6c 656e 6774 683d 6c65 6e28 7375  lt_length=len(su
-0003b4a0: 6666 6978 292d 310a 2020 2020 2020 2020  ffix)-1.        
-0003b4b0: 2020 2020 2020 2020 6669 6c65 6e61 6d65          filename
-0003b4c0: 3d66 696c 656e 616d 652b 7375 6666 6978  =filename+suffix
-0003b4d0: 2e75 7070 6572 2829 0a20 2020 2023 204e  .upper().    # N
-0003b4e0: 6577 2064 6573 6967 6e0a 2020 2020 6465  ew design.    de
-0003b4f0: 6620 6f75 7466 696c 6528 6669 6c65 6e61  f outfile(filena
-0003b500: 6d65 2c6f 7074 293a 0a20 2020 2020 2020  me,opt):.       
-0003b510: 2069 6620 6f70 7420 696e 205b 2766 696c   if opt in ['fil
-0003b520: 6527 2c27 6627 5d3a 0a20 2020 2020 2020  e','f']:.       
-0003b530: 2020 2020 6f73 2e6d 6b6e 6f64 6528 6669      os.mknode(fi
-0003b540: 6c65 6e61 6d65 290a 2020 2020 2020 2020  lename).        
-0003b550: 656c 6966 206f 7074 2069 6e20 5b27 6469  elif opt in ['di
-0003b560: 7227 2c27 6427 2c27 6469 7265 6374 6f72  r','d','director
-0003b570: 7927 5d3a 0a20 2020 2020 2020 2020 2020  y']:.           
-0003b580: 6f73 2e6d 6b64 6972 2866 696c 656e 616d  os.mkdir(filenam
-0003b590: 6529 0a20 2020 2020 2020 2065 6c73 653a  e).        else:
-0003b5a0: 0a20 2020 2020 2020 2020 2020 7265 7475  .           retu
-0003b5b0: 726e 2066 696c 656e 616d 650a 0a20 2020  rn filename..   
-0003b5c0: 2064 6566 206d 6b5f 6669 6c65 6e61 6d65   def mk_filename
-0003b5d0: 2866 696c 656e 616d 652c 7370 6c69 7429  (filename,split)
-0003b5e0: 3a0a 2020 2020 2020 2020 6669 6c65 6e61  :.        filena
-0003b5f0: 6d65 5f61 3d66 696c 656e 616d 652e 7370  me_a=filename.sp
-0003b600: 6c69 7428 7370 6c69 7429 0a20 2020 2020  lit(split).     
-0003b610: 2020 2066 696c 656e 616d 655f 6e3d 6c65     filename_n=le
-0003b620: 6e28 6669 6c65 6e61 6d65 5f61 290a 2020  n(filename_a).  
-0003b630: 2020 2020 2020 7373 733d 4e6f 6e65 0a20        sss=None. 
-0003b640: 2020 2020 2020 2066 6f72 2066 6620 696e         for ff in
-0003b650: 2072 616e 6765 2830 2c66 696c 656e 616d   range(0,filenam
-0003b660: 655f 6e29 3a0a 2020 2020 2020 2020 2020  e_n):.          
-0003b670: 2020 666f 7220 7373 2069 6e20 5b27 4e27    for ss in ['N'
-0003b680: 2c27 5827 5d3a 0a20 2020 2020 2020 2020  ,'X']:.         
-0003b690: 2020 2020 2020 2069 6620 4973 416c 6c53         if IsAllS
-0003b6a0: 616d 6553 7472 2866 696c 656e 616d 655f  ameStr(filename_
-0003b6b0: 615b 6666 5d2c 7373 293a 0a20 2020 2020  a[ff],ss):.     
-0003b6c0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0003b6d0: 7373 3d73 730a 2020 2020 2020 2020 2020  ss=ss.          
-0003b6e0: 2020 2020 2020 2020 2020 6966 2066 6620            if ff 
-0003b6f0: 3c20 6669 6c65 6e61 6d65 5f6e 2d31 3a0a  < filename_n-1:.
-0003b700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b710: 2020 2020 2020 2020 6161 3d52 616e 646f          aa=Rando
-0003b720: 6d28 6c65 6e67 7468 3d6c 656e 2866 696c  m(length=len(fil
-0003b730: 656e 616d 655f 615b 6666 5d29 2c6d 6f64  ename_a[ff]),mod
-0003b740: 653d 276e 756d 2720 6966 2073 7373 203d  e='num' if sss =
-0003b750: 3d20 274e 2720 656c 7365 206d 6f64 652c  = 'N' else mode,
-0003b760: 7374 7273 3d6f 7074 732e 6765 7428 2763  strs=opts.get('c
-0003b770: 7573 746f 6d27 2929 0a20 2020 2020 2020  ustom')).       
-0003b780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b790: 2069 6620 6973 696e 7374 616e 6365 2861   if isinstance(a
-0003b7a0: 612c 696e 7429 3a0a 2020 2020 2020 2020  a,int):.        
-0003b7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b7c0: 2020 2020 6669 6c65 6e61 6d65 5f61 5b66      filename_a[f
-0003b7d0: 665d 3d27 2530 7b7d 6427 2e66 6f72 6d61  f]='%0{}d'.forma
-0003b7e0: 7428 6c65 6e28 6669 6c65 6e61 6d65 5f61  t(len(filename_a
-0003b7f0: 5b66 665d 2929 2561 610a 2020 2020 2020  [ff]))%aa.      
-0003b800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b810: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0003b820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b830: 2020 2020 6669 6c65 6e61 6d65 5f61 5b66      filename_a[f
-0003b840: 665d 3d27 7b7d 272e 666f 726d 6174 2861  f]='{}'.format(a
-0003b850: 6129 0a20 2020 2020 2020 2066 696c 656e  a).        filen
-0003b860: 616d 655f 6c61 7374 5f73 7566 6669 783d  ame_last_suffix=
-0003b870: 6669 6c65 6e61 6d65 5f61 5b2d 315d 2e73  filename_a[-1].s
-0003b880: 706c 6974 2827 2e27 295b 305d 0a20 2020  plit('.')[0].   
-0003b890: 2020 2020 2066 696c 656e 616d 655f 6c61       filename_la
-0003b8a0: 7374 5f65 7874 3d27 2e27 2e6a 6f69 6e28  st_ext='.'.join(
-0003b8b0: 6669 6c65 6e61 6d65 5f61 5b2d 315d 2e73  filename_a[-1].s
-0003b8c0: 706c 6974 2827 2e27 295b 313a 5d29 0a20  plit('.')[1:]). 
-0003b8d0: 2020 2020 2020 2069 6620 7373 7320 6973         if sss is
-0003b8e0: 204e 6f6e 653a 2073 7373 3d5b 274e 272c   None: sss=['N',
-0003b8f0: 2758 275d 0a20 2020 2020 2020 2066 6f72  'X'].        for
-0003b900: 2073 7320 696e 2073 7373 3a0a 2020 2020   ss in sss:.    
-0003b910: 2020 2020 2020 2020 6966 2049 7341 6c6c          if IsAll
-0003b920: 5361 6d65 5374 7228 6669 6c65 6e61 6d65  SameStr(filename
-0003b930: 5f6c 6173 745f 7375 6666 6978 2c73 7329  _last_suffix,ss)
-0003b940: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0003b950: 2020 6161 3d52 616e 646f 6d28 6c65 6e67    aa=Random(leng
-0003b960: 7468 3d6c 656e 2866 696c 656e 616d 655f  th=len(filename_
-0003b970: 6c61 7374 5f73 7566 6669 7829 2c6d 6f64  last_suffix),mod
-0003b980: 653d 276e 756d 2720 6966 2073 7320 3d3d  e='num' if ss ==
-0003b990: 2027 4e27 2065 6c73 6520 6d6f 6465 2c73   'N' else mode,s
-0003b9a0: 7472 733d 6f70 7473 2e67 6574 2827 6375  trs=opts.get('cu
-0003b9b0: 7374 6f6d 2729 290a 2020 2020 2020 2020  stom')).        
-0003b9c0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-0003b9d0: 7461 6e63 6528 6161 2c69 6e74 293a 0a20  tance(aa,int):. 
-0003b9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003b9f0: 2020 2066 696c 656e 616d 655f 615b 2d31     filename_a[-1
-0003ba00: 5d3d 2725 307b 7d64 272e 666f 726d 6174  ]='%0{}d'.format
-0003ba10: 286c 656e 2866 696c 656e 616d 655f 6c61  (len(filename_la
-0003ba20: 7374 5f73 7566 6669 7829 2925 6161 0a20  st_suffix))%aa. 
-0003ba30: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0003ba40: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0003ba50: 2020 2020 2020 2020 2066 696c 656e 616d           filenam
-0003ba60: 655f 615b 2d31 5d3d 277b 7d27 2e66 6f72  e_a[-1]='{}'.for
-0003ba70: 6d61 7428 6161 290a 2020 2020 2020 2020  mat(aa).        
-0003ba80: 2020 2020 2020 2020 6966 2066 696c 656e          if filen
-0003ba90: 616d 655f 6c61 7374 5f65 7874 3a0a 2020  ame_last_ext:.  
-0003baa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bab0: 2020 6669 6c65 6e61 6d65 5f61 5b2d 315d    filename_a[-1]
-0003bac0: 3d66 696c 656e 616d 655f 615b 2d31 5d2b  =filename_a[-1]+
-0003bad0: 272e 7b7d 272e 666f 726d 6174 2866 696c  '.{}'.format(fil
-0003bae0: 656e 616d 655f 6c61 7374 5f65 7874 290a  ename_last_ext).
-0003baf0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0003bb00: 706c 6974 2e6a 6f69 6e28 6669 6c65 6e61  plit.join(filena
-0003bb10: 6d65 5f61 290a 0a20 2020 2069 6620 4973  me_a)..    if Is
-0003bb20: 4e6f 6e65 2866 696c 656e 616d 6529 206f  None(filename) o
-0003bb30: 7220 6e6f 7420 6973 696e 7374 616e 6365  r not isinstance
-0003bb40: 2866 696c 656e 616d 652c 7374 7229 3a0a  (filename,str):.
-0003bb50: 2020 2020 2020 2020 7266 696c 656e 616d          rfilenam
-0003bb60: 653d 5261 6e64 6f6d 286c 656e 6774 683d  e=Random(length=
-0003bb70: 6465 6661 756c 745f 6c65 6e67 7468 2c6d  default_length,m
-0003bb80: 6f64 653d 276e 756d 2720 6966 2073 7566  ode='num' if suf
-0003bb90: 6669 7820 696e 205b 276e 272c 274e 275d  fix in ['n','N']
-0003bba0: 2065 6c73 6520 6d6f 6465 2c73 7472 733d   else mode,strs=
-0003bbb0: 6f70 7473 2e67 6574 2827 6375 7374 6f6d  opts.get('custom
-0003bbc0: 2729 290a 2020 2020 2020 2020 6261 7365  ')).        base
-0003bbd0: 5f64 6972 3d27 2e27 2069 6620 6e6f 7420  _dir='.' if not 
-0003bbe0: 6261 7365 5f64 6972 2065 6c73 6520 6261  base_dir else ba
-0003bbf0: 7365 5f64 6972 0a20 2020 2065 6c73 653a  se_dir.    else:
-0003bc00: 0a20 2020 2020 2020 2062 6173 655f 6469  .        base_di
-0003bc10: 723d 6f73 2e70 6174 682e 6469 726e 616d  r=os.path.dirnam
-0003bc20: 6528 6669 6c65 6e61 6d65 290a 2020 2020  e(filename).    
-0003bc30: 2020 2020 6261 7365 5f64 6972 3d27 2e27      base_dir='.'
-0003bc40: 2069 6620 6e6f 7420 6261 7365 5f64 6972   if not base_dir
-0003bc50: 2065 6c73 6520 6261 7365 5f64 6972 0a20   else base_dir. 
-0003bc60: 2020 2020 2020 2072 6669 6c65 6e61 6d65         rfilename
-0003bc70: 3d6d 6b5f 6669 6c65 6e61 6d65 286f 732e  =mk_filename(os.
-0003bc80: 7061 7468 2e62 6173 656e 616d 6528 6669  path.basename(fi
-0003bc90: 6c65 6e61 6d65 292c 7370 6c69 7429 0a20  lename),split). 
-0003bca0: 2020 2069 6620 756e 6971 3a0a 2020 2020     if uniq:.    
-0003bcb0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0003bcc0: 6528 6261 7365 5f64 6972 2c73 7472 2920  e(base_dir,str) 
-0003bcd0: 616e 6420 6f73 2e70 6174 682e 6973 6469  and os.path.isdi
-0003bce0: 7228 6261 7365 5f64 6972 293a 0a20 2020  r(base_dir):.   
-0003bcf0: 2020 2020 2020 2020 2069 6e63 3d46 616c           inc=Fal
-0003bd00: 7365 0a20 2020 2020 2020 2020 2020 2066  se.            f
-0003bd10: 6f72 2069 2069 6e20 7261 6e67 6528 302c  or i in range(0,
-0003bd20: 3130 3030 293a 0a20 2020 2020 2020 2020  1000):.         
-0003bd30: 2020 2020 2020 2069 6620 696e 633a 0a20         if inc:. 
-0003bd40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bd50: 2020 206e 6577 5f66 696c 656e 616d 653d     new_filename=
-0003bd60: 7266 696c 656e 616d 652b 277b 7d25 307b  rfilename+'{}%0{
-0003bd70: 7d64 272e 666f 726d 6174 2873 706c 6974  }d'.format(split
-0003bd80: 2c64 6566 6175 6c74 5f6c 656e 6774 6829  ,default_length)
-0003bd90: 2528 692d 3129 0a20 2020 2020 2020 2020  %(i-1).         
-0003bda0: 2020 2020 2020 2020 2020 2069 6620 7375             if su
-0003bdb0: 6666 6978 3a0a 2020 2020 2020 2020 2020  ffix:.          
-0003bdc0: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
-0003bdd0: 775f 6669 6c65 6e61 6d65 3d6e 6577 5f66  w_filename=new_f
-0003bde0: 696c 656e 616d 652b 272e 7b7d 272e 666f  ilename+'.{}'.fo
-0003bdf0: 726d 6174 2873 7566 6669 7829 0a20 2020  rmat(suffix).   
-0003be00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003be10: 206e 6577 5f66 696c 653d 6f73 2e70 6174   new_file=os.pat
-0003be20: 682e 6a6f 696e 2862 6173 655f 6469 722c  h.join(base_dir,
-0003be30: 6e65 775f 6669 6c65 6e61 6d65 290a 2020  new_filename).  
-0003be40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003be50: 2020 6966 206e 6f74 206f 732e 7061 7468    if not os.path
-0003be60: 2e65 7869 7374 7328 6e65 775f 6669 6c65  .exists(new_file
-0003be70: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0003be80: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0003be90: 6e20 6f75 7466 696c 6528 6e65 775f 6669  n outfile(new_fi
-0003bea0: 6c65 2c6f 7074 290a 2020 2020 2020 2020  le,opt).        
-0003beb0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0003bec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bed0: 2020 6e65 775f 6669 6c65 6e61 6d65 3d6d    new_filename=m
-0003bee0: 6b5f 6669 6c65 6e61 6d65 2872 6669 6c65  k_filename(rfile
-0003bef0: 6e61 6d65 2c73 706c 6974 290a 2020 2020  name,split).    
-0003bf00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bf10: 6966 206e 6577 5f66 696c 656e 616d 6520  if new_filename 
-0003bf20: 3d3d 2072 6669 6c65 6e61 6d65 3a0a 2020  == rfilename:.  
-0003bf30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bf40: 2020 2020 2020 696e 633d 5472 7565 0a20        inc=True. 
-0003bf50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bf60: 2020 2069 6620 7375 6666 6978 3a0a 2020     if suffix:.  
-0003bf70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003bf80: 2020 2020 2020 6e65 775f 6669 6c65 6e61        new_filena
-0003bf90: 6d65 3d6e 6577 5f66 696c 656e 616d 652b  me=new_filename+
-0003bfa0: 272e 7b7d 272e 666f 726d 6174 2873 7566  '.{}'.format(suf
-0003bfb0: 6669 7829 0a20 2020 2020 2020 2020 2020  fix).           
-0003bfc0: 2020 2020 2020 2020 206e 6577 5f66 696c           new_fil
-0003bfd0: 653d 6f73 2e70 6174 682e 6a6f 696e 2862  e=os.path.join(b
-0003bfe0: 6173 655f 6469 722c 6e65 775f 6669 6c65  ase_dir,new_file
-0003bff0: 6e61 6d65 290a 2020 2020 2020 2020 2020  name).          
-0003c000: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-0003c010: 206f 732e 7061 7468 2e65 7869 7374 7328   os.path.exists(
-0003c020: 6e65 775f 6669 6c65 293a 0a20 2020 2020  new_file):.     
-0003c030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c040: 2020 2072 6574 7572 6e20 6f75 7466 696c     return outfil
-0003c050: 6528 6e65 775f 6669 6c65 2c6f 7074 290a  e(new_file,opt).
-0003c060: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0003c070: 2020 6966 2062 6173 655f 6469 7220 3d3d    if base_dir ==
-0003c080: 2027 2e27 3a0a 2020 2020 2020 2020 2020   '.':.          
-0003c090: 2020 6966 2073 7566 6669 783a 0a20 2020    if suffix:.   
-0003c0a0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0003c0b0: 7572 6e20 7266 696c 656e 616d 652b 272e  urn rfilename+'.
-0003c0c0: 7b7d 272e 666f 726d 6174 2873 7566 6669  {}'.format(suffi
-0003c0d0: 7829 0a20 2020 2020 2020 2020 2020 2072  x).            r
-0003c0e0: 6574 7572 6e20 7266 696c 656e 616d 650a  eturn rfilename.
-0003c0f0: 2020 2020 2020 2020 7265 7475 726e 206f          return o
-0003c100: 7574 6669 6c65 286f 732e 7061 7468 2e6a  utfile(os.path.j
-0003c110: 6f69 6e28 6261 7365 5f64 6972 2c72 6669  oin(base_dir,rfi
-0003c120: 6c65 6e61 6d65 292c 6f70 7429 0a0a 6465  lename),opt)..de
-0003c130: 6620 6f73 7665 7273 696f 6e28 6d6f 6465  f osversion(mode
-0003c140: 3d27 7570 7065 7227 293a 0a20 2020 205f  ='upper'):.    _
-0003c150: 706c 6174 666f 726d 3d70 6c61 7466 6f72  platform=platfor
-0003c160: 6d2e 7379 7374 656d 2829 0a20 2020 2023  m.system().    #
-0003c170: 3634 6269 743a 2070 6c61 7466 6f72 6d2e  64bit: platform.
-0003c180: 6172 6368 6974 6563 7475 7265 2829 5b30  architecture()[0
-0003c190: 5d0a 2020 2020 6d6f 6465 3d27 6c27 2069  ].    mode='l' i
-0003c1a0: 6620 4973 5361 6d65 286d 6f64 652c 276c  f IsSame(mode,'l
-0003c1b0: 6f77 6572 2729 2065 6c73 6520 2775 270a  ower') else 'u'.
-0003c1c0: 0a20 2020 206f 7574 3d7b 0a20 2020 2020  .    out={.     
-0003c1d0: 2020 2770 6c61 7466 6f72 6d27 3a5f 706c    'platform':_pl
-0003c1e0: 6174 666f 726d 2e6c 6f77 6572 2829 2069  atform.lower() i
-0003c1f0: 6620 6d6f 6465 203d 3d20 276c 2720 656c  f mode == 'l' el
-0003c200: 7365 205f 706c 6174 666f 726d 2e75 7070  se _platform.upp
-0003c210: 6572 2829 2c0a 2020 2020 2020 2027 6e61  er(),.       'na
-0003c220: 6d65 273a 4e6f 6e65 2c0a 2020 2020 2020  me':None,.      
-0003c230: 2027 7665 7273 696f 6e27 3a4e 6f6e 652c   'version':None,
-0003c240: 0a20 2020 2020 2020 2765 7874 273a 4e6f  .       'ext':No
-0003c250: 6e65 2c0a 2020 2020 2020 2027 3634 6269  ne,.       '64bi
-0003c260: 7427 3a73 7973 2e6d 6178 7369 7a65 203e  t':sys.maxsize >
-0003c270: 2032 2a2a 3332 2c0a 2020 2020 2020 2027   2**32,.       '
-0003c280: 636f 6465 273a 4e6f 6e65 0a20 2020 207d  code':None.    }
-0003c290: 0a20 2020 2069 6620 274c 696e 7578 2720  .    if 'Linux' 
-0003c2a0: 3d3d 205f 706c 6174 666f 726d 3a0a 2020  == _platform:.  
-0003c2b0: 2020 2020 2020 7274 3d72 7368 656c 6c28        rt=rshell(
-0003c2c0: 2727 275b 202d 6620 2f65 7463 2f6f 732d  '''[ -f /etc/os-
-0003c2d0: 7265 6c65 6173 6520 5d20 2626 2028 202e  release ] && ( .
-0003c2e0: 202f 6574 632f 6f73 2d72 656c 6561 7365   /etc/os-release
-0003c2f0: 203b 2065 6368 6f20 2449 4429 2727 2729   ; echo $ID)''')
-0003c300: 0a20 2020 2020 2020 206f 7574 5b27 6e61  .        out['na
-0003c310: 6d65 275d 3d72 745b 315d 2e6c 6f77 6572  me']=rt[1].lower
-0003c320: 2829 2069 6620 6d6f 6465 203d 3d20 276c  () if mode == 'l
-0003c330: 2720 656c 7365 2072 745b 315d 2e75 7070  ' else rt[1].upp
-0003c340: 6572 2829 0a20 2020 2020 2020 2069 6620  er().        if 
-0003c350: 4973 496e 286f 7574 5b27 6e61 6d65 275d  IsIn(out['name']
-0003c360: 2c28 2775 6275 6e74 7527 2c27 5261 7370  ,('ubuntu','Rasp
-0003c370: 6269 616e 272c 2746 6564 6f72 6127 2929  bian','Fedora'))
-0003c380: 3a0a 2020 2020 2020 2020 2020 2020 7274  :.            rt
-0003c390: 3d72 7368 656c 6c28 2727 275b 202d 6620  =rshell('''[ -f 
-0003c3a0: 2f65 7463 2f6f 732d 7265 6c65 6173 6520  /etc/os-release 
-0003c3b0: 5d20 2626 2028 202e 202f 6574 632f 6f73  ] && ( . /etc/os
-0003c3c0: 2d72 656c 6561 7365 203b 2065 6368 6f20  -release ; echo 
-0003c3d0: 2456 4552 5349 4f4e 2927 2727 290a 2020  $VERSION)''').  
-0003c3e0: 2020 2020 2020 2020 2020 6f75 745b 2776            out['v
-0003c3f0: 6572 7369 6f6e 275d 3d72 745b 315d 2e73  ersion']=rt[1].s
-0003c400: 706c 6974 2829 5b30 5d0a 2020 2020 2020  plit()[0].      
-0003c410: 2020 2020 2020 6f75 745b 2765 7874 275d        out['ext']
-0003c420: 3d27 2027 2e6a 6f69 6e28 7274 5b31 5d2e  =' '.join(rt[1].
-0003c430: 7370 6c69 7428 295b 313a 5d29 0a20 2020  split()[1:]).   
-0003c440: 2020 2020 2020 2020 2072 743d 7273 6865           rt=rshe
-0003c450: 6c6c 2827 2727 5b20 2d66 202f 6574 632f  ll('''[ -f /etc/
-0003c460: 6f73 2d72 656c 6561 7365 205d 2026 2620  os-release ] && 
-0003c470: 2820 2e20 2f65 7463 2f6f 732d 7265 6c65  ( . /etc/os-rele
-0003c480: 6173 6520 3b20 6563 686f 2024 5645 5253  ase ; echo $VERS
-0003c490: 494f 4e5f 434f 4445 4e41 4d45 2927 2727  ION_CODENAME)'''
-0003c4a0: 290a 2020 2020 2020 2020 2020 2020 6f75  ).            ou
-0003c4b0: 745b 2763 6f64 6527 5d3d 7274 5b31 5d0a  t['code']=rt[1].
-0003c4c0: 2020 2020 2020 2020 656c 7365 3a20 2343          else: #C
-0003c4d0: 656e 746f 732c 2052 6f63 6b79 2c20 5265  entos, Rocky, Re
-0003c4e0: 6468 6174 2c0a 2020 2020 2020 2020 2020  dhat,.          
-0003c4f0: 2020 7274 3d72 7368 656c 6c28 2727 275b    rt=rshell('''[
-0003c500: 202d 6620 2f65 7463 2f72 6564 6861 742d   -f /etc/redhat-
-0003c510: 7265 6c65 6173 6520 5d20 2626 2063 6174  release ] && cat
-0003c520: 202f 6574 632f 7265 6468 6174 2d72 656c   /etc/redhat-rel
-0003c530: 6561 7365 2727 2729 0a20 2020 2020 2020  ease''').       
-0003c540: 2020 2020 2069 6620 7274 5b30 5d20 3d3d       if rt[0] ==
-0003c550: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
-0003c560: 2020 2020 666f 7220 6969 2069 6e20 7274      for ii in rt
-0003c570: 5b31 5d2e 7370 6c69 7428 293a 0a20 2020  [1].split():.   
-0003c580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c590: 2069 6620 272e 2720 696e 2069 6920 616e   if '.' in ii an
-0003c5a0: 6420 6969 2e73 706c 6974 2827 2e27 295b  d ii.split('.')[
-0003c5b0: 305d 2e69 7364 6967 6974 2829 3a0a 2020  0].isdigit():.  
-0003c5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c5d0: 2020 2020 2020 6969 5f61 3d69 692e 7370        ii_a=ii.sp
-0003c5e0: 6c69 7428 272e 2729 0a20 2020 2020 2020  lit('.').       
-0003c5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c600: 206f 7574 5b27 7665 7273 696f 6e27 5d3d   out['version']=
-0003c610: 277b 7d2e 7b7d 272e 666f 726d 6174 2869  '{}.{}'.format(i
-0003c620: 695f 615b 305d 2c69 695f 615b 315d 290a  i_a[0],ii_a[1]).
-0003c630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c640: 2020 2020 2020 2020 6f75 745b 2765 7874          out['ext
-0003c650: 275d 3d69 695f 615b 2d31 5d0a 2020 2020  ']=ii_a[-1].    
-0003c660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003c670: 2020 2020 6272 6561 6b0a 2020 2020 656c      break.    el
-0003c680: 6966 2027 4672 6565 4253 4427 203d 3d20  if 'FreeBSD' == 
-0003c690: 5f70 6c61 7466 6f72 6d3a 0a20 2020 2020  _platform:.     
-0003c6a0: 2020 206f 7574 5b27 6e61 6d65 275d 3d5f     out['name']=_
-0003c6b0: 706c 6174 666f 726d 2e6c 6f77 6572 2829  platform.lower()
-0003c6c0: 2069 6620 6d6f 6465 203d 3d20 276c 2720   if mode == 'l' 
-0003c6d0: 656c 7365 205f 706c 6174 666f 726d 2e75  else _platform.u
-0003c6e0: 7070 6572 2829 0a20 2020 2020 2020 2061  pper().        a
-0003c6f0: 613d 706c 6174 666f 726d 2e76 6572 7369  a=platform.versi
-0003c700: 6f6e 2829 0a20 2020 2020 2020 206f 7574  on().        out
-0003c710: 5b27 7665 7273 696f 6e27 5d3d 6161 2e73  ['version']=aa.s
-0003c720: 706c 6974 2829 5b31 5d2e 7370 6c69 7428  plit()[1].split(
-0003c730: 272d 2729 5b30 5d0a 2020 2020 2020 2020  '-')[0].        
-0003c740: 6f75 745b 2765 7874 275d 3d61 612e 7370  out['ext']=aa.sp
-0003c750: 6c69 7428 295b 325d 0a20 2020 2065 6c69  lit()[2].    eli
-0003c760: 6620 2744 6172 7769 6e27 203d 3d20 5f70  f 'Darwin' == _p
-0003c770: 6c61 7466 6f72 6d3a 0a20 2020 2020 2020  latform:.       
-0003c780: 206f 7574 5b27 6e61 6d65 275d 3d27 6f73   out['name']='os
-0003c790: 7827 2069 6620 6d6f 6465 203d 3d20 276c  x' if mode == 'l
-0003c7a0: 2720 656c 7365 2027 4f53 5827 0a20 2020  ' else 'OSX'.   
-0003c7b0: 2020 2020 206f 7574 5b27 7665 7273 696f       out['versio
-0003c7c0: 6e27 5d3d 706c 6174 666f 726d 2e6d 6163  n']=platform.mac
-0003c7d0: 5f76 6572 2829 0a20 2020 2065 6c69 6620  _ver().    elif 
-0003c7e0: 2757 696e 646f 7773 2720 3d3d 205f 706c  'Windows' == _pl
-0003c7f0: 6174 666f 726d 3a0a 2020 2020 2020 2020  atform:.        
-0003c800: 6f75 745b 276e 616d 6527 5d3d 5f70 6c61  out['name']=_pla
-0003c810: 7466 6f72 6d2e 6c6f 7765 7228 2920 6966  tform.lower() if
-0003c820: 206d 6f64 6520 3d3d 2027 6c27 2065 6c73   mode == 'l' els
-0003c830: 6520 5f70 6c61 7466 6f72 6d2e 7570 7065  e _platform.uppe
-0003c840: 7228 290a 2020 2020 2020 2020 6f75 745b  r().        out[
-0003c850: 2776 6572 7369 6f6e 275d 3d70 6c61 7466  'version']=platf
-0003c860: 6f72 6d2e 7769 6e33 325f 7665 7228 2928  orm.win32_ver()(
-0003c870: 290a 2020 2020 656c 7365 3a0a 2020 2020  ).    else:.    
-0003c880: 2020 2020 6f75 745b 276e 616d 6527 5d3d      out['name']=
-0003c890: 5f70 6c61 7466 6f72 6d2e 6c6f 7765 7228  _platform.lower(
-0003c8a0: 2920 6966 206d 6f64 6520 3d3d 2027 6c27  ) if mode == 'l'
-0003c8b0: 2065 6c73 6520 5f70 6c61 7466 6f72 6d2e   else _platform.
-0003c8c0: 7570 7065 7228 290a 2020 2020 7265 7475  upper().    retu
-0003c8d0: 726e 206f 7574 0a0a 6465 6620 5374 7269  rn out..def Stri
-0003c8e0: 7028 7372 632c 6d6f 6465 3d27 616c 6c27  p(src,mode='all'
-0003c8f0: 2c73 796d 3d27 7768 6974 6573 7061 6365  ,sym='whitespace
-0003c900: 2729 3a0a 2020 2020 6966 2069 7369 6e73  '):.    if isins
-0003c910: 7461 6e63 6528 7372 632c 7374 7229 3a0a  tance(src,str):.
-0003c920: 2020 2020 2020 2020 6966 206d 6f64 6520          if mode 
-0003c930: 696e 205b 2773 7461 7274 272c 276c 6566  in ['start','lef
-0003c940: 7427 2c27 6265 6769 6e27 5d3a 0a20 2020  t','begin']:.   
-0003c950: 2020 2020 2020 2020 2069 6620 7379 6d3d           if sym=
-0003c960: 3d27 7768 6974 6573 7061 6365 273a 0a20  ='whitespace':. 
-0003c970: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0003c980: 6574 7572 6e20 7372 632e 6c73 7472 6970  eturn src.lstrip
-0003c990: 2829 0a20 2020 2020 2020 2020 2020 2065  ().            e
-0003c9a0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0003c9b0: 2020 2020 2072 6574 7572 6e20 7372 632e       return src.
-0003c9c0: 6c73 7472 6970 2873 796d 290a 2020 2020  lstrip(sym).    
-0003c9d0: 2020 2020 656c 6966 206d 6f64 6520 696e      elif mode in
-0003c9e0: 205b 2765 6e64 272c 2772 6967 6874 272c   ['end','right',
-0003c9f0: 276c 6173 7427 5d3a 0a20 2020 2020 2020  'last']:.       
-0003ca00: 2020 2020 2069 6620 7379 6d3d 3d27 7768       if sym=='wh
-0003ca10: 6974 6573 7061 6365 273a 0a20 2020 2020  itespace':.     
-0003ca20: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0003ca30: 6e20 7372 632e 7273 7472 6970 2829 0a20  n src.rstrip(). 
-0003ca40: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0003ca50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003ca60: 2072 6574 7572 6e20 7372 632e 7273 7472   return src.rstr
-0003ca70: 6970 2873 796d 290a 2020 2020 2020 2020  ip(sym).        
-0003ca80: 656c 6966 206d 6f64 6520 696e 205b 2762  elif mode in ['b
-0003ca90: 6f74 6827 2c27 6564 6765 272c 276f 7574  oth','edge','out
-0003caa0: 7369 6465 275d 3a0a 2020 2020 2020 2020  side']:.        
-0003cab0: 2020 2020 6966 2073 796d 3d3d 2777 6869      if sym=='whi
-0003cac0: 7465 7370 6163 6527 3a0a 2020 2020 2020  tespace':.      
-0003cad0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0003cae0: 2073 7263 2e73 7472 6970 2829 0a20 2020   src.strip().   
-0003caf0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0003cb00: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0003cb10: 6574 7572 6e20 7372 632e 7374 7269 7028  eturn src.strip(
-0003cb20: 7379 6d29 0a20 2020 2020 2020 2065 6c69  sym).        eli
-0003cb30: 6620 6d6f 6465 2069 6e20 5b27 696e 7369  f mode in ['insi
-0003cb40: 6465 275d 3a0a 2020 2020 2020 2020 2020  de']:.          
-0003cb50: 2020 666f 7220 7320 696e 2072 616e 6765    for s in range
-0003cb60: 2830 2c6c 656e 2873 7263 2929 3a0a 2020  (0,len(src)):.  
-0003cb70: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0003cb80: 2073 796d 3d3d 2777 6869 7465 7370 6163   sym=='whitespac
-0003cb90: 6527 3a0a 2020 2020 2020 2020 2020 2020  e':.            
-0003cba0: 2020 2020 2020 2020 6966 2073 7263 5b73          if src[s
-0003cbb0: 5d20 213d 2027 2027 3a20 6272 6561 6b0a  ] != ' ': break.
-0003cbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003cbd0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0003cbe0: 2020 2020 2020 2020 2020 6966 2073 7263            if src
-0003cbf0: 5b73 5d20 213d 2073 796d 3a20 6272 6561  [s] != sym: brea
-0003cc00: 6b0a 2020 2020 2020 2020 2020 2020 666f  k.            fo
-0003cc10: 7220 6520 696e 2072 616e 6765 286c 656e  r e in range(len
-0003cc20: 2873 7263 292d 312c 302c 2d31 293a 0a20  (src)-1,0,-1):. 
-0003cc30: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0003cc40: 6620 7379 6d3d 3d27 7768 6974 6573 7061  f sym=='whitespa
-0003cc50: 6365 273a 0a20 2020 2020 2020 2020 2020  ce':.           
-0003cc60: 2020 2020 2020 2020 2069 6620 7372 635b           if src[
-0003cc70: 655d 2021 3d20 2720 273a 2062 7265 616b  e] != ' ': break
-0003cc80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003cc90: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0003cca0: 2020 2020 2020 2020 2020 2069 6620 7372             if sr
-0003ccb0: 635b 655d 2021 3d20 7379 6d3a 2062 7265  c[e] != sym: bre
-0003ccc0: 616b 0a20 2020 2020 2020 2020 2020 2069  ak.            i
-0003ccd0: 6620 7379 6d3d 3d27 7768 6974 6573 7061  f sym=='whitespa
-0003cce0: 6365 273a 0a20 2020 2020 2020 2020 2020  ce':.           
-0003ccf0: 2020 2020 2072 6574 7572 6e20 7372 635b       return src[
-0003cd00: 3a73 5d2b 2720 272e 6a6f 696e 2873 7263  :s]+' '.join(src
-0003cd10: 5b73 3a65 2b31 5d2e 7370 6c69 7428 2929  [s:e+1].split())
-0003cd20: 2b73 7263 5b65 2b31 3a5d 0a20 2020 2020  +src[e+1:].     
-0003cd30: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0003cd40: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0003cd50: 7572 6e20 7372 635b 3a73 5d2b 7379 6d2e  urn src[:s]+sym.
-0003cd60: 6a6f 696e 2873 7263 5b73 3a65 2b31 5d2e  join(src[s:e+1].
-0003cd70: 7370 6c69 7428 7379 6d29 292b 7372 635b  split(sym))+src[
-0003cd80: 652b 313a 5d0a 2020 2020 2020 2020 656c  e+1:].        el
-0003cd90: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0003cda0: 6966 2073 796d 3d3d 2777 6869 7465 7370  if sym=='whitesp
-0003cdb0: 6163 6527 3a0a 2020 2020 2020 2020 2020  ace':.          
-0003cdc0: 2020 2020 2020 7265 7475 726e 2027 2027        return ' '
-0003cdd0: 2e6a 6f69 6e28 7372 632e 7370 6c69 7428  .join(src.split(
-0003cde0: 2929 0a20 2020 2020 2020 2020 2020 2065  )).            e
-0003cdf0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0003ce00: 2020 2020 2072 6574 7572 6e20 7379 6d2e       return sym.
-0003ce10: 6a6f 696e 2873 7263 2e73 706c 6974 2873  join(src.split(s
-0003ce20: 796d 2929 0a20 2020 2072 6574 7572 6e20  ym)).    return 
-0003ce30: 7372 630a 0a64 6566 2050 6f70 2873 7263  src..def Pop(src
-0003ce40: 2c6b 6579 2c64 6566 6175 6c74 3d4e 6f6e  ,key,default=Non
-0003ce50: 6529 3a0a 2020 2020 6966 2069 7369 6e73  e):.    if isins
-0003ce60: 7461 6e63 6528 7372 632c 6469 6374 293a  tance(src,dict):
-0003ce70: 0a20 2020 2020 2020 2069 6620 6b65 7920  .        if key 
-0003ce80: 696e 2073 7263 3a0a 2020 2020 2020 2020  in src:.        
-0003ce90: 2020 2020 7265 7475 726e 2073 7263 2e70      return src.p
-0003cea0: 6f70 286b 6579 290a 2020 2020 656c 6966  op(key).    elif
-0003ceb0: 2069 7369 6e73 7461 6e63 6528 7372 632c   isinstance(src,
-0003cec0: 6c69 7374 293a 0a20 2020 2020 2020 2069  list):.        i
-0003ced0: 6620 6973 696e 7374 616e 6365 286b 6579  f isinstance(key
-0003cee0: 2c69 6e74 2920 616e 6420 6e6f 7420 6973  ,int) and not is
-0003cef0: 696e 7374 616e 6365 286b 6579 2c62 6f6f  instance(key,boo
-0003cf00: 6c29 3a0a 2020 2020 2020 2020 2020 2020  l):.            
-0003cf10: 6966 206c 656e 2873 7263 2920 3e20 6162  if len(src) > ab
-0003cf20: 7328 6b65 7929 3a0a 2020 2020 2020 2020  s(key):.        
-0003cf30: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0003cf40: 7263 2e70 6f70 286b 6579 290a 2020 2020  rc.pop(key).    
-0003cf50: 6966 206e 6f74 2049 734e 6f6e 6528 6465  if not IsNone(de
-0003cf60: 6661 756c 7429 3a0a 2020 2020 2020 2020  fault):.        
-0003cf70: 7265 7475 726e 2064 6566 6175 6c74 0a0a  return default..
-0003cf80: 6465 6620 4973 5472 7565 2863 6f6e 6469  def IsTrue(condi
-0003cf90: 7469 6f6e 2c72 6571 7569 7265 6d65 6e74  tion,requirement
-0003cfa0: 733d 4e6f 6e65 2c73 6865 6c6c 3d46 616c  s=None,shell=Fal
-0003cfb0: 7365 2c2a 2a6f 7074 7329 3a0a 2020 2020  se,**opts):.    
-0003cfc0: 636f 6e64 6974 696f 6e5f 7479 7065 3d74  condition_type=t
-0003cfd0: 7970 6528 636f 6e64 6974 696f 6e29 2e5f  ype(condition)._
-0003cfe0: 5f6e 616d 655f 5f0a 2020 2020 6966 2049  _name__.    if I
-0003cff0: 7346 756e 6374 696f 6e28 636f 6e64 6974  sFunction(condit
-0003d000: 696f 6e2c 6275 696c 7469 6e3d 4661 6c73  ion,builtin=Fals
-0003d010: 6529 3a0a 2020 2020 2020 2020 6f70 7473  e):.        opts
-0003d020: 5b27 7061 7265 6e74 275d 3d33 2069 6620  ['parent']=3 if 
-0003d030: 2770 6172 656e 7427 206e 6f74 2069 6e20  'parent' not in 
-0003d040: 6f70 7473 2065 6c73 6520 6f70 7473 5b27  opts else opts['
-0003d050: 7061 7265 6e74 275d 2b32 0a20 2020 2020  parent']+2.     
-0003d060: 2020 2069 6620 4665 6564 4675 6e63 2863     if FeedFunc(c
-0003d070: 6f6e 6469 7469 6f6e 2c2a 2a6f 7074 7329  ondition,**opts)
-0003d080: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0003d090: 7475 726e 2054 7275 650a 2020 2020 656c  turn True.    el
-0003d0a0: 6966 2063 6f6e 6469 7469 6f6e 5f74 7970  if condition_typ
-0003d0b0: 6520 3d3d 2027 7374 7227 3a0a 2020 2020  e == 'str':.    
-0003d0c0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-0003d0d0: 2020 2020 2072 6574 7572 6e20 6576 616c       return eval
-0003d0e0: 2863 6f6e 6469 7469 6f6e 290a 2020 2020  (condition).    
-0003d0f0: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
-0003d100: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-0003d110: 7461 6e63 6528 7265 7175 6972 656d 656e  tance(requiremen
-0003d120: 7473 2c28 7475 706c 652c 6c69 7374 2929  ts,(tuple,list))
-0003d130: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0003d140: 2020 6966 2049 7349 6e28 636f 6e64 6974    if IsIn(condit
-0003d150: 696f 6e20 2c72 6571 7569 7265 6d65 6e74  ion ,requirement
-0003d160: 7329 3a20 7265 7475 726e 2054 7275 650a  s): return True.
-0003d170: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-0003d180: 2072 6571 7569 7265 6d65 6e74 7320 6973   requirements is
-0003d190: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-0003d1a0: 2020 2020 2020 2020 2020 2069 6620 636f             if co
-0003d1b0: 6e64 6974 696f 6e20 3d3d 2072 6571 7569  ndition == requi
-0003d1c0: 7265 6d65 6e74 7320 3a20 7265 7475 726e  rements : return
-0003d1d0: 2054 7275 650a 2020 2020 656c 6966 2063   True.    elif c
-0003d1e0: 6f6e 6469 7469 6f6e 5f74 7970 6520 3d3d  ondition_type ==
-0003d1f0: 2027 626f 6f6c 273a 0a20 2020 2020 2020   'bool':.       
-0003d200: 2072 6574 7572 6e20 636f 6e64 6974 696f   return conditio
-0003d210: 6e0a 2020 2020 656c 6966 2063 6f6e 6469  n.    elif condi
-0003d220: 7469 6f6e 5f74 7970 6520 3d3d 2027 696e  tion_type == 'in
-0003d230: 7427 3a0a 2020 2020 2020 2020 6966 2073  t':.        if s
-0003d240: 6865 6c6c 3a0a 2020 2020 2020 2020 2020  hell:.          
-0003d250: 2020 6966 2063 6f6e 6469 7469 6f6e 3d3d    if condition==
-0003d260: 303a 2072 6574 7572 6e20 5472 7565 0a20  0: return True. 
-0003d270: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0003d280: 6e20 4661 6c73 650a 2020 2020 2020 2020  n False.        
-0003d290: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0003d2a0: 2020 6966 2063 6f6e 6469 7469 6f6e 3e30    if condition>0
-0003d2b0: 3a20 7265 7475 726e 2054 7275 650a 2020  : return True.  
-0003d2c0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0003d2d0: 2046 616c 7365 0a20 2020 2072 6574 7572   False.    retur
-0003d2e0: 6e20 4661 6c73 650a 0a64 6566 2041 7070  n False..def App
-0003d2f0: 656e 6428 2a61 2c73 796d 626f 6c3d 2727  end(*a,symbol=''
-0003d300: 2c61 743d 2d31 2c77 616e 743d 4e6f 6e65  ,at=-1,want=None
-0003d310: 293a 2023 2041 7070 656e 6420 6461 7461  ): # Append data
-0003d320: 2061 6363 6f72 6469 6e67 2074 6f20 736f   according to so
-0003d330: 7572 6365 2074 7970 650a 2020 2020 6966  urce type.    if
-0003d340: 2061 3a20 2020 2020 2020 2020 2020 2020   a:             
-0003d350: 2020 2020 2020 2023 206c 6973 7420 2b20         # list + 
-0003d360: 6c69 7374 0a20 2020 2020 2020 2073 3d61  list.        s=a
-0003d370: 5b30 5d20 2020 2020 2020 2020 2020 2020  [0]             
-0003d380: 2020 2320 6f74 6865 7220 3d3e 2070 7574    # other => put
-0003d390: 2074 6f20 6c69 7374 0a20 2020 2020 2020   to list.       
-0003d3a0: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
-0003d3b0: 2c62 7974 6573 293a 2073 3d53 7472 2873  ,bytes): s=Str(s
-0003d3c0: 290a 2020 2020 2020 2020 6966 2077 616e  ).        if wan
-0003d3d0: 743a 0a20 2020 2020 2020 2020 2020 2069  t:.            i
-0003d3e0: 6620 7761 6e74 2069 6e20 5b6c 6973 742c  f want in [list,
-0003d3f0: 276c 6973 7427 5d3a 0a20 2020 2020 2020  'list']:.       
-0003d400: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-0003d410: 7374 616e 6365 2873 2c74 7570 6c65 293a  stance(s,tuple):
-0003d420: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003d430: 2020 2020 2073 3d6c 6973 7428 7329 0a20       s=list(s). 
-0003d440: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0003d450: 6c69 6620 6e6f 7420 6973 696e 7374 616e  lif not isinstan
-0003d460: 6365 2873 2c6c 6973 7429 3a0a 2020 2020  ce(s,list):.    
-0003d470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d480: 733d 5b73 5d0a 2020 2020 2020 2020 2020  s=[s].          
-0003d490: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
-0003d4a0: 7461 6e63 6528 732c 7374 7229 2061 6e64  tance(s,str) and
-0003d4b0: 2073 796d 626f 6c3a 0a20 2020 2020 2020   symbol:.       
-0003d4c0: 2020 2020 2020 2020 2020 2020 2073 3d73               s=s
-0003d4d0: 2e73 706c 6974 2873 796d 626f 6c29 0a20  .split(symbol). 
-0003d4e0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0003d4f0: 7761 6e74 2069 6e20 5b73 7472 2c27 7374  want in [str,'st
-0003d500: 7227 5d3a 0a20 2020 2020 2020 2020 2020  r']:.           
-0003d510: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-0003d520: 6365 2873 2c28 6c69 7374 2c74 7570 6c65  ce(s,(list,tuple
-0003d530: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-0003d540: 2020 2020 2020 2020 733d 4a6f 696e 2873          s=Join(s
-0003d550: 2c73 796d 626f 6c3d 7379 6d62 6f6c 290a  ,symbol=symbol).
-0003d560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d570: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0003d580: 2020 2020 2020 2020 2020 733d 277b 7d27            s='{}'
-0003d590: 2e66 6f72 6d61 7428 7329 0a20 2020 2020  .format(s).     
-0003d5a0: 2020 2073 6e3d 7479 7065 2873 292e 5f5f     sn=type(s).__
-0003d5b0: 6e61 6d65 5f5f 0a20 2020 2020 2020 2066  name__.        f
-0003d5c0: 6f72 2069 2069 6e20 615b 313a 5d3a 0a20  or i in a[1:]:. 
-0003d5d0: 2020 2020 2020 2020 2020 2069 6620 736e             if sn
-0003d5e0: 203d 3d20 2773 7472 273a 0a20 2020 2020   == 'str':.     
-0003d5f0: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-0003d600: 696e 7374 616e 6365 2869 2c28 6c69 7374  instance(i,(list
-0003d610: 2c74 7570 6c65 2929 3a0a 2020 2020 2020  ,tuple)):.      
-0003d620: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-0003d630: 7220 7820 696e 2069 3a0a 2020 2020 2020  r x in i:.      
-0003d640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d650: 2020 6966 2061 7420 3d3d 202d 313a 0a20    if at == -1:. 
-0003d660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d670: 2020 2020 2020 2020 2020 2073 3d4a 6f69             s=Joi
-0003d680: 6e28 732c 277b 7d27 2e66 6f72 6d61 7428  n(s,'{}'.format(
-0003d690: 7829 2c73 796d 626f 6c3d 7379 6d62 6f6c  x),symbol=symbol
-0003d6a0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0003d6b0: 2020 2020 2020 2020 2020 656c 6966 2061            elif a
-0003d6c0: 7420 3d3d 2030 3a0a 2020 2020 2020 2020  t == 0:.        
+0003b410: 5b31 3a5d 2c27 6e27 293a 0a20 2020 2020  [1:],'n'):.     
+0003b420: 2020 2020 2020 2020 2020 2064 6566 6175             defau
+0003b430: 6c74 5f6c 656e 6774 683d 6c65 6e28 7375  lt_length=len(su
+0003b440: 6666 6978 292d 310a 2020 2020 2020 2020  ffix)-1.        
+0003b450: 2020 2020 2020 2020 6669 6c65 6e61 6d65          filename
+0003b460: 3d66 696c 656e 616d 652b 7375 6666 6978  =filename+suffix
+0003b470: 2e75 7070 6572 2829 0a20 2020 2023 204e  .upper().    # N
+0003b480: 6577 2064 6573 6967 6e0a 2020 2020 6465  ew design.    de
+0003b490: 6620 6f75 7466 696c 6528 6669 6c65 6e61  f outfile(filena
+0003b4a0: 6d65 2c6f 7074 293a 0a20 2020 2020 2020  me,opt):.       
+0003b4b0: 2069 6620 6f70 7420 696e 205b 2766 696c   if opt in ['fil
+0003b4c0: 6527 2c27 6627 5d3a 0a20 2020 2020 2020  e','f']:.       
+0003b4d0: 2020 2020 6f73 2e6d 6b6e 6f64 6528 6669      os.mknode(fi
+0003b4e0: 6c65 6e61 6d65 290a 2020 2020 2020 2020  lename).        
+0003b4f0: 656c 6966 206f 7074 2069 6e20 5b27 6469  elif opt in ['di
+0003b500: 7227 2c27 6427 2c27 6469 7265 6374 6f72  r','d','director
+0003b510: 7927 5d3a 0a20 2020 2020 2020 2020 2020  y']:.           
+0003b520: 6f73 2e6d 6b64 6972 2866 696c 656e 616d  os.mkdir(filenam
+0003b530: 6529 0a20 2020 2020 2020 2065 6c73 653a  e).        else:
+0003b540: 0a20 2020 2020 2020 2020 2020 7265 7475  .           retu
+0003b550: 726e 2066 696c 656e 616d 650a 0a20 2020  rn filename..   
+0003b560: 2064 6566 206d 6b5f 6669 6c65 6e61 6d65   def mk_filename
+0003b570: 2866 696c 656e 616d 652c 7370 6c69 7429  (filename,split)
+0003b580: 3a0a 2020 2020 2020 2020 6669 6c65 6e61  :.        filena
+0003b590: 6d65 5f61 3d66 696c 656e 616d 652e 7370  me_a=filename.sp
+0003b5a0: 6c69 7428 7370 6c69 7429 0a20 2020 2020  lit(split).     
+0003b5b0: 2020 2066 696c 656e 616d 655f 6e3d 6c65     filename_n=le
+0003b5c0: 6e28 6669 6c65 6e61 6d65 5f61 290a 2020  n(filename_a).  
+0003b5d0: 2020 2020 2020 7373 733d 4e6f 6e65 0a20        sss=None. 
+0003b5e0: 2020 2020 2020 2066 6f72 2066 6620 696e         for ff in
+0003b5f0: 2072 616e 6765 2830 2c66 696c 656e 616d   range(0,filenam
+0003b600: 655f 6e29 3a0a 2020 2020 2020 2020 2020  e_n):.          
+0003b610: 2020 666f 7220 7373 2069 6e20 5b27 4e27    for ss in ['N'
+0003b620: 2c27 5827 5d3a 0a20 2020 2020 2020 2020  ,'X']:.         
+0003b630: 2020 2020 2020 2069 6620 4973 416c 6c53         if IsAllS
+0003b640: 616d 6553 7472 2866 696c 656e 616d 655f  ameStr(filename_
+0003b650: 615b 6666 5d2c 7373 293a 0a20 2020 2020  a[ff],ss):.     
+0003b660: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0003b670: 7373 3d73 730a 2020 2020 2020 2020 2020  ss=ss.          
+0003b680: 2020 2020 2020 2020 2020 6966 2066 6620            if ff 
+0003b690: 3c20 6669 6c65 6e61 6d65 5f6e 2d31 3a0a  < filename_n-1:.
+0003b6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b6b0: 2020 2020 2020 2020 6161 3d52 616e 646f          aa=Rando
+0003b6c0: 6d28 6c65 6e67 7468 3d6c 656e 2866 696c  m(length=len(fil
+0003b6d0: 656e 616d 655f 615b 6666 5d29 2c6d 6f64  ename_a[ff]),mod
+0003b6e0: 653d 276e 756d 2720 6966 2073 7373 203d  e='num' if sss =
+0003b6f0: 3d20 274e 2720 656c 7365 206d 6f64 652c  = 'N' else mode,
+0003b700: 7374 7273 3d6f 7074 732e 6765 7428 2763  strs=opts.get('c
+0003b710: 7573 746f 6d27 2929 0a20 2020 2020 2020  ustom')).       
+0003b720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b730: 2069 6620 6973 696e 7374 616e 6365 2861   if isinstance(a
+0003b740: 612c 696e 7429 3a0a 2020 2020 2020 2020  a,int):.        
+0003b750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b760: 2020 2020 6669 6c65 6e61 6d65 5f61 5b66      filename_a[f
+0003b770: 665d 3d27 2530 7b7d 6427 2e66 6f72 6d61  f]='%0{}d'.forma
+0003b780: 7428 6c65 6e28 6669 6c65 6e61 6d65 5f61  t(len(filename_a
+0003b790: 5b66 665d 2929 2561 610a 2020 2020 2020  [ff]))%aa.      
+0003b7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b7b0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0003b7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b7d0: 2020 2020 6669 6c65 6e61 6d65 5f61 5b66      filename_a[f
+0003b7e0: 665d 3d27 7b7d 272e 666f 726d 6174 2861  f]='{}'.format(a
+0003b7f0: 6129 0a20 2020 2020 2020 2066 696c 656e  a).        filen
+0003b800: 616d 655f 6c61 7374 5f73 7566 6669 783d  ame_last_suffix=
+0003b810: 6669 6c65 6e61 6d65 5f61 5b2d 315d 2e73  filename_a[-1].s
+0003b820: 706c 6974 2827 2e27 295b 305d 0a20 2020  plit('.')[0].   
+0003b830: 2020 2020 2066 696c 656e 616d 655f 6c61       filename_la
+0003b840: 7374 5f65 7874 3d27 2e27 2e6a 6f69 6e28  st_ext='.'.join(
+0003b850: 6669 6c65 6e61 6d65 5f61 5b2d 315d 2e73  filename_a[-1].s
+0003b860: 706c 6974 2827 2e27 295b 313a 5d29 0a20  plit('.')[1:]). 
+0003b870: 2020 2020 2020 2069 6620 7373 7320 6973         if sss is
+0003b880: 204e 6f6e 653a 2073 7373 3d5b 274e 272c   None: sss=['N',
+0003b890: 2758 275d 0a20 2020 2020 2020 2066 6f72  'X'].        for
+0003b8a0: 2073 7320 696e 2073 7373 3a0a 2020 2020   ss in sss:.    
+0003b8b0: 2020 2020 2020 2020 6966 2049 7341 6c6c          if IsAll
+0003b8c0: 5361 6d65 5374 7228 6669 6c65 6e61 6d65  SameStr(filename
+0003b8d0: 5f6c 6173 745f 7375 6666 6978 2c73 7329  _last_suffix,ss)
+0003b8e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003b8f0: 2020 6161 3d52 616e 646f 6d28 6c65 6e67    aa=Random(leng
+0003b900: 7468 3d6c 656e 2866 696c 656e 616d 655f  th=len(filename_
+0003b910: 6c61 7374 5f73 7566 6669 7829 2c6d 6f64  last_suffix),mod
+0003b920: 653d 276e 756d 2720 6966 2073 7320 3d3d  e='num' if ss ==
+0003b930: 2027 4e27 2065 6c73 6520 6d6f 6465 2c73   'N' else mode,s
+0003b940: 7472 733d 6f70 7473 2e67 6574 2827 6375  trs=opts.get('cu
+0003b950: 7374 6f6d 2729 290a 2020 2020 2020 2020  stom')).        
+0003b960: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+0003b970: 7461 6e63 6528 6161 2c69 6e74 293a 0a20  tance(aa,int):. 
+0003b980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003b990: 2020 2066 696c 656e 616d 655f 615b 2d31     filename_a[-1
+0003b9a0: 5d3d 2725 307b 7d64 272e 666f 726d 6174  ]='%0{}d'.format
+0003b9b0: 286c 656e 2866 696c 656e 616d 655f 6c61  (len(filename_la
+0003b9c0: 7374 5f73 7566 6669 7829 2925 6161 0a20  st_suffix))%aa. 
+0003b9d0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0003b9e0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0003b9f0: 2020 2020 2020 2020 2066 696c 656e 616d           filenam
+0003ba00: 655f 615b 2d31 5d3d 277b 7d27 2e66 6f72  e_a[-1]='{}'.for
+0003ba10: 6d61 7428 6161 290a 2020 2020 2020 2020  mat(aa).        
+0003ba20: 2020 2020 2020 2020 6966 2066 696c 656e          if filen
+0003ba30: 616d 655f 6c61 7374 5f65 7874 3a0a 2020  ame_last_ext:.  
+0003ba40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003ba50: 2020 6669 6c65 6e61 6d65 5f61 5b2d 315d    filename_a[-1]
+0003ba60: 3d66 696c 656e 616d 655f 615b 2d31 5d2b  =filename_a[-1]+
+0003ba70: 272e 7b7d 272e 666f 726d 6174 2866 696c  '.{}'.format(fil
+0003ba80: 656e 616d 655f 6c61 7374 5f65 7874 290a  ename_last_ext).
+0003ba90: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0003baa0: 706c 6974 2e6a 6f69 6e28 6669 6c65 6e61  plit.join(filena
+0003bab0: 6d65 5f61 290a 0a20 2020 2069 6620 4973  me_a)..    if Is
+0003bac0: 4e6f 6e65 2866 696c 656e 616d 6529 206f  None(filename) o
+0003bad0: 7220 6e6f 7420 6973 696e 7374 616e 6365  r not isinstance
+0003bae0: 2866 696c 656e 616d 652c 7374 7229 3a0a  (filename,str):.
+0003baf0: 2020 2020 2020 2020 7266 696c 656e 616d          rfilenam
+0003bb00: 653d 5261 6e64 6f6d 286c 656e 6774 683d  e=Random(length=
+0003bb10: 6465 6661 756c 745f 6c65 6e67 7468 2c6d  default_length,m
+0003bb20: 6f64 653d 276e 756d 2720 6966 2073 7566  ode='num' if suf
+0003bb30: 6669 7820 696e 205b 276e 272c 274e 275d  fix in ['n','N']
+0003bb40: 2065 6c73 6520 6d6f 6465 2c73 7472 733d   else mode,strs=
+0003bb50: 6f70 7473 2e67 6574 2827 6375 7374 6f6d  opts.get('custom
+0003bb60: 2729 290a 2020 2020 2020 2020 6261 7365  ')).        base
+0003bb70: 5f64 6972 3d27 2e27 2069 6620 6e6f 7420  _dir='.' if not 
+0003bb80: 6261 7365 5f64 6972 2065 6c73 6520 6261  base_dir else ba
+0003bb90: 7365 5f64 6972 0a20 2020 2065 6c73 653a  se_dir.    else:
+0003bba0: 0a20 2020 2020 2020 2062 6173 655f 6469  .        base_di
+0003bbb0: 723d 6f73 2e70 6174 682e 6469 726e 616d  r=os.path.dirnam
+0003bbc0: 6528 6669 6c65 6e61 6d65 290a 2020 2020  e(filename).    
+0003bbd0: 2020 2020 6261 7365 5f64 6972 3d27 2e27      base_dir='.'
+0003bbe0: 2069 6620 6e6f 7420 6261 7365 5f64 6972   if not base_dir
+0003bbf0: 2065 6c73 6520 6261 7365 5f64 6972 0a20   else base_dir. 
+0003bc00: 2020 2020 2020 2072 6669 6c65 6e61 6d65         rfilename
+0003bc10: 3d6d 6b5f 6669 6c65 6e61 6d65 286f 732e  =mk_filename(os.
+0003bc20: 7061 7468 2e62 6173 656e 616d 6528 6669  path.basename(fi
+0003bc30: 6c65 6e61 6d65 292c 7370 6c69 7429 0a20  lename),split). 
+0003bc40: 2020 2069 6620 756e 6971 3a0a 2020 2020     if uniq:.    
+0003bc50: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+0003bc60: 6528 6261 7365 5f64 6972 2c73 7472 2920  e(base_dir,str) 
+0003bc70: 616e 6420 6f73 2e70 6174 682e 6973 6469  and os.path.isdi
+0003bc80: 7228 6261 7365 5f64 6972 293a 0a20 2020  r(base_dir):.   
+0003bc90: 2020 2020 2020 2020 2069 6e63 3d46 616c           inc=Fal
+0003bca0: 7365 0a20 2020 2020 2020 2020 2020 2066  se.            f
+0003bcb0: 6f72 2069 2069 6e20 7261 6e67 6528 302c  or i in range(0,
+0003bcc0: 3130 3030 293a 0a20 2020 2020 2020 2020  1000):.         
+0003bcd0: 2020 2020 2020 2069 6620 696e 633a 0a20         if inc:. 
+0003bce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003bcf0: 2020 206e 6577 5f66 696c 656e 616d 653d     new_filename=
+0003bd00: 7266 696c 656e 616d 652b 277b 7d25 307b  rfilename+'{}%0{
+0003bd10: 7d64 272e 666f 726d 6174 2873 706c 6974  }d'.format(split
+0003bd20: 2c64 6566 6175 6c74 5f6c 656e 6774 6829  ,default_length)
+0003bd30: 2528 692d 3129 0a20 2020 2020 2020 2020  %(i-1).         
+0003bd40: 2020 2020 2020 2020 2020 2069 6620 7375             if su
+0003bd50: 6666 6978 3a0a 2020 2020 2020 2020 2020  ffix:.          
+0003bd60: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
+0003bd70: 775f 6669 6c65 6e61 6d65 3d6e 6577 5f66  w_filename=new_f
+0003bd80: 696c 656e 616d 652b 272e 7b7d 272e 666f  ilename+'.{}'.fo
+0003bd90: 726d 6174 2873 7566 6669 7829 0a20 2020  rmat(suffix).   
+0003bda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003bdb0: 206e 6577 5f66 696c 653d 6f73 2e70 6174   new_file=os.pat
+0003bdc0: 682e 6a6f 696e 2862 6173 655f 6469 722c  h.join(base_dir,
+0003bdd0: 6e65 775f 6669 6c65 6e61 6d65 290a 2020  new_filename).  
+0003bde0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003bdf0: 2020 6966 206e 6f74 206f 732e 7061 7468    if not os.path
+0003be00: 2e65 7869 7374 7328 6e65 775f 6669 6c65  .exists(new_file
+0003be10: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0003be20: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0003be30: 6e20 6f75 7466 696c 6528 6e65 775f 6669  n outfile(new_fi
+0003be40: 6c65 2c6f 7074 290a 2020 2020 2020 2020  le,opt).        
+0003be50: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0003be60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003be70: 2020 6e65 775f 6669 6c65 6e61 6d65 3d6d    new_filename=m
+0003be80: 6b5f 6669 6c65 6e61 6d65 2872 6669 6c65  k_filename(rfile
+0003be90: 6e61 6d65 2c73 706c 6974 290a 2020 2020  name,split).    
+0003bea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003beb0: 6966 206e 6577 5f66 696c 656e 616d 6520  if new_filename 
+0003bec0: 3d3d 2072 6669 6c65 6e61 6d65 3a0a 2020  == rfilename:.  
+0003bed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003bee0: 2020 2020 2020 696e 633d 5472 7565 0a20        inc=True. 
+0003bef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003bf00: 2020 2069 6620 7375 6666 6978 3a0a 2020     if suffix:.  
+0003bf10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003bf20: 2020 2020 2020 6e65 775f 6669 6c65 6e61        new_filena
+0003bf30: 6d65 3d6e 6577 5f66 696c 656e 616d 652b  me=new_filename+
+0003bf40: 272e 7b7d 272e 666f 726d 6174 2873 7566  '.{}'.format(suf
+0003bf50: 6669 7829 0a20 2020 2020 2020 2020 2020  fix).           
+0003bf60: 2020 2020 2020 2020 206e 6577 5f66 696c           new_fil
+0003bf70: 653d 6f73 2e70 6174 682e 6a6f 696e 2862  e=os.path.join(b
+0003bf80: 6173 655f 6469 722c 6e65 775f 6669 6c65  ase_dir,new_file
+0003bf90: 6e61 6d65 290a 2020 2020 2020 2020 2020  name).          
+0003bfa0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+0003bfb0: 206f 732e 7061 7468 2e65 7869 7374 7328   os.path.exists(
+0003bfc0: 6e65 775f 6669 6c65 293a 0a20 2020 2020  new_file):.     
+0003bfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003bfe0: 2020 2072 6574 7572 6e20 6f75 7466 696c     return outfil
+0003bff0: 6528 6e65 775f 6669 6c65 2c6f 7074 290a  e(new_file,opt).
+0003c000: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0003c010: 2020 6966 2062 6173 655f 6469 7220 3d3d    if base_dir ==
+0003c020: 2027 2e27 3a0a 2020 2020 2020 2020 2020   '.':.          
+0003c030: 2020 6966 2073 7566 6669 783a 0a20 2020    if suffix:.   
+0003c040: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0003c050: 7572 6e20 7266 696c 656e 616d 652b 272e  urn rfilename+'.
+0003c060: 7b7d 272e 666f 726d 6174 2873 7566 6669  {}'.format(suffi
+0003c070: 7829 0a20 2020 2020 2020 2020 2020 2072  x).            r
+0003c080: 6574 7572 6e20 7266 696c 656e 616d 650a  eturn rfilename.
+0003c090: 2020 2020 2020 2020 7265 7475 726e 206f          return o
+0003c0a0: 7574 6669 6c65 286f 732e 7061 7468 2e6a  utfile(os.path.j
+0003c0b0: 6f69 6e28 6261 7365 5f64 6972 2c72 6669  oin(base_dir,rfi
+0003c0c0: 6c65 6e61 6d65 292c 6f70 7429 0a0a 6465  lename),opt)..de
+0003c0d0: 6620 6f73 7665 7273 696f 6e28 6d6f 6465  f osversion(mode
+0003c0e0: 3d27 7570 7065 7227 293a 0a20 2020 205f  ='upper'):.    _
+0003c0f0: 706c 6174 666f 726d 3d70 6c61 7466 6f72  platform=platfor
+0003c100: 6d2e 7379 7374 656d 2829 0a20 2020 2023  m.system().    #
+0003c110: 3634 6269 743a 2070 6c61 7466 6f72 6d2e  64bit: platform.
+0003c120: 6172 6368 6974 6563 7475 7265 2829 5b30  architecture()[0
+0003c130: 5d0a 2020 2020 6d6f 6465 3d27 6c27 2069  ].    mode='l' i
+0003c140: 6620 4973 5361 6d65 286d 6f64 652c 276c  f IsSame(mode,'l
+0003c150: 6f77 6572 2729 2065 6c73 6520 2775 270a  ower') else 'u'.
+0003c160: 0a20 2020 206f 7574 3d7b 0a20 2020 2020  .    out={.     
+0003c170: 2020 2770 6c61 7466 6f72 6d27 3a5f 706c    'platform':_pl
+0003c180: 6174 666f 726d 2e6c 6f77 6572 2829 2069  atform.lower() i
+0003c190: 6620 6d6f 6465 203d 3d20 276c 2720 656c  f mode == 'l' el
+0003c1a0: 7365 205f 706c 6174 666f 726d 2e75 7070  se _platform.upp
+0003c1b0: 6572 2829 2c0a 2020 2020 2020 2027 6e61  er(),.       'na
+0003c1c0: 6d65 273a 4e6f 6e65 2c0a 2020 2020 2020  me':None,.      
+0003c1d0: 2027 7665 7273 696f 6e27 3a4e 6f6e 652c   'version':None,
+0003c1e0: 0a20 2020 2020 2020 2765 7874 273a 4e6f  .       'ext':No
+0003c1f0: 6e65 2c0a 2020 2020 2020 2027 3634 6269  ne,.       '64bi
+0003c200: 7427 3a73 7973 2e6d 6178 7369 7a65 203e  t':sys.maxsize >
+0003c210: 2032 2a2a 3332 2c0a 2020 2020 2020 2027   2**32,.       '
+0003c220: 636f 6465 273a 4e6f 6e65 0a20 2020 207d  code':None.    }
+0003c230: 0a20 2020 2069 6620 274c 696e 7578 2720  .    if 'Linux' 
+0003c240: 3d3d 205f 706c 6174 666f 726d 3a0a 2020  == _platform:.  
+0003c250: 2020 2020 2020 7274 3d72 7368 656c 6c28        rt=rshell(
+0003c260: 2727 275b 202d 6620 2f65 7463 2f6f 732d  '''[ -f /etc/os-
+0003c270: 7265 6c65 6173 6520 5d20 2626 2028 202e  release ] && ( .
+0003c280: 202f 6574 632f 6f73 2d72 656c 6561 7365   /etc/os-release
+0003c290: 203b 2065 6368 6f20 2449 4429 2727 2729   ; echo $ID)''')
+0003c2a0: 0a20 2020 2020 2020 206f 7574 5b27 6e61  .        out['na
+0003c2b0: 6d65 275d 3d72 745b 315d 2e6c 6f77 6572  me']=rt[1].lower
+0003c2c0: 2829 2069 6620 6d6f 6465 203d 3d20 276c  () if mode == 'l
+0003c2d0: 2720 656c 7365 2072 745b 315d 2e75 7070  ' else rt[1].upp
+0003c2e0: 6572 2829 0a20 2020 2020 2020 2069 6620  er().        if 
+0003c2f0: 4973 496e 286f 7574 5b27 6e61 6d65 275d  IsIn(out['name']
+0003c300: 2c28 2775 6275 6e74 7527 2c27 5261 7370  ,('ubuntu','Rasp
+0003c310: 6269 616e 272c 2746 6564 6f72 6127 2929  bian','Fedora'))
+0003c320: 3a0a 2020 2020 2020 2020 2020 2020 7274  :.            rt
+0003c330: 3d72 7368 656c 6c28 2727 275b 202d 6620  =rshell('''[ -f 
+0003c340: 2f65 7463 2f6f 732d 7265 6c65 6173 6520  /etc/os-release 
+0003c350: 5d20 2626 2028 202e 202f 6574 632f 6f73  ] && ( . /etc/os
+0003c360: 2d72 656c 6561 7365 203b 2065 6368 6f20  -release ; echo 
+0003c370: 2456 4552 5349 4f4e 2927 2727 290a 2020  $VERSION)''').  
+0003c380: 2020 2020 2020 2020 2020 6f75 745b 2776            out['v
+0003c390: 6572 7369 6f6e 275d 3d72 745b 315d 2e73  ersion']=rt[1].s
+0003c3a0: 706c 6974 2829 5b30 5d0a 2020 2020 2020  plit()[0].      
+0003c3b0: 2020 2020 2020 6f75 745b 2765 7874 275d        out['ext']
+0003c3c0: 3d27 2027 2e6a 6f69 6e28 7274 5b31 5d2e  =' '.join(rt[1].
+0003c3d0: 7370 6c69 7428 295b 313a 5d29 0a20 2020  split()[1:]).   
+0003c3e0: 2020 2020 2020 2020 2072 743d 7273 6865           rt=rshe
+0003c3f0: 6c6c 2827 2727 5b20 2d66 202f 6574 632f  ll('''[ -f /etc/
+0003c400: 6f73 2d72 656c 6561 7365 205d 2026 2620  os-release ] && 
+0003c410: 2820 2e20 2f65 7463 2f6f 732d 7265 6c65  ( . /etc/os-rele
+0003c420: 6173 6520 3b20 6563 686f 2024 5645 5253  ase ; echo $VERS
+0003c430: 494f 4e5f 434f 4445 4e41 4d45 2927 2727  ION_CODENAME)'''
+0003c440: 290a 2020 2020 2020 2020 2020 2020 6f75  ).            ou
+0003c450: 745b 2763 6f64 6527 5d3d 7274 5b31 5d0a  t['code']=rt[1].
+0003c460: 2020 2020 2020 2020 656c 7365 3a20 2343          else: #C
+0003c470: 656e 746f 732c 2052 6f63 6b79 2c20 5265  entos, Rocky, Re
+0003c480: 6468 6174 2c0a 2020 2020 2020 2020 2020  dhat,.          
+0003c490: 2020 7274 3d72 7368 656c 6c28 2727 275b    rt=rshell('''[
+0003c4a0: 202d 6620 2f65 7463 2f72 6564 6861 742d   -f /etc/redhat-
+0003c4b0: 7265 6c65 6173 6520 5d20 2626 2063 6174  release ] && cat
+0003c4c0: 202f 6574 632f 7265 6468 6174 2d72 656c   /etc/redhat-rel
+0003c4d0: 6561 7365 2727 2729 0a20 2020 2020 2020  ease''').       
+0003c4e0: 2020 2020 2069 6620 7274 5b30 5d20 3d3d       if rt[0] ==
+0003c4f0: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
+0003c500: 2020 2020 666f 7220 6969 2069 6e20 7274      for ii in rt
+0003c510: 5b31 5d2e 7370 6c69 7428 293a 0a20 2020  [1].split():.   
+0003c520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c530: 2069 6620 272e 2720 696e 2069 6920 616e   if '.' in ii an
+0003c540: 6420 6969 2e73 706c 6974 2827 2e27 295b  d ii.split('.')[
+0003c550: 305d 2e69 7364 6967 6974 2829 3a0a 2020  0].isdigit():.  
+0003c560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c570: 2020 2020 2020 6969 5f61 3d69 692e 7370        ii_a=ii.sp
+0003c580: 6c69 7428 272e 2729 0a20 2020 2020 2020  lit('.').       
+0003c590: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c5a0: 206f 7574 5b27 7665 7273 696f 6e27 5d3d   out['version']=
+0003c5b0: 277b 7d2e 7b7d 272e 666f 726d 6174 2869  '{}.{}'.format(i
+0003c5c0: 695f 615b 305d 2c69 695f 615b 315d 290a  i_a[0],ii_a[1]).
+0003c5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c5e0: 2020 2020 2020 2020 6f75 745b 2765 7874          out['ext
+0003c5f0: 275d 3d69 695f 615b 2d31 5d0a 2020 2020  ']=ii_a[-1].    
+0003c600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003c610: 2020 2020 6272 6561 6b0a 2020 2020 656c      break.    el
+0003c620: 6966 2027 4672 6565 4253 4427 203d 3d20  if 'FreeBSD' == 
+0003c630: 5f70 6c61 7466 6f72 6d3a 0a20 2020 2020  _platform:.     
+0003c640: 2020 206f 7574 5b27 6e61 6d65 275d 3d5f     out['name']=_
+0003c650: 706c 6174 666f 726d 2e6c 6f77 6572 2829  platform.lower()
+0003c660: 2069 6620 6d6f 6465 203d 3d20 276c 2720   if mode == 'l' 
+0003c670: 656c 7365 205f 706c 6174 666f 726d 2e75  else _platform.u
+0003c680: 7070 6572 2829 0a20 2020 2020 2020 2061  pper().        a
+0003c690: 613d 706c 6174 666f 726d 2e76 6572 7369  a=platform.versi
+0003c6a0: 6f6e 2829 0a20 2020 2020 2020 206f 7574  on().        out
+0003c6b0: 5b27 7665 7273 696f 6e27 5d3d 6161 2e73  ['version']=aa.s
+0003c6c0: 706c 6974 2829 5b31 5d2e 7370 6c69 7428  plit()[1].split(
+0003c6d0: 272d 2729 5b30 5d0a 2020 2020 2020 2020  '-')[0].        
+0003c6e0: 6f75 745b 2765 7874 275d 3d61 612e 7370  out['ext']=aa.sp
+0003c6f0: 6c69 7428 295b 325d 0a20 2020 2065 6c69  lit()[2].    eli
+0003c700: 6620 2744 6172 7769 6e27 203d 3d20 5f70  f 'Darwin' == _p
+0003c710: 6c61 7466 6f72 6d3a 0a20 2020 2020 2020  latform:.       
+0003c720: 206f 7574 5b27 6e61 6d65 275d 3d27 6f73   out['name']='os
+0003c730: 7827 2069 6620 6d6f 6465 203d 3d20 276c  x' if mode == 'l
+0003c740: 2720 656c 7365 2027 4f53 5827 0a20 2020  ' else 'OSX'.   
+0003c750: 2020 2020 206f 7574 5b27 7665 7273 696f       out['versio
+0003c760: 6e27 5d3d 706c 6174 666f 726d 2e6d 6163  n']=platform.mac
+0003c770: 5f76 6572 2829 0a20 2020 2065 6c69 6620  _ver().    elif 
+0003c780: 2757 696e 646f 7773 2720 3d3d 205f 706c  'Windows' == _pl
+0003c790: 6174 666f 726d 3a0a 2020 2020 2020 2020  atform:.        
+0003c7a0: 6f75 745b 276e 616d 6527 5d3d 5f70 6c61  out['name']=_pla
+0003c7b0: 7466 6f72 6d2e 6c6f 7765 7228 2920 6966  tform.lower() if
+0003c7c0: 206d 6f64 6520 3d3d 2027 6c27 2065 6c73   mode == 'l' els
+0003c7d0: 6520 5f70 6c61 7466 6f72 6d2e 7570 7065  e _platform.uppe
+0003c7e0: 7228 290a 2020 2020 2020 2020 6f75 745b  r().        out[
+0003c7f0: 2776 6572 7369 6f6e 275d 3d70 6c61 7466  'version']=platf
+0003c800: 6f72 6d2e 7769 6e33 325f 7665 7228 2928  orm.win32_ver()(
+0003c810: 290a 2020 2020 656c 7365 3a0a 2020 2020  ).    else:.    
+0003c820: 2020 2020 6f75 745b 276e 616d 6527 5d3d      out['name']=
+0003c830: 5f70 6c61 7466 6f72 6d2e 6c6f 7765 7228  _platform.lower(
+0003c840: 2920 6966 206d 6f64 6520 3d3d 2027 6c27  ) if mode == 'l'
+0003c850: 2065 6c73 6520 5f70 6c61 7466 6f72 6d2e   else _platform.
+0003c860: 7570 7065 7228 290a 2020 2020 7265 7475  upper().    retu
+0003c870: 726e 206f 7574 0a0a 6465 6620 5374 7269  rn out..def Stri
+0003c880: 7028 7372 632c 6d6f 6465 3d27 616c 6c27  p(src,mode='all'
+0003c890: 2c73 796d 3d27 7768 6974 6573 7061 6365  ,sym='whitespace
+0003c8a0: 2729 3a0a 2020 2020 6966 2069 7369 6e73  '):.    if isins
+0003c8b0: 7461 6e63 6528 7372 632c 7374 7229 3a0a  tance(src,str):.
+0003c8c0: 2020 2020 2020 2020 6966 206d 6f64 6520          if mode 
+0003c8d0: 696e 205b 2773 7461 7274 272c 276c 6566  in ['start','lef
+0003c8e0: 7427 2c27 6265 6769 6e27 5d3a 0a20 2020  t','begin']:.   
+0003c8f0: 2020 2020 2020 2020 2069 6620 7379 6d3d           if sym=
+0003c900: 3d27 7768 6974 6573 7061 6365 273a 0a20  ='whitespace':. 
+0003c910: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0003c920: 6574 7572 6e20 7372 632e 6c73 7472 6970  eturn src.lstrip
+0003c930: 2829 0a20 2020 2020 2020 2020 2020 2065  ().            e
+0003c940: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0003c950: 2020 2020 2072 6574 7572 6e20 7372 632e       return src.
+0003c960: 6c73 7472 6970 2873 796d 290a 2020 2020  lstrip(sym).    
+0003c970: 2020 2020 656c 6966 206d 6f64 6520 696e      elif mode in
+0003c980: 205b 2765 6e64 272c 2772 6967 6874 272c   ['end','right',
+0003c990: 276c 6173 7427 5d3a 0a20 2020 2020 2020  'last']:.       
+0003c9a0: 2020 2020 2069 6620 7379 6d3d 3d27 7768       if sym=='wh
+0003c9b0: 6974 6573 7061 6365 273a 0a20 2020 2020  itespace':.     
+0003c9c0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0003c9d0: 6e20 7372 632e 7273 7472 6970 2829 0a20  n src.rstrip(). 
+0003c9e0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0003c9f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003ca00: 2072 6574 7572 6e20 7372 632e 7273 7472   return src.rstr
+0003ca10: 6970 2873 796d 290a 2020 2020 2020 2020  ip(sym).        
+0003ca20: 656c 6966 206d 6f64 6520 696e 205b 2762  elif mode in ['b
+0003ca30: 6f74 6827 2c27 6564 6765 272c 276f 7574  oth','edge','out
+0003ca40: 7369 6465 275d 3a0a 2020 2020 2020 2020  side']:.        
+0003ca50: 2020 2020 6966 2073 796d 3d3d 2777 6869      if sym=='whi
+0003ca60: 7465 7370 6163 6527 3a0a 2020 2020 2020  tespace':.      
+0003ca70: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0003ca80: 2073 7263 2e73 7472 6970 2829 0a20 2020   src.strip().   
+0003ca90: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+0003caa0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0003cab0: 6574 7572 6e20 7372 632e 7374 7269 7028  eturn src.strip(
+0003cac0: 7379 6d29 0a20 2020 2020 2020 2065 6c69  sym).        eli
+0003cad0: 6620 6d6f 6465 2069 6e20 5b27 696e 7369  f mode in ['insi
+0003cae0: 6465 275d 3a0a 2020 2020 2020 2020 2020  de']:.          
+0003caf0: 2020 666f 7220 7320 696e 2072 616e 6765    for s in range
+0003cb00: 2830 2c6c 656e 2873 7263 2929 3a0a 2020  (0,len(src)):.  
+0003cb10: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0003cb20: 2073 796d 3d3d 2777 6869 7465 7370 6163   sym=='whitespac
+0003cb30: 6527 3a0a 2020 2020 2020 2020 2020 2020  e':.            
+0003cb40: 2020 2020 2020 2020 6966 2073 7263 5b73          if src[s
+0003cb50: 5d20 213d 2027 2027 3a20 6272 6561 6b0a  ] != ' ': break.
+0003cb60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003cb70: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0003cb80: 2020 2020 2020 2020 2020 6966 2073 7263            if src
+0003cb90: 5b73 5d20 213d 2073 796d 3a20 6272 6561  [s] != sym: brea
+0003cba0: 6b0a 2020 2020 2020 2020 2020 2020 666f  k.            fo
+0003cbb0: 7220 6520 696e 2072 616e 6765 286c 656e  r e in range(len
+0003cbc0: 2873 7263 292d 312c 302c 2d31 293a 0a20  (src)-1,0,-1):. 
+0003cbd0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0003cbe0: 6620 7379 6d3d 3d27 7768 6974 6573 7061  f sym=='whitespa
+0003cbf0: 6365 273a 0a20 2020 2020 2020 2020 2020  ce':.           
+0003cc00: 2020 2020 2020 2020 2069 6620 7372 635b           if src[
+0003cc10: 655d 2021 3d20 2720 273a 2062 7265 616b  e] != ' ': break
+0003cc20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003cc30: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0003cc40: 2020 2020 2020 2020 2020 2069 6620 7372             if sr
+0003cc50: 635b 655d 2021 3d20 7379 6d3a 2062 7265  c[e] != sym: bre
+0003cc60: 616b 0a20 2020 2020 2020 2020 2020 2069  ak.            i
+0003cc70: 6620 7379 6d3d 3d27 7768 6974 6573 7061  f sym=='whitespa
+0003cc80: 6365 273a 0a20 2020 2020 2020 2020 2020  ce':.           
+0003cc90: 2020 2020 2072 6574 7572 6e20 7372 635b       return src[
+0003cca0: 3a73 5d2b 2720 272e 6a6f 696e 2873 7263  :s]+' '.join(src
+0003ccb0: 5b73 3a65 2b31 5d2e 7370 6c69 7428 2929  [s:e+1].split())
+0003ccc0: 2b73 7263 5b65 2b31 3a5d 0a20 2020 2020  +src[e+1:].     
+0003ccd0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0003cce0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0003ccf0: 7572 6e20 7372 635b 3a73 5d2b 7379 6d2e  urn src[:s]+sym.
+0003cd00: 6a6f 696e 2873 7263 5b73 3a65 2b31 5d2e  join(src[s:e+1].
+0003cd10: 7370 6c69 7428 7379 6d29 292b 7372 635b  split(sym))+src[
+0003cd20: 652b 313a 5d0a 2020 2020 2020 2020 656c  e+1:].        el
+0003cd30: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0003cd40: 6966 2073 796d 3d3d 2777 6869 7465 7370  if sym=='whitesp
+0003cd50: 6163 6527 3a0a 2020 2020 2020 2020 2020  ace':.          
+0003cd60: 2020 2020 2020 7265 7475 726e 2027 2027        return ' '
+0003cd70: 2e6a 6f69 6e28 7372 632e 7370 6c69 7428  .join(src.split(
+0003cd80: 2929 0a20 2020 2020 2020 2020 2020 2065  )).            e
+0003cd90: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0003cda0: 2020 2020 2072 6574 7572 6e20 7379 6d2e       return sym.
+0003cdb0: 6a6f 696e 2873 7263 2e73 706c 6974 2873  join(src.split(s
+0003cdc0: 796d 2929 0a20 2020 2072 6574 7572 6e20  ym)).    return 
+0003cdd0: 7372 630a 0a64 6566 2050 6f70 2873 7263  src..def Pop(src
+0003cde0: 2c6b 6579 2c64 6566 6175 6c74 3d4e 6f6e  ,key,default=Non
+0003cdf0: 6529 3a0a 2020 2020 6966 2069 7369 6e73  e):.    if isins
+0003ce00: 7461 6e63 6528 7372 632c 6469 6374 293a  tance(src,dict):
+0003ce10: 0a20 2020 2020 2020 2069 6620 6b65 7920  .        if key 
+0003ce20: 696e 2073 7263 3a0a 2020 2020 2020 2020  in src:.        
+0003ce30: 2020 2020 7265 7475 726e 2073 7263 2e70      return src.p
+0003ce40: 6f70 286b 6579 290a 2020 2020 656c 6966  op(key).    elif
+0003ce50: 2069 7369 6e73 7461 6e63 6528 7372 632c   isinstance(src,
+0003ce60: 6c69 7374 293a 0a20 2020 2020 2020 2069  list):.        i
+0003ce70: 6620 6973 696e 7374 616e 6365 286b 6579  f isinstance(key
+0003ce80: 2c69 6e74 2920 616e 6420 6e6f 7420 6973  ,int) and not is
+0003ce90: 696e 7374 616e 6365 286b 6579 2c62 6f6f  instance(key,boo
+0003cea0: 6c29 3a0a 2020 2020 2020 2020 2020 2020  l):.            
+0003ceb0: 6966 206c 656e 2873 7263 2920 3e20 6162  if len(src) > ab
+0003cec0: 7328 6b65 7929 3a0a 2020 2020 2020 2020  s(key):.        
+0003ced0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0003cee0: 7263 2e70 6f70 286b 6579 290a 2020 2020  rc.pop(key).    
+0003cef0: 6966 206e 6f74 2049 734e 6f6e 6528 6465  if not IsNone(de
+0003cf00: 6661 756c 7429 3a0a 2020 2020 2020 2020  fault):.        
+0003cf10: 7265 7475 726e 2064 6566 6175 6c74 0a0a  return default..
+0003cf20: 6465 6620 4973 5472 7565 2863 6f6e 6469  def IsTrue(condi
+0003cf30: 7469 6f6e 2c72 6571 7569 7265 6d65 6e74  tion,requirement
+0003cf40: 733d 4e6f 6e65 2c73 6865 6c6c 3d46 616c  s=None,shell=Fal
+0003cf50: 7365 2c2a 2a6f 7074 7329 3a0a 2020 2020  se,**opts):.    
+0003cf60: 636f 6e64 6974 696f 6e5f 7479 7065 3d74  condition_type=t
+0003cf70: 7970 6528 636f 6e64 6974 696f 6e29 2e5f  ype(condition)._
+0003cf80: 5f6e 616d 655f 5f0a 2020 2020 6966 2049  _name__.    if I
+0003cf90: 7346 756e 6374 696f 6e28 636f 6e64 6974  sFunction(condit
+0003cfa0: 696f 6e2c 6275 696c 7469 6e3d 4661 6c73  ion,builtin=Fals
+0003cfb0: 6529 3a0a 2020 2020 2020 2020 6f70 7473  e):.        opts
+0003cfc0: 5b27 7061 7265 6e74 275d 3d33 2069 6620  ['parent']=3 if 
+0003cfd0: 2770 6172 656e 7427 206e 6f74 2069 6e20  'parent' not in 
+0003cfe0: 6f70 7473 2065 6c73 6520 6f70 7473 5b27  opts else opts['
+0003cff0: 7061 7265 6e74 275d 2b32 0a20 2020 2020  parent']+2.     
+0003d000: 2020 2069 6620 4665 6564 4675 6e63 2863     if FeedFunc(c
+0003d010: 6f6e 6469 7469 6f6e 2c2a 2a6f 7074 7329  ondition,**opts)
+0003d020: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+0003d030: 7475 726e 2054 7275 650a 2020 2020 656c  turn True.    el
+0003d040: 6966 2063 6f6e 6469 7469 6f6e 5f74 7970  if condition_typ
+0003d050: 6520 3d3d 2027 7374 7227 3a0a 2020 2020  e == 'str':.    
+0003d060: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+0003d070: 2020 2020 2072 6574 7572 6e20 6576 616c       return eval
+0003d080: 2863 6f6e 6469 7469 6f6e 290a 2020 2020  (condition).    
+0003d090: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
+0003d0a0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+0003d0b0: 7461 6e63 6528 7265 7175 6972 656d 656e  tance(requiremen
+0003d0c0: 7473 2c28 7475 706c 652c 6c69 7374 2929  ts,(tuple,list))
+0003d0d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0003d0e0: 2020 6966 2049 7349 6e28 636f 6e64 6974    if IsIn(condit
+0003d0f0: 696f 6e20 2c72 6571 7569 7265 6d65 6e74  ion ,requirement
+0003d100: 7329 3a20 7265 7475 726e 2054 7275 650a  s): return True.
+0003d110: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+0003d120: 2072 6571 7569 7265 6d65 6e74 7320 6973   requirements is
+0003d130: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+0003d140: 2020 2020 2020 2020 2020 2069 6620 636f             if co
+0003d150: 6e64 6974 696f 6e20 3d3d 2072 6571 7569  ndition == requi
+0003d160: 7265 6d65 6e74 7320 3a20 7265 7475 726e  rements : return
+0003d170: 2054 7275 650a 2020 2020 656c 6966 2063   True.    elif c
+0003d180: 6f6e 6469 7469 6f6e 5f74 7970 6520 3d3d  ondition_type ==
+0003d190: 2027 626f 6f6c 273a 0a20 2020 2020 2020   'bool':.       
+0003d1a0: 2072 6574 7572 6e20 636f 6e64 6974 696f   return conditio
+0003d1b0: 6e0a 2020 2020 656c 6966 2063 6f6e 6469  n.    elif condi
+0003d1c0: 7469 6f6e 5f74 7970 6520 3d3d 2027 696e  tion_type == 'in
+0003d1d0: 7427 3a0a 2020 2020 2020 2020 6966 2073  t':.        if s
+0003d1e0: 6865 6c6c 3a0a 2020 2020 2020 2020 2020  hell:.          
+0003d1f0: 2020 6966 2063 6f6e 6469 7469 6f6e 3d3d    if condition==
+0003d200: 303a 2072 6574 7572 6e20 5472 7565 0a20  0: return True. 
+0003d210: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0003d220: 6e20 4661 6c73 650a 2020 2020 2020 2020  n False.        
+0003d230: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0003d240: 2020 6966 2063 6f6e 6469 7469 6f6e 3e30    if condition>0
+0003d250: 3a20 7265 7475 726e 2054 7275 650a 2020  : return True.  
+0003d260: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0003d270: 2046 616c 7365 0a20 2020 2072 6574 7572   False.    retur
+0003d280: 6e20 4661 6c73 650a 0a64 6566 2041 7070  n False..def App
+0003d290: 656e 6428 2a61 2c73 796d 626f 6c3d 2727  end(*a,symbol=''
+0003d2a0: 2c61 743d 2d31 2c77 616e 743d 4e6f 6e65  ,at=-1,want=None
+0003d2b0: 293a 2023 2041 7070 656e 6420 6461 7461  ): # Append data
+0003d2c0: 2061 6363 6f72 6469 6e67 2074 6f20 736f   according to so
+0003d2d0: 7572 6365 2074 7970 650a 2020 2020 6966  urce type.    if
+0003d2e0: 2061 3a20 2020 2020 2020 2020 2020 2020   a:             
+0003d2f0: 2020 2020 2020 2023 206c 6973 7420 2b20         # list + 
+0003d300: 6c69 7374 0a20 2020 2020 2020 2073 3d61  list.        s=a
+0003d310: 5b30 5d20 2020 2020 2020 2020 2020 2020  [0]             
+0003d320: 2020 2320 6f74 6865 7220 3d3e 2070 7574    # other => put
+0003d330: 2074 6f20 6c69 7374 0a20 2020 2020 2020   to list.       
+0003d340: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
+0003d350: 2c62 7974 6573 293a 2073 3d53 7472 2873  ,bytes): s=Str(s
+0003d360: 290a 2020 2020 2020 2020 6966 2077 616e  ).        if wan
+0003d370: 743a 0a20 2020 2020 2020 2020 2020 2069  t:.            i
+0003d380: 6620 7761 6e74 2069 6e20 5b6c 6973 742c  f want in [list,
+0003d390: 276c 6973 7427 5d3a 0a20 2020 2020 2020  'list']:.       
+0003d3a0: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+0003d3b0: 7374 616e 6365 2873 2c74 7570 6c65 293a  stance(s,tuple):
+0003d3c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003d3d0: 2020 2020 2073 3d6c 6973 7428 7329 0a20       s=list(s). 
+0003d3e0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0003d3f0: 6c69 6620 6e6f 7420 6973 696e 7374 616e  lif not isinstan
+0003d400: 6365 2873 2c6c 6973 7429 3a0a 2020 2020  ce(s,list):.    
+0003d410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d420: 733d 5b73 5d0a 2020 2020 2020 2020 2020  s=[s].          
+0003d430: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
+0003d440: 7461 6e63 6528 732c 7374 7229 2061 6e64  tance(s,str) and
+0003d450: 2073 796d 626f 6c3a 0a20 2020 2020 2020   symbol:.       
+0003d460: 2020 2020 2020 2020 2020 2020 2073 3d73               s=s
+0003d470: 2e73 706c 6974 2873 796d 626f 6c29 0a20  .split(symbol). 
+0003d480: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+0003d490: 7761 6e74 2069 6e20 5b73 7472 2c27 7374  want in [str,'st
+0003d4a0: 7227 5d3a 0a20 2020 2020 2020 2020 2020  r']:.           
+0003d4b0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+0003d4c0: 6365 2873 2c28 6c69 7374 2c74 7570 6c65  ce(s,(list,tuple
+0003d4d0: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+0003d4e0: 2020 2020 2020 2020 733d 4a6f 696e 2873          s=Join(s
+0003d4f0: 2c73 796d 626f 6c3d 7379 6d62 6f6c 290a  ,symbol=symbol).
+0003d500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d510: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0003d520: 2020 2020 2020 2020 2020 733d 277b 7d27            s='{}'
+0003d530: 2e66 6f72 6d61 7428 7329 0a20 2020 2020  .format(s).     
+0003d540: 2020 2073 6e3d 7479 7065 2873 292e 5f5f     sn=type(s).__
+0003d550: 6e61 6d65 5f5f 0a20 2020 2020 2020 2066  name__.        f
+0003d560: 6f72 2069 2069 6e20 615b 313a 5d3a 0a20  or i in a[1:]:. 
+0003d570: 2020 2020 2020 2020 2020 2069 6620 736e             if sn
+0003d580: 203d 3d20 2773 7472 273a 0a20 2020 2020   == 'str':.     
+0003d590: 2020 2020 2020 2020 2020 2069 6620 6973             if is
+0003d5a0: 696e 7374 616e 6365 2869 2c28 6c69 7374  instance(i,(list
+0003d5b0: 2c74 7570 6c65 2929 3a0a 2020 2020 2020  ,tuple)):.      
+0003d5c0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+0003d5d0: 7220 7820 696e 2069 3a0a 2020 2020 2020  r x in i:.      
+0003d5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d5f0: 2020 6966 2061 7420 3d3d 202d 313a 0a20    if at == -1:. 
+0003d600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d610: 2020 2020 2020 2020 2020 2073 3d4a 6f69             s=Joi
+0003d620: 6e28 732c 277b 7d27 2e66 6f72 6d61 7428  n(s,'{}'.format(
+0003d630: 7829 2c73 796d 626f 6c3d 7379 6d62 6f6c  x),symbol=symbol
+0003d640: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0003d650: 2020 2020 2020 2020 2020 656c 6966 2061            elif a
+0003d660: 7420 3d3d 2030 3a0a 2020 2020 2020 2020  t == 0:.        
+0003d670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d680: 2020 2020 733d 4a6f 696e 2827 7b7d 272e      s=Join('{}'.
+0003d690: 666f 726d 6174 2878 292c 732c 7379 6d62  format(x),s,symb
+0003d6a0: 6f6c 3d73 796d 626f 6c29 0a20 2020 2020  ol=symbol).     
+0003d6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d6c0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
 0003d6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d6e0: 2020 2020 733d 4a6f 696e 2827 7b7d 272e      s=Join('{}'.
-0003d6f0: 666f 726d 6174 2878 292c 732c 7379 6d62  format(x),s,symb
-0003d700: 6f6c 3d73 796d 626f 6c29 0a20 2020 2020  ol=symbol).     
-0003d710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d720: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0003d730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d740: 2020 2020 2069 6620 6c65 6e28 7329 203e       if len(s) >
-0003d750: 2061 743a 0a20 2020 2020 2020 2020 2020   at:.           
-0003d760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d770: 2020 2020 2073 3d4a 6f69 6e28 4a6f 696e       s=Join(Join
-0003d780: 2873 5b3a 6174 5d2c 277b 7d27 2e66 6f72  (s[:at],'{}'.for
-0003d790: 6d61 7428 7829 2c73 796d 626f 6c3d 7379  mat(x),symbol=sy
-0003d7a0: 6d62 6f6c 292c 735b 6174 3a5d 2c73 796d  mbol),s[at:],sym
-0003d7b0: 626f 6c3d 7379 6d62 6f6c 290a 2020 2020  bol=symbol).    
-0003d7c0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-0003d7d0: 2069 7369 6e73 7461 6e63 6528 692c 2869   isinstance(i,(i
-0003d7e0: 6e74 2c73 7472 2c62 7974 6573 2929 3a0a  nt,str,bytes)):.
-0003d7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d800: 2020 2020 6966 2061 7420 3d3d 202d 313a      if at == -1:
-0003d810: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003d820: 2020 2020 2020 2020 2073 3d4a 6f69 6e28           s=Join(
-0003d830: 732c 277b 7d27 2e66 6f72 6d61 7428 5374  s,'{}'.format(St
-0003d840: 7228 6929 292c 7379 6d62 6f6c 3d73 796d  r(i)),symbol=sym
-0003d850: 626f 6c29 0a20 2020 2020 2020 2020 2020  bol).           
-0003d860: 2020 2020 2020 2020 2065 6c69 6620 6174           elif at
-0003d870: 203d 3d20 303a 0a20 2020 2020 2020 2020   == 0:.         
-0003d880: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0003d890: 3d4a 6f69 6e28 277b 7d27 2e66 6f72 6d61  =Join('{}'.forma
-0003d8a0: 7428 5374 7228 6929 292c 732c 7379 6d62  t(Str(i)),s,symb
-0003d8b0: 6f6c 3d73 796d 626f 6c29 0a20 2020 2020  ol=symbol).     
-0003d8c0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0003d8d0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0003d8e0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0003d8f0: 6c65 6e28 7329 203e 2061 743a 0a20 2020  len(s) > at:.   
-0003d900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003d910: 2020 2020 2020 2020 2073 3d4a 6f69 6e28           s=Join(
-0003d920: 4a6f 696e 2873 5b3a 6174 5d2c 277b 7d27  Join(s[:at],'{}'
-0003d930: 2e66 6f72 6d61 7428 5374 7228 6929 292c  .format(Str(i)),
-0003d940: 7379 6d62 6f6c 3d73 796d 626f 6c29 2c73  symbol=symbol),s
-0003d950: 5b61 743a 5d2c 7379 6d62 6f6c 3d73 796d  [at:],symbol=sym
-0003d960: 626f 6c29 0a20 2020 2020 2020 2020 2020  bol).           
-0003d970: 2065 6c69 6620 736e 203d 3d20 276c 6973   elif sn == 'lis
-0003d980: 7427 3a0a 2020 2020 2020 2020 2020 2020  t':.            
-0003d990: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0003d9a0: 6528 692c 7374 7229 2061 6e64 2073 796d  e(i,str) and sym
-0003d9b0: 626f 6c3a 0a20 2020 2020 2020 2020 2020  bol:.           
-0003d9c0: 2020 2020 2020 2020 2069 3d69 2e73 706c           i=i.spl
-0003d9d0: 6974 2873 796d 626f 6c29 0a20 2020 2020  it(symbol).     
-0003d9e0: 2020 2020 2020 2020 2020 2069 6620 6174             if at
-0003d9f0: 203d 3d20 2d31 206f 7220 6174 203d 3d20   == -1 or at == 
-0003da00: 6c65 6e28 7329 2d31 3a0a 2020 2020 2020  len(s)-1:.      
-0003da10: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0003da20: 2069 7369 6e73 7461 6e63 6528 692c 6c69   isinstance(i,li
-0003da30: 7374 293a 0a20 2020 2020 2020 2020 2020  st):.           
-0003da40: 2020 2020 2020 2020 2020 2020 2073 3d73               s=s
-0003da50: 2b69 0a20 2020 2020 2020 2020 2020 2020  +i.             
-0003da60: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0003da70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003da80: 2020 2020 2073 2e61 7070 656e 6428 6929       s.append(i)
-0003da90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003daa0: 2065 6c69 6620 6174 203d 3d20 3020 6f72   elif at == 0 or
-0003dab0: 206c 656e 2873 292b 6174 203d 3d20 303a   len(s)+at == 0:
-0003dac0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003dad0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-0003dae0: 6365 2869 2c6c 6973 7429 3a0a 2020 2020  ce(i,list):.    
-0003daf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003db00: 2020 2020 733d 692b 730a 2020 2020 2020      s=i+s.      
-0003db10: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0003db20: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0003db30: 2020 2020 2020 2020 2020 2020 733d 5b69              s=[i
-0003db40: 5d2b 730a 2020 2020 2020 2020 2020 2020  ]+s.            
-0003db50: 2020 2020 656c 6966 2061 7420 3e30 2061      elif at >0 a
-0003db60: 6e64 2061 7420 3c20 6c65 6e28 7329 3a0a  nd at < len(s):.
-0003db70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003db80: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0003db90: 6528 692c 6c69 7374 293a 0a20 2020 2020  e(i,list):.     
-0003dba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003dbb0: 2020 2073 3d73 5b3a 6174 5d2b 692b 735b     s=s[:at]+i+s[
-0003dbc0: 6174 3a5d 0a20 2020 2020 2020 2020 2020  at:].           
-0003dbd0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0003dbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003dbf0: 2020 2020 2020 2073 3d73 5b3a 6174 5d2b         s=s[:at]+
-0003dc00: 5b69 5d2b 735b 6174 3a5d 0a20 2020 2020  [i]+s[at:].     
-0003dc10: 2020 2072 6574 7572 6e20 730a 2020 2020     return s.    
-0003dc20: 7265 7475 726e 2046 616c 7365 0a0a 6465  return False..de
-0003dc30: 6620 7061 636b 6574 5f72 6563 6569 7665  f packet_receive
-0003dc40: 5f61 6c6c 2873 6f63 6b2c 636f 756e 742c  _all(sock,count,
-0003dc50: 7072 6f67 7265 7373 3d46 616c 7365 2c70  progress=False,p
-0003dc60: 726f 6772 6573 735f 6d73 673d 4e6f 6e65  rogress_msg=None
-0003dc70: 2c6c 6f67 3d4e 6f6e 652c 7265 7472 793d  ,log=None,retry=
-0003dc80: 302c 7265 7472 795f 7469 6d65 6f75 743d  0,retry_timeout=
-0003dc90: 352c 6572 725f 7363 723d 4661 6c73 6529  5,err_scr=False)
-0003dca0: 3a20 2320 5061 636b 6574 0a20 2020 2069  : # Packet.    i
-0003dcb0: 6620 7479 7065 2873 6f63 6b29 2e5f 5f6e  f type(sock).__n
-0003dcc0: 616d 655f 5f20 6e6f 7420 696e 205b 2773  ame__ not in ['s
-0003dcd0: 6f63 6b65 7427 2c27 5f73 6f63 6b65 746f  ocket','_socketo
-0003dce0: 626a 6563 7427 2c27 5353 4c53 6f63 6b65  bject','SSLSocke
-0003dcf0: 7427 5d3a 0a20 2020 2020 2020 2072 6574  t']:.        ret
-0003dd00: 7572 6e20 4661 6c73 652c 2749 7320 6e6f  urn False,'Is no
-0003dd10: 7420 6e65 7477 6f72 6b20 736f 636b 6574  t network socket
-0003dd20: 270a 2020 2020 6275 6620 3d20 6227 270a  '.    buf = b''.
-0003dd30: 2020 2020 6669 6c65 5f73 697a 655f 643d      file_size_d=
-0003dd40: 696e 7428 277b 307d 272e 666f 726d 6174  int('{0}'.format
-0003dd50: 2863 6f75 6e74 2929 0a20 2020 2074 6e3d  (count)).    tn=
-0003dd60: 300a 2020 2020 6e65 7762 7566 3d4e 6f6e  0.    newbuf=Non
-0003dd70: 650a 2020 2020 7768 696c 6520 636f 756e  e.    while coun
-0003dd80: 743a 0a20 2020 2020 2020 2069 6620 7072  t:.        if pr
-0003dd90: 6f67 7265 7373 3a0a 2020 2020 2020 2020  ogress:.        
-0003dda0: 2020 2020 6966 2070 726f 6772 6573 735f      if progress_
-0003ddb0: 6d73 673a 0a20 2020 2020 2020 2020 2020  msg:.           
-0003ddc0: 2020 2020 2070 7269 6e74 6628 275c 727b       printf('\r{
-0003ddd0: 7d20 5b20 7b7d 2025 205d 272e 666f 726d  } [ {} % ]'.form
-0003dde0: 6174 2870 726f 6772 6573 735f 6d73 672c  at(progress_msg,
-0003ddf0: 696e 7428 2866 696c 655f 7369 7a65 5f64  int((file_size_d
-0003de00: 2d63 6f75 6e74 2920 2f20 6669 6c65 5f73  -count) / file_s
-0003de10: 697a 655f 6420 2a20 3130 3029 292c 6c6f  ize_d * 100)),lo
-0003de20: 673d 6c6f 672c 6469 7265 6374 3d54 7275  g=log,direct=Tru
-0003de30: 6529 0a20 2020 2020 2020 2020 2020 2065  e).            e
-0003de40: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0003de50: 2020 2020 2070 7269 6e74 6628 275c 7244       printf('\rD
-0003de60: 6f77 6e6c 6f61 6469 6e67 2e2e 2e20 5b20  ownloading... [ 
-0003de70: 7b7d 2025 205d 272e 666f 726d 6174 2869  {} % ]'.format(i
-0003de80: 6e74 2828 6669 6c65 5f73 697a 655f 642d  nt((file_size_d-
-0003de90: 636f 756e 7429 202f 2066 696c 655f 7369  count) / file_si
-0003dea0: 7a65 5f64 202a 2031 3030 2929 2c6c 6f67  ze_d * 100)),log
-0003deb0: 3d6c 6f67 2c64 6972 6563 743d 5472 7565  =log,direct=True
-0003dec0: 290a 2020 2020 2020 2020 7472 793a 0a20  ).        try:. 
-0003ded0: 2020 2020 2020 2020 2020 206e 6577 6275             newbu
-0003dee0: 6620 3d20 736f 636b 2e72 6563 7628 636f  f = sock.recv(co
-0003def0: 756e 7429 0a20 2020 2020 2020 2020 2020  unt).           
-0003df00: 2074 6e3d 3020 2320 7265 7365 7420 7472   tn=0 # reset tr
-0003df10: 790a 2020 2020 2020 2020 6578 6365 7074  y.        except
-0003df20: 2073 6f63 6b65 742e 6572 726f 7220 6173   socket.error as
-0003df30: 2065 3a0a 2020 2020 2020 2020 2020 2020   e:.            
-0003df40: 6966 2074 6e20 3c20 7265 7472 793a 0a20  if tn < retry:. 
-0003df50: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0003df60: 7269 6e74 6628 225b 4552 524f 525d 2074  rintf("[ERROR] t
-0003df70: 696d 656f 7574 2076 616c 7565 3a7b 7d20  imeout value:{} 
-0003df80: 7265 7472 793a 207b 7d2f 7b7d 5c6e 7b7d  retry: {}/{}\n{}
-0003df90: 222e 666f 726d 6174 2873 6f63 6b2e 6765  ".format(sock.ge
-0003dfa0: 7474 696d 656f 7574 2829 2c74 6e2c 7265  ttimeout(),tn,re
-0003dfb0: 7472 792c 6529 2c6c 6f67 3d6c 6f67 2c64  try,e),log=log,d
-0003dfc0: 7370 3d27 6527 2069 6620 6572 725f 7363  sp='e' if err_sc
-0003dfd0: 7220 656c 7365 2027 6427 290a 2020 2020  r else 'd').    
-0003dfe0: 2020 2020 2020 2020 2020 2020 746e 2b3d              tn+=
-0003dff0: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
-0003e000: 2020 5449 4d45 2829 2e53 6c65 6570 2831    TIME().Sleep(1
-0003e010: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0003e020: 2020 736f 636b 2e73 6574 7469 6d65 6f75    sock.settimeou
-0003e030: 7428 7265 7472 795f 7469 6d65 6f75 7429  t(retry_timeout)
-0003e040: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003e050: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
-0003e060: 2020 2020 2020 7265 7475 726e 2027 6572        return 'er
-0003e070: 726f 7227 2c65 0a20 2020 2020 2020 2069  ror',e.        i
-0003e080: 6620 6e6f 7420 6e65 7762 7566 3a20 7265  f not newbuf: re
-0003e090: 7475 726e 2054 7275 652c 4e6f 6e65 2023  turn True,None #
-0003e0a0: 6d61 7962 6520 736f 6d65 7468 696e 6720  maybe something 
-0003e0b0: 736f 636b 6574 2069 7373 7565 2e0a 2020  socket issue..  
-0003e0c0: 2020 2020 2020 6275 6620 2b3d 206e 6577        buf += new
-0003e0d0: 6275 660a 2020 2020 2020 2020 636f 756e  buf.        coun
-0003e0e0: 7420 2d3d 206c 656e 286e 6577 6275 6629  t -= len(newbuf)
-0003e0f0: 0a20 2020 2069 6620 7072 6f67 7265 7373  .    if progress
-0003e100: 3a0a 2020 2020 2020 2020 6966 2070 726f  :.        if pro
-0003e110: 6772 6573 735f 6d73 673a 0a20 2020 2020  gress_msg:.     
-0003e120: 2020 2020 2020 2070 7269 6e74 6628 275c         printf('\
-0003e130: 727b 7d20 5b20 3130 3020 2520 5d5c 6e27  r{} [ 100 % ]\n'
-0003e140: 2e66 6f72 6d61 7428 7072 6f67 7265 7373  .format(progress
-0003e150: 5f6d 7367 292c 6c6f 673d 6c6f 672c 6469  _msg),log=log,di
-0003e160: 7265 6374 3d54 7275 6529 0a20 2020 2020  rect=True).     
-0003e170: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0003e180: 2020 2020 2070 7269 6e74 6628 275c 7244       printf('\rD
-0003e190: 6f77 6e6c 6f61 6469 6e67 2e2e 2e20 5b20  ownloading... [ 
-0003e1a0: 3130 3020 2520 5d5c 6e27 2c6c 6f67 3d6c  100 % ]\n',log=l
-0003e1b0: 6f67 2c64 6972 6563 743d 5472 7565 290a  og,direct=True).
-0003e1c0: 2020 2020 7265 7475 726e 2054 7275 652c      return True,
-0003e1d0: 6275 660a 0a64 6566 2044 6174 6132 4279  buf..def Data2By
-0003e1e0: 7465 5374 7269 6e67 2864 6174 612c 7072  teString(data,pr
-0003e1f0: 6f74 6f63 6f6c 3d32 293a 0a20 2020 2074  otocol=2):.    t
-0003e200: 7279 3a0a 2020 2020 2020 2020 7265 7475  ry:.        retu
-0003e210: 726e 2054 7275 652c 7069 636b 6c65 2e64  rn True,pickle.d
-0003e220: 756d 7073 2864 6174 612c 7072 6f74 6f63  umps(data,protoc
-0003e230: 6f6c 3d70 726f 746f 636f 6c29 2023 2063  ol=protocol) # c
-0003e240: 6f6d 6d6f 6e20 322e 7820 2620 332e 7820  ommon 2.x & 3.x 
-0003e250: 7665 7273 696f 6e20 3a20 7072 6f74 6f63  version : protoc
-0003e260: 6f6c 3d32 0a20 2020 2065 7863 6570 743a  ol=2.    except:
-0003e270: 0a20 2020 2020 2020 2074 7279 3a0a 2020  .        try:.  
-0003e280: 2020 2020 2020 2020 2020 2320 3c63 6c61            # <cla
-0003e290: 7373 2027 4b65 7945 7272 6f72 273e 2074  ss 'KeyError'> t
-0003e2a0: 6865 6e20 7472 7920 6167 6169 6e20 6166  hen try again af
-0003e2b0: 7465 7220 6669 6c74 6572 206f 7574 2070  ter filter out p
-0003e2c0: 7974 686f 6e20 6465 6661 756c 7420 656e  ython default en
-0003e2d0: 6769 6e65 0a20 2020 2020 2020 2020 2020  gine.           
-0003e2e0: 2023 206d 6179 6265 2075 6e6b 6e6f 776e   # maybe unknown
-0003e2f0: 2063 6861 7261 6374 6572 2069 6e20 7468   character in th
-0003e300: 6520 6461 7461 0a20 2020 2020 2020 2020  e data.         
-0003e310: 2020 2072 6574 7572 6e20 5472 7565 2c70     return True,p
-0003e320: 6963 6b6c 652e 6475 6d70 7328 6576 616c  ickle.dumps(eval
-0003e330: 2873 7472 2864 6174 6129 292c 7072 6f74  (str(data)),prot
-0003e340: 6f63 6f6c 3d70 726f 746f 636f 6c29 2023  ocol=protocol) #
-0003e350: 2063 6f6d 6d6f 6e20 322e 7820 2620 332e   common 2.x & 3.
-0003e360: 7820 7665 7273 696f 6e20 3a20 7072 6f74  x version : prot
-0003e370: 6f63 6f6c 3d32 0a20 2020 2020 2020 2065  ocol=2.        e
-0003e380: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
-0003e390: 2020 2072 6574 7572 6e20 4661 6c73 652c     return False,
-0003e3a0: 7379 732e 6578 635f 696e 666f 2829 5b30  sys.exc_info()[0
-0003e3b0: 5d0a 0a64 6566 2042 7974 6553 7472 696e  ]..def ByteStrin
-0003e3c0: 6732 4461 7461 2864 6174 6129 3a0a 2020  g2Data(data):.  
-0003e3d0: 2020 2320 4966 206e 6f74 2070 6963 6b6c    # If not pickl
-0003e3e0: 6520 6461 7461 2074 6865 6e20 7265 7475  e data then retu
-0003e3f0: 726e 206f 7269 6769 6e61 6c20 6461 7461  rn original data
-0003e400: 2c20 7468 6174 2069 7320 7265 616c 2064  , that is real d
-0003e410: 6174 610a 2020 2020 2320 6966 2070 6963  ata.    # if pic
-0003e420: 6b6c 6520 6461 7461 2074 6865 6e20 636f  kle data then co
-0003e430: 6e76 6572 7420 746f 2064 6174 610a 2020  nvert to data.  
-0003e440: 2020 7472 793a 0a20 2020 2020 2020 2072    try:.        r
-0003e450: 6574 7572 6e20 7069 636b 6c65 2e6c 6f61  eturn pickle.loa
-0003e460: 6473 2864 6174 6129 0a20 2020 2065 7863  ds(data).    exc
-0003e470: 6570 743a 0a20 2020 2020 2020 2072 6574  ept:.        ret
-0003e480: 7572 6e20 6461 7461 0a0a 6465 6620 7061  urn data..def pa
-0003e490: 636b 6574 5f65 6e63 2864 6174 612c 6b65  cket_enc(data,ke
-0003e4a0: 793d 276b 6727 2c65 6e63 3d46 616c 7365  y='kg',enc=False
-0003e4b0: 293a 0a20 2020 206e 6b65 793d 4279 7465  ):.    nkey=Byte
-0003e4c0: 7332 496e 7428 6b65 792c 656e 636f 6465  s2Int(key,encode
-0003e4d0: 3d27 7574 662d 3827 2c64 6566 6175 6c74  ='utf-8',default
-0003e4e0: 3d27 6f72 6727 290a 2020 2020 6f6b 2c70  ='org').    ok,p
-0003e4f0: 6461 7461 3d44 6174 6132 4279 7465 5374  data=Data2ByteSt
-0003e500: 7269 6e67 2864 6174 6129 0a20 2020 2069  ring(data).    i
-0003e510: 6620 6e6f 7420 6f6b 3a20 7265 7475 726e  f not ok: return
-0003e520: 2046 616c 7365 2c70 6461 7461 0a20 2020   False,pdata.   
-0003e530: 2064 6174 615f 7479 7065 3d42 7974 6573   data_type=Bytes
-0003e540: 2874 7970 6528 6461 7461 292e 5f5f 6e61  (type(data).__na
-0003e550: 6d65 5f5f 5b30 5d29 0a20 2020 2069 6620  me__[0]).    if 
-0003e560: 656e 6320 616e 6420 6b65 793a 0a20 2020  enc and key:.   
-0003e570: 2020 2020 2023 2065 6e63 6f64 6520 636f       # encode co
-0003e580: 6465 2068 6572 650a 2020 2020 2020 2020  de here.        
-0003e590: 2365 6e63 5f74 663d 4279 7465 7328 2774  #enc_tf=Bytes('t
-0003e5a0: 2729 2023 204e 6f77 206e 6f74 2063 6f64  ') # Now not cod
-0003e5b0: 6520 6865 7265 2e20 536f 2c20 6576 6572  e here. So, ever
-0003e5c0: 7974 6869 6e67 2074 6f20 2766 270a 2020  ything to 'f'.  
-0003e5d0: 2020 2020 2020 2370 6461 7461 3d65 6e63        #pdata=enc
-0003e5e0: 6f64 6528 6b65 792c 7064 6174 6129 0a20  ode(key,pdata). 
-0003e5f0: 2020 2020 2020 2065 6e63 5f74 663d 4279         enc_tf=By
-0003e600: 7465 7328 2766 2729 0a20 2020 2065 6c73  tes('f').    els
-0003e610: 653a 0a20 2020 2020 2020 2065 6e63 5f74  e:.        enc_t
-0003e620: 663d 4279 7465 7328 2766 2729 0a20 2020  f=Bytes('f').   
-0003e630: 206e 6461 7461 3d73 7472 7563 742e 7061   ndata=struct.pa
-0003e640: 636b 2827 3e49 7373 4927 2c6c 656e 2870  ck('>IssI',len(p
-0003e650: 6461 7461 292c 6461 7461 5f74 7970 652c  data),data_type,
-0003e660: 656e 635f 7466 2c6e 6b65 7929 2b70 6461  enc_tf,nkey)+pda
-0003e670: 7461 0a20 2020 2072 6574 7572 6e20 5472  ta.    return Tr
-0003e680: 7565 2c6e 6461 7461 0a20 2020 2020 2020  ue,ndata.       
-0003e690: 200a 6465 6620 7061 636b 6574 5f68 6561   .def packet_hea
-0003e6a0: 6428 736f 636b 2c6b 6579 3d27 6b67 272c  d(sock,key='kg',
-0003e6b0: 7265 7472 793d 302c 7265 7472 795f 7469  retry=0,retry_ti
-0003e6c0: 6d65 6f75 743d 352c 6b65 6570 5f72 6574  meout=5,keep_ret
-0003e6d0: 7279 3d46 616c 7365 2c74 696d 656f 7574  ry=False,timeout
-0003e6e0: 3d31 293a 0a20 2020 2023 4765 7420 4865  =1):.    #Get He
-0003e6f0: 6164 6572 0a20 2020 2023 6b65 6570 5f72  ader.    #keep_r
-0003e700: 6574 7279 203a 5472 7565 3a20 6966 2063  etry :True: if c
-0003e710: 6c61 7365 6420 736f 636b 6574 2062 7574  lased socket but
-0003e720: 2077 6169 740a 2020 2020 7068 3d54 494d   wait.    ph=TIM
-0003e730: 4528 290a 2020 2020 6966 2028 7265 7472  E().    if (retr
-0003e740: 7920 2a20 7265 7472 795f 7469 6d65 6f75  y * retry_timeou
-0003e750: 7429 203e 2074 696d 656f 7574 3a0a 2020  t) > timeout:.  
-0003e760: 2020 2020 2020 7469 6d65 6f75 743d 7265        timeout=re
-0003e770: 7472 7920 2a20 7265 7472 795f 7469 6d65  try * retry_time
-0003e780: 6f75 740a 2020 2020 656c 7365 3a0a 2020  out.    else:.  
-0003e790: 2020 2020 2020 6966 2072 6574 7279 5f74        if retry_t
-0003e7a0: 696d 656f 7574 203c 3d20 303a 2072 6574  imeout <= 0: ret
-0003e7b0: 7279 5f74 696d 656f 7574 3d35 0a20 2020  ry_timeout=5.   
-0003e7c0: 2020 2020 2072 6574 7279 3d28 7469 6d65       retry=(time
-0003e7d0: 6f75 742f 2f72 6574 7279 5f74 696d 656f  out//retry_timeo
-0003e7e0: 7574 292b 310a 2020 2020 7768 696c 6520  ut)+1.    while 
-0003e7f0: 5472 7565 3a0a 2020 2020 2020 2020 6966  True:.        if
-0003e800: 2043 6c6f 7365 6453 6f63 6b65 7428 736f   ClosedSocket(so
-0003e810: 636b 293a 0a20 2020 2020 2020 2020 2020  ck):.           
-0003e820: 2069 6620 7265 7472 7920 3c3d 2030 3a0a   if retry <= 0:.
-0003e830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003e840: 7265 7475 726e 2046 616c 7365 2c27 416c  return False,'Al
-0003e850: 7265 6164 7920 636c 6f73 6564 2074 6865  ready closed the
-0003e860: 2073 6f63 6b65 7427 0a20 2020 2020 2020   socket'.       
-0003e870: 2020 2020 2072 6574 7279 2d3d 310a 2020       retry-=1.  
-0003e880: 2020 2020 2020 2020 2020 7469 6d65 2e73            time.s
-0003e890: 6c65 6570 2872 6574 7279 5f74 696d 656f  leep(retry_timeo
-0003e8a0: 7574 290a 2020 2020 2020 2020 2020 2020  ut).            
-0003e8b0: 636f 6e74 696e 7565 0a20 2020 2020 2020  continue.       
-0003e8c0: 206f 6b2c 6865 6164 3d70 6163 6b65 745f   ok,head=packet_
-0003e8d0: 7265 6365 6976 655f 616c 6c28 736f 636b  receive_all(sock
-0003e8e0: 2c31 302c 7265 7472 793d 7265 7472 792c  ,10,retry=retry,
-0003e8f0: 7265 7472 795f 7469 6d65 6f75 743d 7265  retry_timeout=re
-0003e900: 7472 795f 7469 6d65 6f75 7429 0a20 2020  try_timeout).   
-0003e910: 2020 2020 2069 6620 6b72 6328 6f6b 2c63       if krc(ok,c
-0003e920: 686b 3d54 7275 6529 3a0a 2020 2020 2020  hk=True):.      
-0003e930: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
-0003e940: 2020 2020 2020 2020 2020 2073 745f 6865             st_he
-0003e950: 6164 3d73 7472 7563 742e 756e 7061 636b  ad=struct.unpack
-0003e960: 2827 3e49 7373 4927 2c42 7974 6573 2868  ('>IssI',Bytes(h
-0003e970: 6561 6429 290a 2020 2020 2020 2020 2020  ead)).          
-0003e980: 2020 2020 2020 6966 2073 745f 6865 6164        if st_head
-0003e990: 5b33 5d20 3d3d 2042 7974 6573 3249 6e74  [3] == Bytes2Int
-0003e9a0: 286b 6579 2c65 6e63 6f64 653d 2775 7466  (key,encode='utf
-0003e9b0: 2d38 272c 6465 6661 756c 743d 276f 7267  -8',default='org
-0003e9c0: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
-0003e9d0: 2020 2020 2020 2020 7265 7475 726e 2054          return T
-0003e9e0: 7275 652c 7374 5f68 6561 645b 305d 2c73  rue,st_head[0],s
-0003e9f0: 745f 6865 6164 5b31 5d2c 7374 5f68 6561  t_head[1],st_hea
-0003ea00: 645b 325d 0a20 2020 2020 2020 2020 2020  d[2].           
-0003ea10: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
-0003ea20: 2020 2020 2020 2020 2070 6173 730a 2020           pass.  
-0003ea30: 2020 2020 2020 6966 2070 682e 4f75 7428        if ph.Out(
-0003ea40: 7469 6d65 6f75 7429 3a20 6272 6561 6b0a  timeout): break.
-0003ea50: 2020 2020 2020 2020 7469 6d65 2e73 6c65          time.sle
-0003ea60: 6570 2831 290a 2020 2020 7265 7475 726e  ep(1).    return
-0003ea70: 2046 616c 7365 2c27 4661 696c 2066 6f72   False,'Fail for
-0003ea80: 2072 6561 6420 6865 6164 6572 287b 7d29   read header({})
-0003ea90: 272e 666f 726d 6174 2868 6561 6429 2c4e  '.format(head),N
-0003eaa0: 6f6e 652c 4e6f 6e65 0a0a 6465 6620 7061  one,None..def pa
-0003eab0: 636b 6574 5f64 6563 2864 6174 612c 656e  cket_dec(data,en
-0003eac0: 632c 6b65 793d 276b 6727 293a 0a20 2020  c,key='kg'):.   
-0003ead0: 2023 6f6b 2c73 697a 652c 6461 7461 5f74   #ok,size,data_t
-0003eae0: 7970 652c 656e 633d 7061 636b 6574 5f68  ype,enc=packet_h
-0003eaf0: 6561 6428 736f 636b 290a 2020 2020 236f  ead(sock).    #o
-0003eb00: 6b2c 6461 7461 3d70 6163 6b65 745f 7265  k,data=packet_re
-0003eb10: 6365 6976 655f 616c 6c28 736f 636b 2c73  ceive_all(sock,s
-0003eb20: 697a 652c 2e2e 2e2e 290a 2020 2020 2372  ize,....).    #r
-0003eb30: 6561 6c5f 6461 7461 3d70 6163 6b65 745f  eal_data=packet_
-0003eb40: 6465 6328 6461 7461 2c65 6e63 290a 2020  dec(data,enc).  
-0003eb50: 2020 6966 2065 6e63 203d 3d20 2774 273a    if enc == 't':
-0003eb60: 0a20 2020 2020 2020 2023 2064 6563 6f64  .        # decod
-0003eb70: 6520 636f 6465 2068 6572 650a 2020 2020  e code here.    
-0003eb80: 2020 2020 2320 6461 7461 3d64 6563 6f64      # data=decod
-0003eb90: 6528 6461 7461 290a 2020 2020 2020 2020  e(data).        
-0003eba0: 7061 7373 0a20 2020 2072 6574 7572 6e20  pass.    return 
-0003ebb0: 4279 7465 5374 7269 6e67 3244 6174 6128  ByteString2Data(
-0003ebc0: 6461 7461 290a 0a64 6566 2043 6c6f 7365  data)..def Close
-0003ebd0: 6453 6f63 6b65 7428 736f 636b 293a 0a20  dSocket(sock):. 
-0003ebe0: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-0003ebf0: 2320 7468 6973 2077 696c 6c20 7472 7920  # this will try 
-0003ec00: 746f 2072 6561 6420 6279 7465 7320 7769  to read bytes wi
-0003ec10: 7468 6f75 7420 626c 6f63 6b69 6e67 0a20  thout blocking. 
-0003ec20: 2020 2020 2020 2023 2061 6e64 2061 6c73         # and als
-0003ec30: 6f20 7769 7468 6f75 7420 7265 6d6f 7669  o without removi
-0003ec40: 6e67 2074 6865 6d20 6672 6f6d 2062 7566  ng them from buf
-0003ec50: 6665 7220 2870 6565 6b20 6f6e 6c79 290a  fer (peek only).
-0003ec60: 2020 2020 2020 2020 6461 7461 203d 2073          data = s
-0003ec70: 6f63 6b2e 7265 6376 2831 362c 2073 6f63  ock.recv(16, soc
-0003ec80: 6b65 742e 4d53 475f 444f 4e54 5741 4954  ket.MSG_DONTWAIT
-0003ec90: 207c 2073 6f63 6b65 742e 4d53 475f 5045   | socket.MSG_PE
-0003eca0: 454b 290a 2020 2020 2020 2020 6966 206c  EK).        if l
-0003ecb0: 656e 2864 6174 6129 203d 3d20 303a 0a20  en(data) == 0:. 
-0003ecc0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0003ecd0: 6e20 5472 7565 0a20 2020 2065 7863 6570  n True.    excep
-0003ece0: 7420 426c 6f63 6b69 6e67 494f 4572 726f  t BlockingIOErro
-0003ecf0: 723a 0a20 2020 2020 2020 2072 6574 7572  r:.        retur
-0003ed00: 6e20 4661 6c73 6520 2023 2073 6f63 6b65  n False  # socke
-0003ed10: 7420 6973 206f 7065 6e20 616e 6420 7265  t is open and re
-0003ed20: 6164 696e 6720 6672 6f6d 2069 7420 776f  ading from it wo
-0003ed30: 756c 6420 626c 6f63 6b0a 2020 2020 6578  uld block.    ex
-0003ed40: 6365 7074 2043 6f6e 6e65 6374 696f 6e52  cept ConnectionR
-0003ed50: 6573 6574 4572 726f 723a 0a20 2020 2020  esetError:.     
-0003ed60: 2020 2072 6574 7572 6e20 5472 7565 2020     return True  
-0003ed70: 2320 736f 636b 6574 2077 6173 2063 6c6f  # socket was clo
-0003ed80: 7365 6420 666f 7220 736f 6d65 206f 7468  sed for some oth
-0003ed90: 6572 2072 6561 736f 6e0a 2020 2020 6578  er reason.    ex
-0003eda0: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
-0003edb0: 7320 653a 2023 756e 6578 7065 6374 6564  s e: #unexpected
-0003edc0: 2065 7863 6570 7469 6f6e 2077 6865 6e20   exception when 
-0003edd0: 6368 6563 6b69 6e67 2069 6620 6120 736f  checking if a so
-0003ede0: 636b 6574 2069 7320 636c 6f73 6564 0a20  cket is closed. 
-0003edf0: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
-0003ee00: 6c73 650a 2020 2020 7265 7475 726e 2046  lse.    return F
-0003ee10: 616c 7365 0a0a 6465 6620 5265 6d6f 7665  alse..def Remove
-0003ee20: 4e65 776c 696e 6528 7372 632c 6d6f 6465  Newline(src,mode
-0003ee30: 3d27 6564 6765 272c 6e65 776c 696e 653d  ='edge',newline=
-0003ee40: 275c 6e27 2c62 7974 653d 4e6f 6e65 293a  '\n',byte=None):
-0003ee50: 0a20 2020 2069 6620 6973 696e 7374 616e  .    if isinstan
-0003ee60: 6365 2862 7974 652c 626f 6f6c 293a 0a20  ce(byte,bool):. 
-0003ee70: 2020 2020 2020 2069 6620 6279 7465 3a0a         if byte:.
-0003ee80: 2020 2020 2020 2020 2020 2020 7372 633d              src=
-0003ee90: 4279 7465 7328 7372 6329 0a20 2020 2020  Bytes(src).     
-0003eea0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0003eeb0: 2020 2020 2073 7263 3d53 7472 2873 7263       src=Str(src
-0003eec0: 290a 2020 2020 7372 635f 613d 5370 6c69  ).    src_a=Spli
-0003eed0: 7428 7372 632c 6e65 776c 696e 652c 6465  t(src,newline,de
-0003eee0: 6661 756c 743d 4661 6c73 652c 6c69 7374  fault=False,list
-0003eef0: 6f6e 6c79 3d46 616c 7365 290a 2020 2020  only=False).    
-0003ef00: 6966 2073 7263 5f61 2069 7320 4661 6c73  if src_a is Fals
-0003ef10: 653a 0a20 2020 2020 2020 2072 6574 7572  e:.        retur
-0003ef20: 6e20 7372 630a 2020 2020 6966 206d 6f64  n src.    if mod
-0003ef30: 6520 696e 205b 2765 6467 6527 2c27 626f  e in ['edge','bo
-0003ef40: 7468 275d 3a0a 2020 2020 2020 2020 6966  th']:.        if
-0003ef50: 206e 6f74 2073 7263 5f61 5b30 5d2e 7374   not src_a[0].st
-0003ef60: 7269 7028 2920 616e 6420 6e6f 7420 7372  rip() and not sr
-0003ef70: 635f 615b 2d31 5d2e 7374 7269 7028 293a  c_a[-1].strip():
-0003ef80: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0003ef90: 7572 6e20 4a6f 696e 2873 7263 5f61 5b31  urn Join(src_a[1
-0003efa0: 3a2d 315d 2c73 796d 626f 6c3d 6e65 776c  :-1],symbol=newl
-0003efb0: 696e 6529 0a20 2020 2020 2020 2065 6c69  ine).        eli
-0003efc0: 6620 6e6f 7420 7372 635f 615b 305d 2e73  f not src_a[0].s
-0003efd0: 7472 6970 2829 3a0a 2020 2020 2020 2020  trip():.        
-0003efe0: 2020 2020 7265 7475 726e 204a 6f69 6e28      return Join(
-0003eff0: 7372 635f 615b 313a 5d2c 7379 6d62 6f6c  src_a[1:],symbol
-0003f000: 3d6e 6577 6c69 6e65 290a 2020 2020 2020  =newline).      
-0003f010: 2020 656c 6966 206e 6f74 2073 7263 5f61    elif not src_a
-0003f020: 5b2d 315d 2e73 7472 6970 2829 3a0a 2020  [-1].strip():.  
-0003f030: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0003f040: 204a 6f69 6e28 7372 635f 615b 3a2d 315d   Join(src_a[:-1]
-0003f050: 2c73 796d 626f 6c3d 6e65 776c 696e 6529  ,symbol=newline)
-0003f060: 0a20 2020 2065 6c69 6620 6d6f 6465 2069  .    elif mode i
-0003f070: 6e20 5b27 6669 7273 7427 2c27 7374 6172  n ['first','star
-0003f080: 7427 2c30 5d3a 0a20 2020 2020 2020 2069  t',0]:.        i
-0003f090: 6620 6e6f 7420 7372 635f 615b 305d 2e73  f not src_a[0].s
-0003f0a0: 7472 6970 2829 3a0a 2020 2020 2020 2020  trip():.        
-0003f0b0: 2020 2020 7265 7475 726e 204a 6f69 6e28      return Join(
-0003f0c0: 7372 635f 615b 313a 5d2c 7379 6d62 6f6c  src_a[1:],symbol
-0003f0d0: 3d6e 6577 6c69 6e65 290a 2020 2020 656c  =newline).    el
-0003f0e0: 6966 206d 6f64 6520 696e 205b 2765 6e64  if mode in ['end
-0003f0f0: 272c 276c 6173 7427 2c2d 315d 3a0a 2020  ','last',-1]:.  
-0003f100: 2020 2020 2020 6966 206e 6f74 2073 7263        if not src
-0003f110: 5f61 5b2d 315d 2e73 7472 6970 2829 3a0a  _a[-1].strip():.
-0003f120: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0003f130: 726e 204a 6f69 6e28 7372 635f 615b 3a2d  rn Join(src_a[:-
-0003f140: 315d 2c73 796d 626f 6c3d 6e65 776c 696e  1],symbol=newlin
-0003f150: 6529 0a20 2020 2065 6c69 6620 6d6f 6465  e).    elif mode
-0003f160: 2069 6e20 5b27 2a27 2c27 616c 6c27 2c27   in ['*','all','
-0003f170: 6576 6572 7974 6869 6e67 275d 3a0a 2020  everything']:.  
-0003f180: 2020 2020 2020 7265 7475 726e 204a 6f69        return Joi
-0003f190: 6e28 7372 635f 612c 7379 6d62 6f6c 3d27  n(src_a,symbol='
-0003f1a0: 2729 0a20 2020 2072 6574 7572 6e20 7372  ').    return sr
-0003f1b0: 630a 0a64 6566 2063 6174 2866 696c 656e  c..def cat(filen
-0003f1c0: 616d 652c 2a2a 6f70 7473 293a 0a20 2020  ame,**opts):.   
-0003f1d0: 2062 7974 653d 6f70 7473 2e67 6574 2827   byte=opts.get('
-0003f1e0: 6279 7465 272c 4661 6c73 6529 0a20 2020  byte',False).   
-0003f1f0: 206e 6577 6c69 6e65 3d6f 7074 732e 6765   newline=opts.ge
-0003f200: 7428 276e 6577 6c69 6e65 272c 275c 6e27  t('newline','\n'
-0003f210: 290a 2020 2020 7265 6164 5f66 6972 7374  ).    read_first
-0003f220: 6c69 6e65 3d6f 7074 732e 6765 7428 2772  line=opts.get('r
-0003f230: 6561 645f 6669 7273 746c 696e 6527 2c6f  ead_firstline',o
-0003f240: 7074 732e 6765 7428 2768 6561 6427 2c6f  pts.get('head',o
-0003f250: 7074 732e 6765 7428 2768 6561 645f 6c69  pts.get('head_li
-0003f260: 6e65 272c 4661 6c73 6529 2929 0a20 2020  ne',False))).   
-0003f270: 2064 6566 6175 6c74 3d6f 7074 732e 6765   default=opts.ge
-0003f280: 7428 2764 6566 6175 6c74 272c 4661 6c73  t('default',Fals
-0003f290: 6529 0a20 2020 206e 6f5f 6564 6765 3d6f  e).    no_edge=o
-0003f2a0: 7074 732e 6765 7428 276e 6f5f 6564 6765  pts.get('no_edge
-0003f2b0: 272c 4661 6c73 6529 0a20 2020 206e 6f5f  ',False).    no_
-0003f2c0: 656e 645f 6e65 776c 696e 653d 6f70 7473  end_newline=opts
-0003f2d0: 2e67 6574 2827 6e6f 5f65 6e64 5f6e 6577  .get('no_end_new
-0003f2e0: 6c69 6e65 272c 4661 6c73 6529 0a20 2020  line',False).   
-0003f2f0: 2066 696c 655f 6f6e 6c79 3d6f 7074 732e   file_only=opts.
-0003f300: 6765 7428 2766 696c 655f 6f6e 6c79 272c  get('file_only',
-0003f310: 6f70 7473 2e67 6574 2827 6669 6c65 6f6e  opts.get('fileon
-0003f320: 6c79 272c 5472 7565 2929 0a20 2020 206e  ly',True)).    n
-0003f330: 6f5f 616c 6c5f 6e65 776c 696e 653d 6f70  o_all_newline=op
-0003f340: 7473 2e67 6574 2827 6e6f 5f61 6c6c 5f6e  ts.get('no_all_n
-0003f350: 6577 6c69 6e65 272c 4661 6c73 6529 0a20  ewline',False). 
-0003f360: 2020 206e 6f5f 6669 7273 745f 6e65 776c     no_first_newl
-0003f370: 696e 653d 6f70 7473 2e67 6574 2827 6e6f  ine=opts.get('no
-0003f380: 5f66 6972 7374 5f6e 6577 6c69 6e65 272c  _first_newline',
-0003f390: 4661 6c73 6529 0a20 2020 206c 6f67 3d6f  False).    log=o
-0003f3a0: 7074 732e 6765 7428 276c 6f67 2729 0a0a  pts.get('log')..
-0003f3b0: 2020 2020 6966 2049 734e 6f6e 6528 6669      if IsNone(fi
-0003f3c0: 6c65 6e61 6d65 293a 0a20 2020 2020 2020  lename):.       
-0003f3d0: 2070 7269 6e74 6628 2746 696c 656e 616d   printf('Filenam
-0003f3e0: 6520 6973 204e 6f6e 6527 2c6c 6f67 3d6c  e is None',log=l
-0003f3f0: 6f67 2c6d 6f64 653d 2764 2729 0a20 2020  og,mode='d').   
-0003f400: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
-0003f410: 756c 740a 2020 2020 6966 206f 732e 7061  ult.    if os.pa
-0003f420: 7468 2e69 7364 6972 2866 696c 656e 616d  th.isdir(filenam
-0003f430: 6529 3a0a 2020 2020 2020 2020 7072 696e  e):.        prin
-0003f440: 7466 2827 7b7d 2069 7320 6120 6469 7265  tf('{} is a dire
-0003f450: 6374 6f72 7927 2e66 6f72 6d61 7428 6669  ctory'.format(fi
-0003f460: 6c65 6e61 6d65 292c 6c6f 673d 6c6f 672c  lename),log=log,
-0003f470: 6d6f 6465 3d27 6427 290a 2020 2020 2020  mode='d').      
-0003f480: 2020 7265 7475 726e 2064 6566 6175 6c74    return default
-0003f490: 0a20 2020 2069 6620 6e6f 7420 6f73 2e70  .    if not os.p
-0003f4a0: 6174 682e 6578 6973 7473 2866 696c 656e  ath.exists(filen
-0003f4b0: 616d 6529 3a0a 2020 2020 2020 2020 7072  ame):.        pr
-0003f4c0: 696e 7466 2827 7b7d 206e 6f74 2066 6f75  intf('{} not fou
-0003f4d0: 6e64 272e 666f 726d 6174 2866 696c 656e  nd'.format(filen
-0003f4e0: 616d 6529 2c6c 6f67 3d6c 6f67 2c6d 6f64  ame),log=log,mod
-0003f4f0: 653d 2764 2729 0a20 2020 2020 2020 2072  e='d').        r
-0003f500: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
-0003f510: 2020 7472 793a 0a20 2020 2020 2020 2069    try:.        i
-0003f520: 6620 7265 6164 5f66 6972 7374 6c69 6e65  f read_firstline
-0003f530: 3a20 2023 2052 6561 646c 696e 650a 2020  :  # Readline.  
-0003f540: 2020 2020 2020 2020 2020 7769 7468 206f            with o
-0003f550: 7065 6e28 6669 6c65 6e61 6d65 2c27 7262  pen(filename,'rb
-0003f560: 2729 2061 7320 663a 0a20 2020 2020 2020  ') as f:.       
-0003f570: 2020 2020 2020 2020 2064 6174 613d 662e           data=f.
-0003f580: 7265 6164 6c69 6e65 2829 0a20 2020 2020  readline().     
-0003f590: 2020 2065 6c69 6620 6e6f 7420 6669 6c65     elif not file
-0003f5a0: 5f6f 6e6c 793a 2023 2052 6561 6420 7370  _only: # Read sp
-0003f5b0: 6563 6961 6c20 6669 6c65 0a20 2020 2020  ecial file.     
-0003f5c0: 2020 2020 2020 2064 6174 613d 6f73 2e6f         data=os.o
-0003f5d0: 7065 6e28 6669 6c65 6e61 6d65 2c6f 732e  pen(filename,os.
-0003f5e0: 4f5f 5244 4f4e 4c59 290a 2020 2020 2020  O_RDONLY).      
-0003f5f0: 2020 2020 2020 6f73 2e63 6c6f 7365 2864        os.close(d
-0003f600: 6174 6129 0a20 2020 2020 2020 2065 6c73  ata).        els
-0003f610: 653a 2023 2052 6561 6420 6e6f 726d 616c  e: # Read normal
-0003f620: 2066 696c 650a 2020 2020 2020 2020 2020   file.          
-0003f630: 2020 7769 7468 206f 7065 6e28 6669 6c65    with open(file
-0003f640: 6e61 6d65 2c27 7262 2729 2061 7320 663a  name,'rb') as f:
-0003f650: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003f660: 2064 6174 613d 662e 7265 6164 2829 0a20   data=f.read(). 
-0003f670: 2020 2020 2020 2069 6620 6e6f 7420 6279         if not by
-0003f680: 7465 3a0a 2020 2020 2020 2020 2020 2064  te:.           d
-0003f690: 6174 613d 5374 7228 6461 7461 290a 2020  ata=Str(data).  
-0003f6a0: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
-0003f6b0: 2020 7072 696e 7466 2873 7973 2e65 7863    printf(sys.exc
-0003f6c0: 5f69 6e66 6f28 295b 305d 2c6c 6f67 3d6c  _info()[0],log=l
-0003f6d0: 6f67 2c6d 6f64 653d 2764 2729 0a20 2020  og,mode='d').   
-0003f6e0: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
-0003f6f0: 756c 740a 2020 2020 7265 7475 726e 2052  ult.    return R
-0003f700: 656d 6f76 654e 6577 6c69 6e65 2864 6174  emoveNewline(dat
-0003f710: 612c 6d6f 6465 3d27 6564 6765 2720 6966  a,mode='edge' if
-0003f720: 206e 6f5f 6564 6765 2065 6c73 6520 2765   no_edge else 'e
-0003f730: 6e64 2720 6966 206e 6f5f 656e 645f 6e65  nd' if no_end_ne
-0003f740: 776c 696e 6520 656c 7365 2027 6669 7273  wline else 'firs
-0003f750: 7427 2069 6620 6e6f 5f66 6972 7374 5f6e  t' if no_first_n
-0003f760: 6577 6c69 6e65 2065 6c73 6520 2761 6c6c  ewline else 'all
-0003f770: 2720 6966 206e 6f5f 616c 6c5f 6e65 776c  ' if no_all_newl
-0003f780: 696e 6520 656c 7365 204e 6f6e 652c 6e65  ine else None,ne
-0003f790: 776c 696e 653d 6e65 776c 696e 652c 6279  wline=newline,by
-0003f7a0: 7465 3d62 7974 6529 0a0a 6465 6620 436f  te=byte)..def Co
-0003f7b0: 6d70 7265 7373 2864 6174 612c 6d6f 6465  mpress(data,mode
-0003f7c0: 3d27 677a 6970 2729 3a0a 2020 2020 7472  ='gzip'):.    tr
-0003f7d0: 793a 0a20 2020 2020 2020 2069 6620 6973  y:.        if is
-0003f7e0: 696e 7374 616e 6365 2864 6174 612c 7374  instance(data,st
-0003f7f0: 7229 2061 6e64 206f 732e 7061 7468 2e69  r) and os.path.i
-0003f800: 7366 696c 6528 6461 7461 293a 0a20 2020  sfile(data):.   
-0003f810: 2020 2020 2020 2020 2077 6974 6820 6f70           with op
-0003f820: 656e 2864 6174 612c 2772 6227 2920 6173  en(data,'rb') as
-0003f830: 2066 3a0a 2020 2020 2020 2020 2020 2020   f:.            
-0003f840: 2020 2020 6461 7461 3d66 2e72 6561 6428      data=f.read(
-0003f850: 290a 2020 2020 2020 2020 6966 206d 6f64  ).        if mod
-0003f860: 6520 3d3d 2027 6c7a 3427 3a0a 2020 2020  e == 'lz4':.    
-0003f870: 2020 2020 2020 2020 496d 706f 7274 2827          Import('
-0003f880: 6672 6f6d 206c 7a34 2069 6d70 6f72 7420  from lz4 import 
-0003f890: 6672 616d 6527 290a 2020 2020 2020 2020  frame').        
-0003f8a0: 2020 2020 7265 7475 726e 2066 7261 6d65      return frame
-0003f8b0: 2e63 6f6d 7072 6573 7328 6461 7461 290a  .compress(data).
-0003f8c0: 2020 2020 2020 2020 656c 6966 206d 6f64          elif mod
-0003f8d0: 6520 3d3d 2027 627a 3227 3a0a 2020 2020  e == 'bz2':.    
-0003f8e0: 2020 2020 2020 2020 7265 7475 726e 2062          return b
-0003f8f0: 7a32 2e63 6f6d 7072 6573 7328 6461 7461  z2.compress(data
-0003f900: 290a 2020 2020 2020 2020 656c 6966 206d  ).        elif m
-0003f910: 6f64 6520 3d3d 2027 677a 6970 273a 0a20  ode == 'gzip':. 
-0003f920: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0003f930: 6e20 677a 6970 2e63 6f6d 7072 6573 7328  n gzip.compress(
-0003f940: 6461 7461 2c63 6f6d 7072 6573 736c 6576  data,compresslev
-0003f950: 656c 3d39 2920 2364 6563 6f6d 7072 6573  el=9) #decompres
-0003f960: 7328 6461 7461 290a 2020 2020 2020 2020  s(data).        
-0003f970: 656c 7365 3a20 237a 6c69 620a 2020 2020  else: #zlib.    
-0003f980: 2020 2020 2020 2020 7265 7475 726e 207a          return z
-0003f990: 6c69 622e 636f 6d70 7265 7373 2864 6174  lib.compress(dat
-0003f9a0: 6129 2023 2064 6563 6f6d 7072 6573 7328  a) # decompress(
-0003f9b0: 6461 7461 290a 2020 2020 6578 6365 7074  data).    except
-0003f9c0: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-0003f9d0: 2046 616c 7365 0a0a 6465 6620 4465 636f   False..def Deco
-0003f9e0: 6d70 7265 7373 2864 6174 612c 6d6f 6465  mpress(data,mode
-0003f9f0: 3d27 677a 6970 2729 3a0a 2020 2020 7472  ='gzip'):.    tr
-0003fa00: 793a 0a20 2020 2020 2020 2069 6620 6973  y:.        if is
-0003fa10: 696e 7374 616e 6365 2864 6174 612c 7374  instance(data,st
-0003fa20: 7229 2061 6e64 206f 732e 7061 7468 2e69  r) and os.path.i
-0003fa30: 7366 696c 6528 6461 7461 293a 0a20 2020  sfile(data):.   
-0003fa40: 2020 2020 2020 2020 2077 6974 6820 6f70           with op
-0003fa50: 656e 2864 6174 612c 2772 6227 2920 6173  en(data,'rb') as
-0003fa60: 2066 3a0a 2020 2020 2020 2020 2020 2020   f:.            
-0003fa70: 2020 2020 6461 7461 3d66 2e72 6561 6428      data=f.read(
-0003fa80: 290a 2020 2020 2020 2020 6966 206d 6f64  ).        if mod
-0003fa90: 6520 3d3d 2027 6c7a 3427 3a0a 2020 2020  e == 'lz4':.    
-0003faa0: 2020 2020 2020 2020 496d 706f 7274 2827          Import('
-0003fab0: 6672 6f6d 206c 7a34 2069 6d70 6f72 7420  from lz4 import 
-0003fac0: 6672 616d 6527 290a 2020 2020 2020 2020  frame').        
-0003fad0: 2020 2020 7265 7475 726e 2066 7261 6d65      return frame
-0003fae0: 2e64 6563 6f6d 7072 6573 7328 6461 7461  .decompress(data
-0003faf0: 290a 2020 2020 2020 2020 656c 6966 206d  ).        elif m
-0003fb00: 6f64 6520 3d3d 2027 627a 3227 3a0a 2020  ode == 'bz2':.  
-0003fb10: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0003fb20: 2062 7a32 2e42 5a32 4465 636f 6d70 7265   bz2.BZ2Decompre
-0003fb30: 7373 6f72 2829 2e64 6563 6f6d 7072 6573  ssor().decompres
-0003fb40: 7328 6461 7461 290a 2020 2020 2020 2020  s(data).        
-0003fb50: 656c 6966 206d 6f64 6520 3d3d 2027 677a  elif mode == 'gz
-0003fb60: 6970 273a 0a20 2020 2020 2020 2020 2020  ip':.           
-0003fb70: 2072 6574 7572 6e20 677a 6970 2e64 6563   return gzip.dec
-0003fb80: 6f6d 7072 6573 7328 6461 7461 290a 2020  ompress(data).  
-0003fb90: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0003fba0: 2020 2020 2020 2020 7265 7475 726e 207a          return z
-0003fbb0: 6c69 622e 6465 636f 6d70 7265 7373 2864  lib.decompress(d
-0003fbc0: 6174 6129 0a20 2020 2065 7863 6570 743a  ata).    except:
-0003fbd0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0003fbe0: 4661 6c73 650a 0a64 6566 2073 697a 656f  False..def sizeo
-0003fbf0: 6628 6f62 6a29 3a0a 2020 2020 6d73 697a  f(obj):.    msiz
-0003fc00: 6520 3d20 300a 2020 2020 6964 7320 3d20  e = 0.    ids = 
-0003fc10: 7365 7428 290a 2020 2020 6f62 6a65 6374  set().    object
-0003fc20: 7320 3d20 5b6f 626a 5d0a 2020 2020 7768  s = [obj].    wh
-0003fc30: 696c 6520 6f62 6a65 6374 733a 0a20 2020  ile objects:.   
-0003fc40: 2020 2020 206e 6577 203d 205b 5d0a 2020       new = [].  
-0003fc50: 2020 2020 2020 666f 7220 6920 696e 206f        for i in o
-0003fc60: 626a 6563 7473 3a0a 2020 2020 2020 2020  bjects:.        
-0003fc70: 2020 2020 6966 2069 6428 6929 206e 6f74      if id(i) not
-0003fc80: 2069 6e20 6964 733a 0a20 2020 2020 2020   in ids:.       
-0003fc90: 2020 2020 2020 2020 2069 6473 2e61 6464           ids.add
-0003fca0: 2869 6428 6929 290a 2020 2020 2020 2020  (id(i)).        
-0003fcb0: 2020 2020 2020 2020 6d73 697a 6520 2b3d          msize +=
-0003fcc0: 2073 7973 2e67 6574 7369 7a65 6f66 2869   sys.getsizeof(i
-0003fcd0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0003fce0: 2020 6e65 772e 6170 7065 6e64 2869 290a    new.append(i).
-0003fcf0: 2020 2020 2020 2020 6f62 6a65 6374 7320          objects 
-0003fd00: 3d20 6763 2e67 6574 5f72 6566 6572 656e  = gc.get_referen
-0003fd10: 7473 282a 6e65 7729 0a20 2020 2072 6574  ts(*new).    ret
-0003fd20: 7572 6e20 6d73 697a 650a 0a64 6566 2068  urn msize..def h
-0003fd30: 756d 616e 5f62 7974 6528 6e75 6d2c 2075  uman_byte(num, u
-0003fd40: 6e69 743d 224b 222c 2077 756e 6974 3d4e  nit="K", wunit=N
-0003fd50: 6f6e 652c 696e 745f 6f75 743d 4661 6c73  one,int_out=Fals
-0003fd60: 6529 3a0a 2020 2020 756e 6974 7320 3d20  e):.    units = 
-0003fd70: 5b22 4222 2c22 4b22 2c22 4d22 2c22 4722  ["B","K","M","G"
-0003fd80: 2c22 5422 2c22 5022 5d0a 2020 2020 6966  ,"T","P"].    if
-0003fd90: 2077 756e 6974 2069 7320 4e6f 6e65 3a0a   wunit is None:.
-0003fda0: 2020 2020 2020 2020 756e 6974 3d75 6e69          unit=uni
-0003fdb0: 742e 7570 7065 7228 290a 2020 2020 2020  t.upper().      
-0003fdc0: 2020 6966 206e 756d 203e 3d20 3130 3030    if num >= 1000
-0003fdd0: 3a0a 2020 2020 2020 2020 2020 2020 7768  :.            wh
-0003fde0: 696c 6520 6e75 6d20 3e3d 2031 3030 303a  ile num >= 1000:
-0003fdf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0003fe00: 7375 693d 756e 6974 732e 696e 6465 7828  sui=units.index(
-0003fe10: 756e 6974 290a 2020 2020 2020 2020 2020  unit).          
-0003fe20: 2020 2020 2069 6620 6c65 6e28 756e 6974       if len(unit
-0003fe30: 7329 203c 3d20 7375 692b 313a 0a20 2020  s) <= sui+1:.   
-0003fe40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0003fe50: 6272 6561 6b0a 2020 2020 2020 2020 2020  break.          
-0003fe60: 2020 2020 206e 756d 202f 3d20 3130 3234       num /= 1024
-0003fe70: 2e30 0a20 2020 2020 2020 2020 2020 2020  .0.             
-0003fe80: 2020 756e 6974 203d 2075 6e69 7473 5b73    unit = units[s
-0003fe90: 7569 2b31 5d0a 2020 2020 2020 2020 656c  ui+1].        el
-0003fea0: 6966 206e 756d 203c 2031 3a0a 2020 2020  if num < 1:.    
-0003feb0: 2020 2020 2020 2020 7768 696c 6520 6e75          while nu
-0003fec0: 6d20 3c20 313a 2023 302e 5858 5820 6469  m < 1: #0.XXX di
-0003fed0: 6769 7473 0a20 2020 2020 2020 2020 2020  gits.           
-0003fee0: 2020 2020 7375 693d 756e 6974 732e 696e      sui=units.in
-0003fef0: 6465 7828 756e 6974 290a 2020 2020 2020  dex(unit).      
-0003ff00: 2020 2020 2020 2020 2069 6620 7375 692d           if sui-
-0003ff10: 3120 3c20 303a 0a20 2020 2020 2020 2020  1 < 0:.         
-0003ff20: 2020 2020 2020 2020 2020 6272 6561 6b0a            break.
-0003ff30: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-0003ff40: 756d 202a 3d20 3130 3234 2e30 0a20 2020  um *= 1024.0.   
-0003ff50: 2020 2020 2020 2020 2020 2020 756e 6974              unit
-0003ff60: 203d 2075 6e69 7473 5b73 7569 2d31 5d0a   = units[sui-1].
-0003ff70: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0003ff80: 2020 7775 6e69 743d 7775 6e69 742e 7570    wunit=wunit.up
-0003ff90: 7065 7228 290a 2020 2020 2020 2020 6575  per().        eu
-0003ffa0: 693d 756e 6974 732e 696e 6465 7828 7775  i=units.index(wu
-0003ffb0: 6e69 7429 0a20 2020 2020 2020 2069 6620  nit).        if 
-0003ffc0: 7375 6920 3c20 6575 693a 0a20 2020 2020  sui < eui:.     
-0003ffd0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-0003ffe0: 7261 6e67 6528 7375 692c 6575 6929 3a0a  range(sui,eui):.
-0003fff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040000: 6e75 6d20 2f3d 2031 3032 342e 300a 2020  num /= 1024.0.  
-00040010: 2020 2020 2020 656c 6966 2073 7569 203e        elif sui >
-00040020: 2065 7569 3a0a 2020 2020 2020 2020 2020   eui:.          
-00040030: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
-00040040: 2873 7569 2c65 7569 2c2d 3129 3a0a 2020  (sui,eui,-1):.  
-00040050: 2020 2020 2020 2020 2020 2020 2020 6e75                nu
-00040060: 6d20 2a3d 2031 3032 342e 300a 2020 2020  m *= 1024.0.    
-00040070: 2020 2020 756e 6974 3d77 756e 6974 0a20      unit=wunit. 
-00040080: 2020 2069 6620 696e 745f 6f75 743a 0a20     if int_out:. 
-00040090: 2020 2020 2020 2072 6574 7572 6e20 666c         return fl
-000400a0: 6f61 7428 2225 2e31 6622 2528 6e75 6d29  oat("%.1f"%(num)
-000400b0: 290a 2020 2020 656c 7365 3a0a 2020 2020  ).    else:.    
-000400c0: 2020 2020 6966 2075 6e69 7420 3d3d 2022      if unit == "
-000400d0: 4222 3a0a 2020 2020 2020 2020 2020 2020  B":.            
-000400e0: 7265 7475 726e 2022 252e 3166 2025 7322  return "%.1f %s"
-000400f0: 2025 2028 6e75 6d2c 756e 6974 290a 2020   % (num,unit).  
-00040100: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00040110: 2020 2020 2020 2020 7265 7475 726e 2022          return "
-00040120: 252e 3166 2025 7342 2220 2520 286e 756d  %.1f %sB" % (num
-00040130: 2c75 6e69 7429 0a0a 6465 6620 4875 6d61  ,unit)..def Huma
-00040140: 6e5f 556e 6974 286e 756d 2c75 6e69 743d  n_Unit(num,unit=
-00040150: 2753 272c 7761 6e74 5f75 6e69 743d 4e6f  'S',want_unit=No
-00040160: 6e65 2c69 6e74 5f6f 7574 3d46 616c 7365  ne,int_out=False
-00040170: 293a 0a20 2020 2064 6566 2063 6f6e 7665  ):.    def conve
-00040180: 7274 5f73 6563 5f74 6f5f 666f 726d 6174  rt_sec_to_format
-00040190: 286e 756d 2c77 616e 745f 666f 726d 6174  (num,want_format
-000401a0: 3d22 2559 2025 6d20 2564 2025 483a 254d  ="%Y %m %d %H:%M
-000401b0: 3a25 5322 293a 0a20 2020 2020 2020 2072  :%S"):.        r
-000401c0: 6574 7572 6e20 6461 7465 7469 6d65 2e64  eturn datetime.d
-000401d0: 6174 6574 696d 652e 6672 6f6d 7469 6d65  atetime.fromtime
-000401e0: 7374 616d 7028 6e75 6d29 2e73 7472 6674  stamp(num).strft
-000401f0: 696d 6528 7761 6e74 5f66 6f72 6d61 7429  ime(want_format)
-00040200: 0a20 2020 2064 6566 2063 6f6e 7665 7274  .    def convert
-00040210: 5f69 6e74 5f74 696d 655f 746f 5f79 686d  _int_time_to_yhm
-00040220: 7328 6e75 6d2c 756e 6974 3d27 5327 2c77  s(num,unit='S',w
-00040230: 616e 743d 4e6f 6e65 293a 0a20 2020 2020  ant=None):.     
-00040240: 2020 2063 3d5b 3331 3533 3630 3030 2c38     c=[31536000,8
-00040250: 3634 3030 2c33 3630 302c 3630 2c31 5d20  6400,3600,60,1] 
-00040260: 2320 7979 2c64 642c 6868 2c6d 6d2c 7373  # yy,dd,hh,mm,ss
-00040270: 0a20 2020 2020 2020 2063 753d 5b27 5927  .        cu=['Y'
-00040280: 2c27 4427 2c27 4827 2c27 4d27 2c27 5327  ,'D','H','M','S'
-00040290: 5d20 2020 2020 2320 7979 2c64 642c 6868  ]     # yy,dd,hh
-000402a0: 2c6d 6d2c 7373 0a20 2020 2020 2020 2069  ,mm,ss.        i
-000402b0: 6620 6973 696e 7374 616e 6365 2877 616e  f isinstance(wan
-000402c0: 742c 7374 7229 2061 6e64 2077 616e 7420  t,str) and want 
-000402d0: 616e 6420 7761 6e74 2069 6e20 6375 3a0a  and want in cu:.
-000402e0: 2020 2020 2020 2020 2020 2020 7374 6172              star
-000402f0: 745f 693d 6375 2e69 6e64 6578 2877 616e  t_i=cu.index(wan
-00040300: 7429 0a20 2020 2020 2020 2065 6c73 653a  t).        else:
-00040310: 0a20 2020 2020 2020 2020 2020 2073 7461  .            sta
-00040320: 7274 5f69 3d30 0a20 2020 2020 2020 2069  rt_i=0.        i
-00040330: 6620 6973 696e 7374 616e 6365 2875 6e69  f isinstance(uni
-00040340: 742c 7374 7229 2061 6e64 2075 6e69 7420  t,str) and unit 
-00040350: 616e 6420 756e 6974 2069 6e20 6375 3a0a  and unit in cu:.
-00040360: 2020 2020 2020 2020 2020 2020 6d78 3d63              mx=c
-00040370: 752e 696e 6465 7828 756e 6974 290a 2020  u.index(unit).  
-00040380: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00040390: 2020 2020 2020 2020 6d78 3d6c 656e 2863          mx=len(c
-000403a0: 292d 310a 2020 2020 2020 2020 6966 206d  )-1.        if m
-000403b0: 7820 3d3d 206c 656e 2863 292d 313a 2023  x == len(c)-1: #
-000403c0: 2073 6563 202d 3e20 7761 6e74 0a20 2020   sec -> want.   
-000403d0: 2020 2020 2020 2020 206f 3d7b 7d0a 2020           o={}.  
-000403e0: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
-000403f0: 696e 2072 616e 6765 2873 7461 7274 5f69  in range(start_i
-00040400: 2c6d 782b 3129 3a0a 2020 2020 2020 2020  ,mx+1):.        
-00040410: 2020 2020 2020 2020 6966 2028 6d78 203d          if (mx =
-00040420: 3d20 6920 616e 6420 6e75 6d20 3e3d 2063  = i and num >= c
-00040430: 5b69 5d29 206f 7220 6e75 6d20 3e20 635b  [i]) or num > c[
-00040440: 695d 3a0a 2020 2020 2020 2020 2020 2020  i]:.            
-00040450: 2020 2020 2020 2020 6f5b 6375 5b69 5d5d          o[cu[i]]
-00040460: 3d6e 756d 2f2f 635b 695d 0a20 2020 2020  =num//c[i].     
-00040470: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-00040480: 756d 3d6e 756d 2528 635b 695d 2a6f 5b63  um=num%(c[i]*o[c
-00040490: 755b 695d 5d29 0a20 2020 2020 2020 2020  u[i]]).         
-000404a0: 2020 2072 6574 7572 6e20 6f0a 2020 2020     return o.    
-000404b0: 2020 2020 656c 7365 3a20 2023 2075 6e69      else:  # uni
-000404c0: 7420 2d3e 2073 6563 2061 6e64 2063 616c  t -> sec and cal
-000404d0: 6375 6c61 7465 2073 6563 2074 6f20 7761  culate sec to wa
-000404e0: 6e74 0a20 2020 2020 2020 2020 2020 206e  nt.            n
-000404f0: 756d 203d 206e 756d 202a 2063 5b6d 785d  um = num * c[mx]
-00040500: 2023 2063 6f6e 7665 7274 2074 6f20 756e   # convert to un
-00040510: 6974 2074 6f20 7365 636f 6e64 730a 2020  it to seconds.  
-00040520: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00040530: 2063 6f6e 7665 7274 5f69 6e74 5f74 696d   convert_int_tim
-00040540: 655f 746f 5f79 686d 7328 6e75 6d2c 756e  e_to_yhms(num,un
-00040550: 6974 3d27 5327 2c77 616e 743d 7761 6e74  it='S',want=want
-00040560: 290a 2020 2020 6966 2069 7369 6e73 7461  ).    if isinsta
-00040570: 6e63 6528 756e 6974 2c73 7472 2920 616e  nce(unit,str) an
-00040580: 6420 756e 6974 2061 6e64 2028 7761 6e74  d unit and (want
-00040590: 5f75 6e69 7420 6973 204e 6f6e 6520 6f72  _unit is None or
-000405a0: 2069 7369 6e73 7461 6e63 6528 7761 6e74   isinstance(want
-000405b0: 5f75 6e69 742c 7374 7229 293a 0a20 2020  _unit,str)):.   
-000405c0: 2020 2020 2069 6620 756e 6974 2e75 7070       if unit.upp
-000405d0: 6572 2829 2069 6e20 5b27 4d4d 272c 274d  er() in ['MM','M
-000405e0: 494e 272c 2759 272c 2759 5927 2c27 5945  IN','Y','YY','YE
-000405f0: 4152 272c 2748 4827 2c27 4827 2c27 484f  AR','HH','H','HO
-00040600: 5552 272c 2753 272c 2753 4543 272c 2753  UR','S','SEC','S
-00040610: 5327 5d3a 0a20 2020 2020 2020 2020 2020  S']:.           
-00040620: 206d 6f64 653d 2774 696d 6527 0a20 2020   mode='time'.   
-00040630: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-00040640: 7374 616e 6365 2877 616e 745f 756e 6974  stance(want_unit
-00040650: 2c73 7472 293a 0a20 2020 2020 2020 2020  ,str):.         
-00040660: 2020 2020 2020 2075 705f 7761 6e74 5f75         up_want_u
-00040670: 6e69 743d 7761 6e74 5f75 6e69 742e 7570  nit=want_unit.up
-00040680: 7065 7228 290a 2020 2020 2020 2020 2020  per().          
-00040690: 2020 2020 2020 6966 2075 705f 7761 6e74        if up_want
-000406a0: 5f75 6e69 7420 696e 205b 2748 4f55 5227  _unit in ['HOUR'
-000406b0: 2c27 4848 272c 2748 4f55 5253 272c 2748  ,'HH','HOURS','H
-000406c0: 275d 3a20 7761 6e74 5f75 6e69 743d 2748  ']: want_unit='H
-000406d0: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
-000406e0: 2020 656c 6966 2075 705f 7761 6e74 5f75    elif up_want_u
-000406f0: 6e69 7420 696e 205b 274d 494e 272c 274d  nit in ['MIN','M
-00040700: 4d27 2c27 4d49 4e55 5445 272c 274d 494e  M','MINUTE','MIN
-00040710: 5554 4553 272c 274d 275d 3a20 7761 6e74  UTES','M']: want
-00040720: 5f75 6e69 743d 274d 270a 2020 2020 2020  _unit='M'.      
-00040730: 2020 2020 2020 2020 2020 656c 6966 2075            elif u
-00040740: 705f 7761 6e74 5f75 6e69 7420 696e 205b  p_want_unit in [
-00040750: 2744 4159 272c 2744 4427 2c27 4441 5953  'DAY','DD','DAYS
-00040760: 272c 2744 275d 3a20 7761 6e74 5f75 6e69  ','D']: want_uni
-00040770: 743d 2744 270a 2020 2020 2020 2020 2020  t='D'.          
-00040780: 2020 2020 2020 656c 6966 2075 705f 7761        elif up_wa
-00040790: 6e74 5f75 6e69 7420 696e 205b 2759 4541  nt_unit in ['YEA
-000407a0: 5227 2c27 5959 272c 2759 4541 5253 272c  R','YY','YEARS',
-000407b0: 2759 275d 3a20 7761 6e74 5f75 6e69 743d  'Y']: want_unit=
-000407c0: 2759 270a 2020 2020 2020 2020 2020 2020  'Y'.            
-000407d0: 2020 2020 656c 6966 2075 705f 7761 6e74      elif up_want
-000407e0: 5f75 6e69 7420 696e 205b 2753 4543 272c  _unit in ['SEC',
-000407f0: 2753 5327 2c27 5345 434f 4e44 272c 2753  'SS','SECOND','S
-00040800: 4543 4f4e 4453 272c 2753 275d 3a20 7761  ECONDS','S']: wa
-00040810: 6e74 5f75 6e69 743d 2753 270a 2020 2020  nt_unit='S'.    
-00040820: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00040830: 2020 2020 2020 6d6f 6465 3d27 6279 7465        mode='byte
-00040840: 270a 2020 2020 2020 2020 6e75 6d5f 756e  '.        num_un
-00040850: 6974 3d75 6e69 745b 305d 2e75 7070 6572  it=unit[0].upper
-00040860: 2829 0a20 2020 2020 2020 2023 5449 4d45  ().        #TIME
-00040870: 0a20 2020 2020 2020 2069 6620 6e75 6d5f  .        if num_
-00040880: 756e 6974 203d 3d20 2753 2720 616e 6420  unit == 'S' and 
-00040890: 2869 7369 6e73 7461 6e63 6528 7761 6e74  (isinstance(want
-000408a0: 5f75 6e69 742c 7374 7229 2061 6e64 2077  _unit,str) and w
-000408b0: 616e 745f 756e 6974 2061 6e64 2077 616e  ant_unit and wan
-000408c0: 745f 756e 6974 5b30 5d20 3d3d 2027 2527  t_unit[0] == '%'
-000408d0: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
-000408e0: 6620 6c65 6e28 7761 6e74 5f75 6e69 7429  f len(want_unit)
-000408f0: 203d 3d20 313a 0a20 2020 2020 2020 2020   == 1:.         
-00040900: 2020 2020 2020 2072 6574 7572 6e20 636f         return co
-00040910: 6e76 6572 745f 7365 635f 746f 5f66 6f72  nvert_sec_to_for
-00040920: 6d61 7428 6e75 6d2c 7761 6e74 5f66 6f72  mat(num,want_for
-00040930: 6d61 743d 2225 5920 256d 2025 6420 2548  mat="%Y %m %d %H
-00040940: 3a25 4d3a 2553 2229 0a20 2020 2020 2020  :%M:%S").       
-00040950: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00040960: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00040970: 6e20 636f 6e76 6572 745f 7365 635f 746f  n convert_sec_to
-00040980: 5f66 6f72 6d61 7428 6e75 6d2c 7761 6e74  _format(num,want
-00040990: 5f66 6f72 6d61 743d 7761 6e74 5f75 6e69  _format=want_uni
-000409a0: 7429 0a20 2020 2020 2020 2023 5449 4d45  t).        #TIME
-000409b0: 0a20 2020 2020 2020 2065 6c69 6620 286d  .        elif (m
-000409c0: 6f64 6520 3d3d 2027 7469 6d65 2720 616e  ode == 'time' an
-000409d0: 6420 7761 6e74 5f75 6e69 7420 696e 205b  d want_unit in [
-000409e0: 2759 272c 2744 272c 2748 272c 274d 272c  'Y','D','H','M',
-000409f0: 2753 272c 4e6f 6e65 5d29 206f 7220 286e  'S',None]) or (n
-00040a00: 756d 5f75 6e69 7420 696e 205b 2759 272c  um_unit in ['Y',
-00040a10: 2744 272c 2748 272c 274d 272c 2753 275d  'D','H','M','S']
-00040a20: 2061 6e64 2077 616e 745f 756e 6974 2069   and want_unit i
-00040a30: 6e20 5b27 5927 2c27 4427 2c27 4827 2c27  n ['Y','D','H','
-00040a40: 4d27 2c27 5327 5d29 3a0a 2020 2020 2020  M','S']):.      
-00040a50: 2020 2020 2020 6f6f 3d63 6f6e 7665 7274        oo=convert
-00040a60: 5f69 6e74 5f74 696d 655f 746f 5f79 686d  _int_time_to_yhm
-00040a70: 7328 6e75 6d2c 756e 6974 3d6e 756d 5f75  s(num,unit=num_u
-00040a80: 6e69 742c 7761 6e74 3d77 616e 745f 756e  nit,want=want_un
-00040a90: 6974 290a 2020 2020 2020 2020 2020 2020  it).            
-00040aa0: 6966 2069 6e74 5f6f 7574 3a0a 2020 2020  if int_out:.    
-00040ab0: 2020 2020 2020 2020 2020 2020 6966 2077              if w
-00040ac0: 616e 745f 756e 6974 3a23 2061 6e64 2077  ant_unit:# and w
-00040ad0: 616e 745f 756e 6974 2069 6e20 6f6f 3a0a  ant_unit in oo:.
-00040ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040af0: 2020 2020 7265 7475 726e 206f 6f2e 6765      return oo.ge
-00040b00: 7428 7761 6e74 5f75 6e69 742c 3029 0a20  t(want_unit,0). 
-00040b10: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00040b20: 6c73 653a 2023 2069 6620 7761 6e74 2075  lse: # if want u
-00040b30: 6e69 7420 6973 204e 6f6e 6520 7468 656e  nit is None then
-00040b40: 2072 6574 7572 6e20 6e75 6d0a 2020 2020   return num.    
-00040b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040b60: 7265 7475 726e 206e 756d 0a20 2020 2020  return num.     
-00040b70: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00040b80: 2020 2020 2020 2020 2020 2020 206f 3d27               o='
-00040b90: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
-00040ba0: 2020 666f 7220 6920 696e 205b 2759 272c    for i in ['Y',
-00040bb0: 2744 272c 2748 272c 274d 272c 2753 275d  'D','H','M','S']
-00040bc0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00040bd0: 2020 2020 2020 6966 2069 2069 6e20 6f6f        if i in oo
-00040be0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00040bf0: 2020 2020 2020 2020 2020 6966 206f 3a20            if o: 
-00040c00: 6f3d 6f2b 2720 7b7d 7b7d 272e 666f 726d  o=o+' {}{}'.form
-00040c10: 6174 286f 6f5b 695d 2c69 290a 2020 2020  at(oo[i],i).    
-00040c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00040c30: 2020 2020 656c 7365 3a20 6f3d 277b 7d7b      else: o='{}{
-00040c40: 7d27 2e66 6f72 6d61 7428 6f6f 5b69 5d2c  }'.format(oo[i],
-00040c50: 6929 0a20 2020 2020 2020 2020 2020 2020  i).             
-00040c60: 2020 2072 6574 7572 6e20 6f0a 2020 2020     return o.    
-00040c70: 2020 2020 2342 7974 650a 2020 2020 2020      #Byte.      
-00040c80: 2020 656c 6966 206e 756d 5f75 6e69 7420    elif num_unit 
-00040c90: 696e 205b 2242 222c 224b 222c 224d 222c  in ["B","K","M",
-00040ca0: 2247 222c 2254 222c 2250 225d 2061 6e64  "G","T","P"] and
-00040cb0: 2077 616e 745f 756e 6974 2069 6e20 5b22   want_unit in ["
-00040cc0: 4222 2c22 4b22 2c22 4d22 2c22 4722 2c22  B","K","M","G","
-00040cd0: 5422 2c22 5022 2c4e 6f6e 655d 3a0a 2020  T","P",None]:.  
-00040ce0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00040cf0: 2068 756d 616e 5f62 7974 6528 6e75 6d2c   human_byte(num,
-00040d00: 2075 6e69 743d 6e75 6d5f 756e 6974 2c20   unit=num_unit, 
-00040d10: 7775 6e69 743d 7761 6e74 5f75 6e69 742c  wunit=want_unit,
-00040d20: 2069 6e74 5f6f 7574 3d69 6e74 5f6f 7574   int_out=int_out
-00040d30: 290a 2020 2020 7265 7475 726e 2027 556e  ).    return 'Un
-00040d40: 6b6e 6f77 6e20 556e 6974 287b 7d20 2d3e  known Unit({} ->
-00040d50: 207b 7d29 272e 666f 726d 6174 2875 6e69   {})'.format(uni
-00040d60: 742c 7761 6e74 5f75 6e69 7429 0a0a 636c  t,want_unit)..cl
-00040d70: 6173 7320 4649 4c45 5f57 3a0a 2020 2020  ass FILE_W:.    
-00040d80: 2727 270a 2020 2020 4e65 7720 6465 7369  '''.    New desi
-00040d90: 676e 2074 6f20 7369 6d70 6c65 0a20 2020  gn to simple.   
-00040da0: 2073 7562 5f64 6972 2020 3a20 5472 7565   sub_dir  : True
-00040db0: 2028 4765 7420 6669 6c65 7320 696e 2072   (Get files in r
-00040dc0: 6563 7572 696e 6720 6469 7265 6374 6f72  ecuring director
-00040dd0: 7929 0a20 2020 2064 6174 6120 2020 2020  y).    data     
-00040de0: 3a20 5472 7565 2028 4765 7420 4669 6c65  : True (Get File
-00040df0: 2044 6174 6129 0a20 2020 206d 6435 7375   Data).    md5su
-00040e00: 6d20 2020 3a20 5472 7565 2028 4765 7420  m   : True (Get 
-00040e10: 4669 6c65 2773 204d 4435 2053 554d 290a  File's MD5 SUM).
-00040e20: 2020 2020 6c69 6e6b 3266 696c 653a 2054      link2file: T
-00040e30: 7275 6520 284d 616b 6520 6120 7265 616c  rue (Make a real
-00040e40: 2066 696c 6520 696e 7374 6561 6420 7379   file instead sy
-00040e50: 6d2d 6c69 6e6b 2066 696c 6529 0a20 2020  m-link file).   
-00040e60: 2066 696c 6520 666f 726d 6174 203a 2073   file format : s
-00040e70: 697a 6520 2831 3329 2b68 6561 6428 7b7d  ize (13)+head({}
-00040e80: 292b 6461 7461 285b 2c2c 2c2c 2c5d 290a  )+data([,,,,,]).
-00040e90: 2020 2020 6865 6164 3a20 7b69 6e66 6f7b      head: {info{
-00040ea0: 7d2c 6461 7461 5f69 643a 787d 0a20 2020  },data_id:x}.   
-00040eb0: 2027 2727 0a20 2020 2064 6566 205f 5f69   '''.    def __i
-00040ec0: 6e69 745f 5f28 7365 6c66 2c2a 696e 702c  nit__(self,*inp,
-00040ed0: 2a2a 6f70 7473 293a 0a20 2020 2020 2020  **opts):.       
-00040ee0: 2073 656c 662e 726f 6f74 5f70 6174 683d   self.root_path=
-00040ef0: 6f70 7473 2e67 6574 2827 726f 6f74 5f70  opts.get('root_p
-00040f00: 6174 6827 2c4e 6f6e 6529 0a20 2020 2020  ath',None).     
-00040f10: 2020 2069 6620 4973 4e6f 6e65 2873 656c     if IsNone(sel
-00040f20: 662e 726f 6f74 5f70 6174 6829 3a20 7365  f.root_path): se
-00040f30: 6c66 2e72 6f6f 745f 7061 7468 3d50 6174  lf.root_path=Pat
-00040f40: 6828 290a 2020 2020 2020 2020 7365 6c66  h().        self
-00040f50: 2e69 6e66 6f3d 6f70 7473 2e67 6574 2827  .info=opts.get('
-00040f60: 696e 666f 272c 6f70 7473 2e67 6574 2827  info',opts.get('
-00040f70: 6461 7461 272c 7b7d 2929 0a0a 2020 2020  data',{}))..    
-00040f80: 6465 6620 4c69 7374 2873 656c 662c 6e61  def List(self,na
-00040f90: 6d65 2c73 7562 5f64 6972 3d46 616c 7365  me,sub_dir=False
-00040fa0: 2c64 6972 6e61 6d65 3d46 616c 7365 2c64  ,dirname=False,d
-00040fb0: 6566 6175 6c74 3d5b 5d29 3a0a 2020 2020  efault=[]):.    
-00040fc0: 2020 2020 2367 6574 2064 6972 6563 746f      #get directo
-00040fd0: 7279 2061 6e64 2065 6163 6820 6469 7265  ry and each dire
-00040fe0: 6374 6f72 6965 7327 2066 696c 6520 6c69  ctories' file li
-00040ff0: 7374 0a20 2020 2020 2020 2069 6620 6973  st.        if is
-00041000: 696e 7374 616e 6365 286e 616d 652c 7374  instance(name,st
-00041010: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
-00041020: 6966 206e 616d 655b 305d 203d 3d20 272f  if name[0] == '/
-00041030: 273a 2020 2320 5374 6172 7420 6672 6f6d  ':  # Start from
-00041040: 2072 6f6f 7420 7061 7468 0a20 2020 2020   root path.     
-00041050: 2020 2020 2020 2020 2020 2069 6620 6f73             if os
-00041060: 2e70 6174 682e 6973 6669 6c65 286e 616d  .path.isfile(nam
-00041070: 6529 206f 7220 6f73 2e70 6174 682e 6973  e) or os.path.is
-00041080: 6c69 6e6b 286e 616d 6529 3a20 7265 7475  link(name): retu
-00041090: 726e 206f 732e 7061 7468 2e64 6972 6e61  rn os.path.dirna
-000410a0: 6d65 286e 616d 6529 2c5b 6f73 2e70 6174  me(name),[os.pat
-000410b0: 682e 6261 7365 6e61 6d65 286e 616d 6529  h.basename(name)
-000410c0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-000410d0: 2020 6966 206f 732e 7061 7468 2e69 7364    if os.path.isd
-000410e0: 6972 286e 616d 6529 3a0a 2020 2020 2020  ir(name):.      
-000410f0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00041100: 2073 7562 5f64 6972 3a0a 2020 2020 2020   sub_dir:.      
-00041110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041120: 2020 7274 203d 205b 5d0a 2020 2020 2020    rt = [].      
-00041130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041140: 2020 7077 643d 6f73 2e67 6574 6377 6428    pwd=os.getcwd(
-00041150: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00041160: 2020 2020 2020 2020 2020 6f73 2e63 6864            os.chd
-00041170: 6972 286e 616d 6529 0a20 2020 2020 2020  ir(name).       
-00041180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041190: 2066 6f72 2062 6173 652c 2064 6972 732c   for base, dirs,
-000411a0: 2066 696c 6573 2069 6e20 6f73 2e77 616c   files in os.wal
-000411b0: 6b28 272e 2729 3a0a 2020 2020 2020 2020  k('.'):.        
-000411c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000411d0: 2020 2020 6966 2064 6972 6e61 6d65 3a20      if dirname: 
-000411e0: 7274 2e65 7874 656e 6428 6f73 2e70 6174  rt.extend(os.pat
-000411f0: 682e 6a6f 696e 2862 6173 655b 323a 5d2c  h.join(base[2:],
-00041200: 2064 2920 666f 7220 6420 696e 2064 6972   d) for d in dir
-00041210: 7329 0a20 2020 2020 2020 2020 2020 2020  s).             
-00041220: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00041230: 742e 6578 7465 6e64 286f 732e 7061 7468  t.extend(os.path
-00041240: 2e6a 6f69 6e28 6261 7365 5b32 3a5d 2c20  .join(base[2:], 
-00041250: 6629 2066 6f72 2066 2069 6e20 6669 6c65  f) for f in file
-00041260: 7329 0a20 2020 2020 2020 2020 2020 2020  s).             
-00041270: 2020 2020 2020 2020 2020 206f 732e 6368             os.ch
-00041280: 6469 7228 7077 6429 0a20 2020 2020 2020  dir(pwd).       
-00041290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000412a0: 2072 6574 7572 6e20 5061 7468 286e 616d   return Path(nam
-000412b0: 6529 2c72 740a 2020 2020 2020 2020 2020  e),rt.          
-000412c0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-000412d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000412e0: 2020 2020 2020 2020 7265 7475 726e 2050          return P
-000412f0: 6174 6828 6e61 6d65 292c 5b66 2066 6f72  ath(name),[f for
-00041300: 2066 2069 6e20 6f73 2e6c 6973 7464 6972   f in os.listdir
-00041310: 286e 616d 6529 5d0a 2020 2020 2020 2020  (name)].        
-00041320: 2020 2020 656c 6966 2073 656c 662e 726f      elif self.ro
-00041330: 6f74 5f70 6174 683a 2023 2073 7461 7274  ot_path: # start
-00041340: 2066 726f 6d20 6465 6669 6e65 6420 726f   from defined ro
-00041350: 6f74 2070 6174 680a 2020 2020 2020 2020  ot path.        
-00041360: 2020 2020 2020 2020 6368 6b5f 7061 7468          chk_path
-00041370: 3d50 6174 6828 7365 6c66 2e72 6f6f 745f  =Path(self.root_
-00041380: 7061 7468 2c6e 616d 6529 0a20 2020 2020  path,name).     
-00041390: 2020 2020 2020 2020 2020 2069 6620 6f73             if os
-000413a0: 2e70 6174 682e 6973 6669 6c65 2863 686b  .path.isfile(chk
-000413b0: 5f70 6174 6829 206f 7220 6f73 2e70 6174  _path) or os.pat
-000413c0: 682e 6973 6c69 6e6b 2863 686b 5f70 6174  h.islink(chk_pat
-000413d0: 6829 3a20 7265 7475 726e 2050 6174 6828  h): return Path(
-000413e0: 7365 6c66 2e72 6f6f 745f 7061 7468 292c  self.root_path),
-000413f0: 5b6e 616d 655d 0a20 2020 2020 2020 2020  [name].         
-00041400: 2020 2020 2020 2069 6620 6f73 2e70 6174         if os.pat
-00041410: 682e 6973 6469 7228 6368 6b5f 7061 7468  h.isdir(chk_path
-00041420: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00041430: 2020 2020 2020 2069 6620 7375 625f 6469         if sub_di
-00041440: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
-00041450: 2020 2020 2020 2020 2020 2072 7420 3d20             rt = 
-00041460: 5b5d 0a20 2020 2020 2020 2020 2020 2020  [].             
-00041470: 2020 2020 2020 2020 2020 2070 7764 3d6f             pwd=o
-00041480: 732e 6765 7463 7764 2829 0a20 2020 2020  s.getcwd().     
-00041490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000414a0: 2020 206f 732e 6368 6469 7228 7365 6c66     os.chdir(self
-000414b0: 2e72 6f6f 745f 7061 7468 2920 2320 476f  .root_path) # Go
-000414c0: 696e 6720 746f 2064 6566 696e 6564 2072  ing to defined r
-000414d0: 6f6f 7420 7061 7468 0a20 2020 2020 2020  oot path.       
-000414e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000414f0: 2023 2047 6574 2072 6563 7572 696e 6720   # Get recuring 
-00041500: 6669 6c65 206c 6973 7420 6f66 2074 6865  file list of the
-00041510: 206e 616d 6520 2877 6865 6e20 6375 7272   name (when curr
-00041520: 656e 7420 6469 7220 7468 656e 2027 2e27  ent dir then '.'
-00041530: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00041540: 2020 2020 2020 2020 2020 666f 7220 6261            for ba
-00041550: 7365 2c20 6469 7273 2c20 6669 6c65 7320  se, dirs, files 
-00041560: 696e 206f 732e 7761 6c6b 286e 616d 6529  in os.walk(name)
-00041570: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00041580: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00041590: 2064 6972 6e61 6d65 3a20 7274 2e65 7874   dirname: rt.ext
-000415a0: 656e 6428 6f73 2e70 6174 682e 6a6f 696e  end(os.path.join
-000415b0: 2862 6173 655b 323a 5d2c 2064 2920 666f  (base[2:], d) fo
-000415c0: 7220 6420 696e 2064 6972 7329 0a20 2020  r d in dirs).   
-000415d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000415e0: 2020 2020 2020 2020 2072 742e 6578 7465           rt.exte
-000415f0: 6e64 286f 732e 7061 7468 2e6a 6f69 6e28  nd(os.path.join(
-00041600: 6261 7365 5b32 3a5d 2c20 6629 2066 6f72  base[2:], f) for
-00041610: 2066 2069 6e20 6669 6c65 7329 0a20 2020   f in files).   
-00041620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041630: 2020 2020 206f 732e 6368 6469 7228 7077       os.chdir(pw
-00041640: 6429 2023 2072 6563 6f76 6572 2074 6f20  d) # recover to 
-00041650: 7468 6520 6f72 6967 696e 616c 2070 6174  the original pat
-00041660: 680a 2020 2020 2020 2020 2020 2020 2020  h.              
-00041670: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00041680: 2050 6174 6828 7365 6c66 2e72 6f6f 745f   Path(self.root_
-00041690: 7061 7468 292c 7274 0a20 2020 2020 2020  path),rt.       
-000416a0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-000416b0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-000416c0: 2020 2020 2020 2020 2020 2069 6620 6e61             if na
-000416d0: 6d65 203d 3d20 272e 273a 206e 616d 653d  me == '.': name=
-000416e0: 2727 0a20 2020 2020 2020 2020 2020 2020  ''.             
-000416f0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00041700: 6e20 5061 7468 2873 656c 662e 726f 6f74  n Path(self.root
-00041710: 5f70 6174 6829 2c5b 6f73 2e70 6174 682e  _path),[os.path.
-00041720: 6a6f 696e 286e 616d 652c 6629 2066 6f72  join(name,f) for
-00041730: 2066 2069 6e20 6f73 2e6c 6973 7464 6972   f in os.listdir
-00041740: 2827 7b7d 2f7b 7d27 2e66 6f72 6d61 7428  ('{}/{}'.format(
-00041750: 7365 6c66 2e72 6f6f 745f 7061 7468 2c6e  self.root_path,n
-00041760: 616d 6529 295d 0a20 2020 2020 2020 2072  ame))].        r
-00041770: 6574 7572 6e20 6465 6661 756c 742c 5b5d  eturn default,[]
-00041780: 0a0a 2020 2020 6465 6620 4669 6c65 4e61  ..    def FileNa
-00041790: 6d65 2873 656c 662c 6669 6c65 6e61 6d65  me(self,filename
-000417a0: 293a 0a20 2020 2020 2020 2069 6620 6973  ):.        if is
-000417b0: 696e 7374 616e 6365 2866 696c 656e 616d  instance(filenam
-000417c0: 652c 7374 7229 3a0a 2020 2020 2020 2020  e,str):.        
-000417d0: 2020 2020 6669 6c65 6e61 6d65 5f69 6e66      filename_inf
-000417e0: 6f3d 6f73 2e70 6174 682e 6261 7365 6e61  o=os.path.basena
-000417f0: 6d65 2866 696c 656e 616d 6529 2e73 706c  me(filename).spl
-00041800: 6974 2827 2e27 290a 2020 2020 2020 2020  it('.').        
-00041810: 2020 2020 6966 2027 7461 7227 2069 6e20      if 'tar' in 
-00041820: 6669 6c65 6e61 6d65 5f69 6e66 6f3a 0a20  filename_info:. 
-00041830: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00041840: 6478 3d66 696c 656e 616d 655f 696e 666f  dx=filename_info
-00041850: 2e69 6e64 6578 2827 7461 7227 290a 2020  .index('tar').  
-00041860: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00041870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00041880: 6964 783d 2d31 0a20 2020 2020 2020 2020  idx=-1.         
-00041890: 2020 2072 6574 7572 6e20 4a6f 696e 2866     return Join(f
-000418a0: 696c 656e 616d 655f 696e 666f 5b3a 6964  ilename_info[:id
-000418b0: 785d 2c73 796d 626f 6c3d 272e 2729 2c4a  x],symbol='.'),J
-000418c0: 6f69 6e28 6669 6c65 6e61 6d65 5f69 6e66  oin(filename_inf
-000418d0: 6f5b 6964 783a 5d2c 7379 6d62 6f6c 3d27  o[idx:],symbol='
-000418e0: 2e27 290a 2020 2020 2020 2020 7265 7475  .').        retu
-000418f0: 726e 204e 6f6e 652c 4e6f 6e65 0a0a 2020  rn None,None..  
-00041900: 2020 6465 6620 4669 6c65 5479 7065 2873    def FileType(s
-00041910: 656c 662c 6669 6c65 6e61 6d65 2c64 6566  elf,filename,def
-00041920: 6175 6c74 3d46 616c 7365 293a 0a20 2020  ault=False):.   
-00041930: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
-00041940: 7374 616e 6365 2866 696c 656e 616d 652c  stance(filename,
-00041950: 7374 7229 206f 7220 6e6f 7420 6f73 2e70  str) or not os.p
-00041960: 6174 682e 6973 6669 6c65 2866 696c 656e  ath.isfile(filen
-00041970: 616d 6529 3a20 7265 7475 726e 2064 6566  ame): return def
-00041980: 6175 6c74 0a20 2020 2020 2020 2049 6d70  ault.        Imp
-00041990: 6f72 7428 2769 6d70 6f72 7420 6d61 6769  ort('import magi
-000419a0: 6327 290a 2020 2020 2020 2020 663d 6f70  c').        f=op
-000419b0: 656e 2866 696c 656e 616d 652c 2772 6227  en(filename,'rb'
-000419c0: 290a 2020 2020 2020 2020 6161 3d6d 6167  ).        aa=mag
-000419d0: 6963 2e66 726f 6d5f 6275 6666 6572 2866  ic.from_buffer(f
-000419e0: 2e72 6561 6428 3230 3438 2929 0a20 2020  .read(2048)).   
-000419f0: 2020 2020 2066 2e63 6c6f 7365 2829 0a20       f.close(). 
-00041a00: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00041a10: 616e 6365 2861 612c 7374 7229 3a20 7265  ance(aa,str): re
-00041a20: 7475 726e 2061 612e 7370 6c69 7428 295b  turn aa.split()[
-00041a30: 305d 2e6c 6f77 6572 2829 0a20 2020 2020  0].lower().     
-00041a40: 2020 2072 6574 7572 6e20 2775 6e6b 6e6f     return 'unkno
-00041a50: 776e 270a 0a20 2020 2064 6566 2046 696c  wn'..    def Fil
-00041a60: 6549 6e66 6f28 7365 6c66 2c66 696c 656e  eInfo(self,filen
-00041a70: 616d 652c 726f 6f74 733d 4e6f 6e65 2c5f  ame,roots=None,_
-00041a80: 7479 7065 3d4e 6f6e 652c 6578 6973 743d  type=None,exist=
-00041a90: 4e6f 6e65 293a 0a20 2020 2020 2020 2069  None):.        i
-00041aa0: 6620 7365 6c66 2e69 6e66 6f3a 2023 2066  f self.info: # f
-00041ab0: 726f 6d20 696e 7369 6465 2064 6174 610a  rom inside data.
-00041ac0: 2020 2020 2020 2020 2020 2020 6966 2049              if I
-00041ad0: 734e 6f6e 6528 726f 6f74 7329 3a20 726f  sNone(roots): ro
-00041ae0: 6f74 733d 7365 6c66 2e46 696e 6452 5028  ots=self.FindRP(
-00041af0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-00041b00: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
-00041b10: 6669 6c65 6e61 6d65 2c73 7472 2920 6f72  filename,str) or
-00041b20: 2049 734e 6f6e 6528 6669 6c65 6e61 6d65   IsNone(filename
-00041b30: 293a 2072 6574 7572 6e20 4661 6c73 650a  ): return False.
-00041b40: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00041b50: 726f 6f74 2069 6e20 726f 6f74 733a 0a20  root in roots:. 
-00041b60: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00041b70: 743d 7365 6c66 2e69 6e66 6f2e 6765 7428  t=self.info.get(
-00041b80: 726f 6f74 2c7b 7d29 0a20 2020 2020 2020  root,{}).       
-00041b90: 2020 2020 2020 2020 2066 6f72 2069 6920           for ii 
-00041ba0: 696e 2066 696c 656e 616d 652e 7370 6c69  in filename.spli
-00041bb0: 7428 272f 2729 3a0a 2020 2020 2020 2020  t('/'):.        
-00041bc0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00041bd0: 6920 6e6f 7420 696e 2072 743a 2072 6574  i not in rt: ret
-00041be0: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
-00041bf0: 2020 2020 2020 2020 2020 2020 2020 7274                rt
-00041c00: 3d72 745b 6969 5d0a 2020 2020 2020 2020  =rt[ii].        
-00041c10: 2020 2020 2020 2020 7265 7475 726e 2072          return r
-00041c20: 742e 6765 7428 2720 6920 272c 4661 6c73  t.get(' i ',Fals
-00041c30: 6529 0a0a 2020 2020 2020 2020 2320 6672  e)..        # fr
-00041c40: 6f6d 2072 6561 6c20 6669 6c65 0a20 2020  om real file.   
-00041c50: 2020 2020 2072 743d 7b7d 0a20 2020 2020       rt={}.     
-00041c60: 2020 2069 6620 6578 6973 7420 6973 2046     if exist is F
-00041c70: 616c 7365 3a20 7265 7475 726e 207b 2765  alse: return {'e
-00041c80: 7869 7374 273a 4661 6c73 657d 0a20 2020  xist':False}.   
-00041c90: 2020 2020 2072 745b 276e 616d 6527 5d2c       rt['name'],
-00041ca0: 7274 5b27 6578 7427 5d3d 7365 6c66 2e46  rt['ext']=self.F
-00041cb0: 696c 654e 616d 6528 6669 6c65 6e61 6d65  ileName(filename
-00041cc0: 290a 2020 2020 2020 2020 6966 206f 732e  ).        if os.
-00041cd0: 7061 7468 2e65 7869 7374 7328 6669 6c65  path.exists(file
-00041ce0: 6e61 6d65 293a 0a20 2020 2020 2020 2020  name):.         
-00041cf0: 2020 2073 7461 7465 3d6f 732e 7374 6174     state=os.stat
-00041d00: 2866 696c 656e 616d 6529 0a20 2020 2020  (filename).     
-00041d10: 2020 2020 2020 2072 745b 2765 7869 7374         rt['exist
-00041d20: 275d 3d54 7275 650a 2020 2020 2020 2020  ']=True.        
-00041d30: 2020 2020 7274 5b27 7369 7a65 275d 3d73      rt['size']=s
-00041d40: 7461 7465 2e73 745f 7369 7a65 0a20 2020  tate.st_size.   
-00041d50: 2020 2020 2020 2020 2072 745b 276d 6f64           rt['mod
-00041d60: 6527 5d3d 6f63 7428 7374 6174 652e 7374  e']=oct(state.st
-00041d70: 5f6d 6f64 6529 5b2d 343a 5d0a 2020 2020  _mode)[-4:].    
-00041d80: 2020 2020 2020 2020 7274 5b27 6174 696d          rt['atim
-00041d90: 6527 5d3d 7374 6174 652e 7374 5f61 7469  e']=state.st_ati
-00041da0: 6d65 0a20 2020 2020 2020 2020 2020 2072  me.            r
-00041db0: 745b 276d 7469 6d65 275d 3d73 7461 7465  t['mtime']=state
-00041dc0: 2e73 745f 6d74 696d 650a 2020 2020 2020  .st_mtime.      
-00041dd0: 2020 2020 2020 7274 5b27 6374 696d 6527        rt['ctime'
-00041de0: 5d3d 7374 6174 652e 7374 5f63 7469 6d65  ]=state.st_ctime
-00041df0: 0a20 2020 2020 2020 2020 2020 2072 745b  .            rt[
-00041e00: 2767 6964 275d 3d73 7461 7465 2e73 745f  'gid']=state.st_
-00041e10: 6769 640a 2020 2020 2020 2020 2020 2020  gid.            
-00041e20: 7274 5b27 7569 6427 5d3d 7374 6174 652e  rt['uid']=state.
-00041e30: 7374 5f75 6964 0a20 2020 2020 2020 2020  st_uid.         
-00041e40: 2020 2069 6620 4973 4e6f 6e65 285f 7479     if IsNone(_ty
-00041e50: 7065 293a 0a20 2020 2020 2020 2020 2020  pe):.           
-00041e60: 2020 2020 2072 745b 2774 7970 6527 5d3d       rt['type']=
-00041e70: 5f74 7970 650a 2020 2020 2020 2020 2020  _type.          
-00041e80: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00041e90: 2020 2020 2020 2020 6966 206f 732e 7061          if os.pa
-00041ea0: 7468 2e69 736c 696e 6b28 6669 6c65 6e61  th.islink(filena
-00041eb0: 6d65 293a 0a20 2020 2020 2020 2020 2020  me):.           
-00041ec0: 2020 2020 2020 2020 2072 745b 2774 7970           rt['typ
-00041ed0: 6527 5d3d 276c 696e 6b27 0a20 2020 2020  e']='link'.     
-00041ee0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00041ef0: 6f73 2e70 6174 682e 6973 6469 7228 6669  os.path.isdir(fi
-00041f00: 6c65 6e61 6d65 293a 0a20 2020 2020 2020  lename):.       
-00041f10: 2020 2020 2020 2020 2020 2020 2072 745b               rt[
-00041f20: 2774 7970 6527 5d3d 2764 6972 270a 2020  'type']='dir'.  
-00041f30: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00041f40: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00041f50: 2020 2020 2020 2020 7274 5b27 7479 7065          rt['type
-00041f60: 275d 3d73 656c 662e 4669 6c65 5479 7065  ']=self.FileType
-00041f70: 2866 696c 656e 616d 6529 0a20 2020 2020  (filename).     
-00041f80: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00041f90: 2020 2020 2072 745b 2765 7869 7374 275d       rt['exist']
-00041fa0: 3d46 616c 7365 0a20 2020 2020 2020 2072  =False.        r
-00041fb0: 6574 7572 6e20 7274 0a0a 2020 2020 6465  eturn rt..    de
-00041fc0: 6620 4364 5061 7468 2873 656c 662c 6261  f CdPath(self,ba
-00041fd0: 7365 2c70 6174 6829 3a0a 2020 2020 2020  se,path):.      
-00041fe0: 2020 7274 3d62 6173 650a 2020 2020 2020    rt=base.      
-00041ff0: 2020 666f 7220 6969 2069 6e20 7061 7468    for ii in path
-00042000: 2e73 706c 6974 2827 2f27 293a 0a20 2020  .split('/'):.   
-00042010: 2020 2020 2020 2020 2069 6620 6969 206e           if ii n
-00042020: 6f74 2069 6e20 7274 3a20 7265 7475 726e  ot in rt: return
-00042030: 2046 616c 7365 0a20 2020 2020 2020 2020   False.         
-00042040: 2020 2072 743d 7274 5b69 695d 0a20 2020     rt=rt[ii].   
-00042050: 2020 2020 2072 6574 7572 6e20 7274 0a0a       return rt..
-00042060: 2020 2020 6465 6620 4d6b 496e 666f 2873      def MkInfo(s
-00042070: 656c 662c 7274 2c66 696c 656e 616d 653d  elf,rt,filename=
-00042080: 4e6f 6e65 2c2a 2a6f 7074 7329 3a0a 2020  None,**opts):.  
-00042090: 2020 2020 2020 6966 2027 2069 2027 206e        if ' i ' n
-000420a0: 6f74 2069 6e20 7274 3a20 7274 5b27 2069  ot in rt: rt[' i
-000420b0: 2027 5d3d 7b7d 0a20 2020 2020 2020 2072   ']={}.        r
-000420c0: 745b 2720 6920 275d 3d73 656c 662e 4669  t[' i ']=self.Fi
-000420d0: 6c65 496e 666f 2866 696c 656e 616d 652c  leInfo(filename,
-000420e0: 5f74 7970 653d 6f70 7473 2e67 6574 2827  _type=opts.get('
-000420f0: 7479 7065 2729 2c65 7869 7374 3d6f 7074  type'),exist=opt
-00042100: 732e 6765 7428 2765 7869 7374 2729 290a  s.get('exist')).
-00042110: 2020 2020 2020 2020 6966 206f 7074 733a          if opts:
-00042120: 2072 745b 2720 6920 275d 2e75 7064 6174   rt[' i '].updat
-00042130: 6528 6f70 7473 290a 0a20 2020 2064 6566  e(opts)..    def
-00042140: 2047 6574 2873 656c 662c 2a66 696c 656e   Get(self,*filen
-00042150: 616d 6573 2c2a 2a6f 7074 7329 3a0a 2020  ames,**opts):.  
-00042160: 2020 2020 2020 6261 7365 3d7b 7d0a 2020        base={}.  
-00042170: 2020 2020 2020 6669 6c65 6c69 7374 3d7b        filelist={
-00042180: 7d0a 2020 2020 2020 2020 6465 6620 4d6b  }.        def Mk
-00042190: 5061 7468 2862 6173 652c 7061 7468 2c72  Path(base,path,r
-000421a0: 6f6f 745f 7061 7468 293a 0a20 2020 2020  oot_path):.     
-000421b0: 2020 2020 2020 2072 743d 6261 7365 0a20         rt=base. 
-000421c0: 2020 2020 2020 2020 2020 2063 686b 5f64             chk_d
-000421d0: 6972 3d27 7b7d 272e 666f 726d 6174 2872  ir='{}'.format(r
-000421e0: 6f6f 745f 7061 7468 290a 2020 2020 2020  oot_path).      
-000421f0: 2020 2020 2020 666f 7220 6969 2069 6e20        for ii in 
-00042200: 7061 7468 2e73 706c 6974 2827 2f27 293a  path.split('/'):
-00042210: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00042220: 2069 6620 6969 3a0a 2020 2020 2020 2020   if ii:.        
-00042230: 2020 2020 2020 2020 2020 2020 6368 6b5f              chk_
-00042240: 6469 723d 5061 7468 2863 686b 5f64 6972  dir=Path(chk_dir
-00042250: 2c69 6929 0a20 2020 2020 2020 2020 2020  ,ii).           
-00042260: 2020 2020 2020 2020 2069 6620 6969 206e           if ii n
-00042270: 6f74 2069 6e20 7274 3a0a 2020 2020 2020  ot in rt:.      
-00042280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042290: 2020 7274 5b69 695d 3d7b 7d0a 2020 2020    rt[ii]={}.    
-000422a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000422b0: 2020 2020 6966 206f 732e 7061 7468 2e69      if os.path.i
-000422c0: 7364 6972 2863 686b 5f64 6972 293a 2073  sdir(chk_dir): s
-000422d0: 656c 662e 4d6b 496e 666f 2872 745b 6969  elf.MkInfo(rt[ii
-000422e0: 5d2c 6368 6b5f 6469 722c 7479 7065 3d27  ],chk_dir,type='
-000422f0: 6469 7227 290a 2020 2020 2020 2020 2020  dir').          
-00042300: 2020 2020 2020 2020 2020 7274 3d72 745b            rt=rt[
-00042310: 6969 5d0a 2020 2020 2020 2020 2020 2020  ii].            
-00042320: 7265 7475 726e 2072 740a 0a20 2020 2020  return rt..     
-00042330: 2020 2064 6566 205f 4765 745f 2872 6f6f     def _Get_(roo
-00042340: 745f 7061 7468 2c2a 6669 6c65 6e61 6d65  t_path,*filename
-00042350: 732c 2a2a 6f70 7473 293a 0a20 2020 2020  s,**opts):.     
-00042360: 2020 2020 2020 2064 6174 613d 6f70 7473         data=opts
-00042370: 2e67 6574 2827 6461 7461 272c 4661 6c73  .get('data',Fals
-00042380: 6529 0a20 2020 2020 2020 2020 2020 206d  e).            m
-00042390: 6435 7375 6d3d 6f70 7473 2e67 6574 2827  d5sum=opts.get('
-000423a0: 6d64 3573 756d 272c 4661 6c73 6529 0a20  md5sum',False). 
-000423b0: 2020 2020 2020 2020 2020 206c 696e 6b32             link2
-000423c0: 6669 6c65 3d6f 7074 732e 6765 7428 276c  file=opts.get('l
-000423d0: 696e 6b32 6669 6c65 272c 4661 6c73 6529  ink2file',False)
-000423e0: 0a0a 2020 2020 2020 2020 2020 2020 666f  ..            fo
-000423f0: 7220 6669 6c65 6e61 6d65 2069 6e20 6669  r filename in fi
-00042400: 6c65 6e61 6d65 733a 0a20 2020 2020 2020  lenames:.       
-00042410: 2020 2020 2020 2020 2074 6669 6c65 6e61           tfilena
-00042420: 6d65 3d50 6174 6828 726f 6f74 5f70 6174  me=Path(root_pat
-00042430: 682c 6669 6c65 6e61 6d65 290a 2020 2020  h,filename).    
-00042440: 2020 2020 2020 2020 2020 2020 6966 206f              if o
-00042450: 732e 7061 7468 2e65 7869 7374 7328 7466  s.path.exists(tf
-00042460: 696c 656e 616d 6529 3a0a 2020 2020 2020  ilename):.      
-00042470: 2020 2020 2020 2020 2020 2020 2020 7274                rt
-00042480: 3d4d 6b50 6174 6828 6261 7365 2c66 696c  =MkPath(base,fil
-00042490: 656e 616d 652c 726f 6f74 5f70 6174 6829  ename,root_path)
-000424a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000424b0: 2020 2020 2069 6620 6f73 2e70 6174 682e       if os.path.
-000424c0: 6973 6c69 6e6b 2874 6669 6c65 6e61 6d65  islink(tfilename
-000424d0: 293a 2023 2069 7420 6973 2061 204c 696e  ): # it is a Lin
-000424e0: 6b20 4669 6c65 0a20 2020 2020 2020 2020  k File.         
-000424f0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00042500: 6620 6f73 2e70 6174 682e 6973 6669 6c65  f os.path.isfile
-00042510: 2866 696c 656e 616d 6529 3a20 2320 6974  (filename): # it
-00042520: 2069 7320 6120 4669 6c65 0a20 2020 2020   is a File.     
-00042530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042540: 2020 2020 2020 2069 6620 6c69 6e6b 3266         if link2f
-00042550: 696c 653a 0a20 2020 2020 2020 2020 2020  ile:.           
-00042560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042570: 2020 2020 205f 6d64 353d 4e6f 6e65 0a20       _md5=None. 
-00042580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042590: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000425a0: 6620 6461 7461 206f 7220 6d64 3573 756d  f data or md5sum
-000425b0: 3a20 2320 4d44 3553 554d 206f 7220 4461  : # MD5SUM or Da
-000425c0: 7461 0a20 2020 2020 2020 2020 2020 2020  ta.             
-000425d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000425e0: 2020 2020 2020 2066 696c 6564 6174 613d         filedata=
-000425f0: 7365 6c66 2e52 7728 7466 696c 656e 616d  self.Rw(tfilenam
-00042600: 652c 6f75 743d 2762 7974 6527 290a 2020  e,out='byte').  
-00042610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042630: 2020 6966 2066 696c 6564 6174 615b 305d    if filedata[0]
-00042640: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00042650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042660: 2020 2020 2020 2020 2020 6966 2064 6174            if dat
-00042670: 613a 2072 745b 2764 6174 6127 5d3d 6669  a: rt['data']=fi
-00042680: 6c65 6461 7461 5b31 5d0a 2020 2020 2020  ledata[1].      
-00042690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000426a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000426b0: 2020 6966 206d 6435 7375 6d3a 205f 6d64    if md5sum: _md
-000426c0: 353d 6d64 3528 6669 6c65 6461 7461 5b31  5=md5(filedata[1
-000426d0: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
+0003d6e0: 2020 2020 2069 6620 6c65 6e28 7329 203e       if len(s) >
+0003d6f0: 2061 743a 0a20 2020 2020 2020 2020 2020   at:.           
+0003d700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d710: 2020 2020 2073 3d4a 6f69 6e28 4a6f 696e       s=Join(Join
+0003d720: 2873 5b3a 6174 5d2c 277b 7d27 2e66 6f72  (s[:at],'{}'.for
+0003d730: 6d61 7428 7829 2c73 796d 626f 6c3d 7379  mat(x),symbol=sy
+0003d740: 6d62 6f6c 292c 735b 6174 3a5d 2c73 796d  mbol),s[at:],sym
+0003d750: 626f 6c3d 7379 6d62 6f6c 290a 2020 2020  bol=symbol).    
+0003d760: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+0003d770: 2069 7369 6e73 7461 6e63 6528 692c 2869   isinstance(i,(i
+0003d780: 6e74 2c73 7472 2c62 7974 6573 2929 3a0a  nt,str,bytes)):.
+0003d790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d7a0: 2020 2020 6966 2061 7420 3d3d 202d 313a      if at == -1:
+0003d7b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003d7c0: 2020 2020 2020 2020 2073 3d4a 6f69 6e28           s=Join(
+0003d7d0: 732c 277b 7d27 2e66 6f72 6d61 7428 5374  s,'{}'.format(St
+0003d7e0: 7228 6929 292c 7379 6d62 6f6c 3d73 796d  r(i)),symbol=sym
+0003d7f0: 626f 6c29 0a20 2020 2020 2020 2020 2020  bol).           
+0003d800: 2020 2020 2020 2020 2065 6c69 6620 6174           elif at
+0003d810: 203d 3d20 303a 0a20 2020 2020 2020 2020   == 0:.         
+0003d820: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0003d830: 3d4a 6f69 6e28 277b 7d27 2e66 6f72 6d61  =Join('{}'.forma
+0003d840: 7428 5374 7228 6929 292c 732c 7379 6d62  t(Str(i)),s,symb
+0003d850: 6f6c 3d73 796d 626f 6c29 0a20 2020 2020  ol=symbol).     
+0003d860: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0003d870: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0003d880: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0003d890: 6c65 6e28 7329 203e 2061 743a 0a20 2020  len(s) > at:.   
+0003d8a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003d8b0: 2020 2020 2020 2020 2073 3d4a 6f69 6e28           s=Join(
+0003d8c0: 4a6f 696e 2873 5b3a 6174 5d2c 277b 7d27  Join(s[:at],'{}'
+0003d8d0: 2e66 6f72 6d61 7428 5374 7228 6929 292c  .format(Str(i)),
+0003d8e0: 7379 6d62 6f6c 3d73 796d 626f 6c29 2c73  symbol=symbol),s
+0003d8f0: 5b61 743a 5d2c 7379 6d62 6f6c 3d73 796d  [at:],symbol=sym
+0003d900: 626f 6c29 0a20 2020 2020 2020 2020 2020  bol).           
+0003d910: 2065 6c69 6620 736e 203d 3d20 276c 6973   elif sn == 'lis
+0003d920: 7427 3a0a 2020 2020 2020 2020 2020 2020  t':.            
+0003d930: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+0003d940: 6528 692c 7374 7229 2061 6e64 2073 796d  e(i,str) and sym
+0003d950: 626f 6c3a 0a20 2020 2020 2020 2020 2020  bol:.           
+0003d960: 2020 2020 2020 2020 2069 3d69 2e73 706c           i=i.spl
+0003d970: 6974 2873 796d 626f 6c29 0a20 2020 2020  it(symbol).     
+0003d980: 2020 2020 2020 2020 2020 2069 6620 6174             if at
+0003d990: 203d 3d20 2d31 206f 7220 6174 203d 3d20   == -1 or at == 
+0003d9a0: 6c65 6e28 7329 2d31 3a0a 2020 2020 2020  len(s)-1:.      
+0003d9b0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0003d9c0: 2069 7369 6e73 7461 6e63 6528 692c 6c69   isinstance(i,li
+0003d9d0: 7374 293a 0a20 2020 2020 2020 2020 2020  st):.           
+0003d9e0: 2020 2020 2020 2020 2020 2020 2073 3d73               s=s
+0003d9f0: 2b69 0a20 2020 2020 2020 2020 2020 2020  +i.             
+0003da00: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0003da10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003da20: 2020 2020 2073 2e61 7070 656e 6428 6929       s.append(i)
+0003da30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003da40: 2065 6c69 6620 6174 203d 3d20 3020 6f72   elif at == 0 or
+0003da50: 206c 656e 2873 292b 6174 203d 3d20 303a   len(s)+at == 0:
+0003da60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003da70: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+0003da80: 6365 2869 2c6c 6973 7429 3a0a 2020 2020  ce(i,list):.    
+0003da90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003daa0: 2020 2020 733d 692b 730a 2020 2020 2020      s=i+s.      
+0003dab0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0003dac0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0003dad0: 2020 2020 2020 2020 2020 2020 733d 5b69              s=[i
+0003dae0: 5d2b 730a 2020 2020 2020 2020 2020 2020  ]+s.            
+0003daf0: 2020 2020 656c 6966 2061 7420 3e30 2061      elif at >0 a
+0003db00: 6e64 2061 7420 3c20 6c65 6e28 7329 3a0a  nd at < len(s):.
+0003db10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003db20: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+0003db30: 6528 692c 6c69 7374 293a 0a20 2020 2020  e(i,list):.     
+0003db40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003db50: 2020 2073 3d73 5b3a 6174 5d2b 692b 735b     s=s[:at]+i+s[
+0003db60: 6174 3a5d 0a20 2020 2020 2020 2020 2020  at:].           
+0003db70: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+0003db80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003db90: 2020 2020 2020 2073 3d73 5b3a 6174 5d2b         s=s[:at]+
+0003dba0: 5b69 5d2b 735b 6174 3a5d 0a20 2020 2020  [i]+s[at:].     
+0003dbb0: 2020 2072 6574 7572 6e20 730a 2020 2020     return s.    
+0003dbc0: 7265 7475 726e 2046 616c 7365 0a0a 6465  return False..de
+0003dbd0: 6620 7061 636b 6574 5f72 6563 6569 7665  f packet_receive
+0003dbe0: 5f61 6c6c 2873 6f63 6b2c 636f 756e 742c  _all(sock,count,
+0003dbf0: 7072 6f67 7265 7373 3d46 616c 7365 2c70  progress=False,p
+0003dc00: 726f 6772 6573 735f 6d73 673d 4e6f 6e65  rogress_msg=None
+0003dc10: 2c6c 6f67 3d4e 6f6e 652c 7265 7472 793d  ,log=None,retry=
+0003dc20: 302c 7265 7472 795f 7469 6d65 6f75 743d  0,retry_timeout=
+0003dc30: 352c 6572 725f 7363 723d 4661 6c73 6529  5,err_scr=False)
+0003dc40: 3a20 2320 5061 636b 6574 0a20 2020 2069  : # Packet.    i
+0003dc50: 6620 7479 7065 2873 6f63 6b29 2e5f 5f6e  f type(sock).__n
+0003dc60: 616d 655f 5f20 6e6f 7420 696e 205b 2773  ame__ not in ['s
+0003dc70: 6f63 6b65 7427 2c27 5f73 6f63 6b65 746f  ocket','_socketo
+0003dc80: 626a 6563 7427 2c27 5353 4c53 6f63 6b65  bject','SSLSocke
+0003dc90: 7427 5d3a 0a20 2020 2020 2020 2072 6574  t']:.        ret
+0003dca0: 7572 6e20 4661 6c73 652c 2749 7320 6e6f  urn False,'Is no
+0003dcb0: 7420 6e65 7477 6f72 6b20 736f 636b 6574  t network socket
+0003dcc0: 270a 2020 2020 6275 6620 3d20 6227 270a  '.    buf = b''.
+0003dcd0: 2020 2020 6669 6c65 5f73 697a 655f 643d      file_size_d=
+0003dce0: 696e 7428 277b 307d 272e 666f 726d 6174  int('{0}'.format
+0003dcf0: 2863 6f75 6e74 2929 0a20 2020 2074 6e3d  (count)).    tn=
+0003dd00: 300a 2020 2020 6e65 7762 7566 3d4e 6f6e  0.    newbuf=Non
+0003dd10: 650a 2020 2020 7768 696c 6520 636f 756e  e.    while coun
+0003dd20: 743a 0a20 2020 2020 2020 2069 6620 7072  t:.        if pr
+0003dd30: 6f67 7265 7373 3a0a 2020 2020 2020 2020  ogress:.        
+0003dd40: 2020 2020 6966 2070 726f 6772 6573 735f      if progress_
+0003dd50: 6d73 673a 0a20 2020 2020 2020 2020 2020  msg:.           
+0003dd60: 2020 2020 2070 7269 6e74 6628 275c 727b       printf('\r{
+0003dd70: 7d20 5b20 7b7d 2025 205d 272e 666f 726d  } [ {} % ]'.form
+0003dd80: 6174 2870 726f 6772 6573 735f 6d73 672c  at(progress_msg,
+0003dd90: 696e 7428 2866 696c 655f 7369 7a65 5f64  int((file_size_d
+0003dda0: 2d63 6f75 6e74 2920 2f20 6669 6c65 5f73  -count) / file_s
+0003ddb0: 697a 655f 6420 2a20 3130 3029 292c 6c6f  ize_d * 100)),lo
+0003ddc0: 673d 6c6f 672c 6469 7265 6374 3d54 7275  g=log,direct=Tru
+0003ddd0: 6529 0a20 2020 2020 2020 2020 2020 2065  e).            e
+0003dde0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0003ddf0: 2020 2020 2070 7269 6e74 6628 275c 7244       printf('\rD
+0003de00: 6f77 6e6c 6f61 6469 6e67 2e2e 2e20 5b20  ownloading... [ 
+0003de10: 7b7d 2025 205d 272e 666f 726d 6174 2869  {} % ]'.format(i
+0003de20: 6e74 2828 6669 6c65 5f73 697a 655f 642d  nt((file_size_d-
+0003de30: 636f 756e 7429 202f 2066 696c 655f 7369  count) / file_si
+0003de40: 7a65 5f64 202a 2031 3030 2929 2c6c 6f67  ze_d * 100)),log
+0003de50: 3d6c 6f67 2c64 6972 6563 743d 5472 7565  =log,direct=True
+0003de60: 290a 2020 2020 2020 2020 7472 793a 0a20  ).        try:. 
+0003de70: 2020 2020 2020 2020 2020 206e 6577 6275             newbu
+0003de80: 6620 3d20 736f 636b 2e72 6563 7628 636f  f = sock.recv(co
+0003de90: 756e 7429 0a20 2020 2020 2020 2020 2020  unt).           
+0003dea0: 2074 6e3d 3020 2320 7265 7365 7420 7472   tn=0 # reset tr
+0003deb0: 790a 2020 2020 2020 2020 6578 6365 7074  y.        except
+0003dec0: 2073 6f63 6b65 742e 6572 726f 7220 6173   socket.error as
+0003ded0: 2065 3a0a 2020 2020 2020 2020 2020 2020   e:.            
+0003dee0: 6966 2074 6e20 3c20 7265 7472 793a 0a20  if tn < retry:. 
+0003def0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0003df00: 7269 6e74 6628 225b 4552 524f 525d 2074  rintf("[ERROR] t
+0003df10: 696d 656f 7574 2076 616c 7565 3a7b 7d20  imeout value:{} 
+0003df20: 7265 7472 793a 207b 7d2f 7b7d 5c6e 7b7d  retry: {}/{}\n{}
+0003df30: 222e 666f 726d 6174 2873 6f63 6b2e 6765  ".format(sock.ge
+0003df40: 7474 696d 656f 7574 2829 2c74 6e2c 7265  ttimeout(),tn,re
+0003df50: 7472 792c 6529 2c6c 6f67 3d6c 6f67 2c64  try,e),log=log,d
+0003df60: 7370 3d27 6527 2069 6620 6572 725f 7363  sp='e' if err_sc
+0003df70: 7220 656c 7365 2027 6427 290a 2020 2020  r else 'd').    
+0003df80: 2020 2020 2020 2020 2020 2020 746e 2b3d              tn+=
+0003df90: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
+0003dfa0: 2020 5449 4d45 2829 2e53 6c65 6570 2831    TIME().Sleep(1
+0003dfb0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0003dfc0: 2020 736f 636b 2e73 6574 7469 6d65 6f75    sock.settimeou
+0003dfd0: 7428 7265 7472 795f 7469 6d65 6f75 7429  t(retry_timeout)
+0003dfe0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003dff0: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
+0003e000: 2020 2020 2020 7265 7475 726e 2027 6572        return 'er
+0003e010: 726f 7227 2c65 0a20 2020 2020 2020 2069  ror',e.        i
+0003e020: 6620 6e6f 7420 6e65 7762 7566 3a20 7265  f not newbuf: re
+0003e030: 7475 726e 2054 7275 652c 4e6f 6e65 2023  turn True,None #
+0003e040: 6d61 7962 6520 736f 6d65 7468 696e 6720  maybe something 
+0003e050: 736f 636b 6574 2069 7373 7565 2e0a 2020  socket issue..  
+0003e060: 2020 2020 2020 6275 6620 2b3d 206e 6577        buf += new
+0003e070: 6275 660a 2020 2020 2020 2020 636f 756e  buf.        coun
+0003e080: 7420 2d3d 206c 656e 286e 6577 6275 6629  t -= len(newbuf)
+0003e090: 0a20 2020 2069 6620 7072 6f67 7265 7373  .    if progress
+0003e0a0: 3a0a 2020 2020 2020 2020 6966 2070 726f  :.        if pro
+0003e0b0: 6772 6573 735f 6d73 673a 0a20 2020 2020  gress_msg:.     
+0003e0c0: 2020 2020 2020 2070 7269 6e74 6628 275c         printf('\
+0003e0d0: 727b 7d20 5b20 3130 3020 2520 5d5c 6e27  r{} [ 100 % ]\n'
+0003e0e0: 2e66 6f72 6d61 7428 7072 6f67 7265 7373  .format(progress
+0003e0f0: 5f6d 7367 292c 6c6f 673d 6c6f 672c 6469  _msg),log=log,di
+0003e100: 7265 6374 3d54 7275 6529 0a20 2020 2020  rect=True).     
+0003e110: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0003e120: 2020 2020 2070 7269 6e74 6628 275c 7244       printf('\rD
+0003e130: 6f77 6e6c 6f61 6469 6e67 2e2e 2e20 5b20  ownloading... [ 
+0003e140: 3130 3020 2520 5d5c 6e27 2c6c 6f67 3d6c  100 % ]\n',log=l
+0003e150: 6f67 2c64 6972 6563 743d 5472 7565 290a  og,direct=True).
+0003e160: 2020 2020 7265 7475 726e 2054 7275 652c      return True,
+0003e170: 6275 660a 0a64 6566 2044 6174 6132 4279  buf..def Data2By
+0003e180: 7465 5374 7269 6e67 2864 6174 612c 7072  teString(data,pr
+0003e190: 6f74 6f63 6f6c 3d32 293a 0a20 2020 2074  otocol=2):.    t
+0003e1a0: 7279 3a0a 2020 2020 2020 2020 7265 7475  ry:.        retu
+0003e1b0: 726e 2054 7275 652c 7069 636b 6c65 2e64  rn True,pickle.d
+0003e1c0: 756d 7073 2864 6174 612c 7072 6f74 6f63  umps(data,protoc
+0003e1d0: 6f6c 3d70 726f 746f 636f 6c29 2023 2063  ol=protocol) # c
+0003e1e0: 6f6d 6d6f 6e20 322e 7820 2620 332e 7820  ommon 2.x & 3.x 
+0003e1f0: 7665 7273 696f 6e20 3a20 7072 6f74 6f63  version : protoc
+0003e200: 6f6c 3d32 0a20 2020 2065 7863 6570 743a  ol=2.    except:
+0003e210: 0a20 2020 2020 2020 2074 7279 3a0a 2020  .        try:.  
+0003e220: 2020 2020 2020 2020 2020 2320 3c63 6c61            # <cla
+0003e230: 7373 2027 4b65 7945 7272 6f72 273e 2074  ss 'KeyError'> t
+0003e240: 6865 6e20 7472 7920 6167 6169 6e20 6166  hen try again af
+0003e250: 7465 7220 6669 6c74 6572 206f 7574 2070  ter filter out p
+0003e260: 7974 686f 6e20 6465 6661 756c 7420 656e  ython default en
+0003e270: 6769 6e65 0a20 2020 2020 2020 2020 2020  gine.           
+0003e280: 2023 206d 6179 6265 2075 6e6b 6e6f 776e   # maybe unknown
+0003e290: 2063 6861 7261 6374 6572 2069 6e20 7468   character in th
+0003e2a0: 6520 6461 7461 0a20 2020 2020 2020 2020  e data.         
+0003e2b0: 2020 2072 6574 7572 6e20 5472 7565 2c70     return True,p
+0003e2c0: 6963 6b6c 652e 6475 6d70 7328 6576 616c  ickle.dumps(eval
+0003e2d0: 2873 7472 2864 6174 6129 292c 7072 6f74  (str(data)),prot
+0003e2e0: 6f63 6f6c 3d70 726f 746f 636f 6c29 2023  ocol=protocol) #
+0003e2f0: 2063 6f6d 6d6f 6e20 322e 7820 2620 332e   common 2.x & 3.
+0003e300: 7820 7665 7273 696f 6e20 3a20 7072 6f74  x version : prot
+0003e310: 6f63 6f6c 3d32 0a20 2020 2020 2020 2065  ocol=2.        e
+0003e320: 7863 6570 743a 0a20 2020 2020 2020 2020  xcept:.         
+0003e330: 2020 2072 6574 7572 6e20 4661 6c73 652c     return False,
+0003e340: 7379 732e 6578 635f 696e 666f 2829 5b30  sys.exc_info()[0
+0003e350: 5d0a 0a64 6566 2042 7974 6553 7472 696e  ]..def ByteStrin
+0003e360: 6732 4461 7461 2864 6174 6129 3a0a 2020  g2Data(data):.  
+0003e370: 2020 2320 4966 206e 6f74 2070 6963 6b6c    # If not pickl
+0003e380: 6520 6461 7461 2074 6865 6e20 7265 7475  e data then retu
+0003e390: 726e 206f 7269 6769 6e61 6c20 6461 7461  rn original data
+0003e3a0: 2c20 7468 6174 2069 7320 7265 616c 2064  , that is real d
+0003e3b0: 6174 610a 2020 2020 2320 6966 2070 6963  ata.    # if pic
+0003e3c0: 6b6c 6520 6461 7461 2074 6865 6e20 636f  kle data then co
+0003e3d0: 6e76 6572 7420 746f 2064 6174 610a 2020  nvert to data.  
+0003e3e0: 2020 7472 793a 0a20 2020 2020 2020 2072    try:.        r
+0003e3f0: 6574 7572 6e20 7069 636b 6c65 2e6c 6f61  eturn pickle.loa
+0003e400: 6473 2864 6174 6129 0a20 2020 2065 7863  ds(data).    exc
+0003e410: 6570 743a 0a20 2020 2020 2020 2072 6574  ept:.        ret
+0003e420: 7572 6e20 6461 7461 0a0a 6465 6620 7061  urn data..def pa
+0003e430: 636b 6574 5f65 6e63 2864 6174 612c 6b65  cket_enc(data,ke
+0003e440: 793d 276b 6727 2c65 6e63 3d46 616c 7365  y='kg',enc=False
+0003e450: 293a 0a20 2020 206e 6b65 793d 4279 7465  ):.    nkey=Byte
+0003e460: 7332 496e 7428 6b65 792c 656e 636f 6465  s2Int(key,encode
+0003e470: 3d27 7574 662d 3827 2c64 6566 6175 6c74  ='utf-8',default
+0003e480: 3d27 6f72 6727 290a 2020 2020 6f6b 2c70  ='org').    ok,p
+0003e490: 6461 7461 3d44 6174 6132 4279 7465 5374  data=Data2ByteSt
+0003e4a0: 7269 6e67 2864 6174 6129 0a20 2020 2069  ring(data).    i
+0003e4b0: 6620 6e6f 7420 6f6b 3a20 7265 7475 726e  f not ok: return
+0003e4c0: 2046 616c 7365 2c70 6461 7461 0a20 2020   False,pdata.   
+0003e4d0: 2064 6174 615f 7479 7065 3d42 7974 6573   data_type=Bytes
+0003e4e0: 2874 7970 6528 6461 7461 292e 5f5f 6e61  (type(data).__na
+0003e4f0: 6d65 5f5f 5b30 5d29 0a20 2020 2069 6620  me__[0]).    if 
+0003e500: 656e 6320 616e 6420 6b65 793a 0a20 2020  enc and key:.   
+0003e510: 2020 2020 2023 2065 6e63 6f64 6520 636f       # encode co
+0003e520: 6465 2068 6572 650a 2020 2020 2020 2020  de here.        
+0003e530: 2365 6e63 5f74 663d 4279 7465 7328 2774  #enc_tf=Bytes('t
+0003e540: 2729 2023 204e 6f77 206e 6f74 2063 6f64  ') # Now not cod
+0003e550: 6520 6865 7265 2e20 536f 2c20 6576 6572  e here. So, ever
+0003e560: 7974 6869 6e67 2074 6f20 2766 270a 2020  ything to 'f'.  
+0003e570: 2020 2020 2020 2370 6461 7461 3d65 6e63        #pdata=enc
+0003e580: 6f64 6528 6b65 792c 7064 6174 6129 0a20  ode(key,pdata). 
+0003e590: 2020 2020 2020 2065 6e63 5f74 663d 4279         enc_tf=By
+0003e5a0: 7465 7328 2766 2729 0a20 2020 2065 6c73  tes('f').    els
+0003e5b0: 653a 0a20 2020 2020 2020 2065 6e63 5f74  e:.        enc_t
+0003e5c0: 663d 4279 7465 7328 2766 2729 0a20 2020  f=Bytes('f').   
+0003e5d0: 206e 6461 7461 3d73 7472 7563 742e 7061   ndata=struct.pa
+0003e5e0: 636b 2827 3e49 7373 4927 2c6c 656e 2870  ck('>IssI',len(p
+0003e5f0: 6461 7461 292c 6461 7461 5f74 7970 652c  data),data_type,
+0003e600: 656e 635f 7466 2c6e 6b65 7929 2b70 6461  enc_tf,nkey)+pda
+0003e610: 7461 0a20 2020 2072 6574 7572 6e20 5472  ta.    return Tr
+0003e620: 7565 2c6e 6461 7461 0a20 2020 2020 2020  ue,ndata.       
+0003e630: 200a 6465 6620 7061 636b 6574 5f68 6561   .def packet_hea
+0003e640: 6428 736f 636b 2c6b 6579 3d27 6b67 272c  d(sock,key='kg',
+0003e650: 7265 7472 793d 302c 7265 7472 795f 7469  retry=0,retry_ti
+0003e660: 6d65 6f75 743d 352c 6b65 6570 5f72 6574  meout=5,keep_ret
+0003e670: 7279 3d46 616c 7365 2c74 696d 656f 7574  ry=False,timeout
+0003e680: 3d31 293a 0a20 2020 2023 4765 7420 4865  =1):.    #Get He
+0003e690: 6164 6572 0a20 2020 2023 6b65 6570 5f72  ader.    #keep_r
+0003e6a0: 6574 7279 203a 5472 7565 3a20 6966 2063  etry :True: if c
+0003e6b0: 6c61 7365 6420 736f 636b 6574 2062 7574  lased socket but
+0003e6c0: 2077 6169 740a 2020 2020 7068 3d54 494d   wait.    ph=TIM
+0003e6d0: 4528 290a 2020 2020 6966 2028 7265 7472  E().    if (retr
+0003e6e0: 7920 2a20 7265 7472 795f 7469 6d65 6f75  y * retry_timeou
+0003e6f0: 7429 203e 2074 696d 656f 7574 3a0a 2020  t) > timeout:.  
+0003e700: 2020 2020 2020 7469 6d65 6f75 743d 7265        timeout=re
+0003e710: 7472 7920 2a20 7265 7472 795f 7469 6d65  try * retry_time
+0003e720: 6f75 740a 2020 2020 656c 7365 3a0a 2020  out.    else:.  
+0003e730: 2020 2020 2020 6966 2072 6574 7279 5f74        if retry_t
+0003e740: 696d 656f 7574 203c 3d20 303a 2072 6574  imeout <= 0: ret
+0003e750: 7279 5f74 696d 656f 7574 3d35 0a20 2020  ry_timeout=5.   
+0003e760: 2020 2020 2072 6574 7279 3d28 7469 6d65       retry=(time
+0003e770: 6f75 742f 2f72 6574 7279 5f74 696d 656f  out//retry_timeo
+0003e780: 7574 292b 310a 2020 2020 7768 696c 6520  ut)+1.    while 
+0003e790: 5472 7565 3a0a 2020 2020 2020 2020 6966  True:.        if
+0003e7a0: 2043 6c6f 7365 6453 6f63 6b65 7428 736f   ClosedSocket(so
+0003e7b0: 636b 293a 0a20 2020 2020 2020 2020 2020  ck):.           
+0003e7c0: 2069 6620 7265 7472 7920 3c3d 2030 3a0a   if retry <= 0:.
+0003e7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003e7e0: 7265 7475 726e 2046 616c 7365 2c27 416c  return False,'Al
+0003e7f0: 7265 6164 7920 636c 6f73 6564 2074 6865  ready closed the
+0003e800: 2073 6f63 6b65 7427 0a20 2020 2020 2020   socket'.       
+0003e810: 2020 2020 2072 6574 7279 2d3d 310a 2020       retry-=1.  
+0003e820: 2020 2020 2020 2020 2020 7469 6d65 2e73            time.s
+0003e830: 6c65 6570 2872 6574 7279 5f74 696d 656f  leep(retry_timeo
+0003e840: 7574 290a 2020 2020 2020 2020 2020 2020  ut).            
+0003e850: 636f 6e74 696e 7565 0a20 2020 2020 2020  continue.       
+0003e860: 206f 6b2c 6865 6164 3d70 6163 6b65 745f   ok,head=packet_
+0003e870: 7265 6365 6976 655f 616c 6c28 736f 636b  receive_all(sock
+0003e880: 2c31 302c 7265 7472 793d 7265 7472 792c  ,10,retry=retry,
+0003e890: 7265 7472 795f 7469 6d65 6f75 743d 7265  retry_timeout=re
+0003e8a0: 7472 795f 7469 6d65 6f75 7429 0a20 2020  try_timeout).   
+0003e8b0: 2020 2020 2069 6620 6b72 6328 6f6b 2c63       if krc(ok,c
+0003e8c0: 686b 3d54 7275 6529 3a0a 2020 2020 2020  hk=True):.      
+0003e8d0: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
+0003e8e0: 2020 2020 2020 2020 2020 2073 745f 6865             st_he
+0003e8f0: 6164 3d73 7472 7563 742e 756e 7061 636b  ad=struct.unpack
+0003e900: 2827 3e49 7373 4927 2c42 7974 6573 2868  ('>IssI',Bytes(h
+0003e910: 6561 6429 290a 2020 2020 2020 2020 2020  ead)).          
+0003e920: 2020 2020 2020 6966 2073 745f 6865 6164        if st_head
+0003e930: 5b33 5d20 3d3d 2042 7974 6573 3249 6e74  [3] == Bytes2Int
+0003e940: 286b 6579 2c65 6e63 6f64 653d 2775 7466  (key,encode='utf
+0003e950: 2d38 272c 6465 6661 756c 743d 276f 7267  -8',default='org
+0003e960: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
+0003e970: 2020 2020 2020 2020 7265 7475 726e 2054          return T
+0003e980: 7275 652c 7374 5f68 6561 645b 305d 2c73  rue,st_head[0],s
+0003e990: 745f 6865 6164 5b31 5d2c 7374 5f68 6561  t_head[1],st_hea
+0003e9a0: 645b 325d 0a20 2020 2020 2020 2020 2020  d[2].           
+0003e9b0: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
+0003e9c0: 2020 2020 2020 2020 2070 6173 730a 2020           pass.  
+0003e9d0: 2020 2020 2020 6966 2070 682e 4f75 7428        if ph.Out(
+0003e9e0: 7469 6d65 6f75 7429 3a20 6272 6561 6b0a  timeout): break.
+0003e9f0: 2020 2020 2020 2020 7469 6d65 2e73 6c65          time.sle
+0003ea00: 6570 2831 290a 2020 2020 7265 7475 726e  ep(1).    return
+0003ea10: 2046 616c 7365 2c27 4661 696c 2066 6f72   False,'Fail for
+0003ea20: 2072 6561 6420 6865 6164 6572 287b 7d29   read header({})
+0003ea30: 272e 666f 726d 6174 2868 6561 6429 2c4e  '.format(head),N
+0003ea40: 6f6e 652c 4e6f 6e65 0a0a 6465 6620 7061  one,None..def pa
+0003ea50: 636b 6574 5f64 6563 2864 6174 612c 656e  cket_dec(data,en
+0003ea60: 632c 6b65 793d 276b 6727 293a 0a20 2020  c,key='kg'):.   
+0003ea70: 2023 6f6b 2c73 697a 652c 6461 7461 5f74   #ok,size,data_t
+0003ea80: 7970 652c 656e 633d 7061 636b 6574 5f68  ype,enc=packet_h
+0003ea90: 6561 6428 736f 636b 290a 2020 2020 236f  ead(sock).    #o
+0003eaa0: 6b2c 6461 7461 3d70 6163 6b65 745f 7265  k,data=packet_re
+0003eab0: 6365 6976 655f 616c 6c28 736f 636b 2c73  ceive_all(sock,s
+0003eac0: 697a 652c 2e2e 2e2e 290a 2020 2020 2372  ize,....).    #r
+0003ead0: 6561 6c5f 6461 7461 3d70 6163 6b65 745f  eal_data=packet_
+0003eae0: 6465 6328 6461 7461 2c65 6e63 290a 2020  dec(data,enc).  
+0003eaf0: 2020 6966 2065 6e63 203d 3d20 2774 273a    if enc == 't':
+0003eb00: 0a20 2020 2020 2020 2023 2064 6563 6f64  .        # decod
+0003eb10: 6520 636f 6465 2068 6572 650a 2020 2020  e code here.    
+0003eb20: 2020 2020 2320 6461 7461 3d64 6563 6f64      # data=decod
+0003eb30: 6528 6461 7461 290a 2020 2020 2020 2020  e(data).        
+0003eb40: 7061 7373 0a20 2020 2072 6574 7572 6e20  pass.    return 
+0003eb50: 4279 7465 5374 7269 6e67 3244 6174 6128  ByteString2Data(
+0003eb60: 6461 7461 290a 0a64 6566 2043 6c6f 7365  data)..def Close
+0003eb70: 6453 6f63 6b65 7428 736f 636b 293a 0a20  dSocket(sock):. 
+0003eb80: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+0003eb90: 2320 7468 6973 2077 696c 6c20 7472 7920  # this will try 
+0003eba0: 746f 2072 6561 6420 6279 7465 7320 7769  to read bytes wi
+0003ebb0: 7468 6f75 7420 626c 6f63 6b69 6e67 0a20  thout blocking. 
+0003ebc0: 2020 2020 2020 2023 2061 6e64 2061 6c73         # and als
+0003ebd0: 6f20 7769 7468 6f75 7420 7265 6d6f 7669  o without removi
+0003ebe0: 6e67 2074 6865 6d20 6672 6f6d 2062 7566  ng them from buf
+0003ebf0: 6665 7220 2870 6565 6b20 6f6e 6c79 290a  fer (peek only).
+0003ec00: 2020 2020 2020 2020 6461 7461 203d 2073          data = s
+0003ec10: 6f63 6b2e 7265 6376 2831 362c 2073 6f63  ock.recv(16, soc
+0003ec20: 6b65 742e 4d53 475f 444f 4e54 5741 4954  ket.MSG_DONTWAIT
+0003ec30: 207c 2073 6f63 6b65 742e 4d53 475f 5045   | socket.MSG_PE
+0003ec40: 454b 290a 2020 2020 2020 2020 6966 206c  EK).        if l
+0003ec50: 656e 2864 6174 6129 203d 3d20 303a 0a20  en(data) == 0:. 
+0003ec60: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0003ec70: 6e20 5472 7565 0a20 2020 2065 7863 6570  n True.    excep
+0003ec80: 7420 426c 6f63 6b69 6e67 494f 4572 726f  t BlockingIOErro
+0003ec90: 723a 0a20 2020 2020 2020 2072 6574 7572  r:.        retur
+0003eca0: 6e20 4661 6c73 6520 2023 2073 6f63 6b65  n False  # socke
+0003ecb0: 7420 6973 206f 7065 6e20 616e 6420 7265  t is open and re
+0003ecc0: 6164 696e 6720 6672 6f6d 2069 7420 776f  ading from it wo
+0003ecd0: 756c 6420 626c 6f63 6b0a 2020 2020 6578  uld block.    ex
+0003ece0: 6365 7074 2043 6f6e 6e65 6374 696f 6e52  cept ConnectionR
+0003ecf0: 6573 6574 4572 726f 723a 0a20 2020 2020  esetError:.     
+0003ed00: 2020 2072 6574 7572 6e20 5472 7565 2020     return True  
+0003ed10: 2320 736f 636b 6574 2077 6173 2063 6c6f  # socket was clo
+0003ed20: 7365 6420 666f 7220 736f 6d65 206f 7468  sed for some oth
+0003ed30: 6572 2072 6561 736f 6e0a 2020 2020 6578  er reason.    ex
+0003ed40: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
+0003ed50: 7320 653a 2023 756e 6578 7065 6374 6564  s e: #unexpected
+0003ed60: 2065 7863 6570 7469 6f6e 2077 6865 6e20   exception when 
+0003ed70: 6368 6563 6b69 6e67 2069 6620 6120 736f  checking if a so
+0003ed80: 636b 6574 2069 7320 636c 6f73 6564 0a20  cket is closed. 
+0003ed90: 2020 2020 2020 2072 6574 7572 6e20 4661         return Fa
+0003eda0: 6c73 650a 2020 2020 7265 7475 726e 2046  lse.    return F
+0003edb0: 616c 7365 0a0a 6465 6620 5265 6d6f 7665  alse..def Remove
+0003edc0: 4e65 776c 696e 6528 7372 632c 6d6f 6465  Newline(src,mode
+0003edd0: 3d27 6564 6765 272c 6e65 776c 696e 653d  ='edge',newline=
+0003ede0: 275c 6e27 2c62 7974 653d 4e6f 6e65 293a  '\n',byte=None):
+0003edf0: 0a20 2020 2069 6620 6973 696e 7374 616e  .    if isinstan
+0003ee00: 6365 2862 7974 652c 626f 6f6c 293a 0a20  ce(byte,bool):. 
+0003ee10: 2020 2020 2020 2069 6620 6279 7465 3a0a         if byte:.
+0003ee20: 2020 2020 2020 2020 2020 2020 7372 633d              src=
+0003ee30: 4279 7465 7328 7372 6329 0a20 2020 2020  Bytes(src).     
+0003ee40: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0003ee50: 2020 2020 2073 7263 3d53 7472 2873 7263       src=Str(src
+0003ee60: 290a 2020 2020 7372 635f 613d 5370 6c69  ).    src_a=Spli
+0003ee70: 7428 7372 632c 6e65 776c 696e 652c 6465  t(src,newline,de
+0003ee80: 6661 756c 743d 4661 6c73 652c 6c69 7374  fault=False,list
+0003ee90: 6f6e 6c79 3d46 616c 7365 290a 2020 2020  only=False).    
+0003eea0: 6966 2073 7263 5f61 2069 7320 4661 6c73  if src_a is Fals
+0003eeb0: 653a 0a20 2020 2020 2020 2072 6574 7572  e:.        retur
+0003eec0: 6e20 7372 630a 2020 2020 6966 206d 6f64  n src.    if mod
+0003eed0: 6520 696e 205b 2765 6467 6527 2c27 626f  e in ['edge','bo
+0003eee0: 7468 275d 3a0a 2020 2020 2020 2020 6966  th']:.        if
+0003eef0: 206e 6f74 2073 7263 5f61 5b30 5d2e 7374   not src_a[0].st
+0003ef00: 7269 7028 2920 616e 6420 6e6f 7420 7372  rip() and not sr
+0003ef10: 635f 615b 2d31 5d2e 7374 7269 7028 293a  c_a[-1].strip():
+0003ef20: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0003ef30: 7572 6e20 4a6f 696e 2873 7263 5f61 5b31  urn Join(src_a[1
+0003ef40: 3a2d 315d 2c73 796d 626f 6c3d 6e65 776c  :-1],symbol=newl
+0003ef50: 696e 6529 0a20 2020 2020 2020 2065 6c69  ine).        eli
+0003ef60: 6620 6e6f 7420 7372 635f 615b 305d 2e73  f not src_a[0].s
+0003ef70: 7472 6970 2829 3a0a 2020 2020 2020 2020  trip():.        
+0003ef80: 2020 2020 7265 7475 726e 204a 6f69 6e28      return Join(
+0003ef90: 7372 635f 615b 313a 5d2c 7379 6d62 6f6c  src_a[1:],symbol
+0003efa0: 3d6e 6577 6c69 6e65 290a 2020 2020 2020  =newline).      
+0003efb0: 2020 656c 6966 206e 6f74 2073 7263 5f61    elif not src_a
+0003efc0: 5b2d 315d 2e73 7472 6970 2829 3a0a 2020  [-1].strip():.  
+0003efd0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0003efe0: 204a 6f69 6e28 7372 635f 615b 3a2d 315d   Join(src_a[:-1]
+0003eff0: 2c73 796d 626f 6c3d 6e65 776c 696e 6529  ,symbol=newline)
+0003f000: 0a20 2020 2065 6c69 6620 6d6f 6465 2069  .    elif mode i
+0003f010: 6e20 5b27 6669 7273 7427 2c27 7374 6172  n ['first','star
+0003f020: 7427 2c30 5d3a 0a20 2020 2020 2020 2069  t',0]:.        i
+0003f030: 6620 6e6f 7420 7372 635f 615b 305d 2e73  f not src_a[0].s
+0003f040: 7472 6970 2829 3a0a 2020 2020 2020 2020  trip():.        
+0003f050: 2020 2020 7265 7475 726e 204a 6f69 6e28      return Join(
+0003f060: 7372 635f 615b 313a 5d2c 7379 6d62 6f6c  src_a[1:],symbol
+0003f070: 3d6e 6577 6c69 6e65 290a 2020 2020 656c  =newline).    el
+0003f080: 6966 206d 6f64 6520 696e 205b 2765 6e64  if mode in ['end
+0003f090: 272c 276c 6173 7427 2c2d 315d 3a0a 2020  ','last',-1]:.  
+0003f0a0: 2020 2020 2020 6966 206e 6f74 2073 7263        if not src
+0003f0b0: 5f61 5b2d 315d 2e73 7472 6970 2829 3a0a  _a[-1].strip():.
+0003f0c0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0003f0d0: 726e 204a 6f69 6e28 7372 635f 615b 3a2d  rn Join(src_a[:-
+0003f0e0: 315d 2c73 796d 626f 6c3d 6e65 776c 696e  1],symbol=newlin
+0003f0f0: 6529 0a20 2020 2065 6c69 6620 6d6f 6465  e).    elif mode
+0003f100: 2069 6e20 5b27 2a27 2c27 616c 6c27 2c27   in ['*','all','
+0003f110: 6576 6572 7974 6869 6e67 275d 3a0a 2020  everything']:.  
+0003f120: 2020 2020 2020 7265 7475 726e 204a 6f69        return Joi
+0003f130: 6e28 7372 635f 612c 7379 6d62 6f6c 3d27  n(src_a,symbol='
+0003f140: 2729 0a20 2020 2072 6574 7572 6e20 7372  ').    return sr
+0003f150: 630a 0a64 6566 2063 6174 2866 696c 656e  c..def cat(filen
+0003f160: 616d 652c 2a2a 6f70 7473 293a 0a20 2020  ame,**opts):.   
+0003f170: 2062 7974 653d 6f70 7473 2e67 6574 2827   byte=opts.get('
+0003f180: 6279 7465 272c 4661 6c73 6529 0a20 2020  byte',False).   
+0003f190: 206e 6577 6c69 6e65 3d6f 7074 732e 6765   newline=opts.ge
+0003f1a0: 7428 276e 6577 6c69 6e65 272c 275c 6e27  t('newline','\n'
+0003f1b0: 290a 2020 2020 7265 6164 5f66 6972 7374  ).    read_first
+0003f1c0: 6c69 6e65 3d6f 7074 732e 6765 7428 2772  line=opts.get('r
+0003f1d0: 6561 645f 6669 7273 746c 696e 6527 2c6f  ead_firstline',o
+0003f1e0: 7074 732e 6765 7428 2768 6561 6427 2c6f  pts.get('head',o
+0003f1f0: 7074 732e 6765 7428 2768 6561 645f 6c69  pts.get('head_li
+0003f200: 6e65 272c 4661 6c73 6529 2929 0a20 2020  ne',False))).   
+0003f210: 2064 6566 6175 6c74 3d6f 7074 732e 6765   default=opts.ge
+0003f220: 7428 2764 6566 6175 6c74 272c 4661 6c73  t('default',Fals
+0003f230: 6529 0a20 2020 206e 6f5f 6564 6765 3d6f  e).    no_edge=o
+0003f240: 7074 732e 6765 7428 276e 6f5f 6564 6765  pts.get('no_edge
+0003f250: 272c 4661 6c73 6529 0a20 2020 206e 6f5f  ',False).    no_
+0003f260: 656e 645f 6e65 776c 696e 653d 6f70 7473  end_newline=opts
+0003f270: 2e67 6574 2827 6e6f 5f65 6e64 5f6e 6577  .get('no_end_new
+0003f280: 6c69 6e65 272c 4661 6c73 6529 0a20 2020  line',False).   
+0003f290: 2066 696c 655f 6f6e 6c79 3d6f 7074 732e   file_only=opts.
+0003f2a0: 6765 7428 2766 696c 655f 6f6e 6c79 272c  get('file_only',
+0003f2b0: 6f70 7473 2e67 6574 2827 6669 6c65 6f6e  opts.get('fileon
+0003f2c0: 6c79 272c 5472 7565 2929 0a20 2020 206e  ly',True)).    n
+0003f2d0: 6f5f 616c 6c5f 6e65 776c 696e 653d 6f70  o_all_newline=op
+0003f2e0: 7473 2e67 6574 2827 6e6f 5f61 6c6c 5f6e  ts.get('no_all_n
+0003f2f0: 6577 6c69 6e65 272c 4661 6c73 6529 0a20  ewline',False). 
+0003f300: 2020 206e 6f5f 6669 7273 745f 6e65 776c     no_first_newl
+0003f310: 696e 653d 6f70 7473 2e67 6574 2827 6e6f  ine=opts.get('no
+0003f320: 5f66 6972 7374 5f6e 6577 6c69 6e65 272c  _first_newline',
+0003f330: 4661 6c73 6529 0a20 2020 206c 6f67 3d6f  False).    log=o
+0003f340: 7074 732e 6765 7428 276c 6f67 2729 0a0a  pts.get('log')..
+0003f350: 2020 2020 6966 2049 734e 6f6e 6528 6669      if IsNone(fi
+0003f360: 6c65 6e61 6d65 293a 0a20 2020 2020 2020  lename):.       
+0003f370: 2070 7269 6e74 6628 2746 696c 656e 616d   printf('Filenam
+0003f380: 6520 6973 204e 6f6e 6527 2c6c 6f67 3d6c  e is None',log=l
+0003f390: 6f67 2c6d 6f64 653d 2764 2729 0a20 2020  og,mode='d').   
+0003f3a0: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
+0003f3b0: 756c 740a 2020 2020 6966 206f 732e 7061  ult.    if os.pa
+0003f3c0: 7468 2e69 7364 6972 2866 696c 656e 616d  th.isdir(filenam
+0003f3d0: 6529 3a0a 2020 2020 2020 2020 7072 696e  e):.        prin
+0003f3e0: 7466 2827 7b7d 2069 7320 6120 6469 7265  tf('{} is a dire
+0003f3f0: 6374 6f72 7927 2e66 6f72 6d61 7428 6669  ctory'.format(fi
+0003f400: 6c65 6e61 6d65 292c 6c6f 673d 6c6f 672c  lename),log=log,
+0003f410: 6d6f 6465 3d27 6427 290a 2020 2020 2020  mode='d').      
+0003f420: 2020 7265 7475 726e 2064 6566 6175 6c74    return default
+0003f430: 0a20 2020 2069 6620 6e6f 7420 6f73 2e70  .    if not os.p
+0003f440: 6174 682e 6578 6973 7473 2866 696c 656e  ath.exists(filen
+0003f450: 616d 6529 3a0a 2020 2020 2020 2020 7072  ame):.        pr
+0003f460: 696e 7466 2827 7b7d 206e 6f74 2066 6f75  intf('{} not fou
+0003f470: 6e64 272e 666f 726d 6174 2866 696c 656e  nd'.format(filen
+0003f480: 616d 6529 2c6c 6f67 3d6c 6f67 2c6d 6f64  ame),log=log,mod
+0003f490: 653d 2764 2729 0a20 2020 2020 2020 2072  e='d').        r
+0003f4a0: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
+0003f4b0: 2020 7472 793a 0a20 2020 2020 2020 2069    try:.        i
+0003f4c0: 6620 7265 6164 5f66 6972 7374 6c69 6e65  f read_firstline
+0003f4d0: 3a20 2023 2052 6561 646c 696e 650a 2020  :  # Readline.  
+0003f4e0: 2020 2020 2020 2020 2020 7769 7468 206f            with o
+0003f4f0: 7065 6e28 6669 6c65 6e61 6d65 2c27 7262  pen(filename,'rb
+0003f500: 2729 2061 7320 663a 0a20 2020 2020 2020  ') as f:.       
+0003f510: 2020 2020 2020 2020 2064 6174 613d 662e           data=f.
+0003f520: 7265 6164 6c69 6e65 2829 0a20 2020 2020  readline().     
+0003f530: 2020 2065 6c69 6620 6e6f 7420 6669 6c65     elif not file
+0003f540: 5f6f 6e6c 793a 2023 2052 6561 6420 7370  _only: # Read sp
+0003f550: 6563 6961 6c20 6669 6c65 0a20 2020 2020  ecial file.     
+0003f560: 2020 2020 2020 2064 6174 613d 6f73 2e6f         data=os.o
+0003f570: 7065 6e28 6669 6c65 6e61 6d65 2c6f 732e  pen(filename,os.
+0003f580: 4f5f 5244 4f4e 4c59 290a 2020 2020 2020  O_RDONLY).      
+0003f590: 2020 2020 2020 6f73 2e63 6c6f 7365 2864        os.close(d
+0003f5a0: 6174 6129 0a20 2020 2020 2020 2065 6c73  ata).        els
+0003f5b0: 653a 2023 2052 6561 6420 6e6f 726d 616c  e: # Read normal
+0003f5c0: 2066 696c 650a 2020 2020 2020 2020 2020   file.          
+0003f5d0: 2020 7769 7468 206f 7065 6e28 6669 6c65    with open(file
+0003f5e0: 6e61 6d65 2c27 7262 2729 2061 7320 663a  name,'rb') as f:
+0003f5f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003f600: 2064 6174 613d 662e 7265 6164 2829 0a20   data=f.read(). 
+0003f610: 2020 2020 2020 2069 6620 6e6f 7420 6279         if not by
+0003f620: 7465 3a0a 2020 2020 2020 2020 2020 2064  te:.           d
+0003f630: 6174 613d 5374 7228 6461 7461 290a 2020  ata=Str(data).  
+0003f640: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
+0003f650: 2020 7072 696e 7466 2873 7973 2e65 7863    printf(sys.exc
+0003f660: 5f69 6e66 6f28 295b 305d 2c6c 6f67 3d6c  _info()[0],log=l
+0003f670: 6f67 2c6d 6f64 653d 2764 2729 0a20 2020  og,mode='d').   
+0003f680: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
+0003f690: 756c 740a 2020 2020 7265 7475 726e 2052  ult.    return R
+0003f6a0: 656d 6f76 654e 6577 6c69 6e65 2864 6174  emoveNewline(dat
+0003f6b0: 612c 6d6f 6465 3d27 6564 6765 2720 6966  a,mode='edge' if
+0003f6c0: 206e 6f5f 6564 6765 2065 6c73 6520 2765   no_edge else 'e
+0003f6d0: 6e64 2720 6966 206e 6f5f 656e 645f 6e65  nd' if no_end_ne
+0003f6e0: 776c 696e 6520 656c 7365 2027 6669 7273  wline else 'firs
+0003f6f0: 7427 2069 6620 6e6f 5f66 6972 7374 5f6e  t' if no_first_n
+0003f700: 6577 6c69 6e65 2065 6c73 6520 2761 6c6c  ewline else 'all
+0003f710: 2720 6966 206e 6f5f 616c 6c5f 6e65 776c  ' if no_all_newl
+0003f720: 696e 6520 656c 7365 204e 6f6e 652c 6e65  ine else None,ne
+0003f730: 776c 696e 653d 6e65 776c 696e 652c 6279  wline=newline,by
+0003f740: 7465 3d62 7974 6529 0a0a 6465 6620 436f  te=byte)..def Co
+0003f750: 6d70 7265 7373 2864 6174 612c 6d6f 6465  mpress(data,mode
+0003f760: 3d27 677a 6970 2729 3a0a 2020 2020 7472  ='gzip'):.    tr
+0003f770: 793a 0a20 2020 2020 2020 2069 6620 6973  y:.        if is
+0003f780: 696e 7374 616e 6365 2864 6174 612c 7374  instance(data,st
+0003f790: 7229 2061 6e64 206f 732e 7061 7468 2e69  r) and os.path.i
+0003f7a0: 7366 696c 6528 6461 7461 293a 0a20 2020  sfile(data):.   
+0003f7b0: 2020 2020 2020 2020 2077 6974 6820 6f70           with op
+0003f7c0: 656e 2864 6174 612c 2772 6227 2920 6173  en(data,'rb') as
+0003f7d0: 2066 3a0a 2020 2020 2020 2020 2020 2020   f:.            
+0003f7e0: 2020 2020 6461 7461 3d66 2e72 6561 6428      data=f.read(
+0003f7f0: 290a 2020 2020 2020 2020 6966 206d 6f64  ).        if mod
+0003f800: 6520 3d3d 2027 6c7a 3427 3a0a 2020 2020  e == 'lz4':.    
+0003f810: 2020 2020 2020 2020 496d 706f 7274 2827          Import('
+0003f820: 6672 6f6d 206c 7a34 2069 6d70 6f72 7420  from lz4 import 
+0003f830: 6672 616d 6527 290a 2020 2020 2020 2020  frame').        
+0003f840: 2020 2020 7265 7475 726e 2066 7261 6d65      return frame
+0003f850: 2e63 6f6d 7072 6573 7328 6461 7461 290a  .compress(data).
+0003f860: 2020 2020 2020 2020 656c 6966 206d 6f64          elif mod
+0003f870: 6520 3d3d 2027 627a 3227 3a0a 2020 2020  e == 'bz2':.    
+0003f880: 2020 2020 2020 2020 7265 7475 726e 2062          return b
+0003f890: 7a32 2e63 6f6d 7072 6573 7328 6461 7461  z2.compress(data
+0003f8a0: 290a 2020 2020 2020 2020 656c 6966 206d  ).        elif m
+0003f8b0: 6f64 6520 3d3d 2027 677a 6970 273a 0a20  ode == 'gzip':. 
+0003f8c0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0003f8d0: 6e20 677a 6970 2e63 6f6d 7072 6573 7328  n gzip.compress(
+0003f8e0: 6461 7461 2c63 6f6d 7072 6573 736c 6576  data,compresslev
+0003f8f0: 656c 3d39 2920 2364 6563 6f6d 7072 6573  el=9) #decompres
+0003f900: 7328 6461 7461 290a 2020 2020 2020 2020  s(data).        
+0003f910: 656c 7365 3a20 237a 6c69 620a 2020 2020  else: #zlib.    
+0003f920: 2020 2020 2020 2020 7265 7475 726e 207a          return z
+0003f930: 6c69 622e 636f 6d70 7265 7373 2864 6174  lib.compress(dat
+0003f940: 6129 2023 2064 6563 6f6d 7072 6573 7328  a) # decompress(
+0003f950: 6461 7461 290a 2020 2020 6578 6365 7074  data).    except
+0003f960: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+0003f970: 2046 616c 7365 0a0a 6465 6620 4465 636f   False..def Deco
+0003f980: 6d70 7265 7373 2864 6174 612c 6d6f 6465  mpress(data,mode
+0003f990: 3d27 677a 6970 2729 3a0a 2020 2020 7472  ='gzip'):.    tr
+0003f9a0: 793a 0a20 2020 2020 2020 2069 6620 6973  y:.        if is
+0003f9b0: 696e 7374 616e 6365 2864 6174 612c 7374  instance(data,st
+0003f9c0: 7229 2061 6e64 206f 732e 7061 7468 2e69  r) and os.path.i
+0003f9d0: 7366 696c 6528 6461 7461 293a 0a20 2020  sfile(data):.   
+0003f9e0: 2020 2020 2020 2020 2077 6974 6820 6f70           with op
+0003f9f0: 656e 2864 6174 612c 2772 6227 2920 6173  en(data,'rb') as
+0003fa00: 2066 3a0a 2020 2020 2020 2020 2020 2020   f:.            
+0003fa10: 2020 2020 6461 7461 3d66 2e72 6561 6428      data=f.read(
+0003fa20: 290a 2020 2020 2020 2020 6966 206d 6f64  ).        if mod
+0003fa30: 6520 3d3d 2027 6c7a 3427 3a0a 2020 2020  e == 'lz4':.    
+0003fa40: 2020 2020 2020 2020 496d 706f 7274 2827          Import('
+0003fa50: 6672 6f6d 206c 7a34 2069 6d70 6f72 7420  from lz4 import 
+0003fa60: 6672 616d 6527 290a 2020 2020 2020 2020  frame').        
+0003fa70: 2020 2020 7265 7475 726e 2066 7261 6d65      return frame
+0003fa80: 2e64 6563 6f6d 7072 6573 7328 6461 7461  .decompress(data
+0003fa90: 290a 2020 2020 2020 2020 656c 6966 206d  ).        elif m
+0003faa0: 6f64 6520 3d3d 2027 627a 3227 3a0a 2020  ode == 'bz2':.  
+0003fab0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0003fac0: 2062 7a32 2e42 5a32 4465 636f 6d70 7265   bz2.BZ2Decompre
+0003fad0: 7373 6f72 2829 2e64 6563 6f6d 7072 6573  ssor().decompres
+0003fae0: 7328 6461 7461 290a 2020 2020 2020 2020  s(data).        
+0003faf0: 656c 6966 206d 6f64 6520 3d3d 2027 677a  elif mode == 'gz
+0003fb00: 6970 273a 0a20 2020 2020 2020 2020 2020  ip':.           
+0003fb10: 2072 6574 7572 6e20 677a 6970 2e64 6563   return gzip.dec
+0003fb20: 6f6d 7072 6573 7328 6461 7461 290a 2020  ompress(data).  
+0003fb30: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0003fb40: 2020 2020 2020 2020 7265 7475 726e 207a          return z
+0003fb50: 6c69 622e 6465 636f 6d70 7265 7373 2864  lib.decompress(d
+0003fb60: 6174 6129 0a20 2020 2065 7863 6570 743a  ata).    except:
+0003fb70: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0003fb80: 4661 6c73 650a 0a64 6566 2073 697a 656f  False..def sizeo
+0003fb90: 6628 6f62 6a29 3a0a 2020 2020 6d73 697a  f(obj):.    msiz
+0003fba0: 6520 3d20 300a 2020 2020 6964 7320 3d20  e = 0.    ids = 
+0003fbb0: 7365 7428 290a 2020 2020 6f62 6a65 6374  set().    object
+0003fbc0: 7320 3d20 5b6f 626a 5d0a 2020 2020 7768  s = [obj].    wh
+0003fbd0: 696c 6520 6f62 6a65 6374 733a 0a20 2020  ile objects:.   
+0003fbe0: 2020 2020 206e 6577 203d 205b 5d0a 2020       new = [].  
+0003fbf0: 2020 2020 2020 666f 7220 6920 696e 206f        for i in o
+0003fc00: 626a 6563 7473 3a0a 2020 2020 2020 2020  bjects:.        
+0003fc10: 2020 2020 6966 2069 6428 6929 206e 6f74      if id(i) not
+0003fc20: 2069 6e20 6964 733a 0a20 2020 2020 2020   in ids:.       
+0003fc30: 2020 2020 2020 2020 2069 6473 2e61 6464           ids.add
+0003fc40: 2869 6428 6929 290a 2020 2020 2020 2020  (id(i)).        
+0003fc50: 2020 2020 2020 2020 6d73 697a 6520 2b3d          msize +=
+0003fc60: 2073 7973 2e67 6574 7369 7a65 6f66 2869   sys.getsizeof(i
+0003fc70: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0003fc80: 2020 6e65 772e 6170 7065 6e64 2869 290a    new.append(i).
+0003fc90: 2020 2020 2020 2020 6f62 6a65 6374 7320          objects 
+0003fca0: 3d20 6763 2e67 6574 5f72 6566 6572 656e  = gc.get_referen
+0003fcb0: 7473 282a 6e65 7729 0a20 2020 2072 6574  ts(*new).    ret
+0003fcc0: 7572 6e20 6d73 697a 650a 0a64 6566 2068  urn msize..def h
+0003fcd0: 756d 616e 5f62 7974 6528 6e75 6d2c 2075  uman_byte(num, u
+0003fce0: 6e69 743d 224b 222c 2077 756e 6974 3d4e  nit="K", wunit=N
+0003fcf0: 6f6e 652c 696e 745f 6f75 743d 4661 6c73  one,int_out=Fals
+0003fd00: 6529 3a0a 2020 2020 756e 6974 7320 3d20  e):.    units = 
+0003fd10: 5b22 4222 2c22 4b22 2c22 4d22 2c22 4722  ["B","K","M","G"
+0003fd20: 2c22 5422 2c22 5022 5d0a 2020 2020 6966  ,"T","P"].    if
+0003fd30: 2077 756e 6974 2069 7320 4e6f 6e65 3a0a   wunit is None:.
+0003fd40: 2020 2020 2020 2020 756e 6974 3d75 6e69          unit=uni
+0003fd50: 742e 7570 7065 7228 290a 2020 2020 2020  t.upper().      
+0003fd60: 2020 6966 206e 756d 203e 3d20 3130 3030    if num >= 1000
+0003fd70: 3a0a 2020 2020 2020 2020 2020 2020 7768  :.            wh
+0003fd80: 696c 6520 6e75 6d20 3e3d 2031 3030 303a  ile num >= 1000:
+0003fd90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0003fda0: 7375 693d 756e 6974 732e 696e 6465 7828  sui=units.index(
+0003fdb0: 756e 6974 290a 2020 2020 2020 2020 2020  unit).          
+0003fdc0: 2020 2020 2069 6620 6c65 6e28 756e 6974       if len(unit
+0003fdd0: 7329 203c 3d20 7375 692b 313a 0a20 2020  s) <= sui+1:.   
+0003fde0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003fdf0: 6272 6561 6b0a 2020 2020 2020 2020 2020  break.          
+0003fe00: 2020 2020 206e 756d 202f 3d20 3130 3234       num /= 1024
+0003fe10: 2e30 0a20 2020 2020 2020 2020 2020 2020  .0.             
+0003fe20: 2020 756e 6974 203d 2075 6e69 7473 5b73    unit = units[s
+0003fe30: 7569 2b31 5d0a 2020 2020 2020 2020 656c  ui+1].        el
+0003fe40: 6966 206e 756d 203c 2031 3a0a 2020 2020  if num < 1:.    
+0003fe50: 2020 2020 2020 2020 7768 696c 6520 6e75          while nu
+0003fe60: 6d20 3c20 313a 2023 302e 5858 5820 6469  m < 1: #0.XXX di
+0003fe70: 6769 7473 0a20 2020 2020 2020 2020 2020  gits.           
+0003fe80: 2020 2020 7375 693d 756e 6974 732e 696e      sui=units.in
+0003fe90: 6465 7828 756e 6974 290a 2020 2020 2020  dex(unit).      
+0003fea0: 2020 2020 2020 2020 2069 6620 7375 692d           if sui-
+0003feb0: 3120 3c20 303a 0a20 2020 2020 2020 2020  1 < 0:.         
+0003fec0: 2020 2020 2020 2020 2020 6272 6561 6b0a            break.
+0003fed0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+0003fee0: 756d 202a 3d20 3130 3234 2e30 0a20 2020  um *= 1024.0.   
+0003fef0: 2020 2020 2020 2020 2020 2020 756e 6974              unit
+0003ff00: 203d 2075 6e69 7473 5b73 7569 2d31 5d0a   = units[sui-1].
+0003ff10: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0003ff20: 2020 7775 6e69 743d 7775 6e69 742e 7570    wunit=wunit.up
+0003ff30: 7065 7228 290a 2020 2020 2020 2020 6575  per().        eu
+0003ff40: 693d 756e 6974 732e 696e 6465 7828 7775  i=units.index(wu
+0003ff50: 6e69 7429 0a20 2020 2020 2020 2069 6620  nit).        if 
+0003ff60: 7375 6920 3c20 6575 693a 0a20 2020 2020  sui < eui:.     
+0003ff70: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+0003ff80: 7261 6e67 6528 7375 692c 6575 6929 3a0a  range(sui,eui):.
+0003ff90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003ffa0: 6e75 6d20 2f3d 2031 3032 342e 300a 2020  num /= 1024.0.  
+0003ffb0: 2020 2020 2020 656c 6966 2073 7569 203e        elif sui >
+0003ffc0: 2065 7569 3a0a 2020 2020 2020 2020 2020   eui:.          
+0003ffd0: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
+0003ffe0: 2873 7569 2c65 7569 2c2d 3129 3a0a 2020  (sui,eui,-1):.  
+0003fff0: 2020 2020 2020 2020 2020 2020 2020 6e75                nu
+00040000: 6d20 2a3d 2031 3032 342e 300a 2020 2020  m *= 1024.0.    
+00040010: 2020 2020 756e 6974 3d77 756e 6974 0a20      unit=wunit. 
+00040020: 2020 2069 6620 696e 745f 6f75 743a 0a20     if int_out:. 
+00040030: 2020 2020 2020 2072 6574 7572 6e20 666c         return fl
+00040040: 6f61 7428 2225 2e31 6622 2528 6e75 6d29  oat("%.1f"%(num)
+00040050: 290a 2020 2020 656c 7365 3a0a 2020 2020  ).    else:.    
+00040060: 2020 2020 6966 2075 6e69 7420 3d3d 2022      if unit == "
+00040070: 4222 3a0a 2020 2020 2020 2020 2020 2020  B":.            
+00040080: 7265 7475 726e 2022 252e 3166 2025 7322  return "%.1f %s"
+00040090: 2025 2028 6e75 6d2c 756e 6974 290a 2020   % (num,unit).  
+000400a0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+000400b0: 2020 2020 2020 2020 7265 7475 726e 2022          return "
+000400c0: 252e 3166 2025 7342 2220 2520 286e 756d  %.1f %sB" % (num
+000400d0: 2c75 6e69 7429 0a0a 6465 6620 4875 6d61  ,unit)..def Huma
+000400e0: 6e5f 556e 6974 286e 756d 2c75 6e69 743d  n_Unit(num,unit=
+000400f0: 2753 272c 7761 6e74 5f75 6e69 743d 4e6f  'S',want_unit=No
+00040100: 6e65 2c69 6e74 5f6f 7574 3d46 616c 7365  ne,int_out=False
+00040110: 293a 0a20 2020 2064 6566 2063 6f6e 7665  ):.    def conve
+00040120: 7274 5f73 6563 5f74 6f5f 666f 726d 6174  rt_sec_to_format
+00040130: 286e 756d 2c77 616e 745f 666f 726d 6174  (num,want_format
+00040140: 3d22 2559 2025 6d20 2564 2025 483a 254d  ="%Y %m %d %H:%M
+00040150: 3a25 5322 293a 0a20 2020 2020 2020 2072  :%S"):.        r
+00040160: 6574 7572 6e20 6461 7465 7469 6d65 2e64  eturn datetime.d
+00040170: 6174 6574 696d 652e 6672 6f6d 7469 6d65  atetime.fromtime
+00040180: 7374 616d 7028 6e75 6d29 2e73 7472 6674  stamp(num).strft
+00040190: 696d 6528 7761 6e74 5f66 6f72 6d61 7429  ime(want_format)
+000401a0: 0a20 2020 2064 6566 2063 6f6e 7665 7274  .    def convert
+000401b0: 5f69 6e74 5f74 696d 655f 746f 5f79 686d  _int_time_to_yhm
+000401c0: 7328 6e75 6d2c 756e 6974 3d27 5327 2c77  s(num,unit='S',w
+000401d0: 616e 743d 4e6f 6e65 293a 0a20 2020 2020  ant=None):.     
+000401e0: 2020 2063 3d5b 3331 3533 3630 3030 2c38     c=[31536000,8
+000401f0: 3634 3030 2c33 3630 302c 3630 2c31 5d20  6400,3600,60,1] 
+00040200: 2320 7979 2c64 642c 6868 2c6d 6d2c 7373  # yy,dd,hh,mm,ss
+00040210: 0a20 2020 2020 2020 2063 753d 5b27 5927  .        cu=['Y'
+00040220: 2c27 4427 2c27 4827 2c27 4d27 2c27 5327  ,'D','H','M','S'
+00040230: 5d20 2020 2020 2320 7979 2c64 642c 6868  ]     # yy,dd,hh
+00040240: 2c6d 6d2c 7373 0a20 2020 2020 2020 2069  ,mm,ss.        i
+00040250: 6620 6973 696e 7374 616e 6365 2877 616e  f isinstance(wan
+00040260: 742c 7374 7229 2061 6e64 2077 616e 7420  t,str) and want 
+00040270: 616e 6420 7761 6e74 2069 6e20 6375 3a0a  and want in cu:.
+00040280: 2020 2020 2020 2020 2020 2020 7374 6172              star
+00040290: 745f 693d 6375 2e69 6e64 6578 2877 616e  t_i=cu.index(wan
+000402a0: 7429 0a20 2020 2020 2020 2065 6c73 653a  t).        else:
+000402b0: 0a20 2020 2020 2020 2020 2020 2073 7461  .            sta
+000402c0: 7274 5f69 3d30 0a20 2020 2020 2020 2069  rt_i=0.        i
+000402d0: 6620 6973 696e 7374 616e 6365 2875 6e69  f isinstance(uni
+000402e0: 742c 7374 7229 2061 6e64 2075 6e69 7420  t,str) and unit 
+000402f0: 616e 6420 756e 6974 2069 6e20 6375 3a0a  and unit in cu:.
+00040300: 2020 2020 2020 2020 2020 2020 6d78 3d63              mx=c
+00040310: 752e 696e 6465 7828 756e 6974 290a 2020  u.index(unit).  
+00040320: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00040330: 2020 2020 2020 2020 6d78 3d6c 656e 2863          mx=len(c
+00040340: 292d 310a 2020 2020 2020 2020 6966 206d  )-1.        if m
+00040350: 7820 3d3d 206c 656e 2863 292d 313a 2023  x == len(c)-1: #
+00040360: 2073 6563 202d 3e20 7761 6e74 0a20 2020   sec -> want.   
+00040370: 2020 2020 2020 2020 206f 3d7b 7d0a 2020           o={}.  
+00040380: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
+00040390: 696e 2072 616e 6765 2873 7461 7274 5f69  in range(start_i
+000403a0: 2c6d 782b 3129 3a0a 2020 2020 2020 2020  ,mx+1):.        
+000403b0: 2020 2020 2020 2020 6966 2028 6d78 203d          if (mx =
+000403c0: 3d20 6920 616e 6420 6e75 6d20 3e3d 2063  = i and num >= c
+000403d0: 5b69 5d29 206f 7220 6e75 6d20 3e20 635b  [i]) or num > c[
+000403e0: 695d 3a0a 2020 2020 2020 2020 2020 2020  i]:.            
+000403f0: 2020 2020 2020 2020 6f5b 6375 5b69 5d5d          o[cu[i]]
+00040400: 3d6e 756d 2f2f 635b 695d 0a20 2020 2020  =num//c[i].     
+00040410: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+00040420: 756d 3d6e 756d 2528 635b 695d 2a6f 5b63  um=num%(c[i]*o[c
+00040430: 755b 695d 5d29 0a20 2020 2020 2020 2020  u[i]]).         
+00040440: 2020 2072 6574 7572 6e20 6f0a 2020 2020     return o.    
+00040450: 2020 2020 656c 7365 3a20 2023 2075 6e69      else:  # uni
+00040460: 7420 2d3e 2073 6563 2061 6e64 2063 616c  t -> sec and cal
+00040470: 6375 6c61 7465 2073 6563 2074 6f20 7761  culate sec to wa
+00040480: 6e74 0a20 2020 2020 2020 2020 2020 206e  nt.            n
+00040490: 756d 203d 206e 756d 202a 2063 5b6d 785d  um = num * c[mx]
+000404a0: 2023 2063 6f6e 7665 7274 2074 6f20 756e   # convert to un
+000404b0: 6974 2074 6f20 7365 636f 6e64 730a 2020  it to seconds.  
+000404c0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000404d0: 2063 6f6e 7665 7274 5f69 6e74 5f74 696d   convert_int_tim
+000404e0: 655f 746f 5f79 686d 7328 6e75 6d2c 756e  e_to_yhms(num,un
+000404f0: 6974 3d27 5327 2c77 616e 743d 7761 6e74  it='S',want=want
+00040500: 290a 2020 2020 6966 2069 7369 6e73 7461  ).    if isinsta
+00040510: 6e63 6528 756e 6974 2c73 7472 2920 616e  nce(unit,str) an
+00040520: 6420 756e 6974 2061 6e64 2028 7761 6e74  d unit and (want
+00040530: 5f75 6e69 7420 6973 204e 6f6e 6520 6f72  _unit is None or
+00040540: 2069 7369 6e73 7461 6e63 6528 7761 6e74   isinstance(want
+00040550: 5f75 6e69 742c 7374 7229 293a 0a20 2020  _unit,str)):.   
+00040560: 2020 2020 2069 6620 756e 6974 2e75 7070       if unit.upp
+00040570: 6572 2829 2069 6e20 5b27 4d4d 272c 274d  er() in ['MM','M
+00040580: 494e 272c 2759 272c 2759 5927 2c27 5945  IN','Y','YY','YE
+00040590: 4152 272c 2748 4827 2c27 4827 2c27 484f  AR','HH','H','HO
+000405a0: 5552 272c 2753 272c 2753 4543 272c 2753  UR','S','SEC','S
+000405b0: 5327 5d3a 0a20 2020 2020 2020 2020 2020  S']:.           
+000405c0: 206d 6f64 653d 2774 696d 6527 0a20 2020   mode='time'.   
+000405d0: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+000405e0: 7374 616e 6365 2877 616e 745f 756e 6974  stance(want_unit
+000405f0: 2c73 7472 293a 0a20 2020 2020 2020 2020  ,str):.         
+00040600: 2020 2020 2020 2075 705f 7761 6e74 5f75         up_want_u
+00040610: 6e69 743d 7761 6e74 5f75 6e69 742e 7570  nit=want_unit.up
+00040620: 7065 7228 290a 2020 2020 2020 2020 2020  per().          
+00040630: 2020 2020 2020 6966 2075 705f 7761 6e74        if up_want
+00040640: 5f75 6e69 7420 696e 205b 2748 4f55 5227  _unit in ['HOUR'
+00040650: 2c27 4848 272c 2748 4f55 5253 272c 2748  ,'HH','HOURS','H
+00040660: 275d 3a20 7761 6e74 5f75 6e69 743d 2748  ']: want_unit='H
+00040670: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
+00040680: 2020 656c 6966 2075 705f 7761 6e74 5f75    elif up_want_u
+00040690: 6e69 7420 696e 205b 274d 494e 272c 274d  nit in ['MIN','M
+000406a0: 4d27 2c27 4d49 4e55 5445 272c 274d 494e  M','MINUTE','MIN
+000406b0: 5554 4553 272c 274d 275d 3a20 7761 6e74  UTES','M']: want
+000406c0: 5f75 6e69 743d 274d 270a 2020 2020 2020  _unit='M'.      
+000406d0: 2020 2020 2020 2020 2020 656c 6966 2075            elif u
+000406e0: 705f 7761 6e74 5f75 6e69 7420 696e 205b  p_want_unit in [
+000406f0: 2744 4159 272c 2744 4427 2c27 4441 5953  'DAY','DD','DAYS
+00040700: 272c 2744 275d 3a20 7761 6e74 5f75 6e69  ','D']: want_uni
+00040710: 743d 2744 270a 2020 2020 2020 2020 2020  t='D'.          
+00040720: 2020 2020 2020 656c 6966 2075 705f 7761        elif up_wa
+00040730: 6e74 5f75 6e69 7420 696e 205b 2759 4541  nt_unit in ['YEA
+00040740: 5227 2c27 5959 272c 2759 4541 5253 272c  R','YY','YEARS',
+00040750: 2759 275d 3a20 7761 6e74 5f75 6e69 743d  'Y']: want_unit=
+00040760: 2759 270a 2020 2020 2020 2020 2020 2020  'Y'.            
+00040770: 2020 2020 656c 6966 2075 705f 7761 6e74      elif up_want
+00040780: 5f75 6e69 7420 696e 205b 2753 4543 272c  _unit in ['SEC',
+00040790: 2753 5327 2c27 5345 434f 4e44 272c 2753  'SS','SECOND','S
+000407a0: 4543 4f4e 4453 272c 2753 275d 3a20 7761  ECONDS','S']: wa
+000407b0: 6e74 5f75 6e69 743d 2753 270a 2020 2020  nt_unit='S'.    
+000407c0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+000407d0: 2020 2020 2020 6d6f 6465 3d27 6279 7465        mode='byte
+000407e0: 270a 2020 2020 2020 2020 6e75 6d5f 756e  '.        num_un
+000407f0: 6974 3d75 6e69 745b 305d 2e75 7070 6572  it=unit[0].upper
+00040800: 2829 0a20 2020 2020 2020 2023 5449 4d45  ().        #TIME
+00040810: 0a20 2020 2020 2020 2069 6620 6e75 6d5f  .        if num_
+00040820: 756e 6974 203d 3d20 2753 2720 616e 6420  unit == 'S' and 
+00040830: 2869 7369 6e73 7461 6e63 6528 7761 6e74  (isinstance(want
+00040840: 5f75 6e69 742c 7374 7229 2061 6e64 2077  _unit,str) and w
+00040850: 616e 745f 756e 6974 2061 6e64 2077 616e  ant_unit and wan
+00040860: 745f 756e 6974 5b30 5d20 3d3d 2027 2527  t_unit[0] == '%'
+00040870: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
+00040880: 6620 6c65 6e28 7761 6e74 5f75 6e69 7429  f len(want_unit)
+00040890: 203d 3d20 313a 0a20 2020 2020 2020 2020   == 1:.         
+000408a0: 2020 2020 2020 2072 6574 7572 6e20 636f         return co
+000408b0: 6e76 6572 745f 7365 635f 746f 5f66 6f72  nvert_sec_to_for
+000408c0: 6d61 7428 6e75 6d2c 7761 6e74 5f66 6f72  mat(num,want_for
+000408d0: 6d61 743d 2225 5920 256d 2025 6420 2548  mat="%Y %m %d %H
+000408e0: 3a25 4d3a 2553 2229 0a20 2020 2020 2020  :%M:%S").       
+000408f0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00040900: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00040910: 6e20 636f 6e76 6572 745f 7365 635f 746f  n convert_sec_to
+00040920: 5f66 6f72 6d61 7428 6e75 6d2c 7761 6e74  _format(num,want
+00040930: 5f66 6f72 6d61 743d 7761 6e74 5f75 6e69  _format=want_uni
+00040940: 7429 0a20 2020 2020 2020 2023 5449 4d45  t).        #TIME
+00040950: 0a20 2020 2020 2020 2065 6c69 6620 286d  .        elif (m
+00040960: 6f64 6520 3d3d 2027 7469 6d65 2720 616e  ode == 'time' an
+00040970: 6420 7761 6e74 5f75 6e69 7420 696e 205b  d want_unit in [
+00040980: 2759 272c 2744 272c 2748 272c 274d 272c  'Y','D','H','M',
+00040990: 2753 272c 4e6f 6e65 5d29 206f 7220 286e  'S',None]) or (n
+000409a0: 756d 5f75 6e69 7420 696e 205b 2759 272c  um_unit in ['Y',
+000409b0: 2744 272c 2748 272c 274d 272c 2753 275d  'D','H','M','S']
+000409c0: 2061 6e64 2077 616e 745f 756e 6974 2069   and want_unit i
+000409d0: 6e20 5b27 5927 2c27 4427 2c27 4827 2c27  n ['Y','D','H','
+000409e0: 4d27 2c27 5327 5d29 3a0a 2020 2020 2020  M','S']):.      
+000409f0: 2020 2020 2020 6f6f 3d63 6f6e 7665 7274        oo=convert
+00040a00: 5f69 6e74 5f74 696d 655f 746f 5f79 686d  _int_time_to_yhm
+00040a10: 7328 6e75 6d2c 756e 6974 3d6e 756d 5f75  s(num,unit=num_u
+00040a20: 6e69 742c 7761 6e74 3d77 616e 745f 756e  nit,want=want_un
+00040a30: 6974 290a 2020 2020 2020 2020 2020 2020  it).            
+00040a40: 6966 2069 6e74 5f6f 7574 3a0a 2020 2020  if int_out:.    
+00040a50: 2020 2020 2020 2020 2020 2020 6966 2077              if w
+00040a60: 616e 745f 756e 6974 3a23 2061 6e64 2077  ant_unit:# and w
+00040a70: 616e 745f 756e 6974 2069 6e20 6f6f 3a0a  ant_unit in oo:.
+00040a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040a90: 2020 2020 7265 7475 726e 206f 6f2e 6765      return oo.ge
+00040aa0: 7428 7761 6e74 5f75 6e69 742c 3029 0a20  t(want_unit,0). 
+00040ab0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00040ac0: 6c73 653a 2023 2069 6620 7761 6e74 2075  lse: # if want u
+00040ad0: 6e69 7420 6973 204e 6f6e 6520 7468 656e  nit is None then
+00040ae0: 2072 6574 7572 6e20 6e75 6d0a 2020 2020   return num.    
+00040af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040b00: 7265 7475 726e 206e 756d 0a20 2020 2020  return num.     
+00040b10: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00040b20: 2020 2020 2020 2020 2020 2020 206f 3d27               o='
+00040b30: 270a 2020 2020 2020 2020 2020 2020 2020  '.              
+00040b40: 2020 666f 7220 6920 696e 205b 2759 272c    for i in ['Y',
+00040b50: 2744 272c 2748 272c 274d 272c 2753 275d  'D','H','M','S']
+00040b60: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00040b70: 2020 2020 2020 6966 2069 2069 6e20 6f6f        if i in oo
+00040b80: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00040b90: 2020 2020 2020 2020 2020 6966 206f 3a20            if o: 
+00040ba0: 6f3d 6f2b 2720 7b7d 7b7d 272e 666f 726d  o=o+' {}{}'.form
+00040bb0: 6174 286f 6f5b 695d 2c69 290a 2020 2020  at(oo[i],i).    
+00040bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00040bd0: 2020 2020 656c 7365 3a20 6f3d 277b 7d7b      else: o='{}{
+00040be0: 7d27 2e66 6f72 6d61 7428 6f6f 5b69 5d2c  }'.format(oo[i],
+00040bf0: 6929 0a20 2020 2020 2020 2020 2020 2020  i).             
+00040c00: 2020 2072 6574 7572 6e20 6f0a 2020 2020     return o.    
+00040c10: 2020 2020 2342 7974 650a 2020 2020 2020      #Byte.      
+00040c20: 2020 656c 6966 206e 756d 5f75 6e69 7420    elif num_unit 
+00040c30: 696e 205b 2242 222c 224b 222c 224d 222c  in ["B","K","M",
+00040c40: 2247 222c 2254 222c 2250 225d 2061 6e64  "G","T","P"] and
+00040c50: 2077 616e 745f 756e 6974 2069 6e20 5b22   want_unit in ["
+00040c60: 4222 2c22 4b22 2c22 4d22 2c22 4722 2c22  B","K","M","G","
+00040c70: 5422 2c22 5022 2c4e 6f6e 655d 3a0a 2020  T","P",None]:.  
+00040c80: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00040c90: 2068 756d 616e 5f62 7974 6528 6e75 6d2c   human_byte(num,
+00040ca0: 2075 6e69 743d 6e75 6d5f 756e 6974 2c20   unit=num_unit, 
+00040cb0: 7775 6e69 743d 7761 6e74 5f75 6e69 742c  wunit=want_unit,
+00040cc0: 2069 6e74 5f6f 7574 3d69 6e74 5f6f 7574   int_out=int_out
+00040cd0: 290a 2020 2020 7265 7475 726e 2027 556e  ).    return 'Un
+00040ce0: 6b6e 6f77 6e20 556e 6974 287b 7d20 2d3e  known Unit({} ->
+00040cf0: 207b 7d29 272e 666f 726d 6174 2875 6e69   {})'.format(uni
+00040d00: 742c 7761 6e74 5f75 6e69 7429 0a0a 636c  t,want_unit)..cl
+00040d10: 6173 7320 4649 4c45 5f57 3a0a 2020 2020  ass FILE_W:.    
+00040d20: 2727 270a 2020 2020 4e65 7720 6465 7369  '''.    New desi
+00040d30: 676e 2074 6f20 7369 6d70 6c65 0a20 2020  gn to simple.   
+00040d40: 2073 7562 5f64 6972 2020 3a20 5472 7565   sub_dir  : True
+00040d50: 2028 4765 7420 6669 6c65 7320 696e 2072   (Get files in r
+00040d60: 6563 7572 696e 6720 6469 7265 6374 6f72  ecuring director
+00040d70: 7929 0a20 2020 2064 6174 6120 2020 2020  y).    data     
+00040d80: 3a20 5472 7565 2028 4765 7420 4669 6c65  : True (Get File
+00040d90: 2044 6174 6129 0a20 2020 206d 6435 7375   Data).    md5su
+00040da0: 6d20 2020 3a20 5472 7565 2028 4765 7420  m   : True (Get 
+00040db0: 4669 6c65 2773 204d 4435 2053 554d 290a  File's MD5 SUM).
+00040dc0: 2020 2020 6c69 6e6b 3266 696c 653a 2054      link2file: T
+00040dd0: 7275 6520 284d 616b 6520 6120 7265 616c  rue (Make a real
+00040de0: 2066 696c 6520 696e 7374 6561 6420 7379   file instead sy
+00040df0: 6d2d 6c69 6e6b 2066 696c 6529 0a20 2020  m-link file).   
+00040e00: 2066 696c 6520 666f 726d 6174 203a 2073   file format : s
+00040e10: 697a 6520 2831 3329 2b68 6561 6428 7b7d  ize (13)+head({}
+00040e20: 292b 6461 7461 285b 2c2c 2c2c 2c5d 290a  )+data([,,,,,]).
+00040e30: 2020 2020 6865 6164 3a20 7b69 6e66 6f7b      head: {info{
+00040e40: 7d2c 6461 7461 5f69 643a 787d 0a20 2020  },data_id:x}.   
+00040e50: 2027 2727 0a20 2020 2064 6566 205f 5f69   '''.    def __i
+00040e60: 6e69 745f 5f28 7365 6c66 2c2a 696e 702c  nit__(self,*inp,
+00040e70: 2a2a 6f70 7473 293a 0a20 2020 2020 2020  **opts):.       
+00040e80: 2073 656c 662e 726f 6f74 5f70 6174 683d   self.root_path=
+00040e90: 6f70 7473 2e67 6574 2827 726f 6f74 5f70  opts.get('root_p
+00040ea0: 6174 6827 2c4e 6f6e 6529 0a20 2020 2020  ath',None).     
+00040eb0: 2020 2069 6620 4973 4e6f 6e65 2873 656c     if IsNone(sel
+00040ec0: 662e 726f 6f74 5f70 6174 6829 3a20 7365  f.root_path): se
+00040ed0: 6c66 2e72 6f6f 745f 7061 7468 3d50 6174  lf.root_path=Pat
+00040ee0: 6828 290a 2020 2020 2020 2020 7365 6c66  h().        self
+00040ef0: 2e69 6e66 6f3d 6f70 7473 2e67 6574 2827  .info=opts.get('
+00040f00: 696e 666f 272c 6f70 7473 2e67 6574 2827  info',opts.get('
+00040f10: 6461 7461 272c 7b7d 2929 0a0a 2020 2020  data',{}))..    
+00040f20: 6465 6620 4c69 7374 2873 656c 662c 6e61  def List(self,na
+00040f30: 6d65 2c73 7562 5f64 6972 3d46 616c 7365  me,sub_dir=False
+00040f40: 2c64 6972 6e61 6d65 3d46 616c 7365 2c64  ,dirname=False,d
+00040f50: 6566 6175 6c74 3d5b 5d29 3a0a 2020 2020  efault=[]):.    
+00040f60: 2020 2020 2367 6574 2064 6972 6563 746f      #get directo
+00040f70: 7279 2061 6e64 2065 6163 6820 6469 7265  ry and each dire
+00040f80: 6374 6f72 6965 7327 2066 696c 6520 6c69  ctories' file li
+00040f90: 7374 0a20 2020 2020 2020 2069 6620 6973  st.        if is
+00040fa0: 696e 7374 616e 6365 286e 616d 652c 7374  instance(name,st
+00040fb0: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
+00040fc0: 6966 206e 616d 655b 305d 203d 3d20 272f  if name[0] == '/
+00040fd0: 273a 2020 2320 5374 6172 7420 6672 6f6d  ':  # Start from
+00040fe0: 2072 6f6f 7420 7061 7468 0a20 2020 2020   root path.     
+00040ff0: 2020 2020 2020 2020 2020 2069 6620 6f73             if os
+00041000: 2e70 6174 682e 6973 6669 6c65 286e 616d  .path.isfile(nam
+00041010: 6529 206f 7220 6f73 2e70 6174 682e 6973  e) or os.path.is
+00041020: 6c69 6e6b 286e 616d 6529 3a20 7265 7475  link(name): retu
+00041030: 726e 206f 732e 7061 7468 2e64 6972 6e61  rn os.path.dirna
+00041040: 6d65 286e 616d 6529 2c5b 6f73 2e70 6174  me(name),[os.pat
+00041050: 682e 6261 7365 6e61 6d65 286e 616d 6529  h.basename(name)
+00041060: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+00041070: 2020 6966 206f 732e 7061 7468 2e69 7364    if os.path.isd
+00041080: 6972 286e 616d 6529 3a0a 2020 2020 2020  ir(name):.      
+00041090: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000410a0: 2073 7562 5f64 6972 3a0a 2020 2020 2020   sub_dir:.      
+000410b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000410c0: 2020 7274 203d 205b 5d0a 2020 2020 2020    rt = [].      
+000410d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000410e0: 2020 7077 643d 6f73 2e67 6574 6377 6428    pwd=os.getcwd(
+000410f0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00041100: 2020 2020 2020 2020 2020 6f73 2e63 6864            os.chd
+00041110: 6972 286e 616d 6529 0a20 2020 2020 2020  ir(name).       
+00041120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041130: 2066 6f72 2062 6173 652c 2064 6972 732c   for base, dirs,
+00041140: 2066 696c 6573 2069 6e20 6f73 2e77 616c   files in os.wal
+00041150: 6b28 272e 2729 3a0a 2020 2020 2020 2020  k('.'):.        
+00041160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041170: 2020 2020 6966 2064 6972 6e61 6d65 3a20      if dirname: 
+00041180: 7274 2e65 7874 656e 6428 6f73 2e70 6174  rt.extend(os.pat
+00041190: 682e 6a6f 696e 2862 6173 655b 323a 5d2c  h.join(base[2:],
+000411a0: 2064 2920 666f 7220 6420 696e 2064 6972   d) for d in dir
+000411b0: 7329 0a20 2020 2020 2020 2020 2020 2020  s).             
+000411c0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+000411d0: 742e 6578 7465 6e64 286f 732e 7061 7468  t.extend(os.path
+000411e0: 2e6a 6f69 6e28 6261 7365 5b32 3a5d 2c20  .join(base[2:], 
+000411f0: 6629 2066 6f72 2066 2069 6e20 6669 6c65  f) for f in file
+00041200: 7329 0a20 2020 2020 2020 2020 2020 2020  s).             
+00041210: 2020 2020 2020 2020 2020 206f 732e 6368             os.ch
+00041220: 6469 7228 7077 6429 0a20 2020 2020 2020  dir(pwd).       
+00041230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041240: 2072 6574 7572 6e20 5061 7468 286e 616d   return Path(nam
+00041250: 6529 2c72 740a 2020 2020 2020 2020 2020  e),rt.          
+00041260: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00041270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041280: 2020 2020 2020 2020 7265 7475 726e 2050          return P
+00041290: 6174 6828 6e61 6d65 292c 5b66 2066 6f72  ath(name),[f for
+000412a0: 2066 2069 6e20 6f73 2e6c 6973 7464 6972   f in os.listdir
+000412b0: 286e 616d 6529 5d0a 2020 2020 2020 2020  (name)].        
+000412c0: 2020 2020 656c 6966 2073 656c 662e 726f      elif self.ro
+000412d0: 6f74 5f70 6174 683a 2023 2073 7461 7274  ot_path: # start
+000412e0: 2066 726f 6d20 6465 6669 6e65 6420 726f   from defined ro
+000412f0: 6f74 2070 6174 680a 2020 2020 2020 2020  ot path.        
+00041300: 2020 2020 2020 2020 6368 6b5f 7061 7468          chk_path
+00041310: 3d50 6174 6828 7365 6c66 2e72 6f6f 745f  =Path(self.root_
+00041320: 7061 7468 2c6e 616d 6529 0a20 2020 2020  path,name).     
+00041330: 2020 2020 2020 2020 2020 2069 6620 6f73             if os
+00041340: 2e70 6174 682e 6973 6669 6c65 2863 686b  .path.isfile(chk
+00041350: 5f70 6174 6829 206f 7220 6f73 2e70 6174  _path) or os.pat
+00041360: 682e 6973 6c69 6e6b 2863 686b 5f70 6174  h.islink(chk_pat
+00041370: 6829 3a20 7265 7475 726e 2050 6174 6828  h): return Path(
+00041380: 7365 6c66 2e72 6f6f 745f 7061 7468 292c  self.root_path),
+00041390: 5b6e 616d 655d 0a20 2020 2020 2020 2020  [name].         
+000413a0: 2020 2020 2020 2069 6620 6f73 2e70 6174         if os.pat
+000413b0: 682e 6973 6469 7228 6368 6b5f 7061 7468  h.isdir(chk_path
+000413c0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+000413d0: 2020 2020 2020 2069 6620 7375 625f 6469         if sub_di
+000413e0: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
+000413f0: 2020 2020 2020 2020 2020 2072 7420 3d20             rt = 
+00041400: 5b5d 0a20 2020 2020 2020 2020 2020 2020  [].             
+00041410: 2020 2020 2020 2020 2020 2070 7764 3d6f             pwd=o
+00041420: 732e 6765 7463 7764 2829 0a20 2020 2020  s.getcwd().     
+00041430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041440: 2020 206f 732e 6368 6469 7228 7365 6c66     os.chdir(self
+00041450: 2e72 6f6f 745f 7061 7468 2920 2320 476f  .root_path) # Go
+00041460: 696e 6720 746f 2064 6566 696e 6564 2072  ing to defined r
+00041470: 6f6f 7420 7061 7468 0a20 2020 2020 2020  oot path.       
+00041480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041490: 2023 2047 6574 2072 6563 7572 696e 6720   # Get recuring 
+000414a0: 6669 6c65 206c 6973 7420 6f66 2074 6865  file list of the
+000414b0: 206e 616d 6520 2877 6865 6e20 6375 7272   name (when curr
+000414c0: 656e 7420 6469 7220 7468 656e 2027 2e27  ent dir then '.'
+000414d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000414e0: 2020 2020 2020 2020 2020 666f 7220 6261            for ba
+000414f0: 7365 2c20 6469 7273 2c20 6669 6c65 7320  se, dirs, files 
+00041500: 696e 206f 732e 7761 6c6b 286e 616d 6529  in os.walk(name)
+00041510: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00041520: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00041530: 2064 6972 6e61 6d65 3a20 7274 2e65 7874   dirname: rt.ext
+00041540: 656e 6428 6f73 2e70 6174 682e 6a6f 696e  end(os.path.join
+00041550: 2862 6173 655b 323a 5d2c 2064 2920 666f  (base[2:], d) fo
+00041560: 7220 6420 696e 2064 6972 7329 0a20 2020  r d in dirs).   
+00041570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041580: 2020 2020 2020 2020 2072 742e 6578 7465           rt.exte
+00041590: 6e64 286f 732e 7061 7468 2e6a 6f69 6e28  nd(os.path.join(
+000415a0: 6261 7365 5b32 3a5d 2c20 6629 2066 6f72  base[2:], f) for
+000415b0: 2066 2069 6e20 6669 6c65 7329 0a20 2020   f in files).   
+000415c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000415d0: 2020 2020 206f 732e 6368 6469 7228 7077       os.chdir(pw
+000415e0: 6429 2023 2072 6563 6f76 6572 2074 6f20  d) # recover to 
+000415f0: 7468 6520 6f72 6967 696e 616c 2070 6174  the original pat
+00041600: 680a 2020 2020 2020 2020 2020 2020 2020  h.              
+00041610: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00041620: 2050 6174 6828 7365 6c66 2e72 6f6f 745f   Path(self.root_
+00041630: 7061 7468 292c 7274 0a20 2020 2020 2020  path),rt.       
+00041640: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+00041650: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00041660: 2020 2020 2020 2020 2020 2069 6620 6e61             if na
+00041670: 6d65 203d 3d20 272e 273a 206e 616d 653d  me == '.': name=
+00041680: 2727 0a20 2020 2020 2020 2020 2020 2020  ''.             
+00041690: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000416a0: 6e20 5061 7468 2873 656c 662e 726f 6f74  n Path(self.root
+000416b0: 5f70 6174 6829 2c5b 6f73 2e70 6174 682e  _path),[os.path.
+000416c0: 6a6f 696e 286e 616d 652c 6629 2066 6f72  join(name,f) for
+000416d0: 2066 2069 6e20 6f73 2e6c 6973 7464 6972   f in os.listdir
+000416e0: 2827 7b7d 2f7b 7d27 2e66 6f72 6d61 7428  ('{}/{}'.format(
+000416f0: 7365 6c66 2e72 6f6f 745f 7061 7468 2c6e  self.root_path,n
+00041700: 616d 6529 295d 0a20 2020 2020 2020 2072  ame))].        r
+00041710: 6574 7572 6e20 6465 6661 756c 742c 5b5d  eturn default,[]
+00041720: 0a0a 2020 2020 6465 6620 4669 6c65 4e61  ..    def FileNa
+00041730: 6d65 2873 656c 662c 6669 6c65 6e61 6d65  me(self,filename
+00041740: 293a 0a20 2020 2020 2020 2069 6620 6973  ):.        if is
+00041750: 696e 7374 616e 6365 2866 696c 656e 616d  instance(filenam
+00041760: 652c 7374 7229 3a0a 2020 2020 2020 2020  e,str):.        
+00041770: 2020 2020 6669 6c65 6e61 6d65 5f69 6e66      filename_inf
+00041780: 6f3d 6f73 2e70 6174 682e 6261 7365 6e61  o=os.path.basena
+00041790: 6d65 2866 696c 656e 616d 6529 2e73 706c  me(filename).spl
+000417a0: 6974 2827 2e27 290a 2020 2020 2020 2020  it('.').        
+000417b0: 2020 2020 6966 2027 7461 7227 2069 6e20      if 'tar' in 
+000417c0: 6669 6c65 6e61 6d65 5f69 6e66 6f3a 0a20  filename_info:. 
+000417d0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000417e0: 6478 3d66 696c 656e 616d 655f 696e 666f  dx=filename_info
+000417f0: 2e69 6e64 6578 2827 7461 7227 290a 2020  .index('tar').  
+00041800: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00041810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00041820: 6964 783d 2d31 0a20 2020 2020 2020 2020  idx=-1.         
+00041830: 2020 2072 6574 7572 6e20 4a6f 696e 2866     return Join(f
+00041840: 696c 656e 616d 655f 696e 666f 5b3a 6964  ilename_info[:id
+00041850: 785d 2c73 796d 626f 6c3d 272e 2729 2c4a  x],symbol='.'),J
+00041860: 6f69 6e28 6669 6c65 6e61 6d65 5f69 6e66  oin(filename_inf
+00041870: 6f5b 6964 783a 5d2c 7379 6d62 6f6c 3d27  o[idx:],symbol='
+00041880: 2e27 290a 2020 2020 2020 2020 7265 7475  .').        retu
+00041890: 726e 204e 6f6e 652c 4e6f 6e65 0a0a 2020  rn None,None..  
+000418a0: 2020 6465 6620 4669 6c65 5479 7065 2873    def FileType(s
+000418b0: 656c 662c 6669 6c65 6e61 6d65 2c64 6566  elf,filename,def
+000418c0: 6175 6c74 3d46 616c 7365 293a 0a20 2020  ault=False):.   
+000418d0: 2020 2020 2069 6620 6e6f 7420 6973 696e       if not isin
+000418e0: 7374 616e 6365 2866 696c 656e 616d 652c  stance(filename,
+000418f0: 7374 7229 206f 7220 6e6f 7420 6f73 2e70  str) or not os.p
+00041900: 6174 682e 6973 6669 6c65 2866 696c 656e  ath.isfile(filen
+00041910: 616d 6529 3a20 7265 7475 726e 2064 6566  ame): return def
+00041920: 6175 6c74 0a20 2020 2020 2020 2049 6d70  ault.        Imp
+00041930: 6f72 7428 2769 6d70 6f72 7420 6d61 6769  ort('import magi
+00041940: 6327 290a 2020 2020 2020 2020 663d 6f70  c').        f=op
+00041950: 656e 2866 696c 656e 616d 652c 2772 6227  en(filename,'rb'
+00041960: 290a 2020 2020 2020 2020 6161 3d6d 6167  ).        aa=mag
+00041970: 6963 2e66 726f 6d5f 6275 6666 6572 2866  ic.from_buffer(f
+00041980: 2e72 6561 6428 3230 3438 2929 0a20 2020  .read(2048)).   
+00041990: 2020 2020 2066 2e63 6c6f 7365 2829 0a20       f.close(). 
+000419a0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+000419b0: 616e 6365 2861 612c 7374 7229 3a20 7265  ance(aa,str): re
+000419c0: 7475 726e 2061 612e 7370 6c69 7428 295b  turn aa.split()[
+000419d0: 305d 2e6c 6f77 6572 2829 0a20 2020 2020  0].lower().     
+000419e0: 2020 2072 6574 7572 6e20 2775 6e6b 6e6f     return 'unkno
+000419f0: 776e 270a 0a20 2020 2064 6566 2046 696c  wn'..    def Fil
+00041a00: 6549 6e66 6f28 7365 6c66 2c66 696c 656e  eInfo(self,filen
+00041a10: 616d 652c 726f 6f74 733d 4e6f 6e65 2c5f  ame,roots=None,_
+00041a20: 7479 7065 3d4e 6f6e 652c 6578 6973 743d  type=None,exist=
+00041a30: 4e6f 6e65 293a 0a20 2020 2020 2020 2069  None):.        i
+00041a40: 6620 7365 6c66 2e69 6e66 6f3a 2023 2066  f self.info: # f
+00041a50: 726f 6d20 696e 7369 6465 2064 6174 610a  rom inside data.
+00041a60: 2020 2020 2020 2020 2020 2020 6966 2049              if I
+00041a70: 734e 6f6e 6528 726f 6f74 7329 3a20 726f  sNone(roots): ro
+00041a80: 6f74 733d 7365 6c66 2e46 696e 6452 5028  ots=self.FindRP(
+00041a90: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+00041aa0: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
+00041ab0: 6669 6c65 6e61 6d65 2c73 7472 2920 6f72  filename,str) or
+00041ac0: 2049 734e 6f6e 6528 6669 6c65 6e61 6d65   IsNone(filename
+00041ad0: 293a 2072 6574 7572 6e20 4661 6c73 650a  ): return False.
+00041ae0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00041af0: 726f 6f74 2069 6e20 726f 6f74 733a 0a20  root in roots:. 
+00041b00: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00041b10: 743d 7365 6c66 2e69 6e66 6f2e 6765 7428  t=self.info.get(
+00041b20: 726f 6f74 2c7b 7d29 0a20 2020 2020 2020  root,{}).       
+00041b30: 2020 2020 2020 2020 2066 6f72 2069 6920           for ii 
+00041b40: 696e 2066 696c 656e 616d 652e 7370 6c69  in filename.spli
+00041b50: 7428 272f 2729 3a0a 2020 2020 2020 2020  t('/'):.        
+00041b60: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00041b70: 6920 6e6f 7420 696e 2072 743a 2072 6574  i not in rt: ret
+00041b80: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
+00041b90: 2020 2020 2020 2020 2020 2020 2020 7274                rt
+00041ba0: 3d72 745b 6969 5d0a 2020 2020 2020 2020  =rt[ii].        
+00041bb0: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+00041bc0: 742e 6765 7428 2720 6920 272c 4661 6c73  t.get(' i ',Fals
+00041bd0: 6529 0a0a 2020 2020 2020 2020 2320 6672  e)..        # fr
+00041be0: 6f6d 2072 6561 6c20 6669 6c65 0a20 2020  om real file.   
+00041bf0: 2020 2020 2072 743d 7b7d 0a20 2020 2020       rt={}.     
+00041c00: 2020 2069 6620 6578 6973 7420 6973 2046     if exist is F
+00041c10: 616c 7365 3a20 7265 7475 726e 207b 2765  alse: return {'e
+00041c20: 7869 7374 273a 4661 6c73 657d 0a20 2020  xist':False}.   
+00041c30: 2020 2020 2072 745b 276e 616d 6527 5d2c       rt['name'],
+00041c40: 7274 5b27 6578 7427 5d3d 7365 6c66 2e46  rt['ext']=self.F
+00041c50: 696c 654e 616d 6528 6669 6c65 6e61 6d65  ileName(filename
+00041c60: 290a 2020 2020 2020 2020 6966 206f 732e  ).        if os.
+00041c70: 7061 7468 2e65 7869 7374 7328 6669 6c65  path.exists(file
+00041c80: 6e61 6d65 293a 0a20 2020 2020 2020 2020  name):.         
+00041c90: 2020 2073 7461 7465 3d6f 732e 7374 6174     state=os.stat
+00041ca0: 2866 696c 656e 616d 6529 0a20 2020 2020  (filename).     
+00041cb0: 2020 2020 2020 2072 745b 2765 7869 7374         rt['exist
+00041cc0: 275d 3d54 7275 650a 2020 2020 2020 2020  ']=True.        
+00041cd0: 2020 2020 7274 5b27 7369 7a65 275d 3d73      rt['size']=s
+00041ce0: 7461 7465 2e73 745f 7369 7a65 0a20 2020  tate.st_size.   
+00041cf0: 2020 2020 2020 2020 2072 745b 276d 6f64           rt['mod
+00041d00: 6527 5d3d 6f63 7428 7374 6174 652e 7374  e']=oct(state.st
+00041d10: 5f6d 6f64 6529 5b2d 343a 5d0a 2020 2020  _mode)[-4:].    
+00041d20: 2020 2020 2020 2020 7274 5b27 6174 696d          rt['atim
+00041d30: 6527 5d3d 7374 6174 652e 7374 5f61 7469  e']=state.st_ati
+00041d40: 6d65 0a20 2020 2020 2020 2020 2020 2072  me.            r
+00041d50: 745b 276d 7469 6d65 275d 3d73 7461 7465  t['mtime']=state
+00041d60: 2e73 745f 6d74 696d 650a 2020 2020 2020  .st_mtime.      
+00041d70: 2020 2020 2020 7274 5b27 6374 696d 6527        rt['ctime'
+00041d80: 5d3d 7374 6174 652e 7374 5f63 7469 6d65  ]=state.st_ctime
+00041d90: 0a20 2020 2020 2020 2020 2020 2072 745b  .            rt[
+00041da0: 2767 6964 275d 3d73 7461 7465 2e73 745f  'gid']=state.st_
+00041db0: 6769 640a 2020 2020 2020 2020 2020 2020  gid.            
+00041dc0: 7274 5b27 7569 6427 5d3d 7374 6174 652e  rt['uid']=state.
+00041dd0: 7374 5f75 6964 0a20 2020 2020 2020 2020  st_uid.         
+00041de0: 2020 2069 6620 4973 4e6f 6e65 285f 7479     if IsNone(_ty
+00041df0: 7065 293a 0a20 2020 2020 2020 2020 2020  pe):.           
+00041e00: 2020 2020 2072 745b 2774 7970 6527 5d3d       rt['type']=
+00041e10: 5f74 7970 650a 2020 2020 2020 2020 2020  _type.          
+00041e20: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00041e30: 2020 2020 2020 2020 6966 206f 732e 7061          if os.pa
+00041e40: 7468 2e69 736c 696e 6b28 6669 6c65 6e61  th.islink(filena
+00041e50: 6d65 293a 0a20 2020 2020 2020 2020 2020  me):.           
+00041e60: 2020 2020 2020 2020 2072 745b 2774 7970           rt['typ
+00041e70: 6527 5d3d 276c 696e 6b27 0a20 2020 2020  e']='link'.     
+00041e80: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00041e90: 6f73 2e70 6174 682e 6973 6469 7228 6669  os.path.isdir(fi
+00041ea0: 6c65 6e61 6d65 293a 0a20 2020 2020 2020  lename):.       
+00041eb0: 2020 2020 2020 2020 2020 2020 2072 745b               rt[
+00041ec0: 2774 7970 6527 5d3d 2764 6972 270a 2020  'type']='dir'.  
+00041ed0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00041ee0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00041ef0: 2020 2020 2020 2020 7274 5b27 7479 7065          rt['type
+00041f00: 275d 3d73 656c 662e 4669 6c65 5479 7065  ']=self.FileType
+00041f10: 2866 696c 656e 616d 6529 0a20 2020 2020  (filename).     
+00041f20: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00041f30: 2020 2020 2072 745b 2765 7869 7374 275d       rt['exist']
+00041f40: 3d46 616c 7365 0a20 2020 2020 2020 2072  =False.        r
+00041f50: 6574 7572 6e20 7274 0a0a 2020 2020 6465  eturn rt..    de
+00041f60: 6620 4364 5061 7468 2873 656c 662c 6261  f CdPath(self,ba
+00041f70: 7365 2c70 6174 6829 3a0a 2020 2020 2020  se,path):.      
+00041f80: 2020 7274 3d62 6173 650a 2020 2020 2020    rt=base.      
+00041f90: 2020 666f 7220 6969 2069 6e20 7061 7468    for ii in path
+00041fa0: 2e73 706c 6974 2827 2f27 293a 0a20 2020  .split('/'):.   
+00041fb0: 2020 2020 2020 2020 2069 6620 6969 206e           if ii n
+00041fc0: 6f74 2069 6e20 7274 3a20 7265 7475 726e  ot in rt: return
+00041fd0: 2046 616c 7365 0a20 2020 2020 2020 2020   False.         
+00041fe0: 2020 2072 743d 7274 5b69 695d 0a20 2020     rt=rt[ii].   
+00041ff0: 2020 2020 2072 6574 7572 6e20 7274 0a0a       return rt..
+00042000: 2020 2020 6465 6620 4d6b 496e 666f 2873      def MkInfo(s
+00042010: 656c 662c 7274 2c66 696c 656e 616d 653d  elf,rt,filename=
+00042020: 4e6f 6e65 2c2a 2a6f 7074 7329 3a0a 2020  None,**opts):.  
+00042030: 2020 2020 2020 6966 2027 2069 2027 206e        if ' i ' n
+00042040: 6f74 2069 6e20 7274 3a20 7274 5b27 2069  ot in rt: rt[' i
+00042050: 2027 5d3d 7b7d 0a20 2020 2020 2020 2072   ']={}.        r
+00042060: 745b 2720 6920 275d 3d73 656c 662e 4669  t[' i ']=self.Fi
+00042070: 6c65 496e 666f 2866 696c 656e 616d 652c  leInfo(filename,
+00042080: 5f74 7970 653d 6f70 7473 2e67 6574 2827  _type=opts.get('
+00042090: 7479 7065 2729 2c65 7869 7374 3d6f 7074  type'),exist=opt
+000420a0: 732e 6765 7428 2765 7869 7374 2729 290a  s.get('exist')).
+000420b0: 2020 2020 2020 2020 6966 206f 7074 733a          if opts:
+000420c0: 2072 745b 2720 6920 275d 2e75 7064 6174   rt[' i '].updat
+000420d0: 6528 6f70 7473 290a 0a20 2020 2064 6566  e(opts)..    def
+000420e0: 2047 6574 2873 656c 662c 2a66 696c 656e   Get(self,*filen
+000420f0: 616d 6573 2c2a 2a6f 7074 7329 3a0a 2020  ames,**opts):.  
+00042100: 2020 2020 2020 6261 7365 3d7b 7d0a 2020        base={}.  
+00042110: 2020 2020 2020 6669 6c65 6c69 7374 3d7b        filelist={
+00042120: 7d0a 2020 2020 2020 2020 6465 6620 4d6b  }.        def Mk
+00042130: 5061 7468 2862 6173 652c 7061 7468 2c72  Path(base,path,r
+00042140: 6f6f 745f 7061 7468 293a 0a20 2020 2020  oot_path):.     
+00042150: 2020 2020 2020 2072 743d 6261 7365 0a20         rt=base. 
+00042160: 2020 2020 2020 2020 2020 2063 686b 5f64             chk_d
+00042170: 6972 3d27 7b7d 272e 666f 726d 6174 2872  ir='{}'.format(r
+00042180: 6f6f 745f 7061 7468 290a 2020 2020 2020  oot_path).      
+00042190: 2020 2020 2020 666f 7220 6969 2069 6e20        for ii in 
+000421a0: 7061 7468 2e73 706c 6974 2827 2f27 293a  path.split('/'):
+000421b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000421c0: 2069 6620 6969 3a0a 2020 2020 2020 2020   if ii:.        
+000421d0: 2020 2020 2020 2020 2020 2020 6368 6b5f              chk_
+000421e0: 6469 723d 5061 7468 2863 686b 5f64 6972  dir=Path(chk_dir
+000421f0: 2c69 6929 0a20 2020 2020 2020 2020 2020  ,ii).           
+00042200: 2020 2020 2020 2020 2069 6620 6969 206e           if ii n
+00042210: 6f74 2069 6e20 7274 3a0a 2020 2020 2020  ot in rt:.      
+00042220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042230: 2020 7274 5b69 695d 3d7b 7d0a 2020 2020    rt[ii]={}.    
+00042240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042250: 2020 2020 6966 206f 732e 7061 7468 2e69      if os.path.i
+00042260: 7364 6972 2863 686b 5f64 6972 293a 2073  sdir(chk_dir): s
+00042270: 656c 662e 4d6b 496e 666f 2872 745b 6969  elf.MkInfo(rt[ii
+00042280: 5d2c 6368 6b5f 6469 722c 7479 7065 3d27  ],chk_dir,type='
+00042290: 6469 7227 290a 2020 2020 2020 2020 2020  dir').          
+000422a0: 2020 2020 2020 2020 2020 7274 3d72 745b            rt=rt[
+000422b0: 6969 5d0a 2020 2020 2020 2020 2020 2020  ii].            
+000422c0: 7265 7475 726e 2072 740a 0a20 2020 2020  return rt..     
+000422d0: 2020 2064 6566 205f 4765 745f 2872 6f6f     def _Get_(roo
+000422e0: 745f 7061 7468 2c2a 6669 6c65 6e61 6d65  t_path,*filename
+000422f0: 732c 2a2a 6f70 7473 293a 0a20 2020 2020  s,**opts):.     
+00042300: 2020 2020 2020 2064 6174 613d 6f70 7473         data=opts
+00042310: 2e67 6574 2827 6461 7461 272c 4661 6c73  .get('data',Fals
+00042320: 6529 0a20 2020 2020 2020 2020 2020 206d  e).            m
+00042330: 6435 7375 6d3d 6f70 7473 2e67 6574 2827  d5sum=opts.get('
+00042340: 6d64 3573 756d 272c 4661 6c73 6529 0a20  md5sum',False). 
+00042350: 2020 2020 2020 2020 2020 206c 696e 6b32             link2
+00042360: 6669 6c65 3d6f 7074 732e 6765 7428 276c  file=opts.get('l
+00042370: 696e 6b32 6669 6c65 272c 4661 6c73 6529  ink2file',False)
+00042380: 0a0a 2020 2020 2020 2020 2020 2020 666f  ..            fo
+00042390: 7220 6669 6c65 6e61 6d65 2069 6e20 6669  r filename in fi
+000423a0: 6c65 6e61 6d65 733a 0a20 2020 2020 2020  lenames:.       
+000423b0: 2020 2020 2020 2020 2074 6669 6c65 6e61           tfilena
+000423c0: 6d65 3d50 6174 6828 726f 6f74 5f70 6174  me=Path(root_pat
+000423d0: 682c 6669 6c65 6e61 6d65 290a 2020 2020  h,filename).    
+000423e0: 2020 2020 2020 2020 2020 2020 6966 206f              if o
+000423f0: 732e 7061 7468 2e65 7869 7374 7328 7466  s.path.exists(tf
+00042400: 696c 656e 616d 6529 3a0a 2020 2020 2020  ilename):.      
+00042410: 2020 2020 2020 2020 2020 2020 2020 7274                rt
+00042420: 3d4d 6b50 6174 6828 6261 7365 2c66 696c  =MkPath(base,fil
+00042430: 656e 616d 652c 726f 6f74 5f70 6174 6829  ename,root_path)
+00042440: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00042450: 2020 2020 2069 6620 6f73 2e70 6174 682e       if os.path.
+00042460: 6973 6c69 6e6b 2874 6669 6c65 6e61 6d65  islink(tfilename
+00042470: 293a 2023 2069 7420 6973 2061 204c 696e  ): # it is a Lin
+00042480: 6b20 4669 6c65 0a20 2020 2020 2020 2020  k File.         
+00042490: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000424a0: 6620 6f73 2e70 6174 682e 6973 6669 6c65  f os.path.isfile
+000424b0: 2866 696c 656e 616d 6529 3a20 2320 6974  (filename): # it
+000424c0: 2069 7320 6120 4669 6c65 0a20 2020 2020   is a File.     
+000424d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000424e0: 2020 2020 2020 2069 6620 6c69 6e6b 3266         if link2f
+000424f0: 696c 653a 0a20 2020 2020 2020 2020 2020  ile:.           
+00042500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042510: 2020 2020 205f 6d64 353d 4e6f 6e65 0a20       _md5=None. 
+00042520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042530: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00042540: 6620 6461 7461 206f 7220 6d64 3573 756d  f data or md5sum
+00042550: 3a20 2320 4d44 3553 554d 206f 7220 4461  : # MD5SUM or Da
+00042560: 7461 0a20 2020 2020 2020 2020 2020 2020  ta.             
+00042570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042580: 2020 2020 2020 2066 696c 6564 6174 613d         filedata=
+00042590: 7365 6c66 2e52 7728 7466 696c 656e 616d  self.Rw(tfilenam
+000425a0: 652c 6f75 743d 2762 7974 6527 290a 2020  e,out='byte').  
+000425b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000425c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000425d0: 2020 6966 2066 696c 6564 6174 615b 305d    if filedata[0]
+000425e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000425f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042600: 2020 2020 2020 2020 2020 6966 2064 6174            if dat
+00042610: 613a 2072 745b 2764 6174 6127 5d3d 6669  a: rt['data']=fi
+00042620: 6c65 6461 7461 5b31 5d0a 2020 2020 2020  ledata[1].      
+00042630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042650: 2020 6966 206d 6435 7375 6d3a 205f 6d64    if md5sum: _md
+00042660: 353d 6d64 3528 6669 6c65 6461 7461 5b31  5=md5(filedata[1
+00042670: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
+00042680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042690: 2020 2073 656c 662e 4d6b 496e 666f 2872     self.MkInfo(r
+000426a0: 742c 6669 6c65 6e61 6d65 3d74 6669 6c65  t,filename=tfile
+000426b0: 6e61 6d65 2c74 7970 653d 7365 6c66 2e46  name,type=self.F
+000426c0: 696c 6554 7970 6528 7466 696c 656e 616d  ileType(tfilenam
+000426d0: 6529 2c6d 6435 3d5f 6d64 3529 0a20 2020  e),md5=_md5).   
 000426e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000426f0: 2020 2073 656c 662e 4d6b 496e 666f 2872     self.MkInfo(r
-00042700: 742c 6669 6c65 6e61 6d65 3d74 6669 6c65  t,filename=tfile
-00042710: 6e61 6d65 2c74 7970 653d 7365 6c66 2e46  name,type=self.F
-00042720: 696c 6554 7970 6528 7466 696c 656e 616d  ileType(tfilenam
-00042730: 6529 2c6d 6435 3d5f 6d64 3529 0a20 2020  e),md5=_md5).   
-00042740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042750: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00042760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042770: 2020 2020 2020 2073 656c 662e 4d6b 496e         self.MkIn
-00042780: 666f 2872 742c 6669 6c65 6e61 6d65 3d74  fo(rt,filename=t
-00042790: 6669 6c65 6e61 6d65 2c74 7970 653d 276c  filename,type='l
-000427a0: 696e 6b27 2c64 6573 743d 6f73 2e72 6561  ink',dest=os.rea
-000427b0: 646c 696e 6b28 7466 696c 656e 616d 6529  dlink(tfilename)
-000427c0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000427d0: 2020 2020 2020 656c 6966 206f 732e 7061        elif os.pa
-000427e0: 7468 2e69 7364 6972 2874 6669 6c65 6e61  th.isdir(tfilena
-000427f0: 6d65 293a 2023 2069 7420 6973 2061 2064  me): # it is a d
-00042800: 6972 6563 746f 7279 0a20 2020 2020 2020  irectory.       
-00042810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042820: 2073 656c 662e 4d6b 496e 666f 2872 742c   self.MkInfo(rt,
-00042830: 7466 696c 656e 616d 652c 7479 7065 3d27  tfilename,type='
-00042840: 6469 7227 290a 2020 2020 2020 2020 2020  dir').          
-00042850: 2020 2020 2020 2020 2020 656c 6966 206f            elif o
-00042860: 732e 7061 7468 2e69 7366 696c 6528 7466  s.path.isfile(tf
-00042870: 696c 656e 616d 6529 3a20 2320 6974 2069  ilename): # it i
-00042880: 7320 6120 4669 6c65 0a20 2020 2020 2020  s a File.       
+000426f0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00042700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042710: 2020 2020 2020 2073 656c 662e 4d6b 496e         self.MkIn
+00042720: 666f 2872 742c 6669 6c65 6e61 6d65 3d74  fo(rt,filename=t
+00042730: 6669 6c65 6e61 6d65 2c74 7970 653d 276c  filename,type='l
+00042740: 696e 6b27 2c64 6573 743d 6f73 2e72 6561  ink',dest=os.rea
+00042750: 646c 696e 6b28 7466 696c 656e 616d 6529  dlink(tfilename)
+00042760: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00042770: 2020 2020 2020 656c 6966 206f 732e 7061        elif os.pa
+00042780: 7468 2e69 7364 6972 2874 6669 6c65 6e61  th.isdir(tfilena
+00042790: 6d65 293a 2023 2069 7420 6973 2061 2064  me): # it is a d
+000427a0: 6972 6563 746f 7279 0a20 2020 2020 2020  irectory.       
+000427b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000427c0: 2073 656c 662e 4d6b 496e 666f 2872 742c   self.MkInfo(rt,
+000427d0: 7466 696c 656e 616d 652c 7479 7065 3d27  tfilename,type='
+000427e0: 6469 7227 290a 2020 2020 2020 2020 2020  dir').          
+000427f0: 2020 2020 2020 2020 2020 656c 6966 206f            elif o
+00042800: 732e 7061 7468 2e69 7366 696c 6528 7466  s.path.isfile(tf
+00042810: 696c 656e 616d 6529 3a20 2320 6974 2069  ilename): # it i
+00042820: 7320 6120 4669 6c65 0a20 2020 2020 2020  s a File.       
+00042830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042840: 205f 6d64 353d 4e6f 6e65 0a20 2020 2020   _md5=None.     
+00042850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042860: 2020 2069 6620 6461 7461 206f 7220 6d64     if data or md
+00042870: 3573 756d 3a20 2320 4d44 3553 554d 206f  5sum: # MD5SUM o
+00042880: 7220 4461 7461 0a20 2020 2020 2020 2020  r Data.         
 00042890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000428a0: 205f 6d64 353d 4e6f 6e65 0a20 2020 2020   _md5=None.     
-000428b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000428c0: 2020 2069 6620 6461 7461 206f 7220 6d64     if data or md
-000428d0: 3573 756d 3a20 2320 4d44 3553 554d 206f  5sum: # MD5SUM o
-000428e0: 7220 4461 7461 0a20 2020 2020 2020 2020  r Data.         
-000428f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042900: 2020 2066 696c 6564 6174 613d 7365 6c66     filedata=self
-00042910: 2e52 7728 7466 696c 656e 616d 652c 6f75  .Rw(tfilename,ou
-00042920: 743d 2762 7974 6527 290a 2020 2020 2020  t='byte').      
-00042930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042940: 2020 2020 2020 6966 2066 696c 6564 6174        if filedat
-00042950: 615b 305d 3a0a 2020 2020 2020 2020 2020  a[0]:.          
-00042960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042970: 2020 2020 2020 6966 2064 6174 613a 2072        if data: r
-00042980: 745b 2764 6174 6127 5d3d 6669 6c65 6461  t['data']=fileda
-00042990: 7461 5b31 5d0a 2020 2020 2020 2020 2020  ta[1].          
-000429a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000429b0: 2020 2020 2020 6966 206d 6435 7375 6d3a        if md5sum:
-000429c0: 205f 6d64 353d 6d64 3528 6669 6c65 6461   _md5=md5(fileda
-000429d0: 7461 5b31 5d29 0a20 2020 2020 2020 2020  ta[1]).         
-000429e0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000429f0: 656c 662e 4d6b 496e 666f 2872 742c 6669  elf.MkInfo(rt,fi
-00042a00: 6c65 6e61 6d65 3d74 6669 6c65 6e61 6d65  lename=tfilename
-00042a10: 2c74 7970 653d 7365 6c66 2e46 696c 6554  ,type=self.FileT
-00042a20: 7970 6528 7466 696c 656e 616d 6529 2c6d  ype(tfilename),m
-00042a30: 6435 3d5f 6d64 3529 0a20 2020 2020 2020  d5=_md5).       
-00042a40: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00042a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042a60: 2020 2073 656c 662e 4d6b 496e 666f 2872     self.MkInfo(r
-00042a70: 742c 6669 6c65 6e61 6d65 2c65 7869 7374  t,filename,exist
-00042a80: 3d46 616c 7365 290a 2020 2020 2020 2020  =False).        
-00042a90: 2020 2020 6966 2062 6173 653a 0a20 2020      if base:.   
-00042aa0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00042ab0: 7572 6e20 7b72 6f6f 745f 7061 7468 3a62  urn {root_path:b
-00042ac0: 6173 657d 0a20 2020 2020 2020 2020 2020  ase}.           
-00042ad0: 2072 6574 7572 6e20 7b7d 0a0a 2020 2020   return {}..    
-00042ae0: 2020 2020 6966 206e 6f74 2066 696c 656e      if not filen
-00042af0: 616d 6573 3a20 6669 6c65 6e61 6d65 733d  ames: filenames=
-00042b00: 5b27 2e27 5d0a 2020 2020 2020 2020 666f  ['.'].        fo
-00042b10: 7220 6669 6c65 6e61 6d65 2069 6e20 6669  r filename in fi
-00042b20: 6c65 6e61 6d65 733a 0a20 2020 2020 2020  lenames:.       
-00042b30: 2020 2020 2072 6f6f 745f 7061 7468 2c66       root_path,f
-00042b40: 6c69 7374 3d73 656c 662e 4c69 7374 2866  list=self.List(f
-00042b50: 696c 656e 616d 652c 7375 625f 6469 723d  ilename,sub_dir=
-00042b60: 6f70 7473 2e67 6574 2827 7375 625f 6469  opts.get('sub_di
-00042b70: 7227 2c46 616c 7365 292c 6469 726e 616d  r',False),dirnam
-00042b80: 653d 5472 7565 290a 2020 2020 2020 2020  e=True).        
-00042b90: 2020 2020 6966 2072 6f6f 745f 7061 7468      if root_path
-00042ba0: 206e 6f74 2069 6e20 6669 6c65 6c69 7374   not in filelist
-00042bb0: 3a20 6669 6c65 6c69 7374 5b72 6f6f 745f  : filelist[root_
-00042bc0: 7061 7468 5d3d 5b5d 0a20 2020 2020 2020  path]=[].       
-00042bd0: 2020 2020 2066 696c 656c 6973 745b 726f       filelist[ro
-00042be0: 6f74 5f70 6174 685d 3d66 696c 656c 6973  ot_path]=filelis
-00042bf0: 745b 726f 6f74 5f70 6174 685d 2b66 6c69  t[root_path]+fli
-00042c00: 7374 0a0a 2020 2020 2020 2020 666f 7220  st..        for 
-00042c10: 6666 2069 6e20 6669 6c65 6c69 7374 3a0a  ff in filelist:.
-00042c20: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00042c30: 2e69 6e66 6f2e 7570 6461 7465 285f 4765  .info.update(_Ge
-00042c40: 745f 2866 662c 2a66 696c 656c 6973 745b  t_(ff,*filelist[
-00042c50: 6666 5d2c 2a2a 6f70 7473 2929 0a20 2020  ff],**opts)).   
-00042c60: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00042c70: 0a0a 0a20 2020 2064 6566 2047 6574 4c69  ...    def GetLi
-00042c80: 7374 2873 656c 662c 6469 726e 616d 653d  st(self,dirname=
-00042c90: 4e6f 6e65 2c72 6f6f 7473 3d4e 6f6e 652c  None,roots=None,
-00042ca0: 6669 6c65 5f6f 6e6c 793d 4661 6c73 652c  file_only=False,
-00042cb0: 6469 725f 6f6e 6c79 3d46 616c 7365 2c73  dir_only=False,s
-00042cc0: 7562 5f64 6972 3d46 616c 7365 2c69 6e63  ub_dir=False,inc
-00042cd0: 6c75 6465 5f70 6174 683d 4661 6c73 652c  lude_path=False,
-00042ce0: 6465 7461 696c 3d46 616c 7365 293a 2023  detail=False): #
-00042cf0: 6765 7420 6669 6c65 2069 6e66 6f20 6469  get file info di
-00042d00: 6374 2066 726f 6d20 4669 6c65 6e61 6d65  ct from Filename
-00042d10: 2070 6174 680a 2020 2020 2020 2020 6966   path.        if
-00042d20: 2049 734e 6f6e 6528 726f 6f74 7329 3a20   IsNone(roots): 
-00042d30: 726f 6f74 733d 7365 6c66 2e46 696e 6452  roots=self.FindR
-00042d40: 5028 290a 2020 2020 2020 2020 666f 7220  P().        for 
-00042d50: 726f 6f74 2069 6e20 726f 6f74 733a 0a20  root in roots:. 
-00042d60: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-00042d70: 696e 7374 616e 6365 2872 6f6f 742c 7374  instance(root,st
-00042d80: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
-00042d90: 2020 2020 7274 3d73 656c 662e 696e 666f      rt=self.info
-00042da0: 2e67 6574 2872 6f6f 742c 7b7d 290a 2020  .get(root,{}).  
-00042db0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00042dc0: 2064 6972 6e61 6d65 2061 6e64 2064 6972   dirname and dir
-00042dd0: 6e61 6d65 2021 3d20 726f 6f74 3a0a 2020  name != root:.  
-00042de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042df0: 2020 7274 3d73 656c 662e 4364 5061 7468    rt=self.CdPath
-00042e00: 2872 742c 6469 726e 616d 6529 0a20 2020  (rt,dirname).   
-00042e10: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00042e20: 6973 696e 7374 616e 6365 2872 742c 6469  isinstance(rt,di
-00042e30: 6374 293a 0a20 2020 2020 2020 2020 2020  ct):.           
-00042e40: 2020 2020 2020 2020 2066 6f72 2069 6920           for ii 
-00042e50: 696e 2072 743a 0a20 2020 2020 2020 2020  in rt:.         
-00042e60: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00042e70: 696c 655f 696e 666f 3d72 745b 6969 5d2e  ile_info=rt[ii].
-00042e80: 6765 7428 2720 6920 272c 7b7d 290a 2020  get(' i ',{}).  
-00042e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042ea0: 2020 2020 2020 6469 6e66 6f3d 2727 0a20        dinfo=''. 
-00042eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042ec0: 2020 2020 2020 2069 6620 6465 7461 696c         if detail
-00042ed0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00042ee0: 2020 2020 2020 2020 2020 2020 2020 6469                di
-00042ef0: 6e66 6f3d 277b 7d20 7b7d 207b 7d20 7b7d  nfo='{} {} {} {}
-00042f00: 207b 7d20 7b7d 2027 2e66 6f72 6d61 7428   {} {} '.format(
-00042f10: 6669 6c65 5f69 6e66 6f2e 6765 7428 276d  file_info.get('m
-00042f20: 6f64 6527 292c 0a20 2020 2020 2020 2020  ode'),.         
+000428a0: 2020 2066 696c 6564 6174 613d 7365 6c66     filedata=self
+000428b0: 2e52 7728 7466 696c 656e 616d 652c 6f75  .Rw(tfilename,ou
+000428c0: 743d 2762 7974 6527 290a 2020 2020 2020  t='byte').      
+000428d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000428e0: 2020 2020 2020 6966 2066 696c 6564 6174        if filedat
+000428f0: 615b 305d 3a0a 2020 2020 2020 2020 2020  a[0]:.          
+00042900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042910: 2020 2020 2020 6966 2064 6174 613a 2072        if data: r
+00042920: 745b 2764 6174 6127 5d3d 6669 6c65 6461  t['data']=fileda
+00042930: 7461 5b31 5d0a 2020 2020 2020 2020 2020  ta[1].          
+00042940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042950: 2020 2020 2020 6966 206d 6435 7375 6d3a        if md5sum:
+00042960: 205f 6d64 353d 6d64 3528 6669 6c65 6461   _md5=md5(fileda
+00042970: 7461 5b31 5d29 0a20 2020 2020 2020 2020  ta[1]).         
+00042980: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00042990: 656c 662e 4d6b 496e 666f 2872 742c 6669  elf.MkInfo(rt,fi
+000429a0: 6c65 6e61 6d65 3d74 6669 6c65 6e61 6d65  lename=tfilename
+000429b0: 2c74 7970 653d 7365 6c66 2e46 696c 6554  ,type=self.FileT
+000429c0: 7970 6528 7466 696c 656e 616d 6529 2c6d  ype(tfilename),m
+000429d0: 6435 3d5f 6d64 3529 0a20 2020 2020 2020  d5=_md5).       
+000429e0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+000429f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042a00: 2020 2073 656c 662e 4d6b 496e 666f 2872     self.MkInfo(r
+00042a10: 742c 6669 6c65 6e61 6d65 2c65 7869 7374  t,filename,exist
+00042a20: 3d46 616c 7365 290a 2020 2020 2020 2020  =False).        
+00042a30: 2020 2020 6966 2062 6173 653a 0a20 2020      if base:.   
+00042a40: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00042a50: 7572 6e20 7b72 6f6f 745f 7061 7468 3a62  urn {root_path:b
+00042a60: 6173 657d 0a20 2020 2020 2020 2020 2020  ase}.           
+00042a70: 2072 6574 7572 6e20 7b7d 0a0a 2020 2020   return {}..    
+00042a80: 2020 2020 6966 206e 6f74 2066 696c 656e      if not filen
+00042a90: 616d 6573 3a20 6669 6c65 6e61 6d65 733d  ames: filenames=
+00042aa0: 5b27 2e27 5d0a 2020 2020 2020 2020 666f  ['.'].        fo
+00042ab0: 7220 6669 6c65 6e61 6d65 2069 6e20 6669  r filename in fi
+00042ac0: 6c65 6e61 6d65 733a 0a20 2020 2020 2020  lenames:.       
+00042ad0: 2020 2020 2072 6f6f 745f 7061 7468 2c66       root_path,f
+00042ae0: 6c69 7374 3d73 656c 662e 4c69 7374 2866  list=self.List(f
+00042af0: 696c 656e 616d 652c 7375 625f 6469 723d  ilename,sub_dir=
+00042b00: 6f70 7473 2e67 6574 2827 7375 625f 6469  opts.get('sub_di
+00042b10: 7227 2c46 616c 7365 292c 6469 726e 616d  r',False),dirnam
+00042b20: 653d 5472 7565 290a 2020 2020 2020 2020  e=True).        
+00042b30: 2020 2020 6966 2072 6f6f 745f 7061 7468      if root_path
+00042b40: 206e 6f74 2069 6e20 6669 6c65 6c69 7374   not in filelist
+00042b50: 3a20 6669 6c65 6c69 7374 5b72 6f6f 745f  : filelist[root_
+00042b60: 7061 7468 5d3d 5b5d 0a20 2020 2020 2020  path]=[].       
+00042b70: 2020 2020 2066 696c 656c 6973 745b 726f       filelist[ro
+00042b80: 6f74 5f70 6174 685d 3d66 696c 656c 6973  ot_path]=filelis
+00042b90: 745b 726f 6f74 5f70 6174 685d 2b66 6c69  t[root_path]+fli
+00042ba0: 7374 0a0a 2020 2020 2020 2020 666f 7220  st..        for 
+00042bb0: 6666 2069 6e20 6669 6c65 6c69 7374 3a0a  ff in filelist:.
+00042bc0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00042bd0: 2e69 6e66 6f2e 7570 6461 7465 285f 4765  .info.update(_Ge
+00042be0: 745f 2866 662c 2a66 696c 656c 6973 745b  t_(ff,*filelist[
+00042bf0: 6666 5d2c 2a2a 6f70 7473 2929 0a20 2020  ff],**opts)).   
+00042c00: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00042c10: 0a0a 0a20 2020 2064 6566 2047 6574 4c69  ...    def GetLi
+00042c20: 7374 2873 656c 662c 6469 726e 616d 653d  st(self,dirname=
+00042c30: 4e6f 6e65 2c72 6f6f 7473 3d4e 6f6e 652c  None,roots=None,
+00042c40: 6669 6c65 5f6f 6e6c 793d 4661 6c73 652c  file_only=False,
+00042c50: 6469 725f 6f6e 6c79 3d46 616c 7365 2c73  dir_only=False,s
+00042c60: 7562 5f64 6972 3d46 616c 7365 2c69 6e63  ub_dir=False,inc
+00042c70: 6c75 6465 5f70 6174 683d 4661 6c73 652c  lude_path=False,
+00042c80: 6465 7461 696c 3d46 616c 7365 293a 2023  detail=False): #
+00042c90: 6765 7420 6669 6c65 2069 6e66 6f20 6469  get file info di
+00042ca0: 6374 2066 726f 6d20 4669 6c65 6e61 6d65  ct from Filename
+00042cb0: 2070 6174 680a 2020 2020 2020 2020 6966   path.        if
+00042cc0: 2049 734e 6f6e 6528 726f 6f74 7329 3a20   IsNone(roots): 
+00042cd0: 726f 6f74 733d 7365 6c66 2e46 696e 6452  roots=self.FindR
+00042ce0: 5028 290a 2020 2020 2020 2020 666f 7220  P().        for 
+00042cf0: 726f 6f74 2069 6e20 726f 6f74 733a 0a20  root in roots:. 
+00042d00: 2020 2020 2020 2020 2020 2069 6620 6973             if is
+00042d10: 696e 7374 616e 6365 2872 6f6f 742c 7374  instance(root,st
+00042d20: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
+00042d30: 2020 2020 7274 3d73 656c 662e 696e 666f      rt=self.info
+00042d40: 2e67 6574 2872 6f6f 742c 7b7d 290a 2020  .get(root,{}).  
+00042d50: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00042d60: 2064 6972 6e61 6d65 2061 6e64 2064 6972   dirname and dir
+00042d70: 6e61 6d65 2021 3d20 726f 6f74 3a0a 2020  name != root:.  
+00042d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042d90: 2020 7274 3d73 656c 662e 4364 5061 7468    rt=self.CdPath
+00042da0: 2872 742c 6469 726e 616d 6529 0a20 2020  (rt,dirname).   
+00042db0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00042dc0: 6973 696e 7374 616e 6365 2872 742c 6469  isinstance(rt,di
+00042dd0: 6374 293a 0a20 2020 2020 2020 2020 2020  ct):.           
+00042de0: 2020 2020 2020 2020 2066 6f72 2069 6920           for ii 
+00042df0: 696e 2072 743a 0a20 2020 2020 2020 2020  in rt:.         
+00042e00: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00042e10: 696c 655f 696e 666f 3d72 745b 6969 5d2e  ile_info=rt[ii].
+00042e20: 6765 7428 2720 6920 272c 7b7d 290a 2020  get(' i ',{}).  
+00042e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042e40: 2020 2020 2020 6469 6e66 6f3d 2727 0a20        dinfo=''. 
+00042e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042e60: 2020 2020 2020 2069 6620 6465 7461 696c         if detail
+00042e70: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00042e80: 2020 2020 2020 2020 2020 2020 2020 6469                di
+00042e90: 6e66 6f3d 277b 7d20 7b7d 207b 7d20 7b7d  nfo='{} {} {} {}
+00042ea0: 207b 7d20 7b7d 2027 2e66 6f72 6d61 7428   {} {} '.format(
+00042eb0: 6669 6c65 5f69 6e66 6f2e 6765 7428 276d  file_info.get('m
+00042ec0: 6f64 6527 292c 0a20 2020 2020 2020 2020  ode'),.         
+00042ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042ee0: 2020 2020 2020 2020 2020 2020 2031 2069               1 i
+00042ef0: 6620 6669 6c65 5f69 6e66 6f2e 6765 7428  f file_info.get(
+00042f00: 2774 7970 6527 2920 213d 2027 6469 7227  'type') != 'dir'
+00042f10: 2065 6c73 6520 6c65 6e28 7274 5b69 695d   else len(rt[ii]
+00042f20: 292d 312c 0a20 2020 2020 2020 2020 2020  )-1,.           
 00042f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042f40: 2020 2020 2020 2020 2020 2020 2031 2069               1 i
-00042f50: 6620 6669 6c65 5f69 6e66 6f2e 6765 7428  f file_info.get(
-00042f60: 2774 7970 6527 2920 213d 2027 6469 7227  'type') != 'dir'
-00042f70: 2065 6c73 6520 6c65 6e28 7274 5b69 695d   else len(rt[ii]
-00042f80: 292d 312c 0a20 2020 2020 2020 2020 2020  )-1,.           
-00042f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042fa0: 2020 2020 2020 2020 2020 2066 696c 655f             file_
-00042fb0: 696e 666f 2e67 6574 2827 7569 6427 292c  info.get('uid'),
-00042fc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00042fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00042fe0: 2020 2020 2020 2066 696c 655f 696e 666f         file_info
-00042ff0: 2e67 6574 2827 6769 6427 292c 0a20 2020  .get('gid'),.   
-00043000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043020: 2020 2066 696c 655f 696e 666f 2e67 6574     file_info.get
-00043030: 2827 7369 7a65 2729 2c0a 2020 2020 2020  ('size'),.      
+00042f40: 2020 2020 2020 2020 2020 2066 696c 655f             file_
+00042f50: 696e 666f 2e67 6574 2827 7569 6427 292c  info.get('uid'),
+00042f60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00042f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042f80: 2020 2020 2020 2066 696c 655f 696e 666f         file_info
+00042f90: 2e67 6574 2827 6769 6427 292c 0a20 2020  .get('gid'),.   
+00042fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042fc0: 2020 2066 696c 655f 696e 666f 2e67 6574     file_info.get
+00042fd0: 2827 7369 7a65 2729 2c0a 2020 2020 2020  ('size'),.      
+00042fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00042ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043000: 6669 6c65 5f69 6e66 6f2e 6765 7428 276d  file_info.get('m
+00043010: 7469 6d65 2729 2c0a 2020 2020 2020 2020  time'),.        
+00043020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043030: 2020 2020 2020 2020 2020 2020 2020 290a                ).
 00043040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043060: 6669 6c65 5f69 6e66 6f2e 6765 7428 276d  file_info.get('m
-00043070: 7469 6d65 2729 2c0a 2020 2020 2020 2020  time'),.        
-00043080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043090: 2020 2020 2020 2020 2020 2020 2020 290a                ).
-000430a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000430b0: 2020 2020 2020 2020 6966 2069 6920 3d3d          if ii ==
-000430c0: 2027 2069 2027 3a20 636f 6e74 696e 7565   ' i ': continue
-000430d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000430e0: 2020 2020 2020 2020 2069 6620 6669 6c65           if file
-000430f0: 5f69 6e66 6f2e 6765 7428 2774 7970 6527  _info.get('type'
-00043100: 2920 3d3d 2027 6469 7227 3a0a 2020 2020  ) == 'dir':.    
-00043110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043120: 2020 2020 2020 2020 6966 2066 696c 655f          if file_
-00043130: 6f6e 6c79 3a20 636f 6e74 696e 7565 0a20  only: continue. 
-00043140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043150: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00043160: 2827 7b7d 7b7d 2f27 2e66 6f72 6d61 7428  ('{}{}/'.format(
-00043170: 6469 6e66 6f2c 6969 2929 0a20 2020 2020  dinfo,ii)).     
-00043180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043190: 2020 2020 2020 2069 6620 7375 625f 6469         if sub_di
-000431a0: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
-000431b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000431c0: 2020 2073 656c 662e 4765 744c 6973 7428     self.GetList(
-000431d0: 6469 726e 616d 653d 6969 2c72 6f6f 7473  dirname=ii,roots
-000431e0: 3d5b 726f 6f74 5d2c 7375 625f 6469 723d  =[root],sub_dir=
-000431f0: 7375 625f 6469 722c 696e 636c 7564 655f  sub_dir,include_
-00043200: 7061 7468 3d54 7275 652c 6465 7461 696c  path=True,detail
-00043210: 3d64 6574 6169 6c29 0a20 2020 2020 2020  =detail).       
+00043050: 2020 2020 2020 2020 6966 2069 6920 3d3d          if ii ==
+00043060: 2027 2069 2027 3a20 636f 6e74 696e 7565   ' i ': continue
+00043070: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00043080: 2020 2020 2020 2020 2069 6620 6669 6c65           if file
+00043090: 5f69 6e66 6f2e 6765 7428 2774 7970 6527  _info.get('type'
+000430a0: 2920 3d3d 2027 6469 7227 3a0a 2020 2020  ) == 'dir':.    
+000430b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000430c0: 2020 2020 2020 2020 6966 2066 696c 655f          if file_
+000430d0: 6f6e 6c79 3a20 636f 6e74 696e 7565 0a20  only: continue. 
+000430e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000430f0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00043100: 2827 7b7d 7b7d 2f27 2e66 6f72 6d61 7428  ('{}{}/'.format(
+00043110: 6469 6e66 6f2c 6969 2929 0a20 2020 2020  dinfo,ii)).     
+00043120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043130: 2020 2020 2020 2069 6620 7375 625f 6469         if sub_di
+00043140: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
+00043150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043160: 2020 2073 656c 662e 4765 744c 6973 7428     self.GetList(
+00043170: 6469 726e 616d 653d 6969 2c72 6f6f 7473  dirname=ii,roots
+00043180: 3d5b 726f 6f74 5d2c 7375 625f 6469 723d  =[root],sub_dir=
+00043190: 7375 625f 6469 722c 696e 636c 7564 655f  sub_dir,include_
+000431a0: 7061 7468 3d54 7275 652c 6465 7461 696c  path=True,detail
+000431b0: 3d64 6574 6169 6c29 0a20 2020 2020 2020  =detail).       
+000431c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000431d0: 2065 6c69 6620 6e6f 7420 6469 725f 6f6e   elif not dir_on
+000431e0: 6c79 3a0a 2020 2020 2020 2020 2020 2020  ly:.            
+000431f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043200: 6966 2069 6e63 6c75 6465 5f70 6174 683a  if include_path:
+00043210: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
 00043220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043230: 2065 6c69 6620 6e6f 7420 6469 725f 6f6e   elif not dir_on
-00043240: 6c79 3a0a 2020 2020 2020 2020 2020 2020  ly:.            
-00043250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043260: 6966 2069 6e63 6c75 6465 5f70 6174 683a  if include_path:
-00043270: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00043230: 2070 7269 6e74 2827 7b7d 7b7d 2f7b 7d27   print('{}{}/{}'
+00043240: 2e66 6f72 6d61 7428 6469 6e66 6f2c 6469  .format(dinfo,di
+00043250: 726e 616d 652c 6969 2929 0a20 2020 2020  rname,ii)).     
+00043260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043270: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
 00043280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043290: 2070 7269 6e74 2827 7b7d 7b7d 2f7b 7d27   print('{}{}/{}'
-000432a0: 2e66 6f72 6d61 7428 6469 6e66 6f2c 6469  .format(dinfo,di
-000432b0: 726e 616d 652c 6969 2929 0a20 2020 2020  rname,ii)).     
-000432c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000432d0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-000432e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000432f0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-00043300: 6e74 2827 7b7d 7b7d 272e 666f 726d 6174  nt('{}{}'.format
-00043310: 2864 696e 666f 2c69 6929 290a 2020 2020  (dinfo,ii)).    
-00043320: 2020 2020 7265 7475 726e 2046 616c 7365      return False
-00043330: 0a0a 2020 2020 6465 6620 4578 6563 4669  ..    def ExecFi
-00043340: 6c65 2873 656c 662c 6669 6c65 6e61 6d65  le(self,filename
-00043350: 2c62 696e 5f6e 616d 653d 4e6f 6e65 2c64  ,bin_name=None,d
-00043360: 6566 6175 6c74 3d4e 6f6e 652c 776f 726b  efault=None,work
-00043370: 5f70 6174 683d 272f 746d 7027 293a 0a20  _path='/tmp'):. 
-00043380: 2020 2020 2020 2023 2063 6865 636b 2074         # check t
-00043390: 6865 2066 696c 656e 616d 6520 6973 2065  he filename is e
-000433a0: 7863 7574 6162 6c65 2069 6e20 7468 6520  xcutable in the 
-000433b0: 7379 7374 656d 2062 696e 2066 696c 6520  system bin file 
-000433c0: 7468 656e 2072 6574 7572 6e20 7468 6520  then return the 
-000433d0: 6669 6c65 206e 616d 650a 2020 2020 2020  file name.      
-000433e0: 2020 2320 6966 2063 6f6d 7072 6573 7365    # if compresse
-000433f0: 6420 6669 6c65 2074 6865 6e20 6578 7472  d file then extr
-00043400: 6163 7420 7468 6520 6669 6c65 2061 6e64  act the file and
-00043410: 2066 696e 6420 6269 6e5f 6e61 6d65 2066   find bin_name f
-00043420: 696c 6520 696e 2074 6865 2065 7874 7261  ile in the extra
-00043430: 6374 6564 2064 6972 6563 746f 7279 0a20  cted directory. 
-00043440: 2020 2020 2020 2023 2020 2061 6e64 2066         #   and f
-00043450: 6f75 6e64 2062 696e 6172 7920 6669 6c65  ound binary file
-00043460: 2074 6865 6e20 7265 7475 726e 2074 6865   then return the
-00043470: 6e20 6269 6e61 7279 2066 696c 6520 7061  n binary file pa
-00043480: 7468 0a20 2020 2020 2020 2023 2069 6620  th.        # if 
-00043490: 6669 6c65 6e61 6d65 2069 7320 6578 6375  filename is excu
-000434a0: 7461 626c 6520 6669 6c65 2074 6865 6e20  table file then 
-000434b0: 7265 7475 726e 2074 6865 2066 696c 6520  return the file 
-000434c0: 7061 7468 0a20 2020 2020 2020 2023 2069  path.        # i
-000434d0: 6620 6e6f 7420 666f 756e 6420 7468 656e  f not found then
-000434e0: 2072 6574 7572 6e20 6465 6661 756c 7420   return default 
-000434f0: 7661 6c75 650a 2020 2020 2020 2020 6578  value.        ex
-00043500: 6973 743d 7365 6c66 2e46 696c 6549 6e66  ist=self.FileInf
-00043510: 6f28 6669 6c65 6e61 6d65 290a 2020 2020  o(filename).    
-00043520: 2020 2020 6966 2065 7869 7374 3a0a 2020      if exist:.  
-00043530: 2020 2020 2020 2020 2020 6966 2065 7869            if exi
-00043540: 7374 5b27 7479 7065 275d 2069 6e20 5b27  st['type'] in ['
-00043550: 656c 6627 5d20 616e 6420 6578 6973 745b  elf'] and exist[
-00043560: 276d 6f64 6527 5d20 3d3d 2033 3332 3631  'mode'] == 33261
-00043570: 3a72 6574 7572 6e20 6669 6c65 6e61 6d65  :return filename
-00043580: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00043590: 7365 6c66 2e45 7874 7261 6374 2866 696c  self.Extract(fil
-000435a0: 656e 616d 652c 776f 726b 5f70 6174 683d  ename,work_path=
-000435b0: 776f 726b 5f70 6174 6829 3a0a 2020 2020  work_path):.    
-000435c0: 2020 2020 2020 2020 2020 2020 6966 2062              if b
-000435d0: 696e 5f6e 616d 653a 0a20 2020 2020 2020  in_name:.       
-000435e0: 2020 2020 2020 2020 2020 2020 2072 743d               rt=
-000435f0: 5b5d 0a20 2020 2020 2020 2020 2020 2020  [].             
-00043600: 2020 2020 2020 2066 6f72 2066 6620 696e         for ff in
-00043610: 2073 656c 662e 4669 6e64 2877 6f72 6b5f   self.Find(work_
-00043620: 7061 7468 2c66 696c 656e 616d 653d 6269  path,filename=bi
-00043630: 6e5f 6e61 6d65 293a 0a20 2020 2020 2020  n_name):.       
-00043640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043650: 2069 6620 7365 6c66 2e49 6e66 6f28 6666   if self.Info(ff
-00043660: 292e 6765 7428 276d 6f64 6527 2920 3d3d  ).get('mode') ==
-00043670: 2033 3332 3631 3a0a 2020 2020 2020 2020   33261:.        
-00043680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043690: 2020 2020 7274 2e61 7070 656e 6428 6666      rt.append(ff
-000436a0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000436b0: 2020 2020 2020 7265 7475 726e 2072 740a        return rt.
-000436c0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-000436d0: 2020 2020 2020 2020 2020 6966 2066 696e            if fin
-000436e0: 645f 6578 6563 7574 6162 6c65 2866 696c  d_executable(fil
-000436f0: 656e 616d 6529 3a20 7265 7475 726e 2066  ename): return f
-00043700: 696c 656e 616d 650a 2020 2020 2020 2020  ilename.        
-00043710: 7265 7475 726e 2064 6566 6175 6c74 0a0a  return default..
-00043720: 2020 2020 6465 6620 4261 7365 6e61 6d65      def Basename
-00043730: 2873 656c 662c 6669 6c65 6e61 6d65 2c64  (self,filename,d
-00043740: 6566 6175 6c74 3d46 616c 7365 293a 0a20  efault=False):. 
-00043750: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00043760: 616e 6365 2866 696c 656e 616d 652c 7374  ance(filename,st
-00043770: 7229 3a72 6574 7572 6e20 6f73 2e70 6174  r):return os.pat
-00043780: 682e 6261 7365 6e61 6d65 2866 696c 656e  h.basename(filen
-00043790: 616d 6529 0a20 2020 2020 2020 2072 6574  ame).        ret
-000437a0: 7572 6e20 6465 6661 756c 740a 0a20 2020  urn default..   
-000437b0: 2064 6566 2044 6972 6e61 6d65 2873 656c   def Dirname(sel
-000437c0: 662c 6669 6c65 6e61 6d65 2c62 696e 5f6e  f,filename,bin_n
-000437d0: 616d 653d 4e6f 6e65 2c64 6566 6175 6c74  ame=None,default
-000437e0: 3d46 616c 7365 293a 0a20 2020 2020 2020  =False):.       
-000437f0: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
-00043800: 6365 2866 696c 656e 616d 652c 7374 7229  ce(filename,str)
-00043810: 3a20 7265 7475 726e 2064 6566 6175 6c74  : return default
-00043820: 0a20 2020 2020 2020 2069 6620 4973 4e6f  .        if IsNo
-00043830: 6e65 2862 696e 5f6e 616d 6529 3a20 7265  ne(bin_name): re
-00043840: 7475 726e 206f 732e 7061 7468 2e64 6972  turn os.path.dir
-00043850: 6e61 6d65 2866 696c 656e 616d 6529 0a20  name(filename). 
-00043860: 2020 2020 2020 2069 6620 6e6f 7420 6973         if not is
-00043870: 696e 7374 616e 6365 2862 696e 5f6e 616d  instance(bin_nam
-00043880: 652c 7374 7229 3a20 7265 7475 726e 2064  e,str): return d
-00043890: 6566 6175 6c74 0a20 2020 2020 2020 2062  efault.        b
-000438a0: 696e 5f69 6e66 6f3d 6269 6e5f 6e61 6d65  in_info=bin_name
-000438b0: 2e73 706c 6974 2827 2f27 290a 2020 2020  .split('/').    
-000438c0: 2020 2020 6269 6e5f 6e3d 6c65 6e28 6269      bin_n=len(bi
-000438d0: 6e5f 696e 666f 290a 2020 2020 2020 2020  n_info).        
-000438e0: 6669 6c65 6e61 6d65 5f69 6e66 6f3d 6669  filename_info=fi
-000438f0: 6c65 6e61 6d65 2e73 706c 6974 2827 2f27  lename.split('/'
-00043900: 290a 2020 2020 2020 2020 6669 6c65 6e61  ).        filena
-00043910: 6d65 5f6e 3d6c 656e 2866 696c 656e 616d  me_n=len(filenam
-00043920: 655f 696e 666f 290a 2020 2020 2020 2020  e_info).        
-00043930: 666f 7220 6969 2069 6e20 7261 6e67 6528  for ii in range(
-00043940: 302c 6269 6e5f 6e29 3a0a 2020 2020 2020  0,bin_n):.      
-00043950: 2020 2020 2020 6966 2066 696c 656e 616d        if filenam
-00043960: 655f 696e 666f 5b66 696c 656e 616d 655f  e_info[filename_
-00043970: 6e2d 312d 6969 5d20 213d 2062 696e 5f69  n-1-ii] != bin_i
-00043980: 6e66 6f5b 6269 6e5f 6e2d 312d 6969 5d3a  nfo[bin_n-1-ii]:
-00043990: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
-000439a0: 2020 2020 2020 2020 7265 7475 726e 204a          return J
-000439b0: 6f69 6e28 6669 6c65 6e61 6d65 5f69 6e66  oin(filename_inf
-000439c0: 6f5b 3a2d 6269 6e5f 6e5d 2c73 796d 626f  o[:-bin_n],symbo
-000439d0: 6c3d 272f 2729 0a0a 2020 2020 6465 6620  l='/')..    def 
-000439e0: 4669 6e64 2873 656c 662c 6669 6c65 6e61  Find(self,filena
-000439f0: 6d65 2c64 6566 6175 6c74 3d5b 5d29 3a0a  me,default=[]):.
-00043a00: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
-00043a10: 7369 6e73 7461 6e63 6528 6669 6c65 6e61  sinstance(filena
-00043a20: 6d65 2c73 7472 293a 2072 6574 7572 6e20  me,str): return 
-00043a30: 6465 6661 756c 740a 2020 2020 2020 2020  default.        
-00043a40: 6669 6c65 6e61 6d65 3d6f 732e 7061 7468  filename=os.path
-00043a50: 2e62 6173 656e 616d 6528 6669 6c65 6e61  .basename(filena
-00043a60: 6d65 290a 2020 2020 2020 2020 6966 206f  me).        if o
-00043a70: 732e 7061 7468 2e69 7364 6972 2873 656c  s.path.isdir(sel
-00043a80: 662e 726f 6f74 5f70 6174 6829 3a0a 2020  f.root_path):.  
-00043a90: 2020 2020 2020 2020 2020 7274 203d 205b            rt = [
-00043aa0: 5d0a 2020 2020 2020 2020 2020 2020 666f  ].            fo
-00043ab0: 7220 6261 7365 2c20 6469 7273 2c20 6669  r base, dirs, fi
-00043ac0: 6c65 7320 696e 206f 732e 7761 6c6b 2873  les in os.walk(s
-00043ad0: 656c 662e 726f 6f74 5f70 6174 6829 3a0a  elf.root_path):.
-00043ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043af0: 666f 756e 6420 3d20 666e 6d61 7463 682e  found = fnmatch.
-00043b00: 6669 6c74 6572 2866 696c 6573 2c20 6669  filter(files, fi
-00043b10: 6c65 6e61 6d65 290a 2020 2020 2020 2020  lename).        
-00043b20: 2020 2020 2020 2020 7274 2e65 7874 656e          rt.exten
-00043b30: 6428 6f73 2e70 6174 682e 6a6f 696e 2862  d(os.path.join(b
-00043b40: 6173 652c 2066 2920 666f 7220 6620 696e  ase, f) for f in
-00043b50: 2066 6f75 6e64 290a 2020 2020 2020 2020   found).        
-00043b60: 2020 2020 7265 7475 726e 2072 740a 2020      return rt.  
-00043b70: 2020 2020 2020 7265 7475 726e 2064 6566        return def
-00043b80: 6175 6c74 0a0a 2020 2020 6465 6620 5277  ault..    def Rw
-00043b90: 2873 656c 662c 6e61 6d65 2c64 6174 613d  (self,name,data=
-00043ba0: 4e6f 6e65 2c6f 7574 3d27 6279 7465 272c  None,out='byte',
-00043bb0: 6170 7065 6e64 3d46 616c 7365 2c72 6561  append=False,rea
-00043bc0: 643d 4e6f 6e65 2c6f 7665 7277 7269 7465  d=None,overwrite
-00043bd0: 3d54 7275 652c 6669 6e66 6f3d 7b7d 2c66  =True,finfo={},f
-00043be0: 696c 655f 6f6e 6c79 3d54 7275 652c 6465  ile_only=True,de
-00043bf0: 6661 756c 743d 4661 6c73 6529 3a0a 2020  fault=False):.  
-00043c00: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-00043c10: 6e63 6528 6e61 6d65 2c73 7472 293a 0a20  nce(name,str):. 
-00043c20: 2020 2020 2020 2020 2020 2023 6966 2064             #if d
-00043c30: 6174 6120 6973 204e 6f6e 653a 2023 2052  ata is None: # R
-00043c40: 6561 6420 6672 6f6d 2066 696c 650a 2020  ead from file.  
-00043c50: 2020 2020 2020 2020 2020 6966 2049 734e            if IsN
-00043c60: 6f6e 6528 6461 7461 293a 2023 2052 6561  one(data): # Rea
-00043c70: 6420 6672 6f6d 2066 696c 650a 2020 2020  d from file.    
-00043c80: 2020 2020 2020 2020 2020 2020 6461 7461              data
-00043c90: 3d63 6174 286e 616d 652c 6669 6c65 5f6f  =cat(name,file_o
-00043ca0: 6e6c 793d 6669 6c65 5f6f 6e6c 792c 6279  nly=file_only,by
-00043cb0: 7465 3d6f 7574 2c68 6561 643d 7265 6164  te=out,head=read
-00043cc0: 2c64 6566 6175 6c74 3d64 6566 6175 6c74  ,default=default
-00043cd0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00043ce0: 2020 6966 2064 6174 6120 6973 2046 616c    if data is Fal
-00043cf0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00043d00: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-00043d10: 616c 7365 2c64 6566 6175 6c74 0a20 2020  alse,default.   
-00043d20: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00043d30: 7572 6e20 5472 7565 2c64 6174 610a 2020  urn True,data.  
-00043d40: 2020 2020 2020 2020 2020 656c 7365 3a20            else: 
-00043d50: 2320 5772 6974 6520 746f 2066 696c 650a  # Write to file.
-00043d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043d70: 6669 6c65 5f70 6174 683d 6f73 2e70 6174  file_path=os.pat
-00043d80: 682e 6469 726e 616d 6528 6e61 6d65 290a  h.dirname(name).
-00043d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043da0: 6966 206e 6f74 2066 696c 655f 7061 7468  if not file_path
-00043db0: 206f 7220 6f73 2e70 6174 682e 6973 6469   or os.path.isdi
-00043dc0: 7228 6669 6c65 5f70 6174 6829 3a20 2320  r(file_path): # 
-00043dd0: 6375 7272 656e 7420 6469 7220 6f72 2063  current dir or c
-00043de0: 6f72 7265 6374 2064 6972 6563 746f 7279  orrect directory
-00043df0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00043e00: 2020 2020 2069 6620 6170 7065 6e64 3a0a       if append:.
-00043e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043e20: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
-00043e30: 6e28 6e61 6d65 2c27 6162 2729 2061 7320  n(name,'ab') as 
-00043e40: 663a 0a20 2020 2020 2020 2020 2020 2020  f:.             
-00043e50: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00043e60: 2e77 7269 7465 2842 7974 6573 2864 6174  .write(Bytes(dat
-00043e70: 6129 290a 2020 2020 2020 2020 2020 2020  a)).            
-00043e80: 2020 2020 2020 2020 656c 6966 206e 6f74          elif not
-00043e90: 2066 696c 655f 6f6e 6c79 3a0a 2020 2020   file_only:.    
-00043ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043eb0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+00043290: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+000432a0: 6e74 2827 7b7d 7b7d 272e 666f 726d 6174  nt('{}{}'.format
+000432b0: 2864 696e 666f 2c69 6929 290a 2020 2020  (dinfo,ii)).    
+000432c0: 2020 2020 7265 7475 726e 2046 616c 7365      return False
+000432d0: 0a0a 2020 2020 6465 6620 4578 6563 4669  ..    def ExecFi
+000432e0: 6c65 2873 656c 662c 6669 6c65 6e61 6d65  le(self,filename
+000432f0: 2c62 696e 5f6e 616d 653d 4e6f 6e65 2c64  ,bin_name=None,d
+00043300: 6566 6175 6c74 3d4e 6f6e 652c 776f 726b  efault=None,work
+00043310: 5f70 6174 683d 272f 746d 7027 293a 0a20  _path='/tmp'):. 
+00043320: 2020 2020 2020 2023 2063 6865 636b 2074         # check t
+00043330: 6865 2066 696c 656e 616d 6520 6973 2065  he filename is e
+00043340: 7863 7574 6162 6c65 2069 6e20 7468 6520  xcutable in the 
+00043350: 7379 7374 656d 2062 696e 2066 696c 6520  system bin file 
+00043360: 7468 656e 2072 6574 7572 6e20 7468 6520  then return the 
+00043370: 6669 6c65 206e 616d 650a 2020 2020 2020  file name.      
+00043380: 2020 2320 6966 2063 6f6d 7072 6573 7365    # if compresse
+00043390: 6420 6669 6c65 2074 6865 6e20 6578 7472  d file then extr
+000433a0: 6163 7420 7468 6520 6669 6c65 2061 6e64  act the file and
+000433b0: 2066 696e 6420 6269 6e5f 6e61 6d65 2066   find bin_name f
+000433c0: 696c 6520 696e 2074 6865 2065 7874 7261  ile in the extra
+000433d0: 6374 6564 2064 6972 6563 746f 7279 0a20  cted directory. 
+000433e0: 2020 2020 2020 2023 2020 2061 6e64 2066         #   and f
+000433f0: 6f75 6e64 2062 696e 6172 7920 6669 6c65  ound binary file
+00043400: 2074 6865 6e20 7265 7475 726e 2074 6865   then return the
+00043410: 6e20 6269 6e61 7279 2066 696c 6520 7061  n binary file pa
+00043420: 7468 0a20 2020 2020 2020 2023 2069 6620  th.        # if 
+00043430: 6669 6c65 6e61 6d65 2069 7320 6578 6375  filename is excu
+00043440: 7461 626c 6520 6669 6c65 2074 6865 6e20  table file then 
+00043450: 7265 7475 726e 2074 6865 2066 696c 6520  return the file 
+00043460: 7061 7468 0a20 2020 2020 2020 2023 2069  path.        # i
+00043470: 6620 6e6f 7420 666f 756e 6420 7468 656e  f not found then
+00043480: 2072 6574 7572 6e20 6465 6661 756c 7420   return default 
+00043490: 7661 6c75 650a 2020 2020 2020 2020 6578  value.        ex
+000434a0: 6973 743d 7365 6c66 2e46 696c 6549 6e66  ist=self.FileInf
+000434b0: 6f28 6669 6c65 6e61 6d65 290a 2020 2020  o(filename).    
+000434c0: 2020 2020 6966 2065 7869 7374 3a0a 2020      if exist:.  
+000434d0: 2020 2020 2020 2020 2020 6966 2065 7869            if exi
+000434e0: 7374 5b27 7479 7065 275d 2069 6e20 5b27  st['type'] in ['
+000434f0: 656c 6627 5d20 616e 6420 6578 6973 745b  elf'] and exist[
+00043500: 276d 6f64 6527 5d20 3d3d 2033 3332 3631  'mode'] == 33261
+00043510: 3a72 6574 7572 6e20 6669 6c65 6e61 6d65  :return filename
+00043520: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00043530: 7365 6c66 2e45 7874 7261 6374 2866 696c  self.Extract(fil
+00043540: 656e 616d 652c 776f 726b 5f70 6174 683d  ename,work_path=
+00043550: 776f 726b 5f70 6174 6829 3a0a 2020 2020  work_path):.    
+00043560: 2020 2020 2020 2020 2020 2020 6966 2062              if b
+00043570: 696e 5f6e 616d 653a 0a20 2020 2020 2020  in_name:.       
+00043580: 2020 2020 2020 2020 2020 2020 2072 743d               rt=
+00043590: 5b5d 0a20 2020 2020 2020 2020 2020 2020  [].             
+000435a0: 2020 2020 2020 2066 6f72 2066 6620 696e         for ff in
+000435b0: 2073 656c 662e 4669 6e64 2877 6f72 6b5f   self.Find(work_
+000435c0: 7061 7468 2c66 696c 656e 616d 653d 6269  path,filename=bi
+000435d0: 6e5f 6e61 6d65 293a 0a20 2020 2020 2020  n_name):.       
+000435e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000435f0: 2069 6620 7365 6c66 2e49 6e66 6f28 6666   if self.Info(ff
+00043600: 292e 6765 7428 276d 6f64 6527 2920 3d3d  ).get('mode') ==
+00043610: 2033 3332 3631 3a0a 2020 2020 2020 2020   33261:.        
+00043620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043630: 2020 2020 7274 2e61 7070 656e 6428 6666      rt.append(ff
+00043640: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00043650: 2020 2020 2020 7265 7475 726e 2072 740a        return rt.
+00043660: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00043670: 2020 2020 2020 2020 2020 6966 2066 696e            if fin
+00043680: 645f 6578 6563 7574 6162 6c65 2866 696c  d_executable(fil
+00043690: 656e 616d 6529 3a20 7265 7475 726e 2066  ename): return f
+000436a0: 696c 656e 616d 650a 2020 2020 2020 2020  ilename.        
+000436b0: 7265 7475 726e 2064 6566 6175 6c74 0a0a  return default..
+000436c0: 2020 2020 6465 6620 4261 7365 6e61 6d65      def Basename
+000436d0: 2873 656c 662c 6669 6c65 6e61 6d65 2c64  (self,filename,d
+000436e0: 6566 6175 6c74 3d46 616c 7365 293a 0a20  efault=False):. 
+000436f0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00043700: 616e 6365 2866 696c 656e 616d 652c 7374  ance(filename,st
+00043710: 7229 3a72 6574 7572 6e20 6f73 2e70 6174  r):return os.pat
+00043720: 682e 6261 7365 6e61 6d65 2866 696c 656e  h.basename(filen
+00043730: 616d 6529 0a20 2020 2020 2020 2072 6574  ame).        ret
+00043740: 7572 6e20 6465 6661 756c 740a 0a20 2020  urn default..   
+00043750: 2064 6566 2044 6972 6e61 6d65 2873 656c   def Dirname(sel
+00043760: 662c 6669 6c65 6e61 6d65 2c62 696e 5f6e  f,filename,bin_n
+00043770: 616d 653d 4e6f 6e65 2c64 6566 6175 6c74  ame=None,default
+00043780: 3d46 616c 7365 293a 0a20 2020 2020 2020  =False):.       
+00043790: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
+000437a0: 6365 2866 696c 656e 616d 652c 7374 7229  ce(filename,str)
+000437b0: 3a20 7265 7475 726e 2064 6566 6175 6c74  : return default
+000437c0: 0a20 2020 2020 2020 2069 6620 4973 4e6f  .        if IsNo
+000437d0: 6e65 2862 696e 5f6e 616d 6529 3a20 7265  ne(bin_name): re
+000437e0: 7475 726e 206f 732e 7061 7468 2e64 6972  turn os.path.dir
+000437f0: 6e61 6d65 2866 696c 656e 616d 6529 0a20  name(filename). 
+00043800: 2020 2020 2020 2069 6620 6e6f 7420 6973         if not is
+00043810: 696e 7374 616e 6365 2862 696e 5f6e 616d  instance(bin_nam
+00043820: 652c 7374 7229 3a20 7265 7475 726e 2064  e,str): return d
+00043830: 6566 6175 6c74 0a20 2020 2020 2020 2062  efault.        b
+00043840: 696e 5f69 6e66 6f3d 6269 6e5f 6e61 6d65  in_info=bin_name
+00043850: 2e73 706c 6974 2827 2f27 290a 2020 2020  .split('/').    
+00043860: 2020 2020 6269 6e5f 6e3d 6c65 6e28 6269      bin_n=len(bi
+00043870: 6e5f 696e 666f 290a 2020 2020 2020 2020  n_info).        
+00043880: 6669 6c65 6e61 6d65 5f69 6e66 6f3d 6669  filename_info=fi
+00043890: 6c65 6e61 6d65 2e73 706c 6974 2827 2f27  lename.split('/'
+000438a0: 290a 2020 2020 2020 2020 6669 6c65 6e61  ).        filena
+000438b0: 6d65 5f6e 3d6c 656e 2866 696c 656e 616d  me_n=len(filenam
+000438c0: 655f 696e 666f 290a 2020 2020 2020 2020  e_info).        
+000438d0: 666f 7220 6969 2069 6e20 7261 6e67 6528  for ii in range(
+000438e0: 302c 6269 6e5f 6e29 3a0a 2020 2020 2020  0,bin_n):.      
+000438f0: 2020 2020 2020 6966 2066 696c 656e 616d        if filenam
+00043900: 655f 696e 666f 5b66 696c 656e 616d 655f  e_info[filename_
+00043910: 6e2d 312d 6969 5d20 213d 2062 696e 5f69  n-1-ii] != bin_i
+00043920: 6e66 6f5b 6269 6e5f 6e2d 312d 6969 5d3a  nfo[bin_n-1-ii]:
+00043930: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
+00043940: 2020 2020 2020 2020 7265 7475 726e 204a          return J
+00043950: 6f69 6e28 6669 6c65 6e61 6d65 5f69 6e66  oin(filename_inf
+00043960: 6f5b 3a2d 6269 6e5f 6e5d 2c73 796d 626f  o[:-bin_n],symbo
+00043970: 6c3d 272f 2729 0a0a 2020 2020 6465 6620  l='/')..    def 
+00043980: 4669 6e64 2873 656c 662c 6669 6c65 6e61  Find(self,filena
+00043990: 6d65 2c64 6566 6175 6c74 3d5b 5d29 3a0a  me,default=[]):.
+000439a0: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
+000439b0: 7369 6e73 7461 6e63 6528 6669 6c65 6e61  sinstance(filena
+000439c0: 6d65 2c73 7472 293a 2072 6574 7572 6e20  me,str): return 
+000439d0: 6465 6661 756c 740a 2020 2020 2020 2020  default.        
+000439e0: 6669 6c65 6e61 6d65 3d6f 732e 7061 7468  filename=os.path
+000439f0: 2e62 6173 656e 616d 6528 6669 6c65 6e61  .basename(filena
+00043a00: 6d65 290a 2020 2020 2020 2020 6966 206f  me).        if o
+00043a10: 732e 7061 7468 2e69 7364 6972 2873 656c  s.path.isdir(sel
+00043a20: 662e 726f 6f74 5f70 6174 6829 3a0a 2020  f.root_path):.  
+00043a30: 2020 2020 2020 2020 2020 7274 203d 205b            rt = [
+00043a40: 5d0a 2020 2020 2020 2020 2020 2020 666f  ].            fo
+00043a50: 7220 6261 7365 2c20 6469 7273 2c20 6669  r base, dirs, fi
+00043a60: 6c65 7320 696e 206f 732e 7761 6c6b 2873  les in os.walk(s
+00043a70: 656c 662e 726f 6f74 5f70 6174 6829 3a0a  elf.root_path):.
+00043a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043a90: 666f 756e 6420 3d20 666e 6d61 7463 682e  found = fnmatch.
+00043aa0: 6669 6c74 6572 2866 696c 6573 2c20 6669  filter(files, fi
+00043ab0: 6c65 6e61 6d65 290a 2020 2020 2020 2020  lename).        
+00043ac0: 2020 2020 2020 2020 7274 2e65 7874 656e          rt.exten
+00043ad0: 6428 6f73 2e70 6174 682e 6a6f 696e 2862  d(os.path.join(b
+00043ae0: 6173 652c 2066 2920 666f 7220 6620 696e  ase, f) for f in
+00043af0: 2066 6f75 6e64 290a 2020 2020 2020 2020   found).        
+00043b00: 2020 2020 7265 7475 726e 2072 740a 2020      return rt.  
+00043b10: 2020 2020 2020 7265 7475 726e 2064 6566        return def
+00043b20: 6175 6c74 0a0a 2020 2020 6465 6620 5277  ault..    def Rw
+00043b30: 2873 656c 662c 6e61 6d65 2c64 6174 613d  (self,name,data=
+00043b40: 4e6f 6e65 2c6f 7574 3d27 6279 7465 272c  None,out='byte',
+00043b50: 6170 7065 6e64 3d46 616c 7365 2c72 6561  append=False,rea
+00043b60: 643d 4e6f 6e65 2c6f 7665 7277 7269 7465  d=None,overwrite
+00043b70: 3d54 7275 652c 6669 6e66 6f3d 7b7d 2c66  =True,finfo={},f
+00043b80: 696c 655f 6f6e 6c79 3d54 7275 652c 6465  ile_only=True,de
+00043b90: 6661 756c 743d 4661 6c73 6529 3a0a 2020  fault=False):.  
+00043ba0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+00043bb0: 6e63 6528 6e61 6d65 2c73 7472 293a 0a20  nce(name,str):. 
+00043bc0: 2020 2020 2020 2020 2020 2023 6966 2064             #if d
+00043bd0: 6174 6120 6973 204e 6f6e 653a 2023 2052  ata is None: # R
+00043be0: 6561 6420 6672 6f6d 2066 696c 650a 2020  ead from file.  
+00043bf0: 2020 2020 2020 2020 2020 6966 2049 734e            if IsN
+00043c00: 6f6e 6528 6461 7461 293a 2023 2052 6561  one(data): # Rea
+00043c10: 6420 6672 6f6d 2066 696c 650a 2020 2020  d from file.    
+00043c20: 2020 2020 2020 2020 2020 2020 6461 7461              data
+00043c30: 3d63 6174 286e 616d 652c 6669 6c65 5f6f  =cat(name,file_o
+00043c40: 6e6c 793d 6669 6c65 5f6f 6e6c 792c 6279  nly=file_only,by
+00043c50: 7465 3d6f 7574 2c68 6561 643d 7265 6164  te=out,head=read
+00043c60: 2c64 6566 6175 6c74 3d64 6566 6175 6c74  ,default=default
+00043c70: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00043c80: 2020 6966 2064 6174 6120 6973 2046 616c    if data is Fal
+00043c90: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00043ca0: 2020 2020 2020 2020 7265 7475 726e 2046          return F
+00043cb0: 616c 7365 2c64 6566 6175 6c74 0a20 2020  alse,default.   
+00043cc0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00043cd0: 7572 6e20 5472 7565 2c64 6174 610a 2020  urn True,data.  
+00043ce0: 2020 2020 2020 2020 2020 656c 7365 3a20            else: 
+00043cf0: 2320 5772 6974 6520 746f 2066 696c 650a  # Write to file.
+00043d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043d10: 6669 6c65 5f70 6174 683d 6f73 2e70 6174  file_path=os.pat
+00043d20: 682e 6469 726e 616d 6528 6e61 6d65 290a  h.dirname(name).
+00043d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043d40: 6966 206e 6f74 2066 696c 655f 7061 7468  if not file_path
+00043d50: 206f 7220 6f73 2e70 6174 682e 6973 6469   or os.path.isdi
+00043d60: 7228 6669 6c65 5f70 6174 6829 3a20 2320  r(file_path): # 
+00043d70: 6375 7272 656e 7420 6469 7220 6f72 2063  current dir or c
+00043d80: 6f72 7265 6374 2064 6972 6563 746f 7279  orrect directory
+00043d90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00043da0: 2020 2020 2069 6620 6170 7065 6e64 3a0a       if append:.
+00043db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043dc0: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
+00043dd0: 6e28 6e61 6d65 2c27 6162 2729 2061 7320  n(name,'ab') as 
+00043de0: 663a 0a20 2020 2020 2020 2020 2020 2020  f:.             
+00043df0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00043e00: 2e77 7269 7465 2842 7974 6573 2864 6174  .write(Bytes(dat
+00043e10: 6129 290a 2020 2020 2020 2020 2020 2020  a)).            
+00043e20: 2020 2020 2020 2020 656c 6966 206e 6f74          elif not
+00043e30: 2066 696c 655f 6f6e 6c79 3a0a 2020 2020   file_only:.    
+00043e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043e50: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+00043e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043e70: 2020 2020 2066 3d6f 732e 6f70 656e 286e       f=os.open(n
+00043e80: 616d 652c 6f73 2e4f 5f52 4457 5229 0a20  ame,os.O_RDWR). 
+00043e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043ea0: 2020 2020 2020 2020 2020 206f 732e 7772             os.wr
+00043eb0: 6974 6528 662c 6461 7461 290a 2020 2020  ite(f,data).    
 00043ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043ed0: 2020 2020 2066 3d6f 732e 6f70 656e 286e       f=os.open(n
-00043ee0: 616d 652c 6f73 2e4f 5f52 4457 5229 0a20  ame,os.O_RDWR). 
-00043ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043f00: 2020 2020 2020 2020 2020 206f 732e 7772             os.wr
-00043f10: 6974 6528 662c 6461 7461 290a 2020 2020  ite(f,data).    
-00043f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043f30: 2020 2020 2020 2020 6f73 2e63 6c6f 7365          os.close
-00043f40: 2866 290a 2020 2020 2020 2020 2020 2020  (f).            
-00043f50: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-00043f60: 7074 3a0a 2020 2020 2020 2020 2020 2020  pt:.            
-00043f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043f80: 7265 7475 726e 2046 616c 7365 2c4e 6f6e  return False,Non
-00043f90: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00043fa0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00043ed0: 2020 2020 2020 2020 6f73 2e63 6c6f 7365          os.close
+00043ee0: 2866 290a 2020 2020 2020 2020 2020 2020  (f).            
+00043ef0: 2020 2020 2020 2020 2020 2020 6578 6365              exce
+00043f00: 7074 3a0a 2020 2020 2020 2020 2020 2020  pt:.            
+00043f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043f20: 7265 7475 726e 2046 616c 7365 2c4e 6f6e  return False,Non
+00043f30: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00043f40: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00043f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043f60: 2020 2020 7769 7468 206f 7065 6e28 6e61      with open(na
+00043f70: 6d65 2c27 7762 2729 2061 7320 663a 0a20  me,'wb') as f:. 
+00043f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00043f90: 2020 2020 2020 2020 2020 2066 2e77 7269             f.wri
+00043fa0: 7465 2842 7974 6573 2864 6174 6129 290a  te(Bytes(data)).
 00043fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043fc0: 2020 2020 7769 7468 206f 7065 6e28 6e61      with open(na
-00043fd0: 6d65 2c27 7762 2729 2061 7320 663a 0a20  me,'wb') as f:. 
-00043fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00043ff0: 2020 2020 2020 2020 2020 2066 2e77 7269             f.wri
-00044000: 7465 2842 7974 6573 2864 6174 6129 290a  te(Bytes(data)).
+00043fc0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00043fd0: 7461 6e63 6528 6669 6e66 6f2c 6469 6374  tance(finfo,dict
+00043fe0: 2920 616e 6420 6669 6e66 6f3a 2073 656c  ) and finfo: sel
+00043ff0: 662e 5365 7449 6465 6e74 6974 7928 6e61  f.SetIdentity(na
+00044000: 6d65 2c2a 2a66 696e 666f 290a 2020 2020  me,**finfo).    
 00044010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044020: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00044030: 7461 6e63 6528 6669 6e66 6f2c 6469 6374  tance(finfo,dict
-00044040: 2920 616e 6420 6669 6e66 6f3a 2073 656c  ) and finfo: sel
-00044050: 662e 5365 7449 6465 6e74 6974 7928 6e61  f.SetIdentity(na
-00044060: 6d65 2c2a 2a66 696e 666f 290a 2020 2020  me,**finfo).    
-00044070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044080: 2020 2020 236d 6f64 653d 7365 6c66 2e4d      #mode=self.M
-00044090: 6f64 6528 6d6f 6465 290a 2020 2020 2020  ode(mode).      
-000440a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000440b0: 2020 2369 6620 6d6f 6465 3a20 6f73 2e63    #if mode: os.c
-000440c0: 686d 6f64 286e 616d 652c 696e 7428 6d6f  hmod(name,int(mo
-000440d0: 6465 2c62 6173 653d 3829 290a 2020 2020  de,base=8)).    
-000440e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000440f0: 2020 2020 2369 6620 7569 6420 616e 6420      #if uid and 
-00044100: 6769 643a 206f 732e 6368 6f77 6e28 6e61  gid: os.chown(na
-00044110: 6d65 2c75 6964 2c67 6964 290a 2020 2020  me,uid,gid).    
-00044120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044130: 2020 2020 2369 6620 6d74 696d 6520 616e      #if mtime an
-00044140: 6420 6174 696d 653a 206f 732e 7574 696d  d atime: os.utim
-00044150: 6528 6e61 6d65 2c28 6174 696d 652c 6d74  e(name,(atime,mt
-00044160: 696d 6529 2923 2054 696d 6520 7570 6461  ime))# Time upda
-00044170: 7465 206d 7573 7420 6265 2061 7420 6c61  te must be at la
-00044180: 7374 206f 7264 6572 0a20 2020 2020 2020  st order.       
-00044190: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-000441a0: 7572 6e20 5472 7565 2c4e 6f6e 650a 2020  urn True,None.  
-000441b0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000441c0: 2064 6566 6175 6c74 203d 3d20 7b27 6572   default == {'er
-000441d0: 7227 7d3a 0a20 2020 2020 2020 2020 2020  r'}:.           
-000441e0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000441f0: 4661 6c73 652c 2744 6972 6563 746f 7279  False,'Directory
-00044200: 287b 7d29 206e 6f74 2066 6f75 6e64 272e  ({}) not found'.
-00044210: 666f 726d 6174 2866 696c 655f 7061 7468  format(file_path
-00044220: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00044230: 2020 7265 7475 726e 2046 616c 7365 2c64    return False,d
-00044240: 6566 6175 6c74 0a20 2020 2020 2020 2069  efault.        i
-00044250: 6620 6465 6661 756c 7420 3d3d 207b 2765  f default == {'e
-00044260: 7272 277d 3a0a 2020 2020 2020 2020 2020  rr'}:.          
-00044270: 2020 7265 7475 726e 2046 616c 7365 2c27    return False,'
-00044280: 556e 6b6e 6f77 6e20 7479 7065 287b 7d29  Unknown type({})
-00044290: 2066 696c 656e 616d 6527 2e66 6f72 6d61   filename'.forma
-000442a0: 7428 6e61 6d65 290a 2020 2020 2020 2020  t(name).        
-000442b0: 7265 7475 726e 2046 616c 7365 2c64 6566  return False,def
-000442c0: 6175 6c74 0a0a 2020 2020 6465 6620 4d6f  ault..    def Mo
-000442d0: 6465 2873 656c 662c 7661 6c2c 6d6f 6465  de(self,val,mode
-000442e0: 3d27 6368 6d6f 6427 2c64 6566 6175 6c74  ='chmod',default
-000442f0: 3d46 616c 7365 293a 0a20 2020 2020 2020  =False):.       
-00044300: 2027 2727 0a20 2020 2020 2020 2063 6f6e   '''.        con
-00044310: 7665 7274 2046 696c 6520 4d6f 6465 2074  vert File Mode t
-00044320: 6f20 6d61 736b 0a20 2020 2020 2020 206d  o mask.        m
-00044330: 6f64 6520 0a20 2020 2020 2020 2020 2020  ode .           
-00044340: 2763 686d 6f64 2720 3a20 6465 6661 756c  'chmod' : defaul
-00044350: 742c 2063 6f6e 7665 7274 2074 6f20 6d61  t, convert to ma
-00044360: 736b 2028 6f73 2e63 686d 6f64 283c 6669  sk (os.chmod(<fi
-00044370: 6c65 3e2c 3c6d 6173 6b3e 2929 0a20 2020  le>,<mask>)).   
-00044380: 2020 2020 2020 2020 2769 6e74 2720 2020          'int'   
-00044390: 3a20 7265 7475 726e 2074 6f20 696e 7420  : return to int 
-000443a0: 6e75 6d62 6572 206f 6620 6f63 7428 2065  number of oct( e
-000443b0: 783a 2037 3535 2029 0a20 2020 2020 2020  x: 755 ).       
-000443c0: 2020 2020 276f 6374 2720 2020 3a20 7265      'oct'   : re
-000443d0: 7475 726e 206f 6374 206e 756d 6265 7220  turn oct number 
-000443e0: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
-000443f0: 2020 2020 2773 7472 2720 2020 3a20 7265      'str'   : re
-00044400: 7475 726e 2073 7472 696e 6720 282d 7277  turn string (-rw
-00044410: 7872 2d2d 722d 2d29 0a20 2020 2020 2020  xr--r--).       
-00044420: 2064 6566 6175 6c74 3a20 4661 6c73 650a   default: False.
-00044430: 2020 2020 2020 2020 2727 270a 2020 2020          '''.    
-00044440: 2020 2020 6465 6620 5f6d 6f64 655f 286f      def _mode_(o
-00044450: 6374 5f64 6174 612c 6d6f 6465 3d27 6368  ct_data,mode='ch
-00044460: 6d6f 6427 293a 0a20 2020 2020 2020 2020  mod'):.         
-00044470: 2020 2023 636f 6e76 6572 7420 746f 206f     #convert to o
-00044480: 6374 616c 2074 6f20 3862 6974 206d 6173  ctal to 8bit mas
-00044490: 6b2c 2069 6e74 2c20 7374 7269 6e67 0a20  k, int, string. 
-000444a0: 2020 2020 2020 2020 2020 2069 6620 6d6f             if mo
-000444b0: 6465 203d 3d20 2763 686d 6f64 273a 0a20  de == 'chmod':. 
-000444c0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000444d0: 6574 7572 6e20 696e 7428 6f63 745f 6461  eturn int(oct_da
-000444e0: 7461 2c62 6173 653d 3829 0a20 2020 2020  ta,base=8).     
-000444f0: 2020 2020 2020 2065 6c69 6620 6d6f 6465         elif mode
-00044500: 2069 6e20 5b27 696e 7427 2c69 6e74 5d3a   in ['int',int]:
-00044510: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00044520: 2072 6574 7572 6e20 696e 7428 6f63 745f   return int(oct_
-00044530: 6461 7461 2e72 6570 6c61 6365 2827 6f27  data.replace('o'
-00044540: 2c27 2729 2c62 6173 653d 3130 290a 2020  ,''),base=10).  
-00044550: 2020 2020 2020 2020 2020 656c 6966 206d            elif m
-00044560: 6f64 6520 696e 205b 2773 7472 272c 7374  ode in ['str',st
-00044570: 725d 3a0a 2020 2020 2020 2020 2020 2020  r]:.            
-00044580: 2020 2020 6d3d 5b5d 0a20 2020 2020 2020      m=[].       
-00044590: 2020 2020 2020 2020 2023 666f 7220 6920           #for i 
-000445a0: 696e 206c 6973 7428 7374 7228 696e 7428  in list(str(int(
-000445b0: 6f63 745f 6461 7461 2c62 6173 653d 3130  oct_data,base=10
-000445c0: 2929 293a 0a20 2020 2020 2020 2020 2020  ))):.           
-000445d0: 2020 2020 2074 3d46 616c 7365 0a20 2020       t=False.   
-000445e0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-000445f0: 206e 2c69 2069 6e20 656e 756d 6572 6174   n,i in enumerat
-00044600: 6528 7374 7228 696e 7428 6f63 745f 6461  e(str(int(oct_da
-00044610: 7461 2e72 6570 6c61 6365 2827 6f27 2c27  ta.replace('o','
-00044620: 2729 2c62 6173 653d 3130 2929 293a 0a20  '),base=10))):. 
-00044630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044640: 2020 2069 6620 6e20 3d3d 2030 3a0a 2020     if n == 0:.  
-00044650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044660: 2020 2020 2020 6966 2069 203d 3d20 2731        if i == '1
-00044670: 273a 2074 3d54 7275 650a 2020 2020 2020  ': t=True.      
-00044680: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00044690: 206e 203e 2030 3a0a 2020 2020 2020 2020   n > 0:.        
-000446a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000446b0: 6966 2069 203d 3d20 2737 273a 0a20 2020  if i == '7':.   
-000446c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000446d0: 2020 2020 2020 2020 206d 2e61 7070 656e           m.appen
-000446e0: 6428 2772 7778 2729 0a20 2020 2020 2020  d('rwx').       
-000446f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044700: 2065 6c69 6620 6920 3d3d 2027 3627 3a0a   elif i == '6':.
-00044710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044720: 2020 2020 2020 2020 2020 2020 6d2e 6170              m.ap
-00044730: 7065 6e64 2827 7277 2d27 290a 2020 2020  pend('rw-').    
-00044740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044750: 2020 2020 656c 6966 2069 203d 3d20 2735      elif i == '5
-00044760: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
-00044770: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-00044780: 2e61 7070 656e 6428 2772 2d78 2729 0a20  .append('r-x'). 
-00044790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000447a0: 2020 2020 2020 2065 6c69 6620 6920 3d3d         elif i ==
-000447b0: 2027 3427 3a0a 2020 2020 2020 2020 2020   '4':.          
-000447c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000447d0: 2020 6d2e 6170 7065 6e64 2827 722d 2d27    m.append('r--'
-000447e0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000447f0: 2020 2020 2020 2020 2020 656c 6966 2069            elif i
-00044800: 203d 3d20 2733 273a 0a20 2020 2020 2020   == '3':.       
-00044810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044820: 2020 2020 206d 2e61 7070 656e 6428 272d       m.append('-
-00044830: 7778 2729 0a20 2020 2020 2020 2020 2020  wx').           
-00044840: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-00044850: 6620 6920 3d3d 2027 3227 3a0a 2020 2020  f i == '2':.    
-00044860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044870: 2020 2020 2020 2020 6d2e 6170 7065 6e64          m.append
-00044880: 2827 2d77 2d27 290a 2020 2020 2020 2020  ('-w-').        
-00044890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000448a0: 656c 6966 2069 203d 3d20 2731 273a 0a20  elif i == '1':. 
-000448b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000448c0: 2020 2020 2020 2020 2020 206d 2e61 7070             m.app
-000448d0: 656e 6428 272d 2d78 2729 0a20 2020 2020  end('--x').     
-000448e0: 2020 2020 2020 2020 2020 2073 7472 5f6d             str_m
-000448f0: 6f64 3d4a 6f69 6e28 6d2c 2727 290a 2020  od=Join(m,'').  
-00044900: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00044910: 2074 3a20 7265 7475 726e 2073 7472 5f6d   t: return str_m
-00044920: 6f64 5b3a 2d31 5d2b 2774 270a 2020 2020  od[:-1]+'t'.    
-00044930: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00044940: 726e 2073 7472 5f6d 6f64 0a20 2020 2020  rn str_mod.     
-00044950: 2020 2020 2020 2072 6574 7572 6e20 6f63         return oc
-00044960: 745f 6461 7461 0a20 2020 2020 2020 2069  t_data.        i
-00044970: 6620 6973 696e 7374 616e 6365 2876 616c  f isinstance(val
-00044980: 2c69 6e74 293a 0a20 2020 2020 2020 2020  ,int):.         
-00044990: 2020 2023 6966 2076 616c 203e 2035 3131     #if val > 511
-000449a0: 3a20 2020 2020 2020 2373 7461 742e 7374  :       #stat.st
-000449b0: 5f6d 6f64 6520 2833 3237 3638 207e 2033  _mode (32768 ~ 3
-000449c0: 3332 3739 290a 2020 2020 2020 2020 2020  3279).          
-000449d0: 2020 2373 7461 742e 7374 5f6d 6f64 6520    #stat.st_mode 
-000449e0: 2866 696c 653a 2033 3237 3638 7e33 3638  (file: 32768~368
-000449f0: 3633 2c20 6469 7265 6374 6f72 793a 2031  63, directory: 1
-00044a00: 3633 3834 207e 2032 3034 3739 290a 2020  6384 ~ 20479).  
-00044a10: 2020 2020 2020 2020 2020 6966 2033 3237            if 327
-00044a20: 3638 203c 3d20 7661 6c20 3c3d 2033 3638  68 <= val <= 368
-00044a30: 3633 206f 7220 3136 3338 3420 3c3d 2076  63 or 16384 <= v
-00044a40: 616c 203c 3d20 3230 3437 393a 2020 2023  al <= 20479:   #
-00044a50: 7374 6174 2e73 745f 6d6f 6465 0a20 2020  stat.st_mode.   
-00044a60: 2020 2020 2020 2020 2020 2020 2023 7265               #re
-00044a70: 7475 726e 205f 6d6f 6465 5f28 6f63 7428  turn _mode_(oct(
-00044a80: 7661 6c29 5b2d 343a 5d2c 6d6f 6465 2920  val)[-4:],mode) 
-00044a90: 2320 746f 206f 6374 616c 206e 756d 6265  # to octal numbe
-00044aa0: 7220 286f 6374 2876 616c 295b 2d34 3a5d  r (oct(val)[-4:]
-00044ab0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00044ac0: 2020 7265 7475 726e 205f 6d6f 6465 5f28    return _mode_(
-00044ad0: 6f63 7428 7661 6c20 2620 306f 3737 3729  oct(val & 0o777)
-00044ae0: 2c6d 6f64 6529 2023 2074 6f20 6f63 7461  ,mode) # to octa
-00044af0: 6c20 6e75 6d62 6572 2028 6f63 7428 7661  l number (oct(va
-00044b00: 6c29 5b2d 343a 5d29 0a20 2020 2020 2020  l)[-4:]).       
-00044b10: 2020 2020 2065 6c69 6620 3531 3120 3e3d       elif 511 >=
-00044b20: 2076 616c 203e 2036 333a 2020 2020 2020   val > 63:      
-00044b30: 236d 6173 6b0a 2020 2020 2020 2020 2020  #mask.          
-00044b40: 2020 2020 2020 7265 7475 726e 205f 6d6f        return _mo
-00044b50: 6465 5f28 6f63 7428 7661 6c29 2c6d 6f64  de_(oct(val),mod
-00044b60: 6529 2020 2020 2020 2320 746f 206f 6361  e)      # to oca
-00044b70: 6c20 6e75 6d62 6572 286f 6374 2876 616c  l number(oct(val
-00044b80: 2929 0a20 2020 2020 2020 2020 2020 2065  )).            e
-00044b90: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00044ba0: 2020 2020 2072 6574 7572 6e20 5f6d 6f64       return _mod
-00044bb0: 655f 2827 2530 3464 2725 2876 616c 292c  e_('%04d'%(val),
-00044bc0: 6d6f 6465 2920 2020 2020 2023 2074 6f20  mode)      # to 
-00044bd0: 6f63 616c 206e 756d 6265 7228 6f63 7428  ocal number(oct(
-00044be0: 7661 6c29 290a 2020 2020 2020 2020 656c  val)).        el
-00044bf0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00044c00: 7661 6c3d 5374 7228 7661 6c2c 6465 6661  val=Str(val,defa
-00044c10: 756c 743d 4e6f 6e65 290a 2020 2020 2020  ult=None).      
-00044c20: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-00044c30: 6e63 6528 7661 6c2c 7374 7229 3a0a 2020  nce(val,str):.  
-00044c40: 2020 2020 2020 2020 2020 2020 2020 7661                va
-00044c50: 6c5f 6c65 6e3d 6c65 6e28 7661 6c29 0a20  l_len=len(val). 
-00044c60: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-00044c70: 756d 3d49 6e74 2876 616c 2c64 6566 6175  um=Int(val,defau
-00044c80: 6c74 3d4e 6f6e 6529 0a20 2020 2020 2020  lt=None).       
-00044c90: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-00044ca0: 7374 616e 6365 286e 756d 2c69 6e74 293a  stance(num,int):
-00044cb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00044cc0: 2020 2020 2069 6620 3320 3c3d 206c 656e       if 3 <= len
-00044cd0: 2876 616c 2920 3c3d 3420 616e 6420 3130  (val) <=4 and 10
-00044ce0: 3020 3c3d 206e 756d 203c 3d20 3737 373a  0 <= num <= 777:
-00044cf0: 2023 7374 7269 6e67 2074 7970 6520 6f66   #string type of
-00044d00: 2070 6572 6d69 7373 696f 6e20 6e75 6d62   permission numb
-00044d10: 6572 286f 6374 616c 206e 756d 6265 7229  er(octal number)
-00044d20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00044d30: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00044d40: 5f6d 6f64 655f 2827 2530 3464 2725 286e  _mode_('%04d'%(n
-00044d50: 756d 292c 6d6f 6465 290a 2020 2020 2020  um),mode).      
-00044d60: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00044d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044d80: 2020 2020 7661 6c5f 6c65 6e3d 6c65 6e28      val_len=len(
-00044d90: 7661 6c29 0a20 2020 2020 2020 2020 2020  val).           
-00044da0: 2020 2020 2020 2020 2069 6620 393c 3d20           if 9<= 
-00044db0: 7661 6c5f 6c65 6e20 3c3d 3130 3a0a 2020  val_len <=10:.  
-00044dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044dd0: 2020 2020 2020 6966 2076 616c 5f6c 656e        if val_len
-00044de0: 203d 3d20 3130 2061 6e64 2076 616c 5b30   == 10 and val[0
-00044df0: 5d20 696e 205b 272d 272c 2764 272c 2773  ] in ['-','d','s
-00044e00: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-00044e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044e20: 7661 6c3d 7661 6c5b 313a 5d0a 2020 2020  val=val[1:].    
-00044e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044e40: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00044e50: 2020 2020 2020 2020 2020 2020 2020 5374                St
-00044e60: 6445 7272 2827 4261 6420 7065 726d 6973  dErr('Bad permis
-00044e70: 7369 6f6e 206c 656e 6774 6827 290a 2020  sion length').  
-00044e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044e90: 2020 2020 2020 7265 7475 726e 2064 6566        return def
-00044ea0: 6175 6c74 0a20 2020 2020 2020 2020 2020  ault.           
-00044eb0: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-00044ec0: 616c 6c28 7661 6c5b 6b5d 2069 6e20 2772  all(val[k] in 'r
-00044ed0: 772d 2720 666f 7220 6b20 696e 205b 302c  w-' for k in [0,
-00044ee0: 312c 332c 342c 362c 375d 293a 0a20 2020  1,3,4,6,7]):.   
-00044ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044f00: 2020 2020 2053 7464 4572 7228 2742 6164       StdErr('Bad
-00044f10: 2070 6572 6d69 7373 696f 6e20 666f 726d   permission form
-00044f20: 6174 2028 7265 6164 2d77 7269 7465 2927  at (read-write)'
-00044f30: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00044f40: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00044f50: 2064 6566 6175 6c74 0a20 2020 2020 2020   default.       
-00044f60: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00044f70: 6e6f 7420 616c 6c28 7661 6c5b 6b5d 2069  not all(val[k] i
-00044f80: 6e20 2778 732d 2720 666f 7220 6b20 696e  n 'xs-' for k in
-00044f90: 205b 322c 355d 293a 0a20 2020 2020 2020   [2,5]):.       
-00044fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044fb0: 2053 7464 4572 7228 2742 6164 2070 6572   StdErr('Bad per
-00044fc0: 6d69 7373 696f 6e20 666f 726d 6174 2028  mission format (
-00044fd0: 6578 6563 7574 6529 2729 0a20 2020 2020  execute)').     
-00044fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00044ff0: 2020 2072 6574 7572 6e20 6465 6661 756c     return defaul
-00045000: 740a 2020 2020 2020 2020 2020 2020 2020  t.              
-00045010: 2020 2020 2020 6966 2076 616c 5b38 5d20        if val[8] 
-00045020: 6e6f 7420 696e 2027 7874 2d27 3a0a 2020  not in 'xt-':.  
-00045030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045040: 2020 2020 2020 5374 6445 7272 2820 2742        StdErr( 'B
-00045050: 6164 2070 6572 6d69 7373 696f 6e20 666f  ad permission fo
-00045060: 726d 6174 2028 6578 6563 7574 6520 6f74  rmat (execute ot
-00045070: 6865 7229 2729 0a20 2020 2020 2020 2020  her)').         
-00045080: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00045090: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
-000450a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000450b0: 2020 6d20 3d20 300a 2020 2020 2020 2020    m = 0.        
-000450c0: 2020 2020 2020 2020 2020 2020 6966 2076              if v
-000450d0: 616c 5b30 5d20 3d3d 2027 7227 3a20 6d20  al[0] == 'r': m 
-000450e0: 7c3d 2073 7461 742e 535f 4952 5553 520a  |= stat.S_IRUSR.
-000450f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045100: 2020 2020 6966 2076 616c 5b31 5d20 3d3d      if val[1] ==
-00045110: 2027 7727 3a20 6d20 7c3d 2073 7461 742e   'w': m |= stat.
-00045120: 535f 4957 5553 520a 2020 2020 2020 2020  S_IWUSR.        
-00045130: 2020 2020 2020 2020 2020 2020 6966 2076              if v
-00045140: 616c 5b32 5d20 3d3d 2027 7827 3a20 6d20  al[2] == 'x': m 
-00045150: 7c3d 2073 7461 742e 535f 4958 5553 520a  |= stat.S_IXUSR.
-00045160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045170: 2020 2020 6966 2076 616c 5b32 5d20 3d3d      if val[2] ==
-00045180: 2027 7327 3a20 6d20 7c3d 2073 7461 742e   's': m |= stat.
-00045190: 535f 4958 5553 5220 7c20 7374 6174 2e53  S_IXUSR | stat.S
-000451a0: 5f49 5355 4944 0a0a 2020 2020 2020 2020  _ISUID..        
-000451b0: 2020 2020 2020 2020 2020 2020 6966 2076              if v
-000451c0: 616c 5b33 5d20 3d3d 2027 7227 3a20 6d20  al[3] == 'r': m 
-000451d0: 7c3d 2073 7461 742e 535f 4952 4752 500a  |= stat.S_IRGRP.
-000451e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000451f0: 2020 2020 6966 2076 616c 5b34 5d20 3d3d      if val[4] ==
-00045200: 2027 7727 3a20 6d20 7c3d 2073 7461 742e   'w': m |= stat.
-00045210: 535f 4957 4752 500a 2020 2020 2020 2020  S_IWGRP.        
-00045220: 6966 2069 7369 6e73 7461 6e63 6528 7661  if isinstance(va
-00045230: 6c2c 696e 7429 3a0a 2020 2020 2020 2020  l,int):.        
-00045240: 2020 2020 2369 6620 7661 6c20 3e20 3531      #if val > 51
-00045250: 313a 2020 2020 2020 2023 7374 6174 2e73  1:       #stat.s
-00045260: 745f 6d6f 6465 2028 3332 3736 3820 7e20  t_mode (32768 ~ 
-00045270: 3333 3237 3929 0a20 2020 2020 2020 2020  33279).         
-00045280: 2020 2023 7374 6174 2e73 745f 6d6f 6465     #stat.st_mode
-00045290: 2028 6669 6c65 3a20 3332 3736 387e 3336   (file: 32768~36
-000452a0: 3836 332c 2064 6972 6563 746f 7279 3a20  863, directory: 
-000452b0: 3136 3338 3420 7e20 3230 3437 3929 0a20  16384 ~ 20479). 
-000452c0: 2020 2020 2020 2020 2020 2069 6620 3332             if 32
-000452d0: 3736 3820 3c3d 2076 616c 203c 3d20 3336  768 <= val <= 36
-000452e0: 3836 3320 6f72 2031 3633 3834 203c 3d20  863 or 16384 <= 
-000452f0: 7661 6c20 3c3d 2032 3034 3739 3a20 2020  val <= 20479:   
-00045300: 2373 7461 742e 7374 5f6d 6f64 650a 2020  #stat.st_mode.  
-00045310: 2020 2020 2020 2020 2020 2020 2020 2372                #r
-00045320: 6574 7572 6e20 5f6d 6f64 655f 286f 6374  eturn _mode_(oct
-00045330: 2876 616c 295b 2d34 3a5d 2c6d 6f64 6529  (val)[-4:],mode)
-00045340: 2023 2074 6f20 6f63 7461 6c20 6e75 6d62   # to octal numb
-00045350: 6572 2028 6f63 7428 7661 6c29 5b2d 343a  er (oct(val)[-4:
-00045360: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
-00045370: 2020 2072 6574 7572 6e20 5f6d 6f64 655f     return _mode_
-00045380: 286f 6374 2876 616c 2026 2030 6f37 3737  (oct(val & 0o777
-00045390: 292c 6d6f 6465 2920 2320 746f 206f 6374  ),mode) # to oct
-000453a0: 616c 206e 756d 6265 7220 286f 6374 2876  al number (oct(v
-000453b0: 616c 295b 2d34 3a5d 290a 2020 2020 2020  al)[-4:]).      
-000453c0: 2020 2020 2020 656c 6966 2035 3131 203e        elif 511 >
-000453d0: 3d20 7661 6c20 3e20 3633 3a20 2020 2020  = val > 63:     
-000453e0: 2023 6d61 736b 0a20 2020 2020 2020 2020   #mask.         
-000453f0: 2020 2020 2020 2072 6574 7572 6e20 5f6d         return _m
-00045400: 6f64 655f 286f 6374 2876 616c 292c 6d6f  ode_(oct(val),mo
-00045410: 6465 2920 2020 2020 2023 2074 6f20 6f63  de)      # to oc
-00045420: 616c 206e 756d 6265 7228 6f63 7428 7661  al number(oct(va
-00045430: 6c29 290a 2020 2020 2020 2020 2020 2020  l)).            
-00045440: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00045450: 2020 2020 2020 7265 7475 726e 205f 6d6f        return _mo
-00045460: 6465 5f28 2725 3034 6427 2528 7661 6c29  de_('%04d'%(val)
-00045470: 2c6d 6f64 6529 2020 2020 2020 2320 746f  ,mode)      # to
-00045480: 206f 6361 6c20 6e75 6d62 6572 286f 6374   ocal number(oct
-00045490: 2876 616c 2929 0a20 2020 2020 2020 2065  (val)).        e
-000454a0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000454b0: 2076 616c 3d53 7472 2876 616c 2c64 6566   val=Str(val,def
-000454c0: 6175 6c74 3d4e 6f6e 6529 0a20 2020 2020  ault=None).     
-000454d0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-000454e0: 616e 6365 2876 616c 2c73 7472 293a 0a20  ance(val,str):. 
-000454f0: 2020 2020 2020 2020 2020 2020 2020 2076                 v
-00045500: 616c 5f6c 656e 3d6c 656e 2876 616c 290a  al_len=len(val).
-00045510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045520: 6e75 6d3d 496e 7428 7661 6c2c 6465 6661  num=Int(val,defa
-00045530: 756c 743d 4e6f 6e65 290a 2020 2020 2020  ult=None).      
-00045540: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-00045550: 6e73 7461 6e63 6528 6e75 6d2c 696e 7429  nstance(num,int)
-00045560: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00045570: 2020 2020 2020 6966 2033 203c 3d20 6c65        if 3 <= le
-00045580: 6e28 7661 6c29 203c 3d34 2061 6e64 2031  n(val) <=4 and 1
-00045590: 3030 203c 3d20 6e75 6d20 3c3d 2037 3737  00 <= num <= 777
-000455a0: 3a20 2373 7472 696e 6720 7479 7065 206f  : #string type o
-000455b0: 6620 7065 726d 6973 7369 6f6e 206e 756d  f permission num
-000455c0: 6265 7228 6f63 7461 6c20 6e75 6d62 6572  ber(octal number
-000455d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000455e0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-000455f0: 205f 6d6f 6465 5f28 2725 3034 6427 2528   _mode_('%04d'%(
-00045600: 6e75 6d29 2c6d 6f64 6529 0a20 2020 2020  num),mode).     
-00045610: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00045620: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00045630: 2020 2020 2076 616c 5f6c 656e 3d6c 656e       val_len=len
-00045640: 2876 616c 290a 2020 2020 2020 2020 2020  (val).          
-00045650: 2020 2020 2020 2020 2020 6966 2039 3c3d            if 9<=
-00045660: 2076 616c 5f6c 656e 203c 3d31 303a 0a20   val_len <=10:. 
-00045670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045680: 2020 2020 2020 2069 6620 7661 6c5f 6c65         if val_le
-00045690: 6e20 3d3d 2031 3020 616e 6420 7661 6c5b  n == 10 and val[
-000456a0: 305d 2069 6e20 5b27 2d27 2c27 6427 2c27  0] in ['-','d','
-000456b0: 7327 5d3a 0a20 2020 2020 2020 2020 2020  s']:.           
-000456c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000456d0: 2076 616c 3d76 616c 5b31 3a5d 0a20 2020   val=val[1:].   
-000456e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000456f0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00045700: 2020 2020 2020 2020 2020 2020 2020 2053                 S
-00045710: 7464 4572 7228 2742 6164 2070 6572 6d69  tdErr('Bad permi
-00045720: 7373 696f 6e20 6c65 6e67 7468 2729 0a20  ssion length'). 
-00045730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045740: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
-00045750: 6661 756c 740a 2020 2020 2020 2020 2020  fault.          
-00045760: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-00045770: 2061 6c6c 2876 616c 5b6b 5d20 696e 2027   all(val[k] in '
-00045780: 7277 2d27 2066 6f72 206b 2069 6e20 5b30  rw-' for k in [0
-00045790: 2c31 2c33 2c34 2c36 2c37 5d29 3a0a 2020  ,1,3,4,6,7]):.  
-000457a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000457b0: 2020 2020 2020 5374 6445 7272 2827 4261        StdErr('Ba
-000457c0: 6420 7065 726d 6973 7369 6f6e 2066 6f72  d permission for
-000457d0: 6d61 7420 2872 6561 642d 7772 6974 6529  mat (read-write)
-000457e0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-000457f0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00045800: 6e20 6465 6661 756c 740a 2020 2020 2020  n default.      
-00045810: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00045820: 206e 6f74 2061 6c6c 2876 616c 5b6b 5d20   not all(val[k] 
-00045830: 696e 2027 7873 2d27 2066 6f72 206b 2069  in 'xs-' for k i
-00045840: 6e20 5b32 2c35 5d29 3a0a 2020 2020 2020  n [2,5]):.      
-00045850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045860: 2020 5374 6445 7272 2827 4261 6420 7065    StdErr('Bad pe
-00045870: 726d 6973 7369 6f6e 2066 6f72 6d61 7420  rmission format 
-00045880: 2865 7865 6375 7465 2927 290a 2020 2020  (execute)').    
-00045890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000458a0: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
-000458b0: 6c74 0a20 2020 2020 2020 2020 2020 2020  lt.             
-000458c0: 2020 2020 2020 2069 6620 7661 6c5b 385d         if val[8]
-000458d0: 206e 6f74 2069 6e20 2778 742d 273a 0a20   not in 'xt-':. 
-000458e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000458f0: 2020 2020 2020 2053 7464 4572 7228 2027         StdErr( '
-00045900: 4261 6420 7065 726d 6973 7369 6f6e 2066  Bad permission f
-00045910: 6f72 6d61 7420 2865 7865 6375 7465 206f  ormat (execute o
-00045920: 7468 6572 2927 290a 2020 2020 2020 2020  ther)').        
-00045930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045940: 7265 7475 726e 2064 6566 6175 6c74 0a20  return default. 
-00045950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045960: 2020 206d 203d 2030 0a20 2020 2020 2020     m = 0.       
-00045970: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00045980: 7661 6c5b 305d 203d 3d20 2772 273a 206d  val[0] == 'r': m
-00045990: 207c 3d20 7374 6174 2e53 5f49 5255 5352   |= stat.S_IRUSR
-000459a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000459b0: 2020 2020 2069 6620 7661 6c5b 315d 203d       if val[1] =
-000459c0: 3d20 2777 273a 206d 207c 3d20 7374 6174  = 'w': m |= stat
-000459d0: 2e53 5f49 5755 5352 0a20 2020 2020 2020  .S_IWUSR.       
-000459e0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000459f0: 7661 6c5b 325d 203d 3d20 2778 273a 206d  val[2] == 'x': m
-00045a00: 207c 3d20 7374 6174 2e53 5f49 5855 5352   |= stat.S_IXUSR
-00045a10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00045a20: 2020 2020 2069 6620 7661 6c5b 325d 203d       if val[2] =
-00045a30: 3d20 2773 273a 206d 207c 3d20 7374 6174  = 's': m |= stat
-00045a40: 2e53 5f49 5855 5352 207c 2073 7461 742e  .S_IXUSR | stat.
-00045a50: 535f 4953 5549 440a 0a20 2020 2020 2020  S_ISUID..       
-00045a60: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00045a70: 7661 6c5b 335d 203d 3d20 2772 273a 206d  val[3] == 'r': m
-00045a80: 207c 3d20 7374 6174 2e53 5f49 5247 5250   |= stat.S_IRGRP
-00045a90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00045aa0: 2020 2020 2069 6620 7661 6c5b 345d 203d       if val[4] =
-00045ab0: 3d20 2777 273a 206d 207c 3d20 7374 6174  = 'w': m |= stat
-00045ac0: 2e53 5f49 5747 5250 0a20 2020 2020 2020  .S_IWGRP.       
-00045ad0: 2069 6620 6973 696e 7374 616e 6365 2876   if isinstance(v
-00045ae0: 616c 2c69 6e74 293a 0a20 2020 2020 2020  al,int):.       
-00045af0: 2020 2020 2023 6966 2076 616c 203e 2035       #if val > 5
-00045b00: 3131 3a20 2020 2020 2020 2373 7461 742e  11:       #stat.
-00045b10: 7374 5f6d 6f64 6520 2833 3237 3638 207e  st_mode (32768 ~
-00045b20: 2033 3332 3739 290a 2020 2020 2020 2020   33279).        
-00045b30: 2020 2020 2373 7461 742e 7374 5f6d 6f64      #stat.st_mod
-00045b40: 6520 2866 696c 653a 2033 3237 3638 7e33  e (file: 32768~3
-00045b50: 3638 3633 2c20 6469 7265 6374 6f72 793a  6863, directory:
-00045b60: 2031 3633 3834 207e 2032 3034 3739 290a   16384 ~ 20479).
-00045b70: 2020 2020 2020 2020 2020 2020 6966 2033              if 3
-00045b80: 3237 3638 203c 3d20 7661 6c20 3c3d 2033  2768 <= val <= 3
-00045b90: 3638 3633 206f 7220 3136 3338 3420 3c3d  6863 or 16384 <=
-00045ba0: 2076 616c 203c 3d20 3230 3437 393a 2020   val <= 20479:  
-00045bb0: 2023 7374 6174 2e73 745f 6d6f 6465 0a20   #stat.st_mode. 
-00045bc0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00045bd0: 7265 7475 726e 205f 6d6f 6465 5f28 6f63  return _mode_(oc
-00045be0: 7428 7661 6c29 5b2d 343a 5d2c 6d6f 6465  t(val)[-4:],mode
-00045bf0: 2920 2320 746f 206f 6374 616c 206e 756d  ) # to octal num
-00045c00: 6265 7220 286f 6374 2876 616c 295b 2d34  ber (oct(val)[-4
-00045c10: 3a5d 290a 2020 2020 2020 2020 2020 2020  :]).            
-00045c20: 2020 2020 7265 7475 726e 205f 6d6f 6465      return _mode
-00045c30: 5f28 6f63 7428 7661 6c20 2620 306f 3737  _(oct(val & 0o77
-00045c40: 3729 2c6d 6f64 6529 2023 2074 6f20 6f63  7),mode) # to oc
-00045c50: 7461 6c20 6e75 6d62 6572 2028 6f63 7428  tal number (oct(
-00045c60: 7661 6c29 5b2d 343a 5d29 0a20 2020 2020  val)[-4:]).     
-00045c70: 2020 2020 2020 2065 6c69 6620 3531 3120         elif 511 
-00045c80: 3e3d 2076 616c 203e 2036 333a 2020 2020  >= val > 63:    
-00045c90: 2020 236d 6173 6b0a 2020 2020 2020 2020    #mask.        
-00045ca0: 2020 2020 2020 2020 7265 7475 726e 205f          return _
-00045cb0: 6d6f 6465 5f28 6f63 7428 7661 6c29 2c6d  mode_(oct(val),m
-00045cc0: 6f64 6529 2020 2020 2020 2320 746f 206f  ode)      # to o
-00045cd0: 6361 6c20 6e75 6d62 6572 286f 6374 2876  cal number(oct(v
-00045ce0: 616c 2929 0a20 2020 2020 2020 2020 2020  al)).           
-00045cf0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00045d00: 2020 2020 2020 2072 6574 7572 6e20 5f6d         return _m
-00045d10: 6f64 655f 2827 2530 3464 2725 2876 616c  ode_('%04d'%(val
-00045d20: 292c 6d6f 6465 2920 2020 2020 2023 2074  ),mode)      # t
-00045d30: 6f20 6f63 616c 206e 756d 6265 7228 6f63  o ocal number(oc
-00045d40: 7428 7661 6c29 290a 2020 2020 2020 2020  t(val)).        
-00045d50: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00045d60: 2020 7661 6c3d 5374 7228 7661 6c2c 6465    val=Str(val,de
-00045d70: 6661 756c 743d 4e6f 6e65 290a 2020 2020  fault=None).    
-00045d80: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00045d90: 7461 6e63 6528 7661 6c2c 7374 7229 3a0a  tance(val,str):.
-00045da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045db0: 7661 6c5f 6c65 6e3d 6c65 6e28 7661 6c29  val_len=len(val)
-00045dc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00045dd0: 206e 756d 3d49 6e74 2876 616c 2c64 6566   num=Int(val,def
-00045de0: 6175 6c74 3d4e 6f6e 6529 0a20 2020 2020  ault=None).     
-00045df0: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-00045e00: 696e 7374 616e 6365 286e 756d 2c69 6e74  instance(num,int
-00045e10: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00045e20: 2020 2020 2020 2069 6620 3320 3c3d 206c         if 3 <= l
-00045e30: 656e 2876 616c 2920 3c3d 3420 616e 6420  en(val) <=4 and 
-00045e40: 3130 3020 3c3d 206e 756d 203c 3d20 3737  100 <= num <= 77
-00045e50: 373a 2023 7374 7269 6e67 2074 7970 6520  7: #string type 
-00045e60: 6f66 2070 6572 6d69 7373 696f 6e20 6e75  of permission nu
-00045e70: 6d62 6572 286f 6374 616c 206e 756d 6265  mber(octal numbe
-00045e80: 7229 0a20 2020 2020 2020 2020 2020 2020  r).             
-00045e90: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00045ea0: 6e20 5f6d 6f64 655f 2827 2530 3464 2725  n _mode_('%04d'%
-00045eb0: 286e 756d 292c 6d6f 6465 290a 2020 2020  (num),mode).    
-00045ec0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00045ed0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00045ee0: 2020 2020 2020 7661 6c5f 6c65 6e3d 6c65        val_len=le
-00045ef0: 6e28 7661 6c29 0a20 2020 2020 2020 2020  n(val).         
-00045f00: 2020 2020 2020 2020 2020 2069 6620 393c             if 9<
-00045f10: 3d20 7661 6c5f 6c65 6e20 3c3d 3130 3a0a  = val_len <=10:.
-00045f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045f30: 2020 2020 2020 2020 6966 2076 616c 5f6c          if val_l
-00045f40: 656e 203d 3d20 3130 2061 6e64 2076 616c  en == 10 and val
-00045f50: 5b30 5d20 696e 205b 272d 272c 2764 272c  [0] in ['-','d',
-00045f60: 2773 275d 3a0a 2020 2020 2020 2020 2020  's']:.          
-00045f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045f80: 2020 7661 6c3d 7661 6c5b 313a 5d0a 2020    val=val[1:].  
-00045f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045fa0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00045fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045fc0: 5374 6445 7272 2827 4261 6420 7065 726d  StdErr('Bad perm
-00045fd0: 6973 7369 6f6e 206c 656e 6774 6827 290a  ission length').
-00045fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00045ff0: 2020 2020 2020 2020 7265 7475 726e 2064          return d
-00046000: 6566 6175 6c74 0a20 2020 2020 2020 2020  efault.         
-00046010: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-00046020: 7420 616c 6c28 7661 6c5b 6b5d 2069 6e20  t all(val[k] in 
-00046030: 2772 772d 2720 666f 7220 6b20 696e 205b  'rw-' for k in [
-00046040: 302c 312c 332c 342c 362c 375d 293a 0a20  0,1,3,4,6,7]):. 
-00046050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046060: 2020 2020 2020 2053 7464 4572 7228 2742         StdErr('B
-00046070: 6164 2070 6572 6d69 7373 696f 6e20 666f  ad permission fo
-00046080: 726d 6174 2028 7265 6164 2d77 7269 7465  rmat (read-write
-00046090: 2927 290a 2020 2020 2020 2020 2020 2020  )').            
-000460a0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000460b0: 726e 2064 6566 6175 6c74 0a20 2020 2020  rn default.     
-000460c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000460d0: 6620 6e6f 7420 616c 6c28 7661 6c5b 6b5d  f not all(val[k]
-000460e0: 2069 6e20 2778 732d 2720 666f 7220 6b20   in 'xs-' for k 
-000460f0: 696e 205b 322c 355d 293a 0a20 2020 2020  in [2,5]):.     
-00046100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046110: 2020 2053 7464 4572 7228 2742 6164 2070     StdErr('Bad p
-00046120: 6572 6d69 7373 696f 6e20 666f 726d 6174  ermission format
-00046130: 2028 6578 6563 7574 6529 2729 0a20 2020   (execute)').   
-00046140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046150: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
-00046160: 756c 740a 2020 2020 2020 2020 2020 2020  ult.            
-00046170: 2020 2020 2020 2020 6966 2076 616c 5b38          if val[8
-00046180: 5d20 6e6f 7420 696e 2027 7874 2d27 3a0a  ] not in 'xt-':.
-00046190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000461a0: 2020 2020 2020 2020 5374 6445 7272 2820          StdErr( 
-000461b0: 2742 6164 2070 6572 6d69 7373 696f 6e20  'Bad permission 
-000461c0: 666f 726d 6174 2028 6578 6563 7574 6520  format (execute 
-000461d0: 6f74 6865 7229 2729 0a20 2020 2020 2020  other)').       
-000461e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000461f0: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
-00046200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046210: 2020 2020 6d20 3d20 300a 2020 2020 2020      m = 0.      
-00046220: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00046230: 2076 616c 5b30 5d20 3d3d 2027 7227 3a20   val[0] == 'r': 
-00046240: 6d20 7c3d 2073 7461 742e 535f 4952 5553  m |= stat.S_IRUS
-00046250: 520a 2020 2020 2020 2020 2020 2020 2020  R.              
-00046260: 2020 2020 2020 6966 2076 616c 5b31 5d20        if val[1] 
-00046270: 3d3d 2027 7727 3a20 6d20 7c3d 2073 7461  == 'w': m |= sta
-00046280: 742e 535f 4957 5553 520a 2020 2020 2020  t.S_IWUSR.      
-00046290: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000462a0: 2076 616c 5b32 5d20 3d3d 2027 7827 3a20   val[2] == 'x': 
-000462b0: 6d20 7c3d 2073 7461 742e 535f 4958 5553  m |= stat.S_IXUS
-000462c0: 520a 2020 2020 2020 2020 2020 2020 2020  R.              
-000462d0: 2020 2020 2020 6966 2076 616c 5b32 5d20        if val[2] 
-000462e0: 3d3d 2027 7327 3a20 6d20 7c3d 2073 7461  == 's': m |= sta
-000462f0: 742e 535f 4958 5553 5220 7c20 7374 6174  t.S_IXUSR | stat
-00046300: 2e53 5f49 5355 4944 0a0a 2020 2020 2020  .S_ISUID..      
-00046310: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00046320: 2076 616c 5b33 5d20 3d3d 2027 7227 3a20   val[3] == 'r': 
-00046330: 6d20 7c3d 2073 7461 742e 535f 4952 4752  m |= stat.S_IRGR
-00046340: 500a 2020 2020 2020 2020 2020 2020 2020  P.              
-00046350: 2020 2020 2020 6966 2076 616c 5b34 5d20        if val[4] 
-00046360: 3d3d 2027 7727 3a20 6d20 7c3d 2073 7461  == 'w': m |= sta
-00046370: 742e 535f 4957 4752 500a 2020 2020 2020  t.S_IWGRP.      
-00046380: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00046390: 2076 616c 5b35 5d20 3d3d 2027 7827 3a20   val[5] == 'x': 
-000463a0: 6d20 7c3d 2073 7461 742e 535f 4958 4752  m |= stat.S_IXGR
-000463b0: 500a 2020 2020 2020 2020 2020 2020 2020  P.              
-000463c0: 2020 2020 2020 6966 2076 616c 5b35 5d20        if val[5] 
-000463d0: 3d3d 2027 7327 3a20 6d20 7c3d 2073 7461  == 's': m |= sta
-000463e0: 742e 535f 4958 4752 5020 7c20 7374 6174  t.S_IXGRP | stat
-000463f0: 2e53 5f49 5347 4944 0a0a 2020 2020 2020  .S_ISGID..      
-00046400: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00046410: 2076 616c 5b36 5d20 3d3d 2027 7227 3a20   val[6] == 'r': 
-00046420: 6d20 7c3d 2073 7461 742e 535f 4952 4f54  m |= stat.S_IROT
-00046430: 480a 2020 2020 2020 2020 2020 2020 2020  H.              
-00046440: 2020 2020 2020 6966 2076 616c 5b37 5d20        if val[7] 
-00046450: 3d3d 2027 7727 3a20 6d20 7c3d 2073 7461  == 'w': m |= sta
-00046460: 742e 535f 4957 4f54 480a 2020 2020 2020  t.S_IWOTH.      
-00046470: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00046480: 2076 616c 5b38 5d20 3d3d 2027 7827 3a20   val[8] == 'x': 
-00046490: 6d20 7c3d 2073 7461 742e 535f 4958 4f54  m |= stat.S_IXOT
-000464a0: 480a 2020 2020 2020 2020 2020 2020 2020  H.              
-000464b0: 2020 2020 2020 6966 2076 616c 5b38 5d20        if val[8] 
-000464c0: 3d3d 2027 7427 3a20 6d20 7c3d 2073 7461  == 't': m |= sta
-000464d0: 742e 535f 4958 4f54 4820 7c20 7374 6174  t.S_IXOTH | stat
-000464e0: 2e53 5f49 5356 5458 0a20 2020 2020 2020  .S_ISVTX.       
-000464f0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00046500: 7572 6e20 5f6d 6f64 655f 286f 6374 286d  urn _mode_(oct(m
-00046510: 292c 6d6f 6465 290a 2020 2020 2020 2020  ),mode).        
-00046520: 7265 7475 726e 2064 6566 6175 6c74 0a0a  return default..
-00046530: 2020 2020 2320 4669 6e64 2066 696c 656e      # Find filen
-00046540: 616d 6527 7320 726f 6f74 2070 6174 6820  ame's root path 
-00046550: 616e 6420 6669 6c65 6e61 6d65 2061 6363  and filename acc
-00046560: 6f72 6469 6e67 2074 6f20 7468 6520 6462  ording to the db
-00046570: 0a20 2020 2064 6566 2046 696e 6452 5028  .    def FindRP(
-00046580: 7365 6c66 2c66 696c 656e 616d 653d 4e6f  self,filename=No
-00046590: 6e65 2c64 6566 6175 6c74 3d4e 6f6e 6529  ne,default=None)
-000465a0: 3a0a 2020 2020 2020 2020 6966 2069 7369  :.        if isi
-000465b0: 6e73 7461 6e63 6528 6669 6c65 6e61 6d65  nstance(filename
-000465c0: 2c73 7472 2920 616e 6420 7365 6c66 2e69  ,str) and self.i
-000465d0: 6e66 6f3a 0a20 2020 2020 2020 2020 2020  nfo:.           
-000465e0: 2069 6e66 6f5f 6b65 7973 3d6c 6973 7428   info_keys=list(
-000465f0: 7365 6c66 2e69 6e66 6f2e 6b65 7973 2829  self.info.keys()
-00046600: 290a 2020 2020 2020 2020 2020 2020 696e  ).            in
-00046610: 666f 5f6e 756d 3d6c 656e 2869 6e66 6f5f  fo_num=len(info_
-00046620: 6b65 7973 290a 2020 2020 2020 2020 2020  keys).          
-00046630: 2020 6966 2066 696c 656e 616d 655b 305d    if filename[0]
-00046640: 2021 3d20 272f 273a 0a20 2020 2020 2020   != '/':.       
-00046650: 2020 2020 2020 2020 2069 6620 696e 666f           if info
-00046660: 5f6e 756d 203d 3d20 313a 2072 6574 7572  _num == 1: retur
-00046670: 6e20 696e 666f 5f6b 6579 735b 305d 0a20  n info_keys[0]. 
-00046680: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00046690: 6574 7572 6e20 7365 6c66 2e72 6f6f 745f  eturn self.root_
-000466a0: 7061 7468 0a20 2020 2020 2020 2020 2020  path.           
-000466b0: 2061 613d 272f 270a 2020 2020 2020 2020   aa='/'.        
-000466c0: 2020 2020 6669 6c65 6e61 6d65 5f61 3d66      filename_a=f
-000466d0: 696c 656e 616d 652e 7370 6c69 7428 272f  ilename.split('/
-000466e0: 2729 0a20 2020 2020 2020 2020 2020 2066  ').            f
-000466f0: 6f72 2069 6920 696e 2072 616e 6765 2831  or ii in range(1
-00046700: 2c6c 656e 2866 696c 656e 616d 655f 6129  ,len(filename_a)
-00046710: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00046720: 2020 2061 613d 5061 7468 2861 612c 6669     aa=Path(aa,fi
-00046730: 6c65 6e61 6d65 5f61 5b69 695d 290a 2020  lename_a[ii]).  
-00046740: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00046750: 2061 6120 696e 2069 6e66 6f5f 6b65 7973   aa in info_keys
-00046760: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00046770: 2020 2020 2020 2372 656d 6169 6e5f 7061        #remain_pa
-00046780: 7468 3d27 2f27 2e6a 6f69 6e28 6669 6c65  th='/'.join(file
-00046790: 6e61 6d65 5f61 5b69 692b 313a 5d29 0a20  name_a[ii+1:]). 
-000467a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000467b0: 2020 2072 656d 6169 6e5f 7061 7468 3d4a     remain_path=J
-000467c0: 6f69 6e28 6669 6c65 6e61 6d65 5f61 5b69  oin(filename_a[i
-000467d0: 692b 313a 5d2c 7379 6d62 6f6c 3d27 2f27  i+1:],symbol='/'
-000467e0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000467f0: 2020 2020 2020 6966 2069 6e66 6f5f 6e75        if info_nu
-00046800: 6d20 3d3d 2031 3a20 7265 7475 726e 2061  m == 1: return a
-00046810: 612c 7265 6d61 696e 5f70 6174 680a 2020  a,remain_path.  
+00044020: 2020 2020 236d 6f64 653d 7365 6c66 2e4d      #mode=self.M
+00044030: 6f64 6528 6d6f 6465 290a 2020 2020 2020  ode(mode).      
+00044040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044050: 2020 2369 6620 6d6f 6465 3a20 6f73 2e63    #if mode: os.c
+00044060: 686d 6f64 286e 616d 652c 696e 7428 6d6f  hmod(name,int(mo
+00044070: 6465 2c62 6173 653d 3829 290a 2020 2020  de,base=8)).    
+00044080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044090: 2020 2020 2369 6620 7569 6420 616e 6420      #if uid and 
+000440a0: 6769 643a 206f 732e 6368 6f77 6e28 6e61  gid: os.chown(na
+000440b0: 6d65 2c75 6964 2c67 6964 290a 2020 2020  me,uid,gid).    
+000440c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000440d0: 2020 2020 2369 6620 6d74 696d 6520 616e      #if mtime an
+000440e0: 6420 6174 696d 653a 206f 732e 7574 696d  d atime: os.utim
+000440f0: 6528 6e61 6d65 2c28 6174 696d 652c 6d74  e(name,(atime,mt
+00044100: 696d 6529 2923 2054 696d 6520 7570 6461  ime))# Time upda
+00044110: 7465 206d 7573 7420 6265 2061 7420 6c61  te must be at la
+00044120: 7374 206f 7264 6572 0a20 2020 2020 2020  st order.       
+00044130: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00044140: 7572 6e20 5472 7565 2c4e 6f6e 650a 2020  urn True,None.  
+00044150: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00044160: 2064 6566 6175 6c74 203d 3d20 7b27 6572   default == {'er
+00044170: 7227 7d3a 0a20 2020 2020 2020 2020 2020  r'}:.           
+00044180: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00044190: 4661 6c73 652c 2744 6972 6563 746f 7279  False,'Directory
+000441a0: 287b 7d29 206e 6f74 2066 6f75 6e64 272e  ({}) not found'.
+000441b0: 666f 726d 6174 2866 696c 655f 7061 7468  format(file_path
+000441c0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000441d0: 2020 7265 7475 726e 2046 616c 7365 2c64    return False,d
+000441e0: 6566 6175 6c74 0a20 2020 2020 2020 2069  efault.        i
+000441f0: 6620 6465 6661 756c 7420 3d3d 207b 2765  f default == {'e
+00044200: 7272 277d 3a0a 2020 2020 2020 2020 2020  rr'}:.          
+00044210: 2020 7265 7475 726e 2046 616c 7365 2c27    return False,'
+00044220: 556e 6b6e 6f77 6e20 7479 7065 287b 7d29  Unknown type({})
+00044230: 2066 696c 656e 616d 6527 2e66 6f72 6d61   filename'.forma
+00044240: 7428 6e61 6d65 290a 2020 2020 2020 2020  t(name).        
+00044250: 7265 7475 726e 2046 616c 7365 2c64 6566  return False,def
+00044260: 6175 6c74 0a0a 2020 2020 6465 6620 4d6f  ault..    def Mo
+00044270: 6465 2873 656c 662c 7661 6c2c 6d6f 6465  de(self,val,mode
+00044280: 3d27 6368 6d6f 6427 2c64 6566 6175 6c74  ='chmod',default
+00044290: 3d46 616c 7365 293a 0a20 2020 2020 2020  =False):.       
+000442a0: 2027 2727 0a20 2020 2020 2020 2063 6f6e   '''.        con
+000442b0: 7665 7274 2046 696c 6520 4d6f 6465 2074  vert File Mode t
+000442c0: 6f20 6d61 736b 0a20 2020 2020 2020 206d  o mask.        m
+000442d0: 6f64 6520 0a20 2020 2020 2020 2020 2020  ode .           
+000442e0: 2763 686d 6f64 2720 3a20 6465 6661 756c  'chmod' : defaul
+000442f0: 742c 2063 6f6e 7665 7274 2074 6f20 6d61  t, convert to ma
+00044300: 736b 2028 6f73 2e63 686d 6f64 283c 6669  sk (os.chmod(<fi
+00044310: 6c65 3e2c 3c6d 6173 6b3e 2929 0a20 2020  le>,<mask>)).   
+00044320: 2020 2020 2020 2020 2769 6e74 2720 2020          'int'   
+00044330: 3a20 7265 7475 726e 2074 6f20 696e 7420  : return to int 
+00044340: 6e75 6d62 6572 206f 6620 6f63 7428 2065  number of oct( e
+00044350: 783a 2037 3535 2029 0a20 2020 2020 2020  x: 755 ).       
+00044360: 2020 2020 276f 6374 2720 2020 3a20 7265      'oct'   : re
+00044370: 7475 726e 206f 6374 206e 756d 6265 7220  turn oct number 
+00044380: 2873 7472 696e 6729 0a20 2020 2020 2020  (string).       
+00044390: 2020 2020 2773 7472 2720 2020 3a20 7265      'str'   : re
+000443a0: 7475 726e 2073 7472 696e 6720 282d 7277  turn string (-rw
+000443b0: 7872 2d2d 722d 2d29 0a20 2020 2020 2020  xr--r--).       
+000443c0: 2064 6566 6175 6c74 3a20 4661 6c73 650a   default: False.
+000443d0: 2020 2020 2020 2020 2727 270a 2020 2020          '''.    
+000443e0: 2020 2020 6465 6620 5f6d 6f64 655f 286f      def _mode_(o
+000443f0: 6374 5f64 6174 612c 6d6f 6465 3d27 6368  ct_data,mode='ch
+00044400: 6d6f 6427 293a 0a20 2020 2020 2020 2020  mod'):.         
+00044410: 2020 2023 636f 6e76 6572 7420 746f 206f     #convert to o
+00044420: 6374 616c 2074 6f20 3862 6974 206d 6173  ctal to 8bit mas
+00044430: 6b2c 2069 6e74 2c20 7374 7269 6e67 0a20  k, int, string. 
+00044440: 2020 2020 2020 2020 2020 2069 6620 6d6f             if mo
+00044450: 6465 203d 3d20 2763 686d 6f64 273a 0a20  de == 'chmod':. 
+00044460: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00044470: 6574 7572 6e20 696e 7428 6f63 745f 6461  eturn int(oct_da
+00044480: 7461 2c62 6173 653d 3829 0a20 2020 2020  ta,base=8).     
+00044490: 2020 2020 2020 2065 6c69 6620 6d6f 6465         elif mode
+000444a0: 2069 6e20 5b27 696e 7427 2c69 6e74 5d3a   in ['int',int]:
+000444b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000444c0: 2072 6574 7572 6e20 696e 7428 6f63 745f   return int(oct_
+000444d0: 6461 7461 2e72 6570 6c61 6365 2827 6f27  data.replace('o'
+000444e0: 2c27 2729 2c62 6173 653d 3130 290a 2020  ,''),base=10).  
+000444f0: 2020 2020 2020 2020 2020 656c 6966 206d            elif m
+00044500: 6f64 6520 696e 205b 2773 7472 272c 7374  ode in ['str',st
+00044510: 725d 3a0a 2020 2020 2020 2020 2020 2020  r]:.            
+00044520: 2020 2020 6d3d 5b5d 0a20 2020 2020 2020      m=[].       
+00044530: 2020 2020 2020 2020 2023 666f 7220 6920           #for i 
+00044540: 696e 206c 6973 7428 7374 7228 696e 7428  in list(str(int(
+00044550: 6f63 745f 6461 7461 2c62 6173 653d 3130  oct_data,base=10
+00044560: 2929 293a 0a20 2020 2020 2020 2020 2020  ))):.           
+00044570: 2020 2020 2074 3d46 616c 7365 0a20 2020       t=False.   
+00044580: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+00044590: 206e 2c69 2069 6e20 656e 756d 6572 6174   n,i in enumerat
+000445a0: 6528 7374 7228 696e 7428 6f63 745f 6461  e(str(int(oct_da
+000445b0: 7461 2e72 6570 6c61 6365 2827 6f27 2c27  ta.replace('o','
+000445c0: 2729 2c62 6173 653d 3130 2929 293a 0a20  '),base=10))):. 
+000445d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000445e0: 2020 2069 6620 6e20 3d3d 2030 3a0a 2020     if n == 0:.  
+000445f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044600: 2020 2020 2020 6966 2069 203d 3d20 2731        if i == '1
+00044610: 273a 2074 3d54 7275 650a 2020 2020 2020  ': t=True.      
+00044620: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00044630: 206e 203e 2030 3a0a 2020 2020 2020 2020   n > 0:.        
+00044640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044650: 6966 2069 203d 3d20 2737 273a 0a20 2020  if i == '7':.   
+00044660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044670: 2020 2020 2020 2020 206d 2e61 7070 656e           m.appen
+00044680: 6428 2772 7778 2729 0a20 2020 2020 2020  d('rwx').       
+00044690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000446a0: 2065 6c69 6620 6920 3d3d 2027 3627 3a0a   elif i == '6':.
+000446b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000446c0: 2020 2020 2020 2020 2020 2020 6d2e 6170              m.ap
+000446d0: 7065 6e64 2827 7277 2d27 290a 2020 2020  pend('rw-').    
+000446e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000446f0: 2020 2020 656c 6966 2069 203d 3d20 2735      elif i == '5
+00044700: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+00044710: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00044720: 2e61 7070 656e 6428 2772 2d78 2729 0a20  .append('r-x'). 
+00044730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044740: 2020 2020 2020 2065 6c69 6620 6920 3d3d         elif i ==
+00044750: 2027 3427 3a0a 2020 2020 2020 2020 2020   '4':.          
+00044760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044770: 2020 6d2e 6170 7065 6e64 2827 722d 2d27    m.append('r--'
+00044780: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00044790: 2020 2020 2020 2020 2020 656c 6966 2069            elif i
+000447a0: 203d 3d20 2733 273a 0a20 2020 2020 2020   == '3':.       
+000447b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000447c0: 2020 2020 206d 2e61 7070 656e 6428 272d       m.append('-
+000447d0: 7778 2729 0a20 2020 2020 2020 2020 2020  wx').           
+000447e0: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+000447f0: 6620 6920 3d3d 2027 3227 3a0a 2020 2020  f i == '2':.    
+00044800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044810: 2020 2020 2020 2020 6d2e 6170 7065 6e64          m.append
+00044820: 2827 2d77 2d27 290a 2020 2020 2020 2020  ('-w-').        
+00044830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044840: 656c 6966 2069 203d 3d20 2731 273a 0a20  elif i == '1':. 
+00044850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044860: 2020 2020 2020 2020 2020 206d 2e61 7070             m.app
+00044870: 656e 6428 272d 2d78 2729 0a20 2020 2020  end('--x').     
+00044880: 2020 2020 2020 2020 2020 2073 7472 5f6d             str_m
+00044890: 6f64 3d4a 6f69 6e28 6d2c 2727 290a 2020  od=Join(m,'').  
+000448a0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000448b0: 2074 3a20 7265 7475 726e 2073 7472 5f6d   t: return str_m
+000448c0: 6f64 5b3a 2d31 5d2b 2774 270a 2020 2020  od[:-1]+'t'.    
+000448d0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+000448e0: 726e 2073 7472 5f6d 6f64 0a20 2020 2020  rn str_mod.     
+000448f0: 2020 2020 2020 2072 6574 7572 6e20 6f63         return oc
+00044900: 745f 6461 7461 0a20 2020 2020 2020 2069  t_data.        i
+00044910: 6620 6973 696e 7374 616e 6365 2876 616c  f isinstance(val
+00044920: 2c69 6e74 293a 0a20 2020 2020 2020 2020  ,int):.         
+00044930: 2020 2023 6966 2076 616c 203e 2035 3131     #if val > 511
+00044940: 3a20 2020 2020 2020 2373 7461 742e 7374  :       #stat.st
+00044950: 5f6d 6f64 6520 2833 3237 3638 207e 2033  _mode (32768 ~ 3
+00044960: 3332 3739 290a 2020 2020 2020 2020 2020  3279).          
+00044970: 2020 2373 7461 742e 7374 5f6d 6f64 6520    #stat.st_mode 
+00044980: 2866 696c 653a 2033 3237 3638 7e33 3638  (file: 32768~368
+00044990: 3633 2c20 6469 7265 6374 6f72 793a 2031  63, directory: 1
+000449a0: 3633 3834 207e 2032 3034 3739 290a 2020  6384 ~ 20479).  
+000449b0: 2020 2020 2020 2020 2020 6966 2033 3237            if 327
+000449c0: 3638 203c 3d20 7661 6c20 3c3d 2033 3638  68 <= val <= 368
+000449d0: 3633 206f 7220 3136 3338 3420 3c3d 2076  63 or 16384 <= v
+000449e0: 616c 203c 3d20 3230 3437 393a 2020 2023  al <= 20479:   #
+000449f0: 7374 6174 2e73 745f 6d6f 6465 0a20 2020  stat.st_mode.   
+00044a00: 2020 2020 2020 2020 2020 2020 2023 7265               #re
+00044a10: 7475 726e 205f 6d6f 6465 5f28 6f63 7428  turn _mode_(oct(
+00044a20: 7661 6c29 5b2d 343a 5d2c 6d6f 6465 2920  val)[-4:],mode) 
+00044a30: 2320 746f 206f 6374 616c 206e 756d 6265  # to octal numbe
+00044a40: 7220 286f 6374 2876 616c 295b 2d34 3a5d  r (oct(val)[-4:]
+00044a50: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00044a60: 2020 7265 7475 726e 205f 6d6f 6465 5f28    return _mode_(
+00044a70: 6f63 7428 7661 6c20 2620 306f 3737 3729  oct(val & 0o777)
+00044a80: 2c6d 6f64 6529 2023 2074 6f20 6f63 7461  ,mode) # to octa
+00044a90: 6c20 6e75 6d62 6572 2028 6f63 7428 7661  l number (oct(va
+00044aa0: 6c29 5b2d 343a 5d29 0a20 2020 2020 2020  l)[-4:]).       
+00044ab0: 2020 2020 2065 6c69 6620 3531 3120 3e3d       elif 511 >=
+00044ac0: 2076 616c 203e 2036 333a 2020 2020 2020   val > 63:      
+00044ad0: 236d 6173 6b0a 2020 2020 2020 2020 2020  #mask.          
+00044ae0: 2020 2020 2020 7265 7475 726e 205f 6d6f        return _mo
+00044af0: 6465 5f28 6f63 7428 7661 6c29 2c6d 6f64  de_(oct(val),mod
+00044b00: 6529 2020 2020 2020 2320 746f 206f 6361  e)      # to oca
+00044b10: 6c20 6e75 6d62 6572 286f 6374 2876 616c  l number(oct(val
+00044b20: 2929 0a20 2020 2020 2020 2020 2020 2065  )).            e
+00044b30: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00044b40: 2020 2020 2072 6574 7572 6e20 5f6d 6f64       return _mod
+00044b50: 655f 2827 2530 3464 2725 2876 616c 292c  e_('%04d'%(val),
+00044b60: 6d6f 6465 2920 2020 2020 2023 2074 6f20  mode)      # to 
+00044b70: 6f63 616c 206e 756d 6265 7228 6f63 7428  ocal number(oct(
+00044b80: 7661 6c29 290a 2020 2020 2020 2020 656c  val)).        el
+00044b90: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00044ba0: 7661 6c3d 5374 7228 7661 6c2c 6465 6661  val=Str(val,defa
+00044bb0: 756c 743d 4e6f 6e65 290a 2020 2020 2020  ult=None).      
+00044bc0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+00044bd0: 6e63 6528 7661 6c2c 7374 7229 3a0a 2020  nce(val,str):.  
+00044be0: 2020 2020 2020 2020 2020 2020 2020 7661                va
+00044bf0: 6c5f 6c65 6e3d 6c65 6e28 7661 6c29 0a20  l_len=len(val). 
+00044c00: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+00044c10: 756d 3d49 6e74 2876 616c 2c64 6566 6175  um=Int(val,defau
+00044c20: 6c74 3d4e 6f6e 6529 0a20 2020 2020 2020  lt=None).       
+00044c30: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+00044c40: 7374 616e 6365 286e 756d 2c69 6e74 293a  stance(num,int):
+00044c50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00044c60: 2020 2020 2069 6620 3320 3c3d 206c 656e       if 3 <= len
+00044c70: 2876 616c 2920 3c3d 3420 616e 6420 3130  (val) <=4 and 10
+00044c80: 3020 3c3d 206e 756d 203c 3d20 3737 373a  0 <= num <= 777:
+00044c90: 2023 7374 7269 6e67 2074 7970 6520 6f66   #string type of
+00044ca0: 2070 6572 6d69 7373 696f 6e20 6e75 6d62   permission numb
+00044cb0: 6572 286f 6374 616c 206e 756d 6265 7229  er(octal number)
+00044cc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00044cd0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00044ce0: 5f6d 6f64 655f 2827 2530 3464 2725 286e  _mode_('%04d'%(n
+00044cf0: 756d 292c 6d6f 6465 290a 2020 2020 2020  um),mode).      
+00044d00: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00044d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044d20: 2020 2020 7661 6c5f 6c65 6e3d 6c65 6e28      val_len=len(
+00044d30: 7661 6c29 0a20 2020 2020 2020 2020 2020  val).           
+00044d40: 2020 2020 2020 2020 2069 6620 393c 3d20           if 9<= 
+00044d50: 7661 6c5f 6c65 6e20 3c3d 3130 3a0a 2020  val_len <=10:.  
+00044d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044d70: 2020 2020 2020 6966 2076 616c 5f6c 656e        if val_len
+00044d80: 203d 3d20 3130 2061 6e64 2076 616c 5b30   == 10 and val[0
+00044d90: 5d20 696e 205b 272d 272c 2764 272c 2773  ] in ['-','d','s
+00044da0: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
+00044db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044dc0: 7661 6c3d 7661 6c5b 313a 5d0a 2020 2020  val=val[1:].    
+00044dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044de0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00044df0: 2020 2020 2020 2020 2020 2020 2020 5374                St
+00044e00: 6445 7272 2827 4261 6420 7065 726d 6973  dErr('Bad permis
+00044e10: 7369 6f6e 206c 656e 6774 6827 290a 2020  sion length').  
+00044e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044e30: 2020 2020 2020 7265 7475 726e 2064 6566        return def
+00044e40: 6175 6c74 0a20 2020 2020 2020 2020 2020  ault.           
+00044e50: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00044e60: 616c 6c28 7661 6c5b 6b5d 2069 6e20 2772  all(val[k] in 'r
+00044e70: 772d 2720 666f 7220 6b20 696e 205b 302c  w-' for k in [0,
+00044e80: 312c 332c 342c 362c 375d 293a 0a20 2020  1,3,4,6,7]):.   
+00044e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044ea0: 2020 2020 2053 7464 4572 7228 2742 6164       StdErr('Bad
+00044eb0: 2070 6572 6d69 7373 696f 6e20 666f 726d   permission form
+00044ec0: 6174 2028 7265 6164 2d77 7269 7465 2927  at (read-write)'
+00044ed0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00044ee0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00044ef0: 2064 6566 6175 6c74 0a20 2020 2020 2020   default.       
+00044f00: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00044f10: 6e6f 7420 616c 6c28 7661 6c5b 6b5d 2069  not all(val[k] i
+00044f20: 6e20 2778 732d 2720 666f 7220 6b20 696e  n 'xs-' for k in
+00044f30: 205b 322c 355d 293a 0a20 2020 2020 2020   [2,5]):.       
+00044f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044f50: 2053 7464 4572 7228 2742 6164 2070 6572   StdErr('Bad per
+00044f60: 6d69 7373 696f 6e20 666f 726d 6174 2028  mission format (
+00044f70: 6578 6563 7574 6529 2729 0a20 2020 2020  execute)').     
+00044f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044f90: 2020 2072 6574 7572 6e20 6465 6661 756c     return defaul
+00044fa0: 740a 2020 2020 2020 2020 2020 2020 2020  t.              
+00044fb0: 2020 2020 2020 6966 2076 616c 5b38 5d20        if val[8] 
+00044fc0: 6e6f 7420 696e 2027 7874 2d27 3a0a 2020  not in 'xt-':.  
+00044fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00044fe0: 2020 2020 2020 5374 6445 7272 2820 2742        StdErr( 'B
+00044ff0: 6164 2070 6572 6d69 7373 696f 6e20 666f  ad permission fo
+00045000: 726d 6174 2028 6578 6563 7574 6520 6f74  rmat (execute ot
+00045010: 6865 7229 2729 0a20 2020 2020 2020 2020  her)').         
+00045020: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00045030: 6574 7572 6e20 6465 6661 756c 740a 2020  eturn default.  
+00045040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045050: 2020 6d20 3d20 300a 2020 2020 2020 2020    m = 0.        
+00045060: 2020 2020 2020 2020 2020 2020 6966 2076              if v
+00045070: 616c 5b30 5d20 3d3d 2027 7227 3a20 6d20  al[0] == 'r': m 
+00045080: 7c3d 2073 7461 742e 535f 4952 5553 520a  |= stat.S_IRUSR.
+00045090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000450a0: 2020 2020 6966 2076 616c 5b31 5d20 3d3d      if val[1] ==
+000450b0: 2027 7727 3a20 6d20 7c3d 2073 7461 742e   'w': m |= stat.
+000450c0: 535f 4957 5553 520a 2020 2020 2020 2020  S_IWUSR.        
+000450d0: 2020 2020 2020 2020 2020 2020 6966 2076              if v
+000450e0: 616c 5b32 5d20 3d3d 2027 7827 3a20 6d20  al[2] == 'x': m 
+000450f0: 7c3d 2073 7461 742e 535f 4958 5553 520a  |= stat.S_IXUSR.
+00045100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045110: 2020 2020 6966 2076 616c 5b32 5d20 3d3d      if val[2] ==
+00045120: 2027 7327 3a20 6d20 7c3d 2073 7461 742e   's': m |= stat.
+00045130: 535f 4958 5553 5220 7c20 7374 6174 2e53  S_IXUSR | stat.S
+00045140: 5f49 5355 4944 0a0a 2020 2020 2020 2020  _ISUID..        
+00045150: 2020 2020 2020 2020 2020 2020 6966 2076              if v
+00045160: 616c 5b33 5d20 3d3d 2027 7227 3a20 6d20  al[3] == 'r': m 
+00045170: 7c3d 2073 7461 742e 535f 4952 4752 500a  |= stat.S_IRGRP.
+00045180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045190: 2020 2020 6966 2076 616c 5b34 5d20 3d3d      if val[4] ==
+000451a0: 2027 7727 3a20 6d20 7c3d 2073 7461 742e   'w': m |= stat.
+000451b0: 535f 4957 4752 500a 2020 2020 2020 2020  S_IWGRP.        
+000451c0: 6966 2069 7369 6e73 7461 6e63 6528 7661  if isinstance(va
+000451d0: 6c2c 696e 7429 3a0a 2020 2020 2020 2020  l,int):.        
+000451e0: 2020 2020 2369 6620 7661 6c20 3e20 3531      #if val > 51
+000451f0: 313a 2020 2020 2020 2023 7374 6174 2e73  1:       #stat.s
+00045200: 745f 6d6f 6465 2028 3332 3736 3820 7e20  t_mode (32768 ~ 
+00045210: 3333 3237 3929 0a20 2020 2020 2020 2020  33279).         
+00045220: 2020 2023 7374 6174 2e73 745f 6d6f 6465     #stat.st_mode
+00045230: 2028 6669 6c65 3a20 3332 3736 387e 3336   (file: 32768~36
+00045240: 3836 332c 2064 6972 6563 746f 7279 3a20  863, directory: 
+00045250: 3136 3338 3420 7e20 3230 3437 3929 0a20  16384 ~ 20479). 
+00045260: 2020 2020 2020 2020 2020 2069 6620 3332             if 32
+00045270: 3736 3820 3c3d 2076 616c 203c 3d20 3336  768 <= val <= 36
+00045280: 3836 3320 6f72 2031 3633 3834 203c 3d20  863 or 16384 <= 
+00045290: 7661 6c20 3c3d 2032 3034 3739 3a20 2020  val <= 20479:   
+000452a0: 2373 7461 742e 7374 5f6d 6f64 650a 2020  #stat.st_mode.  
+000452b0: 2020 2020 2020 2020 2020 2020 2020 2372                #r
+000452c0: 6574 7572 6e20 5f6d 6f64 655f 286f 6374  eturn _mode_(oct
+000452d0: 2876 616c 295b 2d34 3a5d 2c6d 6f64 6529  (val)[-4:],mode)
+000452e0: 2023 2074 6f20 6f63 7461 6c20 6e75 6d62   # to octal numb
+000452f0: 6572 2028 6f63 7428 7661 6c29 5b2d 343a  er (oct(val)[-4:
+00045300: 5d29 0a20 2020 2020 2020 2020 2020 2020  ]).             
+00045310: 2020 2072 6574 7572 6e20 5f6d 6f64 655f     return _mode_
+00045320: 286f 6374 2876 616c 2026 2030 6f37 3737  (oct(val & 0o777
+00045330: 292c 6d6f 6465 2920 2320 746f 206f 6374  ),mode) # to oct
+00045340: 616c 206e 756d 6265 7220 286f 6374 2876  al number (oct(v
+00045350: 616c 295b 2d34 3a5d 290a 2020 2020 2020  al)[-4:]).      
+00045360: 2020 2020 2020 656c 6966 2035 3131 203e        elif 511 >
+00045370: 3d20 7661 6c20 3e20 3633 3a20 2020 2020  = val > 63:     
+00045380: 2023 6d61 736b 0a20 2020 2020 2020 2020   #mask.         
+00045390: 2020 2020 2020 2072 6574 7572 6e20 5f6d         return _m
+000453a0: 6f64 655f 286f 6374 2876 616c 292c 6d6f  ode_(oct(val),mo
+000453b0: 6465 2920 2020 2020 2023 2074 6f20 6f63  de)      # to oc
+000453c0: 616c 206e 756d 6265 7228 6f63 7428 7661  al number(oct(va
+000453d0: 6c29 290a 2020 2020 2020 2020 2020 2020  l)).            
+000453e0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+000453f0: 2020 2020 2020 7265 7475 726e 205f 6d6f        return _mo
+00045400: 6465 5f28 2725 3034 6427 2528 7661 6c29  de_('%04d'%(val)
+00045410: 2c6d 6f64 6529 2020 2020 2020 2320 746f  ,mode)      # to
+00045420: 206f 6361 6c20 6e75 6d62 6572 286f 6374   ocal number(oct
+00045430: 2876 616c 2929 0a20 2020 2020 2020 2065  (val)).        e
+00045440: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00045450: 2076 616c 3d53 7472 2876 616c 2c64 6566   val=Str(val,def
+00045460: 6175 6c74 3d4e 6f6e 6529 0a20 2020 2020  ault=None).     
+00045470: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00045480: 616e 6365 2876 616c 2c73 7472 293a 0a20  ance(val,str):. 
+00045490: 2020 2020 2020 2020 2020 2020 2020 2076                 v
+000454a0: 616c 5f6c 656e 3d6c 656e 2876 616c 290a  al_len=len(val).
+000454b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000454c0: 6e75 6d3d 496e 7428 7661 6c2c 6465 6661  num=Int(val,defa
+000454d0: 756c 743d 4e6f 6e65 290a 2020 2020 2020  ult=None).      
+000454e0: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+000454f0: 6e73 7461 6e63 6528 6e75 6d2c 696e 7429  nstance(num,int)
+00045500: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00045510: 2020 2020 2020 6966 2033 203c 3d20 6c65        if 3 <= le
+00045520: 6e28 7661 6c29 203c 3d34 2061 6e64 2031  n(val) <=4 and 1
+00045530: 3030 203c 3d20 6e75 6d20 3c3d 2037 3737  00 <= num <= 777
+00045540: 3a20 2373 7472 696e 6720 7479 7065 206f  : #string type o
+00045550: 6620 7065 726d 6973 7369 6f6e 206e 756d  f permission num
+00045560: 6265 7228 6f63 7461 6c20 6e75 6d62 6572  ber(octal number
+00045570: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00045580: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00045590: 205f 6d6f 6465 5f28 2725 3034 6427 2528   _mode_('%04d'%(
+000455a0: 6e75 6d29 2c6d 6f64 6529 0a20 2020 2020  num),mode).     
+000455b0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+000455c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000455d0: 2020 2020 2076 616c 5f6c 656e 3d6c 656e       val_len=len
+000455e0: 2876 616c 290a 2020 2020 2020 2020 2020  (val).          
+000455f0: 2020 2020 2020 2020 2020 6966 2039 3c3d            if 9<=
+00045600: 2076 616c 5f6c 656e 203c 3d31 303a 0a20   val_len <=10:. 
+00045610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045620: 2020 2020 2020 2069 6620 7661 6c5f 6c65         if val_le
+00045630: 6e20 3d3d 2031 3020 616e 6420 7661 6c5b  n == 10 and val[
+00045640: 305d 2069 6e20 5b27 2d27 2c27 6427 2c27  0] in ['-','d','
+00045650: 7327 5d3a 0a20 2020 2020 2020 2020 2020  s']:.           
+00045660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045670: 2076 616c 3d76 616c 5b31 3a5d 0a20 2020   val=val[1:].   
+00045680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045690: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+000456a0: 2020 2020 2020 2020 2020 2020 2020 2053                 S
+000456b0: 7464 4572 7228 2742 6164 2070 6572 6d69  tdErr('Bad permi
+000456c0: 7373 696f 6e20 6c65 6e67 7468 2729 0a20  ssion length'). 
+000456d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000456e0: 2020 2020 2020 2072 6574 7572 6e20 6465         return de
+000456f0: 6661 756c 740a 2020 2020 2020 2020 2020  fault.          
+00045700: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+00045710: 2061 6c6c 2876 616c 5b6b 5d20 696e 2027   all(val[k] in '
+00045720: 7277 2d27 2066 6f72 206b 2069 6e20 5b30  rw-' for k in [0
+00045730: 2c31 2c33 2c34 2c36 2c37 5d29 3a0a 2020  ,1,3,4,6,7]):.  
+00045740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045750: 2020 2020 2020 5374 6445 7272 2827 4261        StdErr('Ba
+00045760: 6420 7065 726d 6973 7369 6f6e 2066 6f72  d permission for
+00045770: 6d61 7420 2872 6561 642d 7772 6974 6529  mat (read-write)
+00045780: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
+00045790: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000457a0: 6e20 6465 6661 756c 740a 2020 2020 2020  n default.      
+000457b0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000457c0: 206e 6f74 2061 6c6c 2876 616c 5b6b 5d20   not all(val[k] 
+000457d0: 696e 2027 7873 2d27 2066 6f72 206b 2069  in 'xs-' for k i
+000457e0: 6e20 5b32 2c35 5d29 3a0a 2020 2020 2020  n [2,5]):.      
+000457f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045800: 2020 5374 6445 7272 2827 4261 6420 7065    StdErr('Bad pe
+00045810: 726d 6973 7369 6f6e 2066 6f72 6d61 7420  rmission format 
+00045820: 2865 7865 6375 7465 2927 290a 2020 2020  (execute)').    
+00045830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045840: 2020 2020 7265 7475 726e 2064 6566 6175      return defau
+00045850: 6c74 0a20 2020 2020 2020 2020 2020 2020  lt.             
+00045860: 2020 2020 2020 2069 6620 7661 6c5b 385d         if val[8]
+00045870: 206e 6f74 2069 6e20 2778 742d 273a 0a20   not in 'xt-':. 
+00045880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045890: 2020 2020 2020 2053 7464 4572 7228 2027         StdErr( '
+000458a0: 4261 6420 7065 726d 6973 7369 6f6e 2066  Bad permission f
+000458b0: 6f72 6d61 7420 2865 7865 6375 7465 206f  ormat (execute o
+000458c0: 7468 6572 2927 290a 2020 2020 2020 2020  ther)').        
+000458d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000458e0: 7265 7475 726e 2064 6566 6175 6c74 0a20  return default. 
+000458f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045900: 2020 206d 203d 2030 0a20 2020 2020 2020     m = 0.       
+00045910: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00045920: 7661 6c5b 305d 203d 3d20 2772 273a 206d  val[0] == 'r': m
+00045930: 207c 3d20 7374 6174 2e53 5f49 5255 5352   |= stat.S_IRUSR
+00045940: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00045950: 2020 2020 2069 6620 7661 6c5b 315d 203d       if val[1] =
+00045960: 3d20 2777 273a 206d 207c 3d20 7374 6174  = 'w': m |= stat
+00045970: 2e53 5f49 5755 5352 0a20 2020 2020 2020  .S_IWUSR.       
+00045980: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00045990: 7661 6c5b 325d 203d 3d20 2778 273a 206d  val[2] == 'x': m
+000459a0: 207c 3d20 7374 6174 2e53 5f49 5855 5352   |= stat.S_IXUSR
+000459b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000459c0: 2020 2020 2069 6620 7661 6c5b 325d 203d       if val[2] =
+000459d0: 3d20 2773 273a 206d 207c 3d20 7374 6174  = 's': m |= stat
+000459e0: 2e53 5f49 5855 5352 207c 2073 7461 742e  .S_IXUSR | stat.
+000459f0: 535f 4953 5549 440a 0a20 2020 2020 2020  S_ISUID..       
+00045a00: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00045a10: 7661 6c5b 335d 203d 3d20 2772 273a 206d  val[3] == 'r': m
+00045a20: 207c 3d20 7374 6174 2e53 5f49 5247 5250   |= stat.S_IRGRP
+00045a30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00045a40: 2020 2020 2069 6620 7661 6c5b 345d 203d       if val[4] =
+00045a50: 3d20 2777 273a 206d 207c 3d20 7374 6174  = 'w': m |= stat
+00045a60: 2e53 5f49 5747 5250 0a20 2020 2020 2020  .S_IWGRP.       
+00045a70: 2069 6620 6973 696e 7374 616e 6365 2876   if isinstance(v
+00045a80: 616c 2c69 6e74 293a 0a20 2020 2020 2020  al,int):.       
+00045a90: 2020 2020 2023 6966 2076 616c 203e 2035       #if val > 5
+00045aa0: 3131 3a20 2020 2020 2020 2373 7461 742e  11:       #stat.
+00045ab0: 7374 5f6d 6f64 6520 2833 3237 3638 207e  st_mode (32768 ~
+00045ac0: 2033 3332 3739 290a 2020 2020 2020 2020   33279).        
+00045ad0: 2020 2020 2373 7461 742e 7374 5f6d 6f64      #stat.st_mod
+00045ae0: 6520 2866 696c 653a 2033 3237 3638 7e33  e (file: 32768~3
+00045af0: 3638 3633 2c20 6469 7265 6374 6f72 793a  6863, directory:
+00045b00: 2031 3633 3834 207e 2032 3034 3739 290a   16384 ~ 20479).
+00045b10: 2020 2020 2020 2020 2020 2020 6966 2033              if 3
+00045b20: 3237 3638 203c 3d20 7661 6c20 3c3d 2033  2768 <= val <= 3
+00045b30: 3638 3633 206f 7220 3136 3338 3420 3c3d  6863 or 16384 <=
+00045b40: 2076 616c 203c 3d20 3230 3437 393a 2020   val <= 20479:  
+00045b50: 2023 7374 6174 2e73 745f 6d6f 6465 0a20   #stat.st_mode. 
+00045b60: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00045b70: 7265 7475 726e 205f 6d6f 6465 5f28 6f63  return _mode_(oc
+00045b80: 7428 7661 6c29 5b2d 343a 5d2c 6d6f 6465  t(val)[-4:],mode
+00045b90: 2920 2320 746f 206f 6374 616c 206e 756d  ) # to octal num
+00045ba0: 6265 7220 286f 6374 2876 616c 295b 2d34  ber (oct(val)[-4
+00045bb0: 3a5d 290a 2020 2020 2020 2020 2020 2020  :]).            
+00045bc0: 2020 2020 7265 7475 726e 205f 6d6f 6465      return _mode
+00045bd0: 5f28 6f63 7428 7661 6c20 2620 306f 3737  _(oct(val & 0o77
+00045be0: 3729 2c6d 6f64 6529 2023 2074 6f20 6f63  7),mode) # to oc
+00045bf0: 7461 6c20 6e75 6d62 6572 2028 6f63 7428  tal number (oct(
+00045c00: 7661 6c29 5b2d 343a 5d29 0a20 2020 2020  val)[-4:]).     
+00045c10: 2020 2020 2020 2065 6c69 6620 3531 3120         elif 511 
+00045c20: 3e3d 2076 616c 203e 2036 333a 2020 2020  >= val > 63:    
+00045c30: 2020 236d 6173 6b0a 2020 2020 2020 2020    #mask.        
+00045c40: 2020 2020 2020 2020 7265 7475 726e 205f          return _
+00045c50: 6d6f 6465 5f28 6f63 7428 7661 6c29 2c6d  mode_(oct(val),m
+00045c60: 6f64 6529 2020 2020 2020 2320 746f 206f  ode)      # to o
+00045c70: 6361 6c20 6e75 6d62 6572 286f 6374 2876  cal number(oct(v
+00045c80: 616c 2929 0a20 2020 2020 2020 2020 2020  al)).           
+00045c90: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00045ca0: 2020 2020 2020 2072 6574 7572 6e20 5f6d         return _m
+00045cb0: 6f64 655f 2827 2530 3464 2725 2876 616c  ode_('%04d'%(val
+00045cc0: 292c 6d6f 6465 2920 2020 2020 2023 2074  ),mode)      # t
+00045cd0: 6f20 6f63 616c 206e 756d 6265 7228 6f63  o ocal number(oc
+00045ce0: 7428 7661 6c29 290a 2020 2020 2020 2020  t(val)).        
+00045cf0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00045d00: 2020 7661 6c3d 5374 7228 7661 6c2c 6465    val=Str(val,de
+00045d10: 6661 756c 743d 4e6f 6e65 290a 2020 2020  fault=None).    
+00045d20: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00045d30: 7461 6e63 6528 7661 6c2c 7374 7229 3a0a  tance(val,str):.
+00045d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045d50: 7661 6c5f 6c65 6e3d 6c65 6e28 7661 6c29  val_len=len(val)
+00045d60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00045d70: 206e 756d 3d49 6e74 2876 616c 2c64 6566   num=Int(val,def
+00045d80: 6175 6c74 3d4e 6f6e 6529 0a20 2020 2020  ault=None).     
+00045d90: 2020 2020 2020 2020 2020 2069 6620 6973             if is
+00045da0: 696e 7374 616e 6365 286e 756d 2c69 6e74  instance(num,int
+00045db0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00045dc0: 2020 2020 2020 2069 6620 3320 3c3d 206c         if 3 <= l
+00045dd0: 656e 2876 616c 2920 3c3d 3420 616e 6420  en(val) <=4 and 
+00045de0: 3130 3020 3c3d 206e 756d 203c 3d20 3737  100 <= num <= 77
+00045df0: 373a 2023 7374 7269 6e67 2074 7970 6520  7: #string type 
+00045e00: 6f66 2070 6572 6d69 7373 696f 6e20 6e75  of permission nu
+00045e10: 6d62 6572 286f 6374 616c 206e 756d 6265  mber(octal numbe
+00045e20: 7229 0a20 2020 2020 2020 2020 2020 2020  r).             
+00045e30: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00045e40: 6e20 5f6d 6f64 655f 2827 2530 3464 2725  n _mode_('%04d'%
+00045e50: 286e 756d 292c 6d6f 6465 290a 2020 2020  (num),mode).    
+00045e60: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00045e70: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00045e80: 2020 2020 2020 7661 6c5f 6c65 6e3d 6c65        val_len=le
+00045e90: 6e28 7661 6c29 0a20 2020 2020 2020 2020  n(val).         
+00045ea0: 2020 2020 2020 2020 2020 2069 6620 393c             if 9<
+00045eb0: 3d20 7661 6c5f 6c65 6e20 3c3d 3130 3a0a  = val_len <=10:.
+00045ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045ed0: 2020 2020 2020 2020 6966 2076 616c 5f6c          if val_l
+00045ee0: 656e 203d 3d20 3130 2061 6e64 2076 616c  en == 10 and val
+00045ef0: 5b30 5d20 696e 205b 272d 272c 2764 272c  [0] in ['-','d',
+00045f00: 2773 275d 3a0a 2020 2020 2020 2020 2020  's']:.          
+00045f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045f20: 2020 7661 6c3d 7661 6c5b 313a 5d0a 2020    val=val[1:].  
+00045f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045f40: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00045f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045f60: 5374 6445 7272 2827 4261 6420 7065 726d  StdErr('Bad perm
+00045f70: 6973 7369 6f6e 206c 656e 6774 6827 290a  ission length').
+00045f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00045f90: 2020 2020 2020 2020 7265 7475 726e 2064          return d
+00045fa0: 6566 6175 6c74 0a20 2020 2020 2020 2020  efault.         
+00045fb0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+00045fc0: 7420 616c 6c28 7661 6c5b 6b5d 2069 6e20  t all(val[k] in 
+00045fd0: 2772 772d 2720 666f 7220 6b20 696e 205b  'rw-' for k in [
+00045fe0: 302c 312c 332c 342c 362c 375d 293a 0a20  0,1,3,4,6,7]):. 
+00045ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046000: 2020 2020 2020 2053 7464 4572 7228 2742         StdErr('B
+00046010: 6164 2070 6572 6d69 7373 696f 6e20 666f  ad permission fo
+00046020: 726d 6174 2028 7265 6164 2d77 7269 7465  rmat (read-write
+00046030: 2927 290a 2020 2020 2020 2020 2020 2020  )').            
+00046040: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00046050: 726e 2064 6566 6175 6c74 0a20 2020 2020  rn default.     
+00046060: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00046070: 6620 6e6f 7420 616c 6c28 7661 6c5b 6b5d  f not all(val[k]
+00046080: 2069 6e20 2778 732d 2720 666f 7220 6b20   in 'xs-' for k 
+00046090: 696e 205b 322c 355d 293a 0a20 2020 2020  in [2,5]):.     
+000460a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000460b0: 2020 2053 7464 4572 7228 2742 6164 2070     StdErr('Bad p
+000460c0: 6572 6d69 7373 696f 6e20 666f 726d 6174  ermission format
+000460d0: 2028 6578 6563 7574 6529 2729 0a20 2020   (execute)').   
+000460e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000460f0: 2020 2020 2072 6574 7572 6e20 6465 6661       return defa
+00046100: 756c 740a 2020 2020 2020 2020 2020 2020  ult.            
+00046110: 2020 2020 2020 2020 6966 2076 616c 5b38          if val[8
+00046120: 5d20 6e6f 7420 696e 2027 7874 2d27 3a0a  ] not in 'xt-':.
+00046130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046140: 2020 2020 2020 2020 5374 6445 7272 2820          StdErr( 
+00046150: 2742 6164 2070 6572 6d69 7373 696f 6e20  'Bad permission 
+00046160: 666f 726d 6174 2028 6578 6563 7574 6520  format (execute 
+00046170: 6f74 6865 7229 2729 0a20 2020 2020 2020  other)').       
+00046180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046190: 2072 6574 7572 6e20 6465 6661 756c 740a   return default.
+000461a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000461b0: 2020 2020 6d20 3d20 300a 2020 2020 2020      m = 0.      
+000461c0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000461d0: 2076 616c 5b30 5d20 3d3d 2027 7227 3a20   val[0] == 'r': 
+000461e0: 6d20 7c3d 2073 7461 742e 535f 4952 5553  m |= stat.S_IRUS
+000461f0: 520a 2020 2020 2020 2020 2020 2020 2020  R.              
+00046200: 2020 2020 2020 6966 2076 616c 5b31 5d20        if val[1] 
+00046210: 3d3d 2027 7727 3a20 6d20 7c3d 2073 7461  == 'w': m |= sta
+00046220: 742e 535f 4957 5553 520a 2020 2020 2020  t.S_IWUSR.      
+00046230: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00046240: 2076 616c 5b32 5d20 3d3d 2027 7827 3a20   val[2] == 'x': 
+00046250: 6d20 7c3d 2073 7461 742e 535f 4958 5553  m |= stat.S_IXUS
+00046260: 520a 2020 2020 2020 2020 2020 2020 2020  R.              
+00046270: 2020 2020 2020 6966 2076 616c 5b32 5d20        if val[2] 
+00046280: 3d3d 2027 7327 3a20 6d20 7c3d 2073 7461  == 's': m |= sta
+00046290: 742e 535f 4958 5553 5220 7c20 7374 6174  t.S_IXUSR | stat
+000462a0: 2e53 5f49 5355 4944 0a0a 2020 2020 2020  .S_ISUID..      
+000462b0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000462c0: 2076 616c 5b33 5d20 3d3d 2027 7227 3a20   val[3] == 'r': 
+000462d0: 6d20 7c3d 2073 7461 742e 535f 4952 4752  m |= stat.S_IRGR
+000462e0: 500a 2020 2020 2020 2020 2020 2020 2020  P.              
+000462f0: 2020 2020 2020 6966 2076 616c 5b34 5d20        if val[4] 
+00046300: 3d3d 2027 7727 3a20 6d20 7c3d 2073 7461  == 'w': m |= sta
+00046310: 742e 535f 4957 4752 500a 2020 2020 2020  t.S_IWGRP.      
+00046320: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00046330: 2076 616c 5b35 5d20 3d3d 2027 7827 3a20   val[5] == 'x': 
+00046340: 6d20 7c3d 2073 7461 742e 535f 4958 4752  m |= stat.S_IXGR
+00046350: 500a 2020 2020 2020 2020 2020 2020 2020  P.              
+00046360: 2020 2020 2020 6966 2076 616c 5b35 5d20        if val[5] 
+00046370: 3d3d 2027 7327 3a20 6d20 7c3d 2073 7461  == 's': m |= sta
+00046380: 742e 535f 4958 4752 5020 7c20 7374 6174  t.S_IXGRP | stat
+00046390: 2e53 5f49 5347 4944 0a0a 2020 2020 2020  .S_ISGID..      
+000463a0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000463b0: 2076 616c 5b36 5d20 3d3d 2027 7227 3a20   val[6] == 'r': 
+000463c0: 6d20 7c3d 2073 7461 742e 535f 4952 4f54  m |= stat.S_IROT
+000463d0: 480a 2020 2020 2020 2020 2020 2020 2020  H.              
+000463e0: 2020 2020 2020 6966 2076 616c 5b37 5d20        if val[7] 
+000463f0: 3d3d 2027 7727 3a20 6d20 7c3d 2073 7461  == 'w': m |= sta
+00046400: 742e 535f 4957 4f54 480a 2020 2020 2020  t.S_IWOTH.      
+00046410: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00046420: 2076 616c 5b38 5d20 3d3d 2027 7827 3a20   val[8] == 'x': 
+00046430: 6d20 7c3d 2073 7461 742e 535f 4958 4f54  m |= stat.S_IXOT
+00046440: 480a 2020 2020 2020 2020 2020 2020 2020  H.              
+00046450: 2020 2020 2020 6966 2076 616c 5b38 5d20        if val[8] 
+00046460: 3d3d 2027 7427 3a20 6d20 7c3d 2073 7461  == 't': m |= sta
+00046470: 742e 535f 4958 4f54 4820 7c20 7374 6174  t.S_IXOTH | stat
+00046480: 2e53 5f49 5356 5458 0a20 2020 2020 2020  .S_ISVTX.       
+00046490: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+000464a0: 7572 6e20 5f6d 6f64 655f 286f 6374 286d  urn _mode_(oct(m
+000464b0: 292c 6d6f 6465 290a 2020 2020 2020 2020  ),mode).        
+000464c0: 7265 7475 726e 2064 6566 6175 6c74 0a0a  return default..
+000464d0: 2020 2020 2320 4669 6e64 2066 696c 656e      # Find filen
+000464e0: 616d 6527 7320 726f 6f74 2070 6174 6820  ame's root path 
+000464f0: 616e 6420 6669 6c65 6e61 6d65 2061 6363  and filename acc
+00046500: 6f72 6469 6e67 2074 6f20 7468 6520 6462  ording to the db
+00046510: 0a20 2020 2064 6566 2046 696e 6452 5028  .    def FindRP(
+00046520: 7365 6c66 2c66 696c 656e 616d 653d 4e6f  self,filename=No
+00046530: 6e65 2c64 6566 6175 6c74 3d4e 6f6e 6529  ne,default=None)
+00046540: 3a0a 2020 2020 2020 2020 6966 2069 7369  :.        if isi
+00046550: 6e73 7461 6e63 6528 6669 6c65 6e61 6d65  nstance(filename
+00046560: 2c73 7472 2920 616e 6420 7365 6c66 2e69  ,str) and self.i
+00046570: 6e66 6f3a 0a20 2020 2020 2020 2020 2020  nfo:.           
+00046580: 2069 6e66 6f5f 6b65 7973 3d6c 6973 7428   info_keys=list(
+00046590: 7365 6c66 2e69 6e66 6f2e 6b65 7973 2829  self.info.keys()
+000465a0: 290a 2020 2020 2020 2020 2020 2020 696e  ).            in
+000465b0: 666f 5f6e 756d 3d6c 656e 2869 6e66 6f5f  fo_num=len(info_
+000465c0: 6b65 7973 290a 2020 2020 2020 2020 2020  keys).          
+000465d0: 2020 6966 2066 696c 656e 616d 655b 305d    if filename[0]
+000465e0: 2021 3d20 272f 273a 0a20 2020 2020 2020   != '/':.       
+000465f0: 2020 2020 2020 2020 2069 6620 696e 666f           if info
+00046600: 5f6e 756d 203d 3d20 313a 2072 6574 7572  _num == 1: retur
+00046610: 6e20 696e 666f 5f6b 6579 735b 305d 0a20  n info_keys[0]. 
+00046620: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00046630: 6574 7572 6e20 7365 6c66 2e72 6f6f 745f  eturn self.root_
+00046640: 7061 7468 0a20 2020 2020 2020 2020 2020  path.           
+00046650: 2061 613d 272f 270a 2020 2020 2020 2020   aa='/'.        
+00046660: 2020 2020 6669 6c65 6e61 6d65 5f61 3d66      filename_a=f
+00046670: 696c 656e 616d 652e 7370 6c69 7428 272f  ilename.split('/
+00046680: 2729 0a20 2020 2020 2020 2020 2020 2066  ').            f
+00046690: 6f72 2069 6920 696e 2072 616e 6765 2831  or ii in range(1
+000466a0: 2c6c 656e 2866 696c 656e 616d 655f 6129  ,len(filename_a)
+000466b0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+000466c0: 2020 2061 613d 5061 7468 2861 612c 6669     aa=Path(aa,fi
+000466d0: 6c65 6e61 6d65 5f61 5b69 695d 290a 2020  lename_a[ii]).  
+000466e0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000466f0: 2061 6120 696e 2069 6e66 6f5f 6b65 7973   aa in info_keys
+00046700: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00046710: 2020 2020 2020 2372 656d 6169 6e5f 7061        #remain_pa
+00046720: 7468 3d27 2f27 2e6a 6f69 6e28 6669 6c65  th='/'.join(file
+00046730: 6e61 6d65 5f61 5b69 692b 313a 5d29 0a20  name_a[ii+1:]). 
+00046740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046750: 2020 2072 656d 6169 6e5f 7061 7468 3d4a     remain_path=J
+00046760: 6f69 6e28 6669 6c65 6e61 6d65 5f61 5b69  oin(filename_a[i
+00046770: 692b 313a 5d2c 7379 6d62 6f6c 3d27 2f27  i+1:],symbol='/'
+00046780: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00046790: 2020 2020 2020 6966 2069 6e66 6f5f 6e75        if info_nu
+000467a0: 6d20 3d3d 2031 3a20 7265 7475 726e 2061  m == 1: return a
+000467b0: 612c 7265 6d61 696e 5f70 6174 680a 2020  a,remain_path.  
+000467c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000467d0: 2020 2320 6966 2069 6e66 6f20 6861 7320    # if info has 
+000467e0: 6d75 6c74 6920 726f 6f74 2070 6174 6820  multi root path 
+000467f0: 7468 656e 2063 6865 636b 2066 696c 656e  then check filen
+00046800: 616d 6520 696e 2074 6865 2064 6220 6f66  ame in the db of
+00046810: 2065 6163 6820 726f 6f74 5f70 6174 680a   each root_path.
 00046820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046830: 2020 2320 6966 2069 6e66 6f20 6861 7320    # if info has 
-00046840: 6d75 6c74 6920 726f 6f74 2070 6174 6820  multi root path 
-00046850: 7468 656e 2063 6865 636b 2066 696c 656e  then check filen
-00046860: 616d 6520 696e 2074 6865 2064 6220 6f66  ame in the db of
-00046870: 2065 6163 6820 726f 6f74 5f70 6174 680a   each root_path.
-00046880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046890: 2020 2020 6966 2073 656c 662e 4669 6c65      if self.File
-000468a0: 496e 666f 2872 656d 6169 6e5f 7061 7468  Info(remain_path
-000468b0: 2c61 6129 3a20 7265 7475 726e 2061 612c  ,aa): return aa,
-000468c0: 7265 6d61 696e 5f70 6174 680a 2020 2020  remain_path.    
-000468d0: 2020 2020 656c 6966 2073 656c 662e 696e      elif self.in
-000468e0: 666f 3a0a 2020 2020 2020 2020 2020 2020  fo:.            
-000468f0: 7265 7475 726e 206c 6973 7428 7365 6c66  return list(self
-00046900: 2e69 6e66 6f2e 6b65 7973 2829 290a 2020  .info.keys()).  
-00046910: 2020 2020 2020 7265 7475 726e 2064 6566        return def
-00046920: 6175 6c74 0a0a 2020 2020 6465 6620 4578  ault..    def Ex
-00046930: 7472 6163 7452 6f6f 7428 7365 6c66 2c2a  tractRoot(self,*
-00046940: 2a6f 7074 7329 3a0a 2020 2020 2020 2020  *opts):.        
-00046950: 726f 6f74 5f70 6174 683d 6f70 7473 2e67  root_path=opts.g
-00046960: 6574 2827 726f 6f74 5f70 6174 6827 2c5b  et('root_path',[
-00046970: 5d29 0a20 2020 2020 2020 2064 6972 7061  ]).        dirpa
-00046980: 7468 3d6f 7074 732e 6765 7428 2764 6972  th=opts.get('dir
-00046990: 7061 7468 2729 0a20 2020 2020 2020 2073  path').        s
-000469a0: 7562 5f64 6972 3d6f 7074 732e 6765 7428  ub_dir=opts.get(
-000469b0: 2773 7562 5f64 6972 272c 4661 6c73 6529  'sub_dir',False)
-000469c0: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-000469d0: 7374 616e 6365 2872 6f6f 745f 7061 7468  stance(root_path
-000469e0: 2c73 7472 293a 0a20 2020 2020 2020 2020  ,str):.         
-000469f0: 2020 2072 6f6f 745f 7061 7468 3d5b 726f     root_path=[ro
-00046a00: 6f74 5f70 6174 685d 0a20 2020 2020 2020  ot_path].       
-00046a10: 2023 6966 206e 6f74 206f 732e 7061 7468   #if not os.path
-00046a20: 2e69 7364 6972 286f 7074 732e 6765 7428  .isdir(opts.get(
-00046a30: 2764 6573 7427 2929 3a20 6f73 2e6d 616b  'dest')): os.mak
-00046a40: 6564 6972 7328 6f70 7473 2e67 6574 2827  edirs(opts.get('
-00046a50: 6465 7374 2729 290a 2020 2020 2020 2020  dest')).        
-00046a60: 6966 2073 656c 662e 4d6b 6469 7228 6f70  if self.Mkdir(op
-00046a70: 7473 2e67 6574 2827 6465 7374 2729 2c66  ts.get('dest'),f
-00046a80: 6f72 6365 3d54 7275 6529 2069 7320 4661  orce=True) is Fa
-00046a90: 6c73 653a 2072 6574 7572 6e20 4661 6c73  lse: return Fals
-00046aa0: 650a 2020 2020 2020 2020 666f 7220 7270  e.        for rp
-00046ab0: 2069 6e20 726f 6f74 5f70 6174 683a 0a20   in root_path:. 
-00046ac0: 2020 2020 2020 2020 2020 206e 6577 5f64             new_d
-00046ad0: 6573 743d 6f70 7473 2e67 6574 2827 6465  est=opts.get('de
-00046ae0: 7374 2729 0a20 2020 2020 2020 2020 2020  st').           
-00046af0: 2069 6620 6469 7270 6174 683a 0a20 2020   if dirpath:.   
-00046b00: 2020 2020 2020 2020 2020 2020 2072 743d               rt=
-00046b10: 7365 6c66 2e43 6450 6174 6828 7365 6c66  self.CdPath(self
-00046b20: 2e69 6e66 6f5b 7270 5d2c 6469 7270 6174  .info[rp],dirpat
-00046b30: 6829 0a20 2020 2020 2020 2020 2020 2020  h).             
-00046b40: 2020 2069 6620 7274 2069 7320 4661 6c73     if rt is Fals
-00046b50: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00046b60: 2020 2020 2020 2070 7269 6e74 2827 7b7d         print('{}
-00046b70: 206e 6f74 2066 6f75 6e64 272e 666f 726d   not found'.form
-00046b80: 6174 2864 6972 7061 7468 2929 0a20 2020  at(dirpath)).   
-00046b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046ba0: 2072 6574 7572 6e0a 2020 2020 2020 2020   return.        
-00046bb0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00046bc0: 2020 2020 2020 2020 2020 6469 7270 6174            dirpat
-00046bd0: 683d 2727 0a20 2020 2020 2020 2020 2020  h=''.           
-00046be0: 2020 2020 2072 743d 7365 6c66 2e69 6e66       rt=self.inf
-00046bf0: 6f5b 7270 5d0a 0a20 2020 2020 2020 2020  o[rp]..         
-00046c00: 2020 2072 696e 666f 3d72 742e 6765 7428     rinfo=rt.get(
-00046c10: 2720 6920 272c 7b7d 290a 2020 2020 2020  ' i ',{}).      
-00046c20: 2020 2020 2020 7274 7970 653d 7269 6e66        rtype=rinf
-00046c30: 6f2e 6765 7428 2774 7970 6527 290a 2020  o.get('type').  
-00046c40: 2020 2020 2020 2020 2020 2364 6972 3a64            #dir:d
-00046c50: 6972 6563 746f 7279 2c4e 6f6e 653a 726f  irectory,None:ro
-00046c60: 6f74 2064 6972 6563 746f 7279 0a20 2020  ot directory.   
-00046c70: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-00046c80: 4973 4e6f 6e65 2872 7479 7065 2c63 686b  IsNone(rtype,chk
-00046c90: 5f76 616c 3d5b 2764 6972 272c 4e6f 6e65  _val=['dir',None
-00046ca0: 2c27 275d 293a 2023 2046 696c 6520 2f20  ,'']): # File / 
-00046cb0: 4c69 6e6b 0a20 2020 2020 2020 2020 2020  Link.           
-00046cc0: 2020 2020 206d 7964 6573 743d 6f73 2e70       mydest=os.p
-00046cd0: 6174 682e 6469 726e 616d 6528 6469 7270  ath.dirname(dirp
-00046ce0: 6174 6829 0a20 2020 2020 2020 2020 2020  ath).           
-00046cf0: 2020 2020 206d 796e 616d 653d 6f73 2e70       myname=os.p
-00046d00: 6174 682e 6261 7365 6e61 6d65 2864 6972  ath.basename(dir
-00046d10: 7061 7468 290a 2020 2020 2020 2020 2020  path).          
-00046d20: 2020 2020 2020 6966 206d 7964 6573 743a        if mydest:
-00046d30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00046d40: 2020 2020 206d 7964 6573 743d 6f73 2e70       mydest=os.p
-00046d50: 6174 682e 6a6f 696e 286e 6577 5f64 6573  ath.join(new_des
-00046d60: 742c 6d79 6465 7374 290a 2020 2020 2020  t,mydest).      
-00046d70: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00046d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046d90: 2020 2020 6d79 6465 7374 3d6e 6577 5f64      mydest=new_d
-00046da0: 6573 740a 2020 2020 2020 2020 2020 2020  est.            
-00046db0: 2020 2020 2369 6620 6e6f 7420 6f73 2e70      #if not os.p
-00046dc0: 6174 682e 6973 6469 7228 6d79 6465 7374  ath.isdir(mydest
-00046dd0: 293a 206f 732e 6d61 6b65 6469 7273 286d  ): os.makedirs(m
-00046de0: 7964 6573 7429 0a20 2020 2020 2020 2020  ydest).         
-00046df0: 2020 2020 2020 2069 6620 7365 6c66 2e4d         if self.M
-00046e00: 6b64 6972 286d 7964 6573 742c 666f 7263  kdir(mydest,forc
-00046e10: 653d 5472 7565 2c69 6e66 6f3d 7269 6e66  e=True,info=rinf
-00046e20: 6f29 2069 7320 4661 6c73 653a 2072 6574  o) is False: ret
-00046e30: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
-00046e40: 2020 2020 2020 2020 2020 6966 2072 7479            if rty
-00046e50: 7065 203d 3d20 276c 696e 6b27 3a0a 2020  pe == 'link':.  
-00046e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046e70: 2020 6f73 2e73 796d 6c69 6e6b 2872 696e    os.symlink(rin
-00046e80: 666f 5b27 6465 7374 275d 2c6f 732e 7061  fo['dest'],os.pa
-00046e90: 7468 2e6a 6f69 6e28 6d79 6465 7374 2c6d  th.join(mydest,m
-00046ea0: 796e 616d 6529 290a 2020 2020 2020 2020  yname)).        
-00046eb0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00046ec0: 2e53 6574 4964 656e 7469 7479 286f 732e  .SetIdentity(os.
-00046ed0: 7061 7468 2e6a 6f69 6e28 6d79 6465 7374  path.join(mydest
-00046ee0: 2c6d 796e 616d 6529 2c2a 2a72 696e 666f  ,myname),**rinfo
-00046ef0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00046f00: 2020 656c 7365 3a20 2320 4669 6c65 0a20    else: # File. 
+00046830: 2020 2020 6966 2073 656c 662e 4669 6c65      if self.File
+00046840: 496e 666f 2872 656d 6169 6e5f 7061 7468  Info(remain_path
+00046850: 2c61 6129 3a20 7265 7475 726e 2061 612c  ,aa): return aa,
+00046860: 7265 6d61 696e 5f70 6174 680a 2020 2020  remain_path.    
+00046870: 2020 2020 656c 6966 2073 656c 662e 696e      elif self.in
+00046880: 666f 3a0a 2020 2020 2020 2020 2020 2020  fo:.            
+00046890: 7265 7475 726e 206c 6973 7428 7365 6c66  return list(self
+000468a0: 2e69 6e66 6f2e 6b65 7973 2829 290a 2020  .info.keys()).  
+000468b0: 2020 2020 2020 7265 7475 726e 2064 6566        return def
+000468c0: 6175 6c74 0a0a 2020 2020 6465 6620 4578  ault..    def Ex
+000468d0: 7472 6163 7452 6f6f 7428 7365 6c66 2c2a  tractRoot(self,*
+000468e0: 2a6f 7074 7329 3a0a 2020 2020 2020 2020  *opts):.        
+000468f0: 726f 6f74 5f70 6174 683d 6f70 7473 2e67  root_path=opts.g
+00046900: 6574 2827 726f 6f74 5f70 6174 6827 2c5b  et('root_path',[
+00046910: 5d29 0a20 2020 2020 2020 2064 6972 7061  ]).        dirpa
+00046920: 7468 3d6f 7074 732e 6765 7428 2764 6972  th=opts.get('dir
+00046930: 7061 7468 2729 0a20 2020 2020 2020 2073  path').        s
+00046940: 7562 5f64 6972 3d6f 7074 732e 6765 7428  ub_dir=opts.get(
+00046950: 2773 7562 5f64 6972 272c 4661 6c73 6529  'sub_dir',False)
+00046960: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
+00046970: 7374 616e 6365 2872 6f6f 745f 7061 7468  stance(root_path
+00046980: 2c73 7472 293a 0a20 2020 2020 2020 2020  ,str):.         
+00046990: 2020 2072 6f6f 745f 7061 7468 3d5b 726f     root_path=[ro
+000469a0: 6f74 5f70 6174 685d 0a20 2020 2020 2020  ot_path].       
+000469b0: 2023 6966 206e 6f74 206f 732e 7061 7468   #if not os.path
+000469c0: 2e69 7364 6972 286f 7074 732e 6765 7428  .isdir(opts.get(
+000469d0: 2764 6573 7427 2929 3a20 6f73 2e6d 616b  'dest')): os.mak
+000469e0: 6564 6972 7328 6f70 7473 2e67 6574 2827  edirs(opts.get('
+000469f0: 6465 7374 2729 290a 2020 2020 2020 2020  dest')).        
+00046a00: 6966 2073 656c 662e 4d6b 6469 7228 6f70  if self.Mkdir(op
+00046a10: 7473 2e67 6574 2827 6465 7374 2729 2c66  ts.get('dest'),f
+00046a20: 6f72 6365 3d54 7275 6529 2069 7320 4661  orce=True) is Fa
+00046a30: 6c73 653a 2072 6574 7572 6e20 4661 6c73  lse: return Fals
+00046a40: 650a 2020 2020 2020 2020 666f 7220 7270  e.        for rp
+00046a50: 2069 6e20 726f 6f74 5f70 6174 683a 0a20   in root_path:. 
+00046a60: 2020 2020 2020 2020 2020 206e 6577 5f64             new_d
+00046a70: 6573 743d 6f70 7473 2e67 6574 2827 6465  est=opts.get('de
+00046a80: 7374 2729 0a20 2020 2020 2020 2020 2020  st').           
+00046a90: 2069 6620 6469 7270 6174 683a 0a20 2020   if dirpath:.   
+00046aa0: 2020 2020 2020 2020 2020 2020 2072 743d               rt=
+00046ab0: 7365 6c66 2e43 6450 6174 6828 7365 6c66  self.CdPath(self
+00046ac0: 2e69 6e66 6f5b 7270 5d2c 6469 7270 6174  .info[rp],dirpat
+00046ad0: 6829 0a20 2020 2020 2020 2020 2020 2020  h).             
+00046ae0: 2020 2069 6620 7274 2069 7320 4661 6c73     if rt is Fals
+00046af0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00046b00: 2020 2020 2020 2070 7269 6e74 2827 7b7d         print('{}
+00046b10: 206e 6f74 2066 6f75 6e64 272e 666f 726d   not found'.form
+00046b20: 6174 2864 6972 7061 7468 2929 0a20 2020  at(dirpath)).   
+00046b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046b40: 2072 6574 7572 6e0a 2020 2020 2020 2020   return.        
+00046b50: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00046b60: 2020 2020 2020 2020 2020 6469 7270 6174            dirpat
+00046b70: 683d 2727 0a20 2020 2020 2020 2020 2020  h=''.           
+00046b80: 2020 2020 2072 743d 7365 6c66 2e69 6e66       rt=self.inf
+00046b90: 6f5b 7270 5d0a 0a20 2020 2020 2020 2020  o[rp]..         
+00046ba0: 2020 2072 696e 666f 3d72 742e 6765 7428     rinfo=rt.get(
+00046bb0: 2720 6920 272c 7b7d 290a 2020 2020 2020  ' i ',{}).      
+00046bc0: 2020 2020 2020 7274 7970 653d 7269 6e66        rtype=rinf
+00046bd0: 6f2e 6765 7428 2774 7970 6527 290a 2020  o.get('type').  
+00046be0: 2020 2020 2020 2020 2020 2364 6972 3a64            #dir:d
+00046bf0: 6972 6563 746f 7279 2c4e 6f6e 653a 726f  irectory,None:ro
+00046c00: 6f74 2064 6972 6563 746f 7279 0a20 2020  ot directory.   
+00046c10: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00046c20: 4973 4e6f 6e65 2872 7479 7065 2c63 686b  IsNone(rtype,chk
+00046c30: 5f76 616c 3d5b 2764 6972 272c 4e6f 6e65  _val=['dir',None
+00046c40: 2c27 275d 293a 2023 2046 696c 6520 2f20  ,'']): # File / 
+00046c50: 4c69 6e6b 0a20 2020 2020 2020 2020 2020  Link.           
+00046c60: 2020 2020 206d 7964 6573 743d 6f73 2e70       mydest=os.p
+00046c70: 6174 682e 6469 726e 616d 6528 6469 7270  ath.dirname(dirp
+00046c80: 6174 6829 0a20 2020 2020 2020 2020 2020  ath).           
+00046c90: 2020 2020 206d 796e 616d 653d 6f73 2e70       myname=os.p
+00046ca0: 6174 682e 6261 7365 6e61 6d65 2864 6972  ath.basename(dir
+00046cb0: 7061 7468 290a 2020 2020 2020 2020 2020  path).          
+00046cc0: 2020 2020 2020 6966 206d 7964 6573 743a        if mydest:
+00046cd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00046ce0: 2020 2020 206d 7964 6573 743d 6f73 2e70       mydest=os.p
+00046cf0: 6174 682e 6a6f 696e 286e 6577 5f64 6573  ath.join(new_des
+00046d00: 742c 6d79 6465 7374 290a 2020 2020 2020  t,mydest).      
+00046d10: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00046d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046d30: 2020 2020 6d79 6465 7374 3d6e 6577 5f64      mydest=new_d
+00046d40: 6573 740a 2020 2020 2020 2020 2020 2020  est.            
+00046d50: 2020 2020 2369 6620 6e6f 7420 6f73 2e70      #if not os.p
+00046d60: 6174 682e 6973 6469 7228 6d79 6465 7374  ath.isdir(mydest
+00046d70: 293a 206f 732e 6d61 6b65 6469 7273 286d  ): os.makedirs(m
+00046d80: 7964 6573 7429 0a20 2020 2020 2020 2020  ydest).         
+00046d90: 2020 2020 2020 2069 6620 7365 6c66 2e4d         if self.M
+00046da0: 6b64 6972 286d 7964 6573 742c 666f 7263  kdir(mydest,forc
+00046db0: 653d 5472 7565 2c69 6e66 6f3d 7269 6e66  e=True,info=rinf
+00046dc0: 6f29 2069 7320 4661 6c73 653a 2072 6574  o) is False: ret
+00046dd0: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
+00046de0: 2020 2020 2020 2020 2020 6966 2072 7479            if rty
+00046df0: 7065 203d 3d20 276c 696e 6b27 3a0a 2020  pe == 'link':.  
+00046e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046e10: 2020 6f73 2e73 796d 6c69 6e6b 2872 696e    os.symlink(rin
+00046e20: 666f 5b27 6465 7374 275d 2c6f 732e 7061  fo['dest'],os.pa
+00046e30: 7468 2e6a 6f69 6e28 6d79 6465 7374 2c6d  th.join(mydest,m
+00046e40: 796e 616d 6529 290a 2020 2020 2020 2020  yname)).        
+00046e50: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00046e60: 2e53 6574 4964 656e 7469 7479 286f 732e  .SetIdentity(os.
+00046e70: 7061 7468 2e6a 6f69 6e28 6d79 6465 7374  path.join(mydest
+00046e80: 2c6d 796e 616d 6529 2c2a 2a72 696e 666f  ,myname),**rinfo
+00046e90: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00046ea0: 2020 656c 7365 3a20 2320 4669 6c65 0a20    else: # File. 
+00046eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00046ec0: 2020 2069 6620 2764 6174 6127 2069 6e20     if 'data' in 
+00046ed0: 7274 3a20 7365 6c66 2e52 7728 5061 7468  rt: self.Rw(Path
+00046ee0: 286d 7964 6573 742c 6d79 6e61 6d65 292c  (mydest,myname),
+00046ef0: 6461 7461 3d72 745b 2764 6174 6127 5d2c  data=rt['data'],
+00046f00: 6669 6e66 6f3d 7269 6e66 6f29 0a20 2020  finfo=rinfo).   
 00046f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046f20: 2020 2069 6620 2764 6174 6127 2069 6e20     if 'data' in 
-00046f30: 7274 3a20 7365 6c66 2e52 7728 5061 7468  rt: self.Rw(Path
-00046f40: 286d 7964 6573 742c 6d79 6e61 6d65 292c  (mydest,myname),
-00046f50: 6461 7461 3d72 745b 2764 6174 6127 5d2c  data=rt['data'],
-00046f60: 6669 6e66 6f3d 7269 6e66 6f29 0a20 2020  finfo=rinfo).   
-00046f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00046f80: 2065 6c73 653a 2070 7269 6e74 2827 7b7d   else: print('{}
-00046f90: 2066 696c 6520 6861 7665 206e 6f20 6461   file have no da
-00046fa0: 7461 272e 666f 726d 6174 2864 6972 7061  ta'.format(dirpa
-00046fb0: 7468 2929 0a23 2020 2020 2020 2020 2020  th)).#          
-00046fc0: 2020 2020 2020 7365 6c66 2e53 6574 4964        self.SetId
-00046fd0: 656e 7469 7479 286f 732e 7061 7468 2e6a  entity(os.path.j
-00046fe0: 6f69 6e28 6d79 6465 7374 2c6d 796e 616d  oin(mydest,mynam
-00046ff0: 6529 2c2a 2a72 696e 666f 290a 2020 2020  e),**rinfo).    
-00047000: 2020 2020 2020 2020 656c 7365 3a20 2320          else: # 
-00047010: 6469 7265 6374 6f72 7920 6f72 2072 6f6f  directory or roo
-00047020: 7420 4442 0a20 2020 2020 2020 2020 2020  t DB.           
-00047030: 2020 2020 2066 6f72 2069 6920 696e 2072       for ii in r
-00047040: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-00047050: 2020 2020 2020 2069 6620 6969 203d 3d20         if ii == 
-00047060: 2720 6920 273a 2063 6f6e 7469 6e75 650a  ' i ': continue.
-00047070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047080: 2020 2020 6669 6e66 6f3d 7274 5b69 695d      finfo=rt[ii]
-00047090: 2e67 6574 2827 2069 2027 2c7b 7d29 0a20  .get(' i ',{}). 
-000470a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000470b0: 2020 2066 7479 7065 3d66 696e 666f 2e67     ftype=finfo.g
-000470c0: 6574 2827 7479 7065 2729 0a20 2020 2020  et('type').     
-000470d0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000470e0: 6620 6674 7970 6520 3d3d 2027 6469 7227  f ftype == 'dir'
-000470f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00047100: 2020 2020 2020 2020 2020 6d79 6469 723d            mydir=
-00047110: 6f73 2e70 6174 682e 6a6f 696e 286e 6577  os.path.join(new
-00047120: 5f64 6573 742c 6969 290a 2020 2020 2020  _dest,ii).      
-00047130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047140: 2020 7365 6c66 2e4d 6b64 6972 286d 7964    self.Mkdir(myd
-00047150: 6972 2c66 6f72 6365 3d54 7275 652c 696e  ir,force=True,in
-00047160: 666f 3d66 696e 666f 290a 2020 2020 2020  fo=finfo).      
+00046f20: 2065 6c73 653a 2070 7269 6e74 2827 7b7d   else: print('{}
+00046f30: 2066 696c 6520 6861 7665 206e 6f20 6461   file have no da
+00046f40: 7461 272e 666f 726d 6174 2864 6972 7061  ta'.format(dirpa
+00046f50: 7468 2929 0a23 2020 2020 2020 2020 2020  th)).#          
+00046f60: 2020 2020 2020 7365 6c66 2e53 6574 4964        self.SetId
+00046f70: 656e 7469 7479 286f 732e 7061 7468 2e6a  entity(os.path.j
+00046f80: 6f69 6e28 6d79 6465 7374 2c6d 796e 616d  oin(mydest,mynam
+00046f90: 6529 2c2a 2a72 696e 666f 290a 2020 2020  e),**rinfo).    
+00046fa0: 2020 2020 2020 2020 656c 7365 3a20 2320          else: # 
+00046fb0: 6469 7265 6374 6f72 7920 6f72 2072 6f6f  directory or roo
+00046fc0: 7420 4442 0a20 2020 2020 2020 2020 2020  t DB.           
+00046fd0: 2020 2020 2066 6f72 2069 6920 696e 2072       for ii in r
+00046fe0: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
+00046ff0: 2020 2020 2020 2069 6620 6969 203d 3d20         if ii == 
+00047000: 2720 6920 273a 2063 6f6e 7469 6e75 650a  ' i ': continue.
+00047010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047020: 2020 2020 6669 6e66 6f3d 7274 5b69 695d      finfo=rt[ii]
+00047030: 2e67 6574 2827 2069 2027 2c7b 7d29 0a20  .get(' i ',{}). 
+00047040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047050: 2020 2066 7479 7065 3d66 696e 666f 2e67     ftype=finfo.g
+00047060: 6574 2827 7479 7065 2729 0a20 2020 2020  et('type').     
+00047070: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00047080: 6620 6674 7970 6520 3d3d 2027 6469 7227  f ftype == 'dir'
+00047090: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000470a0: 2020 2020 2020 2020 2020 6d79 6469 723d            mydir=
+000470b0: 6f73 2e70 6174 682e 6a6f 696e 286e 6577  os.path.join(new
+000470c0: 5f64 6573 742c 6969 290a 2020 2020 2020  _dest,ii).      
+000470d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000470e0: 2020 7365 6c66 2e4d 6b64 6972 286d 7964    self.Mkdir(myd
+000470f0: 6972 2c66 6f72 6365 3d54 7275 652c 696e  ir,force=True,in
+00047100: 666f 3d66 696e 666f 290a 2020 2020 2020  fo=finfo).      
+00047110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047120: 2020 2373 656c 662e 5365 7449 6465 6e74    #self.SetIdent
+00047130: 6974 7928 6d79 6469 722c 2a2a 6669 6e66  ity(mydir,**finf
+00047140: 6f29 0a20 2020 2020 2020 2020 2020 2020  o).             
+00047150: 2020 2020 2020 2020 2020 2023 2053 7562             # Sub
+00047160: 2064 6972 6563 746f 7279 0a20 2020 2020   directory.     
 00047170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047180: 2020 2373 656c 662e 5365 7449 6465 6e74    #self.SetIdent
-00047190: 6974 7928 6d79 6469 722c 2a2a 6669 6e66  ity(mydir,**finf
-000471a0: 6f29 0a20 2020 2020 2020 2020 2020 2020  o).             
-000471b0: 2020 2020 2020 2020 2020 2023 2053 7562             # Sub
-000471c0: 2064 6972 6563 746f 7279 0a20 2020 2020   directory.     
-000471d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000471e0: 2020 2069 6620 7375 625f 6469 723a 2073     if sub_dir: s
-000471f0: 656c 662e 4578 7472 6163 7452 6f6f 7428  elf.ExtractRoot(
-00047200: 6469 7270 6174 683d 6f73 2e70 6174 682e  dirpath=os.path.
-00047210: 6a6f 696e 2864 6972 7061 7468 2c69 6929  join(dirpath,ii)
-00047220: 2c72 6f6f 745f 7061 7468 3d72 702c 6465  ,root_path=rp,de
-00047230: 7374 3d6f 732e 7061 7468 2e6a 6f69 6e28  st=os.path.join(
-00047240: 6e65 775f 6465 7374 2c69 6929 2c73 7562  new_dest,ii),sub
-00047250: 5f64 6972 3d73 7562 5f64 6972 290a 2020  _dir=sub_dir).  
-00047260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047270: 2020 2020 2020 2369 6620 646d 7469 6d65        #if dmtime
-00047280: 2061 6e64 2064 6174 696d 653a 206f 732e   and datime: os.
-00047290: 7574 696d 6528 6d79 6469 722c 2864 6174  utime(mydir,(dat
-000472a0: 696d 652c 646d 7469 6d65 2929 2023 2054  ime,dmtime)) # T
-000472b0: 696d 6520 7570 6461 7465 206d 7573 7420  ime update must 
-000472c0: 6265 2061 7420 6c61 7374 206f 7264 6572  be at last order
-000472d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000472e0: 2020 2020 2065 6c69 6620 6674 7970 6520       elif ftype 
-000472f0: 3d3d 2027 6c69 6e6b 273a 0a20 2020 2020  == 'link':.     
-00047300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047310: 2020 2069 696d 6d3d 6f73 2e70 6174 682e     iimm=os.path.
-00047320: 6a6f 696e 286e 6577 5f64 6573 742c 6969  join(new_dest,ii
-00047330: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00047340: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-00047350: 206f 732e 7061 7468 2e65 7869 7374 7328   os.path.exists(
-00047360: 6969 6d6d 293a 0a20 2020 2020 2020 2020  iimm):.         
-00047370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047380: 2020 206f 732e 7379 6d6c 696e 6b28 6669     os.symlink(fi
-00047390: 6e66 6f5b 2764 6573 7427 5d2c 6969 6d6d  nfo['dest'],iimm
-000473a0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000473b0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-000473c0: 6c66 2e53 6574 4964 656e 7469 7479 2869  lf.SetIdentity(i
-000473d0: 696d 6d2c 2a2a 6669 6e66 6f29 0a20 2020  imm,**finfo).   
-000473e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000473f0: 2065 6c73 653a 2023 2046 696c 650a 2020   else: # File.  
-00047400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047410: 2020 2020 2020 6966 2027 6461 7461 2720        if 'data' 
-00047420: 696e 2072 745b 6969 5d3a 2073 656c 662e  in rt[ii]: self.
-00047430: 5277 286f 732e 7061 7468 2e6a 6f69 6e28  Rw(os.path.join(
-00047440: 6e65 775f 6465 7374 2c69 6929 2c64 6174  new_dest,ii),dat
-00047450: 613d 7274 5b69 695d 5b27 6461 7461 275d  a=rt[ii]['data']
-00047460: 2c66 696e 666f 3d66 696e 666f 290a 2020  ,finfo=finfo).  
-00047470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047480: 2020 2020 2020 656c 7365 3a20 7072 696e        else: prin
-00047490: 7428 277b 7d20 6669 6c65 2068 6176 6520  t('{} file have 
-000474a0: 6e6f 2064 6174 6127 2e66 6f72 6d61 7428  no data'.format(
-000474b0: 6969 2929 0a0a 2020 2020 6465 6620 4d6b  ii))..    def Mk
-000474c0: 6469 7228 7365 6c66 2c70 6174 682c 666f  dir(self,path,fo
-000474d0: 7263 653d 4661 6c73 652c 696e 666f 3d7b  rce=False,info={
-000474e0: 7d29 3a0a 2020 2020 2020 2020 6966 206e  }):.        if n
-000474f0: 6f74 2069 7369 6e73 7461 6e63 6528 7061  ot isinstance(pa
-00047500: 7468 2c73 7472 293a 2072 6574 7572 6e20  th,str): return 
-00047510: 4e6f 6e65 0a20 2020 2020 2020 2069 6620  None.        if 
-00047520: 6f73 2e70 6174 682e 6578 6973 7473 2870  os.path.exists(p
-00047530: 6174 6829 3a20 7265 7475 726e 204e 6f6e  ath): return Non
-00047540: 650a 2020 2020 2020 2020 6966 2066 6f72  e.        if for
-00047550: 6365 3a0a 2020 2020 2020 2020 2020 2020  ce:.            
-00047560: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
-00047570: 2020 2020 206f 732e 6d61 6b65 6469 7273       os.makedirs
-00047580: 2870 6174 6829 0a20 2020 2020 2020 2020  (path).         
-00047590: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-000475a0: 616e 6365 2869 6e66 6f2c 6469 6374 2920  ance(info,dict) 
-000475b0: 616e 6420 696e 666f 3a20 7365 6c66 2e53  and info: self.S
-000475c0: 6574 4964 656e 7469 7479 2870 6174 682c  etIdentity(path,
-000475d0: 2a2a 696e 666f 290a 2020 2020 2020 2020  **info).        
-000475e0: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
-000475f0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00047600: 726e 2046 616c 7365 0a20 2020 2020 2020  rn False.       
-00047610: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00047620: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-00047630: 2020 2020 2020 2020 6f73 2e6d 6b64 6972          os.mkdir
-00047640: 2870 6174 6829 0a20 2020 2020 2020 2020  (path).         
-00047650: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-00047660: 616e 6365 2869 6e66 6f2c 6469 6374 2920  ance(info,dict) 
-00047670: 616e 6420 696e 666f 3a20 7365 6c66 2e53  and info: self.S
-00047680: 6574 4964 656e 7469 7479 2870 6174 682c  etIdentity(path,
-00047690: 2a2a 696e 666f 290a 2020 2020 2020 2020  **info).        
-000476a0: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
-000476b0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000476c0: 726e 2046 616c 7365 0a20 2020 2020 2020  rn False.       
-000476d0: 2072 6574 7572 6e20 5472 7565 0a0a 2020   return True..  
-000476e0: 2020 6465 6620 5365 7449 6465 6e74 6974    def SetIdentit
-000476f0: 7928 7365 6c66 2c70 6174 682c 2a2a 6f70  y(self,path,**op
-00047700: 7473 293a 0a20 2020 2020 2020 2069 6620  ts):.        if 
-00047710: 6f73 2e70 6174 682e 6578 6973 7473 2870  os.path.exists(p
-00047720: 6174 6829 3a0a 2020 2020 2020 2020 2020  ath):.          
-00047730: 2020 6368 6d6f 643d 7365 6c66 2e4d 6f64    chmod=self.Mod
-00047740: 6528 6f70 7473 2e67 6574 2827 6d6f 6465  e(opts.get('mode
-00047750: 272c 4e6f 6e65 2929 0a20 2020 2020 2020  ',None)).       
-00047760: 2020 2020 2075 6964 3d6f 7074 732e 6765       uid=opts.ge
-00047770: 7428 2775 6964 272c 4e6f 6e65 290a 2020  t('uid',None).  
-00047780: 2020 2020 2020 2020 2020 6769 643d 6f70            gid=op
-00047790: 7473 2e67 6574 2827 6769 6427 2c4e 6f6e  ts.get('gid',Non
-000477a0: 6529 0a20 2020 2020 2020 2020 2020 2061  e).            a
-000477b0: 7469 6d65 3d6f 7074 732e 6765 7428 2761  time=opts.get('a
-000477c0: 7469 6d65 272c 4e6f 6e65 290a 2020 2020  time',None).    
-000477d0: 2020 2020 2020 2020 6d74 696d 653d 6f70          mtime=op
-000477e0: 7473 2e67 6574 2827 6d74 696d 6527 2c4e  ts.get('mtime',N
-000477f0: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
-00047800: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-00047810: 2020 2020 2020 6966 2063 686d 6f64 3a20        if chmod: 
-00047820: 6f73 2e63 686d 6f64 2870 6174 682c 696e  os.chmod(path,in
-00047830: 7428 6368 6d6f 642c 6261 7365 3d38 2929  t(chmod,base=8))
-00047840: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00047850: 2069 6620 7569 6420 616e 6420 6769 643a   if uid and gid:
-00047860: 206f 732e 6368 6f77 6e28 7061 7468 2c75   os.chown(path,u
-00047870: 6964 2c67 6964 290a 2020 2020 2020 2020  id,gid).        
-00047880: 2020 2020 2020 2020 6966 206d 7469 6d65          if mtime
-00047890: 2061 6e64 2061 7469 6d65 3a20 6f73 2e75   and atime: os.u
-000478a0: 7469 6d65 2870 6174 682c 2861 7469 6d65  time(path,(atime
-000478b0: 2c6d 7469 6d65 2929 2023 2054 696d 6520  ,mtime)) # Time 
-000478c0: 7570 6461 7465 206d 7573 7420 6265 2061  update must be a
-000478d0: 7420 6c61 7374 206f 7264 6572 0a20 2020  t last order.   
-000478e0: 2020 2020 2020 2020 2065 7863 6570 743a           except:
-000478f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00047900: 2070 6173 730a 0a20 2020 2064 6566 2045   pass..    def E
-00047910: 7874 7261 6374 2873 656c 662c 2a70 6174  xtract(self,*pat
-00047920: 682c 2a2a 6f70 7473 293a 0a20 2020 2020  h,**opts):.     
-00047930: 2020 2064 6573 743d 6f70 7473 2e67 6574     dest=opts.get
-00047940: 2827 6465 7374 272c 4e6f 6e65 290a 2020  ('dest',None).  
-00047950: 2020 2020 2020 726f 6f74 5f70 6174 683d        root_path=
-00047960: 6f70 7473 2e67 6574 2827 726f 6f74 5f70  opts.get('root_p
-00047970: 6174 6827 2c4e 6f6e 6529 0a20 2020 2020  ath',None).     
-00047980: 2020 2073 7562 5f64 6972 3d6f 7074 732e     sub_dir=opts.
-00047990: 6765 7428 2773 7562 5f64 6972 272c 4661  get('sub_dir',Fa
-000479a0: 6c73 6529 0a20 2020 2020 2020 2069 6620  lse).        if 
-000479b0: 4973 4e6f 6e65 2864 6573 7429 3a20 7265  IsNone(dest): re
-000479c0: 7475 726e 2046 616c 7365 0a20 2020 2020  turn False.     
-000479d0: 2020 2069 6620 6e6f 7420 7061 7468 3a0a     if not path:.
-000479e0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000479f0: 2e45 7874 7261 6374 526f 6f74 2872 6f6f  .ExtractRoot(roo
-00047a00: 745f 7061 7468 3d73 656c 662e 4669 6e64  t_path=self.Find
-00047a10: 5250 2829 2c64 6573 743d 6465 7374 2c73  RP(),dest=dest,s
-00047a20: 7562 5f64 6972 3d73 7562 5f64 6972 290a  ub_dir=sub_dir).
-00047a30: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00047a40: 2020 2020 2020 2020 2020 666f 7220 6669            for fi
-00047a50: 6c65 7061 7468 2069 6e20 7061 7468 3a0a  lepath in path:.
-00047a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047a70: 6669 6c65 5246 3d73 656c 662e 4669 6e64  fileRF=self.Find
-00047a80: 5250 2866 696c 6570 6174 6829 0a20 2020  RP(filepath).   
-00047a90: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00047aa0: 6973 696e 7374 616e 6365 2866 696c 6552  isinstance(fileR
-00047ab0: 462c 7475 706c 6529 3a0a 2020 2020 2020  F,tuple):.      
-00047ac0: 2020 2020 2020 2020 2020 2020 2020 726f                ro
-00047ad0: 6f74 5f70 6174 683d 5b66 696c 6552 465b  ot_path=[fileRF[
-00047ae0: 305d 5d0a 2020 2020 2020 2020 2020 2020  0]].            
-00047af0: 2020 2020 2020 2020 6669 6c65 6e61 6d65          filename
-00047b00: 3d66 696c 6552 465b 315d 0a20 2020 2020  =fileRF[1].     
-00047b10: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00047b20: 656c 662e 4578 7472 6163 7452 6f6f 7428  elf.ExtractRoot(
-00047b30: 726f 6f74 5f70 6174 683d 726f 6f74 5f70  root_path=root_p
-00047b40: 6174 682c 6469 7270 6174 683d 6669 6c65  ath,dirpath=file
-00047b50: 6e61 6d65 2c64 6573 743d 6465 7374 2c73  name,dest=dest,s
-00047b60: 7562 5f64 6972 3d73 7562 5f64 6972 290a  ub_dir=sub_dir).
-00047b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047b80: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
-00047b90: 6669 6c65 5246 2c6c 6973 7429 3a0a 2020  fileRF,list):.  
-00047ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00047bb0: 2020 7365 6c66 2e45 7874 7261 6374 526f    self.ExtractRo
-00047bc0: 6f74 2872 6f6f 745f 7061 7468 3d66 696c  ot(root_path=fil
-00047bd0: 6552 462c 6465 7374 3d64 6573 742c 7375  eRF,dest=dest,su
-00047be0: 625f 6469 723d 7375 625f 6469 7229 0a0a  b_dir=sub_dir)..
-00047bf0: 2020 2020 6465 6620 5361 7665 2873 656c      def Save(sel
-00047c00: 662c 6669 6c65 6e61 6d65 293a 0a20 2020  f,filename):.   
-00047c10: 2020 2020 2070 763d 6227 3327 0a20 2020       pv=b'3'.   
-00047c20: 2020 2020 2069 6620 5079 5665 7228 3229       if PyVer(2)
-00047c30: 3a20 7076 3d62 2732 270a 2020 2020 2020  : pv=b'2'.      
-00047c40: 2020 7365 6c66 2e52 7728 6669 6c65 6e61    self.Rw(filena
-00047c50: 6d65 2c64 6174 613d 7076 2b43 6f6d 7072  me,data=pv+Compr
-00047c60: 6573 7328 7069 636b 6c65 2e64 756d 7073  ess(pickle.dumps
-00047c70: 2873 656c 662e 696e 666f 2c70 726f 746f  (self.info,proto
-00047c80: 636f 6c3d 3229 2c6d 6f64 653d 2762 7a32  col=2),mode='bz2
-00047c90: 2729 290a 0a20 2020 2064 6566 204f 7065  '))..    def Ope
-00047ca0: 6e28 7365 6c66 2c66 696c 656e 616d 6529  n(self,filename)
-00047cb0: 3a0a 2020 2020 2020 2020 6966 206e 6f74  :.        if not
-00047cc0: 206f 732e 7061 7468 2e69 7366 696c 6528   os.path.isfile(
-00047cd0: 6669 6c65 6e61 6d65 293a 0a20 2020 2020  filename):.     
-00047ce0: 2020 2020 2020 2070 7269 6e74 2827 7b7d         print('{}
-00047cf0: 206e 6f74 2066 6f75 6e64 272e 666f 726d   not found'.form
-00047d00: 6174 2866 696c 656e 616d 6529 290a 2020  at(filename)).  
-00047d10: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00047d20: 2046 616c 7365 0a20 2020 2020 2020 2064   False.        d
-00047d30: 6174 613d 7365 6c66 2e52 7728 6669 6c65  ata=self.Rw(file
-00047d40: 6e61 6d65 290a 2020 2020 2020 2020 6966  name).        if
-00047d50: 2064 6174 615b 305d 3a0a 2020 2020 2020   data[0]:.      
-00047d60: 2020 2020 2020 7076 3d64 6174 615b 315d        pv=data[1]
-00047d70: 5b30 5d0a 2020 2020 2020 2020 2020 2020  [0].            
-00047d80: 6966 2070 7620 3d3d 2027 3327 2061 6e64  if pv == '3' and
-00047d90: 2050 7956 6572 2832 293a 0a20 2020 2020   PyVer(2):.     
-00047da0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00047db0: 2827 5468 6520 6461 7461 2076 6572 7369  ('The data versi
-00047dc0: 6f6e 2069 7320 6e6f 7420 6d61 7463 6865  on is not matche
-00047dd0: 642e 2050 6c65 6173 6520 7573 6520 5079  d. Please use Py
-00047de0: 7468 6f6e 3327 290a 2020 2020 2020 2020  thon3').        
-00047df0: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-00047e00: 616c 7365 0a20 2020 2020 2020 2020 2020  alse.           
-00047e10: 2023 2064 6563 6f6d 7072 6573 7320 6461   # decompress da
-00047e20: 7461 0a20 2020 2020 2020 2020 2020 2074  ta.            t
-00047e30: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
-00047e40: 2020 2020 6463 6461 7461 3d44 6563 6f6d      dcdata=Decom
-00047e50: 7072 6573 7328 6461 7461 5b31 5d5b 313a  press(data[1][1:
-00047e60: 5d2c 6d6f 6465 3d27 627a 3227 290a 2020  ],mode='bz2').  
-00047e70: 2020 2020 2020 2020 2020 6578 6365 7074            except
+00047180: 2020 2069 6620 7375 625f 6469 723a 2073     if sub_dir: s
+00047190: 656c 662e 4578 7472 6163 7452 6f6f 7428  elf.ExtractRoot(
+000471a0: 6469 7270 6174 683d 6f73 2e70 6174 682e  dirpath=os.path.
+000471b0: 6a6f 696e 2864 6972 7061 7468 2c69 6929  join(dirpath,ii)
+000471c0: 2c72 6f6f 745f 7061 7468 3d72 702c 6465  ,root_path=rp,de
+000471d0: 7374 3d6f 732e 7061 7468 2e6a 6f69 6e28  st=os.path.join(
+000471e0: 6e65 775f 6465 7374 2c69 6929 2c73 7562  new_dest,ii),sub
+000471f0: 5f64 6972 3d73 7562 5f64 6972 290a 2020  _dir=sub_dir).  
+00047200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047210: 2020 2020 2020 2369 6620 646d 7469 6d65        #if dmtime
+00047220: 2061 6e64 2064 6174 696d 653a 206f 732e   and datime: os.
+00047230: 7574 696d 6528 6d79 6469 722c 2864 6174  utime(mydir,(dat
+00047240: 696d 652c 646d 7469 6d65 2929 2023 2054  ime,dmtime)) # T
+00047250: 696d 6520 7570 6461 7465 206d 7573 7420  ime update must 
+00047260: 6265 2061 7420 6c61 7374 206f 7264 6572  be at last order
+00047270: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00047280: 2020 2020 2065 6c69 6620 6674 7970 6520       elif ftype 
+00047290: 3d3d 2027 6c69 6e6b 273a 0a20 2020 2020  == 'link':.     
+000472a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000472b0: 2020 2069 696d 6d3d 6f73 2e70 6174 682e     iimm=os.path.
+000472c0: 6a6f 696e 286e 6577 5f64 6573 742c 6969  join(new_dest,ii
+000472d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000472e0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+000472f0: 206f 732e 7061 7468 2e65 7869 7374 7328   os.path.exists(
+00047300: 6969 6d6d 293a 0a20 2020 2020 2020 2020  iimm):.         
+00047310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047320: 2020 206f 732e 7379 6d6c 696e 6b28 6669     os.symlink(fi
+00047330: 6e66 6f5b 2764 6573 7427 5d2c 6969 6d6d  nfo['dest'],iimm
+00047340: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00047350: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00047360: 6c66 2e53 6574 4964 656e 7469 7479 2869  lf.SetIdentity(i
+00047370: 696d 6d2c 2a2a 6669 6e66 6f29 0a20 2020  imm,**finfo).   
+00047380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047390: 2065 6c73 653a 2023 2046 696c 650a 2020   else: # File.  
+000473a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000473b0: 2020 2020 2020 6966 2027 6461 7461 2720        if 'data' 
+000473c0: 696e 2072 745b 6969 5d3a 2073 656c 662e  in rt[ii]: self.
+000473d0: 5277 286f 732e 7061 7468 2e6a 6f69 6e28  Rw(os.path.join(
+000473e0: 6e65 775f 6465 7374 2c69 6929 2c64 6174  new_dest,ii),dat
+000473f0: 613d 7274 5b69 695d 5b27 6461 7461 275d  a=rt[ii]['data']
+00047400: 2c66 696e 666f 3d66 696e 666f 290a 2020  ,finfo=finfo).  
+00047410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047420: 2020 2020 2020 656c 7365 3a20 7072 696e        else: prin
+00047430: 7428 277b 7d20 6669 6c65 2068 6176 6520  t('{} file have 
+00047440: 6e6f 2064 6174 6127 2e66 6f72 6d61 7428  no data'.format(
+00047450: 6969 2929 0a0a 2020 2020 6465 6620 4d6b  ii))..    def Mk
+00047460: 6469 7228 7365 6c66 2c70 6174 682c 666f  dir(self,path,fo
+00047470: 7263 653d 4661 6c73 652c 696e 666f 3d7b  rce=False,info={
+00047480: 7d29 3a0a 2020 2020 2020 2020 6966 206e  }):.        if n
+00047490: 6f74 2069 7369 6e73 7461 6e63 6528 7061  ot isinstance(pa
+000474a0: 7468 2c73 7472 293a 2072 6574 7572 6e20  th,str): return 
+000474b0: 4e6f 6e65 0a20 2020 2020 2020 2069 6620  None.        if 
+000474c0: 6f73 2e70 6174 682e 6578 6973 7473 2870  os.path.exists(p
+000474d0: 6174 6829 3a20 7265 7475 726e 204e 6f6e  ath): return Non
+000474e0: 650a 2020 2020 2020 2020 6966 2066 6f72  e.        if for
+000474f0: 6365 3a0a 2020 2020 2020 2020 2020 2020  ce:.            
+00047500: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+00047510: 2020 2020 206f 732e 6d61 6b65 6469 7273       os.makedirs
+00047520: 2870 6174 6829 0a20 2020 2020 2020 2020  (path).         
+00047530: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00047540: 616e 6365 2869 6e66 6f2c 6469 6374 2920  ance(info,dict) 
+00047550: 616e 6420 696e 666f 3a20 7365 6c66 2e53  and info: self.S
+00047560: 6574 4964 656e 7469 7479 2870 6174 682c  etIdentity(path,
+00047570: 2a2a 696e 666f 290a 2020 2020 2020 2020  **info).        
+00047580: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
+00047590: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+000475a0: 726e 2046 616c 7365 0a20 2020 2020 2020  rn False.       
+000475b0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+000475c0: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+000475d0: 2020 2020 2020 2020 6f73 2e6d 6b64 6972          os.mkdir
+000475e0: 2870 6174 6829 0a20 2020 2020 2020 2020  (path).         
+000475f0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00047600: 616e 6365 2869 6e66 6f2c 6469 6374 2920  ance(info,dict) 
+00047610: 616e 6420 696e 666f 3a20 7365 6c66 2e53  and info: self.S
+00047620: 6574 4964 656e 7469 7479 2870 6174 682c  etIdentity(path,
+00047630: 2a2a 696e 666f 290a 2020 2020 2020 2020  **info).        
+00047640: 2020 2020 6578 6365 7074 3a0a 2020 2020      except:.    
+00047650: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00047660: 726e 2046 616c 7365 0a20 2020 2020 2020  rn False.       
+00047670: 2072 6574 7572 6e20 5472 7565 0a0a 2020   return True..  
+00047680: 2020 6465 6620 5365 7449 6465 6e74 6974    def SetIdentit
+00047690: 7928 7365 6c66 2c70 6174 682c 2a2a 6f70  y(self,path,**op
+000476a0: 7473 293a 0a20 2020 2020 2020 2069 6620  ts):.        if 
+000476b0: 6f73 2e70 6174 682e 6578 6973 7473 2870  os.path.exists(p
+000476c0: 6174 6829 3a0a 2020 2020 2020 2020 2020  ath):.          
+000476d0: 2020 6368 6d6f 643d 7365 6c66 2e4d 6f64    chmod=self.Mod
+000476e0: 6528 6f70 7473 2e67 6574 2827 6d6f 6465  e(opts.get('mode
+000476f0: 272c 4e6f 6e65 2929 0a20 2020 2020 2020  ',None)).       
+00047700: 2020 2020 2075 6964 3d6f 7074 732e 6765       uid=opts.ge
+00047710: 7428 2775 6964 272c 4e6f 6e65 290a 2020  t('uid',None).  
+00047720: 2020 2020 2020 2020 2020 6769 643d 6f70            gid=op
+00047730: 7473 2e67 6574 2827 6769 6427 2c4e 6f6e  ts.get('gid',Non
+00047740: 6529 0a20 2020 2020 2020 2020 2020 2061  e).            a
+00047750: 7469 6d65 3d6f 7074 732e 6765 7428 2761  time=opts.get('a
+00047760: 7469 6d65 272c 4e6f 6e65 290a 2020 2020  time',None).    
+00047770: 2020 2020 2020 2020 6d74 696d 653d 6f70          mtime=op
+00047780: 7473 2e67 6574 2827 6d74 696d 6527 2c4e  ts.get('mtime',N
+00047790: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
+000477a0: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
+000477b0: 2020 2020 2020 6966 2063 686d 6f64 3a20        if chmod: 
+000477c0: 6f73 2e63 686d 6f64 2870 6174 682c 696e  os.chmod(path,in
+000477d0: 7428 6368 6d6f 642c 6261 7365 3d38 2929  t(chmod,base=8))
+000477e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000477f0: 2069 6620 7569 6420 616e 6420 6769 643a   if uid and gid:
+00047800: 206f 732e 6368 6f77 6e28 7061 7468 2c75   os.chown(path,u
+00047810: 6964 2c67 6964 290a 2020 2020 2020 2020  id,gid).        
+00047820: 2020 2020 2020 2020 6966 206d 7469 6d65          if mtime
+00047830: 2061 6e64 2061 7469 6d65 3a20 6f73 2e75   and atime: os.u
+00047840: 7469 6d65 2870 6174 682c 2861 7469 6d65  time(path,(atime
+00047850: 2c6d 7469 6d65 2929 2023 2054 696d 6520  ,mtime)) # Time 
+00047860: 7570 6461 7465 206d 7573 7420 6265 2061  update must be a
+00047870: 7420 6c61 7374 206f 7264 6572 0a20 2020  t last order.   
+00047880: 2020 2020 2020 2020 2065 7863 6570 743a           except:
+00047890: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000478a0: 2070 6173 730a 0a20 2020 2064 6566 2045   pass..    def E
+000478b0: 7874 7261 6374 2873 656c 662c 2a70 6174  xtract(self,*pat
+000478c0: 682c 2a2a 6f70 7473 293a 0a20 2020 2020  h,**opts):.     
+000478d0: 2020 2064 6573 743d 6f70 7473 2e67 6574     dest=opts.get
+000478e0: 2827 6465 7374 272c 4e6f 6e65 290a 2020  ('dest',None).  
+000478f0: 2020 2020 2020 726f 6f74 5f70 6174 683d        root_path=
+00047900: 6f70 7473 2e67 6574 2827 726f 6f74 5f70  opts.get('root_p
+00047910: 6174 6827 2c4e 6f6e 6529 0a20 2020 2020  ath',None).     
+00047920: 2020 2073 7562 5f64 6972 3d6f 7074 732e     sub_dir=opts.
+00047930: 6765 7428 2773 7562 5f64 6972 272c 4661  get('sub_dir',Fa
+00047940: 6c73 6529 0a20 2020 2020 2020 2069 6620  lse).        if 
+00047950: 4973 4e6f 6e65 2864 6573 7429 3a20 7265  IsNone(dest): re
+00047960: 7475 726e 2046 616c 7365 0a20 2020 2020  turn False.     
+00047970: 2020 2069 6620 6e6f 7420 7061 7468 3a0a     if not path:.
+00047980: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00047990: 2e45 7874 7261 6374 526f 6f74 2872 6f6f  .ExtractRoot(roo
+000479a0: 745f 7061 7468 3d73 656c 662e 4669 6e64  t_path=self.Find
+000479b0: 5250 2829 2c64 6573 743d 6465 7374 2c73  RP(),dest=dest,s
+000479c0: 7562 5f64 6972 3d73 7562 5f64 6972 290a  ub_dir=sub_dir).
+000479d0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+000479e0: 2020 2020 2020 2020 2020 666f 7220 6669            for fi
+000479f0: 6c65 7061 7468 2069 6e20 7061 7468 3a0a  lepath in path:.
+00047a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047a10: 6669 6c65 5246 3d73 656c 662e 4669 6e64  fileRF=self.Find
+00047a20: 5250 2866 696c 6570 6174 6829 0a20 2020  RP(filepath).   
+00047a30: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00047a40: 6973 696e 7374 616e 6365 2866 696c 6552  isinstance(fileR
+00047a50: 462c 7475 706c 6529 3a0a 2020 2020 2020  F,tuple):.      
+00047a60: 2020 2020 2020 2020 2020 2020 2020 726f                ro
+00047a70: 6f74 5f70 6174 683d 5b66 696c 6552 465b  ot_path=[fileRF[
+00047a80: 305d 5d0a 2020 2020 2020 2020 2020 2020  0]].            
+00047a90: 2020 2020 2020 2020 6669 6c65 6e61 6d65          filename
+00047aa0: 3d66 696c 6552 465b 315d 0a20 2020 2020  =fileRF[1].     
+00047ab0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00047ac0: 656c 662e 4578 7472 6163 7452 6f6f 7428  elf.ExtractRoot(
+00047ad0: 726f 6f74 5f70 6174 683d 726f 6f74 5f70  root_path=root_p
+00047ae0: 6174 682c 6469 7270 6174 683d 6669 6c65  ath,dirpath=file
+00047af0: 6e61 6d65 2c64 6573 743d 6465 7374 2c73  name,dest=dest,s
+00047b00: 7562 5f64 6972 3d73 7562 5f64 6972 290a  ub_dir=sub_dir).
+00047b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047b20: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
+00047b30: 6669 6c65 5246 2c6c 6973 7429 3a0a 2020  fileRF,list):.  
+00047b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00047b50: 2020 7365 6c66 2e45 7874 7261 6374 526f    self.ExtractRo
+00047b60: 6f74 2872 6f6f 745f 7061 7468 3d66 696c  ot(root_path=fil
+00047b70: 6552 462c 6465 7374 3d64 6573 742c 7375  eRF,dest=dest,su
+00047b80: 625f 6469 723d 7375 625f 6469 7229 0a0a  b_dir=sub_dir)..
+00047b90: 2020 2020 6465 6620 5361 7665 2873 656c      def Save(sel
+00047ba0: 662c 6669 6c65 6e61 6d65 293a 0a20 2020  f,filename):.   
+00047bb0: 2020 2020 2070 763d 6227 3327 0a20 2020       pv=b'3'.   
+00047bc0: 2020 2020 2069 6620 5079 5665 7228 3229       if PyVer(2)
+00047bd0: 3a20 7076 3d62 2732 270a 2020 2020 2020  : pv=b'2'.      
+00047be0: 2020 7365 6c66 2e52 7728 6669 6c65 6e61    self.Rw(filena
+00047bf0: 6d65 2c64 6174 613d 7076 2b43 6f6d 7072  me,data=pv+Compr
+00047c00: 6573 7328 7069 636b 6c65 2e64 756d 7073  ess(pickle.dumps
+00047c10: 2873 656c 662e 696e 666f 2c70 726f 746f  (self.info,proto
+00047c20: 636f 6c3d 3229 2c6d 6f64 653d 2762 7a32  col=2),mode='bz2
+00047c30: 2729 290a 0a20 2020 2064 6566 204f 7065  '))..    def Ope
+00047c40: 6e28 7365 6c66 2c66 696c 656e 616d 6529  n(self,filename)
+00047c50: 3a0a 2020 2020 2020 2020 6966 206e 6f74  :.        if not
+00047c60: 206f 732e 7061 7468 2e69 7366 696c 6528   os.path.isfile(
+00047c70: 6669 6c65 6e61 6d65 293a 0a20 2020 2020  filename):.     
+00047c80: 2020 2020 2020 2070 7269 6e74 2827 7b7d         print('{}
+00047c90: 206e 6f74 2066 6f75 6e64 272e 666f 726d   not found'.form
+00047ca0: 6174 2866 696c 656e 616d 6529 290a 2020  at(filename)).  
+00047cb0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00047cc0: 2046 616c 7365 0a20 2020 2020 2020 2064   False.        d
+00047cd0: 6174 613d 7365 6c66 2e52 7728 6669 6c65  ata=self.Rw(file
+00047ce0: 6e61 6d65 290a 2020 2020 2020 2020 6966  name).        if
+00047cf0: 2064 6174 615b 305d 3a0a 2020 2020 2020   data[0]:.      
+00047d00: 2020 2020 2020 7076 3d64 6174 615b 315d        pv=data[1]
+00047d10: 5b30 5d0a 2020 2020 2020 2020 2020 2020  [0].            
+00047d20: 6966 2070 7620 3d3d 2027 3327 2061 6e64  if pv == '3' and
+00047d30: 2050 7956 6572 2832 293a 0a20 2020 2020   PyVer(2):.     
+00047d40: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00047d50: 2827 5468 6520 6461 7461 2076 6572 7369  ('The data versi
+00047d60: 6f6e 2069 7320 6e6f 7420 6d61 7463 6865  on is not matche
+00047d70: 642e 2050 6c65 6173 6520 7573 6520 5079  d. Please use Py
+00047d80: 7468 6f6e 3327 290a 2020 2020 2020 2020  thon3').        
+00047d90: 2020 2020 2020 2020 7265 7475 726e 2046          return F
+00047da0: 616c 7365 0a20 2020 2020 2020 2020 2020  alse.           
+00047db0: 2023 2064 6563 6f6d 7072 6573 7320 6461   # decompress da
+00047dc0: 7461 0a20 2020 2020 2020 2020 2020 2074  ta.            t
+00047dd0: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+00047de0: 2020 2020 6463 6461 7461 3d44 6563 6f6d      dcdata=Decom
+00047df0: 7072 6573 7328 6461 7461 5b31 5d5b 313a  press(data[1][1:
+00047e00: 5d2c 6d6f 6465 3d27 627a 3227 290a 2020  ],mode='bz2').  
+00047e10: 2020 2020 2020 2020 2020 6578 6365 7074            except
+00047e20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00047e30: 2020 7072 696e 7428 2754 6869 7320 6973    print('This is
+00047e40: 206e 6f74 204b 4649 4c45 2066 6f72 6d61   not KFILE forma
+00047e50: 7427 290a 2020 2020 2020 2020 2020 2020  t').            
+00047e60: 2020 2020 7265 7475 726e 2046 616c 7365      return False
+00047e70: 0a20 2020 2020 2020 2020 2020 2074 7279  .            try
 00047e80: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00047e90: 2020 7072 696e 7428 2754 6869 7320 6973    print('This is
-00047ea0: 206e 6f74 204b 4649 4c45 2066 6f72 6d61   not KFILE forma
-00047eb0: 7427 290a 2020 2020 2020 2020 2020 2020  t').            
-00047ec0: 2020 2020 7265 7475 726e 2046 616c 7365      return False
-00047ed0: 0a20 2020 2020 2020 2020 2020 2074 7279  .            try
-00047ee0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00047ef0: 2020 7365 6c66 2e69 6e66 6f3d 7069 636b    self.info=pick
-00047f00: 6c65 2e6c 6f61 6473 2864 6364 6174 6129  le.loads(dcdata)
-00047f10: 2023 204c 6f61 6420 6461 7461 0a20 2020   # Load data.   
-00047f20: 2020 2020 2020 2020 2065 7863 6570 743a           except:
-00047f30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00047f40: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-00047f50: 2020 2020 2020 2020 2020 7365 6c66 2e69            self.i
-00047f60: 6e66 6f3d 7069 636b 6c65 2e6c 6f61 6473  nfo=pickle.loads
-00047f70: 2864 6364 6174 612c 656e 636f 6469 6e67  (dcdata,encoding
-00047f80: 3d27 6c61 7469 6e31 2729 2023 2043 6f6e  ='latin1') # Con
-00047f90: 7665 7274 2032 2074 6f20 3320 666f 726d  vert 2 to 3 form
-00047fa0: 6174 0a20 2020 2020 2020 2020 2020 2020  at.             
-00047fb0: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
-00047fc0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00047fd0: 7269 6e74 2827 5468 6973 2069 7320 6e6f  rint('This is no
-00047fe0: 7420 4b46 494c 4520 666f 726d 6174 2729  t KFILE format')
-00047ff0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00048000: 2020 2020 2072 6574 7572 6e20 4661 6c73       return Fals
-00048010: 650a 2020 2020 2020 2020 656c 7365 3a0a  e.        else:.
-00048020: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00048030: 7428 2743 616e 206e 6f74 2072 6561 6420  t('Can not read 
-00048040: 7b7d 272e 666f 726d 6174 2866 696c 656e  {}'.format(filen
-00048050: 616d 6529 290a 2020 2020 2020 2020 2020  ame)).          
-00048060: 2020 7265 7475 726e 2046 616c 7365 0a0a    return False..
-00048070: 636c 6173 7320 5452 593a 0a20 2020 2064  class TRY:.    d
-00048080: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
-00048090: 2c61 7574 6f3d 4e6f 6e65 2c6c 6f67 6669  ,auto=None,logfi
-000480a0: 6c65 3d4e 6f6e 652c 6c6f 675f 616c 6c3d  le=None,log_all=
-000480b0: 4661 6c73 652c 6572 725f 7363 7265 656e  False,err_screen
-000480c0: 3d46 616c 7365 2c65 7272 5f65 7869 743d  =False,err_exit=
-000480d0: 4661 6c73 652c 6465 6661 756c 743d 4e6f  False,default=No
-000480e0: 6e65 2c6c 6f67 3d4e 6f6e 6529 3a0a 2020  ne,log=None):.  
-000480f0: 2020 2020 2020 7365 6c66 2e61 7574 6f3d        self.auto=
-00048100: 6175 746f 2023 5472 7565 3a20 416c 6c20  auto #True: All 
-00048110: 6175 746f 2c20 4e6f 6e65 3a20 6465 6661  auto, None: defa
-00048120: 756c 7473 2061 7574 6f2c 2046 616c 7365  ults auto, False
-00048130: 3a20 6e6f 7420 7573 650a 2020 2020 2020  : not use.      
-00048140: 2020 7365 6c66 2e6c 6f67 6669 6c65 3d6c    self.logfile=l
-00048150: 6f67 6669 6c65 0a20 2020 2020 2020 2073  ogfile.        s
-00048160: 656c 662e 6c6f 675f 616c 6c3d 6c6f 675f  elf.log_all=log_
-00048170: 616c 6c0a 2020 2020 2020 2020 7365 6c66  all.        self
-00048180: 2e6c 6f67 3d6c 6f67 0a20 2020 2020 2020  .log=log.       
-00048190: 2073 656c 662e 6572 725f 6578 6974 3d65   self.err_exit=e
-000481a0: 7272 5f65 7869 740a 2020 2020 2020 2020  rr_exit.        
-000481b0: 7365 6c66 2e65 7272 5f73 6372 6565 6e3d  self.err_screen=
-000481c0: 5472 7565 2069 6620 6572 725f 6578 6974  True if err_exit
-000481d0: 2065 6c73 6520 6572 725f 7363 7265 656e   else err_screen
-000481e0: 0a20 2020 2020 2020 200a 2020 2020 2020  .        .      
-000481f0: 2020 7365 6c66 2e72 633d 4e6f 6e65 2023    self.rc=None #
-00048200: 4e6f 6e65 3a20 6e6f 7420 7275 6e2c 2046  None: not run, F
-00048210: 616c 7365 3a20 736f 6d65 7468 696e 6720  alse: something 
-00048220: 6572 726f 722c 2054 7275 653a 2072 756e  error, True: run
-00048230: 2066 756e 6374 696f 6e0a 2020 2020 2020   function.      
-00048240: 2020 7365 6c66 2e72 6573 756c 743d 6465    self.result=de
-00048250: 6661 756c 740a 2020 2020 2020 2020 7365  fault.        se
-00048260: 6c66 2e65 7272 6f72 3d4e 6f6e 650a 0a20  lf.error=None.. 
-00048270: 2020 2064 6566 205f 5f72 6570 725f 5f28     def __repr__(
-00048280: 7365 6c66 293a 0a20 2020 2020 2020 2069  self):.        i
-00048290: 6620 7365 6c66 2e72 6573 756c 743a 0a20  f self.result:. 
-000482a0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000482b0: 6e20 5374 7228 7365 6c66 2e72 6573 756c  n Str(self.resul
-000482c0: 7429 0a20 2020 2020 2020 2072 6574 7572  t).        retur
-000482d0: 6e20 2727 0a0a 2020 2020 6465 6620 7275  n ''..    def ru
-000482e0: 6e28 7365 6c66 2c66 756e 632c 2a69 6e70  n(self,func,*inp
-000482f0: 732c 2a2a 6f70 7473 293a 0a20 2020 2020  s,**opts):.     
-00048300: 2020 2023 6966 2054 7970 6528 6675 6e63     #if Type(func
-00048310: 2c27 6675 6e63 7469 6f6e 2729 3a0a 2020  ,'function'):.  
-00048320: 2020 2020 2020 6966 2049 7346 756e 6374        if IsFunct
-00048330: 696f 6e28 6675 6e63 2c62 7569 6c74 696e  ion(func,builtin
-00048340: 3d54 7275 6529 3a0a 2020 2020 2020 2020  =True):.        
-00048350: 2020 2020 6172 673d 4172 6773 2866 756e      arg=Args(fun
-00048360: 6329 0a20 2020 2020 2020 2020 2020 2069  c).            i
-00048370: 6620 7365 6c66 2e6c 6f67 5f61 6c6c 3a0a  f self.log_all:.
-00048380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048390: 7072 696e 7466 2827 5472 7920 4675 6e63  printf('Try Func
-000483a0: 7469 6f6e 3a20 7b7d 7b7d 5c6e 5265 6369  tion: {}{}\nReci
-000483b0: 7665 643a 207b 7d2c 207b 7d27 2e66 6f72  ved: {}, {}'.for
-000483c0: 6d61 7428 6675 6e63 2e5f 5f6e 616d 655f  mat(func.__name_
-000483d0: 5f2c 4675 6e63 7469 6f6e 4172 6773 2866  _,FunctionArgs(f
-000483e0: 756e 632c 6d6f 6465 3d27 7374 7269 6e67  unc,mode='string
-000483f0: 2729 2c69 6e70 732c 6f70 7473 292c 6461  '),inps,opts),da
-00048400: 7465 3d54 7275 652c 6361 6c6c 6572 5f74  te=True,caller_t
-00048410: 7265 653d 5472 7565 2c63 616c 6c65 725f  ree=True,caller_
-00048420: 7061 7265 6e74 3d27 312d 3527 2c63 616c  parent='1-5',cal
-00048430: 6c65 725f 6669 6c65 6e61 6d65 3d54 7275  ler_filename=Tru
-00048440: 652c 6361 6c6c 6572 5f6c 696e 655f 6e75  e,caller_line_nu
-00048450: 6d62 6572 3d54 7275 652c 6c6f 6766 696c  mber=True,logfil
-00048460: 653d 7365 6c66 2e6c 6f67 6669 6c65 2c6c  e=self.logfile,l
-00048470: 6f67 3d73 656c 662e 6c6f 672c 6473 703d  og=self.log,dsp=
-00048480: 2766 2720 6966 2073 656c 662e 6c6f 6766  'f' if self.logf
-00048490: 696c 6520 656c 7365 2027 6127 290a 0a20  ile else 'a').. 
-000484a0: 2020 2020 2020 2020 2020 206e 696e 7073             ninps
-000484b0: 3d5b 5d0a 2020 2020 2020 2020 2020 2020  =[].            
-000484c0: 6e6f 7074 733d 7b7d 0a20 2020 2020 2020  nopts={}.       
-000484d0: 2020 2020 2069 6620 7365 6c66 2e61 7574       if self.aut
-000484e0: 6f20 6973 206e 6f74 2046 616c 7365 3a0a  o is not False:.
-000484f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048500: 6e69 6e70 735f 6e3d 300a 2020 2020 2020  ninps_n=0.      
-00048510: 2020 2020 2020 2020 2020 6e69 6e70 735f            ninps_
-00048520: 6f3d 300a 2020 2020 2020 2020 2020 2020  o=0.            
-00048530: 2020 2020 6f70 7473 5f69 3d6c 6973 7428      opts_i=list(
-00048540: 6f70 7473 2e69 7465 6d73 2829 290a 2020  opts.items()).  
-00048550: 2020 2020 2020 2020 2020 2020 2020 7768                wh
-00048560: 696c 6520 6c65 6e28 6172 672e 6765 7428  ile len(arg.get(
-00048570: 2761 7267 7327 2c5b 5d29 2920 3e20 6e69  'args',[])) > ni
-00048580: 6e70 735f 6e3a 0a20 2020 2020 2020 2020  nps_n:.         
-00048590: 2020 2020 2020 2020 2020 2069 6620 6e69             if ni
-000485a0: 6e70 735f 6e20 3c20 6c65 6e28 696e 7073  nps_n < len(inps
-000485b0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-000485c0: 2020 2020 2020 2020 2020 206e 696e 7073             ninps
-000485d0: 2e61 7070 656e 6428 696e 7073 5b6e 696e  .append(inps[nin
-000485e0: 7073 5f6e 5d29 0a20 2020 2020 2020 2020  ps_n]).         
-000485f0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00048600: 7365 6c66 2e61 7574 6f20 6973 2054 7275  self.auto is Tru
-00048610: 6520 616e 6420 6e69 6e70 735f 6e20 3c20  e and ninps_n < 
-00048620: 6c65 6e28 696e 7073 292b 6c65 6e28 6f70  len(inps)+len(op
-00048630: 7473 293a 0a20 2020 2020 2020 2020 2020  ts):.           
-00048640: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00048650: 6f70 7473 5f69 5b6e 696e 7073 5f6f 5d5b  opts_i[ninps_o][
-00048660: 305d 206e 6f74 2069 6e20 6172 672e 6765  0] not in arg.ge
-00048670: 7428 2764 6566 6175 6c74 7327 2c7b 7d29  t('defaults',{})
-00048680: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00048690: 2020 2020 2020 2020 2020 2020 2020 6e69                ni
-000486a0: 6e70 732e 6170 7065 6e64 286f 7074 735f  nps.append(opts_
-000486b0: 695b 6e69 6e70 735f 6f5d 5b31 5d29 0a20  i[ninps_o][1]). 
+00047e90: 2020 7365 6c66 2e69 6e66 6f3d 7069 636b    self.info=pick
+00047ea0: 6c65 2e6c 6f61 6473 2864 6364 6174 6129  le.loads(dcdata)
+00047eb0: 2023 204c 6f61 6420 6461 7461 0a20 2020   # Load data.   
+00047ec0: 2020 2020 2020 2020 2065 7863 6570 743a           except:
+00047ed0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00047ee0: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
+00047ef0: 2020 2020 2020 2020 2020 7365 6c66 2e69            self.i
+00047f00: 6e66 6f3d 7069 636b 6c65 2e6c 6f61 6473  nfo=pickle.loads
+00047f10: 2864 6364 6174 612c 656e 636f 6469 6e67  (dcdata,encoding
+00047f20: 3d27 6c61 7469 6e31 2729 2023 2043 6f6e  ='latin1') # Con
+00047f30: 7665 7274 2032 2074 6f20 3320 666f 726d  vert 2 to 3 form
+00047f40: 6174 0a20 2020 2020 2020 2020 2020 2020  at.             
+00047f50: 2020 2065 7863 6570 743a 0a20 2020 2020     except:.     
+00047f60: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00047f70: 7269 6e74 2827 5468 6973 2069 7320 6e6f  rint('This is no
+00047f80: 7420 4b46 494c 4520 666f 726d 6174 2729  t KFILE format')
+00047f90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00047fa0: 2020 2020 2072 6574 7572 6e20 4661 6c73       return Fals
+00047fb0: 650a 2020 2020 2020 2020 656c 7365 3a0a  e.        else:.
+00047fc0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00047fd0: 7428 2743 616e 206e 6f74 2072 6561 6420  t('Can not read 
+00047fe0: 7b7d 272e 666f 726d 6174 2866 696c 656e  {}'.format(filen
+00047ff0: 616d 6529 290a 2020 2020 2020 2020 2020  ame)).          
+00048000: 2020 7265 7475 726e 2046 616c 7365 0a0a    return False..
+00048010: 636c 6173 7320 5452 593a 0a20 2020 2064  class TRY:.    d
+00048020: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
+00048030: 2c61 7574 6f3d 4e6f 6e65 2c6c 6f67 6669  ,auto=None,logfi
+00048040: 6c65 3d4e 6f6e 652c 6c6f 675f 616c 6c3d  le=None,log_all=
+00048050: 4661 6c73 652c 6572 725f 7363 7265 656e  False,err_screen
+00048060: 3d46 616c 7365 2c65 7272 5f65 7869 743d  =False,err_exit=
+00048070: 4661 6c73 652c 6465 6661 756c 743d 4e6f  False,default=No
+00048080: 6e65 2c6c 6f67 3d4e 6f6e 6529 3a0a 2020  ne,log=None):.  
+00048090: 2020 2020 2020 7365 6c66 2e61 7574 6f3d        self.auto=
+000480a0: 6175 746f 2023 5472 7565 3a20 416c 6c20  auto #True: All 
+000480b0: 6175 746f 2c20 4e6f 6e65 3a20 6465 6661  auto, None: defa
+000480c0: 756c 7473 2061 7574 6f2c 2046 616c 7365  ults auto, False
+000480d0: 3a20 6e6f 7420 7573 650a 2020 2020 2020  : not use.      
+000480e0: 2020 7365 6c66 2e6c 6f67 6669 6c65 3d6c    self.logfile=l
+000480f0: 6f67 6669 6c65 0a20 2020 2020 2020 2073  ogfile.        s
+00048100: 656c 662e 6c6f 675f 616c 6c3d 6c6f 675f  elf.log_all=log_
+00048110: 616c 6c0a 2020 2020 2020 2020 7365 6c66  all.        self
+00048120: 2e6c 6f67 3d6c 6f67 0a20 2020 2020 2020  .log=log.       
+00048130: 2073 656c 662e 6572 725f 6578 6974 3d65   self.err_exit=e
+00048140: 7272 5f65 7869 740a 2020 2020 2020 2020  rr_exit.        
+00048150: 7365 6c66 2e65 7272 5f73 6372 6565 6e3d  self.err_screen=
+00048160: 5472 7565 2069 6620 6572 725f 6578 6974  True if err_exit
+00048170: 2065 6c73 6520 6572 725f 7363 7265 656e   else err_screen
+00048180: 0a20 2020 2020 2020 200a 2020 2020 2020  .        .      
+00048190: 2020 7365 6c66 2e72 633d 4e6f 6e65 2023    self.rc=None #
+000481a0: 4e6f 6e65 3a20 6e6f 7420 7275 6e2c 2046  None: not run, F
+000481b0: 616c 7365 3a20 736f 6d65 7468 696e 6720  alse: something 
+000481c0: 6572 726f 722c 2054 7275 653a 2072 756e  error, True: run
+000481d0: 2066 756e 6374 696f 6e0a 2020 2020 2020   function.      
+000481e0: 2020 7365 6c66 2e72 6573 756c 743d 6465    self.result=de
+000481f0: 6661 756c 740a 2020 2020 2020 2020 7365  fault.        se
+00048200: 6c66 2e65 7272 6f72 3d4e 6f6e 650a 0a20  lf.error=None.. 
+00048210: 2020 2064 6566 205f 5f72 6570 725f 5f28     def __repr__(
+00048220: 7365 6c66 293a 0a20 2020 2020 2020 2069  self):.        i
+00048230: 6620 7365 6c66 2e72 6573 756c 743a 0a20  f self.result:. 
+00048240: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00048250: 6e20 5374 7228 7365 6c66 2e72 6573 756c  n Str(self.resul
+00048260: 7429 0a20 2020 2020 2020 2072 6574 7572  t).        retur
+00048270: 6e20 2727 0a0a 2020 2020 6465 6620 7275  n ''..    def ru
+00048280: 6e28 7365 6c66 2c66 756e 632c 2a69 6e70  n(self,func,*inp
+00048290: 732c 2a2a 6f70 7473 293a 0a20 2020 2020  s,**opts):.     
+000482a0: 2020 2023 6966 2054 7970 6528 6675 6e63     #if Type(func
+000482b0: 2c27 6675 6e63 7469 6f6e 2729 3a0a 2020  ,'function'):.  
+000482c0: 2020 2020 2020 6966 2049 7346 756e 6374        if IsFunct
+000482d0: 696f 6e28 6675 6e63 2c62 7569 6c74 696e  ion(func,builtin
+000482e0: 3d54 7275 6529 3a0a 2020 2020 2020 2020  =True):.        
+000482f0: 2020 2020 6172 673d 4172 6773 2866 756e      arg=Args(fun
+00048300: 6329 0a20 2020 2020 2020 2020 2020 2069  c).            i
+00048310: 6620 7365 6c66 2e6c 6f67 5f61 6c6c 3a0a  f self.log_all:.
+00048320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048330: 7072 696e 7466 2827 5472 7920 4675 6e63  printf('Try Func
+00048340: 7469 6f6e 3a20 7b7d 7b7d 5c6e 5265 6369  tion: {}{}\nReci
+00048350: 7665 643a 207b 7d2c 207b 7d27 2e66 6f72  ved: {}, {}'.for
+00048360: 6d61 7428 6675 6e63 2e5f 5f6e 616d 655f  mat(func.__name_
+00048370: 5f2c 4675 6e63 7469 6f6e 4172 6773 2866  _,FunctionArgs(f
+00048380: 756e 632c 6d6f 6465 3d27 7374 7269 6e67  unc,mode='string
+00048390: 2729 2c69 6e70 732c 6f70 7473 292c 6461  '),inps,opts),da
+000483a0: 7465 3d54 7275 652c 6361 6c6c 6572 5f74  te=True,caller_t
+000483b0: 7265 653d 5472 7565 2c63 616c 6c65 725f  ree=True,caller_
+000483c0: 7061 7265 6e74 3d27 312d 3527 2c63 616c  parent='1-5',cal
+000483d0: 6c65 725f 6669 6c65 6e61 6d65 3d54 7275  ler_filename=Tru
+000483e0: 652c 6361 6c6c 6572 5f6c 696e 655f 6e75  e,caller_line_nu
+000483f0: 6d62 6572 3d54 7275 652c 6c6f 6766 696c  mber=True,logfil
+00048400: 653d 7365 6c66 2e6c 6f67 6669 6c65 2c6c  e=self.logfile,l
+00048410: 6f67 3d73 656c 662e 6c6f 672c 6473 703d  og=self.log,dsp=
+00048420: 2766 2720 6966 2073 656c 662e 6c6f 6766  'f' if self.logf
+00048430: 696c 6520 656c 7365 2027 6127 290a 0a20  ile else 'a').. 
+00048440: 2020 2020 2020 2020 2020 206e 696e 7073             ninps
+00048450: 3d5b 5d0a 2020 2020 2020 2020 2020 2020  =[].            
+00048460: 6e6f 7074 733d 7b7d 0a20 2020 2020 2020  nopts={}.       
+00048470: 2020 2020 2069 6620 7365 6c66 2e61 7574       if self.aut
+00048480: 6f20 6973 206e 6f74 2046 616c 7365 3a0a  o is not False:.
+00048490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000484a0: 6e69 6e70 735f 6e3d 300a 2020 2020 2020  ninps_n=0.      
+000484b0: 2020 2020 2020 2020 2020 6e69 6e70 735f            ninps_
+000484c0: 6f3d 300a 2020 2020 2020 2020 2020 2020  o=0.            
+000484d0: 2020 2020 6f70 7473 5f69 3d6c 6973 7428      opts_i=list(
+000484e0: 6f70 7473 2e69 7465 6d73 2829 290a 2020  opts.items()).  
+000484f0: 2020 2020 2020 2020 2020 2020 2020 7768                wh
+00048500: 696c 6520 6c65 6e28 6172 672e 6765 7428  ile len(arg.get(
+00048510: 2761 7267 7327 2c5b 5d29 2920 3e20 6e69  'args',[])) > ni
+00048520: 6e70 735f 6e3a 0a20 2020 2020 2020 2020  nps_n:.         
+00048530: 2020 2020 2020 2020 2020 2069 6620 6e69             if ni
+00048540: 6e70 735f 6e20 3c20 6c65 6e28 696e 7073  nps_n < len(inps
+00048550: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00048560: 2020 2020 2020 2020 2020 206e 696e 7073             ninps
+00048570: 2e61 7070 656e 6428 696e 7073 5b6e 696e  .append(inps[nin
+00048580: 7073 5f6e 5d29 0a20 2020 2020 2020 2020  ps_n]).         
+00048590: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+000485a0: 7365 6c66 2e61 7574 6f20 6973 2054 7275  self.auto is Tru
+000485b0: 6520 616e 6420 6e69 6e70 735f 6e20 3c20  e and ninps_n < 
+000485c0: 6c65 6e28 696e 7073 292b 6c65 6e28 6f70  len(inps)+len(op
+000485d0: 7473 293a 0a20 2020 2020 2020 2020 2020  ts):.           
+000485e0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000485f0: 6f70 7473 5f69 5b6e 696e 7073 5f6f 5d5b  opts_i[ninps_o][
+00048600: 305d 206e 6f74 2069 6e20 6172 672e 6765  0] not in arg.ge
+00048610: 7428 2764 6566 6175 6c74 7327 2c7b 7d29  t('defaults',{})
+00048620: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00048630: 2020 2020 2020 2020 2020 2020 2020 6e69                ni
+00048640: 6e70 732e 6170 7065 6e64 286f 7074 735f  nps.append(opts_
+00048650: 695b 6e69 6e70 735f 6f5d 5b31 5d29 0a20  i[ninps_o][1]). 
+00048660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048670: 2020 2020 2020 2020 2020 206e 696e 7073             ninps
+00048680: 5f6f 2b3d 310a 2020 2020 2020 2020 2020  _o+=1.          
+00048690: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+000486a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000486b0: 2020 2020 2020 2020 6272 6561 6b0a 2020          break.  
 000486c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000486d0: 2020 2020 2020 2020 2020 206e 696e 7073             ninps
-000486e0: 5f6f 2b3d 310a 2020 2020 2020 2020 2020  _o+=1.          
-000486f0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00048700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048710: 2020 2020 2020 2020 6272 6561 6b0a 2020          break.  
-00048720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048730: 2020 6e69 6e70 735f 6e2b 3d31 0a20 2020    ninps_n+=1.   
-00048740: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00048750: 6172 672e 6765 7428 2776 6172 6172 6773  arg.get('varargs
-00048760: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
-00048770: 2020 2020 2020 2020 6e69 6e70 733d 6e69          ninps=ni
-00048780: 6e70 732b 696e 7073 5b6e 696e 7073 5f6e  nps+inps[ninps_n
-00048790: 3a5d 0a20 2020 2020 2020 2020 2020 2020  :].             
-000487a0: 2020 2020 2020 206e 696e 7073 5f6e 3d6c         ninps_n=l
-000487b0: 656e 2869 6e70 7329 0a20 2020 2020 2020  en(inps).       
-000487c0: 2020 2020 2020 2020 206e 6f5f 696e 7073           no_inps
-000487d0: 3d46 616c 7365 0a20 2020 2020 2020 2020  =False.         
-000487e0: 2020 2020 2020 2069 6620 6e69 6e70 735f         if ninps_
-000487f0: 6f20 3e20 3020 3a20 6f70 7473 3d64 6963  o > 0 : opts=dic
-00048800: 7428 6f70 7473 5f69 5b6e 696e 7073 5f6f  t(opts_i[ninps_o
-00048810: 3a5d 290a 2020 2020 2020 2020 2020 2020  :]).            
-00048820: 2020 2020 666f 7220 6b20 696e 2061 7267      for k in arg
-00048830: 2e67 6574 2827 6465 6661 756c 7473 272c  .get('defaults',
-00048840: 7b7d 293a 0a20 2020 2020 2020 2020 2020  {}):.           
-00048850: 2020 2020 2020 2020 2069 6620 6b20 696e           if k in
-00048860: 206f 7074 733a 0a20 2020 2020 2020 2020   opts:.         
-00048870: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-00048880: 6f70 7473 5b6b 5d3d 6f70 7473 2e70 6f70  opts[k]=opts.pop
-00048890: 286b 290a 2020 2020 2020 2020 2020 2020  (k).            
-000488a0: 2020 2020 2020 2020 2020 2020 6e6f 5f69              no_i
-000488b0: 6e70 733d 5472 7565 0a20 2020 2020 2020  nps=True.       
-000488c0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-000488d0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-000488e0: 2020 2020 2020 2020 2020 2023 2046 696c             # Fil
-000488f0: 6c20 696e 2074 6f20 696e 7073 2066 6f72  l in to inps for
-00048900: 2064 6566 6175 6c74 2077 6974 6820 6578   default with ex
-00048910: 7472 6120 7265 6d61 696e 6564 2069 6e70  tra remained inp
-00048920: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
-00048930: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-00048940: 206e 6f5f 696e 7073 2061 6e64 206e 696e   no_inps and nin
-00048950: 7073 5f6e 203c 206c 656e 2869 6e70 7329  ps_n < len(inps)
-00048960: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00048970: 2020 2020 2020 2020 2020 2020 2020 6e69                ni
-00048980: 6e70 732e 6170 7065 6e64 2869 6e70 735b  nps.append(inps[
-00048990: 6e69 6e70 735f 6e5d 290a 2020 2020 2020  ninps_n]).      
-000489a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000489b0: 2020 2020 2020 6e69 6e70 735f 6e2b 3d31        ninps_n+=1
-000489c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000489d0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-000489e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000489f0: 2020 2020 2020 2020 2020 206e 6f70 7473             nopts
-00048a00: 5b6b 5d3d 6172 672e 6765 7428 2764 6566  [k]=arg.get('def
-00048a10: 6175 6c74 7327 292e 6765 7428 6b29 0a20  aults').get(k). 
-00048a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048a30: 2020 2020 2020 2020 2020 206e 6f5f 696e             no_in
-00048a40: 7073 3d54 7275 650a 2020 2020 2020 2020  ps=True.        
-00048a50: 2020 2020 2020 2020 6966 2061 7267 2e67          if arg.g
-00048a60: 6574 2827 6b65 7977 6f72 6473 2729 2061  et('keywords') a
-00048a70: 6e64 206f 7074 733a 0a20 2020 2020 2020  nd opts:.       
-00048a80: 2020 2020 2020 2020 2020 2020 206e 6f70               nop
-00048a90: 7473 2e75 7064 6174 6528 6f70 7473 290a  ts.update(opts).
-00048aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048ab0: 6966 2073 656c 662e 6c6f 675f 616c 6c3a  if self.log_all:
-00048ac0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00048ad0: 2020 2020 2070 7269 6e74 6628 274e 6577       printf('New
-00048ae0: 2049 6e70 7574 733a 207b 7d20 7b7d 272e   Inputs: {} {}'.
-00048af0: 666f 726d 6174 286e 696e 7073 2c6e 6f70  format(ninps,nop
-00048b00: 7473 292c 6461 7465 3d54 7275 652c 6c6f  ts),date=True,lo
-00048b10: 6766 696c 653d 7365 6c66 2e6c 6f67 6669  gfile=self.logfi
-00048b20: 6c65 2c6c 6f67 3d73 656c 662e 6c6f 672c  le,log=self.log,
-00048b30: 6473 703d 2766 2720 6966 2073 656c 662e  dsp='f' if self.
-00048b40: 6c6f 6766 696c 6520 656c 7365 2027 6127  logfile else 'a'
-00048b50: 290a 2020 2020 2020 2020 2020 2020 7472  ).            tr
-00048b60: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
-00048b70: 2020 2073 656c 662e 7263 3d54 7275 650a     self.rc=True.
-00048b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048b90: 6966 2073 656c 662e 6175 746f 2069 7320  if self.auto is 
-00048ba0: 4661 6c73 653a 0a20 2020 2020 2020 2020  False:.         
-00048bb0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00048bc0: 7265 7375 6c74 3d66 756e 6328 2a69 6e70  result=func(*inp
-00048bd0: 732c 2a2a 6f70 7473 290a 2020 2020 2020  s,**opts).      
-00048be0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+000486d0: 2020 6e69 6e70 735f 6e2b 3d31 0a20 2020    ninps_n+=1.   
+000486e0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000486f0: 6172 672e 6765 7428 2776 6172 6172 6773  arg.get('varargs
+00048700: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
+00048710: 2020 2020 2020 2020 6e69 6e70 733d 6e69          ninps=ni
+00048720: 6e70 732b 696e 7073 5b6e 696e 7073 5f6e  nps+inps[ninps_n
+00048730: 3a5d 0a20 2020 2020 2020 2020 2020 2020  :].             
+00048740: 2020 2020 2020 206e 696e 7073 5f6e 3d6c         ninps_n=l
+00048750: 656e 2869 6e70 7329 0a20 2020 2020 2020  en(inps).       
+00048760: 2020 2020 2020 2020 206e 6f5f 696e 7073           no_inps
+00048770: 3d46 616c 7365 0a20 2020 2020 2020 2020  =False.         
+00048780: 2020 2020 2020 2069 6620 6e69 6e70 735f         if ninps_
+00048790: 6f20 3e20 3020 3a20 6f70 7473 3d64 6963  o > 0 : opts=dic
+000487a0: 7428 6f70 7473 5f69 5b6e 696e 7073 5f6f  t(opts_i[ninps_o
+000487b0: 3a5d 290a 2020 2020 2020 2020 2020 2020  :]).            
+000487c0: 2020 2020 666f 7220 6b20 696e 2061 7267      for k in arg
+000487d0: 2e67 6574 2827 6465 6661 756c 7473 272c  .get('defaults',
+000487e0: 7b7d 293a 0a20 2020 2020 2020 2020 2020  {}):.           
+000487f0: 2020 2020 2020 2020 2069 6620 6b20 696e           if k in
+00048800: 206f 7074 733a 0a20 2020 2020 2020 2020   opts:.         
+00048810: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+00048820: 6f70 7473 5b6b 5d3d 6f70 7473 2e70 6f70  opts[k]=opts.pop
+00048830: 286b 290a 2020 2020 2020 2020 2020 2020  (k).            
+00048840: 2020 2020 2020 2020 2020 2020 6e6f 5f69              no_i
+00048850: 6e70 733d 5472 7565 0a20 2020 2020 2020  nps=True.       
+00048860: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+00048870: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00048880: 2020 2020 2020 2020 2020 2023 2046 696c             # Fil
+00048890: 6c20 696e 2074 6f20 696e 7073 2066 6f72  l in to inps for
+000488a0: 2064 6566 6175 6c74 2077 6974 6820 6578   default with ex
+000488b0: 7472 6120 7265 6d61 696e 6564 2069 6e70  tra remained inp
+000488c0: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
+000488d0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+000488e0: 206e 6f5f 696e 7073 2061 6e64 206e 696e   no_inps and nin
+000488f0: 7073 5f6e 203c 206c 656e 2869 6e70 7329  ps_n < len(inps)
+00048900: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00048910: 2020 2020 2020 2020 2020 2020 2020 6e69                ni
+00048920: 6e70 732e 6170 7065 6e64 2869 6e70 735b  nps.append(inps[
+00048930: 6e69 6e70 735f 6e5d 290a 2020 2020 2020  ninps_n]).      
+00048940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048950: 2020 2020 2020 6e69 6e70 735f 6e2b 3d31        ninps_n+=1
+00048960: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00048970: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00048980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048990: 2020 2020 2020 2020 2020 206e 6f70 7473             nopts
+000489a0: 5b6b 5d3d 6172 672e 6765 7428 2764 6566  [k]=arg.get('def
+000489b0: 6175 6c74 7327 292e 6765 7428 6b29 0a20  aults').get(k). 
+000489c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000489d0: 2020 2020 2020 2020 2020 206e 6f5f 696e             no_in
+000489e0: 7073 3d54 7275 650a 2020 2020 2020 2020  ps=True.        
+000489f0: 2020 2020 2020 2020 6966 2061 7267 2e67          if arg.g
+00048a00: 6574 2827 6b65 7977 6f72 6473 2729 2061  et('keywords') a
+00048a10: 6e64 206f 7074 733a 0a20 2020 2020 2020  nd opts:.       
+00048a20: 2020 2020 2020 2020 2020 2020 206e 6f70               nop
+00048a30: 7473 2e75 7064 6174 6528 6f70 7473 290a  ts.update(opts).
+00048a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048a50: 6966 2073 656c 662e 6c6f 675f 616c 6c3a  if self.log_all:
+00048a60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00048a70: 2020 2020 2070 7269 6e74 6628 274e 6577       printf('New
+00048a80: 2049 6e70 7574 733a 207b 7d20 7b7d 272e   Inputs: {} {}'.
+00048a90: 666f 726d 6174 286e 696e 7073 2c6e 6f70  format(ninps,nop
+00048aa0: 7473 292c 6461 7465 3d54 7275 652c 6c6f  ts),date=True,lo
+00048ab0: 6766 696c 653d 7365 6c66 2e6c 6f67 6669  gfile=self.logfi
+00048ac0: 6c65 2c6c 6f67 3d73 656c 662e 6c6f 672c  le,log=self.log,
+00048ad0: 6473 703d 2766 2720 6966 2073 656c 662e  dsp='f' if self.
+00048ae0: 6c6f 6766 696c 6520 656c 7365 2027 6127  logfile else 'a'
+00048af0: 290a 2020 2020 2020 2020 2020 2020 7472  ).            tr
+00048b00: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
+00048b10: 2020 2073 656c 662e 7263 3d54 7275 650a     self.rc=True.
+00048b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048b30: 6966 2073 656c 662e 6175 746f 2069 7320  if self.auto is 
+00048b40: 4661 6c73 653a 0a20 2020 2020 2020 2020  False:.         
+00048b50: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00048b60: 7265 7375 6c74 3d66 756e 6328 2a69 6e70  result=func(*inp
+00048b70: 732c 2a2a 6f70 7473 290a 2020 2020 2020  s,**opts).      
+00048b80: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00048b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048ba0: 2020 2020 6966 206e 6f74 2061 7267 2061      if not arg a
+00048bb0: 6e64 2074 7970 6528 6675 6e63 292e 5f5f  nd type(func).__
+00048bc0: 6e61 6d65 5f5f 203d 3d20 2762 7569 6c74  name__ == 'built
+00048bd0: 696e 5f66 756e 6374 696f 6e5f 6f72 5f6d  in_function_or_m
+00048be0: 6574 686f 6427 3a0a 2020 2020 2020 2020  ethod':.        
 00048bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048c00: 2020 2020 6966 206e 6f74 2061 7267 2061      if not arg a
-00048c10: 6e64 2074 7970 6528 6675 6e63 292e 5f5f  nd type(func).__
-00048c20: 6e61 6d65 5f5f 203d 3d20 2762 7569 6c74  name__ == 'built
-00048c30: 696e 5f66 756e 6374 696f 6e5f 6f72 5f6d  in_function_or_m
-00048c40: 6574 686f 6427 3a0a 2020 2020 2020 2020  ethod':.        
-00048c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048c60: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
-00048c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048c80: 2073 656c 662e 7265 7375 6c74 3d66 756e   self.result=fun
-00048c90: 6328 2a69 6e70 732c 2a2a 6f70 7473 290a  c(*inps,**opts).
-00048ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048cb0: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
-00048cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048cd0: 2020 2020 2020 2020 2020 2020 653d 4578              e=Ex
-00048ce0: 6365 7074 4d65 7373 6167 6528 290a 2020  ceptMessage().  
-00048cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048d00: 2020 2020 2020 2020 2020 7365 6c66 2e65            self.e
-00048d10: 7272 6f72 3d65 2b27 2866 756e 6374 696f  rror=e+'(functio
-00048d20: 6e20 6e61 6d65 3a20 7b7d 2927 2e66 6f72  n name: {})'.for
-00048d30: 6d61 7428 6675 6e63 2e5f 5f6e 616d 655f  mat(func.__name_
-00048d40: 5f29 0a20 2020 2020 2020 2020 2020 2020  _).             
-00048d50: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00048d60: 656c 662e 7263 3d46 616c 7365 0a20 2020  elf.rc=False.   
-00048d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048d80: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00048d90: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00048da0: 656c 662e 7265 7375 6c74 3d66 756e 6328  elf.result=func(
-00048db0: 2a6e 696e 7073 2c2a 2a6e 6f70 7473 290a  *ninps,**nopts).
-00048dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048dd0: 6966 2073 656c 662e 6c6f 675f 616c 6c3a  if self.log_all:
-00048de0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00048df0: 2020 2020 2070 7269 6e74 6628 2752 433a       printf('RC:
-00048e00: 7b7d 5c6e 5265 7375 6c74 3a7b 7d27 2e66  {}\nResult:{}'.f
-00048e10: 6f72 6d61 7428 7365 6c66 2e72 632c 7365  ormat(self.rc,se
-00048e20: 6c66 2e72 6573 756c 7429 2c64 6174 653d  lf.result),date=
-00048e30: 5472 7565 2c6c 6f67 6669 6c65 3d73 656c  True,logfile=sel
-00048e40: 662e 6c6f 6766 696c 652c 6c6f 673d 7365  f.logfile,log=se
-00048e50: 6c66 2e6c 6f67 2c64 7370 3d27 6627 2069  lf.log,dsp='f' i
-00048e60: 6620 7365 6c66 2e6c 6f67 6669 6c65 2065  f self.logfile e
-00048e70: 6c73 6520 2761 2729 0a20 2020 2020 2020  lse 'a').       
-00048e80: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00048e90: 7365 6c66 0a20 2020 2020 2020 2020 2020  self.           
-00048ea0: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
-00048eb0: 2020 2020 2020 2020 2065 3d45 7863 6570           e=Excep
-00048ec0: 744d 6573 7361 6765 2829 0a20 2020 2020  tMessage().     
-00048ed0: 2020 2020 2020 2020 2020 2069 6620 7365             if se
-00048ee0: 6c66 2e6c 6f67 6669 6c65 206f 7220 7365  lf.logfile or se
-00048ef0: 6c66 2e6c 6f67 3a0a 2020 2020 2020 2020  lf.log:.        
-00048f00: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00048f10: 7466 2865 2c64 6174 653d 5472 7565 2c63  tf(e,date=True,c
-00048f20: 616c 6c65 725f 7472 6565 3d54 7275 652c  aller_tree=True,
-00048f30: 6361 6c6c 6572 5f70 6172 656e 743d 2731  caller_parent='1
-00048f40: 2d35 272c 6361 6c6c 6572 5f66 696c 656e  -5',caller_filen
-00048f50: 616d 653d 5472 7565 2c63 616c 6c65 725f  ame=True,caller_
-00048f60: 6c69 6e65 5f6e 756d 6265 723d 5472 7565  line_number=True
-00048f70: 2c6c 6f67 6669 6c65 3d73 656c 662e 6c6f  ,logfile=self.lo
-00048f80: 6766 696c 652c 6c6f 673d 7365 6c66 2e6c  gfile,log=self.l
-00048f90: 6f67 2c64 7370 3d27 6627 290a 2020 2020  og,dsp='f').    
-00048fa0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00048fb0: 656c 662e 6572 725f 7363 7265 656e 3a0a  elf.err_screen:.
-00048fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00048fd0: 2020 2020 7072 696e 7466 2865 2c6d 6f64      printf(e,mod
-00048fe0: 653d 2765 2729 0a20 2020 2020 2020 2020  e='e').         
-00048ff0: 2020 2020 2020 2069 6620 7365 6c66 2e65         if self.e
-00049000: 7272 5f65 7869 743a 0a20 2020 2020 2020  rr_exit:.       
-00049010: 2020 2020 2020 2020 2020 2020 206f 732e               os.
-00049020: 5f65 7869 7428 3129 0a20 2020 2020 2020  _exit(1).       
-00049030: 2020 2020 2020 2020 2073 656c 662e 7263           self.rc
-00049040: 3d46 616c 7365 0a20 2020 2020 2020 2020  =False.         
-00049050: 2020 2020 2020 2073 656c 662e 6572 726f         self.erro
-00049060: 723d 650a 2020 2020 2020 2020 2020 2020  r=e.            
-00049070: 2020 2020 7265 7475 726e 2073 656c 660a      return self.
-00049080: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
-00049090: 6e73 7461 6e63 6528 6675 6e63 2c73 7472  nstance(func,str
-000490a0: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
-000490b0: 656c 662e 7263 2c73 656c 662e 7265 7375  elf.rc,self.resu
-000490c0: 6c74 2c73 656c 662e 6572 726f 723d 5472  lt,self.error=Tr
-000490d0: 7943 6f64 6528 6675 6e63 2c64 6566 6175  yCode(func,defau
-000490e0: 6c74 3d46 616c 7365 2c5f 7265 7475 726e  lt=False,_return
-000490f0: 5f3d 5472 7565 290a 2020 2020 2020 2020  _=True).        
-00049100: 2020 2020 7265 7475 726e 2073 656c 660a      return self.
-00049110: 2020 2020 2020 2020 7365 6c66 2e72 633d          self.rc=
-00049120: 4661 6c73 650a 2020 2020 2020 2020 7365  False.        se
-00049130: 6c66 2e65 7272 6f72 3d27 4e6f 7420 5b73  lf.error='Not [s
-00049140: 7570 706f 7274 5d20 6675 6e63 7469 6f6e  upport] function
-00049150: 270a 2020 2020 2020 2020 6966 2073 656c  '.        if sel
-00049160: 662e 6c6f 675f 616c 6c3a 0a20 2020 2020  f.log_all:.     
-00049170: 2020 2020 2020 2070 7269 6e74 6628 2752         printf('R
-00049180: 433a 7b7d 5c6e 5265 7375 6c74 3a7b 7d5c  C:{}\nResult:{}\
-00049190: 6e45 7272 6f72 3a7b 7d27 2e66 6f72 6d61  nError:{}'.forma
-000491a0: 7428 7365 6c66 2e72 632c 7365 6c66 2e72  t(self.rc,self.r
-000491b0: 6573 756c 742c 7365 6c66 2e65 7272 6f72  esult,self.error
-000491c0: 292c 6461 7465 3d54 7275 652c 6c6f 6766  ),date=True,logf
-000491d0: 696c 653d 7365 6c66 2e6c 6f67 6669 6c65  ile=self.logfile
-000491e0: 2c6c 6f67 3d73 656c 662e 6c6f 672c 6473  ,log=self.log,ds
-000491f0: 703d 2766 2720 6966 2073 656c 662e 6c6f  p='f' if self.lo
-00049200: 6766 696c 6520 656c 7365 2027 6127 290a  gfile else 'a').
-00049210: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00049220: 656c 660a 0a20 2020 2064 6566 2052 6573  elf..    def Res
-00049230: 756c 7428 7365 6c66 293a 0a20 2020 2020  ult(self):.     
-00049240: 2020 2072 6574 7572 6e20 7365 6c66 2e72     return self.r
-00049250: 6573 756c 740a 0a20 2020 2064 6566 2052  esult..    def R
-00049260: 6328 7365 6c66 293a 0a20 2020 2020 2020  c(self):.       
-00049270: 2072 6574 7572 6e20 7365 6c66 2e72 630a   return self.rc.
-00049280: 0a20 2020 2064 6566 2045 7272 6f72 2873  .    def Error(s
-00049290: 656c 6629 3a0a 2020 2020 2020 2020 7265  elf):.        re
-000492a0: 7475 726e 2073 656c 662e 6572 726f 720a  turn self.error.
-000492b0: 0a63 6c61 7373 2052 4554 5552 4e3a 0a20  .class RETURN:. 
-000492c0: 2020 2027 2727 5465 6d70 6f72 6172 7920     '''Temporary 
-000492d0: 7472 7920 746f 2052 4554 5552 4e20 7661  try to RETURN va
-000492e0: 6c75 6520 6465 6669 6e65 2727 270a 2020  lue define'''.  
-000492f0: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
-00049300: 656c 662c 2a64 6174 612c 2a2a 6f70 7473  elf,*data,**opts
-00049310: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
-00049320: 7263 3d6f 7074 732e 6765 7428 2772 6327  rc=opts.get('rc'
-00049330: 2c6f 7074 732e 6765 7428 2752 4327 2c4e  ,opts.get('RC',N
-00049340: 6f6e 6529 290a 2020 2020 2020 2020 6966  one)).        if
-00049350: 206c 656e 2864 6174 6129 203d 3d20 313a   len(data) == 1:
-00049360: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00049370: 662e 6461 7461 3d64 6174 615b 305d 0a20  f.data=data[0]. 
-00049380: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00049390: 2020 2020 2020 2020 2073 656c 662e 6461           self.da
-000493a0: 7461 3d64 6174 610a 2020 2020 2020 2020  ta=data.        
-000493b0: 7365 6c66 2e69 6e66 6f3d 7b7d 0a20 2020  self.info={}.   
-000493c0: 2020 2020 2069 6620 6f70 7473 2e67 6574       if opts.get
-000493d0: 2827 696e 666f 272c 5472 7565 2920 6973  ('info',True) is
-000493e0: 2054 7275 653a 0a20 2020 2020 2020 2020   True:.         
-000493f0: 2020 2073 656c 662e 696e 666f 5b27 7469     self.info['ti
-00049400: 6d65 275d 3d54 494d 4528 292e 496e 7428  me']=TIME().Int(
-00049410: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-00049420: 206f 7074 732e 6765 7428 2766 756e 6374   opts.get('funct
-00049430: 696f 6e27 2c54 7275 6529 2069 7320 5472  ion',True) is Tr
-00049440: 7565 3a0a 2020 2020 2020 2020 2020 2020  ue:.            
-00049450: 2020 2020 7365 6c66 2e69 6e66 6f5b 2766      self.info['f
-00049460: 756e 6374 696f 6e27 5d3d 4675 6e63 7469  unction']=Functi
-00049470: 6f6e 4e61 6d65 282a 2a7b 2770 6172 656e  onName(**{'paren
-00049480: 7427 3a31 2c27 6172 6773 273a 5472 7565  t':1,'args':True
-00049490: 2c27 6c69 6e65 5f6e 756d 6265 7227 3a54  ,'line_number':T
-000494a0: 7275 652c 2766 696c 656e 616d 6527 3a54  rue,'filename':T
-000494b0: 7275 657d 290a 2020 2020 2020 2020 2020  rue}).          
-000494c0: 2020 6966 206f 7074 732e 6765 7428 2770    if opts.get('p
-000494d0: 6172 656e 7427 2920 6973 2054 7275 653a  arent') is True:
-000494e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000494f0: 2073 656c 662e 696e 666f 5b27 7061 7265   self.info['pare
-00049500: 6e74 275d 3d46 756e 6374 696f 6e4e 616d  nt']=FunctionNam
-00049510: 6528 2a2a 7b27 7061 7265 6e74 273a 322c  e(**{'parent':2,
-00049520: 276c 696e 655f 6e75 6d62 6572 273a 5472  'line_number':Tr
-00049530: 7565 2c27 6669 6c65 6e61 6d65 273a 5472  ue,'filename':Tr
-00049540: 7565 7d29 0a20 2020 2020 2020 2020 2020  ue}).           
-00049550: 2069 6620 276d 7367 2720 696e 206f 7074   if 'msg' in opt
-00049560: 733a 2073 656c 662e 696e 666f 5b27 6d73  s: self.info['ms
-00049570: 6727 5d3d 6f70 7473 2e67 6574 2827 6d73  g']=opts.get('ms
-00049580: 6727 290a 2020 2020 2020 2020 2020 2020  g').            
-00049590: 6966 2027 6e65 7477 6f72 6b27 2069 6e20  if 'network' in 
-000495a0: 6f70 7473 3a20 7365 6c66 2e69 6e66 6f5b  opts: self.info[
-000495b0: 276e 6574 776f 726b 275d 3d6f 7074 732e  'network']=opts.
-000495c0: 6765 7428 276e 6574 776f 726b 2729 0a0a  get('network')..
-000495d0: 2020 2020 6465 6620 4765 7428 7365 6c66      def Get(self
-000495e0: 2c2a 6f2c 2a2a 6f70 7473 293a 0a20 2020  ,*o,**opts):.   
-000495f0: 2020 2020 2069 6620 6e6f 7420 6f3a 206f       if not o: o
-00049600: 7074 735b 2764 6566 6175 6c74 275d 3d27  pts['default']='
-00049610: 6f72 6727 0a20 2020 2020 2020 2072 6574  org'.        ret
-00049620: 7572 6e20 4765 7428 7365 6c66 2e64 6174  urn Get(self.dat
-00049630: 612c 2a6f 2c2a 2a6f 7074 7329 0a0a 636c  a,*o,**opts)..cl
-00049640: 6173 7320 6b54 6872 6561 6428 5468 7265  ass kThread(Thre
-00049650: 6164 293a 0a20 2020 2027 2727 0a20 2020  ad):.    '''.   
-00049660: 2074 203d 206b 5468 7265 6164 2874 6172   t = kThread(tar
-00049670: 6765 743d 666f 6f2c 2061 7267 733d 2827  get=foo, args=('
-00049680: 776f 726c 6421 272c 2929 2023 2064 6566  world!',)) # def
-00049690: 696e 650a 2020 2020 742e 7374 6172 7428  ine.    t.start(
-000496a0: 2920 2320 7374 6172 740a 2020 2020 7072  ) # start.    pr
-000496b0: 696e 7428 742e 6765 7428 2929 2020 2320  int(t.get())  # 
-000496c0: 6765 7420 7265 7375 6c74 0a20 2020 2027  get result.    '
-000496d0: 2727 0a20 2020 2064 6566 205f 5f69 6e69  ''.    def __ini
-000496e0: 745f 5f28 7365 6c66 2c20 6772 6f75 703d  t__(self, group=
-000496f0: 4e6f 6e65 2c20 7461 7267 6574 3d4e 6f6e  None, target=Non
-00049700: 652c 206e 616d 653d 4e6f 6e65 2c0a 2020  e, name=None,.  
-00049710: 2020 2020 2020 2020 2020 6172 6773 3d28            args=(
-00049720: 292c 206b 7761 7267 733d 7b7d 2c20 5665  ), kwargs={}, Ve
-00049730: 7262 6f73 653d 4e6f 6e65 2c20 6465 6661  rbose=None, defa
-00049740: 756c 743d 4e6f 6e65 293a 0a20 2020 2020  ult=None):.     
-00049750: 2020 2069 6620 5079 5665 7228 3329 3a0a     if PyVer(3):.
-00049760: 2020 2020 2020 2020 2020 2020 5468 7265              Thre
-00049770: 6164 2e5f 5f69 6e69 745f 5f28 7365 6c66  ad.__init__(self
-00049780: 2c20 6772 6f75 702c 2074 6172 6765 742c  , group, target,
-00049790: 206e 616d 652c 2061 7267 732c 206b 7761   name, args, kwa
-000497a0: 7267 7329 0a20 2020 2020 2020 2065 6c73  rgs).        els
-000497b0: 653a 0a20 2020 2020 2020 2020 2020 2054  e:.            T
-000497c0: 6872 6561 642e 5f5f 696e 6974 5f5f 2873  hread.__init__(s
-000497d0: 656c 662c 2067 726f 7570 2c20 7461 7267  elf, group, targ
-000497e0: 6574 2c20 6e61 6d65 2c20 6172 6773 2c20  et, name, args, 
-000497f0: 6b77 6172 6773 2c20 5665 7262 6f73 6529  kwargs, Verbose)
-00049800: 0a20 2020 2020 2020 2073 656c 662e 5f72  .        self._r
-00049810: 6574 7572 6e20 3d20 6465 6661 756c 740a  eturn = default.
-00049820: 0a20 2020 2064 6566 2072 756e 2873 656c  .    def run(sel
-00049830: 6629 3a0a 2020 2020 2020 2020 6966 2050  f):.        if P
-00049840: 7956 6572 2833 293a 0a20 2020 2020 2020  yVer(3):.       
-00049850: 2020 2020 2069 6620 7365 6c66 2e5f 7461       if self._ta
-00049860: 7267 6574 2069 7320 6e6f 7420 4e6f 6e65  rget is not None
-00049870: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00049880: 2020 7365 6c66 2e5f 7265 7475 726e 203d    self._return =
-00049890: 2073 656c 662e 5f74 6172 6765 7428 2a73   self._target(*s
-000498a0: 656c 662e 5f61 7267 732c 2a2a 7365 6c66  elf._args,**self
-000498b0: 2e5f 6b77 6172 6773 290a 2020 2020 2020  ._kwargs).      
-000498c0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-000498d0: 2020 2020 6966 2073 656c 662e 5f54 6872      if self._Thr
-000498e0: 6561 645f 5f74 6172 6765 7420 6973 206e  ead__target is n
-000498f0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00049900: 2020 2020 2020 2020 2073 656c 662e 5f72           self._r
-00049910: 6574 7572 6e20 3d20 7365 6c66 2e5f 5468  eturn = self._Th
-00049920: 7265 6164 5f5f 7461 7267 6574 282a 7365  read__target(*se
-00049930: 6c66 2e5f 5468 7265 6164 5f5f 6172 6773  lf._Thread__args
-00049940: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00049950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00049960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00049970: 2020 2a2a 7365 6c66 2e5f 5468 7265 6164    **self._Thread
-00049980: 5f5f 6b77 6172 6773 290a 2020 2020 6465  __kwargs).    de
-00049990: 6620 6765 7428 7365 6c66 293a 0a20 2020  f get(self):.   
-000499a0: 2020 2020 2069 6620 7365 6c66 2e5f 7473       if self._ts
-000499b0: 7461 7465 5f6c 6f63 6b3a 0a20 2020 2020  tate_lock:.     
-000499c0: 2020 2020 2020 2054 6872 6561 642e 6a6f         Thread.jo
-000499d0: 696e 2873 656c 6629 0a20 2020 2020 2020  in(self).       
-000499e0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-000499f0: 2e5f 7265 7475 726e 0a20 2020 2020 2020  ._return.       
-00049a00: 2072 6574 7572 6e20 4e6f 6e65 0a0a 2020   return None..  
-00049a10: 2020 6465 6620 7374 6f70 2873 656c 662c    def stop(self,
-00049a20: 7265 7472 795f 6e75 6d3d 3130 293a 0a20  retry_num=10):. 
-00049a30: 2020 2020 2020 2064 6566 205f 6173 796e         def _asyn
-00049a40: 635f 7261 6973 6528 7468 5f69 642c 6578  c_raise(th_id,ex
-00049a50: 655f 7479 7065 293a 0a20 2020 2020 2020  e_type):.       
-00049a60: 2020 2020 2074 685f 6964 3d63 7479 7065       th_id=ctype
-00049a70: 732e 635f 6c6f 6e67 2874 685f 6964 290a  s.c_long(th_id).
-00049a80: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-00049a90: 6f74 2069 6e73 7065 6374 2e69 7363 6c61  ot inspect.iscla
-00049aa0: 7373 2865 7865 5f74 7970 6529 3a0a 2020  ss(exe_type):.  
-00049ab0: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-00049ac0: 655f 7479 7065 3d74 7970 6528 6578 655f  e_type=type(exe_
-00049ad0: 7479 7065 290a 2020 2020 2020 2020 2020  type).          
-00049ae0: 2020 7265 7320 3d20 6374 7970 6573 2e70    res = ctypes.p
-00049af0: 7974 686f 6e61 7069 2e50 7954 6872 6561  ythonapi.PyThrea
-00049b00: 6453 7461 7465 5f53 6574 4173 796e 6345  dState_SetAsyncE
-00049b10: 7863 2874 685f 6964 2c20 6374 7970 6573  xc(th_id, ctypes
-00049b20: 2e70 795f 6f62 6a65 6374 2865 7865 5f74  .py_object(exe_t
-00049b30: 7970 6529 290a 2020 2020 2020 2020 2020  ype)).          
-00049b40: 2020 6966 2072 6573 203d 3d20 303a 0a20    if res == 0:. 
-00049b50: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00049b60: 7072 696e 7428 2249 6e76 616c 6964 2074  print("Invalid t
-00049b70: 6872 6561 6420 6964 287b 7d29 222e 666f  hread id({})".fo
-00049b80: 726d 6174 2874 685f 6964 2929 0a20 2020  rmat(th_id)).   
-00049b90: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00049ba0: 7572 6e20 2d31 0a20 2020 2020 2020 2020  urn -1.         
-00049bb0: 2020 2065 6c69 6620 7265 7320 213d 2031     elif res != 1
-00049bc0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00049bd0: 2020 6374 7970 6573 2e70 7974 686f 6e61    ctypes.pythona
-00049be0: 7069 2e50 7954 6872 6561 6453 7461 7465  pi.PyThreadState
-00049bf0: 5f53 6574 4173 796e 6345 7863 2874 685f  _SetAsyncExc(th_
-00049c00: 6964 2c20 4e6f 6e65 290a 2020 2020 2020  id, None).      
-00049c10: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00049c20: 5379 7374 656d 4572 726f 7228 2254 6872  SystemError("Thr
-00049c30: 6561 6453 746f 7020 6661 696c 6564 2229  eadStop failed")
-00049c40: 0a20 2020 2020 2020 2020 2020 2023 2073  .            # s
-00049c50: 746f 7070 6564 2074 6872 6561 640a 2020  topped thread.  
-00049c60: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00049c70: 2030 0a20 2020 2020 2020 2066 6f72 2069   0.        for i
-00049c80: 2069 6e20 7261 6e67 6528 7265 7472 795f   in range(retry_
-00049c90: 6e75 6d29 3a0a 2020 2020 2020 2020 2020  num):.          
-00049ca0: 2020 6578 6974 5f69 643d 5f61 7379 6e63    exit_id=_async
-00049cb0: 5f72 6169 7365 2873 656c 662e 6964 656e  _raise(self.iden
-00049cc0: 742c 2053 7973 7465 6d45 7869 7429 0a20  t, SystemExit). 
-00049cd0: 2020 2020 2020 2020 2020 2069 6620 6578             if ex
-00049ce0: 6974 5f69 6420 3d3d 2030 3a0a 2020 2020  it_id == 0:.    
-00049cf0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00049d00: 2e5f 6973 5f73 746f 7070 6564 3d54 7275  ._is_stopped=Tru
-00049d10: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00049d20: 2020 7265 7475 726e 2054 7275 6520 2320    return True # 
-00049d30: 7374 6f70 7065 640a 2020 2020 2020 2020  stopped.        
-00049d40: 2020 2020 656c 6966 2065 7869 745f 6964      elif exit_id
-00049d50: 203d 3d20 2d31 3a20 234e 6f20 7468 7265   == -1: #No thre
-00049d60: 6164 0a20 2020 2020 2020 2020 2020 2020  ad.             
-00049d70: 2020 2073 656c 662e 5f69 735f 7374 6f70     self._is_stop
-00049d80: 7065 643d 5472 7565 0a20 2020 2020 2020  ped=True.       
-00049d90: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00049da0: 4e6f 6e65 0a20 2020 2020 2020 2072 6574  None.        ret
-00049db0: 7572 6e20 4661 6c73 6520 2320 7374 6f70  urn False # stop
-00049dc0: 2046 6169 6c0a 0a20 2020 2064 6566 2069   Fail..    def i
-00049dd0: 7341 6c69 7665 2873 656c 6629 3a0a 2020  sAlive(self):.  
-00049de0: 2020 2020 2020 2369 6620 6e6f 7420 7365        #if not se
-00049df0: 6c66 2e5f 7473 7461 7465 5f6c 6f63 6b20  lf._tstate_lock 
-00049e00: 616e 6420 6e6f 7420 7365 6c66 2e5f 6973  and not self._is
-00049e10: 5f73 746f 7070 6564 3a20 7265 7475 726e  _stopped: return
-00049e20: 204e 6f6e 6520 2320 4e6f 7420 7374 6172   None # Not star
-00049e30: 7465 640a 2020 2020 2020 2020 6966 206e  ted.        if n
-00049e40: 6f74 2073 656c 662e 5f74 7374 6174 655f  ot self._tstate_
-00049e50: 6c6f 636b 2061 6e64 206e 6f74 2073 656c  lock and not sel
-00049e60: 662e 5f69 6465 6e74 3a20 7265 7475 726e  f._ident: return
-00049e70: 204e 6f6e 6520 2320 4e6f 7420 7374 6172   None # Not star
-00049e80: 7465 640a 2020 2020 2020 2020 6966 206e  ted.        if n
-00049e90: 6f74 2073 656c 662e 5f74 7374 6174 655f  ot self._tstate_
-00049ea0: 6c6f 636b 206f 7220 7365 6c66 2e5f 6973  lock or self._is
-00049eb0: 5f73 746f 7070 6564 3a20 7265 7475 726e  _stopped: return
-00049ec0: 2046 616c 7365 2023 5374 6f70 7065 640a   False #Stopped.
-00049ed0: 2020 2020 2020 2020 7265 7475 726e 2054          return T
-00049ee0: 7275 6520 2352 756e 6e69 6e67 0a0a 2020  rue #Running..  
-00049ef0: 2020 6465 6620 4e61 6d65 2873 656c 6629    def Name(self)
-00049f00: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-00049f10: 2073 656c 662e 5f6e 616d 650a 2020 2020   self._name.    
-00049f20: 6465 6620 4172 6773 2873 656c 6629 3a0a  def Args(self):.
-00049f30: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00049f40: 656c 662e 5f61 7267 732c 7365 6c66 2e5f  elf._args,self._
-00049f50: 6b77 6172 6773 0a20 2020 2064 6566 2049  kwargs.    def I
-00049f60: 6428 7365 6c66 293a 0a20 2020 2020 2020  d(self):.       
-00049f70: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
-00049f80: 656c 662e 6964 656e 742c 696e 7429 3a0a  elf.ident,int):.
-00049f90: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00049fa0: 726e 2073 656c 662e 6964 656e 740a 2020  rn self.ident.  
-00049fb0: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
-00049fc0: 6520 2320 6e6f 7420 7374 6172 7465 640a  e # not started.
-00049fd0: 2020 2020 6465 6620 5050 4944 2873 656c      def PPID(sel
-00049fe0: 6629 3a0a 2020 2020 2020 2020 7265 7475  f):.        retu
-00049ff0: 726e 206f 732e 6765 7470 6964 2829 0a0a  rn os.getpid()..
-0004a000: 6465 6620 5072 6f67 7265 7373 2873 796d  def Progress(sym
-0004a010: 626f 6c3d 272e 272c 2a2a 6f70 7473 293a  bol='.',**opts):
-0004a020: 0a20 2020 2073 7461 7274 5f6e 6577 6c69  .    start_newli
-0004a030: 6e65 3d6f 7074 732e 6765 7428 2773 7461  ne=opts.get('sta
-0004a040: 7274 5f6e 6577 6c69 6e65 272c 4661 6c73  rt_newline',Fals
-0004a050: 6529 0a20 2020 2065 6e64 5f6e 6577 6c69  e).    end_newli
-0004a060: 6e65 3d6f 7074 732e 6765 7428 2765 6e64  ne=opts.get('end
-0004a070: 5f6e 6577 6c69 6e65 272c 6f70 7473 2e67  _newline',opts.g
-0004a080: 6574 2827 6e65 776c 696e 6527 2c54 7275  et('newline',Tru
-0004a090: 6529 290a 2020 2020 6c6f 673d 6f70 7473  e)).    log=opts
-0004a0a0: 2e67 6574 2827 6c6f 6727 2c4e 6f6e 6529  .get('log',None)
-0004a0b0: 0a20 2020 2069 6e74 6572 7661 6c3d 496e  .    interval=In
-0004a0c0: 7428 6f70 7473 2e67 6574 2827 696e 7465  t(opts.get('inte
-0004a0d0: 7276 616c 2729 2c35 290a 2020 2020 7469  rval'),5).    ti
-0004a0e0: 6d65 6f75 743d 496e 7428 6f70 7473 2e67  meout=Int(opts.g
-0004a0f0: 6574 2827 7469 6d65 6f75 7427 292c 3336  et('timeout'),36
-0004a100: 3030 2a31 3030 290a 2020 2020 6d6f 6465  00*100).    mode
-0004a110: 3d6f 7074 732e 6765 7428 276d 6f64 6527  =opts.get('mode'
-0004a120: 2c27 7327 290a 2020 2020 7374 6f70 3d6f  ,'s').    stop=o
-0004a130: 7074 735b 2773 746f 7027 5d20 6966 2027  pts['stop'] if '
-0004a140: 7374 6f70 2720 696e 206f 7074 7320 656c  stop' in opts el
-0004a150: 7365 2046 616c 7365 0a20 2020 2064 656c  se False.    del
-0004a160: 6179 3d6f 7074 735b 2764 656c 6179 275d  ay=opts['delay']
-0004a170: 2069 6620 2764 656c 6179 2720 696e 206f   if 'delay' in o
-0004a180: 7074 7320 656c 7365 2046 616c 7365 0a20  pts else False. 
-0004a190: 2020 206c 6f63 616c 5f70 7269 6e74 6564     local_printed
-0004a1a0: 3d46 616c 7365 0a20 2020 2069 6620 7374  =False.    if st
-0004a1b0: 6172 745f 6e65 776c 696e 653a 0a20 2020  art_newline:.   
-0004a1c0: 2020 2020 2070 7269 6e74 6628 2727 2c69       printf('',i
-0004a1d0: 676e 6f72 655f 656d 7074 793d 4661 6c73  gnore_empty=Fals
-0004a1e0: 652c 6361 6c6c 6572 5f70 6172 656e 743d  e,caller_parent=
-0004a1f0: 312c 7374 6172 745f 6e65 776c 696e 653d  1,start_newline=
-0004a200: 2761 7574 6f27 2c6c 6f67 3d6c 6f67 2c65  'auto',log=log,e
-0004a210: 6e64 3d27 272c 6d6f 6465 3d6d 6f64 6529  nd='',mode=mode)
-0004a220: 0a20 2020 2054 696d 653d 5449 4d45 2829  .    Time=TIME()
-0004a230: 0a20 2020 2077 6869 6c65 2054 7275 653a  .    while True:
-0004a240: 0a20 2020 2020 2020 2069 6620 4973 5472  .        if IsTr
-0004a250: 7565 2873 746f 7029 206f 7220 2874 696d  ue(stop) or (tim
-0004a260: 656f 7574 203e 2030 2061 6e64 2054 696d  eout > 0 and Tim
-0004a270: 652e 4f75 7428 7469 6d65 6f75 7429 293a  e.Out(timeout)):
-0004a280: 2062 7265 616b 0a20 2020 2020 2020 2069   break.        i
-0004a290: 6620 6465 6c61 793a 0a20 2020 2020 2020  f delay:.       
-0004a2a0: 2020 2020 2069 6620 2869 7369 6e73 7461       if (isinsta
-0004a2b0: 6e63 6528 6465 6c61 792c 696e 7429 2061  nce(delay,int) a
-0004a2c0: 6e64 206e 6f74 2020 5469 6d65 2e4f 7574  nd not  Time.Out
-0004a2d0: 2864 656c 6179 2929 206f 7220 6e6f 7420  (delay)) or not 
-0004a2e0: 4973 5472 7565 2864 656c 6179 293a 2023  IsTrue(delay): #
-0004a2f0: 6c65 7373 2064 656c 6179 2074 696d 6520  less delay time 
-0004a300: 7468 656e 2073 6b69 7020 7072 6f67 7265  then skip progre
-0004a310: 7373 206c 6f67 0a20 2020 2020 2020 2020  ss log.         
-0004a320: 2020 2020 2020 2074 696d 652e 736c 6565         time.slee
-0004a330: 7028 302e 3329 0a20 2020 2020 2020 2020  p(0.3).         
-0004a340: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
-0004a350: 2020 2020 2020 2020 7072 696e 7466 2873          printf(s
-0004a360: 796d 626f 6c2c 6469 7265 6374 3d54 7275  ymbol,direct=Tru
-0004a370: 652c 6c6f 673d 6c6f 672c 6c6f 675f 6c65  e,log=log,log_le
-0004a380: 7665 6c3d 312c 6d6f 6465 3d6d 6f64 6529  vel=1,mode=mode)
-0004a390: 0a20 2020 2020 2020 206c 6f63 616c 5f70  .        local_p
-0004a3a0: 7269 6e74 6564 3d54 7275 650a 2020 2020  rinted=True.    
-0004a3b0: 2020 2020 7469 6d65 2e73 6c65 6570 2869      time.sleep(i
-0004a3c0: 6e74 6572 7661 6c29 0a20 2020 2069 6620  nterval).    if 
-0004a3d0: 656e 645f 6e65 776c 696e 6520 616e 6420  end_newline and 
-0004a3e0: 6c6f 6361 6c5f 7072 696e 7465 643a 0a20  local_printed:. 
-0004a3f0: 2020 2020 2020 2070 7269 6e74 6628 2727         printf(''
-0004a400: 2c69 676e 6f72 655f 656d 7074 793d 4661  ,ignore_empty=Fa
-0004a410: 6c73 652c 6361 6c6c 6572 5f70 6172 656e  lse,caller_paren
-0004a420: 743d 312c 6e6f 5f69 6e74 726f 3d54 7275  t=1,no_intro=Tru
-0004a430: 652c 6c6f 673d 6c6f 672c 6d6f 6465 3d6d  e,log=log,mode=m
-0004a440: 6f64 6529 0a0a 0a23 6966 205f 5f6e 616d  ode)...#if __nam
-0004a450: 655f 5f20 3d3d 2022 5f5f 6d61 696e 5f5f  e__ == "__main__
-0004a460: 223a 0a23 2020 2020 2320 496e 7465 6765  ":.#    # Intege
-0004a470: 720a 2320 2020 2070 7269 6e74 2822 4765  r.#    print("Ge
-0004a480: 7428 3132 3334 3529 3a22 2c47 6574 2831  t(12345):",Get(1
-0004a490: 3233 3435 2929 0a23 2020 2020 7072 696e  2345)).#    prin
-0004a4a0: 7428 2247 6574 2831 3233 3435 2c31 293a  t("Get(12345,1):
-0004a4b0: 222c 4765 7428 3132 3334 352c 3129 290a  ",Get(12345,1)).
+00048c00: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+00048c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048c20: 2073 656c 662e 7265 7375 6c74 3d66 756e   self.result=fun
+00048c30: 6328 2a69 6e70 732c 2a2a 6f70 7473 290a  c(*inps,**opts).
+00048c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048c50: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
+00048c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048c70: 2020 2020 2020 2020 2020 2020 653d 4578              e=Ex
+00048c80: 6365 7074 4d65 7373 6167 6528 290a 2020  ceptMessage().  
+00048c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048ca0: 2020 2020 2020 2020 2020 7365 6c66 2e65            self.e
+00048cb0: 7272 6f72 3d65 2b27 2866 756e 6374 696f  rror=e+'(functio
+00048cc0: 6e20 6e61 6d65 3a20 7b7d 2927 2e66 6f72  n name: {})'.for
+00048cd0: 6d61 7428 6675 6e63 2e5f 5f6e 616d 655f  mat(func.__name_
+00048ce0: 5f29 0a20 2020 2020 2020 2020 2020 2020  _).             
+00048cf0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00048d00: 656c 662e 7263 3d46 616c 7365 0a20 2020  elf.rc=False.   
+00048d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048d20: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00048d30: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00048d40: 656c 662e 7265 7375 6c74 3d66 756e 6328  elf.result=func(
+00048d50: 2a6e 696e 7073 2c2a 2a6e 6f70 7473 290a  *ninps,**nopts).
+00048d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048d70: 6966 2073 656c 662e 6c6f 675f 616c 6c3a  if self.log_all:
+00048d80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00048d90: 2020 2020 2070 7269 6e74 6628 2752 433a       printf('RC:
+00048da0: 7b7d 5c6e 5265 7375 6c74 3a7b 7d27 2e66  {}\nResult:{}'.f
+00048db0: 6f72 6d61 7428 7365 6c66 2e72 632c 7365  ormat(self.rc,se
+00048dc0: 6c66 2e72 6573 756c 7429 2c64 6174 653d  lf.result),date=
+00048dd0: 5472 7565 2c6c 6f67 6669 6c65 3d73 656c  True,logfile=sel
+00048de0: 662e 6c6f 6766 696c 652c 6c6f 673d 7365  f.logfile,log=se
+00048df0: 6c66 2e6c 6f67 2c64 7370 3d27 6627 2069  lf.log,dsp='f' i
+00048e00: 6620 7365 6c66 2e6c 6f67 6669 6c65 2065  f self.logfile e
+00048e10: 6c73 6520 2761 2729 0a20 2020 2020 2020  lse 'a').       
+00048e20: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00048e30: 7365 6c66 0a20 2020 2020 2020 2020 2020  self.           
+00048e40: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
+00048e50: 2020 2020 2020 2020 2065 3d45 7863 6570           e=Excep
+00048e60: 744d 6573 7361 6765 2829 0a20 2020 2020  tMessage().     
+00048e70: 2020 2020 2020 2020 2020 2069 6620 7365             if se
+00048e80: 6c66 2e6c 6f67 6669 6c65 206f 7220 7365  lf.logfile or se
+00048e90: 6c66 2e6c 6f67 3a0a 2020 2020 2020 2020  lf.log:.        
+00048ea0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00048eb0: 7466 2865 2c64 6174 653d 5472 7565 2c63  tf(e,date=True,c
+00048ec0: 616c 6c65 725f 7472 6565 3d54 7275 652c  aller_tree=True,
+00048ed0: 6361 6c6c 6572 5f70 6172 656e 743d 2731  caller_parent='1
+00048ee0: 2d35 272c 6361 6c6c 6572 5f66 696c 656e  -5',caller_filen
+00048ef0: 616d 653d 5472 7565 2c63 616c 6c65 725f  ame=True,caller_
+00048f00: 6c69 6e65 5f6e 756d 6265 723d 5472 7565  line_number=True
+00048f10: 2c6c 6f67 6669 6c65 3d73 656c 662e 6c6f  ,logfile=self.lo
+00048f20: 6766 696c 652c 6c6f 673d 7365 6c66 2e6c  gfile,log=self.l
+00048f30: 6f67 2c64 7370 3d27 6627 290a 2020 2020  og,dsp='f').    
+00048f40: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+00048f50: 656c 662e 6572 725f 7363 7265 656e 3a0a  elf.err_screen:.
+00048f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00048f70: 2020 2020 7072 696e 7466 2865 2c6d 6f64      printf(e,mod
+00048f80: 653d 2765 2729 0a20 2020 2020 2020 2020  e='e').         
+00048f90: 2020 2020 2020 2069 6620 7365 6c66 2e65         if self.e
+00048fa0: 7272 5f65 7869 743a 0a20 2020 2020 2020  rr_exit:.       
+00048fb0: 2020 2020 2020 2020 2020 2020 206f 732e               os.
+00048fc0: 5f65 7869 7428 3129 0a20 2020 2020 2020  _exit(1).       
+00048fd0: 2020 2020 2020 2020 2073 656c 662e 7263           self.rc
+00048fe0: 3d46 616c 7365 0a20 2020 2020 2020 2020  =False.         
+00048ff0: 2020 2020 2020 2073 656c 662e 6572 726f         self.erro
+00049000: 723d 650a 2020 2020 2020 2020 2020 2020  r=e.            
+00049010: 2020 2020 7265 7475 726e 2073 656c 660a      return self.
+00049020: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
+00049030: 6e73 7461 6e63 6528 6675 6e63 2c73 7472  nstance(func,str
+00049040: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
+00049050: 656c 662e 7263 2c73 656c 662e 7265 7375  elf.rc,self.resu
+00049060: 6c74 2c73 656c 662e 6572 726f 723d 5472  lt,self.error=Tr
+00049070: 7943 6f64 6528 6675 6e63 2c64 6566 6175  yCode(func,defau
+00049080: 6c74 3d46 616c 7365 2c5f 7265 7475 726e  lt=False,_return
+00049090: 5f3d 5472 7565 290a 2020 2020 2020 2020  _=True).        
+000490a0: 2020 2020 7265 7475 726e 2073 656c 660a      return self.
+000490b0: 2020 2020 2020 2020 7365 6c66 2e72 633d          self.rc=
+000490c0: 4661 6c73 650a 2020 2020 2020 2020 7365  False.        se
+000490d0: 6c66 2e65 7272 6f72 3d27 4e6f 7420 5b73  lf.error='Not [s
+000490e0: 7570 706f 7274 5d20 6675 6e63 7469 6f6e  upport] function
+000490f0: 270a 2020 2020 2020 2020 6966 2073 656c  '.        if sel
+00049100: 662e 6c6f 675f 616c 6c3a 0a20 2020 2020  f.log_all:.     
+00049110: 2020 2020 2020 2070 7269 6e74 6628 2752         printf('R
+00049120: 433a 7b7d 5c6e 5265 7375 6c74 3a7b 7d5c  C:{}\nResult:{}\
+00049130: 6e45 7272 6f72 3a7b 7d27 2e66 6f72 6d61  nError:{}'.forma
+00049140: 7428 7365 6c66 2e72 632c 7365 6c66 2e72  t(self.rc,self.r
+00049150: 6573 756c 742c 7365 6c66 2e65 7272 6f72  esult,self.error
+00049160: 292c 6461 7465 3d54 7275 652c 6c6f 6766  ),date=True,logf
+00049170: 696c 653d 7365 6c66 2e6c 6f67 6669 6c65  ile=self.logfile
+00049180: 2c6c 6f67 3d73 656c 662e 6c6f 672c 6473  ,log=self.log,ds
+00049190: 703d 2766 2720 6966 2073 656c 662e 6c6f  p='f' if self.lo
+000491a0: 6766 696c 6520 656c 7365 2027 6127 290a  gfile else 'a').
+000491b0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+000491c0: 656c 660a 0a20 2020 2064 6566 2052 6573  elf..    def Res
+000491d0: 756c 7428 7365 6c66 293a 0a20 2020 2020  ult(self):.     
+000491e0: 2020 2072 6574 7572 6e20 7365 6c66 2e72     return self.r
+000491f0: 6573 756c 740a 0a20 2020 2064 6566 2052  esult..    def R
+00049200: 6328 7365 6c66 293a 0a20 2020 2020 2020  c(self):.       
+00049210: 2072 6574 7572 6e20 7365 6c66 2e72 630a   return self.rc.
+00049220: 0a20 2020 2064 6566 2045 7272 6f72 2873  .    def Error(s
+00049230: 656c 6629 3a0a 2020 2020 2020 2020 7265  elf):.        re
+00049240: 7475 726e 2073 656c 662e 6572 726f 720a  turn self.error.
+00049250: 0a63 6c61 7373 2052 4554 5552 4e3a 0a20  .class RETURN:. 
+00049260: 2020 2027 2727 5465 6d70 6f72 6172 7920     '''Temporary 
+00049270: 7472 7920 746f 2052 4554 5552 4e20 7661  try to RETURN va
+00049280: 6c75 6520 6465 6669 6e65 2727 270a 2020  lue define'''.  
+00049290: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
+000492a0: 656c 662c 2a64 6174 612c 2a2a 6f70 7473  elf,*data,**opts
+000492b0: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
+000492c0: 7263 3d6f 7074 732e 6765 7428 2772 6327  rc=opts.get('rc'
+000492d0: 2c6f 7074 732e 6765 7428 2752 4327 2c4e  ,opts.get('RC',N
+000492e0: 6f6e 6529 290a 2020 2020 2020 2020 6966  one)).        if
+000492f0: 206c 656e 2864 6174 6129 203d 3d20 313a   len(data) == 1:
+00049300: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00049310: 662e 6461 7461 3d64 6174 615b 305d 0a20  f.data=data[0]. 
+00049320: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00049330: 2020 2020 2020 2020 2073 656c 662e 6461           self.da
+00049340: 7461 3d64 6174 610a 2020 2020 2020 2020  ta=data.        
+00049350: 7365 6c66 2e69 6e66 6f3d 7b7d 0a20 2020  self.info={}.   
+00049360: 2020 2020 2069 6620 6f70 7473 2e67 6574       if opts.get
+00049370: 2827 696e 666f 272c 5472 7565 2920 6973  ('info',True) is
+00049380: 2054 7275 653a 0a20 2020 2020 2020 2020   True:.         
+00049390: 2020 2073 656c 662e 696e 666f 5b27 7469     self.info['ti
+000493a0: 6d65 275d 3d54 494d 4528 292e 496e 7428  me']=TIME().Int(
+000493b0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+000493c0: 206f 7074 732e 6765 7428 2766 756e 6374   opts.get('funct
+000493d0: 696f 6e27 2c54 7275 6529 2069 7320 5472  ion',True) is Tr
+000493e0: 7565 3a0a 2020 2020 2020 2020 2020 2020  ue:.            
+000493f0: 2020 2020 7365 6c66 2e69 6e66 6f5b 2766      self.info['f
+00049400: 756e 6374 696f 6e27 5d3d 4675 6e63 7469  unction']=Functi
+00049410: 6f6e 4e61 6d65 282a 2a7b 2770 6172 656e  onName(**{'paren
+00049420: 7427 3a31 2c27 6172 6773 273a 5472 7565  t':1,'args':True
+00049430: 2c27 6c69 6e65 5f6e 756d 6265 7227 3a54  ,'line_number':T
+00049440: 7275 652c 2766 696c 656e 616d 6527 3a54  rue,'filename':T
+00049450: 7275 657d 290a 2020 2020 2020 2020 2020  rue}).          
+00049460: 2020 6966 206f 7074 732e 6765 7428 2770    if opts.get('p
+00049470: 6172 656e 7427 2920 6973 2054 7275 653a  arent') is True:
+00049480: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00049490: 2073 656c 662e 696e 666f 5b27 7061 7265   self.info['pare
+000494a0: 6e74 275d 3d46 756e 6374 696f 6e4e 616d  nt']=FunctionNam
+000494b0: 6528 2a2a 7b27 7061 7265 6e74 273a 322c  e(**{'parent':2,
+000494c0: 276c 696e 655f 6e75 6d62 6572 273a 5472  'line_number':Tr
+000494d0: 7565 2c27 6669 6c65 6e61 6d65 273a 5472  ue,'filename':Tr
+000494e0: 7565 7d29 0a20 2020 2020 2020 2020 2020  ue}).           
+000494f0: 2069 6620 276d 7367 2720 696e 206f 7074   if 'msg' in opt
+00049500: 733a 2073 656c 662e 696e 666f 5b27 6d73  s: self.info['ms
+00049510: 6727 5d3d 6f70 7473 2e67 6574 2827 6d73  g']=opts.get('ms
+00049520: 6727 290a 2020 2020 2020 2020 2020 2020  g').            
+00049530: 6966 2027 6e65 7477 6f72 6b27 2069 6e20  if 'network' in 
+00049540: 6f70 7473 3a20 7365 6c66 2e69 6e66 6f5b  opts: self.info[
+00049550: 276e 6574 776f 726b 275d 3d6f 7074 732e  'network']=opts.
+00049560: 6765 7428 276e 6574 776f 726b 2729 0a0a  get('network')..
+00049570: 2020 2020 6465 6620 4765 7428 7365 6c66      def Get(self
+00049580: 2c2a 6f2c 2a2a 6f70 7473 293a 0a20 2020  ,*o,**opts):.   
+00049590: 2020 2020 2069 6620 6e6f 7420 6f3a 206f       if not o: o
+000495a0: 7074 735b 2764 6566 6175 6c74 275d 3d27  pts['default']='
+000495b0: 6f72 6727 0a20 2020 2020 2020 2072 6574  org'.        ret
+000495c0: 7572 6e20 4765 7428 7365 6c66 2e64 6174  urn Get(self.dat
+000495d0: 612c 2a6f 2c2a 2a6f 7074 7329 0a0a 636c  a,*o,**opts)..cl
+000495e0: 6173 7320 6b54 6872 6561 6428 5468 7265  ass kThread(Thre
+000495f0: 6164 293a 0a20 2020 2027 2727 0a20 2020  ad):.    '''.   
+00049600: 2074 203d 206b 5468 7265 6164 2874 6172   t = kThread(tar
+00049610: 6765 743d 666f 6f2c 2061 7267 733d 2827  get=foo, args=('
+00049620: 776f 726c 6421 272c 2929 2023 2064 6566  world!',)) # def
+00049630: 696e 650a 2020 2020 742e 7374 6172 7428  ine.    t.start(
+00049640: 2920 2320 7374 6172 740a 2020 2020 7072  ) # start.    pr
+00049650: 696e 7428 742e 6765 7428 2929 2020 2320  int(t.get())  # 
+00049660: 6765 7420 7265 7375 6c74 0a20 2020 2027  get result.    '
+00049670: 2727 0a20 2020 2064 6566 205f 5f69 6e69  ''.    def __ini
+00049680: 745f 5f28 7365 6c66 2c20 6772 6f75 703d  t__(self, group=
+00049690: 4e6f 6e65 2c20 7461 7267 6574 3d4e 6f6e  None, target=Non
+000496a0: 652c 206e 616d 653d 4e6f 6e65 2c0a 2020  e, name=None,.  
+000496b0: 2020 2020 2020 2020 2020 6172 6773 3d28            args=(
+000496c0: 292c 206b 7761 7267 733d 7b7d 2c20 5665  ), kwargs={}, Ve
+000496d0: 7262 6f73 653d 4e6f 6e65 2c20 6465 6661  rbose=None, defa
+000496e0: 756c 743d 4e6f 6e65 293a 0a20 2020 2020  ult=None):.     
+000496f0: 2020 2069 6620 5079 5665 7228 3329 3a0a     if PyVer(3):.
+00049700: 2020 2020 2020 2020 2020 2020 5468 7265              Thre
+00049710: 6164 2e5f 5f69 6e69 745f 5f28 7365 6c66  ad.__init__(self
+00049720: 2c20 6772 6f75 702c 2074 6172 6765 742c  , group, target,
+00049730: 206e 616d 652c 2061 7267 732c 206b 7761   name, args, kwa
+00049740: 7267 7329 0a20 2020 2020 2020 2065 6c73  rgs).        els
+00049750: 653a 0a20 2020 2020 2020 2020 2020 2054  e:.            T
+00049760: 6872 6561 642e 5f5f 696e 6974 5f5f 2873  hread.__init__(s
+00049770: 656c 662c 2067 726f 7570 2c20 7461 7267  elf, group, targ
+00049780: 6574 2c20 6e61 6d65 2c20 6172 6773 2c20  et, name, args, 
+00049790: 6b77 6172 6773 2c20 5665 7262 6f73 6529  kwargs, Verbose)
+000497a0: 0a20 2020 2020 2020 2073 656c 662e 5f72  .        self._r
+000497b0: 6574 7572 6e20 3d20 6465 6661 756c 740a  eturn = default.
+000497c0: 0a20 2020 2064 6566 2072 756e 2873 656c  .    def run(sel
+000497d0: 6629 3a0a 2020 2020 2020 2020 6966 2050  f):.        if P
+000497e0: 7956 6572 2833 293a 0a20 2020 2020 2020  yVer(3):.       
+000497f0: 2020 2020 2069 6620 7365 6c66 2e5f 7461       if self._ta
+00049800: 7267 6574 2069 7320 6e6f 7420 4e6f 6e65  rget is not None
+00049810: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00049820: 2020 7365 6c66 2e5f 7265 7475 726e 203d    self._return =
+00049830: 2073 656c 662e 5f74 6172 6765 7428 2a73   self._target(*s
+00049840: 656c 662e 5f61 7267 732c 2a2a 7365 6c66  elf._args,**self
+00049850: 2e5f 6b77 6172 6773 290a 2020 2020 2020  ._kwargs).      
+00049860: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00049870: 2020 2020 6966 2073 656c 662e 5f54 6872      if self._Thr
+00049880: 6561 645f 5f74 6172 6765 7420 6973 206e  ead__target is n
+00049890: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+000498a0: 2020 2020 2020 2020 2073 656c 662e 5f72           self._r
+000498b0: 6574 7572 6e20 3d20 7365 6c66 2e5f 5468  eturn = self._Th
+000498c0: 7265 6164 5f5f 7461 7267 6574 282a 7365  read__target(*se
+000498d0: 6c66 2e5f 5468 7265 6164 5f5f 6172 6773  lf._Thread__args
+000498e0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000498f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00049910: 2020 2a2a 7365 6c66 2e5f 5468 7265 6164    **self._Thread
+00049920: 5f5f 6b77 6172 6773 290a 2020 2020 6465  __kwargs).    de
+00049930: 6620 6765 7428 7365 6c66 293a 0a20 2020  f get(self):.   
+00049940: 2020 2020 2069 6620 7365 6c66 2e5f 7473       if self._ts
+00049950: 7461 7465 5f6c 6f63 6b3a 0a20 2020 2020  tate_lock:.     
+00049960: 2020 2020 2020 2054 6872 6561 642e 6a6f         Thread.jo
+00049970: 696e 2873 656c 6629 0a20 2020 2020 2020  in(self).       
+00049980: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00049990: 2e5f 7265 7475 726e 0a20 2020 2020 2020  ._return.       
+000499a0: 2072 6574 7572 6e20 4e6f 6e65 0a0a 2020   return None..  
+000499b0: 2020 6465 6620 7374 6f70 2873 656c 662c    def stop(self,
+000499c0: 7265 7472 795f 6e75 6d3d 3130 293a 0a20  retry_num=10):. 
+000499d0: 2020 2020 2020 2064 6566 205f 6173 796e         def _asyn
+000499e0: 635f 7261 6973 6528 7468 5f69 642c 6578  c_raise(th_id,ex
+000499f0: 655f 7479 7065 293a 0a20 2020 2020 2020  e_type):.       
+00049a00: 2020 2020 2074 685f 6964 3d63 7479 7065       th_id=ctype
+00049a10: 732e 635f 6c6f 6e67 2874 685f 6964 290a  s.c_long(th_id).
+00049a20: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00049a30: 6f74 2069 6e73 7065 6374 2e69 7363 6c61  ot inspect.iscla
+00049a40: 7373 2865 7865 5f74 7970 6529 3a0a 2020  ss(exe_type):.  
+00049a50: 2020 2020 2020 2020 2020 2020 2020 6578                ex
+00049a60: 655f 7479 7065 3d74 7970 6528 6578 655f  e_type=type(exe_
+00049a70: 7479 7065 290a 2020 2020 2020 2020 2020  type).          
+00049a80: 2020 7265 7320 3d20 6374 7970 6573 2e70    res = ctypes.p
+00049a90: 7974 686f 6e61 7069 2e50 7954 6872 6561  ythonapi.PyThrea
+00049aa0: 6453 7461 7465 5f53 6574 4173 796e 6345  dState_SetAsyncE
+00049ab0: 7863 2874 685f 6964 2c20 6374 7970 6573  xc(th_id, ctypes
+00049ac0: 2e70 795f 6f62 6a65 6374 2865 7865 5f74  .py_object(exe_t
+00049ad0: 7970 6529 290a 2020 2020 2020 2020 2020  ype)).          
+00049ae0: 2020 6966 2072 6573 203d 3d20 303a 0a20    if res == 0:. 
+00049af0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00049b00: 7072 696e 7428 2249 6e76 616c 6964 2074  print("Invalid t
+00049b10: 6872 6561 6420 6964 287b 7d29 222e 666f  hread id({})".fo
+00049b20: 726d 6174 2874 685f 6964 2929 0a20 2020  rmat(th_id)).   
+00049b30: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00049b40: 7572 6e20 2d31 0a20 2020 2020 2020 2020  urn -1.         
+00049b50: 2020 2065 6c69 6620 7265 7320 213d 2031     elif res != 1
+00049b60: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00049b70: 2020 6374 7970 6573 2e70 7974 686f 6e61    ctypes.pythona
+00049b80: 7069 2e50 7954 6872 6561 6453 7461 7465  pi.PyThreadState
+00049b90: 5f53 6574 4173 796e 6345 7863 2874 685f  _SetAsyncExc(th_
+00049ba0: 6964 2c20 4e6f 6e65 290a 2020 2020 2020  id, None).      
+00049bb0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00049bc0: 5379 7374 656d 4572 726f 7228 2254 6872  SystemError("Thr
+00049bd0: 6561 6453 746f 7020 6661 696c 6564 2229  eadStop failed")
+00049be0: 0a20 2020 2020 2020 2020 2020 2023 2073  .            # s
+00049bf0: 746f 7070 6564 2074 6872 6561 640a 2020  topped thread.  
+00049c00: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00049c10: 2030 0a20 2020 2020 2020 2066 6f72 2069   0.        for i
+00049c20: 2069 6e20 7261 6e67 6528 7265 7472 795f   in range(retry_
+00049c30: 6e75 6d29 3a0a 2020 2020 2020 2020 2020  num):.          
+00049c40: 2020 6578 6974 5f69 643d 5f61 7379 6e63    exit_id=_async
+00049c50: 5f72 6169 7365 2873 656c 662e 6964 656e  _raise(self.iden
+00049c60: 742c 2053 7973 7465 6d45 7869 7429 0a20  t, SystemExit). 
+00049c70: 2020 2020 2020 2020 2020 2069 6620 6578             if ex
+00049c80: 6974 5f69 6420 3d3d 2030 3a0a 2020 2020  it_id == 0:.    
+00049c90: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00049ca0: 2e5f 6973 5f73 746f 7070 6564 3d54 7275  ._is_stopped=Tru
+00049cb0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00049cc0: 2020 7265 7475 726e 2054 7275 6520 2320    return True # 
+00049cd0: 7374 6f70 7065 640a 2020 2020 2020 2020  stopped.        
+00049ce0: 2020 2020 656c 6966 2065 7869 745f 6964      elif exit_id
+00049cf0: 203d 3d20 2d31 3a20 234e 6f20 7468 7265   == -1: #No thre
+00049d00: 6164 0a20 2020 2020 2020 2020 2020 2020  ad.             
+00049d10: 2020 2073 656c 662e 5f69 735f 7374 6f70     self._is_stop
+00049d20: 7065 643d 5472 7565 0a20 2020 2020 2020  ped=True.       
+00049d30: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00049d40: 4e6f 6e65 0a20 2020 2020 2020 2072 6574  None.        ret
+00049d50: 7572 6e20 4661 6c73 6520 2320 7374 6f70  urn False # stop
+00049d60: 2046 6169 6c0a 0a20 2020 2064 6566 2069   Fail..    def i
+00049d70: 7341 6c69 7665 2873 656c 6629 3a0a 2020  sAlive(self):.  
+00049d80: 2020 2020 2020 2369 6620 6e6f 7420 7365        #if not se
+00049d90: 6c66 2e5f 7473 7461 7465 5f6c 6f63 6b20  lf._tstate_lock 
+00049da0: 616e 6420 6e6f 7420 7365 6c66 2e5f 6973  and not self._is
+00049db0: 5f73 746f 7070 6564 3a20 7265 7475 726e  _stopped: return
+00049dc0: 204e 6f6e 6520 2320 4e6f 7420 7374 6172   None # Not star
+00049dd0: 7465 640a 2020 2020 2020 2020 6966 206e  ted.        if n
+00049de0: 6f74 2073 656c 662e 5f74 7374 6174 655f  ot self._tstate_
+00049df0: 6c6f 636b 2061 6e64 206e 6f74 2073 656c  lock and not sel
+00049e00: 662e 5f69 6465 6e74 3a20 7265 7475 726e  f._ident: return
+00049e10: 204e 6f6e 6520 2320 4e6f 7420 7374 6172   None # Not star
+00049e20: 7465 640a 2020 2020 2020 2020 6966 206e  ted.        if n
+00049e30: 6f74 2073 656c 662e 5f74 7374 6174 655f  ot self._tstate_
+00049e40: 6c6f 636b 206f 7220 7365 6c66 2e5f 6973  lock or self._is
+00049e50: 5f73 746f 7070 6564 3a20 7265 7475 726e  _stopped: return
+00049e60: 2046 616c 7365 2023 5374 6f70 7065 640a   False #Stopped.
+00049e70: 2020 2020 2020 2020 7265 7475 726e 2054          return T
+00049e80: 7275 6520 2352 756e 6e69 6e67 0a0a 2020  rue #Running..  
+00049e90: 2020 6465 6620 4e61 6d65 2873 656c 6629    def Name(self)
+00049ea0: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+00049eb0: 2073 656c 662e 5f6e 616d 650a 2020 2020   self._name.    
+00049ec0: 6465 6620 4172 6773 2873 656c 6629 3a0a  def Args(self):.
+00049ed0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00049ee0: 656c 662e 5f61 7267 732c 7365 6c66 2e5f  elf._args,self._
+00049ef0: 6b77 6172 6773 0a20 2020 2064 6566 2049  kwargs.    def I
+00049f00: 6428 7365 6c66 293a 0a20 2020 2020 2020  d(self):.       
+00049f10: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
+00049f20: 656c 662e 6964 656e 742c 696e 7429 3a0a  elf.ident,int):.
+00049f30: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00049f40: 726e 2073 656c 662e 6964 656e 740a 2020  rn self.ident.  
+00049f50: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
+00049f60: 6520 2320 6e6f 7420 7374 6172 7465 640a  e # not started.
+00049f70: 2020 2020 6465 6620 5050 4944 2873 656c      def PPID(sel
+00049f80: 6629 3a0a 2020 2020 2020 2020 7265 7475  f):.        retu
+00049f90: 726e 206f 732e 6765 7470 6964 2829 0a0a  rn os.getpid()..
+00049fa0: 6465 6620 5072 6f67 7265 7373 2873 796d  def Progress(sym
+00049fb0: 626f 6c3d 272e 272c 2a2a 6f70 7473 293a  bol='.',**opts):
+00049fc0: 0a20 2020 2073 7461 7274 5f6e 6577 6c69  .    start_newli
+00049fd0: 6e65 3d6f 7074 732e 6765 7428 2773 7461  ne=opts.get('sta
+00049fe0: 7274 5f6e 6577 6c69 6e65 272c 4661 6c73  rt_newline',Fals
+00049ff0: 6529 0a20 2020 2065 6e64 5f6e 6577 6c69  e).    end_newli
+0004a000: 6e65 3d6f 7074 732e 6765 7428 2765 6e64  ne=opts.get('end
+0004a010: 5f6e 6577 6c69 6e65 272c 6f70 7473 2e67  _newline',opts.g
+0004a020: 6574 2827 6e65 776c 696e 6527 2c54 7275  et('newline',Tru
+0004a030: 6529 290a 2020 2020 6c6f 673d 6f70 7473  e)).    log=opts
+0004a040: 2e67 6574 2827 6c6f 6727 2c4e 6f6e 6529  .get('log',None)
+0004a050: 0a20 2020 2069 6e74 6572 7661 6c3d 496e  .    interval=In
+0004a060: 7428 6f70 7473 2e67 6574 2827 696e 7465  t(opts.get('inte
+0004a070: 7276 616c 2729 2c35 290a 2020 2020 7469  rval'),5).    ti
+0004a080: 6d65 6f75 743d 496e 7428 6f70 7473 2e67  meout=Int(opts.g
+0004a090: 6574 2827 7469 6d65 6f75 7427 292c 3336  et('timeout'),36
+0004a0a0: 3030 2a31 3030 290a 2020 2020 6d6f 6465  00*100).    mode
+0004a0b0: 3d6f 7074 732e 6765 7428 276d 6f64 6527  =opts.get('mode'
+0004a0c0: 2c27 7327 290a 2020 2020 7374 6f70 3d6f  ,'s').    stop=o
+0004a0d0: 7074 735b 2773 746f 7027 5d20 6966 2027  pts['stop'] if '
+0004a0e0: 7374 6f70 2720 696e 206f 7074 7320 656c  stop' in opts el
+0004a0f0: 7365 2046 616c 7365 0a20 2020 2064 656c  se False.    del
+0004a100: 6179 3d6f 7074 735b 2764 656c 6179 275d  ay=opts['delay']
+0004a110: 2069 6620 2764 656c 6179 2720 696e 206f   if 'delay' in o
+0004a120: 7074 7320 656c 7365 2046 616c 7365 0a20  pts else False. 
+0004a130: 2020 206c 6f63 616c 5f70 7269 6e74 6564     local_printed
+0004a140: 3d46 616c 7365 0a20 2020 2069 6620 7374  =False.    if st
+0004a150: 6172 745f 6e65 776c 696e 653a 0a20 2020  art_newline:.   
+0004a160: 2020 2020 2070 7269 6e74 6628 2727 2c69       printf('',i
+0004a170: 676e 6f72 655f 656d 7074 793d 4661 6c73  gnore_empty=Fals
+0004a180: 652c 6361 6c6c 6572 5f70 6172 656e 743d  e,caller_parent=
+0004a190: 312c 7374 6172 745f 6e65 776c 696e 653d  1,start_newline=
+0004a1a0: 2761 7574 6f27 2c6c 6f67 3d6c 6f67 2c65  'auto',log=log,e
+0004a1b0: 6e64 3d27 272c 6d6f 6465 3d6d 6f64 6529  nd='',mode=mode)
+0004a1c0: 0a20 2020 2054 696d 653d 5449 4d45 2829  .    Time=TIME()
+0004a1d0: 0a20 2020 2077 6869 6c65 2054 7275 653a  .    while True:
+0004a1e0: 0a20 2020 2020 2020 2069 6620 4973 5472  .        if IsTr
+0004a1f0: 7565 2873 746f 7029 206f 7220 2874 696d  ue(stop) or (tim
+0004a200: 656f 7574 203e 2030 2061 6e64 2054 696d  eout > 0 and Tim
+0004a210: 652e 4f75 7428 7469 6d65 6f75 7429 293a  e.Out(timeout)):
+0004a220: 2062 7265 616b 0a20 2020 2020 2020 2069   break.        i
+0004a230: 6620 6465 6c61 793a 0a20 2020 2020 2020  f delay:.       
+0004a240: 2020 2020 2069 6620 2869 7369 6e73 7461       if (isinsta
+0004a250: 6e63 6528 6465 6c61 792c 696e 7429 2061  nce(delay,int) a
+0004a260: 6e64 206e 6f74 2020 5469 6d65 2e4f 7574  nd not  Time.Out
+0004a270: 2864 656c 6179 2929 206f 7220 6e6f 7420  (delay)) or not 
+0004a280: 4973 5472 7565 2864 656c 6179 293a 2023  IsTrue(delay): #
+0004a290: 6c65 7373 2064 656c 6179 2074 696d 6520  less delay time 
+0004a2a0: 7468 656e 2073 6b69 7020 7072 6f67 7265  then skip progre
+0004a2b0: 7373 206c 6f67 0a20 2020 2020 2020 2020  ss log.         
+0004a2c0: 2020 2020 2020 2074 696d 652e 736c 6565         time.slee
+0004a2d0: 7028 302e 3329 0a20 2020 2020 2020 2020  p(0.3).         
+0004a2e0: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
+0004a2f0: 2020 2020 2020 2020 7072 696e 7466 2873          printf(s
+0004a300: 796d 626f 6c2c 6469 7265 6374 3d54 7275  ymbol,direct=Tru
+0004a310: 652c 6c6f 673d 6c6f 672c 6c6f 675f 6c65  e,log=log,log_le
+0004a320: 7665 6c3d 312c 6d6f 6465 3d6d 6f64 6529  vel=1,mode=mode)
+0004a330: 0a20 2020 2020 2020 206c 6f63 616c 5f70  .        local_p
+0004a340: 7269 6e74 6564 3d54 7275 650a 2020 2020  rinted=True.    
+0004a350: 2020 2020 7469 6d65 2e73 6c65 6570 2869      time.sleep(i
+0004a360: 6e74 6572 7661 6c29 0a20 2020 2069 6620  nterval).    if 
+0004a370: 656e 645f 6e65 776c 696e 6520 616e 6420  end_newline and 
+0004a380: 6c6f 6361 6c5f 7072 696e 7465 643a 0a20  local_printed:. 
+0004a390: 2020 2020 2020 2070 7269 6e74 6628 2727         printf(''
+0004a3a0: 2c69 676e 6f72 655f 656d 7074 793d 4661  ,ignore_empty=Fa
+0004a3b0: 6c73 652c 6361 6c6c 6572 5f70 6172 656e  lse,caller_paren
+0004a3c0: 743d 312c 6e6f 5f69 6e74 726f 3d54 7275  t=1,no_intro=Tru
+0004a3d0: 652c 6c6f 673d 6c6f 672c 6d6f 6465 3d6d  e,log=log,mode=m
+0004a3e0: 6f64 6529 0a0a 0a23 6966 205f 5f6e 616d  ode)...#if __nam
+0004a3f0: 655f 5f20 3d3d 2022 5f5f 6d61 696e 5f5f  e__ == "__main__
+0004a400: 223a 0a23 2020 2020 2320 496e 7465 6765  ":.#    # Intege
+0004a410: 720a 2320 2020 2070 7269 6e74 2822 4765  r.#    print("Ge
+0004a420: 7428 3132 3334 3529 3a22 2c47 6574 2831  t(12345):",Get(1
+0004a430: 3233 3435 2929 0a23 2020 2020 7072 696e  2345)).#    prin
+0004a440: 7428 2247 6574 2831 3233 3435 2c31 293a  t("Get(12345,1):
+0004a450: 222c 4765 7428 3132 3334 352c 3129 290a  ",Get(12345,1)).
```

### Comparing `kmport-2.1.4/kmport.egg-info/PKG-INFO` & `kmport-2.1.5/kmport.egg-info/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: kmport
-Version: 2.1.4
+Version: 2.1.5
 Summary: Extended import function
 Home-page: https://github.com/kagepark/Import
 Author: Kage Park
 License: MIT
 Classifier: Programming Language :: Python :: 2
 Classifier: Programming Language :: Python :: 3
 Classifier: License :: OSI Approved :: MIT License
```

### Comparing `kmport-2.1.4/setup.py` & `kmport-2.1.5/setup.py`

 * *Files identical despite different names*

