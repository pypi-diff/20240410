# Comparing `tmp/kolibri_light-0.3.0-py3-none-any.whl.zip` & `tmp/kolibri_light-0.3.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,9 +1,9 @@
-Zip file size: 1685116 bytes, number of entries: 780
--rw-r--r--  2.0 unx        5 b- defN 24-Apr-08 23:01 kolibri/VERSION
+Zip file size: 1683828 bytes, number of entries: 780
+-rw-r--r--  2.0 unx        5 b- defN 24-Apr-10 16:42 kolibri/VERSION
 -rw-r--r--  2.0 unx     4514 b- defN 24-Apr-08 20:27 kolibri/__init__.py
 -rw-r--r--  2.0 unx    16782 b- defN 24-Apr-06 12:47 kolibri/app.py
 -rw-r--r--  2.0 unx     3190 b- defN 24-Apr-06 12:47 kolibri/config.py
 -rw-r--r--  2.0 unx     1902 b- defN 24-Apr-06 12:47 kolibri/config_loader.py
 -rw-r--r--  2.0 unx     3814 b- defN 24-Apr-06 12:47 kolibri/default_configs.py
 -rw-r--r--  2.0 unx     5968 b- defN 24-Apr-06 12:47 kolibri/errors.py
 -rw-r--r--  2.0 unx      795 b- defN 24-Apr-06 12:47 kolibri/logger.py
@@ -110,26 +110,26 @@
 -rw-r--r--  2.0 unx    13671 b- defN 24-Apr-06 12:47 kolibri/backend/bn/structure/structure_model.py
 -rw-r--r--  2.0 unx        0 b- defN 24-Apr-06 12:47 kolibri/backend/generators/__init__.py
 -rw-r--r--  2.0 unx        0 b- defN 24-Apr-05 08:49 kolibri/backend/model_abstractions/__init__.py
 -rw-r--r--  2.0 unx     7922 b- defN 24-Apr-05 10:17 kolibri/backend/model_abstractions/model_object.py
 -rw-r--r--  2.0 unx     3106 b- defN 24-Apr-05 13:42 kolibri/backend/model_abstractions/model_params.py
 -rw-r--r--  2.0 unx     2611 b- defN 24-Apr-08 20:27 kolibri/backend/pytorch/__init__.py
 -rw-r--r--  2.0 unx      618 b- defN 24-Apr-02 15:34 kolibri/backend/pytorch/class_utils.py
--rw-r--r--  2.0 unx    69867 b- defN 24-Apr-08 22:12 kolibri/backend/pytorch/data.py
+-rw-r--r--  2.0 unx    69940 b- defN 24-Apr-08 23:52 kolibri/backend/pytorch/data.py
 -rw-r--r--  2.0 unx    13971 b- defN 24-Apr-08 20:27 kolibri/backend/pytorch/file_utils.py
 -rw-r--r--  2.0 unx    12239 b- defN 24-Apr-08 20:31 kolibri/backend/pytorch/inference_utils.py
 -rw-r--r--  2.0 unx    10900 b- defN 24-Apr-08 15:04 kolibri/backend/pytorch/optim.py
 -rw-r--r--  2.0 unx     3674 b- defN 24-Apr-08 15:04 kolibri/backend/pytorch/samplers.py
--rw-r--r--  2.0 unx     8216 b- defN 24-Apr-08 20:26 kolibri/backend/pytorch/splitter.py
--rw-r--r--  2.0 unx     9749 b- defN 24-Apr-08 15:04 kolibri/backend/pytorch/tokenization.py
+-rw-r--r--  2.0 unx     7098 b- defN 24-Apr-09 17:08 kolibri/backend/pytorch/splitter.py
+-rw-r--r--  2.0 unx     8365 b- defN 24-Apr-08 23:29 kolibri/backend/pytorch/tokenization.py
 -rw-r--r--  2.0 unx    14087 b- defN 24-Apr-08 20:31 kolibri/backend/pytorch/training_utils.py
--rw-r--r--  2.0 unx     4333 b- defN 24-Apr-08 10:03 kolibri/backend/pytorch/datasets/__init__.py
+-rw-r--r--  2.0 unx     4332 b- defN 24-Apr-09 21:23 kolibri/backend/pytorch/datasets/__init__.py
 -rw-r--r--  2.0 unx     9448 b- defN 24-Apr-08 20:26 kolibri/backend/pytorch/datasets/base.py
 -rw-r--r--  2.0 unx    91543 b- defN 24-Apr-08 20:28 kolibri/backend/pytorch/datasets/document_classification.py
--rw-r--r--  2.0 unx   202979 b- defN 24-Apr-08 20:28 kolibri/backend/pytorch/datasets/sequence_labeling.py
+-rw-r--r--  2.0 unx   200824 b- defN 24-Apr-09 22:07 kolibri/backend/pytorch/datasets/sequence_labeling.py
 -rw-r--r--  2.0 unx     2473 b- defN 24-Apr-08 20:26 kolibri/backend/pytorch/embeddings/__init__.py
 -rw-r--r--  2.0 unx     8074 b- defN 24-Apr-08 20:28 kolibri/backend/pytorch/embeddings/base.py
 -rw-r--r--  2.0 unx    30840 b- defN 24-Apr-08 20:29 kolibri/backend/pytorch/embeddings/document.py
 -rw-r--r--  2.0 unx    10954 b- defN 24-Apr-08 20:29 kolibri/backend/pytorch/embeddings/image.py
 -rw-r--r--  2.0 unx    29250 b- defN 24-Apr-08 20:30 kolibri/backend/pytorch/embeddings/legacy.py
 -rw-r--r--  2.0 unx    66585 b- defN 24-Apr-08 20:29 kolibri/backend/pytorch/embeddings/token.py
 -rw-r--r--  2.0 unx    63311 b- defN 24-Apr-08 20:28 kolibri/backend/pytorch/embeddings/transformer.py
@@ -158,15 +158,15 @@
 -rw-r--r--  2.0 unx      437 b- defN 24-Apr-02 15:34 kolibri/backend/pytorch/nn/recurrent.py
 -rw-r--r--  2.0 unx      387 b- defN 24-Apr-02 15:34 kolibri/backend/pytorch/nn/distance/__init__.py
 -rw-r--r--  2.0 unx     1191 b- defN 24-Apr-02 15:34 kolibri/backend/pytorch/nn/distance/cosine.py
 -rw-r--r--  2.0 unx     1838 b- defN 24-Apr-02 15:34 kolibri/backend/pytorch/nn/distance/euclidean.py
 -rw-r--r--  2.0 unx     3718 b- defN 24-Apr-02 15:34 kolibri/backend/pytorch/nn/distance/hyperbolic.py
 -rw-r--r--  2.0 unx      169 b- defN 24-Apr-02 15:34 kolibri/backend/pytorch/trainers/__init__.py
 -rw-r--r--  2.0 unx    17302 b- defN 24-Apr-08 20:31 kolibri/backend/pytorch/trainers/language_model_trainer.py
--rw-r--r--  2.0 unx    39933 b- defN 24-Apr-08 20:50 kolibri/backend/pytorch/trainers/trainer.py
+-rw-r--r--  2.0 unx    40149 b- defN 24-Apr-10 16:41 kolibri/backend/pytorch/trainers/trainer.py
 -rw-r--r--  2.0 unx     1092 b- defN 24-Apr-02 15:34 kolibri/backend/pytorch/trainers/plugins/__init__.py
 -rw-r--r--  2.0 unx     8498 b- defN 24-Apr-08 15:04 kolibri/backend/pytorch/trainers/plugins/base.py
 -rw-r--r--  2.0 unx     4386 b- defN 24-Apr-02 15:34 kolibri/backend/pytorch/trainers/plugins/metric_records.py
 -rw-r--r--  2.0 unx        0 b- defN 24-Apr-02 15:34 kolibri/backend/pytorch/trainers/plugins/functional/__init__.py
 -rw-r--r--  2.0 unx     4279 b- defN 24-Apr-08 20:26 kolibri/backend/pytorch/trainers/plugins/functional/anneal_on_plateau.py
 -rw-r--r--  2.0 unx     1340 b- defN 24-Apr-08 20:26 kolibri/backend/pytorch/trainers/plugins/functional/checkpoints.py
 -rw-r--r--  2.0 unx     2389 b- defN 24-Apr-08 20:26 kolibri/backend/pytorch/trainers/plugins/functional/linear_scheduler.py
@@ -770,13 +770,13 @@
 -rw-r--r--  2.0 unx     1128 b- defN 23-Aug-26 16:58 tests/synthesizer/losses/test_conditional_loss.py
 -rw-r--r--  2.0 unx      812 b- defN 23-Aug-26 16:58 tests/synthesizer/losses/test_gradient_penalty.py
 -rw-r--r--  2.0 unx        0 b- defN 23-Aug-26 16:58 tests/synthesizer/models/__init__.py
 -rw-r--r--  2.0 unx     1214 b- defN 23-Aug-26 16:58 tests/synthesizer/models/test_critic.py
 -rw-r--r--  2.0 unx     4972 b- defN 23-Aug-26 16:58 tests/synthesizer/models/test_generator.py
 -rw-r--r--  2.0 unx        0 b- defN 23-Aug-26 16:58 tests/synthesizer/synthesizer/__init__.py
 -rw-r--r--  2.0 unx     4090 b- defN 23-Aug-26 16:58 tests/synthesizer/synthesizer/test_synthesizer.py
--rw-r--r--  2.0 unx    34572 b- defN 24-Apr-08 23:02 kolibri_light-0.3.0.dist-info/LICENCE.txt
--rw-r--r--  2.0 unx     4840 b- defN 24-Apr-08 23:02 kolibri_light-0.3.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Apr-08 23:02 kolibri_light-0.3.0.dist-info/WHEEL
--rw-r--r--  2.0 unx       14 b- defN 24-Apr-08 23:02 kolibri_light-0.3.0.dist-info/top_level.txt
--rw-rw-r--  2.0 unx    76395 b- defN 24-Apr-08 23:02 kolibri_light-0.3.0.dist-info/RECORD
-780 files, 6218880 bytes uncompressed, 1561494 bytes compressed:  74.9%
+-rw-r--r--  2.0 unx    34572 b- defN 24-Apr-10 16:42 kolibri_light-0.3.1.dist-info/LICENCE.txt
+-rw-r--r--  2.0 unx     4840 b- defN 24-Apr-10 16:42 kolibri_light-0.3.1.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-10 16:42 kolibri_light-0.3.1.dist-info/WHEEL
+-rw-r--r--  2.0 unx       14 b- defN 24-Apr-10 16:42 kolibri_light-0.3.1.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx    76395 b- defN 24-Apr-10 16:42 kolibri_light-0.3.1.dist-info/RECORD
+780 files, 6214511 bytes uncompressed, 1560206 bytes compressed:  74.9%
```

## zipnote {}

```diff
@@ -2319,23 +2319,23 @@
 
 Filename: tests/synthesizer/synthesizer/__init__.py
 Comment: 
 
 Filename: tests/synthesizer/synthesizer/test_synthesizer.py
 Comment: 
 
-Filename: kolibri_light-0.3.0.dist-info/LICENCE.txt
+Filename: kolibri_light-0.3.1.dist-info/LICENCE.txt
 Comment: 
 
-Filename: kolibri_light-0.3.0.dist-info/METADATA
+Filename: kolibri_light-0.3.1.dist-info/METADATA
 Comment: 
 
-Filename: kolibri_light-0.3.0.dist-info/WHEEL
+Filename: kolibri_light-0.3.1.dist-info/WHEEL
 Comment: 
 
-Filename: kolibri_light-0.3.0.dist-info/top_level.txt
+Filename: kolibri_light-0.3.1.dist-info/top_level.txt
 Comment: 
 
-Filename: kolibri_light-0.3.0.dist-info/RECORD
+Filename: kolibri_light-0.3.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## kolibri/VERSION

```diff
@@ -1 +1 @@
-0.3.0
+0.3.1
```

## kolibri/backend/pytorch/data.py

```diff
@@ -821,15 +821,18 @@
         # if text is passed, instantiate sentence with tokens (words)
         if isinstance(text, str):
             text = Sentence._handle_problem_characters(text)
             words = tokenizer.tokenize(text)
         elif text and isinstance(text[0], Token):
             for t in text:
                 self._add_token(t)
-            self.tokens[-1].whitespace_after = 0
+            try:
+                self.tokens[-1].whitespace_after = 0
+            except IndexError:
+                pass
             return
         else:
             words = cast(List[str], text)
             text = " ".join(words)
 
         # determine token positions and whitespace_after flag
         current_offset: int = 0
```

## kolibri/backend/pytorch/splitter.py

```diff
@@ -3,15 +3,14 @@
 
 from segtok.segmenter import split_multi
 
 from kolibri.backend.pytorch.data import Sentence
 from kolibri.backend.pytorch.tokenization import (
     SciSpacyTokenizer,
     SegtokTokenizer,
-    SpacyTokenizer,
     Tokenizer,
 )
 
 
 class SentenceSplitter(ABC):
     r"""An abstract class representing a :class:`SentenceSplitter`.
 
@@ -96,105 +95,70 @@
         return self._tokenizer
 
     @tokenizer.setter
     def tokenizer(self, value: Tokenizer):
         self._tokenizer = value
 
 
-class SpacySentenceSplitter(SentenceSplitter):
-    """Sentence Splitter using Spacy.
-
-    Implementation of :class:`SentenceSplitter`, using models from Spacy.
+class TagSentenceSplitter(SentenceSplitter):
+    """SentenceSplitter which assumes that there is a tag within the text that is used to mark sentence boundaries.
 
-    Args:
-        model: Spacy V2 model or the name of the model to load.
-        tokenizer: Custom tokenizer to use (default :class:`SpacyTokenizer`)
+    Implementation of :class:`SentenceSplitter` which assumes that there is a special tag within
+    the text that is used to mark sentence boundaries.
     """
 
-    def __init__(self, model: Union[Any, str], tokenizer: Optional[Tokenizer] = None) -> None:
+    def __init__(self, tag: str, tokenizer: Tokenizer = SegtokTokenizer()) -> None:
         super().__init__()
+        self._tokenizer = tokenizer
+        self.tag = tag
 
-        try:
-            import spacy
-            from spacy.language import Language
-        except ImportError:
-            raise ImportError(
-                "Please install spacy v3.4.4 or higher before using the SpacySentenceSplitter, "
-                "otherwise you can use SegtokSentenceSplitter as alternative implementation."
-            )
+    def _perform_split(self, text: str) -> List[Sentence]:
+        plain_sentences = text.split(self.tag)
 
-        if isinstance(model, Language):
-            self.model: Language = model
-        else:
-            assert isinstance(model, str)
-            self.model = spacy.load(model)
-
-        if tokenizer is None:
-            self._tokenizer: Tokenizer = SpacyTokenizer("en_core_sci_sm")
-        else:
-            self._tokenizer = tokenizer
+        sentences = []
+        last_offset = 0
 
-    def _perform_split(self, text: str) -> List[Sentence]:
-        document = self.model(text)
+        for sentence in plain_sentences:
+            if len(sentence.strip()) == 0:
+                continue
 
-        sentences = [
-            Sentence(
-                text=str(spacy_sent),
-                use_tokenizer=self._tokenizer,
-                start_position=spacy_sent.start_char,
-            )
-            for spacy_sent in document.sents
-            if len(str(spacy_sent)) > 0
-        ]
+            sentences += [
+                Sentence(
+                    text=sentence,
+                    use_tokenizer=self._tokenizer,
+                    start_position=last_offset,
+                )
+            ]
+
+            last_offset += len(sentence) + len(self.tag)
 
         return sentences
 
     @property
     def tokenizer(self) -> Tokenizer:
         return self._tokenizer
 
     @tokenizer.setter
     def tokenizer(self, value: Tokenizer):
         self._tokenizer = value
 
     @property
     def name(self) -> str:
-        return (
-            self.__class__.__name__
-            + "_"
-            + self.model.meta["name"]
-            + "_"
-            + self.model.meta["version"]
-            + "_"
-            + self._tokenizer.name
-        )
-
-
-class SciSpacySentenceSplitter(SpacySentenceSplitter):
-    """Sentence splitter using the spacy model `en_core_sci_sm`.
-
-    Convenience class to instantiate :class:`SpacySentenceSplitter` with Spacy model `en_core_sci_sm`
-    for sentence splitting and :class:`SciSpacyTokenizer` as tokenizer.
-    """
-
-    def __init__(self) -> None:
-        super().__init__("en_core_sci_sm", SciSpacyTokenizer())
-
+        return self.__class__.__name__ + "_" + self.tag + "_" + self._tokenizer.name
 
-class TagSentenceSplitter(SentenceSplitter):
+class TokenizedTagSentenceSplitter(SentenceSplitter):
     """SentenceSplitter which assumes that there is a tag within the text that is used to mark sentence boundaries.
 
     Implementation of :class:`SentenceSplitter` which assumes that there is a special tag within
     the text that is used to mark sentence boundaries.
     """
 
-    def __init__(self, tag: str, tokenizer: Tokenizer = SegtokTokenizer()) -> None:
+    def __init__(self, tags: List[str]) -> None:
         super().__init__()
-        self._tokenizer = tokenizer
-        self.tag = tag
+        self.tags = tags
 
     def _perform_split(self, text: str) -> List[Sentence]:
         plain_sentences = text.split(self.tag)
 
         sentences = []
         last_offset = 0
 
@@ -221,16 +185,14 @@
     @tokenizer.setter
     def tokenizer(self, value: Tokenizer):
         self._tokenizer = value
 
     @property
     def name(self) -> str:
         return self.__class__.__name__ + "_" + self.tag + "_" + self._tokenizer.name
-
-
 class NewlineSentenceSplitter(TagSentenceSplitter):
     r"""Sentence Splitter using newline as boundary marker.
 
     Convenience class to instantiate :class:`SentenceTagSplitter` with newline ("\n") as
     sentence boundary marker.
     """
```

## kolibri/backend/pytorch/tokenization.py

```diff
@@ -24,59 +24,14 @@
         raise NotImplementedError
 
     @property
     def name(self) -> str:
         return self.__class__.__name__
 
 
-class SpacyTokenizer(Tokenizer):
-    """Tokenizer using spacy under the hood.
-
-    Args:
-        model: a Spacy V2 model or the name of the model to load.
-    """
-
-    def __init__(self, model) -> None:
-        super().__init__()
-
-        try:
-            import spacy
-            from spacy.language import Language
-        except ImportError:
-            raise ImportError(
-                "Please install Spacy v3.4.4 or better before using the Spacy tokenizer, "
-                "otherwise you can use SegtokTokenizer as advanced tokenizer."
-            )
-
-        if isinstance(model, Language):
-            self.model = model
-        elif isinstance(model, str):
-            self.model = spacy.load(model)
-        else:
-            raise AssertionError(
-                "Unexpected type of parameter model. Please provide a loaded "
-                "spacy model or the name of the model to load."
-            )
-
-    def tokenize(self, text: str) -> List[str]:
-        from spacy.tokens.doc import Doc
-
-        doc: Doc = self.model.make_doc(text)
-        words: List[str] = []
-        for word in doc:
-            if len(word.text.strip()) == 0:
-                continue
-            words.append(word.text)
-        return words
-
-    @property
-    def name(self) -> str:
-        return self.__class__.__name__ + "_" + self.model.meta["name"] + "_" + self.model.meta["version"]
-
-
 class SegtokTokenizer(Tokenizer):
     """Tokenizer using segtok, a third party library dedicated to rules-based Indo-European languages.
 
     For further details see: https://github.com/fnl/segtok
     """
 
     def __init__(self) -> None:
```

## kolibri/backend/pytorch/datasets/__init__.py

```diff
@@ -1,14 +1,14 @@
 # Expose base classses
 from .base import (
     DataLoader,
     FlairDatapointDataset,
     MongoDataset,
     SentenceDataset,
-    StringDataset,
+    StringDataset
 )
 
 
 # Expose all document classification datasets
 from .document_classification import (
     AGNEWS,
     AMAZON_REVIEWS,
```

## kolibri/backend/pytorch/datasets/sequence_labeling.py

```diff
@@ -1,12687 +1,12552 @@
 00000000: 696d 706f 7274 2063 6f70 790a 696d 706f  import copy.impo
 00000010: 7274 206a 736f 6e0a 696d 706f 7274 206c  rt json.import l
 00000020: 6f67 6769 6e67 0a69 6d70 6f72 7420 6f73  ogging.import os
-00000030: 0a69 6d70 6f72 7420 7265 0a69 6d70 6f72  .import re.impor
-00000040: 7420 7368 7574 696c 0a66 726f 6d20 636f  t shutil.from co
-00000050: 6c6c 6563 7469 6f6e 7320 696d 706f 7274  llections import
-00000060: 2064 6566 6175 6c74 6469 6374 0a66 726f   defaultdict.fro
-00000070: 6d20 7061 7468 6c69 6220 696d 706f 7274  m pathlib import
-00000080: 2050 6174 680a 6672 6f6d 2074 7970 696e   Path.from typin
-00000090: 6720 696d 706f 7274 2028 0a20 2020 2041  g import (.    A
-000000a0: 6e79 2c0a 2020 2020 4465 6661 756c 7444  ny,.    DefaultD
-000000b0: 6963 742c 0a20 2020 2044 6963 742c 0a20  ict,.    Dict,. 
-000000c0: 2020 2049 7465 7261 626c 652c 0a20 2020     Iterable,.   
-000000d0: 2049 7465 7261 746f 722c 0a20 2020 204c   Iterator,.    L
-000000e0: 6973 742c 0a20 2020 204f 7074 696f 6e61  ist,.    Optiona
-000000f0: 6c2c 0a20 2020 2054 7570 6c65 2c0a 2020  l,.    Tuple,.  
-00000100: 2020 556e 696f 6e2c 0a20 2020 2063 6173    Union,.    cas
-00000110: 742c 0a29 0a0a 6672 6f6d 2074 6f72 6368  t,.)..from torch
-00000120: 2e75 7469 6c73 2e64 6174 6120 696d 706f  .utils.data impo
-00000130: 7274 2043 6f6e 6361 7444 6174 6173 6574  rt ConcatDataset
-00000140: 2c20 4461 7461 7365 740a 0a69 6d70 6f72  , Dataset..impor
-00000150: 7420 6b6f 6c69 6272 692e 6261 636b 656e  t kolibri.backen
-00000160: 642e 7079 746f 7263 680a 6672 6f6d 206b  d.pytorch.from k
-00000170: 6f6c 6962 7269 2e62 6163 6b65 6e64 2e70  olibri.backend.p
-00000180: 7974 6f72 6368 2e64 6174 6120 696d 706f  ytorch.data impo
-00000190: 7274 2028 0a20 2020 2043 6f72 7075 732c  rt (.    Corpus,
-000001a0: 0a20 2020 2046 6c61 6972 4461 7461 7365  .    FlairDatase
-000001b0: 742c 0a20 2020 204d 756c 7469 436f 7270  t,.    MultiCorp
-000001c0: 7573 2c0a 2020 2020 5265 6c61 7469 6f6e  us,.    Relation
-000001d0: 2c0a 2020 2020 5365 6e74 656e 6365 2c0a  ,.    Sentence,.
-000001e0: 2020 2020 546f 6b65 6e2c 0a20 2020 2067      Token,.    g
-000001f0: 6574 5f73 7061 6e73 5f66 726f 6d5f 6269  et_spans_from_bi
-00000200: 6f2c 0a29 0a66 726f 6d20 6b6f 6c69 6272  o,.).from kolibr
-00000210: 692e 6261 636b 656e 642e 7079 746f 7263  i.backend.pytorc
-00000220: 682e 6461 7461 7365 7473 2e62 6173 6520  h.datasets.base 
-00000230: 696d 706f 7274 2066 696e 645f 7472 6169  import find_trai
-00000240: 6e5f 6465 765f 7465 7374 5f66 696c 6573  n_dev_test_files
-00000250: 0a66 726f 6d20 6b6f 6c69 6272 692e 6261  .from kolibri.ba
-00000260: 636b 656e 642e 7079 746f 7263 682e 6669  ckend.pytorch.fi
-00000270: 6c65 5f75 7469 6c73 2069 6d70 6f72 7420  le_utils import 
-00000280: 6361 6368 6564 5f70 6174 682c 2075 6e70  cached_path, unp
-00000290: 6163 6b5f 6669 6c65 0a0a 6c6f 6720 3d20  ack_file..log = 
-000002a0: 6c6f 6767 696e 672e 6765 744c 6f67 6765  logging.getLogge
-000002b0: 7228 226b 6f6c 6962 7269 2229 0a0a 0a63  r("kolibri")...c
-000002c0: 6c61 7373 204d 756c 7469 4669 6c65 4a73  lass MultiFileJs
-000002d0: 6f6e 6c43 6f72 7075 7328 436f 7270 7573  onlCorpus(Corpus
-000002e0: 293a 0a20 2020 2022 2222 5468 6973 2063  ):.    """This c
-000002f0: 6c61 7373 2072 6570 7265 7365 6e74 7320  lass represents 
-00000300: 6120 6765 6e65 7269 6320 4a73 6f6e 6c20  a generic Jsonl 
-00000310: 636f 7270 7573 2077 6974 6820 6d75 6c74  corpus with mult
-00000320: 6970 6c65 2074 7261 696e 2c20 6465 762c  iple train, dev,
-00000330: 2061 6e64 2074 6573 7420 6669 6c65 732e   and test files.
-00000340: 2222 220a 0a20 2020 2064 6566 205f 5f69  """..    def __i
-00000350: 6e69 745f 5f28 0a20 2020 2020 2020 2073  nit__(.        s
-00000360: 656c 662c 0a20 2020 2020 2020 2074 7261  elf,.        tra
-00000370: 696e 5f66 696c 6573 3d4e 6f6e 652c 0a20  in_files=None,. 
-00000380: 2020 2020 2020 2074 6573 745f 6669 6c65         test_file
-00000390: 733d 4e6f 6e65 2c0a 2020 2020 2020 2020  s=None,.        
-000003a0: 6465 765f 6669 6c65 733d 4e6f 6e65 2c0a  dev_files=None,.
-000003b0: 2020 2020 2020 2020 656e 636f 6469 6e67          encoding
-000003c0: 3a20 7374 7220 3d20 2275 7466 2d38 222c  : str = "utf-8",
-000003d0: 0a20 2020 2020 2020 2074 6578 745f 636f  .        text_co
-000003e0: 6c75 6d6e 5f6e 616d 653a 2073 7472 203d  lumn_name: str =
-000003f0: 2022 6461 7461 222c 0a20 2020 2020 2020   "data",.       
-00000400: 206c 6162 656c 5f63 6f6c 756d 6e5f 6e61   label_column_na
-00000410: 6d65 3a20 7374 7220 3d20 226c 6162 656c  me: str = "label
-00000420: 222c 0a20 2020 2020 2020 206d 6574 6164  ",.        metad
-00000430: 6174 615f 636f 6c75 6d6e 5f6e 616d 653a  ata_column_name:
-00000440: 2073 7472 203d 2022 6d65 7461 6461 7461   str = "metadata
-00000450: 222c 0a20 2020 2020 2020 206c 6162 656c  ",.        label
-00000460: 5f74 7970 653a 2073 7472 203d 2022 6e65  _type: str = "ne
-00000470: 7222 2c0a 2020 2020 2020 2020 2a2a 636f  r",.        **co
-00000480: 7270 7573 6172 6773 2c0a 2020 2020 2920  rpusargs,.    ) 
-00000490: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
-000004a0: 2022 2222 496e 7374 616e 7469 6174 6573   """Instantiates
-000004b0: 2061 204d 756c 6946 696c 654a 736f 6e6c   a MuliFileJsonl
-000004c0: 436f 7270 7573 2061 732c 2065 2e67 2e2c  Corpus as, e.g.,
-000004d0: 2063 7265 6174 6564 2077 6974 6820 646f   created with do
-000004e0: 6363 616e 6f73 204a 534f 4e4c 2065 7870  ccanos JSONL exp
-000004f0: 6f72 742e 0a0a 2020 2020 2020 2020 4e6f  ort...        No
-00000500: 7465 2074 6861 7420 6174 206c 6561 7374  te that at least
-00000510: 206f 6e65 206f 6620 7472 6169 6e5f 6669   one of train_fi
-00000520: 6c65 732c 2074 6573 745f 6669 6c65 732c  les, test_files,
-00000530: 2061 6e64 2064 6576 5f66 696c 6573 206d   and dev_files m
-00000540: 7573 7420 636f 6e74 6169 6e20 6f6e 6520  ust contain one 
-00000550: 7061 7468 2e0a 2020 2020 2020 2020 4f74  path..        Ot
-00000560: 6865 7277 6973 652c 2074 6865 2069 6e69  herwise, the ini
-00000570: 7469 616c 697a 6174 696f 6e20 7769 6c6c  tialization will
-00000580: 2066 6169 6c2e 0a0a 2020 2020 2020 2020   fail...        
-00000590: 3a70 6172 616d 2063 6f72 7075 7361 7267  :param corpusarg
-000005a0: 733a 2041 6464 6974 696f 6e61 6c20 6172  s: Additional ar
-000005b0: 6775 6d65 6e74 7320 666f 7220 436f 7270  guments for Corp
-000005c0: 7573 2069 6e69 7469 616c 697a 6174 696f  us initializatio
-000005d0: 6e0a 2020 2020 2020 2020 3a70 6172 616d  n.        :param
-000005e0: 2074 7261 696e 5f66 696c 6573 3a20 7468   train_files: th
-000005f0: 6520 6e61 6d65 206f 6620 7468 6520 7472  e name of the tr
-00000600: 6169 6e20 6669 6c65 730a 2020 2020 2020  ain files.      
-00000610: 2020 3a70 6172 616d 2074 6573 745f 6669    :param test_fi
-00000620: 6c65 733a 2074 6865 206e 616d 6520 6f66  les: the name of
-00000630: 2074 6865 2074 6573 7420 6669 6c65 730a   the test files.
-00000640: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
-00000650: 6576 5f66 696c 6573 3a20 7468 6520 6e61  ev_files: the na
-00000660: 6d65 206f 6620 7468 6520 6465 7620 6669  me of the dev fi
-00000670: 6c65 732c 2069 6620 656d 7074 792c 2064  les, if empty, d
-00000680: 6576 2064 6174 6120 6973 2073 616d 706c  ev data is sampl
-00000690: 6564 2066 726f 6d20 7472 6169 6e0a 2020  ed from train.  
-000006a0: 2020 2020 2020 3a70 6172 616d 2074 6578        :param tex
-000006b0: 745f 636f 6c75 6d6e 5f6e 616d 653a 204e  t_column_name: N
-000006c0: 616d 6520 6f66 2074 6865 2074 6578 7420  ame of the text 
-000006d0: 636f 6c75 6d6e 2069 6e73 6964 6520 7468  column inside th
-000006e0: 6520 6a73 6f6e 6c20 6669 6c65 732e 0a20  e jsonl files.. 
-000006f0: 2020 2020 2020 203a 7061 7261 6d20 6c61         :param la
-00000700: 6265 6c5f 636f 6c75 6d6e 5f6e 616d 653a  bel_column_name:
-00000710: 204e 616d 6520 6f66 2074 6865 206c 6162   Name of the lab
-00000720: 656c 2063 6f6c 756d 6e20 696e 7369 6465  el column inside
-00000730: 2074 6865 206a 736f 6e6c 2066 696c 6573   the jsonl files
-00000740: 2e0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
-00000750: 206d 6574 6164 6174 615f 636f 6c75 6d6e   metadata_column
-00000760: 5f6e 616d 653a 204e 616d 6520 6f66 2074  _name: Name of t
-00000770: 6865 206d 6574 6164 6174 6120 636f 6c75  he metadata colu
-00000780: 6d6e 2069 6e73 6964 6520 7468 6520 6a73  mn inside the js
-00000790: 6f6e 6c20 6669 6c65 732e 0a0a 2020 2020  onl files...    
-000007a0: 2020 2020 3a72 6169 7365 7320 5275 6e74      :raises Runt
-000007b0: 696d 6545 7272 6f72 3a20 4966 206e 6f20  imeError: If no 
-000007c0: 7061 7468 7320 6172 6520 6769 7665 6e0a  paths are given.
-000007d0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-000007e0: 2020 2020 7472 6169 6e3a 204f 7074 696f      train: Optio
-000007f0: 6e61 6c5b 4461 7461 7365 745d 203d 2028  nal[Dataset] = (
-00000800: 0a20 2020 2020 2020 2020 2020 2043 6f6e  .            Con
-00000810: 6361 7444 6174 6173 6574 280a 2020 2020  catDataset(.    
-00000820: 2020 2020 2020 2020 2020 2020 5b0a 2020              [.  
-00000830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000840: 2020 4a73 6f6e 6c44 6174 6173 6574 280a    JsonlDataset(.
-00000850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000860: 2020 2020 2020 2020 7472 6169 6e5f 6669          train_fi
-00000870: 6c65 2c0a 2020 2020 2020 2020 2020 2020  le,.            
-00000880: 2020 2020 2020 2020 2020 2020 7465 7874              text
-00000890: 5f63 6f6c 756d 6e5f 6e61 6d65 3d74 6578  _column_name=tex
-000008a0: 745f 636f 6c75 6d6e 5f6e 616d 652c 0a20  t_column_name,. 
-000008b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000008c0: 2020 2020 2020 206c 6162 656c 5f63 6f6c         label_col
-000008d0: 756d 6e5f 6e61 6d65 3d6c 6162 656c 5f63  umn_name=label_c
-000008e0: 6f6c 756d 6e5f 6e61 6d65 2c0a 2020 2020  olumn_name,.    
-000008f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000900: 2020 2020 6d65 7461 6461 7461 5f63 6f6c      metadata_col
-00000910: 756d 6e5f 6e61 6d65 3d6d 6574 6164 6174  umn_name=metadat
-00000920: 615f 636f 6c75 6d6e 5f6e 616d 652c 0a20  a_column_name,. 
-00000930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000940: 2020 2020 2020 206c 6162 656c 5f74 7970         label_typ
-00000950: 653d 6c61 6265 6c5f 7479 7065 2c0a 2020  e=label_type,.  
-00000960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000970: 2020 2020 2020 656e 636f 6469 6e67 3d65        encoding=e
-00000980: 6e63 6f64 696e 672c 0a20 2020 2020 2020  ncoding,.       
-00000990: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
-000009a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000009b0: 2020 2066 6f72 2074 7261 696e 5f66 696c     for train_fil
-000009c0: 6520 696e 2074 7261 696e 5f66 696c 6573  e in train_files
-000009d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000009e0: 205d 0a20 2020 2020 2020 2020 2020 2029   ].            )
-000009f0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00000a00: 7472 6169 6e5f 6669 6c65 7320 616e 6420  train_files and 
-00000a10: 7472 6169 6e5f 6669 6c65 735b 305d 0a20  train_files[0]. 
-00000a20: 2020 2020 2020 2020 2020 2065 6c73 6520             else 
-00000a30: 4e6f 6e65 0a20 2020 2020 2020 2029 0a0a  None.        )..
-00000a40: 2020 2020 2020 2020 2320 7265 6164 2069          # read i
-00000a50: 6e20 7465 7374 2066 696c 6520 6966 2065  n test file if e
-00000a60: 7869 7374 730a 2020 2020 2020 2020 7465  xists.        te
-00000a70: 7374 3a20 4f70 7469 6f6e 616c 5b44 6174  st: Optional[Dat
-00000a80: 6173 6574 5d20 3d20 280a 2020 2020 2020  aset] = (.      
-00000a90: 2020 2020 2020 436f 6e63 6174 4461 7461        ConcatData
-00000aa0: 7365 7428 0a20 2020 2020 2020 2020 2020  set(.           
-00000ab0: 2020 2020 205b 0a20 2020 2020 2020 2020       [.         
-00000ac0: 2020 2020 2020 2020 2020 204a 736f 6e6c             Jsonl
-00000ad0: 4461 7461 7365 7428 0a20 2020 2020 2020  Dataset(.       
+00000030: 0a69 6d70 6f72 7420 7265 2c20 7471 646d  .import re, tqdm
+00000040: 0a69 6d70 6f72 7420 7368 7574 696c 0a66  .import shutil.f
+00000050: 726f 6d20 636f 6c6c 6563 7469 6f6e 7320  rom collections 
+00000060: 696d 706f 7274 2064 6566 6175 6c74 6469  import defaultdi
+00000070: 6374 0a66 726f 6d20 7061 7468 6c69 6220  ct.from pathlib 
+00000080: 696d 706f 7274 2050 6174 680a 6672 6f6d  import Path.from
+00000090: 2074 7970 696e 6720 696d 706f 7274 2028   typing import (
+000000a0: 0a20 2020 2041 6e79 2c0a 2020 2020 4465  .    Any,.    De
+000000b0: 6661 756c 7444 6963 742c 0a20 2020 2044  faultDict,.    D
+000000c0: 6963 742c 0a20 2020 2049 7465 7261 626c  ict,.    Iterabl
+000000d0: 652c 0a20 2020 2049 7465 7261 746f 722c  e,.    Iterator,
+000000e0: 0a20 2020 204c 6973 742c 0a20 2020 204f  .    List,.    O
+000000f0: 7074 696f 6e61 6c2c 0a20 2020 2054 7570  ptional,.    Tup
+00000100: 6c65 2c0a 2020 2020 556e 696f 6e2c 0a20  le,.    Union,. 
+00000110: 2020 2063 6173 742c 0a29 0a0a 6672 6f6d     cast,.)..from
+00000120: 2074 6f72 6368 2e75 7469 6c73 2e64 6174   torch.utils.dat
+00000130: 6120 696d 706f 7274 2043 6f6e 6361 7444  a import ConcatD
+00000140: 6174 6173 6574 2c20 4461 7461 7365 740a  ataset, Dataset.
+00000150: 0a69 6d70 6f72 7420 6b6f 6c69 6272 692e  .import kolibri.
+00000160: 6261 636b 656e 642e 7079 746f 7263 680a  backend.pytorch.
+00000170: 6672 6f6d 206b 6f6c 6962 7269 2e62 6163  from kolibri.bac
+00000180: 6b65 6e64 2e70 7974 6f72 6368 2e64 6174  kend.pytorch.dat
+00000190: 6120 696d 706f 7274 2028 0a20 2020 2043  a import (.    C
+000001a0: 6f72 7075 732c 0a20 2020 2046 6c61 6972  orpus,.    Flair
+000001b0: 4461 7461 7365 742c 0a20 2020 204d 756c  Dataset,.    Mul
+000001c0: 7469 436f 7270 7573 2c0a 2020 2020 5265  tiCorpus,.    Re
+000001d0: 6c61 7469 6f6e 2c0a 2020 2020 5365 6e74  lation,.    Sent
+000001e0: 656e 6365 2c0a 2020 2020 546f 6b65 6e2c  ence,.    Token,
+000001f0: 0a20 2020 2067 6574 5f73 7061 6e73 5f66  .    get_spans_f
+00000200: 726f 6d5f 6269 6f2c 0a29 0a66 726f 6d20  rom_bio,.).from 
+00000210: 6b6f 6c69 6272 692e 6261 636b 656e 642e  kolibri.backend.
+00000220: 7079 746f 7263 682e 6461 7461 7365 7473  pytorch.datasets
+00000230: 2e62 6173 6520 696d 706f 7274 2066 696e  .base import fin
+00000240: 645f 7472 6169 6e5f 6465 765f 7465 7374  d_train_dev_test
+00000250: 5f66 696c 6573 0a66 726f 6d20 6b6f 6c69  _files.from koli
+00000260: 6272 692e 6261 636b 656e 642e 7079 746f  bri.backend.pyto
+00000270: 7263 682e 6669 6c65 5f75 7469 6c73 2069  rch.file_utils i
+00000280: 6d70 6f72 7420 6361 6368 6564 5f70 6174  mport cached_pat
+00000290: 682c 2075 6e70 6163 6b5f 6669 6c65 0a0a  h, unpack_file..
+000002a0: 6c6f 6720 3d20 6c6f 6767 696e 672e 6765  log = logging.ge
+000002b0: 744c 6f67 6765 7228 226b 6f6c 6962 7269  tLogger("kolibri
+000002c0: 2229 0a0a 0a63 6c61 7373 204d 756c 7469  ")...class Multi
+000002d0: 4669 6c65 4a73 6f6e 6c43 6f72 7075 7328  FileJsonlCorpus(
+000002e0: 436f 7270 7573 293a 0a20 2020 2022 2222  Corpus):.    """
+000002f0: 5468 6973 2063 6c61 7373 2072 6570 7265  This class repre
+00000300: 7365 6e74 7320 6120 6765 6e65 7269 6320  sents a generic 
+00000310: 4a73 6f6e 6c20 636f 7270 7573 2077 6974  Jsonl corpus wit
+00000320: 6820 6d75 6c74 6970 6c65 2074 7261 696e  h multiple train
+00000330: 2c20 6465 762c 2061 6e64 2074 6573 7420  , dev, and test 
+00000340: 6669 6c65 732e 2222 220a 0a20 2020 2064  files."""..    d
+00000350: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
+00000360: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
+00000370: 2020 2074 7261 696e 5f66 696c 6573 3d4e     train_files=N
+00000380: 6f6e 652c 0a20 2020 2020 2020 2074 6573  one,.        tes
+00000390: 745f 6669 6c65 733d 4e6f 6e65 2c0a 2020  t_files=None,.  
+000003a0: 2020 2020 2020 6465 765f 6669 6c65 733d        dev_files=
+000003b0: 4e6f 6e65 2c0a 2020 2020 2020 2020 656e  None,.        en
+000003c0: 636f 6469 6e67 3a20 7374 7220 3d20 2275  coding: str = "u
+000003d0: 7466 2d38 222c 0a20 2020 2020 2020 2074  tf-8",.        t
+000003e0: 6578 745f 636f 6c75 6d6e 5f6e 616d 653a  ext_column_name:
+000003f0: 2073 7472 203d 2022 6461 7461 222c 0a20   str = "data",. 
+00000400: 2020 2020 2020 206c 6162 656c 5f63 6f6c         label_col
+00000410: 756d 6e5f 6e61 6d65 3a20 7374 7220 3d20  umn_name: str = 
+00000420: 226c 6162 656c 222c 0a20 2020 2020 2020  "label",.       
+00000430: 206d 6574 6164 6174 615f 636f 6c75 6d6e   metadata_column
+00000440: 5f6e 616d 653a 2073 7472 203d 2022 6d65  _name: str = "me
+00000450: 7461 6461 7461 222c 0a20 2020 2020 2020  tadata",.       
+00000460: 206c 6162 656c 5f74 7970 653a 2073 7472   label_type: str
+00000470: 203d 2022 6e65 7222 2c0a 2020 2020 2020   = "ner",.      
+00000480: 2020 2a2a 636f 7270 7573 6172 6773 2c0a    **corpusargs,.
+00000490: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
+000004a0: 2020 2020 2020 2022 2222 496e 7374 616e         """Instan
+000004b0: 7469 6174 6573 2061 204d 756c 6946 696c  tiates a MuliFil
+000004c0: 654a 736f 6e6c 436f 7270 7573 2061 732c  eJsonlCorpus as,
+000004d0: 2065 2e67 2e2c 2063 7265 6174 6564 2077   e.g., created w
+000004e0: 6974 6820 646f 6363 616e 6f73 204a 534f  ith doccanos JSO
+000004f0: 4e4c 2065 7870 6f72 742e 0a0a 2020 2020  NL export...    
+00000500: 2020 2020 4e6f 7465 2074 6861 7420 6174      Note that at
+00000510: 206c 6561 7374 206f 6e65 206f 6620 7472   least one of tr
+00000520: 6169 6e5f 6669 6c65 732c 2074 6573 745f  ain_files, test_
+00000530: 6669 6c65 732c 2061 6e64 2064 6576 5f66  files, and dev_f
+00000540: 696c 6573 206d 7573 7420 636f 6e74 6169  iles must contai
+00000550: 6e20 6f6e 6520 7061 7468 2e0a 2020 2020  n one path..    
+00000560: 2020 2020 4f74 6865 7277 6973 652c 2074      Otherwise, t
+00000570: 6865 2069 6e69 7469 616c 697a 6174 696f  he initializatio
+00000580: 6e20 7769 6c6c 2066 6169 6c2e 0a0a 2020  n will fail...  
+00000590: 2020 2020 2020 3a70 6172 616d 2063 6f72        :param cor
+000005a0: 7075 7361 7267 733a 2041 6464 6974 696f  pusargs: Additio
+000005b0: 6e61 6c20 6172 6775 6d65 6e74 7320 666f  nal arguments fo
+000005c0: 7220 436f 7270 7573 2069 6e69 7469 616c  r Corpus initial
+000005d0: 697a 6174 696f 6e0a 2020 2020 2020 2020  ization.        
+000005e0: 3a70 6172 616d 2074 7261 696e 5f66 696c  :param train_fil
+000005f0: 6573 3a20 7468 6520 6e61 6d65 206f 6620  es: the name of 
+00000600: 7468 6520 7472 6169 6e20 6669 6c65 730a  the train files.
+00000610: 2020 2020 2020 2020 3a70 6172 616d 2074          :param t
+00000620: 6573 745f 6669 6c65 733a 2074 6865 206e  est_files: the n
+00000630: 616d 6520 6f66 2074 6865 2074 6573 7420  ame of the test 
+00000640: 6669 6c65 730a 2020 2020 2020 2020 3a70  files.        :p
+00000650: 6172 616d 2064 6576 5f66 696c 6573 3a20  aram dev_files: 
+00000660: 7468 6520 6e61 6d65 206f 6620 7468 6520  the name of the 
+00000670: 6465 7620 6669 6c65 732c 2069 6620 656d  dev files, if em
+00000680: 7074 792c 2064 6576 2064 6174 6120 6973  pty, dev data is
+00000690: 2073 616d 706c 6564 2066 726f 6d20 7472   sampled from tr
+000006a0: 6169 6e0a 2020 2020 2020 2020 3a70 6172  ain.        :par
+000006b0: 616d 2074 6578 745f 636f 6c75 6d6e 5f6e  am text_column_n
+000006c0: 616d 653a 204e 616d 6520 6f66 2074 6865  ame: Name of the
+000006d0: 2074 6578 7420 636f 6c75 6d6e 2069 6e73   text column ins
+000006e0: 6964 6520 7468 6520 6a73 6f6e 6c20 6669  ide the jsonl fi
+000006f0: 6c65 732e 0a20 2020 2020 2020 203a 7061  les..        :pa
+00000700: 7261 6d20 6c61 6265 6c5f 636f 6c75 6d6e  ram label_column
+00000710: 5f6e 616d 653a 204e 616d 6520 6f66 2074  _name: Name of t
+00000720: 6865 206c 6162 656c 2063 6f6c 756d 6e20  he label column 
+00000730: 696e 7369 6465 2074 6865 206a 736f 6e6c  inside the jsonl
+00000740: 2066 696c 6573 2e0a 2020 2020 2020 2020   files..        
+00000750: 3a70 6172 616d 206d 6574 6164 6174 615f  :param metadata_
+00000760: 636f 6c75 6d6e 5f6e 616d 653a 204e 616d  column_name: Nam
+00000770: 6520 6f66 2074 6865 206d 6574 6164 6174  e of the metadat
+00000780: 6120 636f 6c75 6d6e 2069 6e73 6964 6520  a column inside 
+00000790: 7468 6520 6a73 6f6e 6c20 6669 6c65 732e  the jsonl files.
+000007a0: 0a0a 2020 2020 2020 2020 3a72 6169 7365  ..        :raise
+000007b0: 7320 5275 6e74 696d 6545 7272 6f72 3a20  s RuntimeError: 
+000007c0: 4966 206e 6f20 7061 7468 7320 6172 6520  If no paths are 
+000007d0: 6769 7665 6e0a 2020 2020 2020 2020 2222  given.        ""
+000007e0: 220a 2020 2020 2020 2020 7472 6169 6e3a  ".        train:
+000007f0: 204f 7074 696f 6e61 6c5b 4461 7461 7365   Optional[Datase
+00000800: 745d 203d 2028 0a20 2020 2020 2020 2020  t] = (.         
+00000810: 2020 2043 6f6e 6361 7444 6174 6173 6574     ConcatDataset
+00000820: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00000830: 2020 5b0a 2020 2020 2020 2020 2020 2020    [.            
+00000840: 2020 2020 2020 2020 4a73 6f6e 6c44 6174          JsonlDat
+00000850: 6173 6574 280a 2020 2020 2020 2020 2020  aset(.          
+00000860: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+00000870: 6169 6e5f 6669 6c65 2c0a 2020 2020 2020  ain_file,.      
+00000880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000890: 2020 7465 7874 5f63 6f6c 756d 6e5f 6e61    text_column_na
+000008a0: 6d65 3d74 6578 745f 636f 6c75 6d6e 5f6e  me=text_column_n
+000008b0: 616d 652c 0a20 2020 2020 2020 2020 2020  ame,.           
+000008c0: 2020 2020 2020 2020 2020 2020 206c 6162               lab
+000008d0: 656c 5f63 6f6c 756d 6e5f 6e61 6d65 3d6c  el_column_name=l
+000008e0: 6162 656c 5f63 6f6c 756d 6e5f 6e61 6d65  abel_column_name
+000008f0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00000900: 2020 2020 2020 2020 2020 6d65 7461 6461            metada
+00000910: 7461 5f63 6f6c 756d 6e5f 6e61 6d65 3d6d  ta_column_name=m
+00000920: 6574 6164 6174 615f 636f 6c75 6d6e 5f6e  etadata_column_n
+00000930: 616d 652c 0a20 2020 2020 2020 2020 2020  ame,.           
+00000940: 2020 2020 2020 2020 2020 2020 206c 6162               lab
+00000950: 656c 5f74 7970 653d 6c61 6265 6c5f 7479  el_type=label_ty
+00000960: 7065 2c0a 2020 2020 2020 2020 2020 2020  pe,.            
+00000970: 2020 2020 2020 2020 2020 2020 656e 636f              enco
+00000980: 6469 6e67 3d65 6e63 6f64 696e 672c 0a20  ding=encoding,. 
+00000990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000009a0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+000009b0: 2020 2020 2020 2020 2066 6f72 2074 7261           for tra
+000009c0: 696e 5f66 696c 6520 696e 2074 7261 696e  in_file in train
+000009d0: 5f66 696c 6573 0a20 2020 2020 2020 2020  _files.         
+000009e0: 2020 2020 2020 205d 0a20 2020 2020 2020         ].       
+000009f0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+00000a00: 2020 2069 6620 7472 6169 6e5f 6669 6c65     if train_file
+00000a10: 7320 616e 6420 7472 6169 6e5f 6669 6c65  s and train_file
+00000a20: 735b 305d 0a20 2020 2020 2020 2020 2020  s[0].           
+00000a30: 2065 6c73 6520 4e6f 6e65 0a20 2020 2020   else None.     
+00000a40: 2020 2029 0a0a 2020 2020 2020 2020 2320     )..        # 
+00000a50: 7265 6164 2069 6e20 7465 7374 2066 696c  read in test fil
+00000a60: 6520 6966 2065 7869 7374 730a 2020 2020  e if exists.    
+00000a70: 2020 2020 7465 7374 3a20 4f70 7469 6f6e      test: Option
+00000a80: 616c 5b44 6174 6173 6574 5d20 3d20 280a  al[Dataset] = (.
+00000a90: 2020 2020 2020 2020 2020 2020 436f 6e63              Conc
+00000aa0: 6174 4461 7461 7365 7428 0a20 2020 2020  atDataset(.     
+00000ab0: 2020 2020 2020 2020 2020 205b 0a20 2020             [.   
+00000ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000ad0: 204a 736f 6e6c 4461 7461 7365 7428 0a20   JsonlDataset(. 
 00000ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000af0: 2074 6573 745f 6669 6c65 2c0a 2020 2020   test_file,.    
-00000b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000b10: 2020 2020 7465 7874 5f63 6f6c 756d 6e5f      text_column_
-00000b20: 6e61 6d65 3d74 6578 745f 636f 6c75 6d6e  name=text_column
-00000b30: 5f6e 616d 652c 0a20 2020 2020 2020 2020  _name,.         
-00000b40: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-00000b50: 6162 656c 5f63 6f6c 756d 6e5f 6e61 6d65  abel_column_name
-00000b60: 3d6c 6162 656c 5f63 6f6c 756d 6e5f 6e61  =label_column_na
-00000b70: 6d65 2c0a 2020 2020 2020 2020 2020 2020  me,.            
-00000b80: 2020 2020 2020 2020 2020 2020 6d65 7461              meta
-00000b90: 6461 7461 5f63 6f6c 756d 6e5f 6e61 6d65  data_column_name
-00000ba0: 3d6d 6574 6164 6174 615f 636f 6c75 6d6e  =metadata_column
-00000bb0: 5f6e 616d 652c 0a20 2020 2020 2020 2020  _name,.         
-00000bc0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-00000bd0: 6162 656c 5f74 7970 653d 6c61 6265 6c5f  abel_type=label_
-00000be0: 7479 7065 2c0a 2020 2020 2020 2020 2020  type,.          
-00000bf0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00000c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000c10: 666f 7220 7465 7374 5f66 696c 6520 696e  for test_file in
-00000c20: 2074 6573 745f 6669 6c65 730a 2020 2020   test_files.    
-00000c30: 2020 2020 2020 2020 2020 2020 5d0a 2020              ].  
-00000c40: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00000c50: 2020 2020 2020 2020 6966 2074 6573 745f          if test_
-00000c60: 6669 6c65 7320 616e 6420 7465 7374 5f66  files and test_f
-00000c70: 696c 6573 5b30 5d0a 2020 2020 2020 2020  iles[0].        
-00000c80: 2020 2020 656c 7365 204e 6f6e 650a 2020      else None.  
-00000c90: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
-00000ca0: 2023 2072 6561 6420 696e 2064 6576 2066   # read in dev f
-00000cb0: 696c 6520 6966 2065 7869 7374 730a 2020  ile if exists.  
-00000cc0: 2020 2020 2020 6465 763a 204f 7074 696f        dev: Optio
-00000cd0: 6e61 6c5b 4461 7461 7365 745d 203d 2028  nal[Dataset] = (
-00000ce0: 0a20 2020 2020 2020 2020 2020 2043 6f6e  .            Con
-00000cf0: 6361 7444 6174 6173 6574 280a 2020 2020  catDataset(.    
-00000d00: 2020 2020 2020 2020 2020 2020 5b0a 2020              [.  
-00000d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000d20: 2020 4a73 6f6e 6c44 6174 6173 6574 280a    JsonlDataset(.
-00000d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000d40: 2020 2020 2020 2020 6465 765f 6669 6c65          dev_file
-00000d50: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00000d60: 2020 2020 2020 2020 2020 7465 7874 5f63            text_c
-00000d70: 6f6c 756d 6e5f 6e61 6d65 3d74 6578 745f  olumn_name=text_
-00000d80: 636f 6c75 6d6e 5f6e 616d 652c 0a20 2020  column_name,.   
-00000d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000da0: 2020 2020 206c 6162 656c 5f63 6f6c 756d       label_colum
-00000db0: 6e5f 6e61 6d65 3d6c 6162 656c 5f63 6f6c  n_name=label_col
-00000dc0: 756d 6e5f 6e61 6d65 2c0a 2020 2020 2020  umn_name,.      
+00000af0: 2020 2020 2020 2074 6573 745f 6669 6c65         test_file
+00000b00: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00000b10: 2020 2020 2020 2020 2020 7465 7874 5f63            text_c
+00000b20: 6f6c 756d 6e5f 6e61 6d65 3d74 6578 745f  olumn_name=text_
+00000b30: 636f 6c75 6d6e 5f6e 616d 652c 0a20 2020  column_name,.   
+00000b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000b50: 2020 2020 206c 6162 656c 5f63 6f6c 756d       label_colum
+00000b60: 6e5f 6e61 6d65 3d6c 6162 656c 5f63 6f6c  n_name=label_col
+00000b70: 756d 6e5f 6e61 6d65 2c0a 2020 2020 2020  umn_name,.      
+00000b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000b90: 2020 6d65 7461 6461 7461 5f63 6f6c 756d    metadata_colum
+00000ba0: 6e5f 6e61 6d65 3d6d 6574 6164 6174 615f  n_name=metadata_
+00000bb0: 636f 6c75 6d6e 5f6e 616d 652c 0a20 2020  column_name,.   
+00000bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000bd0: 2020 2020 206c 6162 656c 5f74 7970 653d       label_type=
+00000be0: 6c61 6265 6c5f 7479 7065 2c0a 2020 2020  label_type,.    
+00000bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000c00: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00000c10: 2020 2020 2020 666f 7220 7465 7374 5f66        for test_f
+00000c20: 696c 6520 696e 2074 6573 745f 6669 6c65  ile in test_file
+00000c30: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
+00000c40: 2020 5d0a 2020 2020 2020 2020 2020 2020    ].            
+00000c50: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+00000c60: 2074 6573 745f 6669 6c65 7320 616e 6420   test_files and 
+00000c70: 7465 7374 5f66 696c 6573 5b30 5d0a 2020  test_files[0].  
+00000c80: 2020 2020 2020 2020 2020 656c 7365 204e            else N
+00000c90: 6f6e 650a 2020 2020 2020 2020 290a 0a20  one.        ).. 
+00000ca0: 2020 2020 2020 2023 2072 6561 6420 696e         # read in
+00000cb0: 2064 6576 2066 696c 6520 6966 2065 7869   dev file if exi
+00000cc0: 7374 730a 2020 2020 2020 2020 6465 763a  sts.        dev:
+00000cd0: 204f 7074 696f 6e61 6c5b 4461 7461 7365   Optional[Datase
+00000ce0: 745d 203d 2028 0a20 2020 2020 2020 2020  t] = (.         
+00000cf0: 2020 2043 6f6e 6361 7444 6174 6173 6574     ConcatDataset
+00000d00: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00000d10: 2020 5b0a 2020 2020 2020 2020 2020 2020    [.            
+00000d20: 2020 2020 2020 2020 4a73 6f6e 6c44 6174          JsonlDat
+00000d30: 6173 6574 280a 2020 2020 2020 2020 2020  aset(.          
+00000d40: 2020 2020 2020 2020 2020 2020 2020 6465                de
+00000d50: 765f 6669 6c65 2c0a 2020 2020 2020 2020  v_file,.        
+00000d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000d70: 7465 7874 5f63 6f6c 756d 6e5f 6e61 6d65  text_column_name
+00000d80: 3d74 6578 745f 636f 6c75 6d6e 5f6e 616d  =text_column_nam
+00000d90: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+00000da0: 2020 2020 2020 2020 2020 206c 6162 656c             label
+00000db0: 5f63 6f6c 756d 6e5f 6e61 6d65 3d6c 6162  _column_name=lab
+00000dc0: 656c 5f63 6f6c 756d 6e5f 6e61 6d65 2c0a  el_column_name,.
 00000dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000de0: 2020 6d65 7461 6461 7461 5f63 6f6c 756d    metadata_colum
-00000df0: 6e5f 6e61 6d65 3d6d 6574 6164 6174 615f  n_name=metadata_
-00000e00: 636f 6c75 6d6e 5f6e 616d 652c 0a20 2020  column_name,.   
-00000e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000e20: 2020 2020 206c 6162 656c 5f74 7970 653d       label_type=
-00000e30: 6c61 6265 6c5f 7479 7065 2c0a 2020 2020  label_type,.    
-00000e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000e50: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00000e60: 2020 2020 2020 666f 7220 6465 765f 6669        for dev_fi
-00000e70: 6c65 2069 6e20 6465 765f 6669 6c65 730a  le in dev_files.
-00000e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000e90: 5d0a 2020 2020 2020 2020 2020 2020 290a  ].            ).
-00000ea0: 2020 2020 2020 2020 2020 2020 6966 2064              if d
-00000eb0: 6576 5f66 696c 6573 2061 6e64 2064 6576  ev_files and dev
-00000ec0: 5f66 696c 6573 5b30 5d0a 2020 2020 2020  _files[0].      
-00000ed0: 2020 2020 2020 656c 7365 204e 6f6e 650a        else None.
-00000ee0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00000ef0: 2020 7375 7065 7228 292e 5f5f 696e 6974    super().__init
-00000f00: 5f5f 2874 7261 696e 2c20 6465 762c 2074  __(train, dev, t
-00000f10: 6573 742c 202a 2a63 6f72 7075 7361 7267  est, **corpusarg
-00000f20: 7329 0a0a 0a63 6c61 7373 204a 736f 6e6c  s)...class Jsonl
-00000f30: 436f 7270 7573 284d 756c 7469 4669 6c65  Corpus(MultiFile
-00000f40: 4a73 6f6e 6c43 6f72 7075 7329 3a0a 2020  JsonlCorpus):.  
-00000f50: 2020 6465 6620 5f5f 696e 6974 5f5f 280a    def __init__(.
-00000f60: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
-00000f70: 2020 2020 2020 6461 7461 5f66 6f6c 6465        data_folde
-00000f80: 723a 2055 6e69 6f6e 5b73 7472 2c20 5061  r: Union[str, Pa
-00000f90: 7468 5d2c 0a20 2020 2020 2020 2074 7261  th],.        tra
-00000fa0: 696e 5f66 696c 653a 204f 7074 696f 6e61  in_file: Optiona
-00000fb0: 6c5b 556e 696f 6e5b 7374 722c 2050 6174  l[Union[str, Pat
-00000fc0: 685d 5d20 3d20 4e6f 6e65 2c0a 2020 2020  h]] = None,.    
-00000fd0: 2020 2020 7465 7374 5f66 696c 653a 204f      test_file: O
-00000fe0: 7074 696f 6e61 6c5b 556e 696f 6e5b 7374  ptional[Union[st
-00000ff0: 722c 2050 6174 685d 5d20 3d20 4e6f 6e65  r, Path]] = None
-00001000: 2c0a 2020 2020 2020 2020 6465 765f 6669  ,.        dev_fi
-00001010: 6c65 3a20 4f70 7469 6f6e 616c 5b55 6e69  le: Optional[Uni
-00001020: 6f6e 5b73 7472 2c20 5061 7468 5d5d 203d  on[str, Path]] =
-00001030: 204e 6f6e 652c 0a20 2020 2020 2020 2065   None,.        e
-00001040: 6e63 6f64 696e 673a 2073 7472 203d 2022  ncoding: str = "
-00001050: 7574 662d 3822 2c0a 2020 2020 2020 2020  utf-8",.        
-00001060: 7465 7874 5f63 6f6c 756d 6e5f 6e61 6d65  text_column_name
-00001070: 3a20 7374 7220 3d20 2264 6174 6122 2c0a  : str = "data",.
-00001080: 2020 2020 2020 2020 6c61 6265 6c5f 636f          label_co
-00001090: 6c75 6d6e 5f6e 616d 653a 2073 7472 203d  lumn_name: str =
-000010a0: 2022 6c61 6265 6c22 2c0a 2020 2020 2020   "label",.      
-000010b0: 2020 6d65 7461 6461 7461 5f63 6f6c 756d    metadata_colum
-000010c0: 6e5f 6e61 6d65 3a20 7374 7220 3d20 226d  n_name: str = "m
-000010d0: 6574 6164 6174 6122 2c0a 2020 2020 2020  etadata",.      
-000010e0: 2020 6c61 6265 6c5f 7479 7065 3a20 7374    label_type: st
-000010f0: 7220 3d20 226e 6572 222c 0a20 2020 2020  r = "ner",.     
-00001100: 2020 2061 7574 6f66 696e 645f 7370 6c69     autofind_spli
-00001110: 7473 3a20 626f 6f6c 203d 2054 7275 652c  ts: bool = True,
-00001120: 0a20 2020 2020 2020 206e 616d 653a 204f  .        name: O
-00001130: 7074 696f 6e61 6c5b 7374 725d 203d 204e  ptional[str] = N
-00001140: 6f6e 652c 0a20 2020 2020 2020 202a 2a63  one,.        **c
-00001150: 6f72 7075 7361 7267 732c 0a20 2020 2029  orpusargs,.    )
-00001160: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-00001170: 2020 2222 2249 6e73 7461 6e74 6961 7465    """Instantiate
-00001180: 7320 6120 4a73 6f6e 6c43 6f72 7075 7320  s a JsonlCorpus 
-00001190: 7769 7468 206f 6e65 2066 696c 6520 7065  with one file pe
-000011a0: 7220 4461 7461 7365 7420 2874 7261 696e  r Dataset (train
-000011b0: 2c20 6465 762c 2061 6e64 2074 6573 7429  , dev, and test)
-000011c0: 2e0a 0a20 2020 2020 2020 203a 7061 7261  ...        :para
-000011d0: 6d20 6461 7461 5f66 6f6c 6465 723a 2050  m data_folder: P
-000011e0: 6174 6820 746f 2074 6865 2066 6f6c 6465  ath to the folde
-000011f0: 7220 636f 6e74 6169 6e69 6e67 2074 6865  r containing the
-00001200: 204a 534f 4e4c 2063 6f72 7075 730a 2020   JSONL corpus.  
-00001210: 2020 2020 2020 3a70 6172 616d 2074 7261        :param tra
-00001220: 696e 5f66 696c 653a 2074 6865 206e 616d  in_file: the nam
-00001230: 6520 6f66 2074 6865 2074 7261 696e 2066  e of the train f
-00001240: 696c 650a 2020 2020 2020 2020 3a70 6172  ile.        :par
-00001250: 616d 2074 6573 745f 6669 6c65 3a20 7468  am test_file: th
-00001260: 6520 6e61 6d65 206f 6620 7468 6520 7465  e name of the te
-00001270: 7374 2066 696c 650a 2020 2020 2020 2020  st file.        
-00001280: 3a70 6172 616d 2064 6576 5f66 696c 653a  :param dev_file:
-00001290: 2074 6865 206e 616d 6520 6f66 2074 6865   the name of the
-000012a0: 2064 6576 2066 696c 652c 2069 6620 4e6f   dev file, if No
-000012b0: 6e65 2c20 6465 7620 6461 7461 2069 7320  ne, dev data is 
-000012c0: 7361 6d70 6c65 6420 6672 6f6d 2074 7261  sampled from tra
-000012d0: 696e 0a20 2020 2020 2020 203a 7061 7261  in.        :para
-000012e0: 6d20 7465 7874 5f63 6f6c 756d 6e5f 6e61  m text_column_na
-000012f0: 6d65 3a20 4e61 6d65 206f 6620 7468 6520  me: Name of the 
-00001300: 7465 7874 2063 6f6c 756d 6e20 696e 7369  text column insi
-00001310: 6465 2074 6865 204a 534f 4e4c 2066 696c  de the JSONL fil
-00001320: 652e 0a20 2020 2020 2020 203a 7061 7261  e..        :para
-00001330: 6d20 6c61 6265 6c5f 636f 6c75 6d6e 5f6e  m label_column_n
-00001340: 616d 653a 204e 616d 6520 6f66 2074 6865  ame: Name of the
-00001350: 206c 6162 656c 2063 6f6c 756d 6e20 696e   label column in
-00001360: 7369 6465 2074 6865 204a 534f 4e4c 2066  side the JSONL f
-00001370: 696c 652e 0a20 2020 2020 2020 203a 7061  ile..        :pa
-00001380: 7261 6d20 6d65 7461 6461 7461 5f63 6f6c  ram metadata_col
-00001390: 756d 6e5f 6e61 6d65 3a20 4e61 6d65 206f  umn_name: Name o
-000013a0: 6620 7468 6520 6d65 7461 6461 7461 2063  f the metadata c
-000013b0: 6f6c 756d 6e20 696e 7369 6465 2074 6865  olumn inside the
-000013c0: 204a 534f 4e4c 2066 696c 652e 0a20 2020   JSONL file..   
-000013d0: 2020 2020 203a 7061 7261 6d20 6175 746f       :param auto
-000013e0: 6669 6e64 5f73 706c 6974 733a 2057 6865  find_splits: Whe
-000013f0: 7468 6572 2074 7261 696e 2c20 7465 7374  ther train, test
-00001400: 2061 6e64 2064 6576 2066 696c 6520 7368   and dev file sh
-00001410: 6f75 6c64 2062 6520 6465 7465 726d 696e  ould be determin
-00001420: 6564 2061 7574 6f6d 6174 6963 616c 6c79  ed automatically
-00001430: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00001440: 6e61 6d65 3a20 6e61 6d65 206f 6620 7468  name: name of th
-00001450: 6520 436f 7270 7573 2073 6565 206b 6f6c  e Corpus see kol
-00001460: 6962 7269 2e62 6163 6b65 6e64 2e70 7974  ibri.backend.pyt
-00001470: 6f72 6368 2e64 6174 612e 436f 7270 7573  orch.data.Corpus
-00001480: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00001490: 2020 2020 2023 2066 696e 6420 7472 6169       # find trai
-000014a0: 6e2c 2064 6576 2061 6e64 2074 6573 7420  n, dev and test 
-000014b0: 6669 6c65 7320 6966 206e 6f74 2073 7065  files if not spe
-000014c0: 6369 6669 6564 0a20 2020 2020 2020 2064  cified.        d
-000014d0: 6576 5f66 696c 652c 2074 6573 745f 6669  ev_file, test_fi
-000014e0: 6c65 2c20 7472 6169 6e5f 6669 6c65 203d  le, train_file =
-000014f0: 2066 696e 645f 7472 6169 6e5f 6465 765f   find_train_dev_
-00001500: 7465 7374 5f66 696c 6573 280a 2020 2020  test_files(.    
-00001510: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
-00001520: 6465 722c 2064 6576 5f66 696c 652c 2074  der, dev_file, t
-00001530: 6573 745f 6669 6c65 2c20 7472 6169 6e5f  est_file, train_
-00001540: 6669 6c65 2c20 6175 746f 6669 6e64 5f73  file, autofind_s
-00001550: 706c 6974 730a 2020 2020 2020 2020 290a  plits.        ).
-00001560: 2020 2020 2020 2020 7375 7065 7228 292e          super().
-00001570: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
-00001580: 2020 2020 2020 6465 765f 6669 6c65 733d        dev_files=
-00001590: 5b64 6576 5f66 696c 655d 2069 6620 6465  [dev_file] if de
-000015a0: 765f 6669 6c65 2065 6c73 6520 5b5d 2c0a  v_file else [],.
-000015b0: 2020 2020 2020 2020 2020 2020 7472 6169              trai
-000015c0: 6e5f 6669 6c65 733d 5b74 7261 696e 5f66  n_files=[train_f
-000015d0: 696c 655d 2069 6620 7472 6169 6e5f 6669  ile] if train_fi
-000015e0: 6c65 2065 6c73 6520 5b5d 2c0a 2020 2020  le else [],.    
-000015f0: 2020 2020 2020 2020 7465 7374 5f66 696c          test_fil
-00001600: 6573 3d5b 7465 7374 5f66 696c 655d 2069  es=[test_file] i
-00001610: 6620 7465 7374 5f66 696c 6520 656c 7365  f test_file else
-00001620: 205b 5d2c 0a20 2020 2020 2020 2020 2020   [],.           
-00001630: 2074 6578 745f 636f 6c75 6d6e 5f6e 616d   text_column_nam
-00001640: 653d 7465 7874 5f63 6f6c 756d 6e5f 6e61  e=text_column_na
-00001650: 6d65 2c0a 2020 2020 2020 2020 2020 2020  me,.            
-00001660: 6c61 6265 6c5f 636f 6c75 6d6e 5f6e 616d  label_column_nam
-00001670: 653d 6c61 6265 6c5f 636f 6c75 6d6e 5f6e  e=label_column_n
-00001680: 616d 652c 0a20 2020 2020 2020 2020 2020  ame,.           
-00001690: 206d 6574 6164 6174 615f 636f 6c75 6d6e   metadata_column
-000016a0: 5f6e 616d 653d 6d65 7461 6461 7461 5f63  _name=metadata_c
-000016b0: 6f6c 756d 6e5f 6e61 6d65 2c0a 2020 2020  olumn_name,.    
-000016c0: 2020 2020 2020 2020 6c61 6265 6c5f 7479          label_ty
-000016d0: 7065 3d6c 6162 656c 5f74 7970 652c 0a20  pe=label_type,. 
-000016e0: 2020 2020 2020 2020 2020 206e 616d 653d             name=
-000016f0: 6e61 6d65 2069 6620 6461 7461 5f66 6f6c  name if data_fol
-00001700: 6465 7220 6973 204e 6f6e 6520 656c 7365  der is None else
-00001710: 2073 7472 2864 6174 615f 666f 6c64 6572   str(data_folder
-00001720: 292c 0a20 2020 2020 2020 2020 2020 2065  ),.            e
-00001730: 6e63 6f64 696e 673d 656e 636f 6469 6e67  ncoding=encoding
-00001740: 2c0a 2020 2020 2020 2020 2020 2020 2a2a  ,.            **
-00001750: 636f 7270 7573 6172 6773 2c0a 2020 2020  corpusargs,.    
-00001760: 2020 2020 290a 0a0a 636c 6173 7320 4a73      )...class Js
-00001770: 6f6e 6c44 6174 6173 6574 2846 6c61 6972  onlDataset(Flair
-00001780: 4461 7461 7365 7429 3a0a 2020 2020 6465  Dataset):.    de
-00001790: 6620 5f5f 696e 6974 5f5f 280a 2020 2020  f __init__(.    
-000017a0: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
-000017b0: 2020 7061 7468 5f74 6f5f 6a73 6f6e 6c5f    path_to_jsonl_
-000017c0: 6669 6c65 3a20 556e 696f 6e5b 7374 722c  file: Union[str,
-000017d0: 2050 6174 685d 2c0a 2020 2020 2020 2020   Path],.        
-000017e0: 656e 636f 6469 6e67 3a20 7374 7220 3d20  encoding: str = 
-000017f0: 2275 7466 2d38 222c 0a20 2020 2020 2020  "utf-8",.       
-00001800: 2074 6578 745f 636f 6c75 6d6e 5f6e 616d   text_column_nam
-00001810: 653a 2073 7472 203d 2022 6461 7461 222c  e: str = "data",
-00001820: 0a20 2020 2020 2020 206c 6162 656c 5f63  .        label_c
-00001830: 6f6c 756d 6e5f 6e61 6d65 3a20 7374 7220  olumn_name: str 
-00001840: 3d20 226c 6162 656c 222c 0a20 2020 2020  = "label",.     
-00001850: 2020 206d 6574 6164 6174 615f 636f 6c75     metadata_colu
-00001860: 6d6e 5f6e 616d 653a 2073 7472 203d 2022  mn_name: str = "
-00001870: 6d65 7461 6461 7461 222c 0a20 2020 2020  metadata",.     
-00001880: 2020 206c 6162 656c 5f74 7970 653a 2073     label_type: s
-00001890: 7472 203d 2022 6e65 7222 2c0a 2020 2020  tr = "ner",.    
-000018a0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
-000018b0: 2020 2022 2222 496e 7374 616e 7469 6174     """Instantiat
-000018c0: 6573 2061 204a 736f 6e6c 4461 7461 7365  es a JsonlDatase
-000018d0: 7420 616e 6420 636f 6e76 6572 7473 2061  t and converts a
-000018e0: 6c6c 2061 6e6e 6f74 6174 6564 2063 6861  ll annotated cha
-000018f0: 7220 7370 616e 7320 746f 2074 6f6b 656e  r spans to token
-00001900: 2074 6167 7320 7573 696e 6720 7468 6520   tags using the 
-00001910: 494f 4220 7363 6865 6d65 2e0a 0a20 2020  IOB scheme...   
-00001920: 2020 2020 2054 6865 2065 7870 6563 7465       The expecte
-00001930: 6420 6669 6c65 2066 6f72 6d61 7420 6973  d file format is
-00001940: 3a0a 0a20 2020 2020 2020 202e 2e20 636f  :..        .. co
-00001950: 6465 2d62 6c6f 636b 3a3a 206a 736f 6e0a  de-block:: json.
-00001960: 0a20 2020 2020 2020 2020 2020 207b 0a20  .            {. 
-00001970: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00001980: 3c74 6578 745f 636f 6c75 6d6e 5f6e 616d  <text_column_nam
-00001990: 653e 223a 2022 3c74 6578 743e 222c 0a20  e>": "<text>",. 
-000019a0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000019b0: 3c6c 6162 656c 5f63 6f6c 756d 6e5f 6e61  <label_column_na
-000019c0: 6d65 3e22 3a20 5b5b 3c73 7461 7274 5f63  me>": [[<start_c
-000019d0: 6861 725f 696e 6465 783e 2c20 3c65 6e64  har_index>, <end
-000019e0: 5f63 6861 725f 696e 6465 783e 2c20 3c6c  _char_index>, <l
-000019f0: 6162 656c 3e5d 2c2e 2e2e 5d2c 0a20 2020  abel>],...],.   
-00001a00: 2020 2020 2020 2020 2020 2020 2022 3c6d               "<m
-00001a10: 6574 6164 6174 615f 636f 6c75 6d6e 5f6e  etadata_column_n
-00001a20: 616d 653e 223a 205b 5b3c 6d65 7461 6461  ame>": [[<metada
-00001a30: 7461 5f6b 6579 3e2c 203c 6d65 7461 6461  ta_key>, <metada
-00001a40: 7461 5f76 616c 7565 3e5d 2c2e 2e2e 5d0a  ta_value>],...].
-00001a50: 2020 2020 2020 2020 2020 2020 7d0a 0a20              }.. 
-00001a60: 2020 2020 2020 2041 7267 733a 0a20 2020         Args:.   
-00001a70: 2020 2020 2020 2020 2070 6174 685f 746f           path_to
-00001a80: 5f6a 736f 6e6c 5f66 696c 653a 2046 696c  _jsonl_file: Fil
-00001a90: 6520 746f 2072 6561 640a 2020 2020 2020  e to read.      
-00001aa0: 2020 2020 2020 7465 7874 5f63 6f6c 756d        text_colum
-00001ab0: 6e5f 6e61 6d65 3a20 4e61 6d65 206f 6620  n_name: Name of 
-00001ac0: 7468 6520 7465 7874 2063 6f6c 756d 6e0a  the text column.
-00001ad0: 2020 2020 2020 2020 2020 2020 6c61 6265              labe
-00001ae0: 6c5f 636f 6c75 6d6e 5f6e 616d 653a 204e  l_column_name: N
-00001af0: 616d 6520 6f66 2074 6865 206c 6162 656c  ame of the label
-00001b00: 2063 6f6c 756d 6e0a 2020 2020 2020 2020   column.        
-00001b10: 2020 2020 6d65 7461 6461 7461 5f63 6f6c      metadata_col
-00001b20: 756d 6e5f 6e61 6d65 3a20 4e61 6d65 206f  umn_name: Name o
-00001b30: 6620 7468 6520 6d65 7461 6461 7461 2063  f the metadata c
-00001b40: 6f6c 756d 6e0a 2020 2020 2020 2020 2222  olumn.        ""
-00001b50: 220a 2020 2020 2020 2020 7061 7468 5f74  ".        path_t
-00001b60: 6f5f 6a73 6f6e 5f66 696c 6520 3d20 5061  o_json_file = Pa
-00001b70: 7468 2870 6174 685f 746f 5f6a 736f 6e6c  th(path_to_jsonl
-00001b80: 5f66 696c 6529 0a0a 2020 2020 2020 2020  _file)..        
-00001b90: 7365 6c66 2e74 6578 745f 636f 6c75 6d6e  self.text_column
-00001ba0: 5f6e 616d 6520 3d20 7465 7874 5f63 6f6c  _name = text_col
-00001bb0: 756d 6e5f 6e61 6d65 0a20 2020 2020 2020  umn_name.       
-00001bc0: 2073 656c 662e 6c61 6265 6c5f 636f 6c75   self.label_colu
-00001bd0: 6d6e 5f6e 616d 6520 3d20 6c61 6265 6c5f  mn_name = label_
-00001be0: 636f 6c75 6d6e 5f6e 616d 650a 2020 2020  column_name.    
-00001bf0: 2020 2020 7365 6c66 2e6d 6574 6164 6174      self.metadat
-00001c00: 615f 636f 6c75 6d6e 5f6e 616d 6520 3d20  a_column_name = 
-00001c10: 6d65 7461 6461 7461 5f63 6f6c 756d 6e5f  metadata_column_
-00001c20: 6e61 6d65 0a20 2020 2020 2020 2073 656c  name.        sel
-00001c30: 662e 6c61 6265 6c5f 7479 7065 203d 206c  f.label_type = l
-00001c40: 6162 656c 5f74 7970 650a 2020 2020 2020  abel_type.      
-00001c50: 2020 7365 6c66 2e70 6174 685f 746f 5f6a    self.path_to_j
-00001c60: 736f 6e5f 6669 6c65 203d 2070 6174 685f  son_file = path_
-00001c70: 746f 5f6a 736f 6e5f 6669 6c65 0a0a 2020  to_json_file..  
-00001c80: 2020 2020 2020 7365 6c66 2e73 656e 7465        self.sente
-00001c90: 6e63 6573 3a20 4c69 7374 5b53 656e 7465  nces: List[Sente
-00001ca0: 6e63 655d 203d 205b 5d0a 2020 2020 2020  nce] = [].      
-00001cb0: 2020 7769 7468 2070 6174 685f 746f 5f6a    with path_to_j
-00001cc0: 736f 6e5f 6669 6c65 2e6f 7065 6e28 656e  son_file.open(en
-00001cd0: 636f 6469 6e67 3d65 6e63 6f64 696e 6729  coding=encoding)
-00001ce0: 2061 7320 6a73 6f6e 6c5f 6670 3a0a 2020   as jsonl_fp:.  
-00001cf0: 2020 2020 2020 2020 2020 666f 7220 6c69            for li
-00001d00: 6e65 2069 6e20 6a73 6f6e 6c5f 6670 3a0a  ne in jsonl_fp:.
-00001d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001d20: 6375 7272 656e 745f 6c69 6e65 203d 206a  current_line = j
-00001d30: 736f 6e2e 6c6f 6164 7328 6c69 6e65 290a  son.loads(line).
-00001d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001d50: 7261 775f 7465 7874 203d 2063 7572 7265  raw_text = curre
-00001d60: 6e74 5f6c 696e 655b 7465 7874 5f63 6f6c  nt_line[text_col
-00001d70: 756d 6e5f 6e61 6d65 5d0a 2020 2020 2020  umn_name].      
-00001d80: 2020 2020 2020 2020 2020 6375 7272 656e            curren
-00001d90: 745f 6c61 6265 6c73 203d 2063 7572 7265  t_labels = curre
-00001da0: 6e74 5f6c 696e 655b 6c61 6265 6c5f 636f  nt_line[label_co
-00001db0: 6c75 6d6e 5f6e 616d 655d 0a20 2020 2020  lumn_name].     
-00001dc0: 2020 2020 2020 2020 2020 2063 7572 7265             curre
-00001dd0: 6e74 5f6d 6574 6164 6174 6173 203d 2063  nt_metadatas = c
-00001de0: 7572 7265 6e74 5f6c 696e 652e 6765 7428  urrent_line.get(
-00001df0: 7365 6c66 2e6d 6574 6164 6174 615f 636f  self.metadata_co
-00001e00: 6c75 6d6e 5f6e 616d 652c 205b 5d29 0a20  lumn_name, []). 
-00001e10: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00001e20: 7572 7265 6e74 5f73 656e 7465 6e63 6520  urrent_sentence 
-00001e30: 3d20 5365 6e74 656e 6365 2872 6177 5f74  = Sentence(raw_t
-00001e40: 6578 7429 0a0a 2020 2020 2020 2020 2020  ext)..          
-00001e50: 2020 2020 2020 7365 6c66 2e5f 6164 645f        self._add_
-00001e60: 6c61 6265 6c73 5f74 6f5f 7365 6e74 656e  labels_to_senten
-00001e70: 6365 2872 6177 5f74 6578 742c 2063 7572  ce(raw_text, cur
-00001e80: 7265 6e74 5f73 656e 7465 6e63 652c 2063  rent_sentence, c
-00001e90: 7572 7265 6e74 5f6c 6162 656c 7329 0a20  urrent_labels). 
-00001ea0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00001eb0: 656c 662e 5f61 6464 5f6d 6574 6164 6174  elf._add_metadat
-00001ec0: 6173 5f74 6f5f 7365 6e74 656e 6365 2863  as_to_sentence(c
-00001ed0: 7572 7265 6e74 5f73 656e 7465 6e63 652c  urrent_sentence,
-00001ee0: 2063 7572 7265 6e74 5f6d 6574 6164 6174   current_metadat
-00001ef0: 6173 290a 0a20 2020 2020 2020 2020 2020  as)..           
-00001f00: 2020 2020 2073 656c 662e 7365 6e74 656e       self.senten
-00001f10: 6365 732e 6170 7065 6e64 2863 7572 7265  ces.append(curre
-00001f20: 6e74 5f73 656e 7465 6e63 6529 0a0a 2020  nt_sentence)..  
-00001f30: 2020 6465 6620 5f61 6464 5f6c 6162 656c    def _add_label
-00001f40: 735f 746f 5f73 656e 7465 6e63 6528 7365  s_to_sentence(se
-00001f50: 6c66 2c20 7261 775f 7465 7874 3a20 7374  lf, raw_text: st
-00001f60: 722c 2073 656e 7465 6e63 653a 2053 656e  r, sentence: Sen
-00001f70: 7465 6e63 652c 206c 6162 656c 733a 204c  tence, labels: L
-00001f80: 6973 745b 4c69 7374 5b41 6e79 5d5d 293a  ist[List[Any]]):
-00001f90: 0a20 2020 2020 2020 2023 2041 6464 2074  .        # Add t
-00001fa0: 6167 7320 666f 7220 6561 6368 2061 6e6e  ags for each ann
-00001fb0: 6f74 6174 6564 2073 7061 6e0a 2020 2020  otated span.    
-00001fc0: 2020 2020 666f 7220 6c61 6265 6c20 696e      for label in
-00001fd0: 206c 6162 656c 733a 0a20 2020 2020 2020   labels:.       
-00001fe0: 2020 2020 2073 656c 662e 5f61 6464 5f6c       self._add_l
-00001ff0: 6162 656c 5f74 6f5f 7365 6e74 656e 6365  abel_to_sentence
-00002000: 2872 6177 5f74 6578 742c 2073 656e 7465  (raw_text, sente
-00002010: 6e63 652c 206c 6162 656c 5b30 5d2c 206c  nce, label[0], l
-00002020: 6162 656c 5b31 5d2c 206c 6162 656c 5b32  abel[1], label[2
-00002030: 5d29 0a0a 2020 2020 6465 6620 5f61 6464  ])..    def _add
-00002040: 5f6c 6162 656c 5f74 6f5f 7365 6e74 656e  _label_to_senten
-00002050: 6365 2873 656c 662c 2074 6578 743a 2073  ce(self, text: s
-00002060: 7472 2c20 7365 6e74 656e 6365 3a20 5365  tr, sentence: Se
-00002070: 6e74 656e 6365 2c20 7374 6172 743a 2069  ntence, start: i
-00002080: 6e74 2c20 656e 643a 2069 6e74 2c20 6c61  nt, end: int, la
-00002090: 6265 6c3a 2073 7472 293a 0a20 2020 2020  bel: str):.     
-000020a0: 2020 2022 2222 4164 6473 2061 204e 4520     """Adds a NE 
-000020b0: 6c61 6265 6c20 746f 2061 2067 6976 656e  label to a given
-000020c0: 2073 656e 7465 6e63 652e 0a0a 2020 2020   sentence...    
-000020d0: 2020 2020 3a70 6172 616d 2074 6578 743a      :param text:
-000020e0: 2072 6177 2073 656e 7465 6e63 6520 2877   raw sentence (w
-000020f0: 6974 6820 616c 6c20 7768 6974 6573 7061  ith all whitespa
-00002100: 6365 7320 6574 632e 292e 2049 7320 7573  ces etc.). Is us
-00002110: 6564 2074 6f20 6465 7465 726d 696e 6520  ed to determine 
-00002120: 7468 6520 746f 6b65 6e20 696e 6469 6365  the token indice
-00002130: 732e 0a20 2020 2020 2020 203a 7061 7261  s..        :para
-00002140: 6d20 7365 6e74 656e 6365 3a20 546f 6b65  m sentence: Toke
-00002150: 6e69 7a65 6420 666c 6169 7220 5365 6e74  nized flair Sent
-00002160: 656e 6365 2e0a 2020 2020 2020 2020 3a70  ence..        :p
-00002170: 6172 616d 2073 7461 7274 3a20 5374 6172  aram start: Star
-00002180: 7420 6368 6172 6163 7465 7220 696e 6465  t character inde
-00002190: 7820 6f66 2074 6865 206c 6162 656c 2e0a  x of the label..
-000021a0: 2020 2020 2020 2020 3a70 6172 616d 2065          :param e
-000021b0: 6e64 3a20 456e 6420 6368 6172 6163 7465  nd: End characte
-000021c0: 7220 696e 6465 7820 6f66 2074 6865 206c  r index of the l
-000021d0: 6162 656c 2e0a 2020 2020 2020 2020 3a70  abel..        :p
-000021e0: 6172 616d 206c 6162 656c 3a20 4c61 6265  aram label: Labe
-000021f0: 6c20 746f 2061 7373 6967 6e20 746f 2074  l to assign to t
-00002200: 6865 2067 6976 656e 2072 616e 6765 2e0a  he given range..
-00002210: 2020 2020 2020 2020 3a72 6574 7572 6e3a          :return:
-00002220: 204e 6f74 6869 6e67 2e20 4368 616e 6765   Nothing. Change
-00002230: 7320 7365 6e74 656e 6365 2061 7320 494e  s sentence as IN
-00002240: 4f55 542d 7061 7261 6d0a 2020 2020 2020  OUT-param.      
-00002250: 2020 2222 220a 2020 2020 2020 2020 616e    """.        an
-00002260: 6e6f 7461 7465 645f 7061 7274 203d 2074  notated_part = t
-00002270: 6578 745b 7374 6172 743a 656e 645d 0a0a  ext[start:end]..
-00002280: 2020 2020 2020 2020 2320 5265 6d6f 7665          # Remove
-00002290: 206c 6561 6469 6e67 2061 6e64 2074 7261   leading and tra
-000022a0: 696c 696e 6720 7768 6974 6573 7061 6365  iling whitespace
-000022b0: 7320 6672 6f6d 2061 6e6e 6f74 6174 6564  s from annotated
-000022c0: 2073 7061 6e73 0a20 2020 2020 2020 2077   spans.        w
-000022d0: 6869 6c65 2072 652e 7365 6172 6368 2872  hile re.search(r
-000022e0: 225e 5c73 222c 2061 6e6e 6f74 6174 6564  "^\s", annotated
-000022f0: 5f70 6172 7429 3a0a 2020 2020 2020 2020  _part):.        
-00002300: 2020 2020 7374 6172 7420 2b3d 2031 0a20      start += 1. 
-00002310: 2020 2020 2020 2020 2020 2061 6e6e 6f74             annot
-00002320: 6174 6564 5f70 6172 7420 3d20 7465 7874  ated_part = text
-00002330: 5b73 7461 7274 3a65 6e64 5d0a 0a20 2020  [start:end]..   
-00002340: 2020 2020 2077 6869 6c65 2072 652e 7365       while re.se
-00002350: 6172 6368 2872 225c 7324 222c 2061 6e6e  arch(r"\s$", ann
-00002360: 6f74 6174 6564 5f70 6172 7429 3a0a 2020  otated_part):.  
-00002370: 2020 2020 2020 2020 2020 656e 6420 2d3d            end -=
-00002380: 2031 0a20 2020 2020 2020 2020 2020 2061   1.            a
-00002390: 6e6e 6f74 6174 6564 5f70 6172 7420 3d20  nnotated_part = 
-000023a0: 7465 7874 5b73 7461 7274 3a65 6e64 5d0a  text[start:end].
-000023b0: 0a20 2020 2020 2020 2023 2053 6561 7263  .        # Searc
-000023c0: 6820 7374 6172 7420 616e 6420 656e 6420  h start and end 
-000023d0: 746f 6b65 6e20 696e 6465 7820 666f 7220  token index for 
-000023e0: 6375 7272 656e 7420 7370 616e 0a20 2020  current span.   
-000023f0: 2020 2020 2073 7461 7274 5f69 6478 203d       start_idx =
-00002400: 202d 310a 2020 2020 2020 2020 656e 645f   -1.        end_
-00002410: 6964 7820 3d20 2d31 0a20 2020 2020 2020  idx = -1.       
-00002420: 2066 6f72 2074 6f6b 656e 2069 6e20 7365   for token in se
-00002430: 6e74 656e 6365 3a0a 2020 2020 2020 2020  ntence:.        
-00002440: 2020 2020 6966 2074 6f6b 656e 2e73 7461      if token.sta
-00002450: 7274 5f70 6f73 6974 696f 6e20 3c3d 2073  rt_position <= s
-00002460: 7461 7274 203c 3d20 746f 6b65 6e2e 656e  tart <= token.en
-00002470: 645f 706f 7369 7469 6f6e 2061 6e64 2073  d_position and s
-00002480: 7461 7274 5f69 6478 203d 3d20 2d31 3a0a  tart_idx == -1:.
-00002490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000024a0: 7374 6172 745f 6964 7820 3d20 746f 6b65  start_idx = toke
-000024b0: 6e2e 6964 7820 2d20 310a 0a20 2020 2020  n.idx - 1..     
-000024c0: 2020 2020 2020 2069 6620 746f 6b65 6e2e         if token.
-000024d0: 7374 6172 745f 706f 7369 7469 6f6e 203c  start_position <
-000024e0: 3d20 656e 6420 3c3d 2074 6f6b 656e 2e65  = end <= token.e
-000024f0: 6e64 5f70 6f73 6974 696f 6e20 616e 6420  nd_position and 
-00002500: 656e 645f 6964 7820 3d3d 202d 313a 0a20  end_idx == -1:. 
-00002510: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00002520: 6e64 5f69 6478 203d 2074 6f6b 656e 2e69  nd_idx = token.i
-00002530: 6478 202d 2031 0a0a 2020 2020 2020 2020  dx - 1..        
-00002540: 2320 4966 2065 6e64 2069 6e64 6578 2069  # If end index i
-00002550: 7320 6e6f 7420 666f 756e 6420 7365 7420  s not found set 
-00002560: 746f 206c 6173 7420 746f 6b65 6e0a 2020  to last token.  
-00002570: 2020 2020 2020 6966 2065 6e64 5f69 6478        if end_idx
-00002580: 203d 3d20 2d31 3a0a 2020 2020 2020 2020   == -1:.        
-00002590: 2020 2020 656e 645f 6964 7820 3d20 7365      end_idx = se
-000025a0: 6e74 656e 6365 5b2d 315d 2e69 6478 202d  ntence[-1].idx -
-000025b0: 2031 0a0a 2020 2020 2020 2020 2320 5468   1..        # Th
-000025c0: 726f 7720 6572 726f 7220 6966 2069 6e64  row error if ind
-000025d0: 6963 6573 2061 7265 206e 6f74 2076 616c  ices are not val
-000025e0: 6964 0a20 2020 2020 2020 2069 6620 7374  id.        if st
-000025f0: 6172 745f 6964 7820 3d3d 202d 3120 6f72  art_idx == -1 or
-00002600: 2073 7461 7274 5f69 6478 203e 2065 6e64   start_idx > end
-00002610: 5f69 6478 3a0a 2020 2020 2020 2020 2020  _idx:.          
-00002620: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
-00002630: 6f72 280a 2020 2020 2020 2020 2020 2020  or(.            
-00002640: 2020 2020 6622 436f 756c 6420 6e6f 7420      f"Could not 
-00002650: 6372 6561 7465 2074 6f6b 656e 2073 7061  create token spa
-00002660: 6e20 6672 6f6d 2063 6861 7220 7370 616e  n from char span
-00002670: 2e5c 6e5c 0a20 2020 2020 2020 2020 2020  .\n\.           
-00002680: 2020 2020 2020 2020 2053 656e 3a20 7b73           Sen: {s
-00002690: 656e 7465 6e63 657d 5c6e 5374 6172 743a  entence}\nStart:
-000026a0: 207b 7374 6172 747d 2c20 456e 643a 207b   {start}, End: {
-000026b0: 656e 647d 2c20 4c61 6265 6c3a 207b 6c61  end}, Label: {la
-000026c0: 6265 6c7d 5c6e 5c0a 2020 2020 2020 2020  bel}\n\.        
-000026d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000026e0: 416e 6e3a 207b 616e 6e6f 7461 7465 645f  Ann: {annotated_
-000026f0: 7061 7274 7d5c 6e52 6177 3a20 7b74 6578  part}\nRaw: {tex
-00002700: 747d 5c6e 436f 3a20 7b73 7461 7274 5f69  t}\nCo: {start_i
-00002710: 6478 7d2c 207b 656e 645f 6964 787d 220a  dx}, {end_idx}".
-00002720: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
-00002730: 2020 2020 2020 2073 656e 7465 6e63 655b         sentence[
-00002740: 7374 6172 745f 6964 7820 3a20 656e 645f  start_idx : end_
-00002750: 6964 7820 2b20 315d 2e61 6464 5f6c 6162  idx + 1].add_lab
-00002760: 656c 2873 656c 662e 6c61 6265 6c5f 7479  el(self.label_ty
-00002770: 7065 2c20 6c61 6265 6c29 0a0a 2020 2020  pe, label)..    
-00002780: 6465 6620 5f61 6464 5f6d 6574 6164 6174  def _add_metadat
-00002790: 6173 5f74 6f5f 7365 6e74 656e 6365 2873  as_to_sentence(s
-000027a0: 656c 662c 2073 656e 7465 6e63 653a 2053  elf, sentence: S
-000027b0: 656e 7465 6e63 652c 206d 6574 6164 6174  entence, metadat
-000027c0: 6173 3a20 4c69 7374 5b54 7570 6c65 5b73  as: List[Tuple[s
-000027d0: 7472 2c20 7374 725d 5d29 3a0a 2020 2020  tr, str]]):.    
-000027e0: 2020 2020 2320 4164 6420 6d65 7461 6461      # Add metada
-000027f0: 7461 7320 666f 7220 7365 6e74 656e 6365  tas for sentence
-00002800: 0a20 2020 2020 2020 2066 6f72 206d 6574  .        for met
-00002810: 6164 6174 6120 696e 206d 6574 6164 6174  adata in metadat
-00002820: 6173 3a0a 2020 2020 2020 2020 2020 2020  as:.            
-00002830: 7365 6c66 2e5f 6164 645f 6d65 7461 6461  self._add_metada
-00002840: 7461 5f74 6f5f 7365 6e74 656e 6365 2873  ta_to_sentence(s
-00002850: 656e 7465 6e63 652c 206d 6574 6164 6174  entence, metadat
-00002860: 615b 305d 2c20 6d65 7461 6461 7461 5b31  a[0], metadata[1
-00002870: 5d29 0a0a 2020 2020 4073 7461 7469 636d  ])..    @staticm
-00002880: 6574 686f 640a 2020 2020 6465 6620 5f61  ethod.    def _a
-00002890: 6464 5f6d 6574 6164 6174 615f 746f 5f73  dd_metadata_to_s
-000028a0: 656e 7465 6e63 6528 7365 6e74 656e 6365  entence(sentence
-000028b0: 3a20 5365 6e74 656e 6365 2c20 6d65 7461  : Sentence, meta
-000028c0: 6461 7461 5f6b 6579 3a20 7374 722c 206d  data_key: str, m
-000028d0: 6574 6164 6174 615f 7661 6c75 653a 2073  etadata_value: s
-000028e0: 7472 293a 0a20 2020 2020 2020 2073 656e  tr):.        sen
-000028f0: 7465 6e63 652e 6164 645f 6d65 7461 6461  tence.add_metada
-00002900: 7461 286d 6574 6164 6174 615f 6b65 792c  ta(metadata_key,
-00002910: 206d 6574 6164 6174 615f 7661 6c75 6529   metadata_value)
-00002920: 0a0a 2020 2020 6465 6620 6973 5f69 6e5f  ..    def is_in_
-00002930: 6d65 6d6f 7279 2873 656c 6629 202d 3e20  memory(self) -> 
-00002940: 626f 6f6c 3a0a 2020 2020 2020 2020 2320  bool:.        # 
-00002950: 4375 7272 656e 746c 7920 616c 6c20 4a73  Currently all Js
-00002960: 6f6e 6c20 4461 7461 7365 7473 2061 7265  onl Datasets are
-00002970: 2073 746f 7265 6420 696e 204d 656d 6f72   stored in Memor
-00002980: 790a 2020 2020 2020 2020 7265 7475 726e  y.        return
-00002990: 2054 7275 650a 0a20 2020 2064 6566 205f   True..    def _
-000029a0: 5f6c 656e 5f5f 2873 656c 6629 202d 3e20  _len__(self) -> 
-000029b0: 696e 743a 0a20 2020 2020 2020 2022 2222  int:.        """
-000029c0: 4e75 6d62 6572 206f 6620 7365 6e74 656e  Number of senten
-000029d0: 6365 7320 696e 2074 6865 2044 6174 6173  ces in the Datas
-000029e0: 6574 2e22 2222 0a20 2020 2020 2020 2072  et.""".        r
-000029f0: 6574 7572 6e20 6c65 6e28 7365 6c66 2e73  eturn len(self.s
-00002a00: 656e 7465 6e63 6573 290a 0a20 2020 2064  entences)..    d
-00002a10: 6566 205f 5f67 6574 6974 656d 5f5f 2873  ef __getitem__(s
-00002a20: 656c 662c 2069 6e64 6578 3a20 696e 7429  elf, index: int)
-00002a30: 202d 3e20 5365 6e74 656e 6365 3a0a 2020   -> Sentence:.  
-00002a40: 2020 2020 2020 2222 2252 6574 7572 6e73        """Returns
-00002a50: 2074 6865 2073 656e 7465 6e63 6520 6174   the sentence at
-00002a60: 2061 2067 6976 656e 2069 6e64 6578 2e22   a given index."
-00002a70: 2222 0a20 2020 2020 2020 2072 6574 7572  "".        retur
-00002a80: 6e20 7365 6c66 2e73 656e 7465 6e63 6573  n self.sentences
-00002a90: 5b69 6e64 6578 5d0a 0a0a 636c 6173 7320  [index]...class 
-00002aa0: 4d75 6c74 6946 696c 6543 6f6c 756d 6e43  MultiFileColumnC
-00002ab0: 6f72 7075 7328 436f 7270 7573 293a 0a20  orpus(Corpus):. 
-00002ac0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-00002ad0: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
-00002ae0: 2020 2020 2020 2063 6f6c 756d 6e5f 666f         column_fo
-00002af0: 726d 6174 3a20 4469 6374 5b69 6e74 2c20  rmat: Dict[int, 
-00002b00: 7374 725d 2c0a 2020 2020 2020 2020 7472  str],.        tr
-00002b10: 6169 6e5f 6669 6c65 733d 4e6f 6e65 2c0a  ain_files=None,.
-00002b20: 2020 2020 2020 2020 7465 7374 5f66 696c          test_fil
-00002b30: 6573 3d4e 6f6e 652c 0a20 2020 2020 2020  es=None,.       
-00002b40: 2064 6576 5f66 696c 6573 3d4e 6f6e 652c   dev_files=None,
-00002b50: 0a20 2020 2020 2020 2063 6f6c 756d 6e5f  .        column_
-00002b60: 6465 6c69 6d69 7465 723a 2073 7472 203d  delimiter: str =
-00002b70: 2072 225c 732b 222c 0a20 2020 2020 2020   r"\s+",.       
-00002b80: 2063 6f6d 6d65 6e74 5f73 796d 626f 6c3a   comment_symbol:
-00002b90: 204f 7074 696f 6e61 6c5b 7374 725d 203d   Optional[str] =
-00002ba0: 204e 6f6e 652c 0a20 2020 2020 2020 2065   None,.        e
-00002bb0: 6e63 6f64 696e 673a 2073 7472 203d 2022  ncoding: str = "
-00002bc0: 7574 662d 3822 2c0a 2020 2020 2020 2020  utf-8",.        
-00002bd0: 646f 6375 6d65 6e74 5f73 6570 6172 6174  document_separat
-00002be0: 6f72 5f74 6f6b 656e 3a20 4f70 7469 6f6e  or_token: Option
-00002bf0: 616c 5b73 7472 5d20 3d20 4e6f 6e65 2c0a  al[str] = None,.
-00002c00: 2020 2020 2020 2020 736b 6970 5f66 6972          skip_fir
-00002c10: 7374 5f6c 696e 653a 2062 6f6f 6c20 3d20  st_line: bool = 
-00002c20: 4661 6c73 652c 0a20 2020 2020 2020 2069  False,.        i
-00002c30: 6e5f 6d65 6d6f 7279 3a20 626f 6f6c 203d  n_memory: bool =
-00002c40: 2054 7275 652c 0a20 2020 2020 2020 206c   True,.        l
-00002c50: 6162 656c 5f6e 616d 655f 6d61 703a 204f  abel_name_map: O
-00002c60: 7074 696f 6e61 6c5b 4469 6374 5b73 7472  ptional[Dict[str
-00002c70: 2c20 7374 725d 5d20 3d20 4e6f 6e65 2c0a  , str]] = None,.
-00002c80: 2020 2020 2020 2020 6261 6e6e 6564 5f73          banned_s
-00002c90: 656e 7465 6e63 6573 3a20 4f70 7469 6f6e  entences: Option
-00002ca0: 616c 5b4c 6973 745b 7374 725d 5d20 3d20  al[List[str]] = 
-00002cb0: 4e6f 6e65 2c0a 2020 2020 2020 2020 6465  None,.        de
-00002cc0: 6661 756c 745f 7768 6974 6573 7061 6365  fault_whitespace
-00002cd0: 5f61 6674 6572 3a20 696e 7420 3d20 312c  _after: int = 1,
-00002ce0: 0a20 2020 2020 2020 202a 2a63 6f72 7075  .        **corpu
-00002cf0: 7361 7267 732c 0a20 2020 2029 202d 3e20  sargs,.    ) -> 
-00002d00: 4e6f 6e65 3a0a 2020 2020 2020 2020 7222  None:.        r"
-00002d10: 2222 496e 7374 616e 7469 6174 6573 2061  ""Instantiates a
-00002d20: 2043 6f72 7075 7320 6672 6f6d 2043 6f4e   Corpus from CoN
-00002d30: 4c4c 2063 6f6c 756d 6e2d 666f 726d 6174  LL column-format
-00002d40: 7465 6420 7461 736b 2064 6174 6120 7375  ted task data su
-00002d50: 6368 2061 7320 436f 4e4c 4c30 3320 6f72  ch as CoNLL03 or
-00002d60: 2043 6f4e 4c4c 3230 3030 2e0a 0a20 2020   CoNLL2000...   
-00002d70: 2020 2020 2041 7267 733a 0a20 2020 2020       Args:.     
-00002d80: 2020 2020 2020 2064 6174 615f 666f 6c64         data_fold
-00002d90: 6572 3a20 6261 7365 2066 6f6c 6465 7220  er: base folder 
-00002da0: 7769 7468 2074 6865 2074 6173 6b20 6461  with the task da
-00002db0: 7461 0a20 2020 2020 2020 2020 2020 2063  ta.            c
-00002dc0: 6f6c 756d 6e5f 666f 726d 6174 3a20 6120  olumn_format: a 
-00002dd0: 6d61 7020 7370 6563 6966 7969 6e67 2074  map specifying t
-00002de0: 6865 2063 6f6c 756d 6e20 666f 726d 6174  he column format
-00002df0: 0a20 2020 2020 2020 2020 2020 2074 7261  .            tra
-00002e00: 696e 5f66 696c 6573 3a20 7468 6520 6e61  in_files: the na
-00002e10: 6d65 206f 6620 7468 6520 7472 6169 6e20  me of the train 
-00002e20: 6669 6c65 730a 2020 2020 2020 2020 2020  files.          
-00002e30: 2020 7465 7374 5f66 696c 6573 3a20 7468    test_files: th
-00002e40: 6520 6e61 6d65 206f 6620 7468 6520 7465  e name of the te
-00002e50: 7374 2066 696c 6573 0a20 2020 2020 2020  st files.       
-00002e60: 2020 2020 2064 6576 5f66 696c 6573 3a20       dev_files: 
-00002e70: 7468 6520 6e61 6d65 206f 6620 7468 6520  the name of the 
-00002e80: 6465 7620 6669 6c65 732c 2069 6620 656d  dev files, if em
-00002e90: 7074 792c 2064 6576 2064 6174 6120 6973  pty, dev data is
-00002ea0: 2073 616d 706c 6564 2066 726f 6d20 7472   sampled from tr
-00002eb0: 6169 6e0a 2020 2020 2020 2020 2020 2020  ain.            
-00002ec0: 636f 6c75 6d6e 5f64 656c 696d 6974 6572  column_delimiter
-00002ed0: 3a20 6465 6661 756c 7420 6973 2074 6f20  : default is to 
-00002ee0: 7370 6c69 7420 6f6e 2061 6e79 2073 6570  split on any sep
-00002ef0: 6172 6174 6174 6f72 2c20 6275 7420 796f  aratator, but yo
-00002f00: 7520 6361 6e20 6f76 6572 7772 6974 6520  u can overwrite 
-00002f10: 666f 7220 696e 7374 616e 6365 2077 6974  for instance wit
-00002f20: 6820 225c 7422 2074 6f20 7370 6c69 7420  h "\t" to split 
-00002f30: 6f6e 6c79 206f 6e20 7461 6273 0a20 2020  only on tabs.   
-00002f40: 2020 2020 2020 2020 2063 6f6d 6d65 6e74           comment
-00002f50: 5f73 796d 626f 6c3a 2069 6620 7365 742c  _symbol: if set,
-00002f60: 206c 696e 6573 2074 6861 7420 6265 6769   lines that begi
-00002f70: 6e20 7769 7468 2074 6869 7320 7379 6d62  n with this symb
-00002f80: 6f6c 2061 7265 2074 7265 6174 6564 2061  ol are treated a
-00002f90: 7320 636f 6d6d 656e 7473 0a20 2020 2020  s comments.     
-00002fa0: 2020 2020 2020 2064 6f63 756d 656e 745f         document_
-00002fb0: 7365 7061 7261 746f 725f 746f 6b65 6e3a  separator_token:
-00002fc0: 2049 6620 7072 6f76 6964 6564 2c20 7365   If provided, se
-00002fd0: 6e74 656e 6365 7320 7468 6174 2066 756e  ntences that fun
-00002fe0: 6374 696f 6e20 6173 2064 6f63 756d 656e  ction as documen
-00002ff0: 7420 626f 756e 6461 7269 6573 2061 7265  t boundaries are
-00003000: 2073 6f20 6d61 726b 6564 0a20 2020 2020   so marked.     
-00003010: 2020 2020 2020 2073 6b69 705f 6669 7273         skip_firs
-00003020: 745f 6c69 6e65 3a20 7365 7420 746f 2054  t_line: set to T
-00003030: 7275 6520 6966 2079 6f75 7220 6461 7461  rue if your data
-00003040: 7365 7420 6861 7320 6120 6865 6164 6572  set has a header
-00003050: 206c 696e 650a 2020 2020 2020 2020 2020   line.          
-00003060: 2020 696e 5f6d 656d 6f72 793a 2049 6620    in_memory: If 
-00003070: 7365 7420 746f 2054 7275 652c 2074 6865  set to True, the
-00003080: 2064 6174 6173 6574 2069 7320 6b65 7074   dataset is kept
-00003090: 2069 6e20 6d65 6d6f 7279 2061 7320 5365   in memory as Se
-000030a0: 6e74 656e 6365 206f 626a 6563 7473 2c20  ntence objects, 
-000030b0: 6f74 6865 7277 6973 6520 646f 6573 2064  otherwise does d
-000030c0: 6973 6b20 7265 6164 730a 2020 2020 2020  isk reads.      
-000030d0: 2020 2020 2020 6c61 6265 6c5f 6e61 6d65        label_name
-000030e0: 5f6d 6170 3a20 4f70 7469 6f6e 616c 6c79  _map: Optionally
-000030f0: 206d 6170 2074 6167 206e 616d 6573 2074   map tag names t
-00003100: 6f20 6469 6666 6572 656e 7420 7363 6865  o different sche
-00003110: 6d61 2e0a 2020 2020 2020 2020 2020 2020  ma..            
-00003120: 6261 6e6e 6564 5f73 656e 7465 6e63 6573  banned_sentences
-00003130: 3a20 4f70 7469 6f6e 616c 6c79 2072 656d  : Optionally rem
-00003140: 6f76 6520 7365 6e74 656e 6365 7320 6672  ove sentences fr
-00003150: 6f6d 2074 6865 2063 6f72 7075 732e 2057  om the corpus. W
-00003160: 6f72 6b73 206f 6e6c 7920 6966 2060 696e  orks only if `in
-00003170: 5f6d 656d 6f72 7960 2069 7320 7472 7565  _memory` is true
-00003180: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00003190: 2020 2020 2023 2067 6574 2074 7261 696e       # get train
-000031a0: 2064 6174 610a 2020 2020 2020 2020 7472   data.        tr
-000031b0: 6169 6e3a 204f 7074 696f 6e61 6c5b 4461  ain: Optional[Da
-000031c0: 7461 7365 745d 203d 2028 0a20 2020 2020  taset] = (.     
-000031d0: 2020 2020 2020 2043 6f6e 6361 7444 6174         ConcatDat
-000031e0: 6173 6574 280a 2020 2020 2020 2020 2020  aset(.          
-000031f0: 2020 2020 2020 5b0a 2020 2020 2020 2020        [.        
-00003200: 2020 2020 2020 2020 2020 2020 436f 6c75              Colu
-00003210: 6d6e 4461 7461 7365 7428 0a20 2020 2020  mnDataset(.     
+00000de0: 2020 2020 2020 2020 6d65 7461 6461 7461          metadata
+00000df0: 5f63 6f6c 756d 6e5f 6e61 6d65 3d6d 6574  _column_name=met
+00000e00: 6164 6174 615f 636f 6c75 6d6e 5f6e 616d  adata_column_nam
+00000e10: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+00000e20: 2020 2020 2020 2020 2020 206c 6162 656c             label
+00000e30: 5f74 7970 653d 6c61 6265 6c5f 7479 7065  _type=label_type
+00000e40: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00000e50: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00000e60: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00000e70: 6465 765f 6669 6c65 2069 6e20 6465 765f  dev_file in dev_
+00000e80: 6669 6c65 730a 2020 2020 2020 2020 2020  files.          
+00000e90: 2020 2020 2020 5d0a 2020 2020 2020 2020        ].        
+00000ea0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+00000eb0: 2020 6966 2064 6576 5f66 696c 6573 2061    if dev_files a
+00000ec0: 6e64 2064 6576 5f66 696c 6573 5b30 5d0a  nd dev_files[0].
+00000ed0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00000ee0: 204e 6f6e 650a 2020 2020 2020 2020 290a   None.        ).
+00000ef0: 2020 2020 2020 2020 7375 7065 7228 292e          super().
+00000f00: 5f5f 696e 6974 5f5f 2874 7261 696e 2c20  __init__(train, 
+00000f10: 6465 762c 2074 6573 742c 202a 2a63 6f72  dev, test, **cor
+00000f20: 7075 7361 7267 7329 0a0a 0a63 6c61 7373  pusargs)...class
+00000f30: 204a 736f 6e6c 436f 7270 7573 284d 756c   JsonlCorpus(Mul
+00000f40: 7469 4669 6c65 4a73 6f6e 6c43 6f72 7075  tiFileJsonlCorpu
+00000f50: 7329 3a0a 2020 2020 6465 6620 5f5f 696e  s):.    def __in
+00000f60: 6974 5f5f 280a 2020 2020 2020 2020 7365  it__(.        se
+00000f70: 6c66 2c0a 2020 2020 2020 2020 6461 7461  lf,.        data
+00000f80: 5f66 6f6c 6465 723a 2055 6e69 6f6e 5b73  _folder: Union[s
+00000f90: 7472 2c20 5061 7468 5d2c 0a20 2020 2020  tr, Path],.     
+00000fa0: 2020 2074 7261 696e 5f66 696c 653a 204f     train_file: O
+00000fb0: 7074 696f 6e61 6c5b 556e 696f 6e5b 7374  ptional[Union[st
+00000fc0: 722c 2050 6174 685d 5d20 3d20 4e6f 6e65  r, Path]] = None
+00000fd0: 2c0a 2020 2020 2020 2020 7465 7374 5f66  ,.        test_f
+00000fe0: 696c 653a 204f 7074 696f 6e61 6c5b 556e  ile: Optional[Un
+00000ff0: 696f 6e5b 7374 722c 2050 6174 685d 5d20  ion[str, Path]] 
+00001000: 3d20 4e6f 6e65 2c0a 2020 2020 2020 2020  = None,.        
+00001010: 6465 765f 6669 6c65 3a20 4f70 7469 6f6e  dev_file: Option
+00001020: 616c 5b55 6e69 6f6e 5b73 7472 2c20 5061  al[Union[str, Pa
+00001030: 7468 5d5d 203d 204e 6f6e 652c 0a20 2020  th]] = None,.   
+00001040: 2020 2020 2065 6e63 6f64 696e 673a 2073       encoding: s
+00001050: 7472 203d 2022 7574 662d 3822 2c0a 2020  tr = "utf-8",.  
+00001060: 2020 2020 2020 7465 7874 5f63 6f6c 756d        text_colum
+00001070: 6e5f 6e61 6d65 3a20 7374 7220 3d20 2264  n_name: str = "d
+00001080: 6174 6122 2c0a 2020 2020 2020 2020 6c61  ata",.        la
+00001090: 6265 6c5f 636f 6c75 6d6e 5f6e 616d 653a  bel_column_name:
+000010a0: 2073 7472 203d 2022 6c61 6265 6c22 2c0a   str = "label",.
+000010b0: 2020 2020 2020 2020 6d65 7461 6461 7461          metadata
+000010c0: 5f63 6f6c 756d 6e5f 6e61 6d65 3a20 7374  _column_name: st
+000010d0: 7220 3d20 226d 6574 6164 6174 6122 2c0a  r = "metadata",.
+000010e0: 2020 2020 2020 2020 6c61 6265 6c5f 7479          label_ty
+000010f0: 7065 3a20 7374 7220 3d20 226e 6572 222c  pe: str = "ner",
+00001100: 0a20 2020 2020 2020 2061 7574 6f66 696e  .        autofin
+00001110: 645f 7370 6c69 7473 3a20 626f 6f6c 203d  d_splits: bool =
+00001120: 2054 7275 652c 0a20 2020 2020 2020 206e   True,.        n
+00001130: 616d 653a 204f 7074 696f 6e61 6c5b 7374  ame: Optional[st
+00001140: 725d 203d 204e 6f6e 652c 0a20 2020 2020  r] = None,.     
+00001150: 2020 202a 2a63 6f72 7075 7361 7267 732c     **corpusargs,
+00001160: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
+00001170: 2020 2020 2020 2020 2222 2249 6e73 7461          """Insta
+00001180: 6e74 6961 7465 7320 6120 4a73 6f6e 6c43  ntiates a JsonlC
+00001190: 6f72 7075 7320 7769 7468 206f 6e65 2066  orpus with one f
+000011a0: 696c 6520 7065 7220 4461 7461 7365 7420  ile per Dataset 
+000011b0: 2874 7261 696e 2c20 6465 762c 2061 6e64  (train, dev, and
+000011c0: 2074 6573 7429 2e0a 0a20 2020 2020 2020   test)...       
+000011d0: 203a 7061 7261 6d20 6461 7461 5f66 6f6c   :param data_fol
+000011e0: 6465 723a 2050 6174 6820 746f 2074 6865  der: Path to the
+000011f0: 2066 6f6c 6465 7220 636f 6e74 6169 6e69   folder containi
+00001200: 6e67 2074 6865 204a 534f 4e4c 2063 6f72  ng the JSONL cor
+00001210: 7075 730a 2020 2020 2020 2020 3a70 6172  pus.        :par
+00001220: 616d 2074 7261 696e 5f66 696c 653a 2074  am train_file: t
+00001230: 6865 206e 616d 6520 6f66 2074 6865 2074  he name of the t
+00001240: 7261 696e 2066 696c 650a 2020 2020 2020  rain file.      
+00001250: 2020 3a70 6172 616d 2074 6573 745f 6669    :param test_fi
+00001260: 6c65 3a20 7468 6520 6e61 6d65 206f 6620  le: the name of 
+00001270: 7468 6520 7465 7374 2066 696c 650a 2020  the test file.  
+00001280: 2020 2020 2020 3a70 6172 616d 2064 6576        :param dev
+00001290: 5f66 696c 653a 2074 6865 206e 616d 6520  _file: the name 
+000012a0: 6f66 2074 6865 2064 6576 2066 696c 652c  of the dev file,
+000012b0: 2069 6620 4e6f 6e65 2c20 6465 7620 6461   if None, dev da
+000012c0: 7461 2069 7320 7361 6d70 6c65 6420 6672  ta is sampled fr
+000012d0: 6f6d 2074 7261 696e 0a20 2020 2020 2020  om train.       
+000012e0: 203a 7061 7261 6d20 7465 7874 5f63 6f6c   :param text_col
+000012f0: 756d 6e5f 6e61 6d65 3a20 4e61 6d65 206f  umn_name: Name o
+00001300: 6620 7468 6520 7465 7874 2063 6f6c 756d  f the text colum
+00001310: 6e20 696e 7369 6465 2074 6865 204a 534f  n inside the JSO
+00001320: 4e4c 2066 696c 652e 0a20 2020 2020 2020  NL file..       
+00001330: 203a 7061 7261 6d20 6c61 6265 6c5f 636f   :param label_co
+00001340: 6c75 6d6e 5f6e 616d 653a 204e 616d 6520  lumn_name: Name 
+00001350: 6f66 2074 6865 206c 6162 656c 2063 6f6c  of the label col
+00001360: 756d 6e20 696e 7369 6465 2074 6865 204a  umn inside the J
+00001370: 534f 4e4c 2066 696c 652e 0a20 2020 2020  SONL file..     
+00001380: 2020 203a 7061 7261 6d20 6d65 7461 6461     :param metada
+00001390: 7461 5f63 6f6c 756d 6e5f 6e61 6d65 3a20  ta_column_name: 
+000013a0: 4e61 6d65 206f 6620 7468 6520 6d65 7461  Name of the meta
+000013b0: 6461 7461 2063 6f6c 756d 6e20 696e 7369  data column insi
+000013c0: 6465 2074 6865 204a 534f 4e4c 2066 696c  de the JSONL fil
+000013d0: 652e 0a20 2020 2020 2020 203a 7061 7261  e..        :para
+000013e0: 6d20 6175 746f 6669 6e64 5f73 706c 6974  m autofind_split
+000013f0: 733a 2057 6865 7468 6572 2074 7261 696e  s: Whether train
+00001400: 2c20 7465 7374 2061 6e64 2064 6576 2066  , test and dev f
+00001410: 696c 6520 7368 6f75 6c64 2062 6520 6465  ile should be de
+00001420: 7465 726d 696e 6564 2061 7574 6f6d 6174  termined automat
+00001430: 6963 616c 6c79 0a20 2020 2020 2020 203a  ically.        :
+00001440: 7061 7261 6d20 6e61 6d65 3a20 6e61 6d65  param name: name
+00001450: 206f 6620 7468 6520 436f 7270 7573 2073   of the Corpus s
+00001460: 6565 206b 6f6c 6962 7269 2e62 6163 6b65  ee kolibri.backe
+00001470: 6e64 2e70 7974 6f72 6368 2e64 6174 612e  nd.pytorch.data.
+00001480: 436f 7270 7573 0a20 2020 2020 2020 2022  Corpus.        "
+00001490: 2222 0a20 2020 2020 2020 2023 2066 696e  "".        # fin
+000014a0: 6420 7472 6169 6e2c 2064 6576 2061 6e64  d train, dev and
+000014b0: 2074 6573 7420 6669 6c65 7320 6966 206e   test files if n
+000014c0: 6f74 2073 7065 6369 6669 6564 0a20 2020  ot specified.   
+000014d0: 2020 2020 2064 6576 5f66 696c 652c 2074       dev_file, t
+000014e0: 6573 745f 6669 6c65 2c20 7472 6169 6e5f  est_file, train_
+000014f0: 6669 6c65 203d 2066 696e 645f 7472 6169  file = find_trai
+00001500: 6e5f 6465 765f 7465 7374 5f66 696c 6573  n_dev_test_files
+00001510: 280a 2020 2020 2020 2020 2020 2020 6461  (.            da
+00001520: 7461 5f66 6f6c 6465 722c 2064 6576 5f66  ta_folder, dev_f
+00001530: 696c 652c 2074 6573 745f 6669 6c65 2c20  ile, test_file, 
+00001540: 7472 6169 6e5f 6669 6c65 2c20 6175 746f  train_file, auto
+00001550: 6669 6e64 5f73 706c 6974 730a 2020 2020  find_splits.    
+00001560: 2020 2020 290a 2020 2020 2020 2020 7375      ).        su
+00001570: 7065 7228 292e 5f5f 696e 6974 5f5f 280a  per().__init__(.
+00001580: 2020 2020 2020 2020 2020 2020 6465 765f              dev_
+00001590: 6669 6c65 733d 5b64 6576 5f66 696c 655d  files=[dev_file]
+000015a0: 2069 6620 6465 765f 6669 6c65 2065 6c73   if dev_file els
+000015b0: 6520 5b5d 2c0a 2020 2020 2020 2020 2020  e [],.          
+000015c0: 2020 7472 6169 6e5f 6669 6c65 733d 5b74    train_files=[t
+000015d0: 7261 696e 5f66 696c 655d 2069 6620 7472  rain_file] if tr
+000015e0: 6169 6e5f 6669 6c65 2065 6c73 6520 5b5d  ain_file else []
+000015f0: 2c0a 2020 2020 2020 2020 2020 2020 7465  ,.            te
+00001600: 7374 5f66 696c 6573 3d5b 7465 7374 5f66  st_files=[test_f
+00001610: 696c 655d 2069 6620 7465 7374 5f66 696c  ile] if test_fil
+00001620: 6520 656c 7365 205b 5d2c 0a20 2020 2020  e else [],.     
+00001630: 2020 2020 2020 2074 6578 745f 636f 6c75         text_colu
+00001640: 6d6e 5f6e 616d 653d 7465 7874 5f63 6f6c  mn_name=text_col
+00001650: 756d 6e5f 6e61 6d65 2c0a 2020 2020 2020  umn_name,.      
+00001660: 2020 2020 2020 6c61 6265 6c5f 636f 6c75        label_colu
+00001670: 6d6e 5f6e 616d 653d 6c61 6265 6c5f 636f  mn_name=label_co
+00001680: 6c75 6d6e 5f6e 616d 652c 0a20 2020 2020  lumn_name,.     
+00001690: 2020 2020 2020 206d 6574 6164 6174 615f         metadata_
+000016a0: 636f 6c75 6d6e 5f6e 616d 653d 6d65 7461  column_name=meta
+000016b0: 6461 7461 5f63 6f6c 756d 6e5f 6e61 6d65  data_column_name
+000016c0: 2c0a 2020 2020 2020 2020 2020 2020 6c61  ,.            la
+000016d0: 6265 6c5f 7479 7065 3d6c 6162 656c 5f74  bel_type=label_t
+000016e0: 7970 652c 0a20 2020 2020 2020 2020 2020  ype,.           
+000016f0: 206e 616d 653d 6e61 6d65 2069 6620 6461   name=name if da
+00001700: 7461 5f66 6f6c 6465 7220 6973 204e 6f6e  ta_folder is Non
+00001710: 6520 656c 7365 2073 7472 2864 6174 615f  e else str(data_
+00001720: 666f 6c64 6572 292c 0a20 2020 2020 2020  folder),.       
+00001730: 2020 2020 2065 6e63 6f64 696e 673d 656e       encoding=en
+00001740: 636f 6469 6e67 2c0a 2020 2020 2020 2020  coding,.        
+00001750: 2020 2020 2a2a 636f 7270 7573 6172 6773      **corpusargs
+00001760: 2c0a 2020 2020 2020 2020 290a 0a63 6c61  ,.        )..cla
+00001770: 7373 204a 736f 6e6c 4461 7461 7365 7428  ss JsonlDataset(
+00001780: 466c 6169 7244 6174 6173 6574 293a 0a20  FlairDataset):. 
+00001790: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+000017a0: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
+000017b0: 2020 2020 2020 2070 6174 685f 746f 5f6a         path_to_j
+000017c0: 736f 6e6c 5f66 696c 653a 2055 6e69 6f6e  sonl_file: Union
+000017d0: 5b73 7472 2c20 5061 7468 5d2c 0a20 2020  [str, Path],.   
+000017e0: 2020 2020 2065 6e63 6f64 696e 673a 2073       encoding: s
+000017f0: 7472 203d 2022 7574 662d 3822 2c0a 2020  tr = "utf-8",.  
+00001800: 2020 2020 2020 7465 7874 5f63 6f6c 756d        text_colum
+00001810: 6e5f 6e61 6d65 3a20 7374 7220 3d20 2264  n_name: str = "d
+00001820: 6174 6122 2c0a 2020 2020 2020 2020 6c61  ata",.        la
+00001830: 6265 6c5f 636f 6c75 6d6e 5f6e 616d 653a  bel_column_name:
+00001840: 2073 7472 203d 2022 6c61 6265 6c22 2c0a   str = "label",.
+00001850: 2020 2020 2020 2020 6d65 7461 6461 7461          metadata
+00001860: 5f63 6f6c 756d 6e5f 6e61 6d65 3a20 7374  _column_name: st
+00001870: 7220 3d20 226d 6574 6164 6174 6122 2c0a  r = "metadata",.
+00001880: 2020 2020 2020 2020 6c61 6265 6c5f 7479          label_ty
+00001890: 7065 3a20 7374 7220 3d20 226e 6572 222c  pe: str = "ner",
+000018a0: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
+000018b0: 2020 2020 2020 2020 7061 7468 5f74 6f5f          path_to_
+000018c0: 6a73 6f6e 5f66 696c 6520 3d20 5061 7468  json_file = Path
+000018d0: 2870 6174 685f 746f 5f6a 736f 6e6c 5f66  (path_to_jsonl_f
+000018e0: 696c 6529 0a0a 2020 2020 2020 2020 7365  ile)..        se
+000018f0: 6c66 2e74 6578 745f 636f 6c75 6d6e 5f6e  lf.text_column_n
+00001900: 616d 6520 3d20 7465 7874 5f63 6f6c 756d  ame = text_colum
+00001910: 6e5f 6e61 6d65 0a20 2020 2020 2020 2073  n_name.        s
+00001920: 656c 662e 6c61 6265 6c5f 636f 6c75 6d6e  elf.label_column
+00001930: 5f6e 616d 6520 3d20 6c61 6265 6c5f 636f  _name = label_co
+00001940: 6c75 6d6e 5f6e 616d 650a 2020 2020 2020  lumn_name.      
+00001950: 2020 7365 6c66 2e6d 6574 6164 6174 615f    self.metadata_
+00001960: 636f 6c75 6d6e 5f6e 616d 6520 3d20 6d65  column_name = me
+00001970: 7461 6461 7461 5f63 6f6c 756d 6e5f 6e61  tadata_column_na
+00001980: 6d65 0a20 2020 2020 2020 2073 656c 662e  me.        self.
+00001990: 6c61 6265 6c5f 7479 7065 203d 206c 6162  label_type = lab
+000019a0: 656c 5f74 7970 650a 2020 2020 2020 2020  el_type.        
+000019b0: 7365 6c66 2e70 6174 685f 746f 5f6a 736f  self.path_to_jso
+000019c0: 6e5f 6669 6c65 203d 2070 6174 685f 746f  n_file = path_to
+000019d0: 5f6a 736f 6e5f 6669 6c65 0a0a 2020 2020  _json_file..    
+000019e0: 2020 2020 7365 6c66 2e73 656e 7465 6e63      self.sentenc
+000019f0: 6573 3a20 4c69 7374 5b53 656e 7465 6e63  es: List[Sentenc
+00001a00: 655d 203d 205b 5d0a 2020 2020 2020 2020  e] = [].        
+00001a10: 7769 7468 2070 6174 685f 746f 5f6a 736f  with path_to_jso
+00001a20: 6e5f 6669 6c65 2e6f 7065 6e28 656e 636f  n_file.open(enco
+00001a30: 6469 6e67 3d65 6e63 6f64 696e 6729 2061  ding=encoding) a
+00001a40: 7320 6a73 6f6e 6c5f 6670 3a0a 2020 2020  s jsonl_fp:.    
+00001a50: 2020 2020 2020 2020 666f 7220 6c69 6e65          for line
+00001a60: 2069 6e20 7471 646d 2e74 7164 6d28 6a73   in tqdm.tqdm(js
+00001a70: 6f6e 6c5f 6670 293a 0a20 2020 2020 2020  onl_fp):.       
+00001a80: 2020 2020 2020 2020 2063 7572 7265 6e74           current
+00001a90: 5f6c 696e 6520 3d20 6a73 6f6e 2e6c 6f61  _line = json.loa
+00001aa0: 6473 286c 696e 6529 0a20 2020 2020 2020  ds(line).       
+00001ab0: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+00001ac0: 7374 616e 6365 2863 7572 7265 6e74 5f6c  stance(current_l
+00001ad0: 696e 652c 2064 6963 7429 3a0a 2020 2020  ine, dict):.    
+00001ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001af0: 7261 775f 7465 7874 203d 2063 7572 7265  raw_text = curre
+00001b00: 6e74 5f6c 696e 655b 7465 7874 5f63 6f6c  nt_line[text_col
+00001b10: 756d 6e5f 6e61 6d65 5d0a 2020 2020 2020  umn_name].      
+00001b20: 2020 2020 2020 2020 2020 2020 2020 6375                cu
+00001b30: 7272 656e 745f 6c61 6265 6c73 203d 2063  rrent_labels = c
+00001b40: 7572 7265 6e74 5f6c 696e 655b 6c61 6265  urrent_line[labe
+00001b50: 6c5f 636f 6c75 6d6e 5f6e 616d 655d 0a20  l_column_name]. 
+00001b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001b70: 2020 2063 7572 7265 6e74 5f6d 6574 6164     current_metad
+00001b80: 6174 6173 203d 2063 7572 7265 6e74 5f6c  atas = current_l
+00001b90: 696e 652e 6765 7428 7365 6c66 2e6d 6574  ine.get(self.met
+00001ba0: 6164 6174 615f 636f 6c75 6d6e 5f6e 616d  adata_column_nam
+00001bb0: 652c 207b 7d29 0a20 2020 2020 2020 2020  e, {}).         
+00001bc0: 2020 2020 2020 2020 2020 2063 7572 7265             curre
+00001bd0: 6e74 5f73 656e 7465 6e63 6520 3d20 5365  nt_sentence = Se
+00001be0: 6e74 656e 6365 2872 6177 5f74 6578 7429  ntence(raw_text)
+00001bf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001c00: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
+00001c10: 2863 7572 7265 6e74 5f6c 696e 652c 206c  (current_line, l
+00001c20: 6973 7429 3a0a 2020 2020 2020 2020 2020  ist):.          
+00001c30: 2020 2020 2020 2020 2020 7261 775f 7465            raw_te
+00001c40: 7874 203d 205b 746f 6b65 6e5b 7465 7874  xt = [token[text
+00001c50: 5f63 6f6c 756d 6e5f 6e61 6d65 5d20 666f  _column_name] fo
+00001c60: 7220 746f 6b65 6e20 696e 2063 7572 7265  r token in curre
+00001c70: 6e74 5f6c 696e 655d 0a20 2020 2020 2020  nt_line].       
+00001c80: 2020 2020 2020 2020 2020 2020 2063 7572               cur
+00001c90: 7265 6e74 5f6c 6162 656c 7320 3d20 7b69  rent_labels = {i
+00001ca0: 6478 3a20 746f 6b65 6e5b 6c61 6265 6c5f  dx: token[label_
+00001cb0: 636f 6c75 6d6e 5f6e 616d 655d 2066 6f72  column_name] for
+00001cc0: 2069 6478 2c20 746f 6b65 6e20 696e 2065   idx, token in e
+00001cd0: 6e75 6d65 7261 7465 2863 7572 7265 6e74  numerate(current
+00001ce0: 5f6c 696e 6529 7d0a 2020 2020 2020 2020  _line)}.        
+00001cf0: 2020 2020 2020 2020 2020 2020 6375 7272              curr
+00001d00: 656e 745f 6d65 7461 6461 7461 7320 3d20  ent_metadatas = 
+00001d10: 7b69 6478 3a20 746f 6b65 6e2e 6765 7428  {idx: token.get(
+00001d20: 7365 6c66 2e6d 6574 6164 6174 615f 636f  self.metadata_co
+00001d30: 6c75 6d6e 5f6e 616d 652c 207b 7d29 2066  lumn_name, {}) f
+00001d40: 6f72 2069 6478 2c20 746f 6b65 6e20 696e  or idx, token in
+00001d50: 2065 6e75 6d65 7261 7465 2863 7572 7265   enumerate(curre
+00001d60: 6e74 5f6c 696e 6529 7d0a 2020 2020 2020  nt_line)}.      
+00001d70: 2020 2020 2020 2020 2020 2020 2020 6375                cu
+00001d80: 7272 656e 745f 7365 6e74 656e 6365 203d  rrent_sentence =
+00001d90: 2053 656e 7465 6e63 6528 7261 775f 7465   Sentence(raw_te
+00001da0: 7874 290a 0a20 2020 2020 2020 2020 2020  xt)..           
+00001db0: 2020 2020 2073 656c 662e 5f61 6464 5f6c       self._add_l
+00001dc0: 6162 656c 735f 746f 5f73 656e 7465 6e63  abels_to_sentenc
+00001dd0: 6528 6375 7272 656e 745f 7365 6e74 656e  e(current_senten
+00001de0: 6365 2c20 6375 7272 656e 745f 6c61 6265  ce, current_labe
+00001df0: 6c73 290a 2020 2020 2020 2020 2020 2020  ls).            
+00001e00: 2020 2020 7365 6c66 2e5f 6164 645f 6d65      self._add_me
+00001e10: 7461 6461 7461 735f 746f 5f73 656e 7465  tadatas_to_sente
+00001e20: 6e63 6528 6375 7272 656e 745f 7365 6e74  nce(current_sent
+00001e30: 656e 6365 2c20 6375 7272 656e 745f 6d65  ence, current_me
+00001e40: 7461 6461 7461 7329 0a0a 2020 2020 2020  tadatas)..      
+00001e50: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
+00001e60: 656e 7465 6e63 6573 2e61 7070 656e 6428  entences.append(
+00001e70: 6375 7272 656e 745f 7365 6e74 656e 6365  current_sentence
+00001e80: 290a 0a20 2020 2064 6566 205f 6164 645f  )..    def _add_
+00001e90: 6c61 6265 6c73 5f74 6f5f 7365 6e74 656e  labels_to_senten
+00001ea0: 6365 2873 656c 662c 2073 656e 7465 6e63  ce(self, sentenc
+00001eb0: 653a 2053 656e 7465 6e63 652c 206c 6162  e: Sentence, lab
+00001ec0: 656c 733a 2044 6963 745b 696e 742c 2073  els: Dict[int, s
+00001ed0: 7472 5d29 3a0a 2020 2020 2020 2020 2320  tr]):.        # 
+00001ee0: 4164 6420 7461 6773 2066 6f72 2065 6163  Add tags for eac
+00001ef0: 6820 616e 6e6f 7461 7465 6420 7370 616e  h annotated span
+00001f00: 0a20 2020 2020 2020 2066 6f72 2069 6478  .        for idx
+00001f10: 2c20 6c61 6265 6c20 696e 206c 6162 656c  , label in label
+00001f20: 732e 6974 656d 7328 293a 0a20 2020 2020  s.items():.     
+00001f30: 2020 2020 2020 2073 656e 7465 6e63 655b         sentence[
+00001f40: 6964 785d 2e61 6464 5f6c 6162 656c 2873  idx].add_label(s
+00001f50: 656c 662e 6c61 6265 6c5f 7479 7065 2c20  elf.label_type, 
+00001f60: 6c61 6265 6c29 0a0a 2020 2020 6465 6620  label)..    def 
+00001f70: 5f61 6464 5f6d 6574 6164 6174 6173 5f74  _add_metadatas_t
+00001f80: 6f5f 7365 6e74 656e 6365 2873 656c 662c  o_sentence(self,
+00001f90: 2073 656e 7465 6e63 653a 2053 656e 7465   sentence: Sente
+00001fa0: 6e63 652c 206d 6574 6164 6174 6173 3a20  nce, metadatas: 
+00001fb0: 4469 6374 5b69 6e74 2c20 4469 6374 5b73  Dict[int, Dict[s
+00001fc0: 7472 2c20 7374 725d 5d29 3a0a 2020 2020  tr, str]]):.    
+00001fd0: 2020 2020 2320 4164 6420 6d65 7461 6461      # Add metada
+00001fe0: 7461 7320 666f 7220 7365 6e74 656e 6365  tas for sentence
+00001ff0: 0a20 2020 2020 2020 2066 6f72 2069 6478  .        for idx
+00002000: 2c20 6d65 7461 6461 7461 5f64 6963 7420  , metadata_dict 
+00002010: 696e 206d 6574 6164 6174 6173 2e69 7465  in metadatas.ite
+00002020: 6d73 2829 3a0a 2020 2020 2020 2020 2020  ms():.          
+00002030: 2020 666f 7220 6d65 7461 6461 7461 5f6b    for metadata_k
+00002040: 6579 2c20 6d65 7461 6461 7461 5f76 616c  ey, metadata_val
+00002050: 7565 2069 6e20 6d65 7461 6461 7461 5f64  ue in metadata_d
+00002060: 6963 742e 6974 656d 7328 293a 0a20 2020  ict.items():.   
+00002070: 2020 2020 2020 2020 2020 2020 2073 656e               sen
+00002080: 7465 6e63 655b 6964 785d 2e61 6464 5f6d  tence[idx].add_m
+00002090: 6574 6164 6174 6128 6d65 7461 6461 7461  etadata(metadata
+000020a0: 5f6b 6579 2c20 6d65 7461 6461 7461 5f76  _key, metadata_v
+000020b0: 616c 7565 290a 0a20 2020 2064 6566 2069  alue)..    def i
+000020c0: 735f 696e 5f6d 656d 6f72 7928 7365 6c66  s_in_memory(self
+000020d0: 2920 2d3e 2062 6f6f 6c3a 0a20 2020 2020  ) -> bool:.     
+000020e0: 2020 2023 2043 7572 7265 6e74 6c79 2061     # Currently a
+000020f0: 6c6c 204a 736f 6e6c 2044 6174 6173 6574  ll Jsonl Dataset
+00002100: 7320 6172 6520 7374 6f72 6564 2069 6e20  s are stored in 
+00002110: 4d65 6d6f 7279 0a20 2020 2020 2020 2072  Memory.        r
+00002120: 6574 7572 6e20 5472 7565 0a0a 2020 2020  eturn True..    
+00002130: 6465 6620 5f5f 6c65 6e5f 5f28 7365 6c66  def __len__(self
+00002140: 2920 2d3e 2069 6e74 3a0a 2020 2020 2020  ) -> int:.      
+00002150: 2020 2222 224e 756d 6265 7220 6f66 2073    """Number of s
+00002160: 656e 7465 6e63 6573 2069 6e20 7468 6520  entences in the 
+00002170: 4461 7461 7365 742e 2222 220a 2020 2020  Dataset.""".    
+00002180: 2020 2020 7265 7475 726e 206c 656e 2873      return len(s
+00002190: 656c 662e 7365 6e74 656e 6365 7329 0a0a  elf.sentences)..
+000021a0: 2020 2020 6465 6620 5f5f 6765 7469 7465      def __getite
+000021b0: 6d5f 5f28 7365 6c66 2c20 696e 6465 783a  m__(self, index:
+000021c0: 2069 6e74 2920 2d3e 2053 656e 7465 6e63   int) -> Sentenc
+000021d0: 653a 0a20 2020 2020 2020 2022 2222 5265  e:.        """Re
+000021e0: 7475 726e 7320 7468 6520 7365 6e74 656e  turns the senten
+000021f0: 6365 2061 7420 6120 6769 7665 6e20 696e  ce at a given in
+00002200: 6465 782e 2222 220a 2020 2020 2020 2020  dex.""".        
+00002210: 7265 7475 726e 2073 656c 662e 7365 6e74  return self.sent
+00002220: 656e 6365 735b 696e 6465 785d 0a0a 0a63  ences[index]...c
+00002230: 6c61 7373 204d 756c 7469 4669 6c65 436f  lass MultiFileCo
+00002240: 6c75 6d6e 436f 7270 7573 2843 6f72 7075  lumnCorpus(Corpu
+00002250: 7329 3a0a 2020 2020 6465 6620 5f5f 696e  s):.    def __in
+00002260: 6974 5f5f 280a 2020 2020 2020 2020 7365  it__(.        se
+00002270: 6c66 2c0a 2020 2020 2020 2020 636f 6c75  lf,.        colu
+00002280: 6d6e 5f66 6f72 6d61 743a 2044 6963 745b  mn_format: Dict[
+00002290: 696e 742c 2073 7472 5d2c 0a20 2020 2020  int, str],.     
+000022a0: 2020 2074 7261 696e 5f66 696c 6573 3d4e     train_files=N
+000022b0: 6f6e 652c 0a20 2020 2020 2020 2074 6573  one,.        tes
+000022c0: 745f 6669 6c65 733d 4e6f 6e65 2c0a 2020  t_files=None,.  
+000022d0: 2020 2020 2020 6465 765f 6669 6c65 733d        dev_files=
+000022e0: 4e6f 6e65 2c0a 2020 2020 2020 2020 636f  None,.        co
+000022f0: 6c75 6d6e 5f64 656c 696d 6974 6572 3a20  lumn_delimiter: 
+00002300: 7374 7220 3d20 7222 5c73 2b22 2c0a 2020  str = r"\s+",.  
+00002310: 2020 2020 2020 636f 6d6d 656e 745f 7379        comment_sy
+00002320: 6d62 6f6c 3a20 4f70 7469 6f6e 616c 5b73  mbol: Optional[s
+00002330: 7472 5d20 3d20 4e6f 6e65 2c0a 2020 2020  tr] = None,.    
+00002340: 2020 2020 656e 636f 6469 6e67 3a20 7374      encoding: st
+00002350: 7220 3d20 2275 7466 2d38 222c 0a20 2020  r = "utf-8",.   
+00002360: 2020 2020 2064 6f63 756d 656e 745f 7365       document_se
+00002370: 7061 7261 746f 725f 746f 6b65 6e3a 204f  parator_token: O
+00002380: 7074 696f 6e61 6c5b 7374 725d 203d 204e  ptional[str] = N
+00002390: 6f6e 652c 0a20 2020 2020 2020 2073 6b69  one,.        ski
+000023a0: 705f 6669 7273 745f 6c69 6e65 3a20 626f  p_first_line: bo
+000023b0: 6f6c 203d 2046 616c 7365 2c0a 2020 2020  ol = False,.    
+000023c0: 2020 2020 696e 5f6d 656d 6f72 793a 2062      in_memory: b
+000023d0: 6f6f 6c20 3d20 5472 7565 2c0a 2020 2020  ool = True,.    
+000023e0: 2020 2020 6c61 6265 6c5f 6e61 6d65 5f6d      label_name_m
+000023f0: 6170 3a20 4f70 7469 6f6e 616c 5b44 6963  ap: Optional[Dic
+00002400: 745b 7374 722c 2073 7472 5d5d 203d 204e  t[str, str]] = N
+00002410: 6f6e 652c 0a20 2020 2020 2020 2062 616e  one,.        ban
+00002420: 6e65 645f 7365 6e74 656e 6365 733a 204f  ned_sentences: O
+00002430: 7074 696f 6e61 6c5b 4c69 7374 5b73 7472  ptional[List[str
+00002440: 5d5d 203d 204e 6f6e 652c 0a20 2020 2020  ]] = None,.     
+00002450: 2020 2064 6566 6175 6c74 5f77 6869 7465     default_white
+00002460: 7370 6163 655f 6166 7465 723a 2069 6e74  space_after: int
+00002470: 203d 2031 2c0a 2020 2020 2020 2020 2a2a   = 1,.        **
+00002480: 636f 7270 7573 6172 6773 2c0a 2020 2020  corpusargs,.    
+00002490: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+000024a0: 2020 2072 2222 2249 6e73 7461 6e74 6961     r"""Instantia
+000024b0: 7465 7320 6120 436f 7270 7573 2066 726f  tes a Corpus fro
+000024c0: 6d20 436f 4e4c 4c20 636f 6c75 6d6e 2d66  m CoNLL column-f
+000024d0: 6f72 6d61 7474 6564 2074 6173 6b20 6461  ormatted task da
+000024e0: 7461 2073 7563 6820 6173 2043 6f4e 4c4c  ta such as CoNLL
+000024f0: 3033 206f 7220 436f 4e4c 4c32 3030 302e  03 or CoNLL2000.
+00002500: 0a0a 2020 2020 2020 2020 4172 6773 3a0a  ..        Args:.
+00002510: 2020 2020 2020 2020 2020 2020 6461 7461              data
+00002520: 5f66 6f6c 6465 723a 2062 6173 6520 666f  _folder: base fo
+00002530: 6c64 6572 2077 6974 6820 7468 6520 7461  lder with the ta
+00002540: 736b 2064 6174 610a 2020 2020 2020 2020  sk data.        
+00002550: 2020 2020 636f 6c75 6d6e 5f66 6f72 6d61      column_forma
+00002560: 743a 2061 206d 6170 2073 7065 6369 6679  t: a map specify
+00002570: 696e 6720 7468 6520 636f 6c75 6d6e 2066  ing the column f
+00002580: 6f72 6d61 740a 2020 2020 2020 2020 2020  ormat.          
+00002590: 2020 7472 6169 6e5f 6669 6c65 733a 2074    train_files: t
+000025a0: 6865 206e 616d 6520 6f66 2074 6865 2074  he name of the t
+000025b0: 7261 696e 2066 696c 6573 0a20 2020 2020  rain files.     
+000025c0: 2020 2020 2020 2074 6573 745f 6669 6c65         test_file
+000025d0: 733a 2074 6865 206e 616d 6520 6f66 2074  s: the name of t
+000025e0: 6865 2074 6573 7420 6669 6c65 730a 2020  he test files.  
+000025f0: 2020 2020 2020 2020 2020 6465 765f 6669            dev_fi
+00002600: 6c65 733a 2074 6865 206e 616d 6520 6f66  les: the name of
+00002610: 2074 6865 2064 6576 2066 696c 6573 2c20   the dev files, 
+00002620: 6966 2065 6d70 7479 2c20 6465 7620 6461  if empty, dev da
+00002630: 7461 2069 7320 7361 6d70 6c65 6420 6672  ta is sampled fr
+00002640: 6f6d 2074 7261 696e 0a20 2020 2020 2020  om train.       
+00002650: 2020 2020 2063 6f6c 756d 6e5f 6465 6c69       column_deli
+00002660: 6d69 7465 723a 2064 6566 6175 6c74 2069  miter: default i
+00002670: 7320 746f 2073 706c 6974 206f 6e20 616e  s to split on an
+00002680: 7920 7365 7061 7261 7461 746f 722c 2062  y separatator, b
+00002690: 7574 2079 6f75 2063 616e 206f 7665 7277  ut you can overw
+000026a0: 7269 7465 2066 6f72 2069 6e73 7461 6e63  rite for instanc
+000026b0: 6520 7769 7468 2022 5c74 2220 746f 2073  e with "\t" to s
+000026c0: 706c 6974 206f 6e6c 7920 6f6e 2074 6162  plit only on tab
+000026d0: 730a 2020 2020 2020 2020 2020 2020 636f  s.            co
+000026e0: 6d6d 656e 745f 7379 6d62 6f6c 3a20 6966  mment_symbol: if
+000026f0: 2073 6574 2c20 6c69 6e65 7320 7468 6174   set, lines that
+00002700: 2062 6567 696e 2077 6974 6820 7468 6973   begin with this
+00002710: 2073 796d 626f 6c20 6172 6520 7472 6561   symbol are trea
+00002720: 7465 6420 6173 2063 6f6d 6d65 6e74 730a  ted as comments.
+00002730: 2020 2020 2020 2020 2020 2020 646f 6375              docu
+00002740: 6d65 6e74 5f73 6570 6172 6174 6f72 5f74  ment_separator_t
+00002750: 6f6b 656e 3a20 4966 2070 726f 7669 6465  oken: If provide
+00002760: 642c 2073 656e 7465 6e63 6573 2074 6861  d, sentences tha
+00002770: 7420 6675 6e63 7469 6f6e 2061 7320 646f  t function as do
+00002780: 6375 6d65 6e74 2062 6f75 6e64 6172 6965  cument boundarie
+00002790: 7320 6172 6520 736f 206d 6172 6b65 640a  s are so marked.
+000027a0: 2020 2020 2020 2020 2020 2020 736b 6970              skip
+000027b0: 5f66 6972 7374 5f6c 696e 653a 2073 6574  _first_line: set
+000027c0: 2074 6f20 5472 7565 2069 6620 796f 7572   to True if your
+000027d0: 2064 6174 6173 6574 2068 6173 2061 2068   dataset has a h
+000027e0: 6561 6465 7220 6c69 6e65 0a20 2020 2020  eader line.     
+000027f0: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
+00002800: 3a20 4966 2073 6574 2074 6f20 5472 7565  : If set to True
+00002810: 2c20 7468 6520 6461 7461 7365 7420 6973  , the dataset is
+00002820: 206b 6570 7420 696e 206d 656d 6f72 7920   kept in memory 
+00002830: 6173 2053 656e 7465 6e63 6520 6f62 6a65  as Sentence obje
+00002840: 6374 732c 206f 7468 6572 7769 7365 2064  cts, otherwise d
+00002850: 6f65 7320 6469 736b 2072 6561 6473 0a20  oes disk reads. 
+00002860: 2020 2020 2020 2020 2020 206c 6162 656c             label
+00002870: 5f6e 616d 655f 6d61 703a 204f 7074 696f  _name_map: Optio
+00002880: 6e61 6c6c 7920 6d61 7020 7461 6720 6e61  nally map tag na
+00002890: 6d65 7320 746f 2064 6966 6665 7265 6e74  mes to different
+000028a0: 2073 6368 656d 612e 0a20 2020 2020 2020   schema..       
+000028b0: 2020 2020 2062 616e 6e65 645f 7365 6e74       banned_sent
+000028c0: 656e 6365 733a 204f 7074 696f 6e61 6c6c  ences: Optionall
+000028d0: 7920 7265 6d6f 7665 2073 656e 7465 6e63  y remove sentenc
+000028e0: 6573 2066 726f 6d20 7468 6520 636f 7270  es from the corp
+000028f0: 7573 2e20 576f 726b 7320 6f6e 6c79 2069  us. Works only i
+00002900: 6620 6069 6e5f 6d65 6d6f 7279 6020 6973  f `in_memory` is
+00002910: 2074 7275 650a 2020 2020 2020 2020 2222   true.        ""
+00002920: 220a 2020 2020 2020 2020 2320 6765 7420  ".        # get 
+00002930: 7472 6169 6e20 6461 7461 0a20 2020 2020  train data.     
+00002940: 2020 2074 7261 696e 3a20 4f70 7469 6f6e     train: Option
+00002950: 616c 5b44 6174 6173 6574 5d20 3d20 280a  al[Dataset] = (.
+00002960: 2020 2020 2020 2020 2020 2020 436f 6e63              Conc
+00002970: 6174 4461 7461 7365 7428 0a20 2020 2020  atDataset(.     
+00002980: 2020 2020 2020 2020 2020 205b 0a20 2020             [.   
+00002990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000029a0: 2043 6f6c 756d 6e44 6174 6173 6574 280a   ColumnDataset(.
+000029b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000029c0: 2020 2020 2020 2020 7472 6169 6e5f 6669          train_fi
+000029d0: 6c65 2c0a 2020 2020 2020 2020 2020 2020  le,.            
+000029e0: 2020 2020 2020 2020 2020 2020 636f 6c75              colu
+000029f0: 6d6e 5f66 6f72 6d61 742c 0a20 2020 2020  mn_format,.     
+00002a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002a10: 2020 2065 6e63 6f64 696e 673d 656e 636f     encoding=enco
+00002a20: 6469 6e67 2c0a 2020 2020 2020 2020 2020  ding,.          
+00002a30: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00002a40: 6d6d 656e 745f 7379 6d62 6f6c 3d63 6f6d  mment_symbol=com
+00002a50: 6d65 6e74 5f73 796d 626f 6c2c 0a20 2020  ment_symbol,.   
+00002a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002a70: 2020 2020 2063 6f6c 756d 6e5f 6465 6c69       column_deli
+00002a80: 6d69 7465 723d 636f 6c75 6d6e 5f64 656c  miter=column_del
+00002a90: 696d 6974 6572 2c0a 2020 2020 2020 2020  imiter,.        
+00002aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002ab0: 6261 6e6e 6564 5f73 656e 7465 6e63 6573  banned_sentences
+00002ac0: 3d62 616e 6e65 645f 7365 6e74 656e 6365  =banned_sentence
+00002ad0: 732c 0a20 2020 2020 2020 2020 2020 2020  s,.             
+00002ae0: 2020 2020 2020 2020 2020 2069 6e5f 6d65             in_me
+00002af0: 6d6f 7279 3d69 6e5f 6d65 6d6f 7279 2c0a  mory=in_memory,.
+00002b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002b10: 2020 2020 2020 2020 646f 6375 6d65 6e74          document
+00002b20: 5f73 6570 6172 6174 6f72 5f74 6f6b 656e  _separator_token
+00002b30: 3d64 6f63 756d 656e 745f 7365 7061 7261  =document_separa
+00002b40: 746f 725f 746f 6b65 6e2c 0a20 2020 2020  tor_token,.     
+00002b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002b60: 2020 2073 6b69 705f 6669 7273 745f 6c69     skip_first_li
+00002b70: 6e65 3d73 6b69 705f 6669 7273 745f 6c69  ne=skip_first_li
+00002b80: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
+00002b90: 2020 2020 2020 2020 2020 2020 6c61 6265              labe
+00002ba0: 6c5f 6e61 6d65 5f6d 6170 3d6c 6162 656c  l_name_map=label
+00002bb0: 5f6e 616d 655f 6d61 702c 0a20 2020 2020  _name_map,.     
+00002bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002bd0: 2020 2064 6566 6175 6c74 5f77 6869 7465     default_white
+00002be0: 7370 6163 655f 6166 7465 723d 6465 6661  space_after=defa
+00002bf0: 756c 745f 7768 6974 6573 7061 6365 5f61  ult_whitespace_a
+00002c00: 6674 6572 2c0a 2020 2020 2020 2020 2020  fter,.          
+00002c10: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00002c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002c30: 666f 7220 7472 6169 6e5f 6669 6c65 2069  for train_file i
+00002c40: 6e20 7472 6169 6e5f 6669 6c65 730a 2020  n train_files.  
+00002c50: 2020 2020 2020 2020 2020 2020 2020 5d0a                ].
+00002c60: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+00002c70: 2020 2020 2020 2020 2020 6966 2074 7261            if tra
+00002c80: 696e 5f66 696c 6573 2061 6e64 2074 7261  in_files and tra
+00002c90: 696e 5f66 696c 6573 5b30 5d0a 2020 2020  in_files[0].    
+00002ca0: 2020 2020 2020 2020 656c 7365 204e 6f6e          else Non
+00002cb0: 650a 2020 2020 2020 2020 290a 0a20 2020  e.        )..   
+00002cc0: 2020 2020 2023 2072 6561 6420 696e 2074       # read in t
+00002cd0: 6573 7420 6669 6c65 2069 6620 6578 6973  est file if exis
+00002ce0: 7473 0a20 2020 2020 2020 2074 6573 743a  ts.        test:
+00002cf0: 204f 7074 696f 6e61 6c5b 4461 7461 7365   Optional[Datase
+00002d00: 745d 203d 2028 0a20 2020 2020 2020 2020  t] = (.         
+00002d10: 2020 2043 6f6e 6361 7444 6174 6173 6574     ConcatDataset
+00002d20: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00002d30: 2020 5b0a 2020 2020 2020 2020 2020 2020    [.            
+00002d40: 2020 2020 2020 2020 436f 6c75 6d6e 4461          ColumnDa
+00002d50: 7461 7365 7428 0a20 2020 2020 2020 2020  taset(.         
+00002d60: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+00002d70: 6573 745f 6669 6c65 2c0a 2020 2020 2020  est_file,.      
+00002d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002d90: 2020 636f 6c75 6d6e 5f66 6f72 6d61 742c    column_format,
+00002da0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002db0: 2020 2020 2020 2020 2065 6e63 6f64 696e           encodin
+00002dc0: 673d 656e 636f 6469 6e67 2c0a 2020 2020  g=encoding,.    
+00002dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002de0: 2020 2020 636f 6d6d 656e 745f 7379 6d62      comment_symb
+00002df0: 6f6c 3d63 6f6d 6d65 6e74 5f73 796d 626f  ol=comment_symbo
+00002e00: 6c2c 0a20 2020 2020 2020 2020 2020 2020  l,.             
+00002e10: 2020 2020 2020 2020 2020 2063 6f6c 756d             colum
+00002e20: 6e5f 6465 6c69 6d69 7465 723d 636f 6c75  n_delimiter=colu
+00002e30: 6d6e 5f64 656c 696d 6974 6572 2c0a 2020  mn_delimiter,.  
+00002e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002e50: 2020 2020 2020 6261 6e6e 6564 5f73 656e        banned_sen
+00002e60: 7465 6e63 6573 3d62 616e 6e65 645f 7365  tences=banned_se
+00002e70: 6e74 656e 6365 732c 0a20 2020 2020 2020  ntences,.       
+00002e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002e90: 2069 6e5f 6d65 6d6f 7279 3d69 6e5f 6d65   in_memory=in_me
+00002ea0: 6d6f 7279 2c0a 2020 2020 2020 2020 2020  mory,.          
+00002eb0: 2020 2020 2020 2020 2020 2020 2020 646f                do
+00002ec0: 6375 6d65 6e74 5f73 6570 6172 6174 6f72  cument_separator
+00002ed0: 5f74 6f6b 656e 3d64 6f63 756d 656e 745f  _token=document_
+00002ee0: 7365 7061 7261 746f 725f 746f 6b65 6e2c  separator_token,
+00002ef0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002f00: 2020 2020 2020 2020 2073 6b69 705f 6669           skip_fi
+00002f10: 7273 745f 6c69 6e65 3d73 6b69 705f 6669  rst_line=skip_fi
+00002f20: 7273 745f 6c69 6e65 2c0a 2020 2020 2020  rst_line,.      
+00002f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002f40: 2020 6c61 6265 6c5f 6e61 6d65 5f6d 6170    label_name_map
+00002f50: 3d6c 6162 656c 5f6e 616d 655f 6d61 702c  =label_name_map,
+00002f60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002f70: 2020 2020 2020 2020 2064 6566 6175 6c74           default
+00002f80: 5f77 6869 7465 7370 6163 655f 6166 7465  _whitespace_afte
+00002f90: 723d 6465 6661 756c 745f 7768 6974 6573  r=default_whites
+00002fa0: 7061 6365 5f61 6674 6572 2c0a 2020 2020  pace_after,.    
+00002fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002fc0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00002fd0: 2020 2020 2020 666f 7220 7465 7374 5f66        for test_f
+00002fe0: 696c 6520 696e 2074 6573 745f 6669 6c65  ile in test_file
+00002ff0: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
+00003000: 2020 5d0a 2020 2020 2020 2020 2020 2020    ].            
+00003010: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+00003020: 2074 6573 745f 6669 6c65 7320 616e 6420   test_files and 
+00003030: 7465 7374 5f66 696c 6573 5b30 5d0a 2020  test_files[0].  
+00003040: 2020 2020 2020 2020 2020 656c 7365 204e            else N
+00003050: 6f6e 650a 2020 2020 2020 2020 290a 0a20  one.        ).. 
+00003060: 2020 2020 2020 2023 2072 6561 6420 696e         # read in
+00003070: 2064 6576 2066 696c 6520 6966 2065 7869   dev file if exi
+00003080: 7374 730a 2020 2020 2020 2020 6465 763a  sts.        dev:
+00003090: 204f 7074 696f 6e61 6c5b 4461 7461 7365   Optional[Datase
+000030a0: 745d 203d 2028 0a20 2020 2020 2020 2020  t] = (.         
+000030b0: 2020 2043 6f6e 6361 7444 6174 6173 6574     ConcatDataset
+000030c0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000030d0: 2020 5b0a 2020 2020 2020 2020 2020 2020    [.            
+000030e0: 2020 2020 2020 2020 436f 6c75 6d6e 4461          ColumnDa
+000030f0: 7461 7365 7428 0a20 2020 2020 2020 2020  taset(.         
+00003100: 2020 2020 2020 2020 2020 2020 2020 2064                 d
+00003110: 6576 5f66 696c 652c 0a20 2020 2020 2020  ev_file,.       
+00003120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003130: 2063 6f6c 756d 6e5f 666f 726d 6174 2c0a   column_format,.
+00003140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003150: 2020 2020 2020 2020 656e 636f 6469 6e67          encoding
+00003160: 3d65 6e63 6f64 696e 672c 0a20 2020 2020  =encoding,.     
+00003170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003180: 2020 2063 6f6d 6d65 6e74 5f73 796d 626f     comment_symbo
+00003190: 6c3d 636f 6d6d 656e 745f 7379 6d62 6f6c  l=comment_symbol
+000031a0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000031b0: 2020 2020 2020 2020 2020 636f 6c75 6d6e            column
+000031c0: 5f64 656c 696d 6974 6572 3d63 6f6c 756d  _delimiter=colum
+000031d0: 6e5f 6465 6c69 6d69 7465 722c 0a20 2020  n_delimiter,.   
+000031e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000031f0: 2020 2020 2062 616e 6e65 645f 7365 6e74       banned_sent
+00003200: 656e 6365 733d 6261 6e6e 6564 5f73 656e  ences=banned_sen
+00003210: 7465 6e63 6573 2c0a 2020 2020 2020 2020  tences,.        
 00003220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003230: 2020 2074 7261 696e 5f66 696c 652c 0a20     train_file,. 
-00003240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003250: 2020 2020 2020 2063 6f6c 756d 6e5f 666f         column_fo
-00003260: 726d 6174 2c0a 2020 2020 2020 2020 2020  rmat,.          
-00003270: 2020 2020 2020 2020 2020 2020 2020 656e                en
-00003280: 636f 6469 6e67 3d65 6e63 6f64 696e 672c  coding=encoding,
-00003290: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000032a0: 2020 2020 2020 2020 2063 6f6d 6d65 6e74           comment
-000032b0: 5f73 796d 626f 6c3d 636f 6d6d 656e 745f  _symbol=comment_
-000032c0: 7379 6d62 6f6c 2c0a 2020 2020 2020 2020  symbol,.        
+00003230: 696e 5f6d 656d 6f72 793d 696e 5f6d 656d  in_memory=in_mem
+00003240: 6f72 792c 0a20 2020 2020 2020 2020 2020  ory,.           
+00003250: 2020 2020 2020 2020 2020 2020 2064 6f63               doc
+00003260: 756d 656e 745f 7365 7061 7261 746f 725f  ument_separator_
+00003270: 746f 6b65 6e3d 646f 6375 6d65 6e74 5f73  token=document_s
+00003280: 6570 6172 6174 6f72 5f74 6f6b 656e 2c0a  eparator_token,.
+00003290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000032a0: 2020 2020 2020 2020 736b 6970 5f66 6972          skip_fir
+000032b0: 7374 5f6c 696e 653d 736b 6970 5f66 6972  st_line=skip_fir
+000032c0: 7374 5f6c 696e 652c 0a20 2020 2020 2020  st_line,.       
 000032d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000032e0: 636f 6c75 6d6e 5f64 656c 696d 6974 6572  column_delimiter
-000032f0: 3d63 6f6c 756d 6e5f 6465 6c69 6d69 7465  =column_delimite
-00003300: 722c 0a20 2020 2020 2020 2020 2020 2020  r,.             
-00003310: 2020 2020 2020 2020 2020 2062 616e 6e65             banne
-00003320: 645f 7365 6e74 656e 6365 733d 6261 6e6e  d_sentences=bann
-00003330: 6564 5f73 656e 7465 6e63 6573 2c0a 2020  ed_sentences,.  
-00003340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003350: 2020 2020 2020 696e 5f6d 656d 6f72 793d        in_memory=
-00003360: 696e 5f6d 656d 6f72 792c 0a20 2020 2020  in_memory,.     
-00003370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003380: 2020 2064 6f63 756d 656e 745f 7365 7061     document_sepa
-00003390: 7261 746f 725f 746f 6b65 6e3d 646f 6375  rator_token=docu
-000033a0: 6d65 6e74 5f73 6570 6172 6174 6f72 5f74  ment_separator_t
-000033b0: 6f6b 656e 2c0a 2020 2020 2020 2020 2020  oken,.          
-000033c0: 2020 2020 2020 2020 2020 2020 2020 736b                sk
-000033d0: 6970 5f66 6972 7374 5f6c 696e 653d 736b  ip_first_line=sk
-000033e0: 6970 5f66 6972 7374 5f6c 696e 652c 0a20  ip_first_line,. 
-000033f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003400: 2020 2020 2020 206c 6162 656c 5f6e 616d         label_nam
-00003410: 655f 6d61 703d 6c61 6265 6c5f 6e61 6d65  e_map=label_name
-00003420: 5f6d 6170 2c0a 2020 2020 2020 2020 2020  _map,.          
-00003430: 2020 2020 2020 2020 2020 2020 2020 6465                de
-00003440: 6661 756c 745f 7768 6974 6573 7061 6365  fault_whitespace
-00003450: 5f61 6674 6572 3d64 6566 6175 6c74 5f77  _after=default_w
-00003460: 6869 7465 7370 6163 655f 6166 7465 722c  hitespace_after,
-00003470: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003480: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
-00003490: 2020 2020 2020 2020 2020 2066 6f72 2074             for t
-000034a0: 7261 696e 5f66 696c 6520 696e 2074 7261  rain_file in tra
-000034b0: 696e 5f66 696c 6573 0a20 2020 2020 2020  in_files.       
-000034c0: 2020 2020 2020 2020 205d 0a20 2020 2020           ].     
-000034d0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-000034e0: 2020 2020 2069 6620 7472 6169 6e5f 6669       if train_fi
-000034f0: 6c65 7320 616e 6420 7472 6169 6e5f 6669  les and train_fi
-00003500: 6c65 735b 305d 0a20 2020 2020 2020 2020  les[0].         
-00003510: 2020 2065 6c73 6520 4e6f 6e65 0a20 2020     else None.   
-00003520: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-00003530: 2320 7265 6164 2069 6e20 7465 7374 2066  # read in test f
-00003540: 696c 6520 6966 2065 7869 7374 730a 2020  ile if exists.  
-00003550: 2020 2020 2020 7465 7374 3a20 4f70 7469        test: Opti
-00003560: 6f6e 616c 5b44 6174 6173 6574 5d20 3d20  onal[Dataset] = 
-00003570: 280a 2020 2020 2020 2020 2020 2020 436f  (.            Co
-00003580: 6e63 6174 4461 7461 7365 7428 0a20 2020  ncatDataset(.   
-00003590: 2020 2020 2020 2020 2020 2020 205b 0a20               [. 
-000035a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000035b0: 2020 2043 6f6c 756d 6e44 6174 6173 6574     ColumnDataset
-000035c0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-000035d0: 2020 2020 2020 2020 2020 7465 7374 5f66            test_f
-000035e0: 696c 652c 0a20 2020 2020 2020 2020 2020  ile,.           
-000035f0: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
-00003600: 756d 6e5f 666f 726d 6174 2c0a 2020 2020  umn_format,.    
-00003610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003620: 2020 2020 656e 636f 6469 6e67 3d65 6e63      encoding=enc
-00003630: 6f64 696e 672c 0a20 2020 2020 2020 2020  oding,.         
-00003640: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00003650: 6f6d 6d65 6e74 5f73 796d 626f 6c3d 636f  omment_symbol=co
-00003660: 6d6d 656e 745f 7379 6d62 6f6c 2c0a 2020  mment_symbol,.  
-00003670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003680: 2020 2020 2020 636f 6c75 6d6e 5f64 656c        column_del
-00003690: 696d 6974 6572 3d63 6f6c 756d 6e5f 6465  imiter=column_de
-000036a0: 6c69 6d69 7465 722c 0a20 2020 2020 2020  limiter,.       
-000036b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000036c0: 2062 616e 6e65 645f 7365 6e74 656e 6365   banned_sentence
-000036d0: 733d 6261 6e6e 6564 5f73 656e 7465 6e63  s=banned_sentenc
-000036e0: 6573 2c0a 2020 2020 2020 2020 2020 2020  es,.            
-000036f0: 2020 2020 2020 2020 2020 2020 696e 5f6d              in_m
-00003700: 656d 6f72 793d 696e 5f6d 656d 6f72 792c  emory=in_memory,
-00003710: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003720: 2020 2020 2020 2020 2064 6f63 756d 656e           documen
-00003730: 745f 7365 7061 7261 746f 725f 746f 6b65  t_separator_toke
-00003740: 6e3d 646f 6375 6d65 6e74 5f73 6570 6172  n=document_separ
-00003750: 6174 6f72 5f74 6f6b 656e 2c0a 2020 2020  ator_token,.    
-00003760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003770: 2020 2020 736b 6970 5f66 6972 7374 5f6c      skip_first_l
-00003780: 696e 653d 736b 6970 5f66 6972 7374 5f6c  ine=skip_first_l
-00003790: 696e 652c 0a20 2020 2020 2020 2020 2020  ine,.           
-000037a0: 2020 2020 2020 2020 2020 2020 206c 6162               lab
-000037b0: 656c 5f6e 616d 655f 6d61 703d 6c61 6265  el_name_map=labe
-000037c0: 6c5f 6e61 6d65 5f6d 6170 2c0a 2020 2020  l_name_map,.    
-000037d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000037e0: 2020 2020 6465 6661 756c 745f 7768 6974      default_whit
-000037f0: 6573 7061 6365 5f61 6674 6572 3d64 6566  espace_after=def
-00003800: 6175 6c74 5f77 6869 7465 7370 6163 655f  ault_whitespace_
-00003810: 6166 7465 722c 0a20 2020 2020 2020 2020  after,.         
-00003820: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-00003830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003840: 2066 6f72 2074 6573 745f 6669 6c65 2069   for test_file i
-00003850: 6e20 7465 7374 5f66 696c 6573 0a20 2020  n test_files.   
-00003860: 2020 2020 2020 2020 2020 2020 205d 0a20               ]. 
-00003870: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-00003880: 2020 2020 2020 2020 2069 6620 7465 7374           if test
-00003890: 5f66 696c 6573 2061 6e64 2074 6573 745f  _files and test_
-000038a0: 6669 6c65 735b 305d 0a20 2020 2020 2020  files[0].       
-000038b0: 2020 2020 2065 6c73 6520 4e6f 6e65 0a20       else None. 
-000038c0: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-000038d0: 2020 2320 7265 6164 2069 6e20 6465 7620    # read in dev 
-000038e0: 6669 6c65 2069 6620 6578 6973 7473 0a20  file if exists. 
-000038f0: 2020 2020 2020 2064 6576 3a20 4f70 7469         dev: Opti
-00003900: 6f6e 616c 5b44 6174 6173 6574 5d20 3d20  onal[Dataset] = 
-00003910: 280a 2020 2020 2020 2020 2020 2020 436f  (.            Co
-00003920: 6e63 6174 4461 7461 7365 7428 0a20 2020  ncatDataset(.   
-00003930: 2020 2020 2020 2020 2020 2020 205b 0a20               [. 
-00003940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003950: 2020 2043 6f6c 756d 6e44 6174 6173 6574     ColumnDataset
-00003960: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00003970: 2020 2020 2020 2020 2020 6465 765f 6669            dev_fi
-00003980: 6c65 2c0a 2020 2020 2020 2020 2020 2020  le,.            
-00003990: 2020 2020 2020 2020 2020 2020 636f 6c75              colu
-000039a0: 6d6e 5f66 6f72 6d61 742c 0a20 2020 2020  mn_format,.     
-000039b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000039c0: 2020 2065 6e63 6f64 696e 673d 656e 636f     encoding=enco
-000039d0: 6469 6e67 2c0a 2020 2020 2020 2020 2020  ding,.          
-000039e0: 2020 2020 2020 2020 2020 2020 2020 636f                co
-000039f0: 6d6d 656e 745f 7379 6d62 6f6c 3d63 6f6d  mment_symbol=com
-00003a00: 6d65 6e74 5f73 796d 626f 6c2c 0a20 2020  ment_symbol,.   
-00003a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003a20: 2020 2020 2063 6f6c 756d 6e5f 6465 6c69       column_deli
-00003a30: 6d69 7465 723d 636f 6c75 6d6e 5f64 656c  miter=column_del
-00003a40: 696d 6974 6572 2c0a 2020 2020 2020 2020  imiter,.        
-00003a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003a60: 6261 6e6e 6564 5f73 656e 7465 6e63 6573  banned_sentences
-00003a70: 3d62 616e 6e65 645f 7365 6e74 656e 6365  =banned_sentence
-00003a80: 732c 0a20 2020 2020 2020 2020 2020 2020  s,.             
-00003a90: 2020 2020 2020 2020 2020 2069 6e5f 6d65             in_me
-00003aa0: 6d6f 7279 3d69 6e5f 6d65 6d6f 7279 2c0a  mory=in_memory,.
-00003ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003ac0: 2020 2020 2020 2020 646f 6375 6d65 6e74          document
-00003ad0: 5f73 6570 6172 6174 6f72 5f74 6f6b 656e  _separator_token
-00003ae0: 3d64 6f63 756d 656e 745f 7365 7061 7261  =document_separa
-00003af0: 746f 725f 746f 6b65 6e2c 0a20 2020 2020  tor_token,.     
-00003b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003b10: 2020 2073 6b69 705f 6669 7273 745f 6c69     skip_first_li
-00003b20: 6e65 3d73 6b69 705f 6669 7273 745f 6c69  ne=skip_first_li
-00003b30: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-00003b40: 2020 2020 2020 2020 2020 2020 6c61 6265              labe
-00003b50: 6c5f 6e61 6d65 5f6d 6170 3d6c 6162 656c  l_name_map=label
-00003b60: 5f6e 616d 655f 6d61 702c 0a20 2020 2020  _name_map,.     
-00003b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003b80: 2020 2064 6566 6175 6c74 5f77 6869 7465     default_white
-00003b90: 7370 6163 655f 6166 7465 723d 6465 6661  space_after=defa
-00003ba0: 756c 745f 7768 6974 6573 7061 6365 5f61  ult_whitespace_a
-00003bb0: 6674 6572 2c0a 2020 2020 2020 2020 2020  fter,.          
-00003bc0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00003bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003be0: 666f 7220 6465 765f 6669 6c65 2069 6e20  for dev_file in 
-00003bf0: 6465 765f 6669 6c65 730a 2020 2020 2020  dev_files.      
-00003c00: 2020 2020 2020 2020 2020 5d0a 2020 2020            ].    
-00003c10: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00003c20: 2020 2020 2020 6966 2064 6576 5f66 696c        if dev_fil
-00003c30: 6573 2061 6e64 2064 6576 5f66 696c 6573  es and dev_files
-00003c40: 5b30 5d0a 2020 2020 2020 2020 2020 2020  [0].            
-00003c50: 656c 7365 204e 6f6e 650a 2020 2020 2020  else None.      
-00003c60: 2020 290a 0a20 2020 2020 2020 2073 7570    )..        sup
-00003c70: 6572 2829 2e5f 5f69 6e69 745f 5f28 7472  er().__init__(tr
-00003c80: 6169 6e2c 2064 6576 2c20 7465 7374 2c20  ain, dev, test, 
-00003c90: 2a2a 636f 7270 7573 6172 6773 290a 0a0a  **corpusargs)...
-00003ca0: 636c 6173 7320 436f 6c75 6d6e 436f 7270  class ColumnCorp
-00003cb0: 7573 284d 756c 7469 4669 6c65 436f 6c75  us(MultiFileColu
-00003cc0: 6d6e 436f 7270 7573 293a 0a20 2020 2064  mnCorpus):.    d
-00003cd0: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
-00003ce0: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
-00003cf0: 2020 2064 6174 615f 666f 6c64 6572 3a20     data_folder: 
-00003d00: 556e 696f 6e5b 7374 722c 2050 6174 685d  Union[str, Path]
-00003d10: 2c0a 2020 2020 2020 2020 636f 6c75 6d6e  ,.        column
-00003d20: 5f66 6f72 6d61 743a 2044 6963 745b 696e  _format: Dict[in
-00003d30: 742c 2073 7472 5d2c 0a20 2020 2020 2020  t, str],.       
-00003d40: 2074 7261 696e 5f66 696c 653d 4e6f 6e65   train_file=None
-00003d50: 2c0a 2020 2020 2020 2020 7465 7374 5f66  ,.        test_f
-00003d60: 696c 653d 4e6f 6e65 2c0a 2020 2020 2020  ile=None,.      
-00003d70: 2020 6465 765f 6669 6c65 3d4e 6f6e 652c    dev_file=None,
-00003d80: 0a20 2020 2020 2020 2061 7574 6f66 696e  .        autofin
-00003d90: 645f 7370 6c69 7473 3a20 626f 6f6c 203d  d_splits: bool =
-00003da0: 2054 7275 652c 0a20 2020 2020 2020 206e   True,.        n
-00003db0: 616d 653a 204f 7074 696f 6e61 6c5b 7374  ame: Optional[st
-00003dc0: 725d 203d 204e 6f6e 652c 0a20 2020 2020  r] = None,.     
-00003dd0: 2020 2063 6f6d 6d65 6e74 5f73 796d 626f     comment_symbo
-00003de0: 6c3d 2223 2022 2c0a 2020 2020 2020 2020  l="# ",.        
-00003df0: 2a2a 636f 7270 7573 6172 6773 2c0a 2020  **corpusargs,.  
-00003e00: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-00003e10: 2020 2020 2072 2222 2249 6e73 7461 6e74       r"""Instant
-00003e20: 6961 7465 7320 6120 436f 7270 7573 2066  iates a Corpus f
-00003e30: 726f 6d20 436f 4e4c 4c20 636f 6c75 6d6e  rom CoNLL column
-00003e40: 2d66 6f72 6d61 7474 6564 2074 6173 6b20  -formatted task 
-00003e50: 6461 7461 2073 7563 6820 6173 2043 6f4e  data such as CoN
-00003e60: 4c4c 3033 206f 7220 436f 4e4c 4c32 3030  LL03 or CoNLL200
-00003e70: 302e 0a0a 2020 2020 2020 2020 4172 6773  0...        Args
-00003e80: 3a0a 2020 2020 2020 2020 2020 2020 6461  :.            da
-00003e90: 7461 5f66 6f6c 6465 723a 2062 6173 6520  ta_folder: base 
-00003ea0: 666f 6c64 6572 2077 6974 6820 7468 6520  folder with the 
-00003eb0: 7461 736b 2064 6174 610a 2020 2020 2020  task data.      
-00003ec0: 2020 2020 2020 636f 6c75 6d6e 5f66 6f72        column_for
-00003ed0: 6d61 743a 2061 206d 6170 2073 7065 6369  mat: a map speci
-00003ee0: 6679 696e 6720 7468 6520 636f 6c75 6d6e  fying the column
-00003ef0: 2066 6f72 6d61 740a 2020 2020 2020 2020   format.        
-00003f00: 2020 2020 7472 6169 6e5f 6669 6c65 3a20      train_file: 
-00003f10: 7468 6520 6e61 6d65 206f 6620 7468 6520  the name of the 
-00003f20: 7472 6169 6e20 6669 6c65 0a20 2020 2020  train file.     
-00003f30: 2020 2020 2020 2074 6573 745f 6669 6c65         test_file
-00003f40: 3a20 7468 6520 6e61 6d65 206f 6620 7468  : the name of th
-00003f50: 6520 7465 7374 2066 696c 650a 2020 2020  e test file.    
-00003f60: 2020 2020 2020 2020 6465 765f 6669 6c65          dev_file
-00003f70: 3a20 7468 6520 6e61 6d65 206f 6620 7468  : the name of th
-00003f80: 6520 6465 7620 6669 6c65 2c20 6966 204e  e dev file, if N
-00003f90: 6f6e 652c 2064 6576 2064 6174 6120 6973  one, dev data is
-00003fa0: 2073 616d 706c 6564 2066 726f 6d20 7472   sampled from tr
-00003fb0: 6169 6e0a 2020 2020 2020 2020 2020 2020  ain.            
-00003fc0: 636f 6c75 6d6e 5f64 656c 696d 6974 6572  column_delimiter
-00003fd0: 3a20 6465 6661 756c 7420 6973 2074 6f20  : default is to 
-00003fe0: 7370 6c69 7420 6f6e 2061 6e79 2073 6570  split on any sep
-00003ff0: 6172 6174 6174 6f72 2c20 6275 7420 796f  aratator, but yo
-00004000: 7520 6361 6e20 6f76 6572 7772 6974 6520  u can overwrite 
-00004010: 666f 7220 696e 7374 616e 6365 2077 6974  for instance wit
-00004020: 6820 225c 7422 2074 6f20 7370 6c69 7420  h "\t" to split 
-00004030: 6f6e 6c79 206f 6e20 7461 6273 0a20 2020  only on tabs.   
-00004040: 2020 2020 2020 2020 2063 6f6d 6d65 6e74           comment
-00004050: 5f73 796d 626f 6c3a 2069 6620 7365 742c  _symbol: if set,
-00004060: 206c 696e 6573 2074 6861 7420 6265 6769   lines that begi
-00004070: 6e20 7769 7468 2074 6869 7320 7379 6d62  n with this symb
-00004080: 6f6c 2061 7265 2074 7265 6174 6564 2061  ol are treated a
-00004090: 7320 636f 6d6d 656e 7473 0a20 2020 2020  s comments.     
-000040a0: 2020 2020 2020 2064 6f63 756d 656e 745f         document_
-000040b0: 7365 7061 7261 746f 725f 746f 6b65 6e3a  separator_token:
-000040c0: 2049 6620 7072 6f76 6964 6564 2c20 7365   If provided, se
-000040d0: 6e74 656e 6365 7320 7468 6174 2066 756e  ntences that fun
-000040e0: 6374 696f 6e20 6173 2064 6f63 756d 656e  ction as documen
-000040f0: 7420 626f 756e 6461 7269 6573 2061 7265  t boundaries are
-00004100: 2073 6f20 6d61 726b 6564 0a20 2020 2020   so marked.     
-00004110: 2020 2020 2020 2073 6b69 705f 6669 7273         skip_firs
-00004120: 745f 6c69 6e65 3a20 7365 7420 746f 2054  t_line: set to T
-00004130: 7275 6520 6966 2079 6f75 7220 6461 7461  rue if your data
-00004140: 7365 7420 6861 7320 6120 6865 6164 6572  set has a header
-00004150: 206c 696e 650a 2020 2020 2020 2020 2020   line.          
-00004160: 2020 696e 5f6d 656d 6f72 793a 2049 6620    in_memory: If 
-00004170: 7365 7420 746f 2054 7275 652c 2074 6865  set to True, the
-00004180: 2064 6174 6173 6574 2069 7320 6b65 7074   dataset is kept
-00004190: 2069 6e20 6d65 6d6f 7279 2061 7320 5365   in memory as Se
-000041a0: 6e74 656e 6365 206f 626a 6563 7473 2c20  ntence objects, 
-000041b0: 6f74 6865 7277 6973 6520 646f 6573 2064  otherwise does d
-000041c0: 6973 6b20 7265 6164 730a 2020 2020 2020  isk reads.      
-000041d0: 2020 2020 2020 6c61 6265 6c5f 6e61 6d65        label_name
-000041e0: 5f6d 6170 3a20 4f70 7469 6f6e 616c 6c79  _map: Optionally
-000041f0: 206d 6170 2074 6167 206e 616d 6573 2074   map tag names t
-00004200: 6f20 6469 6666 6572 656e 7420 7363 6865  o different sche
-00004210: 6d61 2e0a 2020 2020 2020 2020 2020 2020  ma..            
-00004220: 6261 6e6e 6564 5f73 656e 7465 6e63 6573  banned_sentences
-00004230: 3a20 4f70 7469 6f6e 616c 6c79 2072 656d  : Optionally rem
-00004240: 6f76 6520 7365 6e74 656e 6365 7320 6672  ove sentences fr
-00004250: 6f6d 2074 6865 2063 6f72 7075 732e 2057  om the corpus. W
-00004260: 6f72 6b73 206f 6e6c 7920 6966 2060 696e  orks only if `in
-00004270: 5f6d 656d 6f72 7960 2069 7320 7472 7565  _memory` is true
-00004280: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00004290: 2020 2020 2023 2066 696e 6420 7472 6169       # find trai
-000042a0: 6e2c 2064 6576 2061 6e64 2074 6573 7420  n, dev and test 
-000042b0: 6669 6c65 7320 6966 206e 6f74 2073 7065  files if not spe
-000042c0: 6369 6669 6564 0a20 2020 2020 2020 2064  cified.        d
-000042d0: 6576 5f66 696c 652c 2074 6573 745f 6669  ev_file, test_fi
-000042e0: 6c65 2c20 7472 6169 6e5f 6669 6c65 203d  le, train_file =
-000042f0: 2066 696e 645f 7472 6169 6e5f 6465 765f   find_train_dev_
-00004300: 7465 7374 5f66 696c 6573 280a 2020 2020  test_files(.    
-00004310: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
-00004320: 6465 722c 2064 6576 5f66 696c 652c 2074  der, dev_file, t
-00004330: 6573 745f 6669 6c65 2c20 7472 6169 6e5f  est_file, train_
-00004340: 6669 6c65 2c20 6175 746f 6669 6e64 5f73  file, autofind_s
-00004350: 706c 6974 730a 2020 2020 2020 2020 290a  plits.        ).
-00004360: 2020 2020 2020 2020 7375 7065 7228 292e          super().
-00004370: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
-00004380: 2020 2020 2020 636f 6c75 6d6e 5f66 6f72        column_for
-00004390: 6d61 742c 0a20 2020 2020 2020 2020 2020  mat,.           
-000043a0: 2064 6576 5f66 696c 6573 3d5b 6465 765f   dev_files=[dev_
-000043b0: 6669 6c65 5d20 6966 2064 6576 5f66 696c  file] if dev_fil
-000043c0: 6520 656c 7365 205b 5d2c 0a20 2020 2020  e else [],.     
-000043d0: 2020 2020 2020 2074 7261 696e 5f66 696c         train_fil
-000043e0: 6573 3d5b 7472 6169 6e5f 6669 6c65 5d20  es=[train_file] 
-000043f0: 6966 2074 7261 696e 5f66 696c 6520 656c  if train_file el
-00004400: 7365 205b 5d2c 0a20 2020 2020 2020 2020  se [],.         
-00004410: 2020 2074 6573 745f 6669 6c65 733d 5b74     test_files=[t
-00004420: 6573 745f 6669 6c65 5d20 6966 2074 6573  est_file] if tes
-00004430: 745f 6669 6c65 2065 6c73 6520 5b5d 2c0a  t_file else [],.
-00004440: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
-00004450: 3d6e 616d 6520 6966 2064 6174 615f 666f  =name if data_fo
-00004460: 6c64 6572 2069 7320 4e6f 6e65 2065 6c73  lder is None els
-00004470: 6520 7374 7228 6461 7461 5f66 6f6c 6465  e str(data_folde
-00004480: 7229 2c0a 2020 2020 2020 2020 2020 2020  r),.            
-00004490: 636f 6d6d 656e 745f 7379 6d62 6f6c 3d63  comment_symbol=c
-000044a0: 6f6d 6d65 6e74 5f73 796d 626f 6c2c 0a20  omment_symbol,. 
-000044b0: 2020 2020 2020 2020 2020 202a 2a63 6f72             **cor
-000044c0: 7075 7361 7267 732c 0a20 2020 2020 2020  pusargs,.       
-000044d0: 2029 0a0a 0a63 6c61 7373 2043 6f6c 756d   )...class Colum
-000044e0: 6e44 6174 6173 6574 2846 6c61 6972 4461  nDataset(FlairDa
-000044f0: 7461 7365 7429 3a0a 2020 2020 2320 7370  taset):.    # sp
-00004500: 6563 6961 6c20 6b65 7920 666f 7220 7370  ecial key for sp
-00004510: 6163 6520 6166 7465 720a 2020 2020 5350  ace after.    SP
-00004520: 4143 455f 4146 5445 525f 4b45 5920 3d20  ACE_AFTER_KEY = 
-00004530: 2273 7061 6365 2d61 6674 6572 220a 2020  "space-after".  
-00004540: 2020 2320 7370 6563 6961 6c20 6b65 7920    # special key 
-00004550: 666f 7220 6665 6174 7572 6520 636f 6c75  for feature colu
-00004560: 6d6e 730a 2020 2020 4645 4154 5320 3d20  mns.    FEATS = 
-00004570: 5b22 6665 6174 7322 2c20 226d 6973 6322  ["feats", "misc"
-00004580: 5d0a 2020 2020 2320 7370 6563 6961 6c20  ].    # special 
-00004590: 6b65 7920 666f 7220 6465 7065 6e64 656e  key for dependen
-000045a0: 6379 2068 6561 6420 6964 0a20 2020 2048  cy head id.    H
-000045b0: 4541 4420 3d20 5b22 6865 6164 222c 2022  EAD = ["head", "
-000045c0: 6865 6164 5f69 6422 5d0a 0a20 2020 2064  head_id"]..    d
-000045d0: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
-000045e0: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
-000045f0: 2020 2070 6174 685f 746f 5f63 6f6c 756d     path_to_colum
-00004600: 6e5f 6669 6c65 3a20 556e 696f 6e5b 7374  n_file: Union[st
-00004610: 722c 2050 6174 685d 2c0a 2020 2020 2020  r, Path],.      
-00004620: 2020 636f 6c75 6d6e 5f6e 616d 655f 6d61    column_name_ma
-00004630: 703a 2044 6963 745b 696e 742c 2073 7472  p: Dict[int, str
-00004640: 5d2c 0a20 2020 2020 2020 2063 6f6c 756d  ],.        colum
-00004650: 6e5f 6465 6c69 6d69 7465 723a 2073 7472  n_delimiter: str
-00004660: 203d 2072 225c 732b 222c 0a20 2020 2020   = r"\s+",.     
-00004670: 2020 2063 6f6d 6d65 6e74 5f73 796d 626f     comment_symbo
-00004680: 6c3a 204f 7074 696f 6e61 6c5b 7374 725d  l: Optional[str]
-00004690: 203d 204e 6f6e 652c 0a20 2020 2020 2020   = None,.       
-000046a0: 2062 616e 6e65 645f 7365 6e74 656e 6365   banned_sentence
-000046b0: 733a 204f 7074 696f 6e61 6c5b 4c69 7374  s: Optional[List
-000046c0: 5b73 7472 5d5d 203d 204e 6f6e 652c 0a20  [str]] = None,. 
-000046d0: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
-000046e0: 3a20 626f 6f6c 203d 2054 7275 652c 0a20  : bool = True,. 
-000046f0: 2020 2020 2020 2064 6f63 756d 656e 745f         document_
-00004700: 7365 7061 7261 746f 725f 746f 6b65 6e3a  separator_token:
-00004710: 204f 7074 696f 6e61 6c5b 7374 725d 203d   Optional[str] =
-00004720: 204e 6f6e 652c 0a20 2020 2020 2020 2065   None,.        e
-00004730: 6e63 6f64 696e 673a 2073 7472 203d 2022  ncoding: str = "
-00004740: 7574 662d 3822 2c0a 2020 2020 2020 2020  utf-8",.        
-00004750: 736b 6970 5f66 6972 7374 5f6c 696e 653a  skip_first_line:
-00004760: 2062 6f6f 6c20 3d20 4661 6c73 652c 0a20   bool = False,. 
-00004770: 2020 2020 2020 206c 6162 656c 5f6e 616d         label_nam
-00004780: 655f 6d61 703a 204f 7074 696f 6e61 6c5b  e_map: Optional[
-00004790: 4469 6374 5b73 7472 2c20 7374 725d 5d20  Dict[str, str]] 
-000047a0: 3d20 4e6f 6e65 2c0a 2020 2020 2020 2020  = None,.        
-000047b0: 6465 6661 756c 745f 7768 6974 6573 7061  default_whitespa
-000047c0: 6365 5f61 6674 6572 3a20 696e 7420 3d20  ce_after: int = 
-000047d0: 312c 0a20 2020 2029 202d 3e20 4e6f 6e65  1,.    ) -> None
-000047e0: 3a0a 2020 2020 2020 2020 7222 2222 496e  :.        r"""In
-000047f0: 7374 616e 7469 6174 6573 2061 2063 6f6c  stantiates a col
-00004800: 756d 6e20 6461 7461 7365 742e 0a0a 2020  umn dataset...  
-00004810: 2020 2020 2020 4172 6773 3a0a 2020 2020        Args:.    
-00004820: 2020 2020 2020 2020 7061 7468 5f74 6f5f          path_to_
-00004830: 636f 6c75 6d6e 5f66 696c 653a 2070 6174  column_file: pat
-00004840: 6820 746f 2074 6865 2066 696c 6520 7769  h to the file wi
-00004850: 7468 2074 6865 2063 6f6c 756d 6e2d 666f  th the column-fo
-00004860: 726d 6174 7465 6420 6461 7461 0a20 2020  rmatted data.   
-00004870: 2020 2020 2020 2020 2063 6f6c 756d 6e5f           column_
-00004880: 6e61 6d65 5f6d 6170 3a20 6120 6d61 7020  name_map: a map 
-00004890: 7370 6563 6966 7969 6e67 2074 6865 2063  specifying the c
-000048a0: 6f6c 756d 6e20 666f 726d 6174 0a20 2020  olumn format.   
-000048b0: 2020 2020 2020 2020 2063 6f6c 756d 6e5f           column_
-000048c0: 6465 6c69 6d69 7465 723a 2064 6566 6175  delimiter: defau
-000048d0: 6c74 2069 7320 746f 2073 706c 6974 206f  lt is to split o
-000048e0: 6e20 616e 7920 7365 7061 7261 746f 722c  n any separator,
-000048f0: 2062 7574 2079 6f75 2063 616e 206f 7665   but you can ove
-00004900: 7277 7269 7465 2066 6f72 2069 6e73 7461  rwrite for insta
-00004910: 6e63 6520 7769 7468 2022 5c74 2220 746f  nce with "\t" to
-00004920: 2073 706c 6974 206f 6e6c 7920 6f6e 2074   split only on t
-00004930: 6162 730a 2020 2020 2020 2020 2020 2020  abs.            
-00004940: 636f 6d6d 656e 745f 7379 6d62 6f6c 3a20  comment_symbol: 
-00004950: 6966 2073 6574 2c20 6c69 6e65 7320 7468  if set, lines th
-00004960: 6174 2062 6567 696e 2077 6974 6820 7468  at begin with th
-00004970: 6973 2073 796d 626f 6c20 6172 6520 7472  is symbol are tr
-00004980: 6561 7465 6420 6173 2063 6f6d 6d65 6e74  eated as comment
-00004990: 730a 2020 2020 2020 2020 2020 2020 696e  s.            in
-000049a0: 5f6d 656d 6f72 793a 2049 6620 7365 7420  _memory: If set 
-000049b0: 746f 2054 7275 652c 2074 6865 2064 6174  to True, the dat
-000049c0: 6173 6574 2069 7320 6b65 7074 2069 6e20  aset is kept in 
-000049d0: 6d65 6d6f 7279 2061 7320 5365 6e74 656e  memory as Senten
-000049e0: 6365 206f 626a 6563 7473 2c20 6f74 6865  ce objects, othe
-000049f0: 7277 6973 6520 646f 6573 2064 6973 6b20  rwise does disk 
-00004a00: 7265 6164 730a 2020 2020 2020 2020 2020  reads.          
-00004a10: 2020 646f 6375 6d65 6e74 5f73 6570 6172    document_separ
-00004a20: 6174 6f72 5f74 6f6b 656e 3a20 4966 2070  ator_token: If p
-00004a30: 726f 7669 6465 642c 2073 656e 7465 6e63  rovided, sentenc
-00004a40: 6573 2074 6861 7420 6675 6e63 7469 6f6e  es that function
-00004a50: 2061 7320 646f 6375 6d65 6e74 2062 6f75   as document bou
-00004a60: 6e64 6172 6965 7320 6172 6520 736f 206d  ndaries are so m
-00004a70: 6172 6b65 640a 2020 2020 2020 2020 2020  arked.          
-00004a80: 2020 736b 6970 5f66 6972 7374 5f6c 696e    skip_first_lin
-00004a90: 653a 2073 6574 2074 6f20 5472 7565 2069  e: set to True i
-00004aa0: 6620 796f 7572 2064 6174 6173 6574 2068  f your dataset h
-00004ab0: 6173 2061 2068 6561 6465 7220 6c69 6e65  as a header line
-00004ac0: 0a20 2020 2020 2020 2020 2020 206c 6162  .            lab
-00004ad0: 656c 5f6e 616d 655f 6d61 703a 204f 7074  el_name_map: Opt
-00004ae0: 696f 6e61 6c6c 7920 6d61 7020 7461 6720  ionally map tag 
-00004af0: 6e61 6d65 7320 746f 2064 6966 6665 7265  names to differe
-00004b00: 6e74 2073 6368 656d 612e 0a20 2020 2020  nt schema..     
-00004b10: 2020 2020 2020 2062 616e 6e65 645f 7365         banned_se
-00004b20: 6e74 656e 6365 733a 204f 7074 696f 6e61  ntences: Optiona
-00004b30: 6c6c 7920 7265 6d6f 7665 2073 656e 7465  lly remove sente
-00004b40: 6e63 6573 2066 726f 6d20 7468 6520 636f  nces from the co
-00004b50: 7270 7573 2e20 576f 726b 7320 6f6e 6c79  rpus. Works only
-00004b60: 2069 6620 6069 6e5f 6d65 6d6f 7279 6020   if `in_memory` 
-00004b70: 6973 2074 7275 650a 2020 2020 2020 2020  is true.        
-00004b80: 2222 220a 2020 2020 2020 2020 7061 7468  """.        path
-00004b90: 5f74 6f5f 636f 6c75 6d6e 5f66 696c 6520  _to_column_file 
-00004ba0: 3d20 5061 7468 2870 6174 685f 746f 5f63  = Path(path_to_c
-00004bb0: 6f6c 756d 6e5f 6669 6c65 290a 2020 2020  olumn_file).    
-00004bc0: 2020 2020 6173 7365 7274 2070 6174 685f      assert path_
-00004bd0: 746f 5f63 6f6c 756d 6e5f 6669 6c65 2e65  to_column_file.e
-00004be0: 7869 7374 7328 290a 2020 2020 2020 2020  xists().        
-00004bf0: 7365 6c66 2e70 6174 685f 746f 5f63 6f6c  self.path_to_col
-00004c00: 756d 6e5f 6669 6c65 203d 2070 6174 685f  umn_file = path_
-00004c10: 746f 5f63 6f6c 756d 6e5f 6669 6c65 0a20  to_column_file. 
-00004c20: 2020 2020 2020 2073 656c 662e 636f 6c75         self.colu
-00004c30: 6d6e 5f64 656c 696d 6974 6572 203d 2072  mn_delimiter = r
-00004c40: 652e 636f 6d70 696c 6528 636f 6c75 6d6e  e.compile(column
-00004c50: 5f64 656c 696d 6974 6572 290a 2020 2020  _delimiter).    
-00004c60: 2020 2020 7365 6c66 2e63 6f6d 6d65 6e74      self.comment
-00004c70: 5f73 796d 626f 6c20 3d20 636f 6d6d 656e  _symbol = commen
-00004c80: 745f 7379 6d62 6f6c 0a20 2020 2020 2020  t_symbol.       
-00004c90: 2073 656c 662e 646f 6375 6d65 6e74 5f73   self.document_s
-00004ca0: 6570 6172 6174 6f72 5f74 6f6b 656e 203d  eparator_token =
-00004cb0: 2064 6f63 756d 656e 745f 7365 7061 7261   document_separa
-00004cc0: 746f 725f 746f 6b65 6e0a 2020 2020 2020  tor_token.      
-00004cd0: 2020 7365 6c66 2e6c 6162 656c 5f6e 616d    self.label_nam
-00004ce0: 655f 6d61 7020 3d20 6c61 6265 6c5f 6e61  e_map = label_na
-00004cf0: 6d65 5f6d 6170 0a20 2020 2020 2020 2073  me_map.        s
-00004d00: 656c 662e 6261 6e6e 6564 5f73 656e 7465  elf.banned_sente
-00004d10: 6e63 6573 203d 2062 616e 6e65 645f 7365  nces = banned_se
-00004d20: 6e74 656e 6365 730a 2020 2020 2020 2020  ntences.        
-00004d30: 7365 6c66 2e64 6566 6175 6c74 5f77 6869  self.default_whi
-00004d40: 7465 7370 6163 655f 6166 7465 7220 3d20  tespace_after = 
-00004d50: 6465 6661 756c 745f 7768 6974 6573 7061  default_whitespa
-00004d60: 6365 5f61 6674 6572 0a0a 2020 2020 2020  ce_after..      
-00004d70: 2020 2320 7374 6f72 6520 6569 7468 6572    # store either
-00004d80: 2053 656e 7465 6e63 6520 6f62 6a65 6374   Sentence object
-00004d90: 7320 696e 206d 656d 6f72 792c 206f 7220  s in memory, or 
-00004da0: 6f6e 6c79 2066 696c 6520 6f66 6673 6574  only file offset
-00004db0: 730a 2020 2020 2020 2020 7365 6c66 2e69  s.        self.i
-00004dc0: 6e5f 6d65 6d6f 7279 203d 2069 6e5f 6d65  n_memory = in_me
-00004dd0: 6d6f 7279 0a0a 2020 2020 2020 2020 7365  mory..        se
-00004de0: 6c66 2e74 6f74 616c 5f73 656e 7465 6e63  lf.total_sentenc
-00004df0: 655f 636f 756e 743a 2069 6e74 203d 2030  e_count: int = 0
-00004e00: 0a0a 2020 2020 2020 2020 2320 6d6f 7374  ..        # most
-00004e10: 2064 6174 6120 7365 7473 2068 6176 6520   data sets have 
-00004e20: 7468 6520 746f 6b65 6e20 7465 7874 2069  the token text i
-00004e30: 6e20 7468 6520 6669 7273 7420 636f 6c75  n the first colu
-00004e40: 6d6e 2c20 6966 206e 6f74 2c20 7061 7373  mn, if not, pass
-00004e50: 2027 7465 7874 2720 6173 2063 6f6c 756d   'text' as colum
-00004e60: 6e0a 2020 2020 2020 2020 7365 6c66 2e74  n.        self.t
-00004e70: 6578 745f 636f 6c75 6d6e 3a20 696e 7420  ext_column: int 
-00004e80: 3d20 300a 2020 2020 2020 2020 7365 6c66  = 0.        self
-00004e90: 2e68 6561 645f 6964 5f63 6f6c 756d 6e3a  .head_id_column:
-00004ea0: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
-00004eb0: 204e 6f6e 650a 2020 2020 2020 2020 666f   None.        fo
-00004ec0: 7220 636f 6c75 6d6e 2069 6e20 636f 6c75  r column in colu
-00004ed0: 6d6e 5f6e 616d 655f 6d61 703a 0a20 2020  mn_name_map:.   
-00004ee0: 2020 2020 2020 2020 2069 6620 636f 6c75           if colu
-00004ef0: 6d6e 5f6e 616d 655f 6d61 705b 636f 6c75  mn_name_map[colu
-00004f00: 6d6e 5d20 3d3d 2022 7465 7874 223a 0a20  mn] == "text":. 
-00004f10: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00004f20: 656c 662e 7465 7874 5f63 6f6c 756d 6e20  elf.text_column 
-00004f30: 3d20 636f 6c75 6d6e 0a20 2020 2020 2020  = column.       
-00004f40: 2020 2020 2069 6620 636f 6c75 6d6e 5f6e       if column_n
-00004f50: 616d 655f 6d61 705b 636f 6c75 6d6e 5d20  ame_map[column] 
-00004f60: 696e 2073 656c 662e 4845 4144 3a0a 2020  in self.HEAD:.  
-00004f70: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00004f80: 6c66 2e68 6561 645f 6964 5f63 6f6c 756d  lf.head_id_colum
-00004f90: 6e20 3d20 636f 6c75 6d6e 0a0a 2020 2020  n = column..    
-00004fa0: 2020 2020 2320 6465 7465 726d 696e 6520      # determine 
-00004fb0: 656e 636f 6469 6e67 206f 6620 7465 7874  encoding of text
-00004fc0: 2066 696c 650a 2020 2020 2020 2020 7365   file.        se
-00004fd0: 6c66 2e65 6e63 6f64 696e 6720 3d20 656e  lf.encoding = en
-00004fe0: 636f 6469 6e67 0a0a 2020 2020 2020 2020  coding..        
-00004ff0: 2320 6964 656e 7469 6679 2077 6869 6368  # identify which
-00005000: 2063 6f6c 756d 6e73 2061 7265 2073 7061   columns are spa
-00005010: 6e73 2061 6e64 2077 6869 6368 2061 7265  ns and which are
-00005020: 2077 6f72 642d 6c65 7665 6c0a 2020 2020   word-level.    
-00005030: 2020 2020 7365 6c66 2e5f 6964 656e 7469      self._identi
-00005040: 6679 5f73 7061 6e5f 636f 6c75 6d6e 7328  fy_span_columns(
-00005050: 636f 6c75 6d6e 5f6e 616d 655f 6d61 702c  column_name_map,
-00005060: 2073 6b69 705f 6669 7273 745f 6c69 6e65   skip_first_line
-00005070: 290a 0a20 2020 2020 2020 2023 206e 6f77  )..        # now
-00005080: 206c 6f61 6420 616c 6c20 7365 6e74 656e   load all senten
-00005090: 6365 730a 2020 2020 2020 2020 7769 7468  ces.        with
-000050a0: 206f 7065 6e28 7374 7228 7365 6c66 2e70   open(str(self.p
-000050b0: 6174 685f 746f 5f63 6f6c 756d 6e5f 6669  ath_to_column_fi
-000050c0: 6c65 292c 2065 6e63 6f64 696e 673d 7365  le), encoding=se
-000050d0: 6c66 2e65 6e63 6f64 696e 6729 2061 7320  lf.encoding) as 
-000050e0: 6669 6c65 3a0a 2020 2020 2020 2020 2020  file:.          
-000050f0: 2020 2320 736b 6970 2066 6972 7374 206c    # skip first l
-00005100: 696e 6520 6966 2074 6f20 7365 6c65 6374  ine if to select
-00005110: 6564 0a20 2020 2020 2020 2020 2020 2069  ed.            i
-00005120: 6620 736b 6970 5f66 6972 7374 5f6c 696e  f skip_first_lin
-00005130: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00005140: 2020 2066 696c 652e 7265 6164 6c69 6e65     file.readline
-00005150: 2829 0a0a 2020 2020 2020 2020 2020 2020  ()..            
-00005160: 2320 6f70 7469 6f6e 2031 3a20 6b65 6570  # option 1: keep
-00005170: 2053 656e 7465 6e63 6520 6f62 6a65 6374   Sentence object
-00005180: 7320 696e 206d 656d 6f72 790a 2020 2020  s in memory.    
-00005190: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-000051a0: 696e 5f6d 656d 6f72 793a 0a20 2020 2020  in_memory:.     
-000051b0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000051c0: 7365 6e74 656e 6365 733a 204c 6973 745b  sentences: List[
-000051d0: 5365 6e74 656e 6365 5d20 3d20 5b5d 0a0a  Sentence] = []..
-000051e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000051f0: 2320 706f 696e 7465 7220 746f 2070 7265  # pointer to pre
-00005200: 7669 6f75 730a 2020 2020 2020 2020 2020  vious.          
-00005210: 2020 2020 2020 7072 6576 696f 7573 5f73        previous_s
-00005220: 656e 7465 6e63 6520 3d20 4e6f 6e65 0a20  entence = None. 
-00005230: 2020 2020 2020 2020 2020 2020 2020 2077                 w
-00005240: 6869 6c65 2054 7275 653a 0a20 2020 2020  hile True:.     
-00005250: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00005260: 2070 6172 7365 206e 6578 7420 7365 6e74   parse next sent
-00005270: 656e 6365 0a20 2020 2020 2020 2020 2020  ence.           
-00005280: 2020 2020 2020 2020 206e 6578 745f 7365           next_se
-00005290: 6e74 656e 6365 203d 2073 656c 662e 5f72  ntence = self._r
-000052a0: 6561 645f 6e65 7874 5f73 656e 7465 6e63  ead_next_sentenc
-000052b0: 6528 6669 6c65 290a 0a20 2020 2020 2020  e(file)..       
-000052c0: 2020 2020 2020 2020 2020 2020 2023 2071               # q
-000052d0: 7569 7420 6966 206c 6173 7420 7365 6e74  uit if last sent
-000052e0: 656e 6365 2072 6561 6368 6564 0a20 2020  ence reached.   
-000052f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005300: 2069 6620 6c65 6e28 6e65 7874 5f73 656e   if len(next_sen
-00005310: 7465 6e63 6529 203d 3d20 303a 0a20 2020  tence) == 0:.   
-00005320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005330: 2020 2020 2062 7265 616b 0a0a 2020 2020       break..    
-00005340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005350: 7365 6e74 656e 6365 203d 2073 656c 662e  sentence = self.
-00005360: 5f63 6f6e 7665 7274 5f6c 696e 6573 5f74  _convert_lines_t
-00005370: 6f5f 7365 6e74 656e 6365 280a 2020 2020  o_sentence(.    
-00005380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005390: 2020 2020 6e65 7874 5f73 656e 7465 6e63      next_sentenc
-000053a0: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-000053b0: 2020 2020 2020 2020 2020 2077 6f72 645f             word_
-000053c0: 6c65 7665 6c5f 7461 675f 636f 6c75 6d6e  level_tag_column
-000053d0: 733d 7365 6c66 2e77 6f72 645f 6c65 7665  s=self.word_leve
-000053e0: 6c5f 7461 675f 636f 6c75 6d6e 732c 0a20  l_tag_columns,. 
-000053f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005400: 2020 2020 2020 2073 7061 6e5f 6c65 7665         span_leve
-00005410: 6c5f 7461 675f 636f 6c75 6d6e 733d 7365  l_tag_columns=se
-00005420: 6c66 2e73 7061 6e5f 6c65 7665 6c5f 7461  lf.span_level_ta
-00005430: 675f 636f 6c75 6d6e 732c 0a20 2020 2020  g_columns,.     
-00005440: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00005450: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00005460: 2020 2020 2020 6966 206e 6f74 2073 656e        if not sen
-00005470: 7465 6e63 653a 0a20 2020 2020 2020 2020  tence:.         
-00005480: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00005490: 6f6e 7469 6e75 650a 0a20 2020 2020 2020  ontinue..       
-000054a0: 2020 2020 2020 2020 2020 2020 2023 2073               # s
-000054b0: 6b69 7020 6261 6e6e 6564 2073 656e 7465  kip banned sente
-000054c0: 6e63 6573 0a20 2020 2020 2020 2020 2020  nces.           
-000054d0: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
-000054e0: 2e62 616e 6e65 645f 7365 6e74 656e 6365  .banned_sentence
-000054f0: 7320 6973 206e 6f74 204e 6f6e 6520 616e  s is not None an
-00005500: 6420 616e 7928 0a20 2020 2020 2020 2020  d any(.         
-00005510: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00005520: 2069 6e20 7365 6e74 656e 6365 2e74 6f5f   in sentence.to_
-00005530: 706c 6169 6e5f 7374 7269 6e67 2829 2066  plain_string() f
-00005540: 6f72 2064 2069 6e20 7365 6c66 2e62 616e  or d in self.ban
-00005550: 6e65 645f 7365 6e74 656e 6365 730a 2020  ned_sentences.  
-00005560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005570: 2020 293a 0a20 2020 2020 2020 2020 2020    ):.           
-00005580: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
-00005590: 7469 6e75 650a 0a20 2020 2020 2020 2020  tinue..         
-000055a0: 2020 2020 2020 2020 2020 2023 2073 6574             # set
-000055b0: 2070 7265 7669 6f75 7320 616e 6420 6e65   previous and ne
-000055c0: 7874 2073 656e 7465 6e63 6520 666f 7220  xt sentence for 
-000055d0: 636f 6e74 6578 740a 2020 2020 2020 2020  context.        
-000055e0: 2020 2020 2020 2020 2020 2020 7365 6e74              sent
-000055f0: 656e 6365 2e5f 7072 6576 696f 7573 5f73  ence._previous_s
-00005600: 656e 7465 6e63 6520 3d20 7072 6576 696f  entence = previo
-00005610: 7573 5f73 656e 7465 6e63 650a 2020 2020  us_sentence.    
-00005620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005630: 7365 6e74 656e 6365 2e5f 6e65 7874 5f73  sentence._next_s
-00005640: 656e 7465 6e63 6520 3d20 4e6f 6e65 0a20  entence = None. 
-00005650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005660: 2020 2069 6620 7072 6576 696f 7573 5f73     if previous_s
-00005670: 656e 7465 6e63 653a 0a20 2020 2020 2020  entence:.       
-00005680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005690: 2070 7265 7669 6f75 735f 7365 6e74 656e   previous_senten
-000056a0: 6365 2e5f 6e65 7874 5f73 656e 7465 6e63  ce._next_sentenc
-000056b0: 6520 3d20 7365 6e74 656e 6365 0a0a 2020  e = sentence..  
-000056c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000056d0: 2020 2320 6170 7065 6e64 2070 6172 7365    # append parse
-000056e0: 6420 7365 6e74 656e 6365 2074 6f20 6c69  d sentence to li
-000056f0: 7374 2069 6e20 6d65 6d6f 7279 0a20 2020  st in memory.   
-00005700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005710: 2073 656c 662e 7365 6e74 656e 6365 732e   self.sentences.
-00005720: 6170 7065 6e64 2873 656e 7465 6e63 6529  append(sentence)
-00005730: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00005740: 2020 2020 2020 7072 6576 696f 7573 5f73        previous_s
-00005750: 656e 7465 6e63 6520 3d20 7365 6e74 656e  entence = senten
-00005760: 6365 0a0a 2020 2020 2020 2020 2020 2020  ce..            
-00005770: 2020 2020 7365 6c66 2e74 6f74 616c 5f73      self.total_s
-00005780: 656e 7465 6e63 655f 636f 756e 7420 3d20  entence_count = 
-00005790: 6c65 6e28 7365 6c66 2e73 656e 7465 6e63  len(self.sentenc
-000057a0: 6573 290a 0a20 2020 2020 2020 2020 2020  es)..           
-000057b0: 2023 206f 7074 696f 6e20 323a 206b 6565   # option 2: kee
-000057c0: 7020 736f 7572 6365 2064 6174 6120 696e  p source data in
-000057d0: 206d 656d 6f72 790a 2020 2020 2020 2020   memory.        
-000057e0: 2020 2020 6966 206e 6f74 2073 656c 662e      if not self.
-000057f0: 696e 5f6d 656d 6f72 793a 0a20 2020 2020  in_memory:.     
-00005800: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00005810: 7365 6e74 656e 6365 735f 7261 773a 204c  sentences_raw: L
-00005820: 6973 745b 4c69 7374 5b73 7472 5d5d 203d  ist[List[str]] =
-00005830: 205b 5d0a 0a20 2020 2020 2020 2020 2020   []..           
-00005840: 2020 2020 2077 6869 6c65 2054 7275 653a       while True:
-00005850: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00005860: 2020 2020 2023 2072 6561 6420 6c69 6e65       # read line
-00005870: 7320 666f 7220 6e65 7874 2073 656e 7465  s for next sente
-00005880: 6e63 652c 2062 7574 2064 6f6e 2774 2070  nce, but don't p
-00005890: 6172 7365 0a20 2020 2020 2020 2020 2020  arse.           
-000058a0: 2020 2020 2020 2020 2073 656e 7465 6e63           sentenc
-000058b0: 655f 7261 7720 3d20 7365 6c66 2e5f 7265  e_raw = self._re
-000058c0: 6164 5f6e 6578 745f 7365 6e74 656e 6365  ad_next_sentence
-000058d0: 2866 696c 6529 0a0a 2020 2020 2020 2020  (file)..        
-000058e0: 2020 2020 2020 2020 2020 2020 2320 7175              # qu
-000058f0: 6974 2069 6620 6c61 7374 2073 656e 7465  it if last sente
-00005900: 6e63 6520 7265 6163 6865 640a 2020 2020  nce reached.    
-00005910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005920: 6966 206c 656e 2873 656e 7465 6e63 655f  if len(sentence_
-00005930: 7261 7729 203d 3d20 303a 0a20 2020 2020  raw) == 0:.     
-00005940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005950: 2020 2062 7265 616b 0a0a 2020 2020 2020     break..      
-00005960: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-00005970: 6170 7065 6e64 2072 6177 206c 696e 6573  append raw lines
-00005980: 2066 6f72 2065 6163 6820 7365 6e74 656e   for each senten
-00005990: 6365 0a20 2020 2020 2020 2020 2020 2020  ce.             
-000059a0: 2020 2020 2020 2073 656c 662e 7365 6e74         self.sent
-000059b0: 656e 6365 735f 7261 772e 6170 7065 6e64  ences_raw.append
-000059c0: 2873 656e 7465 6e63 655f 7261 7729 0a0a  (sentence_raw)..
-000059d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000059e0: 7365 6c66 2e74 6f74 616c 5f73 656e 7465  self.total_sente
-000059f0: 6e63 655f 636f 756e 7420 3d20 6c65 6e28  nce_count = len(
-00005a00: 7365 6c66 2e73 656e 7465 6e63 6573 5f72  self.sentences_r
-00005a10: 6177 290a 0a20 2020 2064 6566 205f 6964  aw)..    def _id
-00005a20: 656e 7469 6679 5f73 7061 6e5f 636f 6c75  entify_span_colu
-00005a30: 6d6e 7328 7365 6c66 2c20 636f 6c75 6d6e  mns(self, column
-00005a40: 5f6e 616d 655f 6d61 702c 2073 6b69 705f  _name_map, skip_
-00005a50: 6669 7273 745f 6c69 6e65 293a 0a20 2020  first_line):.   
-00005a60: 2020 2020 2023 2077 6520 6d61 6b65 2061       # we make a
-00005a70: 2064 6973 7469 6e63 7469 6f6e 2062 6574   distinction bet
-00005a80: 7765 656e 2077 6f72 642d 6c65 7665 6c20  ween word-level 
-00005a90: 7461 6773 2061 6e64 2073 7061 6e2d 6c65  tags and span-le
-00005aa0: 7665 6c20 7461 6773 0a20 2020 2020 2020  vel tags.       
-00005ab0: 2073 656c 662e 7370 616e 5f6c 6576 656c   self.span_level
-00005ac0: 5f74 6167 5f63 6f6c 756d 6e73 203d 207b  _tag_columns = {
-00005ad0: 7d0a 2020 2020 2020 2020 7365 6c66 2e77  }.        self.w
-00005ae0: 6f72 645f 6c65 7665 6c5f 7461 675f 636f  ord_level_tag_co
-00005af0: 6c75 6d6e 7320 3d20 7b73 656c 662e 7465  lumns = {self.te
-00005b00: 7874 5f63 6f6c 756d 6e3a 2022 7465 7874  xt_column: "text
-00005b10: 227d 0a20 2020 2020 2020 2023 2072 6561  "}.        # rea
-00005b20: 6420 6669 7273 7420 7365 6e74 656e 6365  d first sentence
-00005b30: 2074 6f20 6465 7465 726d 696e 6520 7768   to determine wh
-00005b40: 6963 6820 636f 6c75 6d6e 7320 6172 6520  ich columns are 
-00005b50: 7370 616e 2d6c 6162 656c 730a 2020 2020  span-labels.    
-00005b60: 2020 2020 7769 7468 206f 7065 6e28 7374      with open(st
-00005b70: 7228 7365 6c66 2e70 6174 685f 746f 5f63  r(self.path_to_c
-00005b80: 6f6c 756d 6e5f 6669 6c65 292c 2065 6e63  olumn_file), enc
-00005b90: 6f64 696e 673d 7365 6c66 2e65 6e63 6f64  oding=self.encod
-00005ba0: 696e 6729 2061 7320 6669 6c65 3a0a 2020  ing) as file:.  
-00005bb0: 2020 2020 2020 2020 2020 2320 736b 6970            # skip
-00005bc0: 2066 6972 7374 206c 696e 6520 6966 2074   first line if t
-00005bd0: 6f20 7365 6c65 6374 6564 0a20 2020 2020  o selected.     
-00005be0: 2020 2020 2020 2069 6620 736b 6970 5f66         if skip_f
-00005bf0: 6972 7374 5f6c 696e 653a 0a20 2020 2020  irst_line:.     
-00005c00: 2020 2020 2020 2020 2020 2066 696c 652e             file.
-00005c10: 7265 6164 6c69 6e65 2829 0a0a 2020 2020  readline()..    
-00005c20: 2020 2020 2020 2020 2320 6368 6563 6b20          # check 
-00005c30: 7468 6520 6669 7273 7420 3520 7365 6e74  the first 5 sent
-00005c40: 656e 6365 730a 2020 2020 2020 2020 2020  ences.          
-00005c50: 2020 7072 6f62 6520 3d20 5b5d 0a20 2020    probe = [].   
-00005c60: 2020 2020 2020 2020 2066 6f72 205f 6920           for _i 
-00005c70: 696e 2072 616e 6765 2835 293a 0a20 2020  in range(5):.   
-00005c80: 2020 2020 2020 2020 2020 2020 206e 6578               nex
-00005c90: 745f 7365 6e74 656e 6365 203d 2073 656c  t_sentence = sel
-00005ca0: 662e 5f72 6561 645f 6e65 7874 5f73 656e  f._read_next_sen
-00005cb0: 7465 6e63 6528 6669 6c65 290a 2020 2020  tence(file).    
-00005cc0: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-00005cd0: 656e 286e 6578 745f 7365 6e74 656e 6365  en(next_sentence
-00005ce0: 2920 3d3d 2030 3a0a 2020 2020 2020 2020  ) == 0:.        
-00005cf0: 2020 2020 2020 2020 2020 2020 6272 6561              brea
-00005d00: 6b0a 0a20 2020 2020 2020 2020 2020 2020  k..             
-00005d10: 2020 2073 656e 7465 6e63 6520 3d20 7365     sentence = se
-00005d20: 6c66 2e5f 636f 6e76 6572 745f 6c69 6e65  lf._convert_line
-00005d30: 735f 746f 5f73 656e 7465 6e63 6528 6e65  s_to_sentence(ne
-00005d40: 7874 5f73 656e 7465 6e63 652c 2077 6f72  xt_sentence, wor
-00005d50: 645f 6c65 7665 6c5f 7461 675f 636f 6c75  d_level_tag_colu
-00005d60: 6d6e 733d 636f 6c75 6d6e 5f6e 616d 655f  mns=column_name_
-00005d70: 6d61 7029 0a20 2020 2020 2020 2020 2020  map).           
-00005d80: 2020 2020 2069 6620 7365 6e74 656e 6365       if sentence
-00005d90: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00005da0: 2020 2020 2020 7072 6f62 652e 6170 7065        probe.appe
-00005db0: 6e64 2873 656e 7465 6e63 6529 0a20 2020  nd(sentence).   
-00005dc0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00005dd0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00005de0: 2020 2020 2020 2062 7265 616b 0a0a 2020         break..  
-00005df0: 2020 2020 2020 2020 2020 2320 676f 2074            # go t
-00005e00: 6872 6f75 6768 2061 6c6c 2061 6e6e 6f74  hrough all annot
-00005e10: 6174 696f 6e73 2061 6e64 2069 6465 6e74  ations and ident
-00005e20: 6966 7920 776f 7264 2d20 616e 6420 7370  ify word- and sp
-00005e30: 616e 2d6c 6576 656c 2061 6e6e 6f74 6174  an-level annotat
-00005e40: 696f 6e73 0a20 2020 2020 2020 2020 2020  ions.           
-00005e50: 2023 202d 2069 6620 6120 636f 6c75 6d6e   # - if a column
-00005e60: 2068 6173 2061 7420 6c65 6173 7420 6f6e   has at least on
-00005e70: 6520 4249 4553 2077 6520 6b6e 6f77 2069  e BIES we know i
-00005e80: 7427 7320 6120 5370 616e 206c 6162 656c  t's a Span label
-00005e90: 0a20 2020 2020 2020 2020 2020 2023 202d  .            # -
-00005ea0: 2069 6620 6120 636f 6c75 6d6e 2068 6173   if a column has
-00005eb0: 2061 7420 6c65 6173 7420 6f6e 6520 7461   at least one ta
-00005ec0: 6720 7468 6174 2069 7320 6e6f 7420 4249  g that is not BI
-00005ed0: 4f45 532c 2077 6520 6b6e 6f77 2069 7427  OES, we know it'
-00005ee0: 7320 6120 546f 6b65 6e20 6c61 6265 6c0a  s a Token label.
-00005ef0: 2020 2020 2020 2020 2020 2020 2320 2d20              # - 
-00005f00: 7072 6f62 6c65 6d20 6361 7365 7320 6172  problem cases ar
-00005f10: 6520 636f 6c75 6d6e 7320 666f 7220 7768  e columns for wh
-00005f20: 6963 6820 7765 2073 6565 206f 6e6c 7920  ich we see only 
-00005f30: 4f20 2d20 696e 2074 6869 7320 6361 7365  O - in this case
-00005f40: 2077 6520 6465 6661 756c 7420 746f 2053   we default to S
-00005f50: 7061 6e0a 2020 2020 2020 2020 2020 2020  pan.            
-00005f60: 666f 7220 7365 6e74 656e 6365 2069 6e20  for sentence in 
-00005f70: 7072 6f62 653a 0a20 2020 2020 2020 2020  probe:.         
-00005f80: 2020 2020 2020 2066 6f72 2063 6f6c 756d         for colum
-00005f90: 6e20 696e 2063 6f6c 756d 6e5f 6e61 6d65  n in column_name
-00005fa0: 5f6d 6170 3a0a 2020 2020 2020 2020 2020  _map:.          
-00005fb0: 2020 2020 2020 2020 2020 2320 736b 6970            # skip
-00005fc0: 2061 7373 6967 6e65 6420 636f 6c75 6d6e   assigned column
-00005fd0: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
-00005fe0: 2020 2020 2020 6966 2028 0a20 2020 2020        if (.     
-00005ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006000: 2020 2063 6f6c 756d 6e20 696e 2073 656c     column in sel
-00006010: 662e 776f 7264 5f6c 6576 656c 5f74 6167  f.word_level_tag
-00006020: 5f63 6f6c 756d 6e73 0a20 2020 2020 2020  _columns.       
-00006030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006040: 206f 7220 636f 6c75 6d6e 2069 6e20 7365   or column in se
-00006050: 6c66 2e73 7061 6e5f 6c65 7665 6c5f 7461  lf.span_level_ta
-00006060: 675f 636f 6c75 6d6e 730a 2020 2020 2020  g_columns.      
-00006070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006080: 2020 6f72 2063 6f6c 756d 6e20 3d3d 2073    or column == s
-00006090: 656c 662e 6865 6164 5f69 645f 636f 6c75  elf.head_id_colu
-000060a0: 6d6e 0a20 2020 2020 2020 2020 2020 2020  mn.             
-000060b0: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
-000060c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000060d0: 2020 636f 6e74 696e 7565 0a0a 2020 2020    continue..    
-000060e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000060f0: 6c61 7965 7220 3d20 636f 6c75 6d6e 5f6e  layer = column_n
-00006100: 616d 655f 6d61 705b 636f 6c75 6d6e 5d0a  ame_map[column].
-00006110: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006120: 2020 2020 2023 2074 6865 2073 7061 6365       # the space
-00006130: 2061 6674 6572 206b 6579 2069 7320 616c   after key is al
-00006140: 7761 7973 2077 6f72 642d 6c65 7665 6c73  ways word-levels
-00006150: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006160: 2020 2020 2069 6620 636f 6c75 6d6e 5f6e       if column_n
-00006170: 616d 655f 6d61 705b 636f 6c75 6d6e 5d20  ame_map[column] 
-00006180: 3d3d 2073 656c 662e 5350 4143 455f 4146  == self.SPACE_AF
-00006190: 5445 525f 4b45 593a 0a20 2020 2020 2020  TER_KEY:.       
-000061a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000061b0: 2073 656c 662e 776f 7264 5f6c 6576 656c   self.word_level
-000061c0: 5f74 6167 5f63 6f6c 756d 6e73 5b63 6f6c  _tag_columns[col
-000061d0: 756d 6e5d 203d 206c 6179 6572 0a20 2020  umn] = layer.   
-000061e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000061f0: 2020 2020 2063 6f6e 7469 6e75 650a 0a20       continue.. 
-00006200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006210: 2020 2069 6620 6c61 7965 7220 696e 2073     if layer in s
-00006220: 656c 662e 4645 4154 533a 0a20 2020 2020  elf.FEATS:.     
-00006230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006240: 2020 2073 656c 662e 776f 7264 5f6c 6576     self.word_lev
-00006250: 656c 5f74 6167 5f63 6f6c 756d 6e73 5b63  el_tag_columns[c
-00006260: 6f6c 756d 6e5d 203d 206c 6179 6572 0a20  olumn] = layer. 
-00006270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006280: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
-00006290: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000062a0: 2020 2020 2066 6f72 2074 6f6b 656e 2069       for token i
-000062b0: 6e20 7365 6e74 656e 6365 3a0a 2020 2020  n sentence:.    
-000062c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000062d0: 2020 2020 2320 6966 2061 7420 6c65 6173      # if at leas
-000062e0: 7420 6f6e 6520 746f 6b65 6e20 6861 7320  t one token has 
-000062f0: 6120 4249 4553 2c20 7765 206b 6e6f 7720  a BIES, we know 
-00006300: 6974 2773 2061 2073 7061 6e20 6c61 6265  it's a span labe
-00006310: 6c0a 2020 2020 2020 2020 2020 2020 2020  l.              
-00006320: 2020 2020 2020 2020 2020 6966 2074 6f6b            if tok
-00006330: 656e 2e67 6574 5f6c 6162 656c 286c 6179  en.get_label(lay
-00006340: 6572 292e 7661 6c75 655b 303a 325d 2069  er).value[0:2] i
-00006350: 6e20 5b22 422d 222c 2022 492d 222c 2022  n ["B-", "I-", "
-00006360: 452d 222c 2022 532d 225d 3a0a 2020 2020  E-", "S-"]:.    
-00006370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006380: 2020 2020 2020 2020 7365 6c66 2e73 7061          self.spa
-00006390: 6e5f 6c65 7665 6c5f 7461 675f 636f 6c75  n_level_tag_colu
-000063a0: 6d6e 735b 636f 6c75 6d6e 5d20 3d20 6c61  mns[column] = la
-000063b0: 7965 720a 2020 2020 2020 2020 2020 2020  yer.            
-000063c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000063d0: 6272 6561 6b0a 0a20 2020 2020 2020 2020  break..         
-000063e0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-000063f0: 2069 6620 6174 206c 6561 7374 206f 6e65   if at least one
-00006400: 2074 6f6b 656e 2068 6173 2061 206c 6162   token has a lab
-00006410: 656c 206f 7468 6572 2074 6861 6e20 4249  el other than BI
-00006420: 4f45 532c 2077 6520 6b6e 6f77 2069 7427  OES, we know it'
-00006430: 7320 6120 746f 6b65 6e20 6c61 6265 6c0a  s a token label.
-00006440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006450: 2020 2020 2020 2020 656c 6966 2074 6f6b          elif tok
-00006460: 656e 2e67 6574 5f6c 6162 656c 286c 6179  en.get_label(lay
-00006470: 6572 2c20 224f 2229 2e76 616c 7565 2021  er, "O").value !
-00006480: 3d20 224f 223a 0a20 2020 2020 2020 2020  = "O":.         
-00006490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000064a0: 2020 2073 656c 662e 776f 7264 5f6c 6576     self.word_lev
-000064b0: 656c 5f74 6167 5f63 6f6c 756d 6e73 5b63  el_tag_columns[c
-000064c0: 6f6c 756d 6e5d 203d 206c 6179 6572 0a20  olumn] = layer. 
-000064d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000064e0: 2020 2020 2020 2020 2020 2062 7265 616b             break
-000064f0: 0a0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-00006500: 616c 6c20 7265 6d61 696e 696e 6720 636f  all remaining co
-00006510: 6c75 6d6e 7320 7468 6174 2061 7265 206e  lumns that are n
-00006520: 6f74 2077 6f72 642d 6c65 7665 6c20 6172  ot word-level ar
-00006530: 6520 7370 616e 2d6c 6576 656c 0a20 2020  e span-level.   
-00006540: 2020 2020 2020 2020 2066 6f72 2063 6f6c           for col
-00006550: 756d 6e20 696e 2063 6f6c 756d 6e5f 6e61  umn in column_na
-00006560: 6d65 5f6d 6170 3a0a 2020 2020 2020 2020  me_map:.        
-00006570: 2020 2020 2020 2020 6966 2063 6f6c 756d          if colum
-00006580: 6e20 6e6f 7420 696e 2073 656c 662e 776f  n not in self.wo
-00006590: 7264 5f6c 6576 656c 5f74 6167 5f63 6f6c  rd_level_tag_col
-000065a0: 756d 6e73 3a0a 2020 2020 2020 2020 2020  umns:.          
-000065b0: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
-000065c0: 7061 6e5f 6c65 7665 6c5f 7461 675f 636f  pan_level_tag_co
-000065d0: 6c75 6d6e 735b 636f 6c75 6d6e 5d20 3d20  lumns[column] = 
-000065e0: 636f 6c75 6d6e 5f6e 616d 655f 6d61 705b  column_name_map[
-000065f0: 636f 6c75 6d6e 5d0a 0a20 2020 2020 2020  column]..       
-00006600: 2020 2020 2066 6f72 2063 6f6c 756d 6e20       for column 
-00006610: 696e 2073 656c 662e 7370 616e 5f6c 6576  in self.span_lev
-00006620: 656c 5f74 6167 5f63 6f6c 756d 6e73 3a0a  el_tag_columns:.
-00006630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006640: 6c6f 672e 6465 6275 6728 6622 436f 6c75  log.debug(f"Colu
-00006650: 6d6e 207b 636f 6c75 6d6e 7d20 287b 7365  mn {column} ({se
-00006660: 6c66 2e73 7061 6e5f 6c65 7665 6c5f 7461  lf.span_level_ta
-00006670: 675f 636f 6c75 6d6e 735b 636f 6c75 6d6e  g_columns[column
-00006680: 5d7d 2920 6973 2061 2073 7061 6e2d 6c65  ]}) is a span-le
-00006690: 7665 6c20 636f 6c75 6d6e 2e22 290a 0a20  vel column.").. 
-000066a0: 2020 2020 2020 2020 2020 2023 2066 6f72             # for
-000066b0: 2063 6f6c 756d 6e20 696e 2073 656c 662e   column in self.
-000066c0: 776f 7264 5f6c 6576 656c 5f74 6167 5f63  word_level_tag_c
-000066d0: 6f6c 756d 6e73 3a0a 2020 2020 2020 2020  olumns:.        
-000066e0: 2020 2020 2320 2020 2020 6c6f 672e 696e      #     log.in
-000066f0: 666f 2866 2243 6f6c 756d 6e20 7b63 6f6c  fo(f"Column {col
-00006700: 756d 6e7d 2028 7b73 656c 662e 776f 7264  umn} ({self.word
-00006710: 5f6c 6576 656c 5f74 6167 5f63 6f6c 756d  _level_tag_colum
-00006720: 6e73 5b63 6f6c 756d 6e5d 7d29 2069 7320  ns[column]}) is 
-00006730: 6120 776f 7264 2d6c 6576 656c 2063 6f6c  a word-level col
-00006740: 756d 6e2e 2229 0a0a 2020 2020 6465 6620  umn.")..    def 
-00006750: 5f72 6561 645f 6e65 7874 5f73 656e 7465  _read_next_sente
-00006760: 6e63 6528 7365 6c66 2c20 6669 6c65 293a  nce(self, file):
-00006770: 0a20 2020 2020 2020 206c 696e 6573 203d  .        lines =
-00006780: 205b 5d0a 2020 2020 2020 2020 6c69 6e65   [].        line
-00006790: 203d 2066 696c 652e 7265 6164 6c69 6e65   = file.readline
-000067a0: 2829 0a20 2020 2020 2020 2077 6869 6c65  ().        while
-000067b0: 206c 696e 653a 0a20 2020 2020 2020 2020   line:.         
-000067c0: 2020 2069 6620 6e6f 7420 6c69 6e65 2e69     if not line.i
-000067d0: 7373 7061 6365 2829 3a0a 2020 2020 2020  sspace():.      
-000067e0: 2020 2020 2020 2020 2020 6c69 6e65 732e            lines.
-000067f0: 6170 7065 6e64 286c 696e 6529 0a0a 2020  append(line)..  
-00006800: 2020 2020 2020 2020 2020 2320 6966 2073            # if s
-00006810: 656e 7465 6e63 6520 656e 6473 2c20 6272  entence ends, br
-00006820: 6561 6b0a 2020 2020 2020 2020 2020 2020  eak.            
-00006830: 6966 206c 656e 286c 696e 6573 2920 3e20  if len(lines) > 
-00006840: 3020 616e 6420 7365 6c66 2e5f 5f6c 696e  0 and self.__lin
-00006850: 655f 636f 6d70 6c65 7465 735f 7365 6e74  e_completes_sent
-00006860: 656e 6365 286c 696e 6529 3a0a 2020 2020  ence(line):.    
-00006870: 2020 2020 2020 2020 2020 2020 6272 6561              brea
-00006880: 6b0a 0a20 2020 2020 2020 2020 2020 206c  k..            l
-00006890: 696e 6520 3d20 6669 6c65 2e72 6561 646c  ine = file.readl
-000068a0: 696e 6528 290a 2020 2020 2020 2020 7265  ine().        re
-000068b0: 7475 726e 206c 696e 6573 0a0a 2020 2020  turn lines..    
-000068c0: 6465 6620 5f63 6f6e 7665 7274 5f6c 696e  def _convert_lin
-000068d0: 6573 5f74 6f5f 7365 6e74 656e 6365 280a  es_to_sentence(.
-000068e0: 2020 2020 2020 2020 7365 6c66 2c20 6c69          self, li
-000068f0: 6e65 732c 2077 6f72 645f 6c65 7665 6c5f  nes, word_level_
-00006900: 7461 675f 636f 6c75 6d6e 733a 2044 6963  tag_columns: Dic
-00006910: 745b 696e 742c 2073 7472 5d2c 2073 7061  t[int, str], spa
-00006920: 6e5f 6c65 7665 6c5f 7461 675f 636f 6c75  n_level_tag_colu
-00006930: 6d6e 733a 204f 7074 696f 6e61 6c5b 4469  mns: Optional[Di
-00006940: 6374 5b69 6e74 2c20 7374 725d 5d20 3d20  ct[int, str]] = 
-00006950: 4e6f 6e65 0a20 2020 2029 3a0a 2020 2020  None.    ):.    
-00006960: 2020 2020 746f 6b65 6e3a 204f 7074 696f      token: Optio
-00006970: 6e61 6c5b 546f 6b65 6e5d 203d 204e 6f6e  nal[Token] = Non
-00006980: 650a 2020 2020 2020 2020 746f 6b65 6e73  e.        tokens
-00006990: 3a20 4c69 7374 5b54 6f6b 656e 5d20 3d20  : List[Token] = 
-000069a0: 5b5d 0a20 2020 2020 2020 2066 696c 7465  [].        filte
-000069b0: 7265 645f 6c69 6e65 7320 3d20 5b5d 0a20  red_lines = []. 
-000069c0: 2020 2020 2020 2063 6f6d 6d65 6e74 7320         comments 
-000069d0: 3d20 5b5d 0a20 2020 2020 2020 2066 6f72  = [].        for
-000069e0: 206c 696e 6520 696e 206c 696e 6573 3a0a   line in lines:.
-000069f0: 2020 2020 2020 2020 2020 2020 2320 7061              # pa
-00006a00: 7273 6520 636f 6d6d 656e 7473 2069 6620  rse comments if 
-00006a10: 706f 7373 6962 6c65 0a20 2020 2020 2020  possible.       
-00006a20: 2020 2020 2069 6620 7365 6c66 2e63 6f6d       if self.com
-00006a30: 6d65 6e74 5f73 796d 626f 6c20 6973 206e  ment_symbol is n
-00006a40: 6f74 204e 6f6e 6520 616e 6420 6c69 6e65  ot None and line
-00006a50: 2e73 7461 7274 7377 6974 6828 7365 6c66  .startswith(self
-00006a60: 2e63 6f6d 6d65 6e74 5f73 796d 626f 6c29  .comment_symbol)
-00006a70: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00006a80: 2020 636f 6d6d 656e 7473 2e61 7070 656e    comments.appen
-00006a90: 6428 6c69 6e65 290a 2020 2020 2020 2020  d(line).        
-00006aa0: 2020 2020 2020 2020 636f 6e74 696e 7565          continue
-00006ab0: 0a0a 2020 2020 2020 2020 2020 2020 6669  ..            fi
-00006ac0: 6c74 6572 6564 5f6c 696e 6573 2e61 7070  ltered_lines.app
-00006ad0: 656e 6428 6c69 6e65 290a 0a20 2020 2020  end(line)..     
-00006ae0: 2020 2020 2020 2023 206f 7468 6572 7769         # otherwi
-00006af0: 7365 2c20 7468 6973 206c 696e 6520 6973  se, this line is
-00006b00: 2061 2074 6f6b 656e 2e20 7061 7273 6520   a token. parse 
-00006b10: 616e 6420 6164 6420 746f 2073 656e 7465  and add to sente
-00006b20: 6e63 650a 2020 2020 2020 2020 2020 2020  nce.            
-00006b30: 746f 6b65 6e20 3d20 7365 6c66 2e5f 7061  token = self._pa
-00006b40: 7273 655f 746f 6b65 6e28 6c69 6e65 2c20  rse_token(line, 
-00006b50: 776f 7264 5f6c 6576 656c 5f74 6167 5f63  word_level_tag_c
-00006b60: 6f6c 756d 6e73 2c20 746f 6b65 6e29 0a20  olumns, token). 
-00006b70: 2020 2020 2020 2020 2020 2074 6f6b 656e             token
-00006b80: 732e 6170 7065 6e64 2874 6f6b 656e 290a  s.append(token).
-00006b90: 2020 2020 2020 2020 7365 6e74 656e 6365          sentence
-00006ba0: 3a20 5365 6e74 656e 6365 203d 2053 656e  : Sentence = Sen
-00006bb0: 7465 6e63 6528 7465 7874 3d74 6f6b 656e  tence(text=token
-00006bc0: 7329 0a0a 2020 2020 2020 2020 2320 6368  s)..        # ch
-00006bd0: 6563 6b20 6966 2074 6869 7320 7365 6e74  eck if this sent
-00006be0: 656e 6365 2069 7320 6120 646f 6375 6d65  ence is a docume
-00006bf0: 6e74 2062 6f75 6e64 6172 790a 2020 2020  nt boundary.    
-00006c00: 2020 2020 6966 2073 656e 7465 6e63 652e      if sentence.
-00006c10: 746f 5f6f 7269 6769 6e61 6c5f 7465 7874  to_original_text
-00006c20: 2829 203d 3d20 7365 6c66 2e64 6f63 756d  () == self.docum
-00006c30: 656e 745f 7365 7061 7261 746f 725f 746f  ent_separator_to
-00006c40: 6b65 6e3a 0a20 2020 2020 2020 2020 2020  ken:.           
-00006c50: 2073 656e 7465 6e63 652e 6973 5f64 6f63   sentence.is_doc
-00006c60: 756d 656e 745f 626f 756e 6461 7279 203d  ument_boundary =
-00006c70: 2054 7275 650a 0a20 2020 2020 2020 2023   True..        #
-00006c80: 2061 6464 2073 7061 6e20 6c61 6265 6c73   add span labels
-00006c90: 0a20 2020 2020 2020 2069 6620 7370 616e  .        if span
-00006ca0: 5f6c 6576 656c 5f74 6167 5f63 6f6c 756d  _level_tag_colum
-00006cb0: 6e73 3a0a 2020 2020 2020 2020 2020 2020  ns:.            
-00006cc0: 666f 7220 7370 616e 5f63 6f6c 756d 6e20  for span_column 
-00006cd0: 696e 2073 7061 6e5f 6c65 7665 6c5f 7461  in span_level_ta
-00006ce0: 675f 636f 6c75 6d6e 733a 0a20 2020 2020  g_columns:.     
-00006cf0: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
-00006d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006d10: 2020 2020 6269 6f65 735f 7461 6773 203d      bioes_tags =
-00006d20: 205b 7365 6c66 2e63 6f6c 756d 6e5f 6465   [self.column_de
-00006d30: 6c69 6d69 7465 722e 7370 6c69 7428 6c69  limiter.split(li
-00006d40: 6e65 2e72 7374 7269 7028 2929 5b73 7061  ne.rstrip())[spa
-00006d50: 6e5f 636f 6c75 6d6e 5d20 666f 7220 6c69  n_column] for li
-00006d60: 6e65 2069 6e20 6669 6c74 6572 6564 5f6c  ne in filtered_l
-00006d70: 696e 6573 5d0a 0a20 2020 2020 2020 2020  ines]..         
-00006d80: 2020 2020 2020 2020 2020 2023 2064 6973             # dis
-00006d90: 6361 7264 2074 6167 7320 6672 6f6d 2074  card tags from t
-00006da0: 6f6b 656e 7320 7468 6174 2061 7265 206e  okens that are n
-00006db0: 6f74 2061 6464 6564 2074 6f20 7468 6520  ot added to the 
-00006dc0: 7365 6e74 656e 6365 0a20 2020 2020 2020  sentence.       
-00006dd0: 2020 2020 2020 2020 2020 2020 2062 696f               bio
-00006de0: 6573 5f74 6167 7320 3d20 5b74 6167 2066  es_tags = [tag f
-00006df0: 6f72 2074 6167 2c20 746f 6b65 6e20 696e  or tag, token in
-00006e00: 207a 6970 2862 696f 6573 5f74 6167 732c   zip(bioes_tags,
-00006e10: 2074 6f6b 656e 7329 2069 6620 746f 6b65   tokens) if toke
-00006e20: 6e2e 5f69 6e74 6572 6e61 6c5f 696e 6465  n._internal_inde
-00006e30: 7820 6973 206e 6f74 204e 6f6e 655d 0a20  x is not None]. 
-00006e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006e50: 2020 2070 7265 6469 6374 6564 5f73 7061     predicted_spa
-00006e60: 6e73 203d 2067 6574 5f73 7061 6e73 5f66  ns = get_spans_f
-00006e70: 726f 6d5f 6269 6f28 6269 6f65 735f 7461  rom_bio(bioes_ta
-00006e80: 6773 290a 2020 2020 2020 2020 2020 2020  gs).            
-00006e90: 2020 2020 2020 2020 666f 7220 7370 616e          for span
-00006ea0: 5f69 6e64 6963 6573 2c20 7363 6f72 652c  _indices, score,
-00006eb0: 206c 6162 656c 2069 6e20 7072 6564 6963   label in predic
-00006ec0: 7465 645f 7370 616e 733a 0a20 2020 2020  ted_spans:.     
-00006ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006ee0: 2020 2073 7061 6e20 3d20 7365 6e74 656e     span = senten
-00006ef0: 6365 5b73 7061 6e5f 696e 6469 6365 735b  ce[span_indices[
-00006f00: 305d 203a 2073 7061 6e5f 696e 6469 6365  0] : span_indice
-00006f10: 735b 2d31 5d20 2b20 315d 0a20 2020 2020  s[-1] + 1].     
-00006f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006f30: 2020 2076 616c 7565 203d 2073 656c 662e     value = self.
-00006f40: 5f72 656d 6170 5f6c 6162 656c 286c 6162  _remap_label(lab
-00006f50: 656c 290a 2020 2020 2020 2020 2020 2020  el).            
-00006f60: 2020 2020 2020 2020 2020 2020 6966 2076              if v
-00006f70: 616c 7565 2021 3d20 224f 223a 0a20 2020  alue != "O":.   
-00006f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006f90: 2020 2020 2020 2020 2073 7061 6e2e 6164           span.ad
-00006fa0: 645f 6c61 6265 6c28 7370 616e 5f6c 6576  d_label(span_lev
-00006fb0: 656c 5f74 6167 5f63 6f6c 756d 6e73 5b73  el_tag_columns[s
-00006fc0: 7061 6e5f 636f 6c75 6d6e 5d2c 2076 616c  pan_column], val
-00006fd0: 7565 3d76 616c 7565 2c20 7363 6f72 653d  ue=value, score=
-00006fe0: 7363 6f72 6529 0a20 2020 2020 2020 2020  score).         
-00006ff0: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
-00007000: 6365 7074 696f 6e3a 0a20 2020 2020 2020  ception:.       
-00007010: 2020 2020 2020 2020 2020 2020 2070 6173               pas
-00007020: 730a 0a20 2020 2020 2020 2066 6f72 2063  s..        for c
-00007030: 6f6d 6d65 6e74 2069 6e20 636f 6d6d 656e  omment in commen
-00007040: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
-00007050: 2320 7061 7273 6520 7265 6c61 7469 6f6e  # parse relation
-00007060: 7320 6966 2074 6865 7920 6172 6520 7365  s if they are se
-00007070: 740a 2020 2020 2020 2020 2020 2020 6966  t.            if
-00007080: 2063 6f6d 6d65 6e74 2e73 7461 7274 7377   comment.startsw
-00007090: 6974 6828 2223 2072 656c 6174 696f 6e73  ith("# relations
-000070a0: 203d 2022 293a 0a20 2020 2020 2020 2020   = "):.         
-000070b0: 2020 2020 2020 2072 656c 6174 696f 6e73         relations
-000070c0: 5f73 7472 696e 6720 3d20 636f 6d6d 656e  _string = commen
-000070d0: 742e 7374 7269 7028 292e 7370 6c69 7428  t.strip().split(
-000070e0: 2223 2072 656c 6174 696f 6e73 203d 2022  "# relations = "
-000070f0: 295b 315d 0a20 2020 2020 2020 2020 2020  )[1].           
-00007100: 2020 2020 2066 6f72 2072 656c 6174 696f       for relatio
-00007110: 6e20 696e 2072 656c 6174 696f 6e73 5f73  n in relations_s
-00007120: 7472 696e 672e 7370 6c69 7428 227c 2229  tring.split("|")
-00007130: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00007140: 2020 2020 2020 696e 6469 6365 7320 3d20        indices = 
-00007150: 7265 6c61 7469 6f6e 2e73 706c 6974 2822  relation.split("
-00007160: 3b22 290a 2020 2020 2020 2020 2020 2020  ;").            
-00007170: 2020 2020 2020 2020 6865 6164 5f73 7461          head_sta
-00007180: 7274 203d 2069 6e74 2869 6e64 6963 6573  rt = int(indices
-00007190: 5b30 5d29 0a20 2020 2020 2020 2020 2020  [0]).           
-000071a0: 2020 2020 2020 2020 2068 6561 645f 656e           head_en
-000071b0: 6420 3d20 696e 7428 696e 6469 6365 735b  d = int(indices[
-000071c0: 315d 290a 2020 2020 2020 2020 2020 2020  1]).            
-000071d0: 2020 2020 2020 2020 7461 696c 5f73 7461          tail_sta
-000071e0: 7274 203d 2069 6e74 2869 6e64 6963 6573  rt = int(indices
-000071f0: 5b32 5d29 0a20 2020 2020 2020 2020 2020  [2]).           
-00007200: 2020 2020 2020 2020 2074 6169 6c5f 656e           tail_en
-00007210: 6420 3d20 696e 7428 696e 6469 6365 735b  d = int(indices[
-00007220: 335d 290a 2020 2020 2020 2020 2020 2020  3]).            
-00007230: 2020 2020 2020 2020 6c61 6265 6c20 3d20          label = 
-00007240: 696e 6469 6365 735b 345d 0a20 2020 2020  indices[4].     
-00007250: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00007260: 2068 6561 6420 616e 6420 7461 696c 2073   head and tail s
-00007270: 7061 6e20 696e 6469 6365 7320 6172 6520  pan indices are 
-00007280: 312d 696e 6465 7865 6420 616e 6420 656e  1-indexed and en
-00007290: 6420 696e 6465 7820 6973 2069 6e63 6c75  d index is inclu
-000072a0: 7369 7665 0a20 2020 2020 2020 2020 2020  sive.           
-000072b0: 2020 2020 2020 2020 2072 656c 6174 696f           relatio
-000072c0: 6e20 3d20 5265 6c61 7469 6f6e 280a 2020  n = Relation(.  
-000072d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000072e0: 2020 2020 2020 6669 7273 743d 7365 6e74        first=sent
-000072f0: 656e 6365 5b68 6561 645f 7374 6172 7420  ence[head_start 
-00007300: 2d20 3120 3a20 6865 6164 5f65 6e64 5d2c  - 1 : head_end],
-00007310: 2073 6563 6f6e 643d 7365 6e74 656e 6365   second=sentence
-00007320: 5b74 6169 6c5f 7374 6172 7420 2d20 3120  [tail_start - 1 
-00007330: 3a20 7461 696c 5f65 6e64 5d0a 2020 2020  : tail_end].    
+000032e0: 206c 6162 656c 5f6e 616d 655f 6d61 703d   label_name_map=
+000032f0: 6c61 6265 6c5f 6e61 6d65 5f6d 6170 2c0a  label_name_map,.
+00003300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003310: 2020 2020 2020 2020 6465 6661 756c 745f          default_
+00003320: 7768 6974 6573 7061 6365 5f61 6674 6572  whitespace_after
+00003330: 3d64 6566 6175 6c74 5f77 6869 7465 7370  =default_whitesp
+00003340: 6163 655f 6166 7465 722c 0a20 2020 2020  ace_after,.     
+00003350: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00003360: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003370: 2020 2020 2066 6f72 2064 6576 5f66 696c       for dev_fil
+00003380: 6520 696e 2064 6576 5f66 696c 6573 0a20  e in dev_files. 
+00003390: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
+000033a0: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
+000033b0: 2020 2020 2020 2020 2020 2069 6620 6465             if de
+000033c0: 765f 6669 6c65 7320 616e 6420 6465 765f  v_files and dev_
+000033d0: 6669 6c65 735b 305d 0a20 2020 2020 2020  files[0].       
+000033e0: 2020 2020 2065 6c73 6520 4e6f 6e65 0a20       else None. 
+000033f0: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+00003400: 2020 7375 7065 7228 292e 5f5f 696e 6974    super().__init
+00003410: 5f5f 2874 7261 696e 2c20 6465 762c 2074  __(train, dev, t
+00003420: 6573 742c 202a 2a63 6f72 7075 7361 7267  est, **corpusarg
+00003430: 7329 0a0a 0a63 6c61 7373 2043 6f6c 756d  s)...class Colum
+00003440: 6e43 6f72 7075 7328 4d75 6c74 6946 696c  nCorpus(MultiFil
+00003450: 6543 6f6c 756d 6e43 6f72 7075 7329 3a0a  eColumnCorpus):.
+00003460: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+00003470: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
+00003480: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
+00003490: 6465 723a 2055 6e69 6f6e 5b73 7472 2c20  der: Union[str, 
+000034a0: 5061 7468 5d2c 0a20 2020 2020 2020 2063  Path],.        c
+000034b0: 6f6c 756d 6e5f 666f 726d 6174 3a20 4469  olumn_format: Di
+000034c0: 6374 5b69 6e74 2c20 7374 725d 2c0a 2020  ct[int, str],.  
+000034d0: 2020 2020 2020 7472 6169 6e5f 6669 6c65        train_file
+000034e0: 3d4e 6f6e 652c 0a20 2020 2020 2020 2074  =None,.        t
+000034f0: 6573 745f 6669 6c65 3d4e 6f6e 652c 0a20  est_file=None,. 
+00003500: 2020 2020 2020 2064 6576 5f66 696c 653d         dev_file=
+00003510: 4e6f 6e65 2c0a 2020 2020 2020 2020 6175  None,.        au
+00003520: 746f 6669 6e64 5f73 706c 6974 733a 2062  tofind_splits: b
+00003530: 6f6f 6c20 3d20 5472 7565 2c0a 2020 2020  ool = True,.    
+00003540: 2020 2020 6e61 6d65 3a20 4f70 7469 6f6e      name: Option
+00003550: 616c 5b73 7472 5d20 3d20 4e6f 6e65 2c0a  al[str] = None,.
+00003560: 2020 2020 2020 2020 636f 6d6d 656e 745f          comment_
+00003570: 7379 6d62 6f6c 3d22 2320 222c 0a20 2020  symbol="# ",.   
+00003580: 2020 2020 202a 2a63 6f72 7075 7361 7267       **corpusarg
+00003590: 732c 0a20 2020 2029 202d 3e20 4e6f 6e65  s,.    ) -> None
+000035a0: 3a0a 2020 2020 2020 2020 7222 2222 496e  :.        r"""In
+000035b0: 7374 616e 7469 6174 6573 2061 2043 6f72  stantiates a Cor
+000035c0: 7075 7320 6672 6f6d 2043 6f4e 4c4c 2063  pus from CoNLL c
+000035d0: 6f6c 756d 6e2d 666f 726d 6174 7465 6420  olumn-formatted 
+000035e0: 7461 736b 2064 6174 6120 7375 6368 2061  task data such a
+000035f0: 7320 436f 4e4c 4c30 3320 6f72 2043 6f4e  s CoNLL03 or CoN
+00003600: 4c4c 3230 3030 2e0a 0a20 2020 2020 2020  LL2000...       
+00003610: 2041 7267 733a 0a20 2020 2020 2020 2020   Args:.         
+00003620: 2020 2064 6174 615f 666f 6c64 6572 3a20     data_folder: 
+00003630: 6261 7365 2066 6f6c 6465 7220 7769 7468  base folder with
+00003640: 2074 6865 2074 6173 6b20 6461 7461 0a20   the task data. 
+00003650: 2020 2020 2020 2020 2020 2063 6f6c 756d             colum
+00003660: 6e5f 666f 726d 6174 3a20 6120 6d61 7020  n_format: a map 
+00003670: 7370 6563 6966 7969 6e67 2074 6865 2063  specifying the c
+00003680: 6f6c 756d 6e20 666f 726d 6174 0a20 2020  olumn format.   
+00003690: 2020 2020 2020 2020 2074 7261 696e 5f66           train_f
+000036a0: 696c 653a 2074 6865 206e 616d 6520 6f66  ile: the name of
+000036b0: 2074 6865 2074 7261 696e 2066 696c 650a   the train file.
+000036c0: 2020 2020 2020 2020 2020 2020 7465 7374              test
+000036d0: 5f66 696c 653a 2074 6865 206e 616d 6520  _file: the name 
+000036e0: 6f66 2074 6865 2074 6573 7420 6669 6c65  of the test file
+000036f0: 0a20 2020 2020 2020 2020 2020 2064 6576  .            dev
+00003700: 5f66 696c 653a 2074 6865 206e 616d 6520  _file: the name 
+00003710: 6f66 2074 6865 2064 6576 2066 696c 652c  of the dev file,
+00003720: 2069 6620 4e6f 6e65 2c20 6465 7620 6461   if None, dev da
+00003730: 7461 2069 7320 7361 6d70 6c65 6420 6672  ta is sampled fr
+00003740: 6f6d 2074 7261 696e 0a20 2020 2020 2020  om train.       
+00003750: 2020 2020 2063 6f6c 756d 6e5f 6465 6c69       column_deli
+00003760: 6d69 7465 723a 2064 6566 6175 6c74 2069  miter: default i
+00003770: 7320 746f 2073 706c 6974 206f 6e20 616e  s to split on an
+00003780: 7920 7365 7061 7261 7461 746f 722c 2062  y separatator, b
+00003790: 7574 2079 6f75 2063 616e 206f 7665 7277  ut you can overw
+000037a0: 7269 7465 2066 6f72 2069 6e73 7461 6e63  rite for instanc
+000037b0: 6520 7769 7468 2022 5c74 2220 746f 2073  e with "\t" to s
+000037c0: 706c 6974 206f 6e6c 7920 6f6e 2074 6162  plit only on tab
+000037d0: 730a 2020 2020 2020 2020 2020 2020 636f  s.            co
+000037e0: 6d6d 656e 745f 7379 6d62 6f6c 3a20 6966  mment_symbol: if
+000037f0: 2073 6574 2c20 6c69 6e65 7320 7468 6174   set, lines that
+00003800: 2062 6567 696e 2077 6974 6820 7468 6973   begin with this
+00003810: 2073 796d 626f 6c20 6172 6520 7472 6561   symbol are trea
+00003820: 7465 6420 6173 2063 6f6d 6d65 6e74 730a  ted as comments.
+00003830: 2020 2020 2020 2020 2020 2020 646f 6375              docu
+00003840: 6d65 6e74 5f73 6570 6172 6174 6f72 5f74  ment_separator_t
+00003850: 6f6b 656e 3a20 4966 2070 726f 7669 6465  oken: If provide
+00003860: 642c 2073 656e 7465 6e63 6573 2074 6861  d, sentences tha
+00003870: 7420 6675 6e63 7469 6f6e 2061 7320 646f  t function as do
+00003880: 6375 6d65 6e74 2062 6f75 6e64 6172 6965  cument boundarie
+00003890: 7320 6172 6520 736f 206d 6172 6b65 640a  s are so marked.
+000038a0: 2020 2020 2020 2020 2020 2020 736b 6970              skip
+000038b0: 5f66 6972 7374 5f6c 696e 653a 2073 6574  _first_line: set
+000038c0: 2074 6f20 5472 7565 2069 6620 796f 7572   to True if your
+000038d0: 2064 6174 6173 6574 2068 6173 2061 2068   dataset has a h
+000038e0: 6561 6465 7220 6c69 6e65 0a20 2020 2020  eader line.     
+000038f0: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
+00003900: 3a20 4966 2073 6574 2074 6f20 5472 7565  : If set to True
+00003910: 2c20 7468 6520 6461 7461 7365 7420 6973  , the dataset is
+00003920: 206b 6570 7420 696e 206d 656d 6f72 7920   kept in memory 
+00003930: 6173 2053 656e 7465 6e63 6520 6f62 6a65  as Sentence obje
+00003940: 6374 732c 206f 7468 6572 7769 7365 2064  cts, otherwise d
+00003950: 6f65 7320 6469 736b 2072 6561 6473 0a20  oes disk reads. 
+00003960: 2020 2020 2020 2020 2020 206c 6162 656c             label
+00003970: 5f6e 616d 655f 6d61 703a 204f 7074 696f  _name_map: Optio
+00003980: 6e61 6c6c 7920 6d61 7020 7461 6720 6e61  nally map tag na
+00003990: 6d65 7320 746f 2064 6966 6665 7265 6e74  mes to different
+000039a0: 2073 6368 656d 612e 0a20 2020 2020 2020   schema..       
+000039b0: 2020 2020 2062 616e 6e65 645f 7365 6e74       banned_sent
+000039c0: 656e 6365 733a 204f 7074 696f 6e61 6c6c  ences: Optionall
+000039d0: 7920 7265 6d6f 7665 2073 656e 7465 6e63  y remove sentenc
+000039e0: 6573 2066 726f 6d20 7468 6520 636f 7270  es from the corp
+000039f0: 7573 2e20 576f 726b 7320 6f6e 6c79 2069  us. Works only i
+00003a00: 6620 6069 6e5f 6d65 6d6f 7279 6020 6973  f `in_memory` is
+00003a10: 2074 7275 650a 2020 2020 2020 2020 2222   true.        ""
+00003a20: 220a 2020 2020 2020 2020 2320 6669 6e64  ".        # find
+00003a30: 2074 7261 696e 2c20 6465 7620 616e 6420   train, dev and 
+00003a40: 7465 7374 2066 696c 6573 2069 6620 6e6f  test files if no
+00003a50: 7420 7370 6563 6966 6965 640a 2020 2020  t specified.    
+00003a60: 2020 2020 6465 765f 6669 6c65 2c20 7465      dev_file, te
+00003a70: 7374 5f66 696c 652c 2074 7261 696e 5f66  st_file, train_f
+00003a80: 696c 6520 3d20 6669 6e64 5f74 7261 696e  ile = find_train
+00003a90: 5f64 6576 5f74 6573 745f 6669 6c65 7328  _dev_test_files(
+00003aa0: 0a20 2020 2020 2020 2020 2020 2064 6174  .            dat
+00003ab0: 615f 666f 6c64 6572 2c20 6465 765f 6669  a_folder, dev_fi
+00003ac0: 6c65 2c20 7465 7374 5f66 696c 652c 2074  le, test_file, t
+00003ad0: 7261 696e 5f66 696c 652c 2061 7574 6f66  rain_file, autof
+00003ae0: 696e 645f 7370 6c69 7473 0a20 2020 2020  ind_splits.     
+00003af0: 2020 2029 0a20 2020 2020 2020 2073 7570     ).        sup
+00003b00: 6572 2829 2e5f 5f69 6e69 745f 5f28 0a20  er().__init__(. 
+00003b10: 2020 2020 2020 2020 2020 2063 6f6c 756d             colum
+00003b20: 6e5f 666f 726d 6174 2c0a 2020 2020 2020  n_format,.      
+00003b30: 2020 2020 2020 6465 765f 6669 6c65 733d        dev_files=
+00003b40: 5b64 6576 5f66 696c 655d 2069 6620 6465  [dev_file] if de
+00003b50: 765f 6669 6c65 2065 6c73 6520 5b5d 2c0a  v_file else [],.
+00003b60: 2020 2020 2020 2020 2020 2020 7472 6169              trai
+00003b70: 6e5f 6669 6c65 733d 5b74 7261 696e 5f66  n_files=[train_f
+00003b80: 696c 655d 2069 6620 7472 6169 6e5f 6669  ile] if train_fi
+00003b90: 6c65 2065 6c73 6520 5b5d 2c0a 2020 2020  le else [],.    
+00003ba0: 2020 2020 2020 2020 7465 7374 5f66 696c          test_fil
+00003bb0: 6573 3d5b 7465 7374 5f66 696c 655d 2069  es=[test_file] i
+00003bc0: 6620 7465 7374 5f66 696c 6520 656c 7365  f test_file else
+00003bd0: 205b 5d2c 0a20 2020 2020 2020 2020 2020   [],.           
+00003be0: 206e 616d 653d 6e61 6d65 2069 6620 6461   name=name if da
+00003bf0: 7461 5f66 6f6c 6465 7220 6973 204e 6f6e  ta_folder is Non
+00003c00: 6520 656c 7365 2073 7472 2864 6174 615f  e else str(data_
+00003c10: 666f 6c64 6572 292c 0a20 2020 2020 2020  folder),.       
+00003c20: 2020 2020 2063 6f6d 6d65 6e74 5f73 796d       comment_sym
+00003c30: 626f 6c3d 636f 6d6d 656e 745f 7379 6d62  bol=comment_symb
+00003c40: 6f6c 2c0a 2020 2020 2020 2020 2020 2020  ol,.            
+00003c50: 2a2a 636f 7270 7573 6172 6773 2c0a 2020  **corpusargs,.  
+00003c60: 2020 2020 2020 290a 0a0a 636c 6173 7320        )...class 
+00003c70: 436f 6c75 6d6e 4461 7461 7365 7428 466c  ColumnDataset(Fl
+00003c80: 6169 7244 6174 6173 6574 293a 0a20 2020  airDataset):.   
+00003c90: 2023 2073 7065 6369 616c 206b 6579 2066   # special key f
+00003ca0: 6f72 2073 7061 6365 2061 6674 6572 0a20  or space after. 
+00003cb0: 2020 2053 5041 4345 5f41 4654 4552 5f4b     SPACE_AFTER_K
+00003cc0: 4559 203d 2022 7370 6163 652d 6166 7465  EY = "space-afte
+00003cd0: 7222 0a20 2020 2023 2073 7065 6369 616c  r".    # special
+00003ce0: 206b 6579 2066 6f72 2066 6561 7475 7265   key for feature
+00003cf0: 2063 6f6c 756d 6e73 0a20 2020 2046 4541   columns.    FEA
+00003d00: 5453 203d 205b 2266 6561 7473 222c 2022  TS = ["feats", "
+00003d10: 6d69 7363 225d 0a20 2020 2023 2073 7065  misc"].    # spe
+00003d20: 6369 616c 206b 6579 2066 6f72 2064 6570  cial key for dep
+00003d30: 656e 6465 6e63 7920 6865 6164 2069 640a  endency head id.
+00003d40: 2020 2020 4845 4144 203d 205b 2268 6561      HEAD = ["hea
+00003d50: 6422 2c20 2268 6561 645f 6964 225d 0a0a  d", "head_id"]..
+00003d60: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+00003d70: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
+00003d80: 2020 2020 2020 2020 7061 7468 5f74 6f5f          path_to_
+00003d90: 636f 6c75 6d6e 5f66 696c 653a 2055 6e69  column_file: Uni
+00003da0: 6f6e 5b73 7472 2c20 5061 7468 5d2c 0a20  on[str, Path],. 
+00003db0: 2020 2020 2020 2063 6f6c 756d 6e5f 6e61         column_na
+00003dc0: 6d65 5f6d 6170 3a20 4469 6374 5b69 6e74  me_map: Dict[int
+00003dd0: 2c20 7374 725d 2c0a 2020 2020 2020 2020  , str],.        
+00003de0: 636f 6c75 6d6e 5f64 656c 696d 6974 6572  column_delimiter
+00003df0: 3a20 7374 7220 3d20 7222 5c73 2b22 2c0a  : str = r"\s+",.
+00003e00: 2020 2020 2020 2020 636f 6d6d 656e 745f          comment_
+00003e10: 7379 6d62 6f6c 3a20 4f70 7469 6f6e 616c  symbol: Optional
+00003e20: 5b73 7472 5d20 3d20 4e6f 6e65 2c0a 2020  [str] = None,.  
+00003e30: 2020 2020 2020 6261 6e6e 6564 5f73 656e        banned_sen
+00003e40: 7465 6e63 6573 3a20 4f70 7469 6f6e 616c  tences: Optional
+00003e50: 5b4c 6973 745b 7374 725d 5d20 3d20 4e6f  [List[str]] = No
+00003e60: 6e65 2c0a 2020 2020 2020 2020 696e 5f6d  ne,.        in_m
+00003e70: 656d 6f72 793a 2062 6f6f 6c20 3d20 5472  emory: bool = Tr
+00003e80: 7565 2c0a 2020 2020 2020 2020 646f 6375  ue,.        docu
+00003e90: 6d65 6e74 5f73 6570 6172 6174 6f72 5f74  ment_separator_t
+00003ea0: 6f6b 656e 3a20 4f70 7469 6f6e 616c 5b73  oken: Optional[s
+00003eb0: 7472 5d20 3d20 4e6f 6e65 2c0a 2020 2020  tr] = None,.    
+00003ec0: 2020 2020 656e 636f 6469 6e67 3a20 7374      encoding: st
+00003ed0: 7220 3d20 2275 7466 2d38 222c 0a20 2020  r = "utf-8",.   
+00003ee0: 2020 2020 2073 6b69 705f 6669 7273 745f       skip_first_
+00003ef0: 6c69 6e65 3a20 626f 6f6c 203d 2046 616c  line: bool = Fal
+00003f00: 7365 2c0a 2020 2020 2020 2020 6c61 6265  se,.        labe
+00003f10: 6c5f 6e61 6d65 5f6d 6170 3a20 4f70 7469  l_name_map: Opti
+00003f20: 6f6e 616c 5b44 6963 745b 7374 722c 2073  onal[Dict[str, s
+00003f30: 7472 5d5d 203d 204e 6f6e 652c 0a20 2020  tr]] = None,.   
+00003f40: 2020 2020 2064 6566 6175 6c74 5f77 6869       default_whi
+00003f50: 7465 7370 6163 655f 6166 7465 723a 2069  tespace_after: i
+00003f60: 6e74 203d 2031 2c0a 2020 2020 2920 2d3e  nt = 1,.    ) ->
+00003f70: 204e 6f6e 653a 0a20 2020 2020 2020 2072   None:.        r
+00003f80: 2222 2249 6e73 7461 6e74 6961 7465 7320  """Instantiates 
+00003f90: 6120 636f 6c75 6d6e 2064 6174 6173 6574  a column dataset
+00003fa0: 2e0a 0a20 2020 2020 2020 2041 7267 733a  ...        Args:
+00003fb0: 0a20 2020 2020 2020 2020 2020 2070 6174  .            pat
+00003fc0: 685f 746f 5f63 6f6c 756d 6e5f 6669 6c65  h_to_column_file
+00003fd0: 3a20 7061 7468 2074 6f20 7468 6520 6669  : path to the fi
+00003fe0: 6c65 2077 6974 6820 7468 6520 636f 6c75  le with the colu
+00003ff0: 6d6e 2d66 6f72 6d61 7474 6564 2064 6174  mn-formatted dat
+00004000: 610a 2020 2020 2020 2020 2020 2020 636f  a.            co
+00004010: 6c75 6d6e 5f6e 616d 655f 6d61 703a 2061  lumn_name_map: a
+00004020: 206d 6170 2073 7065 6369 6679 696e 6720   map specifying 
+00004030: 7468 6520 636f 6c75 6d6e 2066 6f72 6d61  the column forma
+00004040: 740a 2020 2020 2020 2020 2020 2020 636f  t.            co
+00004050: 6c75 6d6e 5f64 656c 696d 6974 6572 3a20  lumn_delimiter: 
+00004060: 6465 6661 756c 7420 6973 2074 6f20 7370  default is to sp
+00004070: 6c69 7420 6f6e 2061 6e79 2073 6570 6172  lit on any separ
+00004080: 6174 6f72 2c20 6275 7420 796f 7520 6361  ator, but you ca
+00004090: 6e20 6f76 6572 7772 6974 6520 666f 7220  n overwrite for 
+000040a0: 696e 7374 616e 6365 2077 6974 6820 225c  instance with "\
+000040b0: 7422 2074 6f20 7370 6c69 7420 6f6e 6c79  t" to split only
+000040c0: 206f 6e20 7461 6273 0a20 2020 2020 2020   on tabs.       
+000040d0: 2020 2020 2063 6f6d 6d65 6e74 5f73 796d       comment_sym
+000040e0: 626f 6c3a 2069 6620 7365 742c 206c 696e  bol: if set, lin
+000040f0: 6573 2074 6861 7420 6265 6769 6e20 7769  es that begin wi
+00004100: 7468 2074 6869 7320 7379 6d62 6f6c 2061  th this symbol a
+00004110: 7265 2074 7265 6174 6564 2061 7320 636f  re treated as co
+00004120: 6d6d 656e 7473 0a20 2020 2020 2020 2020  mments.         
+00004130: 2020 2069 6e5f 6d65 6d6f 7279 3a20 4966     in_memory: If
+00004140: 2073 6574 2074 6f20 5472 7565 2c20 7468   set to True, th
+00004150: 6520 6461 7461 7365 7420 6973 206b 6570  e dataset is kep
+00004160: 7420 696e 206d 656d 6f72 7920 6173 2053  t in memory as S
+00004170: 656e 7465 6e63 6520 6f62 6a65 6374 732c  entence objects,
+00004180: 206f 7468 6572 7769 7365 2064 6f65 7320   otherwise does 
+00004190: 6469 736b 2072 6561 6473 0a20 2020 2020  disk reads.     
+000041a0: 2020 2020 2020 2064 6f63 756d 656e 745f         document_
+000041b0: 7365 7061 7261 746f 725f 746f 6b65 6e3a  separator_token:
+000041c0: 2049 6620 7072 6f76 6964 6564 2c20 7365   If provided, se
+000041d0: 6e74 656e 6365 7320 7468 6174 2066 756e  ntences that fun
+000041e0: 6374 696f 6e20 6173 2064 6f63 756d 656e  ction as documen
+000041f0: 7420 626f 756e 6461 7269 6573 2061 7265  t boundaries are
+00004200: 2073 6f20 6d61 726b 6564 0a20 2020 2020   so marked.     
+00004210: 2020 2020 2020 2073 6b69 705f 6669 7273         skip_firs
+00004220: 745f 6c69 6e65 3a20 7365 7420 746f 2054  t_line: set to T
+00004230: 7275 6520 6966 2079 6f75 7220 6461 7461  rue if your data
+00004240: 7365 7420 6861 7320 6120 6865 6164 6572  set has a header
+00004250: 206c 696e 650a 2020 2020 2020 2020 2020   line.          
+00004260: 2020 6c61 6265 6c5f 6e61 6d65 5f6d 6170    label_name_map
+00004270: 3a20 4f70 7469 6f6e 616c 6c79 206d 6170  : Optionally map
+00004280: 2074 6167 206e 616d 6573 2074 6f20 6469   tag names to di
+00004290: 6666 6572 656e 7420 7363 6865 6d61 2e0a  fferent schema..
+000042a0: 2020 2020 2020 2020 2020 2020 6261 6e6e              bann
+000042b0: 6564 5f73 656e 7465 6e63 6573 3a20 4f70  ed_sentences: Op
+000042c0: 7469 6f6e 616c 6c79 2072 656d 6f76 6520  tionally remove 
+000042d0: 7365 6e74 656e 6365 7320 6672 6f6d 2074  sentences from t
+000042e0: 6865 2063 6f72 7075 732e 2057 6f72 6b73  he corpus. Works
+000042f0: 206f 6e6c 7920 6966 2060 696e 5f6d 656d   only if `in_mem
+00004300: 6f72 7960 2069 7320 7472 7565 0a20 2020  ory` is true.   
+00004310: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00004320: 2070 6174 685f 746f 5f63 6f6c 756d 6e5f   path_to_column_
+00004330: 6669 6c65 203d 2050 6174 6828 7061 7468  file = Path(path
+00004340: 5f74 6f5f 636f 6c75 6d6e 5f66 696c 6529  _to_column_file)
+00004350: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00004360: 7061 7468 5f74 6f5f 636f 6c75 6d6e 5f66  path_to_column_f
+00004370: 696c 652e 6578 6973 7473 2829 0a20 2020  ile.exists().   
+00004380: 2020 2020 2073 656c 662e 7061 7468 5f74       self.path_t
+00004390: 6f5f 636f 6c75 6d6e 5f66 696c 6520 3d20  o_column_file = 
+000043a0: 7061 7468 5f74 6f5f 636f 6c75 6d6e 5f66  path_to_column_f
+000043b0: 696c 650a 2020 2020 2020 2020 7365 6c66  ile.        self
+000043c0: 2e63 6f6c 756d 6e5f 6465 6c69 6d69 7465  .column_delimite
+000043d0: 7220 3d20 7265 2e63 6f6d 7069 6c65 2863  r = re.compile(c
+000043e0: 6f6c 756d 6e5f 6465 6c69 6d69 7465 7229  olumn_delimiter)
+000043f0: 0a20 2020 2020 2020 2073 656c 662e 636f  .        self.co
+00004400: 6d6d 656e 745f 7379 6d62 6f6c 203d 2063  mment_symbol = c
+00004410: 6f6d 6d65 6e74 5f73 796d 626f 6c0a 2020  omment_symbol.  
+00004420: 2020 2020 2020 7365 6c66 2e64 6f63 756d        self.docum
+00004430: 656e 745f 7365 7061 7261 746f 725f 746f  ent_separator_to
+00004440: 6b65 6e20 3d20 646f 6375 6d65 6e74 5f73  ken = document_s
+00004450: 6570 6172 6174 6f72 5f74 6f6b 656e 0a20  eparator_token. 
+00004460: 2020 2020 2020 2073 656c 662e 6c61 6265         self.labe
+00004470: 6c5f 6e61 6d65 5f6d 6170 203d 206c 6162  l_name_map = lab
+00004480: 656c 5f6e 616d 655f 6d61 700a 2020 2020  el_name_map.    
+00004490: 2020 2020 7365 6c66 2e62 616e 6e65 645f      self.banned_
+000044a0: 7365 6e74 656e 6365 7320 3d20 6261 6e6e  sentences = bann
+000044b0: 6564 5f73 656e 7465 6e63 6573 0a20 2020  ed_sentences.   
+000044c0: 2020 2020 2073 656c 662e 6465 6661 756c       self.defaul
+000044d0: 745f 7768 6974 6573 7061 6365 5f61 6674  t_whitespace_aft
+000044e0: 6572 203d 2064 6566 6175 6c74 5f77 6869  er = default_whi
+000044f0: 7465 7370 6163 655f 6166 7465 720a 0a20  tespace_after.. 
+00004500: 2020 2020 2020 2023 2073 746f 7265 2065         # store e
+00004510: 6974 6865 7220 5365 6e74 656e 6365 206f  ither Sentence o
+00004520: 626a 6563 7473 2069 6e20 6d65 6d6f 7279  bjects in memory
+00004530: 2c20 6f72 206f 6e6c 7920 6669 6c65 206f  , or only file o
+00004540: 6666 7365 7473 0a20 2020 2020 2020 2073  ffsets.        s
+00004550: 656c 662e 696e 5f6d 656d 6f72 7920 3d20  elf.in_memory = 
+00004560: 696e 5f6d 656d 6f72 790a 0a20 2020 2020  in_memory..     
+00004570: 2020 2073 656c 662e 746f 7461 6c5f 7365     self.total_se
+00004580: 6e74 656e 6365 5f63 6f75 6e74 3a20 696e  ntence_count: in
+00004590: 7420 3d20 300a 0a20 2020 2020 2020 2023  t = 0..        #
+000045a0: 206d 6f73 7420 6461 7461 2073 6574 7320   most data sets 
+000045b0: 6861 7665 2074 6865 2074 6f6b 656e 2074  have the token t
+000045c0: 6578 7420 696e 2074 6865 2066 6972 7374  ext in the first
+000045d0: 2063 6f6c 756d 6e2c 2069 6620 6e6f 742c   column, if not,
+000045e0: 2070 6173 7320 2774 6578 7427 2061 7320   pass 'text' as 
+000045f0: 636f 6c75 6d6e 0a20 2020 2020 2020 2073  column.        s
+00004600: 656c 662e 7465 7874 5f63 6f6c 756d 6e3a  elf.text_column:
+00004610: 2069 6e74 203d 2030 0a20 2020 2020 2020   int = 0.       
+00004620: 2073 656c 662e 6865 6164 5f69 645f 636f   self.head_id_co
+00004630: 6c75 6d6e 3a20 4f70 7469 6f6e 616c 5b69  lumn: Optional[i
+00004640: 6e74 5d20 3d20 4e6f 6e65 0a20 2020 2020  nt] = None.     
+00004650: 2020 2066 6f72 2063 6f6c 756d 6e20 696e     for column in
+00004660: 2063 6f6c 756d 6e5f 6e61 6d65 5f6d 6170   column_name_map
+00004670: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00004680: 2063 6f6c 756d 6e5f 6e61 6d65 5f6d 6170   column_name_map
+00004690: 5b63 6f6c 756d 6e5d 203d 3d20 2274 6578  [column] == "tex
+000046a0: 7422 3a0a 2020 2020 2020 2020 2020 2020  t":.            
+000046b0: 2020 2020 7365 6c66 2e74 6578 745f 636f      self.text_co
+000046c0: 6c75 6d6e 203d 2063 6f6c 756d 6e0a 2020  lumn = column.  
+000046d0: 2020 2020 2020 2020 2020 6966 2063 6f6c            if col
+000046e0: 756d 6e5f 6e61 6d65 5f6d 6170 5b63 6f6c  umn_name_map[col
+000046f0: 756d 6e5d 2069 6e20 7365 6c66 2e48 4541  umn] in self.HEA
+00004700: 443a 0a20 2020 2020 2020 2020 2020 2020  D:.             
+00004710: 2020 2073 656c 662e 6865 6164 5f69 645f     self.head_id_
+00004720: 636f 6c75 6d6e 203d 2063 6f6c 756d 6e0a  column = column.
+00004730: 0a20 2020 2020 2020 2023 2064 6574 6572  .        # deter
+00004740: 6d69 6e65 2065 6e63 6f64 696e 6720 6f66  mine encoding of
+00004750: 2074 6578 7420 6669 6c65 0a20 2020 2020   text file.     
+00004760: 2020 2073 656c 662e 656e 636f 6469 6e67     self.encoding
+00004770: 203d 2065 6e63 6f64 696e 670a 0a20 2020   = encoding..   
+00004780: 2020 2020 2023 2069 6465 6e74 6966 7920       # identify 
+00004790: 7768 6963 6820 636f 6c75 6d6e 7320 6172  which columns ar
+000047a0: 6520 7370 616e 7320 616e 6420 7768 6963  e spans and whic
+000047b0: 6820 6172 6520 776f 7264 2d6c 6576 656c  h are word-level
+000047c0: 0a20 2020 2020 2020 2073 656c 662e 5f69  .        self._i
+000047d0: 6465 6e74 6966 795f 7370 616e 5f63 6f6c  dentify_span_col
+000047e0: 756d 6e73 2863 6f6c 756d 6e5f 6e61 6d65  umns(column_name
+000047f0: 5f6d 6170 2c20 736b 6970 5f66 6972 7374  _map, skip_first
+00004800: 5f6c 696e 6529 0a0a 2020 2020 2020 2020  _line)..        
+00004810: 2320 6e6f 7720 6c6f 6164 2061 6c6c 2073  # now load all s
+00004820: 656e 7465 6e63 6573 0a20 2020 2020 2020  entences.       
+00004830: 2077 6974 6820 6f70 656e 2873 7472 2873   with open(str(s
+00004840: 656c 662e 7061 7468 5f74 6f5f 636f 6c75  elf.path_to_colu
+00004850: 6d6e 5f66 696c 6529 2c20 656e 636f 6469  mn_file), encodi
+00004860: 6e67 3d73 656c 662e 656e 636f 6469 6e67  ng=self.encoding
+00004870: 2920 6173 2066 696c 653a 0a20 2020 2020  ) as file:.     
+00004880: 2020 2020 2020 2023 2073 6b69 7020 6669         # skip fi
+00004890: 7273 7420 6c69 6e65 2069 6620 746f 2073  rst line if to s
+000048a0: 656c 6563 7465 640a 2020 2020 2020 2020  elected.        
+000048b0: 2020 2020 6966 2073 6b69 705f 6669 7273      if skip_firs
+000048c0: 745f 6c69 6e65 3a0a 2020 2020 2020 2020  t_line:.        
+000048d0: 2020 2020 2020 2020 6669 6c65 2e72 6561          file.rea
+000048e0: 646c 696e 6528 290a 0a20 2020 2020 2020  dline()..       
+000048f0: 2020 2020 2023 206f 7074 696f 6e20 313a       # option 1:
+00004900: 206b 6565 7020 5365 6e74 656e 6365 206f   keep Sentence o
+00004910: 626a 6563 7473 2069 6e20 6d65 6d6f 7279  bjects in memory
+00004920: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00004930: 7365 6c66 2e69 6e5f 6d65 6d6f 7279 3a0a  self.in_memory:.
+00004940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004950: 7365 6c66 2e73 656e 7465 6e63 6573 3a20  self.sentences: 
+00004960: 4c69 7374 5b53 656e 7465 6e63 655d 203d  List[Sentence] =
+00004970: 205b 5d0a 0a20 2020 2020 2020 2020 2020   []..           
+00004980: 2020 2020 2023 2070 6f69 6e74 6572 2074       # pointer t
+00004990: 6f20 7072 6576 696f 7573 0a20 2020 2020  o previous.     
+000049a0: 2020 2020 2020 2020 2020 2070 7265 7669             previ
+000049b0: 6f75 735f 7365 6e74 656e 6365 203d 204e  ous_sentence = N
+000049c0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+000049d0: 2020 2020 7768 696c 6520 5472 7565 3a0a      while True:.
+000049e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000049f0: 2020 2020 2320 7061 7273 6520 6e65 7874      # parse next
+00004a00: 2073 656e 7465 6e63 650a 2020 2020 2020   sentence.      
+00004a10: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
+00004a20: 7874 5f73 656e 7465 6e63 6520 3d20 7365  xt_sentence = se
+00004a30: 6c66 2e5f 7265 6164 5f6e 6578 745f 7365  lf._read_next_se
+00004a40: 6e74 656e 6365 2866 696c 6529 0a0a 2020  ntence(file)..  
+00004a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004a60: 2020 2320 7175 6974 2069 6620 6c61 7374    # quit if last
+00004a70: 2073 656e 7465 6e63 6520 7265 6163 6865   sentence reache
+00004a80: 640a 2020 2020 2020 2020 2020 2020 2020  d.              
+00004a90: 2020 2020 2020 6966 206c 656e 286e 6578        if len(nex
+00004aa0: 745f 7365 6e74 656e 6365 2920 3d3d 2030  t_sentence) == 0
+00004ab0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00004ac0: 2020 2020 2020 2020 2020 6272 6561 6b0a            break.
+00004ad0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004ae0: 2020 2020 2073 656e 7465 6e63 6520 3d20       sentence = 
+00004af0: 7365 6c66 2e5f 636f 6e76 6572 745f 6c69  self._convert_li
+00004b00: 6e65 735f 746f 5f73 656e 7465 6e63 6528  nes_to_sentence(
+00004b10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004b20: 2020 2020 2020 2020 206e 6578 745f 7365           next_se
+00004b30: 6e74 656e 6365 2c0a 2020 2020 2020 2020  ntence,.        
+00004b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004b50: 776f 7264 5f6c 6576 656c 5f74 6167 5f63  word_level_tag_c
+00004b60: 6f6c 756d 6e73 3d73 656c 662e 776f 7264  olumns=self.word
+00004b70: 5f6c 6576 656c 5f74 6167 5f63 6f6c 756d  _level_tag_colum
+00004b80: 6e73 2c0a 2020 2020 2020 2020 2020 2020  ns,.            
+00004b90: 2020 2020 2020 2020 2020 2020 7370 616e              span
+00004ba0: 5f6c 6576 656c 5f74 6167 5f63 6f6c 756d  _level_tag_colum
+00004bb0: 6e73 3d73 656c 662e 7370 616e 5f6c 6576  ns=self.span_lev
+00004bc0: 656c 5f74 6167 5f63 6f6c 756d 6e73 2c0a  el_tag_columns,.
+00004bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004be0: 2020 2020 290a 0a20 2020 2020 2020 2020      )..         
+00004bf0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+00004c00: 7420 7365 6e74 656e 6365 3a0a 2020 2020  t sentence:.    
+00004c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004c20: 2020 2020 636f 6e74 696e 7565 0a0a 2020      continue..  
+00004c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004c40: 2020 2320 736b 6970 2062 616e 6e65 6420    # skip banned 
+00004c50: 7365 6e74 656e 6365 730a 2020 2020 2020  sentences.      
+00004c60: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00004c70: 2073 656c 662e 6261 6e6e 6564 5f73 656e   self.banned_sen
+00004c80: 7465 6e63 6573 2069 7320 6e6f 7420 4e6f  tences is not No
+00004c90: 6e65 2061 6e64 2061 6e79 280a 2020 2020  ne and any(.    
+00004ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004cb0: 2020 2020 6420 696e 2073 656e 7465 6e63      d in sentenc
+00004cc0: 652e 746f 5f70 6c61 696e 5f73 7472 696e  e.to_plain_strin
+00004cd0: 6728 2920 666f 7220 6420 696e 2073 656c  g() for d in sel
+00004ce0: 662e 6261 6e6e 6564 5f73 656e 7465 6e63  f.banned_sentenc
+00004cf0: 6573 0a20 2020 2020 2020 2020 2020 2020  es.             
+00004d00: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
+00004d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004d20: 2020 636f 6e74 696e 7565 0a0a 2020 2020    continue..    
+00004d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004d40: 2320 7365 7420 7072 6576 696f 7573 2061  # set previous a
+00004d50: 6e64 206e 6578 7420 7365 6e74 656e 6365  nd next sentence
+00004d60: 2066 6f72 2063 6f6e 7465 7874 0a20 2020   for context.   
+00004d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004d80: 2073 656e 7465 6e63 652e 5f70 7265 7669   sentence._previ
+00004d90: 6f75 735f 7365 6e74 656e 6365 203d 2070  ous_sentence = p
+00004da0: 7265 7669 6f75 735f 7365 6e74 656e 6365  revious_sentence
+00004db0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004dc0: 2020 2020 2073 656e 7465 6e63 652e 5f6e       sentence._n
+00004dd0: 6578 745f 7365 6e74 656e 6365 203d 204e  ext_sentence = N
+00004de0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+00004df0: 2020 2020 2020 2020 6966 2070 7265 7669          if previ
+00004e00: 6f75 735f 7365 6e74 656e 6365 3a0a 2020  ous_sentence:.  
+00004e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004e20: 2020 2020 2020 7072 6576 696f 7573 5f73        previous_s
+00004e30: 656e 7465 6e63 652e 5f6e 6578 745f 7365  entence._next_se
+00004e40: 6e74 656e 6365 203d 2073 656e 7465 6e63  ntence = sentenc
+00004e50: 650a 0a20 2020 2020 2020 2020 2020 2020  e..             
+00004e60: 2020 2020 2020 2023 2061 7070 656e 6420         # append 
+00004e70: 7061 7273 6564 2073 656e 7465 6e63 6520  parsed sentence 
+00004e80: 746f 206c 6973 7420 696e 206d 656d 6f72  to list in memor
+00004e90: 790a 2020 2020 2020 2020 2020 2020 2020  y.              
+00004ea0: 2020 2020 2020 7365 6c66 2e73 656e 7465        self.sente
+00004eb0: 6e63 6573 2e61 7070 656e 6428 7365 6e74  nces.append(sent
+00004ec0: 656e 6365 290a 0a20 2020 2020 2020 2020  ence)..         
+00004ed0: 2020 2020 2020 2020 2020 2070 7265 7669             previ
+00004ee0: 6f75 735f 7365 6e74 656e 6365 203d 2073  ous_sentence = s
+00004ef0: 656e 7465 6e63 650a 0a20 2020 2020 2020  entence..       
+00004f00: 2020 2020 2020 2020 2073 656c 662e 746f           self.to
+00004f10: 7461 6c5f 7365 6e74 656e 6365 5f63 6f75  tal_sentence_cou
+00004f20: 6e74 203d 206c 656e 2873 656c 662e 7365  nt = len(self.se
+00004f30: 6e74 656e 6365 7329 0a0a 2020 2020 2020  ntences)..      
+00004f40: 2020 2020 2020 2320 6f70 7469 6f6e 2032        # option 2
+00004f50: 3a20 6b65 6570 2073 6f75 7263 6520 6461  : keep source da
+00004f60: 7461 2069 6e20 6d65 6d6f 7279 0a20 2020  ta in memory.   
+00004f70: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00004f80: 7365 6c66 2e69 6e5f 6d65 6d6f 7279 3a0a  self.in_memory:.
+00004f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004fa0: 7365 6c66 2e73 656e 7465 6e63 6573 5f72  self.sentences_r
+00004fb0: 6177 3a20 4c69 7374 5b4c 6973 745b 7374  aw: List[List[st
+00004fc0: 725d 5d20 3d20 5b5d 0a0a 2020 2020 2020  r]] = []..      
+00004fd0: 2020 2020 2020 2020 2020 7768 696c 6520            while 
+00004fe0: 5472 7565 3a0a 2020 2020 2020 2020 2020  True:.          
+00004ff0: 2020 2020 2020 2020 2020 2320 7265 6164            # read
+00005000: 206c 696e 6573 2066 6f72 206e 6578 7420   lines for next 
+00005010: 7365 6e74 656e 6365 2c20 6275 7420 646f  sentence, but do
+00005020: 6e27 7420 7061 7273 650a 2020 2020 2020  n't parse.      
+00005030: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00005040: 6e74 656e 6365 5f72 6177 203d 2073 656c  ntence_raw = sel
+00005050: 662e 5f72 6561 645f 6e65 7874 5f73 656e  f._read_next_sen
+00005060: 7465 6e63 6528 6669 6c65 290a 0a20 2020  tence(file)..   
+00005070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005080: 2023 2071 7569 7420 6966 206c 6173 7420   # quit if last 
+00005090: 7365 6e74 656e 6365 2072 6561 6368 6564  sentence reached
+000050a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000050b0: 2020 2020 2069 6620 6c65 6e28 7365 6e74       if len(sent
+000050c0: 656e 6365 5f72 6177 2920 3d3d 2030 3a0a  ence_raw) == 0:.
+000050d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000050e0: 2020 2020 2020 2020 6272 6561 6b0a 0a20          break.. 
+000050f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005100: 2020 2023 2061 7070 656e 6420 7261 7720     # append raw 
+00005110: 6c69 6e65 7320 666f 7220 6561 6368 2073  lines for each s
+00005120: 656e 7465 6e63 650a 2020 2020 2020 2020  entence.        
+00005130: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00005140: 2e73 656e 7465 6e63 6573 5f72 6177 2e61  .sentences_raw.a
+00005150: 7070 656e 6428 7365 6e74 656e 6365 5f72  ppend(sentence_r
+00005160: 6177 290a 0a20 2020 2020 2020 2020 2020  aw)..           
+00005170: 2020 2020 2073 656c 662e 746f 7461 6c5f       self.total_
+00005180: 7365 6e74 656e 6365 5f63 6f75 6e74 203d  sentence_count =
+00005190: 206c 656e 2873 656c 662e 7365 6e74 656e   len(self.senten
+000051a0: 6365 735f 7261 7729 0a0a 2020 2020 6465  ces_raw)..    de
+000051b0: 6620 5f69 6465 6e74 6966 795f 7370 616e  f _identify_span
+000051c0: 5f63 6f6c 756d 6e73 2873 656c 662c 2063  _columns(self, c
+000051d0: 6f6c 756d 6e5f 6e61 6d65 5f6d 6170 2c20  olumn_name_map, 
+000051e0: 736b 6970 5f66 6972 7374 5f6c 696e 6529  skip_first_line)
+000051f0: 3a0a 2020 2020 2020 2020 2320 7765 206d  :.        # we m
+00005200: 616b 6520 6120 6469 7374 696e 6374 696f  ake a distinctio
+00005210: 6e20 6265 7477 6565 6e20 776f 7264 2d6c  n between word-l
+00005220: 6576 656c 2074 6167 7320 616e 6420 7370  evel tags and sp
+00005230: 616e 2d6c 6576 656c 2074 6167 730a 2020  an-level tags.  
+00005240: 2020 2020 2020 7365 6c66 2e73 7061 6e5f        self.span_
+00005250: 6c65 7665 6c5f 7461 675f 636f 6c75 6d6e  level_tag_column
+00005260: 7320 3d20 7b7d 0a20 2020 2020 2020 2073  s = {}.        s
+00005270: 656c 662e 776f 7264 5f6c 6576 656c 5f74  elf.word_level_t
+00005280: 6167 5f63 6f6c 756d 6e73 203d 207b 7365  ag_columns = {se
+00005290: 6c66 2e74 6578 745f 636f 6c75 6d6e 3a20  lf.text_column: 
+000052a0: 2274 6578 7422 7d0a 2020 2020 2020 2020  "text"}.        
+000052b0: 2320 7265 6164 2066 6972 7374 2073 656e  # read first sen
+000052c0: 7465 6e63 6520 746f 2064 6574 6572 6d69  tence to determi
+000052d0: 6e65 2077 6869 6368 2063 6f6c 756d 6e73  ne which columns
+000052e0: 2061 7265 2073 7061 6e2d 6c61 6265 6c73   are span-labels
+000052f0: 0a20 2020 2020 2020 2077 6974 6820 6f70  .        with op
+00005300: 656e 2873 7472 2873 656c 662e 7061 7468  en(str(self.path
+00005310: 5f74 6f5f 636f 6c75 6d6e 5f66 696c 6529  _to_column_file)
+00005320: 2c20 656e 636f 6469 6e67 3d73 656c 662e  , encoding=self.
+00005330: 656e 636f 6469 6e67 2920 6173 2066 696c  encoding) as fil
+00005340: 653a 0a20 2020 2020 2020 2020 2020 2023  e:.            #
+00005350: 2073 6b69 7020 6669 7273 7420 6c69 6e65   skip first line
+00005360: 2069 6620 746f 2073 656c 6563 7465 640a   if to selected.
+00005370: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+00005380: 6b69 705f 6669 7273 745f 6c69 6e65 3a0a  kip_first_line:.
+00005390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000053a0: 6669 6c65 2e72 6561 646c 696e 6528 290a  file.readline().
+000053b0: 0a20 2020 2020 2020 2020 2020 2023 2063  .            # c
+000053c0: 6865 636b 2074 6865 2066 6972 7374 2035  heck the first 5
+000053d0: 2073 656e 7465 6e63 6573 0a20 2020 2020   sentences.     
+000053e0: 2020 2020 2020 2070 726f 6265 203d 205b         probe = [
+000053f0: 5d0a 2020 2020 2020 2020 2020 2020 666f  ].            fo
+00005400: 7220 5f69 2069 6e20 7261 6e67 6528 3529  r _i in range(5)
+00005410: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00005420: 2020 6e65 7874 5f73 656e 7465 6e63 6520    next_sentence 
+00005430: 3d20 7365 6c66 2e5f 7265 6164 5f6e 6578  = self._read_nex
+00005440: 745f 7365 6e74 656e 6365 2866 696c 6529  t_sentence(file)
+00005450: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005460: 2069 6620 6c65 6e28 6e65 7874 5f73 656e   if len(next_sen
+00005470: 7465 6e63 6529 203d 3d20 303a 0a20 2020  tence) == 0:.   
+00005480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005490: 2062 7265 616b 0a0a 2020 2020 2020 2020   break..        
+000054a0: 2020 2020 2020 2020 7365 6e74 656e 6365          sentence
+000054b0: 203d 2073 656c 662e 5f63 6f6e 7665 7274   = self._convert
+000054c0: 5f6c 696e 6573 5f74 6f5f 7365 6e74 656e  _lines_to_senten
+000054d0: 6365 286e 6578 745f 7365 6e74 656e 6365  ce(next_sentence
+000054e0: 2c20 776f 7264 5f6c 6576 656c 5f74 6167  , word_level_tag
+000054f0: 5f63 6f6c 756d 6e73 3d63 6f6c 756d 6e5f  _columns=column_
+00005500: 6e61 6d65 5f6d 6170 290a 2020 2020 2020  name_map).      
+00005510: 2020 2020 2020 2020 2020 6966 2073 656e            if sen
+00005520: 7465 6e63 653a 0a20 2020 2020 2020 2020  tence:.         
+00005530: 2020 2020 2020 2020 2020 2070 726f 6265             probe
+00005540: 2e61 7070 656e 6428 7365 6e74 656e 6365  .append(sentence
+00005550: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00005560: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00005570: 2020 2020 2020 2020 2020 2020 6272 6561              brea
+00005580: 6b0a 0a20 2020 2020 2020 2020 2020 2023  k..            #
+00005590: 2067 6f20 7468 726f 7567 6820 616c 6c20   go through all 
+000055a0: 616e 6e6f 7461 7469 6f6e 7320 616e 6420  annotations and 
+000055b0: 6964 656e 7469 6679 2077 6f72 642d 2061  identify word- a
+000055c0: 6e64 2073 7061 6e2d 6c65 7665 6c20 616e  nd span-level an
+000055d0: 6e6f 7461 7469 6f6e 730a 2020 2020 2020  notations.      
+000055e0: 2020 2020 2020 2320 2d20 6966 2061 2063        # - if a c
+000055f0: 6f6c 756d 6e20 6861 7320 6174 206c 6561  olumn has at lea
+00005600: 7374 206f 6e65 2042 4945 5320 7765 206b  st one BIES we k
+00005610: 6e6f 7720 6974 2773 2061 2053 7061 6e20  now it's a Span 
+00005620: 6c61 6265 6c0a 2020 2020 2020 2020 2020  label.          
+00005630: 2020 2320 2d20 6966 2061 2063 6f6c 756d    # - if a colum
+00005640: 6e20 6861 7320 6174 206c 6561 7374 206f  n has at least o
+00005650: 6e65 2074 6167 2074 6861 7420 6973 206e  ne tag that is n
+00005660: 6f74 2042 494f 4553 2c20 7765 206b 6e6f  ot BIOES, we kno
+00005670: 7720 6974 2773 2061 2054 6f6b 656e 206c  w it's a Token l
+00005680: 6162 656c 0a20 2020 2020 2020 2020 2020  abel.           
+00005690: 2023 202d 2070 726f 626c 656d 2063 6173   # - problem cas
+000056a0: 6573 2061 7265 2063 6f6c 756d 6e73 2066  es are columns f
+000056b0: 6f72 2077 6869 6368 2077 6520 7365 6520  or which we see 
+000056c0: 6f6e 6c79 204f 202d 2069 6e20 7468 6973  only O - in this
+000056d0: 2063 6173 6520 7765 2064 6566 6175 6c74   case we default
+000056e0: 2074 6f20 5370 616e 0a20 2020 2020 2020   to Span.       
+000056f0: 2020 2020 2066 6f72 2073 656e 7465 6e63       for sentenc
+00005700: 6520 696e 2070 726f 6265 3a0a 2020 2020  e in probe:.    
+00005710: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00005720: 636f 6c75 6d6e 2069 6e20 636f 6c75 6d6e  column in column
+00005730: 5f6e 616d 655f 6d61 703a 0a20 2020 2020  _name_map:.     
+00005740: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00005750: 2073 6b69 7020 6173 7369 676e 6564 2063   skip assigned c
+00005760: 6f6c 756d 6e73 0a20 2020 2020 2020 2020  olumns.         
+00005770: 2020 2020 2020 2020 2020 2069 6620 280a             if (.
+00005780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005790: 2020 2020 2020 2020 636f 6c75 6d6e 2069          column i
+000057a0: 6e20 7365 6c66 2e77 6f72 645f 6c65 7665  n self.word_leve
+000057b0: 6c5f 7461 675f 636f 6c75 6d6e 730a 2020  l_tag_columns.  
+000057c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000057d0: 2020 2020 2020 6f72 2063 6f6c 756d 6e20        or column 
+000057e0: 696e 2073 656c 662e 7370 616e 5f6c 6576  in self.span_lev
+000057f0: 656c 5f74 6167 5f63 6f6c 756d 6e73 0a20  el_tag_columns. 
+00005800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005810: 2020 2020 2020 206f 7220 636f 6c75 6d6e         or column
+00005820: 203d 3d20 7365 6c66 2e68 6561 645f 6964   == self.head_id
+00005830: 5f63 6f6c 756d 6e0a 2020 2020 2020 2020  _column.        
+00005840: 2020 2020 2020 2020 2020 2020 293a 0a20              ):. 
+00005850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005860: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
+00005870: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005880: 2020 2020 206c 6179 6572 203d 2063 6f6c       layer = col
+00005890: 756d 6e5f 6e61 6d65 5f6d 6170 5b63 6f6c  umn_name_map[col
+000058a0: 756d 6e5d 0a0a 2020 2020 2020 2020 2020  umn]..          
+000058b0: 2020 2020 2020 2020 2020 2320 7468 6520            # the 
+000058c0: 7370 6163 6520 6166 7465 7220 6b65 7920  space after key 
+000058d0: 6973 2061 6c77 6179 7320 776f 7264 2d6c  is always word-l
+000058e0: 6576 656c 730a 2020 2020 2020 2020 2020  evels.          
+000058f0: 2020 2020 2020 2020 2020 6966 2063 6f6c            if col
+00005900: 756d 6e5f 6e61 6d65 5f6d 6170 5b63 6f6c  umn_name_map[col
+00005910: 756d 6e5d 203d 3d20 7365 6c66 2e53 5041  umn] == self.SPA
+00005920: 4345 5f41 4654 4552 5f4b 4559 3a0a 2020  CE_AFTER_KEY:.  
+00005930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005940: 2020 2020 2020 7365 6c66 2e77 6f72 645f        self.word_
+00005950: 6c65 7665 6c5f 7461 675f 636f 6c75 6d6e  level_tag_column
+00005960: 735b 636f 6c75 6d6e 5d20 3d20 6c61 7965  s[column] = laye
+00005970: 720a 2020 2020 2020 2020 2020 2020 2020  r.              
+00005980: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
+00005990: 7565 0a0a 2020 2020 2020 2020 2020 2020  ue..            
+000059a0: 2020 2020 2020 2020 6966 206c 6179 6572          if layer
+000059b0: 2069 6e20 7365 6c66 2e46 4541 5453 3a0a   in self.FEATS:.
+000059c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000059d0: 2020 2020 2020 2020 7365 6c66 2e77 6f72          self.wor
+000059e0: 645f 6c65 7665 6c5f 7461 675f 636f 6c75  d_level_tag_colu
+000059f0: 6d6e 735b 636f 6c75 6d6e 5d20 3d20 6c61  mns[column] = la
+00005a00: 7965 720a 2020 2020 2020 2020 2020 2020  yer.            
+00005a10: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+00005a20: 696e 7565 0a0a 2020 2020 2020 2020 2020  inue..          
+00005a30: 2020 2020 2020 2020 2020 666f 7220 746f            for to
+00005a40: 6b65 6e20 696e 2073 656e 7465 6e63 653a  ken in sentence:
+00005a50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005a60: 2020 2020 2020 2020 2023 2069 6620 6174           # if at
+00005a70: 206c 6561 7374 206f 6e65 2074 6f6b 656e   least one token
+00005a80: 2068 6173 2061 2042 4945 532c 2077 6520   has a BIES, we 
+00005a90: 6b6e 6f77 2069 7427 7320 6120 7370 616e  know it's a span
+00005aa0: 206c 6162 656c 0a20 2020 2020 2020 2020   label.         
+00005ab0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00005ac0: 6620 746f 6b65 6e2e 6765 745f 6c61 6265  f token.get_labe
+00005ad0: 6c28 6c61 7965 7229 2e76 616c 7565 5b30  l(layer).value[0
+00005ae0: 3a32 5d20 696e 205b 2242 2d22 2c20 2249  :2] in ["B-", "I
+00005af0: 2d22 2c20 2245 2d22 2c20 2253 2d22 5d3a  -", "E-", "S-"]:
+00005b00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005b10: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00005b20: 662e 7370 616e 5f6c 6576 656c 5f74 6167  f.span_level_tag
+00005b30: 5f63 6f6c 756d 6e73 5b63 6f6c 756d 6e5d  _columns[column]
+00005b40: 203d 206c 6179 6572 0a20 2020 2020 2020   = layer.       
+00005b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005b60: 2020 2020 2062 7265 616b 0a0a 2020 2020       break..    
+00005b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005b80: 2020 2020 2320 6966 2061 7420 6c65 6173      # if at leas
+00005b90: 7420 6f6e 6520 746f 6b65 6e20 6861 7320  t one token has 
+00005ba0: 6120 6c61 6265 6c20 6f74 6865 7220 7468  a label other th
+00005bb0: 616e 2042 494f 4553 2c20 7765 206b 6e6f  an BIOES, we kno
+00005bc0: 7720 6974 2773 2061 2074 6f6b 656e 206c  w it's a token l
+00005bd0: 6162 656c 0a20 2020 2020 2020 2020 2020  abel.           
+00005be0: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+00005bf0: 6620 746f 6b65 6e2e 6765 745f 6c61 6265  f token.get_labe
+00005c00: 6c28 6c61 7965 722c 2022 4f22 292e 7661  l(layer, "O").va
+00005c10: 6c75 6520 213d 2022 4f22 3a0a 2020 2020  lue != "O":.    
+00005c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005c30: 2020 2020 2020 2020 7365 6c66 2e77 6f72          self.wor
+00005c40: 645f 6c65 7665 6c5f 7461 675f 636f 6c75  d_level_tag_colu
+00005c50: 6d6e 735b 636f 6c75 6d6e 5d20 3d20 6c61  mns[column] = la
+00005c60: 7965 720a 2020 2020 2020 2020 2020 2020  yer.            
+00005c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005c80: 6272 6561 6b0a 0a20 2020 2020 2020 2020  break..         
+00005c90: 2020 2023 2061 6c6c 2072 656d 6169 6e69     # all remaini
+00005ca0: 6e67 2063 6f6c 756d 6e73 2074 6861 7420  ng columns that 
+00005cb0: 6172 6520 6e6f 7420 776f 7264 2d6c 6576  are not word-lev
+00005cc0: 656c 2061 7265 2073 7061 6e2d 6c65 7665  el are span-leve
+00005cd0: 6c0a 2020 2020 2020 2020 2020 2020 666f  l.            fo
+00005ce0: 7220 636f 6c75 6d6e 2069 6e20 636f 6c75  r column in colu
+00005cf0: 6d6e 5f6e 616d 655f 6d61 703a 0a20 2020  mn_name_map:.   
+00005d00: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00005d10: 636f 6c75 6d6e 206e 6f74 2069 6e20 7365  column not in se
+00005d20: 6c66 2e77 6f72 645f 6c65 7665 6c5f 7461  lf.word_level_ta
+00005d30: 675f 636f 6c75 6d6e 733a 0a20 2020 2020  g_columns:.     
+00005d40: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00005d50: 656c 662e 7370 616e 5f6c 6576 656c 5f74  elf.span_level_t
+00005d60: 6167 5f63 6f6c 756d 6e73 5b63 6f6c 756d  ag_columns[colum
+00005d70: 6e5d 203d 2063 6f6c 756d 6e5f 6e61 6d65  n] = column_name
+00005d80: 5f6d 6170 5b63 6f6c 756d 6e5d 0a0a 2020  _map[column]..  
+00005d90: 2020 2020 2020 2020 2020 666f 7220 636f            for co
+00005da0: 6c75 6d6e 2069 6e20 7365 6c66 2e73 7061  lumn in self.spa
+00005db0: 6e5f 6c65 7665 6c5f 7461 675f 636f 6c75  n_level_tag_colu
+00005dc0: 6d6e 733a 0a20 2020 2020 2020 2020 2020  mns:.           
+00005dd0: 2020 2020 206c 6f67 2e64 6562 7567 2866       log.debug(f
+00005de0: 2243 6f6c 756d 6e20 7b63 6f6c 756d 6e7d  "Column {column}
+00005df0: 2028 7b73 656c 662e 7370 616e 5f6c 6576   ({self.span_lev
+00005e00: 656c 5f74 6167 5f63 6f6c 756d 6e73 5b63  el_tag_columns[c
+00005e10: 6f6c 756d 6e5d 7d29 2069 7320 6120 7370  olumn]}) is a sp
+00005e20: 616e 2d6c 6576 656c 2063 6f6c 756d 6e2e  an-level column.
+00005e30: 2229 0a0a 2020 2020 2020 2020 2020 2020  ")..            
+00005e40: 2320 666f 7220 636f 6c75 6d6e 2069 6e20  # for column in 
+00005e50: 7365 6c66 2e77 6f72 645f 6c65 7665 6c5f  self.word_level_
+00005e60: 7461 675f 636f 6c75 6d6e 733a 0a20 2020  tag_columns:.   
+00005e70: 2020 2020 2020 2020 2023 2020 2020 206c           #     l
+00005e80: 6f67 2e69 6e66 6f28 6622 436f 6c75 6d6e  og.info(f"Column
+00005e90: 207b 636f 6c75 6d6e 7d20 287b 7365 6c66   {column} ({self
+00005ea0: 2e77 6f72 645f 6c65 7665 6c5f 7461 675f  .word_level_tag_
+00005eb0: 636f 6c75 6d6e 735b 636f 6c75 6d6e 5d7d  columns[column]}
+00005ec0: 2920 6973 2061 2077 6f72 642d 6c65 7665  ) is a word-leve
+00005ed0: 6c20 636f 6c75 6d6e 2e22 290a 0a20 2020  l column.")..   
+00005ee0: 2064 6566 205f 7265 6164 5f6e 6578 745f   def _read_next_
+00005ef0: 7365 6e74 656e 6365 2873 656c 662c 2066  sentence(self, f
+00005f00: 696c 6529 3a0a 2020 2020 2020 2020 6c69  ile):.        li
+00005f10: 6e65 7320 3d20 5b5d 0a20 2020 2020 2020  nes = [].       
+00005f20: 206c 696e 6520 3d20 6669 6c65 2e72 6561   line = file.rea
+00005f30: 646c 696e 6528 290a 2020 2020 2020 2020  dline().        
+00005f40: 7768 696c 6520 6c69 6e65 3a0a 2020 2020  while line:.    
+00005f50: 2020 2020 2020 2020 6966 206e 6f74 206c          if not l
+00005f60: 696e 652e 6973 7370 6163 6528 293a 0a20  ine.isspace():. 
+00005f70: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+00005f80: 696e 6573 2e61 7070 656e 6428 6c69 6e65  ines.append(line
+00005f90: 290a 0a20 2020 2020 2020 2020 2020 2023  )..            #
+00005fa0: 2069 6620 7365 6e74 656e 6365 2065 6e64   if sentence end
+00005fb0: 732c 2062 7265 616b 0a20 2020 2020 2020  s, break.       
+00005fc0: 2020 2020 2069 6620 6c65 6e28 6c69 6e65       if len(line
+00005fd0: 7329 203e 2030 2061 6e64 2073 656c 662e  s) > 0 and self.
+00005fe0: 5f5f 6c69 6e65 5f63 6f6d 706c 6574 6573  __line_completes
+00005ff0: 5f73 656e 7465 6e63 6528 6c69 6e65 293a  _sentence(line):
+00006000: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006010: 2062 7265 616b 0a0a 2020 2020 2020 2020   break..        
+00006020: 2020 2020 6c69 6e65 203d 2066 696c 652e      line = file.
+00006030: 7265 6164 6c69 6e65 2829 0a20 2020 2020  readline().     
+00006040: 2020 2072 6574 7572 6e20 6c69 6e65 730a     return lines.
+00006050: 0a20 2020 2064 6566 205f 636f 6e76 6572  .    def _conver
+00006060: 745f 6c69 6e65 735f 746f 5f73 656e 7465  t_lines_to_sente
+00006070: 6e63 6528 0a20 2020 2020 2020 2073 656c  nce(.        sel
+00006080: 662c 206c 696e 6573 2c20 776f 7264 5f6c  f, lines, word_l
+00006090: 6576 656c 5f74 6167 5f63 6f6c 756d 6e73  evel_tag_columns
+000060a0: 3a20 4469 6374 5b69 6e74 2c20 7374 725d  : Dict[int, str]
+000060b0: 2c20 7370 616e 5f6c 6576 656c 5f74 6167  , span_level_tag
+000060c0: 5f63 6f6c 756d 6e73 3a20 4f70 7469 6f6e  _columns: Option
+000060d0: 616c 5b44 6963 745b 696e 742c 2073 7472  al[Dict[int, str
+000060e0: 5d5d 203d 204e 6f6e 650a 2020 2020 293a  ]] = None.    ):
+000060f0: 0a20 2020 2020 2020 2074 6f6b 656e 3a20  .        token: 
+00006100: 4f70 7469 6f6e 616c 5b54 6f6b 656e 5d20  Optional[Token] 
+00006110: 3d20 4e6f 6e65 0a20 2020 2020 2020 2074  = None.        t
+00006120: 6f6b 656e 733a 204c 6973 745b 546f 6b65  okens: List[Toke
+00006130: 6e5d 203d 205b 5d0a 2020 2020 2020 2020  n] = [].        
+00006140: 6669 6c74 6572 6564 5f6c 696e 6573 203d  filtered_lines =
+00006150: 205b 5d0a 2020 2020 2020 2020 636f 6d6d   [].        comm
+00006160: 656e 7473 203d 205b 5d0a 2020 2020 2020  ents = [].      
+00006170: 2020 666f 7220 6c69 6e65 2069 6e20 6c69    for line in li
+00006180: 6e65 733a 0a20 2020 2020 2020 2020 2020  nes:.           
+00006190: 2023 2070 6172 7365 2063 6f6d 6d65 6e74   # parse comment
+000061a0: 7320 6966 2070 6f73 7369 626c 650a 2020  s if possible.  
+000061b0: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
+000061c0: 662e 636f 6d6d 656e 745f 7379 6d62 6f6c  f.comment_symbol
+000061d0: 2069 7320 6e6f 7420 4e6f 6e65 2061 6e64   is not None and
+000061e0: 206c 696e 652e 7374 6172 7473 7769 7468   line.startswith
+000061f0: 2873 656c 662e 636f 6d6d 656e 745f 7379  (self.comment_sy
+00006200: 6d62 6f6c 293a 0a20 2020 2020 2020 2020  mbol):.         
+00006210: 2020 2020 2020 2063 6f6d 6d65 6e74 732e         comments.
+00006220: 6170 7065 6e64 286c 696e 6529 0a20 2020  append(line).   
+00006230: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+00006240: 7469 6e75 650a 0a20 2020 2020 2020 2020  tinue..         
+00006250: 2020 2066 696c 7465 7265 645f 6c69 6e65     filtered_line
+00006260: 732e 6170 7065 6e64 286c 696e 6529 0a0a  s.append(line)..
+00006270: 2020 2020 2020 2020 2020 2020 2320 6f74              # ot
+00006280: 6865 7277 6973 652c 2074 6869 7320 6c69  herwise, this li
+00006290: 6e65 2069 7320 6120 746f 6b65 6e2e 2070  ne is a token. p
+000062a0: 6172 7365 2061 6e64 2061 6464 2074 6f20  arse and add to 
+000062b0: 7365 6e74 656e 6365 0a20 2020 2020 2020  sentence.       
+000062c0: 2020 2020 2074 6f6b 656e 203d 2073 656c       token = sel
+000062d0: 662e 5f70 6172 7365 5f74 6f6b 656e 286c  f._parse_token(l
+000062e0: 696e 652c 2077 6f72 645f 6c65 7665 6c5f  ine, word_level_
+000062f0: 7461 675f 636f 6c75 6d6e 732c 2074 6f6b  tag_columns, tok
+00006300: 656e 290a 2020 2020 2020 2020 2020 2020  en).            
+00006310: 746f 6b65 6e73 2e61 7070 656e 6428 746f  tokens.append(to
+00006320: 6b65 6e29 0a20 2020 2020 2020 2073 656e  ken).        sen
+00006330: 7465 6e63 653a 2053 656e 7465 6e63 6520  tence: Sentence 
+00006340: 3d20 5365 6e74 656e 6365 2874 6578 743d  = Sentence(text=
+00006350: 746f 6b65 6e73 290a 0a20 2020 2020 2020  tokens)..       
+00006360: 2023 2063 6865 636b 2069 6620 7468 6973   # check if this
+00006370: 2073 656e 7465 6e63 6520 6973 2061 2064   sentence is a d
+00006380: 6f63 756d 656e 7420 626f 756e 6461 7279  ocument boundary
+00006390: 0a20 2020 2020 2020 2069 6620 7365 6e74  .        if sent
+000063a0: 656e 6365 2e74 6f5f 6f72 6967 696e 616c  ence.to_original
+000063b0: 5f74 6578 7428 2920 3d3d 2073 656c 662e  _text() == self.
+000063c0: 646f 6375 6d65 6e74 5f73 6570 6172 6174  document_separat
+000063d0: 6f72 5f74 6f6b 656e 3a0a 2020 2020 2020  or_token:.      
+000063e0: 2020 2020 2020 7365 6e74 656e 6365 2e69        sentence.i
+000063f0: 735f 646f 6375 6d65 6e74 5f62 6f75 6e64  s_document_bound
+00006400: 6172 7920 3d20 5472 7565 0a0a 2020 2020  ary = True..    
+00006410: 2020 2020 2320 6164 6420 7370 616e 206c      # add span l
+00006420: 6162 656c 730a 2020 2020 2020 2020 6966  abels.        if
+00006430: 2073 7061 6e5f 6c65 7665 6c5f 7461 675f   span_level_tag_
+00006440: 636f 6c75 6d6e 733a 0a20 2020 2020 2020  columns:.       
+00006450: 2020 2020 2066 6f72 2073 7061 6e5f 636f       for span_co
+00006460: 6c75 6d6e 2069 6e20 7370 616e 5f6c 6576  lumn in span_lev
+00006470: 656c 5f74 6167 5f63 6f6c 756d 6e73 3a0a  el_tag_columns:.
+00006480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006490: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+000064a0: 2020 2020 2020 2020 2062 696f 6573 5f74           bioes_t
+000064b0: 6167 7320 3d20 5b73 656c 662e 636f 6c75  ags = [self.colu
+000064c0: 6d6e 5f64 656c 696d 6974 6572 2e73 706c  mn_delimiter.spl
+000064d0: 6974 286c 696e 652e 7273 7472 6970 2829  it(line.rstrip()
+000064e0: 295b 7370 616e 5f63 6f6c 756d 6e5d 2066  )[span_column] f
+000064f0: 6f72 206c 696e 6520 696e 2066 696c 7465  or line in filte
+00006500: 7265 645f 6c69 6e65 735d 0a0a 2020 2020  red_lines]..    
+00006510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006520: 2320 6469 7363 6172 6420 7461 6773 2066  # discard tags f
+00006530: 726f 6d20 746f 6b65 6e73 2074 6861 7420  rom tokens that 
+00006540: 6172 6520 6e6f 7420 6164 6465 6420 746f  are not added to
+00006550: 2074 6865 2073 656e 7465 6e63 650a 2020   the sentence.  
+00006560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006570: 2020 6269 6f65 735f 7461 6773 203d 205b    bioes_tags = [
+00006580: 7461 6720 666f 7220 7461 672c 2074 6f6b  tag for tag, tok
+00006590: 656e 2069 6e20 7a69 7028 6269 6f65 735f  en in zip(bioes_
+000065a0: 7461 6773 2c20 746f 6b65 6e73 2920 6966  tags, tokens) if
+000065b0: 2074 6f6b 656e 2e5f 696e 7465 726e 616c   token._internal
+000065c0: 5f69 6e64 6578 2069 7320 6e6f 7420 4e6f  _index is not No
+000065d0: 6e65 5d0a 2020 2020 2020 2020 2020 2020  ne].            
+000065e0: 2020 2020 2020 2020 7072 6564 6963 7465          predicte
+000065f0: 645f 7370 616e 7320 3d20 6765 745f 7370  d_spans = get_sp
+00006600: 616e 735f 6672 6f6d 5f62 696f 2862 696f  ans_from_bio(bio
+00006610: 6573 5f74 6167 7329 0a20 2020 2020 2020  es_tags).       
+00006620: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+00006630: 2073 7061 6e5f 696e 6469 6365 732c 2073   span_indices, s
+00006640: 636f 7265 2c20 6c61 6265 6c20 696e 2070  core, label in p
+00006650: 7265 6469 6374 6564 5f73 7061 6e73 3a0a  redicted_spans:.
+00006660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006670: 2020 2020 2020 2020 7370 616e 203d 2073          span = s
+00006680: 656e 7465 6e63 655b 7370 616e 5f69 6e64  entence[span_ind
+00006690: 6963 6573 5b30 5d20 3a20 7370 616e 5f69  ices[0] : span_i
+000066a0: 6e64 6963 6573 5b2d 315d 202b 2031 5d0a  ndices[-1] + 1].
+000066b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000066c0: 2020 2020 2020 2020 7661 6c75 6520 3d20          value = 
+000066d0: 7365 6c66 2e5f 7265 6d61 705f 6c61 6265  self._remap_labe
+000066e0: 6c28 6c61 6265 6c29 0a20 2020 2020 2020  l(label).       
+000066f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006700: 2069 6620 7661 6c75 6520 213d 2022 4f22   if value != "O"
+00006710: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00006720: 2020 2020 2020 2020 2020 2020 2020 7370                sp
+00006730: 616e 2e61 6464 5f6c 6162 656c 2873 7061  an.add_label(spa
+00006740: 6e5f 6c65 7665 6c5f 7461 675f 636f 6c75  n_level_tag_colu
+00006750: 6d6e 735b 7370 616e 5f63 6f6c 756d 6e5d  mns[span_column]
+00006760: 2c20 7661 6c75 653d 7661 6c75 652c 2073  , value=value, s
+00006770: 636f 7265 3d73 636f 7265 290a 2020 2020  core=score).    
+00006780: 2020 2020 2020 2020 2020 2020 6578 6365              exce
+00006790: 7074 2045 7863 6570 7469 6f6e 3a0a 2020  pt Exception:.  
+000067a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000067b0: 2020 7061 7373 0a0a 2020 2020 2020 2020    pass..        
+000067c0: 666f 7220 636f 6d6d 656e 7420 696e 2063  for comment in c
+000067d0: 6f6d 6d65 6e74 733a 0a20 2020 2020 2020  omments:.       
+000067e0: 2020 2020 2023 2070 6172 7365 2072 656c       # parse rel
+000067f0: 6174 696f 6e73 2069 6620 7468 6579 2061  ations if they a
+00006800: 7265 2073 6574 0a20 2020 2020 2020 2020  re set.         
+00006810: 2020 2069 6620 636f 6d6d 656e 742e 7374     if comment.st
+00006820: 6172 7473 7769 7468 2822 2320 7265 6c61  artswith("# rela
+00006830: 7469 6f6e 7320 3d20 2229 3a0a 2020 2020  tions = "):.    
+00006840: 2020 2020 2020 2020 2020 2020 7265 6c61              rela
+00006850: 7469 6f6e 735f 7374 7269 6e67 203d 2063  tions_string = c
+00006860: 6f6d 6d65 6e74 2e73 7472 6970 2829 2e73  omment.strip().s
+00006870: 706c 6974 2822 2320 7265 6c61 7469 6f6e  plit("# relation
+00006880: 7320 3d20 2229 5b31 5d0a 2020 2020 2020  s = ")[1].      
+00006890: 2020 2020 2020 2020 2020 666f 7220 7265            for re
+000068a0: 6c61 7469 6f6e 2069 6e20 7265 6c61 7469  lation in relati
+000068b0: 6f6e 735f 7374 7269 6e67 2e73 706c 6974  ons_string.split
+000068c0: 2822 7c22 293a 0a20 2020 2020 2020 2020  ("|"):.         
+000068d0: 2020 2020 2020 2020 2020 2069 6e64 6963             indic
+000068e0: 6573 203d 2072 656c 6174 696f 6e2e 7370  es = relation.sp
+000068f0: 6c69 7428 223b 2229 0a20 2020 2020 2020  lit(";").       
+00006900: 2020 2020 2020 2020 2020 2020 2068 6561               hea
+00006910: 645f 7374 6172 7420 3d20 696e 7428 696e  d_start = int(in
+00006920: 6469 6365 735b 305d 290a 2020 2020 2020  dices[0]).      
+00006930: 2020 2020 2020 2020 2020 2020 2020 6865                he
+00006940: 6164 5f65 6e64 203d 2069 6e74 2869 6e64  ad_end = int(ind
+00006950: 6963 6573 5b31 5d29 0a20 2020 2020 2020  ices[1]).       
+00006960: 2020 2020 2020 2020 2020 2020 2074 6169               tai
+00006970: 6c5f 7374 6172 7420 3d20 696e 7428 696e  l_start = int(in
+00006980: 6469 6365 735b 325d 290a 2020 2020 2020  dices[2]).      
+00006990: 2020 2020 2020 2020 2020 2020 2020 7461                ta
+000069a0: 696c 5f65 6e64 203d 2069 6e74 2869 6e64  il_end = int(ind
+000069b0: 6963 6573 5b33 5d29 0a20 2020 2020 2020  ices[3]).       
+000069c0: 2020 2020 2020 2020 2020 2020 206c 6162               lab
+000069d0: 656c 203d 2069 6e64 6963 6573 5b34 5d0a  el = indices[4].
+000069e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000069f0: 2020 2020 2320 6865 6164 2061 6e64 2074      # head and t
+00006a00: 6169 6c20 7370 616e 2069 6e64 6963 6573  ail span indices
+00006a10: 2061 7265 2031 2d69 6e64 6578 6564 2061   are 1-indexed a
+00006a20: 6e64 2065 6e64 2069 6e64 6578 2069 7320  nd end index is 
+00006a30: 696e 636c 7573 6976 650a 2020 2020 2020  inclusive.      
+00006a40: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00006a50: 6c61 7469 6f6e 203d 2052 656c 6174 696f  lation = Relatio
+00006a60: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
+00006a70: 2020 2020 2020 2020 2020 2066 6972 7374             first
+00006a80: 3d73 656e 7465 6e63 655b 6865 6164 5f73  =sentence[head_s
+00006a90: 7461 7274 202d 2031 203a 2068 6561 645f  tart - 1 : head_
+00006aa0: 656e 645d 2c20 7365 636f 6e64 3d73 656e  end], second=sen
+00006ab0: 7465 6e63 655b 7461 696c 5f73 7461 7274  tence[tail_start
+00006ac0: 202d 2031 203a 2074 6169 6c5f 656e 645d   - 1 : tail_end]
+00006ad0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006ae0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+00006af0: 2020 2020 2020 2020 2020 2072 656d 6170             remap
+00006b00: 7065 6420 3d20 7365 6c66 2e5f 7265 6d61  ped = self._rema
+00006b10: 705f 6c61 6265 6c28 6c61 6265 6c29 0a20  p_label(label). 
+00006b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006b30: 2020 2069 6620 7265 6d61 7070 6564 2021     if remapped !
+00006b40: 3d20 224f 223a 0a20 2020 2020 2020 2020  = "O":.         
+00006b50: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00006b60: 656c 6174 696f 6e2e 6164 645f 6c61 6265  elation.add_labe
+00006b70: 6c28 7479 7065 6e61 6d65 3d22 7265 6c61  l(typename="rela
+00006b80: 7469 6f6e 222c 2076 616c 7565 3d72 656d  tion", value=rem
+00006b90: 6170 7065 6429 0a0a 2020 2020 2020 2020  apped)..        
+00006ba0: 2020 2020 2320 7061 7273 6520 636f 6d6d      # parse comm
+00006bb0: 656e 7473 2073 7563 6820 6173 2027 2320  ents such as '# 
+00006bc0: 6964 2063 6432 3738 3836 642d 3638 3935  id cd27886d-6895
+00006bd0: 2d34 6430 322d 6138 6466 2d65 3566 6137  -4d02-a8df-e5fa7
+00006be0: 3633 6661 3838 6609 646f 6d61 696e 3d64  63fa88f.domain=d
+00006bf0: 652d 6f72 6361 7327 0a20 2020 2020 2020  e-orcas'.       
+00006c00: 2020 2020 2023 2074 6f20 7365 7420 7468       # to set th
+00006c10: 6520 6d65 7461 6461 7461 2022 646f 6d61  e metadata "doma
+00006c20: 696e 2220 746f 2022 6465 2d6f 7263 6173  in" to "de-orcas
+00006c30: 220a 2020 2020 2020 2020 2020 2020 666f  ".            fo
+00006c40: 7220 636f 6d6d 656e 745f 726f 7720 696e  r comment_row in
+00006c50: 2063 6f6d 6d65 6e74 2e73 706c 6974 2822   comment.split("
+00006c60: 5c74 2229 3a0a 2020 2020 2020 2020 2020  \t"):.          
+00006c70: 2020 2020 2020 6966 2022 3d22 2069 6e20        if "=" in 
+00006c80: 636f 6d6d 656e 745f 726f 773a 0a20 2020  comment_row:.   
+00006c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006ca0: 206b 6579 2c20 7661 6c75 6520 3d20 636f   key, value = co
+00006cb0: 6d6d 656e 745f 726f 772e 7370 6c69 7428  mment_row.split(
+00006cc0: 223d 222c 2031 290a 2020 2020 2020 2020  "=", 1).        
+00006cd0: 2020 2020 2020 2020 2020 2020 7365 6e74              sent
+00006ce0: 656e 6365 2e61 6464 5f6d 6574 6164 6174  ence.add_metadat
+00006cf0: 6128 6b65 792c 2076 616c 7565 290a 0a20  a(key, value).. 
+00006d00: 2020 2020 2020 2069 6620 6c65 6e28 7365         if len(se
+00006d10: 6e74 656e 6365 2920 3e20 303a 0a20 2020  ntence) > 0:.   
+00006d20: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00006d30: 7365 6e74 656e 6365 0a20 2020 2020 2020  sentence.       
+00006d40: 2072 6574 7572 6e20 4e6f 6e65 0a0a 2020   return None..  
+00006d50: 2020 6465 6620 5f70 6172 7365 5f74 6f6b    def _parse_tok
+00006d60: 656e 2873 656c 662c 206c 696e 653a 2073  en(self, line: s
+00006d70: 7472 2c20 636f 6c75 6d6e 5f6e 616d 655f  tr, column_name_
+00006d80: 6d61 703a 2044 6963 745b 696e 742c 2073  map: Dict[int, s
+00006d90: 7472 5d2c 206c 6173 745f 746f 6b65 6e3a  tr], last_token:
+00006da0: 204f 7074 696f 6e61 6c5b 546f 6b65 6e5d   Optional[Token]
+00006db0: 203d 204e 6f6e 6529 202d 3e20 546f 6b65   = None) -> Toke
+00006dc0: 6e3a 0a20 2020 2020 2020 2023 2067 6574  n:.        # get
+00006dd0: 2066 6965 6c64 7320 6672 6f6d 206c 696e   fields from lin
+00006de0: 650a 2020 2020 2020 2020 6669 656c 6473  e.        fields
+00006df0: 3a20 4c69 7374 5b73 7472 5d20 3d20 7365  : List[str] = se
+00006e00: 6c66 2e63 6f6c 756d 6e5f 6465 6c69 6d69  lf.column_delimi
+00006e10: 7465 722e 7370 6c69 7428 6c69 6e65 2e72  ter.split(line.r
+00006e20: 7374 7269 7028 2929 0a20 2020 2020 2020  strip()).       
+00006e30: 2066 6965 6c64 5f63 6f75 6e74 203d 206c   field_count = l
+00006e40: 656e 2866 6965 6c64 7329 0a20 2020 2020  en(fields).     
+00006e50: 2020 2023 2067 6574 2068 6561 645f 6964     # get head_id
+00006e60: 2069 6620 6578 6973 7473 2028 6f6e 6c79   if exists (only
+00006e70: 2069 6e20 6465 7065 6e64 656e 6379 2070   in dependency p
+00006e80: 6172 7365 7329 0a20 2020 2020 2020 2068  arses).        h
+00006e90: 6561 645f 6964 203d 2069 6e74 2866 6965  ead_id = int(fie
+00006ea0: 6c64 735b 7365 6c66 2e68 6561 645f 6964  lds[self.head_id
+00006eb0: 5f63 6f6c 756d 6e5d 2920 6966 2073 656c  _column]) if sel
+00006ec0: 662e 6865 6164 5f69 645f 636f 6c75 6d6e  f.head_id_column
+00006ed0: 2065 6c73 6520 4e6f 6e65 0a0a 2020 2020   else None..    
+00006ee0: 2020 2020 6966 206c 6173 745f 746f 6b65      if last_toke
+00006ef0: 6e20 6973 204e 6f6e 653a 0a20 2020 2020  n is None:.     
+00006f00: 2020 2020 2020 2073 7461 7274 203d 2030         start = 0
+00006f10: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00006f20: 2020 2020 2020 2020 2020 2061 7373 6572             asser
+00006f30: 7420 6c61 7374 5f74 6f6b 656e 2e65 6e64  t last_token.end
+00006f40: 5f70 6f73 6974 696f 6e20 6973 206e 6f74  _position is not
+00006f50: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
+00006f60: 2020 7374 6172 7420 3d20 6c61 7374 5f74    start = last_t
+00006f70: 6f6b 656e 2e65 6e64 5f70 6f73 6974 696f  oken.end_positio
+00006f80: 6e20 2b20 6c61 7374 5f74 6f6b 656e 2e77  n + last_token.w
+00006f90: 6869 7465 7370 6163 655f 6166 7465 720a  hitespace_after.
+00006fa0: 0a20 2020 2020 2020 2023 2069 6e69 7469  .        # initi
+00006fb0: 616c 697a 6520 746f 6b65 6e0a 2020 2020  alize token.    
+00006fc0: 2020 2020 746f 6b65 6e20 3d20 546f 6b65      token = Toke
+00006fd0: 6e28 0a20 2020 2020 2020 2020 2020 2066  n(.            f
+00006fe0: 6965 6c64 735b 7365 6c66 2e74 6578 745f  ields[self.text_
+00006ff0: 636f 6c75 6d6e 5d2c 0a20 2020 2020 2020  column],.       
+00007000: 2020 2020 2068 6561 645f 6964 3d68 6561       head_id=hea
+00007010: 645f 6964 2c0a 2020 2020 2020 2020 2020  d_id,.          
+00007020: 2020 7768 6974 6573 7061 6365 5f61 6674    whitespace_aft
+00007030: 6572 3d73 656c 662e 6465 6661 756c 745f  er=self.default_
+00007040: 7768 6974 6573 7061 6365 5f61 6674 6572  whitespace_after
+00007050: 2c0a 2020 2020 2020 2020 2020 2020 7374  ,.            st
+00007060: 6172 745f 706f 7369 7469 6f6e 3d73 7461  art_position=sta
+00007070: 7274 2c0a 2020 2020 2020 2020 290a 0a20  rt,.        ).. 
+00007080: 2020 2020 2020 2023 2067 6f20 7468 726f         # go thro
+00007090: 7567 6820 616c 6c20 636f 6c75 6d6e 730a  ugh all columns.
+000070a0: 2020 2020 2020 2020 666f 7220 636f 6c75          for colu
+000070b0: 6d6e 2c20 636f 6c75 6d6e 5f74 7970 6520  mn, column_type 
+000070c0: 696e 2063 6f6c 756d 6e5f 6e61 6d65 5f6d  in column_name_m
+000070d0: 6170 2e69 7465 6d73 2829 3a0a 2020 2020  ap.items():.    
+000070e0: 2020 2020 2020 2020 6966 2066 6965 6c64          if field
+000070f0: 5f63 6f75 6e74 203c 3d20 636f 6c75 6d6e  _count <= column
+00007100: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00007110: 2020 636f 6e74 696e 7565 0a0a 2020 2020    continue..    
+00007120: 2020 2020 2020 2020 6966 2063 6f6c 756d          if colum
+00007130: 6e20 3d3d 2073 656c 662e 7465 7874 5f63  n == self.text_c
+00007140: 6f6c 756d 6e3a 0a20 2020 2020 2020 2020  olumn:.         
+00007150: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
+00007160: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00007170: 636f 6c75 6d6e 203d 3d20 7365 6c66 2e68  column == self.h
+00007180: 6561 645f 6964 5f63 6f6c 756d 6e3a 0a20  ead_id_column:. 
+00007190: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+000071a0: 6f6e 7469 6e75 650a 0a20 2020 2020 2020  ontinue..       
+000071b0: 2020 2020 2069 6620 636f 6c75 6d6e 5f74       if column_t
+000071c0: 7970 6520 3d3d 2073 656c 662e 5350 4143  ype == self.SPAC
+000071d0: 455f 4146 5445 525f 4b45 593a 0a20 2020  E_AFTER_KEY:.   
+000071e0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000071f0: 6669 656c 6473 5b63 6f6c 756d 6e5d 203d  fields[column] =
+00007200: 3d20 222d 223a 0a20 2020 2020 2020 2020  = "-":.         
+00007210: 2020 2020 2020 2020 2020 2074 6f6b 656e             token
+00007220: 2e77 6869 7465 7370 6163 655f 6166 7465  .whitespace_afte
+00007230: 7220 3d20 300a 2020 2020 2020 2020 2020  r = 0.          
+00007240: 2020 2020 2020 636f 6e74 696e 7565 0a0a        continue..
+00007250: 2020 2020 2020 2020 2020 2020 2320 2766              # 'f
+00007260: 6561 7473 2720 616e 6420 276d 6973 6327  eats' and 'misc'
+00007270: 2063 6f6c 756d 6e20 7368 6f75 6c64 2062   column should b
+00007280: 6520 7370 6c69 7420 696e 746f 2064 6966  e split into dif
+00007290: 6665 7265 6e74 2066 6965 6c64 730a 2020  ferent fields.  
+000072a0: 2020 2020 2020 2020 2020 6966 2063 6f6c            if col
+000072b0: 756d 6e5f 7479 7065 2069 6e20 7365 6c66  umn_type in self
+000072c0: 2e46 4541 5453 3a0a 2020 2020 2020 2020  .FEATS:.        
+000072d0: 2020 2020 2020 2020 666f 7220 6665 6174          for feat
+000072e0: 7572 6520 696e 2066 6965 6c64 735b 636f  ure in fields[co
+000072f0: 6c75 6d6e 5d2e 7370 6c69 7428 227c 2229  lumn].split("|")
+00007300: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00007310: 2020 2020 2020 2320 7370 6563 6961 6c20        # special 
+00007320: 6861 6e64 6c69 6e67 2066 6f72 2077 6869  handling for whi
+00007330: 7465 7370 6163 6520 6166 7465 720a 2020  tespace after.  
 00007340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007350: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00007360: 2020 2020 2020 7265 6d61 7070 6564 203d        remapped =
-00007370: 2073 656c 662e 5f72 656d 6170 5f6c 6162   self._remap_lab
-00007380: 656c 286c 6162 656c 290a 2020 2020 2020  el(label).      
-00007390: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000073a0: 2072 656d 6170 7065 6420 213d 2022 4f22   remapped != "O"
-000073b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000073c0: 2020 2020 2020 2020 2020 7265 6c61 7469            relati
-000073d0: 6f6e 2e61 6464 5f6c 6162 656c 2874 7970  on.add_label(typ
-000073e0: 656e 616d 653d 2272 656c 6174 696f 6e22  ename="relation"
-000073f0: 2c20 7661 6c75 653d 7265 6d61 7070 6564  , value=remapped
-00007400: 290a 0a20 2020 2020 2020 2020 2020 2023  )..            #
-00007410: 2070 6172 7365 2063 6f6d 6d65 6e74 7320   parse comments 
-00007420: 7375 6368 2061 7320 2723 2069 6420 6364  such as '# id cd
-00007430: 3237 3838 3664 2d36 3839 352d 3464 3032  27886d-6895-4d02
-00007440: 2d61 3864 662d 6535 6661 3736 3366 6138  -a8df-e5fa763fa8
-00007450: 3866 0964 6f6d 6169 6e3d 6465 2d6f 7263  8f.domain=de-orc
-00007460: 6173 270a 2020 2020 2020 2020 2020 2020  as'.            
-00007470: 2320 746f 2073 6574 2074 6865 206d 6574  # to set the met
-00007480: 6164 6174 6120 2264 6f6d 6169 6e22 2074  adata "domain" t
-00007490: 6f20 2264 652d 6f72 6361 7322 0a20 2020  o "de-orcas".   
-000074a0: 2020 2020 2020 2020 2066 6f72 2063 6f6d           for com
-000074b0: 6d65 6e74 5f72 6f77 2069 6e20 636f 6d6d  ment_row in comm
-000074c0: 656e 742e 7370 6c69 7428 225c 7422 293a  ent.split("\t"):
+00007350: 2020 6966 2066 6561 7475 7265 203d 3d20    if feature == 
+00007360: 2253 7061 6365 4166 7465 723d 4e6f 223a  "SpaceAfter=No":
+00007370: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007380: 2020 2020 2020 2020 2074 6f6b 656e 2e77           token.w
+00007390: 6869 7465 7370 6163 655f 6166 7465 7220  hitespace_after 
+000073a0: 3d20 300a 2020 2020 2020 2020 2020 2020  = 0.            
+000073b0: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+000073c0: 696e 7565 0a0a 2020 2020 2020 2020 2020  inue..          
+000073d0: 2020 2020 2020 2020 2020 6966 2022 3d22            if "="
+000073e0: 2069 6e20 6665 6174 7572 653a 0a20 2020   in feature:.   
+000073f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007400: 2020 2020 2023 2061 6464 2065 6163 6820       # add each 
+00007410: 6f74 6865 7220 6665 6174 7572 6520 6173  other feature as
+00007420: 206c 6162 656c 2d76 616c 7565 2070 6169   label-value pai
+00007430: 720a 2020 2020 2020 2020 2020 2020 2020  r.              
+00007440: 2020 2020 2020 2020 2020 6c61 6265 6c5f            label_
+00007450: 6e61 6d65 2c20 6f72 6967 696e 616c 5f6c  name, original_l
+00007460: 6162 656c 5f76 616c 7565 203d 2066 6561  abel_value = fea
+00007470: 7475 7265 2e73 706c 6974 2822 3d22 2c20  ture.split("=", 
+00007480: 3129 0a20 2020 2020 2020 2020 2020 2020  1).             
+00007490: 2020 2020 2020 2020 2020 206c 6162 656c             label
+000074a0: 5f76 616c 7565 203d 2073 656c 662e 5f72  _value = self._r
+000074b0: 656d 6170 5f6c 6162 656c 286f 7269 6769  emap_label(origi
+000074c0: 6e61 6c5f 6c61 6265 6c5f 7661 6c75 6529  nal_label_value)
 000074d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000074e0: 2069 6620 223d 2220 696e 2063 6f6d 6d65   if "=" in comme
-000074f0: 6e74 5f72 6f77 3a0a 2020 2020 2020 2020  nt_row:.        
-00007500: 2020 2020 2020 2020 2020 2020 6b65 792c              key,
-00007510: 2076 616c 7565 203d 2063 6f6d 6d65 6e74   value = comment
-00007520: 5f72 6f77 2e73 706c 6974 2822 3d22 2c20  _row.split("=", 
-00007530: 3129 0a20 2020 2020 2020 2020 2020 2020  1).             
-00007540: 2020 2020 2020 2073 656e 7465 6e63 652e         sentence.
-00007550: 6164 645f 6d65 7461 6461 7461 286b 6579  add_metadata(key
-00007560: 2c20 7661 6c75 6529 0a0a 2020 2020 2020  , value)..      
-00007570: 2020 6966 206c 656e 2873 656e 7465 6e63    if len(sentenc
-00007580: 6529 203e 2030 3a0a 2020 2020 2020 2020  e) > 0:.        
-00007590: 2020 2020 7265 7475 726e 2073 656e 7465      return sente
-000075a0: 6e63 650a 2020 2020 2020 2020 7265 7475  nce.        retu
-000075b0: 726e 204e 6f6e 650a 0a20 2020 2064 6566  rn None..    def
-000075c0: 205f 7061 7273 655f 746f 6b65 6e28 7365   _parse_token(se
-000075d0: 6c66 2c20 6c69 6e65 3a20 7374 722c 2063  lf, line: str, c
-000075e0: 6f6c 756d 6e5f 6e61 6d65 5f6d 6170 3a20  olumn_name_map: 
-000075f0: 4469 6374 5b69 6e74 2c20 7374 725d 2c20  Dict[int, str], 
-00007600: 6c61 7374 5f74 6f6b 656e 3a20 4f70 7469  last_token: Opti
-00007610: 6f6e 616c 5b54 6f6b 656e 5d20 3d20 4e6f  onal[Token] = No
-00007620: 6e65 2920 2d3e 2054 6f6b 656e 3a0a 2020  ne) -> Token:.  
-00007630: 2020 2020 2020 2320 6765 7420 6669 656c        # get fiel
-00007640: 6473 2066 726f 6d20 6c69 6e65 0a20 2020  ds from line.   
-00007650: 2020 2020 2066 6965 6c64 733a 204c 6973       fields: Lis
-00007660: 745b 7374 725d 203d 2073 656c 662e 636f  t[str] = self.co
-00007670: 6c75 6d6e 5f64 656c 696d 6974 6572 2e73  lumn_delimiter.s
-00007680: 706c 6974 286c 696e 652e 7273 7472 6970  plit(line.rstrip
-00007690: 2829 290a 2020 2020 2020 2020 6669 656c  ()).        fiel
-000076a0: 645f 636f 756e 7420 3d20 6c65 6e28 6669  d_count = len(fi
-000076b0: 656c 6473 290a 2020 2020 2020 2020 2320  elds).        # 
-000076c0: 6765 7420 6865 6164 5f69 6420 6966 2065  get head_id if e
-000076d0: 7869 7374 7320 286f 6e6c 7920 696e 2064  xists (only in d
-000076e0: 6570 656e 6465 6e63 7920 7061 7273 6573  ependency parses
-000076f0: 290a 2020 2020 2020 2020 6865 6164 5f69  ).        head_i
-00007700: 6420 3d20 696e 7428 6669 656c 6473 5b73  d = int(fields[s
-00007710: 656c 662e 6865 6164 5f69 645f 636f 6c75  elf.head_id_colu
-00007720: 6d6e 5d29 2069 6620 7365 6c66 2e68 6561  mn]) if self.hea
-00007730: 645f 6964 5f63 6f6c 756d 6e20 656c 7365  d_id_column else
-00007740: 204e 6f6e 650a 0a20 2020 2020 2020 2069   None..        i
-00007750: 6620 6c61 7374 5f74 6f6b 656e 2069 7320  f last_token is 
-00007760: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00007770: 2020 7374 6172 7420 3d20 300a 2020 2020    start = 0.    
-00007780: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00007790: 2020 2020 2020 6173 7365 7274 206c 6173        assert las
-000077a0: 745f 746f 6b65 6e2e 656e 645f 706f 7369  t_token.end_posi
-000077b0: 7469 6f6e 2069 7320 6e6f 7420 4e6f 6e65  tion is not None
-000077c0: 0a20 2020 2020 2020 2020 2020 2073 7461  .            sta
-000077d0: 7274 203d 206c 6173 745f 746f 6b65 6e2e  rt = last_token.
-000077e0: 656e 645f 706f 7369 7469 6f6e 202b 206c  end_position + l
-000077f0: 6173 745f 746f 6b65 6e2e 7768 6974 6573  ast_token.whites
-00007800: 7061 6365 5f61 6674 6572 0a0a 2020 2020  pace_after..    
-00007810: 2020 2020 2320 696e 6974 6961 6c69 7a65      # initialize
-00007820: 2074 6f6b 656e 0a20 2020 2020 2020 2074   token.        t
-00007830: 6f6b 656e 203d 2054 6f6b 656e 280a 2020  oken = Token(.  
-00007840: 2020 2020 2020 2020 2020 6669 656c 6473            fields
-00007850: 5b73 656c 662e 7465 7874 5f63 6f6c 756d  [self.text_colum
-00007860: 6e5d 2c0a 2020 2020 2020 2020 2020 2020  n],.            
-00007870: 6865 6164 5f69 643d 6865 6164 5f69 642c  head_id=head_id,
-00007880: 0a20 2020 2020 2020 2020 2020 2077 6869  .            whi
-00007890: 7465 7370 6163 655f 6166 7465 723d 7365  tespace_after=se
-000078a0: 6c66 2e64 6566 6175 6c74 5f77 6869 7465  lf.default_white
-000078b0: 7370 6163 655f 6166 7465 722c 0a20 2020  space_after,.   
-000078c0: 2020 2020 2020 2020 2073 7461 7274 5f70           start_p
-000078d0: 6f73 6974 696f 6e3d 7374 6172 742c 0a20  osition=start,. 
-000078e0: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-000078f0: 2020 2320 676f 2074 6872 6f75 6768 2061    # go through a
-00007900: 6c6c 2063 6f6c 756d 6e73 0a20 2020 2020  ll columns.     
-00007910: 2020 2066 6f72 2063 6f6c 756d 6e2c 2063     for column, c
-00007920: 6f6c 756d 6e5f 7479 7065 2069 6e20 636f  olumn_type in co
-00007930: 6c75 6d6e 5f6e 616d 655f 6d61 702e 6974  lumn_name_map.it
-00007940: 656d 7328 293a 0a20 2020 2020 2020 2020  ems():.         
-00007950: 2020 2069 6620 6669 656c 645f 636f 756e     if field_coun
-00007960: 7420 3c3d 2063 6f6c 756d 6e3a 0a20 2020  t <= column:.   
-00007970: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
-00007980: 7469 6e75 650a 0a20 2020 2020 2020 2020  tinue..         
-00007990: 2020 2069 6620 636f 6c75 6d6e 203d 3d20     if column == 
-000079a0: 7365 6c66 2e74 6578 745f 636f 6c75 6d6e  self.text_column
-000079b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000079c0: 2020 636f 6e74 696e 7565 0a0a 2020 2020    continue..    
-000079d0: 2020 2020 2020 2020 6966 2063 6f6c 756d          if colum
-000079e0: 6e20 3d3d 2073 656c 662e 6865 6164 5f69  n == self.head_i
-000079f0: 645f 636f 6c75 6d6e 3a0a 2020 2020 2020  d_column:.      
-00007a00: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
-00007a10: 7565 0a0a 2020 2020 2020 2020 2020 2020  ue..            
-00007a20: 6966 2063 6f6c 756d 6e5f 7479 7065 203d  if column_type =
-00007a30: 3d20 7365 6c66 2e53 5041 4345 5f41 4654  = self.SPACE_AFT
-00007a40: 4552 5f4b 4559 3a0a 2020 2020 2020 2020  ER_KEY:.        
-00007a50: 2020 2020 2020 2020 6966 2066 6965 6c64          if field
-00007a60: 735b 636f 6c75 6d6e 5d20 3d3d 2022 2d22  s[column] == "-"
-00007a70: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00007a80: 2020 2020 2020 746f 6b65 6e2e 7768 6974        token.whit
-00007a90: 6573 7061 6365 5f61 6674 6572 203d 2030  espace_after = 0
-00007aa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00007ab0: 2063 6f6e 7469 6e75 650a 0a20 2020 2020   continue..     
-00007ac0: 2020 2020 2020 2023 2027 6665 6174 7327         # 'feats'
-00007ad0: 2061 6e64 2027 6d69 7363 2720 636f 6c75   and 'misc' colu
-00007ae0: 6d6e 2073 686f 756c 6420 6265 2073 706c  mn should be spl
-00007af0: 6974 2069 6e74 6f20 6469 6666 6572 656e  it into differen
-00007b00: 7420 6669 656c 6473 0a20 2020 2020 2020  t fields.       
-00007b10: 2020 2020 2069 6620 636f 6c75 6d6e 5f74       if column_t
-00007b20: 7970 6520 696e 2073 656c 662e 4645 4154  ype in self.FEAT
-00007b30: 533a 0a20 2020 2020 2020 2020 2020 2020  S:.             
-00007b40: 2020 2066 6f72 2066 6561 7475 7265 2069     for feature i
-00007b50: 6e20 6669 656c 6473 5b63 6f6c 756d 6e5d  n fields[column]
-00007b60: 2e73 706c 6974 2822 7c22 293a 0a20 2020  .split("|"):.   
-00007b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007b80: 2023 2073 7065 6369 616c 2068 616e 646c   # special handl
-00007b90: 696e 6720 666f 7220 7768 6974 6573 7061  ing for whitespa
-00007ba0: 6365 2061 6674 6572 0a20 2020 2020 2020  ce after.       
-00007bb0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00007bc0: 6665 6174 7572 6520 3d3d 2022 5370 6163  feature == "Spac
-00007bd0: 6541 6674 6572 3d4e 6f22 3a0a 2020 2020  eAfter=No":.    
-00007be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007bf0: 2020 2020 746f 6b65 6e2e 7768 6974 6573      token.whites
-00007c00: 7061 6365 5f61 6674 6572 203d 2030 0a20  pace_after = 0. 
-00007c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007c20: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
-00007c30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00007c40: 2020 2020 2069 6620 223d 2220 696e 2066       if "=" in f
-00007c50: 6561 7475 7265 3a0a 2020 2020 2020 2020  eature:.        
-00007c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007c70: 2320 6164 6420 6561 6368 206f 7468 6572  # add each other
-00007c80: 2066 6561 7475 7265 2061 7320 6c61 6265   feature as labe
-00007c90: 6c2d 7661 6c75 6520 7061 6972 0a20 2020  l-value pair.   
-00007ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007cb0: 2020 2020 206c 6162 656c 5f6e 616d 652c       label_name,
-00007cc0: 206f 7269 6769 6e61 6c5f 6c61 6265 6c5f   original_label_
-00007cd0: 7661 6c75 6520 3d20 6665 6174 7572 652e  value = feature.
-00007ce0: 7370 6c69 7428 223d 222c 2031 290a 2020  split("=", 1).  
-00007cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007d00: 2020 2020 2020 6c61 6265 6c5f 7661 6c75        label_valu
-00007d10: 6520 3d20 7365 6c66 2e5f 7265 6d61 705f  e = self._remap_
-00007d20: 6c61 6265 6c28 6f72 6967 696e 616c 5f6c  label(original_l
-00007d30: 6162 656c 5f76 616c 7565 290a 2020 2020  abel_value).    
-00007d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007d50: 2020 2020 6966 206c 6162 656c 5f76 616c      if label_val
-00007d60: 7565 2021 3d20 224f 223a 0a20 2020 2020  ue != "O":.     
-00007d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007d80: 2020 2020 2020 2074 6f6b 656e 2e61 6464         token.add
-00007d90: 5f6c 6162 656c 286c 6162 656c 5f6e 616d  _label(label_nam
-00007da0: 652c 206c 6162 656c 5f76 616c 7565 290a  e, label_value).
-00007db0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00007dc0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00007dd0: 2020 2320 6765 7420 7468 6520 7461 736b    # get the task
-00007de0: 206e 616d 6520 2865 2e67 2e20 276e 6572   name (e.g. 'ner
-00007df0: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
-00007e00: 2020 206c 6162 656c 5f6e 616d 6520 3d20     label_name = 
-00007e10: 636f 6c75 6d6e 5f74 7970 650a 2020 2020  column_type.    
-00007e20: 2020 2020 2020 2020 2020 2020 2320 6765              # ge
-00007e30: 7420 7468 6520 6c61 6265 6c20 7661 6c75  t the label valu
-00007e40: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-00007e50: 2020 6c61 6265 6c5f 7661 6c75 6520 3d20    label_value = 
-00007e60: 7365 6c66 2e5f 7265 6d61 705f 6c61 6265  self._remap_labe
-00007e70: 6c28 6669 656c 6473 5b63 6f6c 756d 6e5d  l(fields[column]
-00007e80: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00007e90: 2020 2320 6164 6420 6c61 6265 6c0a 2020    # add label.  
-00007ea0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00007eb0: 206c 6162 656c 5f76 616c 7565 2021 3d20   label_value != 
-00007ec0: 224f 223a 0a20 2020 2020 2020 2020 2020  "O":.           
-00007ed0: 2020 2020 2020 2020 2074 6f6b 656e 2e61           token.a
-00007ee0: 6464 5f6c 6162 656c 286c 6162 656c 5f6e  dd_label(label_n
-00007ef0: 616d 652c 206c 6162 656c 5f76 616c 7565  ame, label_value
-00007f00: 290a 0a20 2020 2020 2020 2072 6574 7572  )..        retur
-00007f10: 6e20 746f 6b65 6e0a 0a20 2020 2064 6566  n token..    def
-00007f20: 205f 7265 6d61 705f 6c61 6265 6c28 7365   _remap_label(se
-00007f30: 6c66 2c20 7461 6729 3a0a 2020 2020 2020  lf, tag):.      
-00007f40: 2020 2320 7265 6d61 7020 7265 6775 6c61    # remap regula
-00007f50: 7220 7461 6720 6e61 6d65 730a 2020 2020  r tag names.    
-00007f60: 2020 2020 6966 2073 656c 662e 6c61 6265      if self.labe
-00007f70: 6c5f 6e61 6d65 5f6d 6170 2061 6e64 2074  l_name_map and t
-00007f80: 6167 2069 6e20 7365 6c66 2e6c 6162 656c  ag in self.label
-00007f90: 5f6e 616d 655f 6d61 703a 0a20 2020 2020  _name_map:.     
-00007fa0: 2020 2020 2020 2074 6167 203d 2073 656c         tag = sel
-00007fb0: 662e 6c61 6265 6c5f 6e61 6d65 5f6d 6170  f.label_name_map
-00007fc0: 5b74 6167 5d20 2023 2066 6f72 2065 7861  [tag]  # for exa
-00007fd0: 6d70 6c65 2c20 7472 616e 7366 6f72 6d69  mple, transformi
-00007fe0: 6e67 2027 5045 5227 2074 6f20 2770 6572  ng 'PER' to 'per
-00007ff0: 736f 6e27 0a20 2020 2020 2020 2072 6574  son'.        ret
-00008000: 7572 6e20 7461 670a 0a20 2020 2064 6566  urn tag..    def
-00008010: 205f 5f6c 696e 655f 636f 6d70 6c65 7465   __line_complete
-00008020: 735f 7365 6e74 656e 6365 2873 656c 662c  s_sentence(self,
-00008030: 206c 696e 653a 2073 7472 2920 2d3e 2062   line: str) -> b
-00008040: 6f6f 6c3a 0a20 2020 2020 2020 2073 656e  ool:.        sen
-00008050: 7465 6e63 655f 636f 6d70 6c65 7465 6420  tence_completed 
-00008060: 3d20 6c69 6e65 2e69 7373 7061 6365 2829  = line.isspace()
-00008070: 206f 7220 6c69 6e65 203d 3d20 2222 0a20   or line == "". 
-00008080: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00008090: 6e74 656e 6365 5f63 6f6d 706c 6574 6564  ntence_completed
-000080a0: 0a0a 2020 2020 6465 6620 6973 5f69 6e5f  ..    def is_in_
-000080b0: 6d65 6d6f 7279 2873 656c 6629 202d 3e20  memory(self) -> 
-000080c0: 626f 6f6c 3a0a 2020 2020 2020 2020 7265  bool:.        re
-000080d0: 7475 726e 2073 656c 662e 696e 5f6d 656d  turn self.in_mem
-000080e0: 6f72 790a 0a20 2020 2064 6566 205f 5f6c  ory..    def __l
-000080f0: 656e 5f5f 2873 656c 6629 202d 3e20 696e  en__(self) -> in
-00008100: 743a 0a20 2020 2020 2020 2072 6574 7572  t:.        retur
-00008110: 6e20 7365 6c66 2e74 6f74 616c 5f73 656e  n self.total_sen
-00008120: 7465 6e63 655f 636f 756e 740a 0a20 2020  tence_count..   
-00008130: 2064 6566 205f 5f67 6574 6974 656d 5f5f   def __getitem__
-00008140: 2873 656c 662c 2069 6e64 6578 3a20 696e  (self, index: in
-00008150: 7420 3d20 3029 202d 3e20 5365 6e74 656e  t = 0) -> Senten
-00008160: 6365 3a0a 2020 2020 2020 2020 2320 6966  ce:.        # if
-00008170: 2069 6e20 6d65 6d6f 7279 2c20 7265 7472   in memory, retr
-00008180: 6965 7665 2070 6172 7365 6420 7365 6e74  ieve parsed sent
-00008190: 656e 6365 0a20 2020 2020 2020 2069 6620  ence.        if 
-000081a0: 7365 6c66 2e69 6e5f 6d65 6d6f 7279 3a0a  self.in_memory:.
-000081b0: 2020 2020 2020 2020 2020 2020 7365 6e74              sent
-000081c0: 656e 6365 203d 2073 656c 662e 7365 6e74  ence = self.sent
-000081d0: 656e 6365 735b 696e 6465 785d 0a0a 2020  ences[index]..  
-000081e0: 2020 2020 2020 2320 656c 7365 2073 6b69        # else ski
-000081f0: 7020 746f 2070 6f73 6974 696f 6e20 696e  p to position in
-00008200: 2066 696c 6520 7768 6572 6520 7365 6e74   file where sent
-00008210: 656e 6365 2062 6567 696e 730a 2020 2020  ence begins.    
-00008220: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00008230: 2020 2020 2020 7365 6e74 656e 6365 203d        sentence =
-00008240: 2073 656c 662e 5f63 6f6e 7665 7274 5f6c   self._convert_l
-00008250: 696e 6573 5f74 6f5f 7365 6e74 656e 6365  ines_to_sentence
-00008260: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00008270: 2020 7365 6c66 2e73 656e 7465 6e63 6573    self.sentences
-00008280: 5f72 6177 5b69 6e64 6578 5d2c 0a20 2020  _raw[index],.   
-00008290: 2020 2020 2020 2020 2020 2020 2077 6f72               wor
-000082a0: 645f 6c65 7665 6c5f 7461 675f 636f 6c75  d_level_tag_colu
-000082b0: 6d6e 733d 7365 6c66 2e77 6f72 645f 6c65  mns=self.word_le
-000082c0: 7665 6c5f 7461 675f 636f 6c75 6d6e 732c  vel_tag_columns,
-000082d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000082e0: 2073 7061 6e5f 6c65 7665 6c5f 7461 675f   span_level_tag_
-000082f0: 636f 6c75 6d6e 733d 7365 6c66 2e73 7061  columns=self.spa
-00008300: 6e5f 6c65 7665 6c5f 7461 675f 636f 6c75  n_level_tag_colu
-00008310: 6d6e 732c 0a20 2020 2020 2020 2020 2020  mns,.           
-00008320: 2029 0a0a 2020 2020 2020 2020 2020 2020   )..            
-00008330: 2320 7365 7420 7365 6e74 656e 6365 2063  # set sentence c
-00008340: 6f6e 7465 7874 2075 7369 6e67 2070 6172  ontext using par
-00008350: 7469 616c 7320 544f 444f 3a20 706f 696e  tials TODO: poin
-00008360: 7465 7220 746f 2064 6174 6173 6574 2069  ter to dataset i
-00008370: 7320 7265 616c 6c79 2069 6e65 6666 6963  s really ineffic
-00008380: 6965 6e74 0a20 2020 2020 2020 2020 2020  ient.           
-00008390: 2073 656e 7465 6e63 652e 5f68 6173 5f63   sentence._has_c
-000083a0: 6f6e 7465 7874 203d 2054 7275 650a 2020  ontext = True.  
-000083b0: 2020 2020 2020 2020 2020 7365 6e74 656e            senten
-000083c0: 6365 2e5f 706f 7369 7469 6f6e 5f69 6e5f  ce._position_in_
-000083d0: 6461 7461 7365 7420 3d20 2873 656c 662c  dataset = (self,
-000083e0: 2069 6e64 6578 290a 0a20 2020 2020 2020   index)..       
-000083f0: 2072 6574 7572 6e20 7365 6e74 656e 6365   return sentence
-00008400: 0a0a 0a63 6c61 7373 204f 4e54 4f4e 4f54  ...class ONTONOT
-00008410: 4553 284d 756c 7469 4669 6c65 436f 6c75  ES(MultiFileColu
-00008420: 6d6e 436f 7270 7573 293a 0a20 2020 2061  mnCorpus):.    a
-00008430: 7263 6869 7665 5f75 726c 203d 2022 6874  rchive_url = "ht
-00008440: 7470 733a 2f2f 6461 7461 2e6d 656e 6465  tps://data.mende
-00008450: 6c65 792e 636f 6d2f 7075 626c 6963 2d66  ley.com/public-f
-00008460: 696c 6573 2f64 6174 6173 6574 732f 7a6d  iles/datasets/zm
-00008470: 7963 7937 7439 6839 2f66 696c 6573 2f62  ycy7t9h9/files/b
-00008480: 3037 3865 3163 342d 6637 6134 2d34 3432  078e1c4-f7a4-442
-00008490: 372d 6265 3766 2d39 3338 3939 3637 3833  7-be7f-938996783
-000084a0: 3165 662f 6669 6c65 5f64 6f77 6e6c 6f61  1ef/file_downloa
-000084b0: 6465 6422 0a0a 2020 2020 6465 6620 5f5f  ded"..    def __
-000084c0: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
-000084d0: 7365 6c66 2c0a 2020 2020 2020 2020 6261  self,.        ba
-000084e0: 7365 5f70 6174 683a 204f 7074 696f 6e61  se_path: Optiona
-000084f0: 6c5b 556e 696f 6e5b 7374 722c 2050 6174  l[Union[str, Pat
-00008500: 685d 5d20 3d20 4e6f 6e65 2c0a 2020 2020  h]] = None,.    
-00008510: 2020 2020 7665 7273 696f 6e3a 2073 7472      version: str
-00008520: 203d 2022 7634 222c 0a20 2020 2020 2020   = "v4",.       
-00008530: 206c 616e 6775 6167 653a 2073 7472 203d   language: str =
-00008540: 2022 656e 676c 6973 6822 2c0a 2020 2020   "english",.    
-00008550: 2020 2020 646f 6d61 696e 3a20 556e 696f      domain: Unio
-00008560: 6e5b 4e6f 6e65 2c20 7374 722c 204c 6973  n[None, str, Lis
-00008570: 745b 7374 725d 2c20 4469 6374 5b73 7472  t[str], Dict[str
-00008580: 2c20 556e 696f 6e5b 4e6f 6e65 2c20 7374  , Union[None, st
-00008590: 722c 204c 6973 745b 7374 725d 5d5d 5d20  r, List[str]]]] 
-000085a0: 3d20 4e6f 6e65 2c0a 2020 2020 2020 2020  = None,.        
-000085b0: 696e 5f6d 656d 6f72 793a 2062 6f6f 6c20  in_memory: bool 
-000085c0: 3d20 5472 7565 2c0a 2020 2020 2020 2020  = True,.        
-000085d0: 2a2a 636f 7270 7573 6172 6773 2c0a 2020  **corpusargs,.  
-000085e0: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-000085f0: 2020 2020 2061 7373 6572 7420 7665 7273       assert vers
-00008600: 696f 6e20 696e 205b 2276 3422 2c20 2276  ion in ["v4", "v
-00008610: 3132 225d 0a20 2020 2020 2020 2069 6620  12"].        if 
-00008620: 7665 7273 696f 6e20 3d3d 2022 7631 3222  version == "v12"
-00008630: 3a0a 2020 2020 2020 2020 2020 2020 6173  :.            as
-00008640: 7365 7274 206c 616e 6775 6167 6520 3d3d  sert language ==
-00008650: 2022 656e 676c 6973 6822 0a20 2020 2020   "english".     
-00008660: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00008670: 2020 2020 2061 7373 6572 7420 6c61 6e67       assert lang
-00008680: 7561 6765 2069 6e20 5b22 656e 676c 6973  uage in ["englis
-00008690: 6822 2c20 2263 6869 6e65 7365 222c 2022  h", "chinese", "
-000086a0: 6172 6162 6963 225d 0a0a 2020 2020 2020  arabic"]..      
-000086b0: 2020 636f 6c75 6d6e 5f66 6f72 6d61 7420    column_format 
-000086c0: 3d20 7b30 3a20 2274 6578 7422 2c20 313a  = {0: "text", 1:
-000086d0: 2022 706f 7322 2c20 323a 2022 6e65 7222   "pos", 2: "ner"
-000086e0: 7d0a 0a20 2020 2020 2020 2070 726f 6365  }..        proce
-000086f0: 7373 6564 5f64 6174 615f 7061 7468 203d  ssed_data_path =
-00008700: 2073 656c 662e 5f65 6e73 7572 655f 6461   self._ensure_da
-00008710: 7461 5f70 726f 6365 7373 6564 2862 6173  ta_processed(bas
-00008720: 655f 7061 7468 2c20 6c61 6e67 7561 6765  e_path, language
-00008730: 2c20 7665 7273 696f 6e29 0a0a 2020 2020  , version)..    
-00008740: 2020 2020 6b77 203d 207b 2276 6572 7369      kw = {"versi
-00008750: 6f6e 223a 2076 6572 7369 6f6e 2c20 226c  on": version, "l
-00008760: 616e 6775 6167 6522 3a20 6c61 6e67 7561  anguage": langua
-00008770: 6765 2c20 2264 6f6d 6169 6e22 3a20 646f  ge, "domain": do
-00008780: 6d61 696e 2c20 2270 726f 6365 7373 6564  main, "processed
-00008790: 5f64 6174 615f 7061 7468 223a 2070 726f  _data_path": pro
-000087a0: 6365 7373 6564 5f64 6174 615f 7061 7468  cessed_data_path
-000087b0: 7d0a 0a20 2020 2020 2020 2064 6576 5f66  }..        dev_f
-000087c0: 696c 6573 203d 206c 6973 7428 7365 6c66  iles = list(self
-000087d0: 2e5f 6765 745f 7072 6f63 6573 7365 645f  ._get_processed_
-000087e0: 6669 6c65 5f70 6174 6873 2873 706c 6974  file_paths(split
-000087f0: 3d22 6465 7665 6c6f 706d 656e 7422 2c20  ="development", 
-00008800: 2a2a 6b77 2929 0a20 2020 2020 2020 2074  **kw)).        t
-00008810: 7261 696e 5f66 696c 6573 203d 206c 6973  rain_files = lis
-00008820: 7428 7365 6c66 2e5f 6765 745f 7072 6f63  t(self._get_proc
-00008830: 6573 7365 645f 6669 6c65 5f70 6174 6873  essed_file_paths
-00008840: 2873 706c 6974 3d22 7472 6169 6e22 2c20  (split="train", 
-00008850: 2a2a 6b77 2929 0a20 2020 2020 2020 2074  **kw)).        t
-00008860: 6573 745f 6669 6c65 7320 3d20 6c69 7374  est_files = list
-00008870: 2873 656c 662e 5f67 6574 5f70 726f 6365  (self._get_proce
-00008880: 7373 6564 5f66 696c 655f 7061 7468 7328  ssed_file_paths(
-00008890: 7370 6c69 743d 2274 6573 7422 2c20 2a2a  split="test", **
-000088a0: 6b77 2929 0a0a 2020 2020 2020 2020 7375  kw))..        su
-000088b0: 7065 7228 292e 5f5f 696e 6974 5f5f 280a  per().__init__(.
-000088c0: 2020 2020 2020 2020 2020 2020 6465 765f              dev_
-000088d0: 6669 6c65 733d 6465 765f 6669 6c65 732c  files=dev_files,
-000088e0: 0a20 2020 2020 2020 2020 2020 2074 7261  .            tra
-000088f0: 696e 5f66 696c 6573 3d74 7261 696e 5f66  in_files=train_f
-00008900: 696c 6573 2c0a 2020 2020 2020 2020 2020  iles,.          
-00008910: 2020 7465 7374 5f66 696c 6573 3d74 6573    test_files=tes
-00008920: 745f 6669 6c65 732c 0a20 2020 2020 2020  t_files,.       
-00008930: 2020 2020 206e 616d 653d 222f 222e 6a6f       name="/".jo
-00008940: 696e 2828 7365 6c66 2e5f 5f63 6c61 7373  in((self.__class
-00008950: 5f5f 2e5f 5f6e 616d 655f 5f2c 206c 616e  __.__name__, lan
-00008960: 6775 6167 652c 2076 6572 7369 6f6e 2929  guage, version))
-00008970: 2c0a 2020 2020 2020 2020 2020 2020 636f  ,.            co
-00008980: 6c75 6d6e 5f66 6f72 6d61 743d 636f 6c75  lumn_format=colu
-00008990: 6d6e 5f66 6f72 6d61 742c 0a20 2020 2020  mn_format,.     
-000089a0: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
-000089b0: 3d69 6e5f 6d65 6d6f 7279 2c0a 2020 2020  =in_memory,.    
-000089c0: 2020 2020 2020 2020 636f 6c75 6d6e 5f64          column_d
-000089d0: 656c 696d 6974 6572 3d22 5c74 222c 0a20  elimiter="\t",. 
-000089e0: 2020 2020 2020 2020 2020 202a 2a63 6f72             **cor
-000089f0: 7075 7361 7267 732c 0a20 2020 2020 2020  pusargs,.       
-00008a00: 2029 0a0a 2020 2020 4063 6c61 7373 6d65   )..    @classme
-00008a10: 7468 6f64 0a20 2020 2064 6566 2067 6574  thod.    def get
-00008a20: 5f61 7661 696c 6162 6c65 5f64 6f6d 6169  _available_domai
-00008a30: 6e73 280a 2020 2020 2020 2020 636c 732c  ns(.        cls,
-00008a40: 0a20 2020 2020 2020 2062 6173 655f 7061  .        base_pa
-00008a50: 7468 3a20 4f70 7469 6f6e 616c 5b55 6e69  th: Optional[Uni
-00008a60: 6f6e 5b73 7472 2c20 5061 7468 5d5d 203d  on[str, Path]] =
-00008a70: 204e 6f6e 652c 0a20 2020 2020 2020 2076   None,.        v
-00008a80: 6572 7369 6f6e 3a20 7374 7220 3d20 2276  ersion: str = "v
-00008a90: 3422 2c0a 2020 2020 2020 2020 6c61 6e67  4",.        lang
-00008aa0: 7561 6765 3a20 7374 7220 3d20 2265 6e67  uage: str = "eng
-00008ab0: 6c69 7368 222c 0a20 2020 2020 2020 2073  lish",.        s
-00008ac0: 706c 6974 3a20 7374 7220 3d20 2274 7261  plit: str = "tra
-00008ad0: 696e 222c 0a20 2020 2029 202d 3e20 4c69  in",.    ) -> Li
-00008ae0: 7374 5b73 7472 5d3a 0a20 2020 2020 2020  st[str]:.       
-00008af0: 2070 726f 6365 7373 6564 5f64 6174 615f   processed_data_
-00008b00: 7061 7468 203d 2063 6c73 2e5f 656e 7375  path = cls._ensu
-00008b10: 7265 5f64 6174 615f 7072 6f63 6573 7365  re_data_processe
-00008b20: 6428 6261 7365 5f70 6174 683d 6261 7365  d(base_path=base
-00008b30: 5f70 6174 682c 206c 616e 6775 6167 653d  _path, language=
-00008b40: 6c61 6e67 7561 6765 2c20 7665 7273 696f  language, versio
-00008b50: 6e3d 7665 7273 696f 6e29 0a0a 2020 2020  n=version)..    
-00008b60: 2020 2020 7072 6f63 6573 7365 645f 7370      processed_sp
-00008b70: 6c69 745f 7061 7468 203d 2070 726f 6365  lit_path = proce
-00008b80: 7373 6564 5f64 6174 615f 7061 7468 202f  ssed_data_path /
-00008b90: 2022 7370 6c69 7473 2220 2f20 7665 7273   "splits" / vers
-00008ba0: 696f 6e20 2f20 6c61 6e67 7561 6765 202f  ion / language /
-00008bb0: 2073 706c 6974 0a0a 2020 2020 2020 2020   split..        
-00008bc0: 7265 7475 726e 205b 646f 6d61 696e 5f70  return [domain_p
-00008bd0: 6174 682e 6e61 6d65 2066 6f72 2064 6f6d  ath.name for dom
-00008be0: 6169 6e5f 7061 7468 2069 6e20 7072 6f63  ain_path in proc
-00008bf0: 6573 7365 645f 7370 6c69 745f 7061 7468  essed_split_path
-00008c00: 2e69 7465 7264 6972 2829 5d0a 0a20 2020  .iterdir()]..   
-00008c10: 2040 636c 6173 736d 6574 686f 640a 2020   @classmethod.  
-00008c20: 2020 6465 6620 5f67 6574 5f70 726f 6365    def _get_proce
-00008c30: 7373 6564 5f66 696c 655f 7061 7468 7328  ssed_file_paths(
-00008c40: 0a20 2020 2020 2020 2063 6c73 2c0a 2020  .        cls,.  
-00008c50: 2020 2020 2020 7072 6f63 6573 7365 645f        processed_
-00008c60: 6461 7461 5f70 6174 683a 2050 6174 682c  data_path: Path,
-00008c70: 0a20 2020 2020 2020 2073 706c 6974 3a20  .        split: 
-00008c80: 7374 7220 3d20 2274 7261 696e 222c 0a20  str = "train",. 
-00008c90: 2020 2020 2020 2076 6572 7369 6f6e 3a20         version: 
-00008ca0: 7374 7220 3d20 2276 3422 2c0a 2020 2020  str = "v4",.    
-00008cb0: 2020 2020 6c61 6e67 7561 6765 3a20 7374      language: st
-00008cc0: 7220 3d20 2265 6e67 6c69 7368 222c 0a20  r = "english",. 
-00008cd0: 2020 2020 2020 2064 6f6d 6169 6e3a 204f         domain: O
-00008ce0: 7074 696f 6e61 6c5b 556e 696f 6e5b 7374  ptional[Union[st
-00008cf0: 722c 204c 6973 745b 7374 725d 2c20 4469  r, List[str], Di
-00008d00: 6374 5b73 7472 2c20 556e 696f 6e5b 4e6f  ct[str, Union[No
-00008d10: 6e65 2c20 7374 722c 204c 6973 745b 7374  ne, str, List[st
-00008d20: 725d 5d5d 5d5d 203d 204e 6f6e 652c 0a20  r]]]]] = None,. 
-00008d30: 2020 2029 202d 3e20 4974 6572 6162 6c65     ) -> Iterable
-00008d40: 5b50 6174 685d 3a0a 2020 2020 2020 2020  [Path]:.        
-00008d50: 7072 6f63 6573 7365 645f 7370 6c69 745f  processed_split_
-00008d60: 7061 7468 203d 2070 726f 6365 7373 6564  path = processed
-00008d70: 5f64 6174 615f 7061 7468 202f 2022 7370  _data_path / "sp
-00008d80: 6c69 7473 2220 2f20 7665 7273 696f 6e20  lits" / version 
-00008d90: 2f20 6c61 6e67 7561 6765 202f 2073 706c  / language / spl
-00008da0: 6974 0a0a 2020 2020 2020 2020 6966 2064  it..        if d
-00008db0: 6f6d 6169 6e20 6973 204e 6f6e 653a 0a20  omain is None:. 
-00008dc0: 2020 2020 2020 2020 2020 2023 2075 7365             # use
-00008dd0: 2061 6c6c 2064 6f6d 6169 6e73 0a20 2020   all domains.   
-00008de0: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
-00008df0: 7072 6f63 6573 7365 645f 7370 6c69 745f  processed_split_
-00008e00: 7061 7468 2e65 7869 7374 7328 292c 2066  path.exists(), f
-00008e10: 2250 726f 6365 7373 6564 2064 6174 6120  "Processed data 
-00008e20: 6e6f 7420 666f 756e 6420 2865 7870 6563  not found (expec
-00008e30: 7465 6420 6174 3a20 7b70 726f 6365 7373  ted at: {process
-00008e40: 6564 5f73 706c 6974 5f70 6174 687d 2922  ed_split_path})"
-00008e50: 0a20 2020 2020 2020 2020 2020 2079 6965  .            yie
-00008e60: 6c64 2066 726f 6d20 736f 7274 6564 2866  ld from sorted(f
-00008e70: 696c 7465 7228 6f73 2e70 6174 682e 6973  ilter(os.path.is
-00008e80: 6669 6c65 2c20 7072 6f63 6573 7365 645f  file, processed_
-00008e90: 7370 6c69 745f 7061 7468 2e72 676c 6f62  split_path.rglob
-00008ea0: 2822 2a22 2929 290a 0a20 2020 2020 2020  ("*")))..       
-00008eb0: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
-00008ec0: 2864 6f6d 6169 6e2c 2073 7472 293a 0a20  (domain, str):. 
-00008ed0: 2020 2020 2020 2020 2020 2064 6f6d 6169             domai
-00008ee0: 6e5f 7061 7468 203d 2070 726f 6365 7373  n_path = process
-00008ef0: 6564 5f73 706c 6974 5f70 6174 6820 2f20  ed_split_path / 
-00008f00: 646f 6d61 696e 0a20 2020 2020 2020 2020  domain.         
-00008f10: 2020 2061 7373 6572 7420 646f 6d61 696e     assert domain
-00008f20: 5f70 6174 682e 6578 6973 7473 2829 2c20  _path.exists(), 
-00008f30: 6622 5072 6f63 6573 7365 6420 6461 7461  f"Processed data
-00008f40: 206e 6f74 2066 6f75 6e64 2028 6578 7065   not found (expe
-00008f50: 6374 6564 2061 743a 207b 646f 6d61 696e  cted at: {domain
-00008f60: 5f70 6174 687d 2922 0a20 2020 2020 2020  _path})".       
-00008f70: 2020 2020 2079 6965 6c64 2066 726f 6d20       yield from 
-00008f80: 736f 7274 6564 2866 696c 7465 7228 6f73  sorted(filter(os
-00008f90: 2e70 6174 682e 6973 6669 6c65 2c20 646f  .path.isfile, do
-00008fa0: 6d61 696e 5f70 6174 682e 7267 6c6f 6228  main_path.rglob(
-00008fb0: 222a 2229 2929 0a0a 2020 2020 2020 2020  "*")))..        
-00008fc0: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
-00008fd0: 646f 6d61 696e 2c20 6c69 7374 293a 0a20  domain, list):. 
-00008fe0: 2020 2020 2020 2020 2020 2066 6f72 2064             for d
-00008ff0: 2069 6e20 646f 6d61 696e 3a0a 2020 2020   in domain:.    
-00009000: 2020 2020 2020 2020 2020 2020 646f 6d61              doma
-00009010: 696e 5f70 6174 6820 3d20 7072 6f63 6573  in_path = proces
-00009020: 7365 645f 7370 6c69 745f 7061 7468 202f  sed_split_path /
-00009030: 2064 0a20 2020 2020 2020 2020 2020 2020   d.             
-00009040: 2020 2061 7373 6572 7420 646f 6d61 696e     assert domain
-00009050: 5f70 6174 682e 6578 6973 7473 2829 2c20  _path.exists(), 
-00009060: 6622 5072 6f63 6573 7365 6420 6461 7461  f"Processed data
-00009070: 206e 6f74 2066 6f75 6e64 2028 6578 7065   not found (expe
-00009080: 6374 6564 2061 743a 207b 646f 6d61 696e  cted at: {domain
-00009090: 5f70 6174 687d 2922 0a20 2020 2020 2020  _path})".       
-000090a0: 2020 2020 2020 2020 2079 6965 6c64 2066           yield f
-000090b0: 726f 6d20 736f 7274 6564 2866 696c 7465  rom sorted(filte
-000090c0: 7228 6f73 2e70 6174 682e 6973 6669 6c65  r(os.path.isfile
-000090d0: 2c20 646f 6d61 696e 5f70 6174 682e 7267  , domain_path.rg
-000090e0: 6c6f 6228 222a 2229 2929 0a0a 2020 2020  lob("*")))..    
-000090f0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00009100: 2020 2020 2020 6173 7365 7274 2069 7369        assert isi
-00009110: 6e73 7461 6e63 6528 646f 6d61 696e 2c20  nstance(domain, 
-00009120: 6469 6374 290a 0a20 2020 2020 2020 2020  dict)..         
-00009130: 2020 2066 6f72 2064 2c20 736f 7572 6365     for d, source
-00009140: 7320 696e 2064 6f6d 6169 6e2e 6974 656d  s in domain.item
-00009150: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
-00009160: 2020 2020 2064 6f6d 6169 6e5f 7061 7468       domain_path
-00009170: 203d 2070 726f 6365 7373 6564 5f73 706c   = processed_spl
-00009180: 6974 5f70 6174 6820 2f20 640a 0a20 2020  it_path / d..   
-00009190: 2020 2020 2020 2020 2020 2020 2061 7373               ass
-000091a0: 6572 7420 646f 6d61 696e 5f70 6174 682e  ert domain_path.
-000091b0: 6578 6973 7473 2829 2c20 6622 5072 6f63  exists(), f"Proc
-000091c0: 6573 7365 6420 6461 7461 206e 6f74 2066  essed data not f
-000091d0: 6f75 6e64 2028 6578 7065 6374 6564 2061  ound (expected a
-000091e0: 743a 207b 646f 6d61 696e 5f70 6174 687d  t: {domain_path}
-000091f0: 2922 0a0a 2020 2020 2020 2020 2020 2020  )"..            
-00009200: 2020 2020 6966 2073 6f75 7263 6573 2069      if sources i
-00009210: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
-00009220: 2020 2020 2020 2020 2020 2020 7969 656c              yiel
-00009230: 6420 6672 6f6d 2073 6f72 7465 6428 646f  d from sorted(do
-00009240: 6d61 696e 5f70 6174 682e 7267 6c6f 6228  main_path.rglob(
-00009250: 222a 2229 290a 0a20 2020 2020 2020 2020  "*"))..         
-00009260: 2020 2020 2020 2065 6c69 6620 6973 696e         elif isin
-00009270: 7374 616e 6365 2873 6f75 7263 6573 2c20  stance(sources, 
-00009280: 7374 7229 3a0a 2020 2020 2020 2020 2020  str):.          
-00009290: 2020 2020 2020 2020 2020 736f 7572 6365            source
-000092a0: 5f70 6174 6820 3d20 646f 6d61 696e 5f70  _path = domain_p
-000092b0: 6174 6820 2f20 736f 7572 6365 730a 2020  ath / sources.  
+000074e0: 2020 2020 2020 2020 2069 6620 6c61 6265           if labe
+000074f0: 6c5f 7661 6c75 6520 213d 2022 4f22 3a0a  l_value != "O":.
+00007500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007510: 2020 2020 2020 2020 2020 2020 746f 6b65              toke
+00007520: 6e2e 6164 645f 6c61 6265 6c28 6c61 6265  n.add_label(labe
+00007530: 6c5f 6e61 6d65 2c20 6c61 6265 6c5f 7661  l_name, label_va
+00007540: 6c75 6529 0a20 2020 2020 2020 2020 2020  lue).           
+00007550: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00007560: 2020 2020 2020 2023 2067 6574 2074 6865         # get the
+00007570: 2074 6173 6b20 6e61 6d65 2028 652e 672e   task name (e.g.
+00007580: 2027 6e65 7227 290a 2020 2020 2020 2020   'ner').        
+00007590: 2020 2020 2020 2020 6c61 6265 6c5f 6e61          label_na
+000075a0: 6d65 203d 2063 6f6c 756d 6e5f 7479 7065  me = column_type
+000075b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000075c0: 2023 2067 6574 2074 6865 206c 6162 656c   # get the label
+000075d0: 2076 616c 7565 0a20 2020 2020 2020 2020   value.         
+000075e0: 2020 2020 2020 206c 6162 656c 5f76 616c         label_val
+000075f0: 7565 203d 2073 656c 662e 5f72 656d 6170  ue = self._remap
+00007600: 5f6c 6162 656c 2866 6965 6c64 735b 636f  _label(fields[co
+00007610: 6c75 6d6e 5d29 0a20 2020 2020 2020 2020  lumn]).         
+00007620: 2020 2020 2020 2023 2061 6464 206c 6162         # add lab
+00007630: 656c 0a20 2020 2020 2020 2020 2020 2020  el.             
+00007640: 2020 2069 6620 6c61 6265 6c5f 7661 6c75     if label_valu
+00007650: 6520 213d 2022 4f22 3a0a 2020 2020 2020  e != "O":.      
+00007660: 2020 2020 2020 2020 2020 2020 2020 746f                to
+00007670: 6b65 6e2e 6164 645f 6c61 6265 6c28 6c61  ken.add_label(la
+00007680: 6265 6c5f 6e61 6d65 2c20 6c61 6265 6c5f  bel_name, label_
+00007690: 7661 6c75 6529 0a0a 2020 2020 2020 2020  value)..        
+000076a0: 7265 7475 726e 2074 6f6b 656e 0a0a 2020  return token..  
+000076b0: 2020 6465 6620 5f72 656d 6170 5f6c 6162    def _remap_lab
+000076c0: 656c 2873 656c 662c 2074 6167 293a 0a20  el(self, tag):. 
+000076d0: 2020 2020 2020 2023 2072 656d 6170 2072         # remap r
+000076e0: 6567 756c 6172 2074 6167 206e 616d 6573  egular tag names
+000076f0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
+00007700: 2e6c 6162 656c 5f6e 616d 655f 6d61 7020  .label_name_map 
+00007710: 616e 6420 7461 6720 696e 2073 656c 662e  and tag in self.
+00007720: 6c61 6265 6c5f 6e61 6d65 5f6d 6170 3a0a  label_name_map:.
+00007730: 2020 2020 2020 2020 2020 2020 7461 6720              tag 
+00007740: 3d20 7365 6c66 2e6c 6162 656c 5f6e 616d  = self.label_nam
+00007750: 655f 6d61 705b 7461 675d 2020 2320 666f  e_map[tag]  # fo
+00007760: 7220 6578 616d 706c 652c 2074 7261 6e73  r example, trans
+00007770: 666f 726d 696e 6720 2750 4552 2720 746f  forming 'PER' to
+00007780: 2027 7065 7273 6f6e 270a 2020 2020 2020   'person'.      
+00007790: 2020 7265 7475 726e 2074 6167 0a0a 2020    return tag..  
+000077a0: 2020 6465 6620 5f5f 6c69 6e65 5f63 6f6d    def __line_com
+000077b0: 706c 6574 6573 5f73 656e 7465 6e63 6528  pletes_sentence(
+000077c0: 7365 6c66 2c20 6c69 6e65 3a20 7374 7229  self, line: str)
+000077d0: 202d 3e20 626f 6f6c 3a0a 2020 2020 2020   -> bool:.      
+000077e0: 2020 7365 6e74 656e 6365 5f63 6f6d 706c    sentence_compl
+000077f0: 6574 6564 203d 206c 696e 652e 6973 7370  eted = line.issp
+00007800: 6163 6528 2920 6f72 206c 696e 6520 3d3d  ace() or line ==
+00007810: 2022 220a 2020 2020 2020 2020 7265 7475   "".        retu
+00007820: 726e 2073 656e 7465 6e63 655f 636f 6d70  rn sentence_comp
+00007830: 6c65 7465 640a 0a20 2020 2064 6566 2069  leted..    def i
+00007840: 735f 696e 5f6d 656d 6f72 7928 7365 6c66  s_in_memory(self
+00007850: 2920 2d3e 2062 6f6f 6c3a 0a20 2020 2020  ) -> bool:.     
+00007860: 2020 2072 6574 7572 6e20 7365 6c66 2e69     return self.i
+00007870: 6e5f 6d65 6d6f 7279 0a0a 2020 2020 6465  n_memory..    de
+00007880: 6620 5f5f 6c65 6e5f 5f28 7365 6c66 2920  f __len__(self) 
+00007890: 2d3e 2069 6e74 3a0a 2020 2020 2020 2020  -> int:.        
+000078a0: 7265 7475 726e 2073 656c 662e 746f 7461  return self.tota
+000078b0: 6c5f 7365 6e74 656e 6365 5f63 6f75 6e74  l_sentence_count
+000078c0: 0a0a 2020 2020 6465 6620 5f5f 6765 7469  ..    def __geti
+000078d0: 7465 6d5f 5f28 7365 6c66 2c20 696e 6465  tem__(self, inde
+000078e0: 783a 2069 6e74 203d 2030 2920 2d3e 2053  x: int = 0) -> S
+000078f0: 656e 7465 6e63 653a 0a20 2020 2020 2020  entence:.       
+00007900: 2023 2069 6620 696e 206d 656d 6f72 792c   # if in memory,
+00007910: 2072 6574 7269 6576 6520 7061 7273 6564   retrieve parsed
+00007920: 2073 656e 7465 6e63 650a 2020 2020 2020   sentence.      
+00007930: 2020 6966 2073 656c 662e 696e 5f6d 656d    if self.in_mem
+00007940: 6f72 793a 0a20 2020 2020 2020 2020 2020  ory:.           
+00007950: 2073 656e 7465 6e63 6520 3d20 7365 6c66   sentence = self
+00007960: 2e73 656e 7465 6e63 6573 5b69 6e64 6578  .sentences[index
+00007970: 5d0a 0a20 2020 2020 2020 2023 2065 6c73  ]..        # els
+00007980: 6520 736b 6970 2074 6f20 706f 7369 7469  e skip to positi
+00007990: 6f6e 2069 6e20 6669 6c65 2077 6865 7265  on in file where
+000079a0: 2073 656e 7465 6e63 6520 6265 6769 6e73   sentence begins
+000079b0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+000079c0: 2020 2020 2020 2020 2020 2073 656e 7465             sente
+000079d0: 6e63 6520 3d20 7365 6c66 2e5f 636f 6e76  nce = self._conv
+000079e0: 6572 745f 6c69 6e65 735f 746f 5f73 656e  ert_lines_to_sen
+000079f0: 7465 6e63 6528 0a20 2020 2020 2020 2020  tence(.         
+00007a00: 2020 2020 2020 2073 656c 662e 7365 6e74         self.sent
+00007a10: 656e 6365 735f 7261 775b 696e 6465 785d  ences_raw[index]
+00007a20: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00007a30: 2020 776f 7264 5f6c 6576 656c 5f74 6167    word_level_tag
+00007a40: 5f63 6f6c 756d 6e73 3d73 656c 662e 776f  _columns=self.wo
+00007a50: 7264 5f6c 6576 656c 5f74 6167 5f63 6f6c  rd_level_tag_col
+00007a60: 756d 6e73 2c0a 2020 2020 2020 2020 2020  umns,.          
+00007a70: 2020 2020 2020 7370 616e 5f6c 6576 656c        span_level
+00007a80: 5f74 6167 5f63 6f6c 756d 6e73 3d73 656c  _tag_columns=sel
+00007a90: 662e 7370 616e 5f6c 6576 656c 5f74 6167  f.span_level_tag
+00007aa0: 5f63 6f6c 756d 6e73 2c0a 2020 2020 2020  _columns,.      
+00007ab0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+00007ac0: 2020 2020 2023 2073 6574 2073 656e 7465       # set sente
+00007ad0: 6e63 6520 636f 6e74 6578 7420 7573 696e  nce context usin
+00007ae0: 6720 7061 7274 6961 6c73 2054 4f44 4f3a  g partials TODO:
+00007af0: 2070 6f69 6e74 6572 2074 6f20 6461 7461   pointer to data
+00007b00: 7365 7420 6973 2072 6561 6c6c 7920 696e  set is really in
+00007b10: 6566 6669 6369 656e 740a 2020 2020 2020  efficient.      
+00007b20: 2020 2020 2020 7365 6e74 656e 6365 2e5f        sentence._
+00007b30: 6861 735f 636f 6e74 6578 7420 3d20 5472  has_context = Tr
+00007b40: 7565 0a20 2020 2020 2020 2020 2020 2073  ue.            s
+00007b50: 656e 7465 6e63 652e 5f70 6f73 6974 696f  entence._positio
+00007b60: 6e5f 696e 5f64 6174 6173 6574 203d 2028  n_in_dataset = (
+00007b70: 7365 6c66 2c20 696e 6465 7829 0a0a 2020  self, index)..  
+00007b80: 2020 2020 2020 7265 7475 726e 2073 656e        return sen
+00007b90: 7465 6e63 650a 0a0a 636c 6173 7320 4f4e  tence...class ON
+00007ba0: 544f 4e4f 5445 5328 4d75 6c74 6946 696c  TONOTES(MultiFil
+00007bb0: 6543 6f6c 756d 6e43 6f72 7075 7329 3a0a  eColumnCorpus):.
+00007bc0: 2020 2020 6172 6368 6976 655f 7572 6c20      archive_url 
+00007bd0: 3d20 2268 7474 7073 3a2f 2f64 6174 612e  = "https://data.
+00007be0: 6d65 6e64 656c 6579 2e63 6f6d 2f70 7562  mendeley.com/pub
+00007bf0: 6c69 632d 6669 6c65 732f 6461 7461 7365  lic-files/datase
+00007c00: 7473 2f7a 6d79 6379 3774 3968 392f 6669  ts/zmycy7t9h9/fi
+00007c10: 6c65 732f 6230 3738 6531 6334 2d66 3761  les/b078e1c4-f7a
+00007c20: 342d 3434 3237 2d62 6537 662d 3933 3839  4-4427-be7f-9389
+00007c30: 3936 3738 3331 6566 2f66 696c 655f 646f  967831ef/file_do
+00007c40: 776e 6c6f 6164 6564 220a 0a20 2020 2064  wnloaded"..    d
+00007c50: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
+00007c60: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
+00007c70: 2020 2062 6173 655f 7061 7468 3a20 4f70     base_path: Op
+00007c80: 7469 6f6e 616c 5b55 6e69 6f6e 5b73 7472  tional[Union[str
+00007c90: 2c20 5061 7468 5d5d 203d 204e 6f6e 652c  , Path]] = None,
+00007ca0: 0a20 2020 2020 2020 2076 6572 7369 6f6e  .        version
+00007cb0: 3a20 7374 7220 3d20 2276 3422 2c0a 2020  : str = "v4",.  
+00007cc0: 2020 2020 2020 6c61 6e67 7561 6765 3a20        language: 
+00007cd0: 7374 7220 3d20 2265 6e67 6c69 7368 222c  str = "english",
+00007ce0: 0a20 2020 2020 2020 2064 6f6d 6169 6e3a  .        domain:
+00007cf0: 2055 6e69 6f6e 5b4e 6f6e 652c 2073 7472   Union[None, str
+00007d00: 2c20 4c69 7374 5b73 7472 5d2c 2044 6963  , List[str], Dic
+00007d10: 745b 7374 722c 2055 6e69 6f6e 5b4e 6f6e  t[str, Union[Non
+00007d20: 652c 2073 7472 2c20 4c69 7374 5b73 7472  e, str, List[str
+00007d30: 5d5d 5d5d 203d 204e 6f6e 652c 0a20 2020  ]]]] = None,.   
+00007d40: 2020 2020 2069 6e5f 6d65 6d6f 7279 3a20       in_memory: 
+00007d50: 626f 6f6c 203d 2054 7275 652c 0a20 2020  bool = True,.   
+00007d60: 2020 2020 202a 2a63 6f72 7075 7361 7267       **corpusarg
+00007d70: 732c 0a20 2020 2029 202d 3e20 4e6f 6e65  s,.    ) -> None
+00007d80: 3a0a 2020 2020 2020 2020 6173 7365 7274  :.        assert
+00007d90: 2076 6572 7369 6f6e 2069 6e20 5b22 7634   version in ["v4
+00007da0: 222c 2022 7631 3222 5d0a 2020 2020 2020  ", "v12"].      
+00007db0: 2020 6966 2076 6572 7369 6f6e 203d 3d20    if version == 
+00007dc0: 2276 3132 223a 0a20 2020 2020 2020 2020  "v12":.         
+00007dd0: 2020 2061 7373 6572 7420 6c61 6e67 7561     assert langua
+00007de0: 6765 203d 3d20 2265 6e67 6c69 7368 220a  ge == "english".
+00007df0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00007e00: 2020 2020 2020 2020 2020 6173 7365 7274            assert
+00007e10: 206c 616e 6775 6167 6520 696e 205b 2265   language in ["e
+00007e20: 6e67 6c69 7368 222c 2022 6368 696e 6573  nglish", "chines
+00007e30: 6522 2c20 2261 7261 6269 6322 5d0a 0a20  e", "arabic"].. 
+00007e40: 2020 2020 2020 2063 6f6c 756d 6e5f 666f         column_fo
+00007e50: 726d 6174 203d 207b 303a 2022 7465 7874  rmat = {0: "text
+00007e60: 222c 2031 3a20 2270 6f73 222c 2032 3a20  ", 1: "pos", 2: 
+00007e70: 226e 6572 227d 0a0a 2020 2020 2020 2020  "ner"}..        
+00007e80: 7072 6f63 6573 7365 645f 6461 7461 5f70  processed_data_p
+00007e90: 6174 6820 3d20 7365 6c66 2e5f 656e 7375  ath = self._ensu
+00007ea0: 7265 5f64 6174 615f 7072 6f63 6573 7365  re_data_processe
+00007eb0: 6428 6261 7365 5f70 6174 682c 206c 616e  d(base_path, lan
+00007ec0: 6775 6167 652c 2076 6572 7369 6f6e 290a  guage, version).
+00007ed0: 0a20 2020 2020 2020 206b 7720 3d20 7b22  .        kw = {"
+00007ee0: 7665 7273 696f 6e22 3a20 7665 7273 696f  version": versio
+00007ef0: 6e2c 2022 6c61 6e67 7561 6765 223a 206c  n, "language": l
+00007f00: 616e 6775 6167 652c 2022 646f 6d61 696e  anguage, "domain
+00007f10: 223a 2064 6f6d 6169 6e2c 2022 7072 6f63  ": domain, "proc
+00007f20: 6573 7365 645f 6461 7461 5f70 6174 6822  essed_data_path"
+00007f30: 3a20 7072 6f63 6573 7365 645f 6461 7461  : processed_data
+00007f40: 5f70 6174 687d 0a0a 2020 2020 2020 2020  _path}..        
+00007f50: 6465 765f 6669 6c65 7320 3d20 6c69 7374  dev_files = list
+00007f60: 2873 656c 662e 5f67 6574 5f70 726f 6365  (self._get_proce
+00007f70: 7373 6564 5f66 696c 655f 7061 7468 7328  ssed_file_paths(
+00007f80: 7370 6c69 743d 2264 6576 656c 6f70 6d65  split="developme
+00007f90: 6e74 222c 202a 2a6b 7729 290a 2020 2020  nt", **kw)).    
+00007fa0: 2020 2020 7472 6169 6e5f 6669 6c65 7320      train_files 
+00007fb0: 3d20 6c69 7374 2873 656c 662e 5f67 6574  = list(self._get
+00007fc0: 5f70 726f 6365 7373 6564 5f66 696c 655f  _processed_file_
+00007fd0: 7061 7468 7328 7370 6c69 743d 2274 7261  paths(split="tra
+00007fe0: 696e 222c 202a 2a6b 7729 290a 2020 2020  in", **kw)).    
+00007ff0: 2020 2020 7465 7374 5f66 696c 6573 203d      test_files =
+00008000: 206c 6973 7428 7365 6c66 2e5f 6765 745f   list(self._get_
+00008010: 7072 6f63 6573 7365 645f 6669 6c65 5f70  processed_file_p
+00008020: 6174 6873 2873 706c 6974 3d22 7465 7374  aths(split="test
+00008030: 222c 202a 2a6b 7729 290a 0a20 2020 2020  ", **kw))..     
+00008040: 2020 2073 7570 6572 2829 2e5f 5f69 6e69     super().__ini
+00008050: 745f 5f28 0a20 2020 2020 2020 2020 2020  t__(.           
+00008060: 2064 6576 5f66 696c 6573 3d64 6576 5f66   dev_files=dev_f
+00008070: 696c 6573 2c0a 2020 2020 2020 2020 2020  iles,.          
+00008080: 2020 7472 6169 6e5f 6669 6c65 733d 7472    train_files=tr
+00008090: 6169 6e5f 6669 6c65 732c 0a20 2020 2020  ain_files,.     
+000080a0: 2020 2020 2020 2074 6573 745f 6669 6c65         test_file
+000080b0: 733d 7465 7374 5f66 696c 6573 2c0a 2020  s=test_files,.  
+000080c0: 2020 2020 2020 2020 2020 6e61 6d65 3d22            name="
+000080d0: 2f22 2e6a 6f69 6e28 2873 656c 662e 5f5f  /".join((self.__
+000080e0: 636c 6173 735f 5f2e 5f5f 6e61 6d65 5f5f  class__.__name__
+000080f0: 2c20 6c61 6e67 7561 6765 2c20 7665 7273  , language, vers
+00008100: 696f 6e29 292c 0a20 2020 2020 2020 2020  ion)),.         
+00008110: 2020 2063 6f6c 756d 6e5f 666f 726d 6174     column_format
+00008120: 3d63 6f6c 756d 6e5f 666f 726d 6174 2c0a  =column_format,.
+00008130: 2020 2020 2020 2020 2020 2020 696e 5f6d              in_m
+00008140: 656d 6f72 793d 696e 5f6d 656d 6f72 792c  emory=in_memory,
+00008150: 0a20 2020 2020 2020 2020 2020 2063 6f6c  .            col
+00008160: 756d 6e5f 6465 6c69 6d69 7465 723d 225c  umn_delimiter="\
+00008170: 7422 2c0a 2020 2020 2020 2020 2020 2020  t",.            
+00008180: 2a2a 636f 7270 7573 6172 6773 2c0a 2020  **corpusargs,.  
+00008190: 2020 2020 2020 290a 0a20 2020 2040 636c        )..    @cl
+000081a0: 6173 736d 6574 686f 640a 2020 2020 6465  assmethod.    de
+000081b0: 6620 6765 745f 6176 6169 6c61 626c 655f  f get_available_
+000081c0: 646f 6d61 696e 7328 0a20 2020 2020 2020  domains(.       
+000081d0: 2063 6c73 2c0a 2020 2020 2020 2020 6261   cls,.        ba
+000081e0: 7365 5f70 6174 683a 204f 7074 696f 6e61  se_path: Optiona
+000081f0: 6c5b 556e 696f 6e5b 7374 722c 2050 6174  l[Union[str, Pat
+00008200: 685d 5d20 3d20 4e6f 6e65 2c0a 2020 2020  h]] = None,.    
+00008210: 2020 2020 7665 7273 696f 6e3a 2073 7472      version: str
+00008220: 203d 2022 7634 222c 0a20 2020 2020 2020   = "v4",.       
+00008230: 206c 616e 6775 6167 653a 2073 7472 203d   language: str =
+00008240: 2022 656e 676c 6973 6822 2c0a 2020 2020   "english",.    
+00008250: 2020 2020 7370 6c69 743a 2073 7472 203d      split: str =
+00008260: 2022 7472 6169 6e22 2c0a 2020 2020 2920   "train",.    ) 
+00008270: 2d3e 204c 6973 745b 7374 725d 3a0a 2020  -> List[str]:.  
+00008280: 2020 2020 2020 7072 6f63 6573 7365 645f        processed_
+00008290: 6461 7461 5f70 6174 6820 3d20 636c 732e  data_path = cls.
+000082a0: 5f65 6e73 7572 655f 6461 7461 5f70 726f  _ensure_data_pro
+000082b0: 6365 7373 6564 2862 6173 655f 7061 7468  cessed(base_path
+000082c0: 3d62 6173 655f 7061 7468 2c20 6c61 6e67  =base_path, lang
+000082d0: 7561 6765 3d6c 616e 6775 6167 652c 2076  uage=language, v
+000082e0: 6572 7369 6f6e 3d76 6572 7369 6f6e 290a  ersion=version).
+000082f0: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
+00008300: 6564 5f73 706c 6974 5f70 6174 6820 3d20  ed_split_path = 
+00008310: 7072 6f63 6573 7365 645f 6461 7461 5f70  processed_data_p
+00008320: 6174 6820 2f20 2273 706c 6974 7322 202f  ath / "splits" /
+00008330: 2076 6572 7369 6f6e 202f 206c 616e 6775   version / langu
+00008340: 6167 6520 2f20 7370 6c69 740a 0a20 2020  age / split..   
+00008350: 2020 2020 2072 6574 7572 6e20 5b64 6f6d       return [dom
+00008360: 6169 6e5f 7061 7468 2e6e 616d 6520 666f  ain_path.name fo
+00008370: 7220 646f 6d61 696e 5f70 6174 6820 696e  r domain_path in
+00008380: 2070 726f 6365 7373 6564 5f73 706c 6974   processed_split
+00008390: 5f70 6174 682e 6974 6572 6469 7228 295d  _path.iterdir()]
+000083a0: 0a0a 2020 2020 4063 6c61 7373 6d65 7468  ..    @classmeth
+000083b0: 6f64 0a20 2020 2064 6566 205f 6765 745f  od.    def _get_
+000083c0: 7072 6f63 6573 7365 645f 6669 6c65 5f70  processed_file_p
+000083d0: 6174 6873 280a 2020 2020 2020 2020 636c  aths(.        cl
+000083e0: 732c 0a20 2020 2020 2020 2070 726f 6365  s,.        proce
+000083f0: 7373 6564 5f64 6174 615f 7061 7468 3a20  ssed_data_path: 
+00008400: 5061 7468 2c0a 2020 2020 2020 2020 7370  Path,.        sp
+00008410: 6c69 743a 2073 7472 203d 2022 7472 6169  lit: str = "trai
+00008420: 6e22 2c0a 2020 2020 2020 2020 7665 7273  n",.        vers
+00008430: 696f 6e3a 2073 7472 203d 2022 7634 222c  ion: str = "v4",
+00008440: 0a20 2020 2020 2020 206c 616e 6775 6167  .        languag
+00008450: 653a 2073 7472 203d 2022 656e 676c 6973  e: str = "englis
+00008460: 6822 2c0a 2020 2020 2020 2020 646f 6d61  h",.        doma
+00008470: 696e 3a20 4f70 7469 6f6e 616c 5b55 6e69  in: Optional[Uni
+00008480: 6f6e 5b73 7472 2c20 4c69 7374 5b73 7472  on[str, List[str
+00008490: 5d2c 2044 6963 745b 7374 722c 2055 6e69  ], Dict[str, Uni
+000084a0: 6f6e 5b4e 6f6e 652c 2073 7472 2c20 4c69  on[None, str, Li
+000084b0: 7374 5b73 7472 5d5d 5d5d 5d20 3d20 4e6f  st[str]]]]] = No
+000084c0: 6e65 2c0a 2020 2020 2920 2d3e 2049 7465  ne,.    ) -> Ite
+000084d0: 7261 626c 655b 5061 7468 5d3a 0a20 2020  rable[Path]:.   
+000084e0: 2020 2020 2070 726f 6365 7373 6564 5f73       processed_s
+000084f0: 706c 6974 5f70 6174 6820 3d20 7072 6f63  plit_path = proc
+00008500: 6573 7365 645f 6461 7461 5f70 6174 6820  essed_data_path 
+00008510: 2f20 2273 706c 6974 7322 202f 2076 6572  / "splits" / ver
+00008520: 7369 6f6e 202f 206c 616e 6775 6167 6520  sion / language 
+00008530: 2f20 7370 6c69 740a 0a20 2020 2020 2020  / split..       
+00008540: 2069 6620 646f 6d61 696e 2069 7320 4e6f   if domain is No
+00008550: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00008560: 2320 7573 6520 616c 6c20 646f 6d61 696e  # use all domain
+00008570: 730a 2020 2020 2020 2020 2020 2020 6173  s.            as
+00008580: 7365 7274 2070 726f 6365 7373 6564 5f73  sert processed_s
+00008590: 706c 6974 5f70 6174 682e 6578 6973 7473  plit_path.exists
+000085a0: 2829 2c20 6622 5072 6f63 6573 7365 6420  (), f"Processed 
+000085b0: 6461 7461 206e 6f74 2066 6f75 6e64 2028  data not found (
+000085c0: 6578 7065 6374 6564 2061 743a 207b 7072  expected at: {pr
+000085d0: 6f63 6573 7365 645f 7370 6c69 745f 7061  ocessed_split_pa
+000085e0: 7468 7d29 220a 2020 2020 2020 2020 2020  th})".          
+000085f0: 2020 7969 656c 6420 6672 6f6d 2073 6f72    yield from sor
+00008600: 7465 6428 6669 6c74 6572 286f 732e 7061  ted(filter(os.pa
+00008610: 7468 2e69 7366 696c 652c 2070 726f 6365  th.isfile, proce
+00008620: 7373 6564 5f73 706c 6974 5f70 6174 682e  ssed_split_path.
+00008630: 7267 6c6f 6228 222a 2229 2929 0a0a 2020  rglob("*")))..  
+00008640: 2020 2020 2020 656c 6966 2069 7369 6e73        elif isins
+00008650: 7461 6e63 6528 646f 6d61 696e 2c20 7374  tance(domain, st
+00008660: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
+00008670: 646f 6d61 696e 5f70 6174 6820 3d20 7072  domain_path = pr
+00008680: 6f63 6573 7365 645f 7370 6c69 745f 7061  ocessed_split_pa
+00008690: 7468 202f 2064 6f6d 6169 6e0a 2020 2020  th / domain.    
+000086a0: 2020 2020 2020 2020 6173 7365 7274 2064          assert d
+000086b0: 6f6d 6169 6e5f 7061 7468 2e65 7869 7374  omain_path.exist
+000086c0: 7328 292c 2066 2250 726f 6365 7373 6564  s(), f"Processed
+000086d0: 2064 6174 6120 6e6f 7420 666f 756e 6420   data not found 
+000086e0: 2865 7870 6563 7465 6420 6174 3a20 7b64  (expected at: {d
+000086f0: 6f6d 6169 6e5f 7061 7468 7d29 220a 2020  omain_path})".  
+00008700: 2020 2020 2020 2020 2020 7969 656c 6420            yield 
+00008710: 6672 6f6d 2073 6f72 7465 6428 6669 6c74  from sorted(filt
+00008720: 6572 286f 732e 7061 7468 2e69 7366 696c  er(os.path.isfil
+00008730: 652c 2064 6f6d 6169 6e5f 7061 7468 2e72  e, domain_path.r
+00008740: 676c 6f62 2822 2a22 2929 290a 0a20 2020  glob("*")))..   
+00008750: 2020 2020 2065 6c69 6620 6973 696e 7374       elif isinst
+00008760: 616e 6365 2864 6f6d 6169 6e2c 206c 6973  ance(domain, lis
+00008770: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
+00008780: 666f 7220 6420 696e 2064 6f6d 6169 6e3a  for d in domain:
+00008790: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000087a0: 2064 6f6d 6169 6e5f 7061 7468 203d 2070   domain_path = p
+000087b0: 726f 6365 7373 6564 5f73 706c 6974 5f70  rocessed_split_p
+000087c0: 6174 6820 2f20 640a 2020 2020 2020 2020  ath / d.        
+000087d0: 2020 2020 2020 2020 6173 7365 7274 2064          assert d
+000087e0: 6f6d 6169 6e5f 7061 7468 2e65 7869 7374  omain_path.exist
+000087f0: 7328 292c 2066 2250 726f 6365 7373 6564  s(), f"Processed
+00008800: 2064 6174 6120 6e6f 7420 666f 756e 6420   data not found 
+00008810: 2865 7870 6563 7465 6420 6174 3a20 7b64  (expected at: {d
+00008820: 6f6d 6169 6e5f 7061 7468 7d29 220a 2020  omain_path})".  
+00008830: 2020 2020 2020 2020 2020 2020 2020 7969                yi
+00008840: 656c 6420 6672 6f6d 2073 6f72 7465 6428  eld from sorted(
+00008850: 6669 6c74 6572 286f 732e 7061 7468 2e69  filter(os.path.i
+00008860: 7366 696c 652c 2064 6f6d 6169 6e5f 7061  sfile, domain_pa
+00008870: 7468 2e72 676c 6f62 2822 2a22 2929 290a  th.rglob("*"))).
+00008880: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00008890: 2020 2020 2020 2020 2020 2061 7373 6572             asser
+000088a0: 7420 6973 696e 7374 616e 6365 2864 6f6d  t isinstance(dom
+000088b0: 6169 6e2c 2064 6963 7429 0a0a 2020 2020  ain, dict)..    
+000088c0: 2020 2020 2020 2020 666f 7220 642c 2073          for d, s
+000088d0: 6f75 7263 6573 2069 6e20 646f 6d61 696e  ources in domain
+000088e0: 2e69 7465 6d73 2829 3a0a 2020 2020 2020  .items():.      
+000088f0: 2020 2020 2020 2020 2020 646f 6d61 696e            domain
+00008900: 5f70 6174 6820 3d20 7072 6f63 6573 7365  _path = processe
+00008910: 645f 7370 6c69 745f 7061 7468 202f 2064  d_split_path / d
+00008920: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00008930: 2020 6173 7365 7274 2064 6f6d 6169 6e5f    assert domain_
+00008940: 7061 7468 2e65 7869 7374 7328 292c 2066  path.exists(), f
+00008950: 2250 726f 6365 7373 6564 2064 6174 6120  "Processed data 
+00008960: 6e6f 7420 666f 756e 6420 2865 7870 6563  not found (expec
+00008970: 7465 6420 6174 3a20 7b64 6f6d 6169 6e5f  ted at: {domain_
+00008980: 7061 7468 7d29 220a 0a20 2020 2020 2020  path})"..       
+00008990: 2020 2020 2020 2020 2069 6620 736f 7572           if sour
+000089a0: 6365 7320 6973 204e 6f6e 653a 0a20 2020  ces is None:.   
+000089b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000089c0: 2079 6965 6c64 2066 726f 6d20 736f 7274   yield from sort
+000089d0: 6564 2864 6f6d 6169 6e5f 7061 7468 2e72  ed(domain_path.r
+000089e0: 676c 6f62 2822 2a22 2929 0a0a 2020 2020  glob("*"))..    
+000089f0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00008a00: 2069 7369 6e73 7461 6e63 6528 736f 7572   isinstance(sour
+00008a10: 6365 732c 2073 7472 293a 0a20 2020 2020  ces, str):.     
+00008a20: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00008a30: 6f75 7263 655f 7061 7468 203d 2064 6f6d  ource_path = dom
+00008a40: 6169 6e5f 7061 7468 202f 2073 6f75 7263  ain_path / sourc
+00008a50: 6573 0a20 2020 2020 2020 2020 2020 2020  es.             
+00008a60: 2020 2020 2020 2061 7373 6572 7420 736f         assert so
+00008a70: 7572 6365 5f70 6174 682e 6578 6973 7473  urce_path.exists
+00008a80: 2829 2c20 6622 5072 6f63 6573 7365 6420  (), f"Processed 
+00008a90: 6461 7461 206e 6f74 2066 6f75 6e64 2028  data not found (
+00008aa0: 6578 7065 6374 6564 2061 743a 207b 736f  expected at: {so
+00008ab0: 7572 6365 5f70 6174 687d 2922 0a20 2020  urce_path})".   
+00008ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008ad0: 2079 6965 6c64 2073 6f75 7263 655f 7061   yield source_pa
+00008ae0: 7468 0a0a 2020 2020 2020 2020 2020 2020  th..            
+00008af0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00008b00: 2020 2020 2020 2020 2020 2020 2020 6173                as
+00008b10: 7365 7274 2069 7369 6e73 7461 6e63 6528  sert isinstance(
+00008b20: 736f 7572 6365 732c 206c 6973 7429 0a0a  sources, list)..
+00008b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008b40: 2020 2020 666f 7220 7320 696e 2073 6f75      for s in sou
+00008b50: 7263 6573 3a0a 2020 2020 2020 2020 2020  rces:.          
+00008b60: 2020 2020 2020 2020 2020 2020 2020 736f                so
+00008b70: 7572 6365 5f70 6174 6820 3d20 646f 6d61  urce_path = doma
+00008b80: 696e 5f70 6174 6820 2f20 730a 2020 2020  in_path / s.    
+00008b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008ba0: 2020 2020 6173 7365 7274 2073 6f75 7263      assert sourc
+00008bb0: 655f 7061 7468 2e65 7869 7374 7328 292c  e_path.exists(),
+00008bc0: 2066 2250 726f 6365 7373 6564 2064 6174   f"Processed dat
+00008bd0: 6120 6e6f 7420 666f 756e 6420 2865 7870  a not found (exp
+00008be0: 6563 7465 6420 6174 3a20 7b73 6f75 7263  ected at: {sourc
+00008bf0: 655f 7061 7468 7d29 220a 2020 2020 2020  e_path})".      
+00008c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008c10: 2020 7969 656c 6420 736f 7572 6365 5f70    yield source_p
+00008c20: 6174 680a 0a20 2020 2040 636c 6173 736d  ath..    @classm
+00008c30: 6574 686f 640a 2020 2020 6465 6620 5f65  ethod.    def _e
+00008c40: 6e73 7572 655f 6461 7461 5f70 726f 6365  nsure_data_proce
+00008c50: 7373 6564 2863 6c73 2c20 6261 7365 5f70  ssed(cls, base_p
+00008c60: 6174 682c 206c 616e 6775 6167 653a 2073  ath, language: s
+00008c70: 7472 2c20 7665 7273 696f 6e3a 2073 7472  tr, version: str
+00008c80: 293a 0a20 2020 2020 2020 2072 6177 5f64  ):.        raw_d
+00008c90: 6174 615f 7061 7468 203d 2063 6c73 2e5f  ata_path = cls._
+00008ca0: 656e 7375 7265 5f64 6174 615f 646f 776e  ensure_data_down
+00008cb0: 6c6f 6164 6564 2862 6173 655f 7061 7468  loaded(base_path
+00008cc0: 290a 0a20 2020 2020 2020 2062 6173 655f  )..        base_
+00008cd0: 7061 7468 203d 206b 6f6c 6962 7269 2e63  path = kolibri.c
+00008ce0: 6163 6865 5f72 6f6f 7420 2f20 2264 6174  ache_root / "dat
+00008cf0: 6173 6574 7322 2069 6620 6e6f 7420 6261  asets" if not ba
+00008d00: 7365 5f70 6174 6820 656c 7365 2050 6174  se_path else Pat
+00008d10: 6828 6261 7365 5f70 6174 6829 0a0a 2020  h(base_path)..  
+00008d20: 2020 2020 2020 6461 7461 7365 745f 6e61        dataset_na
+00008d30: 6d65 203d 2063 6c73 2e5f 5f6e 616d 655f  me = cls.__name_
+00008d40: 5f2e 6c6f 7765 7228 290a 0a20 2020 2020  _.lower()..     
+00008d50: 2020 2070 726f 6365 7373 6564 5f64 6174     processed_dat
+00008d60: 615f 7061 7468 203d 2062 6173 655f 7061  a_path = base_pa
+00008d70: 7468 202f 2064 6174 6173 6574 5f6e 616d  th / dataset_nam
+00008d80: 650a 0a20 2020 2020 2020 2070 726f 6365  e..        proce
+00008d90: 7373 6564 5f73 706c 6974 5f70 6174 6820  ssed_split_path 
+00008da0: 3d20 7072 6f63 6573 7365 645f 6461 7461  = processed_data
+00008db0: 5f70 6174 6820 2f20 2273 706c 6974 7322  _path / "splits"
+00008dc0: 202f 2076 6572 7369 6f6e 202f 206c 616e   / version / lan
+00008dd0: 6775 6167 650a 0a20 2020 2020 2020 2069  guage..        i
+00008de0: 6620 6e6f 7420 7072 6f63 6573 7365 645f  f not processed_
+00008df0: 7370 6c69 745f 7061 7468 2e65 7869 7374  split_path.exist
+00008e00: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
+00008e10: 206c 6f67 2e69 6e66 6f28 6622 4f6e 746f   log.info(f"Onto
+00008e20: 4e6f 7465 7320 7370 6c69 7473 2066 6f72  Notes splits for
+00008e30: 207b 7665 7273 696f 6e7d 2f7b 6c61 6e67   {version}/{lang
+00008e40: 7561 6765 7d20 6861 7665 206e 6f74 2062  uage} have not b
+00008e50: 6565 6e20 6765 6e65 7261 7465 6420 7965  een generated ye
+00008e60: 742c 2067 656e 6572 6174 696e 6720 6974  t, generating it
+00008e70: 206e 6f77 2e22 290a 0a20 2020 2020 2020   now.")..       
+00008e80: 2020 2020 2066 6f72 2073 706c 6974 2069       for split i
+00008e90: 6e20 5b22 7472 6169 6e22 2c20 2264 6576  n ["train", "dev
+00008ea0: 656c 6f70 6d65 6e74 222c 2022 7465 7374  elopment", "test
+00008eb0: 225d 3a0a 2020 2020 2020 2020 2020 2020  "]:.            
+00008ec0: 2020 2020 6c6f 672e 696e 666f 2866 2247      log.info(f"G
+00008ed0: 656e 6572 6174 696e 6720 7b73 706c 6974  enerating {split
+00008ee0: 7d20 7370 6c69 7420 666f 7220 7b76 6572  } split for {ver
+00008ef0: 7369 6f6e 7d2f 7b6c 616e 6775 6167 657d  sion}/{language}
+00008f00: 2229 0a0a 2020 2020 2020 2020 2020 2020  ")..            
+00008f10: 2020 2020 7261 775f 7370 6c69 745f 7061      raw_split_pa
+00008f20: 7468 203d 2072 6177 5f64 6174 615f 7061  th = raw_data_pa
+00008f30: 7468 202f 2076 6572 7369 6f6e 202f 2022  th / version / "
+00008f40: 6461 7461 2220 2f20 7370 6c69 7420 2f20  data" / split / 
+00008f50: 2264 6174 6122 202f 206c 616e 6775 6167  "data" / languag
+00008f60: 6520 2f20 2261 6e6e 6f74 6174 696f 6e73  e / "annotations
+00008f70: 220a 0a20 2020 2020 2020 2020 2020 2020  "..             
+00008f80: 2020 2023 2069 7465 7220 6f76 6572 2061     # iter over a
+00008f90: 6c6c 2064 6f6d 6169 6e73 202f 2073 6f75  ll domains / sou
+00008fa0: 7263 6573 2061 6e64 2063 7265 6174 6520  rces and create 
+00008fb0: 7461 7267 6574 2066 696c 6573 0a0a 2020  target files..  
+00008fc0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+00008fd0: 7220 7261 775f 646f 6d61 696e 5f70 6174  r raw_domain_pat
+00008fe0: 6820 696e 2072 6177 5f73 706c 6974 5f70  h in raw_split_p
+00008ff0: 6174 682e 6974 6572 6469 7228 293a 0a20  ath.iterdir():. 
+00009000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009010: 2020 2066 6f72 2072 6177 5f73 6f75 7263     for raw_sourc
+00009020: 655f 7061 7468 2069 6e20 7261 775f 646f  e_path in raw_do
+00009030: 6d61 696e 5f70 6174 682e 6974 6572 6469  main_path.iterdi
+00009040: 7228 293a 0a20 2020 2020 2020 2020 2020  r():.           
+00009050: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+00009060: 6c6c 5f66 696c 6573 203d 2073 6f72 7465  ll_files = sorte
+00009070: 6428 7261 775f 736f 7572 6365 5f70 6174  d(raw_source_pat
+00009080: 682e 7267 6c6f 6228 222a 676f 6c64 5f63  h.rglob("*gold_c
+00009090: 6f6e 6c6c 2229 290a 0a20 2020 2020 2020  onll"))..       
+000090a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000090b0: 2070 726f 6365 7373 6564 5f73 6f75 7263   processed_sourc
+000090c0: 655f 7061 7468 203d 2028 0a20 2020 2020  e_path = (.     
+000090d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000090e0: 2020 2020 2020 2070 726f 6365 7373 6564         processed
+000090f0: 5f73 706c 6974 5f70 6174 6820 2f20 7370  _split_path / sp
+00009100: 6c69 7420 2f20 7261 775f 646f 6d61 696e  lit / raw_domain
+00009110: 5f70 6174 682e 6e61 6d65 202f 2072 6177  _path.name / raw
+00009120: 5f73 6f75 7263 655f 7061 7468 2e6e 616d  _source_path.nam
+00009130: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
+00009140: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00009150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009160: 2020 2020 7072 6f63 6573 7365 645f 736f      processed_so
+00009170: 7572 6365 5f70 6174 682e 7061 7265 6e74  urce_path.parent
+00009180: 2e6d 6b64 6972 2870 6172 656e 7473 3d54  .mkdir(parents=T
+00009190: 7275 652c 2065 7869 7374 5f6f 6b3d 5472  rue, exist_ok=Tr
+000091a0: 7565 290a 0a20 2020 2020 2020 2020 2020  ue)..           
+000091b0: 2020 2020 2020 2020 2020 2020 2077 6974               wit
+000091c0: 6820 6f70 656e 2870 726f 6365 7373 6564  h open(processed
+000091d0: 5f73 6f75 7263 655f 7061 7468 2c20 2277  _source_path, "w
+000091e0: 2229 2061 7320 663a 0a20 2020 2020 2020  ") as f:.       
+000091f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009200: 2020 2020 2066 6f72 2063 6f6e 6c6c 5f66       for conll_f
+00009210: 696c 6520 696e 2063 6f6e 6c6c 5f66 696c  ile in conll_fil
+00009220: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
+00009230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009240: 2020 2020 666f 7220 7365 6e74 2069 6e20      for sent in 
+00009250: 636c 732e 7365 6e74 656e 6365 5f69 7465  cls.sentence_ite
+00009260: 7261 746f 7228 636f 6e6c 6c5f 6669 6c65  rator(conll_file
+00009270: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00009280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009290: 2020 2020 2020 2069 6620 6c61 6e67 7561         if langua
+000092a0: 6765 203d 3d20 2261 7261 6269 6322 3a0a  ge == "arabic":.
+000092b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 000092c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000092d0: 2020 6173 7365 7274 2073 6f75 7263 655f    assert source_
-000092e0: 7061 7468 2e65 7869 7374 7328 292c 2066  path.exists(), f
-000092f0: 2250 726f 6365 7373 6564 2064 6174 6120  "Processed data 
-00009300: 6e6f 7420 666f 756e 6420 2865 7870 6563  not found (expec
-00009310: 7465 6420 6174 3a20 7b73 6f75 7263 655f  ted at: {source_
-00009320: 7061 7468 7d29 220a 2020 2020 2020 2020  path})".        
-00009330: 2020 2020 2020 2020 2020 2020 7969 656c              yiel
-00009340: 6420 736f 7572 6365 5f70 6174 680a 0a20  d source_path.. 
-00009350: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00009360: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00009370: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
-00009380: 6973 696e 7374 616e 6365 2873 6f75 7263  isinstance(sourc
-00009390: 6573 2c20 6c69 7374 290a 0a20 2020 2020  es, list)..     
-000093a0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-000093b0: 6f72 2073 2069 6e20 736f 7572 6365 733a  or s in sources:
-000093c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000093d0: 2020 2020 2020 2020 2073 6f75 7263 655f           source_
-000093e0: 7061 7468 203d 2064 6f6d 6169 6e5f 7061  path = domain_pa
-000093f0: 7468 202f 2073 0a20 2020 2020 2020 2020  th / s.         
-00009400: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00009410: 7373 6572 7420 736f 7572 6365 5f70 6174  ssert source_pat
-00009420: 682e 6578 6973 7473 2829 2c20 6622 5072  h.exists(), f"Pr
-00009430: 6f63 6573 7365 6420 6461 7461 206e 6f74  ocessed data not
-00009440: 2066 6f75 6e64 2028 6578 7065 6374 6564   found (expected
-00009450: 2061 743a 207b 736f 7572 6365 5f70 6174   at: {source_pat
-00009460: 687d 2922 0a20 2020 2020 2020 2020 2020  h})".           
-00009470: 2020 2020 2020 2020 2020 2020 2079 6965               yie
-00009480: 6c64 2073 6f75 7263 655f 7061 7468 0a0a  ld source_path..
-00009490: 2020 2020 4063 6c61 7373 6d65 7468 6f64      @classmethod
-000094a0: 0a20 2020 2064 6566 205f 656e 7375 7265  .    def _ensure
-000094b0: 5f64 6174 615f 7072 6f63 6573 7365 6428  _data_processed(
-000094c0: 636c 732c 2062 6173 655f 7061 7468 2c20  cls, base_path, 
-000094d0: 6c61 6e67 7561 6765 3a20 7374 722c 2076  language: str, v
-000094e0: 6572 7369 6f6e 3a20 7374 7229 3a0a 2020  ersion: str):.  
-000094f0: 2020 2020 2020 7261 775f 6461 7461 5f70        raw_data_p
-00009500: 6174 6820 3d20 636c 732e 5f65 6e73 7572  ath = cls._ensur
-00009510: 655f 6461 7461 5f64 6f77 6e6c 6f61 6465  e_data_downloade
-00009520: 6428 6261 7365 5f70 6174 6829 0a0a 2020  d(base_path)..  
-00009530: 2020 2020 2020 6261 7365 5f70 6174 6820        base_path 
-00009540: 3d20 6b6f 6c69 6272 692e 6361 6368 655f  = kolibri.cache_
-00009550: 726f 6f74 202f 2022 6461 7461 7365 7473  root / "datasets
-00009560: 2220 6966 206e 6f74 2062 6173 655f 7061  " if not base_pa
-00009570: 7468 2065 6c73 6520 5061 7468 2862 6173  th else Path(bas
-00009580: 655f 7061 7468 290a 0a20 2020 2020 2020  e_path)..       
-00009590: 2064 6174 6173 6574 5f6e 616d 6520 3d20   dataset_name = 
-000095a0: 636c 732e 5f5f 6e61 6d65 5f5f 2e6c 6f77  cls.__name__.low
-000095b0: 6572 2829 0a0a 2020 2020 2020 2020 7072  er()..        pr
-000095c0: 6f63 6573 7365 645f 6461 7461 5f70 6174  ocessed_data_pat
-000095d0: 6820 3d20 6261 7365 5f70 6174 6820 2f20  h = base_path / 
-000095e0: 6461 7461 7365 745f 6e61 6d65 0a0a 2020  dataset_name..  
-000095f0: 2020 2020 2020 7072 6f63 6573 7365 645f        processed_
-00009600: 7370 6c69 745f 7061 7468 203d 2070 726f  split_path = pro
-00009610: 6365 7373 6564 5f64 6174 615f 7061 7468  cessed_data_path
-00009620: 202f 2022 7370 6c69 7473 2220 2f20 7665   / "splits" / ve
-00009630: 7273 696f 6e20 2f20 6c61 6e67 7561 6765  rsion / language
-00009640: 0a0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
-00009650: 2070 726f 6365 7373 6564 5f73 706c 6974   processed_split
-00009660: 5f70 6174 682e 6578 6973 7473 2829 3a0a  _path.exists():.
-00009670: 2020 2020 2020 2020 2020 2020 6c6f 672e              log.
-00009680: 696e 666f 2866 224f 6e74 6f4e 6f74 6573  info(f"OntoNotes
-00009690: 2073 706c 6974 7320 666f 7220 7b76 6572   splits for {ver
-000096a0: 7369 6f6e 7d2f 7b6c 616e 6775 6167 657d  sion}/{language}
-000096b0: 2068 6176 6520 6e6f 7420 6265 656e 2067   have not been g
-000096c0: 656e 6572 6174 6564 2079 6574 2c20 6765  enerated yet, ge
-000096d0: 6e65 7261 7469 6e67 2069 7420 6e6f 772e  nerating it now.
-000096e0: 2229 0a0a 2020 2020 2020 2020 2020 2020  ")..            
-000096f0: 666f 7220 7370 6c69 7420 696e 205b 2274  for split in ["t
-00009700: 7261 696e 222c 2022 6465 7665 6c6f 706d  rain", "developm
-00009710: 656e 7422 2c20 2274 6573 7422 5d3a 0a20  ent", "test"]:. 
-00009720: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-00009730: 6f67 2e69 6e66 6f28 6622 4765 6e65 7261  og.info(f"Genera
-00009740: 7469 6e67 207b 7370 6c69 747d 2073 706c  ting {split} spl
-00009750: 6974 2066 6f72 207b 7665 7273 696f 6e7d  it for {version}
-00009760: 2f7b 6c61 6e67 7561 6765 7d22 290a 0a20  /{language}").. 
-00009770: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00009780: 6177 5f73 706c 6974 5f70 6174 6820 3d20  aw_split_path = 
-00009790: 7261 775f 6461 7461 5f70 6174 6820 2f20  raw_data_path / 
-000097a0: 7665 7273 696f 6e20 2f20 2264 6174 6122  version / "data"
-000097b0: 202f 2073 706c 6974 202f 2022 6461 7461   / split / "data
-000097c0: 2220 2f20 6c61 6e67 7561 6765 202f 2022  " / language / "
-000097d0: 616e 6e6f 7461 7469 6f6e 7322 0a0a 2020  annotations"..  
-000097e0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-000097f0: 6974 6572 206f 7665 7220 616c 6c20 646f  iter over all do
-00009800: 6d61 696e 7320 2f20 736f 7572 6365 7320  mains / sources 
-00009810: 616e 6420 6372 6561 7465 2074 6172 6765  and create targe
-00009820: 7420 6669 6c65 730a 0a20 2020 2020 2020  t files..       
-00009830: 2020 2020 2020 2020 2066 6f72 2072 6177           for raw
-00009840: 5f64 6f6d 6169 6e5f 7061 7468 2069 6e20  _domain_path in 
-00009850: 7261 775f 7370 6c69 745f 7061 7468 2e69  raw_split_path.i
-00009860: 7465 7264 6972 2829 3a0a 2020 2020 2020  terdir():.      
-00009870: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-00009880: 7220 7261 775f 736f 7572 6365 5f70 6174  r raw_source_pat
-00009890: 6820 696e 2072 6177 5f64 6f6d 6169 6e5f  h in raw_domain_
-000098a0: 7061 7468 2e69 7465 7264 6972 2829 3a0a  path.iterdir():.
-000098b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000098c0: 2020 2020 2020 2020 636f 6e6c 6c5f 6669          conll_fi
-000098d0: 6c65 7320 3d20 736f 7274 6564 2872 6177  les = sorted(raw
-000098e0: 5f73 6f75 7263 655f 7061 7468 2e72 676c  _source_path.rgl
-000098f0: 6f62 2822 2a67 6f6c 645f 636f 6e6c 6c22  ob("*gold_conll"
-00009900: 2929 0a0a 2020 2020 2020 2020 2020 2020  ))..            
-00009910: 2020 2020 2020 2020 2020 2020 7072 6f63              proc
-00009920: 6573 7365 645f 736f 7572 6365 5f70 6174  essed_source_pat
-00009930: 6820 3d20 280a 2020 2020 2020 2020 2020  h = (.          
-00009940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009950: 2020 7072 6f63 6573 7365 645f 7370 6c69    processed_spli
-00009960: 745f 7061 7468 202f 2073 706c 6974 202f  t_path / split /
-00009970: 2072 6177 5f64 6f6d 6169 6e5f 7061 7468   raw_domain_path
-00009980: 2e6e 616d 6520 2f20 7261 775f 736f 7572  .name / raw_sour
-00009990: 6365 5f70 6174 682e 6e61 6d65 0a20 2020  ce_path.name.   
-000099a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000099b0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
-000099c0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-000099d0: 726f 6365 7373 6564 5f73 6f75 7263 655f  rocessed_source_
-000099e0: 7061 7468 2e70 6172 656e 742e 6d6b 6469  path.parent.mkdi
-000099f0: 7228 7061 7265 6e74 733d 5472 7565 2c20  r(parents=True, 
-00009a00: 6578 6973 745f 6f6b 3d54 7275 6529 0a0a  exist_ok=True)..
-00009a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009a20: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
-00009a30: 6e28 7072 6f63 6573 7365 645f 736f 7572  n(processed_sour
-00009a40: 6365 5f70 6174 682c 2022 7722 2920 6173  ce_path, "w") as
-00009a50: 2066 3a0a 2020 2020 2020 2020 2020 2020   f:.            
-00009a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009a70: 666f 7220 636f 6e6c 6c5f 6669 6c65 2069  for conll_file i
-00009a80: 6e20 636f 6e6c 6c5f 6669 6c65 733a 0a20  n conll_files:. 
-00009a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009aa0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00009ab0: 6f72 2073 656e 7420 696e 2063 6c73 2e73  or sent in cls.s
-00009ac0: 656e 7465 6e63 655f 6974 6572 6174 6f72  entence_iterator
-00009ad0: 2863 6f6e 6c6c 5f66 696c 6529 3a0a 2020  (conll_file):.  
-00009ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009b00: 2020 6966 206c 616e 6775 6167 6520 3d3d    if language ==
-00009b10: 2022 6172 6162 6963 223a 0a20 2020 2020   "arabic":.     
-00009b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009b40: 2020 2074 7269 6d6d 6564 5f73 656e 7465     trimmed_sente
-00009b50: 6e63 6520 3d20 5b5f 7365 6e74 2e73 706c  nce = [_sent.spl
-00009b60: 6974 2822 2322 295b 305d 2066 6f72 205f  it("#")[0] for _
-00009b70: 7365 6e74 2069 6e20 7365 6e74 5b22 7365  sent in sent["se
-00009b80: 6e74 656e 6365 225d 5d0a 2020 2020 2020  ntence"]].      
-00009b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009bb0: 2020 7365 6e74 5b22 7365 6e74 656e 6365    sent["sentence
-00009bc0: 225d 203d 2074 7269 6d6d 6564 5f73 656e  "] = trimmed_sen
-00009bd0: 7465 6e63 650a 2020 2020 2020 2020 2020  tence.          
-00009be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009bf0: 2020 2020 2020 2020 2020 666f 7220 726f            for ro
-00009c00: 7720 696e 207a 6970 2873 656e 745b 2273  w in zip(sent["s
-00009c10: 656e 7465 6e63 6522 5d2c 2073 656e 745b  entence"], sent[
-00009c20: 2270 6f73 5f74 6167 7322 5d2c 2073 656e  "pos_tags"], sen
-00009c30: 745b 226e 616d 6564 5f65 6e74 6974 6965  t["named_entitie
-00009c40: 7322 5d29 3a0a 2020 2020 2020 2020 2020  s"]):.          
-00009c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009c60: 2020 2020 2020 2020 2020 2020 2020 662e                f.
-00009c70: 7772 6974 6528 225c 7422 2e6a 6f69 6e28  write("\t".join(
-00009c80: 726f 7729 202b 2022 5c6e 2229 0a20 2020  row) + "\n").   
-00009c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009cb0: 2066 2e77 7269 7465 2822 5c6e 2229 0a20   f.write("\n"). 
-00009cc0: 2020 2020 2020 2072 6574 7572 6e20 7072         return pr
-00009cd0: 6f63 6573 7365 645f 6461 7461 5f70 6174  ocessed_data_pat
-00009ce0: 680a 0a20 2020 2040 636c 6173 736d 6574  h..    @classmet
-00009cf0: 686f 640a 2020 2020 6465 6620 5f65 6e73  hod.    def _ens
-00009d00: 7572 655f 6461 7461 5f64 6f77 6e6c 6f61  ure_data_downloa
-00009d10: 6465 6428 636c 732c 2062 6173 655f 7061  ded(cls, base_pa
-00009d20: 7468 3a20 4f70 7469 6f6e 616c 5b55 6e69  th: Optional[Uni
-00009d30: 6f6e 5b73 7472 2c20 5061 7468 5d5d 203d  on[str, Path]] =
-00009d40: 204e 6f6e 6529 202d 3e20 5061 7468 3a0a   None) -> Path:.
-00009d50: 2020 2020 2020 2020 6261 7365 5f70 6174          base_pat
-00009d60: 6820 3d20 6b6f 6c69 6272 692e 6361 6368  h = kolibri.cach
-00009d70: 655f 726f 6f74 202f 2022 6461 7461 7365  e_root / "datase
-00009d80: 7473 2220 6966 206e 6f74 2062 6173 655f  ts" if not base_
-00009d90: 7061 7468 2065 6c73 6520 5061 7468 2862  path else Path(b
-00009da0: 6173 655f 7061 7468 290a 0a20 2020 2020  ase_path)..     
-00009db0: 2020 2064 6174 615f 666f 6c64 6572 203d     data_folder =
-00009dc0: 2062 6173 655f 7061 7468 202f 2022 636f   base_path / "co
-00009dd0: 6e6c 6c2d 3230 3132 220a 0a20 2020 2020  nll-2012"..     
-00009de0: 2020 2069 6620 6e6f 7420 6461 7461 5f66     if not data_f
-00009df0: 6f6c 6465 722e 6578 6973 7473 2829 3a0a  older.exists():.
-00009e00: 2020 2020 2020 2020 2020 2020 756e 7061              unpa
-00009e10: 636b 5f66 696c 6528 6361 6368 6564 5f70  ck_file(cached_p
-00009e20: 6174 6828 636c 732e 6172 6368 6976 655f  ath(cls.archive_
-00009e30: 7572 6c2c 2064 6174 615f 666f 6c64 6572  url, data_folder
-00009e40: 292c 2064 6174 615f 666f 6c64 6572 2e70  ), data_folder.p
-00009e50: 6172 656e 742c 2022 7a69 7022 2c20 4661  arent, "zip", Fa
-00009e60: 6c73 6529 0a0a 2020 2020 2020 2020 7265  lse)..        re
-00009e70: 7475 726e 2064 6174 615f 666f 6c64 6572  turn data_folder
-00009e80: 0a0a 2020 2020 4063 6c61 7373 6d65 7468  ..    @classmeth
-00009e90: 6f64 0a20 2020 2064 6566 205f 7072 6f63  od.    def _proc
-00009ea0: 6573 735f 636f 7265 665f 7370 616e 5f61  ess_coref_span_a
-00009eb0: 6e6e 6f74 6174 696f 6e73 5f66 6f72 5f77  nnotations_for_w
-00009ec0: 6f72 6428 0a20 2020 2020 2020 2063 6c73  ord(.        cls
-00009ed0: 2c0a 2020 2020 2020 2020 6c61 6265 6c3a  ,.        label:
-00009ee0: 2073 7472 2c0a 2020 2020 2020 2020 776f   str,.        wo
-00009ef0: 7264 5f69 6e64 6578 3a20 696e 742c 0a20  rd_index: int,. 
-00009f00: 2020 2020 2020 2063 6c75 7374 6572 733a         clusters:
-00009f10: 2044 6566 6175 6c74 4469 6374 5b69 6e74   DefaultDict[int
-00009f20: 2c20 4c69 7374 5b54 7570 6c65 5b69 6e74  , List[Tuple[int
-00009f30: 2c20 696e 745d 5d5d 2c0a 2020 2020 2020  , int]]],.      
-00009f40: 2020 636f 7265 665f 7374 6163 6b73 3a20    coref_stacks: 
-00009f50: 4465 6661 756c 7444 6963 745b 696e 742c  DefaultDict[int,
-00009f60: 204c 6973 745b 696e 745d 5d2c 0a20 2020   List[int]],.   
-00009f70: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-00009f80: 2020 2020 2222 2246 6f72 2061 2067 6976      """For a giv
-00009f90: 656e 2063 6f72 6566 206c 6162 656c 2c20  en coref label, 
-00009fa0: 6164 6420 6974 2074 6f20 6120 6375 7272  add it to a curr
-00009fb0: 656e 746c 7920 6f70 656e 2073 7061 6e28  ently open span(
-00009fc0: 7329 2c20 636f 6d70 6c65 7465 2061 2073  s), complete a s
-00009fd0: 7061 6e28 7329 206f 7220 6967 6e6f 7265  pan(s) or ignore
-00009fe0: 2069 742c 2069 6620 6974 2069 7320 6f75   it, if it is ou
-00009ff0: 7473 6964 6520 6f66 2061 6c6c 2073 7061  tside of all spa
-0000a000: 6e73 2e0a 0a20 2020 2020 2020 2054 6869  ns...        Thi
-0000a010: 7320 6d65 7468 6f64 206d 7574 6174 6573  s method mutates
-0000a020: 2074 6865 2063 6c75 7374 6572 7320 616e   the clusters an
-0000a030: 6420 636f 7265 665f 7374 6163 6b73 2064  d coref_stacks d
-0000a040: 6963 7469 6f6e 6172 6965 732e 0a0a 2020  ictionaries...  
-0000a050: 2020 2020 2020 4172 6773 3a0a 2020 2020        Args:.    
-0000a060: 2020 2020 2020 2020 6c61 6265 6c3a 2054          label: T
-0000a070: 6865 2063 6f72 6566 206c 6162 656c 2066  he coref label f
-0000a080: 6f72 2074 6869 7320 776f 7264 2e0a 2020  or this word..  
-0000a090: 2020 2020 2020 2020 2020 776f 7264 5f69            word_i
-0000a0a0: 6e64 6578 203a 2054 6865 2077 6f72 6420  ndex : The word 
-0000a0b0: 696e 6465 7820 696e 746f 2074 6865 2073  index into the s
-0000a0c0: 656e 7465 6e63 652e 0a20 2020 2020 2020  entence..       
-0000a0d0: 2020 2020 2063 6c75 7374 6572 7320 3a20       clusters : 
-0000a0e0: 4120 6469 6374 696f 6e61 7279 206d 6170  A dictionary map
-0000a0f0: 7069 6e67 2063 6c75 7374 6572 2069 6473  ping cluster ids
-0000a100: 2074 6f20 6c69 7374 7320 6f66 2069 6e63   to lists of inc
-0000a110: 6c75 7369 7665 2073 7061 6e73 2069 6e74  lusive spans int
-0000a120: 6f20 7468 6520 7365 6e74 656e 6365 2e0a  o the sentence..
-0000a130: 2020 2020 2020 2020 2020 2020 636f 7265              core
-0000a140: 665f 7374 6163 6b73 203a 2053 7461 636b  f_stacks : Stack
-0000a150: 7320 666f 7220 6561 6368 2063 6c75 7374  s for each clust
-0000a160: 6572 2069 6420 746f 2068 6f6c 6420 7468  er id to hold th
-0000a170: 6520 7374 6172 7420 696e 6469 6365 7320  e start indices 
-0000a180: 6f66 206f 7065 6e20 7370 616e 732e 2053  of open spans. S
-0000a190: 7061 6e73 2077 6974 6820 7468 6520 7361  pans with the sa
-0000a1a0: 6d65 2069 6420 6361 6e20 6265 206e 6573  me id can be nes
-0000a1b0: 7465 642c 2077 6869 6368 2069 7320 7768  ted, which is wh
-0000a1c0: 7920 7765 2063 6f6c 6c65 6374 2074 6865  y we collect the
-0000a1d0: 7365 206f 7065 6e69 6e67 2073 7061 6e73  se opening spans
-0000a1e0: 206f 6e20 6120 7374 6163 6b2c 2065 2e67   on a stack, e.g
-0000a1f0: 3a20 5b47 7265 672c 2074 6865 2062 616b  : [Greg, the bak
-0000a200: 6572 2077 686f 2072 6566 6572 7265 6420  er who referred 
-0000a210: 746f 205b 6869 6d73 656c 665d 5f49 4431  to [himself]_ID1
-0000a220: 2061 7320 2774 6865 2062 7265 6164 206d   as 'the bread m
-0000a230: 616e 275d 5f49 4431 0a20 2020 2020 2020  an']_ID1.       
-0000a240: 2022 2222 0a20 2020 2020 2020 2069 6620   """.        if 
-0000a250: 6c61 6265 6c20 213d 2022 2d22 3a0a 2020  label != "-":.  
-0000a260: 2020 2020 2020 2020 2020 666f 7220 7365            for se
-0000a270: 676d 656e 7420 696e 206c 6162 656c 2e73  gment in label.s
-0000a280: 706c 6974 2822 7c22 293a 0a20 2020 2020  plit("|"):.     
-0000a290: 2020 2020 2020 2020 2020 2023 2054 6865             # The
-0000a2a0: 2063 6f6e 6c6c 2072 6570 7265 7365 6e74   conll represent
-0000a2b0: 6174 696f 6e20 6f66 2063 6f72 6566 2073  ation of coref s
-0000a2c0: 7061 6e73 2061 6c6c 6f77 7320 7370 616e  pans allows span
-0000a2d0: 7320 746f 0a20 2020 2020 2020 2020 2020  s to.           
-0000a2e0: 2020 2020 2023 206f 7665 726c 6170 2e20       # overlap. 
-0000a2f0: 4966 2073 7061 6e73 2065 6e64 206f 7220  If spans end or 
-0000a300: 6265 6769 6e20 6174 2074 6865 2073 616d  begin at the sam
-0000a310: 6520 776f 7264 2c20 7468 6579 2061 7265  e word, they are
-0000a320: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a330: 2023 2073 6570 6172 6174 6564 2062 7920   # separated by 
-0000a340: 6120 227c 222e 0a20 2020 2020 2020 2020  a "|"..         
-0000a350: 2020 2020 2020 2069 6620 7365 676d 656e         if segmen
-0000a360: 745b 305d 203d 3d20 2228 223a 0a20 2020  t[0] == "(":.   
-0000a370: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a380: 2023 2054 6865 2073 7061 6e20 6265 6769   # The span begi
-0000a390: 6e73 2061 7420 7468 6973 2077 6f72 642e  ns at this word.
-0000a3a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a3b0: 2020 2020 2069 6620 7365 676d 656e 745b       if segment[
-0000a3c0: 2d31 5d20 3d3d 2022 2922 3a0a 2020 2020  -1] == ")":.    
-0000a3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a3e0: 2020 2020 2320 5468 6520 7370 616e 2062      # The span b
-0000a3f0: 6567 696e 7320 616e 6420 656e 6473 2061  egins and ends a
-0000a400: 7420 7468 6973 2077 6f72 6420 2873 696e  t this word (sin
-0000a410: 676c 6520 776f 7264 2073 7061 6e29 2e0a  gle word span)..
-0000a420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a430: 2020 2020 2020 2020 636c 7573 7465 725f          cluster_
-0000a440: 6964 203d 2069 6e74 2873 6567 6d65 6e74  id = int(segment
-0000a450: 5b31 3a2d 315d 290a 2020 2020 2020 2020  [1:-1]).        
-0000a460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a470: 636c 7573 7465 7273 5b63 6c75 7374 6572  clusters[cluster
-0000a480: 5f69 645d 2e61 7070 656e 6428 2877 6f72  _id].append((wor
-0000a490: 645f 696e 6465 782c 2077 6f72 645f 696e  d_index, word_in
-0000a4a0: 6465 7829 290a 2020 2020 2020 2020 2020  dex)).          
-0000a4b0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-0000a4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a4d0: 2020 2020 2020 2020 2320 5468 6520 7370          # The sp
-0000a4e0: 616e 2069 7320 7374 6172 7469 6e67 2c20  an is starting, 
-0000a4f0: 736f 2077 6520 7265 636f 7264 2074 6865  so we record the
-0000a500: 2069 6e64 6578 206f 6620 7468 6520 776f   index of the wo
-0000a510: 7264 2e0a 2020 2020 2020 2020 2020 2020  rd..            
-0000a520: 2020 2020 2020 2020 2020 2020 636c 7573              clus
-0000a530: 7465 725f 6964 203d 2069 6e74 2873 6567  ter_id = int(seg
-0000a540: 6d65 6e74 5b31 3a5d 290a 2020 2020 2020  ment[1:]).      
-0000a550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a560: 2020 636f 7265 665f 7374 6163 6b73 5b63    coref_stacks[c
-0000a570: 6c75 7374 6572 5f69 645d 2e61 7070 656e  luster_id].appen
-0000a580: 6428 776f 7264 5f69 6e64 6578 290a 2020  d(word_index).  
-0000a590: 2020 2020 2020 2020 2020 2020 2020 656c                el
-0000a5a0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0000a5b0: 2020 2020 2020 2020 2320 5468 6520 7370          # The sp
-0000a5c0: 616e 2066 6f72 2074 6869 7320 6964 2069  an for this id i
-0000a5d0: 7320 656e 6469 6e67 2c20 6275 7420 6469  s ending, but di
-0000a5e0: 646e 2774 2073 7461 7274 2061 7420 7468  dn't start at th
-0000a5f0: 6973 2077 6f72 642e 0a20 2020 2020 2020  is word..       
-0000a600: 2020 2020 2020 2020 2020 2020 2023 2052               # R
-0000a610: 6574 7269 6576 6520 7468 6520 7374 6172  etrieve the star
-0000a620: 7420 696e 6465 7820 6672 6f6d 2074 6865  t index from the
-0000a630: 2064 6f63 756d 656e 7420 7374 6174 6520   document state 
-0000a640: 616e 640a 2020 2020 2020 2020 2020 2020  and.            
-0000a650: 2020 2020 2020 2020 2320 6164 6420 7468          # add th
-0000a660: 6520 7370 616e 2074 6f20 7468 6520 636c  e span to the cl
-0000a670: 7573 7465 7273 2066 6f72 2074 6869 7320  usters for this 
-0000a680: 6964 2e0a 2020 2020 2020 2020 2020 2020  id..            
-0000a690: 2020 2020 2020 2020 636c 7573 7465 725f          cluster_
-0000a6a0: 6964 203d 2069 6e74 2873 6567 6d65 6e74  id = int(segment
-0000a6b0: 5b3a 2d31 5d29 0a20 2020 2020 2020 2020  [:-1]).         
-0000a6c0: 2020 2020 2020 2020 2020 2073 7461 7274             start
-0000a6d0: 203d 2063 6f72 6566 5f73 7461 636b 735b   = coref_stacks[
-0000a6e0: 636c 7573 7465 725f 6964 5d2e 706f 7028  cluster_id].pop(
-0000a6f0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0000a700: 2020 2020 2020 636c 7573 7465 7273 5b63        clusters[c
-0000a710: 6c75 7374 6572 5f69 645d 2e61 7070 656e  luster_id].appen
-0000a720: 6428 2873 7461 7274 2c20 776f 7264 5f69  d((start, word_i
-0000a730: 6e64 6578 2929 0a0a 2020 2020 4063 6c61  ndex))..    @cla
-0000a740: 7373 6d65 7468 6f64 0a20 2020 2064 6566  ssmethod.    def
-0000a750: 205f 7072 6f63 6573 735f 7370 616e 5f61   _process_span_a
-0000a760: 6e6e 6f74 6174 696f 6e73 5f66 6f72 5f77  nnotations_for_w
-0000a770: 6f72 6428 0a20 2020 2020 2020 2063 6c73  ord(.        cls
-0000a780: 2c0a 2020 2020 2020 2020 616e 6e6f 7461  ,.        annota
-0000a790: 7469 6f6e 733a 204c 6973 745b 7374 725d  tions: List[str]
-0000a7a0: 2c0a 2020 2020 2020 2020 7370 616e 5f6c  ,.        span_l
-0000a7b0: 6162 656c 733a 204c 6973 745b 4c69 7374  abels: List[List
-0000a7c0: 5b73 7472 5d5d 2c0a 2020 2020 2020 2020  [str]],.        
-0000a7d0: 6375 7272 656e 745f 7370 616e 5f6c 6162  current_span_lab
-0000a7e0: 656c 733a 204c 6973 745b 4f70 7469 6f6e  els: List[Option
-0000a7f0: 616c 5b73 7472 5d5d 2c0a 2020 2020 2920  al[str]],.    ) 
-0000a800: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
-0000a810: 2066 6f72 2061 6e6e 6f74 6174 696f 6e5f   for annotation_
-0000a820: 696e 6465 782c 2061 6e6e 6f74 6174 696f  index, annotatio
-0000a830: 6e20 696e 2065 6e75 6d65 7261 7465 2861  n in enumerate(a
-0000a840: 6e6e 6f74 6174 696f 6e73 293a 0a20 2020  nnotations):.   
-0000a850: 2020 2020 2020 2020 2023 2073 7472 6970           # strip
-0000a860: 2061 6c6c 2062 7261 636b 6574 696e 6720   all bracketing 
-0000a870: 696e 666f 726d 6174 696f 6e20 746f 0a20  information to. 
-0000a880: 2020 2020 2020 2020 2020 2023 2067 6574             # get
-0000a890: 2074 6865 2061 6374 7561 6c20 7072 6f70   the actual prop
-0000a8a0: 6261 6e6b 206c 6162 656c 2e0a 2020 2020  bank label..    
-0000a8b0: 2020 2020 2020 2020 6c61 6265 6c20 3d20          label = 
-0000a8c0: 616e 6e6f 7461 7469 6f6e 2e73 7472 6970  annotation.strip
-0000a8d0: 2822 2829 2a22 290a 0a20 2020 2020 2020  ("()*")..       
-0000a8e0: 2020 2020 2069 6620 2228 2220 696e 2061       if "(" in a
-0000a8f0: 6e6e 6f74 6174 696f 6e3a 0a20 2020 2020  nnotation:.     
-0000a900: 2020 2020 2020 2020 2020 2023 2045 6e74             # Ent
-0000a910: 6572 696e 6720 696e 746f 2061 2073 7061  ering into a spa
-0000a920: 6e20 666f 7220 6120 7061 7274 6963 756c  n for a particul
-0000a930: 6172 2073 656d 616e 7469 6320 726f 6c65  ar semantic role
-0000a940: 206c 6162 656c 2e0a 2020 2020 2020 2020   label..        
-0000a950: 2020 2020 2020 2020 2320 5765 2061 7070          # We app
-0000a960: 656e 6420 7468 6520 6c61 6265 6c20 616e  end the label an
-0000a970: 6420 7365 7420 7468 6520 6375 7272 656e  d set the curren
-0000a980: 7420 7370 616e 2066 6f72 2074 6869 7320  t span for this 
-0000a990: 616e 6e6f 7461 7469 6f6e 2e0a 2020 2020  annotation..    
-0000a9a0: 2020 2020 2020 2020 2020 2020 6269 6f5f              bio_
-0000a9b0: 6c61 6265 6c20 3d20 2242 2d22 202b 206c  label = "B-" + l
-0000a9c0: 6162 656c 0a20 2020 2020 2020 2020 2020  abel.           
-0000a9d0: 2020 2020 2073 7061 6e5f 6c61 6265 6c73       span_labels
-0000a9e0: 5b61 6e6e 6f74 6174 696f 6e5f 696e 6465  [annotation_inde
-0000a9f0: 785d 2e61 7070 656e 6428 6269 6f5f 6c61  x].append(bio_la
-0000aa00: 6265 6c29 0a20 2020 2020 2020 2020 2020  bel).           
-0000aa10: 2020 2020 2063 7572 7265 6e74 5f73 7061       current_spa
-0000aa20: 6e5f 6c61 6265 6c73 5b61 6e6e 6f74 6174  n_labels[annotat
-0000aa30: 696f 6e5f 696e 6465 785d 203d 206c 6162  ion_index] = lab
-0000aa40: 656c 0a20 2020 2020 2020 2020 2020 2065  el.            e
-0000aa50: 6c69 6620 6375 7272 656e 745f 7370 616e  lif current_span
-0000aa60: 5f6c 6162 656c 735b 616e 6e6f 7461 7469  _labels[annotati
-0000aa70: 6f6e 5f69 6e64 6578 5d20 6973 206e 6f74  on_index] is not
-0000aa80: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-0000aa90: 2020 2020 2020 2023 2049 6620 7468 6572         # If ther
-0000aaa0: 6527 7320 6e6f 2027 2827 2074 6f6b 656e  e's no '(' token
-0000aab0: 2c20 6275 7420 7468 6520 6375 7272 656e  , but the curren
-0000aac0: 745f 7370 616e 5f6c 6162 656c 2069 7320  t_span_label is 
-0000aad0: 6e6f 7420 4e6f 6e65 2c0a 2020 2020 2020  not None,.      
-0000aae0: 2020 2020 2020 2020 2020 2320 7468 656e            # then
-0000aaf0: 2077 6520 6172 6520 696e 7369 6465 2061   we are inside a
-0000ab00: 2073 7061 6e2e 0a20 2020 2020 2020 2020   span..         
-0000ab10: 2020 2020 2020 2062 696f 5f6c 6162 656c         bio_label
-0000ab20: 203d 2022 492d 2220 2b20 6361 7374 2873   = "I-" + cast(s
-0000ab30: 7472 2c20 6375 7272 656e 745f 7370 616e  tr, current_span
-0000ab40: 5f6c 6162 656c 735b 616e 6e6f 7461 7469  _labels[annotati
-0000ab50: 6f6e 5f69 6e64 6578 5d29 0a20 2020 2020  on_index]).     
-0000ab60: 2020 2020 2020 2020 2020 2073 7061 6e5f             span_
-0000ab70: 6c61 6265 6c73 5b61 6e6e 6f74 6174 696f  labels[annotatio
-0000ab80: 6e5f 696e 6465 785d 2e61 7070 656e 6428  n_index].append(
-0000ab90: 6269 6f5f 6c61 6265 6c29 0a20 2020 2020  bio_label).     
-0000aba0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0000abb0: 2020 2020 2020 2020 2020 2020 2023 2057               # W
-0000abc0: 6527 7265 206f 7574 7369 6465 2061 2073  e're outside a s
-0000abd0: 7061 6e2e 0a20 2020 2020 2020 2020 2020  pan..           
-0000abe0: 2020 2020 2073 7061 6e5f 6c61 6265 6c73       span_labels
-0000abf0: 5b61 6e6e 6f74 6174 696f 6e5f 696e 6465  [annotation_inde
-0000ac00: 785d 2e61 7070 656e 6428 224f 2229 0a20  x].append("O"). 
-0000ac10: 2020 2020 2020 2020 2020 2023 2045 7869             # Exi
-0000ac20: 7469 6e67 2061 2073 7061 6e2c 2073 6f20  ting a span, so 
-0000ac30: 7765 2072 6573 6574 2074 6865 2063 7572  we reset the cur
-0000ac40: 7265 6e74 2073 7061 6e20 6c61 6265 6c20  rent span label 
-0000ac50: 666f 7220 7468 6973 2061 6e6e 6f74 6174  for this annotat
-0000ac60: 696f 6e2e 0a20 2020 2020 2020 2020 2020  ion..           
-0000ac70: 2069 6620 2229 2220 696e 2061 6e6e 6f74   if ")" in annot
-0000ac80: 6174 696f 6e3a 0a20 2020 2020 2020 2020  ation:.         
-0000ac90: 2020 2020 2020 2063 7572 7265 6e74 5f73         current_s
-0000aca0: 7061 6e5f 6c61 6265 6c73 5b61 6e6e 6f74  pan_labels[annot
-0000acb0: 6174 696f 6e5f 696e 6465 785d 203d 204e  ation_index] = N
-0000acc0: 6f6e 650a 0a20 2020 2040 636c 6173 736d  one..    @classm
-0000acd0: 6574 686f 640a 2020 2020 6465 6620 5f63  ethod.    def _c
-0000ace0: 6f6e 6c6c 5f72 6f77 735f 746f 5f73 656e  onll_rows_to_sen
-0000acf0: 7465 6e63 6528 636c 732c 2063 6f6e 6c6c  tence(cls, conll
-0000ad00: 5f72 6f77 733a 204c 6973 745b 7374 725d  _rows: List[str]
-0000ad10: 2920 2d3e 2044 6963 743a 0a20 2020 2020  ) -> Dict:.     
-0000ad20: 2020 2064 6f63 756d 656e 745f 6964 3a20     document_id: 
-0000ad30: 7374 720a 2020 2020 2020 2020 7365 6e74  str.        sent
-0000ad40: 656e 6365 5f69 643a 2069 6e74 0a20 2020  ence_id: int.   
-0000ad50: 2020 2020 2023 2054 6865 2077 6f72 6473       # The words
-0000ad60: 2069 6e20 7468 6520 7365 6e74 656e 6365   in the sentence
-0000ad70: 2e0a 2020 2020 2020 2020 7365 6e74 656e  ..        senten
-0000ad80: 6365 3a20 4c69 7374 5b73 7472 5d20 3d20  ce: List[str] = 
-0000ad90: 5b5d 0a20 2020 2020 2020 2023 2054 6865  [].        # The
-0000ada0: 2070 6f73 2074 6167 7320 6f66 2074 6865   pos tags of the
-0000adb0: 2077 6f72 6473 2069 6e20 7468 6520 7365   words in the se
-0000adc0: 6e74 656e 6365 2e0a 2020 2020 2020 2020  ntence..        
-0000add0: 706f 735f 7461 6773 3a20 4c69 7374 5b73  pos_tags: List[s
-0000ade0: 7472 5d20 3d20 5b5d 0a20 2020 2020 2020  tr] = [].       
-0000adf0: 2023 2074 6865 2070 6965 6365 7320 6f66   # the pieces of
-0000ae00: 2074 6865 2070 6172 7365 2074 7265 652e   the parse tree.
-0000ae10: 0a20 2020 2020 2020 2070 6172 7365 5f70  .        parse_p
-0000ae20: 6965 6365 733a 204c 6973 745b 4f70 7469  ieces: List[Opti
-0000ae30: 6f6e 616c 5b73 7472 5d5d 203d 205b 5d0a  onal[str]] = [].
-0000ae40: 2020 2020 2020 2020 2320 5468 6520 6c65          # The le
-0000ae50: 6d6d 6174 6973 6564 2066 6f72 6d20 6f66  mmatised form of
-0000ae60: 2074 6865 2077 6f72 6473 2069 6e20 7468   the words in th
-0000ae70: 6520 7365 6e74 656e 6365 2077 6869 6368  e sentence which
-0000ae80: 0a20 2020 2020 2020 2023 2068 6176 6520  .        # have 
-0000ae90: 5352 4c20 6f72 2077 6f72 6420 7365 6e73  SRL or word sens
-0000aea0: 6520 696e 666f 726d 6174 696f 6e2e 0a20  e information.. 
-0000aeb0: 2020 2020 2020 2070 7265 6469 6361 7465         predicate
-0000aec0: 5f6c 656d 6d61 733a 204c 6973 745b 4f70  _lemmas: List[Op
-0000aed0: 7469 6f6e 616c 5b73 7472 5d5d 203d 205b  tional[str]] = [
-0000aee0: 5d0a 2020 2020 2020 2020 2320 5468 6520  ].        # The 
-0000aef0: 4672 616d 654e 6574 2049 4420 6f66 2074  FrameNet ID of t
-0000af00: 6865 2070 7265 6469 6361 7465 2e0a 2020  he predicate..  
-0000af10: 2020 2020 2020 7072 6564 6963 6174 655f        predicate_
-0000af20: 6672 616d 656e 6574 5f69 6473 3a20 4c69  framenet_ids: Li
-0000af30: 7374 5b4f 7074 696f 6e61 6c5b 7374 725d  st[Optional[str]
-0000af40: 5d20 3d20 5b5d 0a20 2020 2020 2020 2023  ] = [].        #
-0000af50: 2054 6865 2073 656e 7365 206f 6620 7468   The sense of th
-0000af60: 6520 776f 7264 2c20 6966 2061 7661 696c  e word, if avail
-0000af70: 6162 6c65 2e0a 2020 2020 2020 2020 776f  able..        wo
-0000af80: 7264 5f73 656e 7365 733a 204c 6973 745b  rd_senses: List[
-0000af90: 4f70 7469 6f6e 616c 5b66 6c6f 6174 5d5d  Optional[float]]
-0000afa0: 203d 205b 5d0a 2020 2020 2020 2020 2320   = [].        # 
-0000afb0: 5468 6520 6375 7272 656e 7420 7370 6561  The current spea
-0000afc0: 6b65 722c 2069 6620 6176 6169 6c61 626c  ker, if availabl
-0000afd0: 652e 0a20 2020 2020 2020 2073 7065 616b  e..        speak
-0000afe0: 6572 733a 204c 6973 745b 4f70 7469 6f6e  ers: List[Option
-0000aff0: 616c 5b73 7472 5d5d 203d 205b 5d0a 0a20  al[str]] = [].. 
-0000b000: 2020 2020 2020 2076 6572 6261 6c5f 7072         verbal_pr
-0000b010: 6564 6963 6174 6573 3a20 4c69 7374 5b73  edicates: List[s
-0000b020: 7472 5d20 3d20 5b5d 0a20 2020 2020 2020  tr] = [].       
-0000b030: 2073 7061 6e5f 6c61 6265 6c73 3a20 4c69   span_labels: Li
-0000b040: 7374 5b4c 6973 745b 7374 725d 5d20 3d20  st[List[str]] = 
-0000b050: 5b5d 0a20 2020 2020 2020 2063 7572 7265  [].        curre
-0000b060: 6e74 5f73 7061 6e5f 6c61 6265 6c73 3a20  nt_span_labels: 
-0000b070: 4c69 7374 5b4f 7074 696f 6e61 6c5b 7374  List[Optional[st
-0000b080: 725d 5d20 3d20 5b5d 0a0a 2020 2020 2020  r]] = []..      
-0000b090: 2020 2320 436c 7573 7465 7220 6964 202d    # Cluster id -
-0000b0a0: 3e20 4c69 7374 206f 6620 2873 7461 7274  > List of (start
-0000b0b0: 5f69 6e64 6578 2c20 656e 645f 696e 6465  _index, end_inde
-0000b0c0: 7829 2073 7061 6e73 2e0a 2020 2020 2020  x) spans..      
-0000b0d0: 2020 636c 7573 7465 7273 3a20 4465 6661    clusters: Defa
-0000b0e0: 756c 7444 6963 745b 696e 742c 204c 6973  ultDict[int, Lis
-0000b0f0: 745b 5475 706c 655b 696e 742c 2069 6e74  t[Tuple[int, int
-0000b100: 5d5d 5d20 3d20 6465 6661 756c 7464 6963  ]]] = defaultdic
-0000b110: 7428 6c69 7374 290a 2020 2020 2020 2020  t(list).        
-0000b120: 2320 436c 7573 7465 7220 6964 202d 3e20  # Cluster id -> 
-0000b130: 4c69 7374 206f 6620 7374 6172 745f 696e  List of start_in
-0000b140: 6469 6365 7320 7768 6963 6820 6172 6520  dices which are 
-0000b150: 6f70 656e 2066 6f72 2074 6869 7320 6964  open for this id
-0000b160: 2e0a 2020 2020 2020 2020 636f 7265 665f  ..        coref_
-0000b170: 7374 6163 6b73 3a20 4465 6661 756c 7444  stacks: DefaultD
-0000b180: 6963 745b 696e 742c 204c 6973 745b 696e  ict[int, List[in
-0000b190: 745d 5d20 3d20 6465 6661 756c 7464 6963  t]] = defaultdic
-0000b1a0: 7428 6c69 7374 290a 0a20 2020 2020 2020  t(list)..       
-0000b1b0: 2066 6f72 2069 6e64 6578 2c20 726f 7720   for index, row 
-0000b1c0: 696e 2065 6e75 6d65 7261 7465 2863 6f6e  in enumerate(con
-0000b1d0: 6c6c 5f72 6f77 7329 3a0a 2020 2020 2020  ll_rows):.      
-0000b1e0: 2020 2020 2020 636f 6e6c 6c5f 636f 6d70        conll_comp
-0000b1f0: 6f6e 656e 7473 203d 2072 6f77 2e73 706c  onents = row.spl
-0000b200: 6974 2829 0a0a 2020 2020 2020 2020 2020  it()..          
-0000b210: 2020 646f 6375 6d65 6e74 5f69 6420 3d20    document_id = 
-0000b220: 636f 6e6c 6c5f 636f 6d70 6f6e 656e 7473  conll_components
-0000b230: 5b30 5d0a 2020 2020 2020 2020 2020 2020  [0].            
-0000b240: 7365 6e74 656e 6365 5f69 6420 3d20 696e  sentence_id = in
-0000b250: 7428 636f 6e6c 6c5f 636f 6d70 6f6e 656e  t(conll_componen
-0000b260: 7473 5b31 5d29 0a20 2020 2020 2020 2020  ts[1]).         
-0000b270: 2020 2077 6f72 6420 3d20 636f 6e6c 6c5f     word = conll_
-0000b280: 636f 6d70 6f6e 656e 7473 5b33 5d0a 2020  components[3].  
-0000b290: 2020 2020 2020 2020 2020 706f 735f 7461            pos_ta
-0000b2a0: 6720 3d20 636f 6e6c 6c5f 636f 6d70 6f6e  g = conll_compon
-0000b2b0: 656e 7473 5b34 5d0a 0a20 2020 2020 2020  ents[4]..       
-0000b2c0: 2020 2020 2070 6172 7365 5f70 6965 6365       parse_piece
-0000b2d0: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d0a  : Optional[str].
-0000b2e0: 0a20 2020 2020 2020 2020 2020 2023 2052  .            # R
-0000b2f0: 6570 6c61 6365 2062 7261 636b 6574 7320  eplace brackets 
-0000b300: 696e 2074 6578 7420 616e 6420 706f 7320  in text and pos 
-0000b310: 7461 6773 0a20 2020 2020 2020 2020 2020  tags.           
-0000b320: 2023 2077 6974 6820 6120 6469 6666 6572   # with a differ
-0000b330: 656e 7420 746f 6b65 6e20 666f 7220 7061  ent token for pa
-0000b340: 7273 6520 7472 6565 732e 0a20 2020 2020  rse trees..     
-0000b350: 2020 2020 2020 2069 6620 706f 735f 7461         if pos_ta
-0000b360: 6720 213d 2022 5858 2220 616e 6420 776f  g != "XX" and wo
-0000b370: 7264 2021 3d20 2258 5822 3a0a 2020 2020  rd != "XX":.    
-0000b380: 2020 2020 2020 2020 2020 2020 6966 2077              if w
-0000b390: 6f72 6420 3d3d 2022 2822 3a0a 2020 2020  ord == "(":.    
-0000b3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b3b0: 7061 7273 655f 776f 7264 203d 2022 2d4c  parse_word = "-L
-0000b3c0: 5242 2d22 0a20 2020 2020 2020 2020 2020  RB-".           
-0000b3d0: 2020 2020 2065 6c69 6620 776f 7264 203d       elif word =
-0000b3e0: 3d20 2229 223a 0a20 2020 2020 2020 2020  = ")":.         
-0000b3f0: 2020 2020 2020 2020 2020 2070 6172 7365             parse
-0000b400: 5f77 6f72 6420 3d20 222d 5252 422d 220a  _word = "-RRB-".
-0000b410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b420: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0000b430: 2020 2020 2020 2020 2020 7061 7273 655f            parse_
-0000b440: 776f 7264 203d 2077 6f72 640a 2020 2020  word = word.    
-0000b450: 2020 2020 2020 2020 2020 2020 6966 2070              if p
-0000b460: 6f73 5f74 6167 203d 3d20 2228 223a 0a20  os_tag == "(":. 
-0000b470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b480: 2020 2070 6f73 5f74 6167 203d 2022 2d4c     pos_tag = "-L
-0000b490: 5242 2d22 0a20 2020 2020 2020 2020 2020  RB-".           
-0000b4a0: 2020 2020 2069 6620 706f 735f 7461 6720       if pos_tag 
-0000b4b0: 3d3d 2022 2922 3a0a 2020 2020 2020 2020  == ")":.        
-0000b4c0: 2020 2020 2020 2020 2020 2020 706f 735f              pos_
-0000b4d0: 7461 6720 3d20 222d 5252 422d 220a 2020  tag = "-RRB-".  
-0000b4e0: 2020 2020 2020 2020 2020 2020 2020 286c                (l
-0000b4f0: 6566 745f 6272 6163 6b65 7473 2c20 7269  eft_brackets, ri
-0000b500: 6768 745f 6861 6e64 5f73 6964 6529 203d  ght_hand_side) =
-0000b510: 2063 6f6e 6c6c 5f63 6f6d 706f 6e65 6e74   conll_component
-0000b520: 735b 355d 2e73 706c 6974 2822 2a22 290a  s[5].split("*").
-0000b530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b540: 2320 6f6e 6c79 206b 6565 7020 2729 2720  # only keep ')' 
-0000b550: 6966 2074 6865 7265 2061 7265 206e 6573  if there are nes
-0000b560: 7465 6420 6272 6163 6b65 7473 2077 6974  ted brackets wit
-0000b570: 6820 6e6f 7468 696e 6720 696e 2074 6865  h nothing in the
-0000b580: 6d2e 0a20 2020 2020 2020 2020 2020 2020  m..             
-0000b590: 2020 2072 6967 6874 5f62 7261 636b 6574     right_bracket
-0000b5a0: 7320 3d20 7269 6768 745f 6861 6e64 5f73  s = right_hand_s
-0000b5b0: 6964 652e 636f 756e 7428 2229 2229 202a  ide.count(")") *
-0000b5c0: 2022 2922 0a20 2020 2020 2020 2020 2020   ")".           
-0000b5d0: 2020 2020 2070 6172 7365 5f70 6965 6365       parse_piece
-0000b5e0: 203d 2066 227b 6c65 6674 5f62 7261 636b   = f"{left_brack
-0000b5f0: 6574 737d 2028 7b70 6f73 5f74 6167 7d20  ets} ({pos_tag} 
-0000b600: 7b70 6172 7365 5f77 6f72 647d 2920 7b72  {parse_word}) {r
-0000b610: 6967 6874 5f62 7261 636b 6574 737d 220a  ight_brackets}".
-0000b620: 2020 2020 2020 2020 2020 2020 656c 7365              else
-0000b630: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000b640: 2020 2320 5468 6572 6520 6172 6520 736f    # There are so
-0000b650: 6d65 2062 6164 2061 6e6e 6f74 6174 696f  me bad annotatio
-0000b660: 6e73 2069 6e20 7468 6520 434f 4e4c 4c20  ns in the CONLL 
-0000b670: 6461 7461 2e0a 2020 2020 2020 2020 2020  data..          
-0000b680: 2020 2020 2020 2320 5468 6579 2063 6f6e        # They con
-0000b690: 7461 696e 206e 6f20 696e 666f 726d 6174  tain no informat
-0000b6a0: 696f 6e2c 2073 6f20 746f 206d 616b 6520  ion, so to make 
-0000b6b0: 7468 6973 2065 7870 6c69 6369 742c 0a20  this explicit,. 
-0000b6c0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0000b6d0: 2077 6520 6a75 7374 2073 6574 2074 6865   we just set the
-0000b6e0: 2070 6172 7365 2070 6965 6365 2074 6f20   parse piece to 
-0000b6f0: 6265 204e 6f6e 6520 7768 6963 6820 7769  be None which wi
-0000b700: 6c6c 2072 6573 756c 740a 2020 2020 2020  ll result.      
-0000b710: 2020 2020 2020 2020 2020 2320 696e 2074            # in t
-0000b720: 6865 206f 7665 7261 6c6c 2070 6172 7365  he overall parse
-0000b730: 2074 7265 6520 6265 696e 6720 4e6f 6e65   tree being None
-0000b740: 2e0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000b750: 2020 7061 7273 655f 7069 6563 6520 3d20    parse_piece = 
-0000b760: 4e6f 6e65 0a0a 2020 2020 2020 2020 2020  None..          
-0000b770: 2020 6c65 6d6d 6174 6973 6564 5f77 6f72    lemmatised_wor
-0000b780: 6420 3d20 636f 6e6c 6c5f 636f 6d70 6f6e  d = conll_compon
-0000b790: 656e 7473 5b36 5d0a 2020 2020 2020 2020  ents[6].        
-0000b7a0: 2020 2020 6672 616d 656e 6574 5f69 6420      framenet_id 
-0000b7b0: 3d20 636f 6e6c 6c5f 636f 6d70 6f6e 656e  = conll_componen
-0000b7c0: 7473 5b37 5d0a 2020 2020 2020 2020 2020  ts[7].          
-0000b7d0: 2020 776f 7264 5f73 656e 7365 203d 2063    word_sense = c
-0000b7e0: 6f6e 6c6c 5f63 6f6d 706f 6e65 6e74 735b  onll_components[
-0000b7f0: 385d 0a20 2020 2020 2020 2020 2020 2073  8].            s
-0000b800: 7065 616b 6572 203d 2063 6f6e 6c6c 5f63  peaker = conll_c
-0000b810: 6f6d 706f 6e65 6e74 735b 395d 0a0a 2020  omponents[9]..  
-0000b820: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-0000b830: 2073 7061 6e5f 6c61 6265 6c73 3a0a 2020   span_labels:.  
-0000b840: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0000b850: 4966 2074 6869 7320 6973 2074 6865 2066  If this is the f
-0000b860: 6972 7374 2077 6f72 6420 696e 2074 6865  irst word in the
-0000b870: 2073 656e 7465 6e63 652c 2063 7265 6174   sentence, creat
-0000b880: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-0000b890: 2020 2320 656d 7074 7920 6c69 7374 7320    # empty lists 
-0000b8a0: 746f 2063 6f6c 6c65 6374 2074 6865 204e  to collect the N
-0000b8b0: 4552 2061 6e64 2053 524c 2042 494f 206c  ER and SRL BIO l
-0000b8c0: 6162 656c 732e 0a20 2020 2020 2020 2020  abels..         
-0000b8d0: 2020 2020 2020 2023 2057 6520 6361 6e27         # We can'
-0000b8e0: 7420 646f 2074 6869 7320 7570 6672 6f6e  t do this upfron
-0000b8f0: 742c 2062 6563 6175 7365 2077 6520 646f  t, because we do
-0000b900: 6e27 7420 6b6e 6f77 2068 6f77 206d 616e  n't know how man
-0000b910: 790a 2020 2020 2020 2020 2020 2020 2020  y.              
-0000b920: 2020 2320 636f 6d70 6f6e 656e 7473 2077    # components w
-0000b930: 6520 6172 6520 636f 6c6c 6563 7469 6e67  e are collecting
-0000b940: 2c20 6173 2061 2073 656e 7465 6e63 6520  , as a sentence 
-0000b950: 6361 6e20 6861 7665 0a20 2020 2020 2020  can have.       
-0000b960: 2020 2020 2020 2020 2023 2076 6172 6961           # varia
-0000b970: 626c 6520 6e75 6d62 6572 7320 6f66 2053  ble numbers of S
-0000b980: 524c 2066 7261 6d65 732e 0a20 2020 2020  RL frames..     
-0000b990: 2020 2020 2020 2020 2020 2073 7061 6e5f             span_
-0000b9a0: 6c61 6265 6c73 203d 205b 5b5d 2066 6f72  labels = [[] for
-0000b9b0: 205f 2069 6e20 636f 6e6c 6c5f 636f 6d70   _ in conll_comp
-0000b9c0: 6f6e 656e 7473 5b31 303a 2d31 5d5d 0a20  onents[10:-1]]. 
-0000b9d0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0000b9e0: 2043 7265 6174 6520 7661 7269 6162 6c65   Create variable
-0000b9f0: 7320 7265 7072 6573 656e 7469 6e67 2074  s representing t
-0000ba00: 6865 2063 7572 7265 6e74 206c 6162 656c  he current label
-0000ba10: 2066 6f72 2065 6163 6820 6c61 6265 6c0a   for each label.
-0000ba20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba30: 2320 7365 7175 656e 6365 2077 6520 6172  # sequence we ar
-0000ba40: 6520 636f 6c6c 6563 7469 6e67 2e0a 2020  e collecting..  
-0000ba50: 2020 2020 2020 2020 2020 2020 2020 6375                cu
-0000ba60: 7272 656e 745f 7370 616e 5f6c 6162 656c  rrent_span_label
-0000ba70: 7320 3d20 5b4e 6f6e 6520 666f 7220 5f20  s = [None for _ 
-0000ba80: 696e 2063 6f6e 6c6c 5f63 6f6d 706f 6e65  in conll_compone
-0000ba90: 6e74 735b 3130 3a2d 315d 5d0a 0a20 2020  nts[10:-1]]..   
-0000baa0: 2020 2020 2020 2020 2063 6c73 2e5f 7072           cls._pr
-0000bab0: 6f63 6573 735f 7370 616e 5f61 6e6e 6f74  ocess_span_annot
-0000bac0: 6174 696f 6e73 5f66 6f72 5f77 6f72 6428  ations_for_word(
-0000bad0: 636f 6e6c 6c5f 636f 6d70 6f6e 656e 7473  conll_components
-0000bae0: 5b31 303a 2d31 5d2c 2073 7061 6e5f 6c61  [10:-1], span_la
-0000baf0: 6265 6c73 2c20 6375 7272 656e 745f 7370  bels, current_sp
-0000bb00: 616e 5f6c 6162 656c 7329 0a0a 2020 2020  an_labels)..    
-0000bb10: 2020 2020 2020 2020 2320 4966 2061 6e79          # If any
-0000bb20: 2061 6e6e 6f74 6174 696f 6e20 6d61 726b   annotation mark
-0000bb30: 7320 7468 6973 2077 6f72 6420 6173 2061  s this word as a
-0000bb40: 2076 6572 6220 7072 6564 6963 6174 652c   verb predicate,
-0000bb50: 0a20 2020 2020 2020 2020 2020 2023 2077  .            # w
-0000bb60: 6520 6e65 6564 2074 6f20 7265 636f 7264  e need to record
-0000bb70: 2069 7473 2069 6e64 6578 2e20 5468 6973   its index. This
-0000bb80: 2061 6c73 6f20 6861 7320 7468 6520 7369   also has the si
-0000bb90: 6465 2065 6666 6563 740a 2020 2020 2020  de effect.      
-0000bba0: 2020 2020 2020 2320 6f66 206f 7264 6572        # of order
-0000bbb0: 696e 6720 7468 6520 7665 7262 616c 2070  ing the verbal p
-0000bbc0: 7265 6469 6361 7465 7320 6279 2074 6865  redicates by the
-0000bbd0: 6972 206c 6f63 6174 696f 6e20 696e 2074  ir location in t
-0000bbe0: 6865 0a20 2020 2020 2020 2020 2020 2023  he.            #
-0000bbf0: 2073 656e 7465 6e63 652c 2061 7574 6f6d   sentence, autom
-0000bc00: 6174 6963 616c 6c79 2061 6c69 676e 696e  atically alignin
-0000bc10: 6720 7468 656d 2077 6974 6820 7468 6520  g them with the 
-0000bc20: 616e 6e6f 7461 7469 6f6e 732e 0a20 2020  annotations..   
-0000bc30: 2020 2020 2020 2020 2077 6f72 645f 6973           word_is
-0000bc40: 5f76 6572 6261 6c5f 7072 6564 6963 6174  _verbal_predicat
-0000bc50: 6520 3d20 616e 7928 2228 5622 2069 6e20  e = any("(V" in 
-0000bc60: 7820 666f 7220 7820 696e 2063 6f6e 6c6c  x for x in conll
-0000bc70: 5f63 6f6d 706f 6e65 6e74 735b 3131 3a2d  _components[11:-
-0000bc80: 315d 290a 2020 2020 2020 2020 2020 2020  1]).            
-0000bc90: 6966 2077 6f72 645f 6973 5f76 6572 6261  if word_is_verba
-0000bca0: 6c5f 7072 6564 6963 6174 653a 0a20 2020  l_predicate:.   
-0000bcb0: 2020 2020 2020 2020 2020 2020 2076 6572               ver
-0000bcc0: 6261 6c5f 7072 6564 6963 6174 6573 2e61  bal_predicates.a
-0000bcd0: 7070 656e 6428 776f 7264 290a 0a20 2020  ppend(word)..   
-0000bce0: 2020 2020 2020 2020 2063 6c73 2e5f 7072           cls._pr
-0000bcf0: 6f63 6573 735f 636f 7265 665f 7370 616e  ocess_coref_span
-0000bd00: 5f61 6e6e 6f74 6174 696f 6e73 5f66 6f72  _annotations_for
-0000bd10: 5f77 6f72 6428 636f 6e6c 6c5f 636f 6d70  _word(conll_comp
-0000bd20: 6f6e 656e 7473 5b2d 315d 2c20 696e 6465  onents[-1], inde
-0000bd30: 782c 2063 6c75 7374 6572 732c 2063 6f72  x, clusters, cor
-0000bd40: 6566 5f73 7461 636b 7329 0a0a 2020 2020  ef_stacks)..    
-0000bd50: 2020 2020 2020 2020 7365 6e74 656e 6365          sentence
-0000bd60: 2e61 7070 656e 6428 776f 7264 290a 2020  .append(word).  
-0000bd70: 2020 2020 2020 2020 2020 706f 735f 7461            pos_ta
-0000bd80: 6773 2e61 7070 656e 6428 706f 735f 7461  gs.append(pos_ta
-0000bd90: 6729 0a20 2020 2020 2020 2020 2020 2070  g).            p
-0000bda0: 6172 7365 5f70 6965 6365 732e 6170 7065  arse_pieces.appe
-0000bdb0: 6e64 2870 6172 7365 5f70 6965 6365 290a  nd(parse_piece).
-0000bdc0: 2020 2020 2020 2020 2020 2020 7072 6564              pred
-0000bdd0: 6963 6174 655f 6c65 6d6d 6173 2e61 7070  icate_lemmas.app
-0000bde0: 656e 6428 6c65 6d6d 6174 6973 6564 5f77  end(lemmatised_w
-0000bdf0: 6f72 6420 6966 206c 656d 6d61 7469 7365  ord if lemmatise
-0000be00: 645f 776f 7264 2021 3d20 222d 2220 656c  d_word != "-" el
-0000be10: 7365 204e 6f6e 6529 0a20 2020 2020 2020  se None).       
-0000be20: 2020 2020 2070 7265 6469 6361 7465 5f66       predicate_f
-0000be30: 7261 6d65 6e65 745f 6964 732e 6170 7065  ramenet_ids.appe
-0000be40: 6e64 2866 7261 6d65 6e65 745f 6964 2069  nd(framenet_id i
-0000be50: 6620 6672 616d 656e 6574 5f69 6420 213d  f framenet_id !=
-0000be60: 2022 2d22 2065 6c73 6520 4e6f 6e65 290a   "-" else None).
-0000be70: 2020 2020 2020 2020 2020 2020 776f 7264              word
-0000be80: 5f73 656e 7365 732e 6170 7065 6e64 2866  _senses.append(f
-0000be90: 6c6f 6174 2877 6f72 645f 7365 6e73 6529  loat(word_sense)
-0000bea0: 2069 6620 776f 7264 5f73 656e 7365 2021   if word_sense !
-0000beb0: 3d20 222d 2220 656c 7365 204e 6f6e 6529  = "-" else None)
-0000bec0: 0a20 2020 2020 2020 2020 2020 2073 7065  .            spe
-0000bed0: 616b 6572 732e 6170 7065 6e64 2873 7065  akers.append(spe
-0000bee0: 616b 6572 2069 6620 7370 6561 6b65 7220  aker if speaker 
-0000bef0: 213d 2022 2d22 2065 6c73 6520 4e6f 6e65  != "-" else None
-0000bf00: 290a 0a20 2020 2020 2020 206e 616d 6564  )..        named
-0000bf10: 5f65 6e74 6974 6965 7320 3d20 7370 616e  _entities = span
-0000bf20: 5f6c 6162 656c 735b 305d 0a20 2020 2020  _labels[0].     
-0000bf30: 2020 2073 726c 5f66 7261 6d65 7320 3d20     srl_frames = 
-0000bf40: 6c69 7374 287a 6970 2876 6572 6261 6c5f  list(zip(verbal_
-0000bf50: 7072 6564 6963 6174 6573 2c20 7370 616e  predicates, span
-0000bf60: 5f6c 6162 656c 735b 313a 5d29 290a 0a20  _labels[1:])).. 
-0000bf70: 2020 2020 2020 2023 2074 6869 7320 776f         # this wo
-0000bf80: 756c 6420 6e6f 7420 6265 2072 6561 6368  uld not be reach
-0000bf90: 6564 2069 6620 7061 7273 655f 7069 6563  ed if parse_piec
-0000bfa0: 6573 2063 6f6e 7461 696e 6564 204e 6f6e  es contained Non
-0000bfb0: 652c 2068 656e 6365 2074 6865 2063 6173  e, hence the cas
-0000bfc0: 740a 2020 2020 2020 2020 7061 7273 655f  t.        parse_
-0000bfd0: 7472 6565 203d 2022 222e 6a6f 696e 2863  tree = "".join(c
-0000bfe0: 6173 7428 4c69 7374 5b73 7472 5d2c 2070  ast(List[str], p
-0000bff0: 6172 7365 5f70 6965 6365 7329 2920 6966  arse_pieces)) if
-0000c000: 2061 6c6c 2870 6172 7365 5f70 6965 6365   all(parse_piece
-0000c010: 7329 2065 6c73 6520 4e6f 6e65 0a0a 2020  s) else None..  
-0000c020: 2020 2020 2020 636f 7265 665f 7370 616e        coref_span
-0000c030: 5f74 7570 6c65 7320 3d20 7b28 636c 7573  _tuples = {(clus
-0000c040: 7465 725f 6964 2c20 7370 616e 2920 666f  ter_id, span) fo
-0000c050: 7220 636c 7573 7465 725f 6964 2c20 7370  r cluster_id, sp
-0000c060: 616e 5f6c 6973 7420 696e 2063 6c75 7374  an_list in clust
-0000c070: 6572 732e 6974 656d 7328 2920 666f 7220  ers.items() for 
-0000c080: 7370 616e 2069 6e20 7370 616e 5f6c 6973  span in span_lis
-0000c090: 747d 0a20 2020 2020 2020 2072 6574 7572  t}.        retur
-0000c0a0: 6e20 7b0a 2020 2020 2020 2020 2020 2020  n {.            
-0000c0b0: 2264 6f63 756d 656e 745f 6964 223a 2064  "document_id": d
-0000c0c0: 6f63 756d 656e 745f 6964 2c0a 2020 2020  ocument_id,.    
-0000c0d0: 2020 2020 2020 2020 2273 656e 7465 6e63          "sentenc
-0000c0e0: 655f 6964 223a 2073 656e 7465 6e63 655f  e_id": sentence_
-0000c0f0: 6964 2c0a 2020 2020 2020 2020 2020 2020  id,.            
-0000c100: 2273 656e 7465 6e63 6522 3a20 7365 6e74  "sentence": sent
-0000c110: 656e 6365 2c0a 2020 2020 2020 2020 2020  ence,.          
-0000c120: 2020 2270 6f73 5f74 6167 7322 3a20 706f    "pos_tags": po
-0000c130: 735f 7461 6773 2c0a 2020 2020 2020 2020  s_tags,.        
-0000c140: 2020 2020 2270 6172 7365 5f74 7265 6522      "parse_tree"
-0000c150: 3a20 7061 7273 655f 7472 6565 2c0a 2020  : parse_tree,.  
-0000c160: 2020 2020 2020 2020 2020 2270 7265 6469            "predi
-0000c170: 6361 7465 5f6c 656d 6d61 7322 3a20 7072  cate_lemmas": pr
-0000c180: 6564 6963 6174 655f 6c65 6d6d 6173 2c0a  edicate_lemmas,.
-0000c190: 2020 2020 2020 2020 2020 2020 2270 7265              "pre
-0000c1a0: 6469 6361 7465 5f66 7261 6d65 6e65 745f  dicate_framenet_
-0000c1b0: 6964 7322 3a20 7072 6564 6963 6174 655f  ids": predicate_
-0000c1c0: 6672 616d 656e 6574 5f69 6473 2c0a 2020  framenet_ids,.  
-0000c1d0: 2020 2020 2020 2020 2020 2277 6f72 645f            "word_
-0000c1e0: 7365 6e73 6573 223a 2077 6f72 645f 7365  senses": word_se
-0000c1f0: 6e73 6573 2c0a 2020 2020 2020 2020 2020  nses,.          
-0000c200: 2020 2273 7065 616b 6572 7322 3a20 7370    "speakers": sp
-0000c210: 6561 6b65 7273 2c0a 2020 2020 2020 2020  eakers,.        
-0000c220: 2020 2020 226e 616d 6564 5f65 6e74 6974      "named_entit
-0000c230: 6965 7322 3a20 6e61 6d65 645f 656e 7469  ies": named_enti
-0000c240: 7469 6573 2c0a 2020 2020 2020 2020 2020  ties,.          
-0000c250: 2020 2273 726c 5f66 7261 6d65 7322 3a20    "srl_frames": 
-0000c260: 7372 6c5f 6672 616d 6573 2c0a 2020 2020  srl_frames,.    
-0000c270: 2020 2020 2020 2020 2263 6f72 6566 5f73          "coref_s
-0000c280: 7061 6e5f 7475 706c 6573 223a 2063 6f72  pan_tuples": cor
-0000c290: 6566 5f73 7061 6e5f 7475 706c 6573 2c0a  ef_span_tuples,.
-0000c2a0: 2020 2020 2020 2020 7d0a 0a20 2020 2040          }..    @
-0000c2b0: 636c 6173 736d 6574 686f 640a 2020 2020  classmethod.    
-0000c2c0: 6465 6620 6461 7461 7365 745f 646f 6375  def dataset_docu
-0000c2d0: 6d65 6e74 5f69 7465 7261 746f 7228 636c  ment_iterator(cl
-0000c2e0: 732c 2066 696c 655f 7061 7468 3a20 556e  s, file_path: Un
-0000c2f0: 696f 6e5b 5061 7468 2c20 7374 725d 2920  ion[Path, str]) 
-0000c300: 2d3e 2049 7465 7261 746f 725b 4c69 7374  -> Iterator[List
-0000c310: 5d3a 0a20 2020 2020 2020 2022 2222 416e  ]:.        """An
-0000c320: 2069 7465 7261 746f 7220 6f76 6572 2043   iterator over C
-0000c330: 4f4e 4c4c 2066 6f72 6d61 7474 6564 2066  ONLL formatted f
-0000c340: 696c 6573 2077 6869 6368 2079 6965 6c64  iles which yield
-0000c350: 7320 646f 6375 6d65 6e74 732c 2072 6567  s documents, reg
-0000c360: 6172 646c 6573 7320 6f66 2074 6865 206e  ardless of the n
-0000c370: 756d 6265 7220 6f66 2064 6f63 756d 656e  umber of documen
-0000c380: 7420 616e 6e6f 7461 7469 6f6e 7320 696e  t annotations in
-0000c390: 2061 2070 6172 7469 6375 6c61 7220 6669   a particular fi
-0000c3a0: 6c65 2e0a 0a20 2020 2020 2020 2054 6869  le...        Thi
-0000c3b0: 7320 6973 2075 7365 6675 6c20 666f 7220  s is useful for 
-0000c3c0: 636f 6e6c 6c20 6461 7461 2077 6869 6368  conll data which
-0000c3d0: 2068 6173 2062 6565 6e20 7072 6570 726f   has been prepro
-0000c3e0: 6365 7373 6564 2c20 7375 6368 0a20 2020  cessed, such.   
-0000c3f0: 2020 2020 2061 7320 7468 6520 7072 6570       as the prep
-0000c400: 726f 6365 7373 696e 6720 7768 6963 6820  rocessing which 
-0000c410: 7461 6b65 7320 706c 6163 6520 666f 7220  takes place for 
-0000c420: 7468 6520 3230 3132 2043 4f4e 4c4c 0a20  the 2012 CONLL. 
-0000c430: 2020 2020 2020 2043 6f72 6566 6572 656e         Coreferen
-0000c440: 6365 2052 6573 6f6c 7574 696f 6e20 7461  ce Resolution ta
-0000c450: 736b 2e0a 2020 2020 2020 2020 2222 220a  sk..        """.
-0000c460: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
-0000c470: 6e28 6669 6c65 5f70 6174 682c 2065 6e63  n(file_path, enc
-0000c480: 6f64 696e 673d 2275 7466 3822 2920 6173  oding="utf8") as
-0000c490: 206f 7065 6e5f 6669 6c65 3a0a 2020 2020   open_file:.    
-0000c4a0: 2020 2020 2020 2020 636f 6e6c 6c5f 726f          conll_ro
-0000c4b0: 7773 203d 205b 5d0a 2020 2020 2020 2020  ws = [].        
-0000c4c0: 2020 2020 646f 6375 6d65 6e74 3a20 4c69      document: Li
-0000c4d0: 7374 203d 205b 5d0a 2020 2020 2020 2020  st = [].        
-0000c4e0: 2020 2020 666f 7220 6c69 6e65 2069 6e20      for line in 
-0000c4f0: 6f70 656e 5f66 696c 653a 0a20 2020 2020  open_file:.     
-0000c500: 2020 2020 2020 2020 2020 206c 696e 6520             line 
-0000c510: 3d20 6c69 6e65 2e73 7472 6970 2829 0a20  = line.strip(). 
-0000c520: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000c530: 6620 6c69 6e65 2021 3d20 2222 2061 6e64  f line != "" and
-0000c540: 206e 6f74 206c 696e 652e 7374 6172 7473   not line.starts
-0000c550: 7769 7468 2822 2322 293a 0a20 2020 2020  with("#"):.     
-0000c560: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0000c570: 204e 6f6e 2d65 6d70 7479 206c 696e 652e   Non-empty line.
-0000c580: 2043 6f6c 6c65 6374 2074 6865 2061 6e6e   Collect the ann
-0000c590: 6f74 6174 696f 6e2e 0a20 2020 2020 2020  otation..       
-0000c5a0: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
-0000c5b0: 6c6c 5f72 6f77 732e 6170 7065 6e64 286c  ll_rows.append(l
-0000c5c0: 696e 6529 0a20 2020 2020 2020 2020 2020  ine).           
-0000c5d0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0000c5e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000c5f0: 6620 636f 6e6c 6c5f 726f 7773 3a0a 2020  f conll_rows:.  
-0000c600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c610: 2020 2020 2020 646f 6375 6d65 6e74 2e61        document.a
-0000c620: 7070 656e 6428 636c 732e 5f63 6f6e 6c6c  ppend(cls._conll
-0000c630: 5f72 6f77 735f 746f 5f73 656e 7465 6e63  _rows_to_sentenc
-0000c640: 6528 636f 6e6c 6c5f 726f 7773 2929 0a20  e(conll_rows)). 
-0000c650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c660: 2020 2020 2020 2063 6f6e 6c6c 5f72 6f77         conll_row
-0000c670: 7320 3d20 5b5d 0a20 2020 2020 2020 2020  s = [].         
-0000c680: 2020 2020 2020 2069 6620 6c69 6e65 2e73         if line.s
-0000c690: 7461 7274 7377 6974 6828 2223 656e 6420  tartswith("#end 
-0000c6a0: 646f 6375 6d65 6e74 2229 3a0a 2020 2020  document"):.    
-0000c6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c6c0: 7969 656c 6420 646f 6375 6d65 6e74 0a20  yield document. 
-0000c6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c6e0: 2020 2064 6f63 756d 656e 7420 3d20 5b5d     document = []
-0000c6f0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000c700: 646f 6375 6d65 6e74 3a0a 2020 2020 2020  document:.      
-0000c710: 2020 2020 2020 2020 2020 2320 436f 6c6c            # Coll
-0000c720: 6563 7420 616e 7920 7374 7261 6767 6c65  ect any straggle
-0000c730: 7273 206f 7220 6669 6c65 7320 7768 6963  rs or files whic
-0000c740: 6820 6d69 6768 7420 6e6f 740a 2020 2020  h might not.    
-0000c750: 2020 2020 2020 2020 2020 2020 2320 6861              # ha
-0000c760: 7665 2074 6865 2027 2365 6e64 2064 6f63  ve the '#end doc
-0000c770: 756d 656e 7427 2066 6f72 6d61 7420 666f  ument' format fo
-0000c780: 7220 7468 6520 656e 6420 6f66 2074 6865  r the end of the
-0000c790: 2066 696c 652e 0a20 2020 2020 2020 2020   file..         
-0000c7a0: 2020 2020 2020 2079 6965 6c64 2064 6f63         yield doc
-0000c7b0: 756d 656e 740a 0a20 2020 2040 636c 6173  ument..    @clas
-0000c7c0: 736d 6574 686f 640a 2020 2020 6465 6620  smethod.    def 
-0000c7d0: 7365 6e74 656e 6365 5f69 7465 7261 746f  sentence_iterato
-0000c7e0: 7228 636c 732c 2066 696c 655f 7061 7468  r(cls, file_path
-0000c7f0: 3a20 556e 696f 6e5b 5061 7468 2c20 7374  : Union[Path, st
-0000c800: 725d 2920 2d3e 2049 7465 7261 746f 723a  r]) -> Iterator:
-0000c810: 0a20 2020 2020 2020 2022 2222 416e 2069  .        """An i
-0000c820: 7465 7261 746f 7220 6f76 6572 2074 6865  terator over the
-0000c830: 2073 656e 7465 6e63 6573 2069 6e20 616e   sentences in an
-0000c840: 2069 6e64 6976 6964 7561 6c20 434f 4e4c   individual CONL
-0000c850: 4c20 666f 726d 6174 7465 6420 6669 6c65  L formatted file
-0000c860: 2e22 2222 0a20 2020 2020 2020 2066 6f72  .""".        for
-0000c870: 2064 6f63 756d 656e 7420 696e 2063 6c73   document in cls
-0000c880: 2e64 6174 6173 6574 5f64 6f63 756d 656e  .dataset_documen
-0000c890: 745f 6974 6572 6174 6f72 2866 696c 655f  t_iterator(file_
-0000c8a0: 7061 7468 293a 0a20 2020 2020 2020 2020  path):.         
-0000c8b0: 2020 2079 6965 6c64 2066 726f 6d20 646f     yield from do
-0000c8c0: 6375 6d65 6e74 0a0a 0a63 6c61 7373 2043  cument...class C
-0000c8d0: 4f4e 4c4c 5f30 3328 436f 6c75 6d6e 436f  ONLL_03(ColumnCo
-0000c8e0: 7270 7573 293a 0a20 2020 2064 6566 205f  rpus):.    def _
-0000c8f0: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
-0000c900: 2073 656c 662c 0a20 2020 2020 2020 2062   self,.        b
-0000c910: 6173 655f 7061 7468 3a20 4f70 7469 6f6e  ase_path: Option
-0000c920: 616c 5b55 6e69 6f6e 5b73 7472 2c20 5061  al[Union[str, Pa
-0000c930: 7468 5d5d 203d 204e 6f6e 652c 0a20 2020  th]] = None,.   
-0000c940: 2020 2020 2063 6f6c 756d 6e5f 666f 726d       column_form
-0000c950: 6174 3d7b 303a 2022 7465 7874 222c 2031  at={0: "text", 1
-0000c960: 3a20 2270 6f73 222c 2033 3a20 226e 6572  : "pos", 3: "ner
-0000c970: 227d 2c0a 2020 2020 2020 2020 696e 5f6d  "},.        in_m
-0000c980: 656d 6f72 793a 2062 6f6f 6c20 3d20 5472  emory: bool = Tr
-0000c990: 7565 2c0a 2020 2020 2020 2020 2a2a 636f  ue,.        **co
-0000c9a0: 7270 7573 6172 6773 2c0a 2020 2020 2920  rpusargs,.    ) 
-0000c9b0: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
-0000c9c0: 2022 2222 496e 6974 6961 6c69 7a65 2074   """Initialize t
-0000c9d0: 6865 2043 6f4e 4c4c 2d30 3320 636f 7270  he CoNLL-03 corp
-0000c9e0: 7573 2e0a 0a20 2020 2020 2020 2054 6869  us...        Thi
-0000c9f0: 7320 6973 206f 6e6c 7920 706f 7373 6962  s is only possib
-0000ca00: 6c65 2069 6620 796f 7527 7665 206d 616e  le if you've man
-0000ca10: 7561 6c6c 7920 646f 776e 6c6f 6164 6564  ually downloaded
-0000ca20: 2069 7420 746f 2079 6f75 7220 6d61 6368   it to your mach
-0000ca30: 696e 652e 0a20 2020 2020 2020 204f 6274  ine..        Obt
-0000ca40: 6169 6e20 7468 6520 636f 7270 7573 2066  ain the corpus f
-0000ca50: 726f 6d20 6874 7470 733a 2f2f 7777 772e  rom https://www.
-0000ca60: 636c 6970 732e 7561 6e74 7765 7270 656e  clips.uantwerpen
-0000ca70: 2e62 652f 636f 6e6c 6c32 3030 332f 6e65  .be/conll2003/ne
-0000ca80: 722f 2061 6e64 2070 7574 2074 6865 2065  r/ and put the e
-0000ca90: 6e67 2e74 6573 7461 2c20 2e74 6573 7462  ng.testa, .testb
-0000caa0: 2c20 2e74 7261 696e 0a20 2020 2020 2020  , .train.       
-0000cab0: 2066 696c 6573 2069 6e20 6120 666f 6c64   files in a fold
-0000cac0: 6572 2063 616c 6c65 6420 2763 6f6e 6c6c  er called 'conll
-0000cad0: 5f30 3327 2e20 5468 656e 2073 6574 2074  _03'. Then set t
-0000cae0: 6865 2062 6173 655f 7061 7468 2070 6172  he base_path par
-0000caf0: 616d 6574 6572 2069 6e20 7468 6520 636f  ameter in the co
-0000cb00: 6e73 7472 7563 746f 7220 746f 2074 6865  nstructor to the
-0000cb10: 2070 6174 6820 746f 2074 6865 0a20 2020   path to the.   
-0000cb20: 2020 2020 2070 6172 656e 7420 6469 7265       parent dire
-0000cb30: 6374 6f72 7920 7768 6572 6520 7468 6520  ctory where the 
-0000cb40: 636f 6e6c 6c5f 3033 2066 6f6c 6465 7220  conll_03 folder 
-0000cb50: 7265 7369 6465 732e 0a20 2020 2020 2020  resides..       
-0000cb60: 2049 6620 7573 696e 6720 656e 7469 7479   If using entity
-0000cb70: 206c 696e 6b69 6e67 2c20 7468 6520 636f   linking, the co
-0000cb80: 6e6c 6c30 3320 6461 7465 7365 7420 6973  nll03 dateset is
-0000cb90: 2072 6564 7563 6564 2062 7920 6162 6f75   reduced by abou
-0000cba0: 7420 3230 2044 6f63 756d 656e 7473 2c20  t 20 Documents, 
-0000cbb0: 7768 6963 6820 6172 6520 6e6f 7420 7061  which are not pa
-0000cbc0: 7274 206f 6620 7468 6520 7961 676f 2064  rt of the yago d
-0000cbd0: 6174 6173 6574 2e0a 2020 2020 2020 2020  ataset..        
-0000cbe0: 3a70 6172 616d 2062 6173 655f 7061 7468  :param base_path
-0000cbf0: 3a20 5061 7468 2074 6f20 7468 6520 436f  : Path to the Co
-0000cc00: 4e4c 4c2d 3033 2063 6f72 7075 7320 2869  NLL-03 corpus (i
-0000cc10: 2e65 2e20 2763 6f6e 6c6c 5f30 3327 2066  .e. 'conll_03' f
-0000cc20: 6f6c 6465 7229 206f 6e20 796f 7572 206d  older) on your m
-0000cc30: 6163 6869 6e65 0a20 2020 2020 2020 2050  achine.        P
-0000cc40: 4f53 2074 6167 7320 6f72 2063 6875 6e6b  OS tags or chunk
-0000cc50: 7320 7265 7370 6563 7469 7665 6c79 0a20  s respectively. 
-0000cc60: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
-0000cc70: 5f6d 656d 6f72 793a 2049 6620 5472 7565  _memory: If True
-0000cc80: 2c20 6b65 6570 7320 6461 7461 7365 7420  , keeps dataset 
-0000cc90: 696e 206d 656d 6f72 7920 6769 7669 6e67  in memory giving
-0000cca0: 2073 7065 6564 7570 7320 696e 2074 7261   speedups in tra
-0000ccb0: 696e 696e 672e 0a20 2020 2020 2020 203a  ining..        :
-0000ccc0: 7061 7261 6d20 646f 6375 6d65 6e74 5f61  param document_a
-0000ccd0: 735f 7365 7175 656e 6365 3a20 4966 2054  s_sequence: If T
-0000cce0: 7275 652c 2061 6c6c 2073 656e 7465 6e63  rue, all sentenc
-0000ccf0: 6573 206f 6620 6120 646f 6375 6d65 6e74  es of a document
-0000cd00: 2061 7265 2072 6561 6420 696e 746f 2061   are read into a
-0000cd10: 2073 696e 676c 6520 5365 6e74 656e 6365   single Sentence
-0000cd20: 206f 626a 6563 740a 2020 2020 2020 2020   object.        
-0000cd30: 2222 220a 2020 2020 2020 2020 6261 7365  """.        base
-0000cd40: 5f70 6174 6820 3d20 6b6f 6c69 6272 692e  _path = kolibri.
-0000cd50: 6361 6368 655f 726f 6f74 202f 2022 6461  cache_root / "da
-0000cd60: 7461 7365 7473 2220 6966 206e 6f74 2062  tasets" if not b
-0000cd70: 6173 655f 7061 7468 2065 6c73 6520 5061  ase_path else Pa
-0000cd80: 7468 2862 6173 655f 7061 7468 290a 0a20  th(base_path).. 
-0000cd90: 2020 2020 2020 2023 2074 6869 7320 6461         # this da
-0000cda0: 7461 7365 7420 6e61 6d65 0a20 2020 2020  taset name.     
-0000cdb0: 2020 2064 6174 6173 6574 5f6e 616d 6520     dataset_name 
-0000cdc0: 3d20 2263 6f6e 6c6c 5f32 3030 3322 0a0a  = "conll_2003"..
-0000cdd0: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
-0000cde0: 6465 7220 3d20 6261 7365 5f70 6174 6820  der = base_path 
-0000cdf0: 2f20 6461 7461 7365 745f 6e61 6d65 0a0a  / dataset_name..
-0000ce00: 2020 2020 2020 2020 2320 6368 6563 6b20          # check 
-0000ce10: 6966 2064 6174 6120 7468 6572 650a 2020  if data there.  
-0000ce20: 2020 2020 2020 6966 206e 6f74 2064 6174        if not dat
-0000ce30: 615f 666f 6c64 6572 2e65 7869 7374 7328  a_folder.exists(
-0000ce40: 293a 0a20 2020 2020 2020 2020 2020 206c  ):.            l
-0000ce50: 6f67 2e77 6172 6e69 6e67 2822 2d22 202a  og.warning("-" *
-0000ce60: 2031 3030 290a 2020 2020 2020 2020 2020   100).          
-0000ce70: 2020 6c6f 672e 7761 726e 696e 6728 6627    log.warning(f'
-0000ce80: 5741 524e 494e 473a 2043 6f4e 4c4c 2d30  WARNING: CoNLL-0
-0000ce90: 3320 6461 7461 7365 7420 6e6f 7420 666f  3 dataset not fo
-0000cea0: 756e 6420 6174 2022 7b64 6174 615f 666f  und at "{data_fo
-0000ceb0: 6c64 6572 7d22 2e27 290a 2020 2020 2020  lder}".').      
-0000cec0: 2020 2020 2020 6c6f 672e 7761 726e 696e        log.warnin
-0000ced0: 6728 0a20 2020 2020 2020 2020 2020 2020  g(.             
-0000cee0: 2020 2027 496e 7374 7275 6374 696f 6e73     'Instructions
-0000cef0: 2066 6f72 206f 6274 6169 6e69 6e67 2074   for obtaining t
-0000cf00: 6865 2064 6174 6120 6361 6e20 6265 2066  he data can be f
-0000cf10: 6f75 6e64 2068 6572 653a 2068 7474 7073  ound here: https
-0000cf20: 3a2f 2f77 7777 2e63 6c69 7073 2e75 616e  ://www.clips.uan
-0000cf30: 7477 6572 7065 6e2e 6265 2f63 6f6e 6c6c  twerpen.be/conll
-0000cf40: 3230 3033 2f6e 6572 2f22 270a 2020 2020  2003/ner/"'.    
-0000cf50: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0000cf60: 2020 2020 2020 6c6f 672e 7761 726e 696e        log.warnin
-0000cf70: 6728 222d 2220 2a20 3130 3029 0a0a 2020  g("-" * 100)..  
-0000cf80: 2020 2020 2020 7375 7065 7228 292e 5f5f        super().__
-0000cf90: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
-0000cfa0: 2020 2020 6461 7461 5f66 6f6c 6465 722c      data_folder,
-0000cfb0: 0a20 2020 2020 2020 2020 2020 2063 6f6c  .            col
-0000cfc0: 756d 6e5f 666f 726d 6174 3d63 6f6c 756d  umn_format=colum
-0000cfd0: 6e5f 666f 726d 6174 2c0a 2020 2020 2020  n_format,.      
-0000cfe0: 2020 2020 2020 696e 5f6d 656d 6f72 793d        in_memory=
-0000cff0: 696e 5f6d 656d 6f72 792c 0a20 2020 2020  in_memory,.     
-0000d000: 2020 2020 2020 2064 6f63 756d 656e 745f         document_
-0000d010: 7365 7061 7261 746f 725f 746f 6b65 6e3d  separator_token=
-0000d020: 222d 444f 4353 5441 5254 2d22 2c0a 2020  "-DOCSTART-",.  
-0000d030: 2020 2020 2020 2020 2020 2a2a 636f 7270            **corp
-0000d040: 7573 6172 6773 2c0a 2020 2020 2020 2020  usargs,.        
-0000d050: 290a 0a0a 636c 6173 7320 434f 4e4c 4c5f  )...class CONLL_
-0000d060: 3033 5f47 4552 4d41 4e28 436f 6c75 6d6e  03_GERMAN(Column
-0000d070: 436f 7270 7573 293a 0a20 2020 2064 6566  Corpus):.    def
-0000d080: 205f 5f69 6e69 745f 5f28 0a20 2020 2020   __init__(.     
-0000d090: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
-0000d0a0: 2062 6173 655f 7061 7468 3a20 4f70 7469   base_path: Opti
-0000d0b0: 6f6e 616c 5b55 6e69 6f6e 5b73 7472 2c20  onal[Union[str, 
-0000d0c0: 5061 7468 5d5d 203d 204e 6f6e 652c 0a20  Path]] = None,. 
-0000d0d0: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
-0000d0e0: 3a20 626f 6f6c 203d 2054 7275 652c 0a20  : bool = True,. 
-0000d0f0: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
-0000d100: 7267 732c 0a20 2020 2029 202d 3e20 4e6f  rgs,.    ) -> No
-0000d110: 6e65 3a0a 2020 2020 2020 2020 2222 2249  ne:.        """I
-0000d120: 6e69 7469 616c 697a 6520 7468 6520 436f  nitialize the Co
-0000d130: 4e4c 4c2d 3033 2063 6f72 7075 7320 666f  NLL-03 corpus fo
-0000d140: 7220 4765 726d 616e 2e0a 0a20 2020 2020  r German...     
-0000d150: 2020 2054 6869 7320 6973 206f 6e6c 7920     This is only 
-0000d160: 706f 7373 6962 6c65 2069 6620 796f 7527  possible if you'
-0000d170: 7665 206d 616e 7561 6c6c 7920 646f 776e  ve manually down
-0000d180: 6c6f 6164 6564 2069 7420 746f 2079 6f75  loaded it to you
-0000d190: 7220 6d61 6368 696e 652e 0a20 2020 2020  r machine..     
-0000d1a0: 2020 204f 6274 6169 6e20 7468 6520 636f     Obtain the co
-0000d1b0: 7270 7573 2066 726f 6d20 6874 7470 733a  rpus from https:
-0000d1c0: 2f2f 7777 772e 636c 6970 732e 7561 6e74  //www.clips.uant
-0000d1d0: 7765 7270 656e 2e62 652f 636f 6e6c 6c32  werpen.be/conll2
-0000d1e0: 3030 332f 6e65 722f 2061 6e64 2070 7574  003/ner/ and put
-0000d1f0: 2074 6865 2072 6573 7065 6374 6976 6520   the respective 
-0000d200: 6669 6c65 7320 696e 2061 2066 6f6c 6465  files in a folde
-0000d210: 7220 6361 6c6c 6564 0a20 2020 2020 2020  r called.       
-0000d220: 2027 636f 6e6c 6c5f 3033 5f67 6572 6d61   'conll_03_germa
-0000d230: 6e27 2e20 5468 656e 2073 6574 2074 6865  n'. Then set the
-0000d240: 2062 6173 655f 7061 7468 2070 6172 616d   base_path param
-0000d250: 6574 6572 2069 6e20 7468 6520 636f 6e73  eter in the cons
-0000d260: 7472 7563 746f 7220 746f 2074 6865 2070  tructor to the p
-0000d270: 6174 6820 746f 2074 6865 2070 6172 656e  ath to the paren
-0000d280: 7420 6469 7265 6374 6f72 7920 7768 6572  t directory wher
-0000d290: 650a 2020 2020 2020 2020 7468 6520 636f  e.        the co
-0000d2a0: 6e6c 6c5f 3033 5f67 6572 6d61 6e20 666f  nll_03_german fo
-0000d2b0: 6c64 6572 2072 6573 6964 6573 2e0a 2020  lder resides..  
-0000d2c0: 2020 2020 2020 3a70 6172 616d 2062 6173        :param bas
-0000d2d0: 655f 7061 7468 3a20 5061 7468 2074 6f20  e_path: Path to 
-0000d2e0: 7468 6520 436f 4e4c 4c2d 3033 2063 6f72  the CoNLL-03 cor
-0000d2f0: 7075 7320 2869 2e65 2e20 2763 6f6e 6c6c  pus (i.e. 'conll
-0000d300: 5f30 335f 6765 726d 616e 2720 666f 6c64  _03_german' fold
-0000d310: 6572 2920 6f6e 2079 6f75 7220 6d61 6368  er) on your mach
-0000d320: 696e 650a 2020 2020 2020 2020 776f 7264  ine.        word
-0000d330: 206c 656d 6d61 732c 2050 4f53 2074 6167   lemmas, POS tag
-0000d340: 7320 6f72 2063 6875 6e6b 7320 7265 7370  s or chunks resp
-0000d350: 6563 7469 7665 6c79 0a20 2020 2020 2020  ectively.       
-0000d360: 203a 7061 7261 6d20 696e 5f6d 656d 6f72   :param in_memor
-0000d370: 793a 2049 6620 5472 7565 2c20 6b65 6570  y: If True, keep
-0000d380: 7320 6461 7461 7365 7420 696e 206d 656d  s dataset in mem
-0000d390: 6f72 7920 6769 7669 6e67 2073 7065 6564  ory giving speed
-0000d3a0: 7570 7320 696e 2074 7261 696e 696e 672e  ups in training.
-0000d3b0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0000d3c0: 646f 6375 6d65 6e74 5f61 735f 7365 7175  document_as_sequ
-0000d3d0: 656e 6365 3a20 4966 2054 7275 652c 2061  ence: If True, a
-0000d3e0: 6c6c 2073 656e 7465 6e63 6573 206f 6620  ll sentences of 
-0000d3f0: 6120 646f 6375 6d65 6e74 2061 7265 2072  a document are r
-0000d400: 6561 6420 696e 746f 2061 2073 696e 676c  ead into a singl
-0000d410: 6520 5365 6e74 656e 6365 206f 626a 6563  e Sentence objec
-0000d420: 740a 2020 2020 2020 2020 2222 220a 2020  t.        """.  
-0000d430: 2020 2020 2020 6261 7365 5f70 6174 6820        base_path 
-0000d440: 3d20 6b6f 6c69 6272 692e 6361 6368 655f  = kolibri.cache_
-0000d450: 726f 6f74 202f 2022 6461 7461 7365 7473  root / "datasets
-0000d460: 2220 6966 206e 6f74 2062 6173 655f 7061  " if not base_pa
-0000d470: 7468 2065 6c73 6520 5061 7468 2862 6173  th else Path(bas
-0000d480: 655f 7061 7468 290a 0a20 2020 2020 2020  e_path)..       
-0000d490: 2023 2063 6f6c 756d 6e20 666f 726d 6174   # column format
-0000d4a0: 0a20 2020 2020 2020 2063 6f6c 756d 6e73  .        columns
-0000d4b0: 203d 207b 303a 2022 7465 7874 222c 2031   = {0: "text", 1
-0000d4c0: 3a20 226c 656d 6d61 222c 2032 3a20 2270  : "lemma", 2: "p
-0000d4d0: 6f73 222c 2033 3a20 226e 7022 2c20 343a  os", 3: "np", 4:
-0000d4e0: 2022 6e65 7222 7d0a 0a20 2020 2020 2020   "ner"}..       
-0000d4f0: 2023 2074 6869 7320 6461 7461 7365 7420   # this dataset 
-0000d500: 6e61 6d65 0a20 2020 2020 2020 2064 6174  name.        dat
-0000d510: 6173 6574 5f6e 616d 6520 3d20 7365 6c66  aset_name = self
-0000d520: 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e 616d  .__class__.__nam
-0000d530: 655f 5f2e 6c6f 7765 7228 290a 0a20 2020  e__.lower()..   
-0000d540: 2020 2020 2064 6174 615f 666f 6c64 6572       data_folder
-0000d550: 203d 2062 6173 655f 7061 7468 202f 2064   = base_path / d
-0000d560: 6174 6173 6574 5f6e 616d 650a 0a20 2020  ataset_name..   
-0000d570: 2020 2020 2023 2063 6865 636b 2069 6620       # check if 
-0000d580: 6461 7461 2074 6865 7265 0a20 2020 2020  data there.     
-0000d590: 2020 2069 6620 6e6f 7420 6461 7461 5f66     if not data_f
-0000d5a0: 6f6c 6465 722e 6578 6973 7473 2829 3a0a  older.exists():.
-0000d5b0: 2020 2020 2020 2020 2020 2020 6c6f 672e              log.
-0000d5c0: 7761 726e 696e 6728 222d 2220 2a20 3130  warning("-" * 10
-0000d5d0: 3029 0a20 2020 2020 2020 2020 2020 206c  0).            l
-0000d5e0: 6f67 2e77 6172 6e69 6e67 2866 2757 4152  og.warning(f'WAR
-0000d5f0: 4e49 4e47 3a20 436f 4e4c 4c2d 3033 2064  NING: CoNLL-03 d
-0000d600: 6174 6173 6574 206e 6f74 2066 6f75 6e64  ataset not found
-0000d610: 2061 7420 227b 6461 7461 5f66 6f6c 6465   at "{data_folde
-0000d620: 727d 222e 2729 0a20 2020 2020 2020 2020  r}".').         
-0000d630: 2020 206c 6f67 2e77 6172 6e69 6e67 280a     log.warning(.
-0000d640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d650: 2749 6e73 7472 7563 7469 6f6e 7320 666f  'Instructions fo
-0000d660: 7220 6f62 7461 696e 696e 6720 7468 6520  r obtaining the 
-0000d670: 6461 7461 2063 616e 2062 6520 666f 756e  data can be foun
-0000d680: 6420 6865 7265 3a20 6874 7470 733a 2f2f  d here: https://
-0000d690: 7777 772e 636c 6970 732e 7561 6e74 7765  www.clips.uantwe
-0000d6a0: 7270 656e 2e62 652f 636f 6e6c 6c32 3030  rpen.be/conll200
-0000d6b0: 332f 6e65 722f 2227 0a20 2020 2020 2020  3/ner/"'.       
-0000d6c0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
-0000d6d0: 2020 206c 6f67 2e77 6172 6e69 6e67 2822     log.warning("
-0000d6e0: 2d22 202a 2031 3030 290a 0a20 2020 2020  -" * 100)..     
-0000d6f0: 2020 2073 7570 6572 2829 2e5f 5f69 6e69     super().__ini
-0000d700: 745f 5f28 0a20 2020 2020 2020 2020 2020  t__(.           
-0000d710: 2064 6174 615f 666f 6c64 6572 2c0a 2020   data_folder,.  
-0000d720: 2020 2020 2020 2020 2020 636f 6c75 6d6e            column
-0000d730: 732c 0a20 2020 2020 2020 2020 2020 2069  s,.            i
-0000d740: 6e5f 6d65 6d6f 7279 3d69 6e5f 6d65 6d6f  n_memory=in_memo
-0000d750: 7279 2c0a 2020 2020 2020 2020 2020 2020  ry,.            
-0000d760: 646f 6375 6d65 6e74 5f73 6570 6172 6174  document_separat
-0000d770: 6f72 5f74 6f6b 656e 3d22 2d44 4f43 5354  or_token="-DOCST
-0000d780: 4152 542d 222c 0a20 2020 2020 2020 2020  ART-",.         
-0000d790: 2020 202a 2a63 6f72 7075 7361 7267 732c     **corpusargs,
-0000d7a0: 0a20 2020 2020 2020 2029 0a0a 0a63 6c61  .        )...cla
-0000d7b0: 7373 2043 4f4e 4c4c 5f30 335f 4455 5443  ss CONLL_03_DUTC
-0000d7c0: 4828 436f 6c75 6d6e 436f 7270 7573 293a  H(ColumnCorpus):
-0000d7d0: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
-0000d7e0: 5f28 0a20 2020 2020 2020 2073 656c 662c  _(.        self,
-0000d7f0: 0a20 2020 2020 2020 2062 6173 655f 7061  .        base_pa
-0000d800: 7468 3a20 4f70 7469 6f6e 616c 5b55 6e69  th: Optional[Uni
-0000d810: 6f6e 5b73 7472 2c20 5061 7468 5d5d 203d  on[str, Path]] =
-0000d820: 204e 6f6e 652c 0a20 2020 2020 2020 2069   None,.        i
-0000d830: 6e5f 6d65 6d6f 7279 3a20 626f 6f6c 203d  n_memory: bool =
-0000d840: 2054 7275 652c 0a20 2020 2020 2020 202a   True,.        *
-0000d850: 2a63 6f72 7075 7361 7267 732c 0a20 2020  *corpusargs,.   
-0000d860: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-0000d870: 2020 2020 2222 2249 6e69 7469 616c 697a      """Initializ
-0000d880: 6520 7468 6520 436f 4e4c 4c2d 3033 2063  e the CoNLL-03 c
-0000d890: 6f72 7075 7320 666f 7220 4475 7463 682e  orpus for Dutch.
-0000d8a0: 0a0a 2020 2020 2020 2020 5468 6520 6669  ..        The fi
-0000d8b0: 7273 7420 7469 6d65 2079 6f75 2063 616c  rst time you cal
-0000d8c0: 6c20 7468 6973 2063 6f6e 7374 7275 6374  l this construct
-0000d8d0: 6f72 2069 7420 7769 6c6c 2061 7574 6f6d  or it will autom
-0000d8e0: 6174 6963 616c 6c79 2064 6f77 6e6c 6f61  atically downloa
-0000d8f0: 6420 7468 6520 6461 7461 7365 742e 0a0a  d the dataset...
-0000d900: 2020 2020 2020 2020 4172 6773 3a0a 2020          Args:.  
-0000d910: 2020 2020 2020 2020 2020 6261 7365 5f70            base_p
-0000d920: 6174 683a 2044 6566 6175 6c74 2069 7320  ath: Default is 
-0000d930: 4e6f 6e65 2c20 6d65 616e 696e 6720 7468  None, meaning th
-0000d940: 6174 2063 6f72 7075 7320 6765 7473 2061  at corpus gets a
-0000d950: 7574 6f2d 646f 776e 6c6f 6164 6564 2061  uto-downloaded a
-0000d960: 6e64 206c 6f61 6465 642e 2059 6f75 2063  nd loaded. You c
-0000d970: 616e 206f 7665 7272 6964 6520 7468 6973  an override this
-0000d980: 2074 6f20 706f 696e 7420 746f 2061 2064   to point to a d
-0000d990: 6966 6665 7265 6e74 2066 6f6c 6465 7220  ifferent folder 
-0000d9a0: 6275 7420 7479 7069 6361 6c6c 7920 7468  but typically th
-0000d9b0: 6973 2073 686f 756c 6420 6e6f 7420 6265  is should not be
-0000d9c0: 206e 6563 6573 7361 7279 2e0a 2020 2020   necessary..    
-0000d9d0: 2020 2020 2020 2020 696e 5f6d 656d 6f72          in_memor
-0000d9e0: 793a 2049 6620 5472 7565 2c20 6b65 6570  y: If True, keep
-0000d9f0: 7320 6461 7461 7365 7420 696e 206d 656d  s dataset in mem
-0000da00: 6f72 7920 6769 7669 6e67 2073 7065 6564  ory giving speed
-0000da10: 7570 7320 696e 2074 7261 696e 696e 672e  ups in training.
-0000da20: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-0000da30: 2020 2020 2062 6173 655f 7061 7468 203d       base_path =
-0000da40: 206b 6f6c 6962 7269 2e63 6163 6865 5f72   kolibri.cache_r
-0000da50: 6f6f 7420 2f20 2264 6174 6173 6574 7322  oot / "datasets"
-0000da60: 2069 6620 6e6f 7420 6261 7365 5f70 6174   if not base_pat
-0000da70: 6820 656c 7365 2050 6174 6828 6261 7365  h else Path(base
-0000da80: 5f70 6174 6829 0a0a 2020 2020 2020 2020  _path)..        
-0000da90: 2320 636f 6c75 6d6e 2066 6f72 6d61 740a  # column format.
-0000daa0: 2020 2020 2020 2020 636f 6c75 6d6e 7320          columns 
-0000dab0: 3d20 7b30 3a20 2274 6578 7422 2c20 313a  = {0: "text", 1:
-0000dac0: 2022 706f 7322 2c20 323a 2022 6e65 7222   "pos", 2: "ner"
-0000dad0: 7d0a 0a20 2020 2020 2020 2023 2074 6869  }..        # thi
-0000dae0: 7320 6461 7461 7365 7420 6e61 6d65 0a20  s dataset name. 
-0000daf0: 2020 2020 2020 2064 6174 6173 6574 5f6e         dataset_n
-0000db00: 616d 6520 3d20 7365 6c66 2e5f 5f63 6c61  ame = self.__cla
-0000db10: 7373 5f5f 2e5f 5f6e 616d 655f 5f2e 6c6f  ss__.__name__.lo
-0000db20: 7765 7228 290a 0a20 2020 2020 2020 2064  wer()..        d
-0000db30: 6174 615f 666f 6c64 6572 203d 2062 6173  ata_folder = bas
-0000db40: 655f 7061 7468 202f 2064 6174 6173 6574  e_path / dataset
-0000db50: 5f6e 616d 650a 0a20 2020 2020 2020 2023  _name..        #
-0000db60: 2064 6f77 6e6c 6f61 6420 6461 7461 2069   download data i
-0000db70: 6620 6e65 6365 7373 6172 790a 2020 2020  f necessary.    
-0000db80: 2020 2020 636f 6e6c 6c5f 3032 5f70 6174      conll_02_pat
-0000db90: 6820 3d20 2268 7474 7073 3a2f 2f77 7777  h = "https://www
-0000dba0: 2e63 6c69 7073 2e75 616e 7477 6572 7065  .clips.uantwerpe
-0000dbb0: 6e2e 6265 2f63 6f6e 6c6c 3230 3032 2f6e  n.be/conll2002/n
-0000dbc0: 6572 2f64 6174 612f 220a 0a20 2020 2020  er/data/"..     
-0000dbd0: 2020 2023 2064 6f77 6e6c 6f61 6420 6669     # download fi
-0000dbe0: 6c65 7320 6966 206e 6f74 2070 7265 7365  les if not prese
-0000dbf0: 6e74 206c 6f63 616c 6c79 0a20 2020 2020  nt locally.     
-0000dc00: 2020 2063 6163 6865 645f 7061 7468 2866     cached_path(f
-0000dc10: 227b 636f 6e6c 6c5f 3032 5f70 6174 687d  "{conll_02_path}
-0000dc20: 6e65 642e 7465 7374 6122 2c20 6461 7461  ned.testa", data
-0000dc30: 5f66 6f6c 6465 7220 2f20 2272 6177 2229  _folder / "raw")
-0000dc40: 0a20 2020 2020 2020 2063 6163 6865 645f  .        cached_
-0000dc50: 7061 7468 2866 227b 636f 6e6c 6c5f 3032  path(f"{conll_02
-0000dc60: 5f70 6174 687d 6e65 642e 7465 7374 6222  _path}ned.testb"
-0000dc70: 2c20 6461 7461 5f66 6f6c 6465 7220 2f20  , data_folder / 
-0000dc80: 2272 6177 2229 0a20 2020 2020 2020 2063  "raw").        c
-0000dc90: 6163 6865 645f 7061 7468 2866 227b 636f  ached_path(f"{co
-0000dca0: 6e6c 6c5f 3032 5f70 6174 687d 6e65 642e  nll_02_path}ned.
-0000dcb0: 7472 6169 6e22 2c20 6461 7461 5f66 6f6c  train", data_fol
-0000dcc0: 6465 7220 2f20 2272 6177 2229 0a0a 2020  der / "raw")..  
-0000dcd0: 2020 2020 2020 2320 7765 206e 6565 6420        # we need 
-0000dce0: 746f 2073 6c69 6768 746c 7920 6d6f 6469  to slightly modi
-0000dcf0: 6679 2074 6865 206f 7269 6769 6e61 6c20  fy the original 
-0000dd00: 6669 6c65 7320 6279 2061 6464 696e 6720  files by adding 
-0000dd10: 736f 6d65 206e 6577 206c 696e 6573 2061  some new lines a
-0000dd20: 6674 6572 2064 6f63 756d 656e 7420 7365  fter document se
-0000dd30: 7061 7261 746f 7273 0a20 2020 2020 2020  parators.       
-0000dd40: 2074 7261 696e 5f64 6174 615f 6669 6c65   train_data_file
-0000dd50: 203d 2064 6174 615f 666f 6c64 6572 202f   = data_folder /
-0000dd60: 2022 7472 6169 6e2e 7478 7422 0a20 2020   "train.txt".   
-0000dd70: 2020 2020 2069 6620 6e6f 7420 7472 6169       if not trai
-0000dd80: 6e5f 6461 7461 5f66 696c 652e 6973 5f66  n_data_file.is_f
-0000dd90: 696c 6528 293a 0a20 2020 2020 2020 2020  ile():.         
-0000dda0: 2020 2073 656c 662e 5f5f 6f66 6673 6574     self.__offset
-0000ddb0: 5f64 6f63 7374 6172 7473 2864 6174 615f  _docstarts(data_
-0000ddc0: 666f 6c64 6572 202f 2022 7261 7722 202f  folder / "raw" /
-0000ddd0: 2022 6e65 642e 7472 6169 6e22 2c20 6461   "ned.train", da
-0000dde0: 7461 5f66 6f6c 6465 7220 2f20 2274 7261  ta_folder / "tra
-0000ddf0: 696e 2e74 7874 2229 0a20 2020 2020 2020  in.txt").       
-0000de00: 2020 2020 2073 656c 662e 5f5f 6f66 6673       self.__offs
-0000de10: 6574 5f64 6f63 7374 6172 7473 2864 6174  et_docstarts(dat
-0000de20: 615f 666f 6c64 6572 202f 2022 7261 7722  a_folder / "raw"
-0000de30: 202f 2022 6e65 642e 7465 7374 6122 2c20   / "ned.testa", 
-0000de40: 6461 7461 5f66 6f6c 6465 7220 2f20 2264  data_folder / "d
-0000de50: 6576 2e74 7874 2229 0a20 2020 2020 2020  ev.txt").       
-0000de60: 2020 2020 2073 656c 662e 5f5f 6f66 6673       self.__offs
-0000de70: 6574 5f64 6f63 7374 6172 7473 2864 6174  et_docstarts(dat
-0000de80: 615f 666f 6c64 6572 202f 2022 7261 7722  a_folder / "raw"
-0000de90: 202f 2022 6e65 642e 7465 7374 6222 2c20   / "ned.testb", 
-0000dea0: 6461 7461 5f66 6f6c 6465 7220 2f20 2274  data_folder / "t
-0000deb0: 6573 742e 7478 7422 290a 0a20 2020 2020  est.txt")..     
-0000dec0: 2020 2073 7570 6572 2829 2e5f 5f69 6e69     super().__ini
-0000ded0: 745f 5f28 0a20 2020 2020 2020 2020 2020  t__(.           
-0000dee0: 2064 6174 615f 666f 6c64 6572 2c0a 2020   data_folder,.  
-0000def0: 2020 2020 2020 2020 2020 636f 6c75 6d6e            column
-0000df00: 732c 0a20 2020 2020 2020 2020 2020 2074  s,.            t
-0000df10: 7261 696e 5f66 696c 653d 2274 7261 696e  rain_file="train
-0000df20: 2e74 7874 222c 0a20 2020 2020 2020 2020  .txt",.         
-0000df30: 2020 2064 6576 5f66 696c 653d 2264 6576     dev_file="dev
-0000df40: 2e74 7874 222c 0a20 2020 2020 2020 2020  .txt",.         
-0000df50: 2020 2074 6573 745f 6669 6c65 3d22 7465     test_file="te
-0000df60: 7374 2e74 7874 222c 0a20 2020 2020 2020  st.txt",.       
-0000df70: 2020 2020 2065 6e63 6f64 696e 673d 226c       encoding="l
-0000df80: 6174 696e 2d31 222c 0a20 2020 2020 2020  atin-1",.       
-0000df90: 2020 2020 2069 6e5f 6d65 6d6f 7279 3d69       in_memory=i
-0000dfa0: 6e5f 6d65 6d6f 7279 2c0a 2020 2020 2020  n_memory,.      
-0000dfb0: 2020 2020 2020 646f 6375 6d65 6e74 5f73        document_s
-0000dfc0: 6570 6172 6174 6f72 5f74 6f6b 656e 3d22  eparator_token="
-0000dfd0: 2d44 4f43 5354 4152 542d 222c 0a20 2020  -DOCSTART-",.   
-0000dfe0: 2020 2020 2020 2020 202a 2a63 6f72 7075           **corpu
-0000dff0: 7361 7267 732c 0a20 2020 2020 2020 2029  sargs,.        )
-0000e000: 0a0a 2020 2020 4073 7461 7469 636d 6574  ..    @staticmet
-0000e010: 686f 640a 2020 2020 6465 6620 5f5f 6f66  hod.    def __of
-0000e020: 6673 6574 5f64 6f63 7374 6172 7473 2866  fset_docstarts(f
-0000e030: 696c 655f 696e 3a20 556e 696f 6e5b 7374  ile_in: Union[st
-0000e040: 722c 2050 6174 685d 2c20 6669 6c65 5f6f  r, Path], file_o
-0000e050: 7574 3a20 556e 696f 6e5b 7374 722c 2050  ut: Union[str, P
-0000e060: 6174 685d 293a 0a20 2020 2020 2020 2077  ath]):.        w
-0000e070: 6974 6820 6f70 656e 2866 696c 655f 696e  ith open(file_in
-0000e080: 2c20 656e 636f 6469 6e67 3d22 6c61 7469  , encoding="lati
-0000e090: 6e2d 3122 2920 6173 2066 3a0a 2020 2020  n-1") as f:.    
-0000e0a0: 2020 2020 2020 2020 6c69 6e65 7320 3d20          lines = 
-0000e0b0: 662e 7265 6164 6c69 6e65 7328 290a 2020  f.readlines().  
-0000e0c0: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
-0000e0d0: 6669 6c65 5f6f 7574 2c20 2277 222c 2065  file_out, "w", e
-0000e0e0: 6e63 6f64 696e 673d 226c 6174 696e 2d31  ncoding="latin-1
-0000e0f0: 2229 2061 7320 663a 0a20 2020 2020 2020  ") as f:.       
-0000e100: 2020 2020 2066 6f72 206c 696e 6520 696e       for line in
-0000e110: 206c 696e 6573 3a0a 2020 2020 2020 2020   lines:.        
-0000e120: 2020 2020 2020 2020 662e 7772 6974 6528          f.write(
-0000e130: 6c69 6e65 290a 2020 2020 2020 2020 2020  line).          
-0000e140: 2020 2020 2020 6966 206c 696e 652e 7374        if line.st
-0000e150: 6172 7473 7769 7468 2822 2d44 4f43 5354  artswith("-DOCST
-0000e160: 4152 542d 2229 3a0a 2020 2020 2020 2020  ART-"):.        
-0000e170: 2020 2020 2020 2020 2020 2020 662e 7772              f.wr
-0000e180: 6974 6528 225c 6e22 290a 0a0a 636c 6173  ite("\n")...clas
-0000e190: 7320 434f 4e4c 4c5f 3033 5f53 5041 4e49  s CONLL_03_SPANI
-0000e1a0: 5348 2843 6f6c 756d 6e43 6f72 7075 7329  SH(ColumnCorpus)
-0000e1b0: 3a0a 2020 2020 6465 6620 5f5f 696e 6974  :.    def __init
-0000e1c0: 5f5f 280a 2020 2020 2020 2020 7365 6c66  __(.        self
-0000e1d0: 2c0a 2020 2020 2020 2020 6261 7365 5f70  ,.        base_p
-0000e1e0: 6174 683a 204f 7074 696f 6e61 6c5b 556e  ath: Optional[Un
-0000e1f0: 696f 6e5b 7374 722c 2050 6174 685d 5d20  ion[str, Path]] 
-0000e200: 3d20 4e6f 6e65 2c0a 2020 2020 2020 2020  = None,.        
-0000e210: 696e 5f6d 656d 6f72 793a 2062 6f6f 6c20  in_memory: bool 
-0000e220: 3d20 5472 7565 2c0a 2020 2020 2020 2020  = True,.        
-0000e230: 2a2a 636f 7270 7573 6172 6773 2c0a 2020  **corpusargs,.  
-0000e240: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-0000e250: 2020 2020 2022 2222 496e 6974 6961 6c69       """Initiali
-0000e260: 7a65 2074 6865 2043 6f4e 4c4c 2d30 3320  ze the CoNLL-03 
-0000e270: 636f 7270 7573 2066 6f72 2053 7061 6e69  corpus for Spani
-0000e280: 7368 2e0a 0a20 2020 2020 2020 2054 6865  sh...        The
-0000e290: 2066 6972 7374 2074 696d 6520 796f 7520   first time you 
-0000e2a0: 6361 6c6c 2074 6869 7320 636f 6e73 7472  call this constr
-0000e2b0: 7563 746f 7220 6974 2077 696c 6c20 6175  uctor it will au
-0000e2c0: 746f 6d61 7469 6361 6c6c 7920 646f 776e  tomatically down
-0000e2d0: 6c6f 6164 2074 6865 2064 6174 6173 6574  load the dataset
-0000e2e0: 2e0a 0a20 2020 2020 2020 2041 7267 733a  ...        Args:
-0000e2f0: 0a20 2020 2020 2020 2020 2020 2062 6173  .            bas
-0000e300: 655f 7061 7468 3a20 4465 6661 756c 7420  e_path: Default 
-0000e310: 6973 204e 6f6e 652c 206d 6561 6e69 6e67  is None, meaning
-0000e320: 2074 6861 7420 636f 7270 7573 2067 6574   that corpus get
-0000e330: 7320 6175 746f 2d64 6f77 6e6c 6f61 6465  s auto-downloade
-0000e340: 6420 616e 6420 6c6f 6164 6564 2e20 596f  d and loaded. Yo
-0000e350: 7520 6361 6e20 6f76 6572 7269 6465 2074  u can override t
-0000e360: 6869 7320 746f 2070 6f69 6e74 2074 6f20  his to point to 
-0000e370: 6120 6469 6666 6572 656e 7420 666f 6c64  a different fold
-0000e380: 6572 2062 7574 2074 7970 6963 616c 6c79  er but typically
-0000e390: 2074 6869 7320 7368 6f75 6c64 206e 6f74   this should not
-0000e3a0: 2062 6520 6e65 6365 7373 6172 792e 0a20   be necessary.. 
-0000e3b0: 2020 2020 2020 2020 2020 2069 6e5f 6d65             in_me
-0000e3c0: 6d6f 7279 3a20 4966 2054 7275 652c 206b  mory: If True, k
-0000e3d0: 6565 7073 2064 6174 6173 6574 2069 6e20  eeps dataset in 
-0000e3e0: 6d65 6d6f 7279 2067 6976 696e 6720 7370  memory giving sp
-0000e3f0: 6565 6475 7073 2069 6e20 7472 6169 6e69  eedups in traini
-0000e400: 6e67 2e0a 2020 2020 2020 2020 2222 220a  ng..        """.
-0000e410: 2020 2020 2020 2020 6261 7365 5f70 6174          base_pat
-0000e420: 6820 3d20 6b6f 6c69 6272 692e 6361 6368  h = kolibri.cach
-0000e430: 655f 726f 6f74 202f 2022 6461 7461 7365  e_root / "datase
-0000e440: 7473 2220 6966 206e 6f74 2062 6173 655f  ts" if not base_
-0000e450: 7061 7468 2065 6c73 6520 5061 7468 2862  path else Path(b
-0000e460: 6173 655f 7061 7468 290a 0a20 2020 2020  ase_path)..     
-0000e470: 2020 2023 2063 6f6c 756d 6e20 666f 726d     # column form
-0000e480: 6174 0a20 2020 2020 2020 2063 6f6c 756d  at.        colum
-0000e490: 6e73 203d 207b 303a 2022 7465 7874 222c  ns = {0: "text",
-0000e4a0: 2031 3a20 226e 6572 227d 0a0a 2020 2020   1: "ner"}..    
-0000e4b0: 2020 2020 2320 7468 6973 2064 6174 6173      # this datas
-0000e4c0: 6574 206e 616d 650a 2020 2020 2020 2020  et name.        
-0000e4d0: 6461 7461 7365 745f 6e61 6d65 203d 2073  dataset_name = s
-0000e4e0: 656c 662e 5f5f 636c 6173 735f 5f2e 5f5f  elf.__class__.__
-0000e4f0: 6e61 6d65 5f5f 2e6c 6f77 6572 2829 0a0a  name__.lower()..
-0000e500: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
-0000e510: 6465 7220 3d20 6261 7365 5f70 6174 6820  der = base_path 
-0000e520: 2f20 6461 7461 7365 745f 6e61 6d65 0a0a  / dataset_name..
-0000e530: 2020 2020 2020 2020 2320 646f 776e 6c6f          # downlo
-0000e540: 6164 2064 6174 6120 6966 206e 6563 6573  ad data if neces
-0000e550: 7361 7279 0a20 2020 2020 2020 2063 6f6e  sary.        con
-0000e560: 6c6c 5f30 325f 7061 7468 203d 2022 6874  ll_02_path = "ht
-0000e570: 7470 733a 2f2f 7777 772e 636c 6970 732e  tps://www.clips.
-0000e580: 7561 6e74 7765 7270 656e 2e62 652f 636f  uantwerpen.be/co
-0000e590: 6e6c 6c32 3030 322f 6e65 722f 6461 7461  nll2002/ner/data
-0000e5a0: 2f22 0a20 2020 2020 2020 2063 6163 6865  /".        cache
-0000e5b0: 645f 7061 7468 2866 227b 636f 6e6c 6c5f  d_path(f"{conll_
-0000e5c0: 3032 5f70 6174 687d 6573 702e 7465 7374  02_path}esp.test
-0000e5d0: 6122 2c20 5061 7468 2822 6461 7461 7365  a", Path("datase
-0000e5e0: 7473 2229 202f 2064 6174 6173 6574 5f6e  ts") / dataset_n
-0000e5f0: 616d 6529 0a20 2020 2020 2020 2063 6163  ame).        cac
-0000e600: 6865 645f 7061 7468 2866 227b 636f 6e6c  hed_path(f"{conl
-0000e610: 6c5f 3032 5f70 6174 687d 6573 702e 7465  l_02_path}esp.te
-0000e620: 7374 6222 2c20 5061 7468 2822 6461 7461  stb", Path("data
-0000e630: 7365 7473 2229 202f 2064 6174 6173 6574  sets") / dataset
-0000e640: 5f6e 616d 6529 0a20 2020 2020 2020 2063  _name).        c
-0000e650: 6163 6865 645f 7061 7468 2866 227b 636f  ached_path(f"{co
-0000e660: 6e6c 6c5f 3032 5f70 6174 687d 6573 702e  nll_02_path}esp.
-0000e670: 7472 6169 6e22 2c20 5061 7468 2822 6461  train", Path("da
-0000e680: 7461 7365 7473 2229 202f 2064 6174 6173  tasets") / datas
-0000e690: 6574 5f6e 616d 6529 0a0a 2020 2020 2020  et_name)..      
+000092d0: 2020 2020 2020 2020 7472 696d 6d65 645f          trimmed_
+000092e0: 7365 6e74 656e 6365 203d 205b 5f73 656e  sentence = [_sen
+000092f0: 742e 7370 6c69 7428 2223 2229 5b30 5d20  t.split("#")[0] 
+00009300: 666f 7220 5f73 656e 7420 696e 2073 656e  for _sent in sen
+00009310: 745b 2273 656e 7465 6e63 6522 5d5d 0a20  t["sentence"]]. 
+00009320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009340: 2020 2020 2020 2073 656e 745b 2273 656e         sent["sen
+00009350: 7465 6e63 6522 5d20 3d20 7472 696d 6d65  tence"] = trimme
+00009360: 645f 7365 6e74 656e 6365 0a20 2020 2020  d_sentence.     
+00009370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009380: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00009390: 6f72 2072 6f77 2069 6e20 7a69 7028 7365  or row in zip(se
+000093a0: 6e74 5b22 7365 6e74 656e 6365 225d 2c20  nt["sentence"], 
+000093b0: 7365 6e74 5b22 706f 735f 7461 6773 225d  sent["pos_tags"]
+000093c0: 2c20 7365 6e74 5b22 6e61 6d65 645f 656e  , sent["named_en
+000093d0: 7469 7469 6573 225d 293a 0a20 2020 2020  tities"]):.     
+000093e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000093f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009400: 2020 2066 2e77 7269 7465 2822 5c74 222e     f.write("\t".
+00009410: 6a6f 696e 2872 6f77 2920 2b20 225c 6e22  join(row) + "\n"
+00009420: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00009430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009440: 2020 2020 2020 662e 7772 6974 6528 225c        f.write("\
+00009450: 6e22 290a 2020 2020 2020 2020 7265 7475  n").        retu
+00009460: 726e 2070 726f 6365 7373 6564 5f64 6174  rn processed_dat
+00009470: 615f 7061 7468 0a0a 2020 2020 4063 6c61  a_path..    @cla
+00009480: 7373 6d65 7468 6f64 0a20 2020 2064 6566  ssmethod.    def
+00009490: 205f 656e 7375 7265 5f64 6174 615f 646f   _ensure_data_do
+000094a0: 776e 6c6f 6164 6564 2863 6c73 2c20 6261  wnloaded(cls, ba
+000094b0: 7365 5f70 6174 683a 204f 7074 696f 6e61  se_path: Optiona
+000094c0: 6c5b 556e 696f 6e5b 7374 722c 2050 6174  l[Union[str, Pat
+000094d0: 685d 5d20 3d20 4e6f 6e65 2920 2d3e 2050  h]] = None) -> P
+000094e0: 6174 683a 0a20 2020 2020 2020 2062 6173  ath:.        bas
+000094f0: 655f 7061 7468 203d 206b 6f6c 6962 7269  e_path = kolibri
+00009500: 2e63 6163 6865 5f72 6f6f 7420 2f20 2264  .cache_root / "d
+00009510: 6174 6173 6574 7322 2069 6620 6e6f 7420  atasets" if not 
+00009520: 6261 7365 5f70 6174 6820 656c 7365 2050  base_path else P
+00009530: 6174 6828 6261 7365 5f70 6174 6829 0a0a  ath(base_path)..
+00009540: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
+00009550: 6465 7220 3d20 6261 7365 5f70 6174 6820  der = base_path 
+00009560: 2f20 2263 6f6e 6c6c 2d32 3031 3222 0a0a  / "conll-2012"..
+00009570: 2020 2020 2020 2020 6966 206e 6f74 2064          if not d
+00009580: 6174 615f 666f 6c64 6572 2e65 7869 7374  ata_folder.exist
+00009590: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
+000095a0: 2075 6e70 6163 6b5f 6669 6c65 2863 6163   unpack_file(cac
+000095b0: 6865 645f 7061 7468 2863 6c73 2e61 7263  hed_path(cls.arc
+000095c0: 6869 7665 5f75 726c 2c20 6461 7461 5f66  hive_url, data_f
+000095d0: 6f6c 6465 7229 2c20 6461 7461 5f66 6f6c  older), data_fol
+000095e0: 6465 722e 7061 7265 6e74 2c20 227a 6970  der.parent, "zip
+000095f0: 222c 2046 616c 7365 290a 0a20 2020 2020  ", False)..     
+00009600: 2020 2072 6574 7572 6e20 6461 7461 5f66     return data_f
+00009610: 6f6c 6465 720a 0a20 2020 2040 636c 6173  older..    @clas
+00009620: 736d 6574 686f 640a 2020 2020 6465 6620  smethod.    def 
+00009630: 5f70 726f 6365 7373 5f63 6f72 6566 5f73  _process_coref_s
+00009640: 7061 6e5f 616e 6e6f 7461 7469 6f6e 735f  pan_annotations_
+00009650: 666f 725f 776f 7264 280a 2020 2020 2020  for_word(.      
+00009660: 2020 636c 732c 0a20 2020 2020 2020 206c    cls,.        l
+00009670: 6162 656c 3a20 7374 722c 0a20 2020 2020  abel: str,.     
+00009680: 2020 2077 6f72 645f 696e 6465 783a 2069     word_index: i
+00009690: 6e74 2c0a 2020 2020 2020 2020 636c 7573  nt,.        clus
+000096a0: 7465 7273 3a20 4465 6661 756c 7444 6963  ters: DefaultDic
+000096b0: 745b 696e 742c 204c 6973 745b 5475 706c  t[int, List[Tupl
+000096c0: 655b 696e 742c 2069 6e74 5d5d 5d2c 0a20  e[int, int]]],. 
+000096d0: 2020 2020 2020 2063 6f72 6566 5f73 7461         coref_sta
+000096e0: 636b 733a 2044 6566 6175 6c74 4469 6374  cks: DefaultDict
+000096f0: 5b69 6e74 2c20 4c69 7374 5b69 6e74 5d5d  [int, List[int]]
+00009700: 2c0a 2020 2020 2920 2d3e 204e 6f6e 653a  ,.    ) -> None:
+00009710: 0a20 2020 2020 2020 2022 2222 466f 7220  .        """For 
+00009720: 6120 6769 7665 6e20 636f 7265 6620 6c61  a given coref la
+00009730: 6265 6c2c 2061 6464 2069 7420 746f 2061  bel, add it to a
+00009740: 2063 7572 7265 6e74 6c79 206f 7065 6e20   currently open 
+00009750: 7370 616e 2873 292c 2063 6f6d 706c 6574  span(s), complet
+00009760: 6520 6120 7370 616e 2873 2920 6f72 2069  e a span(s) or i
+00009770: 676e 6f72 6520 6974 2c20 6966 2069 7420  gnore it, if it 
+00009780: 6973 206f 7574 7369 6465 206f 6620 616c  is outside of al
+00009790: 6c20 7370 616e 732e 0a0a 2020 2020 2020  l spans...      
+000097a0: 2020 5468 6973 206d 6574 686f 6420 6d75    This method mu
+000097b0: 7461 7465 7320 7468 6520 636c 7573 7465  tates the cluste
+000097c0: 7273 2061 6e64 2063 6f72 6566 5f73 7461  rs and coref_sta
+000097d0: 636b 7320 6469 6374 696f 6e61 7269 6573  cks dictionaries
+000097e0: 2e0a 0a20 2020 2020 2020 2041 7267 733a  ...        Args:
+000097f0: 0a20 2020 2020 2020 2020 2020 206c 6162  .            lab
+00009800: 656c 3a20 5468 6520 636f 7265 6620 6c61  el: The coref la
+00009810: 6265 6c20 666f 7220 7468 6973 2077 6f72  bel for this wor
+00009820: 642e 0a20 2020 2020 2020 2020 2020 2077  d..            w
+00009830: 6f72 645f 696e 6465 7820 3a20 5468 6520  ord_index : The 
+00009840: 776f 7264 2069 6e64 6578 2069 6e74 6f20  word index into 
+00009850: 7468 6520 7365 6e74 656e 6365 2e0a 2020  the sentence..  
+00009860: 2020 2020 2020 2020 2020 636c 7573 7465            cluste
+00009870: 7273 203a 2041 2064 6963 7469 6f6e 6172  rs : A dictionar
+00009880: 7920 6d61 7070 696e 6720 636c 7573 7465  y mapping cluste
+00009890: 7220 6964 7320 746f 206c 6973 7473 206f  r ids to lists o
+000098a0: 6620 696e 636c 7573 6976 6520 7370 616e  f inclusive span
+000098b0: 7320 696e 746f 2074 6865 2073 656e 7465  s into the sente
+000098c0: 6e63 652e 0a20 2020 2020 2020 2020 2020  nce..           
+000098d0: 2063 6f72 6566 5f73 7461 636b 7320 3a20   coref_stacks : 
+000098e0: 5374 6163 6b73 2066 6f72 2065 6163 6820  Stacks for each 
+000098f0: 636c 7573 7465 7220 6964 2074 6f20 686f  cluster id to ho
+00009900: 6c64 2074 6865 2073 7461 7274 2069 6e64  ld the start ind
+00009910: 6963 6573 206f 6620 6f70 656e 2073 7061  ices of open spa
+00009920: 6e73 2e20 5370 616e 7320 7769 7468 2074  ns. Spans with t
+00009930: 6865 2073 616d 6520 6964 2063 616e 2062  he same id can b
+00009940: 6520 6e65 7374 6564 2c20 7768 6963 6820  e nested, which 
+00009950: 6973 2077 6879 2077 6520 636f 6c6c 6563  is why we collec
+00009960: 7420 7468 6573 6520 6f70 656e 696e 6720  t these opening 
+00009970: 7370 616e 7320 6f6e 2061 2073 7461 636b  spans on a stack
+00009980: 2c20 652e 673a 205b 4772 6567 2c20 7468  , e.g: [Greg, th
+00009990: 6520 6261 6b65 7220 7768 6f20 7265 6665  e baker who refe
+000099a0: 7272 6564 2074 6f20 5b68 696d 7365 6c66  rred to [himself
+000099b0: 5d5f 4944 3120 6173 2027 7468 6520 6272  ]_ID1 as 'the br
+000099c0: 6561 6420 6d61 6e27 5d5f 4944 310a 2020  ead man']_ID1.  
+000099d0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+000099e0: 2020 6966 206c 6162 656c 2021 3d20 222d    if label != "-
+000099f0: 223a 0a20 2020 2020 2020 2020 2020 2066  ":.            f
+00009a00: 6f72 2073 6567 6d65 6e74 2069 6e20 6c61  or segment in la
+00009a10: 6265 6c2e 7370 6c69 7428 227c 2229 3a0a  bel.split("|"):.
+00009a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009a30: 2320 5468 6520 636f 6e6c 6c20 7265 7072  # The conll repr
+00009a40: 6573 656e 7461 7469 6f6e 206f 6620 636f  esentation of co
+00009a50: 7265 6620 7370 616e 7320 616c 6c6f 7773  ref spans allows
+00009a60: 2073 7061 6e73 2074 6f0a 2020 2020 2020   spans to.      
+00009a70: 2020 2020 2020 2020 2020 2320 6f76 6572            # over
+00009a80: 6c61 702e 2049 6620 7370 616e 7320 656e  lap. If spans en
+00009a90: 6420 6f72 2062 6567 696e 2061 7420 7468  d or begin at th
+00009aa0: 6520 7361 6d65 2077 6f72 642c 2074 6865  e same word, the
+00009ab0: 7920 6172 650a 2020 2020 2020 2020 2020  y are.          
+00009ac0: 2020 2020 2020 2320 7365 7061 7261 7465        # separate
+00009ad0: 6420 6279 2061 2022 7c22 2e0a 2020 2020  d by a "|"..    
+00009ae0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+00009af0: 6567 6d65 6e74 5b30 5d20 3d3d 2022 2822  egment[0] == "("
+00009b00: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00009b10: 2020 2020 2020 2320 5468 6520 7370 616e        # The span
+00009b20: 2062 6567 696e 7320 6174 2074 6869 7320   begins at this 
+00009b30: 776f 7264 2e0a 2020 2020 2020 2020 2020  word..          
+00009b40: 2020 2020 2020 2020 2020 6966 2073 6567            if seg
+00009b50: 6d65 6e74 5b2d 315d 203d 3d20 2229 223a  ment[-1] == ")":
+00009b60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009b70: 2020 2020 2020 2020 2023 2054 6865 2073           # The s
+00009b80: 7061 6e20 6265 6769 6e73 2061 6e64 2065  pan begins and e
+00009b90: 6e64 7320 6174 2074 6869 7320 776f 7264  nds at this word
+00009ba0: 2028 7369 6e67 6c65 2077 6f72 6420 7370   (single word sp
+00009bb0: 616e 292e 0a20 2020 2020 2020 2020 2020  an)..           
+00009bc0: 2020 2020 2020 2020 2020 2020 2063 6c75               clu
+00009bd0: 7374 6572 5f69 6420 3d20 696e 7428 7365  ster_id = int(se
+00009be0: 676d 656e 745b 313a 2d31 5d29 0a20 2020  gment[1:-1]).   
+00009bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009c00: 2020 2020 2063 6c75 7374 6572 735b 636c       clusters[cl
+00009c10: 7573 7465 725f 6964 5d2e 6170 7065 6e64  uster_id].append
+00009c20: 2828 776f 7264 5f69 6e64 6578 2c20 776f  ((word_index, wo
+00009c30: 7264 5f69 6e64 6578 2929 0a20 2020 2020  rd_index)).     
+00009c40: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00009c50: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00009c60: 2020 2020 2020 2020 2020 2020 2023 2054               # T
+00009c70: 6865 2073 7061 6e20 6973 2073 7461 7274  he span is start
+00009c80: 696e 672c 2073 6f20 7765 2072 6563 6f72  ing, so we recor
+00009c90: 6420 7468 6520 696e 6465 7820 6f66 2074  d the index of t
+00009ca0: 6865 2077 6f72 642e 0a20 2020 2020 2020  he word..       
+00009cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009cc0: 2063 6c75 7374 6572 5f69 6420 3d20 696e   cluster_id = in
+00009cd0: 7428 7365 676d 656e 745b 313a 5d29 0a20  t(segment[1:]). 
+00009ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009cf0: 2020 2020 2020 2063 6f72 6566 5f73 7461         coref_sta
+00009d00: 636b 735b 636c 7573 7465 725f 6964 5d2e  cks[cluster_id].
+00009d10: 6170 7065 6e64 2877 6f72 645f 696e 6465  append(word_inde
+00009d20: 7829 0a20 2020 2020 2020 2020 2020 2020  x).             
+00009d30: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00009d40: 2020 2020 2020 2020 2020 2020 2023 2054               # T
+00009d50: 6865 2073 7061 6e20 666f 7220 7468 6973  he span for this
+00009d60: 2069 6420 6973 2065 6e64 696e 672c 2062   id is ending, b
+00009d70: 7574 2064 6964 6e27 7420 7374 6172 7420  ut didn't start 
+00009d80: 6174 2074 6869 7320 776f 7264 2e0a 2020  at this word..  
+00009d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009da0: 2020 2320 5265 7472 6965 7665 2074 6865    # Retrieve the
+00009db0: 2073 7461 7274 2069 6e64 6578 2066 726f   start index fro
+00009dc0: 6d20 7468 6520 646f 6375 6d65 6e74 2073  m the document s
+00009dd0: 7461 7465 2061 6e64 0a20 2020 2020 2020  tate and.       
+00009de0: 2020 2020 2020 2020 2020 2020 2023 2061               # a
+00009df0: 6464 2074 6865 2073 7061 6e20 746f 2074  dd the span to t
+00009e00: 6865 2063 6c75 7374 6572 7320 666f 7220  he clusters for 
+00009e10: 7468 6973 2069 642e 0a20 2020 2020 2020  this id..       
+00009e20: 2020 2020 2020 2020 2020 2020 2063 6c75               clu
+00009e30: 7374 6572 5f69 6420 3d20 696e 7428 7365  ster_id = int(se
+00009e40: 676d 656e 745b 3a2d 315d 290a 2020 2020  gment[:-1]).    
+00009e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009e60: 7374 6172 7420 3d20 636f 7265 665f 7374  start = coref_st
+00009e70: 6163 6b73 5b63 6c75 7374 6572 5f69 645d  acks[cluster_id]
+00009e80: 2e70 6f70 2829 0a20 2020 2020 2020 2020  .pop().         
+00009e90: 2020 2020 2020 2020 2020 2063 6c75 7374             clust
+00009ea0: 6572 735b 636c 7573 7465 725f 6964 5d2e  ers[cluster_id].
+00009eb0: 6170 7065 6e64 2828 7374 6172 742c 2077  append((start, w
+00009ec0: 6f72 645f 696e 6465 7829 290a 0a20 2020  ord_index))..   
+00009ed0: 2040 636c 6173 736d 6574 686f 640a 2020   @classmethod.  
+00009ee0: 2020 6465 6620 5f70 726f 6365 7373 5f73    def _process_s
+00009ef0: 7061 6e5f 616e 6e6f 7461 7469 6f6e 735f  pan_annotations_
+00009f00: 666f 725f 776f 7264 280a 2020 2020 2020  for_word(.      
+00009f10: 2020 636c 732c 0a20 2020 2020 2020 2061    cls,.        a
+00009f20: 6e6e 6f74 6174 696f 6e73 3a20 4c69 7374  nnotations: List
+00009f30: 5b73 7472 5d2c 0a20 2020 2020 2020 2073  [str],.        s
+00009f40: 7061 6e5f 6c61 6265 6c73 3a20 4c69 7374  pan_labels: List
+00009f50: 5b4c 6973 745b 7374 725d 5d2c 0a20 2020  [List[str]],.   
+00009f60: 2020 2020 2063 7572 7265 6e74 5f73 7061       current_spa
+00009f70: 6e5f 6c61 6265 6c73 3a20 4c69 7374 5b4f  n_labels: List[O
+00009f80: 7074 696f 6e61 6c5b 7374 725d 5d2c 0a20  ptional[str]],. 
+00009f90: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
+00009fa0: 2020 2020 2020 666f 7220 616e 6e6f 7461        for annota
+00009fb0: 7469 6f6e 5f69 6e64 6578 2c20 616e 6e6f  tion_index, anno
+00009fc0: 7461 7469 6f6e 2069 6e20 656e 756d 6572  tation in enumer
+00009fd0: 6174 6528 616e 6e6f 7461 7469 6f6e 7329  ate(annotations)
+00009fe0: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
+00009ff0: 7374 7269 7020 616c 6c20 6272 6163 6b65  strip all bracke
+0000a000: 7469 6e67 2069 6e66 6f72 6d61 7469 6f6e  ting information
+0000a010: 2074 6f0a 2020 2020 2020 2020 2020 2020   to.            
+0000a020: 2320 6765 7420 7468 6520 6163 7475 616c  # get the actual
+0000a030: 2070 726f 7062 616e 6b20 6c61 6265 6c2e   propbank label.
+0000a040: 0a20 2020 2020 2020 2020 2020 206c 6162  .            lab
+0000a050: 656c 203d 2061 6e6e 6f74 6174 696f 6e2e  el = annotation.
+0000a060: 7374 7269 7028 2228 292a 2229 0a0a 2020  strip("()*")..  
+0000a070: 2020 2020 2020 2020 2020 6966 2022 2822            if "("
+0000a080: 2069 6e20 616e 6e6f 7461 7469 6f6e 3a0a   in annotation:.
+0000a090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a0a0: 2320 456e 7465 7269 6e67 2069 6e74 6f20  # Entering into 
+0000a0b0: 6120 7370 616e 2066 6f72 2061 2070 6172  a span for a par
+0000a0c0: 7469 6375 6c61 7220 7365 6d61 6e74 6963  ticular semantic
+0000a0d0: 2072 6f6c 6520 6c61 6265 6c2e 0a20 2020   role label..   
+0000a0e0: 2020 2020 2020 2020 2020 2020 2023 2057               # W
+0000a0f0: 6520 6170 7065 6e64 2074 6865 206c 6162  e append the lab
+0000a100: 656c 2061 6e64 2073 6574 2074 6865 2063  el and set the c
+0000a110: 7572 7265 6e74 2073 7061 6e20 666f 7220  urrent span for 
+0000a120: 7468 6973 2061 6e6e 6f74 6174 696f 6e2e  this annotation.
+0000a130: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a140: 2062 696f 5f6c 6162 656c 203d 2022 422d   bio_label = "B-
+0000a150: 2220 2b20 6c61 6265 6c0a 2020 2020 2020  " + label.      
+0000a160: 2020 2020 2020 2020 2020 7370 616e 5f6c            span_l
+0000a170: 6162 656c 735b 616e 6e6f 7461 7469 6f6e  abels[annotation
+0000a180: 5f69 6e64 6578 5d2e 6170 7065 6e64 2862  _index].append(b
+0000a190: 696f 5f6c 6162 656c 290a 2020 2020 2020  io_label).      
+0000a1a0: 2020 2020 2020 2020 2020 6375 7272 656e            curren
+0000a1b0: 745f 7370 616e 5f6c 6162 656c 735b 616e  t_span_labels[an
+0000a1c0: 6e6f 7461 7469 6f6e 5f69 6e64 6578 5d20  notation_index] 
+0000a1d0: 3d20 6c61 6265 6c0a 2020 2020 2020 2020  = label.        
+0000a1e0: 2020 2020 656c 6966 2063 7572 7265 6e74      elif current
+0000a1f0: 5f73 7061 6e5f 6c61 6265 6c73 5b61 6e6e  _span_labels[ann
+0000a200: 6f74 6174 696f 6e5f 696e 6465 785d 2069  otation_index] i
+0000a210: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0000a220: 2020 2020 2020 2020 2020 2020 2320 4966              # If
+0000a230: 2074 6865 7265 2773 206e 6f20 2728 2720   there's no '(' 
+0000a240: 746f 6b65 6e2c 2062 7574 2074 6865 2063  token, but the c
+0000a250: 7572 7265 6e74 5f73 7061 6e5f 6c61 6265  urrent_span_labe
+0000a260: 6c20 6973 206e 6f74 204e 6f6e 652c 0a20  l is not None,. 
+0000a270: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000a280: 2074 6865 6e20 7765 2061 7265 2069 6e73   then we are ins
+0000a290: 6964 6520 6120 7370 616e 2e0a 2020 2020  ide a span..    
+0000a2a0: 2020 2020 2020 2020 2020 2020 6269 6f5f              bio_
+0000a2b0: 6c61 6265 6c20 3d20 2249 2d22 202b 2063  label = "I-" + c
+0000a2c0: 6173 7428 7374 722c 2063 7572 7265 6e74  ast(str, current
+0000a2d0: 5f73 7061 6e5f 6c61 6265 6c73 5b61 6e6e  _span_labels[ann
+0000a2e0: 6f74 6174 696f 6e5f 696e 6465 785d 290a  otation_index]).
+0000a2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a300: 7370 616e 5f6c 6162 656c 735b 616e 6e6f  span_labels[anno
+0000a310: 7461 7469 6f6e 5f69 6e64 6578 5d2e 6170  tation_index].ap
+0000a320: 7065 6e64 2862 696f 5f6c 6162 656c 290a  pend(bio_label).
+0000a330: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0000a340: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000a350: 2020 2320 5765 2772 6520 6f75 7473 6964    # We're outsid
+0000a360: 6520 6120 7370 616e 2e0a 2020 2020 2020  e a span..      
+0000a370: 2020 2020 2020 2020 2020 7370 616e 5f6c            span_l
+0000a380: 6162 656c 735b 616e 6e6f 7461 7469 6f6e  abels[annotation
+0000a390: 5f69 6e64 6578 5d2e 6170 7065 6e64 2822  _index].append("
+0000a3a0: 4f22 290a 2020 2020 2020 2020 2020 2020  O").            
+0000a3b0: 2320 4578 6974 696e 6720 6120 7370 616e  # Exiting a span
+0000a3c0: 2c20 736f 2077 6520 7265 7365 7420 7468  , so we reset th
+0000a3d0: 6520 6375 7272 656e 7420 7370 616e 206c  e current span l
+0000a3e0: 6162 656c 2066 6f72 2074 6869 7320 616e  abel for this an
+0000a3f0: 6e6f 7461 7469 6f6e 2e0a 2020 2020 2020  notation..      
+0000a400: 2020 2020 2020 6966 2022 2922 2069 6e20        if ")" in 
+0000a410: 616e 6e6f 7461 7469 6f6e 3a0a 2020 2020  annotation:.    
+0000a420: 2020 2020 2020 2020 2020 2020 6375 7272              curr
+0000a430: 656e 745f 7370 616e 5f6c 6162 656c 735b  ent_span_labels[
+0000a440: 616e 6e6f 7461 7469 6f6e 5f69 6e64 6578  annotation_index
+0000a450: 5d20 3d20 4e6f 6e65 0a0a 2020 2020 4063  ] = None..    @c
+0000a460: 6c61 7373 6d65 7468 6f64 0a20 2020 2064  lassmethod.    d
+0000a470: 6566 205f 636f 6e6c 6c5f 726f 7773 5f74  ef _conll_rows_t
+0000a480: 6f5f 7365 6e74 656e 6365 2863 6c73 2c20  o_sentence(cls, 
+0000a490: 636f 6e6c 6c5f 726f 7773 3a20 4c69 7374  conll_rows: List
+0000a4a0: 5b73 7472 5d29 202d 3e20 4469 6374 3a0a  [str]) -> Dict:.
+0000a4b0: 2020 2020 2020 2020 646f 6375 6d65 6e74          document
+0000a4c0: 5f69 643a 2073 7472 0a20 2020 2020 2020  _id: str.       
+0000a4d0: 2073 656e 7465 6e63 655f 6964 3a20 696e   sentence_id: in
+0000a4e0: 740a 2020 2020 2020 2020 2320 5468 6520  t.        # The 
+0000a4f0: 776f 7264 7320 696e 2074 6865 2073 656e  words in the sen
+0000a500: 7465 6e63 652e 0a20 2020 2020 2020 2073  tence..        s
+0000a510: 656e 7465 6e63 653a 204c 6973 745b 7374  entence: List[st
+0000a520: 725d 203d 205b 5d0a 2020 2020 2020 2020  r] = [].        
+0000a530: 2320 5468 6520 706f 7320 7461 6773 206f  # The pos tags o
+0000a540: 6620 7468 6520 776f 7264 7320 696e 2074  f the words in t
+0000a550: 6865 2073 656e 7465 6e63 652e 0a20 2020  he sentence..   
+0000a560: 2020 2020 2070 6f73 5f74 6167 733a 204c       pos_tags: L
+0000a570: 6973 745b 7374 725d 203d 205b 5d0a 2020  ist[str] = [].  
+0000a580: 2020 2020 2020 2320 7468 6520 7069 6563        # the piec
+0000a590: 6573 206f 6620 7468 6520 7061 7273 6520  es of the parse 
+0000a5a0: 7472 6565 2e0a 2020 2020 2020 2020 7061  tree..        pa
+0000a5b0: 7273 655f 7069 6563 6573 3a20 4c69 7374  rse_pieces: List
+0000a5c0: 5b4f 7074 696f 6e61 6c5b 7374 725d 5d20  [Optional[str]] 
+0000a5d0: 3d20 5b5d 0a20 2020 2020 2020 2023 2054  = [].        # T
+0000a5e0: 6865 206c 656d 6d61 7469 7365 6420 666f  he lemmatised fo
+0000a5f0: 726d 206f 6620 7468 6520 776f 7264 7320  rm of the words 
+0000a600: 696e 2074 6865 2073 656e 7465 6e63 6520  in the sentence 
+0000a610: 7768 6963 680a 2020 2020 2020 2020 2320  which.        # 
+0000a620: 6861 7665 2053 524c 206f 7220 776f 7264  have SRL or word
+0000a630: 2073 656e 7365 2069 6e66 6f72 6d61 7469   sense informati
+0000a640: 6f6e 2e0a 2020 2020 2020 2020 7072 6564  on..        pred
+0000a650: 6963 6174 655f 6c65 6d6d 6173 3a20 4c69  icate_lemmas: Li
+0000a660: 7374 5b4f 7074 696f 6e61 6c5b 7374 725d  st[Optional[str]
+0000a670: 5d20 3d20 5b5d 0a20 2020 2020 2020 2023  ] = [].        #
+0000a680: 2054 6865 2046 7261 6d65 4e65 7420 4944   The FrameNet ID
+0000a690: 206f 6620 7468 6520 7072 6564 6963 6174   of the predicat
+0000a6a0: 652e 0a20 2020 2020 2020 2070 7265 6469  e..        predi
+0000a6b0: 6361 7465 5f66 7261 6d65 6e65 745f 6964  cate_framenet_id
+0000a6c0: 733a 204c 6973 745b 4f70 7469 6f6e 616c  s: List[Optional
+0000a6d0: 5b73 7472 5d5d 203d 205b 5d0a 2020 2020  [str]] = [].    
+0000a6e0: 2020 2020 2320 5468 6520 7365 6e73 6520      # The sense 
+0000a6f0: 6f66 2074 6865 2077 6f72 642c 2069 6620  of the word, if 
+0000a700: 6176 6169 6c61 626c 652e 0a20 2020 2020  available..     
+0000a710: 2020 2077 6f72 645f 7365 6e73 6573 3a20     word_senses: 
+0000a720: 4c69 7374 5b4f 7074 696f 6e61 6c5b 666c  List[Optional[fl
+0000a730: 6f61 745d 5d20 3d20 5b5d 0a20 2020 2020  oat]] = [].     
+0000a740: 2020 2023 2054 6865 2063 7572 7265 6e74     # The current
+0000a750: 2073 7065 616b 6572 2c20 6966 2061 7661   speaker, if ava
+0000a760: 696c 6162 6c65 2e0a 2020 2020 2020 2020  ilable..        
+0000a770: 7370 6561 6b65 7273 3a20 4c69 7374 5b4f  speakers: List[O
+0000a780: 7074 696f 6e61 6c5b 7374 725d 5d20 3d20  ptional[str]] = 
+0000a790: 5b5d 0a0a 2020 2020 2020 2020 7665 7262  []..        verb
+0000a7a0: 616c 5f70 7265 6469 6361 7465 733a 204c  al_predicates: L
+0000a7b0: 6973 745b 7374 725d 203d 205b 5d0a 2020  ist[str] = [].  
+0000a7c0: 2020 2020 2020 7370 616e 5f6c 6162 656c        span_label
+0000a7d0: 733a 204c 6973 745b 4c69 7374 5b73 7472  s: List[List[str
+0000a7e0: 5d5d 203d 205b 5d0a 2020 2020 2020 2020  ]] = [].        
+0000a7f0: 6375 7272 656e 745f 7370 616e 5f6c 6162  current_span_lab
+0000a800: 656c 733a 204c 6973 745b 4f70 7469 6f6e  els: List[Option
+0000a810: 616c 5b73 7472 5d5d 203d 205b 5d0a 0a20  al[str]] = [].. 
+0000a820: 2020 2020 2020 2023 2043 6c75 7374 6572         # Cluster
+0000a830: 2069 6420 2d3e 204c 6973 7420 6f66 2028   id -> List of (
+0000a840: 7374 6172 745f 696e 6465 782c 2065 6e64  start_index, end
+0000a850: 5f69 6e64 6578 2920 7370 616e 732e 0a20  _index) spans.. 
+0000a860: 2020 2020 2020 2063 6c75 7374 6572 733a         clusters:
+0000a870: 2044 6566 6175 6c74 4469 6374 5b69 6e74   DefaultDict[int
+0000a880: 2c20 4c69 7374 5b54 7570 6c65 5b69 6e74  , List[Tuple[int
+0000a890: 2c20 696e 745d 5d5d 203d 2064 6566 6175  , int]]] = defau
+0000a8a0: 6c74 6469 6374 286c 6973 7429 0a20 2020  ltdict(list).   
+0000a8b0: 2020 2020 2023 2043 6c75 7374 6572 2069       # Cluster i
+0000a8c0: 6420 2d3e 204c 6973 7420 6f66 2073 7461  d -> List of sta
+0000a8d0: 7274 5f69 6e64 6963 6573 2077 6869 6368  rt_indices which
+0000a8e0: 2061 7265 206f 7065 6e20 666f 7220 7468   are open for th
+0000a8f0: 6973 2069 642e 0a20 2020 2020 2020 2063  is id..        c
+0000a900: 6f72 6566 5f73 7461 636b 733a 2044 6566  oref_stacks: Def
+0000a910: 6175 6c74 4469 6374 5b69 6e74 2c20 4c69  aultDict[int, Li
+0000a920: 7374 5b69 6e74 5d5d 203d 2064 6566 6175  st[int]] = defau
+0000a930: 6c74 6469 6374 286c 6973 7429 0a0a 2020  ltdict(list)..  
+0000a940: 2020 2020 2020 666f 7220 696e 6465 782c        for index,
+0000a950: 2072 6f77 2069 6e20 656e 756d 6572 6174   row in enumerat
+0000a960: 6528 636f 6e6c 6c5f 726f 7773 293a 0a20  e(conll_rows):. 
+0000a970: 2020 2020 2020 2020 2020 2063 6f6e 6c6c             conll
+0000a980: 5f63 6f6d 706f 6e65 6e74 7320 3d20 726f  _components = ro
+0000a990: 772e 7370 6c69 7428 290a 0a20 2020 2020  w.split()..     
+0000a9a0: 2020 2020 2020 2064 6f63 756d 656e 745f         document_
+0000a9b0: 6964 203d 2063 6f6e 6c6c 5f63 6f6d 706f  id = conll_compo
+0000a9c0: 6e65 6e74 735b 305d 0a20 2020 2020 2020  nents[0].       
+0000a9d0: 2020 2020 2073 656e 7465 6e63 655f 6964       sentence_id
+0000a9e0: 203d 2069 6e74 2863 6f6e 6c6c 5f63 6f6d   = int(conll_com
+0000a9f0: 706f 6e65 6e74 735b 315d 290a 2020 2020  ponents[1]).    
+0000aa00: 2020 2020 2020 2020 776f 7264 203d 2063          word = c
+0000aa10: 6f6e 6c6c 5f63 6f6d 706f 6e65 6e74 735b  onll_components[
+0000aa20: 335d 0a20 2020 2020 2020 2020 2020 2070  3].            p
+0000aa30: 6f73 5f74 6167 203d 2063 6f6e 6c6c 5f63  os_tag = conll_c
+0000aa40: 6f6d 706f 6e65 6e74 735b 345d 0a0a 2020  omponents[4]..  
+0000aa50: 2020 2020 2020 2020 2020 7061 7273 655f            parse_
+0000aa60: 7069 6563 653a 204f 7074 696f 6e61 6c5b  piece: Optional[
+0000aa70: 7374 725d 0a0a 2020 2020 2020 2020 2020  str]..          
+0000aa80: 2020 2320 5265 706c 6163 6520 6272 6163    # Replace brac
+0000aa90: 6b65 7473 2069 6e20 7465 7874 2061 6e64  kets in text and
+0000aaa0: 2070 6f73 2074 6167 730a 2020 2020 2020   pos tags.      
+0000aab0: 2020 2020 2020 2320 7769 7468 2061 2064        # with a d
+0000aac0: 6966 6665 7265 6e74 2074 6f6b 656e 2066  ifferent token f
+0000aad0: 6f72 2070 6172 7365 2074 7265 6573 2e0a  or parse trees..
+0000aae0: 2020 2020 2020 2020 2020 2020 6966 2070              if p
+0000aaf0: 6f73 5f74 6167 2021 3d20 2258 5822 2061  os_tag != "XX" a
+0000ab00: 6e64 2077 6f72 6420 213d 2022 5858 223a  nd word != "XX":
+0000ab10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000ab20: 2069 6620 776f 7264 203d 3d20 2228 223a   if word == "(":
+0000ab30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000ab40: 2020 2020 2070 6172 7365 5f77 6f72 6420       parse_word 
+0000ab50: 3d20 222d 4c52 422d 220a 2020 2020 2020  = "-LRB-".      
+0000ab60: 2020 2020 2020 2020 2020 656c 6966 2077            elif w
+0000ab70: 6f72 6420 3d3d 2022 2922 3a0a 2020 2020  ord == ")":.    
+0000ab80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ab90: 7061 7273 655f 776f 7264 203d 2022 2d52  parse_word = "-R
+0000aba0: 5242 2d22 0a20 2020 2020 2020 2020 2020  RB-".           
+0000abb0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0000abc0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0000abd0: 6172 7365 5f77 6f72 6420 3d20 776f 7264  arse_word = word
+0000abe0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000abf0: 2069 6620 706f 735f 7461 6720 3d3d 2022   if pos_tag == "
+0000ac00: 2822 3a0a 2020 2020 2020 2020 2020 2020  (":.            
+0000ac10: 2020 2020 2020 2020 706f 735f 7461 6720          pos_tag 
+0000ac20: 3d20 222d 4c52 422d 220a 2020 2020 2020  = "-LRB-".      
+0000ac30: 2020 2020 2020 2020 2020 6966 2070 6f73            if pos
+0000ac40: 5f74 6167 203d 3d20 2229 223a 0a20 2020  _tag == ")":.   
+0000ac50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ac60: 2070 6f73 5f74 6167 203d 2022 2d52 5242   pos_tag = "-RRB
+0000ac70: 2d22 0a20 2020 2020 2020 2020 2020 2020  -".             
+0000ac80: 2020 2028 6c65 6674 5f62 7261 636b 6574     (left_bracket
+0000ac90: 732c 2072 6967 6874 5f68 616e 645f 7369  s, right_hand_si
+0000aca0: 6465 2920 3d20 636f 6e6c 6c5f 636f 6d70  de) = conll_comp
+0000acb0: 6f6e 656e 7473 5b35 5d2e 7370 6c69 7428  onents[5].split(
+0000acc0: 222a 2229 0a20 2020 2020 2020 2020 2020  "*").           
+0000acd0: 2020 2020 2023 206f 6e6c 7920 6b65 6570       # only keep
+0000ace0: 2027 2927 2069 6620 7468 6572 6520 6172   ')' if there ar
+0000acf0: 6520 6e65 7374 6564 2062 7261 636b 6574  e nested bracket
+0000ad00: 7320 7769 7468 206e 6f74 6869 6e67 2069  s with nothing i
+0000ad10: 6e20 7468 656d 2e0a 2020 2020 2020 2020  n them..        
+0000ad20: 2020 2020 2020 2020 7269 6768 745f 6272          right_br
+0000ad30: 6163 6b65 7473 203d 2072 6967 6874 5f68  ackets = right_h
+0000ad40: 616e 645f 7369 6465 2e63 6f75 6e74 2822  and_side.count("
+0000ad50: 2922 2920 2a20 2229 220a 2020 2020 2020  )") * ")".      
+0000ad60: 2020 2020 2020 2020 2020 7061 7273 655f            parse_
+0000ad70: 7069 6563 6520 3d20 6622 7b6c 6566 745f  piece = f"{left_
+0000ad80: 6272 6163 6b65 7473 7d20 287b 706f 735f  brackets} ({pos_
+0000ad90: 7461 677d 207b 7061 7273 655f 776f 7264  tag} {parse_word
+0000ada0: 7d29 207b 7269 6768 745f 6272 6163 6b65  }) {right_bracke
+0000adb0: 7473 7d22 0a20 2020 2020 2020 2020 2020  ts}".           
+0000adc0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0000add0: 2020 2020 2020 2023 2054 6865 7265 2061         # There a
+0000ade0: 7265 2073 6f6d 6520 6261 6420 616e 6e6f  re some bad anno
+0000adf0: 7461 7469 6f6e 7320 696e 2074 6865 2043  tations in the C
+0000ae00: 4f4e 4c4c 2064 6174 612e 0a20 2020 2020  ONLL data..     
+0000ae10: 2020 2020 2020 2020 2020 2023 2054 6865             # The
+0000ae20: 7920 636f 6e74 6169 6e20 6e6f 2069 6e66  y contain no inf
+0000ae30: 6f72 6d61 7469 6f6e 2c20 736f 2074 6f20  ormation, so to 
+0000ae40: 6d61 6b65 2074 6869 7320 6578 706c 6963  make this explic
+0000ae50: 6974 2c0a 2020 2020 2020 2020 2020 2020  it,.            
+0000ae60: 2020 2020 2320 7765 206a 7573 7420 7365      # we just se
+0000ae70: 7420 7468 6520 7061 7273 6520 7069 6563  t the parse piec
+0000ae80: 6520 746f 2062 6520 4e6f 6e65 2077 6869  e to be None whi
+0000ae90: 6368 2077 696c 6c20 7265 7375 6c74 0a20  ch will result. 
+0000aea0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000aeb0: 2069 6e20 7468 6520 6f76 6572 616c 6c20   in the overall 
+0000aec0: 7061 7273 6520 7472 6565 2062 6569 6e67  parse tree being
+0000aed0: 204e 6f6e 652e 0a20 2020 2020 2020 2020   None..         
+0000aee0: 2020 2020 2020 2070 6172 7365 5f70 6965         parse_pie
+0000aef0: 6365 203d 204e 6f6e 650a 0a20 2020 2020  ce = None..     
+0000af00: 2020 2020 2020 206c 656d 6d61 7469 7365         lemmatise
+0000af10: 645f 776f 7264 203d 2063 6f6e 6c6c 5f63  d_word = conll_c
+0000af20: 6f6d 706f 6e65 6e74 735b 365d 0a20 2020  omponents[6].   
+0000af30: 2020 2020 2020 2020 2066 7261 6d65 6e65           framene
+0000af40: 745f 6964 203d 2063 6f6e 6c6c 5f63 6f6d  t_id = conll_com
+0000af50: 706f 6e65 6e74 735b 375d 0a20 2020 2020  ponents[7].     
+0000af60: 2020 2020 2020 2077 6f72 645f 7365 6e73         word_sens
+0000af70: 6520 3d20 636f 6e6c 6c5f 636f 6d70 6f6e  e = conll_compon
+0000af80: 656e 7473 5b38 5d0a 2020 2020 2020 2020  ents[8].        
+0000af90: 2020 2020 7370 6561 6b65 7220 3d20 636f      speaker = co
+0000afa0: 6e6c 6c5f 636f 6d70 6f6e 656e 7473 5b39  nll_components[9
+0000afb0: 5d0a 0a20 2020 2020 2020 2020 2020 2069  ]..            i
+0000afc0: 6620 6e6f 7420 7370 616e 5f6c 6162 656c  f not span_label
+0000afd0: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
+0000afe0: 2020 2023 2049 6620 7468 6973 2069 7320     # If this is 
+0000aff0: 7468 6520 6669 7273 7420 776f 7264 2069  the first word i
+0000b000: 6e20 7468 6520 7365 6e74 656e 6365 2c20  n the sentence, 
+0000b010: 6372 6561 7465 0a20 2020 2020 2020 2020  create.         
+0000b020: 2020 2020 2020 2023 2065 6d70 7479 206c         # empty l
+0000b030: 6973 7473 2074 6f20 636f 6c6c 6563 7420  ists to collect 
+0000b040: 7468 6520 4e45 5220 616e 6420 5352 4c20  the NER and SRL 
+0000b050: 4249 4f20 6c61 6265 6c73 2e0a 2020 2020  BIO labels..    
+0000b060: 2020 2020 2020 2020 2020 2020 2320 5765              # We
+0000b070: 2063 616e 2774 2064 6f20 7468 6973 2075   can't do this u
+0000b080: 7066 726f 6e74 2c20 6265 6361 7573 6520  pfront, because 
+0000b090: 7765 2064 6f6e 2774 206b 6e6f 7720 686f  we don't know ho
+0000b0a0: 7720 6d61 6e79 0a20 2020 2020 2020 2020  w many.         
+0000b0b0: 2020 2020 2020 2023 2063 6f6d 706f 6e65         # compone
+0000b0c0: 6e74 7320 7765 2061 7265 2063 6f6c 6c65  nts we are colle
+0000b0d0: 6374 696e 672c 2061 7320 6120 7365 6e74  cting, as a sent
+0000b0e0: 656e 6365 2063 616e 2068 6176 650a 2020  ence can have.  
+0000b0f0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0000b100: 7661 7269 6162 6c65 206e 756d 6265 7273  variable numbers
+0000b110: 206f 6620 5352 4c20 6672 616d 6573 2e0a   of SRL frames..
+0000b120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b130: 7370 616e 5f6c 6162 656c 7320 3d20 5b5b  span_labels = [[
+0000b140: 5d20 666f 7220 5f20 696e 2063 6f6e 6c6c  ] for _ in conll
+0000b150: 5f63 6f6d 706f 6e65 6e74 735b 3130 3a2d  _components[10:-
+0000b160: 315d 5d0a 2020 2020 2020 2020 2020 2020  1]].            
+0000b170: 2020 2020 2320 4372 6561 7465 2076 6172      # Create var
+0000b180: 6961 626c 6573 2072 6570 7265 7365 6e74  iables represent
+0000b190: 696e 6720 7468 6520 6375 7272 656e 7420  ing the current 
+0000b1a0: 6c61 6265 6c20 666f 7220 6561 6368 206c  label for each l
+0000b1b0: 6162 656c 0a20 2020 2020 2020 2020 2020  abel.           
+0000b1c0: 2020 2020 2023 2073 6571 7565 6e63 6520       # sequence 
+0000b1d0: 7765 2061 7265 2063 6f6c 6c65 6374 696e  we are collectin
+0000b1e0: 672e 0a20 2020 2020 2020 2020 2020 2020  g..             
+0000b1f0: 2020 2063 7572 7265 6e74 5f73 7061 6e5f     current_span_
+0000b200: 6c61 6265 6c73 203d 205b 4e6f 6e65 2066  labels = [None f
+0000b210: 6f72 205f 2069 6e20 636f 6e6c 6c5f 636f  or _ in conll_co
+0000b220: 6d70 6f6e 656e 7473 5b31 303a 2d31 5d5d  mponents[10:-1]]
+0000b230: 0a0a 2020 2020 2020 2020 2020 2020 636c  ..            cl
+0000b240: 732e 5f70 726f 6365 7373 5f73 7061 6e5f  s._process_span_
+0000b250: 616e 6e6f 7461 7469 6f6e 735f 666f 725f  annotations_for_
+0000b260: 776f 7264 2863 6f6e 6c6c 5f63 6f6d 706f  word(conll_compo
+0000b270: 6e65 6e74 735b 3130 3a2d 315d 2c20 7370  nents[10:-1], sp
+0000b280: 616e 5f6c 6162 656c 732c 2063 7572 7265  an_labels, curre
+0000b290: 6e74 5f73 7061 6e5f 6c61 6265 6c73 290a  nt_span_labels).
+0000b2a0: 0a20 2020 2020 2020 2020 2020 2023 2049  .            # I
+0000b2b0: 6620 616e 7920 616e 6e6f 7461 7469 6f6e  f any annotation
+0000b2c0: 206d 6172 6b73 2074 6869 7320 776f 7264   marks this word
+0000b2d0: 2061 7320 6120 7665 7262 2070 7265 6469   as a verb predi
+0000b2e0: 6361 7465 2c0a 2020 2020 2020 2020 2020  cate,.          
+0000b2f0: 2020 2320 7765 206e 6565 6420 746f 2072    # we need to r
+0000b300: 6563 6f72 6420 6974 7320 696e 6465 782e  ecord its index.
+0000b310: 2054 6869 7320 616c 736f 2068 6173 2074   This also has t
+0000b320: 6865 2073 6964 6520 6566 6665 6374 0a20  he side effect. 
+0000b330: 2020 2020 2020 2020 2020 2023 206f 6620             # of 
+0000b340: 6f72 6465 7269 6e67 2074 6865 2076 6572  ordering the ver
+0000b350: 6261 6c20 7072 6564 6963 6174 6573 2062  bal predicates b
+0000b360: 7920 7468 6569 7220 6c6f 6361 7469 6f6e  y their location
+0000b370: 2069 6e20 7468 650a 2020 2020 2020 2020   in the.        
+0000b380: 2020 2020 2320 7365 6e74 656e 6365 2c20      # sentence, 
+0000b390: 6175 746f 6d61 7469 6361 6c6c 7920 616c  automatically al
+0000b3a0: 6967 6e69 6e67 2074 6865 6d20 7769 7468  igning them with
+0000b3b0: 2074 6865 2061 6e6e 6f74 6174 696f 6e73   the annotations
+0000b3c0: 2e0a 2020 2020 2020 2020 2020 2020 776f  ..            wo
+0000b3d0: 7264 5f69 735f 7665 7262 616c 5f70 7265  rd_is_verbal_pre
+0000b3e0: 6469 6361 7465 203d 2061 6e79 2822 2856  dicate = any("(V
+0000b3f0: 2220 696e 2078 2066 6f72 2078 2069 6e20  " in x for x in 
+0000b400: 636f 6e6c 6c5f 636f 6d70 6f6e 656e 7473  conll_components
+0000b410: 5b31 313a 2d31 5d29 0a20 2020 2020 2020  [11:-1]).       
+0000b420: 2020 2020 2069 6620 776f 7264 5f69 735f       if word_is_
+0000b430: 7665 7262 616c 5f70 7265 6469 6361 7465  verbal_predicate
+0000b440: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000b450: 2020 7665 7262 616c 5f70 7265 6469 6361    verbal_predica
+0000b460: 7465 732e 6170 7065 6e64 2877 6f72 6429  tes.append(word)
+0000b470: 0a0a 2020 2020 2020 2020 2020 2020 636c  ..            cl
+0000b480: 732e 5f70 726f 6365 7373 5f63 6f72 6566  s._process_coref
+0000b490: 5f73 7061 6e5f 616e 6e6f 7461 7469 6f6e  _span_annotation
+0000b4a0: 735f 666f 725f 776f 7264 2863 6f6e 6c6c  s_for_word(conll
+0000b4b0: 5f63 6f6d 706f 6e65 6e74 735b 2d31 5d2c  _components[-1],
+0000b4c0: 2069 6e64 6578 2c20 636c 7573 7465 7273   index, clusters
+0000b4d0: 2c20 636f 7265 665f 7374 6163 6b73 290a  , coref_stacks).
+0000b4e0: 0a20 2020 2020 2020 2020 2020 2073 656e  .            sen
+0000b4f0: 7465 6e63 652e 6170 7065 6e64 2877 6f72  tence.append(wor
+0000b500: 6429 0a20 2020 2020 2020 2020 2020 2070  d).            p
+0000b510: 6f73 5f74 6167 732e 6170 7065 6e64 2870  os_tags.append(p
+0000b520: 6f73 5f74 6167 290a 2020 2020 2020 2020  os_tag).        
+0000b530: 2020 2020 7061 7273 655f 7069 6563 6573      parse_pieces
+0000b540: 2e61 7070 656e 6428 7061 7273 655f 7069  .append(parse_pi
+0000b550: 6563 6529 0a20 2020 2020 2020 2020 2020  ece).           
+0000b560: 2070 7265 6469 6361 7465 5f6c 656d 6d61   predicate_lemma
+0000b570: 732e 6170 7065 6e64 286c 656d 6d61 7469  s.append(lemmati
+0000b580: 7365 645f 776f 7264 2069 6620 6c65 6d6d  sed_word if lemm
+0000b590: 6174 6973 6564 5f77 6f72 6420 213d 2022  atised_word != "
+0000b5a0: 2d22 2065 6c73 6520 4e6f 6e65 290a 2020  -" else None).  
+0000b5b0: 2020 2020 2020 2020 2020 7072 6564 6963            predic
+0000b5c0: 6174 655f 6672 616d 656e 6574 5f69 6473  ate_framenet_ids
+0000b5d0: 2e61 7070 656e 6428 6672 616d 656e 6574  .append(framenet
+0000b5e0: 5f69 6420 6966 2066 7261 6d65 6e65 745f  _id if framenet_
+0000b5f0: 6964 2021 3d20 222d 2220 656c 7365 204e  id != "-" else N
+0000b600: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
+0000b610: 2077 6f72 645f 7365 6e73 6573 2e61 7070   word_senses.app
+0000b620: 656e 6428 666c 6f61 7428 776f 7264 5f73  end(float(word_s
+0000b630: 656e 7365 2920 6966 2077 6f72 645f 7365  ense) if word_se
+0000b640: 6e73 6520 213d 2022 2d22 2065 6c73 6520  nse != "-" else 
+0000b650: 4e6f 6e65 290a 2020 2020 2020 2020 2020  None).          
+0000b660: 2020 7370 6561 6b65 7273 2e61 7070 656e    speakers.appen
+0000b670: 6428 7370 6561 6b65 7220 6966 2073 7065  d(speaker if spe
+0000b680: 616b 6572 2021 3d20 222d 2220 656c 7365  aker != "-" else
+0000b690: 204e 6f6e 6529 0a0a 2020 2020 2020 2020   None)..        
+0000b6a0: 6e61 6d65 645f 656e 7469 7469 6573 203d  named_entities =
+0000b6b0: 2073 7061 6e5f 6c61 6265 6c73 5b30 5d0a   span_labels[0].
+0000b6c0: 2020 2020 2020 2020 7372 6c5f 6672 616d          srl_fram
+0000b6d0: 6573 203d 206c 6973 7428 7a69 7028 7665  es = list(zip(ve
+0000b6e0: 7262 616c 5f70 7265 6469 6361 7465 732c  rbal_predicates,
+0000b6f0: 2073 7061 6e5f 6c61 6265 6c73 5b31 3a5d   span_labels[1:]
+0000b700: 2929 0a0a 2020 2020 2020 2020 2320 7468  ))..        # th
+0000b710: 6973 2077 6f75 6c64 206e 6f74 2062 6520  is would not be 
+0000b720: 7265 6163 6865 6420 6966 2070 6172 7365  reached if parse
+0000b730: 5f70 6965 6365 7320 636f 6e74 6169 6e65  _pieces containe
+0000b740: 6420 4e6f 6e65 2c20 6865 6e63 6520 7468  d None, hence th
+0000b750: 6520 6361 7374 0a20 2020 2020 2020 2070  e cast.        p
+0000b760: 6172 7365 5f74 7265 6520 3d20 2222 2e6a  arse_tree = "".j
+0000b770: 6f69 6e28 6361 7374 284c 6973 745b 7374  oin(cast(List[st
+0000b780: 725d 2c20 7061 7273 655f 7069 6563 6573  r], parse_pieces
+0000b790: 2929 2069 6620 616c 6c28 7061 7273 655f  )) if all(parse_
+0000b7a0: 7069 6563 6573 2920 656c 7365 204e 6f6e  pieces) else Non
+0000b7b0: 650a 0a20 2020 2020 2020 2063 6f72 6566  e..        coref
+0000b7c0: 5f73 7061 6e5f 7475 706c 6573 203d 207b  _span_tuples = {
+0000b7d0: 2863 6c75 7374 6572 5f69 642c 2073 7061  (cluster_id, spa
+0000b7e0: 6e29 2066 6f72 2063 6c75 7374 6572 5f69  n) for cluster_i
+0000b7f0: 642c 2073 7061 6e5f 6c69 7374 2069 6e20  d, span_list in 
+0000b800: 636c 7573 7465 7273 2e69 7465 6d73 2829  clusters.items()
+0000b810: 2066 6f72 2073 7061 6e20 696e 2073 7061   for span in spa
+0000b820: 6e5f 6c69 7374 7d0a 2020 2020 2020 2020  n_list}.        
+0000b830: 7265 7475 726e 207b 0a20 2020 2020 2020  return {.       
+0000b840: 2020 2020 2022 646f 6375 6d65 6e74 5f69       "document_i
+0000b850: 6422 3a20 646f 6375 6d65 6e74 5f69 642c  d": document_id,
+0000b860: 0a20 2020 2020 2020 2020 2020 2022 7365  .            "se
+0000b870: 6e74 656e 6365 5f69 6422 3a20 7365 6e74  ntence_id": sent
+0000b880: 656e 6365 5f69 642c 0a20 2020 2020 2020  ence_id,.       
+0000b890: 2020 2020 2022 7365 6e74 656e 6365 223a       "sentence":
+0000b8a0: 2073 656e 7465 6e63 652c 0a20 2020 2020   sentence,.     
+0000b8b0: 2020 2020 2020 2022 706f 735f 7461 6773         "pos_tags
+0000b8c0: 223a 2070 6f73 5f74 6167 732c 0a20 2020  ": pos_tags,.   
+0000b8d0: 2020 2020 2020 2020 2022 7061 7273 655f           "parse_
+0000b8e0: 7472 6565 223a 2070 6172 7365 5f74 7265  tree": parse_tre
+0000b8f0: 652c 0a20 2020 2020 2020 2020 2020 2022  e,.            "
+0000b900: 7072 6564 6963 6174 655f 6c65 6d6d 6173  predicate_lemmas
+0000b910: 223a 2070 7265 6469 6361 7465 5f6c 656d  ": predicate_lem
+0000b920: 6d61 732c 0a20 2020 2020 2020 2020 2020  mas,.           
+0000b930: 2022 7072 6564 6963 6174 655f 6672 616d   "predicate_fram
+0000b940: 656e 6574 5f69 6473 223a 2070 7265 6469  enet_ids": predi
+0000b950: 6361 7465 5f66 7261 6d65 6e65 745f 6964  cate_framenet_id
+0000b960: 732c 0a20 2020 2020 2020 2020 2020 2022  s,.            "
+0000b970: 776f 7264 5f73 656e 7365 7322 3a20 776f  word_senses": wo
+0000b980: 7264 5f73 656e 7365 732c 0a20 2020 2020  rd_senses,.     
+0000b990: 2020 2020 2020 2022 7370 6561 6b65 7273         "speakers
+0000b9a0: 223a 2073 7065 616b 6572 732c 0a20 2020  ": speakers,.   
+0000b9b0: 2020 2020 2020 2020 2022 6e61 6d65 645f           "named_
+0000b9c0: 656e 7469 7469 6573 223a 206e 616d 6564  entities": named
+0000b9d0: 5f65 6e74 6974 6965 732c 0a20 2020 2020  _entities,.     
+0000b9e0: 2020 2020 2020 2022 7372 6c5f 6672 616d         "srl_fram
+0000b9f0: 6573 223a 2073 726c 5f66 7261 6d65 732c  es": srl_frames,
+0000ba00: 0a20 2020 2020 2020 2020 2020 2022 636f  .            "co
+0000ba10: 7265 665f 7370 616e 5f74 7570 6c65 7322  ref_span_tuples"
+0000ba20: 3a20 636f 7265 665f 7370 616e 5f74 7570  : coref_span_tup
+0000ba30: 6c65 732c 0a20 2020 2020 2020 207d 0a0a  les,.        }..
+0000ba40: 2020 2020 4063 6c61 7373 6d65 7468 6f64      @classmethod
+0000ba50: 0a20 2020 2064 6566 2064 6174 6173 6574  .    def dataset
+0000ba60: 5f64 6f63 756d 656e 745f 6974 6572 6174  _document_iterat
+0000ba70: 6f72 2863 6c73 2c20 6669 6c65 5f70 6174  or(cls, file_pat
+0000ba80: 683a 2055 6e69 6f6e 5b50 6174 682c 2073  h: Union[Path, s
+0000ba90: 7472 5d29 202d 3e20 4974 6572 6174 6f72  tr]) -> Iterator
+0000baa0: 5b4c 6973 745d 3a0a 2020 2020 2020 2020  [List]:.        
+0000bab0: 2222 2241 6e20 6974 6572 6174 6f72 206f  """An iterator o
+0000bac0: 7665 7220 434f 4e4c 4c20 666f 726d 6174  ver CONLL format
+0000bad0: 7465 6420 6669 6c65 7320 7768 6963 6820  ted files which 
+0000bae0: 7969 656c 6473 2064 6f63 756d 656e 7473  yields documents
+0000baf0: 2c20 7265 6761 7264 6c65 7373 206f 6620  , regardless of 
+0000bb00: 7468 6520 6e75 6d62 6572 206f 6620 646f  the number of do
+0000bb10: 6375 6d65 6e74 2061 6e6e 6f74 6174 696f  cument annotatio
+0000bb20: 6e73 2069 6e20 6120 7061 7274 6963 756c  ns in a particul
+0000bb30: 6172 2066 696c 652e 0a0a 2020 2020 2020  ar file...      
+0000bb40: 2020 5468 6973 2069 7320 7573 6566 756c    This is useful
+0000bb50: 2066 6f72 2063 6f6e 6c6c 2064 6174 6120   for conll data 
+0000bb60: 7768 6963 6820 6861 7320 6265 656e 2070  which has been p
+0000bb70: 7265 7072 6f63 6573 7365 642c 2073 7563  reprocessed, suc
+0000bb80: 680a 2020 2020 2020 2020 6173 2074 6865  h.        as the
+0000bb90: 2070 7265 7072 6f63 6573 7369 6e67 2077   preprocessing w
+0000bba0: 6869 6368 2074 616b 6573 2070 6c61 6365  hich takes place
+0000bbb0: 2066 6f72 2074 6865 2032 3031 3220 434f   for the 2012 CO
+0000bbc0: 4e4c 4c0a 2020 2020 2020 2020 436f 7265  NLL.        Core
+0000bbd0: 6665 7265 6e63 6520 5265 736f 6c75 7469  ference Resoluti
+0000bbe0: 6f6e 2074 6173 6b2e 0a20 2020 2020 2020  on task..       
+0000bbf0: 2022 2222 0a20 2020 2020 2020 2077 6974   """.        wit
+0000bc00: 6820 6f70 656e 2866 696c 655f 7061 7468  h open(file_path
+0000bc10: 2c20 656e 636f 6469 6e67 3d22 7574 6638  , encoding="utf8
+0000bc20: 2229 2061 7320 6f70 656e 5f66 696c 653a  ") as open_file:
+0000bc30: 0a20 2020 2020 2020 2020 2020 2063 6f6e  .            con
+0000bc40: 6c6c 5f72 6f77 7320 3d20 5b5d 0a20 2020  ll_rows = [].   
+0000bc50: 2020 2020 2020 2020 2064 6f63 756d 656e           documen
+0000bc60: 743a 204c 6973 7420 3d20 5b5d 0a20 2020  t: List = [].   
+0000bc70: 2020 2020 2020 2020 2066 6f72 206c 696e           for lin
+0000bc80: 6520 696e 206f 7065 6e5f 6669 6c65 3a0a  e in open_file:.
+0000bc90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bca0: 6c69 6e65 203d 206c 696e 652e 7374 7269  line = line.stri
+0000bcb0: 7028 290a 2020 2020 2020 2020 2020 2020  p().            
+0000bcc0: 2020 2020 6966 206c 696e 6520 213d 2022      if line != "
+0000bcd0: 2220 616e 6420 6e6f 7420 6c69 6e65 2e73  " and not line.s
+0000bce0: 7461 7274 7377 6974 6828 2223 2229 3a0a  tartswith("#"):.
+0000bcf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bd00: 2020 2020 2320 4e6f 6e2d 656d 7074 7920      # Non-empty 
+0000bd10: 6c69 6e65 2e20 436f 6c6c 6563 7420 7468  line. Collect th
+0000bd20: 6520 616e 6e6f 7461 7469 6f6e 2e0a 2020  e annotation..  
+0000bd30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bd40: 2020 636f 6e6c 6c5f 726f 7773 2e61 7070    conll_rows.app
+0000bd50: 656e 6428 6c69 6e65 290a 2020 2020 2020  end(line).      
+0000bd60: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+0000bd70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bd80: 2020 2020 6966 2063 6f6e 6c6c 5f72 6f77      if conll_row
+0000bd90: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
+0000bda0: 2020 2020 2020 2020 2020 2064 6f63 756d             docum
+0000bdb0: 656e 742e 6170 7065 6e64 2863 6c73 2e5f  ent.append(cls._
+0000bdc0: 636f 6e6c 6c5f 726f 7773 5f74 6f5f 7365  conll_rows_to_se
+0000bdd0: 6e74 656e 6365 2863 6f6e 6c6c 5f72 6f77  ntence(conll_row
+0000bde0: 7329 290a 2020 2020 2020 2020 2020 2020  s)).            
+0000bdf0: 2020 2020 2020 2020 2020 2020 636f 6e6c              conl
+0000be00: 6c5f 726f 7773 203d 205b 5d0a 2020 2020  l_rows = [].    
+0000be10: 2020 2020 2020 2020 2020 2020 6966 206c              if l
+0000be20: 696e 652e 7374 6172 7473 7769 7468 2822  ine.startswith("
+0000be30: 2365 6e64 2064 6f63 756d 656e 7422 293a  #end document"):
+0000be40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000be50: 2020 2020 2079 6965 6c64 2064 6f63 756d       yield docum
+0000be60: 656e 740a 2020 2020 2020 2020 2020 2020  ent.            
+0000be70: 2020 2020 2020 2020 646f 6375 6d65 6e74          document
+0000be80: 203d 205b 5d0a 2020 2020 2020 2020 2020   = [].          
+0000be90: 2020 6966 2064 6f63 756d 656e 743a 0a20    if document:. 
+0000bea0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000beb0: 2043 6f6c 6c65 6374 2061 6e79 2073 7472   Collect any str
+0000bec0: 6167 676c 6572 7320 6f72 2066 696c 6573  agglers or files
+0000bed0: 2077 6869 6368 206d 6967 6874 206e 6f74   which might not
+0000bee0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000bef0: 2023 2068 6176 6520 7468 6520 2723 656e   # have the '#en
+0000bf00: 6420 646f 6375 6d65 6e74 2720 666f 726d  d document' form
+0000bf10: 6174 2066 6f72 2074 6865 2065 6e64 206f  at for the end o
+0000bf20: 6620 7468 6520 6669 6c65 2e0a 2020 2020  f the file..    
+0000bf30: 2020 2020 2020 2020 2020 2020 7969 656c              yiel
+0000bf40: 6420 646f 6375 6d65 6e74 0a0a 2020 2020  d document..    
+0000bf50: 4063 6c61 7373 6d65 7468 6f64 0a20 2020  @classmethod.   
+0000bf60: 2064 6566 2073 656e 7465 6e63 655f 6974   def sentence_it
+0000bf70: 6572 6174 6f72 2863 6c73 2c20 6669 6c65  erator(cls, file
+0000bf80: 5f70 6174 683a 2055 6e69 6f6e 5b50 6174  _path: Union[Pat
+0000bf90: 682c 2073 7472 5d29 202d 3e20 4974 6572  h, str]) -> Iter
+0000bfa0: 6174 6f72 3a0a 2020 2020 2020 2020 2222  ator:.        ""
+0000bfb0: 2241 6e20 6974 6572 6174 6f72 206f 7665  "An iterator ove
+0000bfc0: 7220 7468 6520 7365 6e74 656e 6365 7320  r the sentences 
+0000bfd0: 696e 2061 6e20 696e 6469 7669 6475 616c  in an individual
+0000bfe0: 2043 4f4e 4c4c 2066 6f72 6d61 7474 6564   CONLL formatted
+0000bff0: 2066 696c 652e 2222 220a 2020 2020 2020   file.""".      
+0000c000: 2020 666f 7220 646f 6375 6d65 6e74 2069    for document i
+0000c010: 6e20 636c 732e 6461 7461 7365 745f 646f  n cls.dataset_do
+0000c020: 6375 6d65 6e74 5f69 7465 7261 746f 7228  cument_iterator(
+0000c030: 6669 6c65 5f70 6174 6829 3a0a 2020 2020  file_path):.    
+0000c040: 2020 2020 2020 2020 7969 656c 6420 6672          yield fr
+0000c050: 6f6d 2064 6f63 756d 656e 740a 0a0a 636c  om document...cl
+0000c060: 6173 7320 434f 4e4c 4c5f 3033 2843 6f6c  ass CONLL_03(Col
+0000c070: 756d 6e43 6f72 7075 7329 3a0a 2020 2020  umnCorpus):.    
+0000c080: 6465 6620 5f5f 696e 6974 5f5f 280a 2020  def __init__(.  
+0000c090: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
+0000c0a0: 2020 2020 6261 7365 5f70 6174 683a 204f      base_path: O
+0000c0b0: 7074 696f 6e61 6c5b 556e 696f 6e5b 7374  ptional[Union[st
+0000c0c0: 722c 2050 6174 685d 5d20 3d20 4e6f 6e65  r, Path]] = None
+0000c0d0: 2c0a 2020 2020 2020 2020 636f 6c75 6d6e  ,.        column
+0000c0e0: 5f66 6f72 6d61 743d 7b30 3a20 2274 6578  _format={0: "tex
+0000c0f0: 7422 2c20 313a 2022 706f 7322 2c20 333a  t", 1: "pos", 3:
+0000c100: 2022 6e65 7222 7d2c 0a20 2020 2020 2020   "ner"},.       
+0000c110: 2069 6e5f 6d65 6d6f 7279 3a20 626f 6f6c   in_memory: bool
+0000c120: 203d 2054 7275 652c 0a20 2020 2020 2020   = True,.       
+0000c130: 202a 2a63 6f72 7075 7361 7267 732c 0a20   **corpusargs,. 
+0000c140: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
+0000c150: 2020 2020 2020 2222 2249 6e69 7469 616c        """Initial
+0000c160: 697a 6520 7468 6520 436f 4e4c 4c2d 3033  ize the CoNLL-03
+0000c170: 2063 6f72 7075 732e 0a0a 2020 2020 2020   corpus...      
+0000c180: 2020 5468 6973 2069 7320 6f6e 6c79 2070    This is only p
+0000c190: 6f73 7369 626c 6520 6966 2079 6f75 2776  ossible if you'v
+0000c1a0: 6520 6d61 6e75 616c 6c79 2064 6f77 6e6c  e manually downl
+0000c1b0: 6f61 6465 6420 6974 2074 6f20 796f 7572  oaded it to your
+0000c1c0: 206d 6163 6869 6e65 2e0a 2020 2020 2020   machine..      
+0000c1d0: 2020 4f62 7461 696e 2074 6865 2063 6f72    Obtain the cor
+0000c1e0: 7075 7320 6672 6f6d 2068 7474 7073 3a2f  pus from https:/
+0000c1f0: 2f77 7777 2e63 6c69 7073 2e75 616e 7477  /www.clips.uantw
+0000c200: 6572 7065 6e2e 6265 2f63 6f6e 6c6c 3230  erpen.be/conll20
+0000c210: 3033 2f6e 6572 2f20 616e 6420 7075 7420  03/ner/ and put 
+0000c220: 7468 6520 656e 672e 7465 7374 612c 202e  the eng.testa, .
+0000c230: 7465 7374 622c 202e 7472 6169 6e0a 2020  testb, .train.  
+0000c240: 2020 2020 2020 6669 6c65 7320 696e 2061        files in a
+0000c250: 2066 6f6c 6465 7220 6361 6c6c 6564 2027   folder called '
+0000c260: 636f 6e6c 6c5f 3033 272e 2054 6865 6e20  conll_03'. Then 
+0000c270: 7365 7420 7468 6520 6261 7365 5f70 6174  set the base_pat
+0000c280: 6820 7061 7261 6d65 7465 7220 696e 2074  h parameter in t
+0000c290: 6865 2063 6f6e 7374 7275 6374 6f72 2074  he constructor t
+0000c2a0: 6f20 7468 6520 7061 7468 2074 6f20 7468  o the path to th
+0000c2b0: 650a 2020 2020 2020 2020 7061 7265 6e74  e.        parent
+0000c2c0: 2064 6972 6563 746f 7279 2077 6865 7265   directory where
+0000c2d0: 2074 6865 2063 6f6e 6c6c 5f30 3320 666f   the conll_03 fo
+0000c2e0: 6c64 6572 2072 6573 6964 6573 2e0a 2020  lder resides..  
+0000c2f0: 2020 2020 2020 4966 2075 7369 6e67 2065        If using e
+0000c300: 6e74 6974 7920 6c69 6e6b 696e 672c 2074  ntity linking, t
+0000c310: 6865 2063 6f6e 6c6c 3033 2064 6174 6573  he conll03 dates
+0000c320: 6574 2069 7320 7265 6475 6365 6420 6279  et is reduced by
+0000c330: 2061 626f 7574 2032 3020 446f 6375 6d65   about 20 Docume
+0000c340: 6e74 732c 2077 6869 6368 2061 7265 206e  nts, which are n
+0000c350: 6f74 2070 6172 7420 6f66 2074 6865 2079  ot part of the y
+0000c360: 6167 6f20 6461 7461 7365 742e 0a20 2020  ago dataset..   
+0000c370: 2020 2020 203a 7061 7261 6d20 6261 7365       :param base
+0000c380: 5f70 6174 683a 2050 6174 6820 746f 2074  _path: Path to t
+0000c390: 6865 2043 6f4e 4c4c 2d30 3320 636f 7270  he CoNLL-03 corp
+0000c3a0: 7573 2028 692e 652e 2027 636f 6e6c 6c5f  us (i.e. 'conll_
+0000c3b0: 3033 2720 666f 6c64 6572 2920 6f6e 2079  03' folder) on y
+0000c3c0: 6f75 7220 6d61 6368 696e 650a 2020 2020  our machine.    
+0000c3d0: 2020 2020 504f 5320 7461 6773 206f 7220      POS tags or 
+0000c3e0: 6368 756e 6b73 2072 6573 7065 6374 6976  chunks respectiv
+0000c3f0: 656c 790a 2020 2020 2020 2020 3a70 6172  ely.        :par
+0000c400: 616d 2069 6e5f 6d65 6d6f 7279 3a20 4966  am in_memory: If
+0000c410: 2054 7275 652c 206b 6565 7073 2064 6174   True, keeps dat
+0000c420: 6173 6574 2069 6e20 6d65 6d6f 7279 2067  aset in memory g
+0000c430: 6976 696e 6720 7370 6565 6475 7073 2069  iving speedups i
+0000c440: 6e20 7472 6169 6e69 6e67 2e0a 2020 2020  n training..    
+0000c450: 2020 2020 3a70 6172 616d 2064 6f63 756d      :param docum
+0000c460: 656e 745f 6173 5f73 6571 7565 6e63 653a  ent_as_sequence:
+0000c470: 2049 6620 5472 7565 2c20 616c 6c20 7365   If True, all se
+0000c480: 6e74 656e 6365 7320 6f66 2061 2064 6f63  ntences of a doc
+0000c490: 756d 656e 7420 6172 6520 7265 6164 2069  ument are read i
+0000c4a0: 6e74 6f20 6120 7369 6e67 6c65 2053 656e  nto a single Sen
+0000c4b0: 7465 6e63 6520 6f62 6a65 6374 0a20 2020  tence object.   
+0000c4c0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0000c4d0: 2062 6173 655f 7061 7468 203d 206b 6f6c   base_path = kol
+0000c4e0: 6962 7269 2e63 6163 6865 5f72 6f6f 7420  ibri.cache_root 
+0000c4f0: 2f20 2264 6174 6173 6574 7322 2069 6620  / "datasets" if 
+0000c500: 6e6f 7420 6261 7365 5f70 6174 6820 656c  not base_path el
+0000c510: 7365 2050 6174 6828 6261 7365 5f70 6174  se Path(base_pat
+0000c520: 6829 0a0a 2020 2020 2020 2020 2320 7468  h)..        # th
+0000c530: 6973 2064 6174 6173 6574 206e 616d 650a  is dataset name.
+0000c540: 2020 2020 2020 2020 6461 7461 7365 745f          dataset_
+0000c550: 6e61 6d65 203d 2022 636f 6e6c 6c5f 3230  name = "conll_20
+0000c560: 3033 220a 0a20 2020 2020 2020 2064 6174  03"..        dat
+0000c570: 615f 666f 6c64 6572 203d 2062 6173 655f  a_folder = base_
+0000c580: 7061 7468 202f 2064 6174 6173 6574 5f6e  path / dataset_n
+0000c590: 616d 650a 0a20 2020 2020 2020 2023 2063  ame..        # c
+0000c5a0: 6865 636b 2069 6620 6461 7461 2074 6865  heck if data the
+0000c5b0: 7265 0a20 2020 2020 2020 2069 6620 6e6f  re.        if no
+0000c5c0: 7420 6461 7461 5f66 6f6c 6465 722e 6578  t data_folder.ex
+0000c5d0: 6973 7473 2829 3a0a 2020 2020 2020 2020  ists():.        
+0000c5e0: 2020 2020 6c6f 672e 7761 726e 696e 6728      log.warning(
+0000c5f0: 222d 2220 2a20 3130 3029 0a20 2020 2020  "-" * 100).     
+0000c600: 2020 2020 2020 206c 6f67 2e77 6172 6e69         log.warni
+0000c610: 6e67 2866 2757 4152 4e49 4e47 3a20 436f  ng(f'WARNING: Co
+0000c620: 4e4c 4c2d 3033 2064 6174 6173 6574 206e  NLL-03 dataset n
+0000c630: 6f74 2066 6f75 6e64 2061 7420 227b 6461  ot found at "{da
+0000c640: 7461 5f66 6f6c 6465 727d 222e 2729 0a20  ta_folder}".'). 
+0000c650: 2020 2020 2020 2020 2020 206c 6f67 2e77             log.w
+0000c660: 6172 6e69 6e67 280a 2020 2020 2020 2020  arning(.        
+0000c670: 2020 2020 2020 2020 2749 6e73 7472 7563          'Instruc
+0000c680: 7469 6f6e 7320 666f 7220 6f62 7461 696e  tions for obtain
+0000c690: 696e 6720 7468 6520 6461 7461 2063 616e  ing the data can
+0000c6a0: 2062 6520 666f 756e 6420 6865 7265 3a20   be found here: 
+0000c6b0: 6874 7470 733a 2f2f 7777 772e 636c 6970  https://www.clip
+0000c6c0: 732e 7561 6e74 7765 7270 656e 2e62 652f  s.uantwerpen.be/
+0000c6d0: 636f 6e6c 6c32 3030 332f 6e65 722f 2227  conll2003/ner/"'
+0000c6e0: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
+0000c6f0: 2020 2020 2020 2020 2020 206c 6f67 2e77             log.w
+0000c700: 6172 6e69 6e67 2822 2d22 202a 2031 3030  arning("-" * 100
+0000c710: 290a 0a20 2020 2020 2020 2073 7570 6572  )..        super
+0000c720: 2829 2e5f 5f69 6e69 745f 5f28 0a20 2020  ().__init__(.   
+0000c730: 2020 2020 2020 2020 2064 6174 615f 666f           data_fo
+0000c740: 6c64 6572 2c0a 2020 2020 2020 2020 2020  lder,.          
+0000c750: 2020 636f 6c75 6d6e 5f66 6f72 6d61 743d    column_format=
+0000c760: 636f 6c75 6d6e 5f66 6f72 6d61 742c 0a20  column_format,. 
+0000c770: 2020 2020 2020 2020 2020 2069 6e5f 6d65             in_me
+0000c780: 6d6f 7279 3d69 6e5f 6d65 6d6f 7279 2c0a  mory=in_memory,.
+0000c790: 2020 2020 2020 2020 2020 2020 646f 6375              docu
+0000c7a0: 6d65 6e74 5f73 6570 6172 6174 6f72 5f74  ment_separator_t
+0000c7b0: 6f6b 656e 3d22 2d44 4f43 5354 4152 542d  oken="-DOCSTART-
+0000c7c0: 222c 0a20 2020 2020 2020 2020 2020 202a  ",.            *
+0000c7d0: 2a63 6f72 7075 7361 7267 732c 0a20 2020  *corpusargs,.   
+0000c7e0: 2020 2020 2029 0a0a 0a63 6c61 7373 2043       )...class C
+0000c7f0: 4f4e 4c4c 5f30 335f 4745 524d 414e 2843  ONLL_03_GERMAN(C
+0000c800: 6f6c 756d 6e43 6f72 7075 7329 3a0a 2020  olumnCorpus):.  
+0000c810: 2020 6465 6620 5f5f 696e 6974 5f5f 280a    def __init__(.
+0000c820: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
+0000c830: 2020 2020 2020 6261 7365 5f70 6174 683a        base_path:
+0000c840: 204f 7074 696f 6e61 6c5b 556e 696f 6e5b   Optional[Union[
+0000c850: 7374 722c 2050 6174 685d 5d20 3d20 4e6f  str, Path]] = No
+0000c860: 6e65 2c0a 2020 2020 2020 2020 696e 5f6d  ne,.        in_m
+0000c870: 656d 6f72 793a 2062 6f6f 6c20 3d20 5472  emory: bool = Tr
+0000c880: 7565 2c0a 2020 2020 2020 2020 2a2a 636f  ue,.        **co
+0000c890: 7270 7573 6172 6773 2c0a 2020 2020 2920  rpusargs,.    ) 
+0000c8a0: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+0000c8b0: 2022 2222 496e 6974 6961 6c69 7a65 2074   """Initialize t
+0000c8c0: 6865 2043 6f4e 4c4c 2d30 3320 636f 7270  he CoNLL-03 corp
+0000c8d0: 7573 2066 6f72 2047 6572 6d61 6e2e 0a0a  us for German...
+0000c8e0: 2020 2020 2020 2020 5468 6973 2069 7320          This is 
+0000c8f0: 6f6e 6c79 2070 6f73 7369 626c 6520 6966  only possible if
+0000c900: 2079 6f75 2776 6520 6d61 6e75 616c 6c79   you've manually
+0000c910: 2064 6f77 6e6c 6f61 6465 6420 6974 2074   downloaded it t
+0000c920: 6f20 796f 7572 206d 6163 6869 6e65 2e0a  o your machine..
+0000c930: 2020 2020 2020 2020 4f62 7461 696e 2074          Obtain t
+0000c940: 6865 2063 6f72 7075 7320 6672 6f6d 2068  he corpus from h
+0000c950: 7474 7073 3a2f 2f77 7777 2e63 6c69 7073  ttps://www.clips
+0000c960: 2e75 616e 7477 6572 7065 6e2e 6265 2f63  .uantwerpen.be/c
+0000c970: 6f6e 6c6c 3230 3033 2f6e 6572 2f20 616e  onll2003/ner/ an
+0000c980: 6420 7075 7420 7468 6520 7265 7370 6563  d put the respec
+0000c990: 7469 7665 2066 696c 6573 2069 6e20 6120  tive files in a 
+0000c9a0: 666f 6c64 6572 2063 616c 6c65 640a 2020  folder called.  
+0000c9b0: 2020 2020 2020 2763 6f6e 6c6c 5f30 335f        'conll_03_
+0000c9c0: 6765 726d 616e 272e 2054 6865 6e20 7365  german'. Then se
+0000c9d0: 7420 7468 6520 6261 7365 5f70 6174 6820  t the base_path 
+0000c9e0: 7061 7261 6d65 7465 7220 696e 2074 6865  parameter in the
+0000c9f0: 2063 6f6e 7374 7275 6374 6f72 2074 6f20   constructor to 
+0000ca00: 7468 6520 7061 7468 2074 6f20 7468 6520  the path to the 
+0000ca10: 7061 7265 6e74 2064 6972 6563 746f 7279  parent directory
+0000ca20: 2077 6865 7265 0a20 2020 2020 2020 2074   where.        t
+0000ca30: 6865 2063 6f6e 6c6c 5f30 335f 6765 726d  he conll_03_germ
+0000ca40: 616e 2066 6f6c 6465 7220 7265 7369 6465  an folder reside
+0000ca50: 732e 0a20 2020 2020 2020 203a 7061 7261  s..        :para
+0000ca60: 6d20 6261 7365 5f70 6174 683a 2050 6174  m base_path: Pat
+0000ca70: 6820 746f 2074 6865 2043 6f4e 4c4c 2d30  h to the CoNLL-0
+0000ca80: 3320 636f 7270 7573 2028 692e 652e 2027  3 corpus (i.e. '
+0000ca90: 636f 6e6c 6c5f 3033 5f67 6572 6d61 6e27  conll_03_german'
+0000caa0: 2066 6f6c 6465 7229 206f 6e20 796f 7572   folder) on your
+0000cab0: 206d 6163 6869 6e65 0a20 2020 2020 2020   machine.       
+0000cac0: 2077 6f72 6420 6c65 6d6d 6173 2c20 504f   word lemmas, PO
+0000cad0: 5320 7461 6773 206f 7220 6368 756e 6b73  S tags or chunks
+0000cae0: 2072 6573 7065 6374 6976 656c 790a 2020   respectively.  
+0000caf0: 2020 2020 2020 3a70 6172 616d 2069 6e5f        :param in_
+0000cb00: 6d65 6d6f 7279 3a20 4966 2054 7275 652c  memory: If True,
+0000cb10: 206b 6565 7073 2064 6174 6173 6574 2069   keeps dataset i
+0000cb20: 6e20 6d65 6d6f 7279 2067 6976 696e 6720  n memory giving 
+0000cb30: 7370 6565 6475 7073 2069 6e20 7472 6169  speedups in trai
+0000cb40: 6e69 6e67 2e0a 2020 2020 2020 2020 3a70  ning..        :p
+0000cb50: 6172 616d 2064 6f63 756d 656e 745f 6173  aram document_as
+0000cb60: 5f73 6571 7565 6e63 653a 2049 6620 5472  _sequence: If Tr
+0000cb70: 7565 2c20 616c 6c20 7365 6e74 656e 6365  ue, all sentence
+0000cb80: 7320 6f66 2061 2064 6f63 756d 656e 7420  s of a document 
+0000cb90: 6172 6520 7265 6164 2069 6e74 6f20 6120  are read into a 
+0000cba0: 7369 6e67 6c65 2053 656e 7465 6e63 6520  single Sentence 
+0000cbb0: 6f62 6a65 6374 0a20 2020 2020 2020 2022  object.        "
+0000cbc0: 2222 0a20 2020 2020 2020 2062 6173 655f  "".        base_
+0000cbd0: 7061 7468 203d 206b 6f6c 6962 7269 2e63  path = kolibri.c
+0000cbe0: 6163 6865 5f72 6f6f 7420 2f20 2264 6174  ache_root / "dat
+0000cbf0: 6173 6574 7322 2069 6620 6e6f 7420 6261  asets" if not ba
+0000cc00: 7365 5f70 6174 6820 656c 7365 2050 6174  se_path else Pat
+0000cc10: 6828 6261 7365 5f70 6174 6829 0a0a 2020  h(base_path)..  
+0000cc20: 2020 2020 2020 2320 636f 6c75 6d6e 2066        # column f
+0000cc30: 6f72 6d61 740a 2020 2020 2020 2020 636f  ormat.        co
+0000cc40: 6c75 6d6e 7320 3d20 7b30 3a20 2274 6578  lumns = {0: "tex
+0000cc50: 7422 2c20 313a 2022 6c65 6d6d 6122 2c20  t", 1: "lemma", 
+0000cc60: 323a 2022 706f 7322 2c20 333a 2022 6e70  2: "pos", 3: "np
+0000cc70: 222c 2034 3a20 226e 6572 227d 0a0a 2020  ", 4: "ner"}..  
+0000cc80: 2020 2020 2020 2320 7468 6973 2064 6174        # this dat
+0000cc90: 6173 6574 206e 616d 650a 2020 2020 2020  aset name.      
+0000cca0: 2020 6461 7461 7365 745f 6e61 6d65 203d    dataset_name =
+0000ccb0: 2073 656c 662e 5f5f 636c 6173 735f 5f2e   self.__class__.
+0000ccc0: 5f5f 6e61 6d65 5f5f 2e6c 6f77 6572 2829  __name__.lower()
+0000ccd0: 0a0a 2020 2020 2020 2020 6461 7461 5f66  ..        data_f
+0000cce0: 6f6c 6465 7220 3d20 6261 7365 5f70 6174  older = base_pat
+0000ccf0: 6820 2f20 6461 7461 7365 745f 6e61 6d65  h / dataset_name
+0000cd00: 0a0a 2020 2020 2020 2020 2320 6368 6563  ..        # chec
+0000cd10: 6b20 6966 2064 6174 6120 7468 6572 650a  k if data there.
+0000cd20: 2020 2020 2020 2020 6966 206e 6f74 2064          if not d
+0000cd30: 6174 615f 666f 6c64 6572 2e65 7869 7374  ata_folder.exist
+0000cd40: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
+0000cd50: 206c 6f67 2e77 6172 6e69 6e67 2822 2d22   log.warning("-"
+0000cd60: 202a 2031 3030 290a 2020 2020 2020 2020   * 100).        
+0000cd70: 2020 2020 6c6f 672e 7761 726e 696e 6728      log.warning(
+0000cd80: 6627 5741 524e 494e 473a 2043 6f4e 4c4c  f'WARNING: CoNLL
+0000cd90: 2d30 3320 6461 7461 7365 7420 6e6f 7420  -03 dataset not 
+0000cda0: 666f 756e 6420 6174 2022 7b64 6174 615f  found at "{data_
+0000cdb0: 666f 6c64 6572 7d22 2e27 290a 2020 2020  folder}".').    
+0000cdc0: 2020 2020 2020 2020 6c6f 672e 7761 726e          log.warn
+0000cdd0: 696e 6728 0a20 2020 2020 2020 2020 2020  ing(.           
+0000cde0: 2020 2020 2027 496e 7374 7275 6374 696f       'Instructio
+0000cdf0: 6e73 2066 6f72 206f 6274 6169 6e69 6e67  ns for obtaining
+0000ce00: 2074 6865 2064 6174 6120 6361 6e20 6265   the data can be
+0000ce10: 2066 6f75 6e64 2068 6572 653a 2068 7474   found here: htt
+0000ce20: 7073 3a2f 2f77 7777 2e63 6c69 7073 2e75  ps://www.clips.u
+0000ce30: 616e 7477 6572 7065 6e2e 6265 2f63 6f6e  antwerpen.be/con
+0000ce40: 6c6c 3230 3033 2f6e 6572 2f22 270a 2020  ll2003/ner/"'.  
+0000ce50: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+0000ce60: 2020 2020 2020 2020 6c6f 672e 7761 726e          log.warn
+0000ce70: 696e 6728 222d 2220 2a20 3130 3029 0a0a  ing("-" * 100)..
+0000ce80: 2020 2020 2020 2020 7375 7065 7228 292e          super().
+0000ce90: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
+0000cea0: 2020 2020 2020 6461 7461 5f66 6f6c 6465        data_folde
+0000ceb0: 722c 0a20 2020 2020 2020 2020 2020 2063  r,.            c
+0000cec0: 6f6c 756d 6e73 2c0a 2020 2020 2020 2020  olumns,.        
+0000ced0: 2020 2020 696e 5f6d 656d 6f72 793d 696e      in_memory=in
+0000cee0: 5f6d 656d 6f72 792c 0a20 2020 2020 2020  _memory,.       
+0000cef0: 2020 2020 2064 6f63 756d 656e 745f 7365       document_se
+0000cf00: 7061 7261 746f 725f 746f 6b65 6e3d 222d  parator_token="-
+0000cf10: 444f 4353 5441 5254 2d22 2c0a 2020 2020  DOCSTART-",.    
+0000cf20: 2020 2020 2020 2020 2a2a 636f 7270 7573          **corpus
+0000cf30: 6172 6773 2c0a 2020 2020 2020 2020 290a  args,.        ).
+0000cf40: 0a0a 636c 6173 7320 434f 4e4c 4c5f 3033  ..class CONLL_03
+0000cf50: 5f44 5554 4348 2843 6f6c 756d 6e43 6f72  _DUTCH(ColumnCor
+0000cf60: 7075 7329 3a0a 2020 2020 6465 6620 5f5f  pus):.    def __
+0000cf70: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
+0000cf80: 7365 6c66 2c0a 2020 2020 2020 2020 6261  self,.        ba
+0000cf90: 7365 5f70 6174 683a 204f 7074 696f 6e61  se_path: Optiona
+0000cfa0: 6c5b 556e 696f 6e5b 7374 722c 2050 6174  l[Union[str, Pat
+0000cfb0: 685d 5d20 3d20 4e6f 6e65 2c0a 2020 2020  h]] = None,.    
+0000cfc0: 2020 2020 696e 5f6d 656d 6f72 793a 2062      in_memory: b
+0000cfd0: 6f6f 6c20 3d20 5472 7565 2c0a 2020 2020  ool = True,.    
+0000cfe0: 2020 2020 2a2a 636f 7270 7573 6172 6773      **corpusargs
+0000cff0: 2c0a 2020 2020 2920 2d3e 204e 6f6e 653a  ,.    ) -> None:
+0000d000: 0a20 2020 2020 2020 2022 2222 496e 6974  .        """Init
+0000d010: 6961 6c69 7a65 2074 6865 2043 6f4e 4c4c  ialize the CoNLL
+0000d020: 2d30 3320 636f 7270 7573 2066 6f72 2044  -03 corpus for D
+0000d030: 7574 6368 2e0a 0a20 2020 2020 2020 2054  utch...        T
+0000d040: 6865 2066 6972 7374 2074 696d 6520 796f  he first time yo
+0000d050: 7520 6361 6c6c 2074 6869 7320 636f 6e73  u call this cons
+0000d060: 7472 7563 746f 7220 6974 2077 696c 6c20  tructor it will 
+0000d070: 6175 746f 6d61 7469 6361 6c6c 7920 646f  automatically do
+0000d080: 776e 6c6f 6164 2074 6865 2064 6174 6173  wnload the datas
+0000d090: 6574 2e0a 0a20 2020 2020 2020 2041 7267  et...        Arg
+0000d0a0: 733a 0a20 2020 2020 2020 2020 2020 2062  s:.            b
+0000d0b0: 6173 655f 7061 7468 3a20 4465 6661 756c  ase_path: Defaul
+0000d0c0: 7420 6973 204e 6f6e 652c 206d 6561 6e69  t is None, meani
+0000d0d0: 6e67 2074 6861 7420 636f 7270 7573 2067  ng that corpus g
+0000d0e0: 6574 7320 6175 746f 2d64 6f77 6e6c 6f61  ets auto-downloa
+0000d0f0: 6465 6420 616e 6420 6c6f 6164 6564 2e20  ded and loaded. 
+0000d100: 596f 7520 6361 6e20 6f76 6572 7269 6465  You can override
+0000d110: 2074 6869 7320 746f 2070 6f69 6e74 2074   this to point t
+0000d120: 6f20 6120 6469 6666 6572 656e 7420 666f  o a different fo
+0000d130: 6c64 6572 2062 7574 2074 7970 6963 616c  lder but typical
+0000d140: 6c79 2074 6869 7320 7368 6f75 6c64 206e  ly this should n
+0000d150: 6f74 2062 6520 6e65 6365 7373 6172 792e  ot be necessary.
+0000d160: 0a20 2020 2020 2020 2020 2020 2069 6e5f  .            in_
+0000d170: 6d65 6d6f 7279 3a20 4966 2054 7275 652c  memory: If True,
+0000d180: 206b 6565 7073 2064 6174 6173 6574 2069   keeps dataset i
+0000d190: 6e20 6d65 6d6f 7279 2067 6976 696e 6720  n memory giving 
+0000d1a0: 7370 6565 6475 7073 2069 6e20 7472 6169  speedups in trai
+0000d1b0: 6e69 6e67 2e0a 2020 2020 2020 2020 2222  ning..        ""
+0000d1c0: 220a 2020 2020 2020 2020 6261 7365 5f70  ".        base_p
+0000d1d0: 6174 6820 3d20 6b6f 6c69 6272 692e 6361  ath = kolibri.ca
+0000d1e0: 6368 655f 726f 6f74 202f 2022 6461 7461  che_root / "data
+0000d1f0: 7365 7473 2220 6966 206e 6f74 2062 6173  sets" if not bas
+0000d200: 655f 7061 7468 2065 6c73 6520 5061 7468  e_path else Path
+0000d210: 2862 6173 655f 7061 7468 290a 0a20 2020  (base_path)..   
+0000d220: 2020 2020 2023 2063 6f6c 756d 6e20 666f       # column fo
+0000d230: 726d 6174 0a20 2020 2020 2020 2063 6f6c  rmat.        col
+0000d240: 756d 6e73 203d 207b 303a 2022 7465 7874  umns = {0: "text
+0000d250: 222c 2031 3a20 2270 6f73 222c 2032 3a20  ", 1: "pos", 2: 
+0000d260: 226e 6572 227d 0a0a 2020 2020 2020 2020  "ner"}..        
+0000d270: 2320 7468 6973 2064 6174 6173 6574 206e  # this dataset n
+0000d280: 616d 650a 2020 2020 2020 2020 6461 7461  ame.        data
+0000d290: 7365 745f 6e61 6d65 203d 2073 656c 662e  set_name = self.
+0000d2a0: 5f5f 636c 6173 735f 5f2e 5f5f 6e61 6d65  __class__.__name
+0000d2b0: 5f5f 2e6c 6f77 6572 2829 0a0a 2020 2020  __.lower()..    
+0000d2c0: 2020 2020 6461 7461 5f66 6f6c 6465 7220      data_folder 
+0000d2d0: 3d20 6261 7365 5f70 6174 6820 2f20 6461  = base_path / da
+0000d2e0: 7461 7365 745f 6e61 6d65 0a0a 2020 2020  taset_name..    
+0000d2f0: 2020 2020 2320 646f 776e 6c6f 6164 2064      # download d
+0000d300: 6174 6120 6966 206e 6563 6573 7361 7279  ata if necessary
+0000d310: 0a20 2020 2020 2020 2063 6f6e 6c6c 5f30  .        conll_0
+0000d320: 325f 7061 7468 203d 2022 6874 7470 733a  2_path = "https:
+0000d330: 2f2f 7777 772e 636c 6970 732e 7561 6e74  //www.clips.uant
+0000d340: 7765 7270 656e 2e62 652f 636f 6e6c 6c32  werpen.be/conll2
+0000d350: 3030 322f 6e65 722f 6461 7461 2f22 0a0a  002/ner/data/"..
+0000d360: 2020 2020 2020 2020 2320 646f 776e 6c6f          # downlo
+0000d370: 6164 2066 696c 6573 2069 6620 6e6f 7420  ad files if not 
+0000d380: 7072 6573 656e 7420 6c6f 6361 6c6c 790a  present locally.
+0000d390: 2020 2020 2020 2020 6361 6368 6564 5f70          cached_p
+0000d3a0: 6174 6828 6622 7b63 6f6e 6c6c 5f30 325f  ath(f"{conll_02_
+0000d3b0: 7061 7468 7d6e 6564 2e74 6573 7461 222c  path}ned.testa",
+0000d3c0: 2064 6174 615f 666f 6c64 6572 202f 2022   data_folder / "
+0000d3d0: 7261 7722 290a 2020 2020 2020 2020 6361  raw").        ca
+0000d3e0: 6368 6564 5f70 6174 6828 6622 7b63 6f6e  ched_path(f"{con
+0000d3f0: 6c6c 5f30 325f 7061 7468 7d6e 6564 2e74  ll_02_path}ned.t
+0000d400: 6573 7462 222c 2064 6174 615f 666f 6c64  estb", data_fold
+0000d410: 6572 202f 2022 7261 7722 290a 2020 2020  er / "raw").    
+0000d420: 2020 2020 6361 6368 6564 5f70 6174 6828      cached_path(
+0000d430: 6622 7b63 6f6e 6c6c 5f30 325f 7061 7468  f"{conll_02_path
+0000d440: 7d6e 6564 2e74 7261 696e 222c 2064 6174  }ned.train", dat
+0000d450: 615f 666f 6c64 6572 202f 2022 7261 7722  a_folder / "raw"
+0000d460: 290a 0a20 2020 2020 2020 2023 2077 6520  )..        # we 
+0000d470: 6e65 6564 2074 6f20 736c 6967 6874 6c79  need to slightly
+0000d480: 206d 6f64 6966 7920 7468 6520 6f72 6967   modify the orig
+0000d490: 696e 616c 2066 696c 6573 2062 7920 6164  inal files by ad
+0000d4a0: 6469 6e67 2073 6f6d 6520 6e65 7720 6c69  ding some new li
+0000d4b0: 6e65 7320 6166 7465 7220 646f 6375 6d65  nes after docume
+0000d4c0: 6e74 2073 6570 6172 6174 6f72 730a 2020  nt separators.  
+0000d4d0: 2020 2020 2020 7472 6169 6e5f 6461 7461        train_data
+0000d4e0: 5f66 696c 6520 3d20 6461 7461 5f66 6f6c  _file = data_fol
+0000d4f0: 6465 7220 2f20 2274 7261 696e 2e74 7874  der / "train.txt
+0000d500: 220a 2020 2020 2020 2020 6966 206e 6f74  ".        if not
+0000d510: 2074 7261 696e 5f64 6174 615f 6669 6c65   train_data_file
+0000d520: 2e69 735f 6669 6c65 2829 3a0a 2020 2020  .is_file():.    
+0000d530: 2020 2020 2020 2020 7365 6c66 2e5f 5f6f          self.__o
+0000d540: 6666 7365 745f 646f 6373 7461 7274 7328  ffset_docstarts(
+0000d550: 6461 7461 5f66 6f6c 6465 7220 2f20 2272  data_folder / "r
+0000d560: 6177 2220 2f20 226e 6564 2e74 7261 696e  aw" / "ned.train
+0000d570: 222c 2064 6174 615f 666f 6c64 6572 202f  ", data_folder /
+0000d580: 2022 7472 6169 6e2e 7478 7422 290a 2020   "train.txt").  
+0000d590: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+0000d5a0: 5f6f 6666 7365 745f 646f 6373 7461 7274  _offset_docstart
+0000d5b0: 7328 6461 7461 5f66 6f6c 6465 7220 2f20  s(data_folder / 
+0000d5c0: 2272 6177 2220 2f20 226e 6564 2e74 6573  "raw" / "ned.tes
+0000d5d0: 7461 222c 2064 6174 615f 666f 6c64 6572  ta", data_folder
+0000d5e0: 202f 2022 6465 762e 7478 7422 290a 2020   / "dev.txt").  
+0000d5f0: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+0000d600: 5f6f 6666 7365 745f 646f 6373 7461 7274  _offset_docstart
+0000d610: 7328 6461 7461 5f66 6f6c 6465 7220 2f20  s(data_folder / 
+0000d620: 2272 6177 2220 2f20 226e 6564 2e74 6573  "raw" / "ned.tes
+0000d630: 7462 222c 2064 6174 615f 666f 6c64 6572  tb", data_folder
+0000d640: 202f 2022 7465 7374 2e74 7874 2229 0a0a   / "test.txt")..
+0000d650: 2020 2020 2020 2020 7375 7065 7228 292e          super().
+0000d660: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
+0000d670: 2020 2020 2020 6461 7461 5f66 6f6c 6465        data_folde
+0000d680: 722c 0a20 2020 2020 2020 2020 2020 2063  r,.            c
+0000d690: 6f6c 756d 6e73 2c0a 2020 2020 2020 2020  olumns,.        
+0000d6a0: 2020 2020 7472 6169 6e5f 6669 6c65 3d22      train_file="
+0000d6b0: 7472 6169 6e2e 7478 7422 2c0a 2020 2020  train.txt",.    
+0000d6c0: 2020 2020 2020 2020 6465 765f 6669 6c65          dev_file
+0000d6d0: 3d22 6465 762e 7478 7422 2c0a 2020 2020  ="dev.txt",.    
+0000d6e0: 2020 2020 2020 2020 7465 7374 5f66 696c          test_fil
+0000d6f0: 653d 2274 6573 742e 7478 7422 2c0a 2020  e="test.txt",.  
+0000d700: 2020 2020 2020 2020 2020 656e 636f 6469            encodi
+0000d710: 6e67 3d22 6c61 7469 6e2d 3122 2c0a 2020  ng="latin-1",.  
+0000d720: 2020 2020 2020 2020 2020 696e 5f6d 656d            in_mem
+0000d730: 6f72 793d 696e 5f6d 656d 6f72 792c 0a20  ory=in_memory,. 
+0000d740: 2020 2020 2020 2020 2020 2064 6f63 756d             docum
+0000d750: 656e 745f 7365 7061 7261 746f 725f 746f  ent_separator_to
+0000d760: 6b65 6e3d 222d 444f 4353 5441 5254 2d22  ken="-DOCSTART-"
+0000d770: 2c0a 2020 2020 2020 2020 2020 2020 2a2a  ,.            **
+0000d780: 636f 7270 7573 6172 6773 2c0a 2020 2020  corpusargs,.    
+0000d790: 2020 2020 290a 0a20 2020 2040 7374 6174      )..    @stat
+0000d7a0: 6963 6d65 7468 6f64 0a20 2020 2064 6566  icmethod.    def
+0000d7b0: 205f 5f6f 6666 7365 745f 646f 6373 7461   __offset_docsta
+0000d7c0: 7274 7328 6669 6c65 5f69 6e3a 2055 6e69  rts(file_in: Uni
+0000d7d0: 6f6e 5b73 7472 2c20 5061 7468 5d2c 2066  on[str, Path], f
+0000d7e0: 696c 655f 6f75 743a 2055 6e69 6f6e 5b73  ile_out: Union[s
+0000d7f0: 7472 2c20 5061 7468 5d29 3a0a 2020 2020  tr, Path]):.    
+0000d800: 2020 2020 7769 7468 206f 7065 6e28 6669      with open(fi
+0000d810: 6c65 5f69 6e2c 2065 6e63 6f64 696e 673d  le_in, encoding=
+0000d820: 226c 6174 696e 2d31 2229 2061 7320 663a  "latin-1") as f:
+0000d830: 0a20 2020 2020 2020 2020 2020 206c 696e  .            lin
+0000d840: 6573 203d 2066 2e72 6561 646c 696e 6573  es = f.readlines
+0000d850: 2829 0a20 2020 2020 2020 2077 6974 6820  ().        with 
+0000d860: 6f70 656e 2866 696c 655f 6f75 742c 2022  open(file_out, "
+0000d870: 7722 2c20 656e 636f 6469 6e67 3d22 6c61  w", encoding="la
+0000d880: 7469 6e2d 3122 2920 6173 2066 3a0a 2020  tin-1") as f:.  
+0000d890: 2020 2020 2020 2020 2020 666f 7220 6c69            for li
+0000d8a0: 6e65 2069 6e20 6c69 6e65 733a 0a20 2020  ne in lines:.   
+0000d8b0: 2020 2020 2020 2020 2020 2020 2066 2e77               f.w
+0000d8c0: 7269 7465 286c 696e 6529 0a20 2020 2020  rite(line).     
+0000d8d0: 2020 2020 2020 2020 2020 2069 6620 6c69             if li
+0000d8e0: 6e65 2e73 7461 7274 7377 6974 6828 222d  ne.startswith("-
+0000d8f0: 444f 4353 5441 5254 2d22 293a 0a20 2020  DOCSTART-"):.   
+0000d900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d910: 2066 2e77 7269 7465 2822 5c6e 2229 0a0a   f.write("\n")..
+0000d920: 0a63 6c61 7373 2043 4f4e 4c4c 5f30 335f  .class CONLL_03_
+0000d930: 5350 414e 4953 4828 436f 6c75 6d6e 436f  SPANISH(ColumnCo
+0000d940: 7270 7573 293a 0a20 2020 2064 6566 205f  rpus):.    def _
+0000d950: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
+0000d960: 2073 656c 662c 0a20 2020 2020 2020 2062   self,.        b
+0000d970: 6173 655f 7061 7468 3a20 4f70 7469 6f6e  ase_path: Option
+0000d980: 616c 5b55 6e69 6f6e 5b73 7472 2c20 5061  al[Union[str, Pa
+0000d990: 7468 5d5d 203d 204e 6f6e 652c 0a20 2020  th]] = None,.   
+0000d9a0: 2020 2020 2069 6e5f 6d65 6d6f 7279 3a20       in_memory: 
+0000d9b0: 626f 6f6c 203d 2054 7275 652c 0a20 2020  bool = True,.   
+0000d9c0: 2020 2020 202a 2a63 6f72 7075 7361 7267       **corpusarg
+0000d9d0: 732c 0a20 2020 2029 202d 3e20 4e6f 6e65  s,.    ) -> None
+0000d9e0: 3a0a 2020 2020 2020 2020 2222 2249 6e69  :.        """Ini
+0000d9f0: 7469 616c 697a 6520 7468 6520 436f 4e4c  tialize the CoNL
+0000da00: 4c2d 3033 2063 6f72 7075 7320 666f 7220  L-03 corpus for 
+0000da10: 5370 616e 6973 682e 0a0a 2020 2020 2020  Spanish...      
+0000da20: 2020 5468 6520 6669 7273 7420 7469 6d65    The first time
+0000da30: 2079 6f75 2063 616c 6c20 7468 6973 2063   you call this c
+0000da40: 6f6e 7374 7275 6374 6f72 2069 7420 7769  onstructor it wi
+0000da50: 6c6c 2061 7574 6f6d 6174 6963 616c 6c79  ll automatically
+0000da60: 2064 6f77 6e6c 6f61 6420 7468 6520 6461   download the da
+0000da70: 7461 7365 742e 0a0a 2020 2020 2020 2020  taset...        
+0000da80: 4172 6773 3a0a 2020 2020 2020 2020 2020  Args:.          
+0000da90: 2020 6261 7365 5f70 6174 683a 2044 6566    base_path: Def
+0000daa0: 6175 6c74 2069 7320 4e6f 6e65 2c20 6d65  ault is None, me
+0000dab0: 616e 696e 6720 7468 6174 2063 6f72 7075  aning that corpu
+0000dac0: 7320 6765 7473 2061 7574 6f2d 646f 776e  s gets auto-down
+0000dad0: 6c6f 6164 6564 2061 6e64 206c 6f61 6465  loaded and loade
+0000dae0: 642e 2059 6f75 2063 616e 206f 7665 7272  d. You can overr
+0000daf0: 6964 6520 7468 6973 2074 6f20 706f 696e  ide this to poin
+0000db00: 7420 746f 2061 2064 6966 6665 7265 6e74  t to a different
+0000db10: 2066 6f6c 6465 7220 6275 7420 7479 7069   folder but typi
+0000db20: 6361 6c6c 7920 7468 6973 2073 686f 756c  cally this shoul
+0000db30: 6420 6e6f 7420 6265 206e 6563 6573 7361  d not be necessa
+0000db40: 7279 2e0a 2020 2020 2020 2020 2020 2020  ry..            
+0000db50: 696e 5f6d 656d 6f72 793a 2049 6620 5472  in_memory: If Tr
+0000db60: 7565 2c20 6b65 6570 7320 6461 7461 7365  ue, keeps datase
+0000db70: 7420 696e 206d 656d 6f72 7920 6769 7669  t in memory givi
+0000db80: 6e67 2073 7065 6564 7570 7320 696e 2074  ng speedups in t
+0000db90: 7261 696e 696e 672e 0a20 2020 2020 2020  raining..       
+0000dba0: 2022 2222 0a20 2020 2020 2020 2062 6173   """.        bas
+0000dbb0: 655f 7061 7468 203d 206b 6f6c 6962 7269  e_path = kolibri
+0000dbc0: 2e63 6163 6865 5f72 6f6f 7420 2f20 2264  .cache_root / "d
+0000dbd0: 6174 6173 6574 7322 2069 6620 6e6f 7420  atasets" if not 
+0000dbe0: 6261 7365 5f70 6174 6820 656c 7365 2050  base_path else P
+0000dbf0: 6174 6828 6261 7365 5f70 6174 6829 0a0a  ath(base_path)..
+0000dc00: 2020 2020 2020 2020 2320 636f 6c75 6d6e          # column
+0000dc10: 2066 6f72 6d61 740a 2020 2020 2020 2020   format.        
+0000dc20: 636f 6c75 6d6e 7320 3d20 7b30 3a20 2274  columns = {0: "t
+0000dc30: 6578 7422 2c20 313a 2022 6e65 7222 7d0a  ext", 1: "ner"}.
+0000dc40: 0a20 2020 2020 2020 2023 2074 6869 7320  .        # this 
+0000dc50: 6461 7461 7365 7420 6e61 6d65 0a20 2020  dataset name.   
+0000dc60: 2020 2020 2064 6174 6173 6574 5f6e 616d       dataset_nam
+0000dc70: 6520 3d20 7365 6c66 2e5f 5f63 6c61 7373  e = self.__class
+0000dc80: 5f5f 2e5f 5f6e 616d 655f 5f2e 6c6f 7765  __.__name__.lowe
+0000dc90: 7228 290a 0a20 2020 2020 2020 2064 6174  r()..        dat
+0000dca0: 615f 666f 6c64 6572 203d 2062 6173 655f  a_folder = base_
+0000dcb0: 7061 7468 202f 2064 6174 6173 6574 5f6e  path / dataset_n
+0000dcc0: 616d 650a 0a20 2020 2020 2020 2023 2064  ame..        # d
+0000dcd0: 6f77 6e6c 6f61 6420 6461 7461 2069 6620  ownload data if 
+0000dce0: 6e65 6365 7373 6172 790a 2020 2020 2020  necessary.      
+0000dcf0: 2020 636f 6e6c 6c5f 3032 5f70 6174 6820    conll_02_path 
+0000dd00: 3d20 2268 7474 7073 3a2f 2f77 7777 2e63  = "https://www.c
+0000dd10: 6c69 7073 2e75 616e 7477 6572 7065 6e2e  lips.uantwerpen.
+0000dd20: 6265 2f63 6f6e 6c6c 3230 3032 2f6e 6572  be/conll2002/ner
+0000dd30: 2f64 6174 612f 220a 2020 2020 2020 2020  /data/".        
+0000dd40: 6361 6368 6564 5f70 6174 6828 6622 7b63  cached_path(f"{c
+0000dd50: 6f6e 6c6c 5f30 325f 7061 7468 7d65 7370  onll_02_path}esp
+0000dd60: 2e74 6573 7461 222c 2050 6174 6828 2264  .testa", Path("d
+0000dd70: 6174 6173 6574 7322 2920 2f20 6461 7461  atasets") / data
+0000dd80: 7365 745f 6e61 6d65 290a 2020 2020 2020  set_name).      
+0000dd90: 2020 6361 6368 6564 5f70 6174 6828 6622    cached_path(f"
+0000dda0: 7b63 6f6e 6c6c 5f30 325f 7061 7468 7d65  {conll_02_path}e
+0000ddb0: 7370 2e74 6573 7462 222c 2050 6174 6828  sp.testb", Path(
+0000ddc0: 2264 6174 6173 6574 7322 2920 2f20 6461  "datasets") / da
+0000ddd0: 7461 7365 745f 6e61 6d65 290a 2020 2020  taset_name).    
+0000dde0: 2020 2020 6361 6368 6564 5f70 6174 6828      cached_path(
+0000ddf0: 6622 7b63 6f6e 6c6c 5f30 325f 7061 7468  f"{conll_02_path
+0000de00: 7d65 7370 2e74 7261 696e 222c 2050 6174  }esp.train", Pat
+0000de10: 6828 2264 6174 6173 6574 7322 2920 2f20  h("datasets") / 
+0000de20: 6461 7461 7365 745f 6e61 6d65 290a 0a20  dataset_name).. 
+0000de30: 2020 2020 2020 2073 7570 6572 2829 2e5f         super()._
+0000de40: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
+0000de50: 2020 2020 2064 6174 615f 666f 6c64 6572       data_folder
+0000de60: 2c0a 2020 2020 2020 2020 2020 2020 636f  ,.            co
+0000de70: 6c75 6d6e 732c 0a20 2020 2020 2020 2020  lumns,.         
+0000de80: 2020 2065 6e63 6f64 696e 673d 226c 6174     encoding="lat
+0000de90: 696e 2d31 222c 0a20 2020 2020 2020 2020  in-1",.         
+0000dea0: 2020 2069 6e5f 6d65 6d6f 7279 3d69 6e5f     in_memory=in_
+0000deb0: 6d65 6d6f 7279 2c0a 2020 2020 2020 2020  memory,.        
+0000dec0: 2020 2020 2a2a 636f 7270 7573 6172 6773      **corpusargs
+0000ded0: 2c0a 2020 2020 2020 2020 290a 0a0a 636c  ,.        )...cl
+0000dee0: 6173 7320 434f 4e4c 4c5f 3230 3030 2843  ass CONLL_2000(C
+0000def0: 6f6c 756d 6e43 6f72 7075 7329 3a0a 2020  olumnCorpus):.  
+0000df00: 2020 6465 6620 5f5f 696e 6974 5f5f 280a    def __init__(.
+0000df10: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
+0000df20: 2020 2020 2020 6261 7365 5f70 6174 683a        base_path:
+0000df30: 204f 7074 696f 6e61 6c5b 556e 696f 6e5b   Optional[Union[
+0000df40: 7374 722c 2050 6174 685d 5d20 3d20 4e6f  str, Path]] = No
+0000df50: 6e65 2c0a 2020 2020 2020 2020 696e 5f6d  ne,.        in_m
+0000df60: 656d 6f72 793a 2062 6f6f 6c20 3d20 5472  emory: bool = Tr
+0000df70: 7565 2c0a 2020 2020 2020 2020 2a2a 636f  ue,.        **co
+0000df80: 7270 7573 6172 6773 2c0a 2020 2020 2920  rpusargs,.    ) 
+0000df90: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+0000dfa0: 2022 2222 496e 6974 6961 6c69 7a65 2074   """Initialize t
+0000dfb0: 6865 2043 6f4e 4c4c 2d32 3030 3020 636f  he CoNLL-2000 co
+0000dfc0: 7270 7573 2066 6f72 2045 6e67 6c69 7368  rpus for English
+0000dfd0: 2063 6875 6e6b 696e 672e 0a0a 2020 2020   chunking...    
+0000dfe0: 2020 2020 5468 6520 6669 7273 7420 7469      The first ti
+0000dff0: 6d65 2079 6f75 2063 616c 6c20 7468 6973  me you call this
+0000e000: 2063 6f6e 7374 7275 6374 6f72 2069 7420   constructor it 
+0000e010: 7769 6c6c 2061 7574 6f6d 6174 6963 616c  will automatical
+0000e020: 6c79 2064 6f77 6e6c 6f61 6420 7468 6520  ly download the 
+0000e030: 6461 7461 7365 742e 0a20 2020 2020 2020  dataset..       
+0000e040: 203a 7061 7261 6d20 6261 7365 5f70 6174   :param base_pat
+0000e050: 683a 2044 6566 6175 6c74 2069 7320 4e6f  h: Default is No
+0000e060: 6e65 2c20 6d65 616e 696e 6720 7468 6174  ne, meaning that
+0000e070: 2063 6f72 7075 7320 6765 7473 2061 7574   corpus gets aut
+0000e080: 6f2d 646f 776e 6c6f 6164 6564 2061 6e64  o-downloaded and
+0000e090: 206c 6f61 6465 642e 2059 6f75 2063 616e   loaded. You can
+0000e0a0: 206f 7665 7272 6964 6520 7468 6973 0a20   override this. 
+0000e0b0: 2020 2020 2020 2074 6f20 706f 696e 7420         to point 
+0000e0c0: 746f 2061 2064 6966 6665 7265 6e74 2066  to a different f
+0000e0d0: 6f6c 6465 7220 6275 7420 7479 7069 6361  older but typica
+0000e0e0: 6c6c 7920 7468 6973 2073 686f 756c 6420  lly this should 
+0000e0f0: 6e6f 7420 6265 206e 6563 6573 7361 7279  not be necessary
+0000e100: 2e0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
+0000e110: 2069 6e5f 6d65 6d6f 7279 3a20 4966 2054   in_memory: If T
+0000e120: 7275 652c 206b 6565 7073 2064 6174 6173  rue, keeps datas
+0000e130: 6574 2069 6e20 6d65 6d6f 7279 2067 6976  et in memory giv
+0000e140: 696e 6720 7370 6565 6475 7073 2069 6e20  ing speedups in 
+0000e150: 7472 6169 6e69 6e67 2e0a 2020 2020 2020  training..      
+0000e160: 2020 2222 220a 2020 2020 2020 2020 6261    """.        ba
+0000e170: 7365 5f70 6174 6820 3d20 6b6f 6c69 6272  se_path = kolibr
+0000e180: 692e 6361 6368 655f 726f 6f74 202f 2022  i.cache_root / "
+0000e190: 6461 7461 7365 7473 2220 6966 206e 6f74  datasets" if not
+0000e1a0: 2062 6173 655f 7061 7468 2065 6c73 6520   base_path else 
+0000e1b0: 5061 7468 2862 6173 655f 7061 7468 290a  Path(base_path).
+0000e1c0: 0a20 2020 2020 2020 2023 2063 6f6c 756d  .        # colum
+0000e1d0: 6e20 666f 726d 6174 0a20 2020 2020 2020  n format.       
+0000e1e0: 2063 6f6c 756d 6e73 203d 207b 303a 2022   columns = {0: "
+0000e1f0: 7465 7874 222c 2031 3a20 2270 6f73 222c  text", 1: "pos",
+0000e200: 2032 3a20 226e 7022 7d0a 0a20 2020 2020   2: "np"}..     
+0000e210: 2020 2023 2074 6869 7320 6461 7461 7365     # this datase
+0000e220: 7420 6e61 6d65 0a20 2020 2020 2020 2064  t name.        d
+0000e230: 6174 6173 6574 5f6e 616d 6520 3d20 7365  ataset_name = se
+0000e240: 6c66 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e  lf.__class__.__n
+0000e250: 616d 655f 5f2e 6c6f 7765 7228 290a 0a20  ame__.lower().. 
+0000e260: 2020 2020 2020 2064 6174 615f 666f 6c64         data_fold
+0000e270: 6572 203d 2062 6173 655f 7061 7468 202f  er = base_path /
+0000e280: 2064 6174 6173 6574 5f6e 616d 650a 0a20   dataset_name.. 
+0000e290: 2020 2020 2020 2023 2064 6f77 6e6c 6f61         # downloa
+0000e2a0: 6420 6461 7461 2069 6620 6e65 6365 7373  d data if necess
+0000e2b0: 6172 790a 2020 2020 2020 2020 636f 6e6c  ary.        conl
+0000e2c0: 6c5f 3230 3030 5f70 6174 6820 3d20 2268  l_2000_path = "h
+0000e2d0: 7474 7073 3a2f 2f77 7777 2e63 6c69 7073  ttps://www.clips
+0000e2e0: 2e75 616e 7477 6572 7065 6e2e 6265 2f63  .uantwerpen.be/c
+0000e2f0: 6f6e 6c6c 3230 3030 2f63 6875 6e6b 696e  onll2000/chunkin
+0000e300: 672f 220a 2020 2020 2020 2020 6461 7461  g/".        data
+0000e310: 5f66 696c 6520 3d20 6b6f 6c69 6272 692e  _file = kolibri.
+0000e320: 6361 6368 655f 726f 6f74 202f 2022 6461  cache_root / "da
+0000e330: 7461 7365 7473 2220 2f20 6461 7461 7365  tasets" / datase
+0000e340: 745f 6e61 6d65 202f 2022 7472 6169 6e2e  t_name / "train.
+0000e350: 7478 7422 0a20 2020 2020 2020 2069 6620  txt".        if 
+0000e360: 6e6f 7420 6461 7461 5f66 696c 652e 6973  not data_file.is
+0000e370: 5f66 696c 6528 293a 0a20 2020 2020 2020  _file():.       
+0000e380: 2020 2020 2063 6163 6865 645f 7061 7468       cached_path
+0000e390: 2866 227b 636f 6e6c 6c5f 3230 3030 5f70  (f"{conll_2000_p
+0000e3a0: 6174 687d 7472 6169 6e2e 7478 742e 677a  ath}train.txt.gz
+0000e3b0: 222c 2050 6174 6828 2264 6174 6173 6574  ", Path("dataset
+0000e3c0: 7322 2920 2f20 6461 7461 7365 745f 6e61  s") / dataset_na
+0000e3d0: 6d65 290a 2020 2020 2020 2020 2020 2020  me).            
+0000e3e0: 6361 6368 6564 5f70 6174 6828 6622 7b63  cached_path(f"{c
+0000e3f0: 6f6e 6c6c 5f32 3030 305f 7061 7468 7d74  onll_2000_path}t
+0000e400: 6573 742e 7478 742e 677a 222c 2050 6174  est.txt.gz", Pat
+0000e410: 6828 2264 6174 6173 6574 7322 2920 2f20  h("datasets") / 
+0000e420: 6461 7461 7365 745f 6e61 6d65 290a 2020  dataset_name).  
+0000e430: 2020 2020 2020 2020 2020 696d 706f 7274            import
+0000e440: 2067 7a69 700a 2020 2020 2020 2020 2020   gzip.          
+0000e450: 2020 696d 706f 7274 2073 6875 7469 6c0a    import shutil.
+0000e460: 0a20 2020 2020 2020 2020 2020 2077 6974  .            wit
+0000e470: 6820 677a 6970 2e6f 7065 6e28 6b6f 6c69  h gzip.open(koli
+0000e480: 6272 692e 6361 6368 655f 726f 6f74 202f  bri.cache_root /
+0000e490: 2022 6461 7461 7365 7473 2220 2f20 6461   "datasets" / da
+0000e4a0: 7461 7365 745f 6e61 6d65 202f 2022 7472  taset_name / "tr
+0000e4b0: 6169 6e2e 7478 742e 677a 222c 2022 7262  ain.txt.gz", "rb
+0000e4c0: 2229 2061 7320 665f 696e 2c20 6f70 656e  ") as f_in, open
+0000e4d0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0000e4e0: 2020 6b6f 6c69 6272 692e 6361 6368 655f    kolibri.cache_
+0000e4f0: 726f 6f74 202f 2022 6461 7461 7365 7473  root / "datasets
+0000e500: 2220 2f20 6461 7461 7365 745f 6e61 6d65  " / dataset_name
+0000e510: 202f 2022 7472 6169 6e2e 7478 7422 2c0a   / "train.txt",.
+0000e520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e530: 2277 6222 2c0a 2020 2020 2020 2020 2020  "wb",.          
+0000e540: 2020 2920 6173 2066 5f6f 7574 3a0a 2020    ) as f_out:.  
+0000e550: 2020 2020 2020 2020 2020 2020 2020 7368                sh
+0000e560: 7574 696c 2e63 6f70 7966 696c 656f 626a  util.copyfileobj
+0000e570: 2866 5f69 6e2c 2066 5f6f 7574 290a 2020  (f_in, f_out).  
+0000e580: 2020 2020 2020 2020 2020 7769 7468 2067            with g
+0000e590: 7a69 702e 6f70 656e 286b 6f6c 6962 7269  zip.open(kolibri
+0000e5a0: 2e63 6163 6865 5f72 6f6f 7420 2f20 2264  .cache_root / "d
+0000e5b0: 6174 6173 6574 7322 202f 2064 6174 6173  atasets" / datas
+0000e5c0: 6574 5f6e 616d 6520 2f20 2274 6573 742e  et_name / "test.
+0000e5d0: 7478 742e 677a 222c 2022 7262 2229 2061  txt.gz", "rb") a
+0000e5e0: 7320 665f 696e 2c20 6f70 656e 280a 2020  s f_in, open(.  
+0000e5f0: 2020 2020 2020 2020 2020 2020 2020 6b6f                ko
+0000e600: 6c69 6272 692e 6361 6368 655f 726f 6f74  libri.cache_root
+0000e610: 202f 2022 6461 7461 7365 7473 2220 2f20   / "datasets" / 
+0000e620: 6461 7461 7365 745f 6e61 6d65 202f 2022  dataset_name / "
+0000e630: 7465 7374 2e74 7874 222c 0a20 2020 2020  test.txt",.     
+0000e640: 2020 2020 2020 2020 2020 2022 7762 222c             "wb",
+0000e650: 0a20 2020 2020 2020 2020 2020 2029 2061  .            ) a
+0000e660: 7320 665f 6f75 743a 0a20 2020 2020 2020  s f_out:.       
+0000e670: 2020 2020 2020 2020 2073 6875 7469 6c2e           shutil.
+0000e680: 636f 7079 6669 6c65 6f62 6a28 665f 696e  copyfileobj(f_in
+0000e690: 2c20 665f 6f75 7429 0a0a 2020 2020 2020  , f_out)..      
 0000e6a0: 2020 7375 7065 7228 292e 5f5f 696e 6974    super().__init
 0000e6b0: 5f5f 280a 2020 2020 2020 2020 2020 2020  __(.            
 0000e6c0: 6461 7461 5f66 6f6c 6465 722c 0a20 2020  data_folder,.   
 0000e6d0: 2020 2020 2020 2020 2063 6f6c 756d 6e73           columns
-0000e6e0: 2c0a 2020 2020 2020 2020 2020 2020 656e  ,.            en
-0000e6f0: 636f 6469 6e67 3d22 6c61 7469 6e2d 3122  coding="latin-1"
-0000e700: 2c0a 2020 2020 2020 2020 2020 2020 696e  ,.            in
-0000e710: 5f6d 656d 6f72 793d 696e 5f6d 656d 6f72  _memory=in_memor
-0000e720: 792c 0a20 2020 2020 2020 2020 2020 202a  y,.            *
-0000e730: 2a63 6f72 7075 7361 7267 732c 0a20 2020  *corpusargs,.   
-0000e740: 2020 2020 2029 0a0a 0a63 6c61 7373 2043       )...class C
-0000e750: 4f4e 4c4c 5f32 3030 3028 436f 6c75 6d6e  ONLL_2000(Column
-0000e760: 436f 7270 7573 293a 0a20 2020 2064 6566  Corpus):.    def
-0000e770: 205f 5f69 6e69 745f 5f28 0a20 2020 2020   __init__(.     
-0000e780: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
-0000e790: 2062 6173 655f 7061 7468 3a20 4f70 7469   base_path: Opti
-0000e7a0: 6f6e 616c 5b55 6e69 6f6e 5b73 7472 2c20  onal[Union[str, 
-0000e7b0: 5061 7468 5d5d 203d 204e 6f6e 652c 0a20  Path]] = None,. 
-0000e7c0: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
-0000e7d0: 3a20 626f 6f6c 203d 2054 7275 652c 0a20  : bool = True,. 
-0000e7e0: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
-0000e7f0: 7267 732c 0a20 2020 2029 202d 3e20 4e6f  rgs,.    ) -> No
-0000e800: 6e65 3a0a 2020 2020 2020 2020 2222 2249  ne:.        """I
-0000e810: 6e69 7469 616c 697a 6520 7468 6520 436f  nitialize the Co
-0000e820: 4e4c 4c2d 3230 3030 2063 6f72 7075 7320  NLL-2000 corpus 
-0000e830: 666f 7220 456e 676c 6973 6820 6368 756e  for English chun
-0000e840: 6b69 6e67 2e0a 0a20 2020 2020 2020 2054  king...        T
-0000e850: 6865 2066 6972 7374 2074 696d 6520 796f  he first time yo
-0000e860: 7520 6361 6c6c 2074 6869 7320 636f 6e73  u call this cons
-0000e870: 7472 7563 746f 7220 6974 2077 696c 6c20  tructor it will 
-0000e880: 6175 746f 6d61 7469 6361 6c6c 7920 646f  automatically do
-0000e890: 776e 6c6f 6164 2074 6865 2064 6174 6173  wnload the datas
-0000e8a0: 6574 2e0a 2020 2020 2020 2020 3a70 6172  et..        :par
-0000e8b0: 616d 2062 6173 655f 7061 7468 3a20 4465  am base_path: De
-0000e8c0: 6661 756c 7420 6973 204e 6f6e 652c 206d  fault is None, m
-0000e8d0: 6561 6e69 6e67 2074 6861 7420 636f 7270  eaning that corp
-0000e8e0: 7573 2067 6574 7320 6175 746f 2d64 6f77  us gets auto-dow
-0000e8f0: 6e6c 6f61 6465 6420 616e 6420 6c6f 6164  nloaded and load
-0000e900: 6564 2e20 596f 7520 6361 6e20 6f76 6572  ed. You can over
-0000e910: 7269 6465 2074 6869 730a 2020 2020 2020  ride this.      
-0000e920: 2020 746f 2070 6f69 6e74 2074 6f20 6120    to point to a 
-0000e930: 6469 6666 6572 656e 7420 666f 6c64 6572  different folder
-0000e940: 2062 7574 2074 7970 6963 616c 6c79 2074   but typically t
-0000e950: 6869 7320 7368 6f75 6c64 206e 6f74 2062  his should not b
-0000e960: 6520 6e65 6365 7373 6172 792e 0a20 2020  e necessary..   
-0000e970: 2020 2020 203a 7061 7261 6d20 696e 5f6d       :param in_m
-0000e980: 656d 6f72 793a 2049 6620 5472 7565 2c20  emory: If True, 
-0000e990: 6b65 6570 7320 6461 7461 7365 7420 696e  keeps dataset in
-0000e9a0: 206d 656d 6f72 7920 6769 7669 6e67 2073   memory giving s
-0000e9b0: 7065 6564 7570 7320 696e 2074 7261 696e  peedups in train
-0000e9c0: 696e 672e 0a20 2020 2020 2020 2022 2222  ing..        """
-0000e9d0: 0a20 2020 2020 2020 2062 6173 655f 7061  .        base_pa
-0000e9e0: 7468 203d 206b 6f6c 6962 7269 2e63 6163  th = kolibri.cac
-0000e9f0: 6865 5f72 6f6f 7420 2f20 2264 6174 6173  he_root / "datas
-0000ea00: 6574 7322 2069 6620 6e6f 7420 6261 7365  ets" if not base
-0000ea10: 5f70 6174 6820 656c 7365 2050 6174 6828  _path else Path(
-0000ea20: 6261 7365 5f70 6174 6829 0a0a 2020 2020  base_path)..    
-0000ea30: 2020 2020 2320 636f 6c75 6d6e 2066 6f72      # column for
-0000ea40: 6d61 740a 2020 2020 2020 2020 636f 6c75  mat.        colu
-0000ea50: 6d6e 7320 3d20 7b30 3a20 2274 6578 7422  mns = {0: "text"
-0000ea60: 2c20 313a 2022 706f 7322 2c20 323a 2022  , 1: "pos", 2: "
-0000ea70: 6e70 227d 0a0a 2020 2020 2020 2020 2320  np"}..        # 
-0000ea80: 7468 6973 2064 6174 6173 6574 206e 616d  this dataset nam
-0000ea90: 650a 2020 2020 2020 2020 6461 7461 7365  e.        datase
-0000eaa0: 745f 6e61 6d65 203d 2073 656c 662e 5f5f  t_name = self.__
-0000eab0: 636c 6173 735f 5f2e 5f5f 6e61 6d65 5f5f  class__.__name__
-0000eac0: 2e6c 6f77 6572 2829 0a0a 2020 2020 2020  .lower()..      
-0000ead0: 2020 6461 7461 5f66 6f6c 6465 7220 3d20    data_folder = 
-0000eae0: 6261 7365 5f70 6174 6820 2f20 6461 7461  base_path / data
-0000eaf0: 7365 745f 6e61 6d65 0a0a 2020 2020 2020  set_name..      
-0000eb00: 2020 2320 646f 776e 6c6f 6164 2064 6174    # download dat
-0000eb10: 6120 6966 206e 6563 6573 7361 7279 0a20  a if necessary. 
-0000eb20: 2020 2020 2020 2063 6f6e 6c6c 5f32 3030         conll_200
-0000eb30: 305f 7061 7468 203d 2022 6874 7470 733a  0_path = "https:
-0000eb40: 2f2f 7777 772e 636c 6970 732e 7561 6e74  //www.clips.uant
-0000eb50: 7765 7270 656e 2e62 652f 636f 6e6c 6c32  werpen.be/conll2
-0000eb60: 3030 302f 6368 756e 6b69 6e67 2f22 0a20  000/chunking/". 
-0000eb70: 2020 2020 2020 2064 6174 615f 6669 6c65         data_file
-0000eb80: 203d 206b 6f6c 6962 7269 2e63 6163 6865   = kolibri.cache
-0000eb90: 5f72 6f6f 7420 2f20 2264 6174 6173 6574  _root / "dataset
-0000eba0: 7322 202f 2064 6174 6173 6574 5f6e 616d  s" / dataset_nam
-0000ebb0: 6520 2f20 2274 7261 696e 2e74 7874 220a  e / "train.txt".
-0000ebc0: 2020 2020 2020 2020 6966 206e 6f74 2064          if not d
-0000ebd0: 6174 615f 6669 6c65 2e69 735f 6669 6c65  ata_file.is_file
-0000ebe0: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
-0000ebf0: 6361 6368 6564 5f70 6174 6828 6622 7b63  cached_path(f"{c
-0000ec00: 6f6e 6c6c 5f32 3030 305f 7061 7468 7d74  onll_2000_path}t
-0000ec10: 7261 696e 2e74 7874 2e67 7a22 2c20 5061  rain.txt.gz", Pa
-0000ec20: 7468 2822 6461 7461 7365 7473 2229 202f  th("datasets") /
-0000ec30: 2064 6174 6173 6574 5f6e 616d 6529 0a20   dataset_name). 
-0000ec40: 2020 2020 2020 2020 2020 2063 6163 6865             cache
-0000ec50: 645f 7061 7468 2866 227b 636f 6e6c 6c5f  d_path(f"{conll_
-0000ec60: 3230 3030 5f70 6174 687d 7465 7374 2e74  2000_path}test.t
-0000ec70: 7874 2e67 7a22 2c20 5061 7468 2822 6461  xt.gz", Path("da
-0000ec80: 7461 7365 7473 2229 202f 2064 6174 6173  tasets") / datas
-0000ec90: 6574 5f6e 616d 6529 0a20 2020 2020 2020  et_name).       
-0000eca0: 2020 2020 2069 6d70 6f72 7420 677a 6970       import gzip
-0000ecb0: 0a20 2020 2020 2020 2020 2020 2069 6d70  .            imp
-0000ecc0: 6f72 7420 7368 7574 696c 0a0a 2020 2020  ort shutil..    
-0000ecd0: 2020 2020 2020 2020 7769 7468 2067 7a69          with gzi
-0000ece0: 702e 6f70 656e 286b 6f6c 6962 7269 2e63  p.open(kolibri.c
-0000ecf0: 6163 6865 5f72 6f6f 7420 2f20 2264 6174  ache_root / "dat
-0000ed00: 6173 6574 7322 202f 2064 6174 6173 6574  asets" / dataset
-0000ed10: 5f6e 616d 6520 2f20 2274 7261 696e 2e74  _name / "train.t
-0000ed20: 7874 2e67 7a22 2c20 2272 6222 2920 6173  xt.gz", "rb") as
-0000ed30: 2066 5f69 6e2c 206f 7065 6e28 0a20 2020   f_in, open(.   
-0000ed40: 2020 2020 2020 2020 2020 2020 206b 6f6c               kol
-0000ed50: 6962 7269 2e63 6163 6865 5f72 6f6f 7420  ibri.cache_root 
-0000ed60: 2f20 2264 6174 6173 6574 7322 202f 2064  / "datasets" / d
-0000ed70: 6174 6173 6574 5f6e 616d 6520 2f20 2274  ataset_name / "t
-0000ed80: 7261 696e 2e74 7874 222c 0a20 2020 2020  rain.txt",.     
-0000ed90: 2020 2020 2020 2020 2020 2022 7762 222c             "wb",
-0000eda0: 0a20 2020 2020 2020 2020 2020 2029 2061  .            ) a
-0000edb0: 7320 665f 6f75 743a 0a20 2020 2020 2020  s f_out:.       
-0000edc0: 2020 2020 2020 2020 2073 6875 7469 6c2e           shutil.
-0000edd0: 636f 7079 6669 6c65 6f62 6a28 665f 696e  copyfileobj(f_in
-0000ede0: 2c20 665f 6f75 7429 0a20 2020 2020 2020  , f_out).       
-0000edf0: 2020 2020 2077 6974 6820 677a 6970 2e6f       with gzip.o
-0000ee00: 7065 6e28 6b6f 6c69 6272 692e 6361 6368  pen(kolibri.cach
-0000ee10: 655f 726f 6f74 202f 2022 6461 7461 7365  e_root / "datase
-0000ee20: 7473 2220 2f20 6461 7461 7365 745f 6e61  ts" / dataset_na
-0000ee30: 6d65 202f 2022 7465 7374 2e74 7874 2e67  me / "test.txt.g
-0000ee40: 7a22 2c20 2272 6222 2920 6173 2066 5f69  z", "rb") as f_i
-0000ee50: 6e2c 206f 7065 6e28 0a20 2020 2020 2020  n, open(.       
-0000ee60: 2020 2020 2020 2020 206b 6f6c 6962 7269           kolibri
-0000ee70: 2e63 6163 6865 5f72 6f6f 7420 2f20 2264  .cache_root / "d
-0000ee80: 6174 6173 6574 7322 202f 2064 6174 6173  atasets" / datas
-0000ee90: 6574 5f6e 616d 6520 2f20 2274 6573 742e  et_name / "test.
-0000eea0: 7478 7422 2c0a 2020 2020 2020 2020 2020  txt",.          
-0000eeb0: 2020 2020 2020 2277 6222 2c0a 2020 2020        "wb",.    
-0000eec0: 2020 2020 2020 2020 2920 6173 2066 5f6f          ) as f_o
-0000eed0: 7574 3a0a 2020 2020 2020 2020 2020 2020  ut:.            
-0000eee0: 2020 2020 7368 7574 696c 2e63 6f70 7966      shutil.copyf
-0000eef0: 696c 656f 626a 2866 5f69 6e2c 2066 5f6f  ileobj(f_in, f_o
-0000ef00: 7574 290a 0a20 2020 2020 2020 2073 7570  ut)..        sup
-0000ef10: 6572 2829 2e5f 5f69 6e69 745f 5f28 0a20  er().__init__(. 
-0000ef20: 2020 2020 2020 2020 2020 2064 6174 615f             data_
-0000ef30: 666f 6c64 6572 2c0a 2020 2020 2020 2020  folder,.        
-0000ef40: 2020 2020 636f 6c75 6d6e 732c 0a20 2020      columns,.   
-0000ef50: 2020 2020 2020 2020 2069 6e5f 6d65 6d6f           in_memo
-0000ef60: 7279 3d69 6e5f 6d65 6d6f 7279 2c0a 2020  ry=in_memory,.  
-0000ef70: 2020 2020 2020 2020 2020 2a2a 636f 7270            **corp
-0000ef80: 7573 6172 6773 2c0a 2020 2020 2020 2020  usargs,.        
-0000ef90: 290a 0a0a 636c 6173 7320 574e 5554 5f31  )...class WNUT_1
-0000efa0: 3728 436f 6c75 6d6e 436f 7270 7573 293a  7(ColumnCorpus):
-0000efb0: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
-0000efc0: 5f28 0a20 2020 2020 2020 2073 656c 662c  _(.        self,
-0000efd0: 0a20 2020 2020 2020 2062 6173 655f 7061  .        base_pa
-0000efe0: 7468 3a20 4f70 7469 6f6e 616c 5b55 6e69  th: Optional[Uni
-0000eff0: 6f6e 5b73 7472 2c20 5061 7468 5d5d 203d  on[str, Path]] =
-0000f000: 204e 6f6e 652c 0a20 2020 2020 2020 2069   None,.        i
-0000f010: 6e5f 6d65 6d6f 7279 3a20 626f 6f6c 203d  n_memory: bool =
-0000f020: 2054 7275 652c 0a20 2020 2020 2020 202a   True,.        *
-0000f030: 2a63 6f72 7075 7361 7267 732c 0a20 2020  *corpusargs,.   
-0000f040: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-0000f050: 2020 2020 6261 7365 5f70 6174 6820 3d20      base_path = 
-0000f060: 6b6f 6c69 6272 692e 6361 6368 655f 726f  kolibri.cache_ro
-0000f070: 6f74 202f 2022 6461 7461 7365 7473 2220  ot / "datasets" 
-0000f080: 6966 206e 6f74 2062 6173 655f 7061 7468  if not base_path
-0000f090: 2065 6c73 6520 5061 7468 2862 6173 655f   else Path(base_
-0000f0a0: 7061 7468 290a 0a20 2020 2020 2020 2023  path)..        #
-0000f0b0: 2063 6f6c 756d 6e20 666f 726d 6174 0a20   column format. 
-0000f0c0: 2020 2020 2020 2063 6f6c 756d 6e73 203d         columns =
-0000f0d0: 207b 303a 2022 7465 7874 222c 2031 3a20   {0: "text", 1: 
-0000f0e0: 226e 6572 227d 0a0a 2020 2020 2020 2020  "ner"}..        
-0000f0f0: 2320 7468 6973 2064 6174 6173 6574 206e  # this dataset n
-0000f100: 616d 650a 2020 2020 2020 2020 6461 7461  ame.        data
-0000f110: 7365 745f 6e61 6d65 203d 2073 656c 662e  set_name = self.
-0000f120: 5f5f 636c 6173 735f 5f2e 5f5f 6e61 6d65  __class__.__name
-0000f130: 5f5f 2e6c 6f77 6572 2829 0a0a 2020 2020  __.lower()..    
-0000f140: 2020 2020 6461 7461 5f66 6f6c 6465 7220      data_folder 
-0000f150: 3d20 6261 7365 5f70 6174 6820 2f20 6461  = base_path / da
-0000f160: 7461 7365 745f 6e61 6d65 0a0a 2020 2020  taset_name..    
-0000f170: 2020 2020 2320 646f 776e 6c6f 6164 2064      # download d
-0000f180: 6174 6120 6966 206e 6563 6573 7361 7279  ata if necessary
-0000f190: 0a20 2020 2020 2020 2077 6e75 745f 7061  .        wnut_pa
-0000f1a0: 7468 203d 2022 6874 7470 733a 2f2f 6e6f  th = "https://no
-0000f1b0: 6973 792d 7465 7874 2e67 6974 6875 622e  isy-text.github.
-0000f1c0: 696f 2f32 3031 372f 6669 6c65 732f 220a  io/2017/files/".
-0000f1d0: 2020 2020 2020 2020 6361 6368 6564 5f70          cached_p
-0000f1e0: 6174 6828 6622 7b77 6e75 745f 7061 7468  ath(f"{wnut_path
-0000f1f0: 7d77 6e75 7431 3774 7261 696e 2e63 6f6e  }wnut17train.con
-0000f200: 6c6c 222c 2050 6174 6828 2264 6174 6173  ll", Path("datas
-0000f210: 6574 7322 2920 2f20 6461 7461 7365 745f  ets") / dataset_
-0000f220: 6e61 6d65 290a 2020 2020 2020 2020 6361  name).        ca
-0000f230: 6368 6564 5f70 6174 6828 6622 7b77 6e75  ched_path(f"{wnu
-0000f240: 745f 7061 7468 7d65 6d65 7267 696e 672e  t_path}emerging.
-0000f250: 6465 762e 636f 6e6c 6c22 2c20 5061 7468  dev.conll", Path
-0000f260: 2822 6461 7461 7365 7473 2229 202f 2064  ("datasets") / d
-0000f270: 6174 6173 6574 5f6e 616d 6529 0a20 2020  ataset_name).   
-0000f280: 2020 2020 2063 6163 6865 645f 7061 7468       cached_path
-0000f290: 2866 227b 776e 7574 5f70 6174 687d 656d  (f"{wnut_path}em
-0000f2a0: 6572 6769 6e67 2e74 6573 742e 616e 6e6f  erging.test.anno
-0000f2b0: 7461 7465 6422 2c20 5061 7468 2822 6461  tated", Path("da
-0000f2c0: 7461 7365 7473 2229 202f 2064 6174 6173  tasets") / datas
-0000f2d0: 6574 5f6e 616d 6529 0a0a 2020 2020 2020  et_name)..      
-0000f2e0: 2020 7375 7065 7228 292e 5f5f 696e 6974    super().__init
-0000f2f0: 5f5f 280a 2020 2020 2020 2020 2020 2020  __(.            
-0000f300: 6461 7461 5f66 6f6c 6465 722c 0a20 2020  data_folder,.   
-0000f310: 2020 2020 2020 2020 2063 6f6c 756d 6e73           columns
-0000f320: 2c0a 2020 2020 2020 2020 2020 2020 696e  ,.            in
-0000f330: 5f6d 656d 6f72 793d 696e 5f6d 656d 6f72  _memory=in_memor
-0000f340: 792c 0a20 2020 2020 2020 2020 2020 202a  y,.            *
-0000f350: 2a63 6f72 7075 7361 7267 732c 0a20 2020  *corpusargs,.   
-0000f360: 2020 2020 2029 0a0a 0a63 6c61 7373 2046       )...class F
-0000f370: 4557 4e45 5244 2843 6f6c 756d 6e43 6f72  EWNERD(ColumnCor
-0000f380: 7075 7329 3a0a 2020 2020 6465 6620 5f5f  pus):.    def __
-0000f390: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
-0000f3a0: 7365 6c66 2c0a 2020 2020 2020 2020 7365  self,.        se
-0000f3b0: 7474 696e 673a 2073 7472 203d 2022 7375  tting: str = "su
-0000f3c0: 7065 7276 6973 6564 222c 0a20 2020 2020  pervised",.     
-0000f3d0: 2020 202a 2a63 6f72 7075 7361 7267 732c     **corpusargs,
-0000f3e0: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
-0000f3f0: 2020 2020 2020 2020 6173 7365 7274 2073          assert s
-0000f400: 6574 7469 6e67 2069 6e20 5b22 7375 7065  etting in ["supe
-0000f410: 7276 6973 6564 222c 2022 696e 7465 7222  rvised", "inter"
-0000f420: 2c20 2269 6e74 7261 225d 0a0a 2020 2020  , "intra"]..    
-0000f430: 2020 2020 6261 7365 5f70 6174 6820 3d20      base_path = 
-0000f440: 6b6f 6c69 6272 692e 6361 6368 655f 726f  kolibri.cache_ro
-0000f450: 6f74 202f 2022 6461 7461 7365 7473 220a  ot / "datasets".
-0000f460: 2020 2020 2020 2020 7365 6c66 2e64 6174          self.dat
-0000f470: 6173 6574 5f6e 616d 6520 3d20 7365 6c66  aset_name = self
-0000f480: 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e 616d  .__class__.__nam
-0000f490: 655f 5f2e 6c6f 7765 7228 290a 2020 2020  e__.lower().    
-0000f4a0: 2020 2020 7365 6c66 2e64 6174 615f 666f      self.data_fo
-0000f4b0: 6c64 6572 203d 2062 6173 655f 7061 7468  lder = base_path
-0000f4c0: 202f 2073 656c 662e 6461 7461 7365 745f   / self.dataset_
-0000f4d0: 6e61 6d65 202f 2073 6574 7469 6e67 0a20  name / setting. 
-0000f4e0: 2020 2020 2020 2073 656c 662e 6269 6f5f         self.bio_
-0000f4f0: 666f 726d 6174 5f64 6174 6120 3d20 6261  format_data = ba
-0000f500: 7365 5f70 6174 6820 2f20 7365 6c66 2e64  se_path / self.d
-0000f510: 6174 6173 6574 5f6e 616d 6520 2f20 7365  ataset_name / se
-0000f520: 7474 696e 6720 2f20 2262 696f 5f66 6f72  tting / "bio_for
-0000f530: 6d61 7422 0a0a 2020 2020 2020 2020 6966  mat"..        if
-0000f540: 206e 6f74 2073 656c 662e 6461 7461 5f66   not self.data_f
-0000f550: 6f6c 6465 722e 6578 6973 7473 2829 3a0a  older.exists():.
-0000f560: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000f570: 2e5f 646f 776e 6c6f 6164 2873 6574 7469  ._download(setti
-0000f580: 6e67 3d73 6574 7469 6e67 290a 0a20 2020  ng=setting)..   
-0000f590: 2020 2020 2069 6620 6e6f 7420 7365 6c66       if not self
-0000f5a0: 2e62 696f 5f66 6f72 6d61 745f 6461 7461  .bio_format_data
-0000f5b0: 2e65 7869 7374 7328 293a 0a20 2020 2020  .exists():.     
-0000f5c0: 2020 2020 2020 2073 656c 662e 5f67 656e         self._gen
-0000f5d0: 6572 6174 655f 7370 6c69 7473 2873 6574  erate_splits(set
-0000f5e0: 7469 6e67 290a 0a20 2020 2020 2020 2073  ting)..        s
-0000f5f0: 7570 6572 2829 2e5f 5f69 6e69 745f 5f28  uper().__init__(
-0000f600: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0000f610: 662e 6269 6f5f 666f 726d 6174 5f64 6174  f.bio_format_dat
-0000f620: 612c 0a20 2020 2020 2020 2020 2020 2063  a,.            c
-0000f630: 6f6c 756d 6e5f 666f 726d 6174 3d7b 303a  olumn_format={0:
-0000f640: 2022 7465 7874 222c 2031 3a20 226e 6572   "text", 1: "ner
-0000f650: 227d 2c0a 2020 2020 2020 2020 2020 2020  "},.            
-0000f660: 2a2a 636f 7270 7573 6172 6773 2c0a 2020  **corpusargs,.  
-0000f670: 2020 2020 2020 290a 0a20 2020 2064 6566        )..    def
-0000f680: 205f 646f 776e 6c6f 6164 2873 656c 662c   _download(self,
-0000f690: 2073 6574 7469 6e67 293a 0a20 2020 2020   setting):.     
-0000f6a0: 2020 205f 5552 4c73 203d 207b 0a20 2020     _URLs = {.   
-0000f6b0: 2020 2020 2020 2020 2022 7375 7065 7276           "superv
-0000f6c0: 6973 6564 223a 2022 6874 7470 733a 2f2f  ised": "https://
-0000f6d0: 636c 6f75 642e 7473 696e 6768 7561 2e65  cloud.tsinghua.e
-0000f6e0: 6475 2e63 6e2f 662f 3039 3236 3537 3530  du.cn/f/09265750
-0000f6f0: 6165 3633 3430 3432 3938 3237 2f3f 646c  ae6340429827/?dl
-0000f700: 3d31 222c 0a20 2020 2020 2020 2020 2020  =1",.           
-0000f710: 2022 696e 7472 6122 3a20 2268 7474 7073   "intra": "https
-0000f720: 3a2f 2f63 6c6f 7564 2e74 7369 6e67 6875  ://cloud.tsinghu
-0000f730: 612e 6564 752e 636e 2f66 2f61 3064 3365  a.edu.cn/f/a0d3e
-0000f740: 6664 6562 6464 6434 3431 3262 3037 632f  fdebddd4412b07c/
-0000f750: 3f64 6c3d 3122 2c0a 2020 2020 2020 2020  ?dl=1",.        
-0000f760: 2020 2020 2269 6e74 6572 223a 2022 6874      "inter": "ht
-0000f770: 7470 733a 2f2f 636c 6f75 642e 7473 696e  tps://cloud.tsin
-0000f780: 6768 7561 2e65 6475 2e63 6e2f 662f 3136  ghua.edu.cn/f/16
-0000f790: 3536 3933 6435 6536 3862 3433 3535 3866  5693d5e68b43558f
-0000f7a0: 3962 2f3f 646c 3d31 222c 0a20 2020 2020  9b/?dl=1",.     
-0000f7b0: 2020 207d 0a0a 2020 2020 2020 2020 6c6f     }..        lo
-0000f7c0: 672e 696e 666f 2866 2246 6577 4e45 5244  g.info(f"FewNERD
-0000f7d0: 2028 7b73 6574 7469 6e67 7d29 2064 6174   ({setting}) dat
-0000f7e0: 6173 6574 206e 6f74 2066 6f75 6e64 2c20  aset not found, 
-0000f7f0: 646f 776e 6c6f 6164 696e 672e 2229 0a20  downloading."). 
-0000f800: 2020 2020 2020 2064 6c5f 7061 7468 203d         dl_path =
-0000f810: 205f 5552 4c73 5b73 6574 7469 6e67 5d0a   _URLs[setting].
-0000f820: 2020 2020 2020 2020 646c 5f64 6972 203d          dl_dir =
-0000f830: 2063 6163 6865 645f 7061 7468 2864 6c5f   cached_path(dl_
-0000f840: 7061 7468 2c20 5061 7468 2822 6461 7461  path, Path("data
-0000f850: 7365 7473 2229 202f 2073 656c 662e 6461  sets") / self.da
-0000f860: 7461 7365 745f 6e61 6d65 202f 2073 6574  taset_name / set
-0000f870: 7469 6e67 290a 0a20 2020 2020 2020 2069  ting)..        i
-0000f880: 6620 7365 7474 696e 6720 6e6f 7420 696e  f setting not in
-0000f890: 206f 732e 6c69 7374 6469 7228 7365 6c66   os.listdir(self
-0000f8a0: 2e64 6174 615f 666f 6c64 6572 293a 0a20  .data_folder):. 
-0000f8b0: 2020 2020 2020 2020 2020 2069 6d70 6f72             impor
-0000f8c0: 7420 7a69 7066 696c 650a 0a20 2020 2020  t zipfile..     
-0000f8d0: 2020 2020 2020 2066 726f 6d20 7471 646d         from tqdm
-0000f8e0: 2069 6d70 6f72 7420 7471 646d 0a0a 2020   import tqdm..  
-0000f8f0: 2020 2020 2020 2020 2020 6c6f 672e 696e            log.in
-0000f900: 666f 2822 4665 774e 4552 4420 6461 7461  fo("FewNERD data
-0000f910: 7365 7420 6861 7320 6e6f 7420 6265 656e  set has not been
-0000f920: 2065 7874 7261 6374 6564 2079 6574 2c20   extracted yet, 
-0000f930: 6578 7472 6163 7469 6e67 2069 7420 6e6f  extracting it no
-0000f940: 772e 2054 6869 7320 6d69 6768 7420 7461  w. This might ta
-0000f950: 6b65 2061 2077 6869 6c65 2e22 290a 2020  ke a while.").  
-0000f960: 2020 2020 2020 2020 2020 7769 7468 207a            with z
-0000f970: 6970 6669 6c65 2e5a 6970 4669 6c65 2864  ipfile.ZipFile(d
-0000f980: 6c5f 6469 722c 2022 7222 2920 6173 207a  l_dir, "r") as z
-0000f990: 6970 5f72 6566 3a0a 2020 2020 2020 2020  ip_ref:.        
-0000f9a0: 2020 2020 2020 2020 666f 7220 6620 696e          for f in
-0000f9b0: 2074 7164 6d28 7a69 705f 7265 662e 6e61   tqdm(zip_ref.na
-0000f9c0: 6d65 6c69 7374 2829 293a 0a20 2020 2020  melist()):.     
-0000f9d0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000f9e0: 6620 662e 656e 6473 7769 7468 2822 2f22  f f.endswith("/"
-0000f9f0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0000fa00: 2020 2020 2020 2020 2020 206f 732e 6d61             os.ma
-0000fa10: 6b65 6469 7273 2873 656c 662e 6461 7461  kedirs(self.data
-0000fa20: 5f66 6f6c 6465 7220 2f20 6629 0a20 2020  _folder / f).   
-0000fa30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fa40: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0000fa50: 2020 2020 2020 2020 2020 2020 2020 207a                 z
-0000fa60: 6970 5f72 6566 2e65 7874 7261 6374 2866  ip_ref.extract(f
-0000fa70: 2c20 7061 7468 3d73 656c 662e 6461 7461  , path=self.data
-0000fa80: 5f66 6f6c 6465 7229 0a0a 2020 2020 6465  _folder)..    de
-0000fa90: 6620 5f67 656e 6572 6174 655f 7370 6c69  f _generate_spli
-0000faa0: 7473 2873 656c 662c 2073 6574 7469 6e67  ts(self, setting
-0000fab0: 293a 0a20 2020 2020 2020 206c 6f67 2e69  ):.        log.i
-0000fac0: 6e66 6f28 0a20 2020 2020 2020 2020 2020  nfo(.           
-0000fad0: 2066 2246 6577 4e45 5244 2073 706c 6974   f"FewNERD split
-0000fae0: 7320 666f 7220 7b73 6574 7469 6e67 7d20  s for {setting} 
-0000faf0: 6861 7665 206e 6f74 2062 6565 6e20 7061  have not been pa
-0000fb00: 7273 6564 2069 6e74 6f20 4249 4f20 666f  rsed into BIO fo
-0000fb10: 726d 6174 2c20 7061 7273 696e 6720 6974  rmat, parsing it
-0000fb20: 206e 6f77 2e20 5468 6973 206d 6967 6874   now. This might
-0000fb30: 2074 616b 6520 6120 7768 696c 652e 220a   take a while.".
-0000fb40: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0000fb50: 2020 6f73 2e6d 6b64 6972 2873 656c 662e    os.mkdir(self.
-0000fb60: 6269 6f5f 666f 726d 6174 5f64 6174 6129  bio_format_data)
-0000fb70: 0a20 2020 2020 2020 2066 6f72 2073 706c  .        for spl
-0000fb80: 6974 2069 6e20 6f73 2e6c 6973 7464 6972  it in os.listdir
-0000fb90: 2873 656c 662e 6461 7461 5f66 6f6c 6465  (self.data_folde
-0000fba0: 7220 2f20 7365 7474 696e 6729 3a0a 2020  r / setting):.  
-0000fbb0: 2020 2020 2020 2020 2020 7769 7468 206f            with o
-0000fbc0: 7065 6e28 7365 6c66 2e64 6174 615f 666f  pen(self.data_fo
-0000fbd0: 6c64 6572 202f 2073 6574 7469 6e67 202f  lder / setting /
-0000fbe0: 2073 706c 6974 2920 6173 2073 6f75 7263   split) as sourc
-0000fbf0: 652c 206f 7065 6e28 7365 6c66 2e62 696f  e, open(self.bio
-0000fc00: 5f66 6f72 6d61 745f 6461 7461 202f 2073  _format_data / s
-0000fc10: 706c 6974 2c20 2277 2229 2061 7320 7461  plit, "w") as ta
-0000fc20: 7267 6574 3a0a 2020 2020 2020 2020 2020  rget:.          
-0000fc30: 2020 2020 2020 7072 6576 696f 7573 5f74        previous_t
-0000fc40: 6167 203d 204e 6f6e 650a 2020 2020 2020  ag = None.      
-0000fc50: 2020 2020 2020 2020 2020 666f 7220 6c69            for li
-0000fc60: 6e65 2069 6e20 736f 7572 6365 3a0a 2020  ne in source:.  
-0000fc70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fc80: 2020 6966 206c 696e 6520 3d3d 2022 2220    if line == "" 
-0000fc90: 6f72 206c 696e 6520 3d3d 2022 5c6e 223a  or line == "\n":
-0000fca0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000fcb0: 2020 2020 2020 2020 2074 6172 6765 742e           target.
-0000fcc0: 7772 6974 6528 225c 6e22 290a 2020 2020  write("\n").    
-0000fcd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fce0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0000fcf0: 2020 2020 2020 2020 2020 2020 2020 746f                to
-0000fd00: 6b65 6e2c 2074 6167 203d 206c 696e 652e  ken, tag = line.
-0000fd10: 7370 6c69 7428 225c 7422 290a 2020 2020  split("\t").    
-0000fd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fd30: 2020 2020 7461 6720 3d20 7461 672e 7265      tag = tag.re
-0000fd40: 706c 6163 6528 225c 6e22 2c20 2222 290a  place("\n", "").
-0000fd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fd60: 2020 2020 2020 2020 6966 2074 6167 203d          if tag =
-0000fd70: 3d20 224f 223a 0a20 2020 2020 2020 2020  = "O":.         
-0000fd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fd90: 2020 2074 6172 6765 742e 7772 6974 6528     target.write(
-0000fda0: 746f 6b65 6e20 2b20 225c 7422 202b 2074  token + "\t" + t
-0000fdb0: 6167 202b 2022 5c6e 2229 0a20 2020 2020  ag + "\n").     
-0000fdc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fdd0: 2020 2065 6c69 6620 7072 6576 696f 7573     elif previous
-0000fde0: 5f74 6167 2021 3d20 7461 6720 616e 6420  _tag != tag and 
-0000fdf0: 7461 6720 213d 2022 4f22 3a0a 2020 2020  tag != "O":.    
-0000fe00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fe10: 2020 2020 2020 2020 7461 7267 6574 2e77          target.w
-0000fe20: 7269 7465 2874 6f6b 656e 202b 2022 5c74  rite(token + "\t
-0000fe30: 2220 2b20 2242 2d22 202b 2074 6167 202b  " + "B-" + tag +
-0000fe40: 2022 5c6e 2229 0a20 2020 2020 2020 2020   "\n").         
-0000fe50: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0000fe60: 6c69 6620 7072 6576 696f 7573 5f74 6167  lif previous_tag
-0000fe70: 203d 3d20 7461 6720 616e 6420 7461 6720   == tag and tag 
-0000fe80: 213d 2022 4f22 3a0a 2020 2020 2020 2020  != "O":.        
-0000fe90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fea0: 2020 2020 7461 7267 6574 2e77 7269 7465      target.write
-0000feb0: 2874 6f6b 656e 202b 2022 5c74 2220 2b20  (token + "\t" + 
-0000fec0: 2249 2d22 202b 2074 6167 202b 2022 5c6e  "I-" + tag + "\n
-0000fed0: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
-0000fee0: 2020 2020 2020 2020 2020 2070 7265 7669             previ
-0000fef0: 6f75 735f 7461 6720 3d20 7461 670a 0a0a  ous_tag = tag...
-0000ff00: 636c 6173 7320 4249 4f53 434f 5045 2843  class BIOSCOPE(C
-0000ff10: 6f6c 756d 6e43 6f72 7075 7329 3a0a 2020  olumnCorpus):.  
-0000ff20: 2020 6465 6620 5f5f 696e 6974 5f5f 280a    def __init__(.
-0000ff30: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
-0000ff40: 2020 2020 2020 6261 7365 5f70 6174 683a        base_path:
-0000ff50: 204f 7074 696f 6e61 6c5b 556e 696f 6e5b   Optional[Union[
-0000ff60: 7374 722c 2050 6174 685d 5d20 3d20 4e6f  str, Path]] = No
-0000ff70: 6e65 2c0a 2020 2020 2020 2020 696e 5f6d  ne,.        in_m
-0000ff80: 656d 6f72 793a 2062 6f6f 6c20 3d20 5472  emory: bool = Tr
-0000ff90: 7565 2c0a 2020 2020 2020 2020 2a2a 636f  ue,.        **co
-0000ffa0: 7270 7573 6172 6773 2c0a 2020 2020 2920  rpusargs,.    ) 
-0000ffb0: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
-0000ffc0: 2062 6173 655f 7061 7468 203d 206b 6f6c   base_path = kol
-0000ffd0: 6962 7269 2e63 6163 6865 5f72 6f6f 7420  ibri.cache_root 
-0000ffe0: 2f20 2264 6174 6173 6574 7322 2069 6620  / "datasets" if 
-0000fff0: 6e6f 7420 6261 7365 5f70 6174 6820 656c  not base_path el
-00010000: 7365 2050 6174 6828 6261 7365 5f70 6174  se Path(base_pat
-00010010: 6829 0a0a 2020 2020 2020 2020 2320 636f  h)..        # co
-00010020: 6c75 6d6e 2066 6f72 6d61 740a 2020 2020  lumn format.    
-00010030: 2020 2020 636f 6c75 6d6e 7320 3d20 7b30      columns = {0
-00010040: 3a20 2274 6578 7422 2c20 313a 2022 7461  : "text", 1: "ta
-00010050: 6722 7d0a 0a20 2020 2020 2020 2023 2074  g"}..        # t
-00010060: 6869 7320 6461 7461 7365 7420 6e61 6d65  his dataset name
-00010070: 0a20 2020 2020 2020 2064 6174 6173 6574  .        dataset
-00010080: 5f6e 616d 6520 3d20 7365 6c66 2e5f 5f63  _name = self.__c
-00010090: 6c61 7373 5f5f 2e5f 5f6e 616d 655f 5f2e  lass__.__name__.
-000100a0: 6c6f 7765 7228 290a 0a20 2020 2020 2020  lower()..       
-000100b0: 2064 6174 615f 666f 6c64 6572 203d 2062   data_folder = b
-000100c0: 6173 655f 7061 7468 202f 2064 6174 6173  ase_path / datas
-000100d0: 6574 5f6e 616d 650a 0a20 2020 2020 2020  et_name..       
-000100e0: 2023 2064 6f77 6e6c 6f61 6420 6461 7461   # download data
-000100f0: 2069 6620 6e65 6365 7373 6172 790a 2020   if necessary.  
-00010100: 2020 2020 2020 6269 6f73 636f 7065 5f70        bioscope_p
-00010110: 6174 6820 3d20 280a 2020 2020 2020 2020  ath = (.        
-00010120: 2020 2020 2268 7474 7073 3a2f 2f72 6177      "https://raw
-00010130: 2e67 6974 6875 6275 7365 7263 6f6e 7465  .githubuserconte
-00010140: 6e74 2e63 6f6d 2f77 686f 6973 6a6f 6e65  nt.com/whoisjone
-00010150: 732f 4269 6f53 636f 7065 5365 7175 656e  s/BioScopeSequen
-00010160: 6365 4c61 6265 6c69 6e67 4461 7461 2f6d  ceLabelingData/m
-00010170: 6173 7465 722f 7365 7175 656e 6365 5f6c  aster/sequence_l
-00010180: 6162 656c 6564 2f22 0a20 2020 2020 2020  abeled/".       
-00010190: 2029 0a20 2020 2020 2020 2063 6163 6865   ).        cache
-000101a0: 645f 7061 7468 2866 227b 6269 6f73 636f  d_path(f"{biosco
-000101b0: 7065 5f70 6174 687d 6f75 7470 7574 2e74  pe_path}output.t
-000101c0: 7874 222c 2050 6174 6828 2264 6174 6173  xt", Path("datas
-000101d0: 6574 7322 2920 2f20 6461 7461 7365 745f  ets") / dataset_
-000101e0: 6e61 6d65 290a 0a20 2020 2020 2020 2073  name)..        s
-000101f0: 7570 6572 2829 2e5f 5f69 6e69 745f 5f28  uper().__init__(
-00010200: 0a20 2020 2020 2020 2020 2020 2064 6174  .            dat
-00010210: 615f 666f 6c64 6572 2c0a 2020 2020 2020  a_folder,.      
-00010220: 2020 2020 2020 636f 6c75 6d6e 732c 0a20        columns,. 
-00010230: 2020 2020 2020 2020 2020 2069 6e5f 6d65             in_me
-00010240: 6d6f 7279 3d69 6e5f 6d65 6d6f 7279 2c0a  mory=in_memory,.
-00010250: 2020 2020 2020 2020 2020 2020 7472 6169              trai
-00010260: 6e5f 6669 6c65 3d22 6f75 7470 7574 2e74  n_file="output.t
-00010270: 7874 222c 0a20 2020 2020 2020 2020 2020  xt",.           
-00010280: 202a 2a63 6f72 7075 7361 7267 732c 0a20   **corpusargs,. 
-00010290: 2020 2020 2020 2029 0a0a 0a63 6c61 7373         )...class
-000102a0: 204e 4552 5f41 5241 4249 435f 414e 4552   NER_ARABIC_ANER
-000102b0: 2843 6f6c 756d 6e43 6f72 7075 7329 3a0a  (ColumnCorpus):.
-000102c0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-000102d0: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
-000102e0: 2020 2020 2020 2020 6261 7365 5f70 6174          base_pat
-000102f0: 683a 204f 7074 696f 6e61 6c5b 556e 696f  h: Optional[Unio
-00010300: 6e5b 7374 722c 2050 6174 685d 5d20 3d20  n[str, Path]] = 
-00010310: 4e6f 6e65 2c0a 2020 2020 2020 2020 696e  None,.        in
-00010320: 5f6d 656d 6f72 793a 2062 6f6f 6c20 3d20  _memory: bool = 
-00010330: 5472 7565 2c0a 2020 2020 2020 2020 646f  True,.        do
-00010340: 6375 6d65 6e74 5f61 735f 7365 7175 656e  cument_as_sequen
-00010350: 6365 3a20 626f 6f6c 203d 2046 616c 7365  ce: bool = False
-00010360: 2c0a 2020 2020 2020 2020 2a2a 636f 7270  ,.        **corp
-00010370: 7573 6172 6773 2c0a 2020 2020 2920 2d3e  usargs,.    ) ->
-00010380: 204e 6f6e 653a 0a20 2020 2020 2020 2022   None:.        "
-00010390: 2222 496e 6974 6961 6c69 7a65 2061 2070  ""Initialize a p
-000103a0: 7265 7072 6f63 6573 7365 6420 7665 7273  reprocessed vers
-000103b0: 696f 6e20 6f66 2074 6865 2041 7261 6269  ion of the Arabi
-000103c0: 6320 4e61 6d65 6420 456e 7469 7479 2052  c Named Entity R
-000103d0: 6563 6f67 6e69 7469 6f6e 2043 6f72 7075  ecognition Corpu
-000103e0: 7320 2841 4e45 5243 6f72 7029 2e0a 0a20  s (ANERCorp)... 
-000103f0: 2020 2020 2020 2054 6865 2064 6174 6173         The datas
-00010400: 6574 2069 7320 646f 776e 6c6f 6164 6564  et is downloaded
-00010410: 2066 726f 6d20 6874 7470 3a2f 2f63 7572   from http://cur
-00010420: 7469 732e 6d6c 2e63 6d75 2e65 6475 2f77  tis.ml.cmu.edu/w
-00010430: 2f63 6f75 7273 6573 2f69 6e64 6578 2e70  /courses/index.p
-00010440: 6870 2f41 4e45 5263 6f72 700a 2020 2020  hp/ANERcorp.    
-00010450: 2020 2020 436f 6c75 6d6e 206f 7264 6572      Column order
-00010460: 2069 7320 7377 6170 7065 640a 2020 2020   is swapped.    
-00010470: 2020 2020 5468 6520 6669 7273 7420 7469      The first ti
-00010480: 6d65 2079 6f75 2063 616c 6c20 7468 6973  me you call this
-00010490: 2063 6f6e 7374 7275 6374 6f72 2069 7420   constructor it 
-000104a0: 7769 6c6c 2061 7574 6f6d 6174 6963 616c  will automatical
-000104b0: 6c79 2064 6f77 6e6c 6f61 6420 7468 6520  ly download the 
-000104c0: 6461 7461 7365 742e 0a0a 2020 2020 2020  dataset...      
-000104d0: 2020 4172 6773 3a0a 2020 2020 2020 2020    Args:.        
-000104e0: 2020 2020 6261 7365 5f70 6174 683a 2044      base_path: D
-000104f0: 6566 6175 6c74 2069 7320 4e6f 6e65 2c20  efault is None, 
-00010500: 6d65 616e 696e 6720 7468 6174 2063 6f72  meaning that cor
-00010510: 7075 7320 6765 7473 2061 7574 6f2d 646f  pus gets auto-do
-00010520: 776e 6c6f 6164 6564 2061 6e64 206c 6f61  wnloaded and loa
-00010530: 6465 642e 2059 6f75 2063 616e 206f 7665  ded. You can ove
-00010540: 7272 6964 6520 7468 6973 2074 6f20 706f  rride this to po
-00010550: 696e 7420 746f 2061 2064 6966 6665 7265  int to a differe
-00010560: 6e74 2066 6f6c 6465 7220 6275 7420 7479  nt folder but ty
-00010570: 7069 6361 6c6c 7920 7468 6973 2073 686f  pically this sho
-00010580: 756c 6420 6e6f 7420 6265 206e 6563 6573  uld not be neces
-00010590: 7361 7279 2e0a 2020 2020 2020 2020 2020  sary..          
-000105a0: 2020 696e 5f6d 656d 6f72 793a 2049 6620    in_memory: If 
-000105b0: 5472 7565 2c20 6b65 6570 7320 6461 7461  True, keeps data
-000105c0: 7365 7420 696e 206d 656d 6f72 7920 6769  set in memory gi
-000105d0: 7669 6e67 2073 7065 6564 7570 7320 696e  ving speedups in
-000105e0: 2074 7261 696e 696e 672e 0a20 2020 2020   training..     
-000105f0: 2020 2020 2020 2064 6f63 756d 656e 745f         document_
-00010600: 6173 5f73 6571 7565 6e63 653a 2049 6620  as_sequence: If 
-00010610: 5472 7565 2c20 616c 6c20 7365 6e74 656e  True, all senten
-00010620: 6365 7320 6f66 2061 2064 6f63 756d 656e  ces of a documen
-00010630: 7420 6172 6520 7265 6164 2069 6e74 6f20  t are read into 
-00010640: 6120 7369 6e67 6c65 2053 656e 7465 6e63  a single Sentenc
-00010650: 6520 6f62 6a65 6374 0a20 2020 2020 2020  e object.       
-00010660: 2022 2222 0a20 2020 2020 2020 2062 6173   """.        bas
-00010670: 655f 7061 7468 203d 206b 6f6c 6962 7269  e_path = kolibri
-00010680: 2e63 6163 6865 5f72 6f6f 7420 2f20 2264  .cache_root / "d
-00010690: 6174 6173 6574 7322 2069 6620 6e6f 7420  atasets" if not 
-000106a0: 6261 7365 5f70 6174 6820 656c 7365 2050  base_path else P
-000106b0: 6174 6828 6261 7365 5f70 6174 6829 0a0a  ath(base_path)..
-000106c0: 2020 2020 2020 2020 2320 636f 6c75 6d6e          # column
-000106d0: 2066 6f72 6d61 740a 2020 2020 2020 2020   format.        
-000106e0: 636f 6c75 6d6e 7320 3d20 7b30 3a20 2274  columns = {0: "t
-000106f0: 6578 7422 2c20 313a 2022 6e65 7222 7d0a  ext", 1: "ner"}.
-00010700: 0a20 2020 2020 2020 2023 2074 6869 7320  .        # this 
-00010710: 6461 7461 7365 7420 6e61 6d65 0a20 2020  dataset name.   
-00010720: 2020 2020 2064 6174 6173 6574 5f6e 616d       dataset_nam
-00010730: 6520 3d20 7365 6c66 2e5f 5f63 6c61 7373  e = self.__class
-00010740: 5f5f 2e5f 5f6e 616d 655f 5f2e 6c6f 7765  __.__name__.lowe
-00010750: 7228 290a 0a20 2020 2020 2020 2023 2064  r()..        # d
-00010760: 6566 6175 6c74 2064 6174 6173 6574 2066  efault dataset f
-00010770: 6f6c 6465 7220 6973 2074 6865 2063 6163  older is the cac
-00010780: 6865 2072 6f6f 740a 2020 2020 2020 2020  he root.        
-00010790: 6966 206e 6f74 2062 6173 655f 7061 7468  if not base_path
-000107a0: 3a0a 2020 2020 2020 2020 2020 2020 6261  :.            ba
-000107b0: 7365 5f70 6174 6820 3d20 6b6f 6c69 6272  se_path = kolibr
-000107c0: 692e 6361 6368 655f 726f 6f74 202f 2022  i.cache_root / "
-000107d0: 6461 7461 7365 7473 220a 2020 2020 2020  datasets".      
-000107e0: 2020 6461 7461 5f66 6f6c 6465 7220 3d20    data_folder = 
-000107f0: 6261 7365 5f70 6174 6820 2f20 6461 7461  base_path / data
-00010800: 7365 745f 6e61 6d65 0a0a 2020 2020 2020  set_name..      
-00010810: 2020 2320 646f 776e 6c6f 6164 2064 6174    # download dat
-00010820: 6120 6966 206e 6563 6573 7361 7279 0a20  a if necessary. 
-00010830: 2020 2020 2020 2061 6e65 7263 6f72 705f         anercorp_
-00010840: 7061 7468 203d 2022 6874 7470 733a 2f2f  path = "https://
-00010850: 6d65 6761 6e74 6f73 682e 7333 2e65 752d  megantosh.s3.eu-
-00010860: 6365 6e74 7261 6c2d 312e 616d 617a 6f6e  central-1.amazon
-00010870: 6177 732e 636f 6d2f 414e 4552 636f 7270  aws.com/ANERcorp
-00010880: 2f22 0a20 2020 2020 2020 2023 2063 6163  /".        # cac
-00010890: 6865 645f 7061 7468 2866 227b 616e 6572  hed_path(f"{aner
-000108a0: 636f 7270 5f70 6174 687d 7465 7374 2e74  corp_path}test.t
-000108b0: 7874 222c 2050 6174 6828 2264 6174 6173  xt", Path("datas
-000108c0: 6574 7322 2920 2f20 6461 7461 7365 745f  ets") / dataset_
-000108d0: 6e61 6d65 290a 2020 2020 2020 2020 6361  name).        ca
-000108e0: 6368 6564 5f70 6174 6828 6622 7b61 6e65  ched_path(f"{ane
-000108f0: 7263 6f72 705f 7061 7468 7d74 7261 696e  rcorp_path}train
-00010900: 2e74 7874 222c 2050 6174 6828 2264 6174  .txt", Path("dat
-00010910: 6173 6574 7322 2920 2f20 6461 7461 7365  asets") / datase
-00010920: 745f 6e61 6d65 290a 0a20 2020 2020 2020  t_name)..       
-00010930: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
-00010940: 5f28 0a20 2020 2020 2020 2020 2020 2064  _(.            d
-00010950: 6174 615f 666f 6c64 6572 2c0a 2020 2020  ata_folder,.    
-00010960: 2020 2020 2020 2020 636f 6c75 6d6e 732c          columns,
-00010970: 0a20 2020 2020 2020 2020 2020 2065 6e63  .            enc
-00010980: 6f64 696e 673d 2275 7466 2d38 222c 0a20  oding="utf-8",. 
-00010990: 2020 2020 2020 2020 2020 2069 6e5f 6d65             in_me
-000109a0: 6d6f 7279 3d69 6e5f 6d65 6d6f 7279 2c0a  mory=in_memory,.
-000109b0: 2020 2020 2020 2020 2020 2020 646f 6375              docu
-000109c0: 6d65 6e74 5f73 6570 6172 6174 6f72 5f74  ment_separator_t
-000109d0: 6f6b 656e 3d4e 6f6e 6520 6966 206e 6f74  oken=None if not
-000109e0: 2064 6f63 756d 656e 745f 6173 5f73 6571   document_as_seq
-000109f0: 7565 6e63 6520 656c 7365 2022 2d44 4f43  uence else "-DOC
-00010a00: 5354 4152 542d 222c 0a20 2020 2020 2020  START-",.       
-00010a10: 2020 2020 202a 2a63 6f72 7075 7361 7267       **corpusarg
-00010a20: 732c 0a20 2020 2020 2020 2029 0a0a 0a63  s,.        )...c
-00010a30: 6c61 7373 204e 4552 5f41 5241 4249 435f  lass NER_ARABIC_
-00010a40: 4151 4d41 5228 436f 6c75 6d6e 436f 7270  AQMAR(ColumnCorp
-00010a50: 7573 293a 0a20 2020 2064 6566 205f 5f69  us):.    def __i
-00010a60: 6e69 745f 5f28 0a20 2020 2020 2020 2073  nit__(.        s
-00010a70: 656c 662c 0a20 2020 2020 2020 2062 6173  elf,.        bas
-00010a80: 655f 7061 7468 3a20 4f70 7469 6f6e 616c  e_path: Optional
-00010a90: 5b55 6e69 6f6e 5b73 7472 2c20 5061 7468  [Union[str, Path
-00010aa0: 5d5d 203d 204e 6f6e 652c 0a20 2020 2020  ]] = None,.     
-00010ab0: 2020 2069 6e5f 6d65 6d6f 7279 3a20 626f     in_memory: bo
-00010ac0: 6f6c 203d 2054 7275 652c 0a20 2020 2020  ol = True,.     
-00010ad0: 2020 2064 6f63 756d 656e 745f 6173 5f73     document_as_s
-00010ae0: 6571 7565 6e63 653a 2062 6f6f 6c20 3d20  equence: bool = 
-00010af0: 4661 6c73 652c 0a20 2020 2020 2020 202a  False,.        *
-00010b00: 2a63 6f72 7075 7361 7267 732c 0a20 2020  *corpusargs,.   
-00010b10: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-00010b20: 2020 2020 2222 2249 6e69 7469 616c 697a      """Initializ
-00010b30: 6520 6120 7072 6570 726f 6365 7373 6564  e a preprocessed
-00010b40: 2061 6e64 206d 6f64 6966 6965 6420 7665   and modified ve
-00010b50: 7273 696f 6e20 6f66 2074 6865 2041 6d65  rsion of the Ame
-00010b60: 7269 6361 6e20 616e 6420 5161 7461 7269  rican and Qatari
-00010b70: 204d 6f64 656c 696e 6720 6f66 2041 7261   Modeling of Ara
-00010b80: 6269 6320 2841 514d 4152 2920 6461 7461  bic (AQMAR) data
-00010b90: 7365 742e 0a0a 2020 2020 2020 2020 5468  set...        Th
-00010ba0: 6520 6461 7461 7365 7420 6973 2064 6f77  e dataset is dow
-00010bb0: 6e6c 6f61 6465 6420 6672 6f6d 2020 6874  nloaded from  ht
-00010bc0: 7470 3a2f 2f77 7777 2e63 732e 636d 752e  tp://www.cs.cmu.
-00010bd0: 6564 752f 7e61 726b 2f41 514d 4152 2f0a  edu/~ark/AQMAR/.
-00010be0: 0a20 2020 2020 2020 202d 204d 6f64 6966  .        - Modif
-00010bf0: 6963 6174 696f 6e73 2066 726f 6d20 6f72  ications from or
-00010c00: 6967 696e 616c 2064 6174 6173 6574 3a20  iginal dataset: 
-00010c10: 4d69 7363 656c 6c61 6e65 6f75 7320 7461  Miscellaneous ta
-00010c20: 6773 2028 4d49 5330 2c20 4d49 5331 2c20  gs (MIS0, MIS1, 
-00010c30: 4d49 5332 2c20 4d49 5333 2920 6172 6520  MIS2, MIS3) are 
-00010c40: 6d65 7267 6564 2074 6f20 6f6e 6520 7461  merged to one ta
-00010c50: 6720 224d 4953 4322 2061 7320 7468 6573  g "MISC" as thes
-00010c60: 6520 6361 7465 676f 7269 6573 2064 6576  e categories dev
-00010c70: 6961 7465 2061 6372 6f73 7320 7468 6520  iate across the 
-00010c80: 6f72 6967 696e 616c 2064 6174 6173 6574  original dataset
-00010c90: 0a20 2020 2020 2020 202d 2054 6865 2032  .        - The 2
-00010ca0: 3820 6f72 6967 696e 616c 2057 696b 6970  8 original Wikip
-00010cb0: 6564 6961 2061 7274 6963 6c65 7320 6172  edia articles ar
-00010cc0: 6520 6d65 7267 6564 2069 6e74 6f20 6120  e merged into a 
-00010cd0: 7369 6e67 6c65 2066 696c 6520 636f 6e74  single file cont
-00010ce0: 6169 6e69 6e67 2074 6865 2061 7274 6963  aining the artic
-00010cf0: 6c65 7320 696e 2061 6c70 6861 6265 7469  les in alphabeti
-00010d00: 6361 6c20 6f72 6465 720a 0a20 2020 2020  cal order..     
-00010d10: 2020 2054 6865 2066 6972 7374 2074 696d     The first tim
-00010d20: 6520 796f 7520 6361 6c6c 2074 6869 7320  e you call this 
-00010d30: 636f 6e73 7472 7563 746f 7220 6974 2077  constructor it w
-00010d40: 696c 6c20 6175 746f 6d61 7469 6361 6c6c  ill automaticall
-00010d50: 7920 646f 776e 6c6f 6164 2074 6865 2064  y download the d
-00010d60: 6174 6173 6574 2e0a 0a20 2020 2020 2020  ataset...       
-00010d70: 2054 6869 7320 6461 7461 7365 7420 6973   This dataset is
-00010d80: 206c 6963 656e 7365 6420 756e 6465 7220   licensed under 
-00010d90: 6120 4372 6561 7469 7665 2043 6f6d 6d6f  a Creative Commo
-00010da0: 6e73 2041 7474 7269 6275 7469 6f6e 2d53  ns Attribution-S
-00010db0: 6861 7265 416c 696b 6520 332e 3020 556e  hareAlike 3.0 Un
-00010dc0: 706f 7274 6564 204c 6963 656e 7365 2e0a  ported License..
-00010dd0: 2020 2020 2020 2020 706c 6561 7365 2063          please c
-00010de0: 6974 653a 2022 4265 6872 616e 6720 4d6f  ite: "Behrang Mo
-00010df0: 6869 742c 204e 6174 6861 6e20 5363 686e  hit, Nathan Schn
-00010e00: 6569 6465 722c 2052 6973 6861 7620 4268  eider, Rishav Bh
-00010e10: 6f77 6d69 636b 2c20 4b65 6d61 6c20 4f66  owmick, Kemal Of
-00010e20: 6c61 7a65 722c 2061 6e64 204e 6f61 6820  lazer, and Noah 
-00010e30: 412e 2053 6d69 7468 2028 3230 3132 292c  A. Smith (2012),
-00010e40: 0a20 2020 2020 2020 2052 6563 616c 6c2d  .        Recall-
-00010e50: 4f72 6965 6e74 6564 204c 6561 726e 696e  Oriented Learnin
-00010e60: 6720 6f66 204e 616d 6564 2045 6e74 6974  g of Named Entit
-00010e70: 6965 7320 696e 2041 7261 6269 6320 5769  ies in Arabic Wi
-00010e80: 6b69 7065 6469 612e 2050 726f 6365 6564  kipedia. Proceed
-00010e90: 696e 6773 206f 6620 4541 434c 2e22 0a0a  ings of EACL."..
-00010ea0: 2020 2020 2020 2020 3a70 6172 616d 2062          :param b
-00010eb0: 6173 655f 7061 7468 3a20 4465 6661 756c  ase_path: Defaul
-00010ec0: 7420 6973 204e 6f6e 652c 206d 6561 6e69  t is None, meani
-00010ed0: 6e67 2074 6861 7420 636f 7270 7573 2067  ng that corpus g
-00010ee0: 6574 7320 6175 746f 2d64 6f77 6e6c 6f61  ets auto-downloa
-00010ef0: 6465 6420 616e 6420 6c6f 6164 6564 2e20  ded and loaded. 
-00010f00: 596f 7520 6361 6e20 6f76 6572 7269 6465  You can override
-00010f10: 2074 6869 7320 746f 2070 6f69 6e74 2074   this to point t
-00010f20: 6f20 6120 6469 6666 6572 656e 7420 666f  o a different fo
-00010f30: 6c64 6572 2062 7574 2074 7970 6963 616c  lder but typical
-00010f40: 6c79 2074 6869 7320 7368 6f75 6c64 206e  ly this should n
-00010f50: 6f74 2062 6520 6e65 6365 7373 6172 792e  ot be necessary.
-00010f60: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00010f70: 696e 5f6d 656d 6f72 793a 2049 6620 5472  in_memory: If Tr
-00010f80: 7565 2c20 6b65 6570 7320 6461 7461 7365  ue, keeps datase
-00010f90: 7420 696e 206d 656d 6f72 7920 6769 7669  t in memory givi
-00010fa0: 6e67 2073 7065 6564 7570 7320 696e 2074  ng speedups in t
-00010fb0: 7261 696e 696e 672e 0a20 2020 2020 2020  raining..       
-00010fc0: 203a 7061 7261 6d20 646f 6375 6d65 6e74   :param document
-00010fd0: 5f61 735f 7365 7175 656e 6365 3a20 4966  _as_sequence: If
-00010fe0: 2054 7275 652c 2061 6c6c 2073 656e 7465   True, all sente
-00010ff0: 6e63 6573 206f 6620 6120 646f 6375 6d65  nces of a docume
-00011000: 6e74 2061 7265 2072 6561 6420 696e 746f  nt are read into
-00011010: 2061 2073 696e 676c 6520 5365 6e74 656e   a single Senten
-00011020: 6365 206f 626a 6563 740a 2020 2020 2020  ce object.      
-00011030: 2020 2222 220a 2020 2020 2020 2020 6261    """.        ba
-00011040: 7365 5f70 6174 6820 3d20 6b6f 6c69 6272  se_path = kolibr
-00011050: 692e 6361 6368 655f 726f 6f74 202f 2022  i.cache_root / "
-00011060: 6461 7461 7365 7473 2220 6966 206e 6f74  datasets" if not
-00011070: 2062 6173 655f 7061 7468 2065 6c73 6520   base_path else 
-00011080: 5061 7468 2862 6173 655f 7061 7468 290a  Path(base_path).
-00011090: 0a20 2020 2020 2020 2023 2063 6f6c 756d  .        # colum
-000110a0: 6e20 666f 726d 6174 0a20 2020 2020 2020  n format.       
-000110b0: 2063 6f6c 756d 6e73 203d 207b 303a 2022   columns = {0: "
-000110c0: 7465 7874 222c 2031 3a20 226e 6572 227d  text", 1: "ner"}
-000110d0: 0a0a 2020 2020 2020 2020 2320 7468 6973  ..        # this
-000110e0: 2064 6174 6173 6574 206e 616d 650a 2020   dataset name.  
-000110f0: 2020 2020 2020 6461 7461 7365 745f 6e61        dataset_na
-00011100: 6d65 203d 2073 656c 662e 5f5f 636c 6173  me = self.__clas
-00011110: 735f 5f2e 5f5f 6e61 6d65 5f5f 2e6c 6f77  s__.__name__.low
-00011120: 6572 2829 0a0a 2020 2020 2020 2020 2320  er()..        # 
-00011130: 6465 6661 756c 7420 6461 7461 7365 7420  default dataset 
-00011140: 666f 6c64 6572 2069 7320 7468 6520 6361  folder is the ca
-00011150: 6368 6520 726f 6f74 0a20 2020 2020 2020  che root.       
-00011160: 2069 6620 6e6f 7420 6261 7365 5f70 6174   if not base_pat
-00011170: 683a 0a20 2020 2020 2020 2020 2020 2062  h:.            b
-00011180: 6173 655f 7061 7468 203d 206b 6f6c 6962  ase_path = kolib
-00011190: 7269 2e63 6163 6865 5f72 6f6f 7420 2f20  ri.cache_root / 
-000111a0: 2264 6174 6173 6574 7322 0a20 2020 2020  "datasets".     
-000111b0: 2020 2064 6174 615f 666f 6c64 6572 203d     data_folder =
-000111c0: 2062 6173 655f 7061 7468 202f 2064 6174   base_path / dat
-000111d0: 6173 6574 5f6e 616d 650a 0a20 2020 2020  aset_name..     
-000111e0: 2020 2023 2064 6f77 6e6c 6f61 6420 6461     # download da
-000111f0: 7461 2069 6620 6e65 6365 7373 6172 790a  ta if necessary.
-00011200: 2020 2020 2020 2020 6171 6d61 725f 7061          aqmar_pa
-00011210: 7468 203d 2022 6874 7470 733a 2f2f 6d65  th = "https://me
-00011220: 6761 6e74 6f73 682e 7333 2e65 752d 6365  gantosh.s3.eu-ce
-00011230: 6e74 7261 6c2d 312e 616d 617a 6f6e 6177  ntral-1.amazonaw
-00011240: 732e 636f 6d2f 4151 4d41 522f 220a 2020  s.com/AQMAR/".  
-00011250: 2020 2020 2020 2320 6361 6368 6564 5f70        # cached_p
-00011260: 6174 6828 6622 7b61 6e65 7263 6f72 705f  ath(f"{anercorp_
-00011270: 7061 7468 7d74 6573 742e 7478 7422 2c20  path}test.txt", 
-00011280: 5061 7468 2822 6461 7461 7365 7473 2229  Path("datasets")
-00011290: 202f 2064 6174 6173 6574 5f6e 616d 6529   / dataset_name)
-000112a0: 0a20 2020 2020 2020 2063 6163 6865 645f  .        cached_
-000112b0: 7061 7468 2866 227b 6171 6d61 725f 7061  path(f"{aqmar_pa
-000112c0: 7468 7d74 7261 696e 2e74 7874 222c 2050  th}train.txt", P
-000112d0: 6174 6828 2264 6174 6173 6574 7322 2920  ath("datasets") 
-000112e0: 2f20 6461 7461 7365 745f 6e61 6d65 290a  / dataset_name).
-000112f0: 0a20 2020 2020 2020 2073 7570 6572 2829  .        super()
-00011300: 2e5f 5f69 6e69 745f 5f28 0a20 2020 2020  .__init__(.     
-00011310: 2020 2020 2020 2064 6174 615f 666f 6c64         data_fold
-00011320: 6572 2c0a 2020 2020 2020 2020 2020 2020  er,.            
-00011330: 636f 6c75 6d6e 732c 0a20 2020 2020 2020  columns,.       
-00011340: 2020 2020 2065 6e63 6f64 696e 673d 2275       encoding="u
-00011350: 7466 2d38 222c 0a20 2020 2020 2020 2020  tf-8",.         
-00011360: 2020 2069 6e5f 6d65 6d6f 7279 3d69 6e5f     in_memory=in_
-00011370: 6d65 6d6f 7279 2c0a 2020 2020 2020 2020  memory,.        
-00011380: 2020 2020 646f 6375 6d65 6e74 5f73 6570      document_sep
-00011390: 6172 6174 6f72 5f74 6f6b 656e 3d4e 6f6e  arator_token=Non
-000113a0: 6520 6966 206e 6f74 2064 6f63 756d 656e  e if not documen
-000113b0: 745f 6173 5f73 6571 7565 6e63 6520 656c  t_as_sequence el
-000113c0: 7365 2022 2d44 4f43 5354 4152 542d 222c  se "-DOCSTART-",
-000113d0: 0a20 2020 2020 2020 2020 2020 202a 2a63  .            **c
-000113e0: 6f72 7075 7361 7267 732c 0a20 2020 2020  orpusargs,.     
-000113f0: 2020 2029 0a0a 0a63 6c61 7373 204e 4552     )...class NER
-00011400: 5f42 4153 5155 4528 436f 6c75 6d6e 436f  _BASQUE(ColumnCo
-00011410: 7270 7573 293a 0a20 2020 2064 6566 205f  rpus):.    def _
-00011420: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
-00011430: 2073 656c 662c 0a20 2020 2020 2020 2062   self,.        b
-00011440: 6173 655f 7061 7468 3a20 4f70 7469 6f6e  ase_path: Option
-00011450: 616c 5b55 6e69 6f6e 5b73 7472 2c20 5061  al[Union[str, Pa
-00011460: 7468 5d5d 203d 204e 6f6e 652c 0a20 2020  th]] = None,.   
-00011470: 2020 2020 2069 6e5f 6d65 6d6f 7279 3a20       in_memory: 
-00011480: 626f 6f6c 203d 2054 7275 652c 0a20 2020  bool = True,.   
-00011490: 2020 2020 202a 2a63 6f72 7075 7361 7267       **corpusarg
-000114a0: 732c 0a20 2020 2029 202d 3e20 4e6f 6e65  s,.    ) -> None
-000114b0: 3a0a 2020 2020 2020 2020 6261 7365 5f70  :.        base_p
-000114c0: 6174 6820 3d20 6b6f 6c69 6272 692e 6361  ath = kolibri.ca
-000114d0: 6368 655f 726f 6f74 202f 2022 6461 7461  che_root / "data
-000114e0: 7365 7473 2220 6966 206e 6f74 2062 6173  sets" if not bas
-000114f0: 655f 7061 7468 2065 6c73 6520 5061 7468  e_path else Path
-00011500: 2862 6173 655f 7061 7468 290a 0a20 2020  (base_path)..   
-00011510: 2020 2020 2023 2063 6f6c 756d 6e20 666f       # column fo
-00011520: 726d 6174 0a20 2020 2020 2020 2063 6f6c  rmat.        col
-00011530: 756d 6e73 203d 207b 303a 2022 7465 7874  umns = {0: "text
-00011540: 222c 2031 3a20 226e 6572 227d 0a0a 2020  ", 1: "ner"}..  
-00011550: 2020 2020 2020 2320 7468 6973 2064 6174        # this dat
-00011560: 6173 6574 206e 616d 650a 2020 2020 2020  aset name.      
-00011570: 2020 6461 7461 7365 745f 6e61 6d65 203d    dataset_name =
-00011580: 2073 656c 662e 5f5f 636c 6173 735f 5f2e   self.__class__.
-00011590: 5f5f 6e61 6d65 5f5f 2e6c 6f77 6572 2829  __name__.lower()
-000115a0: 0a0a 2020 2020 2020 2020 6461 7461 5f66  ..        data_f
-000115b0: 6f6c 6465 7220 3d20 6261 7365 5f70 6174  older = base_pat
-000115c0: 6820 2f20 6461 7461 7365 745f 6e61 6d65  h / dataset_name
-000115d0: 0a0a 2020 2020 2020 2020 2320 646f 776e  ..        # down
-000115e0: 6c6f 6164 2064 6174 6120 6966 206e 6563  load data if nec
-000115f0: 6573 7361 7279 0a20 2020 2020 2020 206e  essary.        n
-00011600: 6572 5f62 6173 7175 655f 7061 7468 203d  er_basque_path =
-00011610: 2022 6874 7470 3a2f 2f69 7861 322e 7369   "http://ixa2.si
-00011620: 2e65 6875 2e65 7573 2f65 6965 632f 220a  .ehu.eus/eiec/".
-00011630: 2020 2020 2020 2020 6461 7461 5f70 6174          data_pat
-00011640: 6820 3d20 6b6f 6c69 6272 692e 6361 6368  h = kolibri.cach
-00011650: 655f 726f 6f74 202f 2022 6461 7461 7365  e_root / "datase
-00011660: 7473 2220 2f20 6461 7461 7365 745f 6e61  ts" / dataset_na
-00011670: 6d65 0a20 2020 2020 2020 2064 6174 615f  me.        data_
-00011680: 6669 6c65 203d 2064 6174 615f 7061 7468  file = data_path
-00011690: 202f 2022 6e61 6d65 645f 656e 745f 6575   / "named_ent_eu
-000116a0: 2e74 7261 696e 220a 2020 2020 2020 2020  .train".        
-000116b0: 6966 206e 6f74 2064 6174 615f 6669 6c65  if not data_file
-000116c0: 2e69 735f 6669 6c65 2829 3a0a 2020 2020  .is_file():.    
-000116d0: 2020 2020 2020 2020 6361 6368 6564 5f70          cached_p
-000116e0: 6174 6828 6622 7b6e 6572 5f62 6173 7175  ath(f"{ner_basqu
-000116f0: 655f 7061 7468 7d2f 6569 6563 5f76 312e  e_path}/eiec_v1.
-00011700: 302e 7467 7a22 2c20 5061 7468 2822 6461  0.tgz", Path("da
-00011710: 7461 7365 7473 2229 202f 2064 6174 6173  tasets") / datas
-00011720: 6574 5f6e 616d 6529 0a20 2020 2020 2020  et_name).       
-00011730: 2020 2020 2069 6d70 6f72 7420 7368 7574       import shut
-00011740: 696c 0a20 2020 2020 2020 2020 2020 2069  il.            i
-00011750: 6d70 6f72 7420 7461 7266 696c 650a 0a20  mport tarfile.. 
-00011760: 2020 2020 2020 2020 2020 2077 6974 6820             with 
-00011770: 7461 7266 696c 652e 6f70 656e 280a 2020  tarfile.open(.  
-00011780: 2020 2020 2020 2020 2020 2020 2020 6b6f                ko
-00011790: 6c69 6272 692e 6361 6368 655f 726f 6f74  libri.cache_root
-000117a0: 202f 2022 6461 7461 7365 7473 2220 2f20   / "datasets" / 
-000117b0: 6461 7461 7365 745f 6e61 6d65 202f 2022  dataset_name / "
-000117c0: 6569 6563 5f76 312e 302e 7467 7a22 2c0a  eiec_v1.0.tgz",.
-000117d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000117e0: 2272 3a67 7a22 2c0a 2020 2020 2020 2020  "r:gz",.        
-000117f0: 2020 2020 2920 6173 2066 5f69 6e3a 0a20      ) as f_in:. 
-00011800: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00011810: 6f72 7075 735f 6669 6c65 7320 3d20 280a  orpus_files = (.
-00011820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011830: 2020 2020 2265 6965 635f 7631 2e30 2f6e      "eiec_v1.0/n
-00011840: 616d 6564 5f65 6e74 5f65 752e 7472 6169  amed_ent_eu.trai
-00011850: 6e22 2c0a 2020 2020 2020 2020 2020 2020  n",.            
-00011860: 2020 2020 2020 2020 2265 6965 635f 7631          "eiec_v1
-00011870: 2e30 2f6e 616d 6564 5f65 6e74 5f65 752e  .0/named_ent_eu.
-00011880: 7465 7374 222c 0a20 2020 2020 2020 2020  test",.         
-00011890: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-000118a0: 2020 2020 2020 2020 2066 6f72 2063 6f72           for cor
-000118b0: 7075 735f 6669 6c65 2069 6e20 636f 7270  pus_file in corp
-000118c0: 7573 5f66 696c 6573 3a0a 2020 2020 2020  us_files:.      
-000118d0: 2020 2020 2020 2020 2020 2020 2020 665f                f_
-000118e0: 696e 2e65 7874 7261 6374 2863 6f72 7075  in.extract(corpu
-000118f0: 735f 6669 6c65 2c20 6461 7461 5f70 6174  s_file, data_pat
-00011900: 6829 0a20 2020 2020 2020 2020 2020 2020  h).             
-00011910: 2020 2020 2020 2073 6875 7469 6c2e 6d6f         shutil.mo
-00011920: 7665 2866 227b 6461 7461 5f70 6174 687d  ve(f"{data_path}
-00011930: 2f7b 636f 7270 7573 5f66 696c 657d 222c  /{corpus_file}",
-00011940: 2064 6174 615f 7061 7468 290a 0a20 2020   data_path)..   
-00011950: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
-00011960: 6e69 745f 5f28 0a20 2020 2020 2020 2020  nit__(.         
-00011970: 2020 2064 6174 615f 666f 6c64 6572 2c0a     data_folder,.
-00011980: 2020 2020 2020 2020 2020 2020 636f 6c75              colu
-00011990: 6d6e 732c 0a20 2020 2020 2020 2020 2020  mns,.           
-000119a0: 2069 6e5f 6d65 6d6f 7279 3d69 6e5f 6d65   in_memory=in_me
-000119b0: 6d6f 7279 2c0a 2020 2020 2020 2020 2020  mory,.          
-000119c0: 2020 2a2a 636f 7270 7573 6172 6773 2c0a    **corpusargs,.
-000119d0: 2020 2020 2020 2020 290a 0a0a 636c 6173          )...clas
-000119e0: 7320 4e45 525f 4348 494e 4553 455f 5745  s NER_CHINESE_WE
-000119f0: 4942 4f28 436f 6c75 6d6e 436f 7270 7573  IBO(ColumnCorpus
-00011a00: 293a 0a20 2020 2064 6566 205f 5f69 6e69  ):.    def __ini
-00011a10: 745f 5f28 0a20 2020 2020 2020 2073 656c  t__(.        sel
-00011a20: 662c 0a20 2020 2020 2020 2062 6173 655f  f,.        base_
-00011a30: 7061 7468 3a20 4f70 7469 6f6e 616c 5b55  path: Optional[U
-00011a40: 6e69 6f6e 5b73 7472 2c20 5061 7468 5d5d  nion[str, Path]]
-00011a50: 203d 204e 6f6e 652c 0a20 2020 2020 2020   = None,.       
-00011a60: 2069 6e5f 6d65 6d6f 7279 3a20 626f 6f6c   in_memory: bool
-00011a70: 203d 2054 7275 652c 0a20 2020 2020 2020   = True,.       
-00011a80: 2064 6f63 756d 656e 745f 6173 5f73 6571   document_as_seq
-00011a90: 7565 6e63 653a 2062 6f6f 6c20 3d20 4661  uence: bool = Fa
-00011aa0: 6c73 652c 0a20 2020 2020 2020 202a 2a63  lse,.        **c
-00011ab0: 6f72 7075 7361 7267 732c 0a20 2020 2029  orpusargs,.    )
-00011ac0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-00011ad0: 2020 2222 2249 6e69 7469 616c 697a 6520    """Initialize 
-00011ae0: 7468 6520 5745 4942 4f5f 4e45 5220 636f  the WEIBO_NER co
-00011af0: 7270 7573 2e0a 0a20 2020 2020 2020 2054  rpus...        T
-00011b00: 6865 2066 6972 7374 2074 696d 6520 796f  he first time yo
-00011b10: 7520 6361 6c6c 2074 6869 7320 636f 6e73  u call this cons
-00011b20: 7472 7563 746f 7220 6974 2077 696c 6c20  tructor it will 
-00011b30: 6175 746f 6d61 7469 6361 6c6c 7920 646f  automatically do
-00011b40: 776e 6c6f 6164 2074 6865 2064 6174 6173  wnload the datas
-00011b50: 6574 2e0a 0a20 2020 2020 2020 2041 7267  et...        Arg
-00011b60: 733a 0a20 2020 2020 2020 2020 2020 2062  s:.            b
-00011b70: 6173 655f 7061 7468 3a20 4465 6661 756c  ase_path: Defaul
-00011b80: 7420 6973 204e 6f6e 652c 206d 6561 6e69  t is None, meani
-00011b90: 6e67 2074 6861 7420 636f 7270 7573 2067  ng that corpus g
-00011ba0: 6574 7320 6175 746f 2d64 6f77 6e6c 6f61  ets auto-downloa
-00011bb0: 6465 6420 616e 6420 6c6f 6164 6564 2e20  ded and loaded. 
-00011bc0: 596f 7520 6361 6e20 6f76 6572 7269 6465  You can override
-00011bd0: 2074 6869 7320 746f 2070 6f69 6e74 2074   this to point t
-00011be0: 6f20 6120 6469 6666 6572 656e 7420 666f  o a different fo
-00011bf0: 6c64 6572 2062 7574 2074 7970 6963 616c  lder but typical
-00011c00: 6c79 2074 6869 7320 7368 6f75 6c64 206e  ly this should n
-00011c10: 6f74 2062 6520 6e65 6365 7373 6172 792e  ot be necessary.
-00011c20: 0a20 2020 2020 2020 2020 2020 2069 6e5f  .            in_
-00011c30: 6d65 6d6f 7279 3a20 4966 2054 7275 652c  memory: If True,
-00011c40: 206b 6565 7073 2064 6174 6173 6574 2069   keeps dataset i
-00011c50: 6e20 6d65 6d6f 7279 2067 6976 696e 6720  n memory giving 
-00011c60: 7370 6565 6475 7073 2069 6e20 7472 6169  speedups in trai
-00011c70: 6e69 6e67 2e0a 2020 2020 2020 2020 2020  ning..          
-00011c80: 2020 646f 6375 6d65 6e74 5f61 735f 7365    document_as_se
-00011c90: 7175 656e 6365 3a20 4966 2054 7275 652c  quence: If True,
-00011ca0: 2061 6c6c 2073 656e 7465 6e63 6573 206f   all sentences o
-00011cb0: 6620 6120 646f 6375 6d65 6e74 2061 7265  f a document are
-00011cc0: 2072 6561 6420 696e 746f 2061 2073 696e   read into a sin
-00011cd0: 676c 6520 5365 6e74 656e 6365 206f 626a  gle Sentence obj
-00011ce0: 6563 740a 2020 2020 2020 2020 2222 220a  ect.        """.
-00011cf0: 2020 2020 2020 2020 6261 7365 5f70 6174          base_pat
-00011d00: 6820 3d20 6b6f 6c69 6272 692e 6361 6368  h = kolibri.cach
-00011d10: 655f 726f 6f74 202f 2022 6461 7461 7365  e_root / "datase
-00011d20: 7473 2220 6966 206e 6f74 2062 6173 655f  ts" if not base_
-00011d30: 7061 7468 2065 6c73 6520 5061 7468 2862  path else Path(b
-00011d40: 6173 655f 7061 7468 290a 0a20 2020 2020  ase_path)..     
-00011d50: 2020 2023 2063 6f6c 756d 6e20 666f 726d     # column form
-00011d60: 6174 0a20 2020 2020 2020 2063 6f6c 756d  at.        colum
-00011d70: 6e73 203d 207b 303a 2022 7465 7874 222c  ns = {0: "text",
-00011d80: 2031 3a20 226e 6572 227d 0a0a 2020 2020   1: "ner"}..    
-00011d90: 2020 2020 2320 7468 6973 2064 6174 6173      # this datas
-00011da0: 6574 206e 616d 650a 2020 2020 2020 2020  et name.        
-00011db0: 6461 7461 7365 745f 6e61 6d65 203d 2073  dataset_name = s
-00011dc0: 656c 662e 5f5f 636c 6173 735f 5f2e 5f5f  elf.__class__.__
-00011dd0: 6e61 6d65 5f5f 2e6c 6f77 6572 2829 0a0a  name__.lower()..
-00011de0: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
-00011df0: 6465 7220 3d20 6261 7365 5f70 6174 6820  der = base_path 
-00011e00: 2f20 6461 7461 7365 745f 6e61 6d65 0a0a  / dataset_name..
-00011e10: 2020 2020 2020 2020 2320 646f 776e 6c6f          # downlo
-00011e20: 6164 2064 6174 6120 6966 206e 6563 6573  ad data if neces
-00011e30: 7361 7279 0a20 2020 2020 2020 2077 6569  sary.        wei
-00011e40: 626f 4e45 525f 636f 6e6c 6c5f 7061 7468  boNER_conll_path
-00011e50: 203d 2022 6874 7470 733a 2f2f 7261 772e   = "https://raw.
-00011e60: 6769 7468 7562 7573 6572 636f 6e74 656e  githubuserconten
-00011e70: 742e 636f 6d2f 3837 3330 3233 3830 2f57  t.com/87302380/W
-00011e80: 4549 424f 5f4e 4552 2f6d 6169 6e2f 6461  EIBO_NER/main/da
-00011e90: 7461 2f22 0a20 2020 2020 2020 2063 6163  ta/".        cac
-00011ea0: 6865 645f 7061 7468 280a 2020 2020 2020  hed_path(.      
-00011eb0: 2020 2020 2020 6622 7b77 6569 626f 4e45        f"{weiboNE
-00011ec0: 525f 636f 6e6c 6c5f 7061 7468 7d77 6569  R_conll_path}wei
-00011ed0: 626f 4e45 525f 326e 645f 636f 6e6c 6c5f  boNER_2nd_conll_
-00011ee0: 666f 726d 6174 2e74 7261 696e 222c 0a20  format.train",. 
-00011ef0: 2020 2020 2020 2020 2020 2050 6174 6828             Path(
-00011f00: 2264 6174 6173 6574 7322 2920 2f20 6461  "datasets") / da
-00011f10: 7461 7365 745f 6e61 6d65 2c0a 2020 2020  taset_name,.    
-00011f20: 2020 2020 290a 2020 2020 2020 2020 6361      ).        ca
-00011f30: 6368 6564 5f70 6174 6828 0a20 2020 2020  ched_path(.     
-00011f40: 2020 2020 2020 2066 227b 7765 6962 6f4e         f"{weiboN
-00011f50: 4552 5f63 6f6e 6c6c 5f70 6174 687d 7765  ER_conll_path}we
-00011f60: 6962 6f4e 4552 5f32 6e64 5f63 6f6e 6c6c  iboNER_2nd_conll
-00011f70: 5f66 6f72 6d61 742e 7465 7374 222c 0a20  _format.test",. 
-00011f80: 2020 2020 2020 2020 2020 2050 6174 6828             Path(
-00011f90: 2264 6174 6173 6574 7322 2920 2f20 6461  "datasets") / da
-00011fa0: 7461 7365 745f 6e61 6d65 2c0a 2020 2020  taset_name,.    
-00011fb0: 2020 2020 290a 2020 2020 2020 2020 6361      ).        ca
-00011fc0: 6368 6564 5f70 6174 6828 0a20 2020 2020  ched_path(.     
-00011fd0: 2020 2020 2020 2066 227b 7765 6962 6f4e         f"{weiboN
-00011fe0: 4552 5f63 6f6e 6c6c 5f70 6174 687d 7765  ER_conll_path}we
-00011ff0: 6962 6f4e 4552 5f32 6e64 5f63 6f6e 6c6c  iboNER_2nd_conll
-00012000: 5f66 6f72 6d61 742e 6465 7622 2c0a 2020  _format.dev",.  
-00012010: 2020 2020 2020 2020 2020 5061 7468 2822            Path("
-00012020: 6461 7461 7365 7473 2229 202f 2064 6174  datasets") / dat
-00012030: 6173 6574 5f6e 616d 652c 0a20 2020 2020  aset_name,.     
-00012040: 2020 2029 0a0a 2020 2020 2020 2020 7375     )..        su
-00012050: 7065 7228 292e 5f5f 696e 6974 5f5f 280a  per().__init__(.
-00012060: 2020 2020 2020 2020 2020 2020 6461 7461              data
-00012070: 5f66 6f6c 6465 722c 0a20 2020 2020 2020  _folder,.       
-00012080: 2020 2020 2063 6f6c 756d 6e73 2c0a 2020       columns,.  
-00012090: 2020 2020 2020 2020 2020 656e 636f 6469            encodi
-000120a0: 6e67 3d22 7574 662d 3822 2c0a 2020 2020  ng="utf-8",.    
-000120b0: 2020 2020 2020 2020 696e 5f6d 656d 6f72          in_memor
-000120c0: 793d 696e 5f6d 656d 6f72 792c 0a20 2020  y=in_memory,.   
-000120d0: 2020 2020 2020 2020 2074 7261 696e 5f66           train_f
-000120e0: 696c 653d 2277 6569 626f 4e45 525f 326e  ile="weiboNER_2n
-000120f0: 645f 636f 6e6c 6c5f 666f 726d 6174 2e74  d_conll_format.t
-00012100: 7261 696e 222c 0a20 2020 2020 2020 2020  rain",.         
-00012110: 2020 2074 6573 745f 6669 6c65 3d22 7765     test_file="we
-00012120: 6962 6f4e 4552 5f32 6e64 5f63 6f6e 6c6c  iboNER_2nd_conll
-00012130: 5f66 6f72 6d61 742e 7465 7374 222c 0a20  _format.test",. 
-00012140: 2020 2020 2020 2020 2020 2064 6576 5f66             dev_f
-00012150: 696c 653d 2277 6569 626f 4e45 525f 326e  ile="weiboNER_2n
-00012160: 645f 636f 6e6c 6c5f 666f 726d 6174 2e64  d_conll_format.d
-00012170: 6576 222c 0a20 2020 2020 2020 2020 2020  ev",.           
-00012180: 2064 6f63 756d 656e 745f 7365 7061 7261   document_separa
-00012190: 746f 725f 746f 6b65 6e3d 4e6f 6e65 2069  tor_token=None i
-000121a0: 6620 6e6f 7420 646f 6375 6d65 6e74 5f61  f not document_a
-000121b0: 735f 7365 7175 656e 6365 2065 6c73 6520  s_sequence else 
-000121c0: 222d 444f 4353 5441 5254 2d22 2c0a 2020  "-DOCSTART-",.  
-000121d0: 2020 2020 2020 2020 2020 2a2a 636f 7270            **corp
-000121e0: 7573 6172 6773 2c0a 2020 2020 2020 2020  usargs,.        
-000121f0: 290a 0a0a 636c 6173 7320 4e45 525f 4441  )...class NER_DA
-00012200: 4e49 5348 5f44 414e 4528 436f 6c75 6d6e  NISH_DANE(Column
-00012210: 436f 7270 7573 293a 0a20 2020 2064 6566  Corpus):.    def
-00012220: 205f 5f69 6e69 745f 5f28 0a20 2020 2020   __init__(.     
-00012230: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
-00012240: 2062 6173 655f 7061 7468 3a20 4f70 7469   base_path: Opti
-00012250: 6f6e 616c 5b55 6e69 6f6e 5b73 7472 2c20  onal[Union[str, 
-00012260: 5061 7468 5d5d 203d 204e 6f6e 652c 0a20  Path]] = None,. 
-00012270: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
-00012280: 3a20 626f 6f6c 203d 2054 7275 652c 0a20  : bool = True,. 
-00012290: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
-000122a0: 7267 732c 0a20 2020 2029 202d 3e20 4e6f  rgs,.    ) -> No
-000122b0: 6e65 3a0a 2020 2020 2020 2020 6261 7365  ne:.        base
-000122c0: 5f70 6174 6820 3d20 6b6f 6c69 6272 692e  _path = kolibri.
-000122d0: 6361 6368 655f 726f 6f74 202f 2022 6461  cache_root / "da
-000122e0: 7461 7365 7473 2220 6966 206e 6f74 2062  tasets" if not b
-000122f0: 6173 655f 7061 7468 2065 6c73 6520 5061  ase_path else Pa
-00012300: 7468 2862 6173 655f 7061 7468 290a 0a20  th(base_path).. 
-00012310: 2020 2020 2020 2023 2063 6f6c 756d 6e20         # column 
-00012320: 666f 726d 6174 0a20 2020 2020 2020 2063  format.        c
-00012330: 6f6c 756d 6e73 203d 207b 313a 2022 7465  olumns = {1: "te
-00012340: 7874 222c 2033 3a20 2270 6f73 222c 2039  xt", 3: "pos", 9
-00012350: 3a20 226e 6572 227d 0a0a 2020 2020 2020  : "ner"}..      
-00012360: 2020 2320 7468 6973 2064 6174 6173 6574    # this dataset
-00012370: 206e 616d 650a 2020 2020 2020 2020 6461   name.        da
-00012380: 7461 7365 745f 6e61 6d65 203d 2073 656c  taset_name = sel
-00012390: 662e 5f5f 636c 6173 735f 5f2e 5f5f 6e61  f.__class__.__na
-000123a0: 6d65 5f5f 2e6c 6f77 6572 2829 0a0a 2020  me__.lower()..  
-000123b0: 2020 2020 2020 6461 7461 5f66 6f6c 6465        data_folde
-000123c0: 7220 3d20 6261 7365 5f70 6174 6820 2f20  r = base_path / 
-000123d0: 6461 7461 7365 745f 6e61 6d65 0a0a 2020  dataset_name..  
-000123e0: 2020 2020 2020 2320 646f 776e 6c6f 6164        # download
-000123f0: 2064 6174 6120 6966 206e 6563 6573 7361   data if necessa
-00012400: 7279 0a20 2020 2020 2020 2064 6174 615f  ry.        data_
-00012410: 7061 7468 203d 206b 6f6c 6962 7269 2e63  path = kolibri.c
-00012420: 6163 6865 5f72 6f6f 7420 2f20 2264 6174  ache_root / "dat
-00012430: 6173 6574 7322 202f 2064 6174 6173 6574  asets" / dataset
-00012440: 5f6e 616d 650a 2020 2020 2020 2020 7472  _name.        tr
-00012450: 6169 6e5f 6461 7461 5f66 696c 6520 3d20  ain_data_file = 
-00012460: 6461 7461 5f70 6174 6820 2f20 2264 6474  data_path / "ddt
-00012470: 2e74 7261 696e 2e63 6f6e 6c6c 7522 0a20  .train.conllu". 
-00012480: 2020 2020 2020 2069 6620 6e6f 7420 7472         if not tr
-00012490: 6169 6e5f 6461 7461 5f66 696c 652e 6973  ain_data_file.is
-000124a0: 5f66 696c 6528 293a 0a20 2020 2020 2020  _file():.       
-000124b0: 2020 2020 2074 656d 705f 6669 6c65 203d       temp_file =
-000124c0: 2063 6163 6865 645f 7061 7468 280a 2020   cached_path(.  
-000124d0: 2020 2020 2020 2020 2020 2020 2020 2268                "h
-000124e0: 7474 7073 3a2f 2f64 616e 6c70 2e61 6c65  ttps://danlp.ale
-000124f0: 7861 6e64 7261 2e64 6b2f 3330 3462 6431  xandra.dk/304bd1
-00012500: 3539 6435 6465 2f64 6174 6173 6574 732f  59d5de/datasets/
-00012510: 6464 742e 7a69 7022 2c0a 2020 2020 2020  ddt.zip",.      
-00012520: 2020 2020 2020 2020 2020 5061 7468 2822            Path("
-00012530: 6461 7461 7365 7473 2229 202f 2064 6174  datasets") / dat
-00012540: 6173 6574 5f6e 616d 652c 0a20 2020 2020  aset_name,.     
-00012550: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00012560: 2020 2020 2066 726f 6d20 7a69 7066 696c       from zipfil
-00012570: 6520 696d 706f 7274 205a 6970 4669 6c65  e import ZipFile
-00012580: 0a0a 2020 2020 2020 2020 2020 2020 7769  ..            wi
-00012590: 7468 205a 6970 4669 6c65 2874 656d 705f  th ZipFile(temp_
-000125a0: 6669 6c65 2c20 2272 2229 2061 7320 7a69  file, "r") as zi
-000125b0: 705f 6669 6c65 3a0a 2020 2020 2020 2020  p_file:.        
-000125c0: 2020 2020 2020 2020 7a69 705f 6669 6c65          zip_file
-000125d0: 2e65 7874 7261 6374 616c 6c28 7061 7468  .extractall(path
-000125e0: 3d64 6174 615f 7061 7468 290a 0a20 2020  =data_path)..   
-000125f0: 2020 2020 2020 2020 2023 2052 656d 6f76           # Remov
-00012600: 6520 436f 4e4c 4c2d 5520 6d65 7461 2069  e CoNLL-U meta i
-00012610: 6e66 6f72 6d61 7469 6f6e 2069 6e20 7468  nformation in th
-00012620: 6520 6c61 7374 2063 6f6c 756d 6e0a 2020  e last column.  
-00012630: 2020 2020 2020 2020 2020 666f 7220 7061            for pa
-00012640: 7274 2069 6e20 5b22 7472 6169 6e22 2c20  rt in ["train", 
-00012650: 2264 6576 222c 2022 7465 7374 225d 3a0a  "dev", "test"]:.
-00012660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012670: 6c69 6e65 7320 3d20 5b5d 0a20 2020 2020  lines = [].     
-00012680: 2020 2020 2020 2020 2020 2064 6174 615f             data_
-00012690: 6669 6c65 203d 2066 2264 6474 2e7b 7061  file = f"ddt.{pa
-000126a0: 7274 7d2e 636f 6e6c 6c75 220a 2020 2020  rt}.conllu".    
-000126b0: 2020 2020 2020 2020 2020 2020 7769 7468              with
-000126c0: 206f 7065 6e28 6461 7461 5f70 6174 6820   open(data_path 
-000126d0: 2f20 6461 7461 5f66 696c 6529 2061 7320  / data_file) as 
-000126e0: 6669 6c65 3a0a 2020 2020 2020 2020 2020  file:.          
-000126f0: 2020 2020 2020 2020 2020 666f 7220 6c69            for li
-00012700: 6e65 2069 6e20 6669 6c65 3a0a 2020 2020  ne in file:.    
-00012710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012720: 2020 2020 6966 206c 696e 652e 7374 6172      if line.star
-00012730: 7473 7769 7468 2822 2322 2920 6f72 206c  tswith("#") or l
-00012740: 696e 6520 3d3d 2022 5c6e 223a 0a20 2020  ine == "\n":.   
-00012750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012760: 2020 2020 2020 2020 206c 696e 6573 2e61           lines.a
-00012770: 7070 656e 6428 6c69 6e65 290a 2020 2020  ppend(line).    
-00012780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012790: 2020 2020 6c69 6e65 732e 6170 7065 6e64      lines.append
-000127a0: 286c 696e 652e 7265 706c 6163 6528 226e  (line.replace("n
-000127b0: 616d 653d 222c 2022 2229 2e72 6570 6c61  ame=", "").repla
-000127c0: 6365 2822 7c53 7061 6365 4166 7465 723d  ce("|SpaceAfter=
-000127d0: 4e6f 222c 2022 2229 290a 0a20 2020 2020  No", ""))..     
-000127e0: 2020 2020 2020 2020 2020 2077 6974 6820             with 
-000127f0: 6f70 656e 2864 6174 615f 7061 7468 202f  open(data_path /
-00012800: 2064 6174 615f 6669 6c65 2c20 2277 2229   data_file, "w")
-00012810: 2061 7320 6669 6c65 3a0a 2020 2020 2020   as file:.      
-00012820: 2020 2020 2020 2020 2020 2020 2020 6669                fi
-00012830: 6c65 2e77 7269 7465 6c69 6e65 7328 6c69  le.writelines(li
-00012840: 6e65 7329 0a0a 2020 2020 2020 2020 7375  nes)..        su
-00012850: 7065 7228 292e 5f5f 696e 6974 5f5f 280a  per().__init__(.
-00012860: 2020 2020 2020 2020 2020 2020 6461 7461              data
-00012870: 5f66 6f6c 6465 722c 0a20 2020 2020 2020  _folder,.       
-00012880: 2020 2020 2063 6f6c 756d 6e73 2c0a 2020       columns,.  
-00012890: 2020 2020 2020 2020 2020 696e 5f6d 656d            in_mem
-000128a0: 6f72 793d 696e 5f6d 656d 6f72 792c 0a20  ory=in_memory,. 
-000128b0: 2020 2020 2020 2020 2020 2063 6f6d 6d65             comme
-000128c0: 6e74 5f73 796d 626f 6c3d 2223 222c 0a20  nt_symbol="#",. 
-000128d0: 2020 2020 2020 2020 2020 202a 2a63 6f72             **cor
-000128e0: 7075 7361 7267 732c 0a20 2020 2020 2020  pusargs,.       
-000128f0: 2029 0a0a 0a63 6c61 7373 204e 4552 5f45   )...class NER_E
-00012900: 4e47 4c49 5348 5f4d 4f56 4945 5f53 494d  NGLISH_MOVIE_SIM
-00012910: 504c 4528 436f 6c75 6d6e 436f 7270 7573  PLE(ColumnCorpus
-00012920: 293a 0a20 2020 2064 6566 205f 5f69 6e69  ):.    def __ini
-00012930: 745f 5f28 0a20 2020 2020 2020 2073 656c  t__(.        sel
-00012940: 662c 0a20 2020 2020 2020 2062 6173 655f  f,.        base_
-00012950: 7061 7468 3a20 4f70 7469 6f6e 616c 5b55  path: Optional[U
-00012960: 6e69 6f6e 5b73 7472 2c20 5061 7468 5d5d  nion[str, Path]]
-00012970: 203d 204e 6f6e 652c 0a20 2020 2020 2020   = None,.       
-00012980: 2069 6e5f 6d65 6d6f 7279 3a20 626f 6f6c   in_memory: bool
-00012990: 203d 2054 7275 652c 0a20 2020 2020 2020   = True,.       
-000129a0: 202a 2a63 6f72 7075 7361 7267 732c 0a20   **corpusargs,. 
-000129b0: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
-000129c0: 2020 2020 2020 2222 2249 6e69 7469 616c        """Initial
-000129d0: 697a 6520 7468 6520 656e 6720 636f 7270  ize the eng corp
-000129e0: 7573 206f 6620 7468 6520 4d49 5420 4d6f  us of the MIT Mo
-000129f0: 7669 6520 436f 7270 7573 2e0a 0a20 2020  vie Corpus...   
-00012a00: 2020 2020 2054 6865 2066 6972 7374 2074       The first t
-00012a10: 696d 6520 796f 7520 6361 6c6c 2074 6869  ime you call thi
-00012a20: 7320 636f 6e73 7472 7563 746f 7220 6974  s constructor it
-00012a30: 2077 696c 6c20 6175 746f 6d61 7469 6361   will automatica
-00012a40: 6c6c 7920 646f 776e 6c6f 6164 2074 6865  lly download the
-00012a50: 2064 6174 6173 6574 2e0a 0a20 2020 2020   dataset...     
-00012a60: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
-00012a70: 2020 2020 2062 6173 655f 7061 7468 3a20       base_path: 
-00012a80: 4465 6661 756c 7420 6973 204e 6f6e 652c  Default is None,
-00012a90: 206d 6561 6e69 6e67 2074 6861 7420 636f   meaning that co
-00012aa0: 7270 7573 2067 6574 7320 6175 746f 2d64  rpus gets auto-d
-00012ab0: 6f77 6e6c 6f61 6465 6420 616e 6420 6c6f  ownloaded and lo
-00012ac0: 6164 6564 2e20 596f 7520 6361 6e20 6f76  aded. You can ov
-00012ad0: 6572 7269 6465 2074 6869 7320 746f 2070  erride this to p
-00012ae0: 6f69 6e74 2074 6f20 6120 6469 6666 6572  oint to a differ
-00012af0: 656e 7420 666f 6c64 6572 2062 7574 2074  ent folder but t
-00012b00: 7970 6963 616c 6c79 2074 6869 7320 7368  ypically this sh
-00012b10: 6f75 6c64 206e 6f74 2062 6520 6e65 6365  ould not be nece
-00012b20: 7373 6172 792e 0a20 2020 2020 2020 2020  ssary..         
-00012b30: 2020 2069 6e5f 6d65 6d6f 7279 3a20 4966     in_memory: If
-00012b40: 2054 7275 652c 206b 6565 7073 2064 6174   True, keeps dat
-00012b50: 6173 6574 2069 6e20 6d65 6d6f 7279 2067  aset in memory g
-00012b60: 6976 696e 6720 7370 6565 6475 7073 2069  iving speedups i
-00012b70: 6e20 7472 6169 6e69 6e67 2e0a 2020 2020  n training..    
-00012b80: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00012b90: 2320 636f 6c75 6d6e 2066 6f72 6d61 740a  # column format.
-00012ba0: 2020 2020 2020 2020 636f 6c75 6d6e 7320          columns 
-00012bb0: 3d20 7b30 3a20 226e 6572 222c 2031 3a20  = {0: "ner", 1: 
-00012bc0: 2274 6578 7422 7d0a 0a20 2020 2020 2020  "text"}..       
-00012bd0: 2023 2064 6174 6173 6574 206e 616d 650a   # dataset name.
-00012be0: 2020 2020 2020 2020 6461 7461 7365 745f          dataset_
-00012bf0: 6e61 6d65 203d 2073 656c 662e 5f5f 636c  name = self.__cl
-00012c00: 6173 735f 5f2e 5f5f 6e61 6d65 5f5f 2e6c  ass__.__name__.l
-00012c10: 6f77 6572 2829 0a0a 2020 2020 2020 2020  ower()..        
-00012c20: 2320 6461 7461 2066 6f6c 6465 723a 2064  # data folder: d
-00012c30: 6566 6175 6c74 2064 6174 6173 6574 2066  efault dataset f
-00012c40: 6f6c 6465 7220 6973 2074 6865 2063 6163  older is the cac
-00012c50: 6865 2072 6f6f 740a 2020 2020 2020 2020  he root.        
-00012c60: 6261 7365 5f70 6174 6820 3d20 6b6f 6c69  base_path = koli
-00012c70: 6272 692e 6361 6368 655f 726f 6f74 202f  bri.cache_root /
-00012c80: 2022 6461 7461 7365 7473 2220 6966 206e   "datasets" if n
-00012c90: 6f74 2062 6173 655f 7061 7468 2065 6c73  ot base_path els
-00012ca0: 6520 5061 7468 2862 6173 655f 7061 7468  e Path(base_path
-00012cb0: 290a 2020 2020 2020 2020 6461 7461 5f66  ).        data_f
-00012cc0: 6f6c 6465 7220 3d20 6261 7365 5f70 6174  older = base_pat
-00012cd0: 6820 2f20 6461 7461 7365 745f 6e61 6d65  h / dataset_name
-00012ce0: 0a0a 2020 2020 2020 2020 2320 646f 776e  ..        # down
-00012cf0: 6c6f 6164 2064 6174 6120 6966 206e 6563  load data if nec
-00012d00: 6573 7361 7279 0a20 2020 2020 2020 206d  essary.        m
-00012d10: 6974 5f6d 6f76 6965 5f70 6174 6820 3d20  it_movie_path = 
-00012d20: 2268 7474 7073 3a2f 2f67 726f 7570 732e  "https://groups.
-00012d30: 6373 6169 6c2e 6d69 742e 6564 752f 736c  csail.mit.edu/sl
-00012d40: 732f 646f 776e 6c6f 6164 732f 6d6f 7669  s/downloads/movi
-00012d50: 652f 220a 2020 2020 2020 2020 7472 6169  e/".        trai
-00012d60: 6e5f 6669 6c65 203d 2022 656e 6774 7261  n_file = "engtra
-00012d70: 696e 2e62 696f 220a 2020 2020 2020 2020  in.bio".        
-00012d80: 7465 7374 5f66 696c 6520 3d20 2265 6e67  test_file = "eng
-00012d90: 7465 7374 2e62 696f 220a 2020 2020 2020  test.bio".      
-00012da0: 2020 6361 6368 6564 5f70 6174 6828 6622    cached_path(f"
-00012db0: 7b6d 6974 5f6d 6f76 6965 5f70 6174 687d  {mit_movie_path}
-00012dc0: 7b74 7261 696e 5f66 696c 657d 222c 2050  {train_file}", P
-00012dd0: 6174 6828 2264 6174 6173 6574 7322 2920  ath("datasets") 
-00012de0: 2f20 6461 7461 7365 745f 6e61 6d65 290a  / dataset_name).
-00012df0: 2020 2020 2020 2020 6361 6368 6564 5f70          cached_p
-00012e00: 6174 6828 6622 7b6d 6974 5f6d 6f76 6965  ath(f"{mit_movie
-00012e10: 5f70 6174 687d 7b74 6573 745f 6669 6c65  _path}{test_file
-00012e20: 7d22 2c20 5061 7468 2822 6461 7461 7365  }", Path("datase
-00012e30: 7473 2229 202f 2064 6174 6173 6574 5f6e  ts") / dataset_n
-00012e40: 616d 6529 0a0a 2020 2020 2020 2020 7375  ame)..        su
-00012e50: 7065 7228 292e 5f5f 696e 6974 5f5f 280a  per().__init__(.
-00012e60: 2020 2020 2020 2020 2020 2020 6461 7461              data
-00012e70: 5f66 6f6c 6465 722c 0a20 2020 2020 2020  _folder,.       
-00012e80: 2020 2020 2063 6f6c 756d 6e73 2c0a 2020       columns,.  
-00012e90: 2020 2020 2020 2020 2020 7472 6169 6e5f            train_
-00012ea0: 6669 6c65 3d74 7261 696e 5f66 696c 652c  file=train_file,
-00012eb0: 0a20 2020 2020 2020 2020 2020 2074 6573  .            tes
-00012ec0: 745f 6669 6c65 3d74 6573 745f 6669 6c65  t_file=test_file
-00012ed0: 2c0a 2020 2020 2020 2020 2020 2020 696e  ,.            in
-00012ee0: 5f6d 656d 6f72 793d 696e 5f6d 656d 6f72  _memory=in_memor
-00012ef0: 792c 0a20 2020 2020 2020 2020 2020 202a  y,.            *
-00012f00: 2a63 6f72 7075 7361 7267 732c 0a20 2020  *corpusargs,.   
-00012f10: 2020 2020 2029 0a0a 0a63 6c61 7373 204e       )...class N
-00012f20: 4552 5f45 4e47 4c49 5348 5f4d 4f56 4945  ER_ENGLISH_MOVIE
-00012f30: 5f43 4f4d 504c 4558 2843 6f6c 756d 6e43  _COMPLEX(ColumnC
-00012f40: 6f72 7075 7329 3a0a 2020 2020 6465 6620  orpus):.    def 
-00012f50: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
-00012f60: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
-00012f70: 6261 7365 5f70 6174 683a 204f 7074 696f  base_path: Optio
-00012f80: 6e61 6c5b 556e 696f 6e5b 7374 722c 2050  nal[Union[str, P
-00012f90: 6174 685d 5d20 3d20 4e6f 6e65 2c0a 2020  ath]] = None,.  
-00012fa0: 2020 2020 2020 696e 5f6d 656d 6f72 793a        in_memory:
-00012fb0: 2062 6f6f 6c20 3d20 5472 7565 2c0a 2020   bool = True,.  
-00012fc0: 2020 2020 2020 2a2a 636f 7270 7573 6172        **corpusar
-00012fd0: 6773 2c0a 2020 2020 2920 2d3e 204e 6f6e  gs,.    ) -> Non
-00012fe0: 653a 0a20 2020 2020 2020 2022 2222 496e  e:.        """In
-00012ff0: 6974 6961 6c69 7a65 2074 6865 2074 7269  itialize the tri
-00013000: 7669 6131 306b 3133 2063 6f72 7075 7320  via10k13 corpus 
-00013010: 6f66 2074 6865 204d 4954 204d 6f76 6965  of the MIT Movie
-00013020: 2043 6f72 7075 732e 0a0a 2020 2020 2020   Corpus...      
-00013030: 2020 5468 6520 6669 7273 7420 7469 6d65    The first time
-00013040: 2079 6f75 2063 616c 6c20 7468 6973 2063   you call this c
-00013050: 6f6e 7374 7275 6374 6f72 2069 7420 7769  onstructor it wi
-00013060: 6c6c 2061 7574 6f6d 6174 6963 616c 6c79  ll automatically
-00013070: 2064 6f77 6e6c 6f61 6420 7468 6520 6461   download the da
-00013080: 7461 7365 742e 0a0a 2020 2020 2020 2020  taset...        
-00013090: 4172 6773 3a0a 2020 2020 2020 2020 2020  Args:.          
-000130a0: 2020 6261 7365 5f70 6174 683a 2044 6566    base_path: Def
-000130b0: 6175 6c74 2069 7320 4e6f 6e65 2c20 6d65  ault is None, me
-000130c0: 616e 696e 6720 7468 6174 2063 6f72 7075  aning that corpu
-000130d0: 7320 6765 7473 2061 7574 6f2d 646f 776e  s gets auto-down
-000130e0: 6c6f 6164 6564 2061 6e64 206c 6f61 6465  loaded and loade
-000130f0: 642e 2059 6f75 2063 616e 206f 7665 7272  d. You can overr
-00013100: 6964 6520 7468 6973 2074 6f20 706f 696e  ide this to poin
-00013110: 7420 746f 2061 2064 6966 6665 7265 6e74  t to a different
-00013120: 2066 6f6c 6465 7220 6275 7420 7479 7069   folder but typi
-00013130: 6361 6c6c 7920 7468 6973 2073 686f 756c  cally this shoul
-00013140: 6420 6e6f 7420 6265 206e 6563 6573 7361  d not be necessa
-00013150: 7279 2e0a 2020 2020 2020 2020 2020 2020  ry..            
-00013160: 696e 5f6d 656d 6f72 793a 2049 6620 5472  in_memory: If Tr
-00013170: 7565 2c20 6b65 6570 7320 6461 7461 7365  ue, keeps datase
-00013180: 7420 696e 206d 656d 6f72 7920 6769 7669  t in memory givi
-00013190: 6e67 2073 7065 6564 7570 7320 696e 2074  ng speedups in t
-000131a0: 7261 696e 696e 672e 0a20 2020 2020 2020  raining..       
-000131b0: 2022 2222 0a20 2020 2020 2020 2023 2063   """.        # c
-000131c0: 6f6c 756d 6e20 666f 726d 6174 0a20 2020  olumn format.   
-000131d0: 2020 2020 2063 6f6c 756d 6e73 203d 207b       columns = {
-000131e0: 303a 2022 6e65 7222 2c20 313a 2022 7465  0: "ner", 1: "te
-000131f0: 7874 227d 0a0a 2020 2020 2020 2020 2320  xt"}..        # 
-00013200: 6461 7461 7365 7420 6e61 6d65 0a20 2020  dataset name.   
-00013210: 2020 2020 2064 6174 6173 6574 5f6e 616d       dataset_nam
-00013220: 6520 3d20 7365 6c66 2e5f 5f63 6c61 7373  e = self.__class
-00013230: 5f5f 2e5f 5f6e 616d 655f 5f2e 6c6f 7765  __.__name__.lowe
-00013240: 7228 290a 0a20 2020 2020 2020 2023 2064  r()..        # d
-00013250: 6174 6120 666f 6c64 6572 3a20 6465 6661  ata folder: defa
-00013260: 756c 7420 6461 7461 7365 7420 666f 6c64  ult dataset fold
-00013270: 6572 2069 7320 7468 6520 6361 6368 6520  er is the cache 
-00013280: 726f 6f74 0a20 2020 2020 2020 2062 6173  root.        bas
-00013290: 655f 7061 7468 203d 206b 6f6c 6962 7269  e_path = kolibri
-000132a0: 2e63 6163 6865 5f72 6f6f 7420 2f20 2264  .cache_root / "d
-000132b0: 6174 6173 6574 7322 2069 6620 6e6f 7420  atasets" if not 
-000132c0: 6261 7365 5f70 6174 6820 656c 7365 2050  base_path else P
-000132d0: 6174 6828 6261 7365 5f70 6174 6829 0a20  ath(base_path). 
-000132e0: 2020 2020 2020 2064 6174 615f 666f 6c64         data_fold
-000132f0: 6572 203d 2062 6173 655f 7061 7468 202f  er = base_path /
-00013300: 2064 6174 6173 6574 5f6e 616d 650a 0a20   dataset_name.. 
-00013310: 2020 2020 2020 2023 2064 6f77 6e6c 6f61         # downloa
-00013320: 6420 6461 7461 2069 6620 6e65 6365 7373  d data if necess
-00013330: 6172 790a 2020 2020 2020 2020 6d69 745f  ary.        mit_
-00013340: 6d6f 7669 655f 7061 7468 203d 2022 6874  movie_path = "ht
-00013350: 7470 733a 2f2f 6772 6f75 7073 2e63 7361  tps://groups.csa
-00013360: 696c 2e6d 6974 2e65 6475 2f73 6c73 2f64  il.mit.edu/sls/d
-00013370: 6f77 6e6c 6f61 6473 2f6d 6f76 6965 2f22  ownloads/movie/"
-00013380: 0a20 2020 2020 2020 2074 7261 696e 5f66  .        train_f
-00013390: 696c 6520 3d20 2274 7269 7669 6131 306b  ile = "trivia10k
-000133a0: 3133 7472 6169 6e2e 6269 6f22 0a20 2020  13train.bio".   
-000133b0: 2020 2020 2074 6573 745f 6669 6c65 203d       test_file =
-000133c0: 2022 7472 6976 6961 3130 6b31 3374 6573   "trivia10k13tes
-000133d0: 742e 6269 6f22 0a20 2020 2020 2020 2063  t.bio".        c
-000133e0: 6163 6865 645f 7061 7468 2866 227b 6d69  ached_path(f"{mi
-000133f0: 745f 6d6f 7669 655f 7061 7468 7d7b 7472  t_movie_path}{tr
-00013400: 6169 6e5f 6669 6c65 7d22 2c20 5061 7468  ain_file}", Path
-00013410: 2822 6461 7461 7365 7473 2229 202f 2064  ("datasets") / d
-00013420: 6174 6173 6574 5f6e 616d 6529 0a20 2020  ataset_name).   
-00013430: 2020 2020 2063 6163 6865 645f 7061 7468       cached_path
-00013440: 2866 227b 6d69 745f 6d6f 7669 655f 7061  (f"{mit_movie_pa
-00013450: 7468 7d7b 7465 7374 5f66 696c 657d 222c  th}{test_file}",
-00013460: 2050 6174 6828 2264 6174 6173 6574 7322   Path("datasets"
-00013470: 2920 2f20 6461 7461 7365 745f 6e61 6d65  ) / dataset_name
-00013480: 290a 0a20 2020 2020 2020 2073 7570 6572  )..        super
-00013490: 2829 2e5f 5f69 6e69 745f 5f28 0a20 2020  ().__init__(.   
-000134a0: 2020 2020 2020 2020 2064 6174 615f 666f           data_fo
-000134b0: 6c64 6572 2c0a 2020 2020 2020 2020 2020  lder,.          
-000134c0: 2020 636f 6c75 6d6e 732c 0a20 2020 2020    columns,.     
-000134d0: 2020 2020 2020 2074 7261 696e 5f66 696c         train_fil
-000134e0: 653d 7472 6169 6e5f 6669 6c65 2c0a 2020  e=train_file,.  
-000134f0: 2020 2020 2020 2020 2020 7465 7374 5f66            test_f
-00013500: 696c 653d 7465 7374 5f66 696c 652c 0a20  ile=test_file,. 
-00013510: 2020 2020 2020 2020 2020 2069 6e5f 6d65             in_me
-00013520: 6d6f 7279 3d69 6e5f 6d65 6d6f 7279 2c0a  mory=in_memory,.
-00013530: 2020 2020 2020 2020 2020 2020 2a2a 636f              **co
-00013540: 7270 7573 6172 6773 2c0a 2020 2020 2020  rpusargs,.      
-00013550: 2020 290a 0a0a 636c 6173 7320 4e45 525f    )...class NER_
-00013560: 454e 474c 4953 485f 5345 435f 4649 4c4c  ENGLISH_SEC_FILL
-00013570: 494e 4753 2843 6f6c 756d 6e43 6f72 7075  INGS(ColumnCorpu
-00013580: 7329 3a0a 2020 2020 6465 6620 5f5f 696e  s):.    def __in
-00013590: 6974 5f5f 280a 2020 2020 2020 2020 7365  it__(.        se
-000135a0: 6c66 2c0a 2020 2020 2020 2020 6261 7365  lf,.        base
-000135b0: 5f70 6174 683a 204f 7074 696f 6e61 6c5b  _path: Optional[
-000135c0: 556e 696f 6e5b 7374 722c 2050 6174 685d  Union[str, Path]
-000135d0: 5d20 3d20 4e6f 6e65 2c0a 2020 2020 2020  ] = None,.      
-000135e0: 2020 696e 5f6d 656d 6f72 793a 2062 6f6f    in_memory: boo
-000135f0: 6c20 3d20 5472 7565 2c0a 2020 2020 2020  l = True,.      
-00013600: 2020 2a2a 636f 7270 7573 6172 6773 2c0a    **corpusargs,.
-00013610: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
-00013620: 2020 2020 2020 2022 2222 496e 6974 6961         """Initia
-00013630: 6c69 7a65 2063 6f72 7075 7320 6f66 2053  lize corpus of S
-00013640: 4543 2d66 696c 6c69 6e67 7320 616e 6e6f  EC-fillings anno
-00013650: 7461 7465 6420 7769 7468 2045 6e67 6c69  tated with Engli
-00013660: 7368 204e 4552 2074 6167 732e 0a0a 2020  sh NER tags...  
-00013670: 2020 2020 2020 5365 6520 7061 7065 7220        See paper 
-00013680: 2244 6f6d 6169 6e20 4164 6170 7469 6f6e  "Domain Adaption
-00013690: 206f 6620 4e61 6d65 6420 456e 7469 7479   of Named Entity
-000136a0: 2052 6563 6f67 6e69 7469 6f6e 2074 6f20   Recognition to 
-000136b0: 5375 7070 6f72 7420 4372 6564 6974 2052  Support Credit R
-000136c0: 6973 6b20 4173 7365 7373 6d65 6e74 2220  isk Assessment" 
-000136d0: 6279 2041 6c76 6172 6164 6f20 6574 2061  by Alvarado et a
-000136e0: 6c2c 2032 3031 353a 2068 7474 7073 3a2f  l, 2015: https:/
-000136f0: 2f61 636c 616e 7468 6f6c 6f67 792e 6f72  /aclanthology.or
-00013700: 672f 5531 352d 3130 3130 2f0a 0a20 2020  g/U15-1010/..   
-00013710: 2020 2020 2041 7267 733a 0a20 2020 2020       Args:.     
-00013720: 2020 2020 2020 2062 6173 655f 7061 7468         base_path
-00013730: 3a20 5061 7468 2074 6f20 7468 6520 436f  : Path to the Co
-00013740: 4e4c 4c2d 3033 2063 6f72 7075 7320 2869  NLL-03 corpus (i
-00013750: 2e65 2e20 2763 6f6e 6c6c 5f30 3327 2066  .e. 'conll_03' f
-00013760: 6f6c 6465 7229 206f 6e20 796f 7572 206d  older) on your m
-00013770: 6163 6869 6e65 0a20 2020 2020 2020 2020  achine.         
-00013780: 2020 2069 6e5f 6d65 6d6f 7279 3a20 4966     in_memory: If
-00013790: 2054 7275 652c 206b 6565 7073 2064 6174   True, keeps dat
-000137a0: 6173 6574 2069 6e20 6d65 6d6f 7279 2067  aset in memory g
-000137b0: 6976 696e 6720 7370 6565 6475 7073 2069  iving speedups i
-000137c0: 6e20 7472 6169 6e69 6e67 2e0a 2020 2020  n training..    
-000137d0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-000137e0: 6261 7365 5f70 6174 6820 3d20 6b6f 6c69  base_path = koli
-000137f0: 6272 692e 6361 6368 655f 726f 6f74 202f  bri.cache_root /
-00013800: 2022 6461 7461 7365 7473 2220 6966 206e   "datasets" if n
-00013810: 6f74 2062 6173 655f 7061 7468 2065 6c73  ot base_path els
-00013820: 6520 5061 7468 2862 6173 655f 7061 7468  e Path(base_path
-00013830: 290a 0a20 2020 2020 2020 2023 2063 6f6c  )..        # col
-00013840: 756d 6e20 666f 726d 6174 0a20 2020 2020  umn format.     
-00013850: 2020 2063 6f6c 756d 6e73 203d 207b 303a     columns = {0:
-00013860: 2022 7465 7874 222c 2031 3a20 2270 6f73   "text", 1: "pos
-00013870: 222c 2033 3a20 226e 6572 227d 0a0a 2020  ", 3: "ner"}..  
-00013880: 2020 2020 2020 2320 7468 6973 2064 6174        # this dat
-00013890: 6173 6574 206e 616d 650a 2020 2020 2020  aset name.      
-000138a0: 2020 6461 7461 7365 745f 6e61 6d65 203d    dataset_name =
-000138b0: 2073 656c 662e 5f5f 636c 6173 735f 5f2e   self.__class__.
-000138c0: 5f5f 6e61 6d65 5f5f 2e6c 6f77 6572 2829  __name__.lower()
-000138d0: 0a0a 2020 2020 2020 2020 6461 7461 5f66  ..        data_f
-000138e0: 6f6c 6465 7220 3d20 6261 7365 5f70 6174  older = base_pat
-000138f0: 6820 2f20 6461 7461 7365 745f 6e61 6d65  h / dataset_name
-00013900: 0a0a 2020 2020 2020 2020 2320 646f 776e  ..        # down
-00013910: 6c6f 6164 2064 6174 6120 6966 206e 6563  load data if nec
-00013920: 6573 7361 7279 0a20 2020 2020 2020 2053  essary.        S
-00013930: 4543 5f46 494c 4c49 4e47 535f 5061 7468  EC_FILLINGS_Path
-00013940: 203d 2022 6874 7470 733a 2f2f 7261 772e   = "https://raw.
-00013950: 6769 7468 7562 7573 6572 636f 6e74 656e  githubuserconten
-00013960: 742e 636f 6d2f 6a75 616e 642d 722f 656e  t.com/juand-r/en
-00013970: 7469 7479 2d72 6563 6f67 6e69 7469 6f6e  tity-recognition
-00013980: 2d64 6174 6173 6574 732f 6d61 7374 6572  -datasets/master
-00013990: 2f64 6174 612f 5345 432d 6669 6c69 6e67  /data/SEC-filing
-000139a0: 732f 434f 4e4c 4c2d 666f 726d 6174 2f64  s/CONLL-format/d
-000139b0: 6174 612f 220a 2020 2020 2020 2020 6361  ata/".        ca
-000139c0: 6368 6564 5f70 6174 6828 6622 7b53 4543  ched_path(f"{SEC
-000139d0: 5f46 494c 4c49 4e47 535f 5061 7468 7d74  _FILLINGS_Path}t
-000139e0: 6573 742f 4649 4e33 2e74 7874 222c 2050  est/FIN3.txt", P
-000139f0: 6174 6828 2264 6174 6173 6574 7322 2920  ath("datasets") 
-00013a00: 2f20 6461 7461 7365 745f 6e61 6d65 290a  / dataset_name).
-00013a10: 2020 2020 2020 2020 6361 6368 6564 5f70          cached_p
-00013a20: 6174 6828 6622 7b53 4543 5f46 494c 4c49  ath(f"{SEC_FILLI
-00013a30: 4e47 535f 5061 7468 7d74 7261 696e 2f46  NGS_Path}train/F
-00013a40: 494e 352e 7478 7422 2c20 5061 7468 2822  IN5.txt", Path("
-00013a50: 6461 7461 7365 7473 2229 202f 2064 6174  datasets") / dat
-00013a60: 6173 6574 5f6e 616d 6529 0a0a 2020 2020  aset_name)..    
-00013a70: 2020 2020 7375 7065 7228 292e 5f5f 696e      super().__in
-00013a80: 6974 5f5f 280a 2020 2020 2020 2020 2020  it__(.          
-00013a90: 2020 6461 7461 5f66 6f6c 6465 722c 0a20    data_folder,. 
-00013aa0: 2020 2020 2020 2020 2020 2063 6f6c 756d             colum
-00013ab0: 6e73 2c0a 2020 2020 2020 2020 2020 2020  ns,.            
-00013ac0: 656e 636f 6469 6e67 3d22 7574 662d 3822  encoding="utf-8"
-00013ad0: 2c0a 2020 2020 2020 2020 2020 2020 696e  ,.            in
-00013ae0: 5f6d 656d 6f72 793d 696e 5f6d 656d 6f72  _memory=in_memor
-00013af0: 792c 0a20 2020 2020 2020 2020 2020 2074  y,.            t
-00013b00: 7261 696e 5f66 696c 653d 2246 494e 352e  rain_file="FIN5.
-00013b10: 7478 7422 2c0a 2020 2020 2020 2020 2020  txt",.          
-00013b20: 2020 7465 7374 5f66 696c 653d 2246 494e    test_file="FIN
-00013b30: 332e 7478 7422 2c0a 2020 2020 2020 2020  3.txt",.        
-00013b40: 2020 2020 736b 6970 5f66 6972 7374 5f6c      skip_first_l
-00013b50: 696e 653d 5472 7565 2c0a 2020 2020 2020  ine=True,.      
-00013b60: 2020 2020 2020 2a2a 636f 7270 7573 6172        **corpusar
-00013b70: 6773 2c0a 2020 2020 2020 2020 290a 0a0a  gs,.        )...
-00013b80: 636c 6173 7320 4e45 525f 454e 474c 4953  class NER_ENGLIS
-00013b90: 485f 5245 5354 4155 5241 4e54 2843 6f6c  H_RESTAURANT(Col
-00013ba0: 756d 6e43 6f72 7075 7329 3a0a 2020 2020  umnCorpus):.    
-00013bb0: 6465 6620 5f5f 696e 6974 5f5f 280a 2020  def __init__(.  
-00013bc0: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
-00013bd0: 2020 2020 6261 7365 5f70 6174 683a 204f      base_path: O
-00013be0: 7074 696f 6e61 6c5b 556e 696f 6e5b 7374  ptional[Union[st
-00013bf0: 722c 2050 6174 685d 5d20 3d20 4e6f 6e65  r, Path]] = None
-00013c00: 2c0a 2020 2020 2020 2020 696e 5f6d 656d  ,.        in_mem
-00013c10: 6f72 793a 2062 6f6f 6c20 3d20 5472 7565  ory: bool = True
-00013c20: 2c0a 2020 2020 2020 2020 2a2a 636f 7270  ,.        **corp
-00013c30: 7573 6172 6773 2c0a 2020 2020 2920 2d3e  usargs,.    ) ->
-00013c40: 204e 6f6e 653a 0a20 2020 2020 2020 2022   None:.        "
-00013c50: 2222 496e 6974 6961 6c69 7a65 2074 6865  ""Initialize the
-00013c60: 204d 4954 2052 6573 7461 7572 616e 7420   MIT Restaurant 
-00013c70: 636f 7270 7573 2e0a 0a20 2020 2020 2020  corpus...       
-00013c80: 2054 6865 2063 6f72 7075 7320 7769 6c6c   The corpus will
-00013c90: 2062 6520 646f 776e 6c6f 6164 6564 2066   be downloaded f
-00013ca0: 726f 6d20 6874 7470 733a 2f2f 6772 6f75  rom https://grou
-00013cb0: 7073 2e63 7361 696c 2e6d 6974 2e65 6475  ps.csail.mit.edu
-00013cc0: 2f73 6c73 2f64 6f77 6e6c 6f61 6473 2f72  /sls/downloads/r
-00013cd0: 6573 7461 7572 616e 742f 2e0a 2020 2020  estaurant/..    
-00013ce0: 2020 2020 5468 6520 6669 7273 7420 7469      The first ti
-00013cf0: 6d65 2079 6f75 2063 616c 6c20 7468 6973  me you call this
-00013d00: 2063 6f6e 7374 7275 6374 6f72 2069 7420   constructor it 
-00013d10: 7769 6c6c 2061 7574 6f6d 6174 6963 616c  will automatical
-00013d20: 6c79 2064 6f77 6e6c 6f61 6420 7468 6520  ly download the 
-00013d30: 6461 7461 7365 742e 0a20 2020 2020 2020  dataset..       
-00013d40: 203a 7061 7261 6d20 6261 7365 5f70 6174   :param base_pat
-00013d50: 683a 2044 6566 6175 6c74 2069 7320 4e6f  h: Default is No
-00013d60: 6e65 2c20 6d65 616e 696e 6720 7468 6174  ne, meaning that
-00013d70: 2063 6f72 7075 7320 6765 7473 2061 7574   corpus gets aut
-00013d80: 6f2d 646f 776e 6c6f 6164 6564 2061 6e64  o-downloaded and
-00013d90: 206c 6f61 6465 642e 2059 6f75 2063 616e   loaded. You can
-00013da0: 206f 7665 7272 6964 6520 7468 6973 0a20   override this. 
-00013db0: 2020 2020 2020 2074 6f20 706f 696e 7420         to point 
-00013dc0: 746f 2061 2064 6966 6665 7265 6e74 2066  to a different f
-00013dd0: 6f6c 6465 7220 6275 7420 7479 7069 6361  older but typica
-00013de0: 6c6c 7920 7468 6973 2073 686f 756c 6420  lly this should 
-00013df0: 6e6f 7420 6265 206e 6563 6573 7361 7279  not be necessary
-00013e00: 2e0a 2020 2020 2020 2020 504f 5320 7461  ..        POS ta
-00013e10: 6773 2069 6e73 7465 6164 0a20 2020 2020  gs instead.     
-00013e20: 2020 203a 7061 7261 6d20 696e 5f6d 656d     :param in_mem
-00013e30: 6f72 793a 2049 6620 5472 7565 2c20 6b65  ory: If True, ke
-00013e40: 6570 7320 6461 7461 7365 7420 696e 206d  eps dataset in m
-00013e50: 656d 6f72 7920 6769 7669 6e67 2073 7065  emory giving spe
-00013e60: 6564 7570 7320 696e 2074 7261 696e 696e  edups in trainin
-00013e70: 672e 0a20 2020 2020 2020 203a 7061 7261  g..        :para
-00013e80: 6d20 646f 6375 6d65 6e74 5f61 735f 7365  m document_as_se
-00013e90: 7175 656e 6365 3a20 4966 2054 7275 652c  quence: If True,
-00013ea0: 2061 6c6c 2073 656e 7465 6e63 6573 206f   all sentences o
-00013eb0: 6620 6120 646f 6375 6d65 6e74 2061 7265  f a document are
-00013ec0: 2072 6561 6420 696e 746f 2061 2073 696e   read into a sin
-00013ed0: 676c 6520 5365 6e74 656e 6365 206f 626a  gle Sentence obj
-00013ee0: 6563 740a 2020 2020 2020 2020 2222 220a  ect.        """.
-00013ef0: 2020 2020 2020 2020 6261 7365 5f70 6174          base_pat
-00013f00: 6820 3d20 6b6f 6c69 6272 692e 6361 6368  h = kolibri.cach
-00013f10: 655f 726f 6f74 202f 2022 6461 7461 7365  e_root / "datase
-00013f20: 7473 2220 6966 206e 6f74 2062 6173 655f  ts" if not base_
-00013f30: 7061 7468 2065 6c73 6520 5061 7468 2862  path else Path(b
-00013f40: 6173 655f 7061 7468 290a 0a20 2020 2020  ase_path)..     
-00013f50: 2020 2023 2063 6f6c 756d 6e20 666f 726d     # column form
-00013f60: 6174 0a20 2020 2020 2020 2063 6f6c 756d  at.        colum
-00013f70: 6e73 203d 207b 303a 2022 7465 7874 222c  ns = {0: "text",
-00013f80: 2031 3a20 226e 6572 227d 0a0a 2020 2020   1: "ner"}..    
-00013f90: 2020 2020 2320 7468 6973 2064 6174 6173      # this datas
-00013fa0: 6574 206e 616d 650a 2020 2020 2020 2020  et name.        
-00013fb0: 6461 7461 7365 745f 6e61 6d65 203d 2073  dataset_name = s
-00013fc0: 656c 662e 5f5f 636c 6173 735f 5f2e 5f5f  elf.__class__.__
-00013fd0: 6e61 6d65 5f5f 2e6c 6f77 6572 2829 0a0a  name__.lower()..
-00013fe0: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
-00013ff0: 6465 7220 3d20 6261 7365 5f70 6174 6820  der = base_path 
-00014000: 2f20 6461 7461 7365 745f 6e61 6d65 0a0a  / dataset_name..
-00014010: 2020 2020 2020 2020 2320 646f 776e 6c6f          # downlo
-00014020: 6164 2064 6174 6120 6966 206e 6563 6573  ad data if neces
-00014030: 7361 7279 0a20 2020 2020 2020 206d 6974  sary.        mit
-00014040: 5f72 6573 7461 7572 616e 7473 5f70 6174  _restaurants_pat
-00014050: 6820 3d20 2268 7474 7073 3a2f 2f6d 6567  h = "https://meg
-00014060: 616e 746f 7368 2e73 332e 6575 2d63 656e  antosh.s3.eu-cen
-00014070: 7472 616c 2d31 2e61 6d61 7a6f 6e61 7773  tral-1.amazonaws
-00014080: 2e63 6f6d 2f4d 4954 5265 7374 6f43 6f72  .com/MITRestoCor
-00014090: 7075 732f 220a 2020 2020 2020 2020 6361  pus/".        ca
-000140a0: 6368 6564 5f70 6174 6828 6622 7b6d 6974  ched_path(f"{mit
-000140b0: 5f72 6573 7461 7572 616e 7473 5f70 6174  _restaurants_pat
-000140c0: 687d 7465 7374 2e74 7874 222c 2050 6174  h}test.txt", Pat
-000140d0: 6828 2264 6174 6173 6574 7322 2920 2f20  h("datasets") / 
-000140e0: 6461 7461 7365 745f 6e61 6d65 290a 2020  dataset_name).  
-000140f0: 2020 2020 2020 6361 6368 6564 5f70 6174        cached_pat
-00014100: 6828 6622 7b6d 6974 5f72 6573 7461 7572  h(f"{mit_restaur
-00014110: 616e 7473 5f70 6174 687d 7472 6169 6e2e  ants_path}train.
-00014120: 7478 7422 2c20 5061 7468 2822 6461 7461  txt", Path("data
-00014130: 7365 7473 2229 202f 2064 6174 6173 6574  sets") / dataset
-00014140: 5f6e 616d 6529 0a0a 2020 2020 2020 2020  _name)..        
-00014150: 7375 7065 7228 292e 5f5f 696e 6974 5f5f  super().__init__
-00014160: 280a 2020 2020 2020 2020 2020 2020 6461  (.            da
-00014170: 7461 5f66 6f6c 6465 722c 0a20 2020 2020  ta_folder,.     
-00014180: 2020 2020 2020 2063 6f6c 756d 6e73 2c0a         columns,.
-00014190: 2020 2020 2020 2020 2020 2020 656e 636f              enco
-000141a0: 6469 6e67 3d22 6c61 7469 6e2d 3122 2c0a  ding="latin-1",.
-000141b0: 2020 2020 2020 2020 2020 2020 696e 5f6d              in_m
-000141c0: 656d 6f72 793d 696e 5f6d 656d 6f72 792c  emory=in_memory,
-000141d0: 0a20 2020 2020 2020 2020 2020 202a 2a63  .            **c
-000141e0: 6f72 7075 7361 7267 732c 0a20 2020 2020  orpusargs,.     
-000141f0: 2020 2029 0a0a 0a63 6c61 7373 204e 4552     )...class NER
-00014200: 5f45 4e47 4c49 5348 5f53 5441 434b 4f56  _ENGLISH_STACKOV
-00014210: 4552 464c 4f57 2843 6f6c 756d 6e43 6f72  ERFLOW(ColumnCor
-00014220: 7075 7329 3a0a 2020 2020 6465 6620 5f5f  pus):.    def __
-00014230: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
-00014240: 7365 6c66 2c0a 2020 2020 2020 2020 6261  self,.        ba
-00014250: 7365 5f70 6174 683a 204f 7074 696f 6e61  se_path: Optiona
-00014260: 6c5b 556e 696f 6e5b 7374 722c 2050 6174  l[Union[str, Pat
-00014270: 685d 5d20 3d20 4e6f 6e65 2c0a 2020 2020  h]] = None,.    
-00014280: 2020 2020 696e 5f6d 656d 6f72 793a 2062      in_memory: b
-00014290: 6f6f 6c20 3d20 5472 7565 2c0a 2020 2020  ool = True,.    
-000142a0: 2020 2020 2a2a 636f 7270 7573 6172 6773      **corpusargs
-000142b0: 2c0a 2020 2020 2920 2d3e 204e 6f6e 653a  ,.    ) -> None:
-000142c0: 0a20 2020 2020 2020 2022 2222 496e 6974  .        """Init
-000142d0: 6961 6c69 7a65 2074 6865 2053 5441 434b  ialize the STACK
-000142e0: 4f56 4552 464c 4f57 5f4e 4552 2063 6f72  OVERFLOW_NER cor
-000142f0: 7075 732e 0a0a 2020 2020 2020 2020 5468  pus...        Th
-00014300: 6520 6669 7273 7420 7469 6d65 2079 6f75  e first time you
-00014310: 2063 616c 6c20 7468 6973 2063 6f6e 7374   call this const
-00014320: 7275 6374 6f72 2069 7420 7769 6c6c 2061  ructor it will a
-00014330: 7574 6f6d 6174 6963 616c 6c79 2064 6f77  utomatically dow
-00014340: 6e6c 6f61 6420 7468 6520 6461 7461 7365  nload the datase
-00014350: 742e 0a0a 2020 2020 2020 2020 4172 6773  t...        Args
-00014360: 3a0a 2020 2020 2020 2020 2020 2020 6261  :.            ba
-00014370: 7365 5f70 6174 683a 2044 6566 6175 6c74  se_path: Default
-00014380: 2069 7320 4e6f 6e65 2c20 6d65 616e 696e   is None, meanin
-00014390: 6720 7468 6174 2063 6f72 7075 7320 6765  g that corpus ge
-000143a0: 7473 2061 7574 6f2d 646f 776e 6c6f 6164  ts auto-download
-000143b0: 6564 2061 6e64 206c 6f61 6465 642e 2059  ed and loaded. Y
-000143c0: 6f75 2063 616e 206f 7665 7272 6964 6520  ou can override 
-000143d0: 7468 6973 2074 6f20 706f 696e 7420 746f  this to point to
-000143e0: 2061 2064 6966 6665 7265 6e74 2066 6f6c   a different fol
-000143f0: 6465 7220 6275 7420 7479 7069 6361 6c6c  der but typicall
-00014400: 7920 7468 6973 2073 686f 756c 6420 6e6f  y this should no
-00014410: 7420 6265 206e 6563 6573 7361 7279 2e0a  t be necessary..
-00014420: 2020 2020 2020 2020 2020 2020 696e 5f6d              in_m
-00014430: 656d 6f72 793a 2049 6620 5472 7565 2c20  emory: If True, 
-00014440: 6b65 6570 7320 6461 7461 7365 7420 696e  keeps dataset in
-00014450: 206d 656d 6f72 7920 6769 7669 6e67 2073   memory giving s
-00014460: 7065 6564 7570 7320 696e 2074 7261 696e  peedups in train
-00014470: 696e 672e 0a20 2020 2020 2020 2020 2020  ing..           
-00014480: 2064 6f63 756d 656e 745f 6173 5f73 6571   document_as_seq
-00014490: 7565 6e63 653a 2049 6620 5472 7565 2c20  uence: If True, 
-000144a0: 616c 6c20 7365 6e74 656e 6365 7320 6f66  all sentences of
-000144b0: 2061 2064 6f63 756d 656e 7420 6172 6520   a document are 
-000144c0: 7265 6164 2069 6e74 6f20 6120 7369 6e67  read into a sing
-000144d0: 6c65 2053 656e 7465 6e63 6520 6f62 6a65  le Sentence obje
-000144e0: 6374 0a20 2020 2020 2020 2022 2222 0a20  ct.        """. 
-000144f0: 2020 2020 2020 2062 6173 655f 7061 7468         base_path
-00014500: 203d 206b 6f6c 6962 7269 2e63 6163 6865   = kolibri.cache
-00014510: 5f72 6f6f 7420 2f20 2264 6174 6173 6574  _root / "dataset
-00014520: 7322 2069 6620 6e6f 7420 6261 7365 5f70  s" if not base_p
-00014530: 6174 6820 656c 7365 2050 6174 6828 6261  ath else Path(ba
-00014540: 7365 5f70 6174 6829 0a0a 2020 2020 2020  se_path)..      
-00014550: 2020 2222 220a 2020 2020 2020 2020 5468    """.        Th
-00014560: 6520 4461 7461 7365 7473 2061 7265 2072  e Datasets are r
-00014570: 6570 7265 7365 6e74 6564 2069 6e20 7468  epresented in th
-00014580: 6520 436f 6e6c 6c20 666f 726d 6174 2e0a  e Conll format..
-00014590: 2020 2020 2020 2020 2020 2049 6e20 7468             In th
-000145a0: 6973 2066 6f72 6d61 7420 6561 6368 206c  is format each l
-000145b0: 696e 6520 6f66 2074 6865 2044 6174 6173  ine of the Datas
-000145c0: 6574 2069 7320 696e 2074 6865 2066 6f6c  et is in the fol
-000145d0: 6c6f 7769 6e67 2066 6f72 6d61 743a 0a20  lowing format:. 
-000145e0: 2020 2020 2020 2020 2020 3c77 6f72 643e            <word>
-000145f0: 2b22 5c74 222b 3c4e 453e 225c 7422 2b3c  +"\t"+<NE>"\t"+<
-00014600: 776f 7264 3e2b 225c 7422 3c6d 6172 6b64  word>+"\t"<markd
-00014610: 6f77 6e3e 0a20 2020 2020 2020 2020 2020  own>.           
-00014620: 5468 6520 656e 6420 6f66 2073 656e 7465  The end of sente
-00014630: 6e63 6520 6973 206d 6172 6b65 6420 7769  nce is marked wi
-00014640: 7468 2061 6e20 656d 7074 7920 6c69 6e65  th an empty line
-00014650: 2e0a 2020 2020 2020 2020 2020 2049 6e20  ..           In 
-00014660: 6561 6368 206c 696e 6520 4e45 2072 6570  each line NE rep
-00014670: 7265 7365 6e74 6564 2074 6865 2068 756d  resented the hum
-00014680: 616e 2061 6e6e 6f74 6174 6564 206e 616d  an annotated nam
-00014690: 6564 2065 6e74 6974 790a 2020 2020 2020  ed entity.      
-000146a0: 2020 2020 2061 6e64 203c 6d61 726b 646f       and <markdo
-000146b0: 776e 3e20 7265 7072 6573 656e 7465 6420  wn> represented 
-000146c0: 7468 6520 636f 6465 2074 6167 7320 7072  the code tags pr
-000146d0: 6f76 6964 6564 2062 7920 7468 6520 7573  ovided by the us
-000146e0: 6572 7320 7768 6f20 7772 6f74 6520 7468  ers who wrote th
-000146f0: 6520 706f 7374 732e 0a20 2020 2020 2020  e posts..       
-00014700: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00014710: 2320 636f 6c75 6d6e 2066 6f72 6d61 740a  # column format.
-00014720: 2020 2020 2020 2020 636f 6c75 6d6e 7320          columns 
-00014730: 3d20 7b30 3a20 2277 6f72 6422 2c20 313a  = {0: "word", 1:
-00014740: 2022 6e65 7222 2c20 333a 2022 6d61 726b   "ner", 3: "mark
-00014750: 646f 776e 227d 0a0a 2020 2020 2020 2020  down"}..        
-00014760: 2320 656e 7469 7479 5f6d 6170 7069 6e67  # entity_mapping
-00014770: 0a20 2020 2020 2020 2065 6e74 6974 795f  .        entity_
-00014780: 6d61 7070 696e 6720 3d20 7b0a 2020 2020  mapping = {.    
-00014790: 2020 2020 2020 2020 224c 6962 7261 7279          "Library
-000147a0: 5f46 756e 6374 696f 6e22 3a20 2246 756e  _Function": "Fun
-000147b0: 6374 696f 6e22 2c0a 2020 2020 2020 2020  ction",.        
-000147c0: 2020 2020 2246 756e 6374 696f 6e5f 4e61      "Function_Na
-000147d0: 6d65 223a 2022 4675 6e63 7469 6f6e 222c  me": "Function",
-000147e0: 0a20 2020 2020 2020 2020 2020 2022 436c  .            "Cl
-000147f0: 6173 735f 4e61 6d65 223a 2022 436c 6173  ass_Name": "Clas
-00014800: 7322 2c0a 2020 2020 2020 2020 2020 2020  s",.            
-00014810: 224c 6962 7261 7279 5f43 6c61 7373 223a  "Library_Class":
-00014820: 2022 436c 6173 7322 2c0a 2020 2020 2020   "Class",.      
-00014830: 2020 2020 2020 224f 7267 616e 697a 6174        "Organizat
-00014840: 696f 6e22 3a20 2257 6562 7369 7465 222c  ion": "Website",
-00014850: 0a20 2020 2020 2020 2020 2020 2022 4c69  .            "Li
-00014860: 6272 6172 795f 5661 7269 6162 6c65 223a  brary_Variable":
-00014870: 2022 5661 7269 6162 6c65 222c 0a20 2020   "Variable",.   
-00014880: 2020 2020 2020 2020 2022 5661 7269 6162           "Variab
-00014890: 6c65 5f4e 616d 6522 3a20 2256 6172 6961  le_Name": "Varia
-000148a0: 626c 6522 2c0a 2020 2020 2020 2020 2020  ble",.          
-000148b0: 2020 2245 7272 6f72 5f4e 616d 6522 3a20    "Error_Name": 
-000148c0: 224f 222c 0a20 2020 2020 2020 2020 2020  "O",.           
-000148d0: 2022 4b65 7962 6f61 7264 5f49 5022 3a20   "Keyboard_IP": 
-000148e0: 224f 222c 0a20 2020 2020 2020 2020 2020  "O",.           
-000148f0: 2022 5661 6c75 6522 3a20 224f 222c 0a20   "Value": "O",. 
-00014900: 2020 2020 2020 2020 2020 2022 4f75 7470             "Outp
-00014910: 7574 5f42 6c6f 636b 223a 2022 4f22 2c0a  ut_Block": "O",.
-00014920: 2020 2020 2020 2020 7d0a 0a20 2020 2020          }..     
-00014930: 2020 2023 2074 6869 7320 6461 7461 7365     # this datase
-00014940: 7420 6e61 6d65 0a20 2020 2020 2020 2064  t name.        d
-00014950: 6174 6173 6574 5f6e 616d 6520 3d20 7365  ataset_name = se
-00014960: 6c66 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e  lf.__class__.__n
-00014970: 616d 655f 5f2e 6c6f 7765 7228 290a 0a20  ame__.lower().. 
-00014980: 2020 2020 2020 2064 6174 615f 666f 6c64         data_fold
-00014990: 6572 203d 2062 6173 655f 7061 7468 202f  er = base_path /
-000149a0: 2064 6174 6173 6574 5f6e 616d 650a 0a20   dataset_name.. 
-000149b0: 2020 2020 2020 2023 2064 6f77 6e6c 6f61         # downloa
-000149c0: 6420 6461 7461 2069 6620 6e65 6365 7373  d data if necess
-000149d0: 6172 790a 2020 2020 2020 2020 5354 4143  ary.        STAC
-000149e0: 4b4f 5645 5246 4c4f 575f 4e45 525f 7061  KOVERFLOW_NER_pa
-000149f0: 7468 203d 2022 6874 7470 733a 2f2f 7261  th = "https://ra
-00014a00: 772e 6769 7468 7562 7573 6572 636f 6e74  w.githubusercont
-00014a10: 656e 742e 636f 6d2f 6a65 6e69 7961 742f  ent.com/jeniyat/
-00014a20: 5374 6163 6b4f 7665 7266 6c6f 774e 4552  StackOverflowNER
-00014a30: 2f6d 6173 7465 722f 7265 736f 7572 6365  /master/resource
-00014a40: 732f 616e 6e6f 7461 7465 645f 6e65 725f  s/annotated_ner_
-00014a50: 6461 7461 2f53 7461 636b 4f76 6572 666c  data/StackOverfl
-00014a60: 6f77 2f22 0a0a 2020 2020 2020 2020 2320  ow/"..        # 
-00014a70: 6461 7461 2076 616c 6964 6174 696f 6e0a  data validation.
-00014a80: 2020 2020 2020 2020 6261 6e6e 6564 5f73          banned_s
-00014a90: 656e 7465 6e63 6573 203d 205b 0a20 2020  entences = [.   
-00014aa0: 2020 2020 2020 2020 2022 636f 6465 206f           "code o
-00014ab0: 6d69 7474 6564 2066 6f72 2061 6e6e 6f74  mitted for annot
-00014ac0: 6174 696f 6e22 2c0a 2020 2020 2020 2020  ation",.        
-00014ad0: 2020 2020 226f 6d69 7474 6564 2066 6f72      "omitted for
-00014ae0: 2061 6e6e 6f74 6174 696f 6e22 2c0a 2020   annotation",.  
-00014af0: 2020 2020 2020 2020 2020 2243 4f44 455f            "CODE_
-00014b00: 424c 4f43 4b20 3a22 2c0a 2020 2020 2020  BLOCK :",.      
-00014b10: 2020 2020 2020 224f 505f 424c 4f43 4b20        "OP_BLOCK 
-00014b20: 3a22 2c0a 2020 2020 2020 2020 2020 2020  :",.            
-00014b30: 2251 7565 7374 696f 6e5f 5552 4c20 3a22  "Question_URL :"
-00014b40: 2c0a 2020 2020 2020 2020 2020 2020 2251  ,.            "Q
-00014b50: 7565 7374 696f 6e5f 4944 203a 222c 0a20  uestion_ID :",. 
-00014b60: 2020 2020 2020 205d 0a0a 2020 2020 2020         ]..      
-00014b70: 2020 6669 6c65 7320 3d20 5b22 7472 6169    files = ["trai
-00014b80: 6e22 2c20 2274 6573 7422 2c20 2264 6576  n", "test", "dev
-00014b90: 225d 0a0a 2020 2020 2020 2020 666f 7220  "]..        for 
-00014ba0: 6669 6c65 2069 6e20 6669 6c65 733a 0a20  file in files:. 
-00014bb0: 2020 2020 2020 2020 2020 2071 7565 7374             quest
-00014bc0: 696f 6e73 203d 2030 0a20 2020 2020 2020  ions = 0.       
-00014bd0: 2020 2020 2061 6e73 7765 7273 203d 2030       answers = 0
-00014be0: 0a0a 2020 2020 2020 2020 2020 2020 6361  ..            ca
-00014bf0: 6368 6564 5f70 6174 6828 6622 7b53 5441  ched_path(f"{STA
-00014c00: 434b 4f56 4552 464c 4f57 5f4e 4552 5f70  CKOVERFLOW_NER_p
-00014c10: 6174 687d 7b66 696c 657d 2e74 7874 222c  ath}{file}.txt",
-00014c20: 2050 6174 6828 2264 6174 6173 6574 7322   Path("datasets"
-00014c30: 2920 2f20 6461 7461 7365 745f 6e61 6d65  ) / dataset_name
-00014c40: 290a 2020 2020 2020 2020 2020 2020 7769  ).            wi
-00014c50: 7468 2028 6461 7461 5f66 6f6c 6465 7220  th (data_folder 
-00014c60: 2f20 2866 696c 6520 2b20 222e 7478 7422  / (file + ".txt"
-00014c70: 2929 2e6f 7065 6e28 656e 636f 6469 6e67  )).open(encoding
-00014c80: 3d22 7574 662d 3822 2920 6173 2066 696e  ="utf-8") as fin
-00014c90: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00014ca0: 2020 666f 7220 6c69 6e65 2069 6e20 6669    for line in fi
-00014cb0: 6e3a 0a20 2020 2020 2020 2020 2020 2020  n:.             
-00014cc0: 2020 2020 2020 2069 6620 6c69 6e65 2e73         if line.s
-00014cd0: 7461 7274 7377 6974 6828 2251 7565 7374  tartswith("Quest
-00014ce0: 696f 6e5f 4944 2229 3a0a 2020 2020 2020  ion_ID"):.      
-00014cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014d00: 2020 7175 6573 7469 6f6e 7320 2b3d 2031    questions += 1
-00014d10: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00014d20: 2020 2020 2020 6966 206c 696e 652e 7374        if line.st
-00014d30: 6172 7473 7769 7468 2822 416e 7377 6572  artswith("Answer
-00014d40: 5f74 6f5f 5175 6573 7469 6f6e 5f49 4422  _to_Question_ID"
-00014d50: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00014d60: 2020 2020 2020 2020 2020 2061 6e73 7765             answe
-00014d70: 7273 202b 3d20 310a 2020 2020 2020 2020  rs += 1.        
-00014d80: 2020 2020 6c6f 672e 696e 666f 2866 2246      log.info(f"F
-00014d90: 696c 6520 7b66 696c 657d 2068 6173 207b  ile {file} has {
-00014da0: 7175 6573 7469 6f6e 737d 2071 7565 7374  questions} quest
-00014db0: 696f 6e73 2061 6e64 207b 616e 7377 6572  ions and {answer
-00014dc0: 737d 2061 6e73 7765 7273 2e22 290a 0a20  s} answers.").. 
-00014dd0: 2020 2020 2020 2073 7570 6572 2829 2e5f         super()._
-00014de0: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
-00014df0: 2020 2020 2064 6174 615f 666f 6c64 6572       data_folder
-00014e00: 2c0a 2020 2020 2020 2020 2020 2020 636f  ,.            co
-00014e10: 6c75 6d6e 732c 0a20 2020 2020 2020 2020  lumns,.         
-00014e20: 2020 2074 7261 696e 5f66 696c 653d 2274     train_file="t
-00014e30: 7261 696e 2e74 7874 222c 0a20 2020 2020  rain.txt",.     
-00014e40: 2020 2020 2020 2074 6573 745f 6669 6c65         test_file
-00014e50: 3d22 7465 7374 2e74 7874 222c 0a20 2020  ="test.txt",.   
-00014e60: 2020 2020 2020 2020 2064 6576 5f66 696c           dev_fil
-00014e70: 653d 2264 6576 2e74 7874 222c 0a20 2020  e="dev.txt",.   
-00014e80: 2020 2020 2020 2020 2065 6e63 6f64 696e           encodin
-00014e90: 673d 2275 7466 2d38 222c 0a20 2020 2020  g="utf-8",.     
-00014ea0: 2020 2020 2020 2062 616e 6e65 645f 7365         banned_se
-00014eb0: 6e74 656e 6365 733d 6261 6e6e 6564 5f73  ntences=banned_s
-00014ec0: 656e 7465 6e63 6573 2c0a 2020 2020 2020  entences,.      
-00014ed0: 2020 2020 2020 696e 5f6d 656d 6f72 793d        in_memory=
-00014ee0: 696e 5f6d 656d 6f72 792c 0a20 2020 2020  in_memory,.     
-00014ef0: 2020 2020 2020 206c 6162 656c 5f6e 616d         label_nam
-00014f00: 655f 6d61 703d 656e 7469 7479 5f6d 6170  e_map=entity_map
-00014f10: 7069 6e67 2c0a 2020 2020 2020 2020 2020  ping,.          
-00014f20: 2020 2a2a 636f 7270 7573 6172 6773 2c0a    **corpusargs,.
-00014f30: 2020 2020 2020 2020 290a 0a0a 636c 6173          )...clas
-00014f40: 7320 4e45 525f 454e 474c 4953 485f 5457  s NER_ENGLISH_TW
-00014f50: 4954 5445 5228 436f 6c75 6d6e 436f 7270  ITTER(ColumnCorp
-00014f60: 7573 293a 0a20 2020 2064 6566 205f 5f69  us):.    def __i
-00014f70: 6e69 745f 5f28 0a20 2020 2020 2020 2073  nit__(.        s
-00014f80: 656c 662c 0a20 2020 2020 2020 2062 6173  elf,.        bas
-00014f90: 655f 7061 7468 3a20 4f70 7469 6f6e 616c  e_path: Optional
-00014fa0: 5b55 6e69 6f6e 5b73 7472 2c20 5061 7468  [Union[str, Path
-00014fb0: 5d5d 203d 204e 6f6e 652c 0a20 2020 2020  ]] = None,.     
-00014fc0: 2020 2069 6e5f 6d65 6d6f 7279 3a20 626f     in_memory: bo
-00014fd0: 6f6c 203d 2054 7275 652c 0a20 2020 2020  ol = True,.     
-00014fe0: 2020 202a 2a63 6f72 7075 7361 7267 732c     **corpusargs,
-00014ff0: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
-00015000: 2020 2020 2020 2020 2222 2249 6e69 7469          """Initi
-00015010: 616c 697a 6520 7468 6520 7477 6974 7465  alize the twitte
-00015020: 725f 6e65 7220 636f 7270 7573 2e0a 0a20  r_ner corpus... 
-00015030: 2020 2020 2020 2054 6865 2063 6f72 7075         The corpu
-00015040: 7320 7769 6c6c 2062 6520 646f 776e 6f61  s will be downoa
-00015050: 6465 6420 6672 6f6d 2068 7474 7073 3a2f  ded from https:/
-00015060: 2f72 6177 2e67 6974 6875 6275 7365 7263  /raw.githubuserc
-00015070: 6f6e 7465 6e74 2e63 6f6d 2f61 7269 7474  ontent.com/aritt
-00015080: 6572 2f74 7769 7474 6572 5f6e 6c70 2f6d  er/twitter_nlp/m
-00015090: 6173 7465 722f 6461 7461 2f61 6e6e 6f74  aster/data/annot
-000150a0: 6174 6564 2f6e 6572 2e74 7874 2e0a 2020  ated/ner.txt..  
-000150b0: 2020 2020 2020 5468 6520 6669 7273 7420        The first 
-000150c0: 7469 6d65 2079 6f75 2063 616c 6c20 7468  time you call th
-000150d0: 6973 2063 6f6e 7374 7275 6374 6f72 2069  is constructor i
-000150e0: 7420 7769 6c6c 2061 7574 6f6d 6174 6963  t will automatic
-000150f0: 616c 6c79 2064 6f77 6e6c 6f61 6420 7468  ally download th
-00015100: 6520 6461 7461 7365 742e 0a0a 2020 2020  e dataset...    
-00015110: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
-00015120: 2020 2020 2020 6261 7365 5f70 6174 683a        base_path:
-00015130: 2044 6566 6175 6c74 2069 7320 4e6f 6e65   Default is None
-00015140: 2c20 6d65 616e 696e 6720 7468 6174 2063  , meaning that c
-00015150: 6f72 7075 7320 6765 7473 2061 7574 6f2d  orpus gets auto-
-00015160: 646f 776e 6c6f 6164 6564 2061 6e64 206c  downloaded and l
-00015170: 6f61 6465 642e 2059 6f75 2063 616e 206f  oaded. You can o
-00015180: 7665 7272 6964 6520 7468 6973 2074 6f20  verride this to 
-00015190: 706f 696e 7420 746f 2061 2064 6966 6665  point to a diffe
-000151a0: 7265 6e74 2066 6f6c 6465 7220 6275 7420  rent folder but 
-000151b0: 7479 7069 6361 6c6c 7920 7468 6973 2073  typically this s
-000151c0: 686f 756c 6420 6e6f 7420 6265 206e 6563  hould not be nec
-000151d0: 6573 7361 7279 2e0a 2020 2020 2020 2020  essary..        
-000151e0: 2020 2020 696e 5f6d 656d 6f72 793a 2049      in_memory: I
-000151f0: 6620 5472 7565 2c20 6b65 6570 7320 6461  f True, keeps da
-00015200: 7461 7365 7420 696e 206d 656d 6f72 7920  taset in memory 
-00015210: 6769 7669 6e67 2073 7065 6564 7570 7320  giving speedups 
-00015220: 696e 2074 7261 696e 696e 672e 0a20 2020  in training..   
-00015230: 2020 2020 2020 2020 2064 6f63 756d 656e           documen
-00015240: 745f 6173 5f73 6571 7565 6e63 653a 2049  t_as_sequence: I
-00015250: 6620 5472 7565 2c20 616c 6c20 7365 6e74  f True, all sent
-00015260: 656e 6365 7320 6f66 2061 2064 6f63 756d  ences of a docum
-00015270: 656e 7420 6172 6520 7265 6164 2069 6e74  ent are read int
-00015280: 6f20 6120 7369 6e67 6c65 2053 656e 7465  o a single Sente
-00015290: 6e63 6520 6f62 6a65 6374 0a20 2020 2020  nce object.     
-000152a0: 2020 2022 2222 0a20 2020 2020 2020 2062     """.        b
-000152b0: 6173 655f 7061 7468 203d 206b 6f6c 6962  ase_path = kolib
-000152c0: 7269 2e63 6163 6865 5f72 6f6f 7420 2f20  ri.cache_root / 
-000152d0: 2264 6174 6173 6574 7322 2069 6620 6e6f  "datasets" if no
-000152e0: 7420 6261 7365 5f70 6174 6820 656c 7365  t base_path else
-000152f0: 2050 6174 6828 6261 7365 5f70 6174 6829   Path(base_path)
-00015300: 0a0a 2020 2020 2020 2020 2320 636f 6c75  ..        # colu
-00015310: 6d6e 2066 6f72 6d61 740a 2020 2020 2020  mn format.      
-00015320: 2020 636f 6c75 6d6e 7320 3d20 7b30 3a20    columns = {0: 
-00015330: 2274 6578 7422 2c20 313a 2022 6e65 7222  "text", 1: "ner"
-00015340: 7d0a 0a20 2020 2020 2020 2023 2074 6869  }..        # thi
-00015350: 7320 6461 7461 7365 7420 6e61 6d65 0a20  s dataset name. 
-00015360: 2020 2020 2020 2064 6174 6173 6574 5f6e         dataset_n
-00015370: 616d 6520 3d20 7365 6c66 2e5f 5f63 6c61  ame = self.__cla
-00015380: 7373 5f5f 2e5f 5f6e 616d 655f 5f2e 6c6f  ss__.__name__.lo
-00015390: 7765 7228 290a 0a20 2020 2020 2020 2023  wer()..        #
-000153a0: 2064 6566 6175 6c74 2064 6174 6173 6574   default dataset
-000153b0: 2066 6f6c 6465 7220 6973 2074 6865 2063   folder is the c
-000153c0: 6163 6865 2072 6f6f 740a 2020 2020 2020  ache root.      
-000153d0: 2020 6966 206e 6f74 2062 6173 655f 7061    if not base_pa
-000153e0: 7468 3a0a 2020 2020 2020 2020 2020 2020  th:.            
-000153f0: 6261 7365 5f70 6174 6820 3d20 6b6f 6c69  base_path = koli
-00015400: 6272 692e 6361 6368 655f 726f 6f74 202f  bri.cache_root /
-00015410: 2022 6461 7461 7365 7473 220a 2020 2020   "datasets".    
-00015420: 2020 2020 6461 7461 5f66 6f6c 6465 7220      data_folder 
-00015430: 3d20 6261 7365 5f70 6174 6820 2f20 6461  = base_path / da
-00015440: 7461 7365 745f 6e61 6d65 0a0a 2020 2020  taset_name..    
-00015450: 2020 2020 2320 646f 776e 6c6f 6164 2064      # download d
-00015460: 6174 6120 6966 206e 6563 6573 7361 7279  ata if necessary
-00015470: 0a20 2020 2020 2020 2074 7769 7474 6572  .        twitter
-00015480: 5f6e 6572 5f70 6174 6820 3d20 2268 7474  _ner_path = "htt
-00015490: 7073 3a2f 2f72 6177 2e67 6974 6875 6275  ps://raw.githubu
-000154a0: 7365 7263 6f6e 7465 6e74 2e63 6f6d 2f61  sercontent.com/a
-000154b0: 7269 7474 6572 2f74 7769 7474 6572 5f6e  ritter/twitter_n
-000154c0: 6c70 2f6d 6173 7465 722f 6461 7461 2f61  lp/master/data/a
-000154d0: 6e6e 6f74 6174 6564 2f22 0a20 2020 2020  nnotated/".     
-000154e0: 2020 2063 6163 6865 645f 7061 7468 2866     cached_path(f
-000154f0: 227b 7477 6974 7465 725f 6e65 725f 7061  "{twitter_ner_pa
-00015500: 7468 7d6e 6572 2e74 7874 222c 2050 6174  th}ner.txt", Pat
-00015510: 6828 2264 6174 6173 6574 7322 2920 2f20  h("datasets") / 
-00015520: 6461 7461 7365 745f 6e61 6d65 290a 0a20  dataset_name).. 
-00015530: 2020 2020 2020 2073 7570 6572 2829 2e5f         super()._
-00015540: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
-00015550: 2020 2020 2064 6174 615f 666f 6c64 6572       data_folder
-00015560: 2c0a 2020 2020 2020 2020 2020 2020 636f  ,.            co
-00015570: 6c75 6d6e 732c 0a20 2020 2020 2020 2020  lumns,.         
-00015580: 2020 2065 6e63 6f64 696e 673d 226c 6174     encoding="lat
-00015590: 696e 2d31 222c 0a20 2020 2020 2020 2020  in-1",.         
-000155a0: 2020 2074 7261 696e 5f66 696c 653d 226e     train_file="n
-000155b0: 6572 2e74 7874 222c 0a20 2020 2020 2020  er.txt",.       
-000155c0: 2020 2020 2069 6e5f 6d65 6d6f 7279 3d69       in_memory=i
-000155d0: 6e5f 6d65 6d6f 7279 2c0a 2020 2020 2020  n_memory,.      
-000155e0: 2020 2020 2020 2a2a 636f 7270 7573 6172        **corpusar
-000155f0: 6773 2c0a 2020 2020 2020 2020 290a 0a0a  gs,.        )...
-00015600: 636c 6173 7320 4e45 525f 454e 474c 4953  class NER_ENGLIS
-00015610: 485f 5045 5253 4f4e 2843 6f6c 756d 6e43  H_PERSON(ColumnC
-00015620: 6f72 7075 7329 3a0a 2020 2020 6465 6620  orpus):.    def 
-00015630: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
-00015640: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
-00015650: 6261 7365 5f70 6174 683a 204f 7074 696f  base_path: Optio
-00015660: 6e61 6c5b 556e 696f 6e5b 7374 722c 2050  nal[Union[str, P
-00015670: 6174 685d 5d20 3d20 4e6f 6e65 2c0a 2020  ath]] = None,.  
-00015680: 2020 2020 2020 696e 5f6d 656d 6f72 793a        in_memory:
-00015690: 2062 6f6f 6c20 3d20 5472 7565 2c0a 2020   bool = True,.  
-000156a0: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-000156b0: 2020 2020 2022 2222 496e 6974 6961 6c69       """Initiali
-000156c0: 7a65 2074 6865 2050 4552 534f 4e5f 4e45  ze the PERSON_NE
-000156d0: 5220 636f 7270 7573 2066 6f72 2070 6572  R corpus for per
-000156e0: 736f 6e20 6e61 6d65 732e 0a0a 2020 2020  son names...    
-000156f0: 2020 2020 5468 6520 6669 7273 7420 7469      The first ti
-00015700: 6d65 2079 6f75 2063 616c 6c20 7468 6973  me you call this
-00015710: 2063 6f6e 7374 7275 6374 6f72 2069 7420   constructor it 
-00015720: 7769 6c6c 2061 7574 6f6d 6174 6963 616c  will automatical
-00015730: 6c79 2064 6f77 6e6c 6f61 6420 7468 6520  ly download the 
-00015740: 6461 7461 7365 742e 0a0a 2020 2020 2020  dataset...      
-00015750: 2020 4172 6773 3a0a 2020 2020 2020 2020    Args:.        
-00015760: 2020 2020 6261 7365 5f70 6174 683a 2044      base_path: D
-00015770: 6566 6175 6c74 2069 7320 4e6f 6e65 2c20  efault is None, 
-00015780: 6d65 616e 696e 6720 7468 6174 2063 6f72  meaning that cor
-00015790: 7075 7320 6765 7473 2061 7574 6f2d 646f  pus gets auto-do
-000157a0: 776e 6c6f 6164 6564 2061 6e64 206c 6f61  wnloaded and loa
-000157b0: 6465 642e 2059 6f75 2063 616e 206f 7665  ded. You can ove
-000157c0: 7272 6964 6520 7468 6973 2074 6f20 706f  rride this to po
-000157d0: 696e 7420 746f 2061 2064 6966 6665 7265  int to a differe
-000157e0: 6e74 2066 6f6c 6465 7220 6275 7420 7479  nt folder but ty
-000157f0: 7069 6361 6c6c 7920 7468 6973 2073 686f  pically this sho
-00015800: 756c 6420 6e6f 7420 6265 206e 6563 6573  uld not be neces
-00015810: 7361 7279 2e0a 2020 2020 2020 2020 2020  sary..          
-00015820: 2020 696e 5f6d 656d 6f72 793a 2049 6620    in_memory: If 
-00015830: 5472 7565 2c20 6b65 6570 7320 6461 7461  True, keeps data
-00015840: 7365 7420 696e 206d 656d 6f72 7920 6769  set in memory gi
-00015850: 7669 6e67 2073 7065 6564 7570 7320 696e  ving speedups in
-00015860: 2074 7261 696e 696e 672e 0a20 2020 2020   training..     
-00015870: 2020 2022 2222 0a20 2020 2020 2020 2062     """.        b
-00015880: 6173 655f 7061 7468 203d 206b 6f6c 6962  ase_path = kolib
-00015890: 7269 2e63 6163 6865 5f72 6f6f 7420 2f20  ri.cache_root / 
-000158a0: 2264 6174 6173 6574 7322 2069 6620 6e6f  "datasets" if no
-000158b0: 7420 6261 7365 5f70 6174 6820 656c 7365  t base_path else
-000158c0: 2050 6174 6828 6261 7365 5f70 6174 6829   Path(base_path)
-000158d0: 0a0a 2020 2020 2020 2020 2320 636f 6c75  ..        # colu
-000158e0: 6d6e 2066 6f72 6d61 740a 2020 2020 2020  mn format.      
-000158f0: 2020 636f 6c75 6d6e 7320 3d20 7b30 3a20    columns = {0: 
-00015900: 2274 6578 7422 2c20 313a 2022 6e65 7222  "text", 1: "ner"
-00015910: 7d0a 0a20 2020 2020 2020 2023 2074 6869  }..        # thi
-00015920: 7320 6461 7461 7365 7420 6e61 6d65 0a20  s dataset name. 
-00015930: 2020 2020 2020 2064 6174 6173 6574 5f6e         dataset_n
-00015940: 616d 6520 3d20 7365 6c66 2e5f 5f63 6c61  ame = self.__cla
-00015950: 7373 5f5f 2e5f 5f6e 616d 655f 5f2e 6c6f  ss__.__name__.lo
-00015960: 7765 7228 290a 0a20 2020 2020 2020 2023  wer()..        #
-00015970: 2064 6566 6175 6c74 2064 6174 6173 6574   default dataset
-00015980: 2066 6f6c 6465 7220 6973 2074 6865 2063   folder is the c
-00015990: 6163 6865 2072 6f6f 740a 2020 2020 2020  ache root.      
-000159a0: 2020 6966 206e 6f74 2062 6173 655f 7061    if not base_pa
-000159b0: 7468 3a0a 2020 2020 2020 2020 2020 2020  th:.            
-000159c0: 6261 7365 5f70 6174 6820 3d20 6b6f 6c69  base_path = koli
-000159d0: 6272 692e 6361 6368 655f 726f 6f74 202f  bri.cache_root /
-000159e0: 2022 6461 7461 7365 7473 220a 2020 2020   "datasets".    
-000159f0: 2020 2020 6461 7461 5f66 6f6c 6465 7220      data_folder 
-00015a00: 3d20 6261 7365 5f70 6174 6820 2f20 6461  = base_path / da
-00015a10: 7461 7365 745f 6e61 6d65 0a0a 2020 2020  taset_name..    
-00015a20: 2020 2020 2320 646f 776e 6c6f 6164 2064      # download d
-00015a30: 6174 6120 6966 206e 6563 6573 7361 7279  ata if necessary
-00015a40: 0a20 2020 2020 2020 2063 6f6e 6c6c 5f70  .        conll_p
-00015a50: 6174 6820 3d20 2268 7474 7073 3a2f 2f72  ath = "https://r
-00015a60: 6177 2e67 6974 6875 6275 7365 7263 6f6e  aw.githubusercon
-00015a70: 7465 6e74 2e63 6f6d 2f64 6173 2d73 7564  tent.com/das-sud
-00015a80: 6573 686e 612f 6765 6e69 642f 6d61 7374  eshna/genid/mast
-00015a90: 6572 2f22 0a0a 2020 2020 2020 2020 2320  er/"..        # 
-00015aa0: 646f 776e 6c6f 6164 2066 696c 6573 2069  download files i
-00015ab0: 6620 6e6f 7420 7072 6573 656e 7420 6c6f  f not present lo
-00015ac0: 6361 6c6c 7973 0a20 2020 2020 2020 2063  callys.        c
-00015ad0: 6163 6865 645f 7061 7468 2866 227b 636f  ached_path(f"{co
-00015ae0: 6e6c 6c5f 7061 7468 7d63 6f6e 6c6c 2d67  nll_path}conll-g
-00015af0: 2e63 6f6e 6c6c 222c 2064 6174 615f 666f  .conll", data_fo
-00015b00: 6c64 6572 202f 2022 7261 7722 290a 2020  lder / "raw").  
-00015b10: 2020 2020 2020 6361 6368 6564 5f70 6174        cached_pat
-00015b20: 6828 6622 7b63 6f6e 6c6c 5f70 6174 687d  h(f"{conll_path}
-00015b30: 6965 6572 2d67 2e63 6f6e 6c6c 222c 2064  ieer-g.conll", d
-00015b40: 6174 615f 666f 6c64 6572 202f 2022 7261  ata_folder / "ra
-00015b50: 7722 290a 2020 2020 2020 2020 6361 6368  w").        cach
-00015b60: 6564 5f70 6174 6828 6622 7b63 6f6e 6c6c  ed_path(f"{conll
-00015b70: 5f70 6174 687d 7465 7874 626f 6f6b 2d67  _path}textbook-g
-00015b80: 2e63 6f6e 6c6c 222c 2064 6174 615f 666f  .conll", data_fo
-00015b90: 6c64 6572 202f 2022 7261 7722 290a 2020  lder / "raw").  
-00015ba0: 2020 2020 2020 6361 6368 6564 5f70 6174        cached_pat
-00015bb0: 6828 6622 7b63 6f6e 6c6c 5f70 6174 687d  h(f"{conll_path}
-00015bc0: 7769 6b69 2d67 2e63 6f6e 6c6c 222c 2064  wiki-g.conll", d
-00015bd0: 6174 615f 666f 6c64 6572 202f 2022 7261  ata_folder / "ra
-00015be0: 7722 290a 0a20 2020 2020 2020 2073 656c  w")..        sel
-00015bf0: 662e 5f5f 636f 6e63 6174 416c 6c46 696c  f.__concatAllFil
-00015c00: 6573 2864 6174 615f 666f 6c64 6572 290a  es(data_folder).
-00015c10: 0a20 2020 2020 2020 2073 7570 6572 2829  .        super()
-00015c20: 2e5f 5f69 6e69 745f 5f28 6461 7461 5f66  .__init__(data_f
-00015c30: 6f6c 6465 722c 2063 6f6c 756d 6e73 2c20  older, columns, 
-00015c40: 696e 5f6d 656d 6f72 793d 696e 5f6d 656d  in_memory=in_mem
-00015c50: 6f72 792c 2074 7261 696e 5f66 696c 653d  ory, train_file=
-00015c60: 2262 6967 4669 6c65 2e63 6f6e 6c6c 2229  "bigFile.conll")
-00015c70: 0a0a 2020 2020 4073 7461 7469 636d 6574  ..    @staticmet
-00015c80: 686f 640a 2020 2020 6465 6620 5f5f 636f  hod.    def __co
-00015c90: 6e63 6174 416c 6c46 696c 6573 2864 6174  ncatAllFiles(dat
-00015ca0: 615f 666f 6c64 6572 293a 0a20 2020 2020  a_folder):.     
-00015cb0: 2020 2061 7272 203d 206f 732e 6c69 7374     arr = os.list
-00015cc0: 6469 7228 6461 7461 5f66 6f6c 6465 7220  dir(data_folder 
-00015cd0: 2f20 2272 6177 2229 0a0a 2020 2020 2020  / "raw")..      
-00015ce0: 2020 7769 7468 206f 7065 6e28 6461 7461    with open(data
-00015cf0: 5f66 6f6c 6465 7220 2f20 2262 6967 4669  _folder / "bigFi
-00015d00: 6c65 2e63 6f6e 6c6c 222c 2022 7722 2920  le.conll", "w") 
-00015d10: 6173 206f 7574 6669 6c65 3a0a 2020 2020  as outfile:.    
-00015d20: 2020 2020 2020 2020 666f 7220 666e 616d          for fnam
-00015d30: 6520 696e 2061 7272 3a0a 2020 2020 2020  e in arr:.      
-00015d40: 2020 2020 2020 2020 2020 7769 7468 206f            with o
-00015d50: 7065 6e28 6461 7461 5f66 6f6c 6465 7220  pen(data_folder 
-00015d60: 2f20 2272 6177 2220 2f20 666e 616d 6529  / "raw" / fname)
-00015d70: 2061 7320 696e 6669 6c65 3a0a 2020 2020   as infile:.    
+0000e6e0: 2c0a 2020 2020 2020 2020 2020 2020 696e  ,.            in
+0000e6f0: 5f6d 656d 6f72 793d 696e 5f6d 656d 6f72  _memory=in_memor
+0000e700: 792c 0a20 2020 2020 2020 2020 2020 202a  y,.            *
+0000e710: 2a63 6f72 7075 7361 7267 732c 0a20 2020  *corpusargs,.   
+0000e720: 2020 2020 2029 0a0a 0a63 6c61 7373 2057       )...class W
+0000e730: 4e55 545f 3137 2843 6f6c 756d 6e43 6f72  NUT_17(ColumnCor
+0000e740: 7075 7329 3a0a 2020 2020 6465 6620 5f5f  pus):.    def __
+0000e750: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
+0000e760: 7365 6c66 2c0a 2020 2020 2020 2020 6261  self,.        ba
+0000e770: 7365 5f70 6174 683a 204f 7074 696f 6e61  se_path: Optiona
+0000e780: 6c5b 556e 696f 6e5b 7374 722c 2050 6174  l[Union[str, Pat
+0000e790: 685d 5d20 3d20 4e6f 6e65 2c0a 2020 2020  h]] = None,.    
+0000e7a0: 2020 2020 696e 5f6d 656d 6f72 793a 2062      in_memory: b
+0000e7b0: 6f6f 6c20 3d20 5472 7565 2c0a 2020 2020  ool = True,.    
+0000e7c0: 2020 2020 2a2a 636f 7270 7573 6172 6773      **corpusargs
+0000e7d0: 2c0a 2020 2020 2920 2d3e 204e 6f6e 653a  ,.    ) -> None:
+0000e7e0: 0a20 2020 2020 2020 2062 6173 655f 7061  .        base_pa
+0000e7f0: 7468 203d 206b 6f6c 6962 7269 2e63 6163  th = kolibri.cac
+0000e800: 6865 5f72 6f6f 7420 2f20 2264 6174 6173  he_root / "datas
+0000e810: 6574 7322 2069 6620 6e6f 7420 6261 7365  ets" if not base
+0000e820: 5f70 6174 6820 656c 7365 2050 6174 6828  _path else Path(
+0000e830: 6261 7365 5f70 6174 6829 0a0a 2020 2020  base_path)..    
+0000e840: 2020 2020 2320 636f 6c75 6d6e 2066 6f72      # column for
+0000e850: 6d61 740a 2020 2020 2020 2020 636f 6c75  mat.        colu
+0000e860: 6d6e 7320 3d20 7b30 3a20 2274 6578 7422  mns = {0: "text"
+0000e870: 2c20 313a 2022 6e65 7222 7d0a 0a20 2020  , 1: "ner"}..   
+0000e880: 2020 2020 2023 2074 6869 7320 6461 7461       # this data
+0000e890: 7365 7420 6e61 6d65 0a20 2020 2020 2020  set name.       
+0000e8a0: 2064 6174 6173 6574 5f6e 616d 6520 3d20   dataset_name = 
+0000e8b0: 7365 6c66 2e5f 5f63 6c61 7373 5f5f 2e5f  self.__class__._
+0000e8c0: 5f6e 616d 655f 5f2e 6c6f 7765 7228 290a  _name__.lower().
+0000e8d0: 0a20 2020 2020 2020 2064 6174 615f 666f  .        data_fo
+0000e8e0: 6c64 6572 203d 2062 6173 655f 7061 7468  lder = base_path
+0000e8f0: 202f 2064 6174 6173 6574 5f6e 616d 650a   / dataset_name.
+0000e900: 0a20 2020 2020 2020 2023 2064 6f77 6e6c  .        # downl
+0000e910: 6f61 6420 6461 7461 2069 6620 6e65 6365  oad data if nece
+0000e920: 7373 6172 790a 2020 2020 2020 2020 776e  ssary.        wn
+0000e930: 7574 5f70 6174 6820 3d20 2268 7474 7073  ut_path = "https
+0000e940: 3a2f 2f6e 6f69 7379 2d74 6578 742e 6769  ://noisy-text.gi
+0000e950: 7468 7562 2e69 6f2f 3230 3137 2f66 696c  thub.io/2017/fil
+0000e960: 6573 2f22 0a20 2020 2020 2020 2063 6163  es/".        cac
+0000e970: 6865 645f 7061 7468 2866 227b 776e 7574  hed_path(f"{wnut
+0000e980: 5f70 6174 687d 776e 7574 3137 7472 6169  _path}wnut17trai
+0000e990: 6e2e 636f 6e6c 6c22 2c20 5061 7468 2822  n.conll", Path("
+0000e9a0: 6461 7461 7365 7473 2229 202f 2064 6174  datasets") / dat
+0000e9b0: 6173 6574 5f6e 616d 6529 0a20 2020 2020  aset_name).     
+0000e9c0: 2020 2063 6163 6865 645f 7061 7468 2866     cached_path(f
+0000e9d0: 227b 776e 7574 5f70 6174 687d 656d 6572  "{wnut_path}emer
+0000e9e0: 6769 6e67 2e64 6576 2e63 6f6e 6c6c 222c  ging.dev.conll",
+0000e9f0: 2050 6174 6828 2264 6174 6173 6574 7322   Path("datasets"
+0000ea00: 2920 2f20 6461 7461 7365 745f 6e61 6d65  ) / dataset_name
+0000ea10: 290a 2020 2020 2020 2020 6361 6368 6564  ).        cached
+0000ea20: 5f70 6174 6828 6622 7b77 6e75 745f 7061  _path(f"{wnut_pa
+0000ea30: 7468 7d65 6d65 7267 696e 672e 7465 7374  th}emerging.test
+0000ea40: 2e61 6e6e 6f74 6174 6564 222c 2050 6174  .annotated", Pat
+0000ea50: 6828 2264 6174 6173 6574 7322 2920 2f20  h("datasets") / 
+0000ea60: 6461 7461 7365 745f 6e61 6d65 290a 0a20  dataset_name).. 
+0000ea70: 2020 2020 2020 2073 7570 6572 2829 2e5f         super()._
+0000ea80: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
+0000ea90: 2020 2020 2064 6174 615f 666f 6c64 6572       data_folder
+0000eaa0: 2c0a 2020 2020 2020 2020 2020 2020 636f  ,.            co
+0000eab0: 6c75 6d6e 732c 0a20 2020 2020 2020 2020  lumns,.         
+0000eac0: 2020 2069 6e5f 6d65 6d6f 7279 3d69 6e5f     in_memory=in_
+0000ead0: 6d65 6d6f 7279 2c0a 2020 2020 2020 2020  memory,.        
+0000eae0: 2020 2020 2a2a 636f 7270 7573 6172 6773      **corpusargs
+0000eaf0: 2c0a 2020 2020 2020 2020 290a 0a0a 636c  ,.        )...cl
+0000eb00: 6173 7320 4645 574e 4552 4428 436f 6c75  ass FEWNERD(Colu
+0000eb10: 6d6e 436f 7270 7573 293a 0a20 2020 2064  mnCorpus):.    d
+0000eb20: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
+0000eb30: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
+0000eb40: 2020 2073 6574 7469 6e67 3a20 7374 7220     setting: str 
+0000eb50: 3d20 2273 7570 6572 7669 7365 6422 2c0a  = "supervised",.
+0000eb60: 2020 2020 2020 2020 2a2a 636f 7270 7573          **corpus
+0000eb70: 6172 6773 2c0a 2020 2020 2920 2d3e 204e  args,.    ) -> N
+0000eb80: 6f6e 653a 0a20 2020 2020 2020 2061 7373  one:.        ass
+0000eb90: 6572 7420 7365 7474 696e 6720 696e 205b  ert setting in [
+0000eba0: 2273 7570 6572 7669 7365 6422 2c20 2269  "supervised", "i
+0000ebb0: 6e74 6572 222c 2022 696e 7472 6122 5d0a  nter", "intra"].
+0000ebc0: 0a20 2020 2020 2020 2062 6173 655f 7061  .        base_pa
+0000ebd0: 7468 203d 206b 6f6c 6962 7269 2e63 6163  th = kolibri.cac
+0000ebe0: 6865 5f72 6f6f 7420 2f20 2264 6174 6173  he_root / "datas
+0000ebf0: 6574 7322 0a20 2020 2020 2020 2073 656c  ets".        sel
+0000ec00: 662e 6461 7461 7365 745f 6e61 6d65 203d  f.dataset_name =
+0000ec10: 2073 656c 662e 5f5f 636c 6173 735f 5f2e   self.__class__.
+0000ec20: 5f5f 6e61 6d65 5f5f 2e6c 6f77 6572 2829  __name__.lower()
+0000ec30: 0a20 2020 2020 2020 2073 656c 662e 6461  .        self.da
+0000ec40: 7461 5f66 6f6c 6465 7220 3d20 6261 7365  ta_folder = base
+0000ec50: 5f70 6174 6820 2f20 7365 6c66 2e64 6174  _path / self.dat
+0000ec60: 6173 6574 5f6e 616d 6520 2f20 7365 7474  aset_name / sett
+0000ec70: 696e 670a 2020 2020 2020 2020 7365 6c66  ing.        self
+0000ec80: 2e62 696f 5f66 6f72 6d61 745f 6461 7461  .bio_format_data
+0000ec90: 203d 2062 6173 655f 7061 7468 202f 2073   = base_path / s
+0000eca0: 656c 662e 6461 7461 7365 745f 6e61 6d65  elf.dataset_name
+0000ecb0: 202f 2073 6574 7469 6e67 202f 2022 6269   / setting / "bi
+0000ecc0: 6f5f 666f 726d 6174 220a 0a20 2020 2020  o_format"..     
+0000ecd0: 2020 2069 6620 6e6f 7420 7365 6c66 2e64     if not self.d
+0000ece0: 6174 615f 666f 6c64 6572 2e65 7869 7374  ata_folder.exist
+0000ecf0: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
+0000ed00: 2073 656c 662e 5f64 6f77 6e6c 6f61 6428   self._download(
+0000ed10: 7365 7474 696e 673d 7365 7474 696e 6729  setting=setting)
+0000ed20: 0a0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
+0000ed30: 2073 656c 662e 6269 6f5f 666f 726d 6174   self.bio_format
+0000ed40: 5f64 6174 612e 6578 6973 7473 2829 3a0a  _data.exists():.
+0000ed50: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000ed60: 2e5f 6765 6e65 7261 7465 5f73 706c 6974  ._generate_split
+0000ed70: 7328 7365 7474 696e 6729 0a0a 2020 2020  s(setting)..    
+0000ed80: 2020 2020 7375 7065 7228 292e 5f5f 696e      super().__in
+0000ed90: 6974 5f5f 280a 2020 2020 2020 2020 2020  it__(.          
+0000eda0: 2020 7365 6c66 2e62 696f 5f66 6f72 6d61    self.bio_forma
+0000edb0: 745f 6461 7461 2c0a 2020 2020 2020 2020  t_data,.        
+0000edc0: 2020 2020 636f 6c75 6d6e 5f66 6f72 6d61      column_forma
+0000edd0: 743d 7b30 3a20 2274 6578 7422 2c20 313a  t={0: "text", 1:
+0000ede0: 2022 6e65 7222 7d2c 0a20 2020 2020 2020   "ner"},.       
+0000edf0: 2020 2020 202a 2a63 6f72 7075 7361 7267       **corpusarg
+0000ee00: 732c 0a20 2020 2020 2020 2029 0a0a 2020  s,.        )..  
+0000ee10: 2020 6465 6620 5f64 6f77 6e6c 6f61 6428    def _download(
+0000ee20: 7365 6c66 2c20 7365 7474 696e 6729 3a0a  self, setting):.
+0000ee30: 2020 2020 2020 2020 5f55 524c 7320 3d20          _URLs = 
+0000ee40: 7b0a 2020 2020 2020 2020 2020 2020 2273  {.            "s
+0000ee50: 7570 6572 7669 7365 6422 3a20 2268 7474  upervised": "htt
+0000ee60: 7073 3a2f 2f63 6c6f 7564 2e74 7369 6e67  ps://cloud.tsing
+0000ee70: 6875 612e 6564 752e 636e 2f66 2f30 3932  hua.edu.cn/f/092
+0000ee80: 3635 3735 3061 6536 3334 3034 3239 3832  65750ae634042982
+0000ee90: 372f 3f64 6c3d 3122 2c0a 2020 2020 2020  7/?dl=1",.      
+0000eea0: 2020 2020 2020 2269 6e74 7261 223a 2022        "intra": "
+0000eeb0: 6874 7470 733a 2f2f 636c 6f75 642e 7473  https://cloud.ts
+0000eec0: 696e 6768 7561 2e65 6475 2e63 6e2f 662f  inghua.edu.cn/f/
+0000eed0: 6130 6433 6566 6465 6264 6464 3434 3132  a0d3efdebddd4412
+0000eee0: 6230 3763 2f3f 646c 3d31 222c 0a20 2020  b07c/?dl=1",.   
+0000eef0: 2020 2020 2020 2020 2022 696e 7465 7222           "inter"
+0000ef00: 3a20 2268 7474 7073 3a2f 2f63 6c6f 7564  : "https://cloud
+0000ef10: 2e74 7369 6e67 6875 612e 6564 752e 636e  .tsinghua.edu.cn
+0000ef20: 2f66 2f31 3635 3639 3364 3565 3638 6234  /f/165693d5e68b4
+0000ef30: 3335 3538 6639 622f 3f64 6c3d 3122 2c0a  3558f9b/?dl=1",.
+0000ef40: 2020 2020 2020 2020 7d0a 0a20 2020 2020          }..     
+0000ef50: 2020 206c 6f67 2e69 6e66 6f28 6622 4665     log.info(f"Fe
+0000ef60: 774e 4552 4420 287b 7365 7474 696e 677d  wNERD ({setting}
+0000ef70: 2920 6461 7461 7365 7420 6e6f 7420 666f  ) dataset not fo
+0000ef80: 756e 642c 2064 6f77 6e6c 6f61 6469 6e67  und, downloading
+0000ef90: 2e22 290a 2020 2020 2020 2020 646c 5f70  .").        dl_p
+0000efa0: 6174 6820 3d20 5f55 524c 735b 7365 7474  ath = _URLs[sett
+0000efb0: 696e 675d 0a20 2020 2020 2020 2064 6c5f  ing].        dl_
+0000efc0: 6469 7220 3d20 6361 6368 6564 5f70 6174  dir = cached_pat
+0000efd0: 6828 646c 5f70 6174 682c 2050 6174 6828  h(dl_path, Path(
+0000efe0: 2264 6174 6173 6574 7322 2920 2f20 7365  "datasets") / se
+0000eff0: 6c66 2e64 6174 6173 6574 5f6e 616d 6520  lf.dataset_name 
+0000f000: 2f20 7365 7474 696e 6729 0a0a 2020 2020  / setting)..    
+0000f010: 2020 2020 6966 2073 6574 7469 6e67 206e      if setting n
+0000f020: 6f74 2069 6e20 6f73 2e6c 6973 7464 6972  ot in os.listdir
+0000f030: 2873 656c 662e 6461 7461 5f66 6f6c 6465  (self.data_folde
+0000f040: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
+0000f050: 696d 706f 7274 207a 6970 6669 6c65 0a0a  import zipfile..
+0000f060: 2020 2020 2020 2020 2020 2020 6672 6f6d              from
+0000f070: 2074 7164 6d20 696d 706f 7274 2074 7164   tqdm import tqd
+0000f080: 6d0a 0a20 2020 2020 2020 2020 2020 206c  m..            l
+0000f090: 6f67 2e69 6e66 6f28 2246 6577 4e45 5244  og.info("FewNERD
+0000f0a0: 2064 6174 6173 6574 2068 6173 206e 6f74   dataset has not
+0000f0b0: 2062 6565 6e20 6578 7472 6163 7465 6420   been extracted 
+0000f0c0: 7965 742c 2065 7874 7261 6374 696e 6720  yet, extracting 
+0000f0d0: 6974 206e 6f77 2e20 5468 6973 206d 6967  it now. This mig
+0000f0e0: 6874 2074 616b 6520 6120 7768 696c 652e  ht take a while.
+0000f0f0: 2229 0a20 2020 2020 2020 2020 2020 2077  ").            w
+0000f100: 6974 6820 7a69 7066 696c 652e 5a69 7046  ith zipfile.ZipF
+0000f110: 696c 6528 646c 5f64 6972 2c20 2272 2229  ile(dl_dir, "r")
+0000f120: 2061 7320 7a69 705f 7265 663a 0a20 2020   as zip_ref:.   
+0000f130: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+0000f140: 2066 2069 6e20 7471 646d 287a 6970 5f72   f in tqdm(zip_r
+0000f150: 6566 2e6e 616d 656c 6973 7428 2929 3a0a  ef.namelist()):.
+0000f160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f170: 2020 2020 6966 2066 2e65 6e64 7377 6974      if f.endswit
+0000f180: 6828 222f 2229 3a0a 2020 2020 2020 2020  h("/"):.        
+0000f190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f1a0: 6f73 2e6d 616b 6564 6972 7328 7365 6c66  os.makedirs(self
+0000f1b0: 2e64 6174 615f 666f 6c64 6572 202f 2066  .data_folder / f
+0000f1c0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0000f1d0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0000f1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f1f0: 2020 2020 7a69 705f 7265 662e 6578 7472      zip_ref.extr
+0000f200: 6163 7428 662c 2070 6174 683d 7365 6c66  act(f, path=self
+0000f210: 2e64 6174 615f 666f 6c64 6572 290a 0a20  .data_folder).. 
+0000f220: 2020 2064 6566 205f 6765 6e65 7261 7465     def _generate
+0000f230: 5f73 706c 6974 7328 7365 6c66 2c20 7365  _splits(self, se
+0000f240: 7474 696e 6729 3a0a 2020 2020 2020 2020  tting):.        
+0000f250: 6c6f 672e 696e 666f 280a 2020 2020 2020  log.info(.      
+0000f260: 2020 2020 2020 6622 4665 774e 4552 4420        f"FewNERD 
+0000f270: 7370 6c69 7473 2066 6f72 207b 7365 7474  splits for {sett
+0000f280: 696e 677d 2068 6176 6520 6e6f 7420 6265  ing} have not be
+0000f290: 656e 2070 6172 7365 6420 696e 746f 2042  en parsed into B
+0000f2a0: 494f 2066 6f72 6d61 742c 2070 6172 7369  IO format, parsi
+0000f2b0: 6e67 2069 7420 6e6f 772e 2054 6869 7320  ng it now. This 
+0000f2c0: 6d69 6768 7420 7461 6b65 2061 2077 6869  might take a whi
+0000f2d0: 6c65 2e22 0a20 2020 2020 2020 2029 0a20  le.".        ). 
+0000f2e0: 2020 2020 2020 206f 732e 6d6b 6469 7228         os.mkdir(
+0000f2f0: 7365 6c66 2e62 696f 5f66 6f72 6d61 745f  self.bio_format_
+0000f300: 6461 7461 290a 2020 2020 2020 2020 666f  data).        fo
+0000f310: 7220 7370 6c69 7420 696e 206f 732e 6c69  r split in os.li
+0000f320: 7374 6469 7228 7365 6c66 2e64 6174 615f  stdir(self.data_
+0000f330: 666f 6c64 6572 202f 2073 6574 7469 6e67  folder / setting
+0000f340: 293a 0a20 2020 2020 2020 2020 2020 2077  ):.            w
+0000f350: 6974 6820 6f70 656e 2873 656c 662e 6461  ith open(self.da
+0000f360: 7461 5f66 6f6c 6465 7220 2f20 7365 7474  ta_folder / sett
+0000f370: 696e 6720 2f20 7370 6c69 7429 2061 7320  ing / split) as 
+0000f380: 736f 7572 6365 2c20 6f70 656e 2873 656c  source, open(sel
+0000f390: 662e 6269 6f5f 666f 726d 6174 5f64 6174  f.bio_format_dat
+0000f3a0: 6120 2f20 7370 6c69 742c 2022 7722 2920  a / split, "w") 
+0000f3b0: 6173 2074 6172 6765 743a 0a20 2020 2020  as target:.     
+0000f3c0: 2020 2020 2020 2020 2020 2070 7265 7669             previ
+0000f3d0: 6f75 735f 7461 6720 3d20 4e6f 6e65 0a20  ous_tag = None. 
+0000f3e0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0000f3f0: 6f72 206c 696e 6520 696e 2073 6f75 7263  or line in sourc
+0000f400: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0000f410: 2020 2020 2020 2069 6620 6c69 6e65 203d         if line =
+0000f420: 3d20 2222 206f 7220 6c69 6e65 203d 3d20  = "" or line == 
+0000f430: 225c 6e22 3a0a 2020 2020 2020 2020 2020  "\n":.          
+0000f440: 2020 2020 2020 2020 2020 2020 2020 7461                ta
+0000f450: 7267 6574 2e77 7269 7465 2822 5c6e 2229  rget.write("\n")
+0000f460: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000f470: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0000f480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f490: 2020 2074 6f6b 656e 2c20 7461 6720 3d20     token, tag = 
+0000f4a0: 6c69 6e65 2e73 706c 6974 2822 5c74 2229  line.split("\t")
+0000f4b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000f4c0: 2020 2020 2020 2020 2074 6167 203d 2074           tag = t
+0000f4d0: 6167 2e72 6570 6c61 6365 2822 5c6e 222c  ag.replace("\n",
+0000f4e0: 2022 2229 0a20 2020 2020 2020 2020 2020   "").           
+0000f4f0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0000f500: 7461 6720 3d3d 2022 4f22 3a0a 2020 2020  tag == "O":.    
+0000f510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f520: 2020 2020 2020 2020 7461 7267 6574 2e77          target.w
+0000f530: 7269 7465 2874 6f6b 656e 202b 2022 5c74  rite(token + "\t
+0000f540: 2220 2b20 7461 6720 2b20 225c 6e22 290a  " + tag + "\n").
+0000f550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f560: 2020 2020 2020 2020 656c 6966 2070 7265          elif pre
+0000f570: 7669 6f75 735f 7461 6720 213d 2074 6167  vious_tag != tag
+0000f580: 2061 6e64 2074 6167 2021 3d20 224f 223a   and tag != "O":
+0000f590: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000f5a0: 2020 2020 2020 2020 2020 2020 2074 6172               tar
+0000f5b0: 6765 742e 7772 6974 6528 746f 6b65 6e20  get.write(token 
+0000f5c0: 2b20 225c 7422 202b 2022 422d 2220 2b20  + "\t" + "B-" + 
+0000f5d0: 7461 6720 2b20 225c 6e22 290a 2020 2020  tag + "\n").    
+0000f5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f5f0: 2020 2020 656c 6966 2070 7265 7669 6f75      elif previou
+0000f600: 735f 7461 6720 3d3d 2074 6167 2061 6e64  s_tag == tag and
+0000f610: 2074 6167 2021 3d20 224f 223a 0a20 2020   tag != "O":.   
+0000f620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f630: 2020 2020 2020 2020 2074 6172 6765 742e           target.
+0000f640: 7772 6974 6528 746f 6b65 6e20 2b20 225c  write(token + "\
+0000f650: 7422 202b 2022 492d 2220 2b20 7461 6720  t" + "I-" + tag 
+0000f660: 2b20 225c 6e22 290a 2020 2020 2020 2020  + "\n").        
+0000f670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f680: 7072 6576 696f 7573 5f74 6167 203d 2074  previous_tag = t
+0000f690: 6167 0a0a 0a63 6c61 7373 2042 494f 5343  ag...class BIOSC
+0000f6a0: 4f50 4528 436f 6c75 6d6e 436f 7270 7573  OPE(ColumnCorpus
+0000f6b0: 293a 0a20 2020 2064 6566 205f 5f69 6e69  ):.    def __ini
+0000f6c0: 745f 5f28 0a20 2020 2020 2020 2073 656c  t__(.        sel
+0000f6d0: 662c 0a20 2020 2020 2020 2062 6173 655f  f,.        base_
+0000f6e0: 7061 7468 3a20 4f70 7469 6f6e 616c 5b55  path: Optional[U
+0000f6f0: 6e69 6f6e 5b73 7472 2c20 5061 7468 5d5d  nion[str, Path]]
+0000f700: 203d 204e 6f6e 652c 0a20 2020 2020 2020   = None,.       
+0000f710: 2069 6e5f 6d65 6d6f 7279 3a20 626f 6f6c   in_memory: bool
+0000f720: 203d 2054 7275 652c 0a20 2020 2020 2020   = True,.       
+0000f730: 202a 2a63 6f72 7075 7361 7267 732c 0a20   **corpusargs,. 
+0000f740: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
+0000f750: 2020 2020 2020 6261 7365 5f70 6174 6820        base_path 
+0000f760: 3d20 6b6f 6c69 6272 692e 6361 6368 655f  = kolibri.cache_
+0000f770: 726f 6f74 202f 2022 6461 7461 7365 7473  root / "datasets
+0000f780: 2220 6966 206e 6f74 2062 6173 655f 7061  " if not base_pa
+0000f790: 7468 2065 6c73 6520 5061 7468 2862 6173  th else Path(bas
+0000f7a0: 655f 7061 7468 290a 0a20 2020 2020 2020  e_path)..       
+0000f7b0: 2023 2063 6f6c 756d 6e20 666f 726d 6174   # column format
+0000f7c0: 0a20 2020 2020 2020 2063 6f6c 756d 6e73  .        columns
+0000f7d0: 203d 207b 303a 2022 7465 7874 222c 2031   = {0: "text", 1
+0000f7e0: 3a20 2274 6167 227d 0a0a 2020 2020 2020  : "tag"}..      
+0000f7f0: 2020 2320 7468 6973 2064 6174 6173 6574    # this dataset
+0000f800: 206e 616d 650a 2020 2020 2020 2020 6461   name.        da
+0000f810: 7461 7365 745f 6e61 6d65 203d 2073 656c  taset_name = sel
+0000f820: 662e 5f5f 636c 6173 735f 5f2e 5f5f 6e61  f.__class__.__na
+0000f830: 6d65 5f5f 2e6c 6f77 6572 2829 0a0a 2020  me__.lower()..  
+0000f840: 2020 2020 2020 6461 7461 5f66 6f6c 6465        data_folde
+0000f850: 7220 3d20 6261 7365 5f70 6174 6820 2f20  r = base_path / 
+0000f860: 6461 7461 7365 745f 6e61 6d65 0a0a 2020  dataset_name..  
+0000f870: 2020 2020 2020 2320 646f 776e 6c6f 6164        # download
+0000f880: 2064 6174 6120 6966 206e 6563 6573 7361   data if necessa
+0000f890: 7279 0a20 2020 2020 2020 2062 696f 7363  ry.        biosc
+0000f8a0: 6f70 655f 7061 7468 203d 2028 0a20 2020  ope_path = (.   
+0000f8b0: 2020 2020 2020 2020 2022 6874 7470 733a           "https:
+0000f8c0: 2f2f 7261 772e 6769 7468 7562 7573 6572  //raw.githubuser
+0000f8d0: 636f 6e74 656e 742e 636f 6d2f 7768 6f69  content.com/whoi
+0000f8e0: 736a 6f6e 6573 2f42 696f 5363 6f70 6553  sjones/BioScopeS
+0000f8f0: 6571 7565 6e63 654c 6162 656c 696e 6744  equenceLabelingD
+0000f900: 6174 612f 6d61 7374 6572 2f73 6571 7565  ata/master/seque
+0000f910: 6e63 655f 6c61 6265 6c65 642f 220a 2020  nce_labeled/".  
+0000f920: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0000f930: 6361 6368 6564 5f70 6174 6828 6622 7b62  cached_path(f"{b
+0000f940: 696f 7363 6f70 655f 7061 7468 7d6f 7574  ioscope_path}out
+0000f950: 7075 742e 7478 7422 2c20 5061 7468 2822  put.txt", Path("
+0000f960: 6461 7461 7365 7473 2229 202f 2064 6174  datasets") / dat
+0000f970: 6173 6574 5f6e 616d 6529 0a0a 2020 2020  aset_name)..    
+0000f980: 2020 2020 7375 7065 7228 292e 5f5f 696e      super().__in
+0000f990: 6974 5f5f 280a 2020 2020 2020 2020 2020  it__(.          
+0000f9a0: 2020 6461 7461 5f66 6f6c 6465 722c 0a20    data_folder,. 
+0000f9b0: 2020 2020 2020 2020 2020 2063 6f6c 756d             colum
+0000f9c0: 6e73 2c0a 2020 2020 2020 2020 2020 2020  ns,.            
+0000f9d0: 696e 5f6d 656d 6f72 793d 696e 5f6d 656d  in_memory=in_mem
+0000f9e0: 6f72 792c 0a20 2020 2020 2020 2020 2020  ory,.           
+0000f9f0: 2074 7261 696e 5f66 696c 653d 226f 7574   train_file="out
+0000fa00: 7075 742e 7478 7422 2c0a 2020 2020 2020  put.txt",.      
+0000fa10: 2020 2020 2020 2a2a 636f 7270 7573 6172        **corpusar
+0000fa20: 6773 2c0a 2020 2020 2020 2020 290a 0a0a  gs,.        )...
+0000fa30: 636c 6173 7320 4e45 525f 4152 4142 4943  class NER_ARABIC
+0000fa40: 5f41 4e45 5228 436f 6c75 6d6e 436f 7270  _ANER(ColumnCorp
+0000fa50: 7573 293a 0a20 2020 2064 6566 205f 5f69  us):.    def __i
+0000fa60: 6e69 745f 5f28 0a20 2020 2020 2020 2073  nit__(.        s
+0000fa70: 656c 662c 0a20 2020 2020 2020 2062 6173  elf,.        bas
+0000fa80: 655f 7061 7468 3a20 4f70 7469 6f6e 616c  e_path: Optional
+0000fa90: 5b55 6e69 6f6e 5b73 7472 2c20 5061 7468  [Union[str, Path
+0000faa0: 5d5d 203d 204e 6f6e 652c 0a20 2020 2020  ]] = None,.     
+0000fab0: 2020 2069 6e5f 6d65 6d6f 7279 3a20 626f     in_memory: bo
+0000fac0: 6f6c 203d 2054 7275 652c 0a20 2020 2020  ol = True,.     
+0000fad0: 2020 2064 6f63 756d 656e 745f 6173 5f73     document_as_s
+0000fae0: 6571 7565 6e63 653a 2062 6f6f 6c20 3d20  equence: bool = 
+0000faf0: 4661 6c73 652c 0a20 2020 2020 2020 202a  False,.        *
+0000fb00: 2a63 6f72 7075 7361 7267 732c 0a20 2020  *corpusargs,.   
+0000fb10: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
+0000fb20: 2020 2020 2222 2249 6e69 7469 616c 697a      """Initializ
+0000fb30: 6520 6120 7072 6570 726f 6365 7373 6564  e a preprocessed
+0000fb40: 2076 6572 7369 6f6e 206f 6620 7468 6520   version of the 
+0000fb50: 4172 6162 6963 204e 616d 6564 2045 6e74  Arabic Named Ent
+0000fb60: 6974 7920 5265 636f 676e 6974 696f 6e20  ity Recognition 
+0000fb70: 436f 7270 7573 2028 414e 4552 436f 7270  Corpus (ANERCorp
+0000fb80: 292e 0a0a 2020 2020 2020 2020 5468 6520  )...        The 
+0000fb90: 6461 7461 7365 7420 6973 2064 6f77 6e6c  dataset is downl
+0000fba0: 6f61 6465 6420 6672 6f6d 2068 7474 703a  oaded from http:
+0000fbb0: 2f2f 6375 7274 6973 2e6d 6c2e 636d 752e  //curtis.ml.cmu.
+0000fbc0: 6564 752f 772f 636f 7572 7365 732f 696e  edu/w/courses/in
+0000fbd0: 6465 782e 7068 702f 414e 4552 636f 7270  dex.php/ANERcorp
+0000fbe0: 0a20 2020 2020 2020 2043 6f6c 756d 6e20  .        Column 
+0000fbf0: 6f72 6465 7220 6973 2073 7761 7070 6564  order is swapped
+0000fc00: 0a20 2020 2020 2020 2054 6865 2066 6972  .        The fir
+0000fc10: 7374 2074 696d 6520 796f 7520 6361 6c6c  st time you call
+0000fc20: 2074 6869 7320 636f 6e73 7472 7563 746f   this constructo
+0000fc30: 7220 6974 2077 696c 6c20 6175 746f 6d61  r it will automa
+0000fc40: 7469 6361 6c6c 7920 646f 776e 6c6f 6164  tically download
+0000fc50: 2074 6865 2064 6174 6173 6574 2e0a 0a20   the dataset... 
+0000fc60: 2020 2020 2020 2041 7267 733a 0a20 2020         Args:.   
+0000fc70: 2020 2020 2020 2020 2062 6173 655f 7061           base_pa
+0000fc80: 7468 3a20 4465 6661 756c 7420 6973 204e  th: Default is N
+0000fc90: 6f6e 652c 206d 6561 6e69 6e67 2074 6861  one, meaning tha
+0000fca0: 7420 636f 7270 7573 2067 6574 7320 6175  t corpus gets au
+0000fcb0: 746f 2d64 6f77 6e6c 6f61 6465 6420 616e  to-downloaded an
+0000fcc0: 6420 6c6f 6164 6564 2e20 596f 7520 6361  d loaded. You ca
+0000fcd0: 6e20 6f76 6572 7269 6465 2074 6869 7320  n override this 
+0000fce0: 746f 2070 6f69 6e74 2074 6f20 6120 6469  to point to a di
+0000fcf0: 6666 6572 656e 7420 666f 6c64 6572 2062  fferent folder b
+0000fd00: 7574 2074 7970 6963 616c 6c79 2074 6869  ut typically thi
+0000fd10: 7320 7368 6f75 6c64 206e 6f74 2062 6520  s should not be 
+0000fd20: 6e65 6365 7373 6172 792e 0a20 2020 2020  necessary..     
+0000fd30: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
+0000fd40: 3a20 4966 2054 7275 652c 206b 6565 7073  : If True, keeps
+0000fd50: 2064 6174 6173 6574 2069 6e20 6d65 6d6f   dataset in memo
+0000fd60: 7279 2067 6976 696e 6720 7370 6565 6475  ry giving speedu
+0000fd70: 7073 2069 6e20 7472 6169 6e69 6e67 2e0a  ps in training..
+0000fd80: 2020 2020 2020 2020 2020 2020 646f 6375              docu
+0000fd90: 6d65 6e74 5f61 735f 7365 7175 656e 6365  ment_as_sequence
+0000fda0: 3a20 4966 2054 7275 652c 2061 6c6c 2073  : If True, all s
+0000fdb0: 656e 7465 6e63 6573 206f 6620 6120 646f  entences of a do
+0000fdc0: 6375 6d65 6e74 2061 7265 2072 6561 6420  cument are read 
+0000fdd0: 696e 746f 2061 2073 696e 676c 6520 5365  into a single Se
+0000fde0: 6e74 656e 6365 206f 626a 6563 740a 2020  ntence object.  
+0000fdf0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+0000fe00: 2020 6261 7365 5f70 6174 6820 3d20 6b6f    base_path = ko
+0000fe10: 6c69 6272 692e 6361 6368 655f 726f 6f74  libri.cache_root
+0000fe20: 202f 2022 6461 7461 7365 7473 2220 6966   / "datasets" if
+0000fe30: 206e 6f74 2062 6173 655f 7061 7468 2065   not base_path e
+0000fe40: 6c73 6520 5061 7468 2862 6173 655f 7061  lse Path(base_pa
+0000fe50: 7468 290a 0a20 2020 2020 2020 2023 2063  th)..        # c
+0000fe60: 6f6c 756d 6e20 666f 726d 6174 0a20 2020  olumn format.   
+0000fe70: 2020 2020 2063 6f6c 756d 6e73 203d 207b       columns = {
+0000fe80: 303a 2022 7465 7874 222c 2031 3a20 226e  0: "text", 1: "n
+0000fe90: 6572 227d 0a0a 2020 2020 2020 2020 2320  er"}..        # 
+0000fea0: 7468 6973 2064 6174 6173 6574 206e 616d  this dataset nam
+0000feb0: 650a 2020 2020 2020 2020 6461 7461 7365  e.        datase
+0000fec0: 745f 6e61 6d65 203d 2073 656c 662e 5f5f  t_name = self.__
+0000fed0: 636c 6173 735f 5f2e 5f5f 6e61 6d65 5f5f  class__.__name__
+0000fee0: 2e6c 6f77 6572 2829 0a0a 2020 2020 2020  .lower()..      
+0000fef0: 2020 2320 6465 6661 756c 7420 6461 7461    # default data
+0000ff00: 7365 7420 666f 6c64 6572 2069 7320 7468  set folder is th
+0000ff10: 6520 6361 6368 6520 726f 6f74 0a20 2020  e cache root.   
+0000ff20: 2020 2020 2069 6620 6e6f 7420 6261 7365       if not base
+0000ff30: 5f70 6174 683a 0a20 2020 2020 2020 2020  _path:.         
+0000ff40: 2020 2062 6173 655f 7061 7468 203d 206b     base_path = k
+0000ff50: 6f6c 6962 7269 2e63 6163 6865 5f72 6f6f  olibri.cache_roo
+0000ff60: 7420 2f20 2264 6174 6173 6574 7322 0a20  t / "datasets". 
+0000ff70: 2020 2020 2020 2064 6174 615f 666f 6c64         data_fold
+0000ff80: 6572 203d 2062 6173 655f 7061 7468 202f  er = base_path /
+0000ff90: 2064 6174 6173 6574 5f6e 616d 650a 0a20   dataset_name.. 
+0000ffa0: 2020 2020 2020 2023 2064 6f77 6e6c 6f61         # downloa
+0000ffb0: 6420 6461 7461 2069 6620 6e65 6365 7373  d data if necess
+0000ffc0: 6172 790a 2020 2020 2020 2020 616e 6572  ary.        aner
+0000ffd0: 636f 7270 5f70 6174 6820 3d20 2268 7474  corp_path = "htt
+0000ffe0: 7073 3a2f 2f6d 6567 616e 746f 7368 2e73  ps://megantosh.s
+0000fff0: 332e 6575 2d63 656e 7472 616c 2d31 2e61  3.eu-central-1.a
+00010000: 6d61 7a6f 6e61 7773 2e63 6f6d 2f41 4e45  mazonaws.com/ANE
+00010010: 5263 6f72 702f 220a 2020 2020 2020 2020  Rcorp/".        
+00010020: 2320 6361 6368 6564 5f70 6174 6828 6622  # cached_path(f"
+00010030: 7b61 6e65 7263 6f72 705f 7061 7468 7d74  {anercorp_path}t
+00010040: 6573 742e 7478 7422 2c20 5061 7468 2822  est.txt", Path("
+00010050: 6461 7461 7365 7473 2229 202f 2064 6174  datasets") / dat
+00010060: 6173 6574 5f6e 616d 6529 0a20 2020 2020  aset_name).     
+00010070: 2020 2063 6163 6865 645f 7061 7468 2866     cached_path(f
+00010080: 227b 616e 6572 636f 7270 5f70 6174 687d  "{anercorp_path}
+00010090: 7472 6169 6e2e 7478 7422 2c20 5061 7468  train.txt", Path
+000100a0: 2822 6461 7461 7365 7473 2229 202f 2064  ("datasets") / d
+000100b0: 6174 6173 6574 5f6e 616d 6529 0a0a 2020  ataset_name)..  
+000100c0: 2020 2020 2020 7375 7065 7228 292e 5f5f        super().__
+000100d0: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
+000100e0: 2020 2020 6461 7461 5f66 6f6c 6465 722c      data_folder,
+000100f0: 0a20 2020 2020 2020 2020 2020 2063 6f6c  .            col
+00010100: 756d 6e73 2c0a 2020 2020 2020 2020 2020  umns,.          
+00010110: 2020 656e 636f 6469 6e67 3d22 7574 662d    encoding="utf-
+00010120: 3822 2c0a 2020 2020 2020 2020 2020 2020  8",.            
+00010130: 696e 5f6d 656d 6f72 793d 696e 5f6d 656d  in_memory=in_mem
+00010140: 6f72 792c 0a20 2020 2020 2020 2020 2020  ory,.           
+00010150: 2064 6f63 756d 656e 745f 7365 7061 7261   document_separa
+00010160: 746f 725f 746f 6b65 6e3d 4e6f 6e65 2069  tor_token=None i
+00010170: 6620 6e6f 7420 646f 6375 6d65 6e74 5f61  f not document_a
+00010180: 735f 7365 7175 656e 6365 2065 6c73 6520  s_sequence else 
+00010190: 222d 444f 4353 5441 5254 2d22 2c0a 2020  "-DOCSTART-",.  
+000101a0: 2020 2020 2020 2020 2020 2a2a 636f 7270            **corp
+000101b0: 7573 6172 6773 2c0a 2020 2020 2020 2020  usargs,.        
+000101c0: 290a 0a0a 636c 6173 7320 4e45 525f 4152  )...class NER_AR
+000101d0: 4142 4943 5f41 514d 4152 2843 6f6c 756d  ABIC_AQMAR(Colum
+000101e0: 6e43 6f72 7075 7329 3a0a 2020 2020 6465  nCorpus):.    de
+000101f0: 6620 5f5f 696e 6974 5f5f 280a 2020 2020  f __init__(.    
+00010200: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
+00010210: 2020 6261 7365 5f70 6174 683a 204f 7074    base_path: Opt
+00010220: 696f 6e61 6c5b 556e 696f 6e5b 7374 722c  ional[Union[str,
+00010230: 2050 6174 685d 5d20 3d20 4e6f 6e65 2c0a   Path]] = None,.
+00010240: 2020 2020 2020 2020 696e 5f6d 656d 6f72          in_memor
+00010250: 793a 2062 6f6f 6c20 3d20 5472 7565 2c0a  y: bool = True,.
+00010260: 2020 2020 2020 2020 646f 6375 6d65 6e74          document
+00010270: 5f61 735f 7365 7175 656e 6365 3a20 626f  _as_sequence: bo
+00010280: 6f6c 203d 2046 616c 7365 2c0a 2020 2020  ol = False,.    
+00010290: 2020 2020 2a2a 636f 7270 7573 6172 6773      **corpusargs
+000102a0: 2c0a 2020 2020 2920 2d3e 204e 6f6e 653a  ,.    ) -> None:
+000102b0: 0a20 2020 2020 2020 2022 2222 496e 6974  .        """Init
+000102c0: 6961 6c69 7a65 2061 2070 7265 7072 6f63  ialize a preproc
+000102d0: 6573 7365 6420 616e 6420 6d6f 6469 6669  essed and modifi
+000102e0: 6564 2076 6572 7369 6f6e 206f 6620 7468  ed version of th
+000102f0: 6520 416d 6572 6963 616e 2061 6e64 2051  e American and Q
+00010300: 6174 6172 6920 4d6f 6465 6c69 6e67 206f  atari Modeling o
+00010310: 6620 4172 6162 6963 2028 4151 4d41 5229  f Arabic (AQMAR)
+00010320: 2064 6174 6173 6574 2e0a 0a20 2020 2020   dataset...     
+00010330: 2020 2054 6865 2064 6174 6173 6574 2069     The dataset i
+00010340: 7320 646f 776e 6c6f 6164 6564 2066 726f  s downloaded fro
+00010350: 6d20 2068 7474 703a 2f2f 7777 772e 6373  m  http://www.cs
+00010360: 2e63 6d75 2e65 6475 2f7e 6172 6b2f 4151  .cmu.edu/~ark/AQ
+00010370: 4d41 522f 0a0a 2020 2020 2020 2020 2d20  MAR/..        - 
+00010380: 4d6f 6469 6669 6361 7469 6f6e 7320 6672  Modifications fr
+00010390: 6f6d 206f 7269 6769 6e61 6c20 6461 7461  om original data
+000103a0: 7365 743a 204d 6973 6365 6c6c 616e 656f  set: Miscellaneo
+000103b0: 7573 2074 6167 7320 284d 4953 302c 204d  us tags (MIS0, M
+000103c0: 4953 312c 204d 4953 322c 204d 4953 3329  IS1, MIS2, MIS3)
+000103d0: 2061 7265 206d 6572 6765 6420 746f 206f   are merged to o
+000103e0: 6e65 2074 6167 2022 4d49 5343 2220 6173  ne tag "MISC" as
+000103f0: 2074 6865 7365 2063 6174 6567 6f72 6965   these categorie
+00010400: 7320 6465 7669 6174 6520 6163 726f 7373  s deviate across
+00010410: 2074 6865 206f 7269 6769 6e61 6c20 6461   the original da
+00010420: 7461 7365 740a 2020 2020 2020 2020 2d20  taset.        - 
+00010430: 5468 6520 3238 206f 7269 6769 6e61 6c20  The 28 original 
+00010440: 5769 6b69 7065 6469 6120 6172 7469 636c  Wikipedia articl
+00010450: 6573 2061 7265 206d 6572 6765 6420 696e  es are merged in
+00010460: 746f 2061 2073 696e 676c 6520 6669 6c65  to a single file
+00010470: 2063 6f6e 7461 696e 696e 6720 7468 6520   containing the 
+00010480: 6172 7469 636c 6573 2069 6e20 616c 7068  articles in alph
+00010490: 6162 6574 6963 616c 206f 7264 6572 0a0a  abetical order..
+000104a0: 2020 2020 2020 2020 5468 6520 6669 7273          The firs
+000104b0: 7420 7469 6d65 2079 6f75 2063 616c 6c20  t time you call 
+000104c0: 7468 6973 2063 6f6e 7374 7275 6374 6f72  this constructor
+000104d0: 2069 7420 7769 6c6c 2061 7574 6f6d 6174   it will automat
+000104e0: 6963 616c 6c79 2064 6f77 6e6c 6f61 6420  ically download 
+000104f0: 7468 6520 6461 7461 7365 742e 0a0a 2020  the dataset...  
+00010500: 2020 2020 2020 5468 6973 2064 6174 6173        This datas
+00010510: 6574 2069 7320 6c69 6365 6e73 6564 2075  et is licensed u
+00010520: 6e64 6572 2061 2043 7265 6174 6976 6520  nder a Creative 
+00010530: 436f 6d6d 6f6e 7320 4174 7472 6962 7574  Commons Attribut
+00010540: 696f 6e2d 5368 6172 6541 6c69 6b65 2033  ion-ShareAlike 3
+00010550: 2e30 2055 6e70 6f72 7465 6420 4c69 6365  .0 Unported Lice
+00010560: 6e73 652e 0a20 2020 2020 2020 2070 6c65  nse..        ple
+00010570: 6173 6520 6369 7465 3a20 2242 6568 7261  ase cite: "Behra
+00010580: 6e67 204d 6f68 6974 2c20 4e61 7468 616e  ng Mohit, Nathan
+00010590: 2053 6368 6e65 6964 6572 2c20 5269 7368   Schneider, Rish
+000105a0: 6176 2042 686f 776d 6963 6b2c 204b 656d  av Bhowmick, Kem
+000105b0: 616c 204f 666c 617a 6572 2c20 616e 6420  al Oflazer, and 
+000105c0: 4e6f 6168 2041 2e20 536d 6974 6820 2832  Noah A. Smith (2
+000105d0: 3031 3229 2c0a 2020 2020 2020 2020 5265  012),.        Re
+000105e0: 6361 6c6c 2d4f 7269 656e 7465 6420 4c65  call-Oriented Le
+000105f0: 6172 6e69 6e67 206f 6620 4e61 6d65 6420  arning of Named 
+00010600: 456e 7469 7469 6573 2069 6e20 4172 6162  Entities in Arab
+00010610: 6963 2057 696b 6970 6564 6961 2e20 5072  ic Wikipedia. Pr
+00010620: 6f63 6565 6469 6e67 7320 6f66 2045 4143  oceedings of EAC
+00010630: 4c2e 220a 0a20 2020 2020 2020 203a 7061  L."..        :pa
+00010640: 7261 6d20 6261 7365 5f70 6174 683a 2044  ram base_path: D
+00010650: 6566 6175 6c74 2069 7320 4e6f 6e65 2c20  efault is None, 
+00010660: 6d65 616e 696e 6720 7468 6174 2063 6f72  meaning that cor
+00010670: 7075 7320 6765 7473 2061 7574 6f2d 646f  pus gets auto-do
+00010680: 776e 6c6f 6164 6564 2061 6e64 206c 6f61  wnloaded and loa
+00010690: 6465 642e 2059 6f75 2063 616e 206f 7665  ded. You can ove
+000106a0: 7272 6964 6520 7468 6973 2074 6f20 706f  rride this to po
+000106b0: 696e 7420 746f 2061 2064 6966 6665 7265  int to a differe
+000106c0: 6e74 2066 6f6c 6465 7220 6275 7420 7479  nt folder but ty
+000106d0: 7069 6361 6c6c 7920 7468 6973 2073 686f  pically this sho
+000106e0: 756c 6420 6e6f 7420 6265 206e 6563 6573  uld not be neces
+000106f0: 7361 7279 2e0a 2020 2020 2020 2020 3a70  sary..        :p
+00010700: 6172 616d 2069 6e5f 6d65 6d6f 7279 3a20  aram in_memory: 
+00010710: 4966 2054 7275 652c 206b 6565 7073 2064  If True, keeps d
+00010720: 6174 6173 6574 2069 6e20 6d65 6d6f 7279  ataset in memory
+00010730: 2067 6976 696e 6720 7370 6565 6475 7073   giving speedups
+00010740: 2069 6e20 7472 6169 6e69 6e67 2e0a 2020   in training..  
+00010750: 2020 2020 2020 3a70 6172 616d 2064 6f63        :param doc
+00010760: 756d 656e 745f 6173 5f73 6571 7565 6e63  ument_as_sequenc
+00010770: 653a 2049 6620 5472 7565 2c20 616c 6c20  e: If True, all 
+00010780: 7365 6e74 656e 6365 7320 6f66 2061 2064  sentences of a d
+00010790: 6f63 756d 656e 7420 6172 6520 7265 6164  ocument are read
+000107a0: 2069 6e74 6f20 6120 7369 6e67 6c65 2053   into a single S
+000107b0: 656e 7465 6e63 6520 6f62 6a65 6374 0a20  entence object. 
+000107c0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+000107d0: 2020 2062 6173 655f 7061 7468 203d 206b     base_path = k
+000107e0: 6f6c 6962 7269 2e63 6163 6865 5f72 6f6f  olibri.cache_roo
+000107f0: 7420 2f20 2264 6174 6173 6574 7322 2069  t / "datasets" i
+00010800: 6620 6e6f 7420 6261 7365 5f70 6174 6820  f not base_path 
+00010810: 656c 7365 2050 6174 6828 6261 7365 5f70  else Path(base_p
+00010820: 6174 6829 0a0a 2020 2020 2020 2020 2320  ath)..        # 
+00010830: 636f 6c75 6d6e 2066 6f72 6d61 740a 2020  column format.  
+00010840: 2020 2020 2020 636f 6c75 6d6e 7320 3d20        columns = 
+00010850: 7b30 3a20 2274 6578 7422 2c20 313a 2022  {0: "text", 1: "
+00010860: 6e65 7222 7d0a 0a20 2020 2020 2020 2023  ner"}..        #
+00010870: 2074 6869 7320 6461 7461 7365 7420 6e61   this dataset na
+00010880: 6d65 0a20 2020 2020 2020 2064 6174 6173  me.        datas
+00010890: 6574 5f6e 616d 6520 3d20 7365 6c66 2e5f  et_name = self._
+000108a0: 5f63 6c61 7373 5f5f 2e5f 5f6e 616d 655f  _class__.__name_
+000108b0: 5f2e 6c6f 7765 7228 290a 0a20 2020 2020  _.lower()..     
+000108c0: 2020 2023 2064 6566 6175 6c74 2064 6174     # default dat
+000108d0: 6173 6574 2066 6f6c 6465 7220 6973 2074  aset folder is t
+000108e0: 6865 2063 6163 6865 2072 6f6f 740a 2020  he cache root.  
+000108f0: 2020 2020 2020 6966 206e 6f74 2062 6173        if not bas
+00010900: 655f 7061 7468 3a0a 2020 2020 2020 2020  e_path:.        
+00010910: 2020 2020 6261 7365 5f70 6174 6820 3d20      base_path = 
+00010920: 6b6f 6c69 6272 692e 6361 6368 655f 726f  kolibri.cache_ro
+00010930: 6f74 202f 2022 6461 7461 7365 7473 220a  ot / "datasets".
+00010940: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
+00010950: 6465 7220 3d20 6261 7365 5f70 6174 6820  der = base_path 
+00010960: 2f20 6461 7461 7365 745f 6e61 6d65 0a0a  / dataset_name..
+00010970: 2020 2020 2020 2020 2320 646f 776e 6c6f          # downlo
+00010980: 6164 2064 6174 6120 6966 206e 6563 6573  ad data if neces
+00010990: 7361 7279 0a20 2020 2020 2020 2061 716d  sary.        aqm
+000109a0: 6172 5f70 6174 6820 3d20 2268 7474 7073  ar_path = "https
+000109b0: 3a2f 2f6d 6567 616e 746f 7368 2e73 332e  ://megantosh.s3.
+000109c0: 6575 2d63 656e 7472 616c 2d31 2e61 6d61  eu-central-1.ama
+000109d0: 7a6f 6e61 7773 2e63 6f6d 2f41 514d 4152  zonaws.com/AQMAR
+000109e0: 2f22 0a20 2020 2020 2020 2023 2063 6163  /".        # cac
+000109f0: 6865 645f 7061 7468 2866 227b 616e 6572  hed_path(f"{aner
+00010a00: 636f 7270 5f70 6174 687d 7465 7374 2e74  corp_path}test.t
+00010a10: 7874 222c 2050 6174 6828 2264 6174 6173  xt", Path("datas
+00010a20: 6574 7322 2920 2f20 6461 7461 7365 745f  ets") / dataset_
+00010a30: 6e61 6d65 290a 2020 2020 2020 2020 6361  name).        ca
+00010a40: 6368 6564 5f70 6174 6828 6622 7b61 716d  ched_path(f"{aqm
+00010a50: 6172 5f70 6174 687d 7472 6169 6e2e 7478  ar_path}train.tx
+00010a60: 7422 2c20 5061 7468 2822 6461 7461 7365  t", Path("datase
+00010a70: 7473 2229 202f 2064 6174 6173 6574 5f6e  ts") / dataset_n
+00010a80: 616d 6529 0a0a 2020 2020 2020 2020 7375  ame)..        su
+00010a90: 7065 7228 292e 5f5f 696e 6974 5f5f 280a  per().__init__(.
+00010aa0: 2020 2020 2020 2020 2020 2020 6461 7461              data
+00010ab0: 5f66 6f6c 6465 722c 0a20 2020 2020 2020  _folder,.       
+00010ac0: 2020 2020 2063 6f6c 756d 6e73 2c0a 2020       columns,.  
+00010ad0: 2020 2020 2020 2020 2020 656e 636f 6469            encodi
+00010ae0: 6e67 3d22 7574 662d 3822 2c0a 2020 2020  ng="utf-8",.    
+00010af0: 2020 2020 2020 2020 696e 5f6d 656d 6f72          in_memor
+00010b00: 793d 696e 5f6d 656d 6f72 792c 0a20 2020  y=in_memory,.   
+00010b10: 2020 2020 2020 2020 2064 6f63 756d 656e           documen
+00010b20: 745f 7365 7061 7261 746f 725f 746f 6b65  t_separator_toke
+00010b30: 6e3d 4e6f 6e65 2069 6620 6e6f 7420 646f  n=None if not do
+00010b40: 6375 6d65 6e74 5f61 735f 7365 7175 656e  cument_as_sequen
+00010b50: 6365 2065 6c73 6520 222d 444f 4353 5441  ce else "-DOCSTA
+00010b60: 5254 2d22 2c0a 2020 2020 2020 2020 2020  RT-",.          
+00010b70: 2020 2a2a 636f 7270 7573 6172 6773 2c0a    **corpusargs,.
+00010b80: 2020 2020 2020 2020 290a 0a0a 636c 6173          )...clas
+00010b90: 7320 4e45 525f 4241 5351 5545 2843 6f6c  s NER_BASQUE(Col
+00010ba0: 756d 6e43 6f72 7075 7329 3a0a 2020 2020  umnCorpus):.    
+00010bb0: 6465 6620 5f5f 696e 6974 5f5f 280a 2020  def __init__(.  
+00010bc0: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
+00010bd0: 2020 2020 6261 7365 5f70 6174 683a 204f      base_path: O
+00010be0: 7074 696f 6e61 6c5b 556e 696f 6e5b 7374  ptional[Union[st
+00010bf0: 722c 2050 6174 685d 5d20 3d20 4e6f 6e65  r, Path]] = None
+00010c00: 2c0a 2020 2020 2020 2020 696e 5f6d 656d  ,.        in_mem
+00010c10: 6f72 793a 2062 6f6f 6c20 3d20 5472 7565  ory: bool = True
+00010c20: 2c0a 2020 2020 2020 2020 2a2a 636f 7270  ,.        **corp
+00010c30: 7573 6172 6773 2c0a 2020 2020 2920 2d3e  usargs,.    ) ->
+00010c40: 204e 6f6e 653a 0a20 2020 2020 2020 2062   None:.        b
+00010c50: 6173 655f 7061 7468 203d 206b 6f6c 6962  ase_path = kolib
+00010c60: 7269 2e63 6163 6865 5f72 6f6f 7420 2f20  ri.cache_root / 
+00010c70: 2264 6174 6173 6574 7322 2069 6620 6e6f  "datasets" if no
+00010c80: 7420 6261 7365 5f70 6174 6820 656c 7365  t base_path else
+00010c90: 2050 6174 6828 6261 7365 5f70 6174 6829   Path(base_path)
+00010ca0: 0a0a 2020 2020 2020 2020 2320 636f 6c75  ..        # colu
+00010cb0: 6d6e 2066 6f72 6d61 740a 2020 2020 2020  mn format.      
+00010cc0: 2020 636f 6c75 6d6e 7320 3d20 7b30 3a20    columns = {0: 
+00010cd0: 2274 6578 7422 2c20 313a 2022 6e65 7222  "text", 1: "ner"
+00010ce0: 7d0a 0a20 2020 2020 2020 2023 2074 6869  }..        # thi
+00010cf0: 7320 6461 7461 7365 7420 6e61 6d65 0a20  s dataset name. 
+00010d00: 2020 2020 2020 2064 6174 6173 6574 5f6e         dataset_n
+00010d10: 616d 6520 3d20 7365 6c66 2e5f 5f63 6c61  ame = self.__cla
+00010d20: 7373 5f5f 2e5f 5f6e 616d 655f 5f2e 6c6f  ss__.__name__.lo
+00010d30: 7765 7228 290a 0a20 2020 2020 2020 2064  wer()..        d
+00010d40: 6174 615f 666f 6c64 6572 203d 2062 6173  ata_folder = bas
+00010d50: 655f 7061 7468 202f 2064 6174 6173 6574  e_path / dataset
+00010d60: 5f6e 616d 650a 0a20 2020 2020 2020 2023  _name..        #
+00010d70: 2064 6f77 6e6c 6f61 6420 6461 7461 2069   download data i
+00010d80: 6620 6e65 6365 7373 6172 790a 2020 2020  f necessary.    
+00010d90: 2020 2020 6e65 725f 6261 7371 7565 5f70      ner_basque_p
+00010da0: 6174 6820 3d20 2268 7474 703a 2f2f 6978  ath = "http://ix
+00010db0: 6132 2e73 692e 6568 752e 6575 732f 6569  a2.si.ehu.eus/ei
+00010dc0: 6563 2f22 0a20 2020 2020 2020 2064 6174  ec/".        dat
+00010dd0: 615f 7061 7468 203d 206b 6f6c 6962 7269  a_path = kolibri
+00010de0: 2e63 6163 6865 5f72 6f6f 7420 2f20 2264  .cache_root / "d
+00010df0: 6174 6173 6574 7322 202f 2064 6174 6173  atasets" / datas
+00010e00: 6574 5f6e 616d 650a 2020 2020 2020 2020  et_name.        
+00010e10: 6461 7461 5f66 696c 6520 3d20 6461 7461  data_file = data
+00010e20: 5f70 6174 6820 2f20 226e 616d 6564 5f65  _path / "named_e
+00010e30: 6e74 5f65 752e 7472 6169 6e22 0a20 2020  nt_eu.train".   
+00010e40: 2020 2020 2069 6620 6e6f 7420 6461 7461       if not data
+00010e50: 5f66 696c 652e 6973 5f66 696c 6528 293a  _file.is_file():
+00010e60: 0a20 2020 2020 2020 2020 2020 2063 6163  .            cac
+00010e70: 6865 645f 7061 7468 2866 227b 6e65 725f  hed_path(f"{ner_
+00010e80: 6261 7371 7565 5f70 6174 687d 2f65 6965  basque_path}/eie
+00010e90: 635f 7631 2e30 2e74 677a 222c 2050 6174  c_v1.0.tgz", Pat
+00010ea0: 6828 2264 6174 6173 6574 7322 2920 2f20  h("datasets") / 
+00010eb0: 6461 7461 7365 745f 6e61 6d65 290a 2020  dataset_name).  
+00010ec0: 2020 2020 2020 2020 2020 696d 706f 7274            import
+00010ed0: 2073 6875 7469 6c0a 2020 2020 2020 2020   shutil.        
+00010ee0: 2020 2020 696d 706f 7274 2074 6172 6669      import tarfi
+00010ef0: 6c65 0a0a 2020 2020 2020 2020 2020 2020  le..            
+00010f00: 7769 7468 2074 6172 6669 6c65 2e6f 7065  with tarfile.ope
+00010f10: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
+00010f20: 2020 206b 6f6c 6962 7269 2e63 6163 6865     kolibri.cache
+00010f30: 5f72 6f6f 7420 2f20 2264 6174 6173 6574  _root / "dataset
+00010f40: 7322 202f 2064 6174 6173 6574 5f6e 616d  s" / dataset_nam
+00010f50: 6520 2f20 2265 6965 635f 7631 2e30 2e74  e / "eiec_v1.0.t
+00010f60: 677a 222c 0a20 2020 2020 2020 2020 2020  gz",.           
+00010f70: 2020 2020 2022 723a 677a 222c 0a20 2020       "r:gz",.   
+00010f80: 2020 2020 2020 2020 2029 2061 7320 665f           ) as f_
+00010f90: 696e 3a0a 2020 2020 2020 2020 2020 2020  in:.            
+00010fa0: 2020 2020 636f 7270 7573 5f66 696c 6573      corpus_files
+00010fb0: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
+00010fc0: 2020 2020 2020 2020 2022 6569 6563 5f76           "eiec_v
+00010fd0: 312e 302f 6e61 6d65 645f 656e 745f 6575  1.0/named_ent_eu
+00010fe0: 2e74 7261 696e 222c 0a20 2020 2020 2020  .train",.       
+00010ff0: 2020 2020 2020 2020 2020 2020 2022 6569               "ei
+00011000: 6563 5f76 312e 302f 6e61 6d65 645f 656e  ec_v1.0/named_en
+00011010: 745f 6575 2e74 6573 7422 2c0a 2020 2020  t_eu.test",.    
+00011020: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+00011030: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+00011040: 7220 636f 7270 7573 5f66 696c 6520 696e  r corpus_file in
+00011050: 2063 6f72 7075 735f 6669 6c65 733a 0a20   corpus_files:. 
+00011060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011070: 2020 2066 5f69 6e2e 6578 7472 6163 7428     f_in.extract(
+00011080: 636f 7270 7573 5f66 696c 652c 2064 6174  corpus_file, dat
+00011090: 615f 7061 7468 290a 2020 2020 2020 2020  a_path).        
+000110a0: 2020 2020 2020 2020 2020 2020 7368 7574              shut
+000110b0: 696c 2e6d 6f76 6528 6622 7b64 6174 615f  il.move(f"{data_
+000110c0: 7061 7468 7d2f 7b63 6f72 7075 735f 6669  path}/{corpus_fi
+000110d0: 6c65 7d22 2c20 6461 7461 5f70 6174 6829  le}", data_path)
+000110e0: 0a0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
+000110f0: 292e 5f5f 696e 6974 5f5f 280a 2020 2020  ).__init__(.    
+00011100: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
+00011110: 6465 722c 0a20 2020 2020 2020 2020 2020  der,.           
+00011120: 2063 6f6c 756d 6e73 2c0a 2020 2020 2020   columns,.      
+00011130: 2020 2020 2020 696e 5f6d 656d 6f72 793d        in_memory=
+00011140: 696e 5f6d 656d 6f72 792c 0a20 2020 2020  in_memory,.     
+00011150: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
+00011160: 7267 732c 0a20 2020 2020 2020 2029 0a0a  rgs,.        )..
+00011170: 0a63 6c61 7373 204e 4552 5f43 4849 4e45  .class NER_CHINE
+00011180: 5345 5f57 4549 424f 2843 6f6c 756d 6e43  SE_WEIBO(ColumnC
+00011190: 6f72 7075 7329 3a0a 2020 2020 6465 6620  orpus):.    def 
+000111a0: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
+000111b0: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
+000111c0: 6261 7365 5f70 6174 683a 204f 7074 696f  base_path: Optio
+000111d0: 6e61 6c5b 556e 696f 6e5b 7374 722c 2050  nal[Union[str, P
+000111e0: 6174 685d 5d20 3d20 4e6f 6e65 2c0a 2020  ath]] = None,.  
+000111f0: 2020 2020 2020 696e 5f6d 656d 6f72 793a        in_memory:
+00011200: 2062 6f6f 6c20 3d20 5472 7565 2c0a 2020   bool = True,.  
+00011210: 2020 2020 2020 646f 6375 6d65 6e74 5f61        document_a
+00011220: 735f 7365 7175 656e 6365 3a20 626f 6f6c  s_sequence: bool
+00011230: 203d 2046 616c 7365 2c0a 2020 2020 2020   = False,.      
+00011240: 2020 2a2a 636f 7270 7573 6172 6773 2c0a    **corpusargs,.
+00011250: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
+00011260: 2020 2020 2020 2022 2222 496e 6974 6961         """Initia
+00011270: 6c69 7a65 2074 6865 2057 4549 424f 5f4e  lize the WEIBO_N
+00011280: 4552 2063 6f72 7075 732e 0a0a 2020 2020  ER corpus...    
+00011290: 2020 2020 5468 6520 6669 7273 7420 7469      The first ti
+000112a0: 6d65 2079 6f75 2063 616c 6c20 7468 6973  me you call this
+000112b0: 2063 6f6e 7374 7275 6374 6f72 2069 7420   constructor it 
+000112c0: 7769 6c6c 2061 7574 6f6d 6174 6963 616c  will automatical
+000112d0: 6c79 2064 6f77 6e6c 6f61 6420 7468 6520  ly download the 
+000112e0: 6461 7461 7365 742e 0a0a 2020 2020 2020  dataset...      
+000112f0: 2020 4172 6773 3a0a 2020 2020 2020 2020    Args:.        
+00011300: 2020 2020 6261 7365 5f70 6174 683a 2044      base_path: D
+00011310: 6566 6175 6c74 2069 7320 4e6f 6e65 2c20  efault is None, 
+00011320: 6d65 616e 696e 6720 7468 6174 2063 6f72  meaning that cor
+00011330: 7075 7320 6765 7473 2061 7574 6f2d 646f  pus gets auto-do
+00011340: 776e 6c6f 6164 6564 2061 6e64 206c 6f61  wnloaded and loa
+00011350: 6465 642e 2059 6f75 2063 616e 206f 7665  ded. You can ove
+00011360: 7272 6964 6520 7468 6973 2074 6f20 706f  rride this to po
+00011370: 696e 7420 746f 2061 2064 6966 6665 7265  int to a differe
+00011380: 6e74 2066 6f6c 6465 7220 6275 7420 7479  nt folder but ty
+00011390: 7069 6361 6c6c 7920 7468 6973 2073 686f  pically this sho
+000113a0: 756c 6420 6e6f 7420 6265 206e 6563 6573  uld not be neces
+000113b0: 7361 7279 2e0a 2020 2020 2020 2020 2020  sary..          
+000113c0: 2020 696e 5f6d 656d 6f72 793a 2049 6620    in_memory: If 
+000113d0: 5472 7565 2c20 6b65 6570 7320 6461 7461  True, keeps data
+000113e0: 7365 7420 696e 206d 656d 6f72 7920 6769  set in memory gi
+000113f0: 7669 6e67 2073 7065 6564 7570 7320 696e  ving speedups in
+00011400: 2074 7261 696e 696e 672e 0a20 2020 2020   training..     
+00011410: 2020 2020 2020 2064 6f63 756d 656e 745f         document_
+00011420: 6173 5f73 6571 7565 6e63 653a 2049 6620  as_sequence: If 
+00011430: 5472 7565 2c20 616c 6c20 7365 6e74 656e  True, all senten
+00011440: 6365 7320 6f66 2061 2064 6f63 756d 656e  ces of a documen
+00011450: 7420 6172 6520 7265 6164 2069 6e74 6f20  t are read into 
+00011460: 6120 7369 6e67 6c65 2053 656e 7465 6e63  a single Sentenc
+00011470: 6520 6f62 6a65 6374 0a20 2020 2020 2020  e object.       
+00011480: 2022 2222 0a20 2020 2020 2020 2062 6173   """.        bas
+00011490: 655f 7061 7468 203d 206b 6f6c 6962 7269  e_path = kolibri
+000114a0: 2e63 6163 6865 5f72 6f6f 7420 2f20 2264  .cache_root / "d
+000114b0: 6174 6173 6574 7322 2069 6620 6e6f 7420  atasets" if not 
+000114c0: 6261 7365 5f70 6174 6820 656c 7365 2050  base_path else P
+000114d0: 6174 6828 6261 7365 5f70 6174 6829 0a0a  ath(base_path)..
+000114e0: 2020 2020 2020 2020 2320 636f 6c75 6d6e          # column
+000114f0: 2066 6f72 6d61 740a 2020 2020 2020 2020   format.        
+00011500: 636f 6c75 6d6e 7320 3d20 7b30 3a20 2274  columns = {0: "t
+00011510: 6578 7422 2c20 313a 2022 6e65 7222 7d0a  ext", 1: "ner"}.
+00011520: 0a20 2020 2020 2020 2023 2074 6869 7320  .        # this 
+00011530: 6461 7461 7365 7420 6e61 6d65 0a20 2020  dataset name.   
+00011540: 2020 2020 2064 6174 6173 6574 5f6e 616d       dataset_nam
+00011550: 6520 3d20 7365 6c66 2e5f 5f63 6c61 7373  e = self.__class
+00011560: 5f5f 2e5f 5f6e 616d 655f 5f2e 6c6f 7765  __.__name__.lowe
+00011570: 7228 290a 0a20 2020 2020 2020 2064 6174  r()..        dat
+00011580: 615f 666f 6c64 6572 203d 2062 6173 655f  a_folder = base_
+00011590: 7061 7468 202f 2064 6174 6173 6574 5f6e  path / dataset_n
+000115a0: 616d 650a 0a20 2020 2020 2020 2023 2064  ame..        # d
+000115b0: 6f77 6e6c 6f61 6420 6461 7461 2069 6620  ownload data if 
+000115c0: 6e65 6365 7373 6172 790a 2020 2020 2020  necessary.      
+000115d0: 2020 7765 6962 6f4e 4552 5f63 6f6e 6c6c    weiboNER_conll
+000115e0: 5f70 6174 6820 3d20 2268 7474 7073 3a2f  _path = "https:/
+000115f0: 2f72 6177 2e67 6974 6875 6275 7365 7263  /raw.githubuserc
+00011600: 6f6e 7465 6e74 2e63 6f6d 2f38 3733 3032  ontent.com/87302
+00011610: 3338 302f 5745 4942 4f5f 4e45 522f 6d61  380/WEIBO_NER/ma
+00011620: 696e 2f64 6174 612f 220a 2020 2020 2020  in/data/".      
+00011630: 2020 6361 6368 6564 5f70 6174 6828 0a20    cached_path(. 
+00011640: 2020 2020 2020 2020 2020 2066 227b 7765             f"{we
+00011650: 6962 6f4e 4552 5f63 6f6e 6c6c 5f70 6174  iboNER_conll_pat
+00011660: 687d 7765 6962 6f4e 4552 5f32 6e64 5f63  h}weiboNER_2nd_c
+00011670: 6f6e 6c6c 5f66 6f72 6d61 742e 7472 6169  onll_format.trai
+00011680: 6e22 2c0a 2020 2020 2020 2020 2020 2020  n",.            
+00011690: 5061 7468 2822 6461 7461 7365 7473 2229  Path("datasets")
+000116a0: 202f 2064 6174 6173 6574 5f6e 616d 652c   / dataset_name,
+000116b0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+000116c0: 2020 2063 6163 6865 645f 7061 7468 280a     cached_path(.
+000116d0: 2020 2020 2020 2020 2020 2020 6622 7b77              f"{w
+000116e0: 6569 626f 4e45 525f 636f 6e6c 6c5f 7061  eiboNER_conll_pa
+000116f0: 7468 7d77 6569 626f 4e45 525f 326e 645f  th}weiboNER_2nd_
+00011700: 636f 6e6c 6c5f 666f 726d 6174 2e74 6573  conll_format.tes
+00011710: 7422 2c0a 2020 2020 2020 2020 2020 2020  t",.            
+00011720: 5061 7468 2822 6461 7461 7365 7473 2229  Path("datasets")
+00011730: 202f 2064 6174 6173 6574 5f6e 616d 652c   / dataset_name,
+00011740: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00011750: 2020 2063 6163 6865 645f 7061 7468 280a     cached_path(.
+00011760: 2020 2020 2020 2020 2020 2020 6622 7b77              f"{w
+00011770: 6569 626f 4e45 525f 636f 6e6c 6c5f 7061  eiboNER_conll_pa
+00011780: 7468 7d77 6569 626f 4e45 525f 326e 645f  th}weiboNER_2nd_
+00011790: 636f 6e6c 6c5f 666f 726d 6174 2e64 6576  conll_format.dev
+000117a0: 222c 0a20 2020 2020 2020 2020 2020 2050  ",.            P
+000117b0: 6174 6828 2264 6174 6173 6574 7322 2920  ath("datasets") 
+000117c0: 2f20 6461 7461 7365 745f 6e61 6d65 2c0a  / dataset_name,.
+000117d0: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+000117e0: 2020 2073 7570 6572 2829 2e5f 5f69 6e69     super().__ini
+000117f0: 745f 5f28 0a20 2020 2020 2020 2020 2020  t__(.           
+00011800: 2064 6174 615f 666f 6c64 6572 2c0a 2020   data_folder,.  
+00011810: 2020 2020 2020 2020 2020 636f 6c75 6d6e            column
+00011820: 732c 0a20 2020 2020 2020 2020 2020 2065  s,.            e
+00011830: 6e63 6f64 696e 673d 2275 7466 2d38 222c  ncoding="utf-8",
+00011840: 0a20 2020 2020 2020 2020 2020 2069 6e5f  .            in_
+00011850: 6d65 6d6f 7279 3d69 6e5f 6d65 6d6f 7279  memory=in_memory
+00011860: 2c0a 2020 2020 2020 2020 2020 2020 7472  ,.            tr
+00011870: 6169 6e5f 6669 6c65 3d22 7765 6962 6f4e  ain_file="weiboN
+00011880: 4552 5f32 6e64 5f63 6f6e 6c6c 5f66 6f72  ER_2nd_conll_for
+00011890: 6d61 742e 7472 6169 6e22 2c0a 2020 2020  mat.train",.    
+000118a0: 2020 2020 2020 2020 7465 7374 5f66 696c          test_fil
+000118b0: 653d 2277 6569 626f 4e45 525f 326e 645f  e="weiboNER_2nd_
+000118c0: 636f 6e6c 6c5f 666f 726d 6174 2e74 6573  conll_format.tes
+000118d0: 7422 2c0a 2020 2020 2020 2020 2020 2020  t",.            
+000118e0: 6465 765f 6669 6c65 3d22 7765 6962 6f4e  dev_file="weiboN
+000118f0: 4552 5f32 6e64 5f63 6f6e 6c6c 5f66 6f72  ER_2nd_conll_for
+00011900: 6d61 742e 6465 7622 2c0a 2020 2020 2020  mat.dev",.      
+00011910: 2020 2020 2020 646f 6375 6d65 6e74 5f73        document_s
+00011920: 6570 6172 6174 6f72 5f74 6f6b 656e 3d4e  eparator_token=N
+00011930: 6f6e 6520 6966 206e 6f74 2064 6f63 756d  one if not docum
+00011940: 656e 745f 6173 5f73 6571 7565 6e63 6520  ent_as_sequence 
+00011950: 656c 7365 2022 2d44 4f43 5354 4152 542d  else "-DOCSTART-
+00011960: 222c 0a20 2020 2020 2020 2020 2020 202a  ",.            *
+00011970: 2a63 6f72 7075 7361 7267 732c 0a20 2020  *corpusargs,.   
+00011980: 2020 2020 2029 0a0a 0a63 6c61 7373 204e       )...class N
+00011990: 4552 5f44 414e 4953 485f 4441 4e45 2843  ER_DANISH_DANE(C
+000119a0: 6f6c 756d 6e43 6f72 7075 7329 3a0a 2020  olumnCorpus):.  
+000119b0: 2020 6465 6620 5f5f 696e 6974 5f5f 280a    def __init__(.
+000119c0: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
+000119d0: 2020 2020 2020 6261 7365 5f70 6174 683a        base_path:
+000119e0: 204f 7074 696f 6e61 6c5b 556e 696f 6e5b   Optional[Union[
+000119f0: 7374 722c 2050 6174 685d 5d20 3d20 4e6f  str, Path]] = No
+00011a00: 6e65 2c0a 2020 2020 2020 2020 696e 5f6d  ne,.        in_m
+00011a10: 656d 6f72 793a 2062 6f6f 6c20 3d20 5472  emory: bool = Tr
+00011a20: 7565 2c0a 2020 2020 2020 2020 2a2a 636f  ue,.        **co
+00011a30: 7270 7573 6172 6773 2c0a 2020 2020 2920  rpusargs,.    ) 
+00011a40: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+00011a50: 2062 6173 655f 7061 7468 203d 206b 6f6c   base_path = kol
+00011a60: 6962 7269 2e63 6163 6865 5f72 6f6f 7420  ibri.cache_root 
+00011a70: 2f20 2264 6174 6173 6574 7322 2069 6620  / "datasets" if 
+00011a80: 6e6f 7420 6261 7365 5f70 6174 6820 656c  not base_path el
+00011a90: 7365 2050 6174 6828 6261 7365 5f70 6174  se Path(base_pat
+00011aa0: 6829 0a0a 2020 2020 2020 2020 2320 636f  h)..        # co
+00011ab0: 6c75 6d6e 2066 6f72 6d61 740a 2020 2020  lumn format.    
+00011ac0: 2020 2020 636f 6c75 6d6e 7320 3d20 7b31      columns = {1
+00011ad0: 3a20 2274 6578 7422 2c20 333a 2022 706f  : "text", 3: "po
+00011ae0: 7322 2c20 393a 2022 6e65 7222 7d0a 0a20  s", 9: "ner"}.. 
+00011af0: 2020 2020 2020 2023 2074 6869 7320 6461         # this da
+00011b00: 7461 7365 7420 6e61 6d65 0a20 2020 2020  taset name.     
+00011b10: 2020 2064 6174 6173 6574 5f6e 616d 6520     dataset_name 
+00011b20: 3d20 7365 6c66 2e5f 5f63 6c61 7373 5f5f  = self.__class__
+00011b30: 2e5f 5f6e 616d 655f 5f2e 6c6f 7765 7228  .__name__.lower(
+00011b40: 290a 0a20 2020 2020 2020 2064 6174 615f  )..        data_
+00011b50: 666f 6c64 6572 203d 2062 6173 655f 7061  folder = base_pa
+00011b60: 7468 202f 2064 6174 6173 6574 5f6e 616d  th / dataset_nam
+00011b70: 650a 0a20 2020 2020 2020 2023 2064 6f77  e..        # dow
+00011b80: 6e6c 6f61 6420 6461 7461 2069 6620 6e65  nload data if ne
+00011b90: 6365 7373 6172 790a 2020 2020 2020 2020  cessary.        
+00011ba0: 6461 7461 5f70 6174 6820 3d20 6b6f 6c69  data_path = koli
+00011bb0: 6272 692e 6361 6368 655f 726f 6f74 202f  bri.cache_root /
+00011bc0: 2022 6461 7461 7365 7473 2220 2f20 6461   "datasets" / da
+00011bd0: 7461 7365 745f 6e61 6d65 0a20 2020 2020  taset_name.     
+00011be0: 2020 2074 7261 696e 5f64 6174 615f 6669     train_data_fi
+00011bf0: 6c65 203d 2064 6174 615f 7061 7468 202f  le = data_path /
+00011c00: 2022 6464 742e 7472 6169 6e2e 636f 6e6c   "ddt.train.conl
+00011c10: 6c75 220a 2020 2020 2020 2020 6966 206e  lu".        if n
+00011c20: 6f74 2074 7261 696e 5f64 6174 615f 6669  ot train_data_fi
+00011c30: 6c65 2e69 735f 6669 6c65 2829 3a0a 2020  le.is_file():.  
+00011c40: 2020 2020 2020 2020 2020 7465 6d70 5f66            temp_f
+00011c50: 696c 6520 3d20 6361 6368 6564 5f70 6174  ile = cached_pat
+00011c60: 6828 0a20 2020 2020 2020 2020 2020 2020  h(.             
+00011c70: 2020 2022 6874 7470 733a 2f2f 6461 6e6c     "https://danl
+00011c80: 702e 616c 6578 616e 6472 612e 646b 2f33  p.alexandra.dk/3
+00011c90: 3034 6264 3135 3964 3564 652f 6461 7461  04bd159d5de/data
+00011ca0: 7365 7473 2f64 6474 2e7a 6970 222c 0a20  sets/ddt.zip",. 
+00011cb0: 2020 2020 2020 2020 2020 2020 2020 2050                 P
+00011cc0: 6174 6828 2264 6174 6173 6574 7322 2920  ath("datasets") 
+00011cd0: 2f20 6461 7461 7365 745f 6e61 6d65 2c0a  / dataset_name,.
+00011ce0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+00011cf0: 2020 2020 2020 2020 2020 6672 6f6d 207a            from z
+00011d00: 6970 6669 6c65 2069 6d70 6f72 7420 5a69  ipfile import Zi
+00011d10: 7046 696c 650a 0a20 2020 2020 2020 2020  pFile..         
+00011d20: 2020 2077 6974 6820 5a69 7046 696c 6528     with ZipFile(
+00011d30: 7465 6d70 5f66 696c 652c 2022 7222 2920  temp_file, "r") 
+00011d40: 6173 207a 6970 5f66 696c 653a 0a20 2020  as zip_file:.   
+00011d50: 2020 2020 2020 2020 2020 2020 207a 6970               zip
+00011d60: 5f66 696c 652e 6578 7472 6163 7461 6c6c  _file.extractall
+00011d70: 2870 6174 683d 6461 7461 5f70 6174 6829  (path=data_path)
+00011d80: 0a0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00011d90: 5265 6d6f 7665 2043 6f4e 4c4c 2d55 206d  Remove CoNLL-U m
+00011da0: 6574 6120 696e 666f 726d 6174 696f 6e20  eta information 
+00011db0: 696e 2074 6865 206c 6173 7420 636f 6c75  in the last colu
+00011dc0: 6d6e 0a20 2020 2020 2020 2020 2020 2066  mn.            f
+00011dd0: 6f72 2070 6172 7420 696e 205b 2274 7261  or part in ["tra
+00011de0: 696e 222c 2022 6465 7622 2c20 2274 6573  in", "dev", "tes
+00011df0: 7422 5d3a 0a20 2020 2020 2020 2020 2020  t"]:.           
+00011e00: 2020 2020 206c 696e 6573 203d 205b 5d0a       lines = [].
+00011e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011e20: 6461 7461 5f66 696c 6520 3d20 6622 6464  data_file = f"dd
+00011e30: 742e 7b70 6172 747d 2e63 6f6e 6c6c 7522  t.{part}.conllu"
+00011e40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011e50: 2077 6974 6820 6f70 656e 2864 6174 615f   with open(data_
+00011e60: 7061 7468 202f 2064 6174 615f 6669 6c65  path / data_file
+00011e70: 2920 6173 2066 696c 653a 0a20 2020 2020  ) as file:.     
+00011e80: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00011e90: 6f72 206c 696e 6520 696e 2066 696c 653a  or line in file:
+00011ea0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011eb0: 2020 2020 2020 2020 2069 6620 6c69 6e65           if line
+00011ec0: 2e73 7461 7274 7377 6974 6828 2223 2229  .startswith("#")
+00011ed0: 206f 7220 6c69 6e65 203d 3d20 225c 6e22   or line == "\n"
+00011ee0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00011ef0: 2020 2020 2020 2020 2020 2020 2020 6c69                li
+00011f00: 6e65 732e 6170 7065 6e64 286c 696e 6529  nes.append(line)
+00011f10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011f20: 2020 2020 2020 2020 206c 696e 6573 2e61           lines.a
+00011f30: 7070 656e 6428 6c69 6e65 2e72 6570 6c61  ppend(line.repla
+00011f40: 6365 2822 6e61 6d65 3d22 2c20 2222 292e  ce("name=", "").
+00011f50: 7265 706c 6163 6528 227c 5370 6163 6541  replace("|SpaceA
+00011f60: 6674 6572 3d4e 6f22 2c20 2222 2929 0a0a  fter=No", ""))..
+00011f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011f80: 7769 7468 206f 7065 6e28 6461 7461 5f70  with open(data_p
+00011f90: 6174 6820 2f20 6461 7461 5f66 696c 652c  ath / data_file,
+00011fa0: 2022 7722 2920 6173 2066 696c 653a 0a20   "w") as file:. 
+00011fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011fc0: 2020 2066 696c 652e 7772 6974 656c 696e     file.writelin
+00011fd0: 6573 286c 696e 6573 290a 0a20 2020 2020  es(lines)..     
+00011fe0: 2020 2073 7570 6572 2829 2e5f 5f69 6e69     super().__ini
+00011ff0: 745f 5f28 0a20 2020 2020 2020 2020 2020  t__(.           
+00012000: 2064 6174 615f 666f 6c64 6572 2c0a 2020   data_folder,.  
+00012010: 2020 2020 2020 2020 2020 636f 6c75 6d6e            column
+00012020: 732c 0a20 2020 2020 2020 2020 2020 2069  s,.            i
+00012030: 6e5f 6d65 6d6f 7279 3d69 6e5f 6d65 6d6f  n_memory=in_memo
+00012040: 7279 2c0a 2020 2020 2020 2020 2020 2020  ry,.            
+00012050: 636f 6d6d 656e 745f 7379 6d62 6f6c 3d22  comment_symbol="
+00012060: 2322 2c0a 2020 2020 2020 2020 2020 2020  #",.            
+00012070: 2a2a 636f 7270 7573 6172 6773 2c0a 2020  **corpusargs,.  
+00012080: 2020 2020 2020 290a 0a0a 636c 6173 7320        )...class 
+00012090: 4e45 525f 454e 474c 4953 485f 4d4f 5649  NER_ENGLISH_MOVI
+000120a0: 455f 5349 4d50 4c45 2843 6f6c 756d 6e43  E_SIMPLE(ColumnC
+000120b0: 6f72 7075 7329 3a0a 2020 2020 6465 6620  orpus):.    def 
+000120c0: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
+000120d0: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
+000120e0: 6261 7365 5f70 6174 683a 204f 7074 696f  base_path: Optio
+000120f0: 6e61 6c5b 556e 696f 6e5b 7374 722c 2050  nal[Union[str, P
+00012100: 6174 685d 5d20 3d20 4e6f 6e65 2c0a 2020  ath]] = None,.  
+00012110: 2020 2020 2020 696e 5f6d 656d 6f72 793a        in_memory:
+00012120: 2062 6f6f 6c20 3d20 5472 7565 2c0a 2020   bool = True,.  
+00012130: 2020 2020 2020 2a2a 636f 7270 7573 6172        **corpusar
+00012140: 6773 2c0a 2020 2020 2920 2d3e 204e 6f6e  gs,.    ) -> Non
+00012150: 653a 0a20 2020 2020 2020 2022 2222 496e  e:.        """In
+00012160: 6974 6961 6c69 7a65 2074 6865 2065 6e67  itialize the eng
+00012170: 2063 6f72 7075 7320 6f66 2074 6865 204d   corpus of the M
+00012180: 4954 204d 6f76 6965 2043 6f72 7075 732e  IT Movie Corpus.
+00012190: 0a0a 2020 2020 2020 2020 5468 6520 6669  ..        The fi
+000121a0: 7273 7420 7469 6d65 2079 6f75 2063 616c  rst time you cal
+000121b0: 6c20 7468 6973 2063 6f6e 7374 7275 6374  l this construct
+000121c0: 6f72 2069 7420 7769 6c6c 2061 7574 6f6d  or it will autom
+000121d0: 6174 6963 616c 6c79 2064 6f77 6e6c 6f61  atically downloa
+000121e0: 6420 7468 6520 6461 7461 7365 742e 0a0a  d the dataset...
+000121f0: 2020 2020 2020 2020 4172 6773 3a0a 2020          Args:.  
+00012200: 2020 2020 2020 2020 2020 6261 7365 5f70            base_p
+00012210: 6174 683a 2044 6566 6175 6c74 2069 7320  ath: Default is 
+00012220: 4e6f 6e65 2c20 6d65 616e 696e 6720 7468  None, meaning th
+00012230: 6174 2063 6f72 7075 7320 6765 7473 2061  at corpus gets a
+00012240: 7574 6f2d 646f 776e 6c6f 6164 6564 2061  uto-downloaded a
+00012250: 6e64 206c 6f61 6465 642e 2059 6f75 2063  nd loaded. You c
+00012260: 616e 206f 7665 7272 6964 6520 7468 6973  an override this
+00012270: 2074 6f20 706f 696e 7420 746f 2061 2064   to point to a d
+00012280: 6966 6665 7265 6e74 2066 6f6c 6465 7220  ifferent folder 
+00012290: 6275 7420 7479 7069 6361 6c6c 7920 7468  but typically th
+000122a0: 6973 2073 686f 756c 6420 6e6f 7420 6265  is should not be
+000122b0: 206e 6563 6573 7361 7279 2e0a 2020 2020   necessary..    
+000122c0: 2020 2020 2020 2020 696e 5f6d 656d 6f72          in_memor
+000122d0: 793a 2049 6620 5472 7565 2c20 6b65 6570  y: If True, keep
+000122e0: 7320 6461 7461 7365 7420 696e 206d 656d  s dataset in mem
+000122f0: 6f72 7920 6769 7669 6e67 2073 7065 6564  ory giving speed
+00012300: 7570 7320 696e 2074 7261 696e 696e 672e  ups in training.
+00012310: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00012320: 2020 2020 2023 2063 6f6c 756d 6e20 666f       # column fo
+00012330: 726d 6174 0a20 2020 2020 2020 2063 6f6c  rmat.        col
+00012340: 756d 6e73 203d 207b 303a 2022 6e65 7222  umns = {0: "ner"
+00012350: 2c20 313a 2022 7465 7874 227d 0a0a 2020  , 1: "text"}..  
+00012360: 2020 2020 2020 2320 6461 7461 7365 7420        # dataset 
+00012370: 6e61 6d65 0a20 2020 2020 2020 2064 6174  name.        dat
+00012380: 6173 6574 5f6e 616d 6520 3d20 7365 6c66  aset_name = self
+00012390: 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e 616d  .__class__.__nam
+000123a0: 655f 5f2e 6c6f 7765 7228 290a 0a20 2020  e__.lower()..   
+000123b0: 2020 2020 2023 2064 6174 6120 666f 6c64       # data fold
+000123c0: 6572 3a20 6465 6661 756c 7420 6461 7461  er: default data
+000123d0: 7365 7420 666f 6c64 6572 2069 7320 7468  set folder is th
+000123e0: 6520 6361 6368 6520 726f 6f74 0a20 2020  e cache root.   
+000123f0: 2020 2020 2062 6173 655f 7061 7468 203d       base_path =
+00012400: 206b 6f6c 6962 7269 2e63 6163 6865 5f72   kolibri.cache_r
+00012410: 6f6f 7420 2f20 2264 6174 6173 6574 7322  oot / "datasets"
+00012420: 2069 6620 6e6f 7420 6261 7365 5f70 6174   if not base_pat
+00012430: 6820 656c 7365 2050 6174 6828 6261 7365  h else Path(base
+00012440: 5f70 6174 6829 0a20 2020 2020 2020 2064  _path).        d
+00012450: 6174 615f 666f 6c64 6572 203d 2062 6173  ata_folder = bas
+00012460: 655f 7061 7468 202f 2064 6174 6173 6574  e_path / dataset
+00012470: 5f6e 616d 650a 0a20 2020 2020 2020 2023  _name..        #
+00012480: 2064 6f77 6e6c 6f61 6420 6461 7461 2069   download data i
+00012490: 6620 6e65 6365 7373 6172 790a 2020 2020  f necessary.    
+000124a0: 2020 2020 6d69 745f 6d6f 7669 655f 7061      mit_movie_pa
+000124b0: 7468 203d 2022 6874 7470 733a 2f2f 6772  th = "https://gr
+000124c0: 6f75 7073 2e63 7361 696c 2e6d 6974 2e65  oups.csail.mit.e
+000124d0: 6475 2f73 6c73 2f64 6f77 6e6c 6f61 6473  du/sls/downloads
+000124e0: 2f6d 6f76 6965 2f22 0a20 2020 2020 2020  /movie/".       
+000124f0: 2074 7261 696e 5f66 696c 6520 3d20 2265   train_file = "e
+00012500: 6e67 7472 6169 6e2e 6269 6f22 0a20 2020  ngtrain.bio".   
+00012510: 2020 2020 2074 6573 745f 6669 6c65 203d       test_file =
+00012520: 2022 656e 6774 6573 742e 6269 6f22 0a20   "engtest.bio". 
+00012530: 2020 2020 2020 2063 6163 6865 645f 7061         cached_pa
+00012540: 7468 2866 227b 6d69 745f 6d6f 7669 655f  th(f"{mit_movie_
+00012550: 7061 7468 7d7b 7472 6169 6e5f 6669 6c65  path}{train_file
+00012560: 7d22 2c20 5061 7468 2822 6461 7461 7365  }", Path("datase
+00012570: 7473 2229 202f 2064 6174 6173 6574 5f6e  ts") / dataset_n
+00012580: 616d 6529 0a20 2020 2020 2020 2063 6163  ame).        cac
+00012590: 6865 645f 7061 7468 2866 227b 6d69 745f  hed_path(f"{mit_
+000125a0: 6d6f 7669 655f 7061 7468 7d7b 7465 7374  movie_path}{test
+000125b0: 5f66 696c 657d 222c 2050 6174 6828 2264  _file}", Path("d
+000125c0: 6174 6173 6574 7322 2920 2f20 6461 7461  atasets") / data
+000125d0: 7365 745f 6e61 6d65 290a 0a20 2020 2020  set_name)..     
+000125e0: 2020 2073 7570 6572 2829 2e5f 5f69 6e69     super().__ini
+000125f0: 745f 5f28 0a20 2020 2020 2020 2020 2020  t__(.           
+00012600: 2064 6174 615f 666f 6c64 6572 2c0a 2020   data_folder,.  
+00012610: 2020 2020 2020 2020 2020 636f 6c75 6d6e            column
+00012620: 732c 0a20 2020 2020 2020 2020 2020 2074  s,.            t
+00012630: 7261 696e 5f66 696c 653d 7472 6169 6e5f  rain_file=train_
+00012640: 6669 6c65 2c0a 2020 2020 2020 2020 2020  file,.          
+00012650: 2020 7465 7374 5f66 696c 653d 7465 7374    test_file=test
+00012660: 5f66 696c 652c 0a20 2020 2020 2020 2020  _file,.         
+00012670: 2020 2069 6e5f 6d65 6d6f 7279 3d69 6e5f     in_memory=in_
+00012680: 6d65 6d6f 7279 2c0a 2020 2020 2020 2020  memory,.        
+00012690: 2020 2020 2a2a 636f 7270 7573 6172 6773      **corpusargs
+000126a0: 2c0a 2020 2020 2020 2020 290a 0a0a 636c  ,.        )...cl
+000126b0: 6173 7320 4e45 525f 454e 474c 4953 485f  ass NER_ENGLISH_
+000126c0: 4d4f 5649 455f 434f 4d50 4c45 5828 436f  MOVIE_COMPLEX(Co
+000126d0: 6c75 6d6e 436f 7270 7573 293a 0a20 2020  lumnCorpus):.   
+000126e0: 2064 6566 205f 5f69 6e69 745f 5f28 0a20   def __init__(. 
+000126f0: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
+00012700: 2020 2020 2062 6173 655f 7061 7468 3a20       base_path: 
+00012710: 4f70 7469 6f6e 616c 5b55 6e69 6f6e 5b73  Optional[Union[s
+00012720: 7472 2c20 5061 7468 5d5d 203d 204e 6f6e  tr, Path]] = Non
+00012730: 652c 0a20 2020 2020 2020 2069 6e5f 6d65  e,.        in_me
+00012740: 6d6f 7279 3a20 626f 6f6c 203d 2054 7275  mory: bool = Tru
+00012750: 652c 0a20 2020 2020 2020 202a 2a63 6f72  e,.        **cor
+00012760: 7075 7361 7267 732c 0a20 2020 2029 202d  pusargs,.    ) -
+00012770: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+00012780: 2222 2249 6e69 7469 616c 697a 6520 7468  """Initialize th
+00012790: 6520 7472 6976 6961 3130 6b31 3320 636f  e trivia10k13 co
+000127a0: 7270 7573 206f 6620 7468 6520 4d49 5420  rpus of the MIT 
+000127b0: 4d6f 7669 6520 436f 7270 7573 2e0a 0a20  Movie Corpus... 
+000127c0: 2020 2020 2020 2054 6865 2066 6972 7374         The first
+000127d0: 2074 696d 6520 796f 7520 6361 6c6c 2074   time you call t
+000127e0: 6869 7320 636f 6e73 7472 7563 746f 7220  his constructor 
+000127f0: 6974 2077 696c 6c20 6175 746f 6d61 7469  it will automati
+00012800: 6361 6c6c 7920 646f 776e 6c6f 6164 2074  cally download t
+00012810: 6865 2064 6174 6173 6574 2e0a 0a20 2020  he dataset...   
+00012820: 2020 2020 2041 7267 733a 0a20 2020 2020       Args:.     
+00012830: 2020 2020 2020 2062 6173 655f 7061 7468         base_path
+00012840: 3a20 4465 6661 756c 7420 6973 204e 6f6e  : Default is Non
+00012850: 652c 206d 6561 6e69 6e67 2074 6861 7420  e, meaning that 
+00012860: 636f 7270 7573 2067 6574 7320 6175 746f  corpus gets auto
+00012870: 2d64 6f77 6e6c 6f61 6465 6420 616e 6420  -downloaded and 
+00012880: 6c6f 6164 6564 2e20 596f 7520 6361 6e20  loaded. You can 
+00012890: 6f76 6572 7269 6465 2074 6869 7320 746f  override this to
+000128a0: 2070 6f69 6e74 2074 6f20 6120 6469 6666   point to a diff
+000128b0: 6572 656e 7420 666f 6c64 6572 2062 7574  erent folder but
+000128c0: 2074 7970 6963 616c 6c79 2074 6869 7320   typically this 
+000128d0: 7368 6f75 6c64 206e 6f74 2062 6520 6e65  should not be ne
+000128e0: 6365 7373 6172 792e 0a20 2020 2020 2020  cessary..       
+000128f0: 2020 2020 2069 6e5f 6d65 6d6f 7279 3a20       in_memory: 
+00012900: 4966 2054 7275 652c 206b 6565 7073 2064  If True, keeps d
+00012910: 6174 6173 6574 2069 6e20 6d65 6d6f 7279  ataset in memory
+00012920: 2067 6976 696e 6720 7370 6565 6475 7073   giving speedups
+00012930: 2069 6e20 7472 6169 6e69 6e67 2e0a 2020   in training..  
+00012940: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00012950: 2020 2320 636f 6c75 6d6e 2066 6f72 6d61    # column forma
+00012960: 740a 2020 2020 2020 2020 636f 6c75 6d6e  t.        column
+00012970: 7320 3d20 7b30 3a20 226e 6572 222c 2031  s = {0: "ner", 1
+00012980: 3a20 2274 6578 7422 7d0a 0a20 2020 2020  : "text"}..     
+00012990: 2020 2023 2064 6174 6173 6574 206e 616d     # dataset nam
+000129a0: 650a 2020 2020 2020 2020 6461 7461 7365  e.        datase
+000129b0: 745f 6e61 6d65 203d 2073 656c 662e 5f5f  t_name = self.__
+000129c0: 636c 6173 735f 5f2e 5f5f 6e61 6d65 5f5f  class__.__name__
+000129d0: 2e6c 6f77 6572 2829 0a0a 2020 2020 2020  .lower()..      
+000129e0: 2020 2320 6461 7461 2066 6f6c 6465 723a    # data folder:
+000129f0: 2064 6566 6175 6c74 2064 6174 6173 6574   default dataset
+00012a00: 2066 6f6c 6465 7220 6973 2074 6865 2063   folder is the c
+00012a10: 6163 6865 2072 6f6f 740a 2020 2020 2020  ache root.      
+00012a20: 2020 6261 7365 5f70 6174 6820 3d20 6b6f    base_path = ko
+00012a30: 6c69 6272 692e 6361 6368 655f 726f 6f74  libri.cache_root
+00012a40: 202f 2022 6461 7461 7365 7473 2220 6966   / "datasets" if
+00012a50: 206e 6f74 2062 6173 655f 7061 7468 2065   not base_path e
+00012a60: 6c73 6520 5061 7468 2862 6173 655f 7061  lse Path(base_pa
+00012a70: 7468 290a 2020 2020 2020 2020 6461 7461  th).        data
+00012a80: 5f66 6f6c 6465 7220 3d20 6261 7365 5f70  _folder = base_p
+00012a90: 6174 6820 2f20 6461 7461 7365 745f 6e61  ath / dataset_na
+00012aa0: 6d65 0a0a 2020 2020 2020 2020 2320 646f  me..        # do
+00012ab0: 776e 6c6f 6164 2064 6174 6120 6966 206e  wnload data if n
+00012ac0: 6563 6573 7361 7279 0a20 2020 2020 2020  ecessary.       
+00012ad0: 206d 6974 5f6d 6f76 6965 5f70 6174 6820   mit_movie_path 
+00012ae0: 3d20 2268 7474 7073 3a2f 2f67 726f 7570  = "https://group
+00012af0: 732e 6373 6169 6c2e 6d69 742e 6564 752f  s.csail.mit.edu/
+00012b00: 736c 732f 646f 776e 6c6f 6164 732f 6d6f  sls/downloads/mo
+00012b10: 7669 652f 220a 2020 2020 2020 2020 7472  vie/".        tr
+00012b20: 6169 6e5f 6669 6c65 203d 2022 7472 6976  ain_file = "triv
+00012b30: 6961 3130 6b31 3374 7261 696e 2e62 696f  ia10k13train.bio
+00012b40: 220a 2020 2020 2020 2020 7465 7374 5f66  ".        test_f
+00012b50: 696c 6520 3d20 2274 7269 7669 6131 306b  ile = "trivia10k
+00012b60: 3133 7465 7374 2e62 696f 220a 2020 2020  13test.bio".    
+00012b70: 2020 2020 6361 6368 6564 5f70 6174 6828      cached_path(
+00012b80: 6622 7b6d 6974 5f6d 6f76 6965 5f70 6174  f"{mit_movie_pat
+00012b90: 687d 7b74 7261 696e 5f66 696c 657d 222c  h}{train_file}",
+00012ba0: 2050 6174 6828 2264 6174 6173 6574 7322   Path("datasets"
+00012bb0: 2920 2f20 6461 7461 7365 745f 6e61 6d65  ) / dataset_name
+00012bc0: 290a 2020 2020 2020 2020 6361 6368 6564  ).        cached
+00012bd0: 5f70 6174 6828 6622 7b6d 6974 5f6d 6f76  _path(f"{mit_mov
+00012be0: 6965 5f70 6174 687d 7b74 6573 745f 6669  ie_path}{test_fi
+00012bf0: 6c65 7d22 2c20 5061 7468 2822 6461 7461  le}", Path("data
+00012c00: 7365 7473 2229 202f 2064 6174 6173 6574  sets") / dataset
+00012c10: 5f6e 616d 6529 0a0a 2020 2020 2020 2020  _name)..        
+00012c20: 7375 7065 7228 292e 5f5f 696e 6974 5f5f  super().__init__
+00012c30: 280a 2020 2020 2020 2020 2020 2020 6461  (.            da
+00012c40: 7461 5f66 6f6c 6465 722c 0a20 2020 2020  ta_folder,.     
+00012c50: 2020 2020 2020 2063 6f6c 756d 6e73 2c0a         columns,.
+00012c60: 2020 2020 2020 2020 2020 2020 7472 6169              trai
+00012c70: 6e5f 6669 6c65 3d74 7261 696e 5f66 696c  n_file=train_fil
+00012c80: 652c 0a20 2020 2020 2020 2020 2020 2074  e,.            t
+00012c90: 6573 745f 6669 6c65 3d74 6573 745f 6669  est_file=test_fi
+00012ca0: 6c65 2c0a 2020 2020 2020 2020 2020 2020  le,.            
+00012cb0: 696e 5f6d 656d 6f72 793d 696e 5f6d 656d  in_memory=in_mem
+00012cc0: 6f72 792c 0a20 2020 2020 2020 2020 2020  ory,.           
+00012cd0: 202a 2a63 6f72 7075 7361 7267 732c 0a20   **corpusargs,. 
+00012ce0: 2020 2020 2020 2029 0a0a 0a63 6c61 7373         )...class
+00012cf0: 204e 4552 5f45 4e47 4c49 5348 5f53 4543   NER_ENGLISH_SEC
+00012d00: 5f46 494c 4c49 4e47 5328 436f 6c75 6d6e  _FILLINGS(Column
+00012d10: 436f 7270 7573 293a 0a20 2020 2064 6566  Corpus):.    def
+00012d20: 205f 5f69 6e69 745f 5f28 0a20 2020 2020   __init__(.     
+00012d30: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
+00012d40: 2062 6173 655f 7061 7468 3a20 4f70 7469   base_path: Opti
+00012d50: 6f6e 616c 5b55 6e69 6f6e 5b73 7472 2c20  onal[Union[str, 
+00012d60: 5061 7468 5d5d 203d 204e 6f6e 652c 0a20  Path]] = None,. 
+00012d70: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
+00012d80: 3a20 626f 6f6c 203d 2054 7275 652c 0a20  : bool = True,. 
+00012d90: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
+00012da0: 7267 732c 0a20 2020 2029 202d 3e20 4e6f  rgs,.    ) -> No
+00012db0: 6e65 3a0a 2020 2020 2020 2020 2222 2249  ne:.        """I
+00012dc0: 6e69 7469 616c 697a 6520 636f 7270 7573  nitialize corpus
+00012dd0: 206f 6620 5345 432d 6669 6c6c 696e 6773   of SEC-fillings
+00012de0: 2061 6e6e 6f74 6174 6564 2077 6974 6820   annotated with 
+00012df0: 456e 676c 6973 6820 4e45 5220 7461 6773  English NER tags
+00012e00: 2e0a 0a20 2020 2020 2020 2053 6565 2070  ...        See p
+00012e10: 6170 6572 2022 446f 6d61 696e 2041 6461  aper "Domain Ada
+00012e20: 7074 696f 6e20 6f66 204e 616d 6564 2045  ption of Named E
+00012e30: 6e74 6974 7920 5265 636f 676e 6974 696f  ntity Recognitio
+00012e40: 6e20 746f 2053 7570 706f 7274 2043 7265  n to Support Cre
+00012e50: 6469 7420 5269 736b 2041 7373 6573 736d  dit Risk Assessm
+00012e60: 656e 7422 2062 7920 416c 7661 7261 646f  ent" by Alvarado
+00012e70: 2065 7420 616c 2c20 3230 3135 3a20 6874   et al, 2015: ht
+00012e80: 7470 733a 2f2f 6163 6c61 6e74 686f 6c6f  tps://aclantholo
+00012e90: 6779 2e6f 7267 2f55 3135 2d31 3031 302f  gy.org/U15-1010/
+00012ea0: 0a0a 2020 2020 2020 2020 4172 6773 3a0a  ..        Args:.
+00012eb0: 2020 2020 2020 2020 2020 2020 6261 7365              base
+00012ec0: 5f70 6174 683a 2050 6174 6820 746f 2074  _path: Path to t
+00012ed0: 6865 2043 6f4e 4c4c 2d30 3320 636f 7270  he CoNLL-03 corp
+00012ee0: 7573 2028 692e 652e 2027 636f 6e6c 6c5f  us (i.e. 'conll_
+00012ef0: 3033 2720 666f 6c64 6572 2920 6f6e 2079  03' folder) on y
+00012f00: 6f75 7220 6d61 6368 696e 650a 2020 2020  our machine.    
+00012f10: 2020 2020 2020 2020 696e 5f6d 656d 6f72          in_memor
+00012f20: 793a 2049 6620 5472 7565 2c20 6b65 6570  y: If True, keep
+00012f30: 7320 6461 7461 7365 7420 696e 206d 656d  s dataset in mem
+00012f40: 6f72 7920 6769 7669 6e67 2073 7065 6564  ory giving speed
+00012f50: 7570 7320 696e 2074 7261 696e 696e 672e  ups in training.
+00012f60: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00012f70: 2020 2020 2062 6173 655f 7061 7468 203d       base_path =
+00012f80: 206b 6f6c 6962 7269 2e63 6163 6865 5f72   kolibri.cache_r
+00012f90: 6f6f 7420 2f20 2264 6174 6173 6574 7322  oot / "datasets"
+00012fa0: 2069 6620 6e6f 7420 6261 7365 5f70 6174   if not base_pat
+00012fb0: 6820 656c 7365 2050 6174 6828 6261 7365  h else Path(base
+00012fc0: 5f70 6174 6829 0a0a 2020 2020 2020 2020  _path)..        
+00012fd0: 2320 636f 6c75 6d6e 2066 6f72 6d61 740a  # column format.
+00012fe0: 2020 2020 2020 2020 636f 6c75 6d6e 7320          columns 
+00012ff0: 3d20 7b30 3a20 2274 6578 7422 2c20 313a  = {0: "text", 1:
+00013000: 2022 706f 7322 2c20 333a 2022 6e65 7222   "pos", 3: "ner"
+00013010: 7d0a 0a20 2020 2020 2020 2023 2074 6869  }..        # thi
+00013020: 7320 6461 7461 7365 7420 6e61 6d65 0a20  s dataset name. 
+00013030: 2020 2020 2020 2064 6174 6173 6574 5f6e         dataset_n
+00013040: 616d 6520 3d20 7365 6c66 2e5f 5f63 6c61  ame = self.__cla
+00013050: 7373 5f5f 2e5f 5f6e 616d 655f 5f2e 6c6f  ss__.__name__.lo
+00013060: 7765 7228 290a 0a20 2020 2020 2020 2064  wer()..        d
+00013070: 6174 615f 666f 6c64 6572 203d 2062 6173  ata_folder = bas
+00013080: 655f 7061 7468 202f 2064 6174 6173 6574  e_path / dataset
+00013090: 5f6e 616d 650a 0a20 2020 2020 2020 2023  _name..        #
+000130a0: 2064 6f77 6e6c 6f61 6420 6461 7461 2069   download data i
+000130b0: 6620 6e65 6365 7373 6172 790a 2020 2020  f necessary.    
+000130c0: 2020 2020 5345 435f 4649 4c4c 494e 4753      SEC_FILLINGS
+000130d0: 5f50 6174 6820 3d20 2268 7474 7073 3a2f  _Path = "https:/
+000130e0: 2f72 6177 2e67 6974 6875 6275 7365 7263  /raw.githubuserc
+000130f0: 6f6e 7465 6e74 2e63 6f6d 2f6a 7561 6e64  ontent.com/juand
+00013100: 2d72 2f65 6e74 6974 792d 7265 636f 676e  -r/entity-recogn
+00013110: 6974 696f 6e2d 6461 7461 7365 7473 2f6d  ition-datasets/m
+00013120: 6173 7465 722f 6461 7461 2f53 4543 2d66  aster/data/SEC-f
+00013130: 696c 696e 6773 2f43 4f4e 4c4c 2d66 6f72  ilings/CONLL-for
+00013140: 6d61 742f 6461 7461 2f22 0a20 2020 2020  mat/data/".     
+00013150: 2020 2063 6163 6865 645f 7061 7468 2866     cached_path(f
+00013160: 227b 5345 435f 4649 4c4c 494e 4753 5f50  "{SEC_FILLINGS_P
+00013170: 6174 687d 7465 7374 2f46 494e 332e 7478  ath}test/FIN3.tx
+00013180: 7422 2c20 5061 7468 2822 6461 7461 7365  t", Path("datase
+00013190: 7473 2229 202f 2064 6174 6173 6574 5f6e  ts") / dataset_n
+000131a0: 616d 6529 0a20 2020 2020 2020 2063 6163  ame).        cac
+000131b0: 6865 645f 7061 7468 2866 227b 5345 435f  hed_path(f"{SEC_
+000131c0: 4649 4c4c 494e 4753 5f50 6174 687d 7472  FILLINGS_Path}tr
+000131d0: 6169 6e2f 4649 4e35 2e74 7874 222c 2050  ain/FIN5.txt", P
+000131e0: 6174 6828 2264 6174 6173 6574 7322 2920  ath("datasets") 
+000131f0: 2f20 6461 7461 7365 745f 6e61 6d65 290a  / dataset_name).
+00013200: 0a20 2020 2020 2020 2073 7570 6572 2829  .        super()
+00013210: 2e5f 5f69 6e69 745f 5f28 0a20 2020 2020  .__init__(.     
+00013220: 2020 2020 2020 2064 6174 615f 666f 6c64         data_fold
+00013230: 6572 2c0a 2020 2020 2020 2020 2020 2020  er,.            
+00013240: 636f 6c75 6d6e 732c 0a20 2020 2020 2020  columns,.       
+00013250: 2020 2020 2065 6e63 6f64 696e 673d 2275       encoding="u
+00013260: 7466 2d38 222c 0a20 2020 2020 2020 2020  tf-8",.         
+00013270: 2020 2069 6e5f 6d65 6d6f 7279 3d69 6e5f     in_memory=in_
+00013280: 6d65 6d6f 7279 2c0a 2020 2020 2020 2020  memory,.        
+00013290: 2020 2020 7472 6169 6e5f 6669 6c65 3d22      train_file="
+000132a0: 4649 4e35 2e74 7874 222c 0a20 2020 2020  FIN5.txt",.     
+000132b0: 2020 2020 2020 2074 6573 745f 6669 6c65         test_file
+000132c0: 3d22 4649 4e33 2e74 7874 222c 0a20 2020  ="FIN3.txt",.   
+000132d0: 2020 2020 2020 2020 2073 6b69 705f 6669           skip_fi
+000132e0: 7273 745f 6c69 6e65 3d54 7275 652c 0a20  rst_line=True,. 
+000132f0: 2020 2020 2020 2020 2020 202a 2a63 6f72             **cor
+00013300: 7075 7361 7267 732c 0a20 2020 2020 2020  pusargs,.       
+00013310: 2029 0a0a 0a63 6c61 7373 204e 4552 5f45   )...class NER_E
+00013320: 4e47 4c49 5348 5f52 4553 5441 5552 414e  NGLISH_RESTAURAN
+00013330: 5428 436f 6c75 6d6e 436f 7270 7573 293a  T(ColumnCorpus):
+00013340: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+00013350: 5f28 0a20 2020 2020 2020 2073 656c 662c  _(.        self,
+00013360: 0a20 2020 2020 2020 2062 6173 655f 7061  .        base_pa
+00013370: 7468 3a20 4f70 7469 6f6e 616c 5b55 6e69  th: Optional[Uni
+00013380: 6f6e 5b73 7472 2c20 5061 7468 5d5d 203d  on[str, Path]] =
+00013390: 204e 6f6e 652c 0a20 2020 2020 2020 2069   None,.        i
+000133a0: 6e5f 6d65 6d6f 7279 3a20 626f 6f6c 203d  n_memory: bool =
+000133b0: 2054 7275 652c 0a20 2020 2020 2020 202a   True,.        *
+000133c0: 2a63 6f72 7075 7361 7267 732c 0a20 2020  *corpusargs,.   
+000133d0: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
+000133e0: 2020 2020 2222 2249 6e69 7469 616c 697a      """Initializ
+000133f0: 6520 7468 6520 4d49 5420 5265 7374 6175  e the MIT Restau
+00013400: 7261 6e74 2063 6f72 7075 732e 0a0a 2020  rant corpus...  
+00013410: 2020 2020 2020 5468 6520 636f 7270 7573        The corpus
+00013420: 2077 696c 6c20 6265 2064 6f77 6e6c 6f61   will be downloa
+00013430: 6465 6420 6672 6f6d 2068 7474 7073 3a2f  ded from https:/
+00013440: 2f67 726f 7570 732e 6373 6169 6c2e 6d69  /groups.csail.mi
+00013450: 742e 6564 752f 736c 732f 646f 776e 6c6f  t.edu/sls/downlo
+00013460: 6164 732f 7265 7374 6175 7261 6e74 2f2e  ads/restaurant/.
+00013470: 0a20 2020 2020 2020 2054 6865 2066 6972  .        The fir
+00013480: 7374 2074 696d 6520 796f 7520 6361 6c6c  st time you call
+00013490: 2074 6869 7320 636f 6e73 7472 7563 746f   this constructo
+000134a0: 7220 6974 2077 696c 6c20 6175 746f 6d61  r it will automa
+000134b0: 7469 6361 6c6c 7920 646f 776e 6c6f 6164  tically download
+000134c0: 2074 6865 2064 6174 6173 6574 2e0a 2020   the dataset..  
+000134d0: 2020 2020 2020 3a70 6172 616d 2062 6173        :param bas
+000134e0: 655f 7061 7468 3a20 4465 6661 756c 7420  e_path: Default 
+000134f0: 6973 204e 6f6e 652c 206d 6561 6e69 6e67  is None, meaning
+00013500: 2074 6861 7420 636f 7270 7573 2067 6574   that corpus get
+00013510: 7320 6175 746f 2d64 6f77 6e6c 6f61 6465  s auto-downloade
+00013520: 6420 616e 6420 6c6f 6164 6564 2e20 596f  d and loaded. Yo
+00013530: 7520 6361 6e20 6f76 6572 7269 6465 2074  u can override t
+00013540: 6869 730a 2020 2020 2020 2020 746f 2070  his.        to p
+00013550: 6f69 6e74 2074 6f20 6120 6469 6666 6572  oint to a differ
+00013560: 656e 7420 666f 6c64 6572 2062 7574 2074  ent folder but t
+00013570: 7970 6963 616c 6c79 2074 6869 7320 7368  ypically this sh
+00013580: 6f75 6c64 206e 6f74 2062 6520 6e65 6365  ould not be nece
+00013590: 7373 6172 792e 0a20 2020 2020 2020 2050  ssary..        P
+000135a0: 4f53 2074 6167 7320 696e 7374 6561 640a  OS tags instead.
+000135b0: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+000135c0: 6e5f 6d65 6d6f 7279 3a20 4966 2054 7275  n_memory: If Tru
+000135d0: 652c 206b 6565 7073 2064 6174 6173 6574  e, keeps dataset
+000135e0: 2069 6e20 6d65 6d6f 7279 2067 6976 696e   in memory givin
+000135f0: 6720 7370 6565 6475 7073 2069 6e20 7472  g speedups in tr
+00013600: 6169 6e69 6e67 2e0a 2020 2020 2020 2020  aining..        
+00013610: 3a70 6172 616d 2064 6f63 756d 656e 745f  :param document_
+00013620: 6173 5f73 6571 7565 6e63 653a 2049 6620  as_sequence: If 
+00013630: 5472 7565 2c20 616c 6c20 7365 6e74 656e  True, all senten
+00013640: 6365 7320 6f66 2061 2064 6f63 756d 656e  ces of a documen
+00013650: 7420 6172 6520 7265 6164 2069 6e74 6f20  t are read into 
+00013660: 6120 7369 6e67 6c65 2053 656e 7465 6e63  a single Sentenc
+00013670: 6520 6f62 6a65 6374 0a20 2020 2020 2020  e object.       
+00013680: 2022 2222 0a20 2020 2020 2020 2062 6173   """.        bas
+00013690: 655f 7061 7468 203d 206b 6f6c 6962 7269  e_path = kolibri
+000136a0: 2e63 6163 6865 5f72 6f6f 7420 2f20 2264  .cache_root / "d
+000136b0: 6174 6173 6574 7322 2069 6620 6e6f 7420  atasets" if not 
+000136c0: 6261 7365 5f70 6174 6820 656c 7365 2050  base_path else P
+000136d0: 6174 6828 6261 7365 5f70 6174 6829 0a0a  ath(base_path)..
+000136e0: 2020 2020 2020 2020 2320 636f 6c75 6d6e          # column
+000136f0: 2066 6f72 6d61 740a 2020 2020 2020 2020   format.        
+00013700: 636f 6c75 6d6e 7320 3d20 7b30 3a20 2274  columns = {0: "t
+00013710: 6578 7422 2c20 313a 2022 6e65 7222 7d0a  ext", 1: "ner"}.
+00013720: 0a20 2020 2020 2020 2023 2074 6869 7320  .        # this 
+00013730: 6461 7461 7365 7420 6e61 6d65 0a20 2020  dataset name.   
+00013740: 2020 2020 2064 6174 6173 6574 5f6e 616d       dataset_nam
+00013750: 6520 3d20 7365 6c66 2e5f 5f63 6c61 7373  e = self.__class
+00013760: 5f5f 2e5f 5f6e 616d 655f 5f2e 6c6f 7765  __.__name__.lowe
+00013770: 7228 290a 0a20 2020 2020 2020 2064 6174  r()..        dat
+00013780: 615f 666f 6c64 6572 203d 2062 6173 655f  a_folder = base_
+00013790: 7061 7468 202f 2064 6174 6173 6574 5f6e  path / dataset_n
+000137a0: 616d 650a 0a20 2020 2020 2020 2023 2064  ame..        # d
+000137b0: 6f77 6e6c 6f61 6420 6461 7461 2069 6620  ownload data if 
+000137c0: 6e65 6365 7373 6172 790a 2020 2020 2020  necessary.      
+000137d0: 2020 6d69 745f 7265 7374 6175 7261 6e74    mit_restaurant
+000137e0: 735f 7061 7468 203d 2022 6874 7470 733a  s_path = "https:
+000137f0: 2f2f 6d65 6761 6e74 6f73 682e 7333 2e65  //megantosh.s3.e
+00013800: 752d 6365 6e74 7261 6c2d 312e 616d 617a  u-central-1.amaz
+00013810: 6f6e 6177 732e 636f 6d2f 4d49 5452 6573  onaws.com/MITRes
+00013820: 746f 436f 7270 7573 2f22 0a20 2020 2020  toCorpus/".     
+00013830: 2020 2063 6163 6865 645f 7061 7468 2866     cached_path(f
+00013840: 227b 6d69 745f 7265 7374 6175 7261 6e74  "{mit_restaurant
+00013850: 735f 7061 7468 7d74 6573 742e 7478 7422  s_path}test.txt"
+00013860: 2c20 5061 7468 2822 6461 7461 7365 7473  , Path("datasets
+00013870: 2229 202f 2064 6174 6173 6574 5f6e 616d  ") / dataset_nam
+00013880: 6529 0a20 2020 2020 2020 2063 6163 6865  e).        cache
+00013890: 645f 7061 7468 2866 227b 6d69 745f 7265  d_path(f"{mit_re
+000138a0: 7374 6175 7261 6e74 735f 7061 7468 7d74  staurants_path}t
+000138b0: 7261 696e 2e74 7874 222c 2050 6174 6828  rain.txt", Path(
+000138c0: 2264 6174 6173 6574 7322 2920 2f20 6461  "datasets") / da
+000138d0: 7461 7365 745f 6e61 6d65 290a 0a20 2020  taset_name)..   
+000138e0: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
+000138f0: 6e69 745f 5f28 0a20 2020 2020 2020 2020  nit__(.         
+00013900: 2020 2064 6174 615f 666f 6c64 6572 2c0a     data_folder,.
+00013910: 2020 2020 2020 2020 2020 2020 636f 6c75              colu
+00013920: 6d6e 732c 0a20 2020 2020 2020 2020 2020  mns,.           
+00013930: 2065 6e63 6f64 696e 673d 226c 6174 696e   encoding="latin
+00013940: 2d31 222c 0a20 2020 2020 2020 2020 2020  -1",.           
+00013950: 2069 6e5f 6d65 6d6f 7279 3d69 6e5f 6d65   in_memory=in_me
+00013960: 6d6f 7279 2c0a 2020 2020 2020 2020 2020  mory,.          
+00013970: 2020 2a2a 636f 7270 7573 6172 6773 2c0a    **corpusargs,.
+00013980: 2020 2020 2020 2020 290a 0a0a 636c 6173          )...clas
+00013990: 7320 4e45 525f 454e 474c 4953 485f 5354  s NER_ENGLISH_ST
+000139a0: 4143 4b4f 5645 5246 4c4f 5728 436f 6c75  ACKOVERFLOW(Colu
+000139b0: 6d6e 436f 7270 7573 293a 0a20 2020 2064  mnCorpus):.    d
+000139c0: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
+000139d0: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
+000139e0: 2020 2062 6173 655f 7061 7468 3a20 4f70     base_path: Op
+000139f0: 7469 6f6e 616c 5b55 6e69 6f6e 5b73 7472  tional[Union[str
+00013a00: 2c20 5061 7468 5d5d 203d 204e 6f6e 652c  , Path]] = None,
+00013a10: 0a20 2020 2020 2020 2069 6e5f 6d65 6d6f  .        in_memo
+00013a20: 7279 3a20 626f 6f6c 203d 2054 7275 652c  ry: bool = True,
+00013a30: 0a20 2020 2020 2020 202a 2a63 6f72 7075  .        **corpu
+00013a40: 7361 7267 732c 0a20 2020 2029 202d 3e20  sargs,.    ) -> 
+00013a50: 4e6f 6e65 3a0a 2020 2020 2020 2020 2222  None:.        ""
+00013a60: 2249 6e69 7469 616c 697a 6520 7468 6520  "Initialize the 
+00013a70: 5354 4143 4b4f 5645 5246 4c4f 575f 4e45  STACKOVERFLOW_NE
+00013a80: 5220 636f 7270 7573 2e0a 0a20 2020 2020  R corpus...     
+00013a90: 2020 2054 6865 2066 6972 7374 2074 696d     The first tim
+00013aa0: 6520 796f 7520 6361 6c6c 2074 6869 7320  e you call this 
+00013ab0: 636f 6e73 7472 7563 746f 7220 6974 2077  constructor it w
+00013ac0: 696c 6c20 6175 746f 6d61 7469 6361 6c6c  ill automaticall
+00013ad0: 7920 646f 776e 6c6f 6164 2074 6865 2064  y download the d
+00013ae0: 6174 6173 6574 2e0a 0a20 2020 2020 2020  ataset...       
+00013af0: 2041 7267 733a 0a20 2020 2020 2020 2020   Args:.         
+00013b00: 2020 2062 6173 655f 7061 7468 3a20 4465     base_path: De
+00013b10: 6661 756c 7420 6973 204e 6f6e 652c 206d  fault is None, m
+00013b20: 6561 6e69 6e67 2074 6861 7420 636f 7270  eaning that corp
+00013b30: 7573 2067 6574 7320 6175 746f 2d64 6f77  us gets auto-dow
+00013b40: 6e6c 6f61 6465 6420 616e 6420 6c6f 6164  nloaded and load
+00013b50: 6564 2e20 596f 7520 6361 6e20 6f76 6572  ed. You can over
+00013b60: 7269 6465 2074 6869 7320 746f 2070 6f69  ride this to poi
+00013b70: 6e74 2074 6f20 6120 6469 6666 6572 656e  nt to a differen
+00013b80: 7420 666f 6c64 6572 2062 7574 2074 7970  t folder but typ
+00013b90: 6963 616c 6c79 2074 6869 7320 7368 6f75  ically this shou
+00013ba0: 6c64 206e 6f74 2062 6520 6e65 6365 7373  ld not be necess
+00013bb0: 6172 792e 0a20 2020 2020 2020 2020 2020  ary..           
+00013bc0: 2069 6e5f 6d65 6d6f 7279 3a20 4966 2054   in_memory: If T
+00013bd0: 7275 652c 206b 6565 7073 2064 6174 6173  rue, keeps datas
+00013be0: 6574 2069 6e20 6d65 6d6f 7279 2067 6976  et in memory giv
+00013bf0: 696e 6720 7370 6565 6475 7073 2069 6e20  ing speedups in 
+00013c00: 7472 6169 6e69 6e67 2e0a 2020 2020 2020  training..      
+00013c10: 2020 2020 2020 646f 6375 6d65 6e74 5f61        document_a
+00013c20: 735f 7365 7175 656e 6365 3a20 4966 2054  s_sequence: If T
+00013c30: 7275 652c 2061 6c6c 2073 656e 7465 6e63  rue, all sentenc
+00013c40: 6573 206f 6620 6120 646f 6375 6d65 6e74  es of a document
+00013c50: 2061 7265 2072 6561 6420 696e 746f 2061   are read into a
+00013c60: 2073 696e 676c 6520 5365 6e74 656e 6365   single Sentence
+00013c70: 206f 626a 6563 740a 2020 2020 2020 2020   object.        
+00013c80: 2222 220a 2020 2020 2020 2020 6261 7365  """.        base
+00013c90: 5f70 6174 6820 3d20 6b6f 6c69 6272 692e  _path = kolibri.
+00013ca0: 6361 6368 655f 726f 6f74 202f 2022 6461  cache_root / "da
+00013cb0: 7461 7365 7473 2220 6966 206e 6f74 2062  tasets" if not b
+00013cc0: 6173 655f 7061 7468 2065 6c73 6520 5061  ase_path else Pa
+00013cd0: 7468 2862 6173 655f 7061 7468 290a 0a20  th(base_path).. 
+00013ce0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00013cf0: 2020 2054 6865 2044 6174 6173 6574 7320     The Datasets 
+00013d00: 6172 6520 7265 7072 6573 656e 7465 6420  are represented 
+00013d10: 696e 2074 6865 2043 6f6e 6c6c 2066 6f72  in the Conll for
+00013d20: 6d61 742e 0a20 2020 2020 2020 2020 2020  mat..           
+00013d30: 496e 2074 6869 7320 666f 726d 6174 2065  In this format e
+00013d40: 6163 6820 6c69 6e65 206f 6620 7468 6520  ach line of the 
+00013d50: 4461 7461 7365 7420 6973 2069 6e20 7468  Dataset is in th
+00013d60: 6520 666f 6c6c 6f77 696e 6720 666f 726d  e following form
+00013d70: 6174 3a0a 2020 2020 2020 2020 2020 203c  at:.           <
+00013d80: 776f 7264 3e2b 225c 7422 2b3c 4e45 3e22  word>+"\t"+<NE>"
+00013d90: 5c74 222b 3c77 6f72 643e 2b22 5c74 223c  \t"+<word>+"\t"<
+00013da0: 6d61 726b 646f 776e 3e0a 2020 2020 2020  markdown>.      
+00013db0: 2020 2020 2054 6865 2065 6e64 206f 6620       The end of 
+00013dc0: 7365 6e74 656e 6365 2069 7320 6d61 726b  sentence is mark
+00013dd0: 6564 2077 6974 6820 616e 2065 6d70 7479  ed with an empty
+00013de0: 206c 696e 652e 0a20 2020 2020 2020 2020   line..         
+00013df0: 2020 496e 2065 6163 6820 6c69 6e65 204e    In each line N
+00013e00: 4520 7265 7072 6573 656e 7465 6420 7468  E represented th
+00013e10: 6520 6875 6d61 6e20 616e 6e6f 7461 7465  e human annotate
+00013e20: 6420 6e61 6d65 6420 656e 7469 7479 0a20  d named entity. 
+00013e30: 2020 2020 2020 2020 2020 616e 6420 3c6d            and <m
+00013e40: 6172 6b64 6f77 6e3e 2072 6570 7265 7365  arkdown> represe
+00013e50: 6e74 6564 2074 6865 2063 6f64 6520 7461  nted the code ta
+00013e60: 6773 2070 726f 7669 6465 6420 6279 2074  gs provided by t
+00013e70: 6865 2075 7365 7273 2077 686f 2077 726f  he users who wro
+00013e80: 7465 2074 6865 2070 6f73 7473 2e0a 2020  te the posts..  
+00013e90: 2020 2020 2020 2020 2022 2222 0a20 2020           """.   
+00013ea0: 2020 2020 2023 2063 6f6c 756d 6e20 666f       # column fo
+00013eb0: 726d 6174 0a20 2020 2020 2020 2063 6f6c  rmat.        col
+00013ec0: 756d 6e73 203d 207b 303a 2022 776f 7264  umns = {0: "word
+00013ed0: 222c 2031 3a20 226e 6572 222c 2033 3a20  ", 1: "ner", 3: 
+00013ee0: 226d 6172 6b64 6f77 6e22 7d0a 0a20 2020  "markdown"}..   
+00013ef0: 2020 2020 2023 2065 6e74 6974 795f 6d61       # entity_ma
+00013f00: 7070 696e 670a 2020 2020 2020 2020 656e  pping.        en
+00013f10: 7469 7479 5f6d 6170 7069 6e67 203d 207b  tity_mapping = {
+00013f20: 0a20 2020 2020 2020 2020 2020 2022 4c69  .            "Li
+00013f30: 6272 6172 795f 4675 6e63 7469 6f6e 223a  brary_Function":
+00013f40: 2022 4675 6e63 7469 6f6e 222c 0a20 2020   "Function",.   
+00013f50: 2020 2020 2020 2020 2022 4675 6e63 7469           "Functi
+00013f60: 6f6e 5f4e 616d 6522 3a20 2246 756e 6374  on_Name": "Funct
+00013f70: 696f 6e22 2c0a 2020 2020 2020 2020 2020  ion",.          
+00013f80: 2020 2243 6c61 7373 5f4e 616d 6522 3a20    "Class_Name": 
+00013f90: 2243 6c61 7373 222c 0a20 2020 2020 2020  "Class",.       
+00013fa0: 2020 2020 2022 4c69 6272 6172 795f 436c       "Library_Cl
+00013fb0: 6173 7322 3a20 2243 6c61 7373 222c 0a20  ass": "Class",. 
+00013fc0: 2020 2020 2020 2020 2020 2022 4f72 6761             "Orga
+00013fd0: 6e69 7a61 7469 6f6e 223a 2022 5765 6273  nization": "Webs
+00013fe0: 6974 6522 2c0a 2020 2020 2020 2020 2020  ite",.          
+00013ff0: 2020 224c 6962 7261 7279 5f56 6172 6961    "Library_Varia
+00014000: 626c 6522 3a20 2256 6172 6961 626c 6522  ble": "Variable"
+00014010: 2c0a 2020 2020 2020 2020 2020 2020 2256  ,.            "V
+00014020: 6172 6961 626c 655f 4e61 6d65 223a 2022  ariable_Name": "
+00014030: 5661 7269 6162 6c65 222c 0a20 2020 2020  Variable",.     
+00014040: 2020 2020 2020 2022 4572 726f 725f 4e61         "Error_Na
+00014050: 6d65 223a 2022 4f22 2c0a 2020 2020 2020  me": "O",.      
+00014060: 2020 2020 2020 224b 6579 626f 6172 645f        "Keyboard_
+00014070: 4950 223a 2022 4f22 2c0a 2020 2020 2020  IP": "O",.      
+00014080: 2020 2020 2020 2256 616c 7565 223a 2022        "Value": "
+00014090: 4f22 2c0a 2020 2020 2020 2020 2020 2020  O",.            
+000140a0: 224f 7574 7075 745f 426c 6f63 6b22 3a20  "Output_Block": 
+000140b0: 224f 222c 0a20 2020 2020 2020 207d 0a0a  "O",.        }..
+000140c0: 2020 2020 2020 2020 2320 7468 6973 2064          # this d
+000140d0: 6174 6173 6574 206e 616d 650a 2020 2020  ataset name.    
+000140e0: 2020 2020 6461 7461 7365 745f 6e61 6d65      dataset_name
+000140f0: 203d 2073 656c 662e 5f5f 636c 6173 735f   = self.__class_
+00014100: 5f2e 5f5f 6e61 6d65 5f5f 2e6c 6f77 6572  _.__name__.lower
+00014110: 2829 0a0a 2020 2020 2020 2020 6461 7461  ()..        data
+00014120: 5f66 6f6c 6465 7220 3d20 6261 7365 5f70  _folder = base_p
+00014130: 6174 6820 2f20 6461 7461 7365 745f 6e61  ath / dataset_na
+00014140: 6d65 0a0a 2020 2020 2020 2020 2320 646f  me..        # do
+00014150: 776e 6c6f 6164 2064 6174 6120 6966 206e  wnload data if n
+00014160: 6563 6573 7361 7279 0a20 2020 2020 2020  ecessary.       
+00014170: 2053 5441 434b 4f56 4552 464c 4f57 5f4e   STACKOVERFLOW_N
+00014180: 4552 5f70 6174 6820 3d20 2268 7474 7073  ER_path = "https
+00014190: 3a2f 2f72 6177 2e67 6974 6875 6275 7365  ://raw.githubuse
+000141a0: 7263 6f6e 7465 6e74 2e63 6f6d 2f6a 656e  rcontent.com/jen
+000141b0: 6979 6174 2f53 7461 636b 4f76 6572 666c  iyat/StackOverfl
+000141c0: 6f77 4e45 522f 6d61 7374 6572 2f72 6573  owNER/master/res
+000141d0: 6f75 7263 6573 2f61 6e6e 6f74 6174 6564  ources/annotated
+000141e0: 5f6e 6572 5f64 6174 612f 5374 6163 6b4f  _ner_data/StackO
+000141f0: 7665 7266 6c6f 772f 220a 0a20 2020 2020  verflow/"..     
+00014200: 2020 2023 2064 6174 6120 7661 6c69 6461     # data valida
+00014210: 7469 6f6e 0a20 2020 2020 2020 2062 616e  tion.        ban
+00014220: 6e65 645f 7365 6e74 656e 6365 7320 3d20  ned_sentences = 
+00014230: 5b0a 2020 2020 2020 2020 2020 2020 2263  [.            "c
+00014240: 6f64 6520 6f6d 6974 7465 6420 666f 7220  ode omitted for 
+00014250: 616e 6e6f 7461 7469 6f6e 222c 0a20 2020  annotation",.   
+00014260: 2020 2020 2020 2020 2022 6f6d 6974 7465           "omitte
+00014270: 6420 666f 7220 616e 6e6f 7461 7469 6f6e  d for annotation
+00014280: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+00014290: 434f 4445 5f42 4c4f 434b 203a 222c 0a20  CODE_BLOCK :",. 
+000142a0: 2020 2020 2020 2020 2020 2022 4f50 5f42             "OP_B
+000142b0: 4c4f 434b 203a 222c 0a20 2020 2020 2020  LOCK :",.       
+000142c0: 2020 2020 2022 5175 6573 7469 6f6e 5f55       "Question_U
+000142d0: 524c 203a 222c 0a20 2020 2020 2020 2020  RL :",.         
+000142e0: 2020 2022 5175 6573 7469 6f6e 5f49 4420     "Question_ID 
+000142f0: 3a22 2c0a 2020 2020 2020 2020 5d0a 0a20  :",.        ].. 
+00014300: 2020 2020 2020 2066 696c 6573 203d 205b         files = [
+00014310: 2274 7261 696e 222c 2022 7465 7374 222c  "train", "test",
+00014320: 2022 6465 7622 5d0a 0a20 2020 2020 2020   "dev"]..       
+00014330: 2066 6f72 2066 696c 6520 696e 2066 696c   for file in fil
+00014340: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
+00014350: 7175 6573 7469 6f6e 7320 3d20 300a 2020  questions = 0.  
+00014360: 2020 2020 2020 2020 2020 616e 7377 6572            answer
+00014370: 7320 3d20 300a 0a20 2020 2020 2020 2020  s = 0..         
+00014380: 2020 2063 6163 6865 645f 7061 7468 2866     cached_path(f
+00014390: 227b 5354 4143 4b4f 5645 5246 4c4f 575f  "{STACKOVERFLOW_
+000143a0: 4e45 525f 7061 7468 7d7b 6669 6c65 7d2e  NER_path}{file}.
+000143b0: 7478 7422 2c20 5061 7468 2822 6461 7461  txt", Path("data
+000143c0: 7365 7473 2229 202f 2064 6174 6173 6574  sets") / dataset
+000143d0: 5f6e 616d 6529 0a20 2020 2020 2020 2020  _name).         
+000143e0: 2020 2077 6974 6820 2864 6174 615f 666f     with (data_fo
+000143f0: 6c64 6572 202f 2028 6669 6c65 202b 2022  lder / (file + "
+00014400: 2e74 7874 2229 292e 6f70 656e 2865 6e63  .txt")).open(enc
+00014410: 6f64 696e 673d 2275 7466 2d38 2229 2061  oding="utf-8") a
+00014420: 7320 6669 6e3a 0a20 2020 2020 2020 2020  s fin:.         
+00014430: 2020 2020 2020 2066 6f72 206c 696e 6520         for line 
+00014440: 696e 2066 696e 3a0a 2020 2020 2020 2020  in fin:.        
+00014450: 2020 2020 2020 2020 2020 2020 6966 206c              if l
+00014460: 696e 652e 7374 6172 7473 7769 7468 2822  ine.startswith("
+00014470: 5175 6573 7469 6f6e 5f49 4422 293a 0a20  Question_ID"):. 
+00014480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014490: 2020 2020 2020 2071 7565 7374 696f 6e73         questions
+000144a0: 202b 3d20 310a 0a20 2020 2020 2020 2020   += 1..         
+000144b0: 2020 2020 2020 2020 2020 2069 6620 6c69             if li
+000144c0: 6e65 2e73 7461 7274 7377 6974 6828 2241  ne.startswith("A
+000144d0: 6e73 7765 725f 746f 5f51 7565 7374 696f  nswer_to_Questio
+000144e0: 6e5f 4944 2229 3a0a 2020 2020 2020 2020  n_ID"):.        
+000144f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014500: 616e 7377 6572 7320 2b3d 2031 0a20 2020  answers += 1.   
+00014510: 2020 2020 2020 2020 206c 6f67 2e69 6e66           log.inf
+00014520: 6f28 6622 4669 6c65 207b 6669 6c65 7d20  o(f"File {file} 
+00014530: 6861 7320 7b71 7565 7374 696f 6e73 7d20  has {questions} 
+00014540: 7175 6573 7469 6f6e 7320 616e 6420 7b61  questions and {a
+00014550: 6e73 7765 7273 7d20 616e 7377 6572 732e  nswers} answers.
+00014560: 2229 0a0a 2020 2020 2020 2020 7375 7065  ")..        supe
+00014570: 7228 292e 5f5f 696e 6974 5f5f 280a 2020  r().__init__(.  
+00014580: 2020 2020 2020 2020 2020 6461 7461 5f66            data_f
+00014590: 6f6c 6465 722c 0a20 2020 2020 2020 2020  older,.         
+000145a0: 2020 2063 6f6c 756d 6e73 2c0a 2020 2020     columns,.    
+000145b0: 2020 2020 2020 2020 7472 6169 6e5f 6669          train_fi
+000145c0: 6c65 3d22 7472 6169 6e2e 7478 7422 2c0a  le="train.txt",.
+000145d0: 2020 2020 2020 2020 2020 2020 7465 7374              test
+000145e0: 5f66 696c 653d 2274 6573 742e 7478 7422  _file="test.txt"
+000145f0: 2c0a 2020 2020 2020 2020 2020 2020 6465  ,.            de
+00014600: 765f 6669 6c65 3d22 6465 762e 7478 7422  v_file="dev.txt"
+00014610: 2c0a 2020 2020 2020 2020 2020 2020 656e  ,.            en
+00014620: 636f 6469 6e67 3d22 7574 662d 3822 2c0a  coding="utf-8",.
+00014630: 2020 2020 2020 2020 2020 2020 6261 6e6e              bann
+00014640: 6564 5f73 656e 7465 6e63 6573 3d62 616e  ed_sentences=ban
+00014650: 6e65 645f 7365 6e74 656e 6365 732c 0a20  ned_sentences,. 
+00014660: 2020 2020 2020 2020 2020 2069 6e5f 6d65             in_me
+00014670: 6d6f 7279 3d69 6e5f 6d65 6d6f 7279 2c0a  mory=in_memory,.
+00014680: 2020 2020 2020 2020 2020 2020 6c61 6265              labe
+00014690: 6c5f 6e61 6d65 5f6d 6170 3d65 6e74 6974  l_name_map=entit
+000146a0: 795f 6d61 7070 696e 672c 0a20 2020 2020  y_mapping,.     
+000146b0: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
+000146c0: 7267 732c 0a20 2020 2020 2020 2029 0a0a  rgs,.        )..
+000146d0: 0a63 6c61 7373 204e 4552 5f45 4e47 4c49  .class NER_ENGLI
+000146e0: 5348 5f54 5749 5454 4552 2843 6f6c 756d  SH_TWITTER(Colum
+000146f0: 6e43 6f72 7075 7329 3a0a 2020 2020 6465  nCorpus):.    de
+00014700: 6620 5f5f 696e 6974 5f5f 280a 2020 2020  f __init__(.    
+00014710: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
+00014720: 2020 6261 7365 5f70 6174 683a 204f 7074    base_path: Opt
+00014730: 696f 6e61 6c5b 556e 696f 6e5b 7374 722c  ional[Union[str,
+00014740: 2050 6174 685d 5d20 3d20 4e6f 6e65 2c0a   Path]] = None,.
+00014750: 2020 2020 2020 2020 696e 5f6d 656d 6f72          in_memor
+00014760: 793a 2062 6f6f 6c20 3d20 5472 7565 2c0a  y: bool = True,.
+00014770: 2020 2020 2020 2020 2a2a 636f 7270 7573          **corpus
+00014780: 6172 6773 2c0a 2020 2020 2920 2d3e 204e  args,.    ) -> N
+00014790: 6f6e 653a 0a20 2020 2020 2020 2022 2222  one:.        """
+000147a0: 496e 6974 6961 6c69 7a65 2074 6865 2074  Initialize the t
+000147b0: 7769 7474 6572 5f6e 6572 2063 6f72 7075  witter_ner corpu
+000147c0: 732e 0a0a 2020 2020 2020 2020 5468 6520  s...        The 
+000147d0: 636f 7270 7573 2077 696c 6c20 6265 2064  corpus will be d
+000147e0: 6f77 6e6f 6164 6564 2066 726f 6d20 6874  ownoaded from ht
+000147f0: 7470 733a 2f2f 7261 772e 6769 7468 7562  tps://raw.github
+00014800: 7573 6572 636f 6e74 656e 742e 636f 6d2f  usercontent.com/
+00014810: 6172 6974 7465 722f 7477 6974 7465 725f  aritter/twitter_
+00014820: 6e6c 702f 6d61 7374 6572 2f64 6174 612f  nlp/master/data/
+00014830: 616e 6e6f 7461 7465 642f 6e65 722e 7478  annotated/ner.tx
+00014840: 742e 0a20 2020 2020 2020 2054 6865 2066  t..        The f
+00014850: 6972 7374 2074 696d 6520 796f 7520 6361  irst time you ca
+00014860: 6c6c 2074 6869 7320 636f 6e73 7472 7563  ll this construc
+00014870: 746f 7220 6974 2077 696c 6c20 6175 746f  tor it will auto
+00014880: 6d61 7469 6361 6c6c 7920 646f 776e 6c6f  matically downlo
+00014890: 6164 2074 6865 2064 6174 6173 6574 2e0a  ad the dataset..
+000148a0: 0a20 2020 2020 2020 2041 7267 733a 0a20  .        Args:. 
+000148b0: 2020 2020 2020 2020 2020 2062 6173 655f             base_
+000148c0: 7061 7468 3a20 4465 6661 756c 7420 6973  path: Default is
+000148d0: 204e 6f6e 652c 206d 6561 6e69 6e67 2074   None, meaning t
+000148e0: 6861 7420 636f 7270 7573 2067 6574 7320  hat corpus gets 
+000148f0: 6175 746f 2d64 6f77 6e6c 6f61 6465 6420  auto-downloaded 
+00014900: 616e 6420 6c6f 6164 6564 2e20 596f 7520  and loaded. You 
+00014910: 6361 6e20 6f76 6572 7269 6465 2074 6869  can override thi
+00014920: 7320 746f 2070 6f69 6e74 2074 6f20 6120  s to point to a 
+00014930: 6469 6666 6572 656e 7420 666f 6c64 6572  different folder
+00014940: 2062 7574 2074 7970 6963 616c 6c79 2074   but typically t
+00014950: 6869 7320 7368 6f75 6c64 206e 6f74 2062  his should not b
+00014960: 6520 6e65 6365 7373 6172 792e 0a20 2020  e necessary..   
+00014970: 2020 2020 2020 2020 2069 6e5f 6d65 6d6f           in_memo
+00014980: 7279 3a20 4966 2054 7275 652c 206b 6565  ry: If True, kee
+00014990: 7073 2064 6174 6173 6574 2069 6e20 6d65  ps dataset in me
+000149a0: 6d6f 7279 2067 6976 696e 6720 7370 6565  mory giving spee
+000149b0: 6475 7073 2069 6e20 7472 6169 6e69 6e67  dups in training
+000149c0: 2e0a 2020 2020 2020 2020 2020 2020 646f  ..            do
+000149d0: 6375 6d65 6e74 5f61 735f 7365 7175 656e  cument_as_sequen
+000149e0: 6365 3a20 4966 2054 7275 652c 2061 6c6c  ce: If True, all
+000149f0: 2073 656e 7465 6e63 6573 206f 6620 6120   sentences of a 
+00014a00: 646f 6375 6d65 6e74 2061 7265 2072 6561  document are rea
+00014a10: 6420 696e 746f 2061 2073 696e 676c 6520  d into a single 
+00014a20: 5365 6e74 656e 6365 206f 626a 6563 740a  Sentence object.
+00014a30: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00014a40: 2020 2020 6261 7365 5f70 6174 6820 3d20      base_path = 
+00014a50: 6b6f 6c69 6272 692e 6361 6368 655f 726f  kolibri.cache_ro
+00014a60: 6f74 202f 2022 6461 7461 7365 7473 2220  ot / "datasets" 
+00014a70: 6966 206e 6f74 2062 6173 655f 7061 7468  if not base_path
+00014a80: 2065 6c73 6520 5061 7468 2862 6173 655f   else Path(base_
+00014a90: 7061 7468 290a 0a20 2020 2020 2020 2023  path)..        #
+00014aa0: 2063 6f6c 756d 6e20 666f 726d 6174 0a20   column format. 
+00014ab0: 2020 2020 2020 2063 6f6c 756d 6e73 203d         columns =
+00014ac0: 207b 303a 2022 7465 7874 222c 2031 3a20   {0: "text", 1: 
+00014ad0: 226e 6572 227d 0a0a 2020 2020 2020 2020  "ner"}..        
+00014ae0: 2320 7468 6973 2064 6174 6173 6574 206e  # this dataset n
+00014af0: 616d 650a 2020 2020 2020 2020 6461 7461  ame.        data
+00014b00: 7365 745f 6e61 6d65 203d 2073 656c 662e  set_name = self.
+00014b10: 5f5f 636c 6173 735f 5f2e 5f5f 6e61 6d65  __class__.__name
+00014b20: 5f5f 2e6c 6f77 6572 2829 0a0a 2020 2020  __.lower()..    
+00014b30: 2020 2020 2320 6465 6661 756c 7420 6461      # default da
+00014b40: 7461 7365 7420 666f 6c64 6572 2069 7320  taset folder is 
+00014b50: 7468 6520 6361 6368 6520 726f 6f74 0a20  the cache root. 
+00014b60: 2020 2020 2020 2069 6620 6e6f 7420 6261         if not ba
+00014b70: 7365 5f70 6174 683a 0a20 2020 2020 2020  se_path:.       
+00014b80: 2020 2020 2062 6173 655f 7061 7468 203d       base_path =
+00014b90: 206b 6f6c 6962 7269 2e63 6163 6865 5f72   kolibri.cache_r
+00014ba0: 6f6f 7420 2f20 2264 6174 6173 6574 7322  oot / "datasets"
+00014bb0: 0a20 2020 2020 2020 2064 6174 615f 666f  .        data_fo
+00014bc0: 6c64 6572 203d 2062 6173 655f 7061 7468  lder = base_path
+00014bd0: 202f 2064 6174 6173 6574 5f6e 616d 650a   / dataset_name.
+00014be0: 0a20 2020 2020 2020 2023 2064 6f77 6e6c  .        # downl
+00014bf0: 6f61 6420 6461 7461 2069 6620 6e65 6365  oad data if nece
+00014c00: 7373 6172 790a 2020 2020 2020 2020 7477  ssary.        tw
+00014c10: 6974 7465 725f 6e65 725f 7061 7468 203d  itter_ner_path =
+00014c20: 2022 6874 7470 733a 2f2f 7261 772e 6769   "https://raw.gi
+00014c30: 7468 7562 7573 6572 636f 6e74 656e 742e  thubusercontent.
+00014c40: 636f 6d2f 6172 6974 7465 722f 7477 6974  com/aritter/twit
+00014c50: 7465 725f 6e6c 702f 6d61 7374 6572 2f64  ter_nlp/master/d
+00014c60: 6174 612f 616e 6e6f 7461 7465 642f 220a  ata/annotated/".
+00014c70: 2020 2020 2020 2020 6361 6368 6564 5f70          cached_p
+00014c80: 6174 6828 6622 7b74 7769 7474 6572 5f6e  ath(f"{twitter_n
+00014c90: 6572 5f70 6174 687d 6e65 722e 7478 7422  er_path}ner.txt"
+00014ca0: 2c20 5061 7468 2822 6461 7461 7365 7473  , Path("datasets
+00014cb0: 2229 202f 2064 6174 6173 6574 5f6e 616d  ") / dataset_nam
+00014cc0: 6529 0a0a 2020 2020 2020 2020 7375 7065  e)..        supe
+00014cd0: 7228 292e 5f5f 696e 6974 5f5f 280a 2020  r().__init__(.  
+00014ce0: 2020 2020 2020 2020 2020 6461 7461 5f66            data_f
+00014cf0: 6f6c 6465 722c 0a20 2020 2020 2020 2020  older,.         
+00014d00: 2020 2063 6f6c 756d 6e73 2c0a 2020 2020     columns,.    
+00014d10: 2020 2020 2020 2020 656e 636f 6469 6e67          encoding
+00014d20: 3d22 6c61 7469 6e2d 3122 2c0a 2020 2020  ="latin-1",.    
+00014d30: 2020 2020 2020 2020 7472 6169 6e5f 6669          train_fi
+00014d40: 6c65 3d22 6e65 722e 7478 7422 2c0a 2020  le="ner.txt",.  
+00014d50: 2020 2020 2020 2020 2020 696e 5f6d 656d            in_mem
+00014d60: 6f72 793d 696e 5f6d 656d 6f72 792c 0a20  ory=in_memory,. 
+00014d70: 2020 2020 2020 2020 2020 202a 2a63 6f72             **cor
+00014d80: 7075 7361 7267 732c 0a20 2020 2020 2020  pusargs,.       
+00014d90: 2029 0a0a 0a63 6c61 7373 204e 4552 5f45   )...class NER_E
+00014da0: 4e47 4c49 5348 5f50 4552 534f 4e28 436f  NGLISH_PERSON(Co
+00014db0: 6c75 6d6e 436f 7270 7573 293a 0a20 2020  lumnCorpus):.   
+00014dc0: 2064 6566 205f 5f69 6e69 745f 5f28 0a20   def __init__(. 
+00014dd0: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
+00014de0: 2020 2020 2062 6173 655f 7061 7468 3a20       base_path: 
+00014df0: 4f70 7469 6f6e 616c 5b55 6e69 6f6e 5b73  Optional[Union[s
+00014e00: 7472 2c20 5061 7468 5d5d 203d 204e 6f6e  tr, Path]] = Non
+00014e10: 652c 0a20 2020 2020 2020 2069 6e5f 6d65  e,.        in_me
+00014e20: 6d6f 7279 3a20 626f 6f6c 203d 2054 7275  mory: bool = Tru
+00014e30: 652c 0a20 2020 2029 202d 3e20 4e6f 6e65  e,.    ) -> None
+00014e40: 3a0a 2020 2020 2020 2020 2222 2249 6e69  :.        """Ini
+00014e50: 7469 616c 697a 6520 7468 6520 5045 5253  tialize the PERS
+00014e60: 4f4e 5f4e 4552 2063 6f72 7075 7320 666f  ON_NER corpus fo
+00014e70: 7220 7065 7273 6f6e 206e 616d 6573 2e0a  r person names..
+00014e80: 0a20 2020 2020 2020 2054 6865 2066 6972  .        The fir
+00014e90: 7374 2074 696d 6520 796f 7520 6361 6c6c  st time you call
+00014ea0: 2074 6869 7320 636f 6e73 7472 7563 746f   this constructo
+00014eb0: 7220 6974 2077 696c 6c20 6175 746f 6d61  r it will automa
+00014ec0: 7469 6361 6c6c 7920 646f 776e 6c6f 6164  tically download
+00014ed0: 2074 6865 2064 6174 6173 6574 2e0a 0a20   the dataset... 
+00014ee0: 2020 2020 2020 2041 7267 733a 0a20 2020         Args:.   
+00014ef0: 2020 2020 2020 2020 2062 6173 655f 7061           base_pa
+00014f00: 7468 3a20 4465 6661 756c 7420 6973 204e  th: Default is N
+00014f10: 6f6e 652c 206d 6561 6e69 6e67 2074 6861  one, meaning tha
+00014f20: 7420 636f 7270 7573 2067 6574 7320 6175  t corpus gets au
+00014f30: 746f 2d64 6f77 6e6c 6f61 6465 6420 616e  to-downloaded an
+00014f40: 6420 6c6f 6164 6564 2e20 596f 7520 6361  d loaded. You ca
+00014f50: 6e20 6f76 6572 7269 6465 2074 6869 7320  n override this 
+00014f60: 746f 2070 6f69 6e74 2074 6f20 6120 6469  to point to a di
+00014f70: 6666 6572 656e 7420 666f 6c64 6572 2062  fferent folder b
+00014f80: 7574 2074 7970 6963 616c 6c79 2074 6869  ut typically thi
+00014f90: 7320 7368 6f75 6c64 206e 6f74 2062 6520  s should not be 
+00014fa0: 6e65 6365 7373 6172 792e 0a20 2020 2020  necessary..     
+00014fb0: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
+00014fc0: 3a20 4966 2054 7275 652c 206b 6565 7073  : If True, keeps
+00014fd0: 2064 6174 6173 6574 2069 6e20 6d65 6d6f   dataset in memo
+00014fe0: 7279 2067 6976 696e 6720 7370 6565 6475  ry giving speedu
+00014ff0: 7073 2069 6e20 7472 6169 6e69 6e67 2e0a  ps in training..
+00015000: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00015010: 2020 2020 6261 7365 5f70 6174 6820 3d20      base_path = 
+00015020: 6b6f 6c69 6272 692e 6361 6368 655f 726f  kolibri.cache_ro
+00015030: 6f74 202f 2022 6461 7461 7365 7473 2220  ot / "datasets" 
+00015040: 6966 206e 6f74 2062 6173 655f 7061 7468  if not base_path
+00015050: 2065 6c73 6520 5061 7468 2862 6173 655f   else Path(base_
+00015060: 7061 7468 290a 0a20 2020 2020 2020 2023  path)..        #
+00015070: 2063 6f6c 756d 6e20 666f 726d 6174 0a20   column format. 
+00015080: 2020 2020 2020 2063 6f6c 756d 6e73 203d         columns =
+00015090: 207b 303a 2022 7465 7874 222c 2031 3a20   {0: "text", 1: 
+000150a0: 226e 6572 227d 0a0a 2020 2020 2020 2020  "ner"}..        
+000150b0: 2320 7468 6973 2064 6174 6173 6574 206e  # this dataset n
+000150c0: 616d 650a 2020 2020 2020 2020 6461 7461  ame.        data
+000150d0: 7365 745f 6e61 6d65 203d 2073 656c 662e  set_name = self.
+000150e0: 5f5f 636c 6173 735f 5f2e 5f5f 6e61 6d65  __class__.__name
+000150f0: 5f5f 2e6c 6f77 6572 2829 0a0a 2020 2020  __.lower()..    
+00015100: 2020 2020 2320 6465 6661 756c 7420 6461      # default da
+00015110: 7461 7365 7420 666f 6c64 6572 2069 7320  taset folder is 
+00015120: 7468 6520 6361 6368 6520 726f 6f74 0a20  the cache root. 
+00015130: 2020 2020 2020 2069 6620 6e6f 7420 6261         if not ba
+00015140: 7365 5f70 6174 683a 0a20 2020 2020 2020  se_path:.       
+00015150: 2020 2020 2062 6173 655f 7061 7468 203d       base_path =
+00015160: 206b 6f6c 6962 7269 2e63 6163 6865 5f72   kolibri.cache_r
+00015170: 6f6f 7420 2f20 2264 6174 6173 6574 7322  oot / "datasets"
+00015180: 0a20 2020 2020 2020 2064 6174 615f 666f  .        data_fo
+00015190: 6c64 6572 203d 2062 6173 655f 7061 7468  lder = base_path
+000151a0: 202f 2064 6174 6173 6574 5f6e 616d 650a   / dataset_name.
+000151b0: 0a20 2020 2020 2020 2023 2064 6f77 6e6c  .        # downl
+000151c0: 6f61 6420 6461 7461 2069 6620 6e65 6365  oad data if nece
+000151d0: 7373 6172 790a 2020 2020 2020 2020 636f  ssary.        co
+000151e0: 6e6c 6c5f 7061 7468 203d 2022 6874 7470  nll_path = "http
+000151f0: 733a 2f2f 7261 772e 6769 7468 7562 7573  s://raw.githubus
+00015200: 6572 636f 6e74 656e 742e 636f 6d2f 6461  ercontent.com/da
+00015210: 732d 7375 6465 7368 6e61 2f67 656e 6964  s-sudeshna/genid
+00015220: 2f6d 6173 7465 722f 220a 0a20 2020 2020  /master/"..     
+00015230: 2020 2023 2064 6f77 6e6c 6f61 6420 6669     # download fi
+00015240: 6c65 7320 6966 206e 6f74 2070 7265 7365  les if not prese
+00015250: 6e74 206c 6f63 616c 6c79 730a 2020 2020  nt locallys.    
+00015260: 2020 2020 6361 6368 6564 5f70 6174 6828      cached_path(
+00015270: 6622 7b63 6f6e 6c6c 5f70 6174 687d 636f  f"{conll_path}co
+00015280: 6e6c 6c2d 672e 636f 6e6c 6c22 2c20 6461  nll-g.conll", da
+00015290: 7461 5f66 6f6c 6465 7220 2f20 2272 6177  ta_folder / "raw
+000152a0: 2229 0a20 2020 2020 2020 2063 6163 6865  ").        cache
+000152b0: 645f 7061 7468 2866 227b 636f 6e6c 6c5f  d_path(f"{conll_
+000152c0: 7061 7468 7d69 6565 722d 672e 636f 6e6c  path}ieer-g.conl
+000152d0: 6c22 2c20 6461 7461 5f66 6f6c 6465 7220  l", data_folder 
+000152e0: 2f20 2272 6177 2229 0a20 2020 2020 2020  / "raw").       
+000152f0: 2063 6163 6865 645f 7061 7468 2866 227b   cached_path(f"{
+00015300: 636f 6e6c 6c5f 7061 7468 7d74 6578 7462  conll_path}textb
+00015310: 6f6f 6b2d 672e 636f 6e6c 6c22 2c20 6461  ook-g.conll", da
+00015320: 7461 5f66 6f6c 6465 7220 2f20 2272 6177  ta_folder / "raw
+00015330: 2229 0a20 2020 2020 2020 2063 6163 6865  ").        cache
+00015340: 645f 7061 7468 2866 227b 636f 6e6c 6c5f  d_path(f"{conll_
+00015350: 7061 7468 7d77 696b 692d 672e 636f 6e6c  path}wiki-g.conl
+00015360: 6c22 2c20 6461 7461 5f66 6f6c 6465 7220  l", data_folder 
+00015370: 2f20 2272 6177 2229 0a0a 2020 2020 2020  / "raw")..      
+00015380: 2020 7365 6c66 2e5f 5f63 6f6e 6361 7441    self.__concatA
+00015390: 6c6c 4669 6c65 7328 6461 7461 5f66 6f6c  llFiles(data_fol
+000153a0: 6465 7229 0a0a 2020 2020 2020 2020 7375  der)..        su
+000153b0: 7065 7228 292e 5f5f 696e 6974 5f5f 2864  per().__init__(d
+000153c0: 6174 615f 666f 6c64 6572 2c20 636f 6c75  ata_folder, colu
+000153d0: 6d6e 732c 2069 6e5f 6d65 6d6f 7279 3d69  mns, in_memory=i
+000153e0: 6e5f 6d65 6d6f 7279 2c20 7472 6169 6e5f  n_memory, train_
+000153f0: 6669 6c65 3d22 6269 6746 696c 652e 636f  file="bigFile.co
+00015400: 6e6c 6c22 290a 0a20 2020 2040 7374 6174  nll")..    @stat
+00015410: 6963 6d65 7468 6f64 0a20 2020 2064 6566  icmethod.    def
+00015420: 205f 5f63 6f6e 6361 7441 6c6c 4669 6c65   __concatAllFile
+00015430: 7328 6461 7461 5f66 6f6c 6465 7229 3a0a  s(data_folder):.
+00015440: 2020 2020 2020 2020 6172 7220 3d20 6f73          arr = os
+00015450: 2e6c 6973 7464 6972 2864 6174 615f 666f  .listdir(data_fo
+00015460: 6c64 6572 202f 2022 7261 7722 290a 0a20  lder / "raw").. 
+00015470: 2020 2020 2020 2077 6974 6820 6f70 656e         with open
+00015480: 2864 6174 615f 666f 6c64 6572 202f 2022  (data_folder / "
+00015490: 6269 6746 696c 652e 636f 6e6c 6c22 2c20  bigFile.conll", 
+000154a0: 2277 2229 2061 7320 6f75 7466 696c 653a  "w") as outfile:
+000154b0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+000154c0: 2066 6e61 6d65 2069 6e20 6172 723a 0a20   fname in arr:. 
+000154d0: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+000154e0: 6974 6820 6f70 656e 2864 6174 615f 666f  ith open(data_fo
+000154f0: 6c64 6572 202f 2022 7261 7722 202f 2066  lder / "raw" / f
+00015500: 6e61 6d65 2920 6173 2069 6e66 696c 653a  name) as infile:
+00015510: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015520: 2020 2020 206f 7574 6669 6c65 2e77 7269       outfile.wri
+00015530: 7465 2869 6e66 696c 652e 7265 6164 2829  te(infile.read()
+00015540: 290a 0a0a 636c 6173 7320 4e45 525f 454e  )...class NER_EN
+00015550: 474c 4953 485f 5745 4250 4147 4553 2843  GLISH_WEBPAGES(C
+00015560: 6f6c 756d 6e43 6f72 7075 7329 3a0a 2020  olumnCorpus):.  
+00015570: 2020 6465 6620 5f5f 696e 6974 5f5f 280a    def __init__(.
+00015580: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
+00015590: 2020 2020 2020 6261 7365 5f70 6174 683a        base_path:
+000155a0: 204f 7074 696f 6e61 6c5b 556e 696f 6e5b   Optional[Union[
+000155b0: 7374 722c 2050 6174 685d 5d20 3d20 4e6f  str, Path]] = No
+000155c0: 6e65 2c0a 2020 2020 2020 2020 696e 5f6d  ne,.        in_m
+000155d0: 656d 6f72 793a 2062 6f6f 6c20 3d20 5472  emory: bool = Tr
+000155e0: 7565 2c0a 2020 2020 2020 2020 2a2a 636f  ue,.        **co
+000155f0: 7270 7573 6172 6773 2c0a 2020 2020 2920  rpusargs,.    ) 
+00015600: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+00015610: 2022 2222 496e 6974 6961 6c69 7a65 2074   """Initialize t
+00015620: 6865 2057 4542 5041 4745 535f 4e45 5220  he WEBPAGES_NER 
+00015630: 636f 7270 7573 2e0a 0a20 2020 2020 2020  corpus...       
+00015640: 2054 6865 2063 6f72 7075 7320 7761 7320   The corpus was 
+00015650: 696e 7472 6f64 7563 6564 2069 6e20 7468  introduced in th
+00015660: 6520 7061 7065 7220 2244 6573 6967 6e20  e paper "Design 
+00015670: 4368 616c 6c65 6e67 6573 2061 6e64 204d  Challenges and M
+00015680: 6973 636f 6e63 6570 7469 6f6e 7320 696e  isconceptions in
+00015690: 204e 616d 6564 2045 6e74 6974 7920 5265   Named Entity Re
+000156a0: 636f 676e 6974 696f 6e22 2062 7920 5261  cognition" by Ra
+000156b0: 7469 6e6f 7620 616e 6420 526f 7468 2028  tinov and Roth (
+000156c0: 3230 3039 293a 2068 7474 7073 3a2f 2f61  2009): https://a
+000156d0: 636c 616e 7468 6f6c 6f67 792e 6f72 672f  clanthology.org/
+000156e0: 5730 392d 3131 3139 2f2e 0a20 2020 2020  W09-1119/..     
+000156f0: 2020 2054 6865 2066 6972 7374 2074 696d     The first tim
+00015700: 6520 796f 7520 6361 6c6c 2074 6869 7320  e you call this 
+00015710: 636f 6e73 7472 7563 746f 7220 6974 2077  constructor it w
+00015720: 696c 6c20 6175 746f 6d61 7469 6361 6c6c  ill automaticall
+00015730: 7920 646f 776e 6c6f 6164 2074 6865 2064  y download the d
+00015740: 6174 6173 6574 2e0a 0a20 2020 2020 2020  ataset...       
+00015750: 2041 7267 733a 0a20 2020 2020 2020 2020   Args:.         
+00015760: 2020 2062 6173 655f 7061 7468 3a20 4465     base_path: De
+00015770: 6661 756c 7420 6973 204e 6f6e 652c 206d  fault is None, m
+00015780: 6561 6e69 6e67 2074 6861 7420 636f 7270  eaning that corp
+00015790: 7573 2067 6574 7320 6175 746f 2d64 6f77  us gets auto-dow
+000157a0: 6e6c 6f61 6465 6420 616e 6420 6c6f 6164  nloaded and load
+000157b0: 6564 2e20 596f 7520 6361 6e20 6f76 6572  ed. You can over
+000157c0: 7269 6465 2074 6869 7320 746f 2070 6f69  ride this to poi
+000157d0: 6e74 2074 6f20 6120 6469 6666 6572 656e  nt to a differen
+000157e0: 7420 666f 6c64 6572 2062 7574 2074 7970  t folder but typ
+000157f0: 6963 616c 6c79 2074 6869 7320 7368 6f75  ically this shou
+00015800: 6c64 206e 6f74 2062 6520 6e65 6365 7373  ld not be necess
+00015810: 6172 792e 0a20 2020 2020 2020 2020 2020  ary..           
+00015820: 2069 6e5f 6d65 6d6f 7279 3a20 4966 2054   in_memory: If T
+00015830: 7275 652c 206b 6565 7073 2064 6174 6173  rue, keeps datas
+00015840: 6574 2069 6e20 6d65 6d6f 7279 2067 6976  et in memory giv
+00015850: 696e 6720 7370 6565 6475 7073 2069 6e20  ing speedups in 
+00015860: 7472 6169 6e69 6e67 2e0a 2020 2020 2020  training..      
+00015870: 2020 2020 2020 646f 6375 6d65 6e74 5f61        document_a
+00015880: 735f 7365 7175 656e 6365 3a20 4966 2054  s_sequence: If T
+00015890: 7275 652c 2061 6c6c 2073 656e 7465 6e63  rue, all sentenc
+000158a0: 6573 206f 6620 6120 646f 6375 6d65 6e74  es of a document
+000158b0: 2061 7265 2072 6561 6420 696e 746f 2061   are read into a
+000158c0: 2073 696e 676c 6520 5365 6e74 656e 6365   single Sentence
+000158d0: 206f 626a 6563 740a 2020 2020 2020 2020   object.        
+000158e0: 2222 220a 2020 2020 2020 2020 6261 7365  """.        base
+000158f0: 5f70 6174 6820 3d20 6b6f 6c69 6272 692e  _path = kolibri.
+00015900: 6361 6368 655f 726f 6f74 202f 2022 6461  cache_root / "da
+00015910: 7461 7365 7473 2220 6966 206e 6f74 2062  tasets" if not b
+00015920: 6173 655f 7061 7468 2065 6c73 6520 5061  ase_path else Pa
+00015930: 7468 2862 6173 655f 7061 7468 290a 0a20  th(base_path).. 
+00015940: 2020 2020 2020 2023 2063 6f6c 756d 6e20         # column 
+00015950: 666f 726d 6174 0a20 2020 2020 2020 2063  format.        c
+00015960: 6f6c 756d 6e73 203d 207b 303a 2022 6e65  olumns = {0: "ne
+00015970: 7222 2c20 353a 2022 7465 7874 227d 0a0a  r", 5: "text"}..
+00015980: 2020 2020 2020 2020 2320 7468 6973 2064          # this d
+00015990: 6174 6173 6574 206e 616d 650a 2020 2020  ataset name.    
+000159a0: 2020 2020 6461 7461 7365 745f 6e61 6d65      dataset_name
+000159b0: 203d 2073 656c 662e 5f5f 636c 6173 735f   = self.__class_
+000159c0: 5f2e 5f5f 6e61 6d65 5f5f 2e6c 6f77 6572  _.__name__.lower
+000159d0: 2829 0a0a 2020 2020 2020 2020 2320 6465  ()..        # de
+000159e0: 6661 756c 7420 6461 7461 7365 7420 666f  fault dataset fo
+000159f0: 6c64 6572 2069 7320 7468 6520 6361 6368  lder is the cach
+00015a00: 6520 726f 6f74 0a20 2020 2020 2020 2069  e root.        i
+00015a10: 6620 6e6f 7420 6261 7365 5f70 6174 683a  f not base_path:
+00015a20: 0a20 2020 2020 2020 2020 2020 2062 6173  .            bas
+00015a30: 655f 7061 7468 203d 2050 6174 6828 6b6f  e_path = Path(ko
+00015a40: 6c69 6272 692e 6361 6368 655f 726f 6f74  libri.cache_root
+00015a50: 2920 2f20 2264 6174 6173 6574 7322 0a20  ) / "datasets". 
+00015a60: 2020 2020 2020 2064 6174 615f 666f 6c64         data_fold
+00015a70: 6572 203d 2062 6173 655f 7061 7468 202f  er = base_path /
+00015a80: 2064 6174 6173 6574 5f6e 616d 650a 2020   dataset_name.  
+00015a90: 2020 2020 2020 696d 706f 7274 2074 6172        import tar
+00015aa0: 6669 6c65 0a0a 2020 2020 2020 2020 6966  file..        if
+00015ab0: 206e 6f74 206f 732e 7061 7468 2e69 7366   not os.path.isf
+00015ac0: 696c 6528 6461 7461 5f66 6f6c 6465 7220  ile(data_folder 
+00015ad0: 2f20 2277 6562 7061 6765 735f 6e65 722e  / "webpages_ner.
+00015ae0: 7478 7422 293a 0a20 2020 2020 2020 2020  txt"):.         
+00015af0: 2020 2023 2020 2020 2023 2064 6f77 6e6c     #     # downl
+00015b00: 6f61 6420 7a69 700a 2020 2020 2020 2020  oad zip.        
+00015b10: 2020 2020 7461 725f 6669 6c65 203d 2022      tar_file = "
+00015b20: 6874 7470 733a 2f2f 636f 6763 6f6d 702e  https://cogcomp.
+00015b30: 7365 6173 2e75 7065 6e6e 2e65 6475 2f44  seas.upenn.edu/D
+00015b40: 6174 612f 4e45 5257 6562 7061 6765 7343  ata/NERWebpagesC
+00015b50: 6f6c 756d 6e73 2e74 677a 220a 2020 2020  olumns.tgz".    
+00015b60: 2020 2020 2020 2020 7765 6270 6167 6573          webpages
+00015b70: 5f6e 6572 5f70 6174 6820 3d20 6361 6368  _ner_path = cach
+00015b80: 6564 5f70 6174 6828 7461 725f 6669 6c65  ed_path(tar_file
+00015b90: 2c20 5061 7468 2822 6461 7461 7365 7473  , Path("datasets
+00015ba0: 2229 202f 2064 6174 6173 6574 5f6e 616d  ") / dataset_nam
+00015bb0: 6529 0a20 2020 2020 2020 2020 2020 2074  e).            t
+00015bc0: 6620 3d20 7461 7266 696c 652e 6f70 656e  f = tarfile.open
+00015bd0: 2877 6562 7061 6765 735f 6e65 725f 7061  (webpages_ner_pa
+00015be0: 7468 290a 2020 2020 2020 2020 2020 2020  th).            
+00015bf0: 7466 2e65 7874 7261 6374 616c 6c28 6461  tf.extractall(da
+00015c00: 7461 5f66 6f6c 6465 7229 0a20 2020 2020  ta_folder).     
+00015c10: 2020 2020 2020 2074 662e 636c 6f73 6528         tf.close(
+00015c20: 290a 2020 2020 2020 2020 6f75 7470 7574  ).        output
+00015c30: 6669 6c65 203d 206f 732e 7061 7468 2e61  file = os.path.a
+00015c40: 6273 7061 7468 2864 6174 615f 666f 6c64  bspath(data_fold
+00015c50: 6572 290a 0a20 2020 2020 2020 2023 206d  er)..        # m
+00015c60: 6572 6765 2074 6865 2066 696c 6573 2069  erge the files i
+00015c70: 6e20 6f6e 6520 6173 2074 6865 207a 6970  n one as the zip
+00015c80: 2069 7320 636f 6e74 6169 6e69 6e67 206d   is containing m
+00015c90: 756c 7469 706c 6573 2066 696c 6573 0a0a  ultiples files..
+00015ca0: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
+00015cb0: 6e28 6f75 7470 7574 6669 6c65 202f 2064  n(outputfile / d
+00015cc0: 6174 615f 666f 6c64 6572 202f 2022 7765  ata_folder / "we
+00015cd0: 6270 6167 6573 5f6e 6572 2e74 7874 222c  bpages_ner.txt",
+00015ce0: 2022 772b 2229 2061 7320 6f75 7466 696c   "w+") as outfil
+00015cf0: 653a 0a20 2020 2020 2020 2020 2020 2066  e:.            f
+00015d00: 6f72 2066 696c 6573 2069 6e20 6f73 2e77  or files in os.w
+00015d10: 616c 6b28 6f75 7470 7574 6669 6c65 293a  alk(outputfile):
+00015d20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015d30: 2066 203d 2066 696c 6573 5b31 5d0a 2020   f = files[1].  
+00015d40: 2020 2020 2020 2020 2020 2020 2020 6666                ff
+00015d50: 203d 206f 732e 6c69 7374 6469 7228 6f75   = os.listdir(ou
+00015d60: 7470 7574 6669 6c65 202f 2064 6174 615f  tputfile / data_
+00015d70: 666f 6c64 6572 202f 2066 5b2d 315d 290a  folder / f[-1]).
 00015d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015d90: 6f75 7466 696c 652e 7772 6974 6528 696e  outfile.write(in
-00015da0: 6669 6c65 2e72 6561 6428 2929 0a0a 0a63  file.read())...c
-00015db0: 6c61 7373 204e 4552 5f45 4e47 4c49 5348  lass NER_ENGLISH
-00015dc0: 5f57 4542 5041 4745 5328 436f 6c75 6d6e  _WEBPAGES(Column
-00015dd0: 436f 7270 7573 293a 0a20 2020 2064 6566  Corpus):.    def
-00015de0: 205f 5f69 6e69 745f 5f28 0a20 2020 2020   __init__(.     
-00015df0: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
-00015e00: 2062 6173 655f 7061 7468 3a20 4f70 7469   base_path: Opti
-00015e10: 6f6e 616c 5b55 6e69 6f6e 5b73 7472 2c20  onal[Union[str, 
-00015e20: 5061 7468 5d5d 203d 204e 6f6e 652c 0a20  Path]] = None,. 
-00015e30: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
-00015e40: 3a20 626f 6f6c 203d 2054 7275 652c 0a20  : bool = True,. 
-00015e50: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
-00015e60: 7267 732c 0a20 2020 2029 202d 3e20 4e6f  rgs,.    ) -> No
-00015e70: 6e65 3a0a 2020 2020 2020 2020 2222 2249  ne:.        """I
-00015e80: 6e69 7469 616c 697a 6520 7468 6520 5745  nitialize the WE
-00015e90: 4250 4147 4553 5f4e 4552 2063 6f72 7075  BPAGES_NER corpu
-00015ea0: 732e 0a0a 2020 2020 2020 2020 5468 6520  s...        The 
-00015eb0: 636f 7270 7573 2077 6173 2069 6e74 726f  corpus was intro
-00015ec0: 6475 6365 6420 696e 2074 6865 2070 6170  duced in the pap
-00015ed0: 6572 2022 4465 7369 676e 2043 6861 6c6c  er "Design Chall
-00015ee0: 656e 6765 7320 616e 6420 4d69 7363 6f6e  enges and Miscon
-00015ef0: 6365 7074 696f 6e73 2069 6e20 4e61 6d65  ceptions in Name
-00015f00: 6420 456e 7469 7479 2052 6563 6f67 6e69  d Entity Recogni
-00015f10: 7469 6f6e 2220 6279 2052 6174 696e 6f76  tion" by Ratinov
-00015f20: 2061 6e64 2052 6f74 6820 2832 3030 3929   and Roth (2009)
-00015f30: 3a20 6874 7470 733a 2f2f 6163 6c61 6e74  : https://aclant
-00015f40: 686f 6c6f 6779 2e6f 7267 2f57 3039 2d31  hology.org/W09-1
-00015f50: 3131 392f 2e0a 2020 2020 2020 2020 5468  119/..        Th
-00015f60: 6520 6669 7273 7420 7469 6d65 2079 6f75  e first time you
-00015f70: 2063 616c 6c20 7468 6973 2063 6f6e 7374   call this const
-00015f80: 7275 6374 6f72 2069 7420 7769 6c6c 2061  ructor it will a
-00015f90: 7574 6f6d 6174 6963 616c 6c79 2064 6f77  utomatically dow
-00015fa0: 6e6c 6f61 6420 7468 6520 6461 7461 7365  nload the datase
-00015fb0: 742e 0a0a 2020 2020 2020 2020 4172 6773  t...        Args
-00015fc0: 3a0a 2020 2020 2020 2020 2020 2020 6261  :.            ba
-00015fd0: 7365 5f70 6174 683a 2044 6566 6175 6c74  se_path: Default
-00015fe0: 2069 7320 4e6f 6e65 2c20 6d65 616e 696e   is None, meanin
-00015ff0: 6720 7468 6174 2063 6f72 7075 7320 6765  g that corpus ge
-00016000: 7473 2061 7574 6f2d 646f 776e 6c6f 6164  ts auto-download
-00016010: 6564 2061 6e64 206c 6f61 6465 642e 2059  ed and loaded. Y
-00016020: 6f75 2063 616e 206f 7665 7272 6964 6520  ou can override 
-00016030: 7468 6973 2074 6f20 706f 696e 7420 746f  this to point to
-00016040: 2061 2064 6966 6665 7265 6e74 2066 6f6c   a different fol
-00016050: 6465 7220 6275 7420 7479 7069 6361 6c6c  der but typicall
-00016060: 7920 7468 6973 2073 686f 756c 6420 6e6f  y this should no
-00016070: 7420 6265 206e 6563 6573 7361 7279 2e0a  t be necessary..
-00016080: 2020 2020 2020 2020 2020 2020 696e 5f6d              in_m
-00016090: 656d 6f72 793a 2049 6620 5472 7565 2c20  emory: If True, 
-000160a0: 6b65 6570 7320 6461 7461 7365 7420 696e  keeps dataset in
-000160b0: 206d 656d 6f72 7920 6769 7669 6e67 2073   memory giving s
-000160c0: 7065 6564 7570 7320 696e 2074 7261 696e  peedups in train
-000160d0: 696e 672e 0a20 2020 2020 2020 2020 2020  ing..           
-000160e0: 2064 6f63 756d 656e 745f 6173 5f73 6571   document_as_seq
-000160f0: 7565 6e63 653a 2049 6620 5472 7565 2c20  uence: If True, 
-00016100: 616c 6c20 7365 6e74 656e 6365 7320 6f66  all sentences of
-00016110: 2061 2064 6f63 756d 656e 7420 6172 6520   a document are 
-00016120: 7265 6164 2069 6e74 6f20 6120 7369 6e67  read into a sing
-00016130: 6c65 2053 656e 7465 6e63 6520 6f62 6a65  le Sentence obje
-00016140: 6374 0a20 2020 2020 2020 2022 2222 0a20  ct.        """. 
-00016150: 2020 2020 2020 2062 6173 655f 7061 7468         base_path
-00016160: 203d 206b 6f6c 6962 7269 2e63 6163 6865   = kolibri.cache
-00016170: 5f72 6f6f 7420 2f20 2264 6174 6173 6574  _root / "dataset
-00016180: 7322 2069 6620 6e6f 7420 6261 7365 5f70  s" if not base_p
-00016190: 6174 6820 656c 7365 2050 6174 6828 6261  ath else Path(ba
-000161a0: 7365 5f70 6174 6829 0a0a 2020 2020 2020  se_path)..      
-000161b0: 2020 2320 636f 6c75 6d6e 2066 6f72 6d61    # column forma
-000161c0: 740a 2020 2020 2020 2020 636f 6c75 6d6e  t.        column
-000161d0: 7320 3d20 7b30 3a20 226e 6572 222c 2035  s = {0: "ner", 5
-000161e0: 3a20 2274 6578 7422 7d0a 0a20 2020 2020  : "text"}..     
-000161f0: 2020 2023 2074 6869 7320 6461 7461 7365     # this datase
-00016200: 7420 6e61 6d65 0a20 2020 2020 2020 2064  t name.        d
-00016210: 6174 6173 6574 5f6e 616d 6520 3d20 7365  ataset_name = se
-00016220: 6c66 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e  lf.__class__.__n
-00016230: 616d 655f 5f2e 6c6f 7765 7228 290a 0a20  ame__.lower().. 
-00016240: 2020 2020 2020 2023 2064 6566 6175 6c74         # default
-00016250: 2064 6174 6173 6574 2066 6f6c 6465 7220   dataset folder 
-00016260: 6973 2074 6865 2063 6163 6865 2072 6f6f  is the cache roo
-00016270: 740a 2020 2020 2020 2020 6966 206e 6f74  t.        if not
-00016280: 2062 6173 655f 7061 7468 3a0a 2020 2020   base_path:.    
-00016290: 2020 2020 2020 2020 6261 7365 5f70 6174          base_pat
-000162a0: 6820 3d20 5061 7468 286b 6f6c 6962 7269  h = Path(kolibri
-000162b0: 2e63 6163 6865 5f72 6f6f 7429 202f 2022  .cache_root) / "
-000162c0: 6461 7461 7365 7473 220a 2020 2020 2020  datasets".      
-000162d0: 2020 6461 7461 5f66 6f6c 6465 7220 3d20    data_folder = 
-000162e0: 6261 7365 5f70 6174 6820 2f20 6461 7461  base_path / data
-000162f0: 7365 745f 6e61 6d65 0a20 2020 2020 2020  set_name.       
-00016300: 2069 6d70 6f72 7420 7461 7266 696c 650a   import tarfile.
-00016310: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-00016320: 6f73 2e70 6174 682e 6973 6669 6c65 2864  os.path.isfile(d
-00016330: 6174 615f 666f 6c64 6572 202f 2022 7765  ata_folder / "we
-00016340: 6270 6167 6573 5f6e 6572 2e74 7874 2229  bpages_ner.txt")
-00016350: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
-00016360: 2020 2020 2320 646f 776e 6c6f 6164 207a      # download z
-00016370: 6970 0a20 2020 2020 2020 2020 2020 2074  ip.            t
-00016380: 6172 5f66 696c 6520 3d20 2268 7474 7073  ar_file = "https
-00016390: 3a2f 2f63 6f67 636f 6d70 2e73 6561 732e  ://cogcomp.seas.
-000163a0: 7570 656e 6e2e 6564 752f 4461 7461 2f4e  upenn.edu/Data/N
-000163b0: 4552 5765 6270 6167 6573 436f 6c75 6d6e  ERWebpagesColumn
-000163c0: 732e 7467 7a22 0a20 2020 2020 2020 2020  s.tgz".         
-000163d0: 2020 2077 6562 7061 6765 735f 6e65 725f     webpages_ner_
-000163e0: 7061 7468 203d 2063 6163 6865 645f 7061  path = cached_pa
-000163f0: 7468 2874 6172 5f66 696c 652c 2050 6174  th(tar_file, Pat
-00016400: 6828 2264 6174 6173 6574 7322 2920 2f20  h("datasets") / 
-00016410: 6461 7461 7365 745f 6e61 6d65 290a 2020  dataset_name).  
-00016420: 2020 2020 2020 2020 2020 7466 203d 2074            tf = t
-00016430: 6172 6669 6c65 2e6f 7065 6e28 7765 6270  arfile.open(webp
-00016440: 6167 6573 5f6e 6572 5f70 6174 6829 0a20  ages_ner_path). 
-00016450: 2020 2020 2020 2020 2020 2074 662e 6578             tf.ex
-00016460: 7472 6163 7461 6c6c 2864 6174 615f 666f  tractall(data_fo
-00016470: 6c64 6572 290a 2020 2020 2020 2020 2020  lder).          
-00016480: 2020 7466 2e63 6c6f 7365 2829 0a20 2020    tf.close().   
-00016490: 2020 2020 206f 7574 7075 7466 696c 6520       outputfile 
-000164a0: 3d20 6f73 2e70 6174 682e 6162 7370 6174  = os.path.abspat
-000164b0: 6828 6461 7461 5f66 6f6c 6465 7229 0a0a  h(data_folder)..
-000164c0: 2020 2020 2020 2020 2320 6d65 7267 6520          # merge 
-000164d0: 7468 6520 6669 6c65 7320 696e 206f 6e65  the files in one
-000164e0: 2061 7320 7468 6520 7a69 7020 6973 2063   as the zip is c
-000164f0: 6f6e 7461 696e 696e 6720 6d75 6c74 6970  ontaining multip
-00016500: 6c65 7320 6669 6c65 730a 0a20 2020 2020  les files..     
-00016510: 2020 2077 6974 6820 6f70 656e 286f 7574     with open(out
-00016520: 7075 7466 696c 6520 2f20 6461 7461 5f66  putfile / data_f
-00016530: 6f6c 6465 7220 2f20 2277 6562 7061 6765  older / "webpage
-00016540: 735f 6e65 722e 7478 7422 2c20 2277 2b22  s_ner.txt", "w+"
-00016550: 2920 6173 206f 7574 6669 6c65 3a0a 2020  ) as outfile:.  
-00016560: 2020 2020 2020 2020 2020 666f 7220 6669            for fi
-00016570: 6c65 7320 696e 206f 732e 7761 6c6b 286f  les in os.walk(o
-00016580: 7574 7075 7466 696c 6529 3a0a 2020 2020  utputfile):.    
-00016590: 2020 2020 2020 2020 2020 2020 6620 3d20              f = 
-000165a0: 6669 6c65 735b 315d 0a20 2020 2020 2020  files[1].       
-000165b0: 2020 2020 2020 2020 2066 6620 3d20 6f73           ff = os
-000165c0: 2e6c 6973 7464 6972 286f 7574 7075 7466  .listdir(outputf
-000165d0: 696c 6520 2f20 6461 7461 5f66 6f6c 6465  ile / data_folde
-000165e0: 7220 2f20 665b 2d31 5d29 0a20 2020 2020  r / f[-1]).     
-000165f0: 2020 2020 2020 2020 2020 2066 6f72 205f             for _
-00016600: 692c 2066 696c 6520 696e 2065 6e75 6d65  i, file in enume
-00016610: 7261 7465 2866 6629 3a0a 2020 2020 2020  rate(ff):.      
-00016620: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00016630: 2066 696c 652e 656e 6473 7769 7468 2822   file.endswith("
-00016640: 2e67 6f6c 6422 293a 0a20 2020 2020 2020  .gold"):.       
-00016650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016660: 2077 6974 6820 6f70 656e 280a 2020 2020   with open(.    
-00016670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016680: 2020 2020 2020 2020 6f75 7470 7574 6669          outputfi
-00016690: 6c65 202f 2064 6174 615f 666f 6c64 6572  le / data_folder
-000166a0: 202f 2066 5b2d 315d 202f 2066 696c 652c   / f[-1] / file,
-000166b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000166c0: 2020 2020 2020 2020 2020 2020 2022 722b               "r+
-000166d0: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
-000166e0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000166f0: 7272 6f72 733d 2272 6570 6c61 6365 222c  rrors="replace",
-00016700: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016710: 2020 2020 2020 2020 2029 2061 7320 696e           ) as in
-00016720: 6669 6c65 3a0a 2020 2020 2020 2020 2020  file:.          
-00016730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016740: 2020 636f 6e74 656e 7420 3d20 696e 6669    content = infi
-00016750: 6c65 2e72 6561 6428 290a 2020 2020 2020  le.read().      
-00016760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016770: 2020 6f75 7466 696c 652e 7772 6974 6528    outfile.write(
-00016780: 636f 6e74 656e 7429 0a20 2020 2020 2020  content).       
-00016790: 2020 2020 2020 2020 2062 7265 616b 0a0a           break..
-000167a0: 2020 2020 2020 2020 7375 7065 7228 292e          super().
-000167b0: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
-000167c0: 2020 2020 2020 6461 7461 5f66 6f6c 6465        data_folde
-000167d0: 722c 0a20 2020 2020 2020 2020 2020 2063  r,.            c
-000167e0: 6f6c 756d 6e73 2c0a 2020 2020 2020 2020  olumns,.        
-000167f0: 2020 2020 7472 6169 6e5f 6669 6c65 3d22      train_file="
-00016800: 7765 6270 6167 6573 5f6e 6572 2e74 7874  webpages_ner.txt
-00016810: 222c 0a20 2020 2020 2020 2020 2020 2069  ",.            i
-00016820: 6e5f 6d65 6d6f 7279 3d69 6e5f 6d65 6d6f  n_memory=in_memo
-00016830: 7279 2c0a 2020 2020 2020 2020 2020 2020  ry,.            
-00016840: 2a2a 636f 7270 7573 6172 6773 2c0a 2020  **corpusargs,.  
-00016850: 2020 2020 2020 290a 0a0a 636c 6173 7320        )...class 
-00016860: 4e45 525f 454e 474c 4953 485f 574e 5554  NER_ENGLISH_WNUT
-00016870: 5f32 3032 3028 436f 6c75 6d6e 436f 7270  _2020(ColumnCorp
-00016880: 7573 293a 0a20 2020 2064 6566 205f 5f69  us):.    def __i
-00016890: 6e69 745f 5f28 0a20 2020 2020 2020 2073  nit__(.        s
-000168a0: 656c 662c 0a20 2020 2020 2020 2062 6173  elf,.        bas
-000168b0: 655f 7061 7468 3a20 4f70 7469 6f6e 616c  e_path: Optional
-000168c0: 5b55 6e69 6f6e 5b73 7472 2c20 5061 7468  [Union[str, Path
-000168d0: 5d5d 203d 204e 6f6e 652c 0a20 2020 2020  ]] = None,.     
-000168e0: 2020 2069 6e5f 6d65 6d6f 7279 3a20 626f     in_memory: bo
-000168f0: 6f6c 203d 2054 7275 652c 0a20 2020 2020  ol = True,.     
-00016900: 2020 2064 6f63 756d 656e 745f 6173 5f73     document_as_s
-00016910: 6571 7565 6e63 653a 2062 6f6f 6c20 3d20  equence: bool = 
-00016920: 4661 6c73 652c 0a20 2020 2020 2020 202a  False,.        *
-00016930: 2a63 6f72 7075 7361 7267 732c 0a20 2020  *corpusargs,.   
-00016940: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
-00016950: 2020 2020 2222 2249 6e69 7469 616c 697a      """Initializ
-00016960: 6520 7468 6520 574e 5554 5f32 3032 305f  e the WNUT_2020_
-00016970: 4e45 5220 636f 7270 7573 2e0a 0a20 2020  NER corpus...   
-00016980: 2020 2020 2054 6865 2066 6972 7374 2074       The first t
-00016990: 696d 6520 796f 7520 6361 6c6c 2074 6869  ime you call thi
-000169a0: 7320 636f 6e73 7472 7563 746f 7220 6974  s constructor it
-000169b0: 2077 696c 6c20 6175 746f 6d61 7469 6361   will automatica
-000169c0: 6c6c 7920 646f 776e 6c6f 6164 2074 6865  lly download the
-000169d0: 2064 6174 6173 6574 2e0a 0a20 2020 2020   dataset...     
-000169e0: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
-000169f0: 2020 2020 2062 6173 655f 7061 7468 3a20       base_path: 
-00016a00: 4465 6661 756c 7420 6973 204e 6f6e 652c  Default is None,
-00016a10: 206d 6561 6e69 6e67 2074 6861 7420 636f   meaning that co
-00016a20: 7270 7573 2067 6574 7320 6175 746f 2d64  rpus gets auto-d
-00016a30: 6f77 6e6c 6f61 6465 6420 616e 6420 6c6f  ownloaded and lo
-00016a40: 6164 6564 2e20 596f 7520 6361 6e20 6f76  aded. You can ov
-00016a50: 6572 7269 6465 2074 6869 7320 746f 2070  erride this to p
-00016a60: 6f69 6e74 2074 6f20 6120 6469 6666 6572  oint to a differ
-00016a70: 656e 7420 666f 6c64 6572 2062 7574 2074  ent folder but t
-00016a80: 7970 6963 616c 6c79 2074 6869 7320 7368  ypically this sh
-00016a90: 6f75 6c64 206e 6f74 2062 6520 6e65 6365  ould not be nece
-00016aa0: 7373 6172 792e 0a20 2020 2020 2020 2020  ssary..         
-00016ab0: 2020 2069 6e5f 6d65 6d6f 7279 3a20 4966     in_memory: If
-00016ac0: 2054 7275 652c 206b 6565 7073 2064 6174   True, keeps dat
-00016ad0: 6173 6574 2069 6e20 6d65 6d6f 7279 2067  aset in memory g
-00016ae0: 6976 696e 6720 7370 6565 6475 7073 2069  iving speedups i
-00016af0: 6e20 7472 6169 6e69 6e67 2e0a 2020 2020  n training..    
-00016b00: 2020 2020 2020 2020 646f 6375 6d65 6e74          document
-00016b10: 5f61 735f 7365 7175 656e 6365 3a20 4966  _as_sequence: If
-00016b20: 2054 7275 652c 2061 6c6c 2073 656e 7465   True, all sente
-00016b30: 6e63 6573 206f 6620 6120 646f 6375 6d65  nces of a docume
-00016b40: 6e74 2061 7265 2072 6561 6420 696e 746f  nt are read into
-00016b50: 2061 2073 696e 676c 6520 5365 6e74 656e   a single Senten
-00016b60: 6365 206f 626a 6563 740a 2020 2020 2020  ce object.      
-00016b70: 2020 2222 220a 2020 2020 2020 2020 6261    """.        ba
-00016b80: 7365 5f70 6174 6820 3d20 6b6f 6c69 6272  se_path = kolibr
-00016b90: 692e 6361 6368 655f 726f 6f74 202f 2022  i.cache_root / "
-00016ba0: 6461 7461 7365 7473 2220 6966 206e 6f74  datasets" if not
-00016bb0: 2062 6173 655f 7061 7468 2065 6c73 6520   base_path else 
-00016bc0: 5061 7468 2862 6173 655f 7061 7468 290a  Path(base_path).
-00016bd0: 0a20 2020 2020 2020 2023 2063 6f6c 756d  .        # colum
-00016be0: 6e20 666f 726d 6174 0a20 2020 2020 2020  n format.       
-00016bf0: 2063 6f6c 756d 6e73 203d 207b 303a 2022   columns = {0: "
-00016c00: 7465 7874 222c 2031 3a20 226e 6572 227d  text", 1: "ner"}
-00016c10: 0a0a 2020 2020 2020 2020 2320 7468 6973  ..        # this
-00016c20: 2064 6174 6173 6574 206e 616d 650a 2020   dataset name.  
-00016c30: 2020 2020 2020 6461 7461 7365 745f 6e61        dataset_na
-00016c40: 6d65 203d 2073 656c 662e 5f5f 636c 6173  me = self.__clas
-00016c50: 735f 5f2e 5f5f 6e61 6d65 5f5f 2e6c 6f77  s__.__name__.low
-00016c60: 6572 2829 0a0a 2020 2020 2020 2020 6461  er()..        da
-00016c70: 7461 5f66 6f6c 6465 7220 3d20 6261 7365  ta_folder = base
-00016c80: 5f70 6174 6820 2f20 6461 7461 7365 745f  _path / dataset_
-00016c90: 6e61 6d65 0a0a 2020 2020 2020 2020 2320  name..        # 
-00016ca0: 646f 776e 6c6f 6164 2064 6174 6120 6966  download data if
-00016cb0: 206e 6563 6573 7361 7279 0a20 2020 2020   necessary.     
-00016cc0: 2020 2067 6974 6875 625f 7572 6c20 3d20     github_url = 
-00016cd0: 2268 7474 7073 3a2f 2f67 6974 6875 622e  "https://github.
-00016ce0: 636f 6d2f 6a65 6e69 7961 742f 574e 5554  com/jeniyat/WNUT
-00016cf0: 5f32 3032 305f 4e45 522f 6172 6368 6976  _2020_NER/archiv
-00016d00: 652f 6d61 7374 6572 2e7a 6970 220a 0a20  e/master.zip".. 
-00016d10: 2020 2020 2020 2066 6f72 2073 616d 706c         for sampl
-00016d20: 6520 696e 205b 2274 7261 696e 222c 2022  e in ["train", "
-00016d30: 7465 7374 222c 2022 6465 7622 5d3a 0a20  test", "dev"]:. 
-00016d40: 2020 2020 2020 2020 2020 2073 616d 706c             sampl
-00016d50: 655f 6669 6c65 203d 2064 6174 615f 666f  e_file = data_fo
-00016d60: 6c64 6572 202f 2028 7361 6d70 6c65 202b  lder / (sample +
-00016d70: 2022 2e74 7874 2229 0a20 2020 2020 2020   ".txt").       
-00016d80: 2020 2020 2069 6620 6e6f 7420 7361 6d70       if not samp
-00016d90: 6c65 5f66 696c 652e 6973 5f66 696c 6528  le_file.is_file(
-00016da0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00016db0: 2020 207a 6970 5f70 6174 6820 3d20 6361     zip_path = ca
-00016dc0: 6368 6564 5f70 6174 6828 6622 7b67 6974  ched_path(f"{git
-00016dd0: 6875 625f 7572 6c7d 222c 2050 6174 6828  hub_url}", Path(
-00016de0: 2264 6174 6173 6574 7322 2920 2f20 6461  "datasets") / da
-00016df0: 7461 7365 745f 6e61 6d65 290a 0a20 2020  taset_name)..   
-00016e00: 2020 2020 2020 2020 2020 2020 2023 2075               # u
-00016e10: 6e7a 6970 2074 6865 2064 6f77 6e6c 6f61  nzip the downloa
-00016e20: 6465 6420 7265 706f 2061 6e64 206d 6572  ded repo and mer
-00016e30: 6765 2074 6865 2074 7261 696e 2c20 6465  ge the train, de
-00016e40: 7620 616e 6420 7465 7374 2064 6174 6173  v and test datas
-00016e50: 6574 730a 2020 2020 2020 2020 2020 2020  ets.            
-00016e60: 2020 2020 756e 7061 636b 5f66 696c 6528      unpack_file(
-00016e70: 7a69 705f 7061 7468 2c20 6461 7461 5f66  zip_path, data_f
-00016e80: 6f6c 6465 722c 2022 7a69 7022 2c20 4661  older, "zip", Fa
-00016e90: 6c73 6529 2020 2320 756e 7a69 7070 6564  lse)  # unzipped
-00016ea0: 2066 6f6c 6465 7220 6e61 6d65 3a20 574e   folder name: WN
-00016eb0: 5554 5f32 3032 305f 4e45 522d 6d61 7374  UT_2020_NER-mast
-00016ec0: 6572 0a0a 2020 2020 2020 2020 2020 2020  er..            
-00016ed0: 2020 2020 6966 2073 616d 706c 6520 3d3d      if sample ==
-00016ee0: 2022 7465 7374 223a 0a20 2020 2020 2020   "test":.       
-00016ef0: 2020 2020 2020 2020 2020 2020 2066 696c               fil
-00016f00: 655f 7061 7468 203d 2064 6174 615f 666f  e_path = data_fo
-00016f10: 6c64 6572 202f 2050 6174 6828 2257 4e55  lder / Path("WNU
-00016f20: 545f 3230 3230 5f4e 4552 2d6d 6173 7465  T_2020_NER-maste
-00016f30: 722f 6461 7461 2f22 202b 2073 616d 706c  r/data/" + sampl
-00016f40: 6520 2b20 225f 6461 7461 5f32 3032 302f  e + "_data_2020/
-00016f50: 436f 6e6c 6c5f 466f 726d 6174 2f22 290a  Conll_Format/").
-00016f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016f70: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00016f80: 2020 2020 2020 2020 2020 6669 6c65 5f70            file_p
-00016f90: 6174 6820 3d20 6461 7461 5f66 6f6c 6465  ath = data_folde
-00016fa0: 7220 2f20 5061 7468 2822 574e 5554 5f32  r / Path("WNUT_2
-00016fb0: 3032 305f 4e45 522d 6d61 7374 6572 2f64  020_NER-master/d
-00016fc0: 6174 612f 2220 2b20 7361 6d70 6c65 202b  ata/" + sample +
-00016fd0: 2022 5f64 6174 612f 436f 6e6c 6c5f 466f   "_data/Conll_Fo
-00016fe0: 726d 6174 2f22 290a 2020 2020 2020 2020  rmat/").        
-00016ff0: 2020 2020 2020 2020 6669 6c65 6e61 6d65          filename
-00017000: 7320 3d20 6f73 2e6c 6973 7464 6972 2866  s = os.listdir(f
-00017010: 696c 655f 7061 7468 290a 2020 2020 2020  ile_path).      
-00017020: 2020 2020 2020 2020 2020 7769 7468 206f            with o
-00017030: 7065 6e28 6461 7461 5f66 6f6c 6465 7220  pen(data_folder 
-00017040: 2f20 2873 616d 706c 6520 2b20 222e 7478  / (sample + ".tx
-00017050: 7422 292c 2022 7722 2920 6173 206f 7574  t"), "w") as out
-00017060: 6669 6c65 3a0a 2020 2020 2020 2020 2020  file:.          
-00017070: 2020 2020 2020 2020 2020 666f 7220 666e            for fn
-00017080: 616d 6520 696e 2066 696c 656e 616d 6573  ame in filenames
-00017090: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000170a0: 2020 2020 2020 2020 2020 7769 7468 206f            with o
-000170b0: 7065 6e28 6669 6c65 5f70 6174 6820 2f20  pen(file_path / 
-000170c0: 666e 616d 6529 2061 7320 696e 6669 6c65  fname) as infile
-000170d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000170e0: 2020 2020 2020 2020 2020 2020 2020 6c69                li
-000170f0: 6e65 7320 3d20 696e 6669 6c65 2e72 6561  nes = infile.rea
-00017100: 6428 290a 2020 2020 2020 2020 2020 2020  d().            
-00017110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017120: 6f75 7466 696c 652e 7772 6974 6528 6c69  outfile.write(li
-00017130: 6e65 7329 0a0a 2020 2020 2020 2020 2020  nes)..          
-00017140: 2020 2020 2020 7368 7574 696c 2e72 6d74        shutil.rmt
-00017150: 7265 6528 7374 7228 6461 7461 5f66 6f6c  ree(str(data_fol
-00017160: 6465 7220 2f20 2257 4e55 545f 3230 3230  der / "WNUT_2020
-00017170: 5f4e 4552 2d6d 6173 7465 7222 2929 2020  _NER-master"))  
-00017180: 2320 636c 6561 6e20 7570 2077 6865 6e20  # clean up when 
-00017190: 646f 6e65 0a0a 2020 2020 2020 2020 7375  done..        su
-000171a0: 7065 7228 292e 5f5f 696e 6974 5f5f 280a  per().__init__(.
-000171b0: 2020 2020 2020 2020 2020 2020 6461 7461              data
-000171c0: 5f66 6f6c 6465 722c 0a20 2020 2020 2020  _folder,.       
-000171d0: 2020 2020 2063 6f6c 756d 6e73 2c0a 2020       columns,.  
-000171e0: 2020 2020 2020 2020 2020 656e 636f 6469            encodi
-000171f0: 6e67 3d22 7574 662d 3822 2c0a 2020 2020  ng="utf-8",.    
-00017200: 2020 2020 2020 2020 696e 5f6d 656d 6f72          in_memor
-00017210: 793d 696e 5f6d 656d 6f72 792c 0a20 2020  y=in_memory,.   
-00017220: 2020 2020 2020 2020 2064 6f63 756d 656e           documen
-00017230: 745f 7365 7061 7261 746f 725f 746f 6b65  t_separator_toke
-00017240: 6e3d 4e6f 6e65 2069 6620 6e6f 7420 646f  n=None if not do
-00017250: 6375 6d65 6e74 5f61 735f 7365 7175 656e  cument_as_sequen
-00017260: 6365 2065 6c73 6520 222d 444f 4353 5441  ce else "-DOCSTA
-00017270: 5254 2d22 2c0a 2020 2020 2020 2020 2020  RT-",.          
-00017280: 2020 2a2a 636f 7270 7573 6172 6773 2c0a    **corpusargs,.
-00017290: 2020 2020 2020 2020 290a 0a0a 636c 6173          )...clas
-000172a0: 7320 4e45 525f 454e 474c 4953 485f 5749  s NER_ENGLISH_WI
-000172b0: 4b49 474f 4c44 2843 6f6c 756d 6e43 6f72  KIGOLD(ColumnCor
-000172c0: 7075 7329 3a0a 2020 2020 6465 6620 5f5f  pus):.    def __
-000172d0: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
-000172e0: 7365 6c66 2c0a 2020 2020 2020 2020 6261  self,.        ba
-000172f0: 7365 5f70 6174 683a 204f 7074 696f 6e61  se_path: Optiona
-00017300: 6c5b 556e 696f 6e5b 7374 722c 2050 6174  l[Union[str, Pat
-00017310: 685d 5d20 3d20 4e6f 6e65 2c0a 2020 2020  h]] = None,.    
-00017320: 2020 2020 696e 5f6d 656d 6f72 793a 2062      in_memory: b
-00017330: 6f6f 6c20 3d20 5472 7565 2c0a 2020 2020  ool = True,.    
-00017340: 2020 2020 646f 6375 6d65 6e74 5f61 735f      document_as_
-00017350: 7365 7175 656e 6365 3a20 626f 6f6c 203d  sequence: bool =
-00017360: 2046 616c 7365 2c0a 2020 2020 2020 2020   False,.        
-00017370: 2a2a 636f 7270 7573 6172 6773 2c0a 2020  **corpusargs,.  
-00017380: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-00017390: 2020 2020 2022 2222 496e 6974 6961 6c69       """Initiali
-000173a0: 7a65 2074 6865 2077 696b 6967 6f6c 6420  ze the wikigold 
-000173b0: 636f 7270 7573 2e0a 0a20 2020 2020 2020  corpus...       
-000173c0: 2054 6865 2066 6972 7374 2074 696d 6520   The first time 
-000173d0: 796f 7520 6361 6c6c 2074 6869 7320 636f  you call this co
-000173e0: 6e73 7472 7563 746f 7220 6974 2077 696c  nstructor it wil
-000173f0: 6c20 6175 746f 6d61 7469 6361 6c6c 7920  l automatically 
-00017400: 646f 776e 6c6f 6164 2074 6865 2064 6174  download the dat
-00017410: 6173 6574 2e0a 0a20 2020 2020 2020 2041  aset...        A
-00017420: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
-00017430: 2062 6173 655f 7061 7468 3a20 4465 6661   base_path: Defa
-00017440: 756c 7420 6973 204e 6f6e 652c 206d 6561  ult is None, mea
-00017450: 6e69 6e67 2074 6861 7420 636f 7270 7573  ning that corpus
-00017460: 2067 6574 7320 6175 746f 2d64 6f77 6e6c   gets auto-downl
-00017470: 6f61 6465 6420 616e 6420 6c6f 6164 6564  oaded and loaded
-00017480: 2e20 596f 7520 6361 6e20 6f76 6572 7269  . You can overri
-00017490: 6465 2074 6869 7320 746f 2070 6f69 6e74  de this to point
-000174a0: 2074 6f20 6120 6469 6666 6572 656e 7420   to a different 
-000174b0: 666f 6c64 6572 2062 7574 2074 7970 6963  folder but typic
-000174c0: 616c 6c79 2074 6869 7320 7368 6f75 6c64  ally this should
-000174d0: 206e 6f74 2062 6520 6e65 6365 7373 6172   not be necessar
-000174e0: 792e 0a20 2020 2020 2020 2020 2020 2069  y..            i
-000174f0: 6e5f 6d65 6d6f 7279 3a20 4966 2054 7275  n_memory: If Tru
-00017500: 652c 206b 6565 7073 2064 6174 6173 6574  e, keeps dataset
-00017510: 2069 6e20 6d65 6d6f 7279 2067 6976 696e   in memory givin
-00017520: 6720 7370 6565 6475 7073 2069 6e20 7472  g speedups in tr
-00017530: 6169 6e69 6e67 2e0a 2020 2020 2020 2020  aining..        
-00017540: 2020 2020 646f 6375 6d65 6e74 5f61 735f      document_as_
-00017550: 7365 7175 656e 6365 3a20 4966 2054 7275  sequence: If Tru
-00017560: 652c 2061 6c6c 2073 656e 7465 6e63 6573  e, all sentences
-00017570: 206f 6620 6120 646f 6375 6d65 6e74 2061   of a document a
-00017580: 7265 2072 6561 6420 696e 746f 2061 2073  re read into a s
-00017590: 696e 676c 6520 5365 6e74 656e 6365 206f  ingle Sentence o
-000175a0: 626a 6563 740a 2020 2020 2020 2020 2222  bject.        ""
-000175b0: 220a 2020 2020 2020 2020 6261 7365 5f70  ".        base_p
-000175c0: 6174 6820 3d20 6b6f 6c69 6272 692e 6361  ath = kolibri.ca
-000175d0: 6368 655f 726f 6f74 202f 2022 6461 7461  che_root / "data
-000175e0: 7365 7473 2220 6966 206e 6f74 2062 6173  sets" if not bas
-000175f0: 655f 7061 7468 2065 6c73 6520 5061 7468  e_path else Path
-00017600: 2862 6173 655f 7061 7468 290a 0a20 2020  (base_path)..   
-00017610: 2020 2020 2023 2063 6f6c 756d 6e20 666f       # column fo
-00017620: 726d 6174 0a20 2020 2020 2020 2063 6f6c  rmat.        col
-00017630: 756d 6e73 203d 207b 303a 2022 7465 7874  umns = {0: "text
-00017640: 222c 2031 3a20 226e 6572 227d 0a0a 2020  ", 1: "ner"}..  
-00017650: 2020 2020 2020 2320 7468 6973 2064 6174        # this dat
-00017660: 6173 6574 206e 616d 650a 2020 2020 2020  aset name.      
-00017670: 2020 6461 7461 7365 745f 6e61 6d65 203d    dataset_name =
-00017680: 2073 656c 662e 5f5f 636c 6173 735f 5f2e   self.__class__.
-00017690: 5f5f 6e61 6d65 5f5f 2e6c 6f77 6572 2829  __name__.lower()
-000176a0: 0a0a 2020 2020 2020 2020 6461 7461 5f66  ..        data_f
-000176b0: 6f6c 6465 7220 3d20 6261 7365 5f70 6174  older = base_pat
-000176c0: 6820 2f20 6461 7461 7365 745f 6e61 6d65  h / dataset_name
-000176d0: 0a0a 2020 2020 2020 2020 2320 646f 776e  ..        # down
-000176e0: 6c6f 6164 2064 6174 6120 6966 206e 6563  load data if nec
-000176f0: 6573 7361 7279 0a20 2020 2020 2020 2077  essary.        w
-00017700: 696b 6967 6f6c 645f 6e65 725f 7061 7468  ikigold_ner_path
-00017710: 203d 2022 6874 7470 733a 2f2f 7261 772e   = "https://raw.
-00017720: 6769 7468 7562 7573 6572 636f 6e74 656e  githubuserconten
-00017730: 742e 636f 6d2f 6a75 616e 642d 722f 656e  t.com/juand-r/en
-00017740: 7469 7479 2d72 6563 6f67 6e69 7469 6f6e  tity-recognition
-00017750: 2d64 6174 6173 6574 732f 6d61 7374 6572  -datasets/master
-00017760: 2f64 6174 612f 7769 6b69 676f 6c64 2f43  /data/wikigold/C
-00017770: 4f4e 4c4c 2d66 6f72 6d61 742f 6461 7461  ONLL-format/data
-00017780: 2f22 0a20 2020 2020 2020 2063 6163 6865  /".        cache
-00017790: 645f 7061 7468 2866 227b 7769 6b69 676f  d_path(f"{wikigo
-000177a0: 6c64 5f6e 6572 5f70 6174 687d 7769 6b69  ld_ner_path}wiki
-000177b0: 676f 6c64 2e63 6f6e 6c6c 2e74 7874 222c  gold.conll.txt",
-000177c0: 2050 6174 6828 2264 6174 6173 6574 7322   Path("datasets"
-000177d0: 2920 2f20 6461 7461 7365 745f 6e61 6d65  ) / dataset_name
-000177e0: 290a 0a20 2020 2020 2020 2073 7570 6572  )..        super
-000177f0: 2829 2e5f 5f69 6e69 745f 5f28 0a20 2020  ().__init__(.   
-00017800: 2020 2020 2020 2020 2064 6174 615f 666f           data_fo
-00017810: 6c64 6572 2c0a 2020 2020 2020 2020 2020  lder,.          
-00017820: 2020 636f 6c75 6d6e 732c 0a20 2020 2020    columns,.     
-00017830: 2020 2020 2020 2065 6e63 6f64 696e 673d         encoding=
-00017840: 2275 7466 2d38 222c 0a20 2020 2020 2020  "utf-8",.       
-00017850: 2020 2020 2069 6e5f 6d65 6d6f 7279 3d69       in_memory=i
-00017860: 6e5f 6d65 6d6f 7279 2c0a 2020 2020 2020  n_memory,.      
-00017870: 2020 2020 2020 7472 6169 6e5f 6669 6c65        train_file
-00017880: 3d22 7769 6b69 676f 6c64 2e63 6f6e 6c6c  ="wikigold.conll
-00017890: 2e74 7874 222c 0a20 2020 2020 2020 2020  .txt",.         
-000178a0: 2020 2064 6f63 756d 656e 745f 7365 7061     document_sepa
-000178b0: 7261 746f 725f 746f 6b65 6e3d 4e6f 6e65  rator_token=None
-000178c0: 2069 6620 6e6f 7420 646f 6375 6d65 6e74   if not document
-000178d0: 5f61 735f 7365 7175 656e 6365 2065 6c73  _as_sequence els
-000178e0: 6520 222d 444f 4353 5441 5254 2d22 2c0a  e "-DOCSTART-",.
-000178f0: 2020 2020 2020 2020 2020 2020 2a2a 636f              **co
-00017900: 7270 7573 6172 6773 2c0a 2020 2020 2020  rpusargs,.      
-00017910: 2020 290a 0a0a 636c 6173 7320 4e45 525f    )...class NER_
-00017920: 4649 4e4e 4953 4828 436f 6c75 6d6e 436f  FINNISH(ColumnCo
-00017930: 7270 7573 293a 0a20 2020 2064 6566 205f  rpus):.    def _
-00017940: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
-00017950: 2073 656c 662c 0a20 2020 2020 2020 2062   self,.        b
-00017960: 6173 655f 7061 7468 3a20 4f70 7469 6f6e  ase_path: Option
-00017970: 616c 5b55 6e69 6f6e 5b73 7472 2c20 5061  al[Union[str, Pa
-00017980: 7468 5d5d 203d 204e 6f6e 652c 0a20 2020  th]] = None,.   
-00017990: 2020 2020 2069 6e5f 6d65 6d6f 7279 3a20       in_memory: 
-000179a0: 626f 6f6c 203d 2054 7275 652c 0a20 2020  bool = True,.   
-000179b0: 2020 2020 202a 2a63 6f72 7075 7361 7267       **corpusarg
-000179c0: 732c 0a20 2020 2029 202d 3e20 4e6f 6e65  s,.    ) -> None
-000179d0: 3a0a 2020 2020 2020 2020 6261 7365 5f70  :.        base_p
-000179e0: 6174 6820 3d20 6b6f 6c69 6272 692e 6361  ath = kolibri.ca
-000179f0: 6368 655f 726f 6f74 202f 2022 6461 7461  che_root / "data
-00017a00: 7365 7473 2220 6966 206e 6f74 2062 6173  sets" if not bas
-00017a10: 655f 7061 7468 2065 6c73 6520 5061 7468  e_path else Path
-00017a20: 2862 6173 655f 7061 7468 290a 0a20 2020  (base_path)..   
-00017a30: 2020 2020 2023 2063 6f6c 756d 6e20 666f       # column fo
-00017a40: 726d 6174 0a20 2020 2020 2020 2063 6f6c  rmat.        col
-00017a50: 756d 6e73 203d 207b 303a 2022 7465 7874  umns = {0: "text
-00017a60: 222c 2031 3a20 226e 6572 227d 0a0a 2020  ", 1: "ner"}..  
-00017a70: 2020 2020 2020 2320 7468 6973 2064 6174        # this dat
-00017a80: 6173 6574 206e 616d 650a 2020 2020 2020  aset name.      
-00017a90: 2020 6461 7461 7365 745f 6e61 6d65 203d    dataset_name =
-00017aa0: 2073 656c 662e 5f5f 636c 6173 735f 5f2e   self.__class__.
-00017ab0: 5f5f 6e61 6d65 5f5f 2e6c 6f77 6572 2829  __name__.lower()
-00017ac0: 0a0a 2020 2020 2020 2020 2320 6465 6661  ..        # defa
-00017ad0: 756c 7420 6461 7461 7365 7420 666f 6c64  ult dataset fold
-00017ae0: 6572 2069 7320 7468 6520 6361 6368 6520  er is the cache 
-00017af0: 726f 6f74 0a20 2020 2020 2020 2069 6620  root.        if 
-00017b00: 6e6f 7420 6261 7365 5f70 6174 683a 0a20  not base_path:. 
-00017b10: 2020 2020 2020 2020 2020 2062 6173 655f             base_
-00017b20: 7061 7468 203d 206b 6f6c 6962 7269 2e63  path = kolibri.c
-00017b30: 6163 6865 5f72 6f6f 7420 2f20 2264 6174  ache_root / "dat
-00017b40: 6173 6574 7322 0a20 2020 2020 2020 2064  asets".        d
-00017b50: 6174 615f 666f 6c64 6572 203d 2062 6173  ata_folder = bas
-00017b60: 655f 7061 7468 202f 2064 6174 6173 6574  e_path / dataset
-00017b70: 5f6e 616d 650a 0a20 2020 2020 2020 2023  _name..        #
-00017b80: 2064 6f77 6e6c 6f61 6420 6461 7461 2069   download data i
-00017b90: 6620 6e65 6365 7373 6172 790a 2020 2020  f necessary.    
-00017ba0: 2020 2020 6e65 725f 6669 6e6e 6973 685f      ner_finnish_
-00017bb0: 7061 7468 203d 2022 6874 7470 733a 2f2f  path = "https://
-00017bc0: 7261 772e 6769 7468 7562 7573 6572 636f  raw.githubuserco
-00017bd0: 6e74 656e 742e 636f 6d2f 6d70 7369 6c66  ntent.com/mpsilf
-00017be0: 7665 2f66 696e 6572 2d64 6174 612f 6d61  ve/finer-data/ma
-00017bf0: 7374 6572 2f64 6174 612f 6469 6769 746f  ster/data/digito
-00017c00: 6461 792e 220a 2020 2020 2020 2020 6361  day.".        ca
-00017c10: 6368 6564 5f70 6174 6828 6622 7b6e 6572  ched_path(f"{ner
-00017c20: 5f66 696e 6e69 7368 5f70 6174 687d 3230  _finnish_path}20
-00017c30: 3134 2e74 7261 696e 2e63 7376 222c 2050  14.train.csv", P
-00017c40: 6174 6828 2264 6174 6173 6574 7322 2920  ath("datasets") 
-00017c50: 2f20 6461 7461 7365 745f 6e61 6d65 290a  / dataset_name).
-00017c60: 2020 2020 2020 2020 6361 6368 6564 5f70          cached_p
-00017c70: 6174 6828 6622 7b6e 6572 5f66 696e 6e69  ath(f"{ner_finni
-00017c80: 7368 5f70 6174 687d 3230 3134 2e64 6576  sh_path}2014.dev
-00017c90: 2e63 7376 222c 2050 6174 6828 2264 6174  .csv", Path("dat
-00017ca0: 6173 6574 7322 2920 2f20 6461 7461 7365  asets") / datase
-00017cb0: 745f 6e61 6d65 290a 2020 2020 2020 2020  t_name).        
-00017cc0: 6361 6368 6564 5f70 6174 6828 6622 7b6e  cached_path(f"{n
-00017cd0: 6572 5f66 696e 6e69 7368 5f70 6174 687d  er_finnish_path}
-00017ce0: 3230 3135 2e74 6573 742e 6373 7622 2c20  2015.test.csv", 
-00017cf0: 5061 7468 2822 6461 7461 7365 7473 2229  Path("datasets")
-00017d00: 202f 2064 6174 6173 6574 5f6e 616d 6529   / dataset_name)
-00017d10: 0a0a 2020 2020 2020 2020 7365 6c66 2e5f  ..        self._
-00017d20: 7265 6d6f 7665 5f6c 696e 6573 5f77 6974  remove_lines_wit
-00017d30: 686f 7574 5f61 6e6e 6f74 6174 696f 6e73  hout_annotations
-00017d40: 2864 6174 615f 6669 6c65 3d50 6174 6828  (data_file=Path(
-00017d50: 6461 7461 5f66 6f6c 6465 7220 2f20 2264  data_folder / "d
-00017d60: 6967 6974 6f64 6179 2e32 3031 352e 7465  igitoday.2015.te
-00017d70: 7374 2e63 7376 2229 290a 0a20 2020 2020  st.csv"))..     
-00017d80: 2020 2073 7570 6572 2829 2e5f 5f69 6e69     super().__ini
-00017d90: 745f 5f28 0a20 2020 2020 2020 2020 2020  t__(.           
-00017da0: 2064 6174 615f 666f 6c64 6572 2c0a 2020   data_folder,.  
-00017db0: 2020 2020 2020 2020 2020 636f 6c75 6d6e            column
-00017dc0: 732c 0a20 2020 2020 2020 2020 2020 2069  s,.            i
-00017dd0: 6e5f 6d65 6d6f 7279 3d69 6e5f 6d65 6d6f  n_memory=in_memo
-00017de0: 7279 2c0a 2020 2020 2020 2020 2020 2020  ry,.            
-00017df0: 736b 6970 5f66 6972 7374 5f6c 696e 653d  skip_first_line=
-00017e00: 5472 7565 2c0a 2020 2020 2020 2020 2020  True,.          
-00017e10: 2020 2a2a 636f 7270 7573 6172 6773 2c0a    **corpusargs,.
-00017e20: 2020 2020 2020 2020 290a 0a20 2020 2064          )..    d
-00017e30: 6566 205f 7265 6d6f 7665 5f6c 696e 6573  ef _remove_lines
-00017e40: 5f77 6974 686f 7574 5f61 6e6e 6f74 6174  _without_annotat
-00017e50: 696f 6e73 2873 656c 662c 2064 6174 615f  ions(self, data_
-00017e60: 6669 6c65 3a20 556e 696f 6e5b 7374 722c  file: Union[str,
-00017e70: 2050 6174 685d 293a 0a20 2020 2020 2020   Path]):.       
-00017e80: 2077 6974 6820 6f70 656e 2864 6174 615f   with open(data_
-00017e90: 6669 6c65 2920 6173 2066 3a0a 2020 2020  file) as f:.    
-00017ea0: 2020 2020 2020 2020 6c69 6e65 7320 3d20          lines = 
-00017eb0: 662e 7265 6164 6c69 6e65 7328 290a 2020  f.readlines().  
-00017ec0: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
-00017ed0: 6461 7461 5f66 696c 652c 2022 7722 2920  data_file, "w") 
-00017ee0: 6173 2066 3a0a 2020 2020 2020 2020 2020  as f:.          
-00017ef0: 2020 666f 7220 6c69 6e65 2069 6e20 6c69    for line in li
-00017f00: 6e65 733a 0a20 2020 2020 2020 2020 2020  nes:.           
-00017f10: 2020 2020 2069 6620 6c65 6e28 6c69 6e65       if len(line
-00017f20: 2e73 706c 6974 2829 2920 213d 2031 3a0a  .split()) != 1:.
-00017f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017f40: 2020 2020 662e 7772 6974 6528 6c69 6e65      f.write(line
-00017f50: 290a 0a0a 636c 6173 7320 4e45 525f 4745  )...class NER_GE
-00017f60: 524d 414e 5f42 494f 4649 4428 436f 6c75  RMAN_BIOFID(Colu
-00017f70: 6d6e 436f 7270 7573 293a 0a20 2020 2064  mnCorpus):.    d
-00017f80: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
-00017f90: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
-00017fa0: 2020 2062 6173 655f 7061 7468 3a20 4f70     base_path: Op
-00017fb0: 7469 6f6e 616c 5b55 6e69 6f6e 5b73 7472  tional[Union[str
-00017fc0: 2c20 5061 7468 5d5d 203d 204e 6f6e 652c  , Path]] = None,
-00017fd0: 0a20 2020 2020 2020 2069 6e5f 6d65 6d6f  .        in_memo
-00017fe0: 7279 3a20 626f 6f6c 203d 2054 7275 652c  ry: bool = True,
-00017ff0: 0a20 2020 2020 2020 202a 2a63 6f72 7075  .        **corpu
-00018000: 7361 7267 732c 0a20 2020 2029 202d 3e20  sargs,.    ) -> 
-00018010: 4e6f 6e65 3a0a 2020 2020 2020 2020 6261  None:.        ba
-00018020: 7365 5f70 6174 6820 3d20 6b6f 6c69 6272  se_path = kolibr
-00018030: 692e 6361 6368 655f 726f 6f74 202f 2022  i.cache_root / "
-00018040: 6461 7461 7365 7473 2220 6966 206e 6f74  datasets" if not
-00018050: 2062 6173 655f 7061 7468 2065 6c73 6520   base_path else 
-00018060: 5061 7468 2862 6173 655f 7061 7468 290a  Path(base_path).
-00018070: 0a20 2020 2020 2020 2023 2063 6f6c 756d  .        # colum
-00018080: 6e20 666f 726d 6174 0a20 2020 2020 2020  n format.       
-00018090: 2063 6f6c 756d 6e73 203d 207b 303a 2022   columns = {0: "
-000180a0: 7465 7874 222c 2031 3a20 226c 656d 6d61  text", 1: "lemma
-000180b0: 222c 2032 3a20 2270 6f73 222c 2033 3a20  ", 2: "pos", 3: 
-000180c0: 226e 6572 227d 0a0a 2020 2020 2020 2020  "ner"}..        
-000180d0: 2320 7468 6973 2064 6174 6173 6574 206e  # this dataset n
-000180e0: 616d 650a 2020 2020 2020 2020 6461 7461  ame.        data
-000180f0: 7365 745f 6e61 6d65 203d 2073 656c 662e  set_name = self.
-00018100: 5f5f 636c 6173 735f 5f2e 5f5f 6e61 6d65  __class__.__name
-00018110: 5f5f 2e6c 6f77 6572 2829 0a0a 2020 2020  __.lower()..    
-00018120: 2020 2020 6461 7461 5f66 6f6c 6465 7220      data_folder 
-00018130: 3d20 6261 7365 5f70 6174 6820 2f20 6461  = base_path / da
-00018140: 7461 7365 745f 6e61 6d65 0a0a 2020 2020  taset_name..    
-00018150: 2020 2020 2320 646f 776e 6c6f 6164 2064      # download d
-00018160: 6174 6120 6966 206e 6563 6573 7361 7279  ata if necessary
-00018170: 0a20 2020 2020 2020 2062 696f 6669 645f  .        biofid_
-00018180: 7061 7468 203d 2022 6874 7470 733a 2f2f  path = "https://
-00018190: 7261 772e 6769 7468 7562 7573 6572 636f  raw.githubuserco
-000181a0: 6e74 656e 742e 636f 6d2f 7465 7874 7465  ntent.com/textte
-000181b0: 6368 6e6f 6c6f 6779 6c61 622f 4249 4f66  chnologylab/BIOf
-000181c0: 6964 2f6d 6173 7465 722f 4249 4f66 6964  id/master/BIOfid
-000181d0: 2d44 6174 6173 6574 2d4e 4552 2f22 0a20  -Dataset-NER/". 
-000181e0: 2020 2020 2020 2063 6163 6865 645f 7061         cached_pa
-000181f0: 7468 2866 227b 6269 6f66 6964 5f70 6174  th(f"{biofid_pat
-00018200: 687d 7472 6169 6e2e 636f 6e6c 6c22 2c20  h}train.conll", 
-00018210: 5061 7468 2822 6461 7461 7365 7473 2229  Path("datasets")
-00018220: 202f 2064 6174 6173 6574 5f6e 616d 6529   / dataset_name)
-00018230: 0a20 2020 2020 2020 2063 6163 6865 645f  .        cached_
-00018240: 7061 7468 2866 227b 6269 6f66 6964 5f70  path(f"{biofid_p
-00018250: 6174 687d 6465 762e 636f 6e6c 6c22 2c20  ath}dev.conll", 
-00018260: 5061 7468 2822 6461 7461 7365 7473 2229  Path("datasets")
-00018270: 202f 2064 6174 6173 6574 5f6e 616d 6529   / dataset_name)
-00018280: 0a20 2020 2020 2020 2063 6163 6865 645f  .        cached_
-00018290: 7061 7468 2866 227b 6269 6f66 6964 5f70  path(f"{biofid_p
-000182a0: 6174 687d 7465 7374 2e63 6f6e 6c6c 222c  ath}test.conll",
-000182b0: 2050 6174 6828 2264 6174 6173 6574 7322   Path("datasets"
-000182c0: 2920 2f20 6461 7461 7365 745f 6e61 6d65  ) / dataset_name
-000182d0: 290a 0a20 2020 2020 2020 2073 7570 6572  )..        super
-000182e0: 2829 2e5f 5f69 6e69 745f 5f28 0a20 2020  ().__init__(.   
-000182f0: 2020 2020 2020 2020 2064 6174 615f 666f           data_fo
-00018300: 6c64 6572 2c0a 2020 2020 2020 2020 2020  lder,.          
-00018310: 2020 636f 6c75 6d6e 732c 0a20 2020 2020    columns,.     
-00018320: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
-00018330: 3d69 6e5f 6d65 6d6f 7279 2c0a 2020 2020  =in_memory,.    
-00018340: 2020 2020 2020 2020 2a2a 636f 7270 7573          **corpus
-00018350: 6172 6773 2c0a 2020 2020 2020 2020 290a  args,.        ).
-00018360: 0a0a 636c 6173 7320 4e45 525f 4745 524d  ..class NER_GERM
-00018370: 414e 5f45 5552 4f50 4152 4c28 436f 6c75  AN_EUROPARL(Colu
-00018380: 6d6e 436f 7270 7573 293a 0a20 2020 2064  mnCorpus):.    d
-00018390: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
-000183a0: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
-000183b0: 2020 2062 6173 655f 7061 7468 3a20 4f70     base_path: Op
-000183c0: 7469 6f6e 616c 5b55 6e69 6f6e 5b73 7472  tional[Union[str
-000183d0: 2c20 5061 7468 5d5d 203d 204e 6f6e 652c  , Path]] = None,
-000183e0: 0a20 2020 2020 2020 2069 6e5f 6d65 6d6f  .        in_memo
-000183f0: 7279 3a20 626f 6f6c 203d 2054 7275 652c  ry: bool = True,
-00018400: 0a20 2020 2020 2020 202a 2a63 6f72 7075  .        **corpu
-00018410: 7361 7267 732c 0a20 2020 2029 202d 3e20  sargs,.    ) -> 
-00018420: 4e6f 6e65 3a0a 2020 2020 2020 2020 2222  None:.        ""
-00018430: 2249 6e69 7469 616c 697a 6520 7468 6520  "Initialize the 
-00018440: 4555 524f 5041 524c 5f4e 4552 5f47 4552  EUROPARL_NER_GER
-00018450: 4d41 4e20 636f 7270 7573 2e0a 0a20 2020  MAN corpus...   
-00018460: 2020 2020 2054 6865 2066 6972 7374 2074       The first t
-00018470: 696d 6520 796f 7520 6361 6c6c 2074 6869  ime you call thi
-00018480: 7320 636f 6e73 7472 7563 746f 7220 6974  s constructor it
-00018490: 2077 696c 6c20 6175 746f 6d61 7469 6361   will automatica
-000184a0: 6c6c 7920 646f 776e 6c6f 6164 2074 6865  lly download the
-000184b0: 2064 6174 6173 6574 2e0a 0a20 2020 2020   dataset...     
-000184c0: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
-000184d0: 2020 2020 2062 6173 655f 7061 7468 3a20       base_path: 
-000184e0: 4465 6661 756c 7420 6973 204e 6f6e 652c  Default is None,
-000184f0: 206d 6561 6e69 6e67 2074 6861 7420 636f   meaning that co
-00018500: 7270 7573 2067 6574 7320 6175 746f 2d64  rpus gets auto-d
-00018510: 6f77 6e6c 6f61 6465 6420 616e 6420 6c6f  ownloaded and lo
-00018520: 6164 6564 2e20 596f 7520 6361 6e20 6f76  aded. You can ov
-00018530: 6572 7269 6465 2074 6869 7320 746f 2070  erride this to p
-00018540: 6f69 6e74 2074 6f20 6120 6469 6666 6572  oint to a differ
-00018550: 656e 7420 666f 6c64 6572 2062 7574 2074  ent folder but t
-00018560: 7970 6963 616c 6c79 2074 6869 7320 7368  ypically this sh
-00018570: 6f75 6c64 206e 6f74 2062 6520 6e65 6365  ould not be nece
-00018580: 7373 6172 792e 0a20 2020 2020 2020 2020  ssary..         
-00018590: 2020 2069 6e5f 6d65 6d6f 7279 3a20 4966     in_memory: If
-000185a0: 2054 7275 652c 206b 6565 7073 2064 6174   True, keeps dat
-000185b0: 6173 6574 2069 6e20 6d65 6d6f 7279 2067  aset in memory g
-000185c0: 6976 696e 6720 7370 6565 6475 7073 2069  iving speedups i
-000185d0: 6e20 7472 6169 6e69 6e67 2e20 4e6f 7420  n training. Not 
-000185e0: 7265 636f 6d6d 656e 6465 6420 6475 6520  recommended due 
-000185f0: 746f 2068 6561 7679 2052 414d 2075 7361  to heavy RAM usa
-00018600: 6765 2e0a 2020 2020 2020 2020 2020 2020  ge..            
-00018610: 646f 6375 6d65 6e74 5f61 735f 7365 7175  document_as_sequ
-00018620: 656e 6365 3a20 4966 2054 7275 652c 2061  ence: If True, a
-00018630: 6c6c 2073 656e 7465 6e63 6573 206f 6620  ll sentences of 
-00018640: 6120 646f 6375 6d65 6e74 2061 7265 2072  a document are r
-00018650: 6561 6420 696e 746f 2061 2073 696e 676c  ead into a singl
-00018660: 6520 5365 6e74 656e 6365 206f 626a 6563  e Sentence objec
-00018670: 742e 0a20 2020 2020 2020 2022 2222 0a20  t..        """. 
-00018680: 2020 2020 2020 2062 6173 655f 7061 7468         base_path
-00018690: 203d 206b 6f6c 6962 7269 2e63 6163 6865   = kolibri.cache
-000186a0: 5f72 6f6f 7420 2f20 2264 6174 6173 6574  _root / "dataset
-000186b0: 7322 2069 6620 6e6f 7420 6261 7365 5f70  s" if not base_p
-000186c0: 6174 6820 656c 7365 2050 6174 6828 6261  ath else Path(ba
-000186d0: 7365 5f70 6174 6829 0a0a 2020 2020 2020  se_path)..      
-000186e0: 2020 2320 636f 6c75 6d6e 2066 6f72 6d61    # column forma
-000186f0: 740a 2020 2020 2020 2020 636f 6c75 6d6e  t.        column
-00018700: 7320 3d20 7b30 3a20 2274 6578 7422 2c20  s = {0: "text", 
-00018710: 313a 2022 6c65 6d6d 6122 2c20 323a 2022  1: "lemma", 2: "
-00018720: 706f 7322 2c20 333a 2022 6e70 222c 2034  pos", 3: "np", 4
-00018730: 3a20 226e 6572 227d 0a0a 2020 2020 2020  : "ner"}..      
-00018740: 2020 2320 7468 6973 2064 6174 6173 6574    # this dataset
-00018750: 206e 616d 650a 2020 2020 2020 2020 6461   name.        da
-00018760: 7461 7365 745f 6e61 6d65 203d 2073 656c  taset_name = sel
-00018770: 662e 5f5f 636c 6173 735f 5f2e 5f5f 6e61  f.__class__.__na
-00018780: 6d65 5f5f 2e6c 6f77 6572 2829 0a0a 2020  me__.lower()..  
-00018790: 2020 2020 2020 6461 7461 5f66 6f6c 6465        data_folde
-000187a0: 7220 3d20 6261 7365 5f70 6174 6820 2f20  r = base_path / 
-000187b0: 6461 7461 7365 745f 6e61 6d65 0a0a 2020  dataset_name..  
-000187c0: 2020 2020 2020 2320 646f 776e 6c6f 6164        # download
-000187d0: 2064 6174 6120 6966 206e 6563 6573 7361   data if necessa
-000187e0: 7279 0a20 2020 2020 2020 2065 7572 6f70  ry.        europ
-000187f0: 6172 6c5f 6e65 725f 6765 726d 616e 5f70  arl_ner_german_p
-00018800: 6174 6820 3d20 2268 7474 7073 3a2f 2f6e  ath = "https://n
-00018810: 6c70 6164 6f2e 6465 2f7e 7365 6261 7374  lpado.de/~sebast
-00018820: 6961 6e2f 736f 6674 7761 7265 2f6e 6572  ian/software/ner
-00018830: 2f22 0a20 2020 2020 2020 2063 6163 6865  /".        cache
-00018840: 645f 7061 7468 280a 2020 2020 2020 2020  d_path(.        
-00018850: 2020 2020 6622 7b65 7572 6f70 6172 6c5f      f"{europarl_
-00018860: 6e65 725f 6765 726d 616e 5f70 6174 687d  ner_german_path}
-00018870: 6570 2d39 362d 3034 2d31 352e 636f 6e6c  ep-96-04-15.conl
-00018880: 6c22 2c0a 2020 2020 2020 2020 2020 2020  l",.            
-00018890: 5061 7468 2822 6461 7461 7365 7473 2229  Path("datasets")
-000188a0: 202f 2064 6174 6173 6574 5f6e 616d 652c   / dataset_name,
-000188b0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-000188c0: 2020 2063 6163 6865 645f 7061 7468 280a     cached_path(.
-000188d0: 2020 2020 2020 2020 2020 2020 6622 7b65              f"{e
-000188e0: 7572 6f70 6172 6c5f 6e65 725f 6765 726d  uroparl_ner_germ
-000188f0: 616e 5f70 6174 687d 6570 2d39 362d 3034  an_path}ep-96-04
-00018900: 2d31 362e 636f 6e6c 6c22 2c0a 2020 2020  -16.conll",.    
-00018910: 2020 2020 2020 2020 5061 7468 2822 6461          Path("da
-00018920: 7461 7365 7473 2229 202f 2064 6174 6173  tasets") / datas
-00018930: 6574 5f6e 616d 652c 0a20 2020 2020 2020  et_name,.       
-00018940: 2029 0a0a 2020 2020 2020 2020 7365 6c66   )..        self
-00018950: 2e5f 6164 645f 494f 425f 7461 6773 280a  ._add_IOB_tags(.
-00018960: 2020 2020 2020 2020 2020 2020 6461 7461              data
-00018970: 5f66 696c 653d 5061 7468 2864 6174 615f  _file=Path(data_
-00018980: 666f 6c64 6572 202f 2022 6570 2d39 362d  folder / "ep-96-
-00018990: 3034 2d31 352e 636f 6e6c 6c22 292c 0a20  04-15.conll"),. 
-000189a0: 2020 2020 2020 2020 2020 2065 6e63 6f64             encod
-000189b0: 696e 673d 226c 6174 696e 2d31 222c 0a20  ing="latin-1",. 
-000189c0: 2020 2020 2020 2020 2020 206e 6572 5f63             ner_c
-000189d0: 6f6c 756d 6e3d 342c 0a20 2020 2020 2020  olumn=4,.       
-000189e0: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
-000189f0: 5f61 6464 5f49 4f42 5f74 6167 7328 0a20  _add_IOB_tags(. 
-00018a00: 2020 2020 2020 2020 2020 2064 6174 615f             data_
-00018a10: 6669 6c65 3d50 6174 6828 6461 7461 5f66  file=Path(data_f
-00018a20: 6f6c 6465 7220 2f20 2265 702d 3936 2d30  older / "ep-96-0
-00018a30: 342d 3136 2e63 6f6e 6c6c 2229 2c0a 2020  4-16.conll"),.  
-00018a40: 2020 2020 2020 2020 2020 656e 636f 6469            encodi
-00018a50: 6e67 3d22 6c61 7469 6e2d 3122 2c0a 2020  ng="latin-1",.  
-00018a60: 2020 2020 2020 2020 2020 6e65 725f 636f            ner_co
-00018a70: 6c75 6d6e 3d34 2c0a 2020 2020 2020 2020  lumn=4,.        
-00018a80: 290a 0a20 2020 2020 2020 2073 7570 6572  )..        super
-00018a90: 2829 2e5f 5f69 6e69 745f 5f28 0a20 2020  ().__init__(.   
-00018aa0: 2020 2020 2020 2020 2064 6174 615f 666f           data_fo
-00018ab0: 6c64 6572 2c0a 2020 2020 2020 2020 2020  lder,.          
-00018ac0: 2020 636f 6c75 6d6e 732c 0a20 2020 2020    columns,.     
-00018ad0: 2020 2020 2020 2065 6e63 6f64 696e 673d         encoding=
-00018ae0: 226c 6174 696e 2d31 222c 0a20 2020 2020  "latin-1",.     
-00018af0: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
-00018b00: 3d69 6e5f 6d65 6d6f 7279 2c0a 2020 2020  =in_memory,.    
-00018b10: 2020 2020 2020 2020 7472 6169 6e5f 6669          train_fi
-00018b20: 6c65 3d22 6570 2d39 362d 3034 2d31 362e  le="ep-96-04-16.
-00018b30: 636f 6e6c 6c22 2c0a 2020 2020 2020 2020  conll",.        
-00018b40: 2020 2020 7465 7374 5f66 696c 653d 2265      test_file="e
-00018b50: 702d 3936 2d30 342d 3135 2e63 6f6e 6c6c  p-96-04-15.conll
-00018b60: 222c 0a20 2020 2020 2020 2020 2020 202a  ",.            *
-00018b70: 2a63 6f72 7075 7361 7267 732c 0a20 2020  *corpusargs,.   
-00018b80: 2020 2020 2029 0a0a 2020 2020 6465 6620       )..    def 
-00018b90: 5f61 6464 5f49 4f42 5f74 6167 7328 7365  _add_IOB_tags(se
-00018ba0: 6c66 2c20 6461 7461 5f66 696c 653a 2055  lf, data_file: U
-00018bb0: 6e69 6f6e 5b73 7472 2c20 5061 7468 5d2c  nion[str, Path],
-00018bc0: 2065 6e63 6f64 696e 673a 2073 7472 203d   encoding: str =
-00018bd0: 2022 7574 6638 222c 206e 6572 5f63 6f6c   "utf8", ner_col
-00018be0: 756d 6e3a 2069 6e74 203d 2031 293a 0a20  umn: int = 1):. 
-00018bf0: 2020 2020 2020 2022 2222 4675 6e63 7469         """Functi
-00018c00: 6f6e 2074 6861 7420 6164 6473 2049 4f42  on that adds IOB
-00018c10: 2074 6167 7320 6966 206f 6e6c 7920 6368   tags if only ch
-00018c20: 756e 6b20 6e61 6d65 7320 6172 6520 7072  unk names are pr
-00018c30: 6f76 6964 6564 2e0a 0a20 2020 2020 2020  ovided...       
-00018c40: 2065 2e67 2e20 776f 7264 7320 6172 6520   e.g. words are 
-00018c50: 7461 6767 6564 2050 4552 2069 6e73 7465  tagged PER inste
-00018c60: 6164 206f 6620 422d 5045 5220 6f72 2049  ad of B-PER or I
-00018c70: 2d50 4552 2e20 5265 706c 6163 6573 2027  -PER. Replaces '
-00018c80: 3027 2077 6974 6820 274f 2720 6173 2074  0' with 'O' as t
-00018c90: 6865 206e 6f2d 6368 756e 6b20 7461 6720  he no-chunk tag 
-00018ca0: 7369 6e63 6520 436f 6c75 6d6e 436f 7270  since ColumnCorp
-00018cb0: 7573 2065 7870 6563 7473 0a20 2020 2020  us expects.     
-00018cc0: 2020 2074 6865 206c 6574 7465 7220 274f     the letter 'O
-00018cd0: 272e 2041 6464 6974 696f 6e61 6c6c 7920  '. Additionally 
-00018ce0: 6974 2072 656d 6f76 6573 206c 696e 6573  it removes lines
-00018cf0: 2077 6974 6820 6e6f 2074 6167 7320 696e   with no tags in
-00018d00: 2074 6865 2064 6174 6120 6669 6c65 2061   the data file a
-00018d10: 6e64 2063 616e 2061 6c73 6f0a 2020 2020  nd can also.    
-00018d20: 2020 2020 6265 2075 7365 6420 6966 2074      be used if t
-00018d30: 6865 2064 6174 6120 6973 206f 6e6c 7920  he data is only 
-00018d40: 7061 7274 6961 6c6c 7920 494f 4220 7461  partially IOB ta
-00018d50: 6767 6564 2e0a 0a20 2020 2020 2020 2050  gged...        P
-00018d60: 6172 616d 6574 6572 730a 2020 2020 2020  arameters.      
-00018d70: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0a20 2020    ----------.   
-00018d80: 2020 2020 2064 6174 615f 6669 6c65 203a       data_file :
-00018d90: 2055 6e69 6f6e 5b73 7472 2c20 5061 7468   Union[str, Path
-00018da0: 5d0a 2020 2020 2020 2020 2020 2020 5061  ].            Pa
-00018db0: 7468 2074 6f20 7468 6520 6461 7461 2066  th to the data f
-00018dc0: 696c 652e 0a20 2020 2020 2020 2065 6e63  ile..        enc
-00018dd0: 6f64 696e 6720 3a20 7374 722c 206f 7074  oding : str, opt
-00018de0: 696f 6e61 6c0a 2020 2020 2020 2020 2020  ional.          
-00018df0: 2020 456e 636f 6469 6e67 2075 7365 6420    Encoding used 
-00018e00: 696e 206f 7065 6e20 6675 6e63 7469 6f6e  in open function
-00018e10: 2e20 5468 6520 6465 6661 756c 7420 6973  . The default is
-00018e20: 2022 7574 6638 222e 0a20 2020 2020 2020   "utf8"..       
-00018e30: 206e 6572 5f63 6f6c 756d 6e20 3a20 696e   ner_column : in
-00018e40: 742c 206f 7074 696f 6e61 6c0a 2020 2020  t, optional.    
-00018e50: 2020 2020 2020 2020 5370 6563 6966 6965          Specifie
-00018e60: 7320 7468 6520 6e65 722d 7461 6767 6564  s the ner-tagged
-00018e70: 2063 6f6c 756d 6e2e 2054 6865 2064 6566   column. The def
-00018e80: 6175 6c74 2069 7320 3120 2874 6865 2073  ault is 1 (the s
-00018e90: 6563 6f6e 6420 636f 6c75 6d6e 292e 0a20  econd column).. 
-00018ea0: 2020 2020 2020 2022 2222 0a0a 2020 2020         """..    
-00018eb0: 2020 2020 6465 6620 6164 645f 495f 7072      def add_I_pr
-00018ec0: 6566 6978 2863 7572 7265 6e74 5f6c 696e  efix(current_lin
-00018ed0: 653a 204c 6973 745b 7374 725d 2c20 6e65  e: List[str], ne
-00018ee0: 723a 2069 6e74 2c20 7461 673a 2073 7472  r: int, tag: str
-00018ef0: 293a 0a20 2020 2020 2020 2020 2020 2066  ):.            f
-00018f00: 6f72 2069 2069 6e20 7261 6e67 6528 6c65  or i in range(le
-00018f10: 6e28 6375 7272 656e 745f 6c69 6e65 2929  n(current_line))
-00018f20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00018f30: 2020 6966 2069 203d 3d20 303a 0a20 2020    if i == 0:.   
-00018f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018f50: 2066 2e77 7269 7465 286c 696e 655f 6c69   f.write(line_li
-00018f60: 7374 5b69 5d29 0a20 2020 2020 2020 2020  st[i]).         
-00018f70: 2020 2020 2020 2065 6c69 6620 6920 3d3d         elif i ==
-00018f80: 206e 6572 3a0a 2020 2020 2020 2020 2020   ner:.          
-00018f90: 2020 2020 2020 2020 2020 662e 7772 6974            f.writ
-00018fa0: 6528 2220 492d 2220 2b20 7461 6729 0a20  e(" I-" + tag). 
-00018fb0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00018fc0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00018fd0: 2020 2020 2020 2020 2066 2e77 7269 7465           f.write
-00018fe0: 2822 2022 202b 2063 7572 7265 6e74 5f6c  (" " + current_l
-00018ff0: 696e 655b 695d 290a 2020 2020 2020 2020  ine[i]).        
-00019000: 2020 2020 662e 7772 6974 6528 225c 6e22      f.write("\n"
-00019010: 290a 0a20 2020 2020 2020 2077 6974 6820  )..        with 
-00019020: 6f70 656e 2866 696c 653d 6461 7461 5f66  open(file=data_f
-00019030: 696c 652c 2065 6e63 6f64 696e 673d 656e  ile, encoding=en
-00019040: 636f 6469 6e67 2920 6173 2066 3a0a 2020  coding) as f:.  
-00019050: 2020 2020 2020 2020 2020 6c69 6e65 7320            lines 
-00019060: 3d20 662e 7265 6164 6c69 6e65 7328 290a  = f.readlines().
-00019070: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
-00019080: 6e28 6669 6c65 3d64 6174 615f 6669 6c65  n(file=data_file
-00019090: 2c20 6d6f 6465 3d22 7722 2c20 656e 636f  , mode="w", enco
-000190a0: 6469 6e67 3d65 6e63 6f64 696e 6729 2061  ding=encoding) a
-000190b0: 7320 663a 0a20 2020 2020 2020 2020 2020  s f:.           
-000190c0: 2070 7265 6420 3d20 224f 2220 2023 2072   pred = "O"  # r
-000190d0: 656d 656d 6265 7273 206e 6572 2074 6167  emembers ner tag
-000190e0: 206f 6620 7072 6564 6563 6573 7369 6e67   of predecessing
-000190f0: 206c 696e 650a 2020 2020 2020 2020 2020   line.          
-00019100: 2020 666f 7220 6c69 6e65 2069 6e20 6c69    for line in li
-00019110: 6e65 733a 0a20 2020 2020 2020 2020 2020  nes:.           
-00019120: 2020 2020 206c 696e 655f 6c69 7374 203d       line_list =
-00019130: 206c 696e 652e 7370 6c69 7428 290a 2020   line.split().  
-00019140: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00019150: 206c 656e 286c 696e 655f 6c69 7374 2920   len(line_list) 
-00019160: 3e20 323a 2020 2320 776f 7264 2077 6974  > 2:  # word wit
-00019170: 6820 7461 6773 0a20 2020 2020 2020 2020  h tags.         
-00019180: 2020 2020 2020 2020 2020 206e 6572 5f74             ner_t
-00019190: 6167 203d 206c 696e 655f 6c69 7374 5b6e  ag = line_list[n
-000191a0: 6572 5f63 6f6c 756d 6e5d 0a20 2020 2020  er_column].     
-000191b0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000191c0: 6620 6e65 725f 7461 6720 696e 205b 2230  f ner_tag in ["0
-000191d0: 222c 2022 4f22 5d3a 2020 2320 6e6f 2063  ", "O"]:  # no c
-000191e0: 6875 6e6b 0a20 2020 2020 2020 2020 2020  hunk.           
-000191f0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-00019200: 2069 2069 6e20 7261 6e67 6528 6c65 6e28   i in range(len(
-00019210: 6c69 6e65 5f6c 6973 7429 293a 0a20 2020  line_list)):.   
-00019220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019230: 2020 2020 2020 2020 2069 6620 6920 3d3d           if i ==
-00019240: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
-00019250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019260: 2020 2020 662e 7772 6974 6528 6c69 6e65      f.write(line
-00019270: 5f6c 6973 745b 695d 290a 2020 2020 2020  _list[i]).      
-00019280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019290: 2020 2020 2020 656c 6966 2069 203d 3d20        elif i == 
-000192a0: 6e65 725f 636f 6c75 6d6e 3a0a 2020 2020  ner_column:.    
-000192b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000192c0: 2020 2020 2020 2020 2020 2020 662e 7772              f.wr
-000192d0: 6974 6528 2220 4f22 290a 2020 2020 2020  ite(" O").      
-000192e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000192f0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00019300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019310: 2020 2020 2020 2020 2020 2020 662e 7772              f.wr
-00019320: 6974 6528 2220 2220 2b20 6c69 6e65 5f6c  ite(" " + line_l
-00019330: 6973 745b 695d 290a 2020 2020 2020 2020  ist[i]).        
-00019340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019350: 662e 7772 6974 6528 225c 6e22 290a 2020  f.write("\n").  
-00019360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019370: 2020 2020 2020 7072 6564 203d 2022 4f22        pred = "O"
-00019380: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019390: 2020 2020 2065 6c69 6620 222d 2220 6e6f       elif "-" no
-000193a0: 7420 696e 206e 6572 5f74 6167 3a20 2023  t in ner_tag:  #
-000193b0: 206e 6f20 494f 4220 7461 6773 0a20 2020   no IOB tags.   
-000193c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000193d0: 2020 2020 2069 6620 7072 6564 203d 3d20       if pred == 
-000193e0: 224f 223a 2020 2320 666f 756e 6420 6120  "O":  # found a 
-000193f0: 6e65 7720 6368 756e 6b0a 2020 2020 2020  new chunk.      
-00019400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019410: 2020 2020 2020 6164 645f 495f 7072 6566        add_I_pref
-00019420: 6978 286c 696e 655f 6c69 7374 2c20 6e65  ix(line_list, ne
-00019430: 725f 636f 6c75 6d6e 2c20 6e65 725f 7461  r_column, ner_ta
-00019440: 6729 0a20 2020 2020 2020 2020 2020 2020  g).             
-00019450: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00019460: 7265 6420 3d20 6e65 725f 7461 670a 2020  red = ner_tag.  
-00019470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019480: 2020 2020 2020 656c 7365 3a20 2023 2066        else:  # f
-00019490: 6f75 6e64 2066 7572 7468 6572 2070 6172  ound further par
-000194a0: 7420 6f66 2063 6875 6e6b 206f 7220 6e65  t of chunk or ne
-000194b0: 7720 6368 756e 6b20 6469 7265 6374 6c79  w chunk directly
-000194c0: 2061 6674 6572 206f 6c64 2063 6875 6e6b   after old chunk
-000194d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000194e0: 2020 2020 2020 2020 2020 2020 2061 6464               add
-000194f0: 5f49 5f70 7265 6669 7828 6c69 6e65 5f6c  _I_prefix(line_l
-00019500: 6973 742c 206e 6572 5f63 6f6c 756d 6e2c  ist, ner_column,
-00019510: 206e 6572 5f74 6167 290a 2020 2020 2020   ner_tag).      
-00019520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019530: 2020 2020 2020 7072 6564 203d 206e 6572        pred = ner
-00019540: 5f74 6167 0a20 2020 2020 2020 2020 2020  _tag.           
-00019550: 2020 2020 2020 2020 2065 6c73 653a 2020           else:  
-00019560: 2320 6c69 6e65 2061 6c72 6561 6479 2068  # line already h
-00019570: 6173 2049 4f42 2074 6167 2028 7461 6720  as IOB tag (tag 
-00019580: 636f 6e74 6169 6e73 2027 2d27 290a 2020  contains '-').  
-00019590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000195a0: 2020 2020 2020 662e 7772 6974 6528 6c69        f.write(li
-000195b0: 6e65 290a 2020 2020 2020 2020 2020 2020  ne).            
-000195c0: 2020 2020 2020 2020 2020 2020 7072 6564              pred
-000195d0: 203d 206e 6572 5f74 6167 2e73 706c 6974   = ner_tag.split
-000195e0: 2822 2d22 295b 315d 0a20 2020 2020 2020  ("-")[1].       
-000195f0: 2020 2020 2020 2020 2065 6c69 6620 6c65           elif le
-00019600: 6e28 6c69 6e65 5f6c 6973 7429 203d 3d20  n(line_list) == 
-00019610: 303a 2020 2320 656d 7074 7920 6c69 6e65  0:  # empty line
-00019620: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019630: 2020 2020 2066 2e77 7269 7465 2822 5c6e       f.write("\n
-00019640: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
-00019650: 2020 2020 2020 2070 7265 6420 3d20 224f         pred = "O
-00019660: 220a 0a0a 636c 6173 7320 4e45 525f 4745  "...class NER_GE
-00019670: 524d 414e 5f4c 4547 414c 2843 6f6c 756d  RMAN_LEGAL(Colum
-00019680: 6e43 6f72 7075 7329 3a0a 2020 2020 6465  nCorpus):.    de
-00019690: 6620 5f5f 696e 6974 5f5f 280a 2020 2020  f __init__(.    
-000196a0: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
-000196b0: 2020 6261 7365 5f70 6174 683a 204f 7074    base_path: Opt
-000196c0: 696f 6e61 6c5b 556e 696f 6e5b 7374 722c  ional[Union[str,
-000196d0: 2050 6174 685d 5d20 3d20 4e6f 6e65 2c0a   Path]] = None,.
-000196e0: 2020 2020 2020 2020 696e 5f6d 656d 6f72          in_memor
-000196f0: 793a 2062 6f6f 6c20 3d20 5472 7565 2c0a  y: bool = True,.
-00019700: 2020 2020 2020 2020 2a2a 636f 7270 7573          **corpus
-00019710: 6172 6773 2c0a 2020 2020 2920 2d3e 204e  args,.    ) -> N
-00019720: 6f6e 653a 0a20 2020 2020 2020 2022 2222  one:.        """
-00019730: 496e 6974 6961 6c69 7a65 2074 6865 204c  Initialize the L
-00019740: 4552 5f47 4552 4d41 4e20 284c 6567 616c  ER_GERMAN (Legal
-00019750: 2045 6e74 6974 7920 5265 636f 676e 6974   Entity Recognit
-00019760: 696f 6e29 2063 6f72 7075 732e 0a0a 2020  ion) corpus...  
-00019770: 2020 2020 2020 5468 6520 6669 7273 7420        The first 
-00019780: 7469 6d65 2079 6f75 2063 616c 6c20 7468  time you call th
-00019790: 6973 2063 6f6e 7374 7275 6374 6f72 2069  is constructor i
-000197a0: 7420 7769 6c6c 2061 7574 6f6d 6174 6963  t will automatic
-000197b0: 616c 6c79 2064 6f77 6e6c 6f61 6420 7468  ally download th
-000197c0: 6520 6461 7461 7365 742e 0a20 2020 2020  e dataset..     
-000197d0: 2020 203a 7061 7261 6d20 6261 7365 5f70     :param base_p
-000197e0: 6174 683a 2044 6566 6175 6c74 2069 7320  ath: Default is 
-000197f0: 4e6f 6e65 2c20 6d65 616e 696e 6720 7468  None, meaning th
-00019800: 6174 2063 6f72 7075 7320 6765 7473 2061  at corpus gets a
-00019810: 7574 6f2d 646f 776e 6c6f 6164 6564 2061  uto-downloaded a
-00019820: 6e64 206c 6f61 6465 642e 2059 6f75 2063  nd loaded. You c
-00019830: 616e 206f 7665 7272 6964 6520 7468 6973  an override this
-00019840: 0a20 2020 2020 2020 2074 6f20 706f 696e  .        to poin
-00019850: 7420 746f 2061 2064 6966 6665 7265 6e74  t to a different
-00019860: 2066 6f6c 6465 7220 6275 7420 7479 7069   folder but typi
-00019870: 6361 6c6c 7920 7468 6973 2073 686f 756c  cally this shoul
-00019880: 6420 6e6f 7420 6265 206e 6563 6573 7361  d not be necessa
-00019890: 7279 2e0a 2020 2020 2020 2020 3a70 6172  ry..        :par
-000198a0: 616d 2069 6e5f 6d65 6d6f 7279 3a20 4966  am in_memory: If
-000198b0: 2054 7275 652c 206b 6565 7073 2064 6174   True, keeps dat
-000198c0: 6173 6574 2069 6e20 6d65 6d6f 7279 2067  aset in memory g
-000198d0: 6976 696e 6720 7370 6565 6475 7073 2069  iving speedups i
-000198e0: 6e20 7472 6169 6e69 6e67 2e20 4e6f 7420  n training. Not 
-000198f0: 7265 636f 6d6d 656e 6465 6420 6475 6520  recommended due 
-00019900: 746f 2068 6561 7679 2052 414d 2075 7361  to heavy RAM usa
-00019910: 6765 2e0a 2020 2020 2020 2020 2222 220a  ge..        """.
-00019920: 2020 2020 2020 2020 6261 7365 5f70 6174          base_pat
-00019930: 6820 3d20 6b6f 6c69 6272 692e 6361 6368  h = kolibri.cach
-00019940: 655f 726f 6f74 202f 2022 6461 7461 7365  e_root / "datase
-00019950: 7473 2220 6966 206e 6f74 2062 6173 655f  ts" if not base_
-00019960: 7061 7468 2065 6c73 6520 5061 7468 2862  path else Path(b
-00019970: 6173 655f 7061 7468 290a 0a20 2020 2020  ase_path)..     
-00019980: 2020 2023 2063 6f6c 756d 6e20 666f 726d     # column form
-00019990: 6174 0a20 2020 2020 2020 2063 6f6c 756d  at.        colum
-000199a0: 6e73 203d 207b 303a 2022 7465 7874 222c  ns = {0: "text",
-000199b0: 2031 3a20 226e 6572 227d 0a0a 2020 2020   1: "ner"}..    
-000199c0: 2020 2020 2320 7468 6973 2064 6174 6173      # this datas
-000199d0: 6574 206e 616d 650a 2020 2020 2020 2020  et name.        
-000199e0: 6461 7461 7365 745f 6e61 6d65 203d 2073  dataset_name = s
-000199f0: 656c 662e 5f5f 636c 6173 735f 5f2e 5f5f  elf.__class__.__
-00019a00: 6e61 6d65 5f5f 2e6c 6f77 6572 2829 0a0a  name__.lower()..
-00019a10: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
-00019a20: 6465 7220 3d20 6261 7365 5f70 6174 6820  der = base_path 
-00019a30: 2f20 6461 7461 7365 745f 6e61 6d65 0a0a  / dataset_name..
-00019a40: 2020 2020 2020 2020 2320 646f 776e 6c6f          # downlo
-00019a50: 6164 2064 6174 6120 6966 206e 6563 6573  ad data if neces
-00019a60: 7361 7279 0a20 2020 2020 2020 206c 6572  sary.        ler
-00019a70: 5f70 6174 6820 3d20 2268 7474 7073 3a2f  _path = "https:/
-00019a80: 2f72 6177 2e67 6974 6875 6275 7365 7263  /raw.githubuserc
-00019a90: 6f6e 7465 6e74 2e63 6f6d 2f65 6c65 6e61  ontent.com/elena
-00019aa0: 6e65 7265 6973 732f 4c65 6761 6c2d 456e  nereiss/Legal-En
-00019ab0: 7469 7479 2d52 6563 6f67 6e69 7469 6f6e  tity-Recognition
-00019ac0: 2f6d 6173 7465 722f 6461 7461 2f22 0a0a  /master/data/"..
-00019ad0: 2020 2020 2020 2020 666f 7220 7370 6c69          for spli
-00019ae0: 7420 696e 205b 2274 7261 696e 222c 2022  t in ["train", "
-00019af0: 6465 7622 2c20 2274 6573 7422 5d3a 0a20  dev", "test"]:. 
-00019b00: 2020 2020 2020 2020 2020 2063 6163 6865             cache
-00019b10: 645f 7061 7468 2866 227b 6c65 725f 7061  d_path(f"{ler_pa
-00019b20: 7468 7d6c 6572 5f7b 7370 6c69 747d 2e63  th}ler_{split}.c
-00019b30: 6f6e 6c6c 222c 2050 6174 6828 2264 6174  onll", Path("dat
-00019b40: 6173 6574 7322 2920 2f20 6461 7461 7365  asets") / datase
-00019b50: 745f 6e61 6d65 290a 0a20 2020 2020 2020  t_name)..       
-00019b60: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
-00019b70: 5f28 0a20 2020 2020 2020 2020 2020 2064  _(.            d
-00019b80: 6174 615f 666f 6c64 6572 2c0a 2020 2020  ata_folder,.    
-00019b90: 2020 2020 2020 2020 636f 6c75 6d6e 732c          columns,
-00019ba0: 0a20 2020 2020 2020 2020 2020 2069 6e5f  .            in_
-00019bb0: 6d65 6d6f 7279 3d69 6e5f 6d65 6d6f 7279  memory=in_memory
-00019bc0: 2c0a 2020 2020 2020 2020 2020 2020 7472  ,.            tr
-00019bd0: 6169 6e5f 6669 6c65 3d22 6c65 725f 7472  ain_file="ler_tr
-00019be0: 6169 6e2e 636f 6e6c 6c22 2c0a 2020 2020  ain.conll",.    
-00019bf0: 2020 2020 2020 2020 6465 765f 6669 6c65          dev_file
-00019c00: 3d22 6c65 725f 6465 762e 636f 6e6c 6c22  ="ler_dev.conll"
-00019c10: 2c0a 2020 2020 2020 2020 2020 2020 7465  ,.            te
-00019c20: 7374 5f66 696c 653d 226c 6572 5f74 6573  st_file="ler_tes
-00019c30: 742e 636f 6e6c 6c22 2c0a 2020 2020 2020  t.conll",.      
-00019c40: 2020 2020 2020 2a2a 636f 7270 7573 6172        **corpusar
-00019c50: 6773 2c0a 2020 2020 2020 2020 290a 0a0a  gs,.        )...
-00019c60: 636c 6173 7320 4e45 525f 4745 524d 414e  class NER_GERMAN
-00019c70: 5f47 4552 4d45 5641 4c28 436f 6c75 6d6e  _GERMEVAL(Column
-00019c80: 436f 7270 7573 293a 0a20 2020 2064 6566  Corpus):.    def
-00019c90: 205f 5f69 6e69 745f 5f28 0a20 2020 2020   __init__(.     
-00019ca0: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
-00019cb0: 2062 6173 655f 7061 7468 3a20 4f70 7469   base_path: Opti
-00019cc0: 6f6e 616c 5b55 6e69 6f6e 5b73 7472 2c20  onal[Union[str, 
-00019cd0: 5061 7468 5d5d 203d 204e 6f6e 652c 0a20  Path]] = None,. 
-00019ce0: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
-00019cf0: 3a20 626f 6f6c 203d 2054 7275 652c 0a20  : bool = True,. 
-00019d00: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
-00019d10: 7267 732c 0a20 2020 2029 202d 3e20 4e6f  rgs,.    ) -> No
-00019d20: 6e65 3a0a 2020 2020 2020 2020 2222 2249  ne:.        """I
-00019d30: 6e69 7469 616c 697a 6520 7468 6520 4765  nitialize the Ge
-00019d40: 726d 4576 616c 204e 4552 2063 6f72 7075  rmEval NER corpu
-00019d50: 7320 666f 7220 4765 726d 616e 2e0a 0a20  s for German... 
-00019d60: 2020 2020 2020 2054 6869 7320 6973 206f         This is o
-00019d70: 6e6c 7920 706f 7373 6962 6c65 2069 6620  nly possible if 
-00019d80: 796f 7527 7665 206d 616e 7561 6c6c 7920  you've manually 
-00019d90: 646f 776e 6c6f 6164 6564 2069 7420 746f  downloaded it to
-00019da0: 2079 6f75 7220 6d61 6368 696e 652e 0a20   your machine.. 
-00019db0: 2020 2020 2020 204f 6274 6169 6e20 7468         Obtain th
-00019dc0: 6520 636f 7270 7573 2066 726f 6d20 6874  e corpus from ht
-00019dd0: 7470 733a 2f2f 7369 7465 732e 676f 6f67  tps://sites.goog
-00019de0: 6c65 2e63 6f6d 2f73 6974 652f 6765 726d  le.com/site/germ
-00019df0: 6576 616c 3230 3134 6e65 722f 6461 7461  eval2014ner/data
-00019e00: 2061 6e64 2070 7574 2069 7420 696e 746f   and put it into
-00019e10: 2073 6f6d 6520 666f 6c64 6572 2e0a 2020   some folder..  
-00019e20: 2020 2020 2020 5468 656e 2070 6f69 6e74        Then point
-00019e30: 2074 6865 2062 6173 655f 7061 7468 2070   the base_path p
-00019e40: 6172 616d 6574 6572 2069 6e20 7468 6520  arameter in the 
-00019e50: 636f 6e73 7472 7563 746f 7220 746f 2074  constructor to t
-00019e60: 6869 7320 666f 6c64 6572 0a20 2020 2020  his folder.     
-00019e70: 2020 203a 7061 7261 6d20 6261 7365 5f70     :param base_p
-00019e80: 6174 683a 2050 6174 6820 746f 2074 6865  ath: Path to the
-00019e90: 2047 6572 6d45 7661 6c20 636f 7270 7573   GermEval corpus
-00019ea0: 206f 6e20 796f 7572 206d 6163 6869 6e65   on your machine
-00019eb0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00019ec0: 696e 5f6d 656d 6f72 793a 4966 2054 7275  in_memory:If Tru
-00019ed0: 652c 206b 6565 7073 2064 6174 6173 6574  e, keeps dataset
-00019ee0: 2069 6e20 6d65 6d6f 7279 2067 6976 696e   in memory givin
-00019ef0: 6720 7370 6565 6475 7073 2069 6e20 7472  g speedups in tr
-00019f00: 6169 6e69 6e67 2e0a 2020 2020 2020 2020  aining..        
-00019f10: 2222 220a 2020 2020 2020 2020 6261 7365  """.        base
-00019f20: 5f70 6174 6820 3d20 6b6f 6c69 6272 692e  _path = kolibri.
-00019f30: 6361 6368 655f 726f 6f74 202f 2022 6461  cache_root / "da
-00019f40: 7461 7365 7473 2220 6966 206e 6f74 2062  tasets" if not b
-00019f50: 6173 655f 7061 7468 2065 6c73 6520 5061  ase_path else Pa
-00019f60: 7468 2862 6173 655f 7061 7468 290a 0a20  th(base_path).. 
-00019f70: 2020 2020 2020 2023 2063 6f6c 756d 6e20         # column 
-00019f80: 666f 726d 6174 0a20 2020 2020 2020 2063  format.        c
-00019f90: 6f6c 756d 6e73 203d 207b 313a 2022 7465  olumns = {1: "te
-00019fa0: 7874 222c 2032 3a20 226e 6572 227d 0a0a  xt", 2: "ner"}..
-00019fb0: 2020 2020 2020 2020 2320 7468 6973 2064          # this d
-00019fc0: 6174 6173 6574 206e 616d 650a 2020 2020  ataset name.    
-00019fd0: 2020 2020 6461 7461 7365 745f 6e61 6d65      dataset_name
-00019fe0: 203d 2073 656c 662e 5f5f 636c 6173 735f   = self.__class_
-00019ff0: 5f2e 5f5f 6e61 6d65 5f5f 2e6c 6f77 6572  _.__name__.lower
-0001a000: 2829 0a0a 2020 2020 2020 2020 6461 7461  ()..        data
-0001a010: 5f66 6f6c 6465 7220 3d20 6261 7365 5f70  _folder = base_p
-0001a020: 6174 6820 2f20 6461 7461 7365 745f 6e61  ath / dataset_na
-0001a030: 6d65 0a0a 2020 2020 2020 2020 2320 6368  me..        # ch
-0001a040: 6563 6b20 6966 2064 6174 6120 7468 6572  eck if data ther
-0001a050: 650a 2020 2020 2020 2020 6966 206e 6f74  e.        if not
-0001a060: 2064 6174 615f 666f 6c64 6572 2e65 7869   data_folder.exi
-0001a070: 7374 7328 293a 0a20 2020 2020 2020 2020  sts():.         
-0001a080: 2020 2023 2063 7265 6174 6520 666f 6c64     # create fold
-0001a090: 6572 0a20 2020 2020 2020 2020 2020 206f  er.            o
-0001a0a0: 732e 6d61 6b65 6469 7273 2864 6174 615f  s.makedirs(data_
-0001a0b0: 666f 6c64 6572 290a 0a20 2020 2020 2020  folder)..       
-0001a0c0: 2020 2020 2023 2064 6f77 6e6c 6f61 6420       # download 
-0001a0d0: 6461 7461 7365 740a 2020 2020 2020 2020  dataset.        
-0001a0e0: 2020 2020 696d 706f 7274 2067 646f 776e      import gdown
-0001a0f0: 0a0a 2020 2020 2020 2020 2020 2020 6764  ..            gd
-0001a100: 6f77 6e2e 646f 776e 6c6f 6164 280a 2020  own.download(.  
-0001a110: 2020 2020 2020 2020 2020 2020 2020 7572                ur
-0001a120: 6c3d 2268 7474 7073 3a2f 2f64 7269 7665  l="https://drive
-0001a130: 2e67 6f6f 676c 652e 636f 6d2f 7563 3f69  .google.com/uc?i
-0001a140: 643d 7b7d 222e 666f 726d 6174 2822 314a  d={}".format("1J
-0001a150: 6a68 6261 6c35 3335 5656 7a32 6170 3476  jhbal535VVz2ap4v
-0001a160: 3472 5f72 4e31 5545 4854 644c 4b35 5022  4r_rN1UEHTdLK5P"
-0001a170: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
-0001a180: 2020 206f 7574 7075 743d 7374 7228 6461     output=str(da
-0001a190: 7461 5f66 6f6c 6465 7220 2f20 2274 7261  ta_folder / "tra
-0001a1a0: 696e 2e74 7376 2229 2c0a 2020 2020 2020  in.tsv"),.      
-0001a1b0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0001a1c0: 2020 2020 6764 6f77 6e2e 646f 776e 6c6f      gdown.downlo
-0001a1d0: 6164 280a 2020 2020 2020 2020 2020 2020  ad(.            
-0001a1e0: 2020 2020 7572 6c3d 2268 7474 7073 3a2f      url="https:/
-0001a1f0: 2f64 7269 7665 2e67 6f6f 676c 652e 636f  /drive.google.co
-0001a200: 6d2f 7563 3f69 643d 7b7d 222e 666f 726d  m/uc?id={}".form
-0001a210: 6174 2822 3175 396d 6237 6b4e 4a48 5751  at("1u9mb7kNJHWQ
-0001a220: 4357 7977 654d 4452 4d75 5446 6f4f 484f  CWyweMDRMuTFoOHO
-0001a230: 6665 4254 4822 292c 0a20 2020 2020 2020  feBTH"),.       
-0001a240: 2020 2020 2020 2020 206f 7574 7075 743d           output=
-0001a250: 7374 7228 6461 7461 5f66 6f6c 6465 7220  str(data_folder 
-0001a260: 2f20 2274 6573 742e 7473 7622 292c 0a20  / "test.tsv"),. 
-0001a270: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-0001a280: 2020 2020 2020 2020 2067 646f 776e 2e64           gdown.d
-0001a290: 6f77 6e6c 6f61 6428 0a20 2020 2020 2020  ownload(.       
-0001a2a0: 2020 2020 2020 2020 2075 726c 3d22 6874           url="ht
-0001a2b0: 7470 733a 2f2f 6472 6976 652e 676f 6f67  tps://drive.goog
-0001a2c0: 6c65 2e63 6f6d 2f75 633f 6964 3d7b 7d22  le.com/uc?id={}"
-0001a2d0: 2e66 6f72 6d61 7428 2231 5a66 5263 5154  .format("1ZfRcQT
-0001a2e0: 6864 7441 5235 5050 526a 4944 7472 5650  hdtAR5PPRjIDtrVP
-0001a2f0: 3742 7458 5343 5542 626d 2229 2c0a 2020  7BtXSCUBbm"),.  
-0001a300: 2020 2020 2020 2020 2020 2020 2020 6f75                ou
-0001a310: 7470 7574 3d73 7472 2864 6174 615f 666f  tput=str(data_fo
-0001a320: 6c64 6572 202f 2022 6465 762e 7473 7622  lder / "dev.tsv"
-0001a330: 292c 0a20 2020 2020 2020 2020 2020 2029  ),.            )
-0001a340: 0a0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
-0001a350: 292e 5f5f 696e 6974 5f5f 280a 2020 2020  ).__init__(.    
-0001a360: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
-0001a370: 6465 722c 0a20 2020 2020 2020 2020 2020  der,.           
-0001a380: 2063 6f6c 756d 6e73 2c0a 2020 2020 2020   columns,.      
-0001a390: 2020 2020 2020 636f 6d6d 656e 745f 7379        comment_sy
-0001a3a0: 6d62 6f6c 3d22 2322 2c0a 2020 2020 2020  mbol="#",.      
-0001a3b0: 2020 2020 2020 696e 5f6d 656d 6f72 793d        in_memory=
-0001a3c0: 696e 5f6d 656d 6f72 792c 0a20 2020 2020  in_memory,.     
-0001a3d0: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
-0001a3e0: 7267 732c 0a20 2020 2020 2020 2029 0a0a  rgs,.        )..
-0001a3f0: 0a63 6c61 7373 204e 4552 5f47 4552 4d41  .class NER_GERMA
-0001a400: 4e5f 504f 4c49 5449 4353 2843 6f6c 756d  N_POLITICS(Colum
-0001a410: 6e43 6f72 7075 7329 3a0a 2020 2020 6465  nCorpus):.    de
-0001a420: 6620 5f5f 696e 6974 5f5f 280a 2020 2020  f __init__(.    
-0001a430: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
-0001a440: 2020 6261 7365 5f70 6174 683a 204f 7074    base_path: Opt
-0001a450: 696f 6e61 6c5b 556e 696f 6e5b 7374 722c  ional[Union[str,
-0001a460: 2050 6174 685d 5d20 3d20 4e6f 6e65 2c0a   Path]] = None,.
-0001a470: 2020 2020 2020 2020 636f 6c75 6d6e 5f64          column_d
-0001a480: 656c 696d 6974 6572 3a20 7374 7220 3d20  elimiter: str = 
-0001a490: 7222 5c73 2b22 2c0a 2020 2020 2020 2020  r"\s+",.        
-0001a4a0: 696e 5f6d 656d 6f72 793a 2062 6f6f 6c20  in_memory: bool 
-0001a4b0: 3d20 5472 7565 2c0a 2020 2020 2020 2020  = True,.        
-0001a4c0: 2a2a 636f 7270 7573 6172 6773 2c0a 2020  **corpusargs,.  
-0001a4d0: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-0001a4e0: 2020 2020 2022 2222 496e 6974 6961 6c69       """Initiali
-0001a4f0: 7a65 2063 6f72 7075 7320 7769 7468 204e  ze corpus with N
-0001a500: 616d 6564 2045 6e74 6974 7920 4d6f 6465  amed Entity Mode
-0001a510: 6c20 666f 7220 4765 726d 616e 2050 6f6c  l for German Pol
-0001a520: 6974 6963 7320 284e 454d 4750 292e 0a0a  itics (NEMGP)...
-0001a530: 2020 2020 2020 2020 6461 7461 2066 726f          data fro
-0001a540: 6d20 6874 7470 733a 2f2f 7777 772e 7468  m https://www.th
-0001a550: 6f6d 6173 2d7a 6173 7472 6f77 2e64 652f  omas-zastrow.de/
-0001a560: 6e6c 702f 2e0a 0a20 2020 2020 2020 2054  nlp/...        T
-0001a570: 6865 2066 6972 7374 2074 696d 6520 796f  he first time yo
-0001a580: 7520 6361 6c6c 2074 6869 7320 636f 6e73  u call this cons
-0001a590: 7472 7563 746f 7220 6974 2077 696c 6c20  tructor it will 
-0001a5a0: 6175 746f 6d61 7469 6361 6c6c 7920 646f  automatically do
-0001a5b0: 776e 6c6f 6164 2074 6865 0a20 2020 2020  wnload the.     
-0001a5c0: 2020 2064 6174 6173 6574 2e0a 2020 2020     dataset..    
-0001a5d0: 2020 2020 3a70 6172 616d 2062 6173 655f      :param base_
-0001a5e0: 7061 7468 3a20 4465 6661 756c 7420 6973  path: Default is
-0001a5f0: 204e 6f6e 652c 206d 6561 6e69 6e67 2074   None, meaning t
-0001a600: 6861 7420 636f 7270 7573 2067 6574 7320  hat corpus gets 
-0001a610: 6175 746f 2d64 6f77 6e6c 6f61 6465 6420  auto-downloaded 
-0001a620: 616e 6420 6c6f 6164 6564 2e20 596f 7520  and loaded. You 
-0001a630: 6361 6e20 6f76 6572 7269 6465 2074 6869  can override thi
-0001a640: 730a 2020 2020 2020 2020 746f 2070 6f69  s.        to poi
-0001a650: 6e74 2074 6f20 6120 6469 6666 6572 656e  nt to a differen
-0001a660: 7420 666f 6c64 6572 2062 7574 2074 7970  t folder but typ
-0001a670: 6963 616c 6c79 2074 6869 7320 7368 6f75  ically this shou
-0001a680: 6c64 206e 6f74 2062 6520 6e65 6365 7373  ld not be necess
-0001a690: 6172 792e 0a20 2020 2020 2020 2050 4f53  ary..        POS
-0001a6a0: 2074 6167 7320 696e 7374 6561 640a 2020   tags instead.  
-0001a6b0: 2020 2020 2020 3a70 6172 616d 2069 6e5f        :param in_
-0001a6c0: 6d65 6d6f 7279 3a20 4966 2054 7275 652c  memory: If True,
-0001a6d0: 206b 6565 7073 2064 6174 6173 6574 2069   keeps dataset i
-0001a6e0: 6e20 6d65 6d6f 7279 2067 6976 696e 6720  n memory giving 
-0001a6f0: 7370 6565 6475 7073 2069 6e20 7472 6169  speedups in trai
-0001a700: 6e69 6e67 2e0a 2020 2020 2020 2020 3a70  ning..        :p
-0001a710: 6172 616d 2064 6f63 756d 656e 745f 6173  aram document_as
-0001a720: 5f73 6571 7565 6e63 653a 2049 6620 5472  _sequence: If Tr
-0001a730: 7565 2c20 616c 6c20 7365 6e74 656e 6365  ue, all sentence
-0001a740: 7320 6f66 2061 2064 6f63 756d 656e 7420  s of a document 
-0001a750: 6172 6520 7265 6164 2069 6e74 6f20 6120  are read into a 
-0001a760: 7369 6e67 6c65 2053 656e 7465 6e63 6520  single Sentence 
-0001a770: 6f62 6a65 6374 0a20 2020 2020 2020 2022  object.        "
-0001a780: 2222 0a20 2020 2020 2020 2062 6173 655f  "".        base_
-0001a790: 7061 7468 203d 206b 6f6c 6962 7269 2e63  path = kolibri.c
-0001a7a0: 6163 6865 5f72 6f6f 7420 2f20 2264 6174  ache_root / "dat
-0001a7b0: 6173 6574 7322 2069 6620 6e6f 7420 6261  asets" if not ba
-0001a7c0: 7365 5f70 6174 6820 656c 7365 2050 6174  se_path else Pat
-0001a7d0: 6828 6261 7365 5f70 6174 6829 0a0a 2020  h(base_path)..  
-0001a7e0: 2020 2020 2020 2320 636f 6c75 6d6e 2066        # column f
-0001a7f0: 6f72 6d61 740a 2020 2020 2020 2020 636f  ormat.        co
-0001a800: 6c75 6d6e 7320 3d20 7b30 3a20 2274 6578  lumns = {0: "tex
-0001a810: 7422 2c20 313a 2022 6e65 7222 7d0a 0a20  t", 1: "ner"}.. 
-0001a820: 2020 2020 2020 2023 2074 6869 7320 6461         # this da
-0001a830: 7461 7365 7420 6e61 6d65 0a20 2020 2020  taset name.     
-0001a840: 2020 2064 6174 6173 6574 5f6e 616d 6520     dataset_name 
-0001a850: 3d20 7365 6c66 2e5f 5f63 6c61 7373 5f5f  = self.__class__
-0001a860: 2e5f 5f6e 616d 655f 5f2e 6c6f 7765 7228  .__name__.lower(
-0001a870: 290a 0a20 2020 2020 2020 2064 6174 615f  )..        data_
-0001a880: 666f 6c64 6572 203d 2062 6173 655f 7061  folder = base_pa
-0001a890: 7468 202f 2064 6174 6173 6574 5f6e 616d  th / dataset_nam
-0001a8a0: 650a 0a20 2020 2020 2020 2023 2064 6f77  e..        # dow
-0001a8b0: 6e6c 6f61 6420 616e 6420 7061 7273 6520  nload and parse 
-0001a8c0: 6461 7461 2069 6620 6e65 6365 7373 6172  data if necessar
-0001a8d0: 790a 2020 2020 2020 2020 6765 726d 616e  y.        german
-0001a8e0: 5f70 6f6c 6974 6963 735f 7061 7468 203d  _politics_path =
-0001a8f0: 2022 6874 7470 733a 2f2f 7777 772e 7468   "https://www.th
-0001a900: 6f6d 6173 2d7a 6173 7472 6f77 2e64 652f  omas-zastrow.de/
-0001a910: 6e6c 702f 6e65 6d67 705f 7472 6169 6e69  nlp/nemgp_traini
-0001a920: 6e67 6461 7461 5f30 312e 7478 742e 7a69  ngdata_01.txt.zi
-0001a930: 7022 0a20 2020 2020 2020 2063 6f72 7075  p".        corpu
-0001a940: 735f 6669 6c65 5f6e 616d 6520 3d20 226e  s_file_name = "n
-0001a950: 656d 6770 5f74 7261 696e 696e 6764 6174  emgp_trainingdat
-0001a960: 615f 3031 2e74 7874 220a 2020 2020 2020  a_01.txt".      
-0001a970: 2020 7061 7273 6564 5f64 6174 6173 6574    parsed_dataset
-0001a980: 203d 2064 6174 615f 666f 6c64 6572 202f   = data_folder /
-0001a990: 2022 7261 7722 202f 2063 6f72 7075 735f   "raw" / corpus_
-0001a9a0: 6669 6c65 5f6e 616d 650a 0a20 2020 2020  file_name..     
-0001a9b0: 2020 2069 6620 6e6f 7420 7061 7273 6564     if not parsed
-0001a9c0: 5f64 6174 6173 6574 2e65 7869 7374 7328  _dataset.exists(
-0001a9d0: 293a 0a20 2020 2020 2020 2020 2020 2067  ):.            g
-0001a9e0: 6572 6d61 6e5f 706f 6c69 7469 6373 5f7a  erman_politics_z
-0001a9f0: 6970 203d 2063 6163 6865 645f 7061 7468  ip = cached_path
-0001aa00: 2866 227b 6765 726d 616e 5f70 6f6c 6974  (f"{german_polit
-0001aa10: 6963 735f 7061 7468 7d22 2c20 5061 7468  ics_path}", Path
-0001aa20: 2822 6461 7461 7365 7473 2229 202f 2064  ("datasets") / d
-0001aa30: 6174 6173 6574 5f6e 616d 6520 2f20 2272  ataset_name / "r
-0001aa40: 6177 2229 0a20 2020 2020 2020 2020 2020  aw").           
-0001aa50: 2075 6e70 6163 6b5f 6669 6c65 2867 6572   unpack_file(ger
-0001aa60: 6d61 6e5f 706f 6c69 7469 6373 5f7a 6970  man_politics_zip
-0001aa70: 2c20 6461 7461 5f66 6f6c 6465 7220 2f20  , data_folder / 
-0001aa80: 2272 6177 222c 2022 7a69 7022 2c20 4661  "raw", "zip", Fa
-0001aa90: 6c73 6529 0a20 2020 2020 2020 2020 2020  lse).           
-0001aaa0: 2073 656c 662e 5f63 6f6e 7665 7274 5f74   self._convert_t
-0001aab0: 6f5f 636f 6c75 6d6e 5f63 6f72 7075 7328  o_column_corpus(
-0001aac0: 7061 7273 6564 5f64 6174 6173 6574 290a  parsed_dataset).
-0001aad0: 0a20 2020 2020 2020 2023 2063 7265 6174  .        # creat
-0001aae0: 6520 7472 6169 6e20 7465 7374 2064 6576  e train test dev
-0001aaf0: 2069 6620 6e6f 7420 6578 6973 740a 2020   if not exist.  
-0001ab00: 2020 2020 2020 7472 6169 6e5f 6461 7461        train_data
-0001ab10: 7365 7420 3d20 6461 7461 5f66 6f6c 6465  set = data_folde
-0001ab20: 7220 2f20 2274 7261 696e 2e74 7874 220a  r / "train.txt".
-0001ab30: 2020 2020 2020 2020 6966 206e 6f74 2074          if not t
-0001ab40: 7261 696e 5f64 6174 6173 6574 2e65 7869  rain_dataset.exi
-0001ab50: 7374 7328 293a 0a20 2020 2020 2020 2020  sts():.         
-0001ab60: 2020 2073 656c 662e 5f63 7265 6174 655f     self._create_
-0001ab70: 6461 7461 7365 7473 2870 6172 7365 645f  datasets(parsed_
-0001ab80: 6461 7461 7365 742c 2064 6174 615f 666f  dataset, data_fo
-0001ab90: 6c64 6572 290a 0a20 2020 2020 2020 2073  lder)..        s
-0001aba0: 7570 6572 2829 2e5f 5f69 6e69 745f 5f28  uper().__init__(
-0001abb0: 0a20 2020 2020 2020 2020 2020 2064 6174  .            dat
-0001abc0: 615f 666f 6c64 6572 2c0a 2020 2020 2020  a_folder,.      
-0001abd0: 2020 2020 2020 636f 6c75 6d6e 732c 0a20        columns,. 
-0001abe0: 2020 2020 2020 2020 2020 2063 6f6c 756d             colum
-0001abf0: 6e5f 6465 6c69 6d69 7465 723d 636f 6c75  n_delimiter=colu
-0001ac00: 6d6e 5f64 656c 696d 6974 6572 2c0a 2020  mn_delimiter,.  
-0001ac10: 2020 2020 2020 2020 2020 7472 6169 6e5f            train_
-0001ac20: 6669 6c65 3d22 7472 6169 6e2e 7478 7422  file="train.txt"
-0001ac30: 2c0a 2020 2020 2020 2020 2020 2020 6465  ,.            de
-0001ac40: 765f 6669 6c65 3d22 6465 762e 7478 7422  v_file="dev.txt"
-0001ac50: 2c0a 2020 2020 2020 2020 2020 2020 7465  ,.            te
-0001ac60: 7374 5f66 696c 653d 2274 6573 742e 7478  st_file="test.tx
-0001ac70: 7422 2c0a 2020 2020 2020 2020 2020 2020  t",.            
-0001ac80: 656e 636f 6469 6e67 3d22 7574 662d 3822  encoding="utf-8"
-0001ac90: 2c0a 2020 2020 2020 2020 2020 2020 696e  ,.            in
-0001aca0: 5f6d 656d 6f72 793d 696e 5f6d 656d 6f72  _memory=in_memor
-0001acb0: 792c 0a20 2020 2020 2020 2020 2020 202a  y,.            *
-0001acc0: 2a63 6f72 7075 7361 7267 732c 0a20 2020  *corpusargs,.   
-0001acd0: 2020 2020 2029 0a0a 2020 2020 6465 6620       )..    def 
-0001ace0: 5f63 6f6e 7665 7274 5f74 6f5f 636f 6c75  _convert_to_colu
-0001acf0: 6d6e 5f63 6f72 7075 7328 7365 6c66 2c20  mn_corpus(self, 
-0001ad00: 6461 7461 5f66 696c 653a 2055 6e69 6f6e  data_file: Union
-0001ad10: 5b73 7472 2c20 5061 7468 5d29 3a0a 2020  [str, Path]):.  
-0001ad20: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
-0001ad30: 6461 7461 5f66 696c 652c 2065 6e63 6f64  data_file, encod
-0001ad40: 696e 673d 2275 7466 2d38 2229 2061 7320  ing="utf-8") as 
-0001ad50: 663a 0a20 2020 2020 2020 2020 2020 206c  f:.            l
-0001ad60: 696e 6573 203d 2066 2e72 6561 646c 696e  ines = f.readlin
-0001ad70: 6573 2829 0a20 2020 2020 2020 2077 6974  es().        wit
-0001ad80: 6820 6f70 656e 2864 6174 615f 6669 6c65  h open(data_file
-0001ad90: 2c20 2277 222c 2065 6e63 6f64 696e 673d  , "w", encoding=
-0001ada0: 2275 7466 2d38 2229 2061 7320 663a 0a20  "utf-8") as f:. 
-0001adb0: 2020 2020 2020 2020 2020 2074 6167 5f62             tag_b
-0001adc0: 6f6f 6c20 3d20 4661 6c73 650a 2020 2020  ool = False.    
-0001add0: 2020 2020 2020 2020 6e65 775f 7365 6e74          new_sent
-0001ade0: 656e 6365 203d 2054 7275 650a 2020 2020  ence = True.    
-0001adf0: 2020 2020 2020 2020 666f 7220 6c69 6e65          for line
-0001ae00: 2069 6e20 6c69 6e65 733a 0a20 2020 2020   in lines:.     
-0001ae10: 2020 2020 2020 2020 2020 206c 696e 655f             line_
-0001ae20: 7370 6c69 7473 203d 2072 652e 7375 6228  splits = re.sub(
-0001ae30: 7222 5c73 7b32 2c7d 222c 2022 2022 2c20  r"\s{2,}", " ", 
-0001ae40: 6c69 6e65 292e 7374 7269 7028 292e 7370  line).strip().sp
-0001ae50: 6c69 7428 2220 2229 0a20 2020 2020 2020  lit(" ").       
-0001ae60: 2020 2020 2020 2020 2066 6f72 2073 7562           for sub
-0001ae70: 7374 7220 696e 206c 696e 655f 7370 6c69  str in line_spli
-0001ae80: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
-0001ae90: 2020 2020 2020 2020 6966 2073 7562 7374          if subst
-0001aea0: 7220 3d3d 2022 2e22 3a0a 2020 2020 2020  r == ".":.      
-0001aeb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aec0: 2020 662e 7772 6974 6528 225c 6e22 290a    f.write("\n").
-0001aed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aee0: 2020 2020 2020 2020 6e65 775f 7365 6e74          new_sent
-0001aef0: 656e 6365 203d 2054 7275 650a 2020 2020  ence = True.    
-0001af00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001af10: 656c 6966 2022 3c53 5441 5254 3a22 2069  elif "<START:" i
-0001af20: 6e20 7375 6273 7472 3a0a 2020 2020 2020  n substr:.      
-0001af30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001af40: 2020 7461 675f 626f 6f6c 203d 2054 7275    tag_bool = Tru
-0001af50: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-0001af60: 2020 2020 2020 2020 2020 7461 6720 3d20            tag = 
-0001af70: 7375 6273 7472 2e73 7472 6970 2822 3c53  substr.strip("<S
-0001af80: 5441 5254 3a22 292e 7374 7269 7028 223e  TART:").strip(">
-0001af90: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
-0001afa0: 2020 2020 2020 2020 2020 2069 6620 226c             if "l
-0001afb0: 6f63 2220 696e 2074 6167 3a0a 2020 2020  oc" in tag:.    
-0001afc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001afd0: 2020 2020 2020 2020 7461 675f 494f 4220          tag_IOB 
-0001afe0: 3d20 222d 4c4f 4322 0a20 2020 2020 2020  = "-LOC".       
-0001aff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b000: 2065 6c69 6620 2270 6572 2220 696e 2074   elif "per" in t
-0001b010: 6167 3a0a 2020 2020 2020 2020 2020 2020  ag:.            
-0001b020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b030: 7461 675f 494f 4220 3d20 222d 5045 5222  tag_IOB = "-PER"
-0001b040: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b050: 2020 2020 2020 2020 2065 6c69 6620 226f           elif "o
-0001b060: 7267 2220 696e 2074 6167 3a0a 2020 2020  rg" in tag:.    
-0001b070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b080: 2020 2020 2020 2020 7461 675f 494f 4220          tag_IOB 
-0001b090: 3d20 222d 4f52 4722 0a20 2020 2020 2020  = "-ORG".       
-0001b0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b0b0: 2065 6c69 6620 226d 6973 6322 2069 6e20   elif "misc" in 
-0001b0c0: 7461 673a 0a20 2020 2020 2020 2020 2020  tag:.           
-0001b0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b0e0: 2074 6167 5f49 4f42 203d 2022 2d4d 4953   tag_IOB = "-MIS
-0001b0f0: 4322 0a20 2020 2020 2020 2020 2020 2020  C".             
-0001b100: 2020 2020 2020 2065 6c69 6620 223c 454e         elif "<EN
-0001b110: 443e 2220 696e 2073 7562 7374 723a 0a20  D>" in substr:. 
-0001b120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b130: 2020 2020 2020 2074 6167 5f62 6f6f 6c20         tag_bool 
-0001b140: 3d20 4661 6c73 650a 2020 2020 2020 2020  = False.        
-0001b150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b160: 6e65 775f 7365 6e74 656e 6365 203d 2054  new_sentence = T
-0001b170: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
-0001b180: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0001b190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b1a0: 2020 2020 2020 6966 2074 6167 5f62 6f6f        if tag_boo
-0001b1b0: 6c3a 0a20 2020 2020 2020 2020 2020 2020  l:.             
-0001b1c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0001b1d0: 6620 6e65 775f 7365 6e74 656e 6365 2069  f new_sentence i
-0001b1e0: 7320 5472 7565 3a0a 2020 2020 2020 2020  s True:.        
-0001b1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b200: 2020 2020 2020 2020 7374 6172 7420 3d20          start = 
-0001b210: 2242 220a 2020 2020 2020 2020 2020 2020  "B".            
-0001b220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b230: 2020 2020 6e65 775f 7365 6e74 656e 6365      new_sentence
-0001b240: 203d 2046 616c 7365 0a20 2020 2020 2020   = False.       
-0001b250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b260: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0001b270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b280: 2020 2020 2020 2020 2020 2073 7461 7274             start
-0001b290: 203d 2022 4922 0a20 2020 2020 2020 2020   = "I".         
-0001b2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b2b0: 2020 2066 2e77 7269 7465 2873 7562 7374     f.write(subst
-0001b2c0: 722e 7374 7269 7028 2220 2229 202b 2022  r.strip(" ") + "
-0001b2d0: 2022 202b 2073 7461 7274 202b 2074 6167   " + start + tag
-0001b2e0: 5f49 4f42 202b 2022 5c6e 2229 0a20 2020  _IOB + "\n").   
-0001b2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b300: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0001b310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b320: 2020 2020 2020 2066 2e77 7269 7465 2873         f.write(s
-0001b330: 7562 7374 722e 7374 7269 7028 2220 2229  ubstr.strip(" ")
-0001b340: 202b 2022 2022 202b 2022 4f22 202b 2022   + " " + "O" + "
-0001b350: 5c6e 2229 0a0a 2020 2020 6465 6620 5f63  \n")..    def _c
-0001b360: 7265 6174 655f 6461 7461 7365 7473 2873  reate_datasets(s
-0001b370: 656c 662c 2064 6174 615f 6669 6c65 3a20  elf, data_file: 
-0001b380: 556e 696f 6e5b 7374 722c 2050 6174 685d  Union[str, Path]
-0001b390: 2c20 6461 7461 5f66 6f6c 6465 723a 2050  , data_folder: P
-0001b3a0: 6174 6829 3a0a 2020 2020 2020 2020 7769  ath):.        wi
-0001b3b0: 7468 206f 7065 6e28 6461 7461 5f66 696c  th open(data_fil
-0001b3c0: 6529 2061 7320 6669 6c65 3a0a 2020 2020  e) as file:.    
-0001b3d0: 2020 2020 2020 2020 6e75 6d5f 6c69 6e65          num_line
-0001b3e0: 7320 3d20 6c65 6e28 6669 6c65 2e72 6561  s = len(file.rea
-0001b3f0: 646c 696e 6573 2829 290a 2020 2020 2020  dlines()).      
-0001b400: 2020 2020 2020 6669 6c65 2e73 6565 6b28        file.seek(
-0001b410: 3029 0a0a 2020 2020 2020 2020 2020 2020  0)..            
-0001b420: 7472 6169 6e5f 6c65 6e20 3d20 726f 756e  train_len = roun
-0001b430: 6428 6e75 6d5f 6c69 6e65 7320 2a20 302e  d(num_lines * 0.
-0001b440: 3829 0a20 2020 2020 2020 2020 2020 2074  8).            t
-0001b450: 6573 745f 6c65 6e20 3d20 726f 756e 6428  est_len = round(
-0001b460: 6e75 6d5f 6c69 6e65 7320 2a20 302e 3129  num_lines * 0.1)
-0001b470: 0a0a 2020 2020 2020 2020 2020 2020 7769  ..            wi
-0001b480: 7468 2028 6461 7461 5f66 6f6c 6465 7220  th (data_folder 
-0001b490: 2f20 2274 7261 696e 2e74 7874 2229 2e6f  / "train.txt").o
-0001b4a0: 7065 6e28 2277 222c 2065 6e63 6f64 696e  pen("w", encodin
-0001b4b0: 673d 2275 7466 2d38 2229 2061 7320 7472  g="utf-8") as tr
-0001b4c0: 6169 6e2c 2028 6461 7461 5f66 6f6c 6465  ain, (data_folde
-0001b4d0: 7220 2f20 2274 6573 742e 7478 7422 292e  r / "test.txt").
-0001b4e0: 6f70 656e 280a 2020 2020 2020 2020 2020  open(.          
-0001b4f0: 2020 2020 2020 2277 222c 2065 6e63 6f64        "w", encod
-0001b500: 696e 673d 2275 7466 2d38 220a 2020 2020  ing="utf-8".    
-0001b510: 2020 2020 2020 2020 2920 6173 2074 6573          ) as tes
-0001b520: 742c 2028 6461 7461 5f66 6f6c 6465 7220  t, (data_folder 
-0001b530: 2f20 2264 6576 2e74 7874 2229 2e6f 7065  / "dev.txt").ope
-0001b540: 6e28 2277 222c 2065 6e63 6f64 696e 673d  n("w", encoding=
-0001b550: 2275 7466 2d38 2229 2061 7320 6465 763a  "utf-8") as dev:
-0001b560: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b570: 2066 6f72 206b 2c20 6c69 6e65 2069 6e20   for k, line in 
-0001b580: 656e 756d 6572 6174 6528 6669 6c65 2e72  enumerate(file.r
-0001b590: 6561 646c 696e 6573 2829 2c20 7374 6172  eadlines(), star
-0001b5a0: 743d 3129 3a0a 2020 2020 2020 2020 2020  t=1):.          
-0001b5b0: 2020 2020 2020 2020 2020 6966 206b 203c            if k <
-0001b5c0: 3d20 7472 6169 6e5f 6c65 6e3a 0a20 2020  = train_len:.   
-0001b5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b5e0: 2020 2020 2074 7261 696e 2e77 7269 7465       train.write
-0001b5f0: 286c 696e 6529 0a20 2020 2020 2020 2020  (line).         
-0001b600: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-0001b610: 7472 6169 6e5f 6c65 6e20 3c20 6b20 3c3d  train_len < k <=
-0001b620: 2028 7472 6169 6e5f 6c65 6e20 2b20 7465   (train_len + te
-0001b630: 7374 5f6c 656e 293a 0a20 2020 2020 2020  st_len):.       
-0001b640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b650: 2074 6573 742e 7772 6974 6528 6c69 6e65   test.write(line
-0001b660: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001b670: 2020 2020 2020 656c 6966 2028 7472 6169        elif (trai
-0001b680: 6e5f 6c65 6e20 2b20 7465 7374 5f6c 656e  n_len + test_len
-0001b690: 2920 3c20 6b20 3c3d 206e 756d 5f6c 696e  ) < k <= num_lin
-0001b6a0: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
-0001b6b0: 2020 2020 2020 2020 2020 2020 6465 762e              dev.
-0001b6c0: 7772 6974 6528 6c69 6e65 290a 0a0a 636c  write(line)...cl
-0001b6d0: 6173 7320 4e45 525f 4855 4e47 4152 4941  ass NER_HUNGARIA
-0001b6e0: 4e28 436f 6c75 6d6e 436f 7270 7573 293a  N(ColumnCorpus):
-0001b6f0: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
-0001b700: 5f28 0a20 2020 2020 2020 2073 656c 662c  _(.        self,
-0001b710: 0a20 2020 2020 2020 2062 6173 655f 7061  .        base_pa
-0001b720: 7468 3a20 4f70 7469 6f6e 616c 5b55 6e69  th: Optional[Uni
-0001b730: 6f6e 5b73 7472 2c20 5061 7468 5d5d 203d  on[str, Path]] =
-0001b740: 204e 6f6e 652c 0a20 2020 2020 2020 2069   None,.        i
-0001b750: 6e5f 6d65 6d6f 7279 3a20 626f 6f6c 203d  n_memory: bool =
-0001b760: 2054 7275 652c 0a20 2020 2020 2020 2064   True,.        d
-0001b770: 6f63 756d 656e 745f 6173 5f73 6571 7565  ocument_as_seque
-0001b780: 6e63 653a 2062 6f6f 6c20 3d20 4661 6c73  nce: bool = Fals
-0001b790: 652c 0a20 2020 2020 2020 202a 2a63 6f72  e,.        **cor
-0001b7a0: 7075 7361 7267 732c 0a20 2020 2029 202d  pusargs,.    ) -
-0001b7b0: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
-0001b7c0: 2222 2249 6e69 7469 616c 697a 6520 7468  """Initialize th
-0001b7d0: 6520 4e45 5220 4275 7369 6e65 7373 2063  e NER Business c
-0001b7e0: 6f72 7075 7320 666f 7220 4875 6e67 6172  orpus for Hungar
-0001b7f0: 6961 6e2e 0a0a 2020 2020 2020 2020 5468  ian...        Th
-0001b800: 6520 6669 7273 7420 7469 6d65 2079 6f75  e first time you
-0001b810: 2063 616c 6c20 7468 6973 2063 6f6e 7374   call this const
-0001b820: 7275 6374 6f72 2069 7420 7769 6c6c 2061  ructor it will a
-0001b830: 7574 6f6d 6174 6963 616c 6c79 2064 6f77  utomatically dow
-0001b840: 6e6c 6f61 6420 7468 6520 6461 7461 7365  nload the datase
-0001b850: 742e 0a20 2020 2020 2020 203a 7061 7261  t..        :para
-0001b860: 6d20 6261 7365 5f70 6174 683a 2044 6566  m base_path: Def
-0001b870: 6175 6c74 2069 7320 4e6f 6e65 2c20 6d65  ault is None, me
-0001b880: 616e 696e 6720 7468 6174 2063 6f72 7075  aning that corpu
-0001b890: 7320 6765 7473 2061 7574 6f2d 646f 776e  s gets auto-down
-0001b8a0: 6c6f 6164 6564 2061 6e64 206c 6f61 6465  loaded and loade
-0001b8b0: 642e 2059 6f75 2063 616e 206f 7665 7272  d. You can overr
-0001b8c0: 6964 6520 7468 6973 0a20 2020 2020 2020  ide this.       
-0001b8d0: 2074 6f20 706f 696e 7420 746f 2061 2064   to point to a d
-0001b8e0: 6966 6665 7265 6e74 2066 6f6c 6465 7220  ifferent folder 
-0001b8f0: 6275 7420 7479 7069 6361 6c6c 7920 7468  but typically th
-0001b900: 6973 2073 686f 756c 6420 6e6f 7420 6265  is should not be
-0001b910: 206e 6563 6573 7361 7279 2e0a 2020 2020   necessary..    
-0001b920: 2020 2020 504f 5320 7461 6773 2069 6e73      POS tags ins
-0001b930: 7465 6164 0a20 2020 2020 2020 203a 7061  tead.        :pa
-0001b940: 7261 6d20 696e 5f6d 656d 6f72 793a 2049  ram in_memory: I
-0001b950: 6620 5472 7565 2c20 6b65 6570 7320 6461  f True, keeps da
-0001b960: 7461 7365 7420 696e 206d 656d 6f72 7920  taset in memory 
-0001b970: 6769 7669 6e67 2073 7065 6564 7570 7320  giving speedups 
-0001b980: 696e 2074 7261 696e 696e 672e 0a20 2020  in training..   
-0001b990: 2020 2020 203a 7061 7261 6d20 646f 6375       :param docu
-0001b9a0: 6d65 6e74 5f61 735f 7365 7175 656e 6365  ment_as_sequence
-0001b9b0: 3a20 4966 2054 7275 652c 2061 6c6c 2073  : If True, all s
-0001b9c0: 656e 7465 6e63 6573 206f 6620 6120 646f  entences of a do
-0001b9d0: 6375 6d65 6e74 2061 7265 2072 6561 6420  cument are read 
-0001b9e0: 696e 746f 2061 2073 696e 676c 6520 5365  into a single Se
-0001b9f0: 6e74 656e 6365 206f 626a 6563 740a 2020  ntence object.  
-0001ba00: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0001ba10: 2020 6261 7365 5f70 6174 6820 3d20 6b6f    base_path = ko
-0001ba20: 6c69 6272 692e 6361 6368 655f 726f 6f74  libri.cache_root
-0001ba30: 202f 2022 6461 7461 7365 7473 2220 6966   / "datasets" if
-0001ba40: 206e 6f74 2062 6173 655f 7061 7468 2065   not base_path e
-0001ba50: 6c73 6520 5061 7468 2862 6173 655f 7061  lse Path(base_pa
-0001ba60: 7468 290a 0a20 2020 2020 2020 2023 2063  th)..        # c
-0001ba70: 6f6c 756d 6e20 666f 726d 6174 0a20 2020  olumn format.   
-0001ba80: 2020 2020 2063 6f6c 756d 6e73 203d 207b       columns = {
-0001ba90: 303a 2022 7465 7874 222c 2031 3a20 226e  0: "text", 1: "n
-0001baa0: 6572 227d 0a0a 2020 2020 2020 2020 2320  er"}..        # 
-0001bab0: 7468 6973 2064 6174 6173 6574 206e 616d  this dataset nam
-0001bac0: 650a 2020 2020 2020 2020 6461 7461 7365  e.        datase
-0001bad0: 745f 6e61 6d65 203d 2073 656c 662e 5f5f  t_name = self.__
-0001bae0: 636c 6173 735f 5f2e 5f5f 6e61 6d65 5f5f  class__.__name__
-0001baf0: 2e6c 6f77 6572 2829 0a0a 2020 2020 2020  .lower()..      
-0001bb00: 2020 6461 7461 5f66 6f6c 6465 7220 3d20    data_folder = 
-0001bb10: 6261 7365 5f70 6174 6820 2f20 6461 7461  base_path / data
-0001bb20: 7365 745f 6e61 6d65 0a0a 2020 2020 2020  set_name..      
-0001bb30: 2020 2320 4966 2074 6865 2065 7874 7261    # If the extra
-0001bb40: 6374 6564 2063 6f72 7075 7320 6669 6c65  cted corpus file
-0001bb50: 2069 7320 6e6f 7420 7965 7420 7072 6573   is not yet pres
-0001bb60: 656e 7420 696e 2064 6972 0a20 2020 2020  ent in dir.     
-0001bb70: 2020 2069 6620 6e6f 7420 6f73 2e70 6174     if not os.pat
-0001bb80: 682e 6973 6669 6c65 2864 6174 615f 666f  h.isfile(data_fo
-0001bb90: 6c64 6572 202f 2022 6875 6e5f 6e65 725f  lder / "hun_ner_
-0001bba0: 636f 7270 7573 2e74 7874 2229 3a0a 2020  corpus.txt"):.  
-0001bbb0: 2020 2020 2020 2020 2020 2320 646f 776e            # down
-0001bbc0: 6c6f 6164 207a 6970 2069 6620 6e65 6365  load zip if nece
-0001bbd0: 7373 6172 790a 2020 2020 2020 2020 2020  ssary.          
-0001bbe0: 2020 6875 6e5f 6e65 725f 7061 7468 203d    hun_ner_path =
-0001bbf0: 2022 6874 7470 733a 2f2f 7267 6169 2e73   "https://rgai.s
-0001bc00: 6564 2e68 752f 7369 7465 732f 7267 6169  ed.hu/sites/rgai
-0001bc10: 2e73 6564 2e68 752f 6669 6c65 732f 6275  .sed.hu/files/bu
-0001bc20: 7369 6e65 7373 5f4e 4552 2e7a 6970 220a  siness_NER.zip".
-0001bc30: 2020 2020 2020 2020 2020 2020 7061 7468              path
-0001bc40: 5f74 6f5f 7a69 7070 6564 5f63 6f72 7075  _to_zipped_corpu
-0001bc50: 7320 3d20 6361 6368 6564 5f70 6174 6828  s = cached_path(
-0001bc60: 6875 6e5f 6e65 725f 7061 7468 2c20 5061  hun_ner_path, Pa
-0001bc70: 7468 2822 6461 7461 7365 7473 2229 202f  th("datasets") /
-0001bc80: 2064 6174 6173 6574 5f6e 616d 6529 0a20   dataset_name). 
-0001bc90: 2020 2020 2020 2020 2020 2023 2065 7874             # ext
-0001bca0: 7261 6374 6564 2063 6f72 7075 7320 6973  racted corpus is
-0001bcb0: 206e 6f74 2070 7265 7365 6e74 202c 2073   not present , s
-0001bcc0: 6f20 756e 7061 636b 696e 6720 6974 2e0a  o unpacking it..
-0001bcd0: 2020 2020 2020 2020 2020 2020 756e 7061              unpa
-0001bce0: 636b 5f66 696c 6528 7061 7468 5f74 6f5f  ck_file(path_to_
-0001bcf0: 7a69 7070 6564 5f63 6f72 7075 732c 2064  zipped_corpus, d
-0001bd00: 6174 615f 666f 6c64 6572 2c20 6d6f 6465  ata_folder, mode
-0001bd10: 3d22 7a69 7022 2c20 6b65 6570 3d54 7275  ="zip", keep=Tru
-0001bd20: 6529 0a0a 2020 2020 2020 2020 7375 7065  e)..        supe
-0001bd30: 7228 292e 5f5f 696e 6974 5f5f 280a 2020  r().__init__(.  
-0001bd40: 2020 2020 2020 2020 2020 6461 7461 5f66            data_f
-0001bd50: 6f6c 6465 722c 0a20 2020 2020 2020 2020  older,.         
-0001bd60: 2020 2063 6f6c 756d 6e73 2c0a 2020 2020     columns,.    
-0001bd70: 2020 2020 2020 2020 7472 6169 6e5f 6669          train_fi
-0001bd80: 6c65 3d22 6875 6e5f 6e65 725f 636f 7270  le="hun_ner_corp
-0001bd90: 7573 2e74 7874 222c 0a20 2020 2020 2020  us.txt",.       
-0001bda0: 2020 2020 2063 6f6c 756d 6e5f 6465 6c69       column_deli
-0001bdb0: 6d69 7465 723d 225c 7422 2c0a 2020 2020  miter="\t",.    
-0001bdc0: 2020 2020 2020 2020 656e 636f 6469 6e67          encoding
-0001bdd0: 3d22 6c61 7469 6e2d 3122 2c0a 2020 2020  ="latin-1",.    
-0001bde0: 2020 2020 2020 2020 696e 5f6d 656d 6f72          in_memor
-0001bdf0: 793d 696e 5f6d 656d 6f72 792c 0a20 2020  y=in_memory,.   
-0001be00: 2020 2020 2020 2020 206c 6162 656c 5f6e           label_n
-0001be10: 616d 655f 6d61 703d 7b22 3022 3a20 224f  ame_map={"0": "O
-0001be20: 227d 2c0a 2020 2020 2020 2020 2020 2020  "},.            
-0001be30: 646f 6375 6d65 6e74 5f73 6570 6172 6174  document_separat
-0001be40: 6f72 5f74 6f6b 656e 3d4e 6f6e 6520 6966  or_token=None if
-0001be50: 206e 6f74 2064 6f63 756d 656e 745f 6173   not document_as
-0001be60: 5f73 6571 7565 6e63 6520 656c 7365 2022  _sequence else "
-0001be70: 2d44 4f43 5354 4152 542d 222c 0a20 2020  -DOCSTART-",.   
-0001be80: 2020 2020 2020 2020 202a 2a63 6f72 7075           **corpu
-0001be90: 7361 7267 732c 0a20 2020 2020 2020 2029  sargs,.        )
-0001bea0: 0a0a 0a63 6c61 7373 204e 4552 5f49 4345  ...class NER_ICE
-0001beb0: 4c41 4e44 4943 2843 6f6c 756d 6e43 6f72  LANDIC(ColumnCor
-0001bec0: 7075 7329 3a0a 2020 2020 6465 6620 5f5f  pus):.    def __
-0001bed0: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
-0001bee0: 7365 6c66 2c0a 2020 2020 2020 2020 6261  self,.        ba
-0001bef0: 7365 5f70 6174 683a 204f 7074 696f 6e61  se_path: Optiona
-0001bf00: 6c5b 556e 696f 6e5b 7374 722c 2050 6174  l[Union[str, Pat
-0001bf10: 685d 5d20 3d20 4e6f 6e65 2c0a 2020 2020  h]] = None,.    
-0001bf20: 2020 2020 696e 5f6d 656d 6f72 793a 2062      in_memory: b
-0001bf30: 6f6f 6c20 3d20 5472 7565 2c0a 2020 2020  ool = True,.    
-0001bf40: 2020 2020 2a2a 636f 7270 7573 6172 6773      **corpusargs
-0001bf50: 2c0a 2020 2020 2920 2d3e 204e 6f6e 653a  ,.    ) -> None:
-0001bf60: 0a20 2020 2020 2020 2022 2222 496e 6974  .        """Init
-0001bf70: 6961 6c69 7a65 2074 6865 2049 4345 4c41  ialize the ICELA
-0001bf80: 4e44 4943 5f4e 4552 2063 6f72 7075 732e  NDIC_NER corpus.
-0001bf90: 0a0a 2020 2020 2020 2020 5468 6520 6669  ..        The fi
-0001bfa0: 7273 7420 7469 6d65 2079 6f75 2063 616c  rst time you cal
-0001bfb0: 6c20 7468 6973 2063 6f6e 7374 7275 6374  l this construct
-0001bfc0: 6f72 2069 7420 7769 6c6c 2061 7574 6f6d  or it will autom
-0001bfd0: 6174 6963 616c 6c79 2064 6f77 6e6c 6f61  atically downloa
-0001bfe0: 6420 7468 6520 6461 7461 7365 742e 0a20  d the dataset.. 
-0001bff0: 2020 2020 2020 203a 7061 7261 6d20 6261         :param ba
-0001c000: 7365 5f70 6174 683a 2044 6566 6175 6c74  se_path: Default
-0001c010: 2069 7320 4e6f 6e65 2c20 6d65 616e 696e   is None, meanin
-0001c020: 6720 7468 6174 2063 6f72 7075 7320 6765  g that corpus ge
-0001c030: 7473 2061 7574 6f2d 646f 776e 6c6f 6164  ts auto-download
-0001c040: 6564 2061 6e64 206c 6f61 6465 642e 2059  ed and loaded. Y
-0001c050: 6f75 2063 616e 206f 7665 7272 6964 6520  ou can override 
-0001c060: 7468 6973 0a20 2020 2020 2020 2074 6f20  this.        to 
-0001c070: 706f 696e 7420 746f 2061 2064 6966 6665  point to a diffe
-0001c080: 7265 6e74 2066 6f6c 6465 7220 6275 7420  rent folder but 
-0001c090: 7479 7069 6361 6c6c 7920 7468 6973 2073  typically this s
-0001c0a0: 686f 756c 6420 6e6f 7420 6265 206e 6563  hould not be nec
-0001c0b0: 6573 7361 7279 2e0a 2020 2020 2020 2020  essary..        
-0001c0c0: 504f 5320 7461 6773 2069 6e73 7465 6164  POS tags instead
-0001c0d0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0001c0e0: 696e 5f6d 656d 6f72 793a 2049 6620 5472  in_memory: If Tr
-0001c0f0: 7565 2c20 6b65 6570 7320 6461 7461 7365  ue, keeps datase
-0001c100: 7420 696e 206d 656d 6f72 7920 6769 7669  t in memory givi
-0001c110: 6e67 2073 7065 6564 7570 7320 696e 2074  ng speedups in t
-0001c120: 7261 696e 696e 672e 0a20 2020 2020 2020  raining..       
-0001c130: 203a 7061 7261 6d20 646f 6375 6d65 6e74   :param document
-0001c140: 5f61 735f 7365 7175 656e 6365 3a20 4966  _as_sequence: If
-0001c150: 2054 7275 652c 2061 6c6c 2073 656e 7465   True, all sente
-0001c160: 6e63 6573 206f 6620 6120 646f 6375 6d65  nces of a docume
-0001c170: 6e74 2061 7265 2072 6561 6420 696e 746f  nt are read into
-0001c180: 2061 2073 696e 676c 6520 5365 6e74 656e   a single Senten
-0001c190: 6365 206f 626a 6563 740a 2020 2020 2020  ce object.      
-0001c1a0: 2020 2222 220a 2020 2020 2020 2020 6261    """.        ba
-0001c1b0: 7365 5f70 6174 6820 3d20 6b6f 6c69 6272  se_path = kolibr
-0001c1c0: 692e 6361 6368 655f 726f 6f74 202f 2022  i.cache_root / "
-0001c1d0: 6461 7461 7365 7473 2220 6966 206e 6f74  datasets" if not
-0001c1e0: 2062 6173 655f 7061 7468 2065 6c73 6520   base_path else 
-0001c1f0: 5061 7468 2862 6173 655f 7061 7468 290a  Path(base_path).
-0001c200: 0a20 2020 2020 2020 2023 2063 6f6c 756d  .        # colum
-0001c210: 6e20 666f 726d 6174 0a20 2020 2020 2020  n format.       
-0001c220: 2063 6f6c 756d 6e73 203d 207b 303a 2022   columns = {0: "
-0001c230: 7465 7874 222c 2031 3a20 226e 6572 227d  text", 1: "ner"}
-0001c240: 0a0a 2020 2020 2020 2020 2320 7468 6973  ..        # this
-0001c250: 2064 6174 6173 6574 206e 616d 650a 2020   dataset name.  
-0001c260: 2020 2020 2020 6461 7461 7365 745f 6e61        dataset_na
-0001c270: 6d65 203d 2073 656c 662e 5f5f 636c 6173  me = self.__clas
-0001c280: 735f 5f2e 5f5f 6e61 6d65 5f5f 2e6c 6f77  s__.__name__.low
-0001c290: 6572 2829 0a0a 2020 2020 2020 2020 6461  er()..        da
-0001c2a0: 7461 5f66 6f6c 6465 7220 3d20 6261 7365  ta_folder = base
-0001c2b0: 5f70 6174 6820 2f20 6461 7461 7365 745f  _path / dataset_
-0001c2c0: 6e61 6d65 0a0a 2020 2020 2020 2020 6966  name..        if
-0001c2d0: 206e 6f74 206f 732e 7061 7468 2e69 7366   not os.path.isf
-0001c2e0: 696c 6528 6461 7461 5f66 6f6c 6465 7220  ile(data_folder 
-0001c2f0: 2f20 2269 6365 6c61 6e64 6963 5f6e 6572  / "icelandic_ner
-0001c300: 2e74 7874 2229 3a0a 2020 2020 2020 2020  .txt"):.        
-0001c310: 2020 2020 2320 646f 776e 6c6f 6164 207a      # download z
-0001c320: 6970 0a20 2020 2020 2020 2020 2020 2069  ip.            i
-0001c330: 6365 6c61 6e64 6963 5f6e 6572 203d 2022  celandic_ner = "
-0001c340: 6874 7470 733a 2f2f 7265 706f 7369 746f  https://reposito
-0001c350: 7279 2e63 6c61 7269 6e2e 6973 2f72 6570  ry.clarin.is/rep
-0001c360: 6f73 6974 6f72 792f 786d 6c75 692f 6861  ository/xmlui/ha
-0001c370: 6e64 6c65 2f32 302e 3530 302e 3132 3533  ndle/20.500.1253
-0001c380: 372f 3432 2f61 6c6c 7a69 7022 0a20 2020  7/42/allzip".   
-0001c390: 2020 2020 2020 2020 2069 6365 6c61 6e64           iceland
-0001c3a0: 6963 5f6e 6572 5f70 6174 6820 3d20 6361  ic_ner_path = ca
-0001c3b0: 6368 6564 5f70 6174 6828 6963 656c 616e  ched_path(icelan
-0001c3c0: 6469 635f 6e65 722c 2050 6174 6828 2264  dic_ner, Path("d
-0001c3d0: 6174 6173 6574 7322 2920 2f20 6461 7461  atasets") / data
-0001c3e0: 7365 745f 6e61 6d65 290a 0a20 2020 2020  set_name)..     
-0001c3f0: 2020 2020 2020 2023 2075 6e70 6163 6b69         # unpacki
-0001c400: 6e67 2074 6865 207a 6970 0a20 2020 2020  ng the zip.     
-0001c410: 2020 2020 2020 2075 6e70 6163 6b5f 6669         unpack_fi
-0001c420: 6c65 2869 6365 6c61 6e64 6963 5f6e 6572  le(icelandic_ner
-0001c430: 5f70 6174 682c 2064 6174 615f 666f 6c64  _path, data_fold
-0001c440: 6572 2c20 6d6f 6465 3d22 7a69 7022 2c20  er, mode="zip", 
-0001c450: 6b65 6570 3d54 7275 6529 0a20 2020 2020  keep=True).     
-0001c460: 2020 206f 7574 7075 7466 696c 6520 3d20     outputfile = 
-0001c470: 6f73 2e70 6174 682e 6162 7370 6174 6828  os.path.abspath(
-0001c480: 6461 7461 5f66 6f6c 6465 7229 0a0a 2020  data_folder)..  
-0001c490: 2020 2020 2020 2320 6d65 7267 6520 7468        # merge th
-0001c4a0: 6520 6669 6c65 7320 696e 206f 6e65 2061  e files in one a
-0001c4b0: 7320 7468 6520 7a69 7020 6973 2063 6f6e  s the zip is con
-0001c4c0: 7461 696e 696e 6720 6d75 6c74 6970 6c65  taining multiple
-0001c4d0: 7320 6669 6c65 730a 0a20 2020 2020 2020  s files..       
-0001c4e0: 2077 6974 6820 6f70 656e 286f 7574 7075   with open(outpu
-0001c4f0: 7466 696c 6520 2f20 6461 7461 5f66 6f6c  tfile / data_fol
-0001c500: 6465 7220 2f20 2269 6365 6c61 6e64 6963  der / "icelandic
-0001c510: 5f6e 6572 2e74 7874 222c 2022 7762 2229  _ner.txt", "wb")
-0001c520: 2061 7320 6f75 7466 696c 653a 0a20 2020   as outfile:.   
-0001c530: 2020 2020 2020 2020 2066 6f72 2066 696c           for fil
-0001c540: 6573 2069 6e20 6f73 2e77 616c 6b28 6f75  es in os.walk(ou
-0001c550: 7470 7574 6669 6c65 202f 2064 6174 615f  tputfile / data_
-0001c560: 666f 6c64 6572 293a 0a20 2020 2020 2020  folder):.       
-0001c570: 2020 2020 2020 2020 2066 203d 2066 696c           f = fil
-0001c580: 6573 5b32 5d0a 0a20 2020 2020 2020 2020  es[2]..         
-0001c590: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-0001c5a0: 7261 6e67 6528 6c65 6e28 6629 293a 0a20  range(len(f)):. 
-0001c5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c5c0: 2020 2069 6620 665b 695d 2e65 6e64 7377     if f[i].endsw
-0001c5d0: 6974 6828 222e 7478 7422 293a 0a20 2020  ith(".txt"):.   
-0001c5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c5f0: 2020 2020 2077 6974 6820 6f70 656e 286f       with open(o
-0001c600: 7574 7075 7466 696c 6520 2f20 6461 7461  utputfile / data
-0001c610: 5f66 6f6c 6465 7220 2f20 665b 695d 2c20  _folder / f[i], 
-0001c620: 2272 6222 2920 6173 2069 6e66 696c 653a  "rb") as infile:
-0001c630: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001c640: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
-0001c650: 7465 6e74 7320 3d20 696e 6669 6c65 2e72  tents = infile.r
-0001c660: 6561 6428 290a 2020 2020 2020 2020 2020  ead().          
-0001c670: 2020 2020 2020 2020 2020 2020 2020 6f75                ou
-0001c680: 7466 696c 652e 7772 6974 6528 636f 6e74  tfile.write(cont
-0001c690: 656e 7473 290a 0a20 2020 2020 2020 2073  ents)..        s
-0001c6a0: 7570 6572 2829 2e5f 5f69 6e69 745f 5f28  uper().__init__(
-0001c6b0: 0a20 2020 2020 2020 2020 2020 2064 6174  .            dat
-0001c6c0: 615f 666f 6c64 6572 2c0a 2020 2020 2020  a_folder,.      
-0001c6d0: 2020 2020 2020 636f 6c75 6d6e 732c 0a20        columns,. 
-0001c6e0: 2020 2020 2020 2020 2020 2074 7261 696e             train
-0001c6f0: 5f66 696c 653d 2269 6365 6c61 6e64 6963  _file="icelandic
-0001c700: 5f6e 6572 2e74 7874 222c 0a20 2020 2020  _ner.txt",.     
-0001c710: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
-0001c720: 3d69 6e5f 6d65 6d6f 7279 2c0a 2020 2020  =in_memory,.    
-0001c730: 2020 2020 2020 2020 2a2a 636f 7270 7573          **corpus
-0001c740: 6172 6773 2c0a 2020 2020 2020 2020 290a  args,.        ).
-0001c750: 0a0a 636c 6173 7320 4e45 525f 4a41 5041  ..class NER_JAPA
-0001c760: 4e45 5345 2843 6f6c 756d 6e43 6f72 7075  NESE(ColumnCorpu
-0001c770: 7329 3a0a 2020 2020 6465 6620 5f5f 696e  s):.    def __in
-0001c780: 6974 5f5f 280a 2020 2020 2020 2020 7365  it__(.        se
-0001c790: 6c66 2c0a 2020 2020 2020 2020 6261 7365  lf,.        base
-0001c7a0: 5f70 6174 683a 204f 7074 696f 6e61 6c5b  _path: Optional[
-0001c7b0: 556e 696f 6e5b 7374 722c 2050 6174 685d  Union[str, Path]
-0001c7c0: 5d20 3d20 4e6f 6e65 2c0a 2020 2020 2020  ] = None,.      
-0001c7d0: 2020 696e 5f6d 656d 6f72 793a 2062 6f6f    in_memory: boo
-0001c7e0: 6c20 3d20 5472 7565 2c0a 2020 2020 2020  l = True,.      
-0001c7f0: 2020 2a2a 636f 7270 7573 6172 6773 2c0a    **corpusargs,.
-0001c800: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
-0001c810: 2020 2020 2020 2022 2222 496e 6974 6961         """Initia
-0001c820: 6c69 7a65 2074 6865 2048 6972 6f6e 7361  lize the Hironsa
-0001c830: 6e2f 494f 4232 2063 6f72 7075 7320 666f  n/IOB2 corpus fo
-0001c840: 7220 4a61 7061 6e65 7365 2e0a 0a20 2020  r Japanese...   
-0001c850: 2020 2020 2054 6865 2066 6972 7374 2074       The first t
-0001c860: 696d 6520 796f 7520 6361 6c6c 2074 6869  ime you call thi
-0001c870: 7320 636f 6e73 7472 7563 746f 7220 6974  s constructor it
-0001c880: 2077 696c 6c20 6175 746f 6d61 7469 6361   will automatica
-0001c890: 6c6c 7920 646f 776e 6c6f 6164 2074 6865  lly download the
-0001c8a0: 2064 6174 6173 6574 2e0a 0a20 2020 2020   dataset...     
-0001c8b0: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
-0001c8c0: 2020 2020 2062 6173 655f 7061 7468 3a20       base_path: 
-0001c8d0: 4465 6661 756c 7420 6973 204e 6f6e 652c  Default is None,
-0001c8e0: 206d 6561 6e69 6e67 2074 6861 7420 636f   meaning that co
-0001c8f0: 7270 7573 2067 6574 7320 6175 746f 2d64  rpus gets auto-d
-0001c900: 6f77 6e6c 6f61 6465 6420 616e 6420 6c6f  ownloaded and lo
-0001c910: 6164 6564 2e20 596f 7520 6361 6e20 6f76  aded. You can ov
-0001c920: 6572 7269 6465 2074 6869 7320 746f 2070  erride this to p
-0001c930: 6f69 6e74 2074 6f20 6120 6469 6666 6572  oint to a differ
-0001c940: 656e 7420 666f 6c64 6572 2062 7574 2074  ent folder but t
-0001c950: 7970 6963 616c 6c79 2074 6869 7320 7368  ypically this sh
-0001c960: 6f75 6c64 206e 6f74 2062 6520 6e65 6365  ould not be nece
-0001c970: 7373 6172 792e 0a20 2020 2020 2020 2020  ssary..         
-0001c980: 2020 2069 6e5f 6d65 6d6f 7279 3a20 4966     in_memory: If
-0001c990: 2054 7275 652c 206b 6565 7073 2064 6174   True, keeps dat
-0001c9a0: 6173 6574 2069 6e20 6d65 6d6f 7279 2067  aset in memory g
-0001c9b0: 6976 696e 6720 7370 6565 6475 7073 2069  iving speedups i
-0001c9c0: 6e20 7472 6169 6e69 6e67 2e0a 2020 2020  n training..    
-0001c9d0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0001c9e0: 6261 7365 5f70 6174 6820 3d20 6b6f 6c69  base_path = koli
-0001c9f0: 6272 692e 6361 6368 655f 726f 6f74 202f  bri.cache_root /
-0001ca00: 2022 6461 7461 7365 7473 2220 6966 206e   "datasets" if n
-0001ca10: 6f74 2062 6173 655f 7061 7468 2065 6c73  ot base_path els
-0001ca20: 6520 5061 7468 2862 6173 655f 7061 7468  e Path(base_path
-0001ca30: 290a 0a20 2020 2020 2020 2023 2063 6f6c  )..        # col
-0001ca40: 756d 6e20 666f 726d 6174 0a20 2020 2020  umn format.     
-0001ca50: 2020 2063 6f6c 756d 6e73 203d 207b 303a     columns = {0:
-0001ca60: 2022 7465 7874 222c 2031 3a20 226e 6572   "text", 1: "ner
-0001ca70: 227d 0a0a 2020 2020 2020 2020 2320 7468  "}..        # th
-0001ca80: 6973 2064 6174 6173 6574 206e 616d 650a  is dataset name.
-0001ca90: 2020 2020 2020 2020 6461 7461 7365 745f          dataset_
-0001caa0: 6e61 6d65 203d 2073 656c 662e 5f5f 636c  name = self.__cl
-0001cab0: 6173 735f 5f2e 5f5f 6e61 6d65 5f5f 2e6c  ass__.__name__.l
-0001cac0: 6f77 6572 2829 0a0a 2020 2020 2020 2020  ower()..        
-0001cad0: 6461 7461 5f66 6f6c 6465 7220 3d20 6261  data_folder = ba
-0001cae0: 7365 5f70 6174 6820 2f20 6461 7461 7365  se_path / datase
-0001caf0: 745f 6e61 6d65 0a0a 2020 2020 2020 2020  t_name..        
-0001cb00: 2320 646f 776e 6c6f 6164 2064 6174 6120  # download data 
-0001cb10: 6672 6f6d 2067 6974 6875 6220 6966 206e  from github if n
-0001cb20: 6563 6573 7361 7279 2028 6869 726f 6e73  ecessary (hirons
-0001cb30: 616e 2e74 7874 2c20 6a61 2e77 696b 6970  an.txt, ja.wikip
-0001cb40: 6564 6961 2e63 6f6e 6c6c 290a 2020 2020  edia.conll).    
-0001cb50: 2020 2020 494f 4232 5f70 6174 6820 3d20      IOB2_path = 
-0001cb60: 2268 7474 7073 3a2f 2f72 6177 2e67 6974  "https://raw.git
-0001cb70: 6875 6275 7365 7263 6f6e 7465 6e74 2e63  hubusercontent.c
-0001cb80: 6f6d 2f48 6972 6f6e 7361 6e2f 494f 4232  om/Hironsan/IOB2
-0001cb90: 436f 7270 7573 2f6d 6173 7465 722f 220a  Corpus/master/".
-0001cba0: 0a20 2020 2020 2020 2023 2064 6f77 6e6c  .        # downl
-0001cbb0: 6f61 6420 6669 6c65 7320 6966 206e 6f74  oad files if not
-0001cbc0: 2070 7265 7365 6e74 206c 6f63 616c 6c79   present locally
-0001cbd0: 0a20 2020 2020 2020 2063 6163 6865 645f  .        cached_
-0001cbe0: 7061 7468 2866 227b 494f 4232 5f70 6174  path(f"{IOB2_pat
-0001cbf0: 687d 6869 726f 6e73 616e 2e74 7874 222c  h}hironsan.txt",
-0001cc00: 2064 6174 615f 666f 6c64 6572 202f 2022   data_folder / "
-0001cc10: 7261 7722 290a 2020 2020 2020 2020 6361  raw").        ca
-0001cc20: 6368 6564 5f70 6174 6828 6622 7b49 4f42  ched_path(f"{IOB
-0001cc30: 325f 7061 7468 7d6a 612e 7769 6b69 7065  2_path}ja.wikipe
-0001cc40: 6469 612e 636f 6e6c 6c22 2c20 6461 7461  dia.conll", data
-0001cc50: 5f66 6f6c 6465 7220 2f20 2272 6177 2229  _folder / "raw")
-0001cc60: 0a0a 2020 2020 2020 2020 2320 7765 206e  ..        # we n
-0001cc70: 6565 6420 746f 206d 6f64 6966 7920 7468  eed to modify th
-0001cc80: 6520 6f72 6967 696e 616c 2066 696c 6573  e original files
-0001cc90: 2062 7920 6164 6469 6e67 206e 6577 206c   by adding new l
-0001cca0: 696e 6573 2061 6674 6572 2061 6674 6572  ines after after
-0001ccb0: 2074 6865 2065 6e64 206f 6620 6561 6368   the end of each
-0001ccc0: 2073 656e 7465 6e63 650a 2020 2020 2020   sentence.      
-0001ccd0: 2020 7472 6169 6e5f 6461 7461 5f66 696c    train_data_fil
-0001cce0: 6520 3d20 6461 7461 5f66 6f6c 6465 7220  e = data_folder 
-0001ccf0: 2f20 2274 7261 696e 2e74 7874 220a 2020  / "train.txt".  
-0001cd00: 2020 2020 2020 6966 206e 6f74 2074 7261        if not tra
-0001cd10: 696e 5f64 6174 615f 6669 6c65 2e69 735f  in_data_file.is_
-0001cd20: 6669 6c65 2829 3a0a 2020 2020 2020 2020  file():.        
-0001cd30: 2020 2020 7365 6c66 2e5f 5f70 7265 7061      self.__prepa
-0001cd40: 7265 5f6a 6170 5f77 696b 696e 6577 735f  re_jap_wikinews_
-0001cd50: 636f 7270 7573 2864 6174 615f 666f 6c64  corpus(data_fold
-0001cd60: 6572 202f 2022 7261 7722 202f 2022 6869  er / "raw" / "hi
-0001cd70: 726f 6e73 616e 2e74 7874 222c 2064 6174  ronsan.txt", dat
-0001cd80: 615f 666f 6c64 6572 202f 2022 7472 6169  a_folder / "trai
-0001cd90: 6e2e 7478 7422 290a 2020 2020 2020 2020  n.txt").        
-0001cda0: 2020 2020 7365 6c66 2e5f 5f70 7265 7061      self.__prepa
-0001cdb0: 7265 5f6a 6170 5f77 696b 6970 6564 6961  re_jap_wikipedia
-0001cdc0: 5f63 6f72 7075 7328 6461 7461 5f66 6f6c  _corpus(data_fol
-0001cdd0: 6465 7220 2f20 2272 6177 2220 2f20 226a  der / "raw" / "j
-0001cde0: 612e 7769 6b69 7065 6469 612e 636f 6e6c  a.wikipedia.conl
-0001cdf0: 6c22 2c20 6461 7461 5f66 6f6c 6465 7220  l", data_folder 
-0001ce00: 2f20 2274 7261 696e 2e74 7874 2229 0a0a  / "train.txt")..
-0001ce10: 2020 2020 2020 2020 7375 7065 7228 292e          super().
-0001ce20: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
-0001ce30: 2020 2020 2020 6461 7461 5f66 6f6c 6465        data_folde
-0001ce40: 722c 0a20 2020 2020 2020 2020 2020 2063  r,.            c
-0001ce50: 6f6c 756d 6e73 2c0a 2020 2020 2020 2020  olumns,.        
-0001ce60: 2020 2020 7472 6169 6e5f 6669 6c65 3d22      train_file="
-0001ce70: 7472 6169 6e2e 7478 7422 2c0a 2020 2020  train.txt",.    
-0001ce80: 2020 2020 2020 2020 696e 5f6d 656d 6f72          in_memor
-0001ce90: 793d 696e 5f6d 656d 6f72 792c 0a20 2020  y=in_memory,.   
-0001cea0: 2020 2020 2020 2020 2064 6566 6175 6c74           default
-0001ceb0: 5f77 6869 7465 7370 6163 655f 6166 7465  _whitespace_afte
-0001cec0: 723d 302c 0a20 2020 2020 2020 2020 2020  r=0,.           
-0001ced0: 202a 2a63 6f72 7075 7361 7267 732c 0a20   **corpusargs,. 
-0001cee0: 2020 2020 2020 2029 0a0a 2020 2020 4073         )..    @s
-0001cef0: 7461 7469 636d 6574 686f 640a 2020 2020  taticmethod.    
-0001cf00: 6465 6620 5f5f 7072 6570 6172 655f 6a61  def __prepare_ja
-0001cf10: 705f 7769 6b69 7065 6469 615f 636f 7270  p_wikipedia_corp
-0001cf20: 7573 2866 696c 655f 696e 3a20 556e 696f  us(file_in: Unio
-0001cf30: 6e5b 7374 722c 2050 6174 685d 2c20 6669  n[str, Path], fi
-0001cf40: 6c65 5f6f 7574 3a20 556e 696f 6e5b 7374  le_out: Union[st
-0001cf50: 722c 2050 6174 685d 293a 0a20 2020 2020  r, Path]):.     
-0001cf60: 2020 2077 6974 6820 6f70 656e 2866 696c     with open(fil
-0001cf70: 655f 696e 2920 6173 2066 3a0a 2020 2020  e_in) as f:.    
-0001cf80: 2020 2020 2020 2020 6c69 6e65 7320 3d20          lines = 
-0001cf90: 662e 7265 6164 6c69 6e65 7328 290a 2020  f.readlines().  
-0001cfa0: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
-0001cfb0: 6669 6c65 5f6f 7574 2c20 2261 2229 2061  file_out, "a") a
-0001cfc0: 7320 663a 0a20 2020 2020 2020 2020 2020  s f:.           
-0001cfd0: 2066 6f72 206c 696e 6520 696e 206c 696e   for line in lin
-0001cfe0: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
-0001cff0: 2020 2020 6966 206c 696e 655b 305d 203d      if line[0] =
-0001d000: 3d20 22e3 8082 223a 0a20 2020 2020 2020  = "...":.       
-0001d010: 2020 2020 2020 2020 2020 2020 2066 2e77               f.w
-0001d020: 7269 7465 286c 696e 6529 0a20 2020 2020  rite(line).     
-0001d030: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0001d040: 2e77 7269 7465 2822 5c6e 2229 0a20 2020  .write("\n").   
-0001d050: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-0001d060: 6620 6c69 6e65 5b30 5d20 3d3d 2022 5c6e  f line[0] == "\n
-0001d070: 223a 0a20 2020 2020 2020 2020 2020 2020  ":.             
-0001d080: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
-0001d090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d0a0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0001d0b0: 2020 2020 2020 2020 2020 662e 7772 6974            f.writ
-0001d0c0: 6528 6c69 6e65 290a 0a20 2020 2040 7374  e(line)..    @st
-0001d0d0: 6174 6963 6d65 7468 6f64 0a20 2020 2064  aticmethod.    d
-0001d0e0: 6566 205f 5f70 7265 7061 7265 5f6a 6170  ef __prepare_jap
-0001d0f0: 5f77 696b 696e 6577 735f 636f 7270 7573  _wikinews_corpus
-0001d100: 2866 696c 655f 696e 3a20 556e 696f 6e5b  (file_in: Union[
-0001d110: 7374 722c 2050 6174 685d 2c20 6669 6c65  str, Path], file
-0001d120: 5f6f 7574 3a20 556e 696f 6e5b 7374 722c  _out: Union[str,
-0001d130: 2050 6174 685d 293a 0a20 2020 2020 2020   Path]):.       
-0001d140: 2077 6974 6820 6f70 656e 2866 696c 655f   with open(file_
-0001d150: 696e 2920 6173 2066 3a0a 2020 2020 2020  in) as f:.      
-0001d160: 2020 2020 2020 6c69 6e65 7320 3d20 662e        lines = f.
-0001d170: 7265 6164 6c69 6e65 7328 290a 2020 2020  readlines().    
-0001d180: 2020 2020 7769 7468 206f 7065 6e28 6669      with open(fi
-0001d190: 6c65 5f6f 7574 2c20 2261 2229 2061 7320  le_out, "a") as 
-0001d1a0: 663a 0a20 2020 2020 2020 2020 2020 2066  f:.            f
-0001d1b0: 6f72 206c 696e 6520 696e 206c 696e 6573  or line in lines
-0001d1c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001d1d0: 2020 7370 5f6c 696e 6520 3d20 6c69 6e65    sp_line = line
-0001d1e0: 2e73 706c 6974 2822 5c74 2229 0a20 2020  .split("\t").   
-0001d1f0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001d200: 7370 5f6c 696e 655b 305d 203d 3d20 225c  sp_line[0] == "\
-0001d210: 6e22 3a0a 2020 2020 2020 2020 2020 2020  n":.            
-0001d220: 2020 2020 2020 2020 662e 7772 6974 6528          f.write(
-0001d230: 225c 6e22 290a 2020 2020 2020 2020 2020  "\n").          
-0001d240: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0001d250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d260: 662e 7772 6974 6528 7370 5f6c 696e 655b  f.write(sp_line[
-0001d270: 305d 202b 2022 5c74 2220 2b20 7370 5f6c  0] + "\t" + sp_l
-0001d280: 696e 655b 2d31 5d29 0a0a 0a63 6c61 7373  ine[-1])...class
-0001d290: 204e 4552 5f4d 4153 414b 4841 4e45 284d   NER_MASAKHANE(M
-0001d2a0: 756c 7469 436f 7270 7573 293a 0a20 2020  ultiCorpus):.   
-0001d2b0: 2064 6566 205f 5f69 6e69 745f 5f28 0a20   def __init__(. 
-0001d2c0: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
-0001d2d0: 2020 2020 206c 616e 6775 6167 6573 3a20       languages: 
-0001d2e0: 556e 696f 6e5b 7374 722c 204c 6973 745b  Union[str, List[
-0001d2f0: 7374 725d 5d20 3d20 226c 756f 222c 0a20  str]] = "luo",. 
-0001d300: 2020 2020 2020 2076 6572 7369 6f6e 3a20         version: 
-0001d310: 7374 7220 3d20 2276 3222 2c0a 2020 2020  str = "v2",.    
-0001d320: 2020 2020 6261 7365 5f70 6174 683a 204f      base_path: O
-0001d330: 7074 696f 6e61 6c5b 556e 696f 6e5b 7374  ptional[Union[st
-0001d340: 722c 2050 6174 685d 5d20 3d20 4e6f 6e65  r, Path]] = None
-0001d350: 2c0a 2020 2020 2020 2020 696e 5f6d 656d  ,.        in_mem
-0001d360: 6f72 793a 2062 6f6f 6c20 3d20 5472 7565  ory: bool = True
-0001d370: 2c0a 2020 2020 2020 2020 2a2a 636f 7270  ,.        **corp
-0001d380: 7573 6172 6773 2c0a 2020 2020 2920 2d3e  usargs,.    ) ->
-0001d390: 204e 6f6e 653a 0a20 2020 2020 2020 2022   None:.        "
-0001d3a0: 2222 496e 6974 6961 6c69 7a65 2074 6865  ""Initialize the
-0001d3b0: 204d 6173 616b 6861 6e65 2063 6f72 7075   Masakhane corpu
-0001d3c0: 7320 6176 6169 6c61 626c 6520 6f6e 2068  s available on h
-0001d3d0: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
-0001d3e0: 6d2f 6d61 7361 6b68 616e 652d 696f 2f6d  m/masakhane-io/m
-0001d3f0: 6173 616b 6861 6e65 2d6e 6572 2f74 7265  asakhane-ner/tre
-0001d400: 652f 6d61 696e 2f64 6174 612e 0a0a 2020  e/main/data...  
-0001d410: 2020 2020 2020 4974 2063 6f6e 7369 7374        It consist
-0001d420: 7320 6f66 2074 656e 2041 6672 6963 616e  s of ten African
-0001d430: 206c 616e 6775 6167 6573 2e20 5061 7373   languages. Pass
-0001d440: 2061 206c 616e 6775 6167 6520 636f 6465   a language code
-0001d450: 206f 7220 6120 6c69 7374 206f 6620 6c61   or a list of la
-0001d460: 6e67 7561 6765 2063 6f64 6573 2074 6f20  nguage codes to 
-0001d470: 696e 6974 6961 6c69 7a65 2074 6865 2063  initialize the c
-0001d480: 6f72 7075 730a 2020 2020 2020 2020 7769  orpus.        wi
-0001d490: 7468 2074 6865 206c 616e 6775 6167 6573  th the languages
-0001d4a0: 2079 6f75 2072 6571 7569 7265 2e20 4966   you require. If
-0001d4b0: 2079 6f75 2070 6173 7320 2261 6c6c 222c   you pass "all",
-0001d4c0: 2061 6c6c 206c 616e 6775 6167 6573 2077   all languages w
-0001d4d0: 696c 6c20 6265 2069 6e69 7469 616c 697a  ill be initializ
-0001d4e0: 6564 2e0a 2020 2020 2020 2020 3a76 6572  ed..        :ver
-0001d4f0: 7369 6f6e 3a20 5370 6563 6966 6965 7320  sion: Specifies 
-0001d500: 7665 7273 696f 6e20 6f66 2074 6865 2064  version of the d
-0001d510: 6174 6173 6574 2e20 4375 7272 656e 746c  ataset. Currentl
-0001d520: 792c 206f 6e6c 7920 2276 3122 2061 6e64  y, only "v1" and
-0001d530: 2022 7632 2220 6172 6520 7375 7070 6f72   "v2" are suppor
-0001d540: 7465 642c 2075 7369 6e67 2022 7632 2220  ted, using "v2" 
-0001d550: 6173 2064 6566 6175 6c74 2e0a 2020 2020  as default..    
-0001d560: 2020 2020 3a70 6172 616d 2062 6173 655f      :param base_
-0001d570: 7061 7468 3a20 4465 6661 756c 7420 6973  path: Default is
-0001d580: 204e 6f6e 652c 206d 6561 6e69 6e67 2074   None, meaning t
-0001d590: 6861 7420 636f 7270 7573 2067 6574 7320  hat corpus gets 
-0001d5a0: 6175 746f 2d64 6f77 6e6c 6f61 6465 6420  auto-downloaded 
-0001d5b0: 616e 6420 6c6f 6164 6564 2e20 596f 7520  and loaded. You 
-0001d5c0: 6361 6e20 6f76 6572 7269 6465 2074 6869  can override thi
-0001d5d0: 730a 2020 2020 2020 2020 746f 2070 6f69  s.        to poi
-0001d5e0: 6e74 2074 6f20 6120 6469 6666 6572 656e  nt to a differen
-0001d5f0: 7420 666f 6c64 6572 2062 7574 2074 7970  t folder but typ
-0001d600: 6963 616c 6c79 2074 6869 7320 7368 6f75  ically this shou
-0001d610: 6c64 206e 6f74 2062 6520 6e65 6365 7373  ld not be necess
-0001d620: 6172 792e 0a20 2020 2020 2020 2050 4f53  ary..        POS
-0001d630: 2074 6167 7320 696e 7374 6561 640a 2020   tags instead.  
-0001d640: 2020 2020 2020 3a70 6172 616d 2069 6e5f        :param in_
-0001d650: 6d65 6d6f 7279 3a20 4966 2054 7275 652c  memory: If True,
-0001d660: 206b 6565 7073 2064 6174 6173 6574 2069   keeps dataset i
-0001d670: 6e20 6d65 6d6f 7279 2067 6976 696e 6720  n memory giving 
-0001d680: 7370 6565 6475 7073 2069 6e20 7472 6169  speedups in trai
-0001d690: 6e69 6e67 2e0a 2020 2020 2020 2020 2222  ning..        ""
-0001d6a0: 220a 2020 2020 2020 2020 6261 7365 5f70  ".        base_p
-0001d6b0: 6174 6820 3d20 6b6f 6c69 6272 692e 6361  ath = kolibri.ca
-0001d6c0: 6368 655f 726f 6f74 202f 2022 6461 7461  che_root / "data
-0001d6d0: 7365 7473 2220 6966 206e 6f74 2062 6173  sets" if not bas
-0001d6e0: 655f 7061 7468 2065 6c73 6520 5061 7468  e_path else Path
-0001d6f0: 2862 6173 655f 7061 7468 290a 0a20 2020  (base_path)..   
-0001d700: 2020 2020 2023 2069 6620 6f6e 6c79 206f       # if only o
-0001d710: 6e65 206c 616e 6775 6167 6520 6973 2067  ne language is g
-0001d720: 6976 656e 0a20 2020 2020 2020 2069 6620  iven.        if 
-0001d730: 6973 696e 7374 616e 6365 286c 616e 6775  isinstance(langu
-0001d740: 6167 6573 2c20 7374 7229 3a0a 2020 2020  ages, str):.    
-0001d750: 2020 2020 2020 2020 6c61 6e67 7561 6765          language
-0001d760: 7320 3d20 5b6c 616e 6775 6167 6573 5d0a  s = [languages].
-0001d770: 0a20 2020 2020 2020 2023 2063 6f6c 756d  .        # colum
-0001d780: 6e20 666f 726d 6174 0a20 2020 2020 2020  n format.       
-0001d790: 2063 6f6c 756d 6e73 203d 207b 303a 2022   columns = {0: "
-0001d7a0: 7465 7874 222c 2031 3a20 226e 6572 227d  text", 1: "ner"}
-0001d7b0: 0a0a 2020 2020 2020 2020 2320 7468 6973  ..        # this
-0001d7c0: 2064 6174 6173 6574 206e 616d 650a 2020   dataset name.  
-0001d7d0: 2020 2020 2020 6461 7461 7365 745f 6e61        dataset_na
-0001d7e0: 6d65 203d 2073 656c 662e 5f5f 636c 6173  me = self.__clas
-0001d7f0: 735f 5f2e 5f5f 6e61 6d65 5f5f 2e6c 6f77  s__.__name__.low
-0001d800: 6572 2829 0a0a 2020 2020 2020 2020 7375  er()..        su
-0001d810: 7070 6f72 7465 645f 7665 7273 696f 6e73  pported_versions
-0001d820: 203d 205b 2276 3122 2c20 2276 3222 5d0a   = ["v1", "v2"].
-0001d830: 0a20 2020 2020 2020 2069 6620 7665 7273  .        if vers
-0001d840: 696f 6e20 6e6f 7420 696e 2073 7570 706f  ion not in suppo
-0001d850: 7274 6564 5f76 6572 7369 6f6e 733a 0a20  rted_versions:. 
-0001d860: 2020 2020 2020 2020 2020 206c 6f67 2e65             log.e
-0001d870: 7272 6f72 2866 2254 6865 2073 7065 6369  rror(f"The speci
-0001d880: 6669 6564 2076 6572 7369 6f6e 2027 7b76  fied version '{v
-0001d890: 6572 7369 6f6e 7d27 2069 7320 6e6f 7420  ersion}' is not 
-0001d8a0: 696e 2074 6865 206c 6973 7420 6f66 2073  in the list of s
-0001d8b0: 7570 706f 7274 6564 2076 6572 7369 6f6e  upported version
-0001d8c0: 2122 290a 2020 2020 2020 2020 2020 2020  !").            
-0001d8d0: 6c6f 672e 6572 726f 7228 6622 5375 7070  log.error(f"Supp
-0001d8e0: 6f72 7465 6420 7665 7273 696f 6e73 2061  orted versions a
-0001d8f0: 7265 2027 7b73 7570 706f 7274 6564 5f76  re '{supported_v
-0001d900: 6572 7369 6f6e 737d 2721 2229 0a20 2020  ersions}'!").   
-0001d910: 2020 2020 2020 2020 2072 6169 7365 2045           raise E
-0001d920: 7863 6570 7469 6f6e 0a0a 2020 2020 2020  xception..      
-0001d930: 2020 6461 7461 5f66 6f6c 6465 7220 3d20    data_folder = 
-0001d940: 6261 7365 5f70 6174 6820 2f20 6461 7461  base_path / data
-0001d950: 7365 745f 6e61 6d65 202f 2076 6572 7369  set_name / versi
-0001d960: 6f6e 0a0a 2020 2020 2020 2020 6c61 6e67  on..        lang
-0001d970: 7561 6765 735f 746f 5f63 6f64 6520 3d20  uages_to_code = 
-0001d980: 7b0a 2020 2020 2020 2020 2020 2020 2276  {.            "v
-0001d990: 3122 3a20 7b0a 2020 2020 2020 2020 2020  1": {.          
-0001d9a0: 2020 2020 2020 2261 6d68 6172 6963 223a        "amharic":
-0001d9b0: 2022 616d 6822 2c0a 2020 2020 2020 2020   "amh",.        
-0001d9c0: 2020 2020 2020 2020 2268 6175 7361 223a          "hausa":
-0001d9d0: 2022 6861 7522 2c0a 2020 2020 2020 2020   "hau",.        
-0001d9e0: 2020 2020 2020 2020 2269 6762 6f22 3a20          "igbo": 
-0001d9f0: 2269 626f 222c 0a20 2020 2020 2020 2020  "ibo",.         
-0001da00: 2020 2020 2020 2022 6b69 6e79 6172 7761         "kinyarwa
-0001da10: 6e64 6122 3a20 226b 696e 222c 0a20 2020  nda": "kin",.   
-0001da20: 2020 2020 2020 2020 2020 2020 2022 6c75               "lu
-0001da30: 6761 6e64 6122 3a20 226c 7567 222c 0a20  ganda": "lug",. 
-0001da40: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0001da50: 6c75 6f22 3a20 226c 756f 222c 0a20 2020  luo": "luo",.   
-0001da60: 2020 2020 2020 2020 2020 2020 2022 6e61               "na
-0001da70: 696a 6122 3a20 2270 636d 222c 0a20 2020  ija": "pcm",.   
-0001da80: 2020 2020 2020 2020 2020 2020 2022 7377               "sw
-0001da90: 6168 696c 6922 3a20 2273 7761 222c 0a20  ahili": "swa",. 
-0001daa0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0001dab0: 796f 7275 6261 223a 2022 796f 7222 2c0a  yoruba": "yor",.
-0001dac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dad0: 2277 6f6c 6f66 223a 2022 776f 6c22 2c0a  "wolof": "wol",.
-0001dae0: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
-0001daf0: 2020 2020 2020 2020 2020 2022 7632 223a             "v2":
-0001db00: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-0001db10: 2020 2022 6261 6d62 6172 6122 3a20 2262     "bambara": "b
-0001db20: 616d 222c 0a20 2020 2020 2020 2020 2020  am",.           
-0001db30: 2020 2020 2022 6768 6f6d 616c 6122 3a20       "ghomala": 
-0001db40: 2262 626a 222c 0a20 2020 2020 2020 2020  "bbj",.         
-0001db50: 2020 2020 2020 2022 6577 6522 3a20 2265         "ewe": "e
-0001db60: 7765 222c 0a20 2020 2020 2020 2020 2020  we",.           
-0001db70: 2020 2020 2022 666f 6e22 3a20 2266 6f6e       "fon": "fon
-0001db80: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
-0001db90: 2020 2022 6861 7573 6122 3a20 2268 6175     "hausa": "hau
-0001dba0: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
-0001dbb0: 2020 2022 6967 626f 223a 2022 6962 6f22     "igbo": "ibo"
-0001dbc0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0001dbd0: 2020 226b 696e 7961 7277 616e 6461 223a    "kinyarwanda":
-0001dbe0: 2022 6b69 6e22 2c0a 2020 2020 2020 2020   "kin",.        
-0001dbf0: 2020 2020 2020 2020 226c 7567 616e 6461          "luganda
-0001dc00: 223a 2022 6c75 6722 2c0a 2020 2020 2020  ": "lug",.      
-0001dc10: 2020 2020 2020 2020 2020 226d 6f73 7369            "mossi
-0001dc20: 223a 2022 6d6f 7322 2c0a 2020 2020 2020  ": "mos",.      
-0001dc30: 2020 2020 2020 2020 2020 226e 6169 6a61            "naija
-0001dc40: 223a 2022 7063 6d22 2c0a 2020 2020 2020  ": "pcm",.      
-0001dc50: 2020 2020 2020 2020 2020 2263 6869 6368            "chich
-0001dc60: 6577 6122 3a20 226e 7961 222c 0a20 2020  ewa": "nya",.   
-0001dc70: 2020 2020 2020 2020 2020 2020 2022 6368               "ch
-0001dc80: 6973 686f 6e61 223a 2022 736e 6122 2c0a  ishona": "sna",.
-0001dc90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dca0: 226b 6973 7761 6869 6c69 223a 2022 7377  "kiswahili": "sw
-0001dcb0: 6122 2c0a 2020 2020 2020 2020 2020 2020  a",.            
-0001dcc0: 2020 2020 2273 6574 7377 616e 6122 3a20      "setswana": 
-0001dcd0: 2274 736e 222c 0a20 2020 2020 2020 2020  "tsn",.         
-0001dce0: 2020 2020 2020 2022 616b 616e 5f74 7769         "akan_twi
-0001dcf0: 223a 2022 7477 6922 2c0a 2020 2020 2020  ": "twi",.      
-0001dd00: 2020 2020 2020 2020 2020 2277 6f6c 6f66            "wolof
-0001dd10: 223a 2022 776f 6c22 2c0a 2020 2020 2020  ": "wol",.      
-0001dd20: 2020 2020 2020 2020 2020 2269 7369 7868            "isixh
-0001dd30: 6f73 6122 3a20 2278 686f 222c 0a20 2020  osa": "xho",.   
-0001dd40: 2020 2020 2020 2020 2020 2020 2022 796f               "yo
-0001dd50: 7275 6261 223a 2022 796f 7222 2c0a 2020  ruba": "yor",.  
-0001dd60: 2020 2020 2020 2020 2020 2020 2020 2269                "i
-0001dd70: 7369 7a75 6c75 223a 2022 7a75 6c22 2c0a  sizulu": "zul",.
-0001dd80: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
-0001dd90: 2020 2020 2020 207d 0a0a 2020 2020 2020         }..      
-0001dda0: 2020 6c61 6e67 7561 6765 5f74 6f5f 636f    language_to_co
-0001ddb0: 6465 203d 206c 616e 6775 6167 6573 5f74  de = languages_t
-0001ddc0: 6f5f 636f 6465 5b76 6572 7369 6f6e 5d0a  o_code[version].
-0001ddd0: 0a20 2020 2020 2020 2064 6174 615f 7061  .        data_pa
-0001dde0: 7468 7320 3d20 7b0a 2020 2020 2020 2020  ths = {.        
-0001ddf0: 2020 2020 2276 3122 3a20 2268 7474 7073      "v1": "https
-0001de00: 3a2f 2f72 6177 2e67 6974 6875 6275 7365  ://raw.githubuse
-0001de10: 7263 6f6e 7465 6e74 2e63 6f6d 2f6d 6173  rcontent.com/mas
-0001de20: 616b 6861 6e65 2d69 6f2f 6d61 7361 6b68  akhane-io/masakh
-0001de30: 616e 652d 6e65 722f 6d61 696e 2f64 6174  ane-ner/main/dat
-0001de40: 6122 2c0a 2020 2020 2020 2020 2020 2020  a",.            
-0001de50: 2276 3222 3a20 2268 7474 7073 3a2f 2f72  "v2": "https://r
-0001de60: 6177 2e67 6974 6875 6275 7365 7263 6f6e  aw.githubusercon
-0001de70: 7465 6e74 2e63 6f6d 2f6d 6173 616b 6861  tent.com/masakha
-0001de80: 6e65 2d69 6f2f 6d61 7361 6b68 616e 652d  ne-io/masakhane-
-0001de90: 6e65 722f 6d61 696e 2f4d 6173 616b 6861  ner/main/Masakha
-0001dea0: 4e45 5232 2e30 2f64 6174 6122 2c0a 2020  NER2.0/data",.  
-0001deb0: 2020 2020 2020 7d0a 0a20 2020 2020 2020        }..       
-0001dec0: 2023 2075 7365 2061 6c6c 206c 616e 6775   # use all langu
-0001ded0: 6167 6573 2069 6620 6578 706c 6963 6974  ages if explicit
-0001dee0: 6c79 2073 6574 2074 6f20 2261 6c6c 220a  ly set to "all".
-0001def0: 2020 2020 2020 2020 6966 206c 616e 6775          if langu
-0001df00: 6167 6573 203d 3d20 5b22 616c 6c22 5d3a  ages == ["all"]:
-0001df10: 0a20 2020 2020 2020 2020 2020 206c 616e  .            lan
-0001df20: 6775 6167 6573 203d 206c 6973 7428 6c61  guages = list(la
-0001df30: 6e67 7561 6765 5f74 6f5f 636f 6465 2e76  nguage_to_code.v
-0001df40: 616c 7565 7328 2929 0a0a 2020 2020 2020  alues())..      
-0001df50: 2020 636f 7270 6f72 613a 204c 6973 745b    corpora: List[
-0001df60: 436f 7270 7573 5d20 3d20 5b5d 0a20 2020  Corpus] = [].   
-0001df70: 2020 2020 2066 6f72 206c 616e 6775 6167       for languag
-0001df80: 6520 696e 206c 616e 6775 6167 6573 3a0a  e in languages:.
-0001df90: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-0001dfa0: 616e 6775 6167 6520 696e 206c 616e 6775  anguage in langu
-0001dfb0: 6167 655f 746f 5f63 6f64 653a 0a20 2020  age_to_code:.   
-0001dfc0: 2020 2020 2020 2020 2020 2020 206c 616e               lan
-0001dfd0: 6775 6167 6520 3d20 6c61 6e67 7561 6765  guage = language
-0001dfe0: 5f74 6f5f 636f 6465 5b6c 616e 6775 6167  _to_code[languag
-0001dff0: 655d 0a0a 2020 2020 2020 2020 2020 2020  e]..            
-0001e000: 6966 206c 616e 6775 6167 6520 6e6f 7420  if language not 
-0001e010: 696e 206c 616e 6775 6167 655f 746f 5f63  in language_to_c
-0001e020: 6f64 652e 7661 6c75 6573 2829 3a0a 2020  ode.values():.  
-0001e030: 2020 2020 2020 2020 2020 2020 2020 6c6f                lo
-0001e040: 672e 6572 726f 7228 6622 4c61 6e67 7561  g.error(f"Langua
-0001e050: 6765 2027 7b6c 616e 6775 6167 657d 2720  ge '{language}' 
-0001e060: 6973 206e 6f74 2069 6e20 6c69 7374 206f  is not in list o
-0001e070: 6620 7375 7070 6f72 7465 6420 6c61 6e67  f supported lang
-0001e080: 7561 6765 7321 2229 0a20 2020 2020 2020  uages!").       
-0001e090: 2020 2020 2020 2020 206c 6f67 2e65 7272           log.err
-0001e0a0: 6f72 2866 2253 7570 706f 7274 6564 2061  or(f"Supported a
-0001e0b0: 7265 2027 7b6c 616e 6775 6167 655f 746f  re '{language_to
-0001e0c0: 5f63 6f64 652e 7661 6c75 6573 2829 7d27  _code.values()}'
-0001e0d0: 2122 290a 2020 2020 2020 2020 2020 2020  !").            
-0001e0e0: 2020 2020 6c6f 672e 6572 726f 7228 2249      log.error("I
-0001e0f0: 6e73 7461 6e74 6961 7465 2074 6869 7320  nstantiate this 
-0001e100: 436f 7270 7573 2066 6f72 2069 6e73 7461  Corpus for insta
-0001e110: 6e63 6520 6c69 6b65 2073 6f20 2763 6f72  nce like so 'cor
-0001e120: 7075 7320 3d20 4e45 525f 4d41 5341 4b48  pus = NER_MASAKH
-0001e130: 414e 4528 6c61 6e67 7561 6765 733d 276c  ANE(languages='l
-0001e140: 756f 2729 2722 290a 2020 2020 2020 2020  uo')'").        
-0001e150: 2020 2020 2020 2020 7261 6973 6520 4578          raise Ex
-0001e160: 6365 7074 696f 6e0a 0a20 2020 2020 2020  ception..       
-0001e170: 2020 2020 206c 616e 6775 6167 655f 666f       language_fo
-0001e180: 6c64 6572 203d 2064 6174 615f 666f 6c64  lder = data_fold
-0001e190: 6572 202f 206c 616e 6775 6167 650a 0a20  er / language.. 
-0001e1a0: 2020 2020 2020 2020 2020 2023 2064 6f77             # dow
-0001e1b0: 6e6c 6f61 6420 6461 7461 2069 6620 6e65  nload data if ne
-0001e1c0: 6365 7373 6172 790a 2020 2020 2020 2020  cessary.        
-0001e1d0: 2020 2020 6461 7461 5f70 6174 6820 3d20      data_path = 
-0001e1e0: 6622 7b64 6174 615f 7061 7468 735b 7665  f"{data_paths[ve
-0001e1f0: 7273 696f 6e5d 7d2f 7b6c 616e 6775 6167  rsion]}/{languag
-0001e200: 657d 2f22 0a20 2020 2020 2020 2020 2020  e}/".           
-0001e210: 2063 6163 6865 645f 7061 7468 2866 227b   cached_path(f"{
-0001e220: 6461 7461 5f70 6174 687d 6465 762e 7478  data_path}dev.tx
-0001e230: 7422 2c20 6c61 6e67 7561 6765 5f66 6f6c  t", language_fol
-0001e240: 6465 7229 0a20 2020 2020 2020 2020 2020  der).           
-0001e250: 2063 6163 6865 645f 7061 7468 2866 227b   cached_path(f"{
-0001e260: 6461 7461 5f70 6174 687d 7465 7374 2e74  data_path}test.t
-0001e270: 7874 222c 206c 616e 6775 6167 655f 666f  xt", language_fo
-0001e280: 6c64 6572 290a 2020 2020 2020 2020 2020  lder).          
-0001e290: 2020 6361 6368 6564 5f70 6174 6828 6622    cached_path(f"
-0001e2a0: 7b64 6174 615f 7061 7468 7d74 7261 696e  {data_path}train
-0001e2b0: 2e74 7874 222c 206c 616e 6775 6167 655f  .txt", language_
-0001e2c0: 666f 6c64 6572 290a 0a20 2020 2020 2020  folder)..       
-0001e2d0: 2020 2020 2023 2069 6e69 7469 616c 697a       # initializ
-0001e2e0: 6520 636f 6d6c 756d 6e63 6f72 7075 7320  e comlumncorpus 
-0001e2f0: 616e 6420 6164 6420 6974 2074 6f20 6c69  and add it to li
-0001e300: 7374 0a20 2020 2020 2020 2020 2020 206c  st.            l
-0001e310: 6f67 2e69 6e66 6f28 6622 5265 6164 696e  og.info(f"Readin
-0001e320: 6720 6461 7461 2066 6f72 206c 616e 6775  g data for langu
-0001e330: 6167 6520 7b6c 616e 6775 6167 657d 407b  age {language}@{
-0001e340: 7665 7273 696f 6e7d 2229 0a20 2020 2020  version}").     
-0001e350: 2020 2020 2020 2063 6f72 7020 3d20 436f         corp = Co
-0001e360: 6c75 6d6e 436f 7270 7573 280a 2020 2020  lumnCorpus(.    
-0001e370: 2020 2020 2020 2020 2020 2020 6461 7461              data
-0001e380: 5f66 6f6c 6465 723d 6c61 6e67 7561 6765  _folder=language
-0001e390: 5f66 6f6c 6465 722c 0a20 2020 2020 2020  _folder,.       
-0001e3a0: 2020 2020 2020 2020 2063 6f6c 756d 6e5f           column_
-0001e3b0: 666f 726d 6174 3d63 6f6c 756d 6e73 2c0a  format=columns,.
-0001e3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e3d0: 656e 636f 6469 6e67 3d22 7574 662d 3822  encoding="utf-8"
-0001e3e0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0001e3f0: 2020 696e 5f6d 656d 6f72 793d 696e 5f6d    in_memory=in_m
-0001e400: 656d 6f72 792c 0a20 2020 2020 2020 2020  emory,.         
-0001e410: 2020 2020 2020 206e 616d 653d 6c61 6e67         name=lang
-0001e420: 7561 6765 2c0a 2020 2020 2020 2020 2020  uage,.          
-0001e430: 2020 2020 2020 2a2a 636f 7270 7573 6172        **corpusar
-0001e440: 6773 2c0a 2020 2020 2020 2020 2020 2020  gs,.            
-0001e450: 290a 2020 2020 2020 2020 2020 2020 636f  ).            co
-0001e460: 7270 6f72 612e 6170 7065 6e64 2863 6f72  rpora.append(cor
-0001e470: 7029 0a0a 2020 2020 2020 2020 7375 7065  p)..        supe
-0001e480: 7228 292e 5f5f 696e 6974 5f5f 280a 2020  r().__init__(.  
-0001e490: 2020 2020 2020 2020 2020 636f 7270 6f72            corpor
-0001e4a0: 612c 0a20 2020 2020 2020 2020 2020 206e  a,.            n
-0001e4b0: 616d 653d 226d 6173 616b 6861 6e65 2d22  ame="masakhane-"
-0001e4c0: 202b 2022 2d22 2e6a 6f69 6e28 6c61 6e67   + "-".join(lang
-0001e4d0: 7561 6765 7329 2c0a 2020 2020 2020 2020  uages),.        
-0001e4e0: 290a 0a0a 636c 6173 7320 4e45 525f 4d55  )...class NER_MU
-0001e4f0: 4c54 495f 434f 4e45 5228 4d75 6c74 6946  LTI_CONER(MultiF
-0001e500: 696c 6543 6f6c 756d 6e43 6f72 7075 7329  ileColumnCorpus)
-0001e510: 3a0a 2020 2020 6465 6620 5f5f 696e 6974  :.    def __init
-0001e520: 5f5f 280a 2020 2020 2020 2020 7365 6c66  __(.        self
-0001e530: 2c0a 2020 2020 2020 2020 7461 736b 3a20  ,.        task: 
-0001e540: 7374 7220 3d20 226d 756c 7469 222c 0a20  str = "multi",. 
-0001e550: 2020 2020 2020 2062 6173 655f 7061 7468         base_path
-0001e560: 3a20 4f70 7469 6f6e 616c 5b55 6e69 6f6e  : Optional[Union
-0001e570: 5b73 7472 2c20 5061 7468 5d5d 203d 204e  [str, Path]] = N
-0001e580: 6f6e 652c 0a20 2020 2020 2020 2069 6e5f  one,.        in_
-0001e590: 6d65 6d6f 7279 3a20 626f 6f6c 203d 2054  memory: bool = T
-0001e5a0: 7275 652c 0a20 2020 2020 2020 202a 2a63  rue,.        **c
-0001e5b0: 6f72 7075 7361 7267 732c 0a20 2020 2029  orpusargs,.    )
-0001e5c0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-0001e5d0: 2020 2222 2244 6f77 6e6c 6f61 6420 616e    """Download an
-0001e5e0: 6420 496e 6974 6961 6c69 7a65 2074 6865  d Initialize the
-0001e5f0: 204d 756c 7469 436f 4e65 7220 636f 7270   MultiCoNer corp
-0001e600: 7573 2e0a 0a20 2020 2020 2020 2041 7267  us...        Arg
-0001e610: 733a 0a20 2020 2020 2020 2020 2020 2074  s:.            t
-0001e620: 6173 6b3a 2065 6974 6865 7220 276d 756c  ask: either 'mul
-0001e630: 7469 272c 2027 636f 6465 2d73 7769 7463  ti', 'code-switc
-0001e640: 6827 2c20 6f72 2074 6865 206c 616e 6775  h', or the langu
-0001e650: 6167 6520 636f 6465 2066 6f72 206f 6e65  age code for one
-0001e660: 206f 6620 7468 6520 6d6f 6e6f 2074 6173   of the mono tas
-0001e670: 6b73 2e0a 2020 2020 2020 2020 2020 2020  ks..            
-0001e680: 6261 7365 5f70 6174 683a 2050 6174 6820  base_path: Path 
-0001e690: 746f 2074 6865 2043 6f4e 4c4c 2d30 3320  to the CoNLL-03 
-0001e6a0: 636f 7270 7573 2028 692e 652e 2027 636f  corpus (i.e. 'co
-0001e6b0: 6e6c 6c5f 3033 2720 666f 6c64 6572 2920  nll_03' folder) 
-0001e6c0: 6f6e 2079 6f75 7220 6d61 6368 696e 6520  on your machine 
-0001e6d0: 504f 5320 7461 6773 206f 7220 6368 756e  POS tags or chun
-0001e6e0: 6b73 2072 6573 7065 6374 6976 656c 790a  ks respectively.
-0001e6f0: 2020 2020 2020 2020 2020 2020 696e 5f6d              in_m
-0001e700: 656d 6f72 793a 2049 6620 5472 7565 2c20  emory: If True, 
-0001e710: 6b65 6570 7320 6461 7461 7365 7420 696e  keeps dataset in
-0001e720: 206d 656d 6f72 7920 6769 7669 6e67 2073   memory giving s
-0001e730: 7065 6564 7570 7320 696e 2074 7261 696e  peedups in train
-0001e740: 696e 672e 0a20 2020 2020 2020 2022 2222  ing..        """
-0001e750: 0a20 2020 2020 2020 2062 6173 655f 7061  .        base_pa
-0001e760: 7468 203d 206b 6f6c 6962 7269 2e63 6163  th = kolibri.cac
-0001e770: 6865 5f72 6f6f 7420 2f20 2264 6174 6173  he_root / "datas
-0001e780: 6574 7322 2069 6620 6e6f 7420 6261 7365  ets" if not base
-0001e790: 5f70 6174 6820 656c 7365 2050 6174 6828  _path else Path(
-0001e7a0: 6261 7365 5f70 6174 6829 0a0a 2020 2020  base_path)..    
-0001e7b0: 2020 2020 666f 6c64 6572 7320 3d20 7b0a      folders = {.
-0001e7c0: 2020 2020 2020 2020 2020 2020 2262 6e22              "bn"
-0001e7d0: 3a20 2242 4e2d 4261 6e67 6c61 222c 0a20  : "BN-Bangla",. 
-0001e7e0: 2020 2020 2020 2020 2020 2022 6465 223a             "de":
-0001e7f0: 2022 4445 2d47 6572 6d61 6e22 2c0a 2020   "DE-German",.  
-0001e800: 2020 2020 2020 2020 2020 2265 6e22 3a20            "en": 
-0001e810: 2245 4e2d 456e 676c 6973 6822 2c0a 2020  "EN-English",.  
-0001e820: 2020 2020 2020 2020 2020 2265 7322 3a20            "es": 
-0001e830: 2245 532d 4573 7061 6e69 7368 222c 0a20  "ES-Espanish",. 
-0001e840: 2020 2020 2020 2020 2020 2022 6661 223a             "fa":
-0001e850: 2022 4641 2d46 6172 7369 222c 0a20 2020   "FA-Farsi",.   
-0001e860: 2020 2020 2020 2020 2022 6869 223a 2022           "hi": "
-0001e870: 4849 2d48 696e 6469 222c 0a20 2020 2020  HI-Hindi",.     
-0001e880: 2020 2020 2020 2022 6b6f 223a 2022 4b4f         "ko": "KO
-0001e890: 2d4b 6f72 6561 6e22 2c0a 2020 2020 2020  -Korean",.      
-0001e8a0: 2020 2020 2020 226e 6c22 3a20 224e 4c2d        "nl": "NL-
-0001e8b0: 4475 7463 6822 2c0a 2020 2020 2020 2020  Dutch",.        
-0001e8c0: 2020 2020 2272 7522 3a20 2252 552d 5275      "ru": "RU-Ru
-0001e8d0: 7373 6961 6e22 2c0a 2020 2020 2020 2020  ssian",.        
-0001e8e0: 2020 2020 2274 7222 3a20 2254 522d 5475      "tr": "TR-Tu
-0001e8f0: 726b 6973 6822 2c0a 2020 2020 2020 2020  rkish",.        
-0001e900: 2020 2020 227a 6822 3a20 225a 482d 4368      "zh": "ZH-Ch
-0001e910: 696e 6573 6522 2c0a 2020 2020 2020 2020  inese",.        
-0001e920: 2020 2020 226d 6978 223a 2022 4d49 585f      "mix": "MIX_
-0001e930: 436f 6465 5f6d 6978 6564 222c 0a20 2020  Code_mixed",.   
-0001e940: 2020 2020 2020 2020 2022 6d75 6c74 6922           "multi"
-0001e950: 3a20 224d 554c 5449 5f4d 756c 7469 6c69  : "MULTI_Multili
-0001e960: 6e67 7561 6c22 2c0a 2020 2020 2020 2020  ngual",.        
-0001e970: 7d0a 0a20 2020 2020 2020 2070 6f73 7369  }..        possi
-0001e980: 626c 655f 7461 736b 7320 3d20 6c69 7374  ble_tasks = list
-0001e990: 2866 6f6c 6465 7273 2e6b 6579 7328 2929  (folders.keys())
-0001e9a0: 0a20 2020 2020 2020 2074 6173 6b20 3d20  .        task = 
-0001e9b0: 7461 736b 2e6c 6f77 6572 2829 0a0a 2020  task.lower()..  
-0001e9c0: 2020 2020 2020 6966 2074 6173 6b20 6e6f        if task no
-0001e9d0: 7420 696e 2070 6f73 7369 626c 655f 7461  t in possible_ta
-0001e9e0: 736b 733a 0a20 2020 2020 2020 2020 2020  sks:.           
-0001e9f0: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
-0001ea00: 7228 6622 7461 736b 2068 6173 2074 6f20  r(f"task has to 
-0001ea10: 6265 206f 6e65 206f 6620 7b70 6f73 7369  be one of {possi
-0001ea20: 626c 655f 7461 736b 737d 2c20 6275 7420  ble_tasks}, but 
-0001ea30: 6973 2027 7b74 6173 6b7d 2722 290a 0a20  is '{task}'").. 
-0001ea40: 2020 2020 2020 2023 2063 6f6c 756d 6e20         # column 
-0001ea50: 666f 726d 6174 0a20 2020 2020 2020 2063  format.        c
-0001ea60: 6f6c 756d 6e73 203d 207b 303a 2022 7465  olumns = {0: "te
-0001ea70: 7874 222c 2033 3a20 226e 6572 227d 0a0a  xt", 3: "ner"}..
-0001ea80: 2020 2020 2020 2020 2320 7468 6973 2064          # this d
-0001ea90: 6174 6173 6574 206e 616d 650a 2020 2020  ataset name.    
-0001eaa0: 2020 2020 6461 7461 7365 745f 6e61 6d65      dataset_name
-0001eab0: 203d 2073 656c 662e 5f5f 636c 6173 735f   = self.__class_
-0001eac0: 5f2e 5f5f 6e61 6d65 5f5f 2e6c 6f77 6572  _.__name__.lower
-0001ead0: 2829 0a0a 2020 2020 2020 2020 6461 7461  ()..        data
-0001eae0: 5f66 6f6c 6465 7220 3d20 6361 6368 6564  _folder = cached
-0001eaf0: 5f70 6174 6828 2273 333a 2f2f 6d75 6c74  _path("s3://mult
-0001eb00: 6963 6f6e 6572 222c 2062 6173 655f 7061  iconer", base_pa
-0001eb10: 7468 202f 2064 6174 6173 6574 5f6e 616d  th / dataset_nam
-0001eb20: 6529 202f 2022 6d75 6c74 6963 6f6e 6572  e) / "multiconer
-0001eb30: 3230 3232 220a 0a20 2020 2020 2020 2074  2022"..        t
-0001eb40: 7261 696e 5f66 696c 6573 203d 205b 6461  rain_files = [da
-0001eb50: 7461 5f66 6f6c 6465 7220 2f20 666f 6c64  ta_folder / fold
-0001eb60: 6572 735b 7461 736b 5d20 2f20 6622 7b74  ers[task] / f"{t
-0001eb70: 6173 6b7d 5f74 7261 696e 2e63 6f6e 6c6c  ask}_train.conll
-0001eb80: 225d 0a20 2020 2020 2020 2064 6576 5f66  "].        dev_f
-0001eb90: 696c 6573 203d 205b 6461 7461 5f66 6f6c  iles = [data_fol
-0001eba0: 6465 7220 2f20 666f 6c64 6572 735b 7461  der / folders[ta
-0001ebb0: 736b 5d20 2f20 6622 7b74 6173 6b7d 5f64  sk] / f"{task}_d
-0001ebc0: 6576 2e63 6f6e 6c6c 225d 0a20 2020 2020  ev.conll"].     
-0001ebd0: 2020 2074 6573 745f 6669 6c65 7320 3d20     test_files = 
-0001ebe0: 5b64 6174 615f 666f 6c64 6572 202f 2066  [data_folder / f
-0001ebf0: 6f6c 6465 7273 5b74 6173 6b5d 202f 2066  olders[task] / f
-0001ec00: 227b 7461 736b 7d5f 7465 7374 2e63 6f6e  "{task}_test.con
-0001ec10: 6c6c 225d 0a0a 2020 2020 2020 2020 7375  ll"]..        su
-0001ec20: 7065 7228 292e 5f5f 696e 6974 5f5f 280a  per().__init__(.
-0001ec30: 2020 2020 2020 2020 2020 2020 7472 6169              trai
-0001ec40: 6e5f 6669 6c65 733d 7472 6169 6e5f 6669  n_files=train_fi
-0001ec50: 6c65 732c 0a20 2020 2020 2020 2020 2020  les,.           
-0001ec60: 2064 6576 5f66 696c 6573 3d64 6576 5f66   dev_files=dev_f
-0001ec70: 696c 6573 2c0a 2020 2020 2020 2020 2020  iles,.          
-0001ec80: 2020 7465 7374 5f66 696c 6573 3d74 6573    test_files=tes
-0001ec90: 745f 6669 6c65 732c 0a20 2020 2020 2020  t_files,.       
-0001eca0: 2020 2020 2063 6f6c 756d 6e5f 666f 726d       column_form
-0001ecb0: 6174 3d63 6f6c 756d 6e73 2c0a 2020 2020  at=columns,.    
-0001ecc0: 2020 2020 2020 2020 636f 6d6d 656e 745f          comment_
-0001ecd0: 7379 6d62 6f6c 3d22 2320 6964 2022 2c0a  symbol="# id ",.
-0001ece0: 2020 2020 2020 2020 2020 2020 696e 5f6d              in_m
-0001ecf0: 656d 6f72 793d 696e 5f6d 656d 6f72 792c  emory=in_memory,
-0001ed00: 0a20 2020 2020 2020 2020 2020 202a 2a63  .            **c
-0001ed10: 6f72 7075 7361 7267 732c 0a20 2020 2020  orpusargs,.     
-0001ed20: 2020 2029 0a0a 0a63 6c61 7373 204e 4552     )...class NER
-0001ed30: 5f4d 554c 5449 5f43 4f4e 4552 5f56 3228  _MULTI_CONER_V2(
-0001ed40: 4d75 6c74 6946 696c 6543 6f6c 756d 6e43  MultiFileColumnC
-0001ed50: 6f72 7075 7329 3a0a 2020 2020 6465 6620  orpus):.    def 
-0001ed60: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
-0001ed70: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
-0001ed80: 7461 736b 3a20 7374 7220 3d20 226d 756c  task: str = "mul
-0001ed90: 7469 222c 0a20 2020 2020 2020 2062 6173  ti",.        bas
-0001eda0: 655f 7061 7468 3a20 4f70 7469 6f6e 616c  e_path: Optional
-0001edb0: 5b55 6e69 6f6e 5b73 7472 2c20 5061 7468  [Union[str, Path
-0001edc0: 5d5d 203d 204e 6f6e 652c 0a20 2020 2020  ]] = None,.     
-0001edd0: 2020 2069 6e5f 6d65 6d6f 7279 3a20 626f     in_memory: bo
-0001ede0: 6f6c 203d 2054 7275 652c 0a20 2020 2020  ol = True,.     
-0001edf0: 2020 2075 7365 5f64 6576 5f61 735f 7465     use_dev_as_te
-0001ee00: 7374 3a20 626f 6f6c 203d 2054 7275 652c  st: bool = True,
-0001ee10: 0a20 2020 2020 2020 202a 2a63 6f72 7075  .        **corpu
-0001ee20: 7361 7267 732c 0a20 2020 2029 202d 3e20  sargs,.    ) -> 
-0001ee30: 4e6f 6e65 3a0a 2020 2020 2020 2020 2222  None:.        ""
-0001ee40: 2249 6e69 7469 616c 697a 6520 7468 6520  "Initialize the 
-0001ee50: 4d75 6c74 6943 6f4e 6572 2056 3220 636f  MultiCoNer V2 co
-0001ee60: 7270 7573 2066 6f72 2074 6865 2053 656d  rpus for the Sem
-0001ee70: 6576 616c 3230 3233 2077 6f72 6b73 686f  eval2023 worksho
-0001ee80: 702e 0a0a 2020 2020 2020 2020 5468 6973  p...        This
-0001ee90: 2069 7320 6f6e 6c79 2070 6f73 7369 626c   is only possibl
-0001eea0: 6520 6966 2079 6f75 2776 6520 6170 706c  e if you've appl
-0001eeb0: 6965 6420 616e 6420 646f 776e 6c6f 6164  ied and download
-0001eec0: 6564 2069 7420 746f 2079 6f75 7220 6d61  ed it to your ma
-0001eed0: 6368 696e 652e 0a20 2020 2020 2020 2041  chine..        A
-0001eee0: 7070 6c79 2066 6f72 2074 6865 2063 6f72  pply for the cor
-0001eef0: 7075 7320 6672 6f6d 2068 6572 6520 6874  pus from here ht
-0001ef00: 7470 733a 2f2f 6d75 6c74 6963 6f6e 6572  tps://multiconer
-0001ef10: 2e67 6974 6875 622e 696f 2f64 6174 6173  .github.io/datas
-0001ef20: 6574 2061 6e64 2075 6e70 6163 6b20 7468  et and unpack th
-0001ef30: 6520 2e7a 6970 2066 696c 6527 7320 636f  e .zip file's co
-0001ef40: 6e74 656e 7420 696e 746f 0a20 2020 2020  ntent into.     
-0001ef50: 2020 2061 2066 6f6c 6465 7220 6361 6c6c     a folder call
-0001ef60: 6564 2027 6e65 725f 6d75 6c74 695f 636f  ed 'ner_multi_co
-0001ef70: 6e65 725f 7632 272e 2054 6865 6e20 7365  ner_v2'. Then se
-0001ef80: 7420 7468 6520 6261 7365 5f70 6174 6820  t the base_path 
-0001ef90: 7061 7261 6d65 7465 7220 696e 2074 6865  parameter in the
-0001efa0: 2063 6f6e 7374 7275 6374 6f72 2074 6f20   constructor to 
-0001efb0: 7468 6520 7061 7468 2074 6f20 7468 650a  the path to the.
-0001efc0: 2020 2020 2020 2020 7061 7265 6e74 2064          parent d
-0001efd0: 6972 6563 746f 7279 2077 6865 7265 2074  irectory where t
-0001efe0: 6865 206e 6572 5f6d 756c 7469 5f63 6f6e  he ner_multi_con
-0001eff0: 6572 5f76 3220 666f 6c64 6572 2072 6573  er_v2 folder res
-0001f000: 6964 6573 2e20 596f 7520 6361 6e20 616c  ides. You can al
-0001f010: 736f 2063 7265 6174 6520 7468 6520 6d75  so create the mu
-0001f020: 6c74 6963 6f6e 6572 2069 6e0a 2020 2020  lticoner in.    
-0001f030: 2020 2020 7468 6520 7b46 4c41 4952 5f43      the {FLAIR_C
-0001f040: 4143 4845 5f52 4f4f 547d 2f64 6174 6173  ACHE_ROOT}/datas
-0001f050: 6574 7320 666f 6c64 6572 2074 6f20 6c65  ets folder to le
-0001f060: 6176 6520 7468 6520 7061 7468 2065 6d70  ave the path emp
-0001f070: 7479 2e0a 2020 2020 2020 2020 3a70 6172  ty..        :par
-0001f080: 616d 2062 6173 655f 7061 7468 3a20 5061  am base_path: Pa
-0001f090: 7468 2074 6f20 7468 6520 6e65 725f 6d75  th to the ner_mu
-0001f0a0: 6c74 695f 636f 6e65 725f 7632 2063 6f72  lti_coner_v2 cor
-0001f0b0: 7075 7320 2869 2e65 2e20 276e 6572 5f6d  pus (i.e. 'ner_m
-0001f0c0: 756c 7469 5f63 6f6e 6572 5f76 3227 2066  ulti_coner_v2' f
-0001f0d0: 6f6c 6465 7229 206f 6e20 796f 7572 206d  older) on your m
-0001f0e0: 6163 6869 6e65 0a20 2020 2020 2020 2050  achine.        P
-0001f0f0: 4f53 2074 6167 7320 6f72 2063 6875 6e6b  OS tags or chunk
-0001f100: 7320 7265 7370 6563 7469 7665 6c79 0a20  s respectively. 
-0001f110: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
-0001f120: 5f6d 656d 6f72 793a 2049 6620 5472 7565  _memory: If True
-0001f130: 2c20 6b65 6570 7320 6461 7461 7365 7420  , keeps dataset 
-0001f140: 696e 206d 656d 6f72 7920 6769 7669 6e67  in memory giving
-0001f150: 2073 7065 6564 7570 7320 696e 2074 7261   speedups in tra
-0001f160: 696e 696e 672e 0a20 2020 2020 2020 203a  ining..        :
-0001f170: 7061 7261 6d20 7573 655f 6465 765f 6173  param use_dev_as
-0001f180: 5f74 6573 743a 2049 6620 5472 7565 2c20  _test: If True, 
-0001f190: 6974 2075 7365 7320 7468 6520 6465 7620  it uses the dev 
-0001f1a0: 7365 7420 6173 2074 6573 7420 7365 7420  set as test set 
-0001f1b0: 616e 6420 7361 6d70 6c65 7320 7261 6e64  and samples rand
-0001f1c0: 6f6d 2074 7261 696e 696e 6720 6461 7461  om training data
-0001f1d0: 2066 6f72 2061 2064 6576 2073 706c 6974   for a dev split
-0001f1e0: 2e0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
-0001f1f0: 2074 6173 6b3a 2065 6974 6865 7220 276d   task: either 'm
-0001f200: 756c 7469 272c 2027 636f 6465 2d73 7769  ulti', 'code-swi
-0001f210: 7463 6827 2c20 6f72 2074 6865 206c 616e  tch', or the lan
-0001f220: 6775 6167 6520 636f 6465 2066 6f72 206f  guage code for o
-0001f230: 6e65 206f 6620 7468 6520 6d6f 6e6f 2074  ne of the mono t
-0001f240: 6173 6b73 2e0a 2020 2020 2020 2020 2222  asks..        ""
-0001f250: 220a 2020 2020 2020 2020 6261 7365 5f70  ".        base_p
-0001f260: 6174 6820 3d20 6b6f 6c69 6272 692e 6361  ath = kolibri.ca
-0001f270: 6368 655f 726f 6f74 202f 2022 6461 7461  che_root / "data
-0001f280: 7365 7473 2220 6966 206e 6f74 2062 6173  sets" if not bas
-0001f290: 655f 7061 7468 2065 6c73 6520 5061 7468  e_path else Path
-0001f2a0: 2862 6173 655f 7061 7468 290a 0a20 2020  (base_path)..   
-0001f2b0: 2020 2020 2066 6f6c 6465 7273 203d 207b       folders = {
-0001f2c0: 0a20 2020 2020 2020 2020 2020 2022 626e  .            "bn
-0001f2d0: 223a 2022 424e 2d42 616e 676c 6122 2c0a  ": "BN-Bangla",.
-0001f2e0: 2020 2020 2020 2020 2020 2020 2264 6522              "de"
-0001f2f0: 3a20 2244 452d 4765 726d 616e 222c 0a20  : "DE-German",. 
-0001f300: 2020 2020 2020 2020 2020 2022 656e 223a             "en":
-0001f310: 2022 454e 2d45 6e67 6c69 7368 222c 0a20   "EN-English",. 
-0001f320: 2020 2020 2020 2020 2020 2022 6573 223a             "es":
-0001f330: 2022 4553 2d45 7370 616e 6973 6822 2c0a   "ES-Espanish",.
-0001f340: 2020 2020 2020 2020 2020 2020 2266 6122              "fa"
-0001f350: 3a20 2246 412d 4661 7273 6922 2c0a 2020  : "FA-Farsi",.  
-0001f360: 2020 2020 2020 2020 2020 2266 7222 3a20            "fr": 
-0001f370: 2246 522d 4672 656e 6368 222c 0a20 2020  "FR-French",.   
-0001f380: 2020 2020 2020 2020 2022 6869 223a 2022           "hi": "
-0001f390: 4849 2d48 696e 6469 222c 0a20 2020 2020  HI-Hindi",.     
-0001f3a0: 2020 2020 2020 2022 6974 223a 2022 4954         "it": "IT
-0001f3b0: 2d49 7461 6c69 616e 222c 0a20 2020 2020  -Italian",.     
-0001f3c0: 2020 2020 2020 2022 7074 223a 2022 5054         "pt": "PT
-0001f3d0: 2d50 6f72 7475 6775 6573 6522 2c0a 2020  -Portuguese",.  
-0001f3e0: 2020 2020 2020 2020 2020 2273 7622 3a20            "sv": 
-0001f3f0: 2253 562d 5377 6564 6973 6822 2c0a 2020  "SV-Swedish",.  
-0001f400: 2020 2020 2020 2020 2020 2275 6b22 3a20            "uk": 
-0001f410: 2255 4b2d 556b 7261 696e 6961 6e22 2c0a  "UK-Ukrainian",.
-0001f420: 2020 2020 2020 2020 2020 2020 227a 6822              "zh"
-0001f430: 3a20 225a 482d 4368 696e 6573 6522 2c0a  : "ZH-Chinese",.
-0001f440: 2020 2020 2020 2020 7d0a 0a20 2020 2020          }..     
-0001f450: 2020 2070 6f73 7369 626c 655f 7461 736b     possible_task
-0001f460: 7320 3d20 5b2a 6c69 7374 2866 6f6c 6465  s = [*list(folde
-0001f470: 7273 2e6b 6579 7328 2929 2c20 226d 756c  rs.keys()), "mul
-0001f480: 7469 225d 0a20 2020 2020 2020 2074 6173  ti"].        tas
-0001f490: 6b20 3d20 7461 736b 2e6c 6f77 6572 2829  k = task.lower()
-0001f4a0: 0a0a 2020 2020 2020 2020 6966 2074 6173  ..        if tas
-0001f4b0: 6b20 6e6f 7420 696e 2070 6f73 7369 626c  k not in possibl
-0001f4c0: 655f 7461 736b 733a 0a20 2020 2020 2020  e_tasks:.       
-0001f4d0: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
-0001f4e0: 4572 726f 7228 6622 7461 736b 2068 6173  Error(f"task has
-0001f4f0: 2074 6f20 6265 206f 6e65 206f 6620 7b70   to be one of {p
-0001f500: 6f73 7369 626c 655f 7461 736b 737d 2c20  ossible_tasks}, 
-0001f510: 6275 7420 6973 2027 7b74 6173 6b7d 2722  but is '{task}'"
-0001f520: 290a 0a20 2020 2020 2020 2023 2063 6f6c  )..        # col
-0001f530: 756d 6e20 666f 726d 6174 0a20 2020 2020  umn format.     
-0001f540: 2020 2063 6f6c 756d 6e73 203d 207b 303a     columns = {0:
-0001f550: 2022 7465 7874 222c 2033 3a20 226e 6572   "text", 3: "ner
-0001f560: 227d 0a0a 2020 2020 2020 2020 2320 7468  "}..        # th
-0001f570: 6973 2064 6174 6173 6574 206e 616d 650a  is dataset name.
-0001f580: 2020 2020 2020 2020 6461 7461 7365 745f          dataset_
-0001f590: 6e61 6d65 203d 2073 656c 662e 5f5f 636c  name = self.__cl
-0001f5a0: 6173 735f 5f2e 5f5f 6e61 6d65 5f5f 2e6c  ass__.__name__.l
-0001f5b0: 6f77 6572 2829 0a0a 2020 2020 2020 2020  ower()..        
-0001f5c0: 6461 7461 5f66 6f6c 6465 7220 3d20 6261  data_folder = ba
-0001f5d0: 7365 5f70 6174 6820 2f20 6461 7461 7365  se_path / datase
-0001f5e0: 745f 6e61 6d65 202f 2022 7472 6169 6e5f  t_name / "train_
-0001f5f0: 6465 7622 0a0a 2020 2020 2020 2020 6966  dev"..        if
-0001f600: 206e 6f74 2064 6174 615f 666f 6c64 6572   not data_folder
-0001f610: 2e65 7869 7374 7328 293a 0a20 2020 2020  .exists():.     
-0001f620: 2020 2020 2020 206c 6f67 2e77 6172 6e69         log.warni
-0001f630: 6e67 2822 2d22 202a 2031 3030 290a 2020  ng("-" * 100).  
-0001f640: 2020 2020 2020 2020 2020 6c6f 672e 7761            log.wa
-0001f650: 726e 696e 6728 6627 5741 524e 494e 473a  rning(f'WARNING:
-0001f660: 204d 756c 7469 436f 4e65 7256 3220 6461   MultiCoNerV2 da
-0001f670: 7461 7365 7420 6e6f 7420 666f 756e 6420  taset not found 
-0001f680: 6174 2022 7b64 6174 615f 666f 6c64 6572  at "{data_folder
-0001f690: 7d22 2e27 290a 2020 2020 2020 2020 2020  }".').          
-0001f6a0: 2020 6c6f 672e 7761 726e 696e 6728 2749    log.warning('I
-0001f6b0: 6e73 7472 7563 7469 6f6e 7320 666f 7220  nstructions for 
-0001f6c0: 6f62 7461 696e 696e 6720 7468 6520 6461  obtaining the da
-0001f6d0: 7461 2063 616e 2062 6520 666f 756e 6420  ta can be found 
-0001f6e0: 6865 7265 3a20 6874 7470 733a 2f2f 6d75  here: https://mu
-0001f6f0: 6c74 6963 6f6e 6572 2e67 6974 6875 622e  lticoner.github.
-0001f700: 696f 2f64 6174 6173 6574 2227 290a 2020  io/dataset"').  
-0001f710: 2020 2020 2020 2020 2020 6c6f 672e 7761            log.wa
-0001f720: 726e 696e 6728 222d 2220 2a20 3130 3029  rning("-" * 100)
-0001f730: 0a0a 2020 2020 2020 2020 6966 2074 6173  ..        if tas
-0001f740: 6b20 3d3d 2022 6d75 6c74 6922 3a0a 2020  k == "multi":.  
-0001f750: 2020 2020 2020 2020 2020 7472 6169 6e5f            train_
-0001f760: 6669 6c65 7320 3d20 6c69 7374 2864 6174  files = list(dat
-0001f770: 615f 666f 6c64 6572 2e67 6c6f 6228 222a  a_folder.glob("*
-0001f780: 2d74 7261 696e 2e63 6f6e 6c6c 2229 290a  -train.conll")).
-0001f790: 2020 2020 2020 2020 2020 2020 6465 765f              dev_
-0001f7a0: 6669 6c65 7320 3d20 6c69 7374 2864 6174  files = list(dat
-0001f7b0: 615f 666f 6c64 6572 2e67 6c6f 6228 222a  a_folder.glob("*
-0001f7c0: 2d64 6576 2e63 6f6e 6c6c 2229 290a 2020  -dev.conll")).  
-0001f7d0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0001f7e0: 2020 2020 2020 2020 7472 6169 6e5f 6669          train_fi
-0001f7f0: 6c65 7320 3d20 5b64 6174 615f 666f 6c64  les = [data_fold
-0001f800: 6572 202f 2066 227b 7461 736b 7d2d 7472  er / f"{task}-tr
-0001f810: 6169 6e2e 636f 6e6c 6c22 5d0a 2020 2020  ain.conll"].    
-0001f820: 2020 2020 2020 2020 6465 765f 6669 6c65          dev_file
-0001f830: 7320 3d20 5b64 6174 615f 666f 6c64 6572  s = [data_folder
-0001f840: 202f 2066 227b 7461 736b 7d2d 6465 762e   / f"{task}-dev.
-0001f850: 636f 6e6c 6c22 5d0a 2020 2020 2020 2020  conll"].        
-0001f860: 7465 7374 5f66 696c 6573 203d 205b 5d0a  test_files = [].
-0001f870: 0a20 2020 2020 2020 2069 6620 7573 655f  .        if use_
-0001f880: 6465 765f 6173 5f74 6573 743a 0a20 2020  dev_as_test:.   
-0001f890: 2020 2020 2020 2020 2074 6573 745f 6669           test_fi
-0001f8a0: 6c65 7320 3d20 6465 765f 6669 6c65 730a  les = dev_files.
-0001f8b0: 2020 2020 2020 2020 2020 2020 6465 765f              dev_
-0001f8c0: 6669 6c65 7320 3d20 5b5d 0a20 2020 2020  files = [].     
-0001f8d0: 2020 2073 7570 6572 2829 2e5f 5f69 6e69     super().__ini
-0001f8e0: 745f 5f28 0a20 2020 2020 2020 2020 2020  t__(.           
-0001f8f0: 2074 7261 696e 5f66 696c 6573 3d74 7261   train_files=tra
-0001f900: 696e 5f66 696c 6573 2c0a 2020 2020 2020  in_files,.      
-0001f910: 2020 2020 2020 6465 765f 6669 6c65 733d        dev_files=
-0001f920: 6465 765f 6669 6c65 732c 0a20 2020 2020  dev_files,.     
-0001f930: 2020 2020 2020 2074 6573 745f 6669 6c65         test_file
-0001f940: 733d 7465 7374 5f66 696c 6573 2c0a 2020  s=test_files,.  
-0001f950: 2020 2020 2020 2020 2020 636f 6c75 6d6e            column
-0001f960: 5f66 6f72 6d61 743d 636f 6c75 6d6e 732c  _format=columns,
-0001f970: 0a20 2020 2020 2020 2020 2020 2063 6f6d  .            com
-0001f980: 6d65 6e74 5f73 796d 626f 6c3d 2223 2069  ment_symbol="# i
-0001f990: 6420 222c 0a20 2020 2020 2020 2020 2020  d ",.           
-0001f9a0: 2069 6e5f 6d65 6d6f 7279 3d69 6e5f 6d65   in_memory=in_me
-0001f9b0: 6d6f 7279 2c0a 2020 2020 2020 2020 2020  mory,.          
-0001f9c0: 2020 2a2a 636f 7270 7573 6172 6773 2c0a    **corpusargs,.
-0001f9d0: 2020 2020 2020 2020 290a 0a0a 636c 6173          )...clas
-0001f9e0: 7320 4e45 525f 4d55 4c54 495f 5749 4b49  s NER_MULTI_WIKI
-0001f9f0: 414e 4e28 4d75 6c74 6943 6f72 7075 7329  ANN(MultiCorpus)
-0001fa00: 3a0a 2020 2020 6465 6620 5f5f 696e 6974  :.    def __init
-0001fa10: 5f5f 280a 2020 2020 2020 2020 7365 6c66  __(.        self
-0001fa20: 2c0a 2020 2020 2020 2020 6c61 6e67 7561  ,.        langua
-0001fa30: 6765 733a 2055 6e69 6f6e 5b73 7472 2c20  ges: Union[str, 
-0001fa40: 4c69 7374 5b73 7472 5d5d 203d 2022 656e  List[str]] = "en
-0001fa50: 222c 0a20 2020 2020 2020 2062 6173 655f  ",.        base_
-0001fa60: 7061 7468 3a20 4f70 7469 6f6e 616c 5b55  path: Optional[U
-0001fa70: 6e69 6f6e 5b73 7472 2c20 5061 7468 5d5d  nion[str, Path]]
-0001fa80: 203d 204e 6f6e 652c 0a20 2020 2020 2020   = None,.       
-0001fa90: 2069 6e5f 6d65 6d6f 7279 3a20 626f 6f6c   in_memory: bool
-0001faa0: 203d 2046 616c 7365 2c0a 2020 2020 2020   = False,.      
-0001fab0: 2020 2a2a 636f 7270 7573 6172 6773 2c0a    **corpusargs,.
-0001fac0: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
-0001fad0: 2020 2020 2020 2022 2222 496e 6974 6961         """Initia
-0001fae0: 6c69 7a65 2074 6865 2057 6b69 416e 6e20  lize the WkiAnn 
-0001faf0: 636f 7270 7573 2066 6f72 2063 726f 7373  corpus for cross
-0001fb00: 2d6c 696e 6775 616c 204e 4552 2063 6f6e  -lingual NER con
-0001fb10: 7369 7374 696e 6720 6f66 2064 6174 6173  sisting of datas
-0001fb20: 6574 7320 6672 6f6d 2032 3832 206c 616e  ets from 282 lan
-0001fb30: 6775 6167 6573 2074 6861 7420 6578 6973  guages that exis
-0001fb40: 7420 696e 2057 696b 6970 6564 6961 2e0a  t in Wikipedia..
-0001fb50: 0a20 2020 2020 2020 2053 6565 2068 7474  .        See htt
-0001fb60: 7073 3a2f 2f65 6c69 7361 2d69 652e 6769  ps://elisa-ie.gi
-0001fb70: 7468 7562 2e69 6f2f 7769 6b69 616e 6e2f  thub.io/wikiann/
-0001fb80: 2066 6f72 2064 6574 6169 6c73 2061 6e64   for details and
-0001fb90: 2066 6f72 2074 6865 206c 616e 6775 6167   for the languag
-0001fba0: 6573 2061 6e64 2074 6865 6972 0a20 2020  es and their.   
-0001fbb0: 2020 2020 2072 6573 7065 6374 6976 6520       respective 
-0001fbc0: 6162 6272 6576 6561 7469 6f6e 732c 2069  abbreveations, i
-0001fbd0: 2e65 2e20 2265 6e22 2066 6f72 2065 6e67  .e. "en" for eng
-0001fbe0: 6c69 7368 2e20 286c 6963 656e 7365 3a20  lish. (license: 
-0001fbf0: 6874 7470 733a 2f2f 6f70 656e 6461 7461  https://opendata
-0001fc00: 636f 6d6d 6f6e 732e 6f72 672f 6c69 6365  commons.org/lice
-0001fc10: 6e73 6573 2f62 792f 290a 0a20 2020 2020  nses/by/)..     
-0001fc20: 2020 2050 6172 616d 6574 6572 730a 2020     Parameters.  
-0001fc30: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
-0001fc40: 0a20 2020 2020 2020 206c 616e 6775 6167  .        languag
-0001fc50: 6573 203a 2055 6e69 6f6e 5b73 7472 2c20  es : Union[str, 
-0001fc60: 4c69 7374 5b73 7472 5d5d 0a20 2020 2020  List[str]].     
-0001fc70: 2020 2020 2020 2053 686f 756c 6420 6265         Should be
-0001fc80: 2061 6e20 6162 6272 6576 6961 7469 6f6e   an abbreviation
-0001fc90: 206f 6620 6120 6c61 6e67 7561 6765 2028   of a language (
-0001fca0: 2265 6e22 2c20 2264 6522 2c2e 2e29 206f  "en", "de",..) o
-0001fcb0: 7220 6120 6c69 7374 206f 6620 6162 6272  r a list of abbr
-0001fcc0: 6576 6961 7469 6f6e 732e 0a20 2020 2020  eviations..     
-0001fcd0: 2020 2020 2020 2054 6865 2064 6174 6173         The datas
-0001fce0: 6574 7320 6f66 2061 6c6c 2070 6173 7365  ets of all passe
-0001fcf0: 6420 6c61 6e67 7561 6765 7320 7769 6c6c  d languages will
-0001fd00: 2062 6520 7361 7665 6420 696e 206f 6e65   be saved in one
-0001fd10: 204d 756c 7469 436f 7270 7573 2e0a 2020   MultiCorpus..  
-0001fd20: 2020 2020 2020 2020 2020 284e 6f74 6520            (Note 
-0001fd30: 7468 6174 2c20 6576 656e 2074 686f 7567  that, even thoug
-0001fd40: 6820 6c69 7374 6564 206f 6e20 6874 7470  h listed on http
-0001fd50: 733a 2f2f 656c 6973 612d 6965 2e67 6974  s://elisa-ie.git
-0001fd60: 6875 622e 696f 2f77 696b 6961 6e6e 2f20  hub.io/wikiann/ 
-0001fd70: 736f 6d65 2064 6174 6173 6574 7320 6172  some datasets ar
-0001fd80: 6520 656d 7074 792e 0a20 2020 2020 2020  e empty..       
-0001fd90: 2020 2020 2054 6869 7320 696e 636c 7564       This includ
-0001fda0: 6573 2022 6161 222c 2022 6368 6f22 2c20  es "aa", "cho", 
-0001fdb0: 2268 6f22 2c20 2268 7a22 2c20 2269 6922  "ho", "hz", "ii"
-0001fdc0: 2c20 226a 616d 222c 2022 6b6a 222c 2022  , "jam", "kj", "
-0001fdd0: 6b72 222c 2022 6d75 7322 2c20 226f 6c6f  kr", "mus", "olo
-0001fde0: 2220 616e 6420 2274 6379 222e 290a 2020  " and "tcy".).  
-0001fdf0: 2020 2020 2020 6261 7365 5f70 6174 6820        base_path 
-0001fe00: 3a20 556e 696f 6e5b 7374 722c 2050 6174  : Union[str, Pat
-0001fe10: 685d 2c20 6f70 7469 6f6e 616c 0a20 2020  h], optional.   
-0001fe20: 2020 2020 2020 2020 2044 6566 6175 6c74           Default
-0001fe30: 2069 7320 4e6f 6e65 2c20 6d65 616e 696e   is None, meanin
-0001fe40: 6720 7468 6174 2063 6f72 7075 7320 6765  g that corpus ge
-0001fe50: 7473 2061 7574 6f2d 646f 776e 6c6f 6164  ts auto-download
-0001fe60: 6564 2061 6e64 206c 6f61 6465 642e 2059  ed and loaded. Y
-0001fe70: 6f75 2063 616e 206f 7665 7272 6964 6520  ou can override 
-0001fe80: 7468 6973 0a20 2020 2020 2020 2020 2020  this.           
-0001fe90: 2074 6f20 706f 696e 7420 746f 2061 2064   to point to a d
-0001fea0: 6966 6665 7265 6e74 2066 6f6c 6465 7220  ifferent folder 
-0001feb0: 6275 7420 7479 7069 6361 6c6c 7920 7468  but typically th
-0001fec0: 6973 2073 686f 756c 6420 6e6f 7420 6265  is should not be
-0001fed0: 206e 6563 6573 7361 7279 2e0a 2020 2020   necessary..    
-0001fee0: 2020 2020 2020 2020 5468 6520 6461 7461          The data
-0001fef0: 2069 7320 696e 2062 696f 2d66 6f72 6d61   is in bio-forma
-0001ff00: 742e 2049 7420 7769 6c6c 2062 7920 6465  t. It will by de
-0001ff10: 6661 756c 7420 2877 6974 6820 7468 6520  fault (with the 
-0001ff20: 7374 7269 6e67 2022 6e65 7222 2061 7320  string "ner" as 
-0001ff30: 7661 6c75 6529 2062 6520 7472 616e 7366  value) be transf
-0001ff40: 6f72 6d65 640a 2020 2020 2020 2020 2020  ormed.          
-0001ff50: 2020 696e 746f 2074 6865 2062 696f 6573    into the bioes
-0001ff60: 2066 6f72 6d61 742e 2049 6620 796f 7520   format. If you 
-0001ff70: 646f 6e74 2077 616e 7420 7468 6174 2073  dont want that s
-0001ff80: 6574 2069 7420 746f 204e 6f6e 652e 0a20  et it to None.. 
-0001ff90: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
-0001ffa0: 203a 2062 6f6f 6c2c 206f 7074 696f 6e61   : bool, optiona
-0001ffb0: 6c0a 2020 2020 2020 2020 2020 2020 5370  l.            Sp
-0001ffc0: 6563 6966 7920 7468 6174 2074 6865 2064  ecify that the d
-0001ffd0: 6174 6173 6574 2073 686f 756c 6420 6265  ataset should be
-0001ffe0: 206c 6f61 6465 6420 696e 206d 656d 6f72   loaded in memor
-0001fff0: 792c 2077 6869 6368 2073 7065 6564 7320  y, which speeds 
-00020000: 7570 2074 6865 2074 7261 696e 696e 6720  up the training 
-00020010: 7072 6f63 6573 7320 6275 7420 7461 6b65  process but take
-00020020: 7320 696e 6372 6561 7365 7320 7468 6520  s increases the 
-00020030: 5241 4d20 7573 6167 6520 7369 676e 6966  RAM usage signif
-00020040: 6963 616e 746c 792e 0a20 2020 2020 2020  icantly..       
-00020050: 2022 2222 0a20 2020 2020 2020 2069 6620   """.        if 
-00020060: 6973 696e 7374 616e 6365 286c 616e 6775  isinstance(langu
-00020070: 6167 6573 2c20 7374 7229 3a0a 2020 2020  ages, str):.    
-00020080: 2020 2020 2020 2020 6c61 6e67 7561 6765          language
-00020090: 7320 3d20 5b6c 616e 6775 6167 6573 5d0a  s = [languages].
-000200a0: 0a20 2020 2020 2020 2062 6173 655f 7061  .        base_pa
-000200b0: 7468 203d 206b 6f6c 6962 7269 2e63 6163  th = kolibri.cac
-000200c0: 6865 5f72 6f6f 7420 2f20 2264 6174 6173  he_root / "datas
-000200d0: 6574 7322 2069 6620 6e6f 7420 6261 7365  ets" if not base
-000200e0: 5f70 6174 6820 656c 7365 2050 6174 6828  _path else Path(
-000200f0: 6261 7365 5f70 6174 6829 0a0a 2020 2020  base_path)..    
-00020100: 2020 2020 2320 636f 6c75 6d6e 2066 6f72      # column for
-00020110: 6d61 740a 2020 2020 2020 2020 636f 6c75  mat.        colu
-00020120: 6d6e 7320 3d20 7b30 3a20 2274 6578 7422  mns = {0: "text"
-00020130: 2c20 313a 2022 6e65 7222 7d0a 0a20 2020  , 1: "ner"}..   
-00020140: 2020 2020 2023 2074 6869 7320 6461 7461       # this data
-00020150: 7365 7420 6e61 6d65 0a20 2020 2020 2020  set name.       
-00020160: 2064 6174 6173 6574 5f6e 616d 6520 3d20   dataset_name = 
-00020170: 7365 6c66 2e5f 5f63 6c61 7373 5f5f 2e5f  self.__class__._
-00020180: 5f6e 616d 655f 5f2e 6c6f 7765 7228 290a  _name__.lower().
-00020190: 0a20 2020 2020 2020 2064 6174 615f 666f  .        data_fo
-000201a0: 6c64 6572 203d 2062 6173 655f 7061 7468  lder = base_path
-000201b0: 202f 2064 6174 6173 6574 5f6e 616d 650a   / dataset_name.
-000201c0: 0a20 2020 2020 2020 2023 2046 6f72 2065  .        # For e
-000201d0: 6163 6820 6c61 6e67 7561 6765 2069 6e20  ach language in 
-000201e0: 6c61 6e67 7561 6765 732c 2074 6865 2066  languages, the f
-000201f0: 696c 6520 6973 2064 6f77 6e6c 6f61 6465  ile is downloade
-00020200: 6420 6966 206e 6f74 2065 7869 7374 656e  d if not existen
-00020210: 740a 2020 2020 2020 2020 2320 5468 656e  t.        # Then
-00020220: 2061 2063 6f6d 6c75 6d6e 636f 7270 7573   a comlumncorpus
-00020230: 206f 6620 7468 6174 2064 6174 6120 6973   of that data is
-00020240: 2063 7265 6174 6564 2061 6e64 2073 6176   created and sav
-00020250: 6564 2069 6e20 6120 6c69 7374 0a20 2020  ed in a list.   
-00020260: 2020 2020 2023 2074 6869 7320 6c69 7374       # this list
-00020270: 2069 7320 6861 6e64 6564 2074 6f20 7468   is handed to th
-00020280: 6520 6d75 6c74 6963 6f72 7075 730a 0a20  e multicorpus.. 
-00020290: 2020 2020 2020 2023 206c 6973 7420 7468         # list th
-000202a0: 6174 2063 6f6e 7461 696e 7320 7468 6520  at contains the 
-000202b0: 636f 6c75 6d6e 636f 706f 7261 0a20 2020  columncopora.   
-000202c0: 2020 2020 2063 6f72 706f 7261 3a20 4c69       corpora: Li
-000202d0: 7374 5b43 6f72 7075 735d 203d 205b 5d0a  st[Corpus] = [].
-000202e0: 0a20 2020 2020 2020 2067 6f6f 676c 655f  .        google_
-000202f0: 6472 6976 655f 7061 7468 203d 2022 6874  drive_path = "ht
-00020300: 7470 733a 2f2f 6472 6976 652e 676f 6f67  tps://drive.goog
-00020310: 6c65 2e63 6f6d 2f75 633f 6964 3d22 0a20  le.com/uc?id=". 
-00020320: 2020 2020 2020 2023 2064 6f77 6e6c 6f61         # downloa
-00020330: 6420 6461 7461 2069 6620 6e65 6365 7373  d data if necess
-00020340: 6172 790a 2020 2020 2020 2020 6669 7273  ary.        firs
-00020350: 7420 3d20 5472 7565 0a20 2020 2020 2020  t = True.       
-00020360: 2066 6f72 206c 616e 6775 6167 6520 696e   for language in
-00020370: 206c 616e 6775 6167 6573 3a0a 2020 2020   languages:.    
-00020380: 2020 2020 2020 2020 6c61 6e67 7561 6765          language
-00020390: 5f66 6f6c 6465 7220 3d20 6461 7461 5f66  _folder = data_f
-000203a0: 6f6c 6465 7220 2f20 6c61 6e67 7561 6765  older / language
-000203b0: 0a20 2020 2020 2020 2020 2020 2066 696c  .            fil
-000203c0: 655f 6e61 6d65 203d 2022 7769 6b69 616e  e_name = "wikian
-000203d0: 6e2d 2220 2b20 6c61 6e67 7561 6765 202b  n-" + language +
-000203e0: 2022 2e62 696f 220a 0a20 2020 2020 2020   ".bio"..       
-000203f0: 2020 2020 2023 2069 6620 6c61 6e67 7561       # if langua
-00020400: 6765 206e 6f74 2064 6f77 6e6c 6f61 6465  ge not downloade
-00020410: 6420 7965 742c 2064 6f77 6e6c 6f61 6420  d yet, download 
-00020420: 6974 0a20 2020 2020 2020 2020 2020 2069  it.            i
-00020430: 6620 6e6f 7420 6c61 6e67 7561 6765 5f66  f not language_f
-00020440: 6f6c 6465 722e 6578 6973 7473 2829 3a0a  older.exists():.
-00020450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020460: 6966 2066 6972 7374 3a0a 2020 2020 2020  if first:.      
-00020470: 2020 2020 2020 2020 2020 2020 2020 696d                im
-00020480: 706f 7274 2074 6172 6669 6c65 0a0a 2020  port tarfile..  
-00020490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000204a0: 2020 696d 706f 7274 2067 646f 776e 0a0a    import gdown..
-000204b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000204c0: 2020 2020 6669 7273 7420 3d20 4661 6c73      first = Fals
-000204d0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-000204e0: 2020 2320 6372 6561 7465 2066 6f6c 6465    # create folde
-000204f0: 720a 2020 2020 2020 2020 2020 2020 2020  r.              
-00020500: 2020 6f73 2e6d 616b 6564 6972 7328 6c61    os.makedirs(la
-00020510: 6e67 7561 6765 5f66 6f6c 6465 7229 0a20  nguage_folder). 
-00020520: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00020530: 2067 6574 2067 6f6f 676c 6520 6472 6976   get google driv
-00020540: 6520 6964 2066 726f 6d20 6c69 7374 0a20  e id from list. 
-00020550: 2020 2020 2020 2020 2020 2020 2020 2067                 g
-00020560: 6f6f 676c 655f 6964 203d 2073 656c 662e  oogle_id = self.
-00020570: 5f67 6f6f 676c 655f 6472 6976 655f 6964  _google_drive_id
-00020580: 5f66 726f 6d5f 6c61 6e67 7561 6765 5f6e  _from_language_n
-00020590: 616d 6528 6c61 6e67 7561 6765 290a 2020  ame(language).  
-000205a0: 2020 2020 2020 2020 2020 2020 2020 7572                ur
-000205b0: 6c20 3d20 676f 6f67 6c65 5f64 7269 7665  l = google_drive
-000205c0: 5f70 6174 6820 2b20 676f 6f67 6c65 5f69  _path + google_i
-000205d0: 640a 0a20 2020 2020 2020 2020 2020 2020  d..             
-000205e0: 2020 2023 2064 6f77 6e6c 6f61 6420 6672     # download fr
-000205f0: 6f6d 2067 6f6f 676c 6520 6472 6976 650a  om google drive.
-00020600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020610: 6764 6f77 6e2e 646f 776e 6c6f 6164 2875  gdown.download(u
-00020620: 726c 2c20 7374 7228 6c61 6e67 7561 6765  rl, str(language
-00020630: 5f66 6f6c 6465 7220 2f20 6c61 6e67 7561  _folder / langua
-00020640: 6765 2920 2b20 222e 7461 722e 677a 2229  ge) + ".tar.gz")
-00020650: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00020660: 2020 2320 756e 7a69 700a 2020 2020 2020    # unzip.      
-00020670: 2020 2020 2020 2020 2020 6c6f 672e 696e            log.in
-00020680: 666f 2822 4578 7472 6163 7469 6e67 2064  fo("Extracting d
-00020690: 6174 612e 2e2e 2229 0a20 2020 2020 2020  ata...").       
-000206a0: 2020 2020 2020 2020 2074 6172 203d 2074           tar = t
-000206b0: 6172 6669 6c65 2e6f 7065 6e28 7374 7228  arfile.open(str(
-000206c0: 6c61 6e67 7561 6765 5f66 6f6c 6465 7220  language_folder 
-000206d0: 2f20 6c61 6e67 7561 6765 2920 2b20 222e  / language) + ".
-000206e0: 7461 722e 677a 222c 2022 723a 677a 2229  tar.gz", "r:gz")
-000206f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00020700: 2023 2074 6172 2e65 7874 7261 6374 616c   # tar.extractal
-00020710: 6c28 6c61 6e67 7561 6765 5f66 6f6c 6465  l(language_folde
-00020720: 722c 6d65 6d62 6572 733d 5b74 6172 2e67  r,members=[tar.g
-00020730: 6574 6d65 6d62 6572 2866 696c 655f 6e61  etmember(file_na
-00020740: 6d65 295d 290a 2020 2020 2020 2020 2020  me)]).          
-00020750: 2020 2020 2020 7461 722e 6578 7472 6163        tar.extrac
-00020760: 7428 6669 6c65 5f6e 616d 652c 2073 7472  t(file_name, str
-00020770: 286c 616e 6775 6167 655f 666f 6c64 6572  (language_folder
-00020780: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
-00020790: 2020 2074 6172 2e63 6c6f 7365 2829 0a20     tar.close(). 
-000207a0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-000207b0: 6f67 2e69 6e66 6f28 222e 2e2e 646f 6e65  og.info("...done
-000207c0: 2e22 290a 0a20 2020 2020 2020 2020 2020  .")..           
-000207d0: 2020 2020 2023 2074 7261 6e73 666f 726d       # transform
-000207e0: 2064 6174 6120 696e 746f 2072 6571 7569   data into requi
-000207f0: 7265 6420 666f 726d 6174 0a20 2020 2020  red format.     
-00020800: 2020 2020 2020 2020 2020 2023 2074 6865             # the
-00020810: 2070 726f 6365 7373 6564 2064 6174 6173   processed datas
-00020820: 6574 2068 6173 2074 6865 2061 6464 6974  et has the addit
-00020830: 696f 6e61 6c20 656e 6469 6e67 2022 5f6e  ional ending "_n
-00020840: 6577 220a 2020 2020 2020 2020 2020 2020  ew".            
-00020850: 2020 2020 6c6f 672e 696e 666f 2822 5072      log.info("Pr
-00020860: 6f63 6573 7369 6e67 2064 6174 6173 6574  ocessing dataset
-00020870: 2e2e 2e22 290a 2020 2020 2020 2020 2020  ...").          
-00020880: 2020 2020 2020 7365 6c66 2e5f 7369 6c76        self._silv
-00020890: 6572 5f73 7461 6e64 6172 645f 746f 5f73  er_standard_to_s
-000208a0: 696d 706c 655f 6e65 725f 616e 6e6f 7461  imple_ner_annota
-000208b0: 7469 6f6e 2873 7472 286c 616e 6775 6167  tion(str(languag
-000208c0: 655f 666f 6c64 6572 202f 2066 696c 655f  e_folder / file_
-000208d0: 6e61 6d65 2929 0a20 2020 2020 2020 2020  name)).         
-000208e0: 2020 2020 2020 2023 2072 656d 6f76 6520         # remove 
-000208f0: 7468 6520 756e 7072 6f63 6573 7365 6420  the unprocessed 
-00020900: 6461 7461 7365 740a 2020 2020 2020 2020  dataset.        
-00020910: 2020 2020 2020 2020 6f73 2e72 656d 6f76          os.remov
-00020920: 6528 7374 7228 6c61 6e67 7561 6765 5f66  e(str(language_f
-00020930: 6f6c 6465 7220 2f20 6669 6c65 5f6e 616d  older / file_nam
-00020940: 6529 290a 2020 2020 2020 2020 2020 2020  e)).            
-00020950: 2020 2020 6c6f 672e 696e 666f 2822 2e2e      log.info("..
-00020960: 2e64 6f6e 652e 2229 0a0a 2020 2020 2020  .done.")..      
-00020970: 2020 2020 2020 2320 696e 6974 6961 6c69        # initiali
-00020980: 7a65 2063 6f6d 6c75 6d6e 636f 7270 7573  ze comlumncorpus
-00020990: 2061 6e64 2061 6464 2069 7420 746f 206c   and add it to l
-000209a0: 6973 740a 2020 2020 2020 2020 2020 2020  ist.            
-000209b0: 6c6f 672e 696e 666f 2866 2252 6561 6469  log.info(f"Readi
-000209c0: 6e67 2064 6174 6120 666f 7220 6c61 6e67  ng data for lang
-000209d0: 7561 6765 207b 6c61 6e67 7561 6765 7d22  uage {language}"
-000209e0: 290a 2020 2020 2020 2020 2020 2020 636f  ).            co
-000209f0: 7270 203d 2043 6f6c 756d 6e43 6f72 7075  rp = ColumnCorpu
-00020a00: 7328 0a20 2020 2020 2020 2020 2020 2020  s(.             
-00020a10: 2020 2064 6174 615f 666f 6c64 6572 3d6c     data_folder=l
-00020a20: 616e 6775 6167 655f 666f 6c64 6572 2c0a  anguage_folder,.
-00020a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020a40: 636f 6c75 6d6e 5f66 6f72 6d61 743d 636f  column_format=co
-00020a50: 6c75 6d6e 732c 0a20 2020 2020 2020 2020  lumns,.         
-00020a60: 2020 2020 2020 2074 7261 696e 5f66 696c         train_fil
-00020a70: 653d 6669 6c65 5f6e 616d 6520 2b20 225f  e=file_name + "_
-00020a80: 6e65 7722 2c0a 2020 2020 2020 2020 2020  new",.          
-00020a90: 2020 2020 2020 696e 5f6d 656d 6f72 793d        in_memory=
-00020aa0: 696e 5f6d 656d 6f72 792c 0a20 2020 2020  in_memory,.     
-00020ab0: 2020 2020 2020 2020 2020 202a 2a63 6f72             **cor
-00020ac0: 7075 7361 7267 732c 0a20 2020 2020 2020  pusargs,.       
-00020ad0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
-00020ae0: 2020 2063 6f72 706f 7261 2e61 7070 656e     corpora.appen
-00020af0: 6428 636f 7270 290a 2020 2020 2020 2020  d(corp).        
-00020b00: 2020 2020 6c6f 672e 696e 666f 2822 2e2e      log.info("..
-00020b10: 2e64 6f6e 652e 2229 0a0a 2020 2020 2020  .done.")..      
-00020b20: 2020 7375 7065 7228 292e 5f5f 696e 6974    super().__init
-00020b30: 5f5f 280a 2020 2020 2020 2020 2020 2020  __(.            
-00020b40: 636f 7270 6f72 612c 0a20 2020 2020 2020  corpora,.       
-00020b50: 2020 2020 206e 616d 653d 2277 696b 6961       name="wikia
-00020b60: 6e6e 222c 0a20 2020 2020 2020 2029 0a0a  nn",.        )..
-00020b70: 2020 2020 6465 6620 5f73 696c 7665 725f      def _silver_
-00020b80: 7374 616e 6461 7264 5f74 6f5f 7369 6d70  standard_to_simp
-00020b90: 6c65 5f6e 6572 5f61 6e6e 6f74 6174 696f  le_ner_annotatio
-00020ba0: 6e28 7365 6c66 2c20 6461 7461 5f66 696c  n(self, data_fil
-00020bb0: 653a 2055 6e69 6f6e 5b73 7472 2c20 5061  e: Union[str, Pa
-00020bc0: 7468 5d29 3a0a 2020 2020 2020 2020 7769  th]):.        wi
-00020bd0: 7468 206f 7065 6e28 6461 7461 5f66 696c  th open(data_fil
-00020be0: 652c 2065 6e63 6f64 696e 673d 2275 7466  e, encoding="utf
-00020bf0: 2d38 2229 2061 7320 665f 7265 6164 2c20  -8") as f_read, 
-00020c00: 6f70 656e 280a 2020 2020 2020 2020 2020  open(.          
-00020c10: 2020 7374 7228 6461 7461 5f66 696c 6529    str(data_file)
-00020c20: 202b 2022 5f6e 6577 222c 2022 772b 222c   + "_new", "w+",
-00020c30: 2065 6e63 6f64 696e 673d 2275 7466 2d38   encoding="utf-8
-00020c40: 220a 2020 2020 2020 2020 2920 6173 2066  ".        ) as f
-00020c50: 5f77 7269 7465 3a0a 2020 2020 2020 2020  _write:.        
-00020c60: 2020 2020 7768 696c 6520 5472 7565 3a0a      while True:.
-00020c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020c80: 6c69 6e65 203d 2066 5f72 6561 642e 7265  line = f_read.re
-00020c90: 6164 6c69 6e65 2829 0a20 2020 2020 2020  adline().       
-00020ca0: 2020 2020 2020 2020 2069 6620 6c69 6e65           if line
-00020cb0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00020cc0: 2020 2020 2020 6966 206c 696e 6520 3d3d        if line ==
-00020cd0: 2022 5c6e 223a 0a20 2020 2020 2020 2020   "\n":.         
-00020ce0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00020cf0: 5f77 7269 7465 2e77 7269 7465 286c 696e  _write.write(lin
-00020d00: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
-00020d10: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00020d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020d30: 2020 2020 206c 6973 7465 203d 206c 696e       liste = lin
-00020d40: 652e 7370 6c69 7428 290a 2020 2020 2020  e.split().      
-00020d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020d60: 2020 665f 7772 6974 652e 7772 6974 6528    f_write.write(
-00020d70: 6c69 7374 655b 305d 202b 2022 2022 202b  liste[0] + " " +
-00020d80: 206c 6973 7465 5b2d 315d 202b 2022 5c6e   liste[-1] + "\n
-00020d90: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
-00020da0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00020db0: 2020 2020 2020 2020 2020 2020 2062 7265               bre
-00020dc0: 616b 0a0a 2020 2020 6465 6620 5f67 6f6f  ak..    def _goo
-00020dd0: 676c 655f 6472 6976 655f 6964 5f66 726f  gle_drive_id_fro
-00020de0: 6d5f 6c61 6e67 7561 6765 5f6e 616d 6528  m_language_name(
-00020df0: 7365 6c66 2c20 6c61 6e67 7561 6765 293a  self, language):
-00020e00: 0a20 2020 2020 2020 206c 616e 6775 6167  .        languag
-00020e10: 6573 5f69 6473 203d 207b 0a20 2020 2020  es_ids = {.     
-00020e20: 2020 2020 2020 2022 6161 223a 2022 3174         "aa": "1t
-00020e30: 4444 6c79 644b 7137 4b51 5133 5f32 3359  DDlydKq7KQQ3_23Y
-00020e40: 7362 746b 6534 484a 4f65 3473 6e49 6b22  sbtke4HJOe4snIk"
-00020e50: 2c20 2023 206c 6565 720a 2020 2020 2020  ,  # leer.      
-00020e60: 2020 2020 2020 2261 6222 3a20 2231 6842        "ab": "1hB
-00020e70: 3852 456a 3258 415f 3044 6a49 3968 6451  8REj2XA_0DjI9hdQ
-00020e80: 764e 7653 4470 7542 4962 3871 5266 222c  vNvSDpuBIb8qRf",
-00020e90: 0a20 2020 2020 2020 2020 2020 2022 6163  .            "ac
-00020ea0: 6522 3a20 2231 5745 4e4a 5332 7070 4863  e": "1WENJS2ppHc
-00020eb0: 5a71 6142 4558 525a 796b 327a 592d 5071  ZqaBEXRZyk2zY-Pq
-00020ec0: 586b 546b 6747 222c 0a20 2020 2020 2020  XkTkgG",.       
-00020ed0: 2020 2020 2022 6164 7922 3a20 2231 6e36       "ady": "1n6
-00020ee0: 4f6e 3857 5744 4878 456f 7962 6a37 4639  On8WWDHxEoybj7F9
-00020ef0: 4b31 3564 5f66 6b47 5079 364b 674f 222c  K15d_fkGPy6KgO",
-00020f00: 0a20 2020 2020 2020 2020 2020 2022 6166  .            "af
-00020f10: 223a 2022 3143 5042 2d30 4244 3274 6733  ": "1CPB-0BD2tg3
-00020f20: 7a49 5436 3044 3368 6d4a 5430 6935 4f5f  zIT60D3hmJT0i5O_
-00020f30: 534b 6a61 3022 2c0a 2020 2020 2020 2020  SKja0",.        
-00020f40: 2020 2020 2261 6b22 3a20 2231 6c32 766c      "ak": "1l2vl
-00020f50: 4748 6e51 7776 6d39 5868 5735 532d 3430  GHnQwvm9XhW5S-40
-00020f60: 3366 6574 7755 5868 426c 5a6d 222c 0a20  3fetwUXhBlZm",. 
-00020f70: 2020 2020 2020 2020 2020 2022 616c 7322             "als"
-00020f80: 3a20 2231 3936 7879 596a 6862 6965 3773  : "196xyYjhbie7s
-00020f90: 594c 484c 5a48 576b 6b75 724f 7751 4c69  YLHLZHWkkurOwQLi
-00020fa0: 3877 4b2d 222c 0a20 2020 2020 2020 2020  8wK-",.         
-00020fb0: 2020 2022 616d 223a 2022 3175 6731 4945     "am": "1ug1IE
-00020fc0: 6f45 784b 4433 7857 7076 665a 7072 4150  oExKD3xWpvfZprAP
-00020fd0: 5351 6938 3259 4639 4365 7422 2c0a 2020  SQi82YF9Cet",.  
-00020fe0: 2020 2020 2020 2020 2020 2261 6e22 3a20            "an": 
-00020ff0: 2231 444e 4c67 504f 414f 7347 5a42 5964  "1DNLgPOAOsGZBYd
-00021000: 3672 4335 6464 687a 7663 395f 4474 576e  6rC5ddhzvc9_DtWn
-00021010: 6b32 222c 0a20 2020 2020 2020 2020 2020  k2",.           
-00021020: 2022 616e 6722 3a20 2231 575f 3074 6937   "ang": "1W_0ti7
-00021030: 546c 3841 6b71 4d39 316c 5243 4d50 5745  Tl8AkqM91lRCMPWE
-00021040: 7555 6e50 4f41 5a72 6f56 222c 0a20 2020  uUnPOAZroV",.   
-00021050: 2020 2020 2020 2020 2022 6172 223a 2022           "ar": "
-00021060: 3174 7976 6433 3275 6445 5147 5f63 4e65  1tyvd32udEQG_cNe
-00021070: 5670 6144 3549 3266 7876 4363 3658 4b49  VpaD5I2fxvCc6XKI
-00021080: 5322 2c0a 2020 2020 2020 2020 2020 2020  S",.            
-00021090: 2261 7263 223a 2022 3168 534f 4279 5374  "arc": "1hSOBySt
-000210a0: 7150 6d50 3362 3948 6651 3339 4563 6c55  qPmP3b9HfQ39EclU
-000210b0: 5a47 6f38 494b 434d 6222 2c0a 2020 2020  ZGo8IKCMb",.    
-000210c0: 2020 2020 2020 2020 2261 727a 223a 2022          "arz": "
-000210d0: 3143 4b57 355a 6878 5470 4948 6d63 384a  1CKW5ZhxTpIHmc8J
-000210e0: 7435 4a4c 7a5f 354f 3643 7238 4963 7361  t5JLz_5O6Cr8Icsa
-000210f0: 6e22 2c0a 2020 2020 2020 2020 2020 2020  n",.            
-00021100: 2261 7322 3a20 2231 326f 7042 6f49 7765  "as": "12opBoIwe
-00021110: 424c 4d38 5863 694d 4854 3442 362d 4d41  BLM8XciMHT4B6-MA
-00021120: 614b 6459 6476 7045 222c 0a20 2020 2020  aKdYdvpE",.     
-00021130: 2020 2020 2020 2022 6173 7422 3a20 2231         "ast": "1
-00021140: 7270 3634 5078 475a 4244 6663 772d 7470  rp64PxGZBDfcw-tp
-00021150: 4642 6a4c 675f 6464 4c44 456c 4731 4949  FBjLg_ddLDElG1II
-00021160: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-00021170: 6176 223a 2022 3168 6e63 4755 726b 4731  av": "1hncGUrkG1
-00021180: 7677 4141 5167 4c74 774f 6634 3142 576b  vwAAQgLtwOf41BWk
-00021190: 486b 4576 6473 7322 2c0a 2020 2020 2020  HkEvdss",.      
-000211a0: 2020 2020 2020 2261 7922 3a20 2231 566d        "ay": "1Vm
-000211b0: 4973 5770 4d54 7a34 3432 6234 4d78 3739  IsWpMTz442b4Mx79
-000211c0: 385a 4f67 7442 3976 7175 4b51 7466 222c  8ZOgtB9vquKQtf",
-000211d0: 0a20 2020 2020 2020 2020 2020 2022 617a  .            "az
-000211e0: 223a 2022 3146 5844 5873 7642 5364 7163  ": "1FXDXsvBSdqc
-000211f0: 3747 4749 445a 7630 6871 424f 6161 7731  7GGIDZv0hqBOaaw1
-00021200: 3249 7032 2d22 2c0a 2020 2020 2020 2020  2Ip2-",.        
-00021210: 2020 2020 2261 7a62 223a 2022 3161 6d56      "azb": "1amV
-00021220: 714f 7548 4c45 6b68 6a6e 3872 6b47 556c  qOuHLEkhjn8rkGUl
-00021230: 2d6d 5864 5a6c 6141 4357 794e 5422 2c0a  -mXdZlaACWyNT",.
-00021240: 2020 2020 2020 2020 2020 2020 2262 6122              "ba"
-00021250: 3a20 2231 614c 7831 6438 4761 6749 3131  : "1aLx1d8GagI11
-00021260: 565a 5659 4f47 5179 3042 4565 5065 716f  VZVYOGQy0BEePeqo
-00021270: 5430 7833 222c 0a20 2020 2020 2020 2020  T0x3",.         
-00021280: 2020 2022 6261 7222 3a20 2231 4a5a 382d     "bar": "1JZ8-
-00021290: 6b38 5a6d 6e70 5759 495f 596c 5f63 4242  k8ZmnpWYI_Yl_cBB
-000212a0: 676a 5664 786f 4d39 4461 6369 222c 0a20  gjVdxoM9Daci",. 
-000212b0: 2020 2020 2020 2020 2020 2022 6261 742d             "bat-
-000212c0: 736d 6722 3a20 2231 7472 784b 5844 4653  smg": "1trxKXDFS
-000212d0: 654b 7379 6754 4d4b 692d 5a71 5853 4a73  eKsygTMKi-ZqXSJs
-000212e0: 3746 3930 6b35 6138 222c 0a20 2020 2020  7F90k5a8",.     
-000212f0: 2020 2020 2020 2022 6263 6c22 3a20 2231         "bcl": "1
-00021300: 4873 306b 374b 565a 3244 5073 7172 6f5a  Hs0k7KVZ2DPsqroZ
-00021310: 3463 554b 6377 5a47 3448 6450 5637 3934  4cUKcwZG4HdPV794
-00021320: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-00021330: 6265 2d78 2d6f 6c64 223a 2022 3167 614b  be-x-old": "1gaK
-00021340: 2d73 706a 316d 3665 4759 512d 5373 6e67  -spj1m6eGYQ-Ssng
-00021350: 4c78 784c 5576 5031 5652 6b30 3822 2c0a  LxxLUvP1VRk08",.
-00021360: 2020 2020 2020 2020 2020 2020 2262 6522              "be"
-00021370: 3a20 2231 5f74 7466 4f53 7939 427a 4352  : "1_ttfOSy9BzCR
-00021380: 6b49 545f 7033 6d49 6d54 3832 5852 5070  kIT_p3mImT82XRPp
-00021390: 4569 7548 222c 0a20 2020 2020 2020 2020  EiuH",.         
-000213a0: 2020 2022 6267 223a 2022 3149 7567 3667     "bg": "1Iug6g
-000213b0: 594b 656d 6230 4f72 4c54 5572 4b44 635f  YKemb0OrLTUrKDc_
-000213c0: 6336 3659 4779 7054 6643 4622 2c0a 2020  c66YGypTfCF",.  
-000213d0: 2020 2020 2020 2020 2020 2262 6822 3a20            "bh": 
-000213e0: 2231 324f 6353 464c 7539 3430 4138 7456  "12OcSFLu940A8tV
-000213f0: 514c 7849 3870 6e78 4b42 7054 655a 486d  QLxI8pnxKBpTeZHm
-00021400: 7268 222c 0a20 2020 2020 2020 2020 2020  rh",.           
-00021410: 2022 6269 223a 2022 3172 6674 567a 6953   "bi": "1rftVziS
-00021420: 5f70 7141 5278 346d 764c 4a43 3073 4b4c  _pqARx4mvLJC0sKL
-00021430: 592d 4f4c 355a 496a 4522 2c0a 2020 2020  Y-OL5ZIjE",.    
-00021440: 2020 2020 2020 2020 2262 6a6e 223a 2022          "bjn": "
-00021450: 316e 3137 6d6b 526a 5055 414f 5751 6b35  1n17mkRjPUAOWQk5
-00021460: 4c51 7332 4333 547a 3353 6878 4b30 656e  LQs2C3Tz3ShxK0en
-00021470: 5a22 2c0a 2020 2020 2020 2020 2020 2020  Z",.            
-00021480: 2262 6d22 3a20 2231 3238 3464 774f 5f73  "bm": "1284dwO_s
-00021490: 6664 7357 4537 4652 3036 4868 6642 5255  fdsWE7FR06HhfBRU
-000214a0: 6238 6550 6573 4b52 222c 0a20 2020 2020  b8ePesKR",.     
-000214b0: 2020 2020 2020 2022 626e 223a 2022 314b         "bn": "1K
-000214c0: 3244 4d31 6d54 3468 6b72 364e 6c41 4942  2DM1mT4hkr6NlAIB
-000214d0: 546a 3935 4265 5658 6367 7670 6744 6d22  Tj95BeVXcgvpgDm"
-000214e0: 2c0a 2020 2020 2020 2020 2020 2020 2262  ,.            "b
-000214f0: 6f22 3a20 2231 537a 4748 4456 4b2d 4f67  o": "1SzGHDVK-Og
-00021500: 754b 646a 5a34 4458 5769 4f4a 5672 6965  uKdjZ4DXWiOJVrie
-00021510: 3169 4865 576d 222c 0a20 2020 2020 2020  1iHeWm",.       
-00021520: 2020 2020 2022 6270 7922 3a20 2231 6d2d       "bpy": "1m-
-00021530: 6535 456f 7275 4a75 6676 7742 4567 4a4c  e5EoruJufvwBEgJL
-00021540: 6d4a 7478 366a 7a78 3634 7059 4e32 222c  mJtx6jzx64pYN2",
-00021550: 0a20 2020 2020 2020 2020 2020 2022 6272  .            "br
-00021560: 223a 2022 3178 6461 426f 4a31 446e 7749  ": "1xdaBoJ1DnwI
-00021570: 3069 4571 3767 514e 3164 5763 4142 4173  0iEq7gQN1dWcABAs
-00021580: 5f62 4d39 4822 2c0a 2020 2020 2020 2020  _bM9H",.        
-00021590: 2020 2020 2262 7322 3a20 2231 3637 6473      "bs": "167ds
-000215a0: 4230 3174 724d 5946 516c 3846 7368 7449  B01trMYFQl8FshtI
-000215b0: 6466 686a 7737 4966 564b 626b 222c 0a20  dfhjw7IfVKbk",. 
-000215c0: 2020 2020 2020 2020 2020 2022 6275 6722             "bug"
-000215d0: 3a20 2231 7943 6e65 764d 395f 4b4a 7a46  : "1yCnevM9_KJzF
-000215e0: 6b32 3756 7873 7661 5f32 304f 6163 4c6f  k27Vxsva_20OacLo
-000215f0: 3455 616d 222c 0a20 2020 2020 2020 2020  4Uam",.         
-00021600: 2020 2022 6278 7222 3a20 2231 446c 4279     "bxr": "1DlBy
-00021610: 4158 337a 422d 3955 7945 4156 4434 7774  AX3zB-9UyEAVD4wt
-00021620: 582d 5237 6d58 432d 3878 756d 222c 0a20  X-R7mXC-8xum",. 
-00021630: 2020 2020 2020 2020 2020 2022 6361 223a             "ca":
-00021640: 2022 314c 7555 6762 6439 7347 612d 3541   "1LuUgbd9sGa-5A
-00021650: 6863 7379 3331 454b 3839 6133 574f 6f77  hcsy31EK89a3WOow
-00021660: 6674 5922 2c0a 2020 2020 2020 2020 2020  ftY",.          
-00021670: 2020 2263 626b 2d7a 616d 223a 2022 316b    "cbk-zam": "1k
-00021680: 6746 3878 6f44 2d6b 494f 575a 4554 5f39  gF8xoD-kIOWZET_9
-00021690: 6b70 5f34 794e 5836 4141 586e 3650 4922  kp_4yNX6AAXn6PI"
-000216a0: 2c0a 2020 2020 2020 2020 2020 2020 2263  ,.            "c
-000216b0: 646f 223a 2022 3134 7831 7936 3631 3147  do": "14x1y6611G
-000216c0: 2d55 4145 4771 3932 5145 4852 7072 6556  -UAEGq92QEHRpreV
-000216d0: 6b59 6e6f 5543 7722 2c0a 2020 2020 2020  kYnoUCw",.      
-000216e0: 2020 2020 2020 2263 6522 3a20 2231 5155        "ce": "1QU
-000216f0: 5543 564b 412d 666b 6943 4864 334b 5433  UCVKA-fkiCHd3KT3
-00021700: 7a55 5765 6661 576e 787a 6c5a 4c75 222c  zUWefaWnxzlZLu",
-00021710: 0a20 2020 2020 2020 2020 2020 2022 6365  .            "ce
-00021720: 6222 3a20 2231 444a 5a45 3952 6661 4d6f  b": "1DJZE9RfaMo
-00021730: 504e 5848 4937 334b 4258 416d 3459 5365  PNXHI73KBXAm4YSe
-00021740: 2d5f 5943 556b 222c 0a20 2020 2020 2020  -_YCUk",.       
-00021750: 2020 2020 2022 6368 223a 2022 3159 7a41       "ch": "1YzA
-00021760: 6668 6d61 746b 6d54 706b 5a62 4163 4436  fhmatkmTpkZbAcD6
-00021770: 5838 3365 7043 677a 4435 5332 5f22 2c0a  X83epCgzD5S2_",.
-00021780: 2020 2020 2020 2020 2020 2020 2263 686f              "cho
-00021790: 223a 2022 3163 6959 3076 4633 6335 6132  ": "1ciY0vF3c5a2
-000217a0: 6d54 4f6f 5f6b 3332 4132 774d 7330 6b6c  mTOo_k32A2wMs0kl
-000217b0: 4b39 384b 6222 2c20 2023 206c 6565 720a  K98Kb",  # leer.
-000217c0: 2020 2020 2020 2020 2020 2020 2263 6872              "chr
-000217d0: 223a 2022 3145 4861 787a 3155 5a48 6e37  ": "1EHaxz1UZHn7
-000217e0: 7632 6262 527a 434c 4168 5073 4e74 527a  v2bbRzCLAhPsNtRz
-000217f0: 7247 3341 6522 2c0a 2020 2020 2020 2020  rG3Ae",.        
-00021800: 2020 2020 2263 6879 223a 2022 316e 4e57      "chy": "1nNW
-00021810: 774d 414a 7231 4b4e 647a 3362 4866 3675  wMAJr1KNdz3bHf6u
-00021820: 496e 2d74 685a 436b 6e6c 5465 4222 2c0a  In-thZCknlTeB",.
-00021830: 2020 2020 2020 2020 2020 2020 2263 6b62              "ckb
-00021840: 223a 2022 316c 6c70 6166 7463 5553 6958  ": "1llpaftcUSiX
-00021850: 435a 515a 4d64 4171 614a 5372 6877 4d64  CZQZMdAqaJSrhwMd
-00021860: 6366 3949 5622 2c0a 2020 2020 2020 2020  cf9IV",.        
-00021870: 2020 2020 2263 6f22 3a20 2231 5a50 2d38      "co": "1ZP-8
-00021880: 6f57 674d 5966 5737 6136 7736 7967 4546  oWgMYfW7a6w6ygEF
-00021890: 6b4b 4447 624e 3339 516e 446e 222c 0a20  kKDGbN39QnDn",. 
-000218a0: 2020 2020 2020 2020 2020 2022 6372 223a             "cr":
-000218b0: 2022 3153 5430 7852 6963 4c41 4734 4a64   "1ST0xRicLAG4Jd
-000218c0: 435a 7747 6461 592d 3070 4558 6f6f 5168  CZwGdaY-0pEXooQh
-000218d0: 3765 3622 2c0a 2020 2020 2020 2020 2020  7e6",.          
-000218e0: 2020 2263 7268 223a 2022 314a 6d70 7132    "crh": "1Jmpq2
-000218f0: 5856 5955 525f 5861 5855 3558 4e68 744f  XVYUR_XaXU5XNhtO
-00021900: 4d6e 7a2d 716b 7073 6770 4522 2c0a 2020  Mnz-qkpsgpE",.  
-00021910: 2020 2020 2020 2020 2020 2263 7322 3a20            "cs": 
-00021920: 2231 5679 6479 7a65 2d6a 426b 4b5f 5331  "1Vydyze-jBkK_S1
-00021930: 7556 3565 7756 5f59 3664 6277 6858 7237  uV5ewV_Y6dbwhXr7
-00021940: 6c6b 222c 0a20 2020 2020 2020 2020 2020  lk",.           
-00021950: 2022 6373 6222 3a20 2231 6e61 5579 4637   "csb": "1naUyF7
-00021960: 346c 5a50 6e6e 6f70 5864 4f71 6635 586f  4lZPnnopXdOqf5Xo
-00021970: 7232 6b54 3457 6f48 6653 222c 0a20 2020  r2kT4WoHfS",.   
-00021980: 2020 2020 2020 2020 2022 6375 223a 2022           "cu": "
-00021990: 3145 4e35 6456 5455 366a 6337 594f 5950  1EN5dVTU6jc7YOYP
-000219a0: 4348 7138 4559 5546 3331 486c 4d55 4b73  CHq8EYUF31HlMUKs
-000219b0: 3722 2c0a 2020 2020 2020 2020 2020 2020  7",.            
-000219c0: 2263 7622 3a20 2231 6745 5541 6c71 5953  "cv": "1gEUAlqYS
-000219d0: 5344 4934 5472 5743 7150 314c 5571 326e  SDI4TrWCqP1LUq2n
-000219e0: 3058 3158 456a 4e33 222c 0a20 2020 2020  0X1XEjN3",.     
-000219f0: 2020 2020 2020 2022 6379 223a 2022 3171         "cy": "1q
-00021a00: 3567 364e 4a45 3547 5866 3635 5663 5f50  5g6NJE5GXf65Vc_P
-00021a10: 3442 6e55 4d48 5134 3950 727a 2d4a 3122  4BnUMHQ49Prz-J1"
-00021a20: 2c0a 2020 2020 2020 2020 2020 2020 2264  ,.            "d
-00021a30: 6122 3a20 2231 316f 6e41 474f 4c6b 6b71  a": "11onAGOLkkq
-00021a40: 7249 774d 3738 3473 6957 6c67 2d63 6577  rIwM784siWlg-cew
-00021a50: 6135 574b 6d38 222c 0a20 2020 2020 2020  a5WKm8",.       
-00021a60: 2020 2020 2022 6465 223a 2022 3166 396e       "de": "1f9n
-00021a70: 5776 4e6b 4343 7936 5857 6864 3975 6634  WvNkCCy6XWhd9uf4
-00021a80: 4471 2d32 2d2d 477a 5361 5941 6222 2c0a  Dq-2--GzSaYAb",.
-00021a90: 2020 2020 2020 2020 2020 2020 2264 6971              "diq
-00021aa0: 223a 2022 3149 6b70 4a61 5662 454f 754f  ": "1IkpJaVbEOuO
-00021ab0: 7339 7161 795f 4b47 3972 6b78 5267 6857  s9qay_KG9rkxRghW
-00021ac0: 5a68 5750 6d22 2c0a 2020 2020 2020 2020  ZhWPm",.        
-00021ad0: 2020 2020 2264 7362 223a 2022 3168 6c45      "dsb": "1hlE
-00021ae0: 7857 614d 7468 2d32 6556 4951 3369 3373  xWaMth-2eVIQ3i3s
-00021af0: 694a 5347 2d4d 4e5f 375a 364d 5922 2c0a  iJSG-MN_7Z6MY",.
-00021b00: 2020 2020 2020 2020 2020 2020 2264 7622              "dv"
-00021b10: 3a20 2231 5770 4372 736c 4f34 4937 544d  : "1WpCrslO4I7TM
-00021b20: 6232 7561 4b56 5177 3455 3255 3871 4d73  b2uaKVQw4U2U8qMs
-00021b30: 3573 7a69 222c 0a20 2020 2020 2020 2020  5szi",.         
-00021b40: 2020 2022 647a 223a 2022 3130 5758 3532     "dz": "10WX52
-00021b50: 6550 7132 4b66 7947 6c69 7750 7659 5f35  ePq2KfyGliwPvY_5
-00021b60: 3468 496a 707a 5736 6b6c 5622 2c0a 2020  4hIjpzW6klV",.  
-00021b70: 2020 2020 2020 2020 2020 2265 6522 3a20            "ee": 
-00021b80: 2231 7459 4574 336f 4e32 4b50 7a42 5357  "1tYEt3oN2KPzBSW
-00021b90: 726b 396a 7043 716e 5733 4a31 4b58 6468  rk9jpCqnW3J1KXdh
-00021ba0: 6a7a 222c 0a20 2020 2020 2020 2020 2020  jz",.           
-00021bb0: 2022 656c 223a 2022 3163 7871 344e 5559   "el": "1cxq4NUY
-00021bc0: 6d48 7757 7345 6e35 7761 5958 6646 5361  mHwWsEn5waYXfFSa
-00021bd0: 6e6c 494e 5857 4c66 4d22 2c0a 2020 2020  nlINXWLfM",.    
-00021be0: 2020 2020 2020 2020 2265 6d6c 223a 2022          "eml": "
-00021bf0: 3137 4667 4768 505a 715a 4e74 7a62 7870  17FgGhPZqZNtzbxp
-00021c00: 544a 4f66 2d36 6e78 4575 4935 6f55 3456  TJOf-6nxEuI5oU4V
-00021c10: 6422 2c0a 2020 2020 2020 2020 2020 2020  d",.            
-00021c20: 2265 6e22 3a20 2231 6d71 7865 4350 6a78  "en": "1mqxeCPjx
-00021c30: 716d 4f37 6538 7574 6a31 4d51 7631 4349  qmO7e8utj1MQv1CI
-00021c40: 434c 4656 764b 612d 222c 0a20 2020 2020  CLFVvKa-",.     
-00021c50: 2020 2020 2020 2022 656f 223a 2022 3159         "eo": "1Y
-00021c60: 656b 6e4c 796d 4763 716a 3434 7567 3279  eknLymGcqj44ug2y
-00021c70: 6434 5037 7851 5670 534b 3237 486b 4b22  d4P7xQVpSK27HkK"
-00021c80: 2c0a 2020 2020 2020 2020 2020 2020 2265  ,.            "e
-00021c90: 7322 3a20 2231 446e 7833 4d56 5239 7235  s": "1Dnx3MVR9r5
-00021ca0: 6375 6f4f 6765 6577 3267 5438 6244 7657  cuoOgeew2gT8bDvW
-00021cb0: 704f 4b78 6b55 222c 0a20 2020 2020 2020  pOKxkU",.       
-00021cc0: 2020 2020 2022 6574 223a 2022 3151 6862       "et": "1Qhb
-00021cd0: 336b 596c 516e 4c65 6657 6d4e 696d 644e  3kYlQnLefWmNimdN
-00021ce0: 5f56 796b 6d34 6d57 7a62 6357 7922 2c0a  _Vykm4mWzbcWy",.
-00021cf0: 2020 2020 2020 2020 2020 2020 2265 7522              "eu"
-00021d00: 3a20 2231 6636 3133 7748 3838 5565 4954  : "1f613wH88UeIT
-00021d10: 5979 4253 454d 5a42 794b 2d6e 524e 4d77  YyBSEMZByK-nRNMw
-00021d20: 4c48 5473 222c 0a20 2020 2020 2020 2020  LHTs",.         
-00021d30: 2020 2022 6578 7422 3a20 2231 4430 6e4c     "ext": "1D0nL
-00021d40: 4f5a 3361 6f6c 434d 3854 5368 4952 7943  OZ3aolCM8TShIRyC
-00021d50: 6746 332d 5f4d 6857 5863 634e 222c 0a20  gF3-_MhWXccN",. 
-00021d60: 2020 2020 2020 2020 2020 2022 6661 223a             "fa":
-00021d70: 2022 3151 4f47 3135 4855 3856 665a 764a   "1QOG15HU8VfZvJ
-00021d80: 554e 4b6f 7330 3234 7849 2d4f 476d 307a  UNKos024xI-OGm0z
-00021d90: 6845 5822 2c0a 2020 2020 2020 2020 2020  hEX",.          
-00021da0: 2020 2266 6622 3a20 2231 6835 7056 6a78    "ff": "1h5pVjx
-00021db0: 4459 6371 3730 6253 7573 3330 6f71 6939  DYcq70bSus30oqi9
-00021dc0: 4b7a 446d 657a 564e 7279 222c 0a20 2020  KzDmezVNry",.   
-00021dd0: 2020 2020 2020 2020 2022 6669 223a 2022           "fi": "
-00021de0: 3179 334b 6636 7159 7353 764c 385f 6e53  1y3Kf6qYsSvL8_nS
-00021df0: 4577 4531 5936 4266 366e 696e 6150 7671  EwE1Y6Bf6ninaPvq
-00021e00: 6122 2c0a 2020 2020 2020 2020 2020 2020  a",.            
-00021e10: 2266 6975 2d76 726f 223a 2022 316f 4b55  "fiu-vro": "1oKU
-00021e20: 6971 4731 3957 6750 6433 4343 6c34 4647  iqG19WgPd3CCl4FG
-00021e30: 7564 6b35 4154 6d74 4e66 546f 5222 2c0a  udk5ATmtNfToR",.
-00021e40: 2020 2020 2020 2020 2020 2020 2266 6a22              "fj"
-00021e50: 3a20 2231 3078 444d 7571 746f 544a 6c4a  : "10xDMuqtoTJlJ
-00021e60: 4670 3567 6862 684b 664e 5752 704c 444b  Fp5ghbhKfNWRpLDK
-00021e70: 3357 3464 222c 0a20 2020 2020 2020 2020  3W4d",.         
-00021e80: 2020 2022 666f 223a 2022 3152 686a 5971     "fo": "1RhjYq
-00021e90: 6774 7269 3132 3736 4265 314e 3952 724e  gtri1276Be1N9RrN
-00021ea0: 6974 6442 4e6b 707a 6830 4a22 2c0a 2020  itdBNkpzh0J",.  
-00021eb0: 2020 2020 2020 2020 2020 2266 7222 3a20            "fr": 
-00021ec0: 2231 734b 5f54 5f2d 777a 5650 4a59 726e  "1sK_T_-wzVPJYrn
-00021ed0: 7a69 4e71 5754 7269 5535 3272 4573 5847  ziNqWTriU52rEsXG
-00021ee0: 6a6e 222c 0a20 2020 2020 2020 2020 2020  jn",.           
-00021ef0: 2022 6672 7022 3a20 2231 4e55 6d38 4232   "frp": "1NUm8B2
-00021f00: 7a43 6c42 6345 6138 6448 4c42 622d 5a67  zClBcEa8dHLBb-Zg
-00021f10: 7a45 7238 7068 6351 795a 222c 0a20 2020  zEr8phcQyZ",.   
-00021f20: 2020 2020 2020 2020 2022 6672 7222 3a20           "frr": 
-00021f30: 2231 466a 4e71 6249 556c 4f57 3164 654a  "1FjNqbIUlOW1deJ
-00021f40: 6442 3857 4375 576a 615a 6655 7a4b 7175  dB8WCuWjaZfUzKqu
-00021f50: 6a56 222c 0a20 2020 2020 2020 2020 2020  jV",.           
-00021f60: 2022 6675 7222 3a20 2231 6f71 485a 4d4b   "fur": "1oqHZMK
-00021f70: 3757 4156 386f 486f 5a4c 6a47 5230 5066  7WAV8oHoZLjGR0Pf
-00021f80: 6d4f 3338 776d 5236 5859 222c 0a20 2020  mO38wmR6XY",.   
-00021f90: 2020 2020 2020 2020 2022 6679 223a 2022           "fy": "
-00021fa0: 3144 766e 5536 6961 544a 6339 6257 6564  1DvnU6iaTJc9bWed
-00021fb0: 6d44 6b6c 4879 7838 6e7a 4b44 3173 3347  mDklHyx8nzKD1s3G
-00021fc0: 6522 2c0a 2020 2020 2020 2020 2020 2020  e",.            
-00021fd0: 2267 6122 3a20 2231 516c 3672 6837 6162  "ga": "1Ql6rh7ab
-00021fe0: 7364 5951 386c 2d33 686a 5f4d 564b 6345  sdYQ8l-3hj_MVKcE
-00021ff0: 4333 7448 4b65 4642 222c 0a20 2020 2020  C3tHKeFB",.     
-00022000: 2020 2020 2020 2022 6761 6722 3a20 2231         "gag": "1
-00022010: 7a6c 692d 684f 6c32 6162 7551 3277 7344  zli-hOl2abuQ2wsD
-00022020: 4a55 3435 7162 6230 7875 7659 7741 3361  JU45qbb0xuvYwA3a
-00022030: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-00022040: 6761 6e22 3a20 2231 7532 644f 7779 3538  gan": "1u2dOwy58
-00022050: 792d 4761 532d 7443 504a 535f 6939 5652  y-GaS-tCPJS_i9VR
-00022060: 4451 4950 5877 4372 222c 0a20 2020 2020  DQIPXwCr",.     
-00022070: 2020 2020 2020 2022 6764 223a 2022 3175         "gd": "1u
-00022080: 6d73 5570 6e67 4a69 776b 4c64 4751 6252  msUpngJiwkLdGQbR
-00022090: 7159 706b 6778 5a6a 7539 6457 6c52 7a22  qYpkgxZju9dWlRz"
-000220a0: 2c0a 2020 2020 2020 2020 2020 2020 2267  ,.            "g
-000220b0: 6c22 3a20 2231 3431 4b32 4962 4c6a 4a66  l": "141K2IbLjJf
-000220c0: 5877 4654 4966 2d6b 7468 6d6d 4730 5957  XwFTIf-kthmmG0YW
-000220d0: 6469 386c 6945 222c 0a20 2020 2020 2020  di8liE",.       
-000220e0: 2020 2020 2022 676c 6b22 3a20 2231 5a44       "glk": "1ZD
-000220f0: 6178 5136 696c 5861 6f69 766f 345f 4b6c  axQ6ilXaoivo4_Kl
-00022100: 6c61 6761 6262 7666 4f75 695a 3063 222c  lagabbvfOuiZ0c",
-00022110: 0a20 2020 2020 2020 2020 2020 2022 676e  .            "gn
-00022120: 223a 2022 3168 4d34 4d75 4361 566e 5a71  ": "1hM4MuCaVnZq
-00022130: 6e4c 2d77 2d30 4e2d 5763 5761 6732 3269  nL-w-0N-WcWag22i
-00022140: 6b56 4c74 5a22 2c0a 2020 2020 2020 2020  kVLtZ",.        
-00022150: 2020 2020 2267 6f6d 223a 2022 3142 4e4f      "gom": "1BNO
-00022160: 5377 3735 747a 5043 3077 4567 4c4f 434b  Sw75tzPC0wEgLOCK
-00022170: 6277 7539 7767 3967 634c 4f7a 7322 2c0a  bwu9wg9gcLOzs",.
-00022180: 2020 2020 2020 2020 2020 2020 2267 6f74              "got
-00022190: 223a 2022 3159 5348 5942 7458 6331 5776  ": "1YSHYBtXc1Wv
-000221a0: 5576 4d49 4850 7a36 4848 674a 7661 584b  UvMIHPz6HHgJvaXK
-000221b0: 756c 4a55 6a22 2c0a 2020 2020 2020 2020  ulJUj",.        
-000221c0: 2020 2020 2267 7522 3a20 2231 5664 4b2d      "gu": "1VdK-
-000221d0: 4232 6472 7146 774b 6738 4b44 3233 6333  B2drqFwKg8KD23c3
-000221e0: 644b 5859 2d63 5a67 434d 6764 222c 0a20  dKXY-cZgCMgd",. 
-000221f0: 2020 2020 2020 2020 2020 2022 6776 223a             "gv":
-00022200: 2022 3158 5a46 6f68 594e 624b 737a 4546   "1XZFohYNbKszEF
-00022210: 522d 562d 7944 5878 7834 3056 3431 5056  R-V-yDXxx40V41PV
-00022220: 395a 6d22 2c0a 2020 2020 2020 2020 2020  9Zm",.          
-00022230: 2020 2268 6122 3a20 2231 385a 4734 7455    "ha": "18ZG4tU
-00022240: 5530 6f77 5274 5141 3845 7933 446c 3732  U0owRtQA8Ey3Dl72
-00022250: 414c 6a72 7945 4a57 4d43 222c 0a20 2020  ALjryEJWMC",.   
-00022260: 2020 2020 2020 2020 2022 6861 6b22 3a20           "hak": 
-00022270: 2231 5151 6533 5767 7243 5762 766e 5648  "1QQe3WgrCWbvnVH
-00022280: 3432 5158 4437 4b58 346b 6968 4855 5242  42QXD7KX4kihHURB
-00022290: 305a 222c 0a20 2020 2020 2020 2020 2020  0Z",.           
-000222a0: 2022 6861 7722 3a20 2231 464c 716c 4b2d   "haw": "1FLqlK-
-000222b0: 7770 7a34 6a79 3736 3858 6251 4174 7864  wpz4jy768XbQAtxd
-000222c0: 3950 6843 2d39 6369 5037 222c 0a20 2020  9PhC-9ciP7",.   
-000222d0: 2020 2020 2020 2020 2022 6865 223a 2022           "he": "
-000222e0: 3138 4b2d 4572 6332 564f 6774 4964 736b  18K-Erc2VOgtIdsk
-000222f0: 6151 7134 4435 4133 586b 5673 7444 6d66  aQq4D5A3XkVstDmf
-00022300: 5822 2c0a 2020 2020 2020 2020 2020 2020  X",.            
-00022310: 2268 6922 3a20 2231 6c42 5261 7062 3574  "hi": "1lBRapb5t
-00022320: 6a42 7154 3137 3667 4433 364b 3579 625f  jBqT176gD36K5yb_
-00022330: 7173 6146 6575 2d6b 222c 0a20 2020 2020  qsaFeu-k",.     
-00022340: 2020 2020 2020 2022 6869 6622 3a20 2231         "hif": "1
-00022350: 3533 4d51 3947 6134 4e51 2d43 6b4b 3855  53MQ9Ga4NQ-CkK8U
-00022360: 694a 4d33 446a 4b4f 6b30 3966 6843 4f56  iJM3DjKOk09fhCOV
-00022370: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-00022380: 686f 223a 2022 3163 3141 6f53 3779 7131  ho": "1c1AoS7yq1
-00022390: 3569 566b 5445 452d 3066 3378 3235 4e54  5iVkTEE-0f3x25NT
-000223a0: 3446 3230 3242 3822 2c20 2023 206c 6565  4F202B8",  # lee
-000223b0: 720a 2020 2020 2020 2020 2020 2020 2268  r.            "h
-000223c0: 7222 3a20 2231 7753 2d55 7442 3373 4748  r": "1wS-UtB3sGH
-000223d0: 7558 4a51 5147 5230 4635 6c44 6567 6f67  uXJQQGR0F5lDegog
-000223e0: 7367 6f79 6966 222c 0a20 2020 2020 2020  sgoyif",.       
-000223f0: 2020 2020 2022 6873 6222 3a20 2231 5f33       "hsb": "1_3
-00022400: 6d4d 4c7a 4145 354f 6d58 6e32 7a36 3472  mMLzAE5OmXn2z64r
-00022410: 5733 4f77 5762 6f38 354d 6972 6264 222c  W3OwWbo85Mirbd",
-00022420: 0a20 2020 2020 2020 2020 2020 2022 6874  .            "ht
-00022430: 223a 2022 3142 7743 6146 306e 6664 676b  ": "1BwCaF0nfdgk
-00022440: 4d37 5974 3741 3764 374b 7956 6b30 4263  M7Yt7A7d7KyVk0Bc
-00022450: 7577 5047 6b22 2c0a 2020 2020 2020 2020  uwPGk",.        
-00022460: 2020 2020 2268 7522 3a20 2231 3041 6b44      "hu": "10AkD
-00022470: 6d54 7855 574e 624f 5875 594c 595a 2d5a  mTxUWNbOXuYLYZ-Z
-00022480: 5062 4c41 6447 4147 5a5a 384a 222c 0a20  PbLAdGAGZZ8J",. 
-00022490: 2020 2020 2020 2020 2020 2022 6879 223a             "hy":
-000224a0: 2022 314d 6932 6b32 616c 4a4a 7175 5431   "1Mi2k2alJJquT1
-000224b0: 7962 6433 4743 3351 5944 7374 5361 6761  ybd3GC3QYDstSaga
-000224c0: 5764 6f22 2c0a 2020 2020 2020 2020 2020  Wdo",.          
-000224d0: 2020 2268 7a22 3a20 2231 6331 6d5f 2d51    "hz": "1c1m_-Q
-000224e0: 3932 7630 4469 374e 657a 3656 7561 6363  92v0Di7Nez6Vuacc
-000224f0: 724e 3139 6938 6963 4b56 222c 2020 2320  rN19i8icKV",  # 
-00022500: 6c65 6572 0a20 2020 2020 2020 2020 2020  leer.           
-00022510: 2022 6961 223a 2022 316a 5079 7154 6d44   "ia": "1jPyqTmD
-00022520: 7556 6845 686a 3839 4e36 3036 436a 6135  uVhEhj89N606Cja5
-00022530: 6865 4a45 6263 4d6f 4d22 2c0a 2020 2020  heJEbcMoM",.    
-00022540: 2020 2020 2020 2020 2269 6422 3a20 2231          "id": "1
-00022550: 4a57 4976 4968 3866 516f 4d51 716b 3172  JWIvIh8fQoMQqk1r
-00022560: 5076 5554 6861 736b 786e 5473 3874 7366  PvUThaskxnTs8tsf
-00022570: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-00022580: 6965 223a 2022 3154 614b 526c 5474 4238  ie": "1TaKRlTtB8
-00022590: 2d57 7175 3473 6676 7836 4a51 4b49 7567  -Wqu4sfvx6JQKIug
-000225a0: 416c 6730 7056 2d22 2c0a 2020 2020 2020  Alg0pV-",.      
-000225b0: 2020 2020 2020 2269 6722 3a20 2231 354e        "ig": "15N
-000225c0: 4641 6632 5178 3642 5853 6a76 5f4f 756e  FAf2Qx6BXSjv_Oun
-000225d0: 395f 3351 5242 574e 6e34 3967 3836 222c  9_3QRBWNn49g86",
-000225e0: 0a20 2020 2020 2020 2020 2020 2022 6969  .            "ii
-000225f0: 223a 2022 3171 6c64 474a 6b4d 4f4d 4b77  ": "1qldGJkMOMKw
-00022600: 5931 3344 7063 6762 7851 4362 6666 304b  Y13DpcgbxQCbff0K
-00022610: 3938 3266 3922 2c20 2023 206c 6565 720a  982f9",  # leer.
-00022620: 2020 2020 2020 2020 2020 2020 2269 6b22              "ik"
-00022630: 3a20 2231 566f 5354 6f75 325a 6c77 5668  : "1VoSTou2ZlwVh
-00022640: 706c 7932 3675 6a6f 7744 7a36 676a 7774  ply26ujowDz6gjwt
-00022650: 786d 6e79 222c 0a20 2020 2020 2020 2020  xmny",.         
-00022660: 2020 2022 696c 6f22 3a20 2231 2d78 4d75     "ilo": "1-xMu
-00022670: 4954 3647 614d 5f59 6548 7167 6d31 4f61  IT6GaM_YeHqgm1Oa
-00022680: 6d47 6b78 5966 4252 4569 7633 222c 0a20  mGkxYfBREiv3",. 
-00022690: 2020 2020 2020 2020 2020 2022 696f 223a             "io":
-000226a0: 2022 3139 5a6c 6130 7773 4163 725a 6d32   "19Zla0wsAcrZm2
-000226b0: 6330 5077 3567 6870 7034 7248 6a59 7332  c0Pw5ghpp4rHjYs2
-000226c0: 3650 7022 2c0a 2020 2020 2020 2020 2020  6Pp",.          
-000226d0: 2020 2269 7322 3a20 2231 3169 2d4e 4379    "is": "11i-NCy
-000226e0: 7153 3648 626c 6449 6259 756c 7343 6751  qS6HbldIbYulsCgQ
-000226f0: 475a 4658 5238 6877 6f42 222c 0a20 2020  GZFXR8hwoB",.   
-00022700: 2020 2020 2020 2020 2022 6974 223a 2022           "it": "
-00022710: 3148 6d6a 6c4f 6151 756e 4871 4c32 5465  1HmjlOaQunHqL2Te
-00022720: 3770 496b 7542 5772 6e6a 6c6d 6466 596f  7pIkuBWrnjlmdfYo
-00022730: 5f22 2c0a 2020 2020 2020 2020 2020 2020  _",.            
-00022740: 2269 7522 3a20 2231 386a 4b6d 3153 374c  "iu": "18jKm1S7L
-00022750: 7333 6c30 5f70 4871 5148 384d 7963 4733  s3l0_pHqQH8MycG3
-00022760: 4c68 6f43 3270 6458 222c 0a20 2020 2020  LhoC2pdX",.     
-00022770: 2020 2020 2020 2022 6a61 223a 2022 3130         "ja": "10
-00022780: 647a 3855 7879 4b34 5249 6163 5845 3248  dz8UxyK4RIacXE2H
-00022790: 6347 6472 6861 726d 7035 7277 6333 7222  cGdrharmp5rwc3r"
-000227a0: 2c0a 2020 2020 2020 2020 2020 2020 226a  ,.            "j
-000227b0: 616d 223a 2022 3176 3939 4358 6639 526e  am": "1v99CXf9Rn
-000227c0: 6246 3661 4a6f 3636 3959 6554 5236 6d51  bF6aJo669YeTR6mQ
-000227d0: 5254 4f4c 5a37 3422 2c20 2023 206c 6565  RTOLZ74",  # lee
-000227e0: 720a 2020 2020 2020 2020 2020 2020 226a  r.            "j
-000227f0: 626f 223a 2022 315f 4c6d 4839 6863 3646  bo": "1_LmH9hc6F
-00022800: 4447 4533 4637 7079 4742 3166 5545 6253  DGE3F7pyGB1fUEbS
-00022810: 7775 5459 5164 4422 2c0a 2020 2020 2020  wuTYQdD",.      
-00022820: 2020 2020 2020 226a 7622 3a20 2231 7169        "jv": "1qi
-00022830: 5375 3175 4543 434c 6c34 4942 5a53 3237  Su1uECCLl4IBZS27
-00022840: 4642 644a 4942 6976 6b4a 3747 7745 222c  FBdJIBivkJ7GwE",
-00022850: 0a20 2020 2020 2020 2020 2020 2022 6b61  .            "ka
-00022860: 223a 2022 3137 3255 4675 4652 4258 3256  ": "172UFuFRBX2V
-00022870: 3161 5765 586c 5053 7075 3954 6a53 2d33  1aWeXlPSpu9TjS-3
-00022880: 6378 4e61 4422 2c0a 2020 2020 2020 2020  cxNaD",.        
-00022890: 2020 2020 226b 6161 223a 2022 316b 6836      "kaa": "1kh6
-000228a0: 684d 5055 6471 4f2d 4649 7852 5936 7161  hMPUdqO-FIxRY6qa
-000228b0: 4942 5a6f 7468 4255 5258 7862 5922 2c0a  IBZothBURXxbY",.
-000228c0: 2020 2020 2020 2020 2020 2020 226b 6162              "kab
-000228d0: 223a 2022 316f 4b6a 625a 4936 5a72 7241  ": "1oKjbZI6ZrrA
-000228e0: 4c43 716e 5043 5967 496a 4b4e 724b 4441  LCqnPCYgIjKNrKDA
-000228f0: 3765 6863 7322 2c0a 2020 2020 2020 2020  7ehcs",.        
-00022900: 2020 2020 226b 6264 223a 2022 316a 4e62      "kbd": "1jNb
-00022910: 6672 626f 504f 774a 6d6c 5851 4249 7630  frboPOwJmlXQBIv0
-00022920: 3533 6437 6e35 5758 704d 5276 3722 2c0a  53d7n5WXpMRv7",.
-00022930: 2020 2020 2020 2020 2020 2020 226b 6722              "kg"
-00022940: 3a20 2231 6969 7535 7a2d 7364 4a32 4a4c  : "1iiu5z-sdJ2JL
-00022950: 4334 4a61 3949 6744 7870 525a 6b6c 4962  C4Ja9IgDxpRZklIb
-00022960: 366e 4478 222c 0a20 2020 2020 2020 2020  6nDx",.         
-00022970: 2020 2022 6b69 223a 2022 3147 5574 7430     "ki": "1GUtt0
-00022980: 5149 3834 6335 4d63 794c 4747 786f 6935  QI84c5McyLGGxoi5
-00022990: 7577 6a48 4f71 3164 3647 3822 2c0a 2020  uwjHOq1d6G8",.  
-000229a0: 2020 2020 2020 2020 2020 226b 6a22 3a20            "kj": 
-000229b0: 2231 6e53 7858 5553 4744 6c58 5643 4950  "1nSxXUSGDlXVCIP
-000229c0: 476c 5670 6361 6b52 6335 3337 4d77 754b  GlVpcakRc537MwuK
-000229d0: 5a52 222c 2020 2320 6c65 6572 0a20 2020  ZR",  # leer.   
-000229e0: 2020 2020 2020 2020 2022 6b6b 223a 2022           "kk": "
-000229f0: 3172 7943 3355 4e30 6d79 636b 6331 6177  1ryC3UN0myckc1aw
-00022a00: 7257 6868 6236 5249 6931 3743 304c 4375  rWhhb6RIi17C0LCu
-00022a10: 5322 2c0a 2020 2020 2020 2020 2020 2020  S",.            
-00022a20: 226b 6c22 3a20 2231 6758 7447 7458 3967  "kl": "1gXtGtX9g
-00022a30: 6354 586d 7331 4945 7849 436e 715a 5548  cTXms1IExICnqZUH
-00022a40: 6566 726c 6349 4666 222c 0a20 2020 2020  efrlcIFf",.     
-00022a50: 2020 2020 2020 2022 6b6d 223a 2022 3144         "km": "1D
-00022a60: 5335 4154 7876 7879 666e 3169 5776 7132  S5ATxvxyfn1iWvq2
-00022a70: 4736 716d 6a5a 7639 7076 3054 3668 4422  G6qmjZv9pv0T6hD"
-00022a80: 2c0a 2020 2020 2020 2020 2020 2020 226b  ,.            "k
-00022a90: 6e22 3a20 2231 5a47 4c59 4d78 6262 352d  n": "1ZGLYMxbb5-
-00022aa0: 3239 4d4e 6d75 5566 6732 7846 6859 5562  29MNmuUfg2xFhYUb
-00022ab0: 6b4a 464d 4a4a 222c 0a20 2020 2020 2020  kJFMJJ",.       
-00022ac0: 2020 2020 2022 6b6f 223a 2022 3132 7238       "ko": "12r8
-00022ad0: 7449 6b54 6e77 4b68 4c4a 7879 3731 7170  tIkTnwKhLJxy71qp
-00022ae0: 4963 6f4c 7254 364e 4e68 5159 6d22 2c0a  IcoLrT6NNhQYm",.
-00022af0: 2020 2020 2020 2020 2020 2020 226b 6f69              "koi
-00022b00: 223a 2022 3145 6447 5f77 5a5f 516b 3132  ": "1EdG_wZ_Qk12
-00022b10: 3445 5041 5a77 2d77 3672 6445 6859 4c73  4EPAZw-w6rdEhYLs
-00022b20: 6763 7649 6a22 2c0a 2020 2020 2020 2020  gcvIj",.        
-00022b30: 2020 2020 226b 7222 3a20 2231 3956 4e51      "kr": "19VNQ
-00022b40: 746e 4241 2d59 4c5f 6176 5775 5665 4851  tnBA-YL_avWuVeHQ
-00022b50: 4878 4a5a 394d 5a30 3457 5046 222c 2020  HxJZ9MZ04WPF",  
-00022b60: 2320 6c65 6572 0a20 2020 2020 2020 2020  # leer.         
-00022b70: 2020 2022 6b72 6322 3a20 2231 6e52 6556     "krc": "1nReV
-00022b80: 344d 6237 5764 6a39 3663 7a70 4f35 7265  4Mb7Wdj96czpO5re
-00022b90: 6746 6264 4250 7530 7a5a 5f79 222c 0a20  gFbdBPu0zZ_y",. 
-00022ba0: 2020 2020 2020 2020 2020 2022 6b73 223a             "ks":
-00022bb0: 2022 316b 7a68 3050 6772 7632 3757 524d   "1kzh0Pgrv27WRM
-00022bc0: 7374 5239 4d70 5538 6d75 3770 3630 5463  stR9MpU8mu7p60Tc
-00022bd0: 542d 5822 2c0a 2020 2020 2020 2020 2020  T-X",.          
-00022be0: 2020 226b 7368 223a 2022 3169 484a 7672    "ksh": "1iHJvr
-00022bf0: 6c32 4865 5261 4375 6d6c 7278 334e 3743  l2HeRaCumlrx3N7C
-00022c00: 5072 4851 324b 754c 556b 7422 2c0a 2020  PrHQ2KuLUkt",.  
-00022c10: 2020 2020 2020 2020 2020 226b 7522 3a20            "ku": 
-00022c20: 2231 5971 4a6f 6737 426b 6b30 6648 4243  "1YqJog7Bkk0fHBC
-00022c30: 5354 784a 3968 6565 452d 6266 626b 626b  STxJ9heeE-bfbkbk
-00022c40: 7965 222c 0a20 2020 2020 2020 2020 2020  ye",.           
-00022c50: 2022 6b76 223a 2022 3173 3931 4849 3465   "kv": "1s91HI4e
-00022c60: 7138 6c51 596c 5a77 6672 4a41 6761 476c  q8lQYlZwfrJAgaGl
-00022c70: 4379 4174 4968 7649 4a22 2c0a 2020 2020  CyAtIhvIJ",.    
-00022c80: 2020 2020 2020 2020 226b 7722 3a20 2231          "kw": "1
-00022c90: 3654 6149 5832 6e52 6671 4470 386e 377a  6TaIX2nRfqDp8n7z
-00022ca0: 7564 6434 6271 6635 6162 4e34 3964 7657  udd4bqf5abN49dvW
-00022cb0: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-00022cc0: 6b79 223a 2022 3137 4850 554b 4664 4b57  ky": "17HPUKFdKW
-00022cd0: 6855 6a75 5231 4e4f 7035 6633 5051 5966  hUjuR1NOp5f3PQYf
-00022ce0: 4d6c 4d43 7843 5422 2c0a 2020 2020 2020  MlMCxCT",.      
-00022cf0: 2020 2020 2020 226c 6122 3a20 2231 4e69        "la": "1Ni
-00022d00: 5175 4261 5549 4645 4552 7656 586f 3643  QuBaUIFEERvVXo6C
-00022d10: 514c 776f 7350 7261 4779 6952 5977 222c  QLwosPraGyiRYw",
-00022d20: 0a20 2020 2020 2020 2020 2020 2022 6c61  .            "la
-00022d30: 6422 3a20 2231 5045 6d58 4357 4c43 716e  d": "1PEmXCWLCqn
-00022d40: 6a4c 426f 6d4d 4159 4865 4f62 4d31 416d  jLBomMAYHeObM1Am
-00022d50: 5648 7444 3038 222c 0a20 2020 2020 2020  VHtD08",.       
-00022d60: 2020 2020 2022 6c62 223a 2022 316e 4534       "lb": "1nE4
-00022d70: 6731 3078 6f54 5532 3369 646d 4474 4f51  g10xoTU23idmDtOQ
-00022d80: 3077 3251 4375 697a 5a36 5148 5f22 2c0a  0w2QCuizZ6QH_",.
-00022d90: 2020 2020 2020 2020 2020 2020 226c 6265              "lbe
-00022da0: 223a 2022 314b 4f6d 2d41 6452 6343 4866  ": "1KOm-AdRcCHf
-00022db0: 5363 312d 7559 4278 4241 3447 6a78 586a  Sc1-uYBxBA4GjxXj
-00022dc0: 6e49 6c45 2d22 2c0a 2020 2020 2020 2020  nIlE-",.        
-00022dd0: 2020 2020 226c 657a 223a 2022 3163 4a41      "lez": "1cJA
-00022de0: 5873 6872 4c6c 4631 545a 6c50 484a 5470  XshrLlF1TZlPHJTp
-00022df0: 4477 4576 7572 494f 737a 3479 5222 2c0a  DwEvurIOsz4yR",.
-00022e00: 2020 2020 2020 2020 2020 2020 226c 6722              "lg"
-00022e10: 3a20 2231 5572 3079 3769 6945 7057 4267  : "1Ur0y7iiEpWBg
-00022e20: 4845 4372 4972 5431 4f79 4943 3875 6d5f  HECrIrT1OyIC8um_
-00022e30: 7934 7468 222c 0a20 2020 2020 2020 2020  y4th",.         
-00022e40: 2020 2022 6c69 223a 2022 3154 696b 4971     "li": "1TikIq
-00022e50: 6671 635a 6c53 4457 684f 6165 314a 6e6a  fqcZlSDWhOae1Jnj
-00022e60: 4a69 446b 6f34 6e6a 3444 6a22 2c0a 2020  JiDko4nj4Dj",.  
-00022e70: 2020 2020 2020 2020 2020 226c 696a 223a            "lij":
-00022e80: 2022 3172 6f35 4974 5563 4634 3969 5033   "1ro5ItUcF49iP3
-00022e90: 4a64 5638 326c 6843 5130 374d 745a 6e5f  JdV82lhCQ07MtZn_
-00022ea0: 566a 5722 2c0a 2020 2020 2020 2020 2020  VjW",.          
-00022eb0: 2020 226c 6d6f 223a 2022 3157 3472 6842    "lmo": "1W4rhB
-00022ec0: 7932 5069 3553 7559 5779 5762 4e6f 744f  y2Pi5SuYWyWbNotO
-00022ed0: 566b 5659 336b 5957 535f 4f22 2c0a 2020  VkVY3kYWS_O",.  
-00022ee0: 2020 2020 2020 2020 2020 226c 6e22 3a20            "ln": 
-00022ef0: 2231 624c 5356 3662 5778 3043 6746 6d37  "1bLSV6bWx0CgFm7
-00022f00: 4279 4b70 705a 4c70 5943 464c 3845 4941  ByKppZLpYCFL8EIA
-00022f10: 6f44 222c 0a20 2020 2020 2020 2020 2020  oD",.           
-00022f20: 2022 6c6f 223a 2022 3143 3653 534c 654b   "lo": "1C6SSLeK
-00022f30: 4633 5169 726a 5a62 415a 4163 7056 585f  F3QirjZbAZAcpVX_
-00022f40: 4158 5967 5f54 4a47 3322 2c0a 2020 2020  AXYg_TJG3",.    
-00022f50: 2020 2020 2020 2020 226c 7263 223a 2022          "lrc": "
-00022f60: 3147 5563 5332 384d 6c4a 655f 4f6a 6551  1GUcS28MlJe_OjeQ
-00022f70: 6653 3241 4a38 7563 7a70 4438 7574 3630  fS2AJ8uczpD8ut60
-00022f80: 6522 2c0a 2020 2020 2020 2020 2020 2020  e",.            
-00022f90: 226c 7422 3a20 2231 6741 4736 5463 4d54  "lt": "1gAG6TcMT
-00022fa0: 6d43 3132 3877 574b 3072 4358 526c 4354  mC128wWK0rCXRlCT
-00022fb0: 734a 5939 7746 5159 222c 0a20 2020 2020  sJY9wFQY",.     
-00022fc0: 2020 2020 2020 2022 6c74 6722 3a20 2231         "ltg": "1
-00022fd0: 327a 6950 3874 5f66 4141 5339 4a71 4f43  2ziP8t_fAAS9JqOC
-00022fe0: 4543 306b 754a 4f62 4579 756f 694f 6a44  EC0kuJObEyuoiOjD
-00022ff0: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-00023000: 6c76 223a 2022 314d 5075 414d 3034 752d  lv": "1MPuAM04u-
-00023010: 4174 6679 6258 6470 4877 4371 5570 4657  AtfybXdpHwCqUpFW
-00023020: 6265 2d7a 4430 5f22 2c0a 2020 2020 2020  be-zD0_",.      
-00023030: 2020 2020 2020 226d 6169 223a 2022 3164        "mai": "1d
-00023040: 5f6e 5565 7742 6b6b 6132 5147 456d 7843  _nUewBkka2QGEmxC
-00023050: 6339 7633 6454 6676 6f37 6c50 4154 4822  c9v3dTfvo7lPATH"
-00023060: 2c0a 2020 2020 2020 2020 2020 2020 226d  ,.            "m
-00023070: 6170 2d62 6d73 223a 2022 3177 724e 4945  ap-bms": "1wrNIE
-00023080: 2d6d 7170 3278 6233 6c72 4e64 7741 4465  -mqp2xb3lrNdwADe
-00023090: 3670 6237 6633 354e 5036 5622 2c0a 2020  6pb7f35NP6V",.  
-000230a0: 2020 2020 2020 2020 2020 226d 6466 223a            "mdf":
-000230b0: 2022 3142 6d4d 4755 4a79 3761 6675 4b66   "1BmMGUJy7afuKf
-000230c0: 6866 5442 4d69 4b78 4d33 4437 4659 2d4a  hfTBMiKxM3D7FY-J
-000230d0: 7251 3222 2c0a 2020 2020 2020 2020 2020  rQ2",.          
-000230e0: 2020 226d 6722 3a20 2231 3035 5761 4d68    "mg": "105WaMh
-000230f0: 6357 612d 3436 7443 7a74 6f6a 386e 7055  cWa-46tCztoj8npU
-00023100: 7967 3061 4831 386e 464c 222c 0a20 2020  yg0aH18nFL",.   
-00023110: 2020 2020 2020 2020 2022 6d68 223a 2022           "mh": "
-00023120: 3145 6a37 6e36 7941 3163 4631 6370 4435  1Ej7n6yA1cF1cpD5
-00023130: 586e 6566 7448 744c 3333 6948 4a77 6e74  XneftHtL33iHJwnt
-00023140: 5422 2c0a 2020 2020 2020 2020 2020 2020  T",.            
-00023150: 226d 6872 223a 2022 3143 4350 4955 6146  "mhr": "1CCPIUaF
-00023160: 6b45 5958 6948 4f30 4846 385f 7730 3755  kEYXiHO0HF8_w07U
-00023170: 7a56 7957 6368 726a 5322 2c0a 2020 2020  zVyWchrjS",.    
-00023180: 2020 2020 2020 2020 226d 6922 3a20 2231          "mi": "1
-00023190: 4636 6175 3978 516a 6e46 2d61 4e42 7570  F6au9xQjnF-aNBup
-000231a0: 474a 3150 7761 4d4d 4d36 545f 5067 6451  GJ1PwaMMM6T_PgdQ
-000231b0: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-000231c0: 6d69 6e22 3a20 2231 7456 4b35 5348 6943  min": "1tVK5SHiC
-000231d0: 795f 4461 5a53 446d 336e 5a42 6754 3562  y_DaZSDm3nZBgT5b
-000231e0: 6757 5468 624a 745f 222c 0a20 2020 2020  gWThbJt_",.     
-000231f0: 2020 2020 2020 2022 6d6b 223a 2022 3138         "mk": "18
-00023200: 4e70 7564 7974 4768 5357 715f 4c62 6d79  NpudytGhSWq_Lbmy
-00023210: 6354 4477 3130 6353 6674 6c53 4247 5322  cTDw10cSftlSBGS"
-00023220: 2c0a 2020 2020 2020 2020 2020 2020 226d  ,.            "m
-00023230: 6c22 3a20 2231 5637 3355 452d 4576 6345  l": "1V73UE-EvcE
-00023240: 2d76 5633 5631 5254 7655 3473 616b 3651  -vV3V1RTvU4sak6Q
-00023250: 4663 5039 3179 222c 0a20 2020 2020 2020  FcP91y",.       
-00023260: 2020 2020 2022 6d6e 223a 2022 3134 6a52       "mn": "14jR
-00023270: 5869 6341 3837 6f58 5a4f 5a6c 6c57 7155  XicA87oXZOZllWqU
-00023280: 6a4b 424d 6574 4e70 5145 5555 7022 2c0a  jKBMetNpQEUUp",.
-00023290: 2020 2020 2020 2020 2020 2020 226d 6f22              "mo"
-000232a0: 3a20 2231 5973 4c47 4e4d 734a 3756 7365  : "1YsLGNMsJ7Vse
-000232b0: 6b68 6463 4954 5165 6f6c 7a4f 534b 344e  khdcITQeolzOSK4N
-000232c0: 7a45 3655 222c 0a20 2020 2020 2020 2020  zE6U",.         
-000232d0: 2020 2022 6d72 223a 2022 3176 4f72 3141     "mr": "1vOr1A
-000232e0: 4948 6267 6b68 544f 394f 6c39 4a78 3557  IHbgkhTO9Ol9Jx5W
-000232f0: 6839 3851 6479 6831 514b 4922 2c0a 2020  h98Qdyh1QKI",.  
-00023300: 2020 2020 2020 2020 2020 226d 726a 223a            "mrj":
-00023310: 2022 3164 572d 596d 4557 3861 3944 354b   "1dW-YmEW8a9D5K
-00023320: 7958 7a38 6f6a 5364 4958 5747 656b 4e7a  yXz8ojSdIXWGekNz
-00023330: 477a 4e22 2c0a 2020 2020 2020 2020 2020  GzN",.          
-00023340: 2020 226d 7322 3a20 2231 6273 2d5f 3557    "ms": "1bs-_5W
-00023350: 4e52 695a 426a 4f2d 4474 634e 746b 6349  NRiZBjO-DtcNtkcI
-00023360: 6c65 2d39 3868 6f6d 665f 222c 0a20 2020  le-98homf_",.   
-00023370: 2020 2020 2020 2020 2022 6d74 223a 2022           "mt": "
-00023380: 314c 3761 5533 6947 6a6d 3653 6d50 4955  1L7aU3iGjm6SmPIU
-00023390: 3734 6b39 3930 7152 6748 4656 3968 724c  74k990qRgHFV9hrL
-000233a0: 3022 2c0a 2020 2020 2020 2020 2020 2020  0",.            
-000233b0: 226d 7573 223a 2022 315f 6237 4463 5271  "mus": "1_b7DcRq
-000233c0: 694b 4a46 4546 7770 3837 6355 6563 7166  iKJFEFwp87cUecqf
-000233d0: 3841 3542 4462 5449 4a22 2c20 2023 206c  8A5BDbTIJ",  # l
-000233e0: 6565 720a 2020 2020 2020 2020 2020 2020  eer.            
-000233f0: 226d 776c 223a 2022 314d 6650 306a 6261  "mwl": "1MfP0jba
-00023400: 326a 5166 4756 654a 4f4c 7132 364d 6a49  2jQfGVeJOLq26MjI
-00023410: 3666 5959 3778 5450 7522 2c0a 2020 2020  6fYY7xTPu",.    
-00023420: 2020 2020 2020 2020 226d 7922 3a20 2231          "my": "1
-00023430: 3677 7349 4742 684e 5664 326c 4332 7036  6wsIGBhNVd2lC2p6
-00023440: 6e31 5838 7264 4d62 6961 656d 6569 554d  n1X8rdMbiaemeiUM
-00023450: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-00023460: 6d79 7622 3a20 2231 4b45 7148 6d66 7832  myv": "1KEqHmfx2
-00023470: 7066 552d 6131 7464 495f 375a 784d 5141  pfU-a1tdI_7ZxMQA
-00023480: 6b35 4e4a 7a4a 6a42 222c 0a20 2020 2020  k5NJzJjB",.     
-00023490: 2020 2020 2020 2022 6d7a 6e22 3a20 2231         "mzn": "1
-000234a0: 4366 6c76 6d59 4558 5a6e 5777 7073 426d  CflvmYEXZnWwpsBm
-000234b0: 4973 324f 7647 2d7a 4444 764c 454d 444a  Is2OvG-zDDvLEMDJ
-000234c0: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-000234d0: 6e61 223a 2022 3172 3041 566a 6565 3577  na": "1r0AVjee5w
-000234e0: 4e6e 7263 674a 7851 6d56 4750 564b 6735  NnrcgJxQmVGPVKg5
-000234f0: 5957 7a31 6972 7a22 2c0a 2020 2020 2020  YWz1irz",.      
-00023500: 2020 2020 2020 226e 6168 223a 2022 3166        "nah": "1f
-00023510: 7836 6575 3931 4e65 6779 7565 5a31 6930  x6eu91NegyueZ1i0
-00023520: 5861 4230 3743 4b6a 5577 6a48 4e37 4822  XaB07CKjUwjHN7H"
-00023530: 2c0a 2020 2020 2020 2020 2020 2020 226e  ,.            "n
-00023540: 6170 223a 2022 3162 6854 3473 5843 4a76  ap": "1bhT4sXCJv
-00023550: 6154 6368 4349 5639 6d77 4c42 7466 3361  aTchCIV9mwLBtf3a
-00023560: 374f 7072 6256 4222 2c0a 2020 2020 2020  7OprbVB",.      
-00023570: 2020 2020 2020 226e 6473 2d6e 6c22 3a20        "nds-nl": 
-00023580: 2231 5549 4669 3865 4f43 7546 594a 5853  "1UIFi8eOCuFYJXS
-00023590: 4158 5a39 7043 5777 6b51 4d6c 4861 5934  AXZ9pCWwkQMlHaY4
-000235a0: 7965 222c 0a20 2020 2020 2020 2020 2020  ye",.           
-000235b0: 2022 6e64 7322 3a20 2231 464c 675a 4958   "nds": "1FLgZIX
-000235c0: 5557 615f 7665 6b44 7434 6e64 5930 4235  UWa_vekDt4ndY0B5
-000235d0: 584c 3746 4e4c 6975 6c72 222c 0a20 2020  XL7FNLiulr",.   
-000235e0: 2020 2020 2020 2020 2022 6e65 223a 2022           "ne": "
-000235f0: 3167 456f 436a 534a 6d7a 6a49 4834 6b64  1gEoCjSJmzjIH4kd
-00023600: 4873 6244 5a7a 4436 4944 345f 3738 656b  HsbDZzD6ID4_78ek
-00023610: 5322 2c0a 2020 2020 2020 2020 2020 2020  S",.            
-00023620: 226e 6577 223a 2022 315f 2d70 3435 4e79  "new": "1_-p45Ny
-00023630: 3477 3955 7647 7568 4438 7552 4e53 5050  4w9UvGuhD8uRNSPP
-00023640: 6561 4152 5976 4553 4822 2c0a 2020 2020  eaARYvESH",.    
-00023650: 2020 2020 2020 2020 226e 6722 3a20 2231          "ng": "1
-00023660: 3179 7850 646b 6d70 6d6e 696a 5155 636e  1yxPdkmpmnijQUcn
-00023670: 4648 5a33 7863 4f6d 4c54 594a 6d4e 5f52  FHZ3xcOmLTYJmN_R
-00023680: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-00023690: 6e6c 223a 2022 3164 7159 5867 3369 6c7a  nl": "1dqYXg3ilz
-000236a0: 564f 5351 5f74 7a5f 6446 3437 656c 5349  VOSQ_tz_dF47elSI
-000236b0: 7653 4968 6771 6422 2c0a 2020 2020 2020  vSIhgqd",.      
-000236c0: 2020 2020 2020 226e 6e22 3a20 2231 7044        "nn": "1pD
-000236d0: 7274 5268 5130 3031 7a32 5755 4e4d 5743  rtRhQ001z2WUNMWC
-000236e0: 5a51 5533 5256 5f4d 3042 714f 6d76 222c  ZQU3RV_M0BqOmv",
-000236f0: 0a20 2020 2020 2020 2020 2020 2022 6e6f  .            "no
-00023700: 223a 2022 317a 7554 384d 4939 3649 7670  ": "1zuT8MI96Ivp
-00023710: 6975 396d 4556 464e 6a77 6269 4d38 674a  iu9mEVFNjwbiM8gJ
-00023720: 6c53 7a59 3222 2c0a 2020 2020 2020 2020  lSzY2",.        
-00023730: 2020 2020 226e 6f76 223a 2022 316c 3338      "nov": "1l38
-00023740: 3338 3852 6c6e 304e 5873 5341 524d 5a48  388Rln0NXsSARMZH
-00023750: 6d54 6d79 666f 3543 3077 5954 6422 2c0a  mTmyfo5C0wYTd",.
-00023760: 2020 2020 2020 2020 2020 2020 226e 726d              "nrm
-00023770: 223a 2022 3130 7678 5071 314e 6369 3757  ": "10vxPq1Nci7W
-00023780: 7071 3458 4f76 7833 6474 714f 4473 6b7a  pq4XOvx3dtqODskz
-00023790: 6a64 784a 5122 2c0a 2020 2020 2020 2020  jdxJQ",.        
-000237a0: 2020 2020 226e 736f 223a 2022 3169 6149      "nso": "1iaI
-000237b0: 5638 716c 5430 5244 6e62 6551 6c6e 784a  V8qlT0RDnbeQlnxJ
-000237c0: 3352 6568 7347 3367 5535 6550 4b22 2c0a  3RehsG3gU5ePK",.
-000237d0: 2020 2020 2020 2020 2020 2020 226e 7622              "nv"
-000237e0: 3a20 2231 6f4e 3331 6a54 3077 3377 5039  : "1oN31jT0w3wP9
-000237f0: 6147 7741 507a 3931 7053 6455 7974 6e64  aGwAPz91pSdUytnd
-00023800: 3942 3067 222c 0a20 2020 2020 2020 2020  9B0g",.         
-00023810: 2020 2022 6e79 223a 2022 3165 454b 485f     "ny": "1eEKH_
-00023820: 7255 5043 3536 3062 6645 6731 316b 7033  rUPC560bfEg11kp3
-00023830: 6b62 6538 7157 6d33 3549 4722 2c0a 2020  kbe8qWm35IG",.  
-00023840: 2020 2020 2020 2020 2020 226f 6322 3a20            "oc": 
-00023850: 2231 4330 3163 5738 475f 6a38 5553 2d44  "1C01cW8G_j8US-D
-00023860: 5472 736d 6561 6c5f 454e 4854 744e 576e  Trsmeal_ENHTtNWn
-00023870: 2d48 222c 0a20 2020 2020 2020 2020 2020  -H",.           
-00023880: 2022 6f6c 6f22 3a20 2231 7662 4477 4b5a   "olo": "1vbDwKZ
-00023890: 4b71 4671 3834 6475 7372 3153 7644 7835  KqFq84dusr1SvDx5
-000238a0: 4a62 4263 5061 6e78 394c 222c 2020 2320  JbBcPanx9L",  # 
-000238b0: 6c65 6572 0a20 2020 2020 2020 2020 2020  leer.           
-000238c0: 2022 6f6d 223a 2022 3171 3368 3232 564d   "om": "1q3h22VM
-000238d0: 6257 6732 6b67 5646 6d2d 4f41 7252 2d45  bWg2kgVFm-OArR-E
-000238e0: 3479 3179 4251 314a 5822 2c0a 2020 2020  4y1yBQ1JX",.    
-000238f0: 2020 2020 2020 2020 226f 7222 3a20 2231          "or": "1
-00023900: 6b38 4c77 4345 386e 4337 6c71 366e 6558  k8LwCE8nC7lq6neX
-00023910: 4461 5333 7a52 6e30 4b4f 7264 3952 6e53  DaS3zRn0KOrd9RnS
-00023920: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-00023930: 6f73 223a 2022 3175 3831 4b41 4233 3461  os": "1u81KAB34a
-00023940: 4551 6665 7430 3064 4c4d 5249 424a 7366  EQfet00dLMRIBJsf
-00023950: 5277 6244 5469 6a22 2c0a 2020 2020 2020  RwbDTij",.      
-00023960: 2020 2020 2020 2270 6122 3a20 2231 4a44        "pa": "1JD
-00023970: 4548 4c31 5663 4c48 4261 6d67 5450 426f  EHL1VcLHBamgTPBo
-00023980: 6d5f 5279 6938 686b 3650 4270 7375 222c  m_Ryi8hk6PBpsu",
-00023990: 0a20 2020 2020 2020 2020 2020 2022 7061  .            "pa
-000239a0: 6722 3a20 2231 6b39 3035 5655 576e 5267  g": "1k905VUWnRg
-000239b0: 5938 6b46 6232 5032 3433 314b 7234 645a  Y8kFb2P2431Kr4dZ
-000239c0: 756f 6c59 4746 222c 0a20 2020 2020 2020  uolYGF",.       
-000239d0: 2020 2020 2022 7061 6d22 3a20 2231 7373       "pam": "1ss
-000239e0: 7567 4779 4a62 3869 7069 7370 4336 3042  ugGyJb8ipispC60B
-000239f0: 3349 366b 7a4d 7372 6931 5763 7643 222c  3I6kzMsri1WcvC",
-00023a00: 0a20 2020 2020 2020 2020 2020 2022 7061  .            "pa
-00023a10: 7022 3a20 2231 5a61 3077 6677 6174 7859  p": "1Za0wfwatxY
-00023a20: 6f44 376a 4763 6c6d 5474 526f 4250 3075  oD7jGclmTtRoBP0u
-00023a30: 565f 7149 6d51 222c 0a20 2020 2020 2020  V_qImQ",.       
-00023a40: 2020 2020 2022 7063 6422 3a20 2231 6373       "pcd": "1cs
-00023a50: 4a6c 4b67 7447 3034 7064 4959 4355 5768  JlKgtG04pdIYCUWh
-00023a60: 7343 435a 4152 4b49 476c 4559 5078 222c  sCCZARKIGlEYPx",
-00023a70: 0a20 2020 2020 2020 2020 2020 2022 7064  .            "pd
-00023a80: 6322 3a20 2231 586e 6d73 3452 585a 4b5a  c": "1Xnms4RXZKZ
-00023a90: 3142 4251 6d51 4a45 506f 6b6d 6b69 7765  1BBQmQJEPokmkiwe
-00023aa0: 5470 6f75 5577 222c 0a20 2020 2020 2020  TpouUw",.       
-00023ab0: 2020 2020 2022 7066 6c22 3a20 2231 7450       "pfl": "1tP
-00023ac0: 5166 4858 3745 3075 4b4d 6444 536c 774e  QfHX7E0uKMdDSlwN
-00023ad0: 7735 6147 6d61 5335 6255 4b30 726e 222c  w5aGmaS5bUK0rn",
-00023ae0: 0a20 2020 2020 2020 2020 2020 2022 7069  .            "pi
-00023af0: 223a 2022 3136 622d 4b78 4e78 7a62 4575  ": "16b-KxNxzbEu
-00023b00: 796f 4e53 6c49 3362 6665 3259 586d 6453  yoNSlI3bfe2YXmdS
-00023b10: 4573 5046 7522 2c0a 2020 2020 2020 2020  EsPFu",.        
-00023b20: 2020 2020 2270 6968 223a 2022 3176 7779      "pih": "1vwy
-00023b30: 6968 546e 5338 5f50 4535 424e 4b37 6354  ihTnS8_PE5BNK7cT
-00023b40: 4953 6d49 4271 4757 7673 566e 4622 2c0a  ISmIBqGWvsVnF",.
-00023b50: 2020 2020 2020 2020 2020 2020 2270 6c22              "pl"
-00023b60: 3a20 2231 6669 6a6a 5330 4c62 6670 4b63  : "1fijjS0LbfpKc
-00023b70: 6f50 4235 5638 6338 6648 3038 5438 416b  oPB5V8c8fH08T8Ak
-00023b80: 5852 7039 222c 0a20 2020 2020 2020 2020  XRp9",.         
-00023b90: 2020 2022 706d 7322 3a20 2231 3279 5363     "pms": "12ySc
-00023ba0: 3758 3961 6a57 5771 4d6c 426a 7972 5069  7X9ajWWqMlBjyrPi
-00023bb0: 4564 632d 7156 4275 496b 6241 222c 0a20  Edc-qVBuIkbA",. 
-00023bc0: 2020 2020 2020 2020 2020 2022 706e 6222             "pnb"
-00023bd0: 3a20 2231 5242 332d 776a 6c75 6854 4b62  : "1RB3-wjluhTKb
-00023be0: 6454 4743 736b 336e 6167 3162 4d33 6d34  dTGCsk3nag1bM3m4
-00023bf0: 7745 4e62 222c 0a20 2020 2020 2020 2020  wENb",.         
-00023c00: 2020 2022 706e 7422 3a20 2231 5a43 557a     "pnt": "1ZCUz
-00023c10: 6d73 3666 5934 6f6e 5f66 5738 7556 674f  ms6fY4on_fW8uVgO
-00023c20: 3763 4573 394b 4879 6448 595f 222c 0a20  7cEs9KHydHY_",. 
-00023c30: 2020 2020 2020 2020 2020 2022 7073 223a             "ps":
-00023c40: 2022 3157 4b6c 3941 7636 5371 7a36 6148   "1WKl9Av6Sqz6aH
-00023c50: 4b79 554d 356b 4968 3930 6d7a 467a 7956  KyUM5kIh90mzFzyV
-00023c60: 5748 3922 2c0a 2020 2020 2020 2020 2020  WH9",.          
-00023c70: 2020 2270 7422 3a20 2231 3342 582d 5f34    "pt": "13BX-_4
-00023c80: 5f68 6354 5570 3539 4844 7963 7a46 4449  _hcTUp59HDyczFDI
-00023c90: 3332 7155 4239 3476 5559 222c 0a20 2020  32qUB94vUY",.   
-00023ca0: 2020 2020 2020 2020 2022 7175 223a 2022           "qu": "
-00023cb0: 3143 425f 4334 7967 7452 6f65 676b 7167  1CB_C4ygtRoegkqg
-00023cc0: 6371 6658 4e48 7238 6f51 642d 5563 7644  cqfXNHr8oQd-UcvD
-00023cd0: 4522 2c0a 2020 2020 2020 2020 2020 2020  E",.            
-00023ce0: 2272 6d22 3a20 2231 5952 5347 6757 6f78  "rm": "1YRSGgWox
-00023cf0: 4571 536f 6a48 5875 4248 4a6e 5938 7641  EqSojHXuBHJnY8vA
-00023d00: 4872 3156 674c 752d 222c 0a20 2020 2020  Hr1VgLu-",.     
-00023d10: 2020 2020 2020 2022 726d 7922 3a20 2231         "rmy": "1
-00023d20: 7546 6343 7976 4f57 424a 574b 4651 7862  uFcCyvOWBJWKFQxb
-00023d30: 6b59 5370 3337 3378 5558 566c 3449 6746  kYSp373xUXVl4IgF
-00023d40: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-00023d50: 726e 223a 2022 3165 6b79 7962 324d 7675  rn": "1ekyyb2Mvu
-00023d60: 7059 4759 5f45 385f 4268 4b76 5636 3634  pYGY_E8_BhKvV664
-00023d70: 734c 7657 3461 4522 2c0a 2020 2020 2020  sLvW4aE",.      
-00023d80: 2020 2020 2020 2272 6f22 3a20 2231 5966        "ro": "1Yf
-00023d90: 654e 5453 6f78 552d 7a4a 4d6e 7951 6f74  eNTSoxU-zJMnyQot
-00023da0: 4c6b 3558 3842 5f36 6e48 7279 4275 222c  Lk5X8B_6nHryBu",
-00023db0: 0a20 2020 2020 2020 2020 2020 2022 726f  .            "ro
-00023dc0: 612d 7275 7022 3a20 2231 3530 7334 4834  a-rup": "150s4H4
-00023dd0: 5464 5135 6e4e 5956 4336 6a30 4534 3136  TdQ5nNYVC6j0E416
-00023de0: 5455 416a 4245 3835 7979 222c 0a20 2020  TUAjBE85yy",.   
-00023df0: 2020 2020 2020 2020 2022 726f 612d 7461           "roa-ta
-00023e00: 7261 223a 2022 3148 3665 6d66 5173 445f  ra": "1H6emfQsD_
-00023e10: 6135 796f 684b 3452 4d50 512d 4772 6e48  a5yohK4RMPQ-GrnH
-00023e20: 5871 7156 6772 3322 2c0a 2020 2020 2020  XqqVgr3",.      
-00023e30: 2020 2020 2020 2272 7522 3a20 2231 3167        "ru": "11g
-00023e40: 5032 732d 5359 6366 5333 6a39 4d6a 5070  P2s-SYcfS3j9MjPp
-00023e50: 3543 335f 6e46 6551 422d 3878 3836 222c  5C3_nFeQB-8x86",
-00023e60: 0a20 2020 2020 2020 2020 2020 2022 7275  .            "ru
-00023e70: 6522 3a20 2231 4f75 5367 6c5a 416e 646a  e": "1OuSglZAndj
-00023e80: 6131 4a35 4435 4955 6d64 6274 5f6e 6954  a1J5D5IUmdbt_niT
-00023e90: 5479 4567 594b 222c 0a20 2020 2020 2020  TyEgYK",.       
-00023ea0: 2020 2020 2022 7277 223a 2022 314e 7568       "rw": "1Nuh
-00023eb0: 4866 6930 2d42 2d58 6c72 5f42 4170 696a  Hfi0-B-Xlr_BApij
-00023ec0: 6e78 4377 3057 4d45 6c74 7474 5022 2c0a  nxCw0WMEltttP",.
-00023ed0: 2020 2020 2020 2020 2020 2020 2273 6122              "sa"
-00023ee0: 3a20 2231 5032 5333 674c 5f7a 764b 6758  : "1P2S3gL_zvKgX
-00023ef0: 4c4b 4a4a 7867 2d46 6234 7a38 5864 6c56  LKJJxg-Fb4z8XdlV
-00023f00: 7051 696b 222c 0a20 2020 2020 2020 2020  pQik",.         
-00023f10: 2020 2022 7361 6822 3a20 2231 717a 304d     "sah": "1qz0M
-00023f20: 704b 636b 7a55 7265 6632 4658 5f46 5969  pKckzUref2FX_FYi
-00023f30: 4e7a 4932 7034 4244 6335 6f52 222c 0a20  NzI2p4BDc5oR",. 
-00023f40: 2020 2020 2020 2020 2020 2022 7363 223a             "sc":
-00023f50: 2022 316f 4159 6a5f 4674 7934 4655 776a   "1oAYj_Fty4FUwj
-00023f60: 414f 4245 4261 695a 745f 6359 3864 7470  AOBEBaiZt_cY8dtp
-00023f70: 4466 4122 2c0a 2020 2020 2020 2020 2020  DfA",.          
-00023f80: 2020 2273 636e 223a 2022 3173 444e 397a    "scn": "1sDN9z
-00023f90: 486b 5857 596f 4859 782d 4455 752d 4750  HkXWYoHYx-DUu-GP
-00023fa0: 7673 5567 425f 4952 6138 5322 2c0a 2020  vsUgB_IRa8S",.  
-00023fb0: 2020 2020 2020 2020 2020 2273 636f 223a            "sco":
-00023fc0: 2022 3169 3857 374b 5150 6a36 595a 514c   "1i8W7KQPj6YZQL
-00023fd0: 6f70 3839 765a 4253 7962 4a4e 674e 7376  op89vZBSybJNgNsv
-00023fe0: 5857 5222 2c0a 2020 2020 2020 2020 2020  XWR",.          
-00023ff0: 2020 2273 6422 3a20 2231 7661 4e71 6676    "sd": "1vaNqfv
-00024000: 3353 3847 6c35 7051 6d69 6733 7677 5751  3S8Gl5pQmig3vwWQ
-00024010: 3363 7152 5473 586d 4d52 222c 0a20 2020  3cqRTsXmMR",.   
-00024020: 2020 2020 2020 2020 2022 7365 223a 2022           "se": "
-00024030: 3152 5439 7868 6e30 566c 3930 7a6a 5759  1RT9xhn0Vl90zjWY
-00024040: 4454 7735 5631 4c5f 7531 4f68 3136 7470  DTw5V1L_u1Oh16tp
-00024050: 5022 2c0a 2020 2020 2020 2020 2020 2020  P",.            
-00024060: 2273 6722 3a20 2231 6949 6832 6f58 4432  "sg": "1iIh2oXD2
-00024070: 537a 7a5f 4179 6755 7654 7433 5f5a 4b38  Szz_AygUvTt3_ZK8
-00024080: 6133 5259 4547 5a5f 222c 0a20 2020 2020  a3RYEGZ_",.     
-00024090: 2020 2020 2020 2022 7368 223a 2022 3171         "sh": "1q
-000240a0: 5077 4c69 416d 3674 345f 5f47 2d7a 5645  PwLiAm6t4__G-zVE
-000240b0: 4f72 4267 5978 3656 526d 6744 6769 5322  OrBgYx6VRmgDgiS"
-000240c0: 2c0a 2020 2020 2020 2020 2020 2020 2273  ,.            "s
-000240d0: 6922 3a20 2231 4735 7279 6365 4944 3054  i": "1G5ryceID0T
-000240e0: 5036 5341 4f34 3265 2d48 4162 496c 4376  P6SAO42e-HAbIlCv
-000240f0: 596d 6e55 4e37 222c 0a20 2020 2020 2020  YmnUN7",.       
-00024100: 2020 2020 2022 7369 6d70 6c65 223a 2022       "simple": "
-00024110: 3146 5656 3439 6f5f 526c 4b36 4d35 4977  1FVV49o_RlK6M5Iw
-00024120: 5f37 7a65 4a4f 4544 516f 5461 357a 5362  _7zeJOEDQoTa5zSb
-00024130: 7122 2c0a 2020 2020 2020 2020 2020 2020  q",.            
-00024140: 2273 6b22 3a20 2231 316d 6b59 7662 6d41  "sk": "11mkYvbmA
-00024150: 574b 5449 6e6a 3674 344d 6138 4255 5078  WKTInj6t4Ma8BUPx
-00024160: 6f52 356f 3669 724c 222c 0a20 2020 2020  oR5o6irL",.     
-00024170: 2020 2020 2020 2022 736c 223a 2022 3166         "sl": "1f
-00024180: 7349 5a53 354c 674d 7a4d 7a5a 3654 376f  sIZS5LgMzMzZ6T7o
-00024190: 6753 7479 6a2d 494c 455a 4942 5276 4f22  gStyj-ILEZIBRvO"
-000241a0: 2c0a 2020 2020 2020 2020 2020 2020 2273  ,.            "s
-000241b0: 6d22 3a20 2231 7965 6645 4370 4b58 5f59  m": "1yefECpKX_Y
-000241c0: 3452 3747 3274 6767 4978 7663 5f42 764a  4R7G2tggIxvc_BvJ
-000241d0: 664f 417a 2d74 222c 0a20 2020 2020 2020  fOAz-t",.       
-000241e0: 2020 2020 2022 736e 223a 2022 3166 5965       "sn": "1fYe
-000241f0: 436a 4d50 7652 4176 3934 6b76 5a6a 694b  CjMPvRAv94kvZjiK
-00024200: 492d 6b74 4944 4c6b 6276 3056 6522 2c0a  I-ktIDLkbv0Ve",.
-00024210: 2020 2020 2020 2020 2020 2020 2273 6f22              "so"
-00024220: 3a20 2231 5563 2d65 535a 6e4a 6233 3653  : "1Uc-eSZnJb36S
-00024230: 6765 5476 5255 3347 6972 585a 4f6c 4744  geTvRU3GirXZOlGD
-00024240: 5f4e 4236 222c 0a20 2020 2020 2020 2020  _NB6",.         
-00024250: 2020 2022 7371 223a 2022 3131 752d 3533     "sq": "11u-53
-00024260: 6e37 314f 5f79 6a70 7752 6943 5153 7767  n71O_yjpwRiCQSwg
-00024270: 4c37 4e32 7737 325a 7074 5822 2c0a 2020  L7N2w72ZptX",.  
-00024280: 2020 2020 2020 2020 2020 2273 7222 3a20            "sr": 
-00024290: 2231 5047 4c47 6c51 6938 5130 4561 6336  "1PGLGlQi8Q0Eac6
-000242a0: 6469 622d 7575 434a 4141 484b 3653 4635  dib-uuCJAAHK6SF5
-000242b0: 507a 222c 0a20 2020 2020 2020 2020 2020  Pz",.           
-000242c0: 2022 7372 6e22 3a20 2231 4a4b 694c 3354   "srn": "1JKiL3T
-000242d0: 5358 714b 312d 4b68 5066 4177 4d4b 3075  SXqK1-KhPfAwMK0u
-000242e0: 7177 3930 5745 7a67 374d 222c 0a20 2020  qw90WEzg7M",.   
-000242f0: 2020 2020 2020 2020 2022 7373 223a 2022           "ss": "
-00024300: 3165 3071 754e 4573 4131 646e 3537 2d49  1e0quNEsA1dn57-I
-00024310: 6269 6e63 4634 4438 3264 5257 677a 516c  bincF4D82dRWgzQl
-00024320: 7022 2c0a 2020 2020 2020 2020 2020 2020  p",.            
-00024330: 2273 7422 3a20 2231 6e79 2d46 427a 7042  "st": "1ny-FBzpB
-00024340: 7149 4467 7636 6a4d 6373 6f46 6576 3349  qIDgv6jMcsoFev3I
-00024350: 6836 3546 4e5a 464f 222c 0a20 2020 2020  h65FNZFO",.     
-00024360: 2020 2020 2020 2022 7374 7122 3a20 2231         "stq": "1
-00024370: 3546 7833 3252 4f79 3249 4d36 6c53 7141  5Fx32ROy2IM6lSqA
-00024380: 5055 796b 6b72 3343 4954 5236 5864 3776  PUykkr3CITR6Xd7v
-00024390: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-000243a0: 7375 223a 2022 3143 3046 4a75 6d37 6259  su": "1C0FJum7bY
-000243b0: 5a70 6e79 7074 4276 6641 6777 4a62 3054  ZpnyptBvfAgwJb0T
-000243c0: 5832 6867 6774 4f22 2c0a 2020 2020 2020  X2hggtO",.      
-000243d0: 2020 2020 2020 2273 7622 3a20 2231 5979        "sv": "1Yy
-000243e0: 717a 4f53 587a 4b35 7972 416f 7539 7a65  qzOSXzK5yrAou9ze
-000243f0: 5444 5748 5f37 7335 3639 6d44 637a 222c  TDWH_7s569mDcz",
-00024400: 0a20 2020 2020 2020 2020 2020 2022 7377  .            "sw
-00024410: 223a 2022 315f 624e 546a 3654 3865 586c  ": "1_bNTj6T8eXl
-00024420: 4e41 4975 4861 7665 6c65 576c 4842 5f32  NAIuHaveleWlHB_2
-00024430: 3261 6c4a 7322 2c0a 2020 2020 2020 2020  2alJs",.        
-00024440: 2020 2020 2273 7a6c 223a 2022 315f 6458      "szl": "1_dX
-00024450: 4569 7031 736e 4b34 4350 5647 7148 3878  Eip1snK4CPVGqH8x
-00024460: 376c 4635 4f2d 3646 6443 4e46 5722 2c0a  7lF5O-6FdCNFW",.
-00024470: 2020 2020 2020 2020 2020 2020 2274 6122              "ta"
-00024480: 3a20 2231 5a46 544f 4e73 7847 7453 6e43  : "1ZFTONsxGtSnC
-00024490: 3951 4236 5270 5753 7667 445f 4d62 5a77  9QB6RpWSvgD_MbZw
-000244a0: 4968 4848 222c 0a20 2020 2020 2020 2020  IhHH",.         
-000244b0: 2020 2022 7463 7922 3a20 2231 3552 3675     "tcy": "15R6u
-000244c0: 374b 5173 3176 6d44 536d 5f61 5344 7251  7KQs1vmDSm_aSDrQ
-000244d0: 4d4a 3351 3671 3342 6530 7237 222c 2020  MJ3Q6q3Be0r7",  
-000244e0: 2320 6c65 6572 0a20 2020 2020 2020 2020  # leer.         
-000244f0: 2020 2022 7465 223a 2022 3131 5378 2d70     "te": "11Sx-p
-00024500: 4241 5065 5a4f 5847 7976 3438 554e 5356  BAPeZOXGyv48UNSV
-00024510: 4d44 3041 4837 7566 3459 4e22 2c0a 2020  MD0AH7uf4YN",.  
-00024520: 2020 2020 2020 2020 2020 2274 6574 223a            "tet":
-00024530: 2022 3131 6d72 324d 594c 6376 3970 7a37   "11mr2MYLcv9pz7
-00024540: 6d48 6847 474e 6935 694e 434f 5645 7259  mHhGGNi5iNCOVErY
-00024550: 654f 7422 2c0a 2020 2020 2020 2020 2020  eOt",.          
-00024560: 2020 2274 6722 3a20 2231 3674 7446 3748    "tg": "16ttF7H
-00024570: 5771 4d39 436e 6a34 716d 6766 335a 664e  WqM9Cnj4qmgf3ZfN
-00024580: 6e69 694f 4a66 5a35 3277 222c 0a20 2020  niiOJfZ52w",.   
-00024590: 2020 2020 2020 2020 2022 7468 223a 2022           "th": "
-000245a0: 3134 7868 4974 2d78 7235 6e39 6e4d 7576  14xhIt-xr5n9nMuv
-000245b0: 6377 6179 4347 4d31 2d7a 4243 465a 7175  cwayCGM1-zBCFZqu
-000245c0: 5722 2c0a 2020 2020 2020 2020 2020 2020  W",.            
-000245d0: 2274 6922 3a20 2231 3233 7135 6539 4d53  "ti": "123q5e9MS
-000245e0: 744d 5368 7038 6545 5347 7448 6453 4247  tMShp8eESGtHdSBG
-000245f0: 4c44 7243 4b66 4a55 222c 0a20 2020 2020  LDrCKfJU",.     
-00024600: 2020 2020 2020 2022 746b 223a 2022 3158         "tk": "1X
-00024610: 2d4a 4e49 6e74 3334 424e 4768 6738 4138  -JNInt34BNGhg8A8
-00024620: 5065 796a 7732 576a 7341 4c64 5873 4422  Peyjw2WjsALdXsD"
-00024630: 2c0a 2020 2020 2020 2020 2020 2020 2274  ,.            "t
-00024640: 6c22 3a20 2231 576b 5148 6257 6439 6371  l": "1WkQHbWd9cq
-00024650: 7454 6e53 4841 7630 4470 5554 6861 426e  tTnSHAv0DpUThaBn
-00024660: 7a65 5350 544a 222c 0a20 2020 2020 2020  zeSPTJ",.       
-00024670: 2020 2020 2022 746e 223a 2022 3166 4866       "tn": "1fHf
-00024680: 5148 6574 5a6e 382d 664c 7552 5a45 752d  QHetZn8-fLuRZEu-
-00024690: 6376 732d 6b51 5977 5076 6a79 4c22 2c0a  cvs-kQYwPvjyL",.
-000246a0: 2020 2020 2020 2020 2020 2020 2274 6f22              "to"
-000246b0: 3a20 2231 6348 4f4c 6163 7a59 4a38 682d  : "1cHOLaczYJ8h-
-000246c0: 4f71 5167 7865 6f48 3976 4d47 3369 7a67  OqQgxeoH9vMG3izg
-000246d0: 366d 7554 222c 0a20 2020 2020 2020 2020  6muT",.         
-000246e0: 2020 2022 7470 6922 3a20 2231 5973 526a     "tpi": "1YsRj
-000246f0: 7856 7536 4e59 4f72 5852 6238 6f71 4d4f  xVu6NYOrXRb8oqMO
-00024700: 3946 5061 6963 656c 4645 6375 222c 0a20  9FPaicelFEcu",. 
-00024710: 2020 2020 2020 2020 2020 2022 7472 223a             "tr":
-00024720: 2022 314a 315a 7930 3249 7876 7443 4b30   "1J1Zy02IxvtCK0
-00024730: 6431 4261 3268 5f55 6c69 7431 6d56 6239  d1Ba2h_Ulit1mVb9
-00024740: 5549 5822 2c0a 2020 2020 2020 2020 2020  UIX",.          
-00024750: 2020 2274 7322 3a20 2231 7049 6366 4174    "ts": "1pIcfAt
-00024760: 334b 6d74 6d44 6b79 684f 6c2d 534d 5365  3KmtmDkyhOl-SMSe
-00024770: 6f4d 3861 5038 624f 706c 222c 0a20 2020  oM8aP8bOpl",.   
-00024780: 2020 2020 2020 2020 2022 7474 223a 2022           "tt": "
-00024790: 3176 7366 7a43 6a6a 2d5f 624d 4f6e 356a  1vsfzCjj-_bMOn5j
-000247a0: 4261 6934 3154 4635 476a 4b4a 4d5f 4975  Bai41TF5GjKJM_Iu
-000247b0: 7322 2c0a 2020 2020 2020 2020 2020 2020  s",.            
-000247c0: 2274 756d 223a 2022 314e 5763 6736 3564  "tum": "1NWcg65d
-000247d0: 6149 3242 7430 6177 7945 6755 3661 7055  aI2Bt0awyEgU6apU
-000247e0: 4462 426d 6971 4375 7322 2c0a 2020 2020  DbBmiqCus",.    
-000247f0: 2020 2020 2020 2020 2274 7722 3a20 2231          "tw": "1
-00024800: 5743 594b 5a49 7153 3741 6167 5337 3651  WCYKZIqS7AagS76Q
-00024810: 4653 6662 7465 694f 6746 4e42 764e 6e65  FSfbteiOgFNBvNne
-00024820: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-00024830: 7479 223a 2022 3144 4971 6150 316c 2d4e  ty": "1DIqaP1l-N
-00024840: 3956 5854 4e6f 6b72 6c72 3645 7550 4d47  9VXTNokrlr6EuPMG
-00024850: 4537 3635 6f34 6822 2c0a 2020 2020 2020  E765o4h",.      
-00024860: 2020 2020 2020 2274 7976 223a 2022 3146        "tyv": "1F
-00024870: 3371 6130 354f 594c 4263 6a54 316c 584d  3qa05OYLBcjT1lXM
-00024880: 7572 414a 4644 5850 5f45 6573 4376 4d22  urAJFDXP_EesCvM"
-00024890: 2c0a 2020 2020 2020 2020 2020 2020 2275  ,.            "u
-000248a0: 646d 223a 2022 3154 3059 4d54 4150 4c4f  dm": "1T0YMTAPLO
-000248b0: 6b37 3638 7373 746e 6577 7935 4a78 6778  k768sstnewy5Jxgx
-000248c0: 3252 5075 3352 6222 2c0a 2020 2020 2020  2RPu3Rb",.      
-000248d0: 2020 2020 2020 2275 6722 3a20 2231 666a        "ug": "1fj
-000248e0: 657a 7671 6c79 7379 5a68 6951 4d5a 6461  ezvqlysyZhiQMZda
-000248f0: 7a71 4c47 676b 3732 5071 7458 4177 222c  zqLGgk72PqtXAw",
-00024900: 0a20 2020 2020 2020 2020 2020 2022 756b  .            "uk
-00024910: 223a 2022 3155 4d4a 4348 747a 786b 664c  ": "1UMJCHtzxkfL
-00024920: 4442 4a45 374e 7466 4e35 4665 4d72 6e6e  DBJE7NtfN5FeMrnn
-00024930: 5556 776f 6822 2c0a 2020 2020 2020 2020  UVwoh",.        
-00024940: 2020 2020 2275 7222 3a20 2231 574e 6144      "ur": "1WNaD
-00024950: 3254 7548 7664 7346 2d7a 306b 5f65 6d51  2TuHvdsF-z0k_emQ
-00024960: 5963 6877 6f51 5144 466d 526b 222c 0a20  YchwoQQDFmRk",. 
-00024970: 2020 2020 2020 2020 2020 2022 757a 223a             "uz":
-00024980: 2022 3131 7772 4732 4653 5470 524a 6332   "11wrG2FSTpRJc2
-00024990: 6a62 354d 6867 7678 6a6b 5644 5968 5438  jb5MhgvxjkVDYhT8
-000249a0: 4d2d 6c22 2c0a 2020 2020 2020 2020 2020  M-l",.          
-000249b0: 2020 2276 6522 3a20 2231 5075 634a 3770    "ve": "1PucJ7p
-000249c0: 4a34 4358 4745 585a 3570 5f57 6c65 5a44  J4CXGEXZ5p_WleZD
-000249d0: 7332 7573 4e7a 3734 746f 222c 0a20 2020  s2usNz74to",.   
-000249e0: 2020 2020 2020 2020 2022 7665 6322 3a20           "vec": 
-000249f0: 2231 6341 566a 6d5f 7933 6568 4e74 6544  "1cAVjm_y3ehNteD
-00024a00: 5149 597a 3979 796f 7131 454b 6b71 4f58  QIYz9yyoq1EKkqOX
-00024a10: 5a30 222c 0a20 2020 2020 2020 2020 2020  Z0",.           
-00024a20: 2022 7665 7022 3a20 2231 4b5f 6571 5637   "vep": "1K_eqV7
-00024a30: 4f36 4337 4b50 4a57 5a74 6d49 757a 464d  O6C7KPJWZtmIuzFM
-00024a40: 4b41 6167 6a2d 304f 3835 222c 0a20 2020  KAagj-0O85",.   
-00024a50: 2020 2020 2020 2020 2022 7669 223a 2022           "vi": "
-00024a60: 3179 5136 6e68 6d31 426d 4739 6c44 345f  1yQ6nhm1BmG9lD4_
-00024a70: 4e61 4731 6845 3556 5636 6269 4561 5635  NaG1hE5VV6biEaV5
-00024a80: 6622 2c0a 2020 2020 2020 2020 2020 2020  f",.            
-00024a90: 2276 6c73 223a 2022 3162 7051 5157 3670  "vls": "1bpQQW6p
-00024aa0: 4b48 7275 4b4a 4a61 4b74 7567 6748 3572  KHruKJJaKtuggH5r
-00024ab0: 5265 4d58 7965 5658 7022 2c0a 2020 2020  ReMXyeVXp",.    
-00024ac0: 2020 2020 2020 2020 2276 6f22 3a20 2231          "vo": "1
-00024ad0: 4438 3051 5264 5470 6537 4834 6d48 464b  D80QRdTpe7H4mHFK
-00024ae0: 7066 7567 7363 736a 5837 316b 694d 4a4e  pfugscsjX71kiMJN
-00024af0: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-00024b00: 7761 223a 2022 316d 3442 3831 5159 6266  wa": "1m4B81QYbf
-00024b10: 3734 6874 7049 6e44 5535 7037 6430 6e30  74htpInDU5p7d0n0
-00024b20: 6f74 3857 4c50 5a22 2c0a 2020 2020 2020  ot8WLPZ",.      
-00024b30: 2020 2020 2020 2277 6172 223a 2022 3145        "war": "1E
-00024b40: 4333 6a73 4874 7532 3274 4842 7636 6a58  C3jsHtu22tHBv6jX
-00024b50: 5f49 3472 7570 4335 5277 5633 4f59 6422  _I4rupC5RwV3OYd"
-00024b60: 2c0a 2020 2020 2020 2020 2020 2020 2277  ,.            "w
-00024b70: 6f22 3a20 2231 7643 6879 714e 4e4c 7535  o": "1vChyqNNLu5
-00024b80: 7859 4864 7948 7041 4377 7770 7734 6c33  xYHdyHpACwwpw4l3
-00024b90: 7074 694b 6c6f 222c 0a20 2020 2020 2020  ptiKlo",.       
-00024ba0: 2020 2020 2022 7775 7522 3a20 2231 5f45       "wuu": "1_E
-00024bb0: 496e 3032 7843 5542 6377 4c4f 7759 6e41  In02xCUBcwLOwYnA
-00024bc0: 2d6c 5363 6a53 324c 6832 4543 7736 222c  -lScjS2Lh2ECw6",
-00024bd0: 0a20 2020 2020 2020 2020 2020 2022 7861  .            "xa
-00024be0: 6c22 3a20 2231 3962 4b58 734c 3144 3255  l": "19bKXsL1D2U
-00024bf0: 6573 6242 3530 4a50 7963 3954 7047 316c  esbB50JPyc9TpG1l
-00024c00: 4e63 3250 4f74 222c 0a20 2020 2020 2020  Nc2POt",.       
-00024c10: 2020 2020 2022 7868 223a 2022 3170 5056       "xh": "1pPV
-00024c20: 6378 4247 3378 7343 7a45 6e55 7a6c 6f68  cxBG3xsCzEnUzloh
-00024c30: 635f 7038 3967 5139 6453 4a42 3322 2c0a  c_p89gQ9dSJB3",.
-00024c40: 2020 2020 2020 2020 2020 2020 2278 6d66              "xmf
-00024c50: 223a 2022 3153 4d39 6c6c 6b75 3649 5f5a  ": "1SM9llku6I_Z
-00024c60: 755a 7a30 356d 4f42 754c 326c 782d 4b51  uZz05mOBuL2lx-KQ
-00024c70: 5876 6568 7222 2c0a 2020 2020 2020 2020  Xvehr",.        
-00024c80: 2020 2020 2279 6922 3a20 2231 574e 5772      "yi": "1WNWr
-00024c90: 316f 562d 4e6c 3763 314a 7638 785f 4d69  1oV-Nl7c1Jv8x_Mi
-00024ca0: 416a 3276 7852 7479 5161 7775 222c 0a20  Aj2vxRtyQawu",. 
-00024cb0: 2020 2020 2020 2020 2020 2022 796f 223a             "yo":
-00024cc0: 2022 3179 4e56 4f77 4d4f 5765 676c 624f   "1yNVOwMOWeglbO
-00024cd0: 6352 6f5a 7a67 6434 7577 6c4e 354a 4d79  cRoZzgd4uwlN5JMy
-00024ce0: 6e6e 5922 2c0a 2020 2020 2020 2020 2020  nnY",.          
-00024cf0: 2020 227a 6122 3a20 2231 6937 7067 3136    "za": "1i7pg16
-00024d00: 3263 445f 6955 3968 3864 6774 4932 416e  2cD_iU9h8dgtI2An
-00024d10: 3851 4363 627a 5541 6a42 222c 0a20 2020  8QCcbzUAjB",.   
-00024d20: 2020 2020 2020 2020 2022 7a65 6122 3a20           "zea": 
-00024d30: 2231 4557 536b 6953 6b50 4266 6279 6a57  "1EWSkiSkPBfbyjW
-00024d40: 6a5a 4b30 5675 4b64 7071 466e 464f 7058  jZK0VuKdpqFnFOpX
-00024d50: 5851 222c 0a20 2020 2020 2020 2020 2020  XQ",.           
-00024d60: 2022 7a68 2d63 6c61 7373 6963 616c 223a   "zh-classical":
-00024d70: 2022 3175 554b 5a61 6d4e 7030 384b 4137   "1uUKZamNp08KA7
-00024d80: 7337 3739 3473 4b50 4f71 5041 4c76 6f5f  s7794sKPOqPALvo_
-00024d90: 6274 6c22 2c0a 2020 2020 2020 2020 2020  btl",.          
-00024da0: 2020 227a 682d 6d69 6e2d 6e61 6e22 3a20    "zh-min-nan": 
-00024db0: 2231 6f53 677a 3359 4258 4c47 5567 4937  "1oSgz3YBXLGUgI7
-00024dc0: 6b6c 2d75 4d4f 435f 7777 364c 3046 4e46  kl-uMOC_ww6L0FNF
-00024dd0: 6d70 222c 0a20 2020 2020 2020 2020 2020  mp",.           
-00024de0: 2022 7a68 2d79 7565 223a 2022 317a 6877   "zh-yue": "1zhw
-00024df0: 6c55 6565 6979 4f41 5531 5171 7771 5a38  lUeeiyOAU1QqwqZ8
-00024e00: 6e39 3179 5849 5250 4641 3755 4522 2c0a  n91yXIRPFA7UE",.
-00024e10: 2020 2020 2020 2020 2020 2020 227a 6822              "zh"
-00024e20: 3a20 2231 4c5a 3936 4755 686b 5648 5155  : "1LZ96GUhkVHQU
-00024e30: 2d61 6a32 4333 574f 7274 6666 4f70 3055  -aj2C3WOrtffOp0U
-00024e40: 335a 3766 222c 0a20 2020 2020 2020 2020  3Z7f",.         
-00024e50: 2020 2022 7a75 223a 2022 3146 7958 6c5f     "zu": "1FyXl_
-00024e60: 554b 3137 3337 5842 3364 7271 5146 6847  UK1737XB3drqQFhG
-00024e70: 5869 4a72 4a63 6b69 4231 5722 2c0a 2020  XiJrJckiB1W",.  
-00024e80: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-00024e90: 7265 7475 726e 206c 616e 6775 6167 6573  return languages
-00024ea0: 5f69 6473 5b6c 616e 6775 6167 655d 0a0a  _ids[language]..
-00024eb0: 0a63 6c61 7373 204e 4552 5f4d 554c 5449  .class NER_MULTI
-00024ec0: 5f58 5452 454d 4528 4d75 6c74 6943 6f72  _XTREME(MultiCor
-00024ed0: 7075 7329 3a0a 2020 2020 6465 6620 5f5f  pus):.    def __
-00024ee0: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
-00024ef0: 7365 6c66 2c0a 2020 2020 2020 2020 6c61  self,.        la
-00024f00: 6e67 7561 6765 733a 2055 6e69 6f6e 5b73  nguages: Union[s
-00024f10: 7472 2c20 4c69 7374 5b73 7472 5d5d 203d  tr, List[str]] =
-00024f20: 2022 656e 222c 0a20 2020 2020 2020 2062   "en",.        b
-00024f30: 6173 655f 7061 7468 3a20 4f70 7469 6f6e  ase_path: Option
-00024f40: 616c 5b55 6e69 6f6e 5b73 7472 2c20 5061  al[Union[str, Pa
-00024f50: 7468 5d5d 203d 204e 6f6e 652c 0a20 2020  th]] = None,.   
-00024f60: 2020 2020 2069 6e5f 6d65 6d6f 7279 3a20       in_memory: 
-00024f70: 626f 6f6c 203d 2046 616c 7365 2c0a 2020  bool = False,.  
-00024f80: 2020 2020 2020 2a2a 636f 7270 7573 6172        **corpusar
-00024f90: 6773 2c0a 2020 2020 2920 2d3e 204e 6f6e  gs,.    ) -> Non
-00024fa0: 653a 0a20 2020 2020 2020 2022 2222 5874  e:.        """Xt
-00024fb0: 7265 6d65 2063 6f72 7075 7320 666f 7220  reme corpus for 
-00024fc0: 6372 6f73 732d 6c69 6e67 7561 6c20 4e45  cross-lingual NE
-00024fd0: 5220 636f 6e73 6973 7469 6e67 206f 6620  R consisting of 
-00024fe0: 6461 7461 7365 7473 206f 6620 6120 746f  datasets of a to
-00024ff0: 7461 6c20 6f66 2034 3020 6c61 6e67 7561  tal of 40 langua
-00025000: 6765 732e 0a0a 2020 2020 2020 2020 5468  ges...        Th
-00025010: 6520 6461 7461 2063 6f6d 6573 2066 726f  e data comes fro
-00025020: 6d20 7468 6520 676f 6f67 6c65 2072 6573  m the google res
-00025030: 6561 7263 6820 776f 726b 2058 5452 454d  earch work XTREM
-00025040: 4520 6874 7470 733a 2f2f 6769 7468 7562  E https://github
-00025050: 2e63 6f6d 2f67 6f6f 676c 652d 7265 7365  .com/google-rese
-00025060: 6172 6368 2f78 7472 656d 652e 0a20 2020  arch/xtreme..   
-00025070: 2020 2020 2054 6865 2064 6174 6120 6973       The data is
-00025080: 2064 6572 6976 6564 2066 726f 6d20 7468   derived from th
-00025090: 6520 7769 6b69 616e 6e20 6461 7461 7365  e wikiann datase
-000250a0: 7420 6874 7470 733a 2f2f 656c 6973 612d  t https://elisa-
-000250b0: 6965 2e67 6974 6875 622e 696f 2f77 696b  ie.github.io/wik
-000250c0: 6961 6e6e 2f20 286c 6963 656e 7365 3a20  iann/ (license: 
-000250d0: 6874 7470 733a 2f2f 6f70 656e 6461 7461  https://opendata
-000250e0: 636f 6d6d 6f6e 732e 6f72 672f 6c69 6365  commons.org/lice
-000250f0: 6e73 6573 2f62 792f 290a 0a20 2020 2020  nses/by/)..     
-00025100: 2020 2050 6172 616d 6574 6572 730a 2020     Parameters.  
-00025110: 2020 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d        ----------
-00025120: 0a20 2020 2020 2020 206c 616e 6775 6167  .        languag
-00025130: 6573 203a 2055 6e69 6f6e 5b73 7472 2c20  es : Union[str, 
-00025140: 4c69 7374 5b73 7472 5d5d 2c20 6f70 7469  List[str]], opti
-00025150: 6f6e 616c 0a20 2020 2020 2020 2020 2020  onal.           
-00025160: 2053 7065 6369 6679 2074 6865 206c 616e   Specify the lan
-00025170: 6775 6167 6573 2079 6f75 2077 616e 7420  guages you want 
-00025180: 746f 206c 6f61 642e 2050 726f 7669 6465  to load. Provide
-00025190: 2061 6e20 656d 7074 7920 6c69 7374 206f   an empty list o
-000251a0: 7220 7374 7269 6e67 2074 6f20 7365 6c65  r string to sele
-000251b0: 6374 2061 6c6c 206c 616e 6775 6167 6573  ct all languages
-000251c0: 2e0a 2020 2020 2020 2020 6261 7365 5f70  ..        base_p
-000251d0: 6174 6820 3a20 556e 696f 6e5b 7374 722c  ath : Union[str,
-000251e0: 2050 6174 685d 2c20 6f70 7469 6f6e 616c   Path], optional
-000251f0: 0a20 2020 2020 2020 2020 2020 2044 6566  .            Def
-00025200: 6175 6c74 2069 7320 4e6f 6e65 2c20 6d65  ault is None, me
-00025210: 616e 696e 6720 7468 6174 2063 6f72 7075  aning that corpu
-00025220: 7320 6765 7473 2061 7574 6f2d 646f 776e  s gets auto-down
-00025230: 6c6f 6164 6564 2061 6e64 206c 6f61 6465  loaded and loade
-00025240: 642e 2059 6f75 2063 616e 206f 7665 7272  d. You can overr
-00025250: 6964 6520 7468 6973 2074 6f20 706f 696e  ide this to poin
-00025260: 7420 746f 2061 2064 6966 6665 7265 6e74  t to a different
-00025270: 2066 6f6c 6465 7220 6275 7420 7479 7069   folder but typi
-00025280: 6361 6c6c 7920 7468 6973 2073 686f 756c  cally this shoul
-00025290: 6420 6e6f 7420 6265 206e 6563 6573 7361  d not be necessa
-000252a0: 7279 2e0a 2020 2020 2020 2020 696e 5f6d  ry..        in_m
-000252b0: 656d 6f72 7920 3a20 626f 6f6c 2c20 6f70  emory : bool, op
-000252c0: 7469 6f6e 616c 0a20 2020 2020 2020 2020  tional.         
-000252d0: 2020 2053 7065 6369 6679 2074 6861 7420     Specify that 
-000252e0: 7468 6520 6461 7461 7365 7420 7368 6f75  the dataset shou
-000252f0: 6c64 2062 6520 6c6f 6164 6564 2069 6e20  ld be loaded in 
-00025300: 6d65 6d6f 7279 2c20 7768 6963 6820 7370  memory, which sp
-00025310: 6565 6473 2075 7020 7468 6520 7472 6169  eeds up the trai
-00025320: 6e69 6e67 2070 726f 6365 7373 2062 7574  ning process but
-00025330: 2074 616b 6573 2069 6e63 7265 6173 6573   takes increases
-00025340: 2074 6865 2052 414d 2075 7361 6765 2073   the RAM usage s
-00025350: 6967 6e69 6669 6361 6e74 6c79 2e0a 2020  ignificantly..  
-00025360: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00025370: 2020 2320 6966 206e 6f20 6c61 6e67 7561    # if no langua
-00025380: 6765 7320 6172 6520 6769 7665 6e20 6173  ges are given as
-00025390: 2061 7267 756d 656e 7420 616c 6c20 6c61   argument all la
-000253a0: 6e67 7561 6765 7320 7573 6564 2069 6e20  nguages used in 
-000253b0: 5854 5245 4d45 2077 696c 6c20 6265 206c  XTREME will be l
-000253c0: 6f61 6465 640a 2020 2020 2020 2020 6966  oaded.        if
-000253d0: 206e 6f74 206c 616e 6775 6167 6573 3a0a   not languages:.
-000253e0: 2020 2020 2020 2020 2020 2020 6c61 6e67              lang
-000253f0: 7561 6765 7320 3d20 5b0a 2020 2020 2020  uages = [.      
-00025400: 2020 2020 2020 2020 2020 2261 6622 2c0a            "af",.
-00025410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025420: 2261 7222 2c0a 2020 2020 2020 2020 2020  "ar",.          
-00025430: 2020 2020 2020 2262 6722 2c0a 2020 2020        "bg",.    
-00025440: 2020 2020 2020 2020 2020 2020 2262 6e22              "bn"
-00025450: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00025460: 2020 2264 6522 2c0a 2020 2020 2020 2020    "de",.        
-00025470: 2020 2020 2020 2020 2265 6c22 2c0a 2020          "el",.  
-00025480: 2020 2020 2020 2020 2020 2020 2020 2265                "e
-00025490: 6e22 2c0a 2020 2020 2020 2020 2020 2020  n",.            
-000254a0: 2020 2020 2265 7322 2c0a 2020 2020 2020      "es",.      
-000254b0: 2020 2020 2020 2020 2020 2265 7422 2c0a            "et",.
-000254c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000254d0: 2265 7522 2c0a 2020 2020 2020 2020 2020  "eu",.          
-000254e0: 2020 2020 2020 2266 6122 2c0a 2020 2020        "fa",.    
-000254f0: 2020 2020 2020 2020 2020 2020 2266 6922              "fi"
-00025500: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00025510: 2020 2266 7222 2c0a 2020 2020 2020 2020    "fr",.        
-00025520: 2020 2020 2020 2020 2268 6522 2c0a 2020          "he",.  
-00025530: 2020 2020 2020 2020 2020 2020 2020 2268                "h
-00025540: 6922 2c0a 2020 2020 2020 2020 2020 2020  i",.            
-00025550: 2020 2020 2268 7522 2c0a 2020 2020 2020      "hu",.      
-00025560: 2020 2020 2020 2020 2020 2269 6422 2c0a            "id",.
-00025570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025580: 2269 7422 2c0a 2020 2020 2020 2020 2020  "it",.          
-00025590: 2020 2020 2020 226a 6122 2c0a 2020 2020        "ja",.    
-000255a0: 2020 2020 2020 2020 2020 2020 226a 7622              "jv"
-000255b0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-000255c0: 2020 226b 6122 2c0a 2020 2020 2020 2020    "ka",.        
-000255d0: 2020 2020 2020 2020 226b 6b22 2c0a 2020          "kk",.  
-000255e0: 2020 2020 2020 2020 2020 2020 2020 226b                "k
-000255f0: 6f22 2c0a 2020 2020 2020 2020 2020 2020  o",.            
-00025600: 2020 2020 226d 6c22 2c0a 2020 2020 2020      "ml",.      
-00025610: 2020 2020 2020 2020 2020 226d 7222 2c0a            "mr",.
-00025620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025630: 226d 7322 2c0a 2020 2020 2020 2020 2020  "ms",.          
-00025640: 2020 2020 2020 226d 7922 2c0a 2020 2020        "my",.    
-00025650: 2020 2020 2020 2020 2020 2020 226e 6c22              "nl"
-00025660: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00025670: 2020 2270 7422 2c0a 2020 2020 2020 2020    "pt",.        
-00025680: 2020 2020 2020 2020 2272 7522 2c0a 2020          "ru",.  
-00025690: 2020 2020 2020 2020 2020 2020 2020 2273                "s
-000256a0: 7722 2c0a 2020 2020 2020 2020 2020 2020  w",.            
-000256b0: 2020 2020 2274 6122 2c0a 2020 2020 2020      "ta",.      
-000256c0: 2020 2020 2020 2020 2020 2274 6522 2c0a            "te",.
-000256d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000256e0: 2274 6822 2c0a 2020 2020 2020 2020 2020  "th",.          
-000256f0: 2020 2020 2020 2274 6c22 2c0a 2020 2020        "tl",.    
-00025700: 2020 2020 2020 2020 2020 2020 2274 7222              "tr"
-00025710: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00025720: 2020 2275 7222 2c0a 2020 2020 2020 2020    "ur",.        
-00025730: 2020 2020 2020 2020 2276 6922 2c0a 2020          "vi",.  
-00025740: 2020 2020 2020 2020 2020 2020 2020 2279                "y
-00025750: 6f22 2c0a 2020 2020 2020 2020 2020 2020  o",.            
-00025760: 2020 2020 227a 6822 2c0a 2020 2020 2020      "zh",.      
-00025770: 2020 2020 2020 5d0a 0a20 2020 2020 2020        ]..       
-00025780: 2023 2069 6620 6f6e 6c79 206f 6e65 206c   # if only one l
-00025790: 616e 6775 6167 6520 6973 2067 6976 656e  anguage is given
-000257a0: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-000257b0: 7374 616e 6365 286c 616e 6775 6167 6573  stance(languages
-000257c0: 2c20 7374 7229 3a0a 2020 2020 2020 2020  , str):.        
-000257d0: 2020 2020 6c61 6e67 7561 6765 7320 3d20      languages = 
-000257e0: 5b6c 616e 6775 6167 6573 5d0a 0a20 2020  [languages]..   
-000257f0: 2020 2020 2062 6173 655f 7061 7468 203d       base_path =
-00025800: 206b 6f6c 6962 7269 2e63 6163 6865 5f72   kolibri.cache_r
-00025810: 6f6f 7420 2f20 2264 6174 6173 6574 7322  oot / "datasets"
-00025820: 2069 6620 6e6f 7420 6261 7365 5f70 6174   if not base_pat
-00025830: 6820 656c 7365 2050 6174 6828 6261 7365  h else Path(base
-00025840: 5f70 6174 6829 0a0a 2020 2020 2020 2020  _path)..        
-00025850: 2320 636f 6c75 6d6e 2066 6f72 6d61 740a  # column format.
-00025860: 2020 2020 2020 2020 636f 6c75 6d6e 7320          columns 
-00025870: 3d20 7b30 3a20 2274 6578 7422 2c20 313a  = {0: "text", 1:
-00025880: 2022 6e65 7222 7d0a 0a20 2020 2020 2020   "ner"}..       
-00025890: 2023 2074 6869 7320 6461 7461 7365 7420   # this dataset 
-000258a0: 6e61 6d65 0a20 2020 2020 2020 2064 6174  name.        dat
-000258b0: 6173 6574 5f6e 616d 6520 3d20 7365 6c66  aset_name = self
-000258c0: 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e 616d  .__class__.__nam
-000258d0: 655f 5f2e 6c6f 7765 7228 290a 0a20 2020  e__.lower()..   
-000258e0: 2020 2020 2064 6174 615f 666f 6c64 6572       data_folder
-000258f0: 203d 2062 6173 655f 7061 7468 202f 2064   = base_path / d
-00025900: 6174 6173 6574 5f6e 616d 650a 0a20 2020  ataset_name..   
-00025910: 2020 2020 2023 2046 6f72 2065 6163 6820       # For each 
-00025920: 6c61 6e67 7561 6765 2069 6e20 6c61 6e67  language in lang
-00025930: 7561 6765 732c 2074 6865 2066 696c 6520  uages, the file 
-00025940: 6973 2064 6f77 6e6c 6f61 6465 6420 6966  is downloaded if
-00025950: 206e 6f74 2065 7869 7374 656e 740a 2020   not existent.  
-00025960: 2020 2020 2020 2320 5468 656e 2061 2063        # Then a c
-00025970: 6f6d 6c75 6d6e 636f 7270 7573 206f 6620  omlumncorpus of 
-00025980: 7468 6174 2064 6174 6120 6973 2063 7265  that data is cre
-00025990: 6174 6564 2061 6e64 2073 6176 6564 2069  ated and saved i
-000259a0: 6e20 6120 6c69 7374 0a20 2020 2020 2020  n a list.       
-000259b0: 2023 2054 6869 7320 6c69 7374 2069 7320   # This list is 
-000259c0: 6861 6e64 6564 2074 6f20 7468 6520 6d75  handed to the mu
-000259d0: 6c74 6963 6f72 7075 730a 0a20 2020 2020  lticorpus..     
-000259e0: 2020 2023 206c 6973 7420 7468 6174 2063     # list that c
-000259f0: 6f6e 7461 696e 7320 7468 6520 636f 6c75  ontains the colu
-00025a00: 6d6e 636f 706f 7261 0a20 2020 2020 2020  mncopora.       
-00025a10: 2063 6f72 706f 7261 3a20 4c69 7374 5b43   corpora: List[C
-00025a20: 6f72 7075 735d 203d 205b 5d0a 0a20 2020  orpus] = []..   
-00025a30: 2020 2020 2068 755f 7061 7468 203d 2022       hu_path = "
-00025a40: 6874 7470 733a 2f2f 6e6c 702e 696e 666f  https://nlp.info
-00025a50: 726d 6174 696b 2e68 752d 6265 726c 696e  rmatik.hu-berlin
-00025a60: 2e64 652f 7265 736f 7572 6365 732f 6461  .de/resources/da
-00025a70: 7461 7365 7473 2f70 616e 785f 6461 7461  tasets/panx_data
-00025a80: 7365 7422 0a0a 2020 2020 2020 2020 2320  set"..        # 
-00025a90: 646f 776e 6c6f 6164 2064 6174 6120 6966  download data if
-00025aa0: 206e 6563 6573 7361 7279 0a20 2020 2020   necessary.     
-00025ab0: 2020 2066 6f72 206c 616e 6775 6167 6520     for language 
-00025ac0: 696e 206c 616e 6775 6167 6573 3a0a 2020  in languages:.  
-00025ad0: 2020 2020 2020 2020 2020 6c61 6e67 7561            langua
-00025ae0: 6765 5f66 6f6c 6465 7220 3d20 6461 7461  ge_folder = data
-00025af0: 5f66 6f6c 6465 7220 2f20 6c61 6e67 7561  _folder / langua
-00025b00: 6765 0a0a 2020 2020 2020 2020 2020 2020  ge..            
-00025b10: 2320 6966 206c 616e 6775 6167 6520 6e6f  # if language no
-00025b20: 7420 646f 776e 6c6f 6164 6564 2079 6574  t downloaded yet
-00025b30: 2c20 646f 776e 6c6f 6164 2069 740a 2020  , download it.  
-00025b40: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-00025b50: 206c 616e 6775 6167 655f 666f 6c64 6572   language_folder
-00025b60: 2e65 7869 7374 7328 293a 0a20 2020 2020  .exists():.     
-00025b70: 2020 2020 2020 2020 2020 2066 696c 655f             file_
-00025b80: 6e61 6d65 203d 206c 616e 6775 6167 6520  name = language 
-00025b90: 2b20 222e 7461 722e 677a 220a 2020 2020  + ".tar.gz".    
-00025ba0: 2020 2020 2020 2020 2020 2020 2320 6372              # cr
-00025bb0: 6561 7465 2066 6f6c 6465 720a 2020 2020  eate folder.    
-00025bc0: 2020 2020 2020 2020 2020 2020 6f73 2e6d              os.m
-00025bd0: 616b 6564 6972 7328 6c61 6e67 7561 6765  akedirs(language
-00025be0: 5f66 6f6c 6465 7229 0a0a 2020 2020 2020  _folder)..      
-00025bf0: 2020 2020 2020 2020 2020 2320 646f 776e            # down
-00025c00: 6c6f 6164 2066 726f 6d20 4855 2053 6572  load from HU Ser
-00025c10: 7665 720a 2020 2020 2020 2020 2020 2020  ver.            
-00025c20: 2020 2020 7465 6d70 5f66 696c 6520 3d20      temp_file = 
-00025c30: 6361 6368 6564 5f70 6174 6828 0a20 2020  cached_path(.   
-00025c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025c50: 2068 755f 7061 7468 202b 2022 2f22 202b   hu_path + "/" +
-00025c60: 2066 696c 655f 6e61 6d65 2c0a 2020 2020   file_name,.    
-00025c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00025c80: 5061 7468 2822 6461 7461 7365 7473 2229  Path("datasets")
-00025c90: 202f 2064 6174 6173 6574 5f6e 616d 6520   / dataset_name 
-00025ca0: 2f20 6c61 6e67 7561 6765 2c0a 2020 2020  / language,.    
-00025cb0: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
-00025cc0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00025cd0: 2075 6e7a 6970 0a20 2020 2020 2020 2020   unzip.         
-00025ce0: 2020 2020 2020 206c 6f67 2e69 6e66 6f28         log.info(
-00025cf0: 2245 7874 7261 6374 696e 6720 6461 7461  "Extracting data
-00025d00: 2e2e 2e22 290a 2020 2020 2020 2020 2020  ...").          
-00025d10: 2020 2020 2020 696d 706f 7274 2074 6172        import tar
-00025d20: 6669 6c65 0a0a 2020 2020 2020 2020 2020  file..          
-00025d30: 2020 2020 2020 7461 7220 3d20 7461 7266        tar = tarf
-00025d40: 696c 652e 6f70 656e 2873 7472 2874 656d  ile.open(str(tem
-00025d50: 705f 6669 6c65 292c 2022 723a 677a 2229  p_file), "r:gz")
-00025d60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00025d70: 2066 6f72 2070 6172 7420 696e 205b 2274   for part in ["t
-00025d80: 7261 696e 222c 2022 7465 7374 222c 2022  rain", "test", "
-00025d90: 6465 7622 5d3a 0a20 2020 2020 2020 2020  dev"]:.         
-00025da0: 2020 2020 2020 2020 2020 2074 6172 2e65             tar.e
-00025db0: 7874 7261 6374 2870 6172 742c 2073 7472  xtract(part, str
-00025dc0: 286c 616e 6775 6167 655f 666f 6c64 6572  (language_folder
-00025dd0: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
-00025de0: 2020 2074 6172 2e63 6c6f 7365 2829 0a20     tar.close(). 
-00025df0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-00025e00: 6f67 2e69 6e66 6f28 222e 2e2e 646f 6e65  og.info("...done
-00025e10: 2e22 290a 0a20 2020 2020 2020 2020 2020  .")..           
-00025e20: 2020 2020 2023 2074 7261 6e73 666f 726d       # transform
-00025e30: 2064 6174 6120 696e 746f 2072 6571 7569   data into requi
-00025e40: 7265 6420 666f 726d 6174 0a20 2020 2020  red format.     
-00025e50: 2020 2020 2020 2020 2020 206c 6f67 2e69             log.i
-00025e60: 6e66 6f28 2250 726f 6365 7373 696e 6720  nfo("Processing 
-00025e70: 6461 7461 7365 742e 2e2e 2229 0a20 2020  dataset...").   
-00025e80: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-00025e90: 2070 6172 7420 696e 205b 2274 7261 696e   part in ["train
-00025ea0: 222c 2022 7465 7374 222c 2022 6465 7622  ", "test", "dev"
-00025eb0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
-00025ec0: 2020 2020 2020 2073 656c 662e 5f78 7472         self._xtr
-00025ed0: 656d 655f 746f 5f73 696d 706c 655f 6e65  eme_to_simple_ne
-00025ee0: 725f 616e 6e6f 7461 7469 6f6e 2873 7472  r_annotation(str
-00025ef0: 286c 616e 6775 6167 655f 666f 6c64 6572  (language_folder
-00025f00: 202f 2070 6172 7429 290a 2020 2020 2020   / part)).      
-00025f10: 2020 2020 2020 2020 2020 6c6f 672e 696e            log.in
-00025f20: 666f 2822 2e2e 2e64 6f6e 652e 2229 0a0a  fo("...done.")..
-00025f30: 2020 2020 2020 2020 2020 2020 2320 696e              # in
-00025f40: 6974 6961 6c69 7a65 2063 6f6d 6c75 6d6e  itialize comlumn
-00025f50: 636f 7270 7573 2061 6e64 2061 6464 2069  corpus and add i
-00025f60: 7420 746f 206c 6973 740a 2020 2020 2020  t to list.      
-00025f70: 2020 2020 2020 6c6f 672e 696e 666f 2866        log.info(f
-00025f80: 2252 6561 6469 6e67 2064 6174 6120 666f  "Reading data fo
-00025f90: 7220 6c61 6e67 7561 6765 207b 6c61 6e67  r language {lang
-00025fa0: 7561 6765 7d22 290a 2020 2020 2020 2020  uage}").        
-00025fb0: 2020 2020 636f 7270 203d 2043 6f6c 756d      corp = Colum
-00025fc0: 6e43 6f72 7075 7328 0a20 2020 2020 2020  nCorpus(.       
-00025fd0: 2020 2020 2020 2020 2064 6174 615f 666f           data_fo
-00025fe0: 6c64 6572 3d6c 616e 6775 6167 655f 666f  lder=language_fo
-00025ff0: 6c64 6572 2c0a 2020 2020 2020 2020 2020  lder,.          
-00026000: 2020 2020 2020 636f 6c75 6d6e 5f66 6f72        column_for
-00026010: 6d61 743d 636f 6c75 6d6e 732c 0a20 2020  mat=columns,.   
-00026020: 2020 2020 2020 2020 2020 2020 2069 6e5f               in_
-00026030: 6d65 6d6f 7279 3d69 6e5f 6d65 6d6f 7279  memory=in_memory
-00026040: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00026050: 2020 2a2a 636f 7270 7573 6172 6773 2c0a    **corpusargs,.
-00026060: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-00026070: 2020 2020 2020 2020 2020 636f 7270 6f72            corpor
-00026080: 612e 6170 7065 6e64 2863 6f72 7029 0a0a  a.append(corp)..
-00026090: 2020 2020 2020 2020 7375 7065 7228 292e          super().
-000260a0: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
-000260b0: 2020 2020 2020 636f 7270 6f72 612c 0a20        corpora,. 
-000260c0: 2020 2020 2020 2020 2020 206e 616d 653d             name=
-000260d0: 2278 7472 656d 6522 2c0a 2020 2020 2020  "xtreme",.      
-000260e0: 2020 290a 0a20 2020 2064 6566 205f 7874    )..    def _xt
-000260f0: 7265 6d65 5f74 6f5f 7369 6d70 6c65 5f6e  reme_to_simple_n
-00026100: 6572 5f61 6e6e 6f74 6174 696f 6e28 7365  er_annotation(se
-00026110: 6c66 2c20 6461 7461 5f66 696c 653a 2055  lf, data_file: U
-00026120: 6e69 6f6e 5b73 7472 2c20 5061 7468 5d29  nion[str, Path])
-00026130: 3a0a 2020 2020 2020 2020 7769 7468 206f  :.        with o
-00026140: 7065 6e28 6461 7461 5f66 696c 652c 2065  pen(data_file, e
-00026150: 6e63 6f64 696e 673d 2275 7466 2d38 2229  ncoding="utf-8")
-00026160: 2061 7320 663a 0a20 2020 2020 2020 2020   as f:.         
-00026170: 2020 206c 696e 6573 203d 2066 2e72 6561     lines = f.rea
-00026180: 646c 696e 6573 2829 0a20 2020 2020 2020  dlines().       
-00026190: 2077 6974 6820 6f70 656e 2864 6174 615f   with open(data_
-000261a0: 6669 6c65 2c20 2277 222c 2065 6e63 6f64  file, "w", encod
-000261b0: 696e 673d 2275 7466 2d38 2229 2061 7320  ing="utf-8") as 
-000261c0: 663a 0a20 2020 2020 2020 2020 2020 2066  f:.            f
-000261d0: 6f72 206c 696e 6520 696e 206c 696e 6573  or line in lines
-000261e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000261f0: 2020 6966 206c 696e 6520 3d3d 2022 5c6e    if line == "\n
-00026200: 223a 0a20 2020 2020 2020 2020 2020 2020  ":.             
-00026210: 2020 2020 2020 2066 2e77 7269 7465 286c         f.write(l
-00026220: 696e 6529 0a20 2020 2020 2020 2020 2020  ine).           
-00026230: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00026240: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-00026250: 6973 7465 203d 206c 696e 652e 7370 6c69  iste = line.spli
-00026260: 7428 290a 2020 2020 2020 2020 2020 2020  t().            
-00026270: 2020 2020 2020 2020 662e 7772 6974 6528          f.write(
-00026280: 6c69 7374 655b 305d 2e73 706c 6974 2822  liste[0].split("
-00026290: 3a22 2c20 3129 5b31 5d20 2b20 2220 2220  :", 1)[1] + " " 
-000262a0: 2b20 6c69 7374 655b 315d 202b 2022 5c6e  + liste[1] + "\n
-000262b0: 2229 0a0a 0a63 6c61 7373 204e 4552 5f4d  ")...class NER_M
-000262c0: 554c 5449 5f57 494b 494e 4552 284d 756c  ULTI_WIKINER(Mul
-000262d0: 7469 436f 7270 7573 293a 0a20 2020 2064  tiCorpus):.    d
-000262e0: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
-000262f0: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
-00026300: 2020 206c 616e 6775 6167 6573 3a20 556e     languages: Un
-00026310: 696f 6e5b 7374 722c 204c 6973 745b 7374  ion[str, List[st
-00026320: 725d 5d20 3d20 2265 6e22 2c0a 2020 2020  r]] = "en",.    
-00026330: 2020 2020 6261 7365 5f70 6174 683a 204f      base_path: O
-00026340: 7074 696f 6e61 6c5b 556e 696f 6e5b 7374  ptional[Union[st
-00026350: 722c 2050 6174 685d 5d20 3d20 4e6f 6e65  r, Path]] = None
-00026360: 2c0a 2020 2020 2020 2020 696e 5f6d 656d  ,.        in_mem
-00026370: 6f72 793a 2062 6f6f 6c20 3d20 4661 6c73  ory: bool = Fals
-00026380: 652c 0a20 2020 2020 2020 202a 2a63 6f72  e,.        **cor
-00026390: 7075 7361 7267 732c 0a20 2020 2029 202d  pusargs,.    ) -
-000263a0: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
-000263b0: 6261 7365 5f70 6174 6820 3d20 6b6f 6c69  base_path = koli
-000263c0: 6272 692e 6361 6368 655f 726f 6f74 202f  bri.cache_root /
-000263d0: 2022 6461 7461 7365 7473 2220 6966 206e   "datasets" if n
-000263e0: 6f74 2062 6173 655f 7061 7468 2065 6c73  ot base_path els
-000263f0: 6520 5061 7468 2862 6173 655f 7061 7468  e Path(base_path
-00026400: 290a 0a20 2020 2020 2020 2023 2069 6620  )..        # if 
-00026410: 6f6e 6c79 206f 6e65 206c 616e 6775 6167  only one languag
-00026420: 6520 6973 2067 6976 656e 0a20 2020 2020  e is given.     
-00026430: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00026440: 286c 616e 6775 6167 6573 2c20 7374 7229  (languages, str)
-00026450: 3a0a 2020 2020 2020 2020 2020 2020 6c61  :.            la
-00026460: 6e67 7561 6765 7320 3d20 5b6c 616e 6775  nguages = [langu
-00026470: 6167 6573 5d0a 0a20 2020 2020 2020 2023  ages]..        #
-00026480: 2063 6f6c 756d 6e20 666f 726d 6174 0a20   column format. 
-00026490: 2020 2020 2020 2063 6f6c 756d 6e73 203d         columns =
-000264a0: 207b 303a 2022 7465 7874 222c 2031 3a20   {0: "text", 1: 
-000264b0: 2270 6f73 222c 2032 3a20 226e 6572 227d  "pos", 2: "ner"}
-000264c0: 0a0a 2020 2020 2020 2020 2320 7468 6973  ..        # this
-000264d0: 2064 6174 6173 6574 206e 616d 650a 2020   dataset name.  
-000264e0: 2020 2020 2020 6461 7461 7365 745f 6e61        dataset_na
-000264f0: 6d65 203d 2073 656c 662e 5f5f 636c 6173  me = self.__clas
-00026500: 735f 5f2e 5f5f 6e61 6d65 5f5f 2e6c 6f77  s__.__name__.low
-00026510: 6572 2829 0a0a 2020 2020 2020 2020 6461  er()..        da
-00026520: 7461 5f66 6f6c 6465 7220 3d20 6261 7365  ta_folder = base
-00026530: 5f70 6174 6820 2f20 6461 7461 7365 745f  _path / dataset_
-00026540: 6e61 6d65 0a0a 2020 2020 2020 2020 636f  name..        co
-00026550: 7270 6f72 613a 204c 6973 745b 436f 7270  rpora: List[Corp
-00026560: 7573 5d20 3d20 5b5d 0a20 2020 2020 2020  us] = [].       
-00026570: 2066 6f72 206c 616e 6775 6167 6520 696e   for language in
-00026580: 206c 616e 6775 6167 6573 3a0a 2020 2020   languages:.    
-00026590: 2020 2020 2020 2020 6c61 6e67 7561 6765          language
-000265a0: 5f66 6f6c 6465 7220 3d20 6461 7461 5f66  _folder = data_f
-000265b0: 6f6c 6465 7220 2f20 6c61 6e67 7561 6765  older / language
-000265c0: 0a0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-000265d0: 646f 776e 6c6f 6164 2064 6174 6120 6966  download data if
-000265e0: 206e 6563 6573 7361 7279 0a20 2020 2020   necessary.     
-000265f0: 2020 2020 2020 2073 656c 662e 5f64 6f77         self._dow
-00026600: 6e6c 6f61 645f 7769 6b69 6e65 7228 6c61  nload_wikiner(la
-00026610: 6e67 7561 6765 2c20 7374 7228 6c61 6e67  nguage, str(lang
-00026620: 7561 6765 5f66 6f6c 6465 7229 290a 0a20  uage_folder)).. 
-00026630: 2020 2020 2020 2020 2020 2023 2069 6e69             # ini
-00026640: 7469 616c 697a 6520 636f 6d6c 756d 6e63  tialize comlumnc
-00026650: 6f72 7075 7320 616e 6420 6164 6420 6974  orpus and add it
-00026660: 2074 6f20 6c69 7374 0a20 2020 2020 2020   to list.       
-00026670: 2020 2020 206c 6f67 2e69 6e66 6f28 6622       log.info(f"
-00026680: 5265 6164 2064 6174 6120 666f 7220 6c61  Read data for la
-00026690: 6e67 7561 6765 207b 6c61 6e67 7561 6765  nguage {language
-000266a0: 7d22 290a 2020 2020 2020 2020 2020 2020  }").            
-000266b0: 636f 7270 203d 2043 6f6c 756d 6e43 6f72  corp = ColumnCor
-000266c0: 7075 7328 0a20 2020 2020 2020 2020 2020  pus(.           
-000266d0: 2020 2020 2064 6174 615f 666f 6c64 6572       data_folder
-000266e0: 3d6c 616e 6775 6167 655f 666f 6c64 6572  =language_folder
-000266f0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00026700: 2020 636f 6c75 6d6e 5f66 6f72 6d61 743d    column_format=
-00026710: 636f 6c75 6d6e 732c 0a20 2020 2020 2020  columns,.       
-00026720: 2020 2020 2020 2020 2069 6e5f 6d65 6d6f           in_memo
-00026730: 7279 3d69 6e5f 6d65 6d6f 7279 2c0a 2020  ry=in_memory,.  
-00026740: 2020 2020 2020 2020 2020 2020 2020 2a2a                **
-00026750: 636f 7270 7573 6172 6773 2c0a 2020 2020  corpusargs,.    
-00026760: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00026770: 2020 2020 2020 636f 7270 6f72 612e 6170        corpora.ap
-00026780: 7065 6e64 2863 6f72 7029 0a0a 2020 2020  pend(corp)..    
-00026790: 2020 2020 7375 7065 7228 292e 5f5f 696e      super().__in
-000267a0: 6974 5f5f 280a 2020 2020 2020 2020 2020  it__(.          
-000267b0: 2020 636f 7270 6f72 612c 0a20 2020 2020    corpora,.     
-000267c0: 2020 2020 2020 206e 616d 653d 2277 696b         name="wik
-000267d0: 696e 6572 222c 0a20 2020 2020 2020 2029  iner",.        )
-000267e0: 0a0a 2020 2020 6465 6620 5f64 6f77 6e6c  ..    def _downl
-000267f0: 6f61 645f 7769 6b69 6e65 7228 7365 6c66  oad_wikiner(self
-00026800: 2c20 6c61 6e67 7561 6765 5f63 6f64 653a  , language_code:
-00026810: 2073 7472 2c20 6461 7461 7365 745f 6e61   str, dataset_na
-00026820: 6d65 3a20 7374 7229 3a0a 2020 2020 2020  me: str):.      
-00026830: 2020 2320 646f 776e 6c6f 6164 2064 6174    # download dat
-00026840: 6120 6966 206e 6563 6573 7361 7279 0a20  a if necessary. 
-00026850: 2020 2020 2020 2077 696b 696e 6572 5f70         wikiner_p
-00026860: 6174 6820 3d20 2268 7474 7073 3a2f 2f72  ath = "https://r
-00026870: 6177 2e67 6974 6875 6275 7365 7263 6f6e  aw.githubusercon
-00026880: 7465 6e74 2e63 6f6d 2f64 6963 652d 6772  tent.com/dice-gr
-00026890: 6f75 702f 464f 582f 6d61 7374 6572 2f69  oup/FOX/master/i
-000268a0: 6e70 7574 2f57 696b 696e 6572 2f22 0a20  nput/Wikiner/". 
-000268b0: 2020 2020 2020 206c 6320 3d20 6c61 6e67         lc = lang
-000268c0: 7561 6765 5f63 6f64 650a 0a20 2020 2020  uage_code..     
-000268d0: 2020 2064 6174 615f 6669 6c65 203d 206b     data_file = k
-000268e0: 6f6c 6962 7269 2e63 6163 6865 5f72 6f6f  olibri.cache_roo
-000268f0: 7420 2f20 2264 6174 6173 6574 7322 202f  t / "datasets" /
-00026900: 2064 6174 6173 6574 5f6e 616d 6520 2f20   dataset_name / 
-00026910: 6622 6169 6a2d 7769 6b69 6e65 722d 7b6c  f"aij-wikiner-{l
-00026920: 637d 2d77 7033 2e74 7261 696e 220a 2020  c}-wp3.train".  
-00026930: 2020 2020 2020 6966 206e 6f74 2064 6174        if not dat
-00026940: 615f 6669 6c65 2e69 735f 6669 6c65 2829  a_file.is_file()
-00026950: 3a0a 2020 2020 2020 2020 2020 2020 6361  :.            ca
-00026960: 6368 6564 5f70 6174 6828 0a20 2020 2020  ched_path(.     
-00026970: 2020 2020 2020 2020 2020 2066 227b 7769             f"{wi
-00026980: 6b69 6e65 725f 7061 7468 7d61 696a 2d77  kiner_path}aij-w
-00026990: 696b 696e 6572 2d7b 6c63 7d2d 7770 332e  ikiner-{lc}-wp3.
-000269a0: 627a 3222 2c0a 2020 2020 2020 2020 2020  bz2",.          
-000269b0: 2020 2020 2020 5061 7468 2822 6461 7461        Path("data
-000269c0: 7365 7473 2229 202f 2064 6174 6173 6574  sets") / dataset
-000269d0: 5f6e 616d 652c 0a20 2020 2020 2020 2020  _name,.         
-000269e0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-000269f0: 2069 6d70 6f72 7420 627a 320a 0a20 2020   import bz2..   
-00026a00: 2020 2020 2020 2020 2023 2075 6e70 6163           # unpac
-00026a10: 6b20 616e 6420 7772 6974 6520 6f75 7420  k and write out 
-00026a20: 696e 2043 6f4e 4c4c 2063 6f6c 756d 6e2d  in CoNLL column-
-00026a30: 6c69 6b65 2066 6f72 6d61 740a 2020 2020  like format.    
-00026a40: 2020 2020 2020 2020 627a 5f66 696c 6520          bz_file 
-00026a50: 3d20 627a 322e 425a 3246 696c 6528 0a20  = bz2.BZ2File(. 
-00026a60: 2020 2020 2020 2020 2020 2020 2020 206b                 k
-00026a70: 6f6c 6962 7269 2e63 6163 6865 5f72 6f6f  olibri.cache_roo
-00026a80: 7420 2f20 2264 6174 6173 6574 7322 202f  t / "datasets" /
-00026a90: 2064 6174 6173 6574 5f6e 616d 6520 2f20   dataset_name / 
-00026aa0: 6622 6169 6a2d 7769 6b69 6e65 722d 7b6c  f"aij-wikiner-{l
-00026ab0: 637d 2d77 7033 2e62 7a32 222c 0a20 2020  c}-wp3.bz2",.   
-00026ac0: 2020 2020 2020 2020 2020 2020 2022 7262               "rb
-00026ad0: 222c 0a20 2020 2020 2020 2020 2020 2029  ",.            )
-00026ae0: 0a20 2020 2020 2020 2020 2020 2077 6974  .            wit
-00026af0: 6820 627a 5f66 696c 6520 6173 2066 2c20  h bz_file as f, 
-00026b00: 6f70 656e 280a 2020 2020 2020 2020 2020  open(.          
-00026b10: 2020 2020 2020 6b6f 6c69 6272 692e 6361        kolibri.ca
-00026b20: 6368 655f 726f 6f74 202f 2022 6461 7461  che_root / "data
-00026b30: 7365 7473 2220 2f20 6461 7461 7365 745f  sets" / dataset_
-00026b40: 6e61 6d65 202f 2066 2261 696a 2d77 696b  name / f"aij-wik
-00026b50: 696e 6572 2d7b 6c63 7d2d 7770 332e 7472  iner-{lc}-wp3.tr
-00026b60: 6169 6e22 2c0a 2020 2020 2020 2020 2020  ain",.          
-00026b70: 2020 2020 2020 2277 222c 0a20 2020 2020        "w",.     
-00026b80: 2020 2020 2020 2020 2020 2065 6e63 6f64             encod
-00026b90: 696e 673d 2275 7466 2d38 222c 0a20 2020  ing="utf-8",.   
-00026ba0: 2020 2020 2020 2020 2029 2061 7320 6f75           ) as ou
-00026bb0: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-00026bc0: 2020 2066 6f72 206c 696e 6562 2069 6e20     for lineb in 
-00026bd0: 663a 0a20 2020 2020 2020 2020 2020 2020  f:.             
-00026be0: 2020 2020 2020 206c 696e 6520 3d20 6c69         line = li
-00026bf0: 6e65 622e 6465 636f 6465 2822 7574 662d  neb.decode("utf-
-00026c00: 3822 290a 2020 2020 2020 2020 2020 2020  8").            
-00026c10: 2020 2020 2020 2020 776f 7264 7320 3d20          words = 
-00026c20: 6c69 6e65 2e73 706c 6974 2822 2022 290a  line.split(" ").
-00026c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00026c40: 2020 2020 666f 7220 776f 7264 2069 6e20      for word in 
-00026c50: 776f 7264 733a 0a20 2020 2020 2020 2020  words:.         
-00026c60: 2020 2020 2020 2020 2020 2020 2020 206f                 o
-00026c70: 7574 2e77 7269 7465 2822 5c74 222e 6a6f  ut.write("\t".jo
-00026c80: 696e 2877 6f72 642e 7370 6c69 7428 227c  in(word.split("|
-00026c90: 2229 2920 2b20 225c 6e22 290a 0a0a 636c  ")) + "\n")...cl
-00026ca0: 6173 7320 4e45 525f 5357 4544 4953 4828  ass NER_SWEDISH(
-00026cb0: 436f 6c75 6d6e 436f 7270 7573 293a 0a20  ColumnCorpus):. 
-00026cc0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-00026cd0: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
-00026ce0: 2020 2020 2020 2062 6173 655f 7061 7468         base_path
-00026cf0: 3a20 4f70 7469 6f6e 616c 5b55 6e69 6f6e  : Optional[Union
-00026d00: 5b73 7472 2c20 5061 7468 5d5d 203d 204e  [str, Path]] = N
-00026d10: 6f6e 652c 0a20 2020 2020 2020 2069 6e5f  one,.        in_
-00026d20: 6d65 6d6f 7279 3a20 626f 6f6c 203d 2054  memory: bool = T
-00026d30: 7275 652c 0a20 2020 2020 2020 202a 2a63  rue,.        **c
-00026d40: 6f72 7075 7361 7267 732c 0a20 2020 2029  orpusargs,.    )
-00026d50: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-00026d60: 2020 2222 2249 6e69 7469 616c 697a 6520    """Initialize 
-00026d70: 7468 6520 4e45 525f 5357 4544 4953 4820  the NER_SWEDISH 
-00026d80: 636f 7270 7573 2066 6f72 2053 7765 6469  corpus for Swedi
-00026d90: 7368 2e0a 0a20 2020 2020 2020 2054 6865  sh...        The
-00026da0: 2066 6972 7374 2074 696d 6520 796f 7520   first time you 
-00026db0: 6361 6c6c 2074 6869 7320 636f 6e73 7472  call this constr
-00026dc0: 7563 746f 7220 6974 2077 696c 6c20 6175  uctor it will au
-00026dd0: 746f 6d61 7469 6361 6c6c 7920 646f 776e  tomatically down
-00026de0: 6c6f 6164 2074 6865 2064 6174 6173 6574  load the dataset
-00026df0: 2e0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
-00026e00: 2062 6173 655f 7061 7468 3a20 4465 6661   base_path: Defa
-00026e10: 756c 7420 6973 204e 6f6e 652c 206d 6561  ult is None, mea
-00026e20: 6e69 6e67 2074 6861 7420 636f 7270 7573  ning that corpus
-00026e30: 2067 6574 7320 6175 746f 2d64 6f77 6e6c   gets auto-downl
-00026e40: 6f61 6465 6420 616e 6420 6c6f 6164 6564  oaded and loaded
-00026e50: 2e20 596f 7520 6361 6e20 6f76 6572 7269  . You can overri
-00026e60: 6465 2074 6869 730a 2020 2020 2020 2020  de this.        
-00026e70: 746f 2070 6f69 6e74 2074 6f20 6120 6469  to point to a di
-00026e80: 6666 6572 656e 7420 666f 6c64 6572 2062  fferent folder b
-00026e90: 7574 2074 7970 6963 616c 6c79 2074 6869  ut typically thi
-00026ea0: 7320 7368 6f75 6c64 206e 6f74 2062 6520  s should not be 
-00026eb0: 6e65 6365 7373 6172 792e 0a20 2020 2020  necessary..     
-00026ec0: 2020 203a 7061 7261 6d20 696e 5f6d 656d     :param in_mem
-00026ed0: 6f72 793a 2049 6620 5472 7565 2c20 6b65  ory: If True, ke
-00026ee0: 6570 7320 6461 7461 7365 7420 696e 206d  eps dataset in m
-00026ef0: 656d 6f72 7920 6769 7669 6e67 2073 7065  emory giving spe
-00026f00: 6564 7570 7320 696e 2074 7261 696e 696e  edups in trainin
-00026f10: 672e 0a20 2020 2020 2020 203a 7061 7261  g..        :para
-00026f20: 6d20 646f 6375 6d65 6e74 5f61 735f 7365  m document_as_se
-00026f30: 7175 656e 6365 3a20 4966 2054 7275 652c  quence: If True,
-00026f40: 2061 6c6c 2073 656e 7465 6e63 6573 206f   all sentences o
-00026f50: 6620 6120 646f 6375 6d65 6e74 2061 7265  f a document are
-00026f60: 2072 6561 6420 696e 746f 2061 2073 696e   read into a sin
-00026f70: 676c 6520 5365 6e74 656e 6365 206f 626a  gle Sentence obj
-00026f80: 6563 740a 2020 2020 2020 2020 2222 220a  ect.        """.
-00026f90: 2020 2020 2020 2020 6261 7365 5f70 6174          base_pat
-00026fa0: 6820 3d20 6b6f 6c69 6272 692e 6361 6368  h = kolibri.cach
-00026fb0: 655f 726f 6f74 202f 2022 6461 7461 7365  e_root / "datase
-00026fc0: 7473 2220 6966 206e 6f74 2062 6173 655f  ts" if not base_
-00026fd0: 7061 7468 2065 6c73 6520 5061 7468 2862  path else Path(b
-00026fe0: 6173 655f 7061 7468 290a 0a20 2020 2020  ase_path)..     
-00026ff0: 2020 2023 2063 6f6c 756d 6e20 666f 726d     # column form
-00027000: 6174 0a20 2020 2020 2020 2063 6f6c 756d  at.        colum
-00027010: 6e73 203d 207b 303a 2022 7465 7874 222c  ns = {0: "text",
-00027020: 2031 3a20 226e 6572 227d 0a0a 2020 2020   1: "ner"}..    
-00027030: 2020 2020 2320 7468 6973 2064 6174 6173      # this datas
-00027040: 6574 206e 616d 650a 2020 2020 2020 2020  et name.        
-00027050: 6461 7461 7365 745f 6e61 6d65 203d 2073  dataset_name = s
-00027060: 656c 662e 5f5f 636c 6173 735f 5f2e 5f5f  elf.__class__.__
-00027070: 6e61 6d65 5f5f 2e6c 6f77 6572 2829 0a0a  name__.lower()..
-00027080: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
-00027090: 6465 7220 3d20 6261 7365 5f70 6174 6820  der = base_path 
-000270a0: 2f20 6461 7461 7365 745f 6e61 6d65 0a0a  / dataset_name..
-000270b0: 2020 2020 2020 2020 2320 646f 776e 6c6f          # downlo
-000270c0: 6164 2064 6174 6120 6966 206e 6563 6573  ad data if neces
-000270d0: 7361 7279 0a20 2020 2020 2020 206e 6572  sary.        ner
-000270e0: 5f73 7072 6161 6b62 616e 6b65 6e5f 7061  _spraakbanken_pa
-000270f0: 7468 203d 2022 6874 7470 733a 2f2f 7261  th = "https://ra
-00027100: 772e 6769 7468 7562 7573 6572 636f 6e74  w.githubusercont
-00027110: 656e 742e 636f 6d2f 6b6c 696e 7461 6e2f  ent.com/klintan/
-00027120: 7377 6564 6973 682d 6e65 722d 636f 7270  swedish-ner-corp
-00027130: 7573 2f6d 6173 7465 722f 220a 2020 2020  us/master/".    
-00027140: 2020 2020 6361 6368 6564 5f70 6174 6828      cached_path(
-00027150: 6622 7b6e 6572 5f73 7072 6161 6b62 616e  f"{ner_spraakban
-00027160: 6b65 6e5f 7061 7468 7d74 6573 745f 636f  ken_path}test_co
-00027170: 7270 7573 2e74 7874 222c 2050 6174 6828  rpus.txt", Path(
-00027180: 2264 6174 6173 6574 7322 2920 2f20 6461  "datasets") / da
-00027190: 7461 7365 745f 6e61 6d65 290a 2020 2020  taset_name).    
-000271a0: 2020 2020 6361 6368 6564 5f70 6174 6828      cached_path(
-000271b0: 6622 7b6e 6572 5f73 7072 6161 6b62 616e  f"{ner_spraakban
-000271c0: 6b65 6e5f 7061 7468 7d74 7261 696e 5f63  ken_path}train_c
-000271d0: 6f72 7075 732e 7478 7422 2c20 5061 7468  orpus.txt", Path
-000271e0: 2822 6461 7461 7365 7473 2229 202f 2064  ("datasets") / d
-000271f0: 6174 6173 6574 5f6e 616d 6529 0a0a 2020  ataset_name)..  
-00027200: 2020 2020 2020 2320 6461 7461 2069 7320        # data is 
-00027210: 6e6f 7420 696e 2049 4f42 3220 666f 726d  not in IOB2 form
-00027220: 6174 2e20 5468 7573 2077 6520 7472 616e  at. Thus we tran
-00027230: 7366 6f72 6d20 6974 2074 6f20 494f 4232  sform it to IOB2
-00027240: 0a20 2020 2020 2020 2073 656c 662e 5f61  .        self._a
-00027250: 6464 5f49 4f42 325f 7461 6773 2864 6174  dd_IOB2_tags(dat
-00027260: 615f 6669 6c65 3d50 6174 6828 6461 7461  a_file=Path(data
-00027270: 5f66 6f6c 6465 7220 2f20 2274 6573 745f  _folder / "test_
-00027280: 636f 7270 7573 2e74 7874 2229 290a 2020  corpus.txt")).  
-00027290: 2020 2020 2020 7365 6c66 2e5f 6164 645f        self._add_
-000272a0: 494f 4232 5f74 6167 7328 6461 7461 5f66  IOB2_tags(data_f
-000272b0: 696c 653d 5061 7468 2864 6174 615f 666f  ile=Path(data_fo
-000272c0: 6c64 6572 202f 2022 7472 6169 6e5f 636f  lder / "train_co
-000272d0: 7270 7573 2e74 7874 2229 290a 0a20 2020  rpus.txt"))..   
-000272e0: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
-000272f0: 6e69 745f 5f28 0a20 2020 2020 2020 2020  nit__(.         
-00027300: 2020 2064 6174 615f 666f 6c64 6572 2c0a     data_folder,.
-00027310: 2020 2020 2020 2020 2020 2020 636f 6c75              colu
-00027320: 6d6e 732c 0a20 2020 2020 2020 2020 2020  mns,.           
-00027330: 2069 6e5f 6d65 6d6f 7279 3d69 6e5f 6d65   in_memory=in_me
-00027340: 6d6f 7279 2c0a 2020 2020 2020 2020 2020  mory,.          
-00027350: 2020 2a2a 636f 7270 7573 6172 6773 2c0a    **corpusargs,.
-00027360: 2020 2020 2020 2020 290a 0a20 2020 2064          )..    d
-00027370: 6566 205f 6164 645f 494f 4232 5f74 6167  ef _add_IOB2_tag
-00027380: 7328 7365 6c66 2c20 6461 7461 5f66 696c  s(self, data_fil
-00027390: 653a 2055 6e69 6f6e 5b73 7472 2c20 5061  e: Union[str, Pa
-000273a0: 7468 5d2c 2065 6e63 6f64 696e 673a 2073  th], encoding: s
-000273b0: 7472 203d 2022 7574 6638 2229 3a0a 2020  tr = "utf8"):.  
-000273c0: 2020 2020 2020 2222 2246 756e 6374 696f        """Functio
-000273d0: 6e20 7468 6174 2061 6464 7320 494f 4232  n that adds IOB2
-000273e0: 2074 6167 7320 6966 206f 6e6c 7920 6368   tags if only ch
-000273f0: 756e 6b20 6e61 6d65 7320 6172 6520 7072  unk names are pr
-00027400: 6f76 6964 6564 2e0a 0a20 2020 2020 2020  ovided...       
-00027410: 2065 2e67 2e20 776f 7264 7320 6172 6520   e.g. words are 
-00027420: 7461 6767 6564 2050 4552 2069 6e73 7465  tagged PER inste
-00027430: 6164 206f 6620 422d 5045 5220 6f72 2049  ad of B-PER or I
-00027440: 2d50 4552 2e20 5265 706c 6163 6573 2027  -PER. Replaces '
-00027450: 3027 2077 6974 6820 274f 2720 6173 2074  0' with 'O' as t
-00027460: 6865 206e 6f2d 6368 756e 6b20 7461 6720  he no-chunk tag 
-00027470: 7369 6e63 6520 436f 6c75 6d6e 436f 7270  since ColumnCorp
-00027480: 7573 2065 7870 6563 7473 0a20 2020 2020  us expects.     
-00027490: 2020 2074 6865 206c 6574 7465 7220 274f     the letter 'O
-000274a0: 272e 2041 6464 6974 696f 6e61 6c6c 7920  '. Additionally 
-000274b0: 6974 2072 656d 6f76 6573 206c 696e 6573  it removes lines
-000274c0: 2077 6974 6820 6e6f 2074 6167 7320 696e   with no tags in
-000274d0: 2074 6865 2064 6174 6120 6669 6c65 2061   the data file a
-000274e0: 6e64 2063 616e 2061 6c73 6f0a 2020 2020  nd can also.    
-000274f0: 2020 2020 6265 2075 7365 6420 6966 2074      be used if t
-00027500: 6865 2064 6174 6120 6973 206f 6e6c 7920  he data is only 
-00027510: 7061 7274 6961 6c6c 7920 494f 4220 7461  partially IOB ta
-00027520: 6767 6564 2e0a 0a20 2020 2020 2020 2050  gged...        P
-00027530: 6172 616d 6574 6572 730a 2020 2020 2020  arameters.      
-00027540: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 0a20 2020    ----------.   
-00027550: 2020 2020 2064 6174 615f 6669 6c65 203a       data_file :
-00027560: 2055 6e69 6f6e 5b73 7472 2c20 5061 7468   Union[str, Path
-00027570: 5d0a 2020 2020 2020 2020 2020 2020 5061  ].            Pa
-00027580: 7468 2074 6f20 7468 6520 6461 7461 2066  th to the data f
-00027590: 696c 652e 0a20 2020 2020 2020 2065 6e63  ile..        enc
-000275a0: 6f64 696e 6720 3a20 7374 722c 206f 7074  oding : str, opt
-000275b0: 696f 6e61 6c0a 2020 2020 2020 2020 2020  ional.          
-000275c0: 2020 456e 636f 6469 6e67 2075 7365 6420    Encoding used 
-000275d0: 696e 206f 7065 6e20 6675 6e63 7469 6f6e  in open function
-000275e0: 2e20 5468 6520 6465 6661 756c 7420 6973  . The default is
-000275f0: 2022 7574 6638 222e 0a20 2020 2020 2020   "utf8"..       
-00027600: 2022 2222 0a20 2020 2020 2020 2077 6974   """.        wit
-00027610: 6820 6f70 656e 2866 696c 653d 6461 7461  h open(file=data
-00027620: 5f66 696c 652c 2065 6e63 6f64 696e 673d  _file, encoding=
-00027630: 656e 636f 6469 6e67 2920 6173 2066 3a0a  encoding) as f:.
-00027640: 2020 2020 2020 2020 2020 2020 6c69 6e65              line
-00027650: 7320 3d20 662e 7265 6164 6c69 6e65 7328  s = f.readlines(
-00027660: 290a 2020 2020 2020 2020 7769 7468 206f  ).        with o
-00027670: 7065 6e28 6669 6c65 3d64 6174 615f 6669  pen(file=data_fi
-00027680: 6c65 2c20 6d6f 6465 3d22 7722 2c20 656e  le, mode="w", en
-00027690: 636f 6469 6e67 3d65 6e63 6f64 696e 6729  coding=encoding)
-000276a0: 2061 7320 663a 0a20 2020 2020 2020 2020   as f:.         
-000276b0: 2020 2070 7265 6420 3d20 224f 2220 2023     pred = "O"  #
-000276c0: 2072 656d 656d 6265 7273 2074 6167 206f   remembers tag o
-000276d0: 6620 7072 6564 6563 6573 7369 6e67 206c  f predecessing l
-000276e0: 696e 650a 2020 2020 2020 2020 2020 2020  ine.            
-000276f0: 666f 7220 6c69 6e65 2069 6e20 6c69 6e65  for line in line
-00027700: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-00027710: 2020 206c 696e 655f 6c69 7374 203d 206c     line_list = l
-00027720: 696e 652e 7370 6c69 7428 290a 2020 2020  ine.split().    
-00027730: 2020 2020 2020 2020 2020 2020 6966 206c              if l
-00027740: 656e 286c 696e 655f 6c69 7374 2920 3d3d  en(line_list) ==
-00027750: 2032 3a20 2023 2077 6f72 6420 7769 7468   2:  # word with
-00027760: 2074 6167 0a20 2020 2020 2020 2020 2020   tag.           
-00027770: 2020 2020 2020 2020 2077 6f72 6420 3d20           word = 
-00027780: 6c69 6e65 5f6c 6973 745b 305d 0a20 2020  line_list[0].   
-00027790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000277a0: 2074 6167 203d 206c 696e 655f 6c69 7374   tag = line_list
-000277b0: 5b31 5d0a 2020 2020 2020 2020 2020 2020  [1].            
-000277c0: 2020 2020 2020 2020 6966 2074 6167 2069          if tag i
-000277d0: 6e20 5b22 3022 2c20 224f 225d 3a20 2023  n ["0", "O"]:  #
-000277e0: 206e 6f20 6368 756e 6b0a 2020 2020 2020   no chunk.      
-000277f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027800: 2020 662e 7772 6974 6528 776f 7264 202b    f.write(word +
-00027810: 2022 204f 5c6e 2229 0a20 2020 2020 2020   " O\n").       
-00027820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027830: 2070 7265 6420 3d20 224f 220a 2020 2020   pred = "O".    
-00027840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027850: 656c 6966 2022 2d22 206e 6f74 2069 6e20  elif "-" not in 
-00027860: 7461 673a 2020 2320 6e6f 2049 4f42 2074  tag:  # no IOB t
-00027870: 6167 730a 2020 2020 2020 2020 2020 2020  ags.            
-00027880: 2020 2020 2020 2020 2020 2020 6966 2070              if p
-00027890: 7265 6420 3d3d 2022 4f22 3a20 2023 2066  red == "O":  # f
-000278a0: 6f75 6e64 2061 206e 6577 2063 6875 6e6b  ound a new chunk
-000278b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000278c0: 2020 2020 2020 2020 2020 2020 2066 2e77               f.w
-000278d0: 7269 7465 2877 6f72 6420 2b20 2220 422d  rite(word + " B-
-000278e0: 2220 2b20 7461 6720 2b20 225c 6e22 290a  " + tag + "\n").
-000278f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027900: 2020 2020 2020 2020 2020 2020 7072 6564              pred
-00027910: 203d 2074 6167 0a20 2020 2020 2020 2020   = tag.         
-00027920: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00027930: 6c73 653a 2020 2320 666f 756e 6420 6675  lse:  # found fu
-00027940: 7274 6865 7220 7061 7274 206f 6620 6368  rther part of ch
-00027950: 756e 6b20 6f72 206e 6577 2063 6875 6e6b  unk or new chunk
-00027960: 2064 6972 6563 746c 7920 6166 7465 7220   directly after 
-00027970: 6f6c 6420 6368 756e 6b0a 2020 2020 2020  old chunk.      
-00027980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027990: 2020 2020 2020 6966 2070 7265 6420 3d3d        if pred ==
-000279a0: 2074 6167 3a0a 2020 2020 2020 2020 2020   tag:.          
-000279b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000279c0: 2020 2020 2020 662e 7772 6974 6528 776f        f.write(wo
-000279d0: 7264 202b 2022 2049 2d22 202b 2074 6167  rd + " I-" + tag
-000279e0: 202b 2022 5c6e 2229 0a20 2020 2020 2020   + "\n").       
-000279f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027a00: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00027a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027a20: 2020 2020 2020 2020 2020 2066 2e77 7269             f.wri
-00027a30: 7465 2877 6f72 6420 2b20 2220 422d 2220  te(word + " B-" 
-00027a40: 2b20 7461 6720 2b20 225c 6e22 290a 2020  + tag + "\n").  
-00027a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027a60: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-00027a70: 6564 203d 2074 6167 0a20 2020 2020 2020  ed = tag.       
-00027a80: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00027a90: 653a 2020 2320 6c69 6e65 2061 6c72 6561  e:  # line alrea
-00027aa0: 6479 2068 6173 2049 4f42 2074 6167 2028  dy has IOB tag (
-00027ab0: 7461 6720 636f 6e74 6169 6e73 2027 2d27  tag contains '-'
-00027ac0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00027ad0: 2020 2020 2020 2020 2020 662e 7772 6974            f.writ
-00027ae0: 6528 6c69 6e65 290a 2020 2020 2020 2020  e(line).        
-00027af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00027b00: 7072 6564 203d 2074 6167 2e73 706c 6974  pred = tag.split
-00027b10: 2822 2d22 295b 315d 0a20 2020 2020 2020  ("-")[1].       
-00027b20: 2020 2020 2020 2020 2065 6c69 6620 6c65           elif le
-00027b30: 6e28 6c69 6e65 5f6c 6973 7429 203d 3d20  n(line_list) == 
-00027b40: 303a 2020 2320 656d 7074 7920 6c69 6e65  0:  # empty line
-00027b50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00027b60: 2020 2020 2066 2e77 7269 7465 2822 5c6e       f.write("\n
-00027b70: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
-00027b80: 2020 2020 2020 2070 7265 6420 3d20 224f         pred = "O
-00027b90: 220a 0a0a 636c 6173 7320 4e45 525f 5455  "...class NER_TU
-00027ba0: 524b 5528 436f 6c75 6d6e 436f 7270 7573  RKU(ColumnCorpus
-00027bb0: 293a 0a20 2020 2064 6566 205f 5f69 6e69  ):.    def __ini
-00027bc0: 745f 5f28 0a20 2020 2020 2020 2073 656c  t__(.        sel
-00027bd0: 662c 0a20 2020 2020 2020 2062 6173 655f  f,.        base_
-00027be0: 7061 7468 3a20 4f70 7469 6f6e 616c 5b55  path: Optional[U
-00027bf0: 6e69 6f6e 5b73 7472 2c20 5061 7468 5d5d  nion[str, Path]]
-00027c00: 203d 204e 6f6e 652c 0a20 2020 2020 2020   = None,.       
-00027c10: 2069 6e5f 6d65 6d6f 7279 3a20 626f 6f6c   in_memory: bool
-00027c20: 203d 2054 7275 652c 0a20 2020 2020 2020   = True,.       
-00027c30: 202a 2a63 6f72 7075 7361 7267 732c 0a20   **corpusargs,. 
-00027c40: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
-00027c50: 2020 2020 2020 2222 2249 6e69 7469 616c        """Initial
-00027c60: 697a 6520 7468 6520 4669 6e6e 6973 6820  ize the Finnish 
-00027c70: 5475 726b 754e 4552 2063 6f72 7075 732e  TurkuNER corpus.
-00027c80: 0a0a 2020 2020 2020 2020 5468 6520 6669  ..        The fi
-00027c90: 7273 7420 7469 6d65 2079 6f75 2063 616c  rst time you cal
-00027ca0: 6c20 7468 6973 2063 6f6e 7374 7275 6374  l this construct
-00027cb0: 6f72 2069 7420 7769 6c6c 2061 7574 6f6d  or it will autom
-00027cc0: 6174 6963 616c 6c79 2064 6f77 6e6c 6f61  atically downloa
-00027cd0: 6420 7468 6520 6461 7461 7365 742e 0a20  d the dataset.. 
-00027ce0: 2020 2020 2020 203a 7061 7261 6d20 6261         :param ba
-00027cf0: 7365 5f70 6174 683a 2044 6566 6175 6c74  se_path: Default
-00027d00: 2069 7320 4e6f 6e65 2c20 6d65 616e 696e   is None, meanin
-00027d10: 6720 7468 6174 2063 6f72 7075 7320 6765  g that corpus ge
-00027d20: 7473 2061 7574 6f2d 646f 776e 6c6f 6164  ts auto-download
-00027d30: 6564 2061 6e64 206c 6f61 6465 642e 2059  ed and loaded. Y
-00027d40: 6f75 2063 616e 206f 7665 7272 6964 6520  ou can override 
-00027d50: 7468 6973 0a20 2020 2020 2020 2074 6f20  this.        to 
-00027d60: 706f 696e 7420 746f 2061 2064 6966 6665  point to a diffe
-00027d70: 7265 6e74 2066 6f6c 6465 7220 6275 7420  rent folder but 
-00027d80: 7479 7069 6361 6c6c 7920 7468 6973 2073  typically this s
-00027d90: 686f 756c 6420 6e6f 7420 6265 206e 6563  hould not be nec
-00027da0: 6573 7361 7279 2e0a 2020 2020 2020 2020  essary..        
-00027db0: 504f 5320 7461 6773 2069 6e73 7465 6164  POS tags instead
-00027dc0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00027dd0: 696e 5f6d 656d 6f72 793a 2049 6620 5472  in_memory: If Tr
-00027de0: 7565 2c20 6b65 6570 7320 6461 7461 7365  ue, keeps datase
-00027df0: 7420 696e 206d 656d 6f72 7920 6769 7669  t in memory givi
-00027e00: 6e67 2073 7065 6564 7570 7320 696e 2074  ng speedups in t
-00027e10: 7261 696e 696e 672e 0a20 2020 2020 2020  raining..       
-00027e20: 203a 7061 7261 6d20 646f 6375 6d65 6e74   :param document
-00027e30: 5f61 735f 7365 7175 656e 6365 3a20 4966  _as_sequence: If
-00027e40: 2054 7275 652c 2061 6c6c 2073 656e 7465   True, all sente
-00027e50: 6e63 6573 206f 6620 6120 646f 6375 6d65  nces of a docume
-00027e60: 6e74 2061 7265 2072 6561 6420 696e 746f  nt are read into
-00027e70: 2061 2073 696e 676c 6520 5365 6e74 656e   a single Senten
-00027e80: 6365 206f 626a 6563 740a 2020 2020 2020  ce object.      
-00027e90: 2020 2222 220a 2020 2020 2020 2020 6261    """.        ba
-00027ea0: 7365 5f70 6174 6820 3d20 6b6f 6c69 6272  se_path = kolibr
-00027eb0: 692e 6361 6368 655f 726f 6f74 202f 2022  i.cache_root / "
-00027ec0: 6461 7461 7365 7473 2220 6966 206e 6f74  datasets" if not
-00027ed0: 2062 6173 655f 7061 7468 2065 6c73 6520   base_path else 
-00027ee0: 5061 7468 2862 6173 655f 7061 7468 290a  Path(base_path).
-00027ef0: 0a20 2020 2020 2020 2023 2063 6f6c 756d  .        # colum
-00027f00: 6e20 666f 726d 6174 0a20 2020 2020 2020  n format.       
-00027f10: 2063 6f6c 756d 6e73 203d 207b 303a 2022   columns = {0: "
-00027f20: 7465 7874 222c 2031 3a20 226e 6572 227d  text", 1: "ner"}
-00027f30: 0a0a 2020 2020 2020 2020 2320 7468 6973  ..        # this
-00027f40: 2064 6174 6173 6574 206e 616d 650a 2020   dataset name.  
-00027f50: 2020 2020 2020 6461 7461 7365 745f 6e61        dataset_na
-00027f60: 6d65 203d 2073 656c 662e 5f5f 636c 6173  me = self.__clas
-00027f70: 735f 5f2e 5f5f 6e61 6d65 5f5f 2e6c 6f77  s__.__name__.low
-00027f80: 6572 2829 0a0a 2020 2020 2020 2020 6461  er()..        da
-00027f90: 7461 5f66 6f6c 6465 7220 3d20 6261 7365  ta_folder = base
-00027fa0: 5f70 6174 6820 2f20 6461 7461 7365 745f  _path / dataset_
-00027fb0: 6e61 6d65 0a0a 2020 2020 2020 2020 2320  name..        # 
-00027fc0: 646f 776e 6c6f 6164 2064 6174 6120 6966  download data if
-00027fd0: 206e 6563 6573 7361 7279 0a20 2020 2020   necessary.     
-00027fe0: 2020 2063 6f6e 6c6c 5f70 6174 6820 3d20     conll_path = 
-00027ff0: 2268 7474 7073 3a2f 2f72 6177 2e67 6974  "https://raw.git
-00028000: 6875 6275 7365 7263 6f6e 7465 6e74 2e63  hubusercontent.c
-00028010: 6f6d 2f54 7572 6b75 4e4c 502f 7475 726b  om/TurkuNLP/turk
-00028020: 752d 6e65 722d 636f 7270 7573 2f6d 6173  u-ner-corpus/mas
-00028030: 7465 722f 6461 7461 2f63 6f6e 6c6c 220a  ter/data/conll".
-00028040: 2020 2020 2020 2020 6465 765f 6669 6c65          dev_file
-00028050: 203d 2022 6465 762e 7473 7622 0a20 2020   = "dev.tsv".   
-00028060: 2020 2020 2074 6573 745f 6669 6c65 203d       test_file =
-00028070: 2022 7465 7374 2e74 7376 220a 2020 2020   "test.tsv".    
-00028080: 2020 2020 7472 6169 6e5f 6669 6c65 203d      train_file =
-00028090: 2022 7472 6169 6e2e 7473 7622 0a20 2020   "train.tsv".   
-000280a0: 2020 2020 2063 6163 6865 645f 7061 7468       cached_path
-000280b0: 2866 227b 636f 6e6c 6c5f 7061 7468 7d2f  (f"{conll_path}/
-000280c0: 7b64 6576 5f66 696c 657d 222c 2050 6174  {dev_file}", Pat
-000280d0: 6828 2264 6174 6173 6574 7322 2920 2f20  h("datasets") / 
-000280e0: 6461 7461 7365 745f 6e61 6d65 290a 2020  dataset_name).  
-000280f0: 2020 2020 2020 6361 6368 6564 5f70 6174        cached_pat
-00028100: 6828 6622 7b63 6f6e 6c6c 5f70 6174 687d  h(f"{conll_path}
-00028110: 2f7b 7465 7374 5f66 696c 657d 222c 2050  /{test_file}", P
-00028120: 6174 6828 2264 6174 6173 6574 7322 2920  ath("datasets") 
-00028130: 2f20 6461 7461 7365 745f 6e61 6d65 290a  / dataset_name).
-00028140: 2020 2020 2020 2020 6361 6368 6564 5f70          cached_p
-00028150: 6174 6828 6622 7b63 6f6e 6c6c 5f70 6174  ath(f"{conll_pat
-00028160: 687d 2f7b 7472 6169 6e5f 6669 6c65 7d22  h}/{train_file}"
-00028170: 2c20 5061 7468 2822 6461 7461 7365 7473  , Path("datasets
-00028180: 2229 202f 2064 6174 6173 6574 5f6e 616d  ") / dataset_nam
-00028190: 6529 0a0a 2020 2020 2020 2020 7375 7065  e)..        supe
-000281a0: 7228 292e 5f5f 696e 6974 5f5f 280a 2020  r().__init__(.  
-000281b0: 2020 2020 2020 2020 2020 6461 7461 5f66            data_f
-000281c0: 6f6c 6465 722c 0a20 2020 2020 2020 2020  older,.         
-000281d0: 2020 2063 6f6c 756d 6e73 2c0a 2020 2020     columns,.    
-000281e0: 2020 2020 2020 2020 6465 765f 6669 6c65          dev_file
-000281f0: 3d64 6576 5f66 696c 652c 0a20 2020 2020  =dev_file,.     
-00028200: 2020 2020 2020 2074 6573 745f 6669 6c65         test_file
-00028210: 3d74 6573 745f 6669 6c65 2c0a 2020 2020  =test_file,.    
-00028220: 2020 2020 2020 2020 7472 6169 6e5f 6669          train_fi
-00028230: 6c65 3d74 7261 696e 5f66 696c 652c 0a20  le=train_file,. 
-00028240: 2020 2020 2020 2020 2020 2063 6f6c 756d             colum
-00028250: 6e5f 6465 6c69 6d69 7465 723d 225c 7422  n_delimiter="\t"
-00028260: 2c0a 2020 2020 2020 2020 2020 2020 656e  ,.            en
-00028270: 636f 6469 6e67 3d22 6c61 7469 6e2d 3122  coding="latin-1"
-00028280: 2c0a 2020 2020 2020 2020 2020 2020 696e  ,.            in
-00028290: 5f6d 656d 6f72 793d 696e 5f6d 656d 6f72  _memory=in_memor
-000282a0: 792c 0a20 2020 2020 2020 2020 2020 2064  y,.            d
-000282b0: 6f63 756d 656e 745f 7365 7061 7261 746f  ocument_separato
-000282c0: 725f 746f 6b65 6e3d 222d 444f 4353 5441  r_token="-DOCSTA
-000282d0: 5254 2d22 2c0a 2020 2020 2020 2020 2020  RT-",.          
-000282e0: 2020 2a2a 636f 7270 7573 6172 6773 2c0a    **corpusargs,.
-000282f0: 2020 2020 2020 2020 290a 0a0a 636c 6173          )...clas
-00028300: 7320 4e45 525f 554b 5241 494e 4941 4e28  s NER_UKRAINIAN(
-00028310: 436f 6c75 6d6e 436f 7270 7573 293a 0a20  ColumnCorpus):. 
-00028320: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-00028330: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
-00028340: 2020 2020 2020 2062 6173 655f 7061 7468         base_path
-00028350: 3a20 4f70 7469 6f6e 616c 5b55 6e69 6f6e  : Optional[Union
-00028360: 5b73 7472 2c20 5061 7468 5d5d 203d 204e  [str, Path]] = N
-00028370: 6f6e 652c 0a20 2020 2020 2020 2069 6e5f  one,.        in_
-00028380: 6d65 6d6f 7279 3a20 626f 6f6c 203d 2054  memory: bool = T
-00028390: 7275 652c 0a20 2020 2020 2020 202a 2a63  rue,.        **c
-000283a0: 6f72 7075 7361 7267 732c 0a20 2020 2029  orpusargs,.    )
-000283b0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-000283c0: 2020 2222 2249 6e69 7469 616c 697a 6520    """Initialize 
-000283d0: 7468 6520 556b 7261 696e 6961 6e20 4e45  the Ukrainian NE
-000283e0: 5220 636f 7270 7573 2066 726f 6d20 6c61  R corpus from la
-000283f0: 6e67 2d75 6b20 7072 6f6a 6563 742e 0a0a  ng-uk project...
-00028400: 2020 2020 2020 2020 5468 6520 6669 7273          The firs
-00028410: 7420 7469 6d65 2079 6f75 2063 616c 6c20  t time you call 
-00028420: 7468 6973 2063 6f6e 7374 7275 6374 6f72  this constructor
-00028430: 2069 7420 7769 6c6c 2061 7574 6f6d 6174   it will automat
-00028440: 6963 616c 6c79 2064 6f77 6e6c 6f61 6420  ically download 
-00028450: 7468 6520 6461 7461 7365 742e 0a20 2020  the dataset..   
-00028460: 2020 2020 203a 7061 7261 6d20 6261 7365       :param base
-00028470: 5f70 6174 683a 2044 6566 6175 6c74 2069  _path: Default i
-00028480: 7320 4e6f 6e65 2c20 6d65 616e 696e 6720  s None, meaning 
-00028490: 7468 6174 2063 6f72 7075 7320 6765 7473  that corpus gets
-000284a0: 2061 7574 6f2d 646f 776e 6c6f 6164 6564   auto-downloaded
-000284b0: 2061 6e64 206c 6f61 6465 642e 2059 6f75   and loaded. You
-000284c0: 2063 616e 206f 7665 7272 6964 6520 7468   can override th
-000284d0: 6973 0a20 2020 2020 2020 2074 6f20 706f  is.        to po
-000284e0: 696e 7420 746f 2061 2064 6966 6665 7265  int to a differe
-000284f0: 6e74 2066 6f6c 6465 7220 6275 7420 7479  nt folder but ty
-00028500: 7069 6361 6c6c 7920 7468 6973 2073 686f  pically this sho
-00028510: 756c 6420 6e6f 7420 6265 206e 6563 6573  uld not be neces
-00028520: 7361 7279 2e0a 2020 2020 2020 2020 504f  sary..        PO
-00028530: 5320 7461 6773 2069 6e73 7465 6164 0a20  S tags instead. 
-00028540: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
-00028550: 5f6d 656d 6f72 793a 2049 6620 5472 7565  _memory: If True
-00028560: 2c20 6b65 6570 7320 6461 7461 7365 7420  , keeps dataset 
-00028570: 696e 206d 656d 6f72 7920 6769 7669 6e67  in memory giving
-00028580: 2073 7065 6564 7570 7320 696e 2074 7261   speedups in tra
-00028590: 696e 696e 672e 0a20 2020 2020 2020 203a  ining..        :
-000285a0: 7061 7261 6d20 646f 6375 6d65 6e74 5f61  param document_a
-000285b0: 735f 7365 7175 656e 6365 3a20 4966 2054  s_sequence: If T
-000285c0: 7275 652c 2061 6c6c 2073 656e 7465 6e63  rue, all sentenc
-000285d0: 6573 206f 6620 6120 646f 6375 6d65 6e74  es of a document
-000285e0: 2061 7265 2072 6561 6420 696e 746f 2061   are read into a
-000285f0: 2073 696e 676c 6520 5365 6e74 656e 6365   single Sentence
-00028600: 206f 626a 6563 740a 2020 2020 2020 2020   object.        
-00028610: 2222 220a 2020 2020 2020 2020 6261 7365  """.        base
-00028620: 5f70 6174 6820 3d20 6b6f 6c69 6272 692e  _path = kolibri.
-00028630: 6361 6368 655f 726f 6f74 202f 2022 6461  cache_root / "da
-00028640: 7461 7365 7473 2220 6966 206e 6f74 2062  tasets" if not b
-00028650: 6173 655f 7061 7468 2065 6c73 6520 5061  ase_path else Pa
-00028660: 7468 2862 6173 655f 7061 7468 290a 0a20  th(base_path).. 
-00028670: 2020 2020 2020 2023 2063 6f6c 756d 6e20         # column 
-00028680: 666f 726d 6174 0a20 2020 2020 2020 2063  format.        c
-00028690: 6f6c 756d 6e73 203d 207b 303a 2022 7465  olumns = {0: "te
-000286a0: 7874 222c 2031 3a20 226e 6572 227d 0a0a  xt", 1: "ner"}..
+00015d90: 666f 7220 5f69 2c20 6669 6c65 2069 6e20  for _i, file in 
+00015da0: 656e 756d 6572 6174 6528 6666 293a 0a20  enumerate(ff):. 
+00015db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015dc0: 2020 2069 6620 6669 6c65 2e65 6e64 7377     if file.endsw
+00015dd0: 6974 6828 222e 676f 6c64 2229 3a0a 2020  ith(".gold"):.  
+00015de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015df0: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
+00015e00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015e10: 2020 2020 2020 2020 2020 2020 206f 7574               out
+00015e20: 7075 7466 696c 6520 2f20 6461 7461 5f66  putfile / data_f
+00015e30: 6f6c 6465 7220 2f20 665b 2d31 5d20 2f20  older / f[-1] / 
+00015e40: 6669 6c65 2c0a 2020 2020 2020 2020 2020  file,.          
+00015e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015e60: 2020 2272 2b22 2c0a 2020 2020 2020 2020    "r+",.        
+00015e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015e80: 2020 2020 6572 726f 7273 3d22 7265 706c      errors="repl
+00015e90: 6163 6522 2c0a 2020 2020 2020 2020 2020  ace",.          
+00015ea0: 2020 2020 2020 2020 2020 2020 2020 2920                ) 
+00015eb0: 6173 2069 6e66 696c 653a 0a20 2020 2020  as infile:.     
+00015ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015ed0: 2020 2020 2020 2063 6f6e 7465 6e74 203d         content =
+00015ee0: 2069 6e66 696c 652e 7265 6164 2829 0a20   infile.read(). 
+00015ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015f00: 2020 2020 2020 206f 7574 6669 6c65 2e77         outfile.w
+00015f10: 7269 7465 2863 6f6e 7465 6e74 290a 2020  rite(content).  
+00015f20: 2020 2020 2020 2020 2020 2020 2020 6272                br
+00015f30: 6561 6b0a 0a20 2020 2020 2020 2073 7570  eak..        sup
+00015f40: 6572 2829 2e5f 5f69 6e69 745f 5f28 0a20  er().__init__(. 
+00015f50: 2020 2020 2020 2020 2020 2064 6174 615f             data_
+00015f60: 666f 6c64 6572 2c0a 2020 2020 2020 2020  folder,.        
+00015f70: 2020 2020 636f 6c75 6d6e 732c 0a20 2020      columns,.   
+00015f80: 2020 2020 2020 2020 2074 7261 696e 5f66           train_f
+00015f90: 696c 653d 2277 6562 7061 6765 735f 6e65  ile="webpages_ne
+00015fa0: 722e 7478 7422 2c0a 2020 2020 2020 2020  r.txt",.        
+00015fb0: 2020 2020 696e 5f6d 656d 6f72 793d 696e      in_memory=in
+00015fc0: 5f6d 656d 6f72 792c 0a20 2020 2020 2020  _memory,.       
+00015fd0: 2020 2020 202a 2a63 6f72 7075 7361 7267       **corpusarg
+00015fe0: 732c 0a20 2020 2020 2020 2029 0a0a 0a63  s,.        )...c
+00015ff0: 6c61 7373 204e 4552 5f45 4e47 4c49 5348  lass NER_ENGLISH
+00016000: 5f57 4e55 545f 3230 3230 2843 6f6c 756d  _WNUT_2020(Colum
+00016010: 6e43 6f72 7075 7329 3a0a 2020 2020 6465  nCorpus):.    de
+00016020: 6620 5f5f 696e 6974 5f5f 280a 2020 2020  f __init__(.    
+00016030: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
+00016040: 2020 6261 7365 5f70 6174 683a 204f 7074    base_path: Opt
+00016050: 696f 6e61 6c5b 556e 696f 6e5b 7374 722c  ional[Union[str,
+00016060: 2050 6174 685d 5d20 3d20 4e6f 6e65 2c0a   Path]] = None,.
+00016070: 2020 2020 2020 2020 696e 5f6d 656d 6f72          in_memor
+00016080: 793a 2062 6f6f 6c20 3d20 5472 7565 2c0a  y: bool = True,.
+00016090: 2020 2020 2020 2020 646f 6375 6d65 6e74          document
+000160a0: 5f61 735f 7365 7175 656e 6365 3a20 626f  _as_sequence: bo
+000160b0: 6f6c 203d 2046 616c 7365 2c0a 2020 2020  ol = False,.    
+000160c0: 2020 2020 2a2a 636f 7270 7573 6172 6773      **corpusargs
+000160d0: 2c0a 2020 2020 2920 2d3e 204e 6f6e 653a  ,.    ) -> None:
+000160e0: 0a20 2020 2020 2020 2022 2222 496e 6974  .        """Init
+000160f0: 6961 6c69 7a65 2074 6865 2057 4e55 545f  ialize the WNUT_
+00016100: 3230 3230 5f4e 4552 2063 6f72 7075 732e  2020_NER corpus.
+00016110: 0a0a 2020 2020 2020 2020 5468 6520 6669  ..        The fi
+00016120: 7273 7420 7469 6d65 2079 6f75 2063 616c  rst time you cal
+00016130: 6c20 7468 6973 2063 6f6e 7374 7275 6374  l this construct
+00016140: 6f72 2069 7420 7769 6c6c 2061 7574 6f6d  or it will autom
+00016150: 6174 6963 616c 6c79 2064 6f77 6e6c 6f61  atically downloa
+00016160: 6420 7468 6520 6461 7461 7365 742e 0a0a  d the dataset...
+00016170: 2020 2020 2020 2020 4172 6773 3a0a 2020          Args:.  
+00016180: 2020 2020 2020 2020 2020 6261 7365 5f70            base_p
+00016190: 6174 683a 2044 6566 6175 6c74 2069 7320  ath: Default is 
+000161a0: 4e6f 6e65 2c20 6d65 616e 696e 6720 7468  None, meaning th
+000161b0: 6174 2063 6f72 7075 7320 6765 7473 2061  at corpus gets a
+000161c0: 7574 6f2d 646f 776e 6c6f 6164 6564 2061  uto-downloaded a
+000161d0: 6e64 206c 6f61 6465 642e 2059 6f75 2063  nd loaded. You c
+000161e0: 616e 206f 7665 7272 6964 6520 7468 6973  an override this
+000161f0: 2074 6f20 706f 696e 7420 746f 2061 2064   to point to a d
+00016200: 6966 6665 7265 6e74 2066 6f6c 6465 7220  ifferent folder 
+00016210: 6275 7420 7479 7069 6361 6c6c 7920 7468  but typically th
+00016220: 6973 2073 686f 756c 6420 6e6f 7420 6265  is should not be
+00016230: 206e 6563 6573 7361 7279 2e0a 2020 2020   necessary..    
+00016240: 2020 2020 2020 2020 696e 5f6d 656d 6f72          in_memor
+00016250: 793a 2049 6620 5472 7565 2c20 6b65 6570  y: If True, keep
+00016260: 7320 6461 7461 7365 7420 696e 206d 656d  s dataset in mem
+00016270: 6f72 7920 6769 7669 6e67 2073 7065 6564  ory giving speed
+00016280: 7570 7320 696e 2074 7261 696e 696e 672e  ups in training.
+00016290: 0a20 2020 2020 2020 2020 2020 2064 6f63  .            doc
+000162a0: 756d 656e 745f 6173 5f73 6571 7565 6e63  ument_as_sequenc
+000162b0: 653a 2049 6620 5472 7565 2c20 616c 6c20  e: If True, all 
+000162c0: 7365 6e74 656e 6365 7320 6f66 2061 2064  sentences of a d
+000162d0: 6f63 756d 656e 7420 6172 6520 7265 6164  ocument are read
+000162e0: 2069 6e74 6f20 6120 7369 6e67 6c65 2053   into a single S
+000162f0: 656e 7465 6e63 6520 6f62 6a65 6374 0a20  entence object. 
+00016300: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00016310: 2020 2062 6173 655f 7061 7468 203d 206b     base_path = k
+00016320: 6f6c 6962 7269 2e63 6163 6865 5f72 6f6f  olibri.cache_roo
+00016330: 7420 2f20 2264 6174 6173 6574 7322 2069  t / "datasets" i
+00016340: 6620 6e6f 7420 6261 7365 5f70 6174 6820  f not base_path 
+00016350: 656c 7365 2050 6174 6828 6261 7365 5f70  else Path(base_p
+00016360: 6174 6829 0a0a 2020 2020 2020 2020 2320  ath)..        # 
+00016370: 636f 6c75 6d6e 2066 6f72 6d61 740a 2020  column format.  
+00016380: 2020 2020 2020 636f 6c75 6d6e 7320 3d20        columns = 
+00016390: 7b30 3a20 2274 6578 7422 2c20 313a 2022  {0: "text", 1: "
+000163a0: 6e65 7222 7d0a 0a20 2020 2020 2020 2023  ner"}..        #
+000163b0: 2074 6869 7320 6461 7461 7365 7420 6e61   this dataset na
+000163c0: 6d65 0a20 2020 2020 2020 2064 6174 6173  me.        datas
+000163d0: 6574 5f6e 616d 6520 3d20 7365 6c66 2e5f  et_name = self._
+000163e0: 5f63 6c61 7373 5f5f 2e5f 5f6e 616d 655f  _class__.__name_
+000163f0: 5f2e 6c6f 7765 7228 290a 0a20 2020 2020  _.lower()..     
+00016400: 2020 2064 6174 615f 666f 6c64 6572 203d     data_folder =
+00016410: 2062 6173 655f 7061 7468 202f 2064 6174   base_path / dat
+00016420: 6173 6574 5f6e 616d 650a 0a20 2020 2020  aset_name..     
+00016430: 2020 2023 2064 6f77 6e6c 6f61 6420 6461     # download da
+00016440: 7461 2069 6620 6e65 6365 7373 6172 790a  ta if necessary.
+00016450: 2020 2020 2020 2020 6769 7468 7562 5f75          github_u
+00016460: 726c 203d 2022 6874 7470 733a 2f2f 6769  rl = "https://gi
+00016470: 7468 7562 2e63 6f6d 2f6a 656e 6979 6174  thub.com/jeniyat
+00016480: 2f57 4e55 545f 3230 3230 5f4e 4552 2f61  /WNUT_2020_NER/a
+00016490: 7263 6869 7665 2f6d 6173 7465 722e 7a69  rchive/master.zi
+000164a0: 7022 0a0a 2020 2020 2020 2020 666f 7220  p"..        for 
+000164b0: 7361 6d70 6c65 2069 6e20 5b22 7472 6169  sample in ["trai
+000164c0: 6e22 2c20 2274 6573 7422 2c20 2264 6576  n", "test", "dev
+000164d0: 225d 3a0a 2020 2020 2020 2020 2020 2020  "]:.            
+000164e0: 7361 6d70 6c65 5f66 696c 6520 3d20 6461  sample_file = da
+000164f0: 7461 5f66 6f6c 6465 7220 2f20 2873 616d  ta_folder / (sam
+00016500: 706c 6520 2b20 222e 7478 7422 290a 2020  ple + ".txt").  
+00016510: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+00016520: 2073 616d 706c 655f 6669 6c65 2e69 735f   sample_file.is_
+00016530: 6669 6c65 2829 3a0a 2020 2020 2020 2020  file():.        
+00016540: 2020 2020 2020 2020 7a69 705f 7061 7468          zip_path
+00016550: 203d 2063 6163 6865 645f 7061 7468 2866   = cached_path(f
+00016560: 227b 6769 7468 7562 5f75 726c 7d22 2c20  "{github_url}", 
+00016570: 5061 7468 2822 6461 7461 7365 7473 2229  Path("datasets")
+00016580: 202f 2064 6174 6173 6574 5f6e 616d 6529   / dataset_name)
+00016590: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000165a0: 2020 2320 756e 7a69 7020 7468 6520 646f    # unzip the do
+000165b0: 776e 6c6f 6164 6564 2072 6570 6f20 616e  wnloaded repo an
+000165c0: 6420 6d65 7267 6520 7468 6520 7472 6169  d merge the trai
+000165d0: 6e2c 2064 6576 2061 6e64 2074 6573 7420  n, dev and test 
+000165e0: 6461 7461 7365 7473 0a20 2020 2020 2020  datasets.       
+000165f0: 2020 2020 2020 2020 2075 6e70 6163 6b5f           unpack_
+00016600: 6669 6c65 287a 6970 5f70 6174 682c 2064  file(zip_path, d
+00016610: 6174 615f 666f 6c64 6572 2c20 227a 6970  ata_folder, "zip
+00016620: 222c 2046 616c 7365 2920 2023 2075 6e7a  ", False)  # unz
+00016630: 6970 7065 6420 666f 6c64 6572 206e 616d  ipped folder nam
+00016640: 653a 2057 4e55 545f 3230 3230 5f4e 4552  e: WNUT_2020_NER
+00016650: 2d6d 6173 7465 720a 0a20 2020 2020 2020  -master..       
+00016660: 2020 2020 2020 2020 2069 6620 7361 6d70           if samp
+00016670: 6c65 203d 3d20 2274 6573 7422 3a0a 2020  le == "test":.  
+00016680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016690: 2020 6669 6c65 5f70 6174 6820 3d20 6461    file_path = da
+000166a0: 7461 5f66 6f6c 6465 7220 2f20 5061 7468  ta_folder / Path
+000166b0: 2822 574e 5554 5f32 3032 305f 4e45 522d  ("WNUT_2020_NER-
+000166c0: 6d61 7374 6572 2f64 6174 612f 2220 2b20  master/data/" + 
+000166d0: 7361 6d70 6c65 202b 2022 5f64 6174 615f  sample + "_data_
+000166e0: 3230 3230 2f43 6f6e 6c6c 5f46 6f72 6d61  2020/Conll_Forma
+000166f0: 742f 2229 0a20 2020 2020 2020 2020 2020  t/").           
+00016700: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00016710: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00016720: 696c 655f 7061 7468 203d 2064 6174 615f  ile_path = data_
+00016730: 666f 6c64 6572 202f 2050 6174 6828 2257  folder / Path("W
+00016740: 4e55 545f 3230 3230 5f4e 4552 2d6d 6173  NUT_2020_NER-mas
+00016750: 7465 722f 6461 7461 2f22 202b 2073 616d  ter/data/" + sam
+00016760: 706c 6520 2b20 225f 6461 7461 2f43 6f6e  ple + "_data/Con
+00016770: 6c6c 5f46 6f72 6d61 742f 2229 0a20 2020  ll_Format/").   
+00016780: 2020 2020 2020 2020 2020 2020 2066 696c               fil
+00016790: 656e 616d 6573 203d 206f 732e 6c69 7374  enames = os.list
+000167a0: 6469 7228 6669 6c65 5f70 6174 6829 0a20  dir(file_path). 
+000167b0: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+000167c0: 6974 6820 6f70 656e 2864 6174 615f 666f  ith open(data_fo
+000167d0: 6c64 6572 202f 2028 7361 6d70 6c65 202b  lder / (sample +
+000167e0: 2022 2e74 7874 2229 2c20 2277 2229 2061   ".txt"), "w") a
+000167f0: 7320 6f75 7466 696c 653a 0a20 2020 2020  s outfile:.     
+00016800: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00016810: 6f72 2066 6e61 6d65 2069 6e20 6669 6c65  or fname in file
+00016820: 6e61 6d65 733a 0a20 2020 2020 2020 2020  names:.         
+00016830: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+00016840: 6974 6820 6f70 656e 2866 696c 655f 7061  ith open(file_pa
+00016850: 7468 202f 2066 6e61 6d65 2920 6173 2069  th / fname) as i
+00016860: 6e66 696c 653a 0a20 2020 2020 2020 2020  nfile:.         
+00016870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016880: 2020 206c 696e 6573 203d 2069 6e66 696c     lines = infil
+00016890: 652e 7265 6164 2829 0a20 2020 2020 2020  e.read().       
+000168a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000168b0: 2020 2020 206f 7574 6669 6c65 2e77 7269       outfile.wri
+000168c0: 7465 286c 696e 6573 290a 0a20 2020 2020  te(lines)..     
+000168d0: 2020 2020 2020 2020 2020 2073 6875 7469             shuti
+000168e0: 6c2e 726d 7472 6565 2873 7472 2864 6174  l.rmtree(str(dat
+000168f0: 615f 666f 6c64 6572 202f 2022 574e 5554  a_folder / "WNUT
+00016900: 5f32 3032 305f 4e45 522d 6d61 7374 6572  _2020_NER-master
+00016910: 2229 2920 2023 2063 6c65 616e 2075 7020  "))  # clean up 
+00016920: 7768 656e 2064 6f6e 650a 0a20 2020 2020  when done..     
+00016930: 2020 2073 7570 6572 2829 2e5f 5f69 6e69     super().__ini
+00016940: 745f 5f28 0a20 2020 2020 2020 2020 2020  t__(.           
+00016950: 2064 6174 615f 666f 6c64 6572 2c0a 2020   data_folder,.  
+00016960: 2020 2020 2020 2020 2020 636f 6c75 6d6e            column
+00016970: 732c 0a20 2020 2020 2020 2020 2020 2065  s,.            e
+00016980: 6e63 6f64 696e 673d 2275 7466 2d38 222c  ncoding="utf-8",
+00016990: 0a20 2020 2020 2020 2020 2020 2069 6e5f  .            in_
+000169a0: 6d65 6d6f 7279 3d69 6e5f 6d65 6d6f 7279  memory=in_memory
+000169b0: 2c0a 2020 2020 2020 2020 2020 2020 646f  ,.            do
+000169c0: 6375 6d65 6e74 5f73 6570 6172 6174 6f72  cument_separator
+000169d0: 5f74 6f6b 656e 3d4e 6f6e 6520 6966 206e  _token=None if n
+000169e0: 6f74 2064 6f63 756d 656e 745f 6173 5f73  ot document_as_s
+000169f0: 6571 7565 6e63 6520 656c 7365 2022 2d44  equence else "-D
+00016a00: 4f43 5354 4152 542d 222c 0a20 2020 2020  OCSTART-",.     
+00016a10: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
+00016a20: 7267 732c 0a20 2020 2020 2020 2029 0a0a  rgs,.        )..
+00016a30: 0a63 6c61 7373 204e 4552 5f45 4e47 4c49  .class NER_ENGLI
+00016a40: 5348 5f57 494b 4947 4f4c 4428 436f 6c75  SH_WIKIGOLD(Colu
+00016a50: 6d6e 436f 7270 7573 293a 0a20 2020 2064  mnCorpus):.    d
+00016a60: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
+00016a70: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
+00016a80: 2020 2062 6173 655f 7061 7468 3a20 4f70     base_path: Op
+00016a90: 7469 6f6e 616c 5b55 6e69 6f6e 5b73 7472  tional[Union[str
+00016aa0: 2c20 5061 7468 5d5d 203d 204e 6f6e 652c  , Path]] = None,
+00016ab0: 0a20 2020 2020 2020 2069 6e5f 6d65 6d6f  .        in_memo
+00016ac0: 7279 3a20 626f 6f6c 203d 2054 7275 652c  ry: bool = True,
+00016ad0: 0a20 2020 2020 2020 2064 6f63 756d 656e  .        documen
+00016ae0: 745f 6173 5f73 6571 7565 6e63 653a 2062  t_as_sequence: b
+00016af0: 6f6f 6c20 3d20 4661 6c73 652c 0a20 2020  ool = False,.   
+00016b00: 2020 2020 202a 2a63 6f72 7075 7361 7267       **corpusarg
+00016b10: 732c 0a20 2020 2029 202d 3e20 4e6f 6e65  s,.    ) -> None
+00016b20: 3a0a 2020 2020 2020 2020 2222 2249 6e69  :.        """Ini
+00016b30: 7469 616c 697a 6520 7468 6520 7769 6b69  tialize the wiki
+00016b40: 676f 6c64 2063 6f72 7075 732e 0a0a 2020  gold corpus...  
+00016b50: 2020 2020 2020 5468 6520 6669 7273 7420        The first 
+00016b60: 7469 6d65 2079 6f75 2063 616c 6c20 7468  time you call th
+00016b70: 6973 2063 6f6e 7374 7275 6374 6f72 2069  is constructor i
+00016b80: 7420 7769 6c6c 2061 7574 6f6d 6174 6963  t will automatic
+00016b90: 616c 6c79 2064 6f77 6e6c 6f61 6420 7468  ally download th
+00016ba0: 6520 6461 7461 7365 742e 0a0a 2020 2020  e dataset...    
+00016bb0: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
+00016bc0: 2020 2020 2020 6261 7365 5f70 6174 683a        base_path:
+00016bd0: 2044 6566 6175 6c74 2069 7320 4e6f 6e65   Default is None
+00016be0: 2c20 6d65 616e 696e 6720 7468 6174 2063  , meaning that c
+00016bf0: 6f72 7075 7320 6765 7473 2061 7574 6f2d  orpus gets auto-
+00016c00: 646f 776e 6c6f 6164 6564 2061 6e64 206c  downloaded and l
+00016c10: 6f61 6465 642e 2059 6f75 2063 616e 206f  oaded. You can o
+00016c20: 7665 7272 6964 6520 7468 6973 2074 6f20  verride this to 
+00016c30: 706f 696e 7420 746f 2061 2064 6966 6665  point to a diffe
+00016c40: 7265 6e74 2066 6f6c 6465 7220 6275 7420  rent folder but 
+00016c50: 7479 7069 6361 6c6c 7920 7468 6973 2073  typically this s
+00016c60: 686f 756c 6420 6e6f 7420 6265 206e 6563  hould not be nec
+00016c70: 6573 7361 7279 2e0a 2020 2020 2020 2020  essary..        
+00016c80: 2020 2020 696e 5f6d 656d 6f72 793a 2049      in_memory: I
+00016c90: 6620 5472 7565 2c20 6b65 6570 7320 6461  f True, keeps da
+00016ca0: 7461 7365 7420 696e 206d 656d 6f72 7920  taset in memory 
+00016cb0: 6769 7669 6e67 2073 7065 6564 7570 7320  giving speedups 
+00016cc0: 696e 2074 7261 696e 696e 672e 0a20 2020  in training..   
+00016cd0: 2020 2020 2020 2020 2064 6f63 756d 656e           documen
+00016ce0: 745f 6173 5f73 6571 7565 6e63 653a 2049  t_as_sequence: I
+00016cf0: 6620 5472 7565 2c20 616c 6c20 7365 6e74  f True, all sent
+00016d00: 656e 6365 7320 6f66 2061 2064 6f63 756d  ences of a docum
+00016d10: 656e 7420 6172 6520 7265 6164 2069 6e74  ent are read int
+00016d20: 6f20 6120 7369 6e67 6c65 2053 656e 7465  o a single Sente
+00016d30: 6e63 6520 6f62 6a65 6374 0a20 2020 2020  nce object.     
+00016d40: 2020 2022 2222 0a20 2020 2020 2020 2062     """.        b
+00016d50: 6173 655f 7061 7468 203d 206b 6f6c 6962  ase_path = kolib
+00016d60: 7269 2e63 6163 6865 5f72 6f6f 7420 2f20  ri.cache_root / 
+00016d70: 2264 6174 6173 6574 7322 2069 6620 6e6f  "datasets" if no
+00016d80: 7420 6261 7365 5f70 6174 6820 656c 7365  t base_path else
+00016d90: 2050 6174 6828 6261 7365 5f70 6174 6829   Path(base_path)
+00016da0: 0a0a 2020 2020 2020 2020 2320 636f 6c75  ..        # colu
+00016db0: 6d6e 2066 6f72 6d61 740a 2020 2020 2020  mn format.      
+00016dc0: 2020 636f 6c75 6d6e 7320 3d20 7b30 3a20    columns = {0: 
+00016dd0: 2274 6578 7422 2c20 313a 2022 6e65 7222  "text", 1: "ner"
+00016de0: 7d0a 0a20 2020 2020 2020 2023 2074 6869  }..        # thi
+00016df0: 7320 6461 7461 7365 7420 6e61 6d65 0a20  s dataset name. 
+00016e00: 2020 2020 2020 2064 6174 6173 6574 5f6e         dataset_n
+00016e10: 616d 6520 3d20 7365 6c66 2e5f 5f63 6c61  ame = self.__cla
+00016e20: 7373 5f5f 2e5f 5f6e 616d 655f 5f2e 6c6f  ss__.__name__.lo
+00016e30: 7765 7228 290a 0a20 2020 2020 2020 2064  wer()..        d
+00016e40: 6174 615f 666f 6c64 6572 203d 2062 6173  ata_folder = bas
+00016e50: 655f 7061 7468 202f 2064 6174 6173 6574  e_path / dataset
+00016e60: 5f6e 616d 650a 0a20 2020 2020 2020 2023  _name..        #
+00016e70: 2064 6f77 6e6c 6f61 6420 6461 7461 2069   download data i
+00016e80: 6620 6e65 6365 7373 6172 790a 2020 2020  f necessary.    
+00016e90: 2020 2020 7769 6b69 676f 6c64 5f6e 6572      wikigold_ner
+00016ea0: 5f70 6174 6820 3d20 2268 7474 7073 3a2f  _path = "https:/
+00016eb0: 2f72 6177 2e67 6974 6875 6275 7365 7263  /raw.githubuserc
+00016ec0: 6f6e 7465 6e74 2e63 6f6d 2f6a 7561 6e64  ontent.com/juand
+00016ed0: 2d72 2f65 6e74 6974 792d 7265 636f 676e  -r/entity-recogn
+00016ee0: 6974 696f 6e2d 6461 7461 7365 7473 2f6d  ition-datasets/m
+00016ef0: 6173 7465 722f 6461 7461 2f77 696b 6967  aster/data/wikig
+00016f00: 6f6c 642f 434f 4e4c 4c2d 666f 726d 6174  old/CONLL-format
+00016f10: 2f64 6174 612f 220a 2020 2020 2020 2020  /data/".        
+00016f20: 6361 6368 6564 5f70 6174 6828 6622 7b77  cached_path(f"{w
+00016f30: 696b 6967 6f6c 645f 6e65 725f 7061 7468  ikigold_ner_path
+00016f40: 7d77 696b 6967 6f6c 642e 636f 6e6c 6c2e  }wikigold.conll.
+00016f50: 7478 7422 2c20 5061 7468 2822 6461 7461  txt", Path("data
+00016f60: 7365 7473 2229 202f 2064 6174 6173 6574  sets") / dataset
+00016f70: 5f6e 616d 6529 0a0a 2020 2020 2020 2020  _name)..        
+00016f80: 7375 7065 7228 292e 5f5f 696e 6974 5f5f  super().__init__
+00016f90: 280a 2020 2020 2020 2020 2020 2020 6461  (.            da
+00016fa0: 7461 5f66 6f6c 6465 722c 0a20 2020 2020  ta_folder,.     
+00016fb0: 2020 2020 2020 2063 6f6c 756d 6e73 2c0a         columns,.
+00016fc0: 2020 2020 2020 2020 2020 2020 656e 636f              enco
+00016fd0: 6469 6e67 3d22 7574 662d 3822 2c0a 2020  ding="utf-8",.  
+00016fe0: 2020 2020 2020 2020 2020 696e 5f6d 656d            in_mem
+00016ff0: 6f72 793d 696e 5f6d 656d 6f72 792c 0a20  ory=in_memory,. 
+00017000: 2020 2020 2020 2020 2020 2074 7261 696e             train
+00017010: 5f66 696c 653d 2277 696b 6967 6f6c 642e  _file="wikigold.
+00017020: 636f 6e6c 6c2e 7478 7422 2c0a 2020 2020  conll.txt",.    
+00017030: 2020 2020 2020 2020 646f 6375 6d65 6e74          document
+00017040: 5f73 6570 6172 6174 6f72 5f74 6f6b 656e  _separator_token
+00017050: 3d4e 6f6e 6520 6966 206e 6f74 2064 6f63  =None if not doc
+00017060: 756d 656e 745f 6173 5f73 6571 7565 6e63  ument_as_sequenc
+00017070: 6520 656c 7365 2022 2d44 4f43 5354 4152  e else "-DOCSTAR
+00017080: 542d 222c 0a20 2020 2020 2020 2020 2020  T-",.           
+00017090: 202a 2a63 6f72 7075 7361 7267 732c 0a20   **corpusargs,. 
+000170a0: 2020 2020 2020 2029 0a0a 0a63 6c61 7373         )...class
+000170b0: 204e 4552 5f46 494e 4e49 5348 2843 6f6c   NER_FINNISH(Col
+000170c0: 756d 6e43 6f72 7075 7329 3a0a 2020 2020  umnCorpus):.    
+000170d0: 6465 6620 5f5f 696e 6974 5f5f 280a 2020  def __init__(.  
+000170e0: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
+000170f0: 2020 2020 6261 7365 5f70 6174 683a 204f      base_path: O
+00017100: 7074 696f 6e61 6c5b 556e 696f 6e5b 7374  ptional[Union[st
+00017110: 722c 2050 6174 685d 5d20 3d20 4e6f 6e65  r, Path]] = None
+00017120: 2c0a 2020 2020 2020 2020 696e 5f6d 656d  ,.        in_mem
+00017130: 6f72 793a 2062 6f6f 6c20 3d20 5472 7565  ory: bool = True
+00017140: 2c0a 2020 2020 2020 2020 2a2a 636f 7270  ,.        **corp
+00017150: 7573 6172 6773 2c0a 2020 2020 2920 2d3e  usargs,.    ) ->
+00017160: 204e 6f6e 653a 0a20 2020 2020 2020 2062   None:.        b
+00017170: 6173 655f 7061 7468 203d 206b 6f6c 6962  ase_path = kolib
+00017180: 7269 2e63 6163 6865 5f72 6f6f 7420 2f20  ri.cache_root / 
+00017190: 2264 6174 6173 6574 7322 2069 6620 6e6f  "datasets" if no
+000171a0: 7420 6261 7365 5f70 6174 6820 656c 7365  t base_path else
+000171b0: 2050 6174 6828 6261 7365 5f70 6174 6829   Path(base_path)
+000171c0: 0a0a 2020 2020 2020 2020 2320 636f 6c75  ..        # colu
+000171d0: 6d6e 2066 6f72 6d61 740a 2020 2020 2020  mn format.      
+000171e0: 2020 636f 6c75 6d6e 7320 3d20 7b30 3a20    columns = {0: 
+000171f0: 2274 6578 7422 2c20 313a 2022 6e65 7222  "text", 1: "ner"
+00017200: 7d0a 0a20 2020 2020 2020 2023 2074 6869  }..        # thi
+00017210: 7320 6461 7461 7365 7420 6e61 6d65 0a20  s dataset name. 
+00017220: 2020 2020 2020 2064 6174 6173 6574 5f6e         dataset_n
+00017230: 616d 6520 3d20 7365 6c66 2e5f 5f63 6c61  ame = self.__cla
+00017240: 7373 5f5f 2e5f 5f6e 616d 655f 5f2e 6c6f  ss__.__name__.lo
+00017250: 7765 7228 290a 0a20 2020 2020 2020 2023  wer()..        #
+00017260: 2064 6566 6175 6c74 2064 6174 6173 6574   default dataset
+00017270: 2066 6f6c 6465 7220 6973 2074 6865 2063   folder is the c
+00017280: 6163 6865 2072 6f6f 740a 2020 2020 2020  ache root.      
+00017290: 2020 6966 206e 6f74 2062 6173 655f 7061    if not base_pa
+000172a0: 7468 3a0a 2020 2020 2020 2020 2020 2020  th:.            
+000172b0: 6261 7365 5f70 6174 6820 3d20 6b6f 6c69  base_path = koli
+000172c0: 6272 692e 6361 6368 655f 726f 6f74 202f  bri.cache_root /
+000172d0: 2022 6461 7461 7365 7473 220a 2020 2020   "datasets".    
+000172e0: 2020 2020 6461 7461 5f66 6f6c 6465 7220      data_folder 
+000172f0: 3d20 6261 7365 5f70 6174 6820 2f20 6461  = base_path / da
+00017300: 7461 7365 745f 6e61 6d65 0a0a 2020 2020  taset_name..    
+00017310: 2020 2020 2320 646f 776e 6c6f 6164 2064      # download d
+00017320: 6174 6120 6966 206e 6563 6573 7361 7279  ata if necessary
+00017330: 0a20 2020 2020 2020 206e 6572 5f66 696e  .        ner_fin
+00017340: 6e69 7368 5f70 6174 6820 3d20 2268 7474  nish_path = "htt
+00017350: 7073 3a2f 2f72 6177 2e67 6974 6875 6275  ps://raw.githubu
+00017360: 7365 7263 6f6e 7465 6e74 2e63 6f6d 2f6d  sercontent.com/m
+00017370: 7073 696c 6676 652f 6669 6e65 722d 6461  psilfve/finer-da
+00017380: 7461 2f6d 6173 7465 722f 6461 7461 2f64  ta/master/data/d
+00017390: 6967 6974 6f64 6179 2e22 0a20 2020 2020  igitoday.".     
+000173a0: 2020 2063 6163 6865 645f 7061 7468 2866     cached_path(f
+000173b0: 227b 6e65 725f 6669 6e6e 6973 685f 7061  "{ner_finnish_pa
+000173c0: 7468 7d32 3031 342e 7472 6169 6e2e 6373  th}2014.train.cs
+000173d0: 7622 2c20 5061 7468 2822 6461 7461 7365  v", Path("datase
+000173e0: 7473 2229 202f 2064 6174 6173 6574 5f6e  ts") / dataset_n
+000173f0: 616d 6529 0a20 2020 2020 2020 2063 6163  ame).        cac
+00017400: 6865 645f 7061 7468 2866 227b 6e65 725f  hed_path(f"{ner_
+00017410: 6669 6e6e 6973 685f 7061 7468 7d32 3031  finnish_path}201
+00017420: 342e 6465 762e 6373 7622 2c20 5061 7468  4.dev.csv", Path
+00017430: 2822 6461 7461 7365 7473 2229 202f 2064  ("datasets") / d
+00017440: 6174 6173 6574 5f6e 616d 6529 0a20 2020  ataset_name).   
+00017450: 2020 2020 2063 6163 6865 645f 7061 7468       cached_path
+00017460: 2866 227b 6e65 725f 6669 6e6e 6973 685f  (f"{ner_finnish_
+00017470: 7061 7468 7d32 3031 352e 7465 7374 2e63  path}2015.test.c
+00017480: 7376 222c 2050 6174 6828 2264 6174 6173  sv", Path("datas
+00017490: 6574 7322 2920 2f20 6461 7461 7365 745f  ets") / dataset_
+000174a0: 6e61 6d65 290a 0a20 2020 2020 2020 2073  name)..        s
+000174b0: 656c 662e 5f72 656d 6f76 655f 6c69 6e65  elf._remove_line
+000174c0: 735f 7769 7468 6f75 745f 616e 6e6f 7461  s_without_annota
+000174d0: 7469 6f6e 7328 6461 7461 5f66 696c 653d  tions(data_file=
+000174e0: 5061 7468 2864 6174 615f 666f 6c64 6572  Path(data_folder
+000174f0: 202f 2022 6469 6769 746f 6461 792e 3230   / "digitoday.20
+00017500: 3135 2e74 6573 742e 6373 7622 2929 0a0a  15.test.csv"))..
+00017510: 2020 2020 2020 2020 7375 7065 7228 292e          super().
+00017520: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
+00017530: 2020 2020 2020 6461 7461 5f66 6f6c 6465        data_folde
+00017540: 722c 0a20 2020 2020 2020 2020 2020 2063  r,.            c
+00017550: 6f6c 756d 6e73 2c0a 2020 2020 2020 2020  olumns,.        
+00017560: 2020 2020 696e 5f6d 656d 6f72 793d 696e      in_memory=in
+00017570: 5f6d 656d 6f72 792c 0a20 2020 2020 2020  _memory,.       
+00017580: 2020 2020 2073 6b69 705f 6669 7273 745f       skip_first_
+00017590: 6c69 6e65 3d54 7275 652c 0a20 2020 2020  line=True,.     
+000175a0: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
+000175b0: 7267 732c 0a20 2020 2020 2020 2029 0a0a  rgs,.        )..
+000175c0: 2020 2020 6465 6620 5f72 656d 6f76 655f      def _remove_
+000175d0: 6c69 6e65 735f 7769 7468 6f75 745f 616e  lines_without_an
+000175e0: 6e6f 7461 7469 6f6e 7328 7365 6c66 2c20  notations(self, 
+000175f0: 6461 7461 5f66 696c 653a 2055 6e69 6f6e  data_file: Union
+00017600: 5b73 7472 2c20 5061 7468 5d29 3a0a 2020  [str, Path]):.  
+00017610: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
+00017620: 6461 7461 5f66 696c 6529 2061 7320 663a  data_file) as f:
+00017630: 0a20 2020 2020 2020 2020 2020 206c 696e  .            lin
+00017640: 6573 203d 2066 2e72 6561 646c 696e 6573  es = f.readlines
+00017650: 2829 0a20 2020 2020 2020 2077 6974 6820  ().        with 
+00017660: 6f70 656e 2864 6174 615f 6669 6c65 2c20  open(data_file, 
+00017670: 2277 2229 2061 7320 663a 0a20 2020 2020  "w") as f:.     
+00017680: 2020 2020 2020 2066 6f72 206c 696e 6520         for line 
+00017690: 696e 206c 696e 6573 3a0a 2020 2020 2020  in lines:.      
+000176a0: 2020 2020 2020 2020 2020 6966 206c 656e            if len
+000176b0: 286c 696e 652e 7370 6c69 7428 2929 2021  (line.split()) !
+000176c0: 3d20 313a 0a20 2020 2020 2020 2020 2020  = 1:.           
+000176d0: 2020 2020 2020 2020 2066 2e77 7269 7465           f.write
+000176e0: 286c 696e 6529 0a0a 0a63 6c61 7373 204e  (line)...class N
+000176f0: 4552 5f47 4552 4d41 4e5f 4249 4f46 4944  ER_GERMAN_BIOFID
+00017700: 2843 6f6c 756d 6e43 6f72 7075 7329 3a0a  (ColumnCorpus):.
+00017710: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+00017720: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
+00017730: 2020 2020 2020 2020 6261 7365 5f70 6174          base_pat
+00017740: 683a 204f 7074 696f 6e61 6c5b 556e 696f  h: Optional[Unio
+00017750: 6e5b 7374 722c 2050 6174 685d 5d20 3d20  n[str, Path]] = 
+00017760: 4e6f 6e65 2c0a 2020 2020 2020 2020 696e  None,.        in
+00017770: 5f6d 656d 6f72 793a 2062 6f6f 6c20 3d20  _memory: bool = 
+00017780: 5472 7565 2c0a 2020 2020 2020 2020 2a2a  True,.        **
+00017790: 636f 7270 7573 6172 6773 2c0a 2020 2020  corpusargs,.    
+000177a0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+000177b0: 2020 2062 6173 655f 7061 7468 203d 206b     base_path = k
+000177c0: 6f6c 6962 7269 2e63 6163 6865 5f72 6f6f  olibri.cache_roo
+000177d0: 7420 2f20 2264 6174 6173 6574 7322 2069  t / "datasets" i
+000177e0: 6620 6e6f 7420 6261 7365 5f70 6174 6820  f not base_path 
+000177f0: 656c 7365 2050 6174 6828 6261 7365 5f70  else Path(base_p
+00017800: 6174 6829 0a0a 2020 2020 2020 2020 2320  ath)..        # 
+00017810: 636f 6c75 6d6e 2066 6f72 6d61 740a 2020  column format.  
+00017820: 2020 2020 2020 636f 6c75 6d6e 7320 3d20        columns = 
+00017830: 7b30 3a20 2274 6578 7422 2c20 313a 2022  {0: "text", 1: "
+00017840: 6c65 6d6d 6122 2c20 323a 2022 706f 7322  lemma", 2: "pos"
+00017850: 2c20 333a 2022 6e65 7222 7d0a 0a20 2020  , 3: "ner"}..   
+00017860: 2020 2020 2023 2074 6869 7320 6461 7461       # this data
+00017870: 7365 7420 6e61 6d65 0a20 2020 2020 2020  set name.       
+00017880: 2064 6174 6173 6574 5f6e 616d 6520 3d20   dataset_name = 
+00017890: 7365 6c66 2e5f 5f63 6c61 7373 5f5f 2e5f  self.__class__._
+000178a0: 5f6e 616d 655f 5f2e 6c6f 7765 7228 290a  _name__.lower().
+000178b0: 0a20 2020 2020 2020 2064 6174 615f 666f  .        data_fo
+000178c0: 6c64 6572 203d 2062 6173 655f 7061 7468  lder = base_path
+000178d0: 202f 2064 6174 6173 6574 5f6e 616d 650a   / dataset_name.
+000178e0: 0a20 2020 2020 2020 2023 2064 6f77 6e6c  .        # downl
+000178f0: 6f61 6420 6461 7461 2069 6620 6e65 6365  oad data if nece
+00017900: 7373 6172 790a 2020 2020 2020 2020 6269  ssary.        bi
+00017910: 6f66 6964 5f70 6174 6820 3d20 2268 7474  ofid_path = "htt
+00017920: 7073 3a2f 2f72 6177 2e67 6974 6875 6275  ps://raw.githubu
+00017930: 7365 7263 6f6e 7465 6e74 2e63 6f6d 2f74  sercontent.com/t
+00017940: 6578 7474 6563 686e 6f6c 6f67 796c 6162  exttechnologylab
+00017950: 2f42 494f 6669 642f 6d61 7374 6572 2f42  /BIOfid/master/B
+00017960: 494f 6669 642d 4461 7461 7365 742d 4e45  IOfid-Dataset-NE
+00017970: 522f 220a 2020 2020 2020 2020 6361 6368  R/".        cach
+00017980: 6564 5f70 6174 6828 6622 7b62 696f 6669  ed_path(f"{biofi
+00017990: 645f 7061 7468 7d74 7261 696e 2e63 6f6e  d_path}train.con
+000179a0: 6c6c 222c 2050 6174 6828 2264 6174 6173  ll", Path("datas
+000179b0: 6574 7322 2920 2f20 6461 7461 7365 745f  ets") / dataset_
+000179c0: 6e61 6d65 290a 2020 2020 2020 2020 6361  name).        ca
+000179d0: 6368 6564 5f70 6174 6828 6622 7b62 696f  ched_path(f"{bio
+000179e0: 6669 645f 7061 7468 7d64 6576 2e63 6f6e  fid_path}dev.con
+000179f0: 6c6c 222c 2050 6174 6828 2264 6174 6173  ll", Path("datas
+00017a00: 6574 7322 2920 2f20 6461 7461 7365 745f  ets") / dataset_
+00017a10: 6e61 6d65 290a 2020 2020 2020 2020 6361  name).        ca
+00017a20: 6368 6564 5f70 6174 6828 6622 7b62 696f  ched_path(f"{bio
+00017a30: 6669 645f 7061 7468 7d74 6573 742e 636f  fid_path}test.co
+00017a40: 6e6c 6c22 2c20 5061 7468 2822 6461 7461  nll", Path("data
+00017a50: 7365 7473 2229 202f 2064 6174 6173 6574  sets") / dataset
+00017a60: 5f6e 616d 6529 0a0a 2020 2020 2020 2020  _name)..        
+00017a70: 7375 7065 7228 292e 5f5f 696e 6974 5f5f  super().__init__
+00017a80: 280a 2020 2020 2020 2020 2020 2020 6461  (.            da
+00017a90: 7461 5f66 6f6c 6465 722c 0a20 2020 2020  ta_folder,.     
+00017aa0: 2020 2020 2020 2063 6f6c 756d 6e73 2c0a         columns,.
+00017ab0: 2020 2020 2020 2020 2020 2020 696e 5f6d              in_m
+00017ac0: 656d 6f72 793d 696e 5f6d 656d 6f72 792c  emory=in_memory,
+00017ad0: 0a20 2020 2020 2020 2020 2020 202a 2a63  .            **c
+00017ae0: 6f72 7075 7361 7267 732c 0a20 2020 2020  orpusargs,.     
+00017af0: 2020 2029 0a0a 0a63 6c61 7373 204e 4552     )...class NER
+00017b00: 5f47 4552 4d41 4e5f 4555 524f 5041 524c  _GERMAN_EUROPARL
+00017b10: 2843 6f6c 756d 6e43 6f72 7075 7329 3a0a  (ColumnCorpus):.
+00017b20: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+00017b30: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
+00017b40: 2020 2020 2020 2020 6261 7365 5f70 6174          base_pat
+00017b50: 683a 204f 7074 696f 6e61 6c5b 556e 696f  h: Optional[Unio
+00017b60: 6e5b 7374 722c 2050 6174 685d 5d20 3d20  n[str, Path]] = 
+00017b70: 4e6f 6e65 2c0a 2020 2020 2020 2020 696e  None,.        in
+00017b80: 5f6d 656d 6f72 793a 2062 6f6f 6c20 3d20  _memory: bool = 
+00017b90: 5472 7565 2c0a 2020 2020 2020 2020 2a2a  True,.        **
+00017ba0: 636f 7270 7573 6172 6773 2c0a 2020 2020  corpusargs,.    
+00017bb0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+00017bc0: 2020 2022 2222 496e 6974 6961 6c69 7a65     """Initialize
+00017bd0: 2074 6865 2045 5552 4f50 4152 4c5f 4e45   the EUROPARL_NE
+00017be0: 525f 4745 524d 414e 2063 6f72 7075 732e  R_GERMAN corpus.
+00017bf0: 0a0a 2020 2020 2020 2020 5468 6520 6669  ..        The fi
+00017c00: 7273 7420 7469 6d65 2079 6f75 2063 616c  rst time you cal
+00017c10: 6c20 7468 6973 2063 6f6e 7374 7275 6374  l this construct
+00017c20: 6f72 2069 7420 7769 6c6c 2061 7574 6f6d  or it will autom
+00017c30: 6174 6963 616c 6c79 2064 6f77 6e6c 6f61  atically downloa
+00017c40: 6420 7468 6520 6461 7461 7365 742e 0a0a  d the dataset...
+00017c50: 2020 2020 2020 2020 4172 6773 3a0a 2020          Args:.  
+00017c60: 2020 2020 2020 2020 2020 6261 7365 5f70            base_p
+00017c70: 6174 683a 2044 6566 6175 6c74 2069 7320  ath: Default is 
+00017c80: 4e6f 6e65 2c20 6d65 616e 696e 6720 7468  None, meaning th
+00017c90: 6174 2063 6f72 7075 7320 6765 7473 2061  at corpus gets a
+00017ca0: 7574 6f2d 646f 776e 6c6f 6164 6564 2061  uto-downloaded a
+00017cb0: 6e64 206c 6f61 6465 642e 2059 6f75 2063  nd loaded. You c
+00017cc0: 616e 206f 7665 7272 6964 6520 7468 6973  an override this
+00017cd0: 2074 6f20 706f 696e 7420 746f 2061 2064   to point to a d
+00017ce0: 6966 6665 7265 6e74 2066 6f6c 6465 7220  ifferent folder 
+00017cf0: 6275 7420 7479 7069 6361 6c6c 7920 7468  but typically th
+00017d00: 6973 2073 686f 756c 6420 6e6f 7420 6265  is should not be
+00017d10: 206e 6563 6573 7361 7279 2e0a 2020 2020   necessary..    
+00017d20: 2020 2020 2020 2020 696e 5f6d 656d 6f72          in_memor
+00017d30: 793a 2049 6620 5472 7565 2c20 6b65 6570  y: If True, keep
+00017d40: 7320 6461 7461 7365 7420 696e 206d 656d  s dataset in mem
+00017d50: 6f72 7920 6769 7669 6e67 2073 7065 6564  ory giving speed
+00017d60: 7570 7320 696e 2074 7261 696e 696e 672e  ups in training.
+00017d70: 204e 6f74 2072 6563 6f6d 6d65 6e64 6564   Not recommended
+00017d80: 2064 7565 2074 6f20 6865 6176 7920 5241   due to heavy RA
+00017d90: 4d20 7573 6167 652e 0a20 2020 2020 2020  M usage..       
+00017da0: 2020 2020 2064 6f63 756d 656e 745f 6173       document_as
+00017db0: 5f73 6571 7565 6e63 653a 2049 6620 5472  _sequence: If Tr
+00017dc0: 7565 2c20 616c 6c20 7365 6e74 656e 6365  ue, all sentence
+00017dd0: 7320 6f66 2061 2064 6f63 756d 656e 7420  s of a document 
+00017de0: 6172 6520 7265 6164 2069 6e74 6f20 6120  are read into a 
+00017df0: 7369 6e67 6c65 2053 656e 7465 6e63 6520  single Sentence 
+00017e00: 6f62 6a65 6374 2e0a 2020 2020 2020 2020  object..        
+00017e10: 2222 220a 2020 2020 2020 2020 6261 7365  """.        base
+00017e20: 5f70 6174 6820 3d20 6b6f 6c69 6272 692e  _path = kolibri.
+00017e30: 6361 6368 655f 726f 6f74 202f 2022 6461  cache_root / "da
+00017e40: 7461 7365 7473 2220 6966 206e 6f74 2062  tasets" if not b
+00017e50: 6173 655f 7061 7468 2065 6c73 6520 5061  ase_path else Pa
+00017e60: 7468 2862 6173 655f 7061 7468 290a 0a20  th(base_path).. 
+00017e70: 2020 2020 2020 2023 2063 6f6c 756d 6e20         # column 
+00017e80: 666f 726d 6174 0a20 2020 2020 2020 2063  format.        c
+00017e90: 6f6c 756d 6e73 203d 207b 303a 2022 7465  olumns = {0: "te
+00017ea0: 7874 222c 2031 3a20 226c 656d 6d61 222c  xt", 1: "lemma",
+00017eb0: 2032 3a20 2270 6f73 222c 2033 3a20 226e   2: "pos", 3: "n
+00017ec0: 7022 2c20 343a 2022 6e65 7222 7d0a 0a20  p", 4: "ner"}.. 
+00017ed0: 2020 2020 2020 2023 2074 6869 7320 6461         # this da
+00017ee0: 7461 7365 7420 6e61 6d65 0a20 2020 2020  taset name.     
+00017ef0: 2020 2064 6174 6173 6574 5f6e 616d 6520     dataset_name 
+00017f00: 3d20 7365 6c66 2e5f 5f63 6c61 7373 5f5f  = self.__class__
+00017f10: 2e5f 5f6e 616d 655f 5f2e 6c6f 7765 7228  .__name__.lower(
+00017f20: 290a 0a20 2020 2020 2020 2064 6174 615f  )..        data_
+00017f30: 666f 6c64 6572 203d 2062 6173 655f 7061  folder = base_pa
+00017f40: 7468 202f 2064 6174 6173 6574 5f6e 616d  th / dataset_nam
+00017f50: 650a 0a20 2020 2020 2020 2023 2064 6f77  e..        # dow
+00017f60: 6e6c 6f61 6420 6461 7461 2069 6620 6e65  nload data if ne
+00017f70: 6365 7373 6172 790a 2020 2020 2020 2020  cessary.        
+00017f80: 6575 726f 7061 726c 5f6e 6572 5f67 6572  europarl_ner_ger
+00017f90: 6d61 6e5f 7061 7468 203d 2022 6874 7470  man_path = "http
+00017fa0: 733a 2f2f 6e6c 7061 646f 2e64 652f 7e73  s://nlpado.de/~s
+00017fb0: 6562 6173 7469 616e 2f73 6f66 7477 6172  ebastian/softwar
+00017fc0: 652f 6e65 722f 220a 2020 2020 2020 2020  e/ner/".        
+00017fd0: 6361 6368 6564 5f70 6174 6828 0a20 2020  cached_path(.   
+00017fe0: 2020 2020 2020 2020 2066 227b 6575 726f           f"{euro
+00017ff0: 7061 726c 5f6e 6572 5f67 6572 6d61 6e5f  parl_ner_german_
+00018000: 7061 7468 7d65 702d 3936 2d30 342d 3135  path}ep-96-04-15
+00018010: 2e63 6f6e 6c6c 222c 0a20 2020 2020 2020  .conll",.       
+00018020: 2020 2020 2050 6174 6828 2264 6174 6173       Path("datas
+00018030: 6574 7322 2920 2f20 6461 7461 7365 745f  ets") / dataset_
+00018040: 6e61 6d65 2c0a 2020 2020 2020 2020 290a  name,.        ).
+00018050: 2020 2020 2020 2020 6361 6368 6564 5f70          cached_p
+00018060: 6174 6828 0a20 2020 2020 2020 2020 2020  ath(.           
+00018070: 2066 227b 6575 726f 7061 726c 5f6e 6572   f"{europarl_ner
+00018080: 5f67 6572 6d61 6e5f 7061 7468 7d65 702d  _german_path}ep-
+00018090: 3936 2d30 342d 3136 2e63 6f6e 6c6c 222c  96-04-16.conll",
+000180a0: 0a20 2020 2020 2020 2020 2020 2050 6174  .            Pat
+000180b0: 6828 2264 6174 6173 6574 7322 2920 2f20  h("datasets") / 
+000180c0: 6461 7461 7365 745f 6e61 6d65 2c0a 2020  dataset_name,.  
+000180d0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+000180e0: 2073 656c 662e 5f61 6464 5f49 4f42 5f74   self._add_IOB_t
+000180f0: 6167 7328 0a20 2020 2020 2020 2020 2020  ags(.           
+00018100: 2064 6174 615f 6669 6c65 3d50 6174 6828   data_file=Path(
+00018110: 6461 7461 5f66 6f6c 6465 7220 2f20 2265  data_folder / "e
+00018120: 702d 3936 2d30 342d 3135 2e63 6f6e 6c6c  p-96-04-15.conll
+00018130: 2229 2c0a 2020 2020 2020 2020 2020 2020  "),.            
+00018140: 656e 636f 6469 6e67 3d22 6c61 7469 6e2d  encoding="latin-
+00018150: 3122 2c0a 2020 2020 2020 2020 2020 2020  1",.            
+00018160: 6e65 725f 636f 6c75 6d6e 3d34 2c0a 2020  ner_column=4,.  
+00018170: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00018180: 7365 6c66 2e5f 6164 645f 494f 425f 7461  self._add_IOB_ta
+00018190: 6773 280a 2020 2020 2020 2020 2020 2020  gs(.            
+000181a0: 6461 7461 5f66 696c 653d 5061 7468 2864  data_file=Path(d
+000181b0: 6174 615f 666f 6c64 6572 202f 2022 6570  ata_folder / "ep
+000181c0: 2d39 362d 3034 2d31 362e 636f 6e6c 6c22  -96-04-16.conll"
+000181d0: 292c 0a20 2020 2020 2020 2020 2020 2065  ),.            e
+000181e0: 6e63 6f64 696e 673d 226c 6174 696e 2d31  ncoding="latin-1
+000181f0: 222c 0a20 2020 2020 2020 2020 2020 206e  ",.            n
+00018200: 6572 5f63 6f6c 756d 6e3d 342c 0a20 2020  er_column=4,.   
+00018210: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+00018220: 7375 7065 7228 292e 5f5f 696e 6974 5f5f  super().__init__
+00018230: 280a 2020 2020 2020 2020 2020 2020 6461  (.            da
+00018240: 7461 5f66 6f6c 6465 722c 0a20 2020 2020  ta_folder,.     
+00018250: 2020 2020 2020 2063 6f6c 756d 6e73 2c0a         columns,.
+00018260: 2020 2020 2020 2020 2020 2020 656e 636f              enco
+00018270: 6469 6e67 3d22 6c61 7469 6e2d 3122 2c0a  ding="latin-1",.
+00018280: 2020 2020 2020 2020 2020 2020 696e 5f6d              in_m
+00018290: 656d 6f72 793d 696e 5f6d 656d 6f72 792c  emory=in_memory,
+000182a0: 0a20 2020 2020 2020 2020 2020 2074 7261  .            tra
+000182b0: 696e 5f66 696c 653d 2265 702d 3936 2d30  in_file="ep-96-0
+000182c0: 342d 3136 2e63 6f6e 6c6c 222c 0a20 2020  4-16.conll",.   
+000182d0: 2020 2020 2020 2020 2074 6573 745f 6669           test_fi
+000182e0: 6c65 3d22 6570 2d39 362d 3034 2d31 352e  le="ep-96-04-15.
+000182f0: 636f 6e6c 6c22 2c0a 2020 2020 2020 2020  conll",.        
+00018300: 2020 2020 2a2a 636f 7270 7573 6172 6773      **corpusargs
+00018310: 2c0a 2020 2020 2020 2020 290a 0a20 2020  ,.        )..   
+00018320: 2064 6566 205f 6164 645f 494f 425f 7461   def _add_IOB_ta
+00018330: 6773 2873 656c 662c 2064 6174 615f 6669  gs(self, data_fi
+00018340: 6c65 3a20 556e 696f 6e5b 7374 722c 2050  le: Union[str, P
+00018350: 6174 685d 2c20 656e 636f 6469 6e67 3a20  ath], encoding: 
+00018360: 7374 7220 3d20 2275 7466 3822 2c20 6e65  str = "utf8", ne
+00018370: 725f 636f 6c75 6d6e 3a20 696e 7420 3d20  r_column: int = 
+00018380: 3129 3a0a 2020 2020 2020 2020 2222 2246  1):.        """F
+00018390: 756e 6374 696f 6e20 7468 6174 2061 6464  unction that add
+000183a0: 7320 494f 4220 7461 6773 2069 6620 6f6e  s IOB tags if on
+000183b0: 6c79 2063 6875 6e6b 206e 616d 6573 2061  ly chunk names a
+000183c0: 7265 2070 726f 7669 6465 642e 0a0a 2020  re provided...  
+000183d0: 2020 2020 2020 652e 672e 2077 6f72 6473        e.g. words
+000183e0: 2061 7265 2074 6167 6765 6420 5045 5220   are tagged PER 
+000183f0: 696e 7374 6561 6420 6f66 2042 2d50 4552  instead of B-PER
+00018400: 206f 7220 492d 5045 522e 2052 6570 6c61   or I-PER. Repla
+00018410: 6365 7320 2730 2720 7769 7468 2027 4f27  ces '0' with 'O'
+00018420: 2061 7320 7468 6520 6e6f 2d63 6875 6e6b   as the no-chunk
+00018430: 2074 6167 2073 696e 6365 2043 6f6c 756d   tag since Colum
+00018440: 6e43 6f72 7075 7320 6578 7065 6374 730a  nCorpus expects.
+00018450: 2020 2020 2020 2020 7468 6520 6c65 7474          the lett
+00018460: 6572 2027 4f27 2e20 4164 6469 7469 6f6e  er 'O'. Addition
+00018470: 616c 6c79 2069 7420 7265 6d6f 7665 7320  ally it removes 
+00018480: 6c69 6e65 7320 7769 7468 206e 6f20 7461  lines with no ta
+00018490: 6773 2069 6e20 7468 6520 6461 7461 2066  gs in the data f
+000184a0: 696c 6520 616e 6420 6361 6e20 616c 736f  ile and can also
+000184b0: 0a20 2020 2020 2020 2062 6520 7573 6564  .        be used
+000184c0: 2069 6620 7468 6520 6461 7461 2069 7320   if the data is 
+000184d0: 6f6e 6c79 2070 6172 7469 616c 6c79 2049  only partially I
+000184e0: 4f42 2074 6167 6765 642e 0a0a 2020 2020  OB tagged...    
+000184f0: 2020 2020 5061 7261 6d65 7465 7273 0a20      Parameters. 
+00018500: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
+00018510: 2d0a 2020 2020 2020 2020 6461 7461 5f66  -.        data_f
+00018520: 696c 6520 3a20 556e 696f 6e5b 7374 722c  ile : Union[str,
+00018530: 2050 6174 685d 0a20 2020 2020 2020 2020   Path].         
+00018540: 2020 2050 6174 6820 746f 2074 6865 2064     Path to the d
+00018550: 6174 6120 6669 6c65 2e0a 2020 2020 2020  ata file..      
+00018560: 2020 656e 636f 6469 6e67 203a 2073 7472    encoding : str
+00018570: 2c20 6f70 7469 6f6e 616c 0a20 2020 2020  , optional.     
+00018580: 2020 2020 2020 2045 6e63 6f64 696e 6720         Encoding 
+00018590: 7573 6564 2069 6e20 6f70 656e 2066 756e  used in open fun
+000185a0: 6374 696f 6e2e 2054 6865 2064 6566 6175  ction. The defau
+000185b0: 6c74 2069 7320 2275 7466 3822 2e0a 2020  lt is "utf8"..  
+000185c0: 2020 2020 2020 6e65 725f 636f 6c75 6d6e        ner_column
+000185d0: 203a 2069 6e74 2c20 6f70 7469 6f6e 616c   : int, optional
+000185e0: 0a20 2020 2020 2020 2020 2020 2053 7065  .            Spe
+000185f0: 6369 6669 6573 2074 6865 206e 6572 2d74  cifies the ner-t
+00018600: 6167 6765 6420 636f 6c75 6d6e 2e20 5468  agged column. Th
+00018610: 6520 6465 6661 756c 7420 6973 2031 2028  e default is 1 (
+00018620: 7468 6520 7365 636f 6e64 2063 6f6c 756d  the second colum
+00018630: 6e29 2e0a 2020 2020 2020 2020 2222 220a  n)..        """.
+00018640: 0a20 2020 2020 2020 2064 6566 2061 6464  .        def add
+00018650: 5f49 5f70 7265 6669 7828 6375 7272 656e  _I_prefix(curren
+00018660: 745f 6c69 6e65 3a20 4c69 7374 5b73 7472  t_line: List[str
+00018670: 5d2c 206e 6572 3a20 696e 742c 2074 6167  ], ner: int, tag
+00018680: 3a20 7374 7229 3a0a 2020 2020 2020 2020  : str):.        
+00018690: 2020 2020 666f 7220 6920 696e 2072 616e      for i in ran
+000186a0: 6765 286c 656e 2863 7572 7265 6e74 5f6c  ge(len(current_l
+000186b0: 696e 6529 293a 0a20 2020 2020 2020 2020  ine)):.         
+000186c0: 2020 2020 2020 2069 6620 6920 3d3d 2030         if i == 0
+000186d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000186e0: 2020 2020 2020 662e 7772 6974 6528 6c69        f.write(li
+000186f0: 6e65 5f6c 6973 745b 695d 290a 2020 2020  ne_list[i]).    
+00018700: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+00018710: 2069 203d 3d20 6e65 723a 0a20 2020 2020   i == ner:.     
+00018720: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00018730: 2e77 7269 7465 2822 2049 2d22 202b 2074  .write(" I-" + t
+00018740: 6167 290a 2020 2020 2020 2020 2020 2020  ag).            
+00018750: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00018760: 2020 2020 2020 2020 2020 2020 2020 662e                f.
+00018770: 7772 6974 6528 2220 2220 2b20 6375 7272  write(" " + curr
+00018780: 656e 745f 6c69 6e65 5b69 5d29 0a20 2020  ent_line[i]).   
+00018790: 2020 2020 2020 2020 2066 2e77 7269 7465           f.write
+000187a0: 2822 5c6e 2229 0a0a 2020 2020 2020 2020  ("\n")..        
+000187b0: 7769 7468 206f 7065 6e28 6669 6c65 3d64  with open(file=d
+000187c0: 6174 615f 6669 6c65 2c20 656e 636f 6469  ata_file, encodi
+000187d0: 6e67 3d65 6e63 6f64 696e 6729 2061 7320  ng=encoding) as 
+000187e0: 663a 0a20 2020 2020 2020 2020 2020 206c  f:.            l
+000187f0: 696e 6573 203d 2066 2e72 6561 646c 696e  ines = f.readlin
+00018800: 6573 2829 0a20 2020 2020 2020 2077 6974  es().        wit
+00018810: 6820 6f70 656e 2866 696c 653d 6461 7461  h open(file=data
+00018820: 5f66 696c 652c 206d 6f64 653d 2277 222c  _file, mode="w",
+00018830: 2065 6e63 6f64 696e 673d 656e 636f 6469   encoding=encodi
+00018840: 6e67 2920 6173 2066 3a0a 2020 2020 2020  ng) as f:.      
+00018850: 2020 2020 2020 7072 6564 203d 2022 4f22        pred = "O"
+00018860: 2020 2320 7265 6d65 6d62 6572 7320 6e65    # remembers ne
+00018870: 7220 7461 6720 6f66 2070 7265 6465 6365  r tag of predece
+00018880: 7373 696e 6720 6c69 6e65 0a20 2020 2020  ssing line.     
+00018890: 2020 2020 2020 2066 6f72 206c 696e 6520         for line 
+000188a0: 696e 206c 696e 6573 3a0a 2020 2020 2020  in lines:.      
+000188b0: 2020 2020 2020 2020 2020 6c69 6e65 5f6c            line_l
+000188c0: 6973 7420 3d20 6c69 6e65 2e73 706c 6974  ist = line.split
+000188d0: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
+000188e0: 2020 2069 6620 6c65 6e28 6c69 6e65 5f6c     if len(line_l
+000188f0: 6973 7429 203e 2032 3a20 2023 2077 6f72  ist) > 2:  # wor
+00018900: 6420 7769 7468 2074 6167 730a 2020 2020  d with tags.    
+00018910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018920: 6e65 725f 7461 6720 3d20 6c69 6e65 5f6c  ner_tag = line_l
+00018930: 6973 745b 6e65 725f 636f 6c75 6d6e 5d0a  ist[ner_column].
+00018940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018950: 2020 2020 6966 206e 6572 5f74 6167 2069      if ner_tag i
+00018960: 6e20 5b22 3022 2c20 224f 225d 3a20 2023  n ["0", "O"]:  #
+00018970: 206e 6f20 6368 756e 6b0a 2020 2020 2020   no chunk.      
+00018980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018990: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
+000189a0: 286c 656e 286c 696e 655f 6c69 7374 2929  (len(line_list))
+000189b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000189c0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+000189d0: 2069 203d 3d20 303a 0a20 2020 2020 2020   i == 0:.       
+000189e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000189f0: 2020 2020 2020 2020 2066 2e77 7269 7465           f.write
+00018a00: 286c 696e 655f 6c69 7374 5b69 5d29 0a20  (line_list[i]). 
+00018a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018a20: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00018a30: 6920 3d3d 206e 6572 5f63 6f6c 756d 6e3a  i == ner_column:
+00018a40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018a60: 2066 2e77 7269 7465 2822 204f 2229 0a20   f.write(" O"). 
+00018a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018a80: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00018a90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018ab0: 2066 2e77 7269 7465 2822 2022 202b 206c   f.write(" " + l
+00018ac0: 696e 655f 6c69 7374 5b69 5d29 0a20 2020  ine_list[i]).   
+00018ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018ae0: 2020 2020 2066 2e77 7269 7465 2822 5c6e       f.write("\n
+00018af0: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
+00018b00: 2020 2020 2020 2020 2020 2070 7265 6420             pred 
+00018b10: 3d20 224f 220a 2020 2020 2020 2020 2020  = "O".          
+00018b20: 2020 2020 2020 2020 2020 656c 6966 2022            elif "
+00018b30: 2d22 206e 6f74 2069 6e20 6e65 725f 7461  -" not in ner_ta
+00018b40: 673a 2020 2320 6e6f 2049 4f42 2074 6167  g:  # no IOB tag
+00018b50: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
+00018b60: 2020 2020 2020 2020 2020 6966 2070 7265            if pre
+00018b70: 6420 3d3d 2022 4f22 3a20 2023 2066 6f75  d == "O":  # fou
+00018b80: 6e64 2061 206e 6577 2063 6875 6e6b 0a20  nd a new chunk. 
+00018b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018ba0: 2020 2020 2020 2020 2020 2061 6464 5f49             add_I
+00018bb0: 5f70 7265 6669 7828 6c69 6e65 5f6c 6973  _prefix(line_lis
+00018bc0: 742c 206e 6572 5f63 6f6c 756d 6e2c 206e  t, ner_column, n
+00018bd0: 6572 5f74 6167 290a 2020 2020 2020 2020  er_tag).        
+00018be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018bf0: 2020 2020 7072 6564 203d 206e 6572 5f74      pred = ner_t
+00018c00: 6167 0a20 2020 2020 2020 2020 2020 2020  ag.             
+00018c10: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00018c20: 2020 2320 666f 756e 6420 6675 7274 6865    # found furthe
+00018c30: 7220 7061 7274 206f 6620 6368 756e 6b20  r part of chunk 
+00018c40: 6f72 206e 6577 2063 6875 6e6b 2064 6972  or new chunk dir
+00018c50: 6563 746c 7920 6166 7465 7220 6f6c 6420  ectly after old 
+00018c60: 6368 756e 6b0a 2020 2020 2020 2020 2020  chunk.          
+00018c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018c80: 2020 6164 645f 495f 7072 6566 6978 286c    add_I_prefix(l
+00018c90: 696e 655f 6c69 7374 2c20 6e65 725f 636f  ine_list, ner_co
+00018ca0: 6c75 6d6e 2c20 6e65 725f 7461 6729 0a20  lumn, ner_tag). 
+00018cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018cc0: 2020 2020 2020 2020 2020 2070 7265 6420             pred 
+00018cd0: 3d20 6e65 725f 7461 670a 2020 2020 2020  = ner_tag.      
+00018ce0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00018cf0: 7365 3a20 2023 206c 696e 6520 616c 7265  se:  # line alre
+00018d00: 6164 7920 6861 7320 494f 4220 7461 6720  ady has IOB tag 
+00018d10: 2874 6167 2063 6f6e 7461 696e 7320 272d  (tag contains '-
+00018d20: 2729 0a20 2020 2020 2020 2020 2020 2020  ').             
+00018d30: 2020 2020 2020 2020 2020 2066 2e77 7269             f.wri
+00018d40: 7465 286c 696e 6529 0a20 2020 2020 2020  te(line).       
+00018d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018d60: 2070 7265 6420 3d20 6e65 725f 7461 672e   pred = ner_tag.
+00018d70: 7370 6c69 7428 222d 2229 5b31 5d0a 2020  split("-")[1].  
+00018d80: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00018d90: 6966 206c 656e 286c 696e 655f 6c69 7374  if len(line_list
+00018da0: 2920 3d3d 2030 3a20 2023 2065 6d70 7479  ) == 0:  # empty
+00018db0: 206c 696e 650a 2020 2020 2020 2020 2020   line.          
+00018dc0: 2020 2020 2020 2020 2020 662e 7772 6974            f.writ
+00018dd0: 6528 225c 6e22 290a 2020 2020 2020 2020  e("\n").        
+00018de0: 2020 2020 2020 2020 2020 2020 7072 6564              pred
+00018df0: 203d 2022 4f22 0a0a 0a63 6c61 7373 204e   = "O"...class N
+00018e00: 4552 5f47 4552 4d41 4e5f 4c45 4741 4c28  ER_GERMAN_LEGAL(
+00018e10: 436f 6c75 6d6e 436f 7270 7573 293a 0a20  ColumnCorpus):. 
+00018e20: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+00018e30: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
+00018e40: 2020 2020 2020 2062 6173 655f 7061 7468         base_path
+00018e50: 3a20 4f70 7469 6f6e 616c 5b55 6e69 6f6e  : Optional[Union
+00018e60: 5b73 7472 2c20 5061 7468 5d5d 203d 204e  [str, Path]] = N
+00018e70: 6f6e 652c 0a20 2020 2020 2020 2069 6e5f  one,.        in_
+00018e80: 6d65 6d6f 7279 3a20 626f 6f6c 203d 2054  memory: bool = T
+00018e90: 7275 652c 0a20 2020 2020 2020 202a 2a63  rue,.        **c
+00018ea0: 6f72 7075 7361 7267 732c 0a20 2020 2029  orpusargs,.    )
+00018eb0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+00018ec0: 2020 2222 2249 6e69 7469 616c 697a 6520    """Initialize 
+00018ed0: 7468 6520 4c45 525f 4745 524d 414e 2028  the LER_GERMAN (
+00018ee0: 4c65 6761 6c20 456e 7469 7479 2052 6563  Legal Entity Rec
+00018ef0: 6f67 6e69 7469 6f6e 2920 636f 7270 7573  ognition) corpus
+00018f00: 2e0a 0a20 2020 2020 2020 2054 6865 2066  ...        The f
+00018f10: 6972 7374 2074 696d 6520 796f 7520 6361  irst time you ca
+00018f20: 6c6c 2074 6869 7320 636f 6e73 7472 7563  ll this construc
+00018f30: 746f 7220 6974 2077 696c 6c20 6175 746f  tor it will auto
+00018f40: 6d61 7469 6361 6c6c 7920 646f 776e 6c6f  matically downlo
+00018f50: 6164 2074 6865 2064 6174 6173 6574 2e0a  ad the dataset..
+00018f60: 2020 2020 2020 2020 3a70 6172 616d 2062          :param b
+00018f70: 6173 655f 7061 7468 3a20 4465 6661 756c  ase_path: Defaul
+00018f80: 7420 6973 204e 6f6e 652c 206d 6561 6e69  t is None, meani
+00018f90: 6e67 2074 6861 7420 636f 7270 7573 2067  ng that corpus g
+00018fa0: 6574 7320 6175 746f 2d64 6f77 6e6c 6f61  ets auto-downloa
+00018fb0: 6465 6420 616e 6420 6c6f 6164 6564 2e20  ded and loaded. 
+00018fc0: 596f 7520 6361 6e20 6f76 6572 7269 6465  You can override
+00018fd0: 2074 6869 730a 2020 2020 2020 2020 746f   this.        to
+00018fe0: 2070 6f69 6e74 2074 6f20 6120 6469 6666   point to a diff
+00018ff0: 6572 656e 7420 666f 6c64 6572 2062 7574  erent folder but
+00019000: 2074 7970 6963 616c 6c79 2074 6869 7320   typically this 
+00019010: 7368 6f75 6c64 206e 6f74 2062 6520 6e65  should not be ne
+00019020: 6365 7373 6172 792e 0a20 2020 2020 2020  cessary..       
+00019030: 203a 7061 7261 6d20 696e 5f6d 656d 6f72   :param in_memor
+00019040: 793a 2049 6620 5472 7565 2c20 6b65 6570  y: If True, keep
+00019050: 7320 6461 7461 7365 7420 696e 206d 656d  s dataset in mem
+00019060: 6f72 7920 6769 7669 6e67 2073 7065 6564  ory giving speed
+00019070: 7570 7320 696e 2074 7261 696e 696e 672e  ups in training.
+00019080: 204e 6f74 2072 6563 6f6d 6d65 6e64 6564   Not recommended
+00019090: 2064 7565 2074 6f20 6865 6176 7920 5241   due to heavy RA
+000190a0: 4d20 7573 6167 652e 0a20 2020 2020 2020  M usage..       
+000190b0: 2022 2222 0a20 2020 2020 2020 2062 6173   """.        bas
+000190c0: 655f 7061 7468 203d 206b 6f6c 6962 7269  e_path = kolibri
+000190d0: 2e63 6163 6865 5f72 6f6f 7420 2f20 2264  .cache_root / "d
+000190e0: 6174 6173 6574 7322 2069 6620 6e6f 7420  atasets" if not 
+000190f0: 6261 7365 5f70 6174 6820 656c 7365 2050  base_path else P
+00019100: 6174 6828 6261 7365 5f70 6174 6829 0a0a  ath(base_path)..
+00019110: 2020 2020 2020 2020 2320 636f 6c75 6d6e          # column
+00019120: 2066 6f72 6d61 740a 2020 2020 2020 2020   format.        
+00019130: 636f 6c75 6d6e 7320 3d20 7b30 3a20 2274  columns = {0: "t
+00019140: 6578 7422 2c20 313a 2022 6e65 7222 7d0a  ext", 1: "ner"}.
+00019150: 0a20 2020 2020 2020 2023 2074 6869 7320  .        # this 
+00019160: 6461 7461 7365 7420 6e61 6d65 0a20 2020  dataset name.   
+00019170: 2020 2020 2064 6174 6173 6574 5f6e 616d       dataset_nam
+00019180: 6520 3d20 7365 6c66 2e5f 5f63 6c61 7373  e = self.__class
+00019190: 5f5f 2e5f 5f6e 616d 655f 5f2e 6c6f 7765  __.__name__.lowe
+000191a0: 7228 290a 0a20 2020 2020 2020 2064 6174  r()..        dat
+000191b0: 615f 666f 6c64 6572 203d 2062 6173 655f  a_folder = base_
+000191c0: 7061 7468 202f 2064 6174 6173 6574 5f6e  path / dataset_n
+000191d0: 616d 650a 0a20 2020 2020 2020 2023 2064  ame..        # d
+000191e0: 6f77 6e6c 6f61 6420 6461 7461 2069 6620  ownload data if 
+000191f0: 6e65 6365 7373 6172 790a 2020 2020 2020  necessary.      
+00019200: 2020 6c65 725f 7061 7468 203d 2022 6874    ler_path = "ht
+00019210: 7470 733a 2f2f 7261 772e 6769 7468 7562  tps://raw.github
+00019220: 7573 6572 636f 6e74 656e 742e 636f 6d2f  usercontent.com/
+00019230: 656c 656e 616e 6572 6569 7373 2f4c 6567  elenanereiss/Leg
+00019240: 616c 2d45 6e74 6974 792d 5265 636f 676e  al-Entity-Recogn
+00019250: 6974 696f 6e2f 6d61 7374 6572 2f64 6174  ition/master/dat
+00019260: 612f 220a 0a20 2020 2020 2020 2066 6f72  a/"..        for
+00019270: 2073 706c 6974 2069 6e20 5b22 7472 6169   split in ["trai
+00019280: 6e22 2c20 2264 6576 222c 2022 7465 7374  n", "dev", "test
+00019290: 225d 3a0a 2020 2020 2020 2020 2020 2020  "]:.            
+000192a0: 6361 6368 6564 5f70 6174 6828 6622 7b6c  cached_path(f"{l
+000192b0: 6572 5f70 6174 687d 6c65 725f 7b73 706c  er_path}ler_{spl
+000192c0: 6974 7d2e 636f 6e6c 6c22 2c20 5061 7468  it}.conll", Path
+000192d0: 2822 6461 7461 7365 7473 2229 202f 2064  ("datasets") / d
+000192e0: 6174 6173 6574 5f6e 616d 6529 0a0a 2020  ataset_name)..  
+000192f0: 2020 2020 2020 7375 7065 7228 292e 5f5f        super().__
+00019300: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
+00019310: 2020 2020 6461 7461 5f66 6f6c 6465 722c      data_folder,
+00019320: 0a20 2020 2020 2020 2020 2020 2063 6f6c  .            col
+00019330: 756d 6e73 2c0a 2020 2020 2020 2020 2020  umns,.          
+00019340: 2020 696e 5f6d 656d 6f72 793d 696e 5f6d    in_memory=in_m
+00019350: 656d 6f72 792c 0a20 2020 2020 2020 2020  emory,.         
+00019360: 2020 2074 7261 696e 5f66 696c 653d 226c     train_file="l
+00019370: 6572 5f74 7261 696e 2e63 6f6e 6c6c 222c  er_train.conll",
+00019380: 0a20 2020 2020 2020 2020 2020 2064 6576  .            dev
+00019390: 5f66 696c 653d 226c 6572 5f64 6576 2e63  _file="ler_dev.c
+000193a0: 6f6e 6c6c 222c 0a20 2020 2020 2020 2020  onll",.         
+000193b0: 2020 2074 6573 745f 6669 6c65 3d22 6c65     test_file="le
+000193c0: 725f 7465 7374 2e63 6f6e 6c6c 222c 0a20  r_test.conll",. 
+000193d0: 2020 2020 2020 2020 2020 202a 2a63 6f72             **cor
+000193e0: 7075 7361 7267 732c 0a20 2020 2020 2020  pusargs,.       
+000193f0: 2029 0a0a 0a63 6c61 7373 204e 4552 5f47   )...class NER_G
+00019400: 4552 4d41 4e5f 4745 524d 4556 414c 2843  ERMAN_GERMEVAL(C
+00019410: 6f6c 756d 6e43 6f72 7075 7329 3a0a 2020  olumnCorpus):.  
+00019420: 2020 6465 6620 5f5f 696e 6974 5f5f 280a    def __init__(.
+00019430: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
+00019440: 2020 2020 2020 6261 7365 5f70 6174 683a        base_path:
+00019450: 204f 7074 696f 6e61 6c5b 556e 696f 6e5b   Optional[Union[
+00019460: 7374 722c 2050 6174 685d 5d20 3d20 4e6f  str, Path]] = No
+00019470: 6e65 2c0a 2020 2020 2020 2020 696e 5f6d  ne,.        in_m
+00019480: 656d 6f72 793a 2062 6f6f 6c20 3d20 5472  emory: bool = Tr
+00019490: 7565 2c0a 2020 2020 2020 2020 2a2a 636f  ue,.        **co
+000194a0: 7270 7573 6172 6773 2c0a 2020 2020 2920  rpusargs,.    ) 
+000194b0: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+000194c0: 2022 2222 496e 6974 6961 6c69 7a65 2074   """Initialize t
+000194d0: 6865 2047 6572 6d45 7661 6c20 4e45 5220  he GermEval NER 
+000194e0: 636f 7270 7573 2066 6f72 2047 6572 6d61  corpus for Germa
+000194f0: 6e2e 0a0a 2020 2020 2020 2020 5468 6973  n...        This
+00019500: 2069 7320 6f6e 6c79 2070 6f73 7369 626c   is only possibl
+00019510: 6520 6966 2079 6f75 2776 6520 6d61 6e75  e if you've manu
+00019520: 616c 6c79 2064 6f77 6e6c 6f61 6465 6420  ally downloaded 
+00019530: 6974 2074 6f20 796f 7572 206d 6163 6869  it to your machi
+00019540: 6e65 2e0a 2020 2020 2020 2020 4f62 7461  ne..        Obta
+00019550: 696e 2074 6865 2063 6f72 7075 7320 6672  in the corpus fr
+00019560: 6f6d 2068 7474 7073 3a2f 2f73 6974 6573  om https://sites
+00019570: 2e67 6f6f 676c 652e 636f 6d2f 7369 7465  .google.com/site
+00019580: 2f67 6572 6d65 7661 6c32 3031 346e 6572  /germeval2014ner
+00019590: 2f64 6174 6120 616e 6420 7075 7420 6974  /data and put it
+000195a0: 2069 6e74 6f20 736f 6d65 2066 6f6c 6465   into some folde
+000195b0: 722e 0a20 2020 2020 2020 2054 6865 6e20  r..        Then 
+000195c0: 706f 696e 7420 7468 6520 6261 7365 5f70  point the base_p
+000195d0: 6174 6820 7061 7261 6d65 7465 7220 696e  ath parameter in
+000195e0: 2074 6865 2063 6f6e 7374 7275 6374 6f72   the constructor
+000195f0: 2074 6f20 7468 6973 2066 6f6c 6465 720a   to this folder.
+00019600: 2020 2020 2020 2020 3a70 6172 616d 2062          :param b
+00019610: 6173 655f 7061 7468 3a20 5061 7468 2074  ase_path: Path t
+00019620: 6f20 7468 6520 4765 726d 4576 616c 2063  o the GermEval c
+00019630: 6f72 7075 7320 6f6e 2079 6f75 7220 6d61  orpus on your ma
+00019640: 6368 696e 650a 2020 2020 2020 2020 3a70  chine.        :p
+00019650: 6172 616d 2069 6e5f 6d65 6d6f 7279 3a49  aram in_memory:I
+00019660: 6620 5472 7565 2c20 6b65 6570 7320 6461  f True, keeps da
+00019670: 7461 7365 7420 696e 206d 656d 6f72 7920  taset in memory 
+00019680: 6769 7669 6e67 2073 7065 6564 7570 7320  giving speedups 
+00019690: 696e 2074 7261 696e 696e 672e 0a20 2020  in training..   
+000196a0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+000196b0: 2062 6173 655f 7061 7468 203d 206b 6f6c   base_path = kol
+000196c0: 6962 7269 2e63 6163 6865 5f72 6f6f 7420  ibri.cache_root 
+000196d0: 2f20 2264 6174 6173 6574 7322 2069 6620  / "datasets" if 
+000196e0: 6e6f 7420 6261 7365 5f70 6174 6820 656c  not base_path el
+000196f0: 7365 2050 6174 6828 6261 7365 5f70 6174  se Path(base_pat
+00019700: 6829 0a0a 2020 2020 2020 2020 2320 636f  h)..        # co
+00019710: 6c75 6d6e 2066 6f72 6d61 740a 2020 2020  lumn format.    
+00019720: 2020 2020 636f 6c75 6d6e 7320 3d20 7b31      columns = {1
+00019730: 3a20 2274 6578 7422 2c20 323a 2022 6e65  : "text", 2: "ne
+00019740: 7222 7d0a 0a20 2020 2020 2020 2023 2074  r"}..        # t
+00019750: 6869 7320 6461 7461 7365 7420 6e61 6d65  his dataset name
+00019760: 0a20 2020 2020 2020 2064 6174 6173 6574  .        dataset
+00019770: 5f6e 616d 6520 3d20 7365 6c66 2e5f 5f63  _name = self.__c
+00019780: 6c61 7373 5f5f 2e5f 5f6e 616d 655f 5f2e  lass__.__name__.
+00019790: 6c6f 7765 7228 290a 0a20 2020 2020 2020  lower()..       
+000197a0: 2064 6174 615f 666f 6c64 6572 203d 2062   data_folder = b
+000197b0: 6173 655f 7061 7468 202f 2064 6174 6173  ase_path / datas
+000197c0: 6574 5f6e 616d 650a 0a20 2020 2020 2020  et_name..       
+000197d0: 2023 2063 6865 636b 2069 6620 6461 7461   # check if data
+000197e0: 2074 6865 7265 0a20 2020 2020 2020 2069   there.        i
+000197f0: 6620 6e6f 7420 6461 7461 5f66 6f6c 6465  f not data_folde
+00019800: 722e 6578 6973 7473 2829 3a0a 2020 2020  r.exists():.    
+00019810: 2020 2020 2020 2020 2320 6372 6561 7465          # create
+00019820: 2066 6f6c 6465 720a 2020 2020 2020 2020   folder.        
+00019830: 2020 2020 6f73 2e6d 616b 6564 6972 7328      os.makedirs(
+00019840: 6461 7461 5f66 6f6c 6465 7229 0a0a 2020  data_folder)..  
+00019850: 2020 2020 2020 2020 2020 2320 646f 776e            # down
+00019860: 6c6f 6164 2064 6174 6173 6574 0a20 2020  load dataset.   
+00019870: 2020 2020 2020 2020 2069 6d70 6f72 7420           import 
+00019880: 6764 6f77 6e0a 0a20 2020 2020 2020 2020  gdown..         
+00019890: 2020 2067 646f 776e 2e64 6f77 6e6c 6f61     gdown.downloa
+000198a0: 6428 0a20 2020 2020 2020 2020 2020 2020  d(.             
+000198b0: 2020 2075 726c 3d22 6874 7470 733a 2f2f     url="https://
+000198c0: 6472 6976 652e 676f 6f67 6c65 2e63 6f6d  drive.google.com
+000198d0: 2f75 633f 6964 3d7b 7d22 2e66 6f72 6d61  /uc?id={}".forma
+000198e0: 7428 2231 4a6a 6862 616c 3533 3556 567a  t("1Jjhbal535VVz
+000198f0: 3261 7034 7634 725f 724e 3155 4548 5464  2ap4v4r_rN1UEHTd
+00019900: 4c4b 3550 2229 2c0a 2020 2020 2020 2020  LK5P"),.        
+00019910: 2020 2020 2020 2020 6f75 7470 7574 3d73          output=s
+00019920: 7472 2864 6174 615f 666f 6c64 6572 202f  tr(data_folder /
+00019930: 2022 7472 6169 6e2e 7473 7622 292c 0a20   "train.tsv"),. 
+00019940: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00019950: 2020 2020 2020 2020 2067 646f 776e 2e64           gdown.d
+00019960: 6f77 6e6c 6f61 6428 0a20 2020 2020 2020  ownload(.       
+00019970: 2020 2020 2020 2020 2075 726c 3d22 6874           url="ht
+00019980: 7470 733a 2f2f 6472 6976 652e 676f 6f67  tps://drive.goog
+00019990: 6c65 2e63 6f6d 2f75 633f 6964 3d7b 7d22  le.com/uc?id={}"
+000199a0: 2e66 6f72 6d61 7428 2231 7539 6d62 376b  .format("1u9mb7k
+000199b0: 4e4a 4857 5143 5779 7765 4d44 524d 7554  NJHWQCWyweMDRMuT
+000199c0: 466f 4f48 4f66 6542 5448 2229 2c0a 2020  FoOHOfeBTH"),.  
+000199d0: 2020 2020 2020 2020 2020 2020 2020 6f75                ou
+000199e0: 7470 7574 3d73 7472 2864 6174 615f 666f  tput=str(data_fo
+000199f0: 6c64 6572 202f 2022 7465 7374 2e74 7376  lder / "test.tsv
+00019a00: 2229 2c0a 2020 2020 2020 2020 2020 2020  "),.            
+00019a10: 290a 2020 2020 2020 2020 2020 2020 6764  ).            gd
+00019a20: 6f77 6e2e 646f 776e 6c6f 6164 280a 2020  own.download(.  
+00019a30: 2020 2020 2020 2020 2020 2020 2020 7572                ur
+00019a40: 6c3d 2268 7474 7073 3a2f 2f64 7269 7665  l="https://drive
+00019a50: 2e67 6f6f 676c 652e 636f 6d2f 7563 3f69  .google.com/uc?i
+00019a60: 643d 7b7d 222e 666f 726d 6174 2822 315a  d={}".format("1Z
+00019a70: 6652 6351 5468 6474 4152 3550 5052 6a49  fRcQThdtAR5PPRjI
+00019a80: 4474 7256 5037 4274 5853 4355 4262 6d22  DtrVP7BtXSCUBbm"
+00019a90: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
+00019aa0: 2020 206f 7574 7075 743d 7374 7228 6461     output=str(da
+00019ab0: 7461 5f66 6f6c 6465 7220 2f20 2264 6576  ta_folder / "dev
+00019ac0: 2e74 7376 2229 2c0a 2020 2020 2020 2020  .tsv"),.        
+00019ad0: 2020 2020 290a 0a20 2020 2020 2020 2073      )..        s
+00019ae0: 7570 6572 2829 2e5f 5f69 6e69 745f 5f28  uper().__init__(
+00019af0: 0a20 2020 2020 2020 2020 2020 2064 6174  .            dat
+00019b00: 615f 666f 6c64 6572 2c0a 2020 2020 2020  a_folder,.      
+00019b10: 2020 2020 2020 636f 6c75 6d6e 732c 0a20        columns,. 
+00019b20: 2020 2020 2020 2020 2020 2063 6f6d 6d65             comme
+00019b30: 6e74 5f73 796d 626f 6c3d 2223 222c 0a20  nt_symbol="#",. 
+00019b40: 2020 2020 2020 2020 2020 2069 6e5f 6d65             in_me
+00019b50: 6d6f 7279 3d69 6e5f 6d65 6d6f 7279 2c0a  mory=in_memory,.
+00019b60: 2020 2020 2020 2020 2020 2020 2a2a 636f              **co
+00019b70: 7270 7573 6172 6773 2c0a 2020 2020 2020  rpusargs,.      
+00019b80: 2020 290a 0a0a 636c 6173 7320 4e45 525f    )...class NER_
+00019b90: 4745 524d 414e 5f50 4f4c 4954 4943 5328  GERMAN_POLITICS(
+00019ba0: 436f 6c75 6d6e 436f 7270 7573 293a 0a20  ColumnCorpus):. 
+00019bb0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+00019bc0: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
+00019bd0: 2020 2020 2020 2062 6173 655f 7061 7468         base_path
+00019be0: 3a20 4f70 7469 6f6e 616c 5b55 6e69 6f6e  : Optional[Union
+00019bf0: 5b73 7472 2c20 5061 7468 5d5d 203d 204e  [str, Path]] = N
+00019c00: 6f6e 652c 0a20 2020 2020 2020 2063 6f6c  one,.        col
+00019c10: 756d 6e5f 6465 6c69 6d69 7465 723a 2073  umn_delimiter: s
+00019c20: 7472 203d 2072 225c 732b 222c 0a20 2020  tr = r"\s+",.   
+00019c30: 2020 2020 2069 6e5f 6d65 6d6f 7279 3a20       in_memory: 
+00019c40: 626f 6f6c 203d 2054 7275 652c 0a20 2020  bool = True,.   
+00019c50: 2020 2020 202a 2a63 6f72 7075 7361 7267       **corpusarg
+00019c60: 732c 0a20 2020 2029 202d 3e20 4e6f 6e65  s,.    ) -> None
+00019c70: 3a0a 2020 2020 2020 2020 2222 2249 6e69  :.        """Ini
+00019c80: 7469 616c 697a 6520 636f 7270 7573 2077  tialize corpus w
+00019c90: 6974 6820 4e61 6d65 6420 456e 7469 7479  ith Named Entity
+00019ca0: 204d 6f64 656c 2066 6f72 2047 6572 6d61   Model for Germa
+00019cb0: 6e20 506f 6c69 7469 6373 2028 4e45 4d47  n Politics (NEMG
+00019cc0: 5029 2e0a 0a20 2020 2020 2020 2064 6174  P)...        dat
+00019cd0: 6120 6672 6f6d 2068 7474 7073 3a2f 2f77  a from https://w
+00019ce0: 7777 2e74 686f 6d61 732d 7a61 7374 726f  ww.thomas-zastro
+00019cf0: 772e 6465 2f6e 6c70 2f2e 0a0a 2020 2020  w.de/nlp/...    
+00019d00: 2020 2020 5468 6520 6669 7273 7420 7469      The first ti
+00019d10: 6d65 2079 6f75 2063 616c 6c20 7468 6973  me you call this
+00019d20: 2063 6f6e 7374 7275 6374 6f72 2069 7420   constructor it 
+00019d30: 7769 6c6c 2061 7574 6f6d 6174 6963 616c  will automatical
+00019d40: 6c79 2064 6f77 6e6c 6f61 6420 7468 650a  ly download the.
+00019d50: 2020 2020 2020 2020 6461 7461 7365 742e          dataset.
+00019d60: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00019d70: 6261 7365 5f70 6174 683a 2044 6566 6175  base_path: Defau
+00019d80: 6c74 2069 7320 4e6f 6e65 2c20 6d65 616e  lt is None, mean
+00019d90: 696e 6720 7468 6174 2063 6f72 7075 7320  ing that corpus 
+00019da0: 6765 7473 2061 7574 6f2d 646f 776e 6c6f  gets auto-downlo
+00019db0: 6164 6564 2061 6e64 206c 6f61 6465 642e  aded and loaded.
+00019dc0: 2059 6f75 2063 616e 206f 7665 7272 6964   You can overrid
+00019dd0: 6520 7468 6973 0a20 2020 2020 2020 2074  e this.        t
+00019de0: 6f20 706f 696e 7420 746f 2061 2064 6966  o point to a dif
+00019df0: 6665 7265 6e74 2066 6f6c 6465 7220 6275  ferent folder bu
+00019e00: 7420 7479 7069 6361 6c6c 7920 7468 6973  t typically this
+00019e10: 2073 686f 756c 6420 6e6f 7420 6265 206e   should not be n
+00019e20: 6563 6573 7361 7279 2e0a 2020 2020 2020  ecessary..      
+00019e30: 2020 504f 5320 7461 6773 2069 6e73 7465    POS tags inste
+00019e40: 6164 0a20 2020 2020 2020 203a 7061 7261  ad.        :para
+00019e50: 6d20 696e 5f6d 656d 6f72 793a 2049 6620  m in_memory: If 
+00019e60: 5472 7565 2c20 6b65 6570 7320 6461 7461  True, keeps data
+00019e70: 7365 7420 696e 206d 656d 6f72 7920 6769  set in memory gi
+00019e80: 7669 6e67 2073 7065 6564 7570 7320 696e  ving speedups in
+00019e90: 2074 7261 696e 696e 672e 0a20 2020 2020   training..     
+00019ea0: 2020 203a 7061 7261 6d20 646f 6375 6d65     :param docume
+00019eb0: 6e74 5f61 735f 7365 7175 656e 6365 3a20  nt_as_sequence: 
+00019ec0: 4966 2054 7275 652c 2061 6c6c 2073 656e  If True, all sen
+00019ed0: 7465 6e63 6573 206f 6620 6120 646f 6375  tences of a docu
+00019ee0: 6d65 6e74 2061 7265 2072 6561 6420 696e  ment are read in
+00019ef0: 746f 2061 2073 696e 676c 6520 5365 6e74  to a single Sent
+00019f00: 656e 6365 206f 626a 6563 740a 2020 2020  ence object.    
+00019f10: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00019f20: 6261 7365 5f70 6174 6820 3d20 6b6f 6c69  base_path = koli
+00019f30: 6272 692e 6361 6368 655f 726f 6f74 202f  bri.cache_root /
+00019f40: 2022 6461 7461 7365 7473 2220 6966 206e   "datasets" if n
+00019f50: 6f74 2062 6173 655f 7061 7468 2065 6c73  ot base_path els
+00019f60: 6520 5061 7468 2862 6173 655f 7061 7468  e Path(base_path
+00019f70: 290a 0a20 2020 2020 2020 2023 2063 6f6c  )..        # col
+00019f80: 756d 6e20 666f 726d 6174 0a20 2020 2020  umn format.     
+00019f90: 2020 2063 6f6c 756d 6e73 203d 207b 303a     columns = {0:
+00019fa0: 2022 7465 7874 222c 2031 3a20 226e 6572   "text", 1: "ner
+00019fb0: 227d 0a0a 2020 2020 2020 2020 2320 7468  "}..        # th
+00019fc0: 6973 2064 6174 6173 6574 206e 616d 650a  is dataset name.
+00019fd0: 2020 2020 2020 2020 6461 7461 7365 745f          dataset_
+00019fe0: 6e61 6d65 203d 2073 656c 662e 5f5f 636c  name = self.__cl
+00019ff0: 6173 735f 5f2e 5f5f 6e61 6d65 5f5f 2e6c  ass__.__name__.l
+0001a000: 6f77 6572 2829 0a0a 2020 2020 2020 2020  ower()..        
+0001a010: 6461 7461 5f66 6f6c 6465 7220 3d20 6261  data_folder = ba
+0001a020: 7365 5f70 6174 6820 2f20 6461 7461 7365  se_path / datase
+0001a030: 745f 6e61 6d65 0a0a 2020 2020 2020 2020  t_name..        
+0001a040: 2320 646f 776e 6c6f 6164 2061 6e64 2070  # download and p
+0001a050: 6172 7365 2064 6174 6120 6966 206e 6563  arse data if nec
+0001a060: 6573 7361 7279 0a20 2020 2020 2020 2067  essary.        g
+0001a070: 6572 6d61 6e5f 706f 6c69 7469 6373 5f70  erman_politics_p
+0001a080: 6174 6820 3d20 2268 7474 7073 3a2f 2f77  ath = "https://w
+0001a090: 7777 2e74 686f 6d61 732d 7a61 7374 726f  ww.thomas-zastro
+0001a0a0: 772e 6465 2f6e 6c70 2f6e 656d 6770 5f74  w.de/nlp/nemgp_t
+0001a0b0: 7261 696e 696e 6764 6174 615f 3031 2e74  rainingdata_01.t
+0001a0c0: 7874 2e7a 6970 220a 2020 2020 2020 2020  xt.zip".        
+0001a0d0: 636f 7270 7573 5f66 696c 655f 6e61 6d65  corpus_file_name
+0001a0e0: 203d 2022 6e65 6d67 705f 7472 6169 6e69   = "nemgp_traini
+0001a0f0: 6e67 6461 7461 5f30 312e 7478 7422 0a20  ngdata_01.txt". 
+0001a100: 2020 2020 2020 2070 6172 7365 645f 6461         parsed_da
+0001a110: 7461 7365 7420 3d20 6461 7461 5f66 6f6c  taset = data_fol
+0001a120: 6465 7220 2f20 2272 6177 2220 2f20 636f  der / "raw" / co
+0001a130: 7270 7573 5f66 696c 655f 6e61 6d65 0a0a  rpus_file_name..
+0001a140: 2020 2020 2020 2020 6966 206e 6f74 2070          if not p
+0001a150: 6172 7365 645f 6461 7461 7365 742e 6578  arsed_dataset.ex
+0001a160: 6973 7473 2829 3a0a 2020 2020 2020 2020  ists():.        
+0001a170: 2020 2020 6765 726d 616e 5f70 6f6c 6974      german_polit
+0001a180: 6963 735f 7a69 7020 3d20 6361 6368 6564  ics_zip = cached
+0001a190: 5f70 6174 6828 6622 7b67 6572 6d61 6e5f  _path(f"{german_
+0001a1a0: 706f 6c69 7469 6373 5f70 6174 687d 222c  politics_path}",
+0001a1b0: 2050 6174 6828 2264 6174 6173 6574 7322   Path("datasets"
+0001a1c0: 2920 2f20 6461 7461 7365 745f 6e61 6d65  ) / dataset_name
+0001a1d0: 202f 2022 7261 7722 290a 2020 2020 2020   / "raw").      
+0001a1e0: 2020 2020 2020 756e 7061 636b 5f66 696c        unpack_fil
+0001a1f0: 6528 6765 726d 616e 5f70 6f6c 6974 6963  e(german_politic
+0001a200: 735f 7a69 702c 2064 6174 615f 666f 6c64  s_zip, data_fold
+0001a210: 6572 202f 2022 7261 7722 2c20 227a 6970  er / "raw", "zip
+0001a220: 222c 2046 616c 7365 290a 2020 2020 2020  ", False).      
+0001a230: 2020 2020 2020 7365 6c66 2e5f 636f 6e76        self._conv
+0001a240: 6572 745f 746f 5f63 6f6c 756d 6e5f 636f  ert_to_column_co
+0001a250: 7270 7573 2870 6172 7365 645f 6461 7461  rpus(parsed_data
+0001a260: 7365 7429 0a0a 2020 2020 2020 2020 2320  set)..        # 
+0001a270: 6372 6561 7465 2074 7261 696e 2074 6573  create train tes
+0001a280: 7420 6465 7620 6966 206e 6f74 2065 7869  t dev if not exi
+0001a290: 7374 0a20 2020 2020 2020 2074 7261 696e  st.        train
+0001a2a0: 5f64 6174 6173 6574 203d 2064 6174 615f  _dataset = data_
+0001a2b0: 666f 6c64 6572 202f 2022 7472 6169 6e2e  folder / "train.
+0001a2c0: 7478 7422 0a20 2020 2020 2020 2069 6620  txt".        if 
+0001a2d0: 6e6f 7420 7472 6169 6e5f 6461 7461 7365  not train_datase
+0001a2e0: 742e 6578 6973 7473 2829 3a0a 2020 2020  t.exists():.    
+0001a2f0: 2020 2020 2020 2020 7365 6c66 2e5f 6372          self._cr
+0001a300: 6561 7465 5f64 6174 6173 6574 7328 7061  eate_datasets(pa
+0001a310: 7273 6564 5f64 6174 6173 6574 2c20 6461  rsed_dataset, da
+0001a320: 7461 5f66 6f6c 6465 7229 0a0a 2020 2020  ta_folder)..    
+0001a330: 2020 2020 7375 7065 7228 292e 5f5f 696e      super().__in
+0001a340: 6974 5f5f 280a 2020 2020 2020 2020 2020  it__(.          
+0001a350: 2020 6461 7461 5f66 6f6c 6465 722c 0a20    data_folder,. 
+0001a360: 2020 2020 2020 2020 2020 2063 6f6c 756d             colum
+0001a370: 6e73 2c0a 2020 2020 2020 2020 2020 2020  ns,.            
+0001a380: 636f 6c75 6d6e 5f64 656c 696d 6974 6572  column_delimiter
+0001a390: 3d63 6f6c 756d 6e5f 6465 6c69 6d69 7465  =column_delimite
+0001a3a0: 722c 0a20 2020 2020 2020 2020 2020 2074  r,.            t
+0001a3b0: 7261 696e 5f66 696c 653d 2274 7261 696e  rain_file="train
+0001a3c0: 2e74 7874 222c 0a20 2020 2020 2020 2020  .txt",.         
+0001a3d0: 2020 2064 6576 5f66 696c 653d 2264 6576     dev_file="dev
+0001a3e0: 2e74 7874 222c 0a20 2020 2020 2020 2020  .txt",.         
+0001a3f0: 2020 2074 6573 745f 6669 6c65 3d22 7465     test_file="te
+0001a400: 7374 2e74 7874 222c 0a20 2020 2020 2020  st.txt",.       
+0001a410: 2020 2020 2065 6e63 6f64 696e 673d 2275       encoding="u
+0001a420: 7466 2d38 222c 0a20 2020 2020 2020 2020  tf-8",.         
+0001a430: 2020 2069 6e5f 6d65 6d6f 7279 3d69 6e5f     in_memory=in_
+0001a440: 6d65 6d6f 7279 2c0a 2020 2020 2020 2020  memory,.        
+0001a450: 2020 2020 2a2a 636f 7270 7573 6172 6773      **corpusargs
+0001a460: 2c0a 2020 2020 2020 2020 290a 0a20 2020  ,.        )..   
+0001a470: 2064 6566 205f 636f 6e76 6572 745f 746f   def _convert_to
+0001a480: 5f63 6f6c 756d 6e5f 636f 7270 7573 2873  _column_corpus(s
+0001a490: 656c 662c 2064 6174 615f 6669 6c65 3a20  elf, data_file: 
+0001a4a0: 556e 696f 6e5b 7374 722c 2050 6174 685d  Union[str, Path]
+0001a4b0: 293a 0a20 2020 2020 2020 2077 6974 6820  ):.        with 
+0001a4c0: 6f70 656e 2864 6174 615f 6669 6c65 2c20  open(data_file, 
+0001a4d0: 656e 636f 6469 6e67 3d22 7574 662d 3822  encoding="utf-8"
+0001a4e0: 2920 6173 2066 3a0a 2020 2020 2020 2020  ) as f:.        
+0001a4f0: 2020 2020 6c69 6e65 7320 3d20 662e 7265      lines = f.re
+0001a500: 6164 6c69 6e65 7328 290a 2020 2020 2020  adlines().      
+0001a510: 2020 7769 7468 206f 7065 6e28 6461 7461    with open(data
+0001a520: 5f66 696c 652c 2022 7722 2c20 656e 636f  _file, "w", enco
+0001a530: 6469 6e67 3d22 7574 662d 3822 2920 6173  ding="utf-8") as
+0001a540: 2066 3a0a 2020 2020 2020 2020 2020 2020   f:.            
+0001a550: 7461 675f 626f 6f6c 203d 2046 616c 7365  tag_bool = False
+0001a560: 0a20 2020 2020 2020 2020 2020 206e 6577  .            new
+0001a570: 5f73 656e 7465 6e63 6520 3d20 5472 7565  _sentence = True
+0001a580: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+0001a590: 206c 696e 6520 696e 206c 696e 6573 3a0a   line in lines:.
+0001a5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a5b0: 6c69 6e65 5f73 706c 6974 7320 3d20 7265  line_splits = re
+0001a5c0: 2e73 7562 2872 225c 737b 322c 7d22 2c20  .sub(r"\s{2,}", 
+0001a5d0: 2220 222c 206c 696e 6529 2e73 7472 6970  " ", line).strip
+0001a5e0: 2829 2e73 706c 6974 2822 2022 290a 2020  ().split(" ").  
+0001a5f0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+0001a600: 7220 7375 6273 7472 2069 6e20 6c69 6e65  r substr in line
+0001a610: 5f73 706c 6974 733a 0a20 2020 2020 2020  _splits:.       
+0001a620: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001a630: 7375 6273 7472 203d 3d20 222e 223a 0a20  substr == ".":. 
+0001a640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a650: 2020 2020 2020 2066 2e77 7269 7465 2822         f.write("
+0001a660: 5c6e 2229 0a20 2020 2020 2020 2020 2020  \n").           
+0001a670: 2020 2020 2020 2020 2020 2020 206e 6577               new
+0001a680: 5f73 656e 7465 6e63 6520 3d20 5472 7565  _sentence = True
+0001a690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001a6a0: 2020 2020 2065 6c69 6620 223c 5354 4152       elif "<STAR
+0001a6b0: 543a 2220 696e 2073 7562 7374 723a 0a20  T:" in substr:. 
+0001a6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a6d0: 2020 2020 2020 2074 6167 5f62 6f6f 6c20         tag_bool 
+0001a6e0: 3d20 5472 7565 0a20 2020 2020 2020 2020  = True.         
+0001a6f0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+0001a700: 6167 203d 2073 7562 7374 722e 7374 7269  ag = substr.stri
+0001a710: 7028 223c 5354 4152 543a 2229 2e73 7472  p("<START:").str
+0001a720: 6970 2822 3e22 290a 2020 2020 2020 2020  ip(">").        
+0001a730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a740: 6966 2022 6c6f 6322 2069 6e20 7461 673a  if "loc" in tag:
+0001a750: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001a760: 2020 2020 2020 2020 2020 2020 2074 6167               tag
+0001a770: 5f49 4f42 203d 2022 2d4c 4f43 220a 2020  _IOB = "-LOC".  
+0001a780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a790: 2020 2020 2020 656c 6966 2022 7065 7222        elif "per"
+0001a7a0: 2069 6e20 7461 673a 0a20 2020 2020 2020   in tag:.       
+0001a7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a7c0: 2020 2020 2074 6167 5f49 4f42 203d 2022       tag_IOB = "
+0001a7d0: 2d50 4552 220a 2020 2020 2020 2020 2020  -PER".          
+0001a7e0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0001a7f0: 6966 2022 6f72 6722 2069 6e20 7461 673a  if "org" in tag:
+0001a800: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001a810: 2020 2020 2020 2020 2020 2020 2074 6167               tag
+0001a820: 5f49 4f42 203d 2022 2d4f 5247 220a 2020  _IOB = "-ORG".  
+0001a830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a840: 2020 2020 2020 656c 6966 2022 6d69 7363        elif "misc
+0001a850: 2220 696e 2074 6167 3a0a 2020 2020 2020  " in tag:.      
+0001a860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a870: 2020 2020 2020 7461 675f 494f 4220 3d20        tag_IOB = 
+0001a880: 222d 4d49 5343 220a 2020 2020 2020 2020  "-MISC".        
+0001a890: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+0001a8a0: 2022 3c45 4e44 3e22 2069 6e20 7375 6273   "<END>" in subs
+0001a8b0: 7472 3a0a 2020 2020 2020 2020 2020 2020  tr:.            
+0001a8c0: 2020 2020 2020 2020 2020 2020 7461 675f              tag_
+0001a8d0: 626f 6f6c 203d 2046 616c 7365 0a20 2020  bool = False.   
+0001a8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a8f0: 2020 2020 206e 6577 5f73 656e 7465 6e63       new_sentenc
+0001a900: 6520 3d20 5472 7565 0a20 2020 2020 2020  e = True.       
+0001a910: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0001a920: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+0001a930: 2020 2020 2020 2020 2020 2069 6620 7461             if ta
+0001a940: 675f 626f 6f6c 3a0a 2020 2020 2020 2020  g_bool:.        
+0001a950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a960: 2020 2020 6966 206e 6577 5f73 656e 7465      if new_sente
+0001a970: 6e63 6520 6973 2054 7275 653a 0a20 2020  nce is True:.   
+0001a980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a990: 2020 2020 2020 2020 2020 2020 2073 7461               sta
+0001a9a0: 7274 203d 2022 4222 0a20 2020 2020 2020  rt = "B".       
+0001a9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a9c0: 2020 2020 2020 2020 206e 6577 5f73 656e           new_sen
+0001a9d0: 7465 6e63 6520 3d20 4661 6c73 650a 2020  tence = False.  
+0001a9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a9f0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+0001aa00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aa10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aa20: 7374 6172 7420 3d20 2249 220a 2020 2020  start = "I".    
+0001aa30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aa40: 2020 2020 2020 2020 662e 7772 6974 6528          f.write(
+0001aa50: 7375 6273 7472 2e73 7472 6970 2822 2022  substr.strip(" "
+0001aa60: 2920 2b20 2220 2220 2b20 7374 6172 7420  ) + " " + start 
+0001aa70: 2b20 7461 675f 494f 4220 2b20 225c 6e22  + tag_IOB + "\n"
+0001aa80: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001aa90: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+0001aaa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aab0: 2020 2020 2020 2020 2020 2020 662e 7772              f.wr
+0001aac0: 6974 6528 7375 6273 7472 2e73 7472 6970  ite(substr.strip
+0001aad0: 2822 2022 2920 2b20 2220 2220 2b20 224f  (" ") + " " + "O
+0001aae0: 2220 2b20 225c 6e22 290a 0a20 2020 2064  " + "\n")..    d
+0001aaf0: 6566 205f 6372 6561 7465 5f64 6174 6173  ef _create_datas
+0001ab00: 6574 7328 7365 6c66 2c20 6461 7461 5f66  ets(self, data_f
+0001ab10: 696c 653a 2055 6e69 6f6e 5b73 7472 2c20  ile: Union[str, 
+0001ab20: 5061 7468 5d2c 2064 6174 615f 666f 6c64  Path], data_fold
+0001ab30: 6572 3a20 5061 7468 293a 0a20 2020 2020  er: Path):.     
+0001ab40: 2020 2077 6974 6820 6f70 656e 2864 6174     with open(dat
+0001ab50: 615f 6669 6c65 2920 6173 2066 696c 653a  a_file) as file:
+0001ab60: 0a20 2020 2020 2020 2020 2020 206e 756d  .            num
+0001ab70: 5f6c 696e 6573 203d 206c 656e 2866 696c  _lines = len(fil
+0001ab80: 652e 7265 6164 6c69 6e65 7328 2929 0a20  e.readlines()). 
+0001ab90: 2020 2020 2020 2020 2020 2066 696c 652e             file.
+0001aba0: 7365 656b 2830 290a 0a20 2020 2020 2020  seek(0)..       
+0001abb0: 2020 2020 2074 7261 696e 5f6c 656e 203d       train_len =
+0001abc0: 2072 6f75 6e64 286e 756d 5f6c 696e 6573   round(num_lines
+0001abd0: 202a 2030 2e38 290a 2020 2020 2020 2020   * 0.8).        
+0001abe0: 2020 2020 7465 7374 5f6c 656e 203d 2072      test_len = r
+0001abf0: 6f75 6e64 286e 756d 5f6c 696e 6573 202a  ound(num_lines *
+0001ac00: 2030 2e31 290a 0a20 2020 2020 2020 2020   0.1)..         
+0001ac10: 2020 2077 6974 6820 2864 6174 615f 666f     with (data_fo
+0001ac20: 6c64 6572 202f 2022 7472 6169 6e2e 7478  lder / "train.tx
+0001ac30: 7422 292e 6f70 656e 2822 7722 2c20 656e  t").open("w", en
+0001ac40: 636f 6469 6e67 3d22 7574 662d 3822 2920  coding="utf-8") 
+0001ac50: 6173 2074 7261 696e 2c20 2864 6174 615f  as train, (data_
+0001ac60: 666f 6c64 6572 202f 2022 7465 7374 2e74  folder / "test.t
+0001ac70: 7874 2229 2e6f 7065 6e28 0a20 2020 2020  xt").open(.     
+0001ac80: 2020 2020 2020 2020 2020 2022 7722 2c20             "w", 
+0001ac90: 656e 636f 6469 6e67 3d22 7574 662d 3822  encoding="utf-8"
+0001aca0: 0a20 2020 2020 2020 2020 2020 2029 2061  .            ) a
+0001acb0: 7320 7465 7374 2c20 2864 6174 615f 666f  s test, (data_fo
+0001acc0: 6c64 6572 202f 2022 6465 762e 7478 7422  lder / "dev.txt"
+0001acd0: 292e 6f70 656e 2822 7722 2c20 656e 636f  ).open("w", enco
+0001ace0: 6469 6e67 3d22 7574 662d 3822 2920 6173  ding="utf-8") as
+0001acf0: 2064 6576 3a0a 2020 2020 2020 2020 2020   dev:.          
+0001ad00: 2020 2020 2020 666f 7220 6b2c 206c 696e        for k, lin
+0001ad10: 6520 696e 2065 6e75 6d65 7261 7465 2866  e in enumerate(f
+0001ad20: 696c 652e 7265 6164 6c69 6e65 7328 292c  ile.readlines(),
+0001ad30: 2073 7461 7274 3d31 293a 0a20 2020 2020   start=1):.     
+0001ad40: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0001ad50: 6620 6b20 3c3d 2074 7261 696e 5f6c 656e  f k <= train_len
+0001ad60: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001ad70: 2020 2020 2020 2020 2020 7472 6169 6e2e            train.
+0001ad80: 7772 6974 6528 6c69 6e65 290a 2020 2020  write(line).    
+0001ad90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ada0: 656c 6966 2074 7261 696e 5f6c 656e 203c  elif train_len <
+0001adb0: 206b 203c 3d20 2874 7261 696e 5f6c 656e   k <= (train_len
+0001adc0: 202b 2074 6573 745f 6c65 6e29 3a0a 2020   + test_len):.  
+0001add0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ade0: 2020 2020 2020 7465 7374 2e77 7269 7465        test.write
+0001adf0: 286c 696e 6529 0a20 2020 2020 2020 2020  (line).         
+0001ae00: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+0001ae10: 2874 7261 696e 5f6c 656e 202b 2074 6573  (train_len + tes
+0001ae20: 745f 6c65 6e29 203c 206b 203c 3d20 6e75  t_len) < k <= nu
+0001ae30: 6d5f 6c69 6e65 733a 0a20 2020 2020 2020  m_lines:.       
+0001ae40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ae50: 2064 6576 2e77 7269 7465 286c 696e 6529   dev.write(line)
+0001ae60: 0a0a 0a63 6c61 7373 204e 4552 5f48 554e  ...class NER_HUN
+0001ae70: 4741 5249 414e 2843 6f6c 756d 6e43 6f72  GARIAN(ColumnCor
+0001ae80: 7075 7329 3a0a 2020 2020 6465 6620 5f5f  pus):.    def __
+0001ae90: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
+0001aea0: 7365 6c66 2c0a 2020 2020 2020 2020 6261  self,.        ba
+0001aeb0: 7365 5f70 6174 683a 204f 7074 696f 6e61  se_path: Optiona
+0001aec0: 6c5b 556e 696f 6e5b 7374 722c 2050 6174  l[Union[str, Pat
+0001aed0: 685d 5d20 3d20 4e6f 6e65 2c0a 2020 2020  h]] = None,.    
+0001aee0: 2020 2020 696e 5f6d 656d 6f72 793a 2062      in_memory: b
+0001aef0: 6f6f 6c20 3d20 5472 7565 2c0a 2020 2020  ool = True,.    
+0001af00: 2020 2020 646f 6375 6d65 6e74 5f61 735f      document_as_
+0001af10: 7365 7175 656e 6365 3a20 626f 6f6c 203d  sequence: bool =
+0001af20: 2046 616c 7365 2c0a 2020 2020 2020 2020   False,.        
+0001af30: 2a2a 636f 7270 7573 6172 6773 2c0a 2020  **corpusargs,.  
+0001af40: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+0001af50: 2020 2020 2022 2222 496e 6974 6961 6c69       """Initiali
+0001af60: 7a65 2074 6865 204e 4552 2042 7573 696e  ze the NER Busin
+0001af70: 6573 7320 636f 7270 7573 2066 6f72 2048  ess corpus for H
+0001af80: 756e 6761 7269 616e 2e0a 0a20 2020 2020  ungarian...     
+0001af90: 2020 2054 6865 2066 6972 7374 2074 696d     The first tim
+0001afa0: 6520 796f 7520 6361 6c6c 2074 6869 7320  e you call this 
+0001afb0: 636f 6e73 7472 7563 746f 7220 6974 2077  constructor it w
+0001afc0: 696c 6c20 6175 746f 6d61 7469 6361 6c6c  ill automaticall
+0001afd0: 7920 646f 776e 6c6f 6164 2074 6865 2064  y download the d
+0001afe0: 6174 6173 6574 2e0a 2020 2020 2020 2020  ataset..        
+0001aff0: 3a70 6172 616d 2062 6173 655f 7061 7468  :param base_path
+0001b000: 3a20 4465 6661 756c 7420 6973 204e 6f6e  : Default is Non
+0001b010: 652c 206d 6561 6e69 6e67 2074 6861 7420  e, meaning that 
+0001b020: 636f 7270 7573 2067 6574 7320 6175 746f  corpus gets auto
+0001b030: 2d64 6f77 6e6c 6f61 6465 6420 616e 6420  -downloaded and 
+0001b040: 6c6f 6164 6564 2e20 596f 7520 6361 6e20  loaded. You can 
+0001b050: 6f76 6572 7269 6465 2074 6869 730a 2020  override this.  
+0001b060: 2020 2020 2020 746f 2070 6f69 6e74 2074        to point t
+0001b070: 6f20 6120 6469 6666 6572 656e 7420 666f  o a different fo
+0001b080: 6c64 6572 2062 7574 2074 7970 6963 616c  lder but typical
+0001b090: 6c79 2074 6869 7320 7368 6f75 6c64 206e  ly this should n
+0001b0a0: 6f74 2062 6520 6e65 6365 7373 6172 792e  ot be necessary.
+0001b0b0: 0a20 2020 2020 2020 2050 4f53 2074 6167  .        POS tag
+0001b0c0: 7320 696e 7374 6561 640a 2020 2020 2020  s instead.      
+0001b0d0: 2020 3a70 6172 616d 2069 6e5f 6d65 6d6f    :param in_memo
+0001b0e0: 7279 3a20 4966 2054 7275 652c 206b 6565  ry: If True, kee
+0001b0f0: 7073 2064 6174 6173 6574 2069 6e20 6d65  ps dataset in me
+0001b100: 6d6f 7279 2067 6976 696e 6720 7370 6565  mory giving spee
+0001b110: 6475 7073 2069 6e20 7472 6169 6e69 6e67  dups in training
+0001b120: 2e0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
+0001b130: 2064 6f63 756d 656e 745f 6173 5f73 6571   document_as_seq
+0001b140: 7565 6e63 653a 2049 6620 5472 7565 2c20  uence: If True, 
+0001b150: 616c 6c20 7365 6e74 656e 6365 7320 6f66  all sentences of
+0001b160: 2061 2064 6f63 756d 656e 7420 6172 6520   a document are 
+0001b170: 7265 6164 2069 6e74 6f20 6120 7369 6e67  read into a sing
+0001b180: 6c65 2053 656e 7465 6e63 6520 6f62 6a65  le Sentence obje
+0001b190: 6374 0a20 2020 2020 2020 2022 2222 0a20  ct.        """. 
+0001b1a0: 2020 2020 2020 2062 6173 655f 7061 7468         base_path
+0001b1b0: 203d 206b 6f6c 6962 7269 2e63 6163 6865   = kolibri.cache
+0001b1c0: 5f72 6f6f 7420 2f20 2264 6174 6173 6574  _root / "dataset
+0001b1d0: 7322 2069 6620 6e6f 7420 6261 7365 5f70  s" if not base_p
+0001b1e0: 6174 6820 656c 7365 2050 6174 6828 6261  ath else Path(ba
+0001b1f0: 7365 5f70 6174 6829 0a0a 2020 2020 2020  se_path)..      
+0001b200: 2020 2320 636f 6c75 6d6e 2066 6f72 6d61    # column forma
+0001b210: 740a 2020 2020 2020 2020 636f 6c75 6d6e  t.        column
+0001b220: 7320 3d20 7b30 3a20 2274 6578 7422 2c20  s = {0: "text", 
+0001b230: 313a 2022 6e65 7222 7d0a 0a20 2020 2020  1: "ner"}..     
+0001b240: 2020 2023 2074 6869 7320 6461 7461 7365     # this datase
+0001b250: 7420 6e61 6d65 0a20 2020 2020 2020 2064  t name.        d
+0001b260: 6174 6173 6574 5f6e 616d 6520 3d20 7365  ataset_name = se
+0001b270: 6c66 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e  lf.__class__.__n
+0001b280: 616d 655f 5f2e 6c6f 7765 7228 290a 0a20  ame__.lower().. 
+0001b290: 2020 2020 2020 2064 6174 615f 666f 6c64         data_fold
+0001b2a0: 6572 203d 2062 6173 655f 7061 7468 202f  er = base_path /
+0001b2b0: 2064 6174 6173 6574 5f6e 616d 650a 0a20   dataset_name.. 
+0001b2c0: 2020 2020 2020 2023 2049 6620 7468 6520         # If the 
+0001b2d0: 6578 7472 6163 7465 6420 636f 7270 7573  extracted corpus
+0001b2e0: 2066 696c 6520 6973 206e 6f74 2079 6574   file is not yet
+0001b2f0: 2070 7265 7365 6e74 2069 6e20 6469 720a   present in dir.
+0001b300: 2020 2020 2020 2020 6966 206e 6f74 206f          if not o
+0001b310: 732e 7061 7468 2e69 7366 696c 6528 6461  s.path.isfile(da
+0001b320: 7461 5f66 6f6c 6465 7220 2f20 2268 756e  ta_folder / "hun
+0001b330: 5f6e 6572 5f63 6f72 7075 732e 7478 7422  _ner_corpus.txt"
+0001b340: 293a 0a20 2020 2020 2020 2020 2020 2023  ):.            #
+0001b350: 2064 6f77 6e6c 6f61 6420 7a69 7020 6966   download zip if
+0001b360: 206e 6563 6573 7361 7279 0a20 2020 2020   necessary.     
+0001b370: 2020 2020 2020 2068 756e 5f6e 6572 5f70         hun_ner_p
+0001b380: 6174 6820 3d20 2268 7474 7073 3a2f 2f72  ath = "https://r
+0001b390: 6761 692e 7365 642e 6875 2f73 6974 6573  gai.sed.hu/sites
+0001b3a0: 2f72 6761 692e 7365 642e 6875 2f66 696c  /rgai.sed.hu/fil
+0001b3b0: 6573 2f62 7573 696e 6573 735f 4e45 522e  es/business_NER.
+0001b3c0: 7a69 7022 0a20 2020 2020 2020 2020 2020  zip".           
+0001b3d0: 2070 6174 685f 746f 5f7a 6970 7065 645f   path_to_zipped_
+0001b3e0: 636f 7270 7573 203d 2063 6163 6865 645f  corpus = cached_
+0001b3f0: 7061 7468 2868 756e 5f6e 6572 5f70 6174  path(hun_ner_pat
+0001b400: 682c 2050 6174 6828 2264 6174 6173 6574  h, Path("dataset
+0001b410: 7322 2920 2f20 6461 7461 7365 745f 6e61  s") / dataset_na
+0001b420: 6d65 290a 2020 2020 2020 2020 2020 2020  me).            
+0001b430: 2320 6578 7472 6163 7465 6420 636f 7270  # extracted corp
+0001b440: 7573 2069 7320 6e6f 7420 7072 6573 656e  us is not presen
+0001b450: 7420 2c20 736f 2075 6e70 6163 6b69 6e67  t , so unpacking
+0001b460: 2069 742e 0a20 2020 2020 2020 2020 2020   it..           
+0001b470: 2075 6e70 6163 6b5f 6669 6c65 2870 6174   unpack_file(pat
+0001b480: 685f 746f 5f7a 6970 7065 645f 636f 7270  h_to_zipped_corp
+0001b490: 7573 2c20 6461 7461 5f66 6f6c 6465 722c  us, data_folder,
+0001b4a0: 206d 6f64 653d 227a 6970 222c 206b 6565   mode="zip", kee
+0001b4b0: 703d 5472 7565 290a 0a20 2020 2020 2020  p=True)..       
+0001b4c0: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
+0001b4d0: 5f28 0a20 2020 2020 2020 2020 2020 2064  _(.            d
+0001b4e0: 6174 615f 666f 6c64 6572 2c0a 2020 2020  ata_folder,.    
+0001b4f0: 2020 2020 2020 2020 636f 6c75 6d6e 732c          columns,
+0001b500: 0a20 2020 2020 2020 2020 2020 2074 7261  .            tra
+0001b510: 696e 5f66 696c 653d 2268 756e 5f6e 6572  in_file="hun_ner
+0001b520: 5f63 6f72 7075 732e 7478 7422 2c0a 2020  _corpus.txt",.  
+0001b530: 2020 2020 2020 2020 2020 636f 6c75 6d6e            column
+0001b540: 5f64 656c 696d 6974 6572 3d22 5c74 222c  _delimiter="\t",
+0001b550: 0a20 2020 2020 2020 2020 2020 2065 6e63  .            enc
+0001b560: 6f64 696e 673d 226c 6174 696e 2d31 222c  oding="latin-1",
+0001b570: 0a20 2020 2020 2020 2020 2020 2069 6e5f  .            in_
+0001b580: 6d65 6d6f 7279 3d69 6e5f 6d65 6d6f 7279  memory=in_memory
+0001b590: 2c0a 2020 2020 2020 2020 2020 2020 6c61  ,.            la
+0001b5a0: 6265 6c5f 6e61 6d65 5f6d 6170 3d7b 2230  bel_name_map={"0
+0001b5b0: 223a 2022 4f22 7d2c 0a20 2020 2020 2020  ": "O"},.       
+0001b5c0: 2020 2020 2064 6f63 756d 656e 745f 7365       document_se
+0001b5d0: 7061 7261 746f 725f 746f 6b65 6e3d 4e6f  parator_token=No
+0001b5e0: 6e65 2069 6620 6e6f 7420 646f 6375 6d65  ne if not docume
+0001b5f0: 6e74 5f61 735f 7365 7175 656e 6365 2065  nt_as_sequence e
+0001b600: 6c73 6520 222d 444f 4353 5441 5254 2d22  lse "-DOCSTART-"
+0001b610: 2c0a 2020 2020 2020 2020 2020 2020 2a2a  ,.            **
+0001b620: 636f 7270 7573 6172 6773 2c0a 2020 2020  corpusargs,.    
+0001b630: 2020 2020 290a 0a0a 636c 6173 7320 4e45      )...class NE
+0001b640: 525f 4943 454c 414e 4449 4328 436f 6c75  R_ICELANDIC(Colu
+0001b650: 6d6e 436f 7270 7573 293a 0a20 2020 2064  mnCorpus):.    d
+0001b660: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
+0001b670: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
+0001b680: 2020 2062 6173 655f 7061 7468 3a20 4f70     base_path: Op
+0001b690: 7469 6f6e 616c 5b55 6e69 6f6e 5b73 7472  tional[Union[str
+0001b6a0: 2c20 5061 7468 5d5d 203d 204e 6f6e 652c  , Path]] = None,
+0001b6b0: 0a20 2020 2020 2020 2069 6e5f 6d65 6d6f  .        in_memo
+0001b6c0: 7279 3a20 626f 6f6c 203d 2054 7275 652c  ry: bool = True,
+0001b6d0: 0a20 2020 2020 2020 202a 2a63 6f72 7075  .        **corpu
+0001b6e0: 7361 7267 732c 0a20 2020 2029 202d 3e20  sargs,.    ) -> 
+0001b6f0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2222  None:.        ""
+0001b700: 2249 6e69 7469 616c 697a 6520 7468 6520  "Initialize the 
+0001b710: 4943 454c 414e 4449 435f 4e45 5220 636f  ICELANDIC_NER co
+0001b720: 7270 7573 2e0a 0a20 2020 2020 2020 2054  rpus...        T
+0001b730: 6865 2066 6972 7374 2074 696d 6520 796f  he first time yo
+0001b740: 7520 6361 6c6c 2074 6869 7320 636f 6e73  u call this cons
+0001b750: 7472 7563 746f 7220 6974 2077 696c 6c20  tructor it will 
+0001b760: 6175 746f 6d61 7469 6361 6c6c 7920 646f  automatically do
+0001b770: 776e 6c6f 6164 2074 6865 2064 6174 6173  wnload the datas
+0001b780: 6574 2e0a 2020 2020 2020 2020 3a70 6172  et..        :par
+0001b790: 616d 2062 6173 655f 7061 7468 3a20 4465  am base_path: De
+0001b7a0: 6661 756c 7420 6973 204e 6f6e 652c 206d  fault is None, m
+0001b7b0: 6561 6e69 6e67 2074 6861 7420 636f 7270  eaning that corp
+0001b7c0: 7573 2067 6574 7320 6175 746f 2d64 6f77  us gets auto-dow
+0001b7d0: 6e6c 6f61 6465 6420 616e 6420 6c6f 6164  nloaded and load
+0001b7e0: 6564 2e20 596f 7520 6361 6e20 6f76 6572  ed. You can over
+0001b7f0: 7269 6465 2074 6869 730a 2020 2020 2020  ride this.      
+0001b800: 2020 746f 2070 6f69 6e74 2074 6f20 6120    to point to a 
+0001b810: 6469 6666 6572 656e 7420 666f 6c64 6572  different folder
+0001b820: 2062 7574 2074 7970 6963 616c 6c79 2074   but typically t
+0001b830: 6869 7320 7368 6f75 6c64 206e 6f74 2062  his should not b
+0001b840: 6520 6e65 6365 7373 6172 792e 0a20 2020  e necessary..   
+0001b850: 2020 2020 2050 4f53 2074 6167 7320 696e       POS tags in
+0001b860: 7374 6561 640a 2020 2020 2020 2020 3a70  stead.        :p
+0001b870: 6172 616d 2069 6e5f 6d65 6d6f 7279 3a20  aram in_memory: 
+0001b880: 4966 2054 7275 652c 206b 6565 7073 2064  If True, keeps d
+0001b890: 6174 6173 6574 2069 6e20 6d65 6d6f 7279  ataset in memory
+0001b8a0: 2067 6976 696e 6720 7370 6565 6475 7073   giving speedups
+0001b8b0: 2069 6e20 7472 6169 6e69 6e67 2e0a 2020   in training..  
+0001b8c0: 2020 2020 2020 3a70 6172 616d 2064 6f63        :param doc
+0001b8d0: 756d 656e 745f 6173 5f73 6571 7565 6e63  ument_as_sequenc
+0001b8e0: 653a 2049 6620 5472 7565 2c20 616c 6c20  e: If True, all 
+0001b8f0: 7365 6e74 656e 6365 7320 6f66 2061 2064  sentences of a d
+0001b900: 6f63 756d 656e 7420 6172 6520 7265 6164  ocument are read
+0001b910: 2069 6e74 6f20 6120 7369 6e67 6c65 2053   into a single S
+0001b920: 656e 7465 6e63 6520 6f62 6a65 6374 0a20  entence object. 
+0001b930: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0001b940: 2020 2062 6173 655f 7061 7468 203d 206b     base_path = k
+0001b950: 6f6c 6962 7269 2e63 6163 6865 5f72 6f6f  olibri.cache_roo
+0001b960: 7420 2f20 2264 6174 6173 6574 7322 2069  t / "datasets" i
+0001b970: 6620 6e6f 7420 6261 7365 5f70 6174 6820  f not base_path 
+0001b980: 656c 7365 2050 6174 6828 6261 7365 5f70  else Path(base_p
+0001b990: 6174 6829 0a0a 2020 2020 2020 2020 2320  ath)..        # 
+0001b9a0: 636f 6c75 6d6e 2066 6f72 6d61 740a 2020  column format.  
+0001b9b0: 2020 2020 2020 636f 6c75 6d6e 7320 3d20        columns = 
+0001b9c0: 7b30 3a20 2274 6578 7422 2c20 313a 2022  {0: "text", 1: "
+0001b9d0: 6e65 7222 7d0a 0a20 2020 2020 2020 2023  ner"}..        #
+0001b9e0: 2074 6869 7320 6461 7461 7365 7420 6e61   this dataset na
+0001b9f0: 6d65 0a20 2020 2020 2020 2064 6174 6173  me.        datas
+0001ba00: 6574 5f6e 616d 6520 3d20 7365 6c66 2e5f  et_name = self._
+0001ba10: 5f63 6c61 7373 5f5f 2e5f 5f6e 616d 655f  _class__.__name_
+0001ba20: 5f2e 6c6f 7765 7228 290a 0a20 2020 2020  _.lower()..     
+0001ba30: 2020 2064 6174 615f 666f 6c64 6572 203d     data_folder =
+0001ba40: 2062 6173 655f 7061 7468 202f 2064 6174   base_path / dat
+0001ba50: 6173 6574 5f6e 616d 650a 0a20 2020 2020  aset_name..     
+0001ba60: 2020 2069 6620 6e6f 7420 6f73 2e70 6174     if not os.pat
+0001ba70: 682e 6973 6669 6c65 2864 6174 615f 666f  h.isfile(data_fo
+0001ba80: 6c64 6572 202f 2022 6963 656c 616e 6469  lder / "icelandi
+0001ba90: 635f 6e65 722e 7478 7422 293a 0a20 2020  c_ner.txt"):.   
+0001baa0: 2020 2020 2020 2020 2023 2064 6f77 6e6c           # downl
+0001bab0: 6f61 6420 7a69 700a 2020 2020 2020 2020  oad zip.        
+0001bac0: 2020 2020 6963 656c 616e 6469 635f 6e65      icelandic_ne
+0001bad0: 7220 3d20 2268 7474 7073 3a2f 2f72 6570  r = "https://rep
+0001bae0: 6f73 6974 6f72 792e 636c 6172 696e 2e69  ository.clarin.i
+0001baf0: 732f 7265 706f 7369 746f 7279 2f78 6d6c  s/repository/xml
+0001bb00: 7569 2f68 616e 646c 652f 3230 2e35 3030  ui/handle/20.500
+0001bb10: 2e31 3235 3337 2f34 322f 616c 6c7a 6970  .12537/42/allzip
+0001bb20: 220a 2020 2020 2020 2020 2020 2020 6963  ".            ic
+0001bb30: 656c 616e 6469 635f 6e65 725f 7061 7468  elandic_ner_path
+0001bb40: 203d 2063 6163 6865 645f 7061 7468 2869   = cached_path(i
+0001bb50: 6365 6c61 6e64 6963 5f6e 6572 2c20 5061  celandic_ner, Pa
+0001bb60: 7468 2822 6461 7461 7365 7473 2229 202f  th("datasets") /
+0001bb70: 2064 6174 6173 6574 5f6e 616d 6529 0a0a   dataset_name)..
+0001bb80: 2020 2020 2020 2020 2020 2020 2320 756e              # un
+0001bb90: 7061 636b 696e 6720 7468 6520 7a69 700a  packing the zip.
+0001bba0: 2020 2020 2020 2020 2020 2020 756e 7061              unpa
+0001bbb0: 636b 5f66 696c 6528 6963 656c 616e 6469  ck_file(icelandi
+0001bbc0: 635f 6e65 725f 7061 7468 2c20 6461 7461  c_ner_path, data
+0001bbd0: 5f66 6f6c 6465 722c 206d 6f64 653d 227a  _folder, mode="z
+0001bbe0: 6970 222c 206b 6565 703d 5472 7565 290a  ip", keep=True).
+0001bbf0: 2020 2020 2020 2020 6f75 7470 7574 6669          outputfi
+0001bc00: 6c65 203d 206f 732e 7061 7468 2e61 6273  le = os.path.abs
+0001bc10: 7061 7468 2864 6174 615f 666f 6c64 6572  path(data_folder
+0001bc20: 290a 0a20 2020 2020 2020 2023 206d 6572  )..        # mer
+0001bc30: 6765 2074 6865 2066 696c 6573 2069 6e20  ge the files in 
+0001bc40: 6f6e 6520 6173 2074 6865 207a 6970 2069  one as the zip i
+0001bc50: 7320 636f 6e74 6169 6e69 6e67 206d 756c  s containing mul
+0001bc60: 7469 706c 6573 2066 696c 6573 0a0a 2020  tiples files..  
+0001bc70: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
+0001bc80: 6f75 7470 7574 6669 6c65 202f 2064 6174  outputfile / dat
+0001bc90: 615f 666f 6c64 6572 202f 2022 6963 656c  a_folder / "icel
+0001bca0: 616e 6469 635f 6e65 722e 7478 7422 2c20  andic_ner.txt", 
+0001bcb0: 2277 6222 2920 6173 206f 7574 6669 6c65  "wb") as outfile
+0001bcc0: 3a0a 2020 2020 2020 2020 2020 2020 666f  :.            fo
+0001bcd0: 7220 6669 6c65 7320 696e 206f 732e 7761  r files in os.wa
+0001bce0: 6c6b 286f 7574 7075 7466 696c 6520 2f20  lk(outputfile / 
+0001bcf0: 6461 7461 5f66 6f6c 6465 7229 3a0a 2020  data_folder):.  
+0001bd00: 2020 2020 2020 2020 2020 2020 2020 6620                f 
+0001bd10: 3d20 6669 6c65 735b 325d 0a0a 2020 2020  = files[2]..    
+0001bd20: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+0001bd30: 6920 696e 2072 616e 6765 286c 656e 2866  i in range(len(f
+0001bd40: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+0001bd50: 2020 2020 2020 2020 6966 2066 5b69 5d2e          if f[i].
+0001bd60: 656e 6473 7769 7468 2822 2e74 7874 2229  endswith(".txt")
+0001bd70: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001bd80: 2020 2020 2020 2020 2020 7769 7468 206f            with o
+0001bd90: 7065 6e28 6f75 7470 7574 6669 6c65 202f  pen(outputfile /
+0001bda0: 2064 6174 615f 666f 6c64 6572 202f 2066   data_folder / f
+0001bdb0: 5b69 5d2c 2022 7262 2229 2061 7320 696e  [i], "rb") as in
+0001bdc0: 6669 6c65 3a0a 2020 2020 2020 2020 2020  file:.          
+0001bdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bde0: 2020 636f 6e74 656e 7473 203d 2069 6e66    contents = inf
+0001bdf0: 696c 652e 7265 6164 2829 0a20 2020 2020  ile.read().     
+0001be00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001be10: 2020 206f 7574 6669 6c65 2e77 7269 7465     outfile.write
+0001be20: 2863 6f6e 7465 6e74 7329 0a0a 2020 2020  (contents)..    
+0001be30: 2020 2020 7375 7065 7228 292e 5f5f 696e      super().__in
+0001be40: 6974 5f5f 280a 2020 2020 2020 2020 2020  it__(.          
+0001be50: 2020 6461 7461 5f66 6f6c 6465 722c 0a20    data_folder,. 
+0001be60: 2020 2020 2020 2020 2020 2063 6f6c 756d             colum
+0001be70: 6e73 2c0a 2020 2020 2020 2020 2020 2020  ns,.            
+0001be80: 7472 6169 6e5f 6669 6c65 3d22 6963 656c  train_file="icel
+0001be90: 616e 6469 635f 6e65 722e 7478 7422 2c0a  andic_ner.txt",.
+0001bea0: 2020 2020 2020 2020 2020 2020 696e 5f6d              in_m
+0001beb0: 656d 6f72 793d 696e 5f6d 656d 6f72 792c  emory=in_memory,
+0001bec0: 0a20 2020 2020 2020 2020 2020 202a 2a63  .            **c
+0001bed0: 6f72 7075 7361 7267 732c 0a20 2020 2020  orpusargs,.     
+0001bee0: 2020 2029 0a0a 0a63 6c61 7373 204e 4552     )...class NER
+0001bef0: 5f4a 4150 414e 4553 4528 436f 6c75 6d6e  _JAPANESE(Column
+0001bf00: 436f 7270 7573 293a 0a20 2020 2064 6566  Corpus):.    def
+0001bf10: 205f 5f69 6e69 745f 5f28 0a20 2020 2020   __init__(.     
+0001bf20: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
+0001bf30: 2062 6173 655f 7061 7468 3a20 4f70 7469   base_path: Opti
+0001bf40: 6f6e 616c 5b55 6e69 6f6e 5b73 7472 2c20  onal[Union[str, 
+0001bf50: 5061 7468 5d5d 203d 204e 6f6e 652c 0a20  Path]] = None,. 
+0001bf60: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
+0001bf70: 3a20 626f 6f6c 203d 2054 7275 652c 0a20  : bool = True,. 
+0001bf80: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
+0001bf90: 7267 732c 0a20 2020 2029 202d 3e20 4e6f  rgs,.    ) -> No
+0001bfa0: 6e65 3a0a 2020 2020 2020 2020 2222 2249  ne:.        """I
+0001bfb0: 6e69 7469 616c 697a 6520 7468 6520 4869  nitialize the Hi
+0001bfc0: 726f 6e73 616e 2f49 4f42 3220 636f 7270  ronsan/IOB2 corp
+0001bfd0: 7573 2066 6f72 204a 6170 616e 6573 652e  us for Japanese.
+0001bfe0: 0a0a 2020 2020 2020 2020 5468 6520 6669  ..        The fi
+0001bff0: 7273 7420 7469 6d65 2079 6f75 2063 616c  rst time you cal
+0001c000: 6c20 7468 6973 2063 6f6e 7374 7275 6374  l this construct
+0001c010: 6f72 2069 7420 7769 6c6c 2061 7574 6f6d  or it will autom
+0001c020: 6174 6963 616c 6c79 2064 6f77 6e6c 6f61  atically downloa
+0001c030: 6420 7468 6520 6461 7461 7365 742e 0a0a  d the dataset...
+0001c040: 2020 2020 2020 2020 4172 6773 3a0a 2020          Args:.  
+0001c050: 2020 2020 2020 2020 2020 6261 7365 5f70            base_p
+0001c060: 6174 683a 2044 6566 6175 6c74 2069 7320  ath: Default is 
+0001c070: 4e6f 6e65 2c20 6d65 616e 696e 6720 7468  None, meaning th
+0001c080: 6174 2063 6f72 7075 7320 6765 7473 2061  at corpus gets a
+0001c090: 7574 6f2d 646f 776e 6c6f 6164 6564 2061  uto-downloaded a
+0001c0a0: 6e64 206c 6f61 6465 642e 2059 6f75 2063  nd loaded. You c
+0001c0b0: 616e 206f 7665 7272 6964 6520 7468 6973  an override this
+0001c0c0: 2074 6f20 706f 696e 7420 746f 2061 2064   to point to a d
+0001c0d0: 6966 6665 7265 6e74 2066 6f6c 6465 7220  ifferent folder 
+0001c0e0: 6275 7420 7479 7069 6361 6c6c 7920 7468  but typically th
+0001c0f0: 6973 2073 686f 756c 6420 6e6f 7420 6265  is should not be
+0001c100: 206e 6563 6573 7361 7279 2e0a 2020 2020   necessary..    
+0001c110: 2020 2020 2020 2020 696e 5f6d 656d 6f72          in_memor
+0001c120: 793a 2049 6620 5472 7565 2c20 6b65 6570  y: If True, keep
+0001c130: 7320 6461 7461 7365 7420 696e 206d 656d  s dataset in mem
+0001c140: 6f72 7920 6769 7669 6e67 2073 7065 6564  ory giving speed
+0001c150: 7570 7320 696e 2074 7261 696e 696e 672e  ups in training.
+0001c160: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0001c170: 2020 2020 2062 6173 655f 7061 7468 203d       base_path =
+0001c180: 206b 6f6c 6962 7269 2e63 6163 6865 5f72   kolibri.cache_r
+0001c190: 6f6f 7420 2f20 2264 6174 6173 6574 7322  oot / "datasets"
+0001c1a0: 2069 6620 6e6f 7420 6261 7365 5f70 6174   if not base_pat
+0001c1b0: 6820 656c 7365 2050 6174 6828 6261 7365  h else Path(base
+0001c1c0: 5f70 6174 6829 0a0a 2020 2020 2020 2020  _path)..        
+0001c1d0: 2320 636f 6c75 6d6e 2066 6f72 6d61 740a  # column format.
+0001c1e0: 2020 2020 2020 2020 636f 6c75 6d6e 7320          columns 
+0001c1f0: 3d20 7b30 3a20 2274 6578 7422 2c20 313a  = {0: "text", 1:
+0001c200: 2022 6e65 7222 7d0a 0a20 2020 2020 2020   "ner"}..       
+0001c210: 2023 2074 6869 7320 6461 7461 7365 7420   # this dataset 
+0001c220: 6e61 6d65 0a20 2020 2020 2020 2064 6174  name.        dat
+0001c230: 6173 6574 5f6e 616d 6520 3d20 7365 6c66  aset_name = self
+0001c240: 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e 616d  .__class__.__nam
+0001c250: 655f 5f2e 6c6f 7765 7228 290a 0a20 2020  e__.lower()..   
+0001c260: 2020 2020 2064 6174 615f 666f 6c64 6572       data_folder
+0001c270: 203d 2062 6173 655f 7061 7468 202f 2064   = base_path / d
+0001c280: 6174 6173 6574 5f6e 616d 650a 0a20 2020  ataset_name..   
+0001c290: 2020 2020 2023 2064 6f77 6e6c 6f61 6420       # download 
+0001c2a0: 6461 7461 2066 726f 6d20 6769 7468 7562  data from github
+0001c2b0: 2069 6620 6e65 6365 7373 6172 7920 2868   if necessary (h
+0001c2c0: 6972 6f6e 7361 6e2e 7478 742c 206a 612e  ironsan.txt, ja.
+0001c2d0: 7769 6b69 7065 6469 612e 636f 6e6c 6c29  wikipedia.conll)
+0001c2e0: 0a20 2020 2020 2020 2049 4f42 325f 7061  .        IOB2_pa
+0001c2f0: 7468 203d 2022 6874 7470 733a 2f2f 7261  th = "https://ra
+0001c300: 772e 6769 7468 7562 7573 6572 636f 6e74  w.githubusercont
+0001c310: 656e 742e 636f 6d2f 4869 726f 6e73 616e  ent.com/Hironsan
+0001c320: 2f49 4f42 3243 6f72 7075 732f 6d61 7374  /IOB2Corpus/mast
+0001c330: 6572 2f22 0a0a 2020 2020 2020 2020 2320  er/"..        # 
+0001c340: 646f 776e 6c6f 6164 2066 696c 6573 2069  download files i
+0001c350: 6620 6e6f 7420 7072 6573 656e 7420 6c6f  f not present lo
+0001c360: 6361 6c6c 790a 2020 2020 2020 2020 6361  cally.        ca
+0001c370: 6368 6564 5f70 6174 6828 6622 7b49 4f42  ched_path(f"{IOB
+0001c380: 325f 7061 7468 7d68 6972 6f6e 7361 6e2e  2_path}hironsan.
+0001c390: 7478 7422 2c20 6461 7461 5f66 6f6c 6465  txt", data_folde
+0001c3a0: 7220 2f20 2272 6177 2229 0a20 2020 2020  r / "raw").     
+0001c3b0: 2020 2063 6163 6865 645f 7061 7468 2866     cached_path(f
+0001c3c0: 227b 494f 4232 5f70 6174 687d 6a61 2e77  "{IOB2_path}ja.w
+0001c3d0: 696b 6970 6564 6961 2e63 6f6e 6c6c 222c  ikipedia.conll",
+0001c3e0: 2064 6174 615f 666f 6c64 6572 202f 2022   data_folder / "
+0001c3f0: 7261 7722 290a 0a20 2020 2020 2020 2023  raw")..        #
+0001c400: 2077 6520 6e65 6564 2074 6f20 6d6f 6469   we need to modi
+0001c410: 6679 2074 6865 206f 7269 6769 6e61 6c20  fy the original 
+0001c420: 6669 6c65 7320 6279 2061 6464 696e 6720  files by adding 
+0001c430: 6e65 7720 6c69 6e65 7320 6166 7465 7220  new lines after 
+0001c440: 6166 7465 7220 7468 6520 656e 6420 6f66  after the end of
+0001c450: 2065 6163 6820 7365 6e74 656e 6365 0a20   each sentence. 
+0001c460: 2020 2020 2020 2074 7261 696e 5f64 6174         train_dat
+0001c470: 615f 6669 6c65 203d 2064 6174 615f 666f  a_file = data_fo
+0001c480: 6c64 6572 202f 2022 7472 6169 6e2e 7478  lder / "train.tx
+0001c490: 7422 0a20 2020 2020 2020 2069 6620 6e6f  t".        if no
+0001c4a0: 7420 7472 6169 6e5f 6461 7461 5f66 696c  t train_data_fil
+0001c4b0: 652e 6973 5f66 696c 6528 293a 0a20 2020  e.is_file():.   
+0001c4c0: 2020 2020 2020 2020 2073 656c 662e 5f5f           self.__
+0001c4d0: 7072 6570 6172 655f 6a61 705f 7769 6b69  prepare_jap_wiki
+0001c4e0: 6e65 7773 5f63 6f72 7075 7328 6461 7461  news_corpus(data
+0001c4f0: 5f66 6f6c 6465 7220 2f20 2272 6177 2220  _folder / "raw" 
+0001c500: 2f20 2268 6972 6f6e 7361 6e2e 7478 7422  / "hironsan.txt"
+0001c510: 2c20 6461 7461 5f66 6f6c 6465 7220 2f20  , data_folder / 
+0001c520: 2274 7261 696e 2e74 7874 2229 0a20 2020  "train.txt").   
+0001c530: 2020 2020 2020 2020 2073 656c 662e 5f5f           self.__
+0001c540: 7072 6570 6172 655f 6a61 705f 7769 6b69  prepare_jap_wiki
+0001c550: 7065 6469 615f 636f 7270 7573 2864 6174  pedia_corpus(dat
+0001c560: 615f 666f 6c64 6572 202f 2022 7261 7722  a_folder / "raw"
+0001c570: 202f 2022 6a61 2e77 696b 6970 6564 6961   / "ja.wikipedia
+0001c580: 2e63 6f6e 6c6c 222c 2064 6174 615f 666f  .conll", data_fo
+0001c590: 6c64 6572 202f 2022 7472 6169 6e2e 7478  lder / "train.tx
+0001c5a0: 7422 290a 0a20 2020 2020 2020 2073 7570  t")..        sup
+0001c5b0: 6572 2829 2e5f 5f69 6e69 745f 5f28 0a20  er().__init__(. 
+0001c5c0: 2020 2020 2020 2020 2020 2064 6174 615f             data_
+0001c5d0: 666f 6c64 6572 2c0a 2020 2020 2020 2020  folder,.        
+0001c5e0: 2020 2020 636f 6c75 6d6e 732c 0a20 2020      columns,.   
+0001c5f0: 2020 2020 2020 2020 2074 7261 696e 5f66           train_f
+0001c600: 696c 653d 2274 7261 696e 2e74 7874 222c  ile="train.txt",
+0001c610: 0a20 2020 2020 2020 2020 2020 2069 6e5f  .            in_
+0001c620: 6d65 6d6f 7279 3d69 6e5f 6d65 6d6f 7279  memory=in_memory
+0001c630: 2c0a 2020 2020 2020 2020 2020 2020 6465  ,.            de
+0001c640: 6661 756c 745f 7768 6974 6573 7061 6365  fault_whitespace
+0001c650: 5f61 6674 6572 3d30 2c0a 2020 2020 2020  _after=0,.      
+0001c660: 2020 2020 2020 2a2a 636f 7270 7573 6172        **corpusar
+0001c670: 6773 2c0a 2020 2020 2020 2020 290a 0a20  gs,.        ).. 
+0001c680: 2020 2040 7374 6174 6963 6d65 7468 6f64     @staticmethod
+0001c690: 0a20 2020 2064 6566 205f 5f70 7265 7061  .    def __prepa
+0001c6a0: 7265 5f6a 6170 5f77 696b 6970 6564 6961  re_jap_wikipedia
+0001c6b0: 5f63 6f72 7075 7328 6669 6c65 5f69 6e3a  _corpus(file_in:
+0001c6c0: 2055 6e69 6f6e 5b73 7472 2c20 5061 7468   Union[str, Path
+0001c6d0: 5d2c 2066 696c 655f 6f75 743a 2055 6e69  ], file_out: Uni
+0001c6e0: 6f6e 5b73 7472 2c20 5061 7468 5d29 3a0a  on[str, Path]):.
+0001c6f0: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
+0001c700: 6e28 6669 6c65 5f69 6e29 2061 7320 663a  n(file_in) as f:
+0001c710: 0a20 2020 2020 2020 2020 2020 206c 696e  .            lin
+0001c720: 6573 203d 2066 2e72 6561 646c 696e 6573  es = f.readlines
+0001c730: 2829 0a20 2020 2020 2020 2077 6974 6820  ().        with 
+0001c740: 6f70 656e 2866 696c 655f 6f75 742c 2022  open(file_out, "
+0001c750: 6122 2920 6173 2066 3a0a 2020 2020 2020  a") as f:.      
+0001c760: 2020 2020 2020 666f 7220 6c69 6e65 2069        for line i
+0001c770: 6e20 6c69 6e65 733a 0a20 2020 2020 2020  n lines:.       
+0001c780: 2020 2020 2020 2020 2069 6620 6c69 6e65           if line
+0001c790: 5b30 5d20 3d3d 2022 e380 8222 3a0a 2020  [0] == "...":.  
+0001c7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c7b0: 2020 662e 7772 6974 6528 6c69 6e65 290a    f.write(line).
+0001c7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c7d0: 2020 2020 662e 7772 6974 6528 225c 6e22      f.write("\n"
+0001c7e0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001c7f0: 2020 656c 6966 206c 696e 655b 305d 203d    elif line[0] =
+0001c800: 3d20 225c 6e22 3a0a 2020 2020 2020 2020  = "\n":.        
+0001c810: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+0001c820: 696e 7565 0a20 2020 2020 2020 2020 2020  inue.           
+0001c830: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0001c840: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001c850: 2e77 7269 7465 286c 696e 6529 0a0a 2020  .write(line)..  
+0001c860: 2020 4073 7461 7469 636d 6574 686f 640a    @staticmethod.
+0001c870: 2020 2020 6465 6620 5f5f 7072 6570 6172      def __prepar
+0001c880: 655f 6a61 705f 7769 6b69 6e65 7773 5f63  e_jap_wikinews_c
+0001c890: 6f72 7075 7328 6669 6c65 5f69 6e3a 2055  orpus(file_in: U
+0001c8a0: 6e69 6f6e 5b73 7472 2c20 5061 7468 5d2c  nion[str, Path],
+0001c8b0: 2066 696c 655f 6f75 743a 2055 6e69 6f6e   file_out: Union
+0001c8c0: 5b73 7472 2c20 5061 7468 5d29 3a0a 2020  [str, Path]):.  
+0001c8d0: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
+0001c8e0: 6669 6c65 5f69 6e29 2061 7320 663a 0a20  file_in) as f:. 
+0001c8f0: 2020 2020 2020 2020 2020 206c 696e 6573             lines
+0001c900: 203d 2066 2e72 6561 646c 696e 6573 2829   = f.readlines()
+0001c910: 0a20 2020 2020 2020 2077 6974 6820 6f70  .        with op
+0001c920: 656e 2866 696c 655f 6f75 742c 2022 6122  en(file_out, "a"
+0001c930: 2920 6173 2066 3a0a 2020 2020 2020 2020  ) as f:.        
+0001c940: 2020 2020 666f 7220 6c69 6e65 2069 6e20      for line in 
+0001c950: 6c69 6e65 733a 0a20 2020 2020 2020 2020  lines:.         
+0001c960: 2020 2020 2020 2073 705f 6c69 6e65 203d         sp_line =
+0001c970: 206c 696e 652e 7370 6c69 7428 225c 7422   line.split("\t"
+0001c980: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001c990: 2020 6966 2073 705f 6c69 6e65 5b30 5d20    if sp_line[0] 
+0001c9a0: 3d3d 2022 5c6e 223a 0a20 2020 2020 2020  == "\n":.       
+0001c9b0: 2020 2020 2020 2020 2020 2020 2066 2e77               f.w
+0001c9c0: 7269 7465 2822 5c6e 2229 0a20 2020 2020  rite("\n").     
+0001c9d0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+0001c9e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001c9f0: 2020 2020 2066 2e77 7269 7465 2873 705f       f.write(sp_
+0001ca00: 6c69 6e65 5b30 5d20 2b20 225c 7422 202b  line[0] + "\t" +
+0001ca10: 2073 705f 6c69 6e65 5b2d 315d 290a 0a0a   sp_line[-1])...
+0001ca20: 636c 6173 7320 4e45 525f 4d41 5341 4b48  class NER_MASAKH
+0001ca30: 414e 4528 4d75 6c74 6943 6f72 7075 7329  ANE(MultiCorpus)
+0001ca40: 3a0a 2020 2020 6465 6620 5f5f 696e 6974  :.    def __init
+0001ca50: 5f5f 280a 2020 2020 2020 2020 7365 6c66  __(.        self
+0001ca60: 2c0a 2020 2020 2020 2020 6c61 6e67 7561  ,.        langua
+0001ca70: 6765 733a 2055 6e69 6f6e 5b73 7472 2c20  ges: Union[str, 
+0001ca80: 4c69 7374 5b73 7472 5d5d 203d 2022 6c75  List[str]] = "lu
+0001ca90: 6f22 2c0a 2020 2020 2020 2020 7665 7273  o",.        vers
+0001caa0: 696f 6e3a 2073 7472 203d 2022 7632 222c  ion: str = "v2",
+0001cab0: 0a20 2020 2020 2020 2062 6173 655f 7061  .        base_pa
+0001cac0: 7468 3a20 4f70 7469 6f6e 616c 5b55 6e69  th: Optional[Uni
+0001cad0: 6f6e 5b73 7472 2c20 5061 7468 5d5d 203d  on[str, Path]] =
+0001cae0: 204e 6f6e 652c 0a20 2020 2020 2020 2069   None,.        i
+0001caf0: 6e5f 6d65 6d6f 7279 3a20 626f 6f6c 203d  n_memory: bool =
+0001cb00: 2054 7275 652c 0a20 2020 2020 2020 202a   True,.        *
+0001cb10: 2a63 6f72 7075 7361 7267 732c 0a20 2020  *corpusargs,.   
+0001cb20: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
+0001cb30: 2020 2020 2222 2249 6e69 7469 616c 697a      """Initializ
+0001cb40: 6520 7468 6520 4d61 7361 6b68 616e 6520  e the Masakhane 
+0001cb50: 636f 7270 7573 2061 7661 696c 6162 6c65  corpus available
+0001cb60: 206f 6e20 6874 7470 733a 2f2f 6769 7468   on https://gith
+0001cb70: 7562 2e63 6f6d 2f6d 6173 616b 6861 6e65  ub.com/masakhane
+0001cb80: 2d69 6f2f 6d61 7361 6b68 616e 652d 6e65  -io/masakhane-ne
+0001cb90: 722f 7472 6565 2f6d 6169 6e2f 6461 7461  r/tree/main/data
+0001cba0: 2e0a 0a20 2020 2020 2020 2049 7420 636f  ...        It co
+0001cbb0: 6e73 6973 7473 206f 6620 7465 6e20 4166  nsists of ten Af
+0001cbc0: 7269 6361 6e20 6c61 6e67 7561 6765 732e  rican languages.
+0001cbd0: 2050 6173 7320 6120 6c61 6e67 7561 6765   Pass a language
+0001cbe0: 2063 6f64 6520 6f72 2061 206c 6973 7420   code or a list 
+0001cbf0: 6f66 206c 616e 6775 6167 6520 636f 6465  of language code
+0001cc00: 7320 746f 2069 6e69 7469 616c 697a 6520  s to initialize 
+0001cc10: 7468 6520 636f 7270 7573 0a20 2020 2020  the corpus.     
+0001cc20: 2020 2077 6974 6820 7468 6520 6c61 6e67     with the lang
+0001cc30: 7561 6765 7320 796f 7520 7265 7175 6972  uages you requir
+0001cc40: 652e 2049 6620 796f 7520 7061 7373 2022  e. If you pass "
+0001cc50: 616c 6c22 2c20 616c 6c20 6c61 6e67 7561  all", all langua
+0001cc60: 6765 7320 7769 6c6c 2062 6520 696e 6974  ges will be init
+0001cc70: 6961 6c69 7a65 642e 0a20 2020 2020 2020  ialized..       
+0001cc80: 203a 7665 7273 696f 6e3a 2053 7065 6369   :version: Speci
+0001cc90: 6669 6573 2076 6572 7369 6f6e 206f 6620  fies version of 
+0001cca0: 7468 6520 6461 7461 7365 742e 2043 7572  the dataset. Cur
+0001ccb0: 7265 6e74 6c79 2c20 6f6e 6c79 2022 7631  rently, only "v1
+0001ccc0: 2220 616e 6420 2276 3222 2061 7265 2073  " and "v2" are s
+0001ccd0: 7570 706f 7274 6564 2c20 7573 696e 6720  upported, using 
+0001cce0: 2276 3222 2061 7320 6465 6661 756c 742e  "v2" as default.
+0001ccf0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+0001cd00: 6261 7365 5f70 6174 683a 2044 6566 6175  base_path: Defau
+0001cd10: 6c74 2069 7320 4e6f 6e65 2c20 6d65 616e  lt is None, mean
+0001cd20: 696e 6720 7468 6174 2063 6f72 7075 7320  ing that corpus 
+0001cd30: 6765 7473 2061 7574 6f2d 646f 776e 6c6f  gets auto-downlo
+0001cd40: 6164 6564 2061 6e64 206c 6f61 6465 642e  aded and loaded.
+0001cd50: 2059 6f75 2063 616e 206f 7665 7272 6964   You can overrid
+0001cd60: 6520 7468 6973 0a20 2020 2020 2020 2074  e this.        t
+0001cd70: 6f20 706f 696e 7420 746f 2061 2064 6966  o point to a dif
+0001cd80: 6665 7265 6e74 2066 6f6c 6465 7220 6275  ferent folder bu
+0001cd90: 7420 7479 7069 6361 6c6c 7920 7468 6973  t typically this
+0001cda0: 2073 686f 756c 6420 6e6f 7420 6265 206e   should not be n
+0001cdb0: 6563 6573 7361 7279 2e0a 2020 2020 2020  ecessary..      
+0001cdc0: 2020 504f 5320 7461 6773 2069 6e73 7465    POS tags inste
+0001cdd0: 6164 0a20 2020 2020 2020 203a 7061 7261  ad.        :para
+0001cde0: 6d20 696e 5f6d 656d 6f72 793a 2049 6620  m in_memory: If 
+0001cdf0: 5472 7565 2c20 6b65 6570 7320 6461 7461  True, keeps data
+0001ce00: 7365 7420 696e 206d 656d 6f72 7920 6769  set in memory gi
+0001ce10: 7669 6e67 2073 7065 6564 7570 7320 696e  ving speedups in
+0001ce20: 2074 7261 696e 696e 672e 0a20 2020 2020   training..     
+0001ce30: 2020 2022 2222 0a20 2020 2020 2020 2062     """.        b
+0001ce40: 6173 655f 7061 7468 203d 206b 6f6c 6962  ase_path = kolib
+0001ce50: 7269 2e63 6163 6865 5f72 6f6f 7420 2f20  ri.cache_root / 
+0001ce60: 2264 6174 6173 6574 7322 2069 6620 6e6f  "datasets" if no
+0001ce70: 7420 6261 7365 5f70 6174 6820 656c 7365  t base_path else
+0001ce80: 2050 6174 6828 6261 7365 5f70 6174 6829   Path(base_path)
+0001ce90: 0a0a 2020 2020 2020 2020 2320 6966 206f  ..        # if o
+0001cea0: 6e6c 7920 6f6e 6520 6c61 6e67 7561 6765  nly one language
+0001ceb0: 2069 7320 6769 7665 6e0a 2020 2020 2020   is given.      
+0001cec0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0001ced0: 6c61 6e67 7561 6765 732c 2073 7472 293a  languages, str):
+0001cee0: 0a20 2020 2020 2020 2020 2020 206c 616e  .            lan
+0001cef0: 6775 6167 6573 203d 205b 6c61 6e67 7561  guages = [langua
+0001cf00: 6765 735d 0a0a 2020 2020 2020 2020 2320  ges]..        # 
+0001cf10: 636f 6c75 6d6e 2066 6f72 6d61 740a 2020  column format.  
+0001cf20: 2020 2020 2020 636f 6c75 6d6e 7320 3d20        columns = 
+0001cf30: 7b30 3a20 2274 6578 7422 2c20 313a 2022  {0: "text", 1: "
+0001cf40: 6e65 7222 7d0a 0a20 2020 2020 2020 2023  ner"}..        #
+0001cf50: 2074 6869 7320 6461 7461 7365 7420 6e61   this dataset na
+0001cf60: 6d65 0a20 2020 2020 2020 2064 6174 6173  me.        datas
+0001cf70: 6574 5f6e 616d 6520 3d20 7365 6c66 2e5f  et_name = self._
+0001cf80: 5f63 6c61 7373 5f5f 2e5f 5f6e 616d 655f  _class__.__name_
+0001cf90: 5f2e 6c6f 7765 7228 290a 0a20 2020 2020  _.lower()..     
+0001cfa0: 2020 2073 7570 706f 7274 6564 5f76 6572     supported_ver
+0001cfb0: 7369 6f6e 7320 3d20 5b22 7631 222c 2022  sions = ["v1", "
+0001cfc0: 7632 225d 0a0a 2020 2020 2020 2020 6966  v2"]..        if
+0001cfd0: 2076 6572 7369 6f6e 206e 6f74 2069 6e20   version not in 
+0001cfe0: 7375 7070 6f72 7465 645f 7665 7273 696f  supported_versio
+0001cff0: 6e73 3a0a 2020 2020 2020 2020 2020 2020  ns:.            
+0001d000: 6c6f 672e 6572 726f 7228 6622 5468 6520  log.error(f"The 
+0001d010: 7370 6563 6966 6965 6420 7665 7273 696f  specified versio
+0001d020: 6e20 277b 7665 7273 696f 6e7d 2720 6973  n '{version}' is
+0001d030: 206e 6f74 2069 6e20 7468 6520 6c69 7374   not in the list
+0001d040: 206f 6620 7375 7070 6f72 7465 6420 7665   of supported ve
+0001d050: 7273 696f 6e21 2229 0a20 2020 2020 2020  rsion!").       
+0001d060: 2020 2020 206c 6f67 2e65 7272 6f72 2866       log.error(f
+0001d070: 2253 7570 706f 7274 6564 2076 6572 7369  "Supported versi
+0001d080: 6f6e 7320 6172 6520 277b 7375 7070 6f72  ons are '{suppor
+0001d090: 7465 645f 7665 7273 696f 6e73 7d27 2122  ted_versions}'!"
+0001d0a0: 290a 2020 2020 2020 2020 2020 2020 7261  ).            ra
+0001d0b0: 6973 6520 4578 6365 7074 696f 6e0a 0a20  ise Exception.. 
+0001d0c0: 2020 2020 2020 2064 6174 615f 666f 6c64         data_fold
+0001d0d0: 6572 203d 2062 6173 655f 7061 7468 202f  er = base_path /
+0001d0e0: 2064 6174 6173 6574 5f6e 616d 6520 2f20   dataset_name / 
+0001d0f0: 7665 7273 696f 6e0a 0a20 2020 2020 2020  version..       
+0001d100: 206c 616e 6775 6167 6573 5f74 6f5f 636f   languages_to_co
+0001d110: 6465 203d 207b 0a20 2020 2020 2020 2020  de = {.         
+0001d120: 2020 2022 7631 223a 207b 0a20 2020 2020     "v1": {.     
+0001d130: 2020 2020 2020 2020 2020 2022 616d 6861             "amha
+0001d140: 7269 6322 3a20 2261 6d68 222c 0a20 2020  ric": "amh",.   
+0001d150: 2020 2020 2020 2020 2020 2020 2022 6861               "ha
+0001d160: 7573 6122 3a20 2268 6175 222c 0a20 2020  usa": "hau",.   
+0001d170: 2020 2020 2020 2020 2020 2020 2022 6967               "ig
+0001d180: 626f 223a 2022 6962 6f22 2c0a 2020 2020  bo": "ibo",.    
+0001d190: 2020 2020 2020 2020 2020 2020 226b 696e              "kin
+0001d1a0: 7961 7277 616e 6461 223a 2022 6b69 6e22  yarwanda": "kin"
+0001d1b0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0001d1c0: 2020 226c 7567 616e 6461 223a 2022 6c75    "luganda": "lu
+0001d1d0: 6722 2c0a 2020 2020 2020 2020 2020 2020  g",.            
+0001d1e0: 2020 2020 226c 756f 223a 2022 6c75 6f22      "luo": "luo"
+0001d1f0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0001d200: 2020 226e 6169 6a61 223a 2022 7063 6d22    "naija": "pcm"
+0001d210: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0001d220: 2020 2273 7761 6869 6c69 223a 2022 7377    "swahili": "sw
+0001d230: 6122 2c0a 2020 2020 2020 2020 2020 2020  a",.            
+0001d240: 2020 2020 2279 6f72 7562 6122 3a20 2279      "yoruba": "y
+0001d250: 6f72 222c 0a20 2020 2020 2020 2020 2020  or",.           
+0001d260: 2020 2020 2022 776f 6c6f 6622 3a20 2277       "wolof": "w
+0001d270: 6f6c 222c 0a20 2020 2020 2020 2020 2020  ol",.           
+0001d280: 207d 2c0a 2020 2020 2020 2020 2020 2020   },.            
+0001d290: 2276 3222 3a20 7b0a 2020 2020 2020 2020  "v2": {.        
+0001d2a0: 2020 2020 2020 2020 2262 616d 6261 7261          "bambara
+0001d2b0: 223a 2022 6261 6d22 2c0a 2020 2020 2020  ": "bam",.      
+0001d2c0: 2020 2020 2020 2020 2020 2267 686f 6d61            "ghoma
+0001d2d0: 6c61 223a 2022 6262 6a22 2c0a 2020 2020  la": "bbj",.    
+0001d2e0: 2020 2020 2020 2020 2020 2020 2265 7765              "ewe
+0001d2f0: 223a 2022 6577 6522 2c0a 2020 2020 2020  ": "ewe",.      
+0001d300: 2020 2020 2020 2020 2020 2266 6f6e 223a            "fon":
+0001d310: 2022 666f 6e22 2c0a 2020 2020 2020 2020   "fon",.        
+0001d320: 2020 2020 2020 2020 2268 6175 7361 223a          "hausa":
+0001d330: 2022 6861 7522 2c0a 2020 2020 2020 2020   "hau",.        
+0001d340: 2020 2020 2020 2020 2269 6762 6f22 3a20          "igbo": 
+0001d350: 2269 626f 222c 0a20 2020 2020 2020 2020  "ibo",.         
+0001d360: 2020 2020 2020 2022 6b69 6e79 6172 7761         "kinyarwa
+0001d370: 6e64 6122 3a20 226b 696e 222c 0a20 2020  nda": "kin",.   
+0001d380: 2020 2020 2020 2020 2020 2020 2022 6c75               "lu
+0001d390: 6761 6e64 6122 3a20 226c 7567 222c 0a20  ganda": "lug",. 
+0001d3a0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0001d3b0: 6d6f 7373 6922 3a20 226d 6f73 222c 0a20  mossi": "mos",. 
+0001d3c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0001d3d0: 6e61 696a 6122 3a20 2270 636d 222c 0a20  naija": "pcm",. 
+0001d3e0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0001d3f0: 6368 6963 6865 7761 223a 2022 6e79 6122  chichewa": "nya"
+0001d400: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0001d410: 2020 2263 6869 7368 6f6e 6122 3a20 2273    "chishona": "s
+0001d420: 6e61 222c 0a20 2020 2020 2020 2020 2020  na",.           
+0001d430: 2020 2020 2022 6b69 7377 6168 696c 6922       "kiswahili"
+0001d440: 3a20 2273 7761 222c 0a20 2020 2020 2020  : "swa",.       
+0001d450: 2020 2020 2020 2020 2022 7365 7473 7761           "setswa
+0001d460: 6e61 223a 2022 7473 6e22 2c0a 2020 2020  na": "tsn",.    
+0001d470: 2020 2020 2020 2020 2020 2020 2261 6b61              "aka
+0001d480: 6e5f 7477 6922 3a20 2274 7769 222c 0a20  n_twi": "twi",. 
+0001d490: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0001d4a0: 776f 6c6f 6622 3a20 2277 6f6c 222c 0a20  wolof": "wol",. 
+0001d4b0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0001d4c0: 6973 6978 686f 7361 223a 2022 7868 6f22  isixhosa": "xho"
+0001d4d0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0001d4e0: 2020 2279 6f72 7562 6122 3a20 2279 6f72    "yoruba": "yor
+0001d4f0: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+0001d500: 2020 2022 6973 697a 756c 7522 3a20 227a     "isizulu": "z
+0001d510: 756c 222c 0a20 2020 2020 2020 2020 2020  ul",.           
+0001d520: 207d 2c0a 2020 2020 2020 2020 7d0a 0a20   },.        }.. 
+0001d530: 2020 2020 2020 206c 616e 6775 6167 655f         language_
+0001d540: 746f 5f63 6f64 6520 3d20 6c61 6e67 7561  to_code = langua
+0001d550: 6765 735f 746f 5f63 6f64 655b 7665 7273  ges_to_code[vers
+0001d560: 696f 6e5d 0a0a 2020 2020 2020 2020 6461  ion]..        da
+0001d570: 7461 5f70 6174 6873 203d 207b 0a20 2020  ta_paths = {.   
+0001d580: 2020 2020 2020 2020 2022 7631 223a 2022           "v1": "
+0001d590: 6874 7470 733a 2f2f 7261 772e 6769 7468  https://raw.gith
+0001d5a0: 7562 7573 6572 636f 6e74 656e 742e 636f  ubusercontent.co
+0001d5b0: 6d2f 6d61 7361 6b68 616e 652d 696f 2f6d  m/masakhane-io/m
+0001d5c0: 6173 616b 6861 6e65 2d6e 6572 2f6d 6169  asakhane-ner/mai
+0001d5d0: 6e2f 6461 7461 222c 0a20 2020 2020 2020  n/data",.       
+0001d5e0: 2020 2020 2022 7632 223a 2022 6874 7470       "v2": "http
+0001d5f0: 733a 2f2f 7261 772e 6769 7468 7562 7573  s://raw.githubus
+0001d600: 6572 636f 6e74 656e 742e 636f 6d2f 6d61  ercontent.com/ma
+0001d610: 7361 6b68 616e 652d 696f 2f6d 6173 616b  sakhane-io/masak
+0001d620: 6861 6e65 2d6e 6572 2f6d 6169 6e2f 4d61  hane-ner/main/Ma
+0001d630: 7361 6b68 614e 4552 322e 302f 6461 7461  sakhaNER2.0/data
+0001d640: 222c 0a20 2020 2020 2020 207d 0a0a 2020  ",.        }..  
+0001d650: 2020 2020 2020 2320 7573 6520 616c 6c20        # use all 
+0001d660: 6c61 6e67 7561 6765 7320 6966 2065 7870  languages if exp
+0001d670: 6c69 6369 746c 7920 7365 7420 746f 2022  licitly set to "
+0001d680: 616c 6c22 0a20 2020 2020 2020 2069 6620  all".        if 
+0001d690: 6c61 6e67 7561 6765 7320 3d3d 205b 2261  languages == ["a
+0001d6a0: 6c6c 225d 3a0a 2020 2020 2020 2020 2020  ll"]:.          
+0001d6b0: 2020 6c61 6e67 7561 6765 7320 3d20 6c69    languages = li
+0001d6c0: 7374 286c 616e 6775 6167 655f 746f 5f63  st(language_to_c
+0001d6d0: 6f64 652e 7661 6c75 6573 2829 290a 0a20  ode.values()).. 
+0001d6e0: 2020 2020 2020 2063 6f72 706f 7261 3a20         corpora: 
+0001d6f0: 4c69 7374 5b43 6f72 7075 735d 203d 205b  List[Corpus] = [
+0001d700: 5d0a 2020 2020 2020 2020 666f 7220 6c61  ].        for la
+0001d710: 6e67 7561 6765 2069 6e20 6c61 6e67 7561  nguage in langua
+0001d720: 6765 733a 0a20 2020 2020 2020 2020 2020  ges:.           
+0001d730: 2069 6620 6c61 6e67 7561 6765 2069 6e20   if language in 
+0001d740: 6c61 6e67 7561 6765 5f74 6f5f 636f 6465  language_to_code
+0001d750: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001d760: 2020 6c61 6e67 7561 6765 203d 206c 616e    language = lan
+0001d770: 6775 6167 655f 746f 5f63 6f64 655b 6c61  guage_to_code[la
+0001d780: 6e67 7561 6765 5d0a 0a20 2020 2020 2020  nguage]..       
+0001d790: 2020 2020 2069 6620 6c61 6e67 7561 6765       if language
+0001d7a0: 206e 6f74 2069 6e20 6c61 6e67 7561 6765   not in language
+0001d7b0: 5f74 6f5f 636f 6465 2e76 616c 7565 7328  _to_code.values(
+0001d7c0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0001d7d0: 2020 206c 6f67 2e65 7272 6f72 2866 224c     log.error(f"L
+0001d7e0: 616e 6775 6167 6520 277b 6c61 6e67 7561  anguage '{langua
+0001d7f0: 6765 7d27 2069 7320 6e6f 7420 696e 206c  ge}' is not in l
+0001d800: 6973 7420 6f66 2073 7570 706f 7274 6564  ist of supported
+0001d810: 206c 616e 6775 6167 6573 2122 290a 2020   languages!").  
+0001d820: 2020 2020 2020 2020 2020 2020 2020 6c6f                lo
+0001d830: 672e 6572 726f 7228 6622 5375 7070 6f72  g.error(f"Suppor
+0001d840: 7465 6420 6172 6520 277b 6c61 6e67 7561  ted are '{langua
+0001d850: 6765 5f74 6f5f 636f 6465 2e76 616c 7565  ge_to_code.value
+0001d860: 7328 297d 2721 2229 0a20 2020 2020 2020  s()}'!").       
+0001d870: 2020 2020 2020 2020 206c 6f67 2e65 7272           log.err
+0001d880: 6f72 2822 496e 7374 616e 7469 6174 6520  or("Instantiate 
+0001d890: 7468 6973 2043 6f72 7075 7320 666f 7220  this Corpus for 
+0001d8a0: 696e 7374 616e 6365 206c 696b 6520 736f  instance like so
+0001d8b0: 2027 636f 7270 7573 203d 204e 4552 5f4d   'corpus = NER_M
+0001d8c0: 4153 414b 4841 4e45 286c 616e 6775 6167  ASAKHANE(languag
+0001d8d0: 6573 3d27 6c75 6f27 2927 2229 0a20 2020  es='luo')'").   
+0001d8e0: 2020 2020 2020 2020 2020 2020 2072 6169               rai
+0001d8f0: 7365 2045 7863 6570 7469 6f6e 0a0a 2020  se Exception..  
+0001d900: 2020 2020 2020 2020 2020 6c61 6e67 7561            langua
+0001d910: 6765 5f66 6f6c 6465 7220 3d20 6461 7461  ge_folder = data
+0001d920: 5f66 6f6c 6465 7220 2f20 6c61 6e67 7561  _folder / langua
+0001d930: 6765 0a0a 2020 2020 2020 2020 2020 2020  ge..            
+0001d940: 2320 646f 776e 6c6f 6164 2064 6174 6120  # download data 
+0001d950: 6966 206e 6563 6573 7361 7279 0a20 2020  if necessary.   
+0001d960: 2020 2020 2020 2020 2064 6174 615f 7061           data_pa
+0001d970: 7468 203d 2066 227b 6461 7461 5f70 6174  th = f"{data_pat
+0001d980: 6873 5b76 6572 7369 6f6e 5d7d 2f7b 6c61  hs[version]}/{la
+0001d990: 6e67 7561 6765 7d2f 220a 2020 2020 2020  nguage}/".      
+0001d9a0: 2020 2020 2020 6361 6368 6564 5f70 6174        cached_pat
+0001d9b0: 6828 6622 7b64 6174 615f 7061 7468 7d64  h(f"{data_path}d
+0001d9c0: 6576 2e74 7874 222c 206c 616e 6775 6167  ev.txt", languag
+0001d9d0: 655f 666f 6c64 6572 290a 2020 2020 2020  e_folder).      
+0001d9e0: 2020 2020 2020 6361 6368 6564 5f70 6174        cached_pat
+0001d9f0: 6828 6622 7b64 6174 615f 7061 7468 7d74  h(f"{data_path}t
+0001da00: 6573 742e 7478 7422 2c20 6c61 6e67 7561  est.txt", langua
+0001da10: 6765 5f66 6f6c 6465 7229 0a20 2020 2020  ge_folder).     
+0001da20: 2020 2020 2020 2063 6163 6865 645f 7061         cached_pa
+0001da30: 7468 2866 227b 6461 7461 5f70 6174 687d  th(f"{data_path}
+0001da40: 7472 6169 6e2e 7478 7422 2c20 6c61 6e67  train.txt", lang
+0001da50: 7561 6765 5f66 6f6c 6465 7229 0a0a 2020  uage_folder)..  
+0001da60: 2020 2020 2020 2020 2020 2320 696e 6974            # init
+0001da70: 6961 6c69 7a65 2063 6f6d 6c75 6d6e 636f  ialize comlumnco
+0001da80: 7270 7573 2061 6e64 2061 6464 2069 7420  rpus and add it 
+0001da90: 746f 206c 6973 740a 2020 2020 2020 2020  to list.        
+0001daa0: 2020 2020 6c6f 672e 696e 666f 2866 2252      log.info(f"R
+0001dab0: 6561 6469 6e67 2064 6174 6120 666f 7220  eading data for 
+0001dac0: 6c61 6e67 7561 6765 207b 6c61 6e67 7561  language {langua
+0001dad0: 6765 7d40 7b76 6572 7369 6f6e 7d22 290a  ge}@{version}").
+0001dae0: 2020 2020 2020 2020 2020 2020 636f 7270              corp
+0001daf0: 203d 2043 6f6c 756d 6e43 6f72 7075 7328   = ColumnCorpus(
+0001db00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001db10: 2064 6174 615f 666f 6c64 6572 3d6c 616e   data_folder=lan
+0001db20: 6775 6167 655f 666f 6c64 6572 2c0a 2020  guage_folder,.  
+0001db30: 2020 2020 2020 2020 2020 2020 2020 636f                co
+0001db40: 6c75 6d6e 5f66 6f72 6d61 743d 636f 6c75  lumn_format=colu
+0001db50: 6d6e 732c 0a20 2020 2020 2020 2020 2020  mns,.           
+0001db60: 2020 2020 2065 6e63 6f64 696e 673d 2275       encoding="u
+0001db70: 7466 2d38 222c 0a20 2020 2020 2020 2020  tf-8",.         
+0001db80: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
+0001db90: 3d69 6e5f 6d65 6d6f 7279 2c0a 2020 2020  =in_memory,.    
+0001dba0: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
+0001dbb0: 3d6c 616e 6775 6167 652c 0a20 2020 2020  =language,.     
+0001dbc0: 2020 2020 2020 2020 2020 202a 2a63 6f72             **cor
+0001dbd0: 7075 7361 7267 732c 0a20 2020 2020 2020  pusargs,.       
+0001dbe0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+0001dbf0: 2020 2063 6f72 706f 7261 2e61 7070 656e     corpora.appen
+0001dc00: 6428 636f 7270 290a 0a20 2020 2020 2020  d(corp)..       
+0001dc10: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
+0001dc20: 5f28 0a20 2020 2020 2020 2020 2020 2063  _(.            c
+0001dc30: 6f72 706f 7261 2c0a 2020 2020 2020 2020  orpora,.        
+0001dc40: 2020 2020 6e61 6d65 3d22 6d61 7361 6b68      name="masakh
+0001dc50: 616e 652d 2220 2b20 222d 222e 6a6f 696e  ane-" + "-".join
+0001dc60: 286c 616e 6775 6167 6573 292c 0a20 2020  (languages),.   
+0001dc70: 2020 2020 2029 0a0a 0a63 6c61 7373 204e       )...class N
+0001dc80: 4552 5f4d 554c 5449 5f43 4f4e 4552 284d  ER_MULTI_CONER(M
+0001dc90: 756c 7469 4669 6c65 436f 6c75 6d6e 436f  ultiFileColumnCo
+0001dca0: 7270 7573 293a 0a20 2020 2064 6566 205f  rpus):.    def _
+0001dcb0: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
+0001dcc0: 2073 656c 662c 0a20 2020 2020 2020 2074   self,.        t
+0001dcd0: 6173 6b3a 2073 7472 203d 2022 6d75 6c74  ask: str = "mult
+0001dce0: 6922 2c0a 2020 2020 2020 2020 6261 7365  i",.        base
+0001dcf0: 5f70 6174 683a 204f 7074 696f 6e61 6c5b  _path: Optional[
+0001dd00: 556e 696f 6e5b 7374 722c 2050 6174 685d  Union[str, Path]
+0001dd10: 5d20 3d20 4e6f 6e65 2c0a 2020 2020 2020  ] = None,.      
+0001dd20: 2020 696e 5f6d 656d 6f72 793a 2062 6f6f    in_memory: boo
+0001dd30: 6c20 3d20 5472 7565 2c0a 2020 2020 2020  l = True,.      
+0001dd40: 2020 2a2a 636f 7270 7573 6172 6773 2c0a    **corpusargs,.
+0001dd50: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
+0001dd60: 2020 2020 2020 2022 2222 446f 776e 6c6f         """Downlo
+0001dd70: 6164 2061 6e64 2049 6e69 7469 616c 697a  ad and Initializ
+0001dd80: 6520 7468 6520 4d75 6c74 6943 6f4e 6572  e the MultiCoNer
+0001dd90: 2063 6f72 7075 732e 0a0a 2020 2020 2020   corpus...      
+0001dda0: 2020 4172 6773 3a0a 2020 2020 2020 2020    Args:.        
+0001ddb0: 2020 2020 7461 736b 3a20 6569 7468 6572      task: either
+0001ddc0: 2027 6d75 6c74 6927 2c20 2763 6f64 652d   'multi', 'code-
+0001ddd0: 7377 6974 6368 272c 206f 7220 7468 6520  switch', or the 
+0001dde0: 6c61 6e67 7561 6765 2063 6f64 6520 666f  language code fo
+0001ddf0: 7220 6f6e 6520 6f66 2074 6865 206d 6f6e  r one of the mon
+0001de00: 6f20 7461 736b 732e 0a20 2020 2020 2020  o tasks..       
+0001de10: 2020 2020 2062 6173 655f 7061 7468 3a20       base_path: 
+0001de20: 5061 7468 2074 6f20 7468 6520 436f 4e4c  Path to the CoNL
+0001de30: 4c2d 3033 2063 6f72 7075 7320 2869 2e65  L-03 corpus (i.e
+0001de40: 2e20 2763 6f6e 6c6c 5f30 3327 2066 6f6c  . 'conll_03' fol
+0001de50: 6465 7229 206f 6e20 796f 7572 206d 6163  der) on your mac
+0001de60: 6869 6e65 2050 4f53 2074 6167 7320 6f72  hine POS tags or
+0001de70: 2063 6875 6e6b 7320 7265 7370 6563 7469   chunks respecti
+0001de80: 7665 6c79 0a20 2020 2020 2020 2020 2020  vely.           
+0001de90: 2069 6e5f 6d65 6d6f 7279 3a20 4966 2054   in_memory: If T
+0001dea0: 7275 652c 206b 6565 7073 2064 6174 6173  rue, keeps datas
+0001deb0: 6574 2069 6e20 6d65 6d6f 7279 2067 6976  et in memory giv
+0001dec0: 696e 6720 7370 6565 6475 7073 2069 6e20  ing speedups in 
+0001ded0: 7472 6169 6e69 6e67 2e0a 2020 2020 2020  training..      
+0001dee0: 2020 2222 220a 2020 2020 2020 2020 6261    """.        ba
+0001def0: 7365 5f70 6174 6820 3d20 6b6f 6c69 6272  se_path = kolibr
+0001df00: 692e 6361 6368 655f 726f 6f74 202f 2022  i.cache_root / "
+0001df10: 6461 7461 7365 7473 2220 6966 206e 6f74  datasets" if not
+0001df20: 2062 6173 655f 7061 7468 2065 6c73 6520   base_path else 
+0001df30: 5061 7468 2862 6173 655f 7061 7468 290a  Path(base_path).
+0001df40: 0a20 2020 2020 2020 2066 6f6c 6465 7273  .        folders
+0001df50: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+0001df60: 2022 626e 223a 2022 424e 2d42 616e 676c   "bn": "BN-Bangl
+0001df70: 6122 2c0a 2020 2020 2020 2020 2020 2020  a",.            
+0001df80: 2264 6522 3a20 2244 452d 4765 726d 616e  "de": "DE-German
+0001df90: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+0001dfa0: 656e 223a 2022 454e 2d45 6e67 6c69 7368  en": "EN-English
+0001dfb0: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+0001dfc0: 6573 223a 2022 4553 2d45 7370 616e 6973  es": "ES-Espanis
+0001dfd0: 6822 2c0a 2020 2020 2020 2020 2020 2020  h",.            
+0001dfe0: 2266 6122 3a20 2246 412d 4661 7273 6922  "fa": "FA-Farsi"
+0001dff0: 2c0a 2020 2020 2020 2020 2020 2020 2268  ,.            "h
+0001e000: 6922 3a20 2248 492d 4869 6e64 6922 2c0a  i": "HI-Hindi",.
+0001e010: 2020 2020 2020 2020 2020 2020 226b 6f22              "ko"
+0001e020: 3a20 224b 4f2d 4b6f 7265 616e 222c 0a20  : "KO-Korean",. 
+0001e030: 2020 2020 2020 2020 2020 2022 6e6c 223a             "nl":
+0001e040: 2022 4e4c 2d44 7574 6368 222c 0a20 2020   "NL-Dutch",.   
+0001e050: 2020 2020 2020 2020 2022 7275 223a 2022           "ru": "
+0001e060: 5255 2d52 7573 7369 616e 222c 0a20 2020  RU-Russian",.   
+0001e070: 2020 2020 2020 2020 2022 7472 223a 2022           "tr": "
+0001e080: 5452 2d54 7572 6b69 7368 222c 0a20 2020  TR-Turkish",.   
+0001e090: 2020 2020 2020 2020 2022 7a68 223a 2022           "zh": "
+0001e0a0: 5a48 2d43 6869 6e65 7365 222c 0a20 2020  ZH-Chinese",.   
+0001e0b0: 2020 2020 2020 2020 2022 6d69 7822 3a20           "mix": 
+0001e0c0: 224d 4958 5f43 6f64 655f 6d69 7865 6422  "MIX_Code_mixed"
+0001e0d0: 2c0a 2020 2020 2020 2020 2020 2020 226d  ,.            "m
+0001e0e0: 756c 7469 223a 2022 4d55 4c54 495f 4d75  ulti": "MULTI_Mu
+0001e0f0: 6c74 696c 696e 6775 616c 222c 0a20 2020  ltilingual",.   
+0001e100: 2020 2020 207d 0a0a 2020 2020 2020 2020       }..        
+0001e110: 706f 7373 6962 6c65 5f74 6173 6b73 203d  possible_tasks =
+0001e120: 206c 6973 7428 666f 6c64 6572 732e 6b65   list(folders.ke
+0001e130: 7973 2829 290a 2020 2020 2020 2020 7461  ys()).        ta
+0001e140: 736b 203d 2074 6173 6b2e 6c6f 7765 7228  sk = task.lower(
+0001e150: 290a 0a20 2020 2020 2020 2069 6620 7461  )..        if ta
+0001e160: 736b 206e 6f74 2069 6e20 706f 7373 6962  sk not in possib
+0001e170: 6c65 5f74 6173 6b73 3a0a 2020 2020 2020  le_tasks:.      
+0001e180: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
+0001e190: 6545 7272 6f72 2866 2274 6173 6b20 6861  eError(f"task ha
+0001e1a0: 7320 746f 2062 6520 6f6e 6520 6f66 207b  s to be one of {
+0001e1b0: 706f 7373 6962 6c65 5f74 6173 6b73 7d2c  possible_tasks},
+0001e1c0: 2062 7574 2069 7320 277b 7461 736b 7d27   but is '{task}'
+0001e1d0: 2229 0a0a 2020 2020 2020 2020 2320 636f  ")..        # co
+0001e1e0: 6c75 6d6e 2066 6f72 6d61 740a 2020 2020  lumn format.    
+0001e1f0: 2020 2020 636f 6c75 6d6e 7320 3d20 7b30      columns = {0
+0001e200: 3a20 2274 6578 7422 2c20 333a 2022 6e65  : "text", 3: "ne
+0001e210: 7222 7d0a 0a20 2020 2020 2020 2023 2074  r"}..        # t
+0001e220: 6869 7320 6461 7461 7365 7420 6e61 6d65  his dataset name
+0001e230: 0a20 2020 2020 2020 2064 6174 6173 6574  .        dataset
+0001e240: 5f6e 616d 6520 3d20 7365 6c66 2e5f 5f63  _name = self.__c
+0001e250: 6c61 7373 5f5f 2e5f 5f6e 616d 655f 5f2e  lass__.__name__.
+0001e260: 6c6f 7765 7228 290a 0a20 2020 2020 2020  lower()..       
+0001e270: 2064 6174 615f 666f 6c64 6572 203d 2063   data_folder = c
+0001e280: 6163 6865 645f 7061 7468 2822 7333 3a2f  ached_path("s3:/
+0001e290: 2f6d 756c 7469 636f 6e65 7222 2c20 6261  /multiconer", ba
+0001e2a0: 7365 5f70 6174 6820 2f20 6461 7461 7365  se_path / datase
+0001e2b0: 745f 6e61 6d65 2920 2f20 226d 756c 7469  t_name) / "multi
+0001e2c0: 636f 6e65 7232 3032 3222 0a0a 2020 2020  coner2022"..    
+0001e2d0: 2020 2020 7472 6169 6e5f 6669 6c65 7320      train_files 
+0001e2e0: 3d20 5b64 6174 615f 666f 6c64 6572 202f  = [data_folder /
+0001e2f0: 2066 6f6c 6465 7273 5b74 6173 6b5d 202f   folders[task] /
+0001e300: 2066 227b 7461 736b 7d5f 7472 6169 6e2e   f"{task}_train.
+0001e310: 636f 6e6c 6c22 5d0a 2020 2020 2020 2020  conll"].        
+0001e320: 6465 765f 6669 6c65 7320 3d20 5b64 6174  dev_files = [dat
+0001e330: 615f 666f 6c64 6572 202f 2066 6f6c 6465  a_folder / folde
+0001e340: 7273 5b74 6173 6b5d 202f 2066 227b 7461  rs[task] / f"{ta
+0001e350: 736b 7d5f 6465 762e 636f 6e6c 6c22 5d0a  sk}_dev.conll"].
+0001e360: 2020 2020 2020 2020 7465 7374 5f66 696c          test_fil
+0001e370: 6573 203d 205b 6461 7461 5f66 6f6c 6465  es = [data_folde
+0001e380: 7220 2f20 666f 6c64 6572 735b 7461 736b  r / folders[task
+0001e390: 5d20 2f20 6622 7b74 6173 6b7d 5f74 6573  ] / f"{task}_tes
+0001e3a0: 742e 636f 6e6c 6c22 5d0a 0a20 2020 2020  t.conll"]..     
+0001e3b0: 2020 2073 7570 6572 2829 2e5f 5f69 6e69     super().__ini
+0001e3c0: 745f 5f28 0a20 2020 2020 2020 2020 2020  t__(.           
+0001e3d0: 2074 7261 696e 5f66 696c 6573 3d74 7261   train_files=tra
+0001e3e0: 696e 5f66 696c 6573 2c0a 2020 2020 2020  in_files,.      
+0001e3f0: 2020 2020 2020 6465 765f 6669 6c65 733d        dev_files=
+0001e400: 6465 765f 6669 6c65 732c 0a20 2020 2020  dev_files,.     
+0001e410: 2020 2020 2020 2074 6573 745f 6669 6c65         test_file
+0001e420: 733d 7465 7374 5f66 696c 6573 2c0a 2020  s=test_files,.  
+0001e430: 2020 2020 2020 2020 2020 636f 6c75 6d6e            column
+0001e440: 5f66 6f72 6d61 743d 636f 6c75 6d6e 732c  _format=columns,
+0001e450: 0a20 2020 2020 2020 2020 2020 2063 6f6d  .            com
+0001e460: 6d65 6e74 5f73 796d 626f 6c3d 2223 2069  ment_symbol="# i
+0001e470: 6420 222c 0a20 2020 2020 2020 2020 2020  d ",.           
+0001e480: 2069 6e5f 6d65 6d6f 7279 3d69 6e5f 6d65   in_memory=in_me
+0001e490: 6d6f 7279 2c0a 2020 2020 2020 2020 2020  mory,.          
+0001e4a0: 2020 2a2a 636f 7270 7573 6172 6773 2c0a    **corpusargs,.
+0001e4b0: 2020 2020 2020 2020 290a 0a0a 636c 6173          )...clas
+0001e4c0: 7320 4e45 525f 4d55 4c54 495f 434f 4e45  s NER_MULTI_CONE
+0001e4d0: 525f 5632 284d 756c 7469 4669 6c65 436f  R_V2(MultiFileCo
+0001e4e0: 6c75 6d6e 436f 7270 7573 293a 0a20 2020  lumnCorpus):.   
+0001e4f0: 2064 6566 205f 5f69 6e69 745f 5f28 0a20   def __init__(. 
+0001e500: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
+0001e510: 2020 2020 2074 6173 6b3a 2073 7472 203d       task: str =
+0001e520: 2022 6d75 6c74 6922 2c0a 2020 2020 2020   "multi",.      
+0001e530: 2020 6261 7365 5f70 6174 683a 204f 7074    base_path: Opt
+0001e540: 696f 6e61 6c5b 556e 696f 6e5b 7374 722c  ional[Union[str,
+0001e550: 2050 6174 685d 5d20 3d20 4e6f 6e65 2c0a   Path]] = None,.
+0001e560: 2020 2020 2020 2020 696e 5f6d 656d 6f72          in_memor
+0001e570: 793a 2062 6f6f 6c20 3d20 5472 7565 2c0a  y: bool = True,.
+0001e580: 2020 2020 2020 2020 7573 655f 6465 765f          use_dev_
+0001e590: 6173 5f74 6573 743a 2062 6f6f 6c20 3d20  as_test: bool = 
+0001e5a0: 5472 7565 2c0a 2020 2020 2020 2020 2a2a  True,.        **
+0001e5b0: 636f 7270 7573 6172 6773 2c0a 2020 2020  corpusargs,.    
+0001e5c0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+0001e5d0: 2020 2022 2222 496e 6974 6961 6c69 7a65     """Initialize
+0001e5e0: 2074 6865 204d 756c 7469 436f 4e65 7220   the MultiCoNer 
+0001e5f0: 5632 2063 6f72 7075 7320 666f 7220 7468  V2 corpus for th
+0001e600: 6520 5365 6d65 7661 6c32 3032 3320 776f  e Semeval2023 wo
+0001e610: 726b 7368 6f70 2e0a 0a20 2020 2020 2020  rkshop...       
+0001e620: 2054 6869 7320 6973 206f 6e6c 7920 706f   This is only po
+0001e630: 7373 6962 6c65 2069 6620 796f 7527 7665  ssible if you've
+0001e640: 2061 7070 6c69 6564 2061 6e64 2064 6f77   applied and dow
+0001e650: 6e6c 6f61 6465 6420 6974 2074 6f20 796f  nloaded it to yo
+0001e660: 7572 206d 6163 6869 6e65 2e0a 2020 2020  ur machine..    
+0001e670: 2020 2020 4170 706c 7920 666f 7220 7468      Apply for th
+0001e680: 6520 636f 7270 7573 2066 726f 6d20 6865  e corpus from he
+0001e690: 7265 2068 7474 7073 3a2f 2f6d 756c 7469  re https://multi
+0001e6a0: 636f 6e65 722e 6769 7468 7562 2e69 6f2f  coner.github.io/
+0001e6b0: 6461 7461 7365 7420 616e 6420 756e 7061  dataset and unpa
+0001e6c0: 636b 2074 6865 202e 7a69 7020 6669 6c65  ck the .zip file
+0001e6d0: 2773 2063 6f6e 7465 6e74 2069 6e74 6f0a  's content into.
+0001e6e0: 2020 2020 2020 2020 6120 666f 6c64 6572          a folder
+0001e6f0: 2063 616c 6c65 6420 276e 6572 5f6d 756c   called 'ner_mul
+0001e700: 7469 5f63 6f6e 6572 5f76 3227 2e20 5468  ti_coner_v2'. Th
+0001e710: 656e 2073 6574 2074 6865 2062 6173 655f  en set the base_
+0001e720: 7061 7468 2070 6172 616d 6574 6572 2069  path parameter i
+0001e730: 6e20 7468 6520 636f 6e73 7472 7563 746f  n the constructo
+0001e740: 7220 746f 2074 6865 2070 6174 6820 746f  r to the path to
+0001e750: 2074 6865 0a20 2020 2020 2020 2070 6172   the.        par
+0001e760: 656e 7420 6469 7265 6374 6f72 7920 7768  ent directory wh
+0001e770: 6572 6520 7468 6520 6e65 725f 6d75 6c74  ere the ner_mult
+0001e780: 695f 636f 6e65 725f 7632 2066 6f6c 6465  i_coner_v2 folde
+0001e790: 7220 7265 7369 6465 732e 2059 6f75 2063  r resides. You c
+0001e7a0: 616e 2061 6c73 6f20 6372 6561 7465 2074  an also create t
+0001e7b0: 6865 206d 756c 7469 636f 6e65 7220 696e  he multiconer in
+0001e7c0: 0a20 2020 2020 2020 2074 6865 207b 464c  .        the {FL
+0001e7d0: 4149 525f 4341 4348 455f 524f 4f54 7d2f  AIR_CACHE_ROOT}/
+0001e7e0: 6461 7461 7365 7473 2066 6f6c 6465 7220  datasets folder 
+0001e7f0: 746f 206c 6561 7665 2074 6865 2070 6174  to leave the pat
+0001e800: 6820 656d 7074 792e 0a20 2020 2020 2020  h empty..       
+0001e810: 203a 7061 7261 6d20 6261 7365 5f70 6174   :param base_pat
+0001e820: 683a 2050 6174 6820 746f 2074 6865 206e  h: Path to the n
+0001e830: 6572 5f6d 756c 7469 5f63 6f6e 6572 5f76  er_multi_coner_v
+0001e840: 3220 636f 7270 7573 2028 692e 652e 2027  2 corpus (i.e. '
+0001e850: 6e65 725f 6d75 6c74 695f 636f 6e65 725f  ner_multi_coner_
+0001e860: 7632 2720 666f 6c64 6572 2920 6f6e 2079  v2' folder) on y
+0001e870: 6f75 7220 6d61 6368 696e 650a 2020 2020  our machine.    
+0001e880: 2020 2020 504f 5320 7461 6773 206f 7220      POS tags or 
+0001e890: 6368 756e 6b73 2072 6573 7065 6374 6976  chunks respectiv
+0001e8a0: 656c 790a 2020 2020 2020 2020 3a70 6172  ely.        :par
+0001e8b0: 616d 2069 6e5f 6d65 6d6f 7279 3a20 4966  am in_memory: If
+0001e8c0: 2054 7275 652c 206b 6565 7073 2064 6174   True, keeps dat
+0001e8d0: 6173 6574 2069 6e20 6d65 6d6f 7279 2067  aset in memory g
+0001e8e0: 6976 696e 6720 7370 6565 6475 7073 2069  iving speedups i
+0001e8f0: 6e20 7472 6169 6e69 6e67 2e0a 2020 2020  n training..    
+0001e900: 2020 2020 3a70 6172 616d 2075 7365 5f64      :param use_d
+0001e910: 6576 5f61 735f 7465 7374 3a20 4966 2054  ev_as_test: If T
+0001e920: 7275 652c 2069 7420 7573 6573 2074 6865  rue, it uses the
+0001e930: 2064 6576 2073 6574 2061 7320 7465 7374   dev set as test
+0001e940: 2073 6574 2061 6e64 2073 616d 706c 6573   set and samples
+0001e950: 2072 616e 646f 6d20 7472 6169 6e69 6e67   random training
+0001e960: 2064 6174 6120 666f 7220 6120 6465 7620   data for a dev 
+0001e970: 7370 6c69 742e 0a20 2020 2020 2020 203a  split..        :
+0001e980: 7061 7261 6d20 7461 736b 3a20 6569 7468  param task: eith
+0001e990: 6572 2027 6d75 6c74 6927 2c20 2763 6f64  er 'multi', 'cod
+0001e9a0: 652d 7377 6974 6368 272c 206f 7220 7468  e-switch', or th
+0001e9b0: 6520 6c61 6e67 7561 6765 2063 6f64 6520  e language code 
+0001e9c0: 666f 7220 6f6e 6520 6f66 2074 6865 206d  for one of the m
+0001e9d0: 6f6e 6f20 7461 736b 732e 0a20 2020 2020  ono tasks..     
+0001e9e0: 2020 2022 2222 0a20 2020 2020 2020 2062     """.        b
+0001e9f0: 6173 655f 7061 7468 203d 206b 6f6c 6962  ase_path = kolib
+0001ea00: 7269 2e63 6163 6865 5f72 6f6f 7420 2f20  ri.cache_root / 
+0001ea10: 2264 6174 6173 6574 7322 2069 6620 6e6f  "datasets" if no
+0001ea20: 7420 6261 7365 5f70 6174 6820 656c 7365  t base_path else
+0001ea30: 2050 6174 6828 6261 7365 5f70 6174 6829   Path(base_path)
+0001ea40: 0a0a 2020 2020 2020 2020 666f 6c64 6572  ..        folder
+0001ea50: 7320 3d20 7b0a 2020 2020 2020 2020 2020  s = {.          
+0001ea60: 2020 2262 6e22 3a20 2242 4e2d 4261 6e67    "bn": "BN-Bang
+0001ea70: 6c61 222c 0a20 2020 2020 2020 2020 2020  la",.           
+0001ea80: 2022 6465 223a 2022 4445 2d47 6572 6d61   "de": "DE-Germa
+0001ea90: 6e22 2c0a 2020 2020 2020 2020 2020 2020  n",.            
+0001eaa0: 2265 6e22 3a20 2245 4e2d 456e 676c 6973  "en": "EN-Englis
+0001eab0: 6822 2c0a 2020 2020 2020 2020 2020 2020  h",.            
+0001eac0: 2265 7322 3a20 2245 532d 4573 7061 6e69  "es": "ES-Espani
+0001ead0: 7368 222c 0a20 2020 2020 2020 2020 2020  sh",.           
+0001eae0: 2022 6661 223a 2022 4641 2d46 6172 7369   "fa": "FA-Farsi
+0001eaf0: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+0001eb00: 6672 223a 2022 4652 2d46 7265 6e63 6822  fr": "FR-French"
+0001eb10: 2c0a 2020 2020 2020 2020 2020 2020 2268  ,.            "h
+0001eb20: 6922 3a20 2248 492d 4869 6e64 6922 2c0a  i": "HI-Hindi",.
+0001eb30: 2020 2020 2020 2020 2020 2020 2269 7422              "it"
+0001eb40: 3a20 2249 542d 4974 616c 6961 6e22 2c0a  : "IT-Italian",.
+0001eb50: 2020 2020 2020 2020 2020 2020 2270 7422              "pt"
+0001eb60: 3a20 2250 542d 506f 7274 7567 7565 7365  : "PT-Portuguese
+0001eb70: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+0001eb80: 7376 223a 2022 5356 2d53 7765 6469 7368  sv": "SV-Swedish
+0001eb90: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+0001eba0: 756b 223a 2022 554b 2d55 6b72 6169 6e69  uk": "UK-Ukraini
+0001ebb0: 616e 222c 0a20 2020 2020 2020 2020 2020  an",.           
+0001ebc0: 2022 7a68 223a 2022 5a48 2d43 6869 6e65   "zh": "ZH-Chine
+0001ebd0: 7365 222c 0a20 2020 2020 2020 207d 0a0a  se",.        }..
+0001ebe0: 2020 2020 2020 2020 706f 7373 6962 6c65          possible
+0001ebf0: 5f74 6173 6b73 203d 205b 2a6c 6973 7428  _tasks = [*list(
+0001ec00: 666f 6c64 6572 732e 6b65 7973 2829 292c  folders.keys()),
+0001ec10: 2022 6d75 6c74 6922 5d0a 2020 2020 2020   "multi"].      
+0001ec20: 2020 7461 736b 203d 2074 6173 6b2e 6c6f    task = task.lo
+0001ec30: 7765 7228 290a 0a20 2020 2020 2020 2069  wer()..        i
+0001ec40: 6620 7461 736b 206e 6f74 2069 6e20 706f  f task not in po
+0001ec50: 7373 6962 6c65 5f74 6173 6b73 3a0a 2020  ssible_tasks:.  
+0001ec60: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+0001ec70: 5661 6c75 6545 7272 6f72 2866 2274 6173  ValueError(f"tas
+0001ec80: 6b20 6861 7320 746f 2062 6520 6f6e 6520  k has to be one 
+0001ec90: 6f66 207b 706f 7373 6962 6c65 5f74 6173  of {possible_tas
+0001eca0: 6b73 7d2c 2062 7574 2069 7320 277b 7461  ks}, but is '{ta
+0001ecb0: 736b 7d27 2229 0a0a 2020 2020 2020 2020  sk}'")..        
+0001ecc0: 2320 636f 6c75 6d6e 2066 6f72 6d61 740a  # column format.
+0001ecd0: 2020 2020 2020 2020 636f 6c75 6d6e 7320          columns 
+0001ece0: 3d20 7b30 3a20 2274 6578 7422 2c20 333a  = {0: "text", 3:
+0001ecf0: 2022 6e65 7222 7d0a 0a20 2020 2020 2020   "ner"}..       
+0001ed00: 2023 2074 6869 7320 6461 7461 7365 7420   # this dataset 
+0001ed10: 6e61 6d65 0a20 2020 2020 2020 2064 6174  name.        dat
+0001ed20: 6173 6574 5f6e 616d 6520 3d20 7365 6c66  aset_name = self
+0001ed30: 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e 616d  .__class__.__nam
+0001ed40: 655f 5f2e 6c6f 7765 7228 290a 0a20 2020  e__.lower()..   
+0001ed50: 2020 2020 2064 6174 615f 666f 6c64 6572       data_folder
+0001ed60: 203d 2062 6173 655f 7061 7468 202f 2064   = base_path / d
+0001ed70: 6174 6173 6574 5f6e 616d 6520 2f20 2274  ataset_name / "t
+0001ed80: 7261 696e 5f64 6576 220a 0a20 2020 2020  rain_dev"..     
+0001ed90: 2020 2069 6620 6e6f 7420 6461 7461 5f66     if not data_f
+0001eda0: 6f6c 6465 722e 6578 6973 7473 2829 3a0a  older.exists():.
+0001edb0: 2020 2020 2020 2020 2020 2020 6c6f 672e              log.
+0001edc0: 7761 726e 696e 6728 222d 2220 2a20 3130  warning("-" * 10
+0001edd0: 3029 0a20 2020 2020 2020 2020 2020 206c  0).            l
+0001ede0: 6f67 2e77 6172 6e69 6e67 2866 2757 4152  og.warning(f'WAR
+0001edf0: 4e49 4e47 3a20 4d75 6c74 6943 6f4e 6572  NING: MultiCoNer
+0001ee00: 5632 2064 6174 6173 6574 206e 6f74 2066  V2 dataset not f
+0001ee10: 6f75 6e64 2061 7420 227b 6461 7461 5f66  ound at "{data_f
+0001ee20: 6f6c 6465 727d 222e 2729 0a20 2020 2020  older}".').     
+0001ee30: 2020 2020 2020 206c 6f67 2e77 6172 6e69         log.warni
+0001ee40: 6e67 2827 496e 7374 7275 6374 696f 6e73  ng('Instructions
+0001ee50: 2066 6f72 206f 6274 6169 6e69 6e67 2074   for obtaining t
+0001ee60: 6865 2064 6174 6120 6361 6e20 6265 2066  he data can be f
+0001ee70: 6f75 6e64 2068 6572 653a 2068 7474 7073  ound here: https
+0001ee80: 3a2f 2f6d 756c 7469 636f 6e65 722e 6769  ://multiconer.gi
+0001ee90: 7468 7562 2e69 6f2f 6461 7461 7365 7422  thub.io/dataset"
+0001eea0: 2729 0a20 2020 2020 2020 2020 2020 206c  ').            l
+0001eeb0: 6f67 2e77 6172 6e69 6e67 2822 2d22 202a  og.warning("-" *
+0001eec0: 2031 3030 290a 0a20 2020 2020 2020 2069   100)..        i
+0001eed0: 6620 7461 736b 203d 3d20 226d 756c 7469  f task == "multi
+0001eee0: 223a 0a20 2020 2020 2020 2020 2020 2074  ":.            t
+0001eef0: 7261 696e 5f66 696c 6573 203d 206c 6973  rain_files = lis
+0001ef00: 7428 6461 7461 5f66 6f6c 6465 722e 676c  t(data_folder.gl
+0001ef10: 6f62 2822 2a2d 7472 6169 6e2e 636f 6e6c  ob("*-train.conl
+0001ef20: 6c22 2929 0a20 2020 2020 2020 2020 2020  l")).           
+0001ef30: 2064 6576 5f66 696c 6573 203d 206c 6973   dev_files = lis
+0001ef40: 7428 6461 7461 5f66 6f6c 6465 722e 676c  t(data_folder.gl
+0001ef50: 6f62 2822 2a2d 6465 762e 636f 6e6c 6c22  ob("*-dev.conll"
+0001ef60: 2929 0a20 2020 2020 2020 2065 6c73 653a  )).        else:
+0001ef70: 0a20 2020 2020 2020 2020 2020 2074 7261  .            tra
+0001ef80: 696e 5f66 696c 6573 203d 205b 6461 7461  in_files = [data
+0001ef90: 5f66 6f6c 6465 7220 2f20 6622 7b74 6173  _folder / f"{tas
+0001efa0: 6b7d 2d74 7261 696e 2e63 6f6e 6c6c 225d  k}-train.conll"]
+0001efb0: 0a20 2020 2020 2020 2020 2020 2064 6576  .            dev
+0001efc0: 5f66 696c 6573 203d 205b 6461 7461 5f66  _files = [data_f
+0001efd0: 6f6c 6465 7220 2f20 6622 7b74 6173 6b7d  older / f"{task}
+0001efe0: 2d64 6576 2e63 6f6e 6c6c 225d 0a20 2020  -dev.conll"].   
+0001eff0: 2020 2020 2074 6573 745f 6669 6c65 7320       test_files 
+0001f000: 3d20 5b5d 0a0a 2020 2020 2020 2020 6966  = []..        if
+0001f010: 2075 7365 5f64 6576 5f61 735f 7465 7374   use_dev_as_test
+0001f020: 3a0a 2020 2020 2020 2020 2020 2020 7465  :.            te
+0001f030: 7374 5f66 696c 6573 203d 2064 6576 5f66  st_files = dev_f
+0001f040: 696c 6573 0a20 2020 2020 2020 2020 2020  iles.           
+0001f050: 2064 6576 5f66 696c 6573 203d 205b 5d0a   dev_files = [].
+0001f060: 2020 2020 2020 2020 7375 7065 7228 292e          super().
+0001f070: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
+0001f080: 2020 2020 2020 7472 6169 6e5f 6669 6c65        train_file
+0001f090: 733d 7472 6169 6e5f 6669 6c65 732c 0a20  s=train_files,. 
+0001f0a0: 2020 2020 2020 2020 2020 2064 6576 5f66             dev_f
+0001f0b0: 696c 6573 3d64 6576 5f66 696c 6573 2c0a  iles=dev_files,.
+0001f0c0: 2020 2020 2020 2020 2020 2020 7465 7374              test
+0001f0d0: 5f66 696c 6573 3d74 6573 745f 6669 6c65  _files=test_file
+0001f0e0: 732c 0a20 2020 2020 2020 2020 2020 2063  s,.            c
+0001f0f0: 6f6c 756d 6e5f 666f 726d 6174 3d63 6f6c  olumn_format=col
+0001f100: 756d 6e73 2c0a 2020 2020 2020 2020 2020  umns,.          
+0001f110: 2020 636f 6d6d 656e 745f 7379 6d62 6f6c    comment_symbol
+0001f120: 3d22 2320 6964 2022 2c0a 2020 2020 2020  ="# id ",.      
+0001f130: 2020 2020 2020 696e 5f6d 656d 6f72 793d        in_memory=
+0001f140: 696e 5f6d 656d 6f72 792c 0a20 2020 2020  in_memory,.     
+0001f150: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
+0001f160: 7267 732c 0a20 2020 2020 2020 2029 0a0a  rgs,.        )..
+0001f170: 0a63 6c61 7373 204e 4552 5f4d 554c 5449  .class NER_MULTI
+0001f180: 5f57 494b 4941 4e4e 284d 756c 7469 436f  _WIKIANN(MultiCo
+0001f190: 7270 7573 293a 0a20 2020 2064 6566 205f  rpus):.    def _
+0001f1a0: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
+0001f1b0: 2073 656c 662c 0a20 2020 2020 2020 206c   self,.        l
+0001f1c0: 616e 6775 6167 6573 3a20 556e 696f 6e5b  anguages: Union[
+0001f1d0: 7374 722c 204c 6973 745b 7374 725d 5d20  str, List[str]] 
+0001f1e0: 3d20 2265 6e22 2c0a 2020 2020 2020 2020  = "en",.        
+0001f1f0: 6261 7365 5f70 6174 683a 204f 7074 696f  base_path: Optio
+0001f200: 6e61 6c5b 556e 696f 6e5b 7374 722c 2050  nal[Union[str, P
+0001f210: 6174 685d 5d20 3d20 4e6f 6e65 2c0a 2020  ath]] = None,.  
+0001f220: 2020 2020 2020 696e 5f6d 656d 6f72 793a        in_memory:
+0001f230: 2062 6f6f 6c20 3d20 4661 6c73 652c 0a20   bool = False,. 
+0001f240: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
+0001f250: 7267 732c 0a20 2020 2029 202d 3e20 4e6f  rgs,.    ) -> No
+0001f260: 6e65 3a0a 2020 2020 2020 2020 2222 2249  ne:.        """I
+0001f270: 6e69 7469 616c 697a 6520 7468 6520 576b  nitialize the Wk
+0001f280: 6941 6e6e 2063 6f72 7075 7320 666f 7220  iAnn corpus for 
+0001f290: 6372 6f73 732d 6c69 6e67 7561 6c20 4e45  cross-lingual NE
+0001f2a0: 5220 636f 6e73 6973 7469 6e67 206f 6620  R consisting of 
+0001f2b0: 6461 7461 7365 7473 2066 726f 6d20 3238  datasets from 28
+0001f2c0: 3220 6c61 6e67 7561 6765 7320 7468 6174  2 languages that
+0001f2d0: 2065 7869 7374 2069 6e20 5769 6b69 7065   exist in Wikipe
+0001f2e0: 6469 612e 0a0a 2020 2020 2020 2020 5365  dia...        Se
+0001f2f0: 6520 6874 7470 733a 2f2f 656c 6973 612d  e https://elisa-
+0001f300: 6965 2e67 6974 6875 622e 696f 2f77 696b  ie.github.io/wik
+0001f310: 6961 6e6e 2f20 666f 7220 6465 7461 696c  iann/ for detail
+0001f320: 7320 616e 6420 666f 7220 7468 6520 6c61  s and for the la
+0001f330: 6e67 7561 6765 7320 616e 6420 7468 6569  nguages and thei
+0001f340: 720a 2020 2020 2020 2020 7265 7370 6563  r.        respec
+0001f350: 7469 7665 2061 6262 7265 7665 6174 696f  tive abbreveatio
+0001f360: 6e73 2c20 692e 652e 2022 656e 2220 666f  ns, i.e. "en" fo
+0001f370: 7220 656e 676c 6973 682e 2028 6c69 6365  r english. (lice
+0001f380: 6e73 653a 2068 7474 7073 3a2f 2f6f 7065  nse: https://ope
+0001f390: 6e64 6174 6163 6f6d 6d6f 6e73 2e6f 7267  ndatacommons.org
+0001f3a0: 2f6c 6963 656e 7365 732f 6279 2f29 0a0a  /licenses/by/)..
+0001f3b0: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
+0001f3c0: 7273 0a20 2020 2020 2020 202d 2d2d 2d2d  rs.        -----
+0001f3d0: 2d2d 2d2d 2d0a 2020 2020 2020 2020 6c61  -----.        la
+0001f3e0: 6e67 7561 6765 7320 3a20 556e 696f 6e5b  nguages : Union[
+0001f3f0: 7374 722c 204c 6973 745b 7374 725d 5d0a  str, List[str]].
+0001f400: 2020 2020 2020 2020 2020 2020 5368 6f75              Shou
+0001f410: 6c64 2062 6520 616e 2061 6262 7265 7669  ld be an abbrevi
+0001f420: 6174 696f 6e20 6f66 2061 206c 616e 6775  ation of a langu
+0001f430: 6167 6520 2822 656e 222c 2022 6465 222c  age ("en", "de",
+0001f440: 2e2e 2920 6f72 2061 206c 6973 7420 6f66  ..) or a list of
+0001f450: 2061 6262 7265 7669 6174 696f 6e73 2e0a   abbreviations..
+0001f460: 2020 2020 2020 2020 2020 2020 5468 6520              The 
+0001f470: 6461 7461 7365 7473 206f 6620 616c 6c20  datasets of all 
+0001f480: 7061 7373 6564 206c 616e 6775 6167 6573  passed languages
+0001f490: 2077 696c 6c20 6265 2073 6176 6564 2069   will be saved i
+0001f4a0: 6e20 6f6e 6520 4d75 6c74 6943 6f72 7075  n one MultiCorpu
+0001f4b0: 732e 0a20 2020 2020 2020 2020 2020 2028  s..            (
+0001f4c0: 4e6f 7465 2074 6861 742c 2065 7665 6e20  Note that, even 
+0001f4d0: 7468 6f75 6768 206c 6973 7465 6420 6f6e  though listed on
+0001f4e0: 2068 7474 7073 3a2f 2f65 6c69 7361 2d69   https://elisa-i
+0001f4f0: 652e 6769 7468 7562 2e69 6f2f 7769 6b69  e.github.io/wiki
+0001f500: 616e 6e2f 2073 6f6d 6520 6461 7461 7365  ann/ some datase
+0001f510: 7473 2061 7265 2065 6d70 7479 2e0a 2020  ts are empty..  
+0001f520: 2020 2020 2020 2020 2020 5468 6973 2069            This i
+0001f530: 6e63 6c75 6465 7320 2261 6122 2c20 2263  ncludes "aa", "c
+0001f540: 686f 222c 2022 686f 222c 2022 687a 222c  ho", "ho", "hz",
+0001f550: 2022 6969 222c 2022 6a61 6d22 2c20 226b   "ii", "jam", "k
+0001f560: 6a22 2c20 226b 7222 2c20 226d 7573 222c  j", "kr", "mus",
+0001f570: 2022 6f6c 6f22 2061 6e64 2022 7463 7922   "olo" and "tcy"
+0001f580: 2e29 0a20 2020 2020 2020 2062 6173 655f  .).        base_
+0001f590: 7061 7468 203a 2055 6e69 6f6e 5b73 7472  path : Union[str
+0001f5a0: 2c20 5061 7468 5d2c 206f 7074 696f 6e61  , Path], optiona
+0001f5b0: 6c0a 2020 2020 2020 2020 2020 2020 4465  l.            De
+0001f5c0: 6661 756c 7420 6973 204e 6f6e 652c 206d  fault is None, m
+0001f5d0: 6561 6e69 6e67 2074 6861 7420 636f 7270  eaning that corp
+0001f5e0: 7573 2067 6574 7320 6175 746f 2d64 6f77  us gets auto-dow
+0001f5f0: 6e6c 6f61 6465 6420 616e 6420 6c6f 6164  nloaded and load
+0001f600: 6564 2e20 596f 7520 6361 6e20 6f76 6572  ed. You can over
+0001f610: 7269 6465 2074 6869 730a 2020 2020 2020  ride this.      
+0001f620: 2020 2020 2020 746f 2070 6f69 6e74 2074        to point t
+0001f630: 6f20 6120 6469 6666 6572 656e 7420 666f  o a different fo
+0001f640: 6c64 6572 2062 7574 2074 7970 6963 616c  lder but typical
+0001f650: 6c79 2074 6869 7320 7368 6f75 6c64 206e  ly this should n
+0001f660: 6f74 2062 6520 6e65 6365 7373 6172 792e  ot be necessary.
+0001f670: 0a20 2020 2020 2020 2020 2020 2054 6865  .            The
+0001f680: 2064 6174 6120 6973 2069 6e20 6269 6f2d   data is in bio-
+0001f690: 666f 726d 6174 2e20 4974 2077 696c 6c20  format. It will 
+0001f6a0: 6279 2064 6566 6175 6c74 2028 7769 7468  by default (with
+0001f6b0: 2074 6865 2073 7472 696e 6720 226e 6572   the string "ner
+0001f6c0: 2220 6173 2076 616c 7565 2920 6265 2074  " as value) be t
+0001f6d0: 7261 6e73 666f 726d 6564 0a20 2020 2020  ransformed.     
+0001f6e0: 2020 2020 2020 2069 6e74 6f20 7468 6520         into the 
+0001f6f0: 6269 6f65 7320 666f 726d 6174 2e20 4966  bioes format. If
+0001f700: 2079 6f75 2064 6f6e 7420 7761 6e74 2074   you dont want t
+0001f710: 6861 7420 7365 7420 6974 2074 6f20 4e6f  hat set it to No
+0001f720: 6e65 2e0a 2020 2020 2020 2020 696e 5f6d  ne..        in_m
+0001f730: 656d 6f72 7920 3a20 626f 6f6c 2c20 6f70  emory : bool, op
+0001f740: 7469 6f6e 616c 0a20 2020 2020 2020 2020  tional.         
+0001f750: 2020 2053 7065 6369 6679 2074 6861 7420     Specify that 
+0001f760: 7468 6520 6461 7461 7365 7420 7368 6f75  the dataset shou
+0001f770: 6c64 2062 6520 6c6f 6164 6564 2069 6e20  ld be loaded in 
+0001f780: 6d65 6d6f 7279 2c20 7768 6963 6820 7370  memory, which sp
+0001f790: 6565 6473 2075 7020 7468 6520 7472 6169  eeds up the trai
+0001f7a0: 6e69 6e67 2070 726f 6365 7373 2062 7574  ning process but
+0001f7b0: 2074 616b 6573 2069 6e63 7265 6173 6573   takes increases
+0001f7c0: 2074 6865 2052 414d 2075 7361 6765 2073   the RAM usage s
+0001f7d0: 6967 6e69 6669 6361 6e74 6c79 2e0a 2020  ignificantly..  
+0001f7e0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+0001f7f0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0001f800: 6c61 6e67 7561 6765 732c 2073 7472 293a  languages, str):
+0001f810: 0a20 2020 2020 2020 2020 2020 206c 616e  .            lan
+0001f820: 6775 6167 6573 203d 205b 6c61 6e67 7561  guages = [langua
+0001f830: 6765 735d 0a0a 2020 2020 2020 2020 6261  ges]..        ba
+0001f840: 7365 5f70 6174 6820 3d20 6b6f 6c69 6272  se_path = kolibr
+0001f850: 692e 6361 6368 655f 726f 6f74 202f 2022  i.cache_root / "
+0001f860: 6461 7461 7365 7473 2220 6966 206e 6f74  datasets" if not
+0001f870: 2062 6173 655f 7061 7468 2065 6c73 6520   base_path else 
+0001f880: 5061 7468 2862 6173 655f 7061 7468 290a  Path(base_path).
+0001f890: 0a20 2020 2020 2020 2023 2063 6f6c 756d  .        # colum
+0001f8a0: 6e20 666f 726d 6174 0a20 2020 2020 2020  n format.       
+0001f8b0: 2063 6f6c 756d 6e73 203d 207b 303a 2022   columns = {0: "
+0001f8c0: 7465 7874 222c 2031 3a20 226e 6572 227d  text", 1: "ner"}
+0001f8d0: 0a0a 2020 2020 2020 2020 2320 7468 6973  ..        # this
+0001f8e0: 2064 6174 6173 6574 206e 616d 650a 2020   dataset name.  
+0001f8f0: 2020 2020 2020 6461 7461 7365 745f 6e61        dataset_na
+0001f900: 6d65 203d 2073 656c 662e 5f5f 636c 6173  me = self.__clas
+0001f910: 735f 5f2e 5f5f 6e61 6d65 5f5f 2e6c 6f77  s__.__name__.low
+0001f920: 6572 2829 0a0a 2020 2020 2020 2020 6461  er()..        da
+0001f930: 7461 5f66 6f6c 6465 7220 3d20 6261 7365  ta_folder = base
+0001f940: 5f70 6174 6820 2f20 6461 7461 7365 745f  _path / dataset_
+0001f950: 6e61 6d65 0a0a 2020 2020 2020 2020 2320  name..        # 
+0001f960: 466f 7220 6561 6368 206c 616e 6775 6167  For each languag
+0001f970: 6520 696e 206c 616e 6775 6167 6573 2c20  e in languages, 
+0001f980: 7468 6520 6669 6c65 2069 7320 646f 776e  the file is down
+0001f990: 6c6f 6164 6564 2069 6620 6e6f 7420 6578  loaded if not ex
+0001f9a0: 6973 7465 6e74 0a20 2020 2020 2020 2023  istent.        #
+0001f9b0: 2054 6865 6e20 6120 636f 6d6c 756d 6e63   Then a comlumnc
+0001f9c0: 6f72 7075 7320 6f66 2074 6861 7420 6461  orpus of that da
+0001f9d0: 7461 2069 7320 6372 6561 7465 6420 616e  ta is created an
+0001f9e0: 6420 7361 7665 6420 696e 2061 206c 6973  d saved in a lis
+0001f9f0: 740a 2020 2020 2020 2020 2320 7468 6973  t.        # this
+0001fa00: 206c 6973 7420 6973 2068 616e 6465 6420   list is handed 
+0001fa10: 746f 2074 6865 206d 756c 7469 636f 7270  to the multicorp
+0001fa20: 7573 0a0a 2020 2020 2020 2020 2320 6c69  us..        # li
+0001fa30: 7374 2074 6861 7420 636f 6e74 6169 6e73  st that contains
+0001fa40: 2074 6865 2063 6f6c 756d 6e63 6f70 6f72   the columncopor
+0001fa50: 610a 2020 2020 2020 2020 636f 7270 6f72  a.        corpor
+0001fa60: 613a 204c 6973 745b 436f 7270 7573 5d20  a: List[Corpus] 
+0001fa70: 3d20 5b5d 0a0a 2020 2020 2020 2020 676f  = []..        go
+0001fa80: 6f67 6c65 5f64 7269 7665 5f70 6174 6820  ogle_drive_path 
+0001fa90: 3d20 2268 7474 7073 3a2f 2f64 7269 7665  = "https://drive
+0001faa0: 2e67 6f6f 676c 652e 636f 6d2f 7563 3f69  .google.com/uc?i
+0001fab0: 643d 220a 2020 2020 2020 2020 2320 646f  d=".        # do
+0001fac0: 776e 6c6f 6164 2064 6174 6120 6966 206e  wnload data if n
+0001fad0: 6563 6573 7361 7279 0a20 2020 2020 2020  ecessary.       
+0001fae0: 2066 6972 7374 203d 2054 7275 650a 2020   first = True.  
+0001faf0: 2020 2020 2020 666f 7220 6c61 6e67 7561        for langua
+0001fb00: 6765 2069 6e20 6c61 6e67 7561 6765 733a  ge in languages:
+0001fb10: 0a20 2020 2020 2020 2020 2020 206c 616e  .            lan
+0001fb20: 6775 6167 655f 666f 6c64 6572 203d 2064  guage_folder = d
+0001fb30: 6174 615f 666f 6c64 6572 202f 206c 616e  ata_folder / lan
+0001fb40: 6775 6167 650a 2020 2020 2020 2020 2020  guage.          
+0001fb50: 2020 6669 6c65 5f6e 616d 6520 3d20 2277    file_name = "w
+0001fb60: 696b 6961 6e6e 2d22 202b 206c 616e 6775  ikiann-" + langu
+0001fb70: 6167 6520 2b20 222e 6269 6f22 0a0a 2020  age + ".bio"..  
+0001fb80: 2020 2020 2020 2020 2020 2320 6966 206c            # if l
+0001fb90: 616e 6775 6167 6520 6e6f 7420 646f 776e  anguage not down
+0001fba0: 6c6f 6164 6564 2079 6574 2c20 646f 776e  loaded yet, down
+0001fbb0: 6c6f 6164 2069 740a 2020 2020 2020 2020  load it.        
+0001fbc0: 2020 2020 6966 206e 6f74 206c 616e 6775      if not langu
+0001fbd0: 6167 655f 666f 6c64 6572 2e65 7869 7374  age_folder.exist
+0001fbe0: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
+0001fbf0: 2020 2020 2069 6620 6669 7273 743a 0a20       if first:. 
+0001fc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fc10: 2020 2069 6d70 6f72 7420 7461 7266 696c     import tarfil
+0001fc20: 650a 0a20 2020 2020 2020 2020 2020 2020  e..             
+0001fc30: 2020 2020 2020 2069 6d70 6f72 7420 6764         import gd
+0001fc40: 6f77 6e0a 0a20 2020 2020 2020 2020 2020  own..           
+0001fc50: 2020 2020 2020 2020 2066 6972 7374 203d           first =
+0001fc60: 2046 616c 7365 0a20 2020 2020 2020 2020   False.         
+0001fc70: 2020 2020 2020 2023 2063 7265 6174 6520         # create 
+0001fc80: 666f 6c64 6572 0a20 2020 2020 2020 2020  folder.         
+0001fc90: 2020 2020 2020 206f 732e 6d61 6b65 6469         os.makedi
+0001fca0: 7273 286c 616e 6775 6167 655f 666f 6c64  rs(language_fold
+0001fcb0: 6572 290a 2020 2020 2020 2020 2020 2020  er).            
+0001fcc0: 2020 2020 2320 6765 7420 676f 6f67 6c65      # get google
+0001fcd0: 2064 7269 7665 2069 6420 6672 6f6d 206c   drive id from l
+0001fce0: 6973 740a 2020 2020 2020 2020 2020 2020  ist.            
+0001fcf0: 2020 2020 676f 6f67 6c65 5f69 6420 3d20      google_id = 
+0001fd00: 7365 6c66 2e5f 676f 6f67 6c65 5f64 7269  self._google_dri
+0001fd10: 7665 5f69 645f 6672 6f6d 5f6c 616e 6775  ve_id_from_langu
+0001fd20: 6167 655f 6e61 6d65 286c 616e 6775 6167  age_name(languag
+0001fd30: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
+0001fd40: 2020 2075 726c 203d 2067 6f6f 676c 655f     url = google_
+0001fd50: 6472 6976 655f 7061 7468 202b 2067 6f6f  drive_path + goo
+0001fd60: 676c 655f 6964 0a0a 2020 2020 2020 2020  gle_id..        
+0001fd70: 2020 2020 2020 2020 2320 646f 776e 6c6f          # downlo
+0001fd80: 6164 2066 726f 6d20 676f 6f67 6c65 2064  ad from google d
+0001fd90: 7269 7665 0a20 2020 2020 2020 2020 2020  rive.           
+0001fda0: 2020 2020 2067 646f 776e 2e64 6f77 6e6c       gdown.downl
+0001fdb0: 6f61 6428 7572 6c2c 2073 7472 286c 616e  oad(url, str(lan
+0001fdc0: 6775 6167 655f 666f 6c64 6572 202f 206c  guage_folder / l
+0001fdd0: 616e 6775 6167 6529 202b 2022 2e74 6172  anguage) + ".tar
+0001fde0: 2e67 7a22 290a 0a20 2020 2020 2020 2020  .gz")..         
+0001fdf0: 2020 2020 2020 2023 2075 6e7a 6970 0a20         # unzip. 
+0001fe00: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+0001fe10: 6f67 2e69 6e66 6f28 2245 7874 7261 6374  og.info("Extract
+0001fe20: 696e 6720 6461 7461 2e2e 2e22 290a 2020  ing data...").  
+0001fe30: 2020 2020 2020 2020 2020 2020 2020 7461                ta
+0001fe40: 7220 3d20 7461 7266 696c 652e 6f70 656e  r = tarfile.open
+0001fe50: 2873 7472 286c 616e 6775 6167 655f 666f  (str(language_fo
+0001fe60: 6c64 6572 202f 206c 616e 6775 6167 6529  lder / language)
+0001fe70: 202b 2022 2e74 6172 2e67 7a22 2c20 2272   + ".tar.gz", "r
+0001fe80: 3a67 7a22 290a 2020 2020 2020 2020 2020  :gz").          
+0001fe90: 2020 2020 2020 2320 7461 722e 6578 7472        # tar.extr
+0001fea0: 6163 7461 6c6c 286c 616e 6775 6167 655f  actall(language_
+0001feb0: 666f 6c64 6572 2c6d 656d 6265 7273 3d5b  folder,members=[
+0001fec0: 7461 722e 6765 746d 656d 6265 7228 6669  tar.getmember(fi
+0001fed0: 6c65 5f6e 616d 6529 5d29 0a20 2020 2020  le_name)]).     
+0001fee0: 2020 2020 2020 2020 2020 2074 6172 2e65             tar.e
+0001fef0: 7874 7261 6374 2866 696c 655f 6e61 6d65  xtract(file_name
+0001ff00: 2c20 7374 7228 6c61 6e67 7561 6765 5f66  , str(language_f
+0001ff10: 6f6c 6465 7229 290a 2020 2020 2020 2020  older)).        
+0001ff20: 2020 2020 2020 2020 7461 722e 636c 6f73          tar.clos
+0001ff30: 6528 290a 2020 2020 2020 2020 2020 2020  e().            
+0001ff40: 2020 2020 6c6f 672e 696e 666f 2822 2e2e      log.info("..
+0001ff50: 2e64 6f6e 652e 2229 0a0a 2020 2020 2020  .done.")..      
+0001ff60: 2020 2020 2020 2020 2020 2320 7472 616e            # tran
+0001ff70: 7366 6f72 6d20 6461 7461 2069 6e74 6f20  sform data into 
+0001ff80: 7265 7175 6972 6564 2066 6f72 6d61 740a  required format.
+0001ff90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ffa0: 2320 7468 6520 7072 6f63 6573 7365 6420  # the processed 
+0001ffb0: 6461 7461 7365 7420 6861 7320 7468 6520  dataset has the 
+0001ffc0: 6164 6469 7469 6f6e 616c 2065 6e64 696e  additional endin
+0001ffd0: 6720 225f 6e65 7722 0a20 2020 2020 2020  g "_new".       
+0001ffe0: 2020 2020 2020 2020 206c 6f67 2e69 6e66           log.inf
+0001fff0: 6f28 2250 726f 6365 7373 696e 6720 6461  o("Processing da
+00020000: 7461 7365 742e 2e2e 2229 0a20 2020 2020  taset...").     
+00020010: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00020020: 5f73 696c 7665 725f 7374 616e 6461 7264  _silver_standard
+00020030: 5f74 6f5f 7369 6d70 6c65 5f6e 6572 5f61  _to_simple_ner_a
+00020040: 6e6e 6f74 6174 696f 6e28 7374 7228 6c61  nnotation(str(la
+00020050: 6e67 7561 6765 5f66 6f6c 6465 7220 2f20  nguage_folder / 
+00020060: 6669 6c65 5f6e 616d 6529 290a 2020 2020  file_name)).    
+00020070: 2020 2020 2020 2020 2020 2020 2320 7265              # re
+00020080: 6d6f 7665 2074 6865 2075 6e70 726f 6365  move the unproce
+00020090: 7373 6564 2064 6174 6173 6574 0a20 2020  ssed dataset.   
+000200a0: 2020 2020 2020 2020 2020 2020 206f 732e               os.
+000200b0: 7265 6d6f 7665 2873 7472 286c 616e 6775  remove(str(langu
+000200c0: 6167 655f 666f 6c64 6572 202f 2066 696c  age_folder / fil
+000200d0: 655f 6e61 6d65 2929 0a20 2020 2020 2020  e_name)).       
+000200e0: 2020 2020 2020 2020 206c 6f67 2e69 6e66           log.inf
+000200f0: 6f28 222e 2e2e 646f 6e65 2e22 290a 0a20  o("...done.").. 
+00020100: 2020 2020 2020 2020 2020 2023 2069 6e69             # ini
+00020110: 7469 616c 697a 6520 636f 6d6c 756d 6e63  tialize comlumnc
+00020120: 6f72 7075 7320 616e 6420 6164 6420 6974  orpus and add it
+00020130: 2074 6f20 6c69 7374 0a20 2020 2020 2020   to list.       
+00020140: 2020 2020 206c 6f67 2e69 6e66 6f28 6622       log.info(f"
+00020150: 5265 6164 696e 6720 6461 7461 2066 6f72  Reading data for
+00020160: 206c 616e 6775 6167 6520 7b6c 616e 6775   language {langu
+00020170: 6167 657d 2229 0a20 2020 2020 2020 2020  age}").         
+00020180: 2020 2063 6f72 7020 3d20 436f 6c75 6d6e     corp = Column
+00020190: 436f 7270 7573 280a 2020 2020 2020 2020  Corpus(.        
+000201a0: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
+000201b0: 6465 723d 6c61 6e67 7561 6765 5f66 6f6c  der=language_fol
+000201c0: 6465 722c 0a20 2020 2020 2020 2020 2020  der,.           
+000201d0: 2020 2020 2063 6f6c 756d 6e5f 666f 726d       column_form
+000201e0: 6174 3d63 6f6c 756d 6e73 2c0a 2020 2020  at=columns,.    
+000201f0: 2020 2020 2020 2020 2020 2020 7472 6169              trai
+00020200: 6e5f 6669 6c65 3d66 696c 655f 6e61 6d65  n_file=file_name
+00020210: 202b 2022 5f6e 6577 222c 0a20 2020 2020   + "_new",.     
+00020220: 2020 2020 2020 2020 2020 2069 6e5f 6d65             in_me
+00020230: 6d6f 7279 3d69 6e5f 6d65 6d6f 7279 2c0a  mory=in_memory,.
+00020240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020250: 2a2a 636f 7270 7573 6172 6773 2c0a 2020  **corpusargs,.  
+00020260: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00020270: 2020 2020 2020 2020 636f 7270 6f72 612e          corpora.
+00020280: 6170 7065 6e64 2863 6f72 7029 0a20 2020  append(corp).   
+00020290: 2020 2020 2020 2020 206c 6f67 2e69 6e66           log.inf
+000202a0: 6f28 222e 2e2e 646f 6e65 2e22 290a 0a20  o("...done.").. 
+000202b0: 2020 2020 2020 2073 7570 6572 2829 2e5f         super()._
+000202c0: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
+000202d0: 2020 2020 2063 6f72 706f 7261 2c0a 2020       corpora,.  
+000202e0: 2020 2020 2020 2020 2020 6e61 6d65 3d22            name="
+000202f0: 7769 6b69 616e 6e22 2c0a 2020 2020 2020  wikiann",.      
+00020300: 2020 290a 0a20 2020 2064 6566 205f 7369    )..    def _si
+00020310: 6c76 6572 5f73 7461 6e64 6172 645f 746f  lver_standard_to
+00020320: 5f73 696d 706c 655f 6e65 725f 616e 6e6f  _simple_ner_anno
+00020330: 7461 7469 6f6e 2873 656c 662c 2064 6174  tation(self, dat
+00020340: 615f 6669 6c65 3a20 556e 696f 6e5b 7374  a_file: Union[st
+00020350: 722c 2050 6174 685d 293a 0a20 2020 2020  r, Path]):.     
+00020360: 2020 2077 6974 6820 6f70 656e 2864 6174     with open(dat
+00020370: 615f 6669 6c65 2c20 656e 636f 6469 6e67  a_file, encoding
+00020380: 3d22 7574 662d 3822 2920 6173 2066 5f72  ="utf-8") as f_r
+00020390: 6561 642c 206f 7065 6e28 0a20 2020 2020  ead, open(.     
+000203a0: 2020 2020 2020 2073 7472 2864 6174 615f         str(data_
+000203b0: 6669 6c65 2920 2b20 225f 6e65 7722 2c20  file) + "_new", 
+000203c0: 2277 2b22 2c20 656e 636f 6469 6e67 3d22  "w+", encoding="
+000203d0: 7574 662d 3822 0a20 2020 2020 2020 2029  utf-8".        )
+000203e0: 2061 7320 665f 7772 6974 653a 0a20 2020   as f_write:.   
+000203f0: 2020 2020 2020 2020 2077 6869 6c65 2054           while T
+00020400: 7275 653a 0a20 2020 2020 2020 2020 2020  rue:.           
+00020410: 2020 2020 206c 696e 6520 3d20 665f 7265       line = f_re
+00020420: 6164 2e72 6561 646c 696e 6528 290a 2020  ad.readline().  
+00020430: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00020440: 206c 696e 653a 0a20 2020 2020 2020 2020   line:.         
+00020450: 2020 2020 2020 2020 2020 2069 6620 6c69             if li
+00020460: 6e65 203d 3d20 225c 6e22 3a0a 2020 2020  ne == "\n":.    
+00020470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020480: 2020 2020 665f 7772 6974 652e 7772 6974      f_write.writ
+00020490: 6528 6c69 6e65 290a 2020 2020 2020 2020  e(line).        
+000204a0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+000204b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000204c0: 2020 2020 2020 2020 2020 6c69 7374 6520            liste 
+000204d0: 3d20 6c69 6e65 2e73 706c 6974 2829 0a20  = line.split(). 
+000204e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000204f0: 2020 2020 2020 2066 5f77 7269 7465 2e77         f_write.w
+00020500: 7269 7465 286c 6973 7465 5b30 5d20 2b20  rite(liste[0] + 
+00020510: 2220 2220 2b20 6c69 7374 655b 2d31 5d20  " " + liste[-1] 
+00020520: 2b20 225c 6e22 290a 2020 2020 2020 2020  + "\n").        
+00020530: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00020540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020550: 2020 6272 6561 6b0a 0a20 2020 2064 6566    break..    def
+00020560: 205f 676f 6f67 6c65 5f64 7269 7665 5f69   _google_drive_i
+00020570: 645f 6672 6f6d 5f6c 616e 6775 6167 655f  d_from_language_
+00020580: 6e61 6d65 2873 656c 662c 206c 616e 6775  name(self, langu
+00020590: 6167 6529 3a0a 2020 2020 2020 2020 6c61  age):.        la
+000205a0: 6e67 7561 6765 735f 6964 7320 3d20 7b0a  nguages_ids = {.
+000205b0: 2020 2020 2020 2020 2020 2020 2261 6122              "aa"
+000205c0: 3a20 2231 7444 446c 7964 4b71 374b 5151  : "1tDDlydKq7KQQ
+000205d0: 335f 3233 5973 6274 6b65 3448 4a4f 6534  3_23Ysbtke4HJOe4
+000205e0: 736e 496b 222c 2020 2320 6c65 6572 0a20  snIk",  # leer. 
+000205f0: 2020 2020 2020 2020 2020 2022 6162 223a             "ab":
+00020600: 2022 3168 4238 5245 6a32 5841 5f30 446a   "1hB8REj2XA_0Dj
+00020610: 4939 6864 5176 4e76 5344 7075 4249 6238  I9hdQvNvSDpuBIb8
+00020620: 7152 6622 2c0a 2020 2020 2020 2020 2020  qRf",.          
+00020630: 2020 2261 6365 223a 2022 3157 454e 4a53    "ace": "1WENJS
+00020640: 3270 7048 635a 7161 4245 5852 5a79 6b32  2ppHcZqaBEXRZyk2
+00020650: 7a59 2d50 7158 6b54 6b67 4722 2c0a 2020  zY-PqXkTkgG",.  
+00020660: 2020 2020 2020 2020 2020 2261 6479 223a            "ady":
+00020670: 2022 316e 364f 6e38 5757 4448 7845 6f79   "1n6On8WWDHxEoy
+00020680: 626a 3746 394b 3135 645f 666b 4750 7936  bj7F9K15d_fkGPy6
+00020690: 4b67 4f22 2c0a 2020 2020 2020 2020 2020  KgO",.          
+000206a0: 2020 2261 6622 3a20 2231 4350 422d 3042    "af": "1CPB-0B
+000206b0: 4432 7467 337a 4954 3630 4433 686d 4a54  D2tg3zIT60D3hmJT
+000206c0: 3069 354f 5f53 4b6a 6130 222c 0a20 2020  0i5O_SKja0",.   
+000206d0: 2020 2020 2020 2020 2022 616b 223a 2022           "ak": "
+000206e0: 316c 3276 6c47 486e 5177 766d 3958 6857  1l2vlGHnQwvm9XhW
+000206f0: 3553 2d34 3033 6665 7477 5558 6842 6c5a  5S-403fetwUXhBlZ
+00020700: 6d22 2c0a 2020 2020 2020 2020 2020 2020  m",.            
+00020710: 2261 6c73 223a 2022 3139 3678 7959 6a68  "als": "196xyYjh
+00020720: 6269 6537 7359 4c48 4c5a 4857 6b6b 7572  bie7sYLHLZHWkkur
+00020730: 4f77 514c 6938 774b 2d22 2c0a 2020 2020  OwQLi8wK-",.    
+00020740: 2020 2020 2020 2020 2261 6d22 3a20 2231          "am": "1
+00020750: 7567 3149 456f 4578 4b44 3378 5770 7666  ug1IEoExKD3xWpvf
+00020760: 5a70 7241 5053 5169 3832 5946 3943 6574  ZprAPSQi82YF9Cet
+00020770: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+00020780: 616e 223a 2022 3144 4e4c 6750 4f41 4f73  an": "1DNLgPOAOs
+00020790: 475a 4259 6436 7243 3564 6468 7a76 6339  GZBYd6rC5ddhzvc9
+000207a0: 5f44 7457 6e6b 3222 2c0a 2020 2020 2020  _DtWnk2",.      
+000207b0: 2020 2020 2020 2261 6e67 223a 2022 3157        "ang": "1W
+000207c0: 5f30 7469 3754 6c38 416b 714d 3931 6c52  _0ti7Tl8AkqM91lR
+000207d0: 434d 5057 4575 556e 504f 415a 726f 5622  CMPWEuUnPOAZroV"
+000207e0: 2c0a 2020 2020 2020 2020 2020 2020 2261  ,.            "a
+000207f0: 7222 3a20 2231 7479 7664 3332 7564 4551  r": "1tyvd32udEQ
+00020800: 475f 634e 6556 7061 4435 4932 6678 7643  G_cNeVpaD5I2fxvC
+00020810: 6336 584b 4953 222c 0a20 2020 2020 2020  c6XKIS",.       
+00020820: 2020 2020 2022 6172 6322 3a20 2231 6853       "arc": "1hS
+00020830: 4f42 7953 7471 506d 5033 6239 4866 5133  OByStqPmP3b9HfQ3
+00020840: 3945 636c 555a 476f 3849 4b43 4d62 222c  9EclUZGo8IKCMb",
+00020850: 0a20 2020 2020 2020 2020 2020 2022 6172  .            "ar
+00020860: 7a22 3a20 2231 434b 5735 5a68 7854 7049  z": "1CKW5ZhxTpI
+00020870: 486d 6338 4a74 354a 4c7a 5f35 4f36 4372  Hmc8Jt5JLz_5O6Cr
+00020880: 3849 6373 616e 222c 0a20 2020 2020 2020  8Icsan",.       
+00020890: 2020 2020 2022 6173 223a 2022 3132 6f70       "as": "12op
+000208a0: 426f 4977 6542 4c4d 3858 6369 4d48 5434  BoIweBLM8XciMHT4
+000208b0: 4236 2d4d 4161 4b64 5964 7670 4522 2c0a  B6-MAaKdYdvpE",.
+000208c0: 2020 2020 2020 2020 2020 2020 2261 7374              "ast
+000208d0: 223a 2022 3172 7036 3450 7847 5a42 4466  ": "1rp64PxGZBDf
+000208e0: 6377 2d74 7046 426a 4c67 5f64 644c 4445  cw-tpFBjLg_ddLDE
+000208f0: 6c47 3149 4922 2c0a 2020 2020 2020 2020  lG1II",.        
+00020900: 2020 2020 2261 7622 3a20 2231 686e 6347      "av": "1hncG
+00020910: 5572 6b47 3176 7741 4151 674c 7477 4f66  UrkG1vwAAQgLtwOf
+00020920: 3431 4257 6b48 6b45 7664 7373 222c 0a20  41BWkHkEvdss",. 
+00020930: 2020 2020 2020 2020 2020 2022 6179 223a             "ay":
+00020940: 2022 3156 6d49 7357 704d 547a 3434 3262   "1VmIsWpMTz442b
+00020950: 344d 7837 3938 5a4f 6774 4239 7671 754b  4Mx798ZOgtB9vquK
+00020960: 5174 6622 2c0a 2020 2020 2020 2020 2020  Qtf",.          
+00020970: 2020 2261 7a22 3a20 2231 4658 4458 7376    "az": "1FXDXsv
+00020980: 4253 6471 6337 4747 4944 5a76 3068 7142  BSdqc7GGIDZv0hqB
+00020990: 4f61 6177 3132 4970 322d 222c 0a20 2020  Oaaw12Ip2-",.   
+000209a0: 2020 2020 2020 2020 2022 617a 6222 3a20           "azb": 
+000209b0: 2231 616d 5671 4f75 484c 456b 686a 6e38  "1amVqOuHLEkhjn8
+000209c0: 726b 4755 6c2d 6d58 645a 6c61 4143 5779  rkGUl-mXdZlaACWy
+000209d0: 4e54 222c 0a20 2020 2020 2020 2020 2020  NT",.           
+000209e0: 2022 6261 223a 2022 3161 4c78 3164 3847   "ba": "1aLx1d8G
+000209f0: 6167 4931 3156 5a56 594f 4751 7930 4245  agI11VZVYOGQy0BE
+00020a00: 6550 6571 6f54 3078 3322 2c0a 2020 2020  ePeqoT0x3",.    
+00020a10: 2020 2020 2020 2020 2262 6172 223a 2022          "bar": "
+00020a20: 314a 5a38 2d6b 385a 6d6e 7057 5949 5f59  1JZ8-k8ZmnpWYI_Y
+00020a30: 6c5f 6342 4267 6a56 6478 6f4d 3944 6163  l_cBBgjVdxoM9Dac
+00020a40: 6922 2c0a 2020 2020 2020 2020 2020 2020  i",.            
+00020a50: 2262 6174 2d73 6d67 223a 2022 3174 7278  "bat-smg": "1trx
+00020a60: 4b58 4446 5365 4b73 7967 544d 4b69 2d5a  KXDFSeKsygTMKi-Z
+00020a70: 7158 534a 7337 4639 306b 3561 3822 2c0a  qXSJs7F90k5a8",.
+00020a80: 2020 2020 2020 2020 2020 2020 2262 636c              "bcl
+00020a90: 223a 2022 3148 7330 6b37 4b56 5a32 4450  ": "1Hs0k7KVZ2DP
+00020aa0: 7371 726f 5a34 6355 4b63 775a 4734 4864  sqroZ4cUKcwZG4Hd
+00020ab0: 5056 3739 3422 2c0a 2020 2020 2020 2020  PV794",.        
+00020ac0: 2020 2020 2262 652d 782d 6f6c 6422 3a20      "be-x-old": 
+00020ad0: 2231 6761 4b2d 7370 6a31 6d36 6547 5951  "1gaK-spj1m6eGYQ
+00020ae0: 2d53 736e 674c 7878 4c55 7650 3156 526b  -SsngLxxLUvP1VRk
+00020af0: 3038 222c 0a20 2020 2020 2020 2020 2020  08",.           
+00020b00: 2022 6265 223a 2022 315f 7474 664f 5379   "be": "1_ttfOSy
+00020b10: 3942 7a43 526b 4954 5f70 336d 496d 5438  9BzCRkIT_p3mImT8
+00020b20: 3258 5250 7045 6975 4822 2c0a 2020 2020  2XRPpEiuH",.    
+00020b30: 2020 2020 2020 2020 2262 6722 3a20 2231          "bg": "1
+00020b40: 4975 6736 6759 4b65 6d62 304f 724c 5455  Iug6gYKemb0OrLTU
+00020b50: 724b 4463 5f63 3636 5947 7970 5466 4346  rKDc_c66YGypTfCF
+00020b60: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+00020b70: 6268 223a 2022 3132 4f63 5346 4c75 3934  bh": "12OcSFLu94
+00020b80: 3041 3874 5651 4c78 4938 706e 784b 4270  0A8tVQLxI8pnxKBp
+00020b90: 5465 5a48 6d72 6822 2c0a 2020 2020 2020  TeZHmrh",.      
+00020ba0: 2020 2020 2020 2262 6922 3a20 2231 7266        "bi": "1rf
+00020bb0: 7456 7a69 535f 7071 4152 7834 6d76 4c4a  tVziS_pqARx4mvLJ
+00020bc0: 4330 734b 4c59 2d4f 4c35 5a49 6a45 222c  C0sKLY-OL5ZIjE",
+00020bd0: 0a20 2020 2020 2020 2020 2020 2022 626a  .            "bj
+00020be0: 6e22 3a20 2231 6e31 376d 6b52 6a50 5541  n": "1n17mkRjPUA
+00020bf0: 4f57 516b 354c 5173 3243 3354 7a33 5368  OWQk5LQs2C3Tz3Sh
+00020c00: 784b 3065 6e5a 222c 0a20 2020 2020 2020  xK0enZ",.       
+00020c10: 2020 2020 2022 626d 223a 2022 3132 3834       "bm": "1284
+00020c20: 6477 4f5f 7366 6473 5745 3746 5230 3648  dwO_sfdsWE7FR06H
+00020c30: 6866 4252 5562 3865 5065 734b 5222 2c0a  hfBRUb8ePesKR",.
+00020c40: 2020 2020 2020 2020 2020 2020 2262 6e22              "bn"
+00020c50: 3a20 2231 4b32 444d 316d 5434 686b 7236  : "1K2DM1mT4hkr6
+00020c60: 4e6c 4149 4254 6a39 3542 6556 5863 6776  NlAIBTj95BeVXcgv
+00020c70: 7067 446d 222c 0a20 2020 2020 2020 2020  pgDm",.         
+00020c80: 2020 2022 626f 223a 2022 3153 7a47 4844     "bo": "1SzGHD
+00020c90: 564b 2d4f 6775 4b64 6a5a 3444 5857 694f  VK-OguKdjZ4DXWiO
+00020ca0: 4a56 7269 6531 6948 6557 6d22 2c0a 2020  JVrie1iHeWm",.  
+00020cb0: 2020 2020 2020 2020 2020 2262 7079 223a            "bpy":
+00020cc0: 2022 316d 2d65 3545 6f72 754a 7566 7677   "1m-e5EoruJufvw
+00020cd0: 4245 674a 4c6d 4a74 7836 6a7a 7836 3470  BEgJLmJtx6jzx64p
+00020ce0: 594e 3222 2c0a 2020 2020 2020 2020 2020  YN2",.          
+00020cf0: 2020 2262 7222 3a20 2231 7864 6142 6f4a    "br": "1xdaBoJ
+00020d00: 3144 6e77 4930 6945 7137 6751 4e31 6457  1DnwI0iEq7gQN1dW
+00020d10: 6341 4241 735f 624d 3948 222c 0a20 2020  cABAs_bM9H",.   
+00020d20: 2020 2020 2020 2020 2022 6273 223a 2022           "bs": "
+00020d30: 3136 3764 7342 3031 7472 4d59 4651 6c38  167dsB01trMYFQl8
+00020d40: 4673 6874 4964 6668 6a77 3749 6656 4b62  FshtIdfhjw7IfVKb
+00020d50: 6b22 2c0a 2020 2020 2020 2020 2020 2020  k",.            
+00020d60: 2262 7567 223a 2022 3179 436e 6576 4d39  "bug": "1yCnevM9
+00020d70: 5f4b 4a7a 466b 3237 5678 7376 615f 3230  _KJzFk27Vxsva_20
+00020d80: 4f61 634c 6f34 5561 6d22 2c0a 2020 2020  OacLo4Uam",.    
+00020d90: 2020 2020 2020 2020 2262 7872 223a 2022          "bxr": "
+00020da0: 3144 6c42 7941 5833 7a42 2d39 5579 4541  1DlByAX3zB-9UyEA
+00020db0: 5644 3477 7458 2d52 376d 5843 2d38 7875  VD4wtX-R7mXC-8xu
+00020dc0: 6d22 2c0a 2020 2020 2020 2020 2020 2020  m",.            
+00020dd0: 2263 6122 3a20 2231 4c75 5567 6264 3973  "ca": "1LuUgbd9s
+00020de0: 4761 2d35 4168 6373 7933 3145 4b38 3961  Ga-5Ahcsy31EK89a
+00020df0: 3357 4f6f 7766 7459 222c 0a20 2020 2020  3WOowftY",.     
+00020e00: 2020 2020 2020 2022 6362 6b2d 7a61 6d22         "cbk-zam"
+00020e10: 3a20 2231 6b67 4638 786f 442d 6b49 4f57  : "1kgF8xoD-kIOW
+00020e20: 5a45 545f 396b 705f 3479 4e58 3641 4158  ZET_9kp_4yNX6AAX
+00020e30: 6e36 5049 222c 0a20 2020 2020 2020 2020  n6PI",.         
+00020e40: 2020 2022 6364 6f22 3a20 2231 3478 3179     "cdo": "14x1y
+00020e50: 3636 3131 472d 5541 4547 7139 3251 4548  6611G-UAEGq92QEH
+00020e60: 5270 7265 566b 596e 6f55 4377 222c 0a20  RpreVkYnoUCw",. 
+00020e70: 2020 2020 2020 2020 2020 2022 6365 223a             "ce":
+00020e80: 2022 3151 5555 4356 4b41 2d66 6b69 4348   "1QUUCVKA-fkiCH
+00020e90: 6433 4b54 337a 5557 6566 6157 6e78 7a6c  d3KT3zUWefaWnxzl
+00020ea0: 5a4c 7522 2c0a 2020 2020 2020 2020 2020  ZLu",.          
+00020eb0: 2020 2263 6562 223a 2022 3144 4a5a 4539    "ceb": "1DJZE9
+00020ec0: 5266 614d 6f50 4e58 4849 3733 4b42 5841  RfaMoPNXHI73KBXA
+00020ed0: 6d34 5953 652d 5f59 4355 6b22 2c0a 2020  m4YSe-_YCUk",.  
+00020ee0: 2020 2020 2020 2020 2020 2263 6822 3a20            "ch": 
+00020ef0: 2231 597a 4166 686d 6174 6b6d 5470 6b5a  "1YzAfhmatkmTpkZ
+00020f00: 6241 6344 3658 3833 6570 4367 7a44 3553  bAcD6X83epCgzD5S
+00020f10: 325f 222c 0a20 2020 2020 2020 2020 2020  2_",.           
+00020f20: 2022 6368 6f22 3a20 2231 6369 5930 7646   "cho": "1ciY0vF
+00020f30: 3363 3561 326d 544f 6f5f 6b33 3241 3277  3c5a2mTOo_k32A2w
+00020f40: 4d73 306b 6c4b 3938 4b62 222c 2020 2320  Ms0klK98Kb",  # 
+00020f50: 6c65 6572 0a20 2020 2020 2020 2020 2020  leer.           
+00020f60: 2022 6368 7222 3a20 2231 4548 6178 7a31   "chr": "1EHaxz1
+00020f70: 555a 486e 3776 3262 6252 7a43 4c41 6850  UZHn7v2bbRzCLAhP
+00020f80: 734e 7452 7a72 4733 4165 222c 0a20 2020  sNtRzrG3Ae",.   
+00020f90: 2020 2020 2020 2020 2022 6368 7922 3a20           "chy": 
+00020fa0: 2231 6e4e 5777 4d41 4a72 314b 4e64 7a33  "1nNWwMAJr1KNdz3
+00020fb0: 6248 6636 7549 6e2d 7468 5a43 6b6e 6c54  bHf6uIn-thZCknlT
+00020fc0: 6542 222c 0a20 2020 2020 2020 2020 2020  eB",.           
+00020fd0: 2022 636b 6222 3a20 2231 6c6c 7061 6674   "ckb": "1llpaft
+00020fe0: 6355 5369 5843 5a51 5a4d 6441 7161 4a53  cUSiXCZQZMdAqaJS
+00020ff0: 7268 774d 6463 6639 4956 222c 0a20 2020  rhwMdcf9IV",.   
+00021000: 2020 2020 2020 2020 2022 636f 223a 2022           "co": "
+00021010: 315a 502d 386f 5767 4d59 6657 3761 3677  1ZP-8oWgMYfW7a6w
+00021020: 3679 6745 466b 4b44 4762 4e33 3951 6e44  6ygEFkKDGbN39QnD
+00021030: 6e22 2c0a 2020 2020 2020 2020 2020 2020  n",.            
+00021040: 2263 7222 3a20 2231 5354 3078 5269 634c  "cr": "1ST0xRicL
+00021050: 4147 344a 6443 5a77 4764 6159 2d30 7045  AG4JdCZwGdaY-0pE
+00021060: 586f 6f51 6837 6536 222c 0a20 2020 2020  XooQh7e6",.     
+00021070: 2020 2020 2020 2022 6372 6822 3a20 2231         "crh": "1
+00021080: 4a6d 7071 3258 5659 5552 5f58 6158 5535  Jmpq2XVYUR_XaXU5
+00021090: 584e 6874 4f4d 6e7a 2d71 6b70 7367 7045  XNhtOMnz-qkpsgpE
+000210a0: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+000210b0: 6373 223a 2022 3156 7964 797a 652d 6a42  cs": "1Vydyze-jB
+000210c0: 6b4b 5f53 3175 5635 6577 565f 5936 6462  kK_S1uV5ewV_Y6db
+000210d0: 7768 5872 376c 6b22 2c0a 2020 2020 2020  whXr7lk",.      
+000210e0: 2020 2020 2020 2263 7362 223a 2022 316e        "csb": "1n
+000210f0: 6155 7946 3734 6c5a 506e 6e6f 7058 644f  aUyF74lZPnnopXdO
+00021100: 7166 3558 6f72 326b 5434 576f 4866 5322  qf5Xor2kT4WoHfS"
+00021110: 2c0a 2020 2020 2020 2020 2020 2020 2263  ,.            "c
+00021120: 7522 3a20 2231 454e 3564 5654 5536 6a63  u": "1EN5dVTU6jc
+00021130: 3759 4f59 5043 4871 3845 5955 4633 3148  7YOYPCHq8EYUF31H
+00021140: 6c4d 554b 7337 222c 0a20 2020 2020 2020  lMUKs7",.       
+00021150: 2020 2020 2022 6376 223a 2022 3167 4555       "cv": "1gEU
+00021160: 416c 7159 5353 4449 3454 7257 4371 5031  AlqYSSDI4TrWCqP1
+00021170: 4c55 7132 6e30 5831 5845 6a4e 3322 2c0a  LUq2n0X1XEjN3",.
+00021180: 2020 2020 2020 2020 2020 2020 2263 7922              "cy"
+00021190: 3a20 2231 7135 6736 4e4a 4535 4758 6636  : "1q5g6NJE5GXf6
+000211a0: 3556 635f 5034 426e 554d 4851 3439 5072  5Vc_P4BnUMHQ49Pr
+000211b0: 7a2d 4a31 222c 0a20 2020 2020 2020 2020  z-J1",.         
+000211c0: 2020 2022 6461 223a 2022 3131 6f6e 4147     "da": "11onAG
+000211d0: 4f4c 6b6b 7172 4977 4d37 3834 7369 576c  OLkkqrIwM784siWl
+000211e0: 672d 6365 7761 3557 4b6d 3822 2c0a 2020  g-cewa5WKm8",.  
+000211f0: 2020 2020 2020 2020 2020 2264 6522 3a20            "de": 
+00021200: 2231 6639 6e57 764e 6b43 4379 3658 5768  "1f9nWvNkCCy6XWh
+00021210: 6439 7566 3444 712d 322d 2d47 7a53 6159  d9uf4Dq-2--GzSaY
+00021220: 4162 222c 0a20 2020 2020 2020 2020 2020  Ab",.           
+00021230: 2022 6469 7122 3a20 2231 496b 704a 6156   "diq": "1IkpJaV
+00021240: 6245 4f75 4f73 3971 6179 5f4b 4739 726b  bEOuOs9qay_KG9rk
+00021250: 7852 6768 575a 6857 506d 222c 0a20 2020  xRghWZhWPm",.   
+00021260: 2020 2020 2020 2020 2022 6473 6222 3a20           "dsb": 
+00021270: 2231 686c 4578 5761 4d74 682d 3265 5649  "1hlExWaMth-2eVI
+00021280: 5133 6933 7369 4a53 472d 4d4e 5f37 5a36  Q3i3siJSG-MN_7Z6
+00021290: 4d59 222c 0a20 2020 2020 2020 2020 2020  MY",.           
+000212a0: 2022 6476 223a 2022 3157 7043 7273 6c4f   "dv": "1WpCrslO
+000212b0: 3449 3754 4d62 3275 614b 5651 7734 5532  4I7TMb2uaKVQw4U2
+000212c0: 5538 714d 7335 737a 6922 2c0a 2020 2020  U8qMs5szi",.    
+000212d0: 2020 2020 2020 2020 2264 7a22 3a20 2231          "dz": "1
+000212e0: 3057 5835 3265 5071 324b 6679 476c 6977  0WX52ePq2KfyGliw
+000212f0: 5076 595f 3534 6849 6a70 7a57 366b 6c56  PvY_54hIjpzW6klV
+00021300: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+00021310: 6565 223a 2022 3174 5945 7433 6f4e 324b  ee": "1tYEt3oN2K
+00021320: 507a 4253 5772 6b39 6a70 4371 6e57 334a  PzBSWrk9jpCqnW3J
+00021330: 314b 5864 686a 7a22 2c0a 2020 2020 2020  1KXdhjz",.      
+00021340: 2020 2020 2020 2265 6c22 3a20 2231 6378        "el": "1cx
+00021350: 7134 4e55 596d 4877 5773 456e 3577 6159  q4NUYmHwWsEn5waY
+00021360: 5866 4653 616e 6c49 4e58 574c 664d 222c  XfFSanlINXWLfM",
+00021370: 0a20 2020 2020 2020 2020 2020 2022 656d  .            "em
+00021380: 6c22 3a20 2231 3746 6747 6850 5a71 5a4e  l": "17FgGhPZqZN
+00021390: 747a 6278 7054 4a4f 662d 366e 7845 7549  tzbxpTJOf-6nxEuI
+000213a0: 356f 5534 5664 222c 0a20 2020 2020 2020  5oU4Vd",.       
+000213b0: 2020 2020 2022 656e 223a 2022 316d 7178       "en": "1mqx
+000213c0: 6543 506a 7871 6d4f 3765 3875 746a 314d  eCPjxqmO7e8utj1M
+000213d0: 5176 3143 4943 4c46 5676 4b61 2d22 2c0a  Qv1CICLFVvKa-",.
+000213e0: 2020 2020 2020 2020 2020 2020 2265 6f22              "eo"
+000213f0: 3a20 2231 5965 6b6e 4c79 6d47 6371 6a34  : "1YeknLymGcqj4
+00021400: 3475 6732 7964 3450 3778 5156 7053 4b32  4ug2yd4P7xQVpSK2
+00021410: 3748 6b4b 222c 0a20 2020 2020 2020 2020  7HkK",.         
+00021420: 2020 2022 6573 223a 2022 3144 6e78 334d     "es": "1Dnx3M
+00021430: 5652 3972 3563 756f 4f67 6565 7732 6754  VR9r5cuoOgeew2gT
+00021440: 3862 4476 5770 4f4b 786b 5522 2c0a 2020  8bDvWpOKxkU",.  
+00021450: 2020 2020 2020 2020 2020 2265 7422 3a20            "et": 
+00021460: 2231 5168 6233 6b59 6c51 6e4c 6566 576d  "1Qhb3kYlQnLefWm
+00021470: 4e69 6d64 4e5f 5679 6b6d 346d 577a 6263  NimdN_Vykm4mWzbc
+00021480: 5779 222c 0a20 2020 2020 2020 2020 2020  Wy",.           
+00021490: 2022 6575 223a 2022 3166 3631 3377 4838   "eu": "1f613wH8
+000214a0: 3855 6549 5459 7942 5345 4d5a 4279 4b2d  8UeITYyBSEMZByK-
+000214b0: 6e52 4e4d 774c 4854 7322 2c0a 2020 2020  nRNMwLHTs",.    
+000214c0: 2020 2020 2020 2020 2265 7874 223a 2022          "ext": "
+000214d0: 3144 306e 4c4f 5a33 616f 6c43 4d38 5453  1D0nLOZ3aolCM8TS
+000214e0: 6849 5279 4367 4633 2d5f 4d68 5758 6363  hIRyCgF3-_MhWXcc
+000214f0: 4e22 2c0a 2020 2020 2020 2020 2020 2020  N",.            
+00021500: 2266 6122 3a20 2231 514f 4731 3548 5538  "fa": "1QOG15HU8
+00021510: 5666 5a76 4a55 4e4b 6f73 3032 3478 492d  VfZvJUNKos024xI-
+00021520: 4f47 6d30 7a68 4558 222c 0a20 2020 2020  OGm0zhEX",.     
+00021530: 2020 2020 2020 2022 6666 223a 2022 3168         "ff": "1h
+00021540: 3570 566a 7844 5963 7137 3062 5375 7333  5pVjxDYcq70bSus3
+00021550: 306f 7169 394b 7a44 6d65 7a56 4e72 7922  0oqi9KzDmezVNry"
+00021560: 2c0a 2020 2020 2020 2020 2020 2020 2266  ,.            "f
+00021570: 6922 3a20 2231 7933 4b66 3671 5973 5376  i": "1y3Kf6qYsSv
+00021580: 4c38 5f6e 5345 7745 3159 3642 6636 6e69  L8_nSEwE1Y6Bf6ni
+00021590: 6e61 5076 7161 222c 0a20 2020 2020 2020  naPvqa",.       
+000215a0: 2020 2020 2022 6669 752d 7672 6f22 3a20       "fiu-vro": 
+000215b0: 2231 6f4b 5569 7147 3139 5767 5064 3343  "1oKUiqG19WgPd3C
+000215c0: 436c 3446 4775 646b 3541 546d 744e 6654  Cl4FGudk5ATmtNfT
+000215d0: 6f52 222c 0a20 2020 2020 2020 2020 2020  oR",.           
+000215e0: 2022 666a 223a 2022 3130 7844 4d75 7174   "fj": "10xDMuqt
+000215f0: 6f54 4a6c 4a46 7035 6768 6268 4b66 4e57  oTJlJFp5ghbhKfNW
+00021600: 5270 4c44 4b33 5734 6422 2c0a 2020 2020  RpLDK3W4d",.    
+00021610: 2020 2020 2020 2020 2266 6f22 3a20 2231          "fo": "1
+00021620: 5268 6a59 7167 7472 6931 3237 3642 6531  RhjYqgtri1276Be1
+00021630: 4e39 5272 4e69 7464 424e 6b70 7a68 304a  N9RrNitdBNkpzh0J
+00021640: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+00021650: 6672 223a 2022 3173 4b5f 545f 2d77 7a56  fr": "1sK_T_-wzV
+00021660: 504a 5972 6e7a 694e 7157 5472 6955 3532  PJYrnziNqWTriU52
+00021670: 7245 7358 476a 6e22 2c0a 2020 2020 2020  rEsXGjn",.      
+00021680: 2020 2020 2020 2266 7270 223a 2022 314e        "frp": "1N
+00021690: 556d 3842 327a 436c 4263 4561 3864 484c  Um8B2zClBcEa8dHL
+000216a0: 4262 2d5a 677a 4572 3870 6863 5179 5a22  Bb-ZgzEr8phcQyZ"
+000216b0: 2c0a 2020 2020 2020 2020 2020 2020 2266  ,.            "f
+000216c0: 7272 223a 2022 3146 6a4e 7162 4955 6c4f  rr": "1FjNqbIUlO
+000216d0: 5731 6465 4a64 4238 5743 7557 6a61 5a66  W1deJdB8WCuWjaZf
+000216e0: 557a 4b71 756a 5622 2c0a 2020 2020 2020  UzKqujV",.      
+000216f0: 2020 2020 2020 2266 7572 223a 2022 316f        "fur": "1o
+00021700: 7148 5a4d 4b37 5741 5638 6f48 6f5a 4c6a  qHZMK7WAV8oHoZLj
+00021710: 4752 3050 666d 4f33 3877 6d52 3658 5922  GR0PfmO38wmR6XY"
+00021720: 2c0a 2020 2020 2020 2020 2020 2020 2266  ,.            "f
+00021730: 7922 3a20 2231 4476 6e55 3669 6154 4a63  y": "1DvnU6iaTJc
+00021740: 3962 5765 646d 446b 6c48 7978 386e 7a4b  9bWedmDklHyx8nzK
+00021750: 4431 7333 4765 222c 0a20 2020 2020 2020  D1s3Ge",.       
+00021760: 2020 2020 2022 6761 223a 2022 3151 6c36       "ga": "1Ql6
+00021770: 7268 3761 6273 6459 5138 6c2d 3368 6a5f  rh7absdYQ8l-3hj_
+00021780: 4d56 4b63 4543 3374 484b 6546 4222 2c0a  MVKcEC3tHKeFB",.
+00021790: 2020 2020 2020 2020 2020 2020 2267 6167              "gag
+000217a0: 223a 2022 317a 6c69 2d68 4f6c 3261 6275  ": "1zli-hOl2abu
+000217b0: 5132 7773 444a 5534 3571 6262 3078 7576  Q2wsDJU45qbb0xuv
+000217c0: 5977 4133 6122 2c0a 2020 2020 2020 2020  YwA3a",.        
+000217d0: 2020 2020 2267 616e 223a 2022 3175 3264      "gan": "1u2d
+000217e0: 4f77 7935 3879 2d47 6153 2d74 4350 4a53  Owy58y-GaS-tCPJS
+000217f0: 5f69 3956 5244 5149 5058 7743 7222 2c0a  _i9VRDQIPXwCr",.
+00021800: 2020 2020 2020 2020 2020 2020 2267 6422              "gd"
+00021810: 3a20 2231 756d 7355 706e 674a 6977 6b4c  : "1umsUpngJiwkL
+00021820: 6447 5162 5271 5970 6b67 785a 6a75 3964  dGQbRqYpkgxZju9d
+00021830: 576c 527a 222c 0a20 2020 2020 2020 2020  WlRz",.         
+00021840: 2020 2022 676c 223a 2022 3134 314b 3249     "gl": "141K2I
+00021850: 624c 6a4a 6658 7746 5449 662d 6b74 686d  bLjJfXwFTIf-kthm
+00021860: 6d47 3059 5764 6938 6c69 4522 2c0a 2020  mG0YWdi8liE",.  
+00021870: 2020 2020 2020 2020 2020 2267 6c6b 223a            "glk":
+00021880: 2022 315a 4461 7851 3669 6c58 616f 6976   "1ZDaxQ6ilXaoiv
+00021890: 6f34 5f4b 6c6c 6167 6162 6276 664f 7569  o4_KllagabbvfOui
+000218a0: 5a30 6322 2c0a 2020 2020 2020 2020 2020  Z0c",.          
+000218b0: 2020 2267 6e22 3a20 2231 684d 344d 7543    "gn": "1hM4MuC
+000218c0: 6156 6e5a 716e 4c2d 772d 304e 2d57 6357  aVnZqnL-w-0N-WcW
+000218d0: 6167 3232 696b 564c 745a 222c 0a20 2020  ag22ikVLtZ",.   
+000218e0: 2020 2020 2020 2020 2022 676f 6d22 3a20           "gom": 
+000218f0: 2231 424e 4f53 7737 3574 7a50 4330 7745  "1BNOSw75tzPC0wE
+00021900: 674c 4f43 4b62 7775 3977 6739 6763 4c4f  gLOCKbwu9wg9gcLO
+00021910: 7a73 222c 0a20 2020 2020 2020 2020 2020  zs",.           
+00021920: 2022 676f 7422 3a20 2231 5953 4859 4274   "got": "1YSHYBt
+00021930: 5863 3157 7655 764d 4948 507a 3648 4867  Xc1WvUvMIHPz6HHg
+00021940: 4a76 6158 4b75 6c4a 556a 222c 0a20 2020  JvaXKulJUj",.   
+00021950: 2020 2020 2020 2020 2022 6775 223a 2022           "gu": "
+00021960: 3156 644b 2d42 3264 7271 4677 4b67 384b  1VdK-B2drqFwKg8K
+00021970: 4432 3363 3364 4b58 592d 635a 6743 4d67  D23c3dKXY-cZgCMg
+00021980: 6422 2c0a 2020 2020 2020 2020 2020 2020  d",.            
+00021990: 2267 7622 3a20 2231 585a 466f 6859 4e62  "gv": "1XZFohYNb
+000219a0: 4b73 7a45 4652 2d56 2d79 4458 7878 3430  KszEFR-V-yDXxx40
+000219b0: 5634 3150 5639 5a6d 222c 0a20 2020 2020  V41PV9Zm",.     
+000219c0: 2020 2020 2020 2022 6861 223a 2022 3138         "ha": "18
+000219d0: 5a47 3474 5555 306f 7752 7451 4138 4579  ZG4tUU0owRtQA8Ey
+000219e0: 3344 6c37 3241 4c6a 7279 454a 574d 4322  3Dl72ALjryEJWMC"
+000219f0: 2c0a 2020 2020 2020 2020 2020 2020 2268  ,.            "h
+00021a00: 616b 223a 2022 3151 5165 3357 6772 4357  ak": "1QQe3WgrCW
+00021a10: 6276 6e56 4834 3251 5844 374b 5834 6b69  bvnVH42QXD7KX4ki
+00021a20: 6848 5552 4230 5a22 2c0a 2020 2020 2020  hHURB0Z",.      
+00021a30: 2020 2020 2020 2268 6177 223a 2022 3146        "haw": "1F
+00021a40: 4c71 6c4b 2d77 707a 346a 7937 3638 5862  LqlK-wpz4jy768Xb
+00021a50: 5141 7478 6439 5068 432d 3963 6950 3722  QAtxd9PhC-9ciP7"
+00021a60: 2c0a 2020 2020 2020 2020 2020 2020 2268  ,.            "h
+00021a70: 6522 3a20 2231 384b 2d45 7263 3256 4f67  e": "18K-Erc2VOg
+00021a80: 7449 6473 6b61 5171 3444 3541 3358 6b56  tIdskaQq4D5A3XkV
+00021a90: 7374 446d 6658 222c 0a20 2020 2020 2020  stDmfX",.       
+00021aa0: 2020 2020 2022 6869 223a 2022 316c 4252       "hi": "1lBR
+00021ab0: 6170 6235 746a 4271 5431 3736 6744 3336  apb5tjBqT176gD36
+00021ac0: 4b35 7962 5f71 7361 4665 752d 6b22 2c0a  K5yb_qsaFeu-k",.
+00021ad0: 2020 2020 2020 2020 2020 2020 2268 6966              "hif
+00021ae0: 223a 2022 3135 334d 5139 4761 344e 512d  ": "153MQ9Ga4NQ-
+00021af0: 436b 4b38 5569 4a4d 3344 6a4b 4f6b 3039  CkK8UiJM3DjKOk09
+00021b00: 6668 434f 5622 2c0a 2020 2020 2020 2020  fhCOV",.        
+00021b10: 2020 2020 2268 6f22 3a20 2231 6331 416f      "ho": "1c1Ao
+00021b20: 5337 7971 3135 6956 6b54 4545 2d30 6633  S7yq15iVkTEE-0f3
+00021b30: 7832 354e 5434 4632 3032 4238 222c 2020  x25NT4F202B8",  
+00021b40: 2320 6c65 6572 0a20 2020 2020 2020 2020  # leer.         
+00021b50: 2020 2022 6872 223a 2022 3177 532d 5574     "hr": "1wS-Ut
+00021b60: 4233 7347 4875 584a 5151 4752 3046 356c  B3sGHuXJQQGR0F5l
+00021b70: 4465 676f 6773 676f 7969 6622 2c0a 2020  Degogsgoyif",.  
+00021b80: 2020 2020 2020 2020 2020 2268 7362 223a            "hsb":
+00021b90: 2022 315f 336d 4d4c 7a41 4535 4f6d 586e   "1_3mMLzAE5OmXn
+00021ba0: 327a 3634 7257 334f 7757 626f 3835 4d69  2z64rW3OwWbo85Mi
+00021bb0: 7262 6422 2c0a 2020 2020 2020 2020 2020  rbd",.          
+00021bc0: 2020 2268 7422 3a20 2231 4277 4361 4630    "ht": "1BwCaF0
+00021bd0: 6e66 6467 6b4d 3759 7437 4137 6437 4b79  nfdgkM7Yt7A7d7Ky
+00021be0: 566b 3042 6375 7750 476b 222c 0a20 2020  Vk0BcuwPGk",.   
+00021bf0: 2020 2020 2020 2020 2022 6875 223a 2022           "hu": "
+00021c00: 3130 416b 446d 5478 5557 4e62 4f58 7559  10AkDmTxUWNbOXuY
+00021c10: 4c59 5a2d 5a50 624c 4164 4741 475a 5a38  LYZ-ZPbLAdGAGZZ8
+00021c20: 4a22 2c0a 2020 2020 2020 2020 2020 2020  J",.            
+00021c30: 2268 7922 3a20 2231 4d69 326b 3261 6c4a  "hy": "1Mi2k2alJ
+00021c40: 4a71 7554 3179 6264 3347 4333 5159 4473  JquT1ybd3GC3QYDs
+00021c50: 7453 6167 6157 646f 222c 0a20 2020 2020  tSagaWdo",.     
+00021c60: 2020 2020 2020 2022 687a 223a 2022 3163         "hz": "1c
+00021c70: 316d 5f2d 5139 3276 3044 6937 4e65 7a36  1m_-Q92v0Di7Nez6
+00021c80: 5675 6163 6372 4e31 3969 3869 634b 5622  VuaccrN19i8icKV"
+00021c90: 2c20 2023 206c 6565 720a 2020 2020 2020  ,  # leer.      
+00021ca0: 2020 2020 2020 2269 6122 3a20 2231 6a50        "ia": "1jP
+00021cb0: 7971 546d 4475 5668 4568 6a38 394e 3630  yqTmDuVhEhj89N60
+00021cc0: 3643 6a61 3568 654a 4562 634d 6f4d 222c  6Cja5heJEbcMoM",
+00021cd0: 0a20 2020 2020 2020 2020 2020 2022 6964  .            "id
+00021ce0: 223a 2022 314a 5749 7649 6838 6651 6f4d  ": "1JWIvIh8fQoM
+00021cf0: 5171 6b31 7250 7655 5468 6173 6b78 6e54  Qqk1rPvUThaskxnT
+00021d00: 7338 7473 6622 2c0a 2020 2020 2020 2020  s8tsf",.        
+00021d10: 2020 2020 2269 6522 3a20 2231 5461 4b52      "ie": "1TaKR
+00021d20: 6c54 7442 382d 5771 7534 7366 7678 364a  lTtB8-Wqu4sfvx6J
+00021d30: 514b 4975 6741 6c67 3070 562d 222c 0a20  QKIugAlg0pV-",. 
+00021d40: 2020 2020 2020 2020 2020 2022 6967 223a             "ig":
+00021d50: 2022 3135 4e46 4166 3251 7836 4258 536a   "15NFAf2Qx6BXSj
+00021d60: 765f 4f75 6e39 5f33 5152 4257 4e6e 3439  v_Oun9_3QRBWNn49
+00021d70: 6738 3622 2c0a 2020 2020 2020 2020 2020  g86",.          
+00021d80: 2020 2269 6922 3a20 2231 716c 6447 4a6b    "ii": "1qldGJk
+00021d90: 4d4f 4d4b 7759 3133 4470 6367 6278 5143  MOMKwY13DpcgbxQC
+00021da0: 6266 6630 4b39 3832 6639 222c 2020 2320  bff0K982f9",  # 
+00021db0: 6c65 6572 0a20 2020 2020 2020 2020 2020  leer.           
+00021dc0: 2022 696b 223a 2022 3156 6f53 546f 7532   "ik": "1VoSTou2
+00021dd0: 5a6c 7756 6870 6c79 3236 756a 6f77 447a  ZlwVhply26ujowDz
+00021de0: 3667 6a77 7478 6d6e 7922 2c0a 2020 2020  6gjwtxmny",.    
+00021df0: 2020 2020 2020 2020 2269 6c6f 223a 2022          "ilo": "
+00021e00: 312d 784d 7549 5436 4761 4d5f 5965 4871  1-xMuIT6GaM_YeHq
+00021e10: 676d 314f 616d 476b 7859 6642 5245 6976  gm1OamGkxYfBREiv
+00021e20: 3322 2c0a 2020 2020 2020 2020 2020 2020  3",.            
+00021e30: 2269 6f22 3a20 2231 395a 6c61 3077 7341  "io": "19Zla0wsA
+00021e40: 6372 5a6d 3263 3050 7735 6768 7070 3472  crZm2c0Pw5ghpp4r
+00021e50: 486a 5973 3236 5070 222c 0a20 2020 2020  HjYs26Pp",.     
+00021e60: 2020 2020 2020 2022 6973 223a 2022 3131         "is": "11
+00021e70: 692d 4e43 7971 5336 4862 6c64 4962 5975  i-NCyqS6HbldIbYu
+00021e80: 6c73 4367 5147 5a46 5852 3868 776f 4222  lsCgQGZFXR8hwoB"
+00021e90: 2c0a 2020 2020 2020 2020 2020 2020 2269  ,.            "i
+00021ea0: 7422 3a20 2231 486d 6a6c 4f61 5175 6e48  t": "1HmjlOaQunH
+00021eb0: 714c 3254 6537 7049 6b75 4257 726e 6a6c  qL2Te7pIkuBWrnjl
+00021ec0: 6d64 6659 6f5f 222c 0a20 2020 2020 2020  mdfYo_",.       
+00021ed0: 2020 2020 2022 6975 223a 2022 3138 6a4b       "iu": "18jK
+00021ee0: 6d31 5337 4c73 336c 305f 7048 7151 4838  m1S7Ls3l0_pHqQH8
+00021ef0: 4d79 6347 334c 686f 4332 7064 5822 2c0a  MycG3LhoC2pdX",.
+00021f00: 2020 2020 2020 2020 2020 2020 226a 6122              "ja"
+00021f10: 3a20 2231 3064 7a38 5578 794b 3452 4961  : "10dz8UxyK4RIa
+00021f20: 6358 4532 4863 4764 7268 6172 6d70 3572  cXE2HcGdrharmp5r
+00021f30: 7763 3372 222c 0a20 2020 2020 2020 2020  wc3r",.         
+00021f40: 2020 2022 6a61 6d22 3a20 2231 7639 3943     "jam": "1v99C
+00021f50: 5866 3952 6e62 4636 614a 6f36 3639 5965  Xf9RnbF6aJo669Ye
+00021f60: 5452 366d 5152 544f 4c5a 3734 222c 2020  TR6mQRTOLZ74",  
+00021f70: 2320 6c65 6572 0a20 2020 2020 2020 2020  # leer.         
+00021f80: 2020 2022 6a62 6f22 3a20 2231 5f4c 6d48     "jbo": "1_LmH
+00021f90: 3968 6336 4644 4745 3346 3770 7947 4231  9hc6FDGE3F7pyGB1
+00021fa0: 6655 4562 5377 7554 5951 6444 222c 0a20  fUEbSwuTYQdD",. 
+00021fb0: 2020 2020 2020 2020 2020 2022 6a76 223a             "jv":
+00021fc0: 2022 3171 6953 7531 7545 4343 4c6c 3449   "1qiSu1uECCLl4I
+00021fd0: 425a 5332 3746 4264 4a49 4269 766b 4a37  BZS27FBdJIBivkJ7
+00021fe0: 4777 4522 2c0a 2020 2020 2020 2020 2020  GwE",.          
+00021ff0: 2020 226b 6122 3a20 2231 3732 5546 7546    "ka": "172UFuF
+00022000: 5242 5832 5631 6157 6558 6c50 5370 7539  RBX2V1aWeXlPSpu9
+00022010: 546a 532d 3363 784e 6144 222c 0a20 2020  TjS-3cxNaD",.   
+00022020: 2020 2020 2020 2020 2022 6b61 6122 3a20           "kaa": 
+00022030: 2231 6b68 3668 4d50 5564 714f 2d46 4978  "1kh6hMPUdqO-FIx
+00022040: 5259 3671 6149 425a 6f74 6842 5552 5878  RY6qaIBZothBURXx
+00022050: 6259 222c 0a20 2020 2020 2020 2020 2020  bY",.           
+00022060: 2022 6b61 6222 3a20 2231 6f4b 6a62 5a49   "kab": "1oKjbZI
+00022070: 365a 7272 414c 4371 6e50 4359 6749 6a4b  6ZrrALCqnPCYgIjK
+00022080: 4e72 4b44 4137 6568 6373 222c 0a20 2020  NrKDA7ehcs",.   
+00022090: 2020 2020 2020 2020 2022 6b62 6422 3a20           "kbd": 
+000220a0: 2231 6a4e 6266 7262 6f50 4f77 4a6d 6c58  "1jNbfrboPOwJmlX
+000220b0: 5142 4976 3035 3364 376e 3557 5870 4d52  QBIv053d7n5WXpMR
+000220c0: 7637 222c 0a20 2020 2020 2020 2020 2020  v7",.           
+000220d0: 2022 6b67 223a 2022 3169 6975 357a 2d73   "kg": "1iiu5z-s
+000220e0: 644a 324a 4c43 344a 6139 4967 4478 7052  dJ2JLC4Ja9IgDxpR
+000220f0: 5a6b 6c49 6236 6e44 7822 2c0a 2020 2020  ZklIb6nDx",.    
+00022100: 2020 2020 2020 2020 226b 6922 3a20 2231          "ki": "1
+00022110: 4755 7474 3051 4938 3463 354d 6379 4c47  GUtt0QI84c5McyLG
+00022120: 4778 6f69 3575 776a 484f 7131 6436 4738  Gxoi5uwjHOq1d6G8
+00022130: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+00022140: 6b6a 223a 2022 316e 5378 5855 5347 446c  kj": "1nSxXUSGDl
+00022150: 5856 4349 5047 6c56 7063 616b 5263 3533  XVCIPGlVpcakRc53
+00022160: 374d 7775 4b5a 5222 2c20 2023 206c 6565  7MwuKZR",  # lee
+00022170: 720a 2020 2020 2020 2020 2020 2020 226b  r.            "k
+00022180: 6b22 3a20 2231 7279 4333 554e 306d 7963  k": "1ryC3UN0myc
+00022190: 6b63 3161 7772 5768 6862 3652 4969 3137  kc1awrWhhb6RIi17
+000221a0: 4330 4c43 7553 222c 0a20 2020 2020 2020  C0LCuS",.       
+000221b0: 2020 2020 2022 6b6c 223a 2022 3167 5874       "kl": "1gXt
+000221c0: 4774 5839 6763 5458 6d73 3149 4578 4943  GtX9gcTXms1IExIC
+000221d0: 6e71 5a55 4865 6672 6c63 4946 6622 2c0a  nqZUHefrlcIFf",.
+000221e0: 2020 2020 2020 2020 2020 2020 226b 6d22              "km"
+000221f0: 3a20 2231 4453 3541 5478 7678 7966 6e31  : "1DS5ATxvxyfn1
+00022200: 6957 7671 3247 3671 6d6a 5a76 3970 7630  iWvq2G6qmjZv9pv0
+00022210: 5436 6844 222c 0a20 2020 2020 2020 2020  T6hD",.         
+00022220: 2020 2022 6b6e 223a 2022 315a 474c 594d     "kn": "1ZGLYM
+00022230: 7862 6235 2d32 394d 4e6d 7555 6667 3278  xbb5-29MNmuUfg2x
+00022240: 4668 5955 626b 4a46 4d4a 4a22 2c0a 2020  FhYUbkJFMJJ",.  
+00022250: 2020 2020 2020 2020 2020 226b 6f22 3a20            "ko": 
+00022260: 2231 3272 3874 496b 546e 774b 684c 4a78  "12r8tIkTnwKhLJx
+00022270: 7937 3171 7049 636f 4c72 5436 4e4e 6851  y71qpIcoLrT6NNhQ
+00022280: 596d 222c 0a20 2020 2020 2020 2020 2020  Ym",.           
+00022290: 2022 6b6f 6922 3a20 2231 4564 475f 775a   "koi": "1EdG_wZ
+000222a0: 5f51 6b31 3234 4550 415a 772d 7736 7264  _Qk124EPAZw-w6rd
+000222b0: 4568 594c 7367 6376 496a 222c 0a20 2020  EhYLsgcvIj",.   
+000222c0: 2020 2020 2020 2020 2022 6b72 223a 2022           "kr": "
+000222d0: 3139 564e 5174 6e42 412d 594c 5f61 7657  19VNQtnBA-YL_avW
+000222e0: 7556 6548 5148 784a 5a39 4d5a 3034 5750  uVeHQHxJZ9MZ04WP
+000222f0: 4622 2c20 2023 206c 6565 720a 2020 2020  F",  # leer.    
+00022300: 2020 2020 2020 2020 226b 7263 223a 2022          "krc": "
+00022310: 316e 5265 5634 4d62 3757 646a 3936 637a  1nReV4Mb7Wdj96cz
+00022320: 704f 3572 6567 4662 6442 5075 307a 5a5f  pO5regFbdBPu0zZ_
+00022330: 7922 2c0a 2020 2020 2020 2020 2020 2020  y",.            
+00022340: 226b 7322 3a20 2231 6b7a 6830 5067 7276  "ks": "1kzh0Pgrv
+00022350: 3237 5752 4d73 7452 394d 7055 386d 7537  27WRMstR9MpU8mu7
+00022360: 7036 3054 6354 2d58 222c 0a20 2020 2020  p60TcT-X",.     
+00022370: 2020 2020 2020 2022 6b73 6822 3a20 2231         "ksh": "1
+00022380: 6948 4a76 726c 3248 6552 6143 756d 6c72  iHJvrl2HeRaCumlr
+00022390: 7833 4e37 4350 7248 5132 4b75 4c55 6b74  x3N7CPrHQ2KuLUkt
+000223a0: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+000223b0: 6b75 223a 2022 3159 714a 6f67 3742 6b6b  ku": "1YqJog7Bkk
+000223c0: 3066 4842 4353 5478 4a39 6865 6545 2d62  0fHBCSTxJ9heeE-b
+000223d0: 6662 6b62 6b79 6522 2c0a 2020 2020 2020  fbkbkye",.      
+000223e0: 2020 2020 2020 226b 7622 3a20 2231 7339        "kv": "1s9
+000223f0: 3148 4934 6571 386c 5159 6c5a 7766 724a  1HI4eq8lQYlZwfrJ
+00022400: 4167 6147 6c43 7941 7449 6876 494a 222c  AgaGlCyAtIhvIJ",
+00022410: 0a20 2020 2020 2020 2020 2020 2022 6b77  .            "kw
+00022420: 223a 2022 3136 5461 4958 326e 5266 7144  ": "16TaIX2nRfqD
+00022430: 7038 6e37 7a75 6464 3462 7166 3561 624e  p8n7zudd4bqf5abN
+00022440: 3439 6476 5722 2c0a 2020 2020 2020 2020  49dvW",.        
+00022450: 2020 2020 226b 7922 3a20 2231 3748 5055      "ky": "17HPU
+00022460: 4b46 644b 5768 556a 7552 314e 4f70 3566  KFdKWhUjuR1NOp5f
+00022470: 3350 5159 664d 6c4d 4378 4354 222c 0a20  3PQYfMlMCxCT",. 
+00022480: 2020 2020 2020 2020 2020 2022 6c61 223a             "la":
+00022490: 2022 314e 6951 7542 6155 4946 4545 5276   "1NiQuBaUIFEERv
+000224a0: 5658 6f36 4351 4c77 6f73 5072 6147 7969  VXo6CQLwosPraGyi
+000224b0: 5259 7722 2c0a 2020 2020 2020 2020 2020  RYw",.          
+000224c0: 2020 226c 6164 223a 2022 3150 456d 5843    "lad": "1PEmXC
+000224d0: 574c 4371 6e6a 4c42 6f6d 4d41 5948 654f  WLCqnjLBomMAYHeO
+000224e0: 624d 3141 6d56 4874 4430 3822 2c0a 2020  bM1AmVHtD08",.  
+000224f0: 2020 2020 2020 2020 2020 226c 6222 3a20            "lb": 
+00022500: 2231 6e45 3467 3130 786f 5455 3233 6964  "1nE4g10xoTU23id
+00022510: 6d44 744f 5130 7732 5143 7569 7a5a 3651  mDtOQ0w2QCuizZ6Q
+00022520: 485f 222c 0a20 2020 2020 2020 2020 2020  H_",.           
+00022530: 2022 6c62 6522 3a20 2231 4b4f 6d2d 4164   "lbe": "1KOm-Ad
+00022540: 5263 4348 6653 6331 2d75 5942 7842 4134  RcCHfSc1-uYBxBA4
+00022550: 476a 7858 6a6e 496c 452d 222c 0a20 2020  GjxXjnIlE-",.   
+00022560: 2020 2020 2020 2020 2022 6c65 7a22 3a20           "lez": 
+00022570: 2231 634a 4158 7368 724c 6c46 3154 5a6c  "1cJAXshrLlF1TZl
+00022580: 5048 4a54 7044 7745 7675 7249 4f73 7a34  PHJTpDwEvurIOsz4
+00022590: 7952 222c 0a20 2020 2020 2020 2020 2020  yR",.           
+000225a0: 2022 6c67 223a 2022 3155 7230 7937 6969   "lg": "1Ur0y7ii
+000225b0: 4570 5742 6748 4543 7249 7254 314f 7949  EpWBgHECrIrT1OyI
+000225c0: 4338 756d 5f79 3474 6822 2c0a 2020 2020  C8um_y4th",.    
+000225d0: 2020 2020 2020 2020 226c 6922 3a20 2231          "li": "1
+000225e0: 5469 6b49 7166 7163 5a6c 5344 5768 4f61  TikIqfqcZlSDWhOa
+000225f0: 6531 4a6e 6a4a 6944 6b6f 346e 6a34 446a  e1JnjJiDko4nj4Dj
+00022600: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+00022610: 6c69 6a22 3a20 2231 726f 3549 7455 6346  lij": "1ro5ItUcF
+00022620: 3439 6950 334a 6456 3832 6c68 4351 3037  49iP3JdV82lhCQ07
+00022630: 4d74 5a6e 5f56 6a57 222c 0a20 2020 2020  MtZn_VjW",.     
+00022640: 2020 2020 2020 2022 6c6d 6f22 3a20 2231         "lmo": "1
+00022650: 5734 7268 4279 3250 6935 5375 5957 7957  W4rhBy2Pi5SuYWyW
+00022660: 624e 6f74 4f56 6b56 5933 6b59 5753 5f4f  bNotOVkVY3kYWS_O
+00022670: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+00022680: 6c6e 223a 2022 3162 4c53 5636 6257 7830  ln": "1bLSV6bWx0
+00022690: 4367 466d 3742 794b 7070 5a4c 7059 4346  CgFm7ByKppZLpYCF
+000226a0: 4c38 4549 416f 4422 2c0a 2020 2020 2020  L8EIAoD",.      
+000226b0: 2020 2020 2020 226c 6f22 3a20 2231 4336        "lo": "1C6
+000226c0: 5353 4c65 4b46 3351 6972 6a5a 6241 5a41  SSLeKF3QirjZbAZA
+000226d0: 6370 5658 5f41 5859 675f 544a 4733 222c  cpVX_AXYg_TJG3",
+000226e0: 0a20 2020 2020 2020 2020 2020 2022 6c72  .            "lr
+000226f0: 6322 3a20 2231 4755 6353 3238 4d6c 4a65  c": "1GUcS28MlJe
+00022700: 5f4f 6a65 5166 5332 414a 3875 637a 7044  _OjeQfS2AJ8uczpD
+00022710: 3875 7436 3065 222c 0a20 2020 2020 2020  8ut60e",.       
+00022720: 2020 2020 2022 6c74 223a 2022 3167 4147       "lt": "1gAG
+00022730: 3654 634d 546d 4331 3238 7757 4b30 7243  6TcMTmC128wWK0rC
+00022740: 5852 6c43 5473 4a59 3977 4651 5922 2c0a  XRlCTsJY9wFQY",.
+00022750: 2020 2020 2020 2020 2020 2020 226c 7467              "ltg
+00022760: 223a 2022 3132 7a69 5038 745f 6641 4153  ": "12ziP8t_fAAS
+00022770: 394a 714f 4345 4330 6b75 4a4f 6245 7975  9JqOCEC0kuJObEyu
+00022780: 6f69 4f6a 4422 2c0a 2020 2020 2020 2020  oiOjD",.        
+00022790: 2020 2020 226c 7622 3a20 2231 4d50 7541      "lv": "1MPuA
+000227a0: 4d30 3475 2d41 7466 7962 5864 7048 7743  M04u-AtfybXdpHwC
+000227b0: 7155 7046 5762 652d 7a44 305f 222c 0a20  qUpFWbe-zD0_",. 
+000227c0: 2020 2020 2020 2020 2020 2022 6d61 6922             "mai"
+000227d0: 3a20 2231 645f 6e55 6577 426b 6b61 3251  : "1d_nUewBkka2Q
+000227e0: 4745 6d78 4363 3976 3364 5466 766f 376c  GEmxCc9v3dTfvo7l
+000227f0: 5041 5448 222c 0a20 2020 2020 2020 2020  PATH",.         
+00022800: 2020 2022 6d61 702d 626d 7322 3a20 2231     "map-bms": "1
+00022810: 7772 4e49 452d 6d71 7032 7862 336c 724e  wrNIE-mqp2xb3lrN
+00022820: 6477 4144 6536 7062 3766 3335 4e50 3656  dwADe6pb7f35NP6V
+00022830: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+00022840: 6d64 6622 3a20 2231 426d 4d47 554a 7937  mdf": "1BmMGUJy7
+00022850: 6166 754b 6668 6654 424d 694b 784d 3344  afuKfhfTBMiKxM3D
+00022860: 3746 592d 4a72 5132 222c 0a20 2020 2020  7FY-JrQ2",.     
+00022870: 2020 2020 2020 2022 6d67 223a 2022 3130         "mg": "10
+00022880: 3557 614d 6863 5761 2d34 3674 437a 746f  5WaMhcWa-46tCzto
+00022890: 6a38 6e70 5579 6730 6148 3138 6e46 4c22  j8npUyg0aH18nFL"
+000228a0: 2c0a 2020 2020 2020 2020 2020 2020 226d  ,.            "m
+000228b0: 6822 3a20 2231 456a 376e 3679 4131 6346  h": "1Ej7n6yA1cF
+000228c0: 3163 7044 3558 6e65 6674 4874 4c33 3369  1cpD5XneftHtL33i
+000228d0: 484a 776e 7454 222c 0a20 2020 2020 2020  HJwntT",.       
+000228e0: 2020 2020 2022 6d68 7222 3a20 2231 4343       "mhr": "1CC
+000228f0: 5049 5561 466b 4559 5869 484f 3048 4638  PIUaFkEYXiHO0HF8
+00022900: 5f77 3037 557a 5679 5763 6872 6a53 222c  _w07UzVyWchrjS",
+00022910: 0a20 2020 2020 2020 2020 2020 2022 6d69  .            "mi
+00022920: 223a 2022 3146 3661 7539 7851 6a6e 462d  ": "1F6au9xQjnF-
+00022930: 614e 4275 7047 4a31 5077 614d 4d4d 3654  aNBupGJ1PwaMMM6T
+00022940: 5f50 6764 5122 2c0a 2020 2020 2020 2020  _PgdQ",.        
+00022950: 2020 2020 226d 696e 223a 2022 3174 564b      "min": "1tVK
+00022960: 3553 4869 4379 5f44 615a 5344 6d33 6e5a  5SHiCy_DaZSDm3nZ
+00022970: 4267 5435 6267 5754 6862 4a74 5f22 2c0a  BgT5bgWThbJt_",.
+00022980: 2020 2020 2020 2020 2020 2020 226d 6b22              "mk"
+00022990: 3a20 2231 384e 7075 6479 7447 6853 5771  : "18NpudytGhSWq
+000229a0: 5f4c 626d 7963 5444 7731 3063 5366 746c  _LbmycTDw10cSftl
+000229b0: 5342 4753 222c 0a20 2020 2020 2020 2020  SBGS",.         
+000229c0: 2020 2022 6d6c 223a 2022 3156 3733 5545     "ml": "1V73UE
+000229d0: 2d45 7663 452d 7656 3356 3152 5476 5534  -EvcE-vV3V1RTvU4
+000229e0: 7361 6b36 5146 6350 3931 7922 2c0a 2020  sak6QFcP91y",.  
+000229f0: 2020 2020 2020 2020 2020 226d 6e22 3a20            "mn": 
+00022a00: 2231 346a 5258 6963 4138 376f 585a 4f5a  "14jRXicA87oXZOZ
+00022a10: 6c6c 5771 556a 4b42 4d65 744e 7051 4555  llWqUjKBMetNpQEU
+00022a20: 5570 222c 0a20 2020 2020 2020 2020 2020  Up",.           
+00022a30: 2022 6d6f 223a 2022 3159 734c 474e 4d73   "mo": "1YsLGNMs
+00022a40: 4a37 5673 656b 6864 6349 5451 656f 6c7a  J7VsekhdcITQeolz
+00022a50: 4f53 4b34 4e7a 4536 5522 2c0a 2020 2020  OSK4NzE6U",.    
+00022a60: 2020 2020 2020 2020 226d 7222 3a20 2231          "mr": "1
+00022a70: 764f 7231 4149 4862 676b 6854 4f39 4f6c  vOr1AIHbgkhTO9Ol
+00022a80: 394a 7835 5768 3938 5164 7968 3151 4b49  9Jx5Wh98Qdyh1QKI
+00022a90: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+00022aa0: 6d72 6a22 3a20 2231 6457 2d59 6d45 5738  mrj": "1dW-YmEW8
+00022ab0: 6139 4435 4b79 587a 386f 6a53 6449 5857  a9D5KyXz8ojSdIXW
+00022ac0: 4765 6b4e 7a47 7a4e 222c 0a20 2020 2020  GekNzGzN",.     
+00022ad0: 2020 2020 2020 2022 6d73 223a 2022 3162         "ms": "1b
+00022ae0: 732d 5f35 574e 5269 5a42 6a4f 2d44 7463  s-_5WNRiZBjO-Dtc
+00022af0: 4e74 6b63 496c 652d 3938 686f 6d66 5f22  NtkcIle-98homf_"
+00022b00: 2c0a 2020 2020 2020 2020 2020 2020 226d  ,.            "m
+00022b10: 7422 3a20 2231 4c37 6155 3369 476a 6d36  t": "1L7aU3iGjm6
+00022b20: 536d 5049 5537 346b 3939 3071 5267 4846  SmPIU74k990qRgHF
+00022b30: 5639 6872 4c30 222c 0a20 2020 2020 2020  V9hrL0",.       
+00022b40: 2020 2020 2022 6d75 7322 3a20 2231 5f62       "mus": "1_b
+00022b50: 3744 6352 7169 4b4a 4645 4677 7038 3763  7DcRqiKJFEFwp87c
+00022b60: 5565 6371 6638 4135 4244 6254 494a 222c  Uecqf8A5BDbTIJ",
+00022b70: 2020 2320 6c65 6572 0a20 2020 2020 2020    # leer.       
+00022b80: 2020 2020 2022 6d77 6c22 3a20 2231 4d66       "mwl": "1Mf
+00022b90: 5030 6a62 6132 6a51 6647 5665 4a4f 4c71  P0jba2jQfGVeJOLq
+00022ba0: 3236 4d6a 4936 6659 5937 7854 5075 222c  26MjI6fYY7xTPu",
+00022bb0: 0a20 2020 2020 2020 2020 2020 2022 6d79  .            "my
+00022bc0: 223a 2022 3136 7773 4947 4268 4e56 6432  ": "16wsIGBhNVd2
+00022bd0: 6c43 3270 366e 3158 3872 644d 6269 6165  lC2p6n1X8rdMbiae
+00022be0: 6d65 6955 4d22 2c0a 2020 2020 2020 2020  meiUM",.        
+00022bf0: 2020 2020 226d 7976 223a 2022 314b 4571      "myv": "1KEq
+00022c00: 486d 6678 3270 6655 2d61 3174 6449 5f37  Hmfx2pfU-a1tdI_7
+00022c10: 5a78 4d51 416b 354e 4a7a 4a6a 4222 2c0a  ZxMQAk5NJzJjB",.
+00022c20: 2020 2020 2020 2020 2020 2020 226d 7a6e              "mzn
+00022c30: 223a 2022 3143 666c 766d 5945 585a 6e57  ": "1CflvmYEXZnW
+00022c40: 7770 7342 6d49 7332 4f76 472d 7a44 4476  wpsBmIs2OvG-zDDv
+00022c50: 4c45 4d44 4a22 2c0a 2020 2020 2020 2020  LEMDJ",.        
+00022c60: 2020 2020 226e 6122 3a20 2231 7230 4156      "na": "1r0AV
+00022c70: 6a65 6535 774e 6e72 6367 4a78 516d 5647  jee5wNnrcgJxQmVG
+00022c80: 5056 4b67 3559 577a 3169 727a 222c 0a20  PVKg5YWz1irz",. 
+00022c90: 2020 2020 2020 2020 2020 2022 6e61 6822             "nah"
+00022ca0: 3a20 2231 6678 3665 7539 314e 6567 7975  : "1fx6eu91Negyu
+00022cb0: 655a 3169 3058 6142 3037 434b 6a55 776a  eZ1i0XaB07CKjUwj
+00022cc0: 484e 3748 222c 0a20 2020 2020 2020 2020  HN7H",.         
+00022cd0: 2020 2022 6e61 7022 3a20 2231 6268 5434     "nap": "1bhT4
+00022ce0: 7358 434a 7661 5463 6843 4956 396d 774c  sXCJvaTchCIV9mwL
+00022cf0: 4274 6633 6137 4f70 7262 5642 222c 0a20  Btf3a7OprbVB",. 
+00022d00: 2020 2020 2020 2020 2020 2022 6e64 732d             "nds-
+00022d10: 6e6c 223a 2022 3155 4946 6938 654f 4375  nl": "1UIFi8eOCu
+00022d20: 4659 4a58 5341 585a 3970 4357 776b 514d  FYJXSAXZ9pCWwkQM
+00022d30: 6c48 6159 3479 6522 2c0a 2020 2020 2020  lHaY4ye",.      
+00022d40: 2020 2020 2020 226e 6473 223a 2022 3146        "nds": "1F
+00022d50: 4c67 5a49 5855 5761 5f76 656b 4474 346e  LgZIXUWa_vekDt4n
+00022d60: 6459 3042 3558 4c37 464e 4c69 756c 7222  dY0B5XL7FNLiulr"
+00022d70: 2c0a 2020 2020 2020 2020 2020 2020 226e  ,.            "n
+00022d80: 6522 3a20 2231 6745 6f43 6a53 4a6d 7a6a  e": "1gEoCjSJmzj
+00022d90: 4948 346b 6448 7362 445a 7a44 3649 4434  IH4kdHsbDZzD6ID4
+00022da0: 5f37 3865 6b53 222c 0a20 2020 2020 2020  _78ekS",.       
+00022db0: 2020 2020 2022 6e65 7722 3a20 2231 5f2d       "new": "1_-
+00022dc0: 7034 354e 7934 7739 5576 4775 6844 3875  p45Ny4w9UvGuhD8u
+00022dd0: 524e 5350 5065 6141 5259 7645 5348 222c  RNSPPeaARYvESH",
+00022de0: 0a20 2020 2020 2020 2020 2020 2022 6e67  .            "ng
+00022df0: 223a 2022 3131 7978 5064 6b6d 706d 6e69  ": "11yxPdkmpmni
+00022e00: 6a51 5563 6e46 485a 3378 634f 6d4c 5459  jQUcnFHZ3xcOmLTY
+00022e10: 4a6d 4e5f 5222 2c0a 2020 2020 2020 2020  JmN_R",.        
+00022e20: 2020 2020 226e 6c22 3a20 2231 6471 5958      "nl": "1dqYX
+00022e30: 6733 696c 7a56 4f53 515f 747a 5f64 4634  g3ilzVOSQ_tz_dF4
+00022e40: 3765 6c53 4976 5349 6867 7164 222c 0a20  7elSIvSIhgqd",. 
+00022e50: 2020 2020 2020 2020 2020 2022 6e6e 223a             "nn":
+00022e60: 2022 3170 4472 7452 6851 3030 317a 3257   "1pDrtRhQ001z2W
+00022e70: 554e 4d57 435a 5155 3352 565f 4d30 4271  UNMWCZQU3RV_M0Bq
+00022e80: 4f6d 7622 2c0a 2020 2020 2020 2020 2020  Omv",.          
+00022e90: 2020 226e 6f22 3a20 2231 7a75 5438 4d49    "no": "1zuT8MI
+00022ea0: 3936 4976 7069 7539 6d45 5646 4e6a 7762  96Ivpiu9mEVFNjwb
+00022eb0: 694d 3867 4a6c 537a 5932 222c 0a20 2020  iM8gJlSzY2",.   
+00022ec0: 2020 2020 2020 2020 2022 6e6f 7622 3a20           "nov": 
+00022ed0: 2231 6c33 3833 3838 526c 6e30 4e58 7353  "1l38388Rln0NXsS
+00022ee0: 4152 4d5a 486d 546d 7966 6f35 4330 7759  ARMZHmTmyfo5C0wY
+00022ef0: 5464 222c 0a20 2020 2020 2020 2020 2020  Td",.           
+00022f00: 2022 6e72 6d22 3a20 2231 3076 7850 7131   "nrm": "10vxPq1
+00022f10: 4e63 6937 5770 7134 584f 7678 3364 7471  Nci7Wpq4XOvx3dtq
+00022f20: 4f44 736b 7a6a 6478 4a51 222c 0a20 2020  ODskzjdxJQ",.   
+00022f30: 2020 2020 2020 2020 2022 6e73 6f22 3a20           "nso": 
+00022f40: 2231 6961 4956 3871 6c54 3052 446e 6265  "1iaIV8qlT0RDnbe
+00022f50: 516c 6e78 4a33 5265 6873 4733 6755 3565  QlnxJ3RehsG3gU5e
+00022f60: 504b 222c 0a20 2020 2020 2020 2020 2020  PK",.           
+00022f70: 2022 6e76 223a 2022 316f 4e33 316a 5430   "nv": "1oN31jT0
+00022f80: 7733 7750 3961 4777 4150 7a39 3170 5364  w3wP9aGwAPz91pSd
+00022f90: 5579 746e 6439 4230 6722 2c0a 2020 2020  Uytnd9B0g",.    
+00022fa0: 2020 2020 2020 2020 226e 7922 3a20 2231          "ny": "1
+00022fb0: 6545 4b48 5f72 5550 4335 3630 6266 4567  eEKH_rUPC560bfEg
+00022fc0: 3131 6b70 336b 6265 3871 576d 3335 4947  11kp3kbe8qWm35IG
+00022fd0: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+00022fe0: 6f63 223a 2022 3143 3031 6357 3847 5f6a  oc": "1C01cW8G_j
+00022ff0: 3855 532d 4454 7273 6d65 616c 5f45 4e48  8US-DTrsmeal_ENH
+00023000: 5474 4e57 6e2d 4822 2c0a 2020 2020 2020  TtNWn-H",.      
+00023010: 2020 2020 2020 226f 6c6f 223a 2022 3176        "olo": "1v
+00023020: 6244 774b 5a4b 7146 7138 3464 7573 7231  bDwKZKqFq84dusr1
+00023030: 5376 4478 354a 6242 6350 616e 7839 4c22  SvDx5JbBcPanx9L"
+00023040: 2c20 2023 206c 6565 720a 2020 2020 2020  ,  # leer.      
+00023050: 2020 2020 2020 226f 6d22 3a20 2231 7133        "om": "1q3
+00023060: 6832 3256 4d62 5767 326b 6756 466d 2d4f  h22VMbWg2kgVFm-O
+00023070: 4172 522d 4534 7931 7942 5131 4a58 222c  ArR-E4y1yBQ1JX",
+00023080: 0a20 2020 2020 2020 2020 2020 2022 6f72  .            "or
+00023090: 223a 2022 316b 384c 7743 4538 6e43 376c  ": "1k8LwCE8nC7l
+000230a0: 7136 6e65 5844 6153 337a 526e 304b 4f72  q6neXDaS3zRn0KOr
+000230b0: 6439 526e 5322 2c0a 2020 2020 2020 2020  d9RnS",.        
+000230c0: 2020 2020 226f 7322 3a20 2231 7538 314b      "os": "1u81K
+000230d0: 4142 3334 6145 5166 6574 3030 644c 4d52  AB34aEQfet00dLMR
+000230e0: 4942 4a73 6652 7762 4454 696a 222c 0a20  IBJsfRwbDTij",. 
+000230f0: 2020 2020 2020 2020 2020 2022 7061 223a             "pa":
+00023100: 2022 314a 4445 484c 3156 634c 4842 616d   "1JDEHL1VcLHBam
+00023110: 6754 5042 6f6d 5f52 7969 3868 6b36 5042  gTPBom_Ryi8hk6PB
+00023120: 7073 7522 2c0a 2020 2020 2020 2020 2020  psu",.          
+00023130: 2020 2270 6167 223a 2022 316b 3930 3556    "pag": "1k905V
+00023140: 5557 6e52 6759 386b 4662 3250 3234 3331  UWnRgY8kFb2P2431
+00023150: 4b72 3464 5a75 6f6c 5947 4622 2c0a 2020  Kr4dZuolYGF",.  
+00023160: 2020 2020 2020 2020 2020 2270 616d 223a            "pam":
+00023170: 2022 3173 7375 6747 794a 6238 6970 6973   "1ssugGyJb8ipis
+00023180: 7043 3630 4233 4936 6b7a 4d73 7269 3157  pC60B3I6kzMsri1W
+00023190: 6376 4322 2c0a 2020 2020 2020 2020 2020  cvC",.          
+000231a0: 2020 2270 6170 223a 2022 315a 6130 7766    "pap": "1Za0wf
+000231b0: 7761 7478 596f 4437 6a47 636c 6d54 7452  watxYoD7jGclmTtR
+000231c0: 6f42 5030 7556 5f71 496d 5122 2c0a 2020  oBP0uV_qImQ",.  
+000231d0: 2020 2020 2020 2020 2020 2270 6364 223a            "pcd":
+000231e0: 2022 3163 734a 6c4b 6774 4730 3470 6449   "1csJlKgtG04pdI
+000231f0: 5943 5557 6873 4343 5a41 524b 4947 6c45  YCUWhsCCZARKIGlE
+00023200: 5950 7822 2c0a 2020 2020 2020 2020 2020  YPx",.          
+00023210: 2020 2270 6463 223a 2022 3158 6e6d 7334    "pdc": "1Xnms4
+00023220: 5258 5a4b 5a31 4242 516d 514a 4550 6f6b  RXZKZ1BBQmQJEPok
+00023230: 6d6b 6977 6554 706f 7555 7722 2c0a 2020  mkiweTpouUw",.  
+00023240: 2020 2020 2020 2020 2020 2270 666c 223a            "pfl":
+00023250: 2022 3174 5051 6648 5837 4530 754b 4d64   "1tPQfHX7E0uKMd
+00023260: 4453 6c77 4e77 3561 476d 6153 3562 554b  DSlwNw5aGmaS5bUK
+00023270: 3072 6e22 2c0a 2020 2020 2020 2020 2020  0rn",.          
+00023280: 2020 2270 6922 3a20 2231 3662 2d4b 784e    "pi": "16b-KxN
+00023290: 787a 6245 7579 6f4e 536c 4933 6266 6532  xzbEuyoNSlI3bfe2
+000232a0: 5958 6d64 5345 7350 4675 222c 0a20 2020  YXmdSEsPFu",.   
+000232b0: 2020 2020 2020 2020 2022 7069 6822 3a20           "pih": 
+000232c0: 2231 7677 7969 6854 6e53 385f 5045 3542  "1vwyihTnS8_PE5B
+000232d0: 4e4b 3763 5449 536d 4942 7147 5776 7356  NK7cTISmIBqGWvsV
+000232e0: 6e46 222c 0a20 2020 2020 2020 2020 2020  nF",.           
+000232f0: 2022 706c 223a 2022 3166 696a 6a53 304c   "pl": "1fijjS0L
+00023300: 6266 704b 636f 5042 3556 3863 3866 4830  bfpKcoPB5V8c8fH0
+00023310: 3854 3841 6b58 5270 3922 2c0a 2020 2020  8T8AkXRp9",.    
+00023320: 2020 2020 2020 2020 2270 6d73 223a 2022          "pms": "
+00023330: 3132 7953 6337 5839 616a 5757 714d 6c42  12ySc7X9ajWWqMlB
+00023340: 6a79 7250 6945 6463 2d71 5642 7549 6b62  jyrPiEdc-qVBuIkb
+00023350: 4122 2c0a 2020 2020 2020 2020 2020 2020  A",.            
+00023360: 2270 6e62 223a 2022 3152 4233 2d77 6a6c  "pnb": "1RB3-wjl
+00023370: 7568 544b 6264 5447 4373 6b33 6e61 6731  uhTKbdTGCsk3nag1
+00023380: 624d 336d 3477 454e 6222 2c0a 2020 2020  bM3m4wENb",.    
+00023390: 2020 2020 2020 2020 2270 6e74 223a 2022          "pnt": "
+000233a0: 315a 4355 7a6d 7336 6659 346f 6e5f 6657  1ZCUzms6fY4on_fW
+000233b0: 3875 5667 4f37 6345 7339 4b48 7964 4859  8uVgO7cEs9KHydHY
+000233c0: 5f22 2c0a 2020 2020 2020 2020 2020 2020  _",.            
+000233d0: 2270 7322 3a20 2231 574b 6c39 4176 3653  "ps": "1WKl9Av6S
+000233e0: 717a 3661 484b 7955 4d35 6b49 6839 306d  qz6aHKyUM5kIh90m
+000233f0: 7a46 7a79 5657 4839 222c 0a20 2020 2020  zFzyVWH9",.     
+00023400: 2020 2020 2020 2022 7074 223a 2022 3133         "pt": "13
+00023410: 4258 2d5f 345f 6863 5455 7035 3948 4479  BX-_4_hcTUp59HDy
+00023420: 637a 4644 4933 3271 5542 3934 7655 5922  czFDI32qUB94vUY"
+00023430: 2c0a 2020 2020 2020 2020 2020 2020 2271  ,.            "q
+00023440: 7522 3a20 2231 4342 5f43 3479 6774 526f  u": "1CB_C4ygtRo
+00023450: 6567 6b71 6763 7166 584e 4872 386f 5164  egkqgcqfXNHr8oQd
+00023460: 2d55 6376 4445 222c 0a20 2020 2020 2020  -UcvDE",.       
+00023470: 2020 2020 2022 726d 223a 2022 3159 5253       "rm": "1YRS
+00023480: 4767 576f 7845 7153 6f6a 4858 7542 484a  GgWoxEqSojHXuBHJ
+00023490: 6e59 3876 4148 7231 5667 4c75 2d22 2c0a  nY8vAHr1VgLu-",.
+000234a0: 2020 2020 2020 2020 2020 2020 2272 6d79              "rmy
+000234b0: 223a 2022 3175 4663 4379 764f 5742 4a57  ": "1uFcCyvOWBJW
+000234c0: 4b46 5178 626b 5953 7033 3733 7855 5856  KFQxbkYSp373xUXV
+000234d0: 6c34 4967 4622 2c0a 2020 2020 2020 2020  l4IgF",.        
+000234e0: 2020 2020 2272 6e22 3a20 2231 656b 7979      "rn": "1ekyy
+000234f0: 6232 4d76 7570 5947 595f 4538 5f42 684b  b2MvupYGY_E8_BhK
+00023500: 7656 3636 3473 4c76 5734 6145 222c 0a20  vV664sLvW4aE",. 
+00023510: 2020 2020 2020 2020 2020 2022 726f 223a             "ro":
+00023520: 2022 3159 6665 4e54 536f 7855 2d7a 4a4d   "1YfeNTSoxU-zJM
+00023530: 6e79 516f 744c 6b35 5838 425f 366e 4872  nyQotLk5X8B_6nHr
+00023540: 7942 7522 2c0a 2020 2020 2020 2020 2020  yBu",.          
+00023550: 2020 2272 6f61 2d72 7570 223a 2022 3135    "roa-rup": "15
+00023560: 3073 3448 3454 6451 356e 4e59 5643 366a  0s4H4TdQ5nNYVC6j
+00023570: 3045 3431 3654 5541 6a42 4538 3579 7922  0E416TUAjBE85yy"
+00023580: 2c0a 2020 2020 2020 2020 2020 2020 2272  ,.            "r
+00023590: 6f61 2d74 6172 6122 3a20 2231 4836 656d  oa-tara": "1H6em
+000235a0: 6651 7344 5f61 3579 6f68 4b34 524d 5051  fQsD_a5yohK4RMPQ
+000235b0: 2d47 726e 4858 7171 5667 7233 222c 0a20  -GrnHXqqVgr3",. 
+000235c0: 2020 2020 2020 2020 2020 2022 7275 223a             "ru":
+000235d0: 2022 3131 6750 3273 2d53 5963 6653 336a   "11gP2s-SYcfS3j
+000235e0: 394d 6a50 7035 4333 5f6e 4665 5142 2d38  9MjPp5C3_nFeQB-8
+000235f0: 7838 3622 2c0a 2020 2020 2020 2020 2020  x86",.          
+00023600: 2020 2272 7565 223a 2022 314f 7553 676c    "rue": "1OuSgl
+00023610: 5a41 6e64 6a61 314a 3544 3549 556d 6462  ZAndja1J5D5IUmdb
+00023620: 745f 6e69 5454 7945 6759 4b22 2c0a 2020  t_niTTyEgYK",.  
+00023630: 2020 2020 2020 2020 2020 2272 7722 3a20            "rw": 
+00023640: 2231 4e75 6848 6669 302d 422d 586c 725f  "1NuhHfi0-B-Xlr_
+00023650: 4241 7069 6a6e 7843 7730 574d 456c 7474  BApijnxCw0WMEltt
+00023660: 7450 222c 0a20 2020 2020 2020 2020 2020  tP",.           
+00023670: 2022 7361 223a 2022 3150 3253 3367 4c5f   "sa": "1P2S3gL_
+00023680: 7a76 4b67 584c 4b4a 4a78 672d 4662 347a  zvKgXLKJJxg-Fb4z
+00023690: 3858 646c 5670 5169 6b22 2c0a 2020 2020  8XdlVpQik",.    
+000236a0: 2020 2020 2020 2020 2273 6168 223a 2022          "sah": "
+000236b0: 3171 7a30 4d70 4b63 6b7a 5572 6566 3246  1qz0MpKckzUref2F
+000236c0: 585f 4659 694e 7a49 3270 3442 4463 356f  X_FYiNzI2p4BDc5o
+000236d0: 5222 2c0a 2020 2020 2020 2020 2020 2020  R",.            
+000236e0: 2273 6322 3a20 2231 6f41 596a 5f46 7479  "sc": "1oAYj_Fty
+000236f0: 3446 5577 6a41 4f42 4542 6169 5a74 5f63  4FUwjAOBEBaiZt_c
+00023700: 5938 6474 7044 6641 222c 0a20 2020 2020  Y8dtpDfA",.     
+00023710: 2020 2020 2020 2022 7363 6e22 3a20 2231         "scn": "1
+00023720: 7344 4e39 7a48 6b58 5759 6f48 5978 2d44  sDN9zHkXWYoHYx-D
+00023730: 5575 2d47 5076 7355 6742 5f49 5261 3853  Uu-GPvsUgB_IRa8S
+00023740: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+00023750: 7363 6f22 3a20 2231 6938 5737 4b51 506a  sco": "1i8W7KQPj
+00023760: 3659 5a51 4c6f 7038 3976 5a42 5379 624a  6YZQLop89vZBSybJ
+00023770: 4e67 4e73 7658 5752 222c 0a20 2020 2020  NgNsvXWR",.     
+00023780: 2020 2020 2020 2022 7364 223a 2022 3176         "sd": "1v
+00023790: 614e 7166 7633 5338 476c 3570 516d 6967  aNqfv3S8Gl5pQmig
+000237a0: 3376 7757 5133 6371 5254 7358 6d4d 5222  3vwWQ3cqRTsXmMR"
+000237b0: 2c0a 2020 2020 2020 2020 2020 2020 2273  ,.            "s
+000237c0: 6522 3a20 2231 5254 3978 686e 3056 6c39  e": "1RT9xhn0Vl9
+000237d0: 307a 6a57 5944 5477 3556 314c 5f75 314f  0zjWYDTw5V1L_u1O
+000237e0: 6831 3674 7050 222c 0a20 2020 2020 2020  h16tpP",.       
+000237f0: 2020 2020 2022 7367 223a 2022 3169 4968       "sg": "1iIh
+00023800: 326f 5844 3253 7a7a 5f41 7967 5576 5474  2oXD2Szz_AygUvTt
+00023810: 335f 5a4b 3861 3352 5945 475a 5f22 2c0a  3_ZK8a3RYEGZ_",.
+00023820: 2020 2020 2020 2020 2020 2020 2273 6822              "sh"
+00023830: 3a20 2231 7150 774c 6941 6d36 7434 5f5f  : "1qPwLiAm6t4__
+00023840: 472d 7a56 454f 7242 6759 7836 5652 6d67  G-zVEOrBgYx6VRmg
+00023850: 4467 6953 222c 0a20 2020 2020 2020 2020  DgiS",.         
+00023860: 2020 2022 7369 223a 2022 3147 3572 7963     "si": "1G5ryc
+00023870: 6549 4430 5450 3653 414f 3432 652d 4841  eID0TP6SAO42e-HA
+00023880: 6249 6c43 7659 6d6e 554e 3722 2c0a 2020  bIlCvYmnUN7",.  
+00023890: 2020 2020 2020 2020 2020 2273 696d 706c            "simpl
+000238a0: 6522 3a20 2231 4656 5634 396f 5f52 6c4b  e": "1FVV49o_RlK
+000238b0: 364d 3549 775f 377a 654a 4f45 4451 6f54  6M5Iw_7zeJOEDQoT
+000238c0: 6135 7a53 6271 222c 0a20 2020 2020 2020  a5zSbq",.       
+000238d0: 2020 2020 2022 736b 223a 2022 3131 6d6b       "sk": "11mk
+000238e0: 5976 626d 4157 4b54 496e 6a36 7434 4d61  YvbmAWKTInj6t4Ma
+000238f0: 3842 5550 786f 5235 6f36 6972 4c22 2c0a  8BUPxoR5o6irL",.
+00023900: 2020 2020 2020 2020 2020 2020 2273 6c22              "sl"
+00023910: 3a20 2231 6673 495a 5335 4c67 4d7a 4d7a  : "1fsIZS5LgMzMz
+00023920: 5a36 5437 6f67 5374 796a 2d49 4c45 5a49  Z6T7ogStyj-ILEZI
+00023930: 4252 764f 222c 0a20 2020 2020 2020 2020  BRvO",.         
+00023940: 2020 2022 736d 223a 2022 3179 6566 4543     "sm": "1yefEC
+00023950: 704b 585f 5934 5237 4732 7467 6749 7876  pKX_Y4R7G2tggIxv
+00023960: 635f 4276 4a66 4f41 7a2d 7422 2c0a 2020  c_BvJfOAz-t",.  
+00023970: 2020 2020 2020 2020 2020 2273 6e22 3a20            "sn": 
+00023980: 2231 6659 6543 6a4d 5076 5241 7639 346b  "1fYeCjMPvRAv94k
+00023990: 765a 6a69 4b49 2d6b 7449 444c 6b62 7630  vZjiKI-ktIDLkbv0
+000239a0: 5665 222c 0a20 2020 2020 2020 2020 2020  Ve",.           
+000239b0: 2022 736f 223a 2022 3155 632d 6553 5a6e   "so": "1Uc-eSZn
+000239c0: 4a62 3336 5367 6554 7652 5533 4769 7258  Jb36SgeTvRU3GirX
+000239d0: 5a4f 6c47 445f 4e42 3622 2c0a 2020 2020  ZOlGD_NB6",.    
+000239e0: 2020 2020 2020 2020 2273 7122 3a20 2231          "sq": "1
+000239f0: 3175 2d35 336e 3731 4f5f 796a 7077 5269  1u-53n71O_yjpwRi
+00023a00: 4351 5377 674c 374e 3277 3732 5a70 7458  CQSwgL7N2w72ZptX
+00023a10: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+00023a20: 7372 223a 2022 3150 474c 476c 5169 3851  sr": "1PGLGlQi8Q
+00023a30: 3045 6163 3664 6962 2d75 7543 4a41 4148  0Eac6dib-uuCJAAH
+00023a40: 4b36 5346 3550 7a22 2c0a 2020 2020 2020  K6SF5Pz",.      
+00023a50: 2020 2020 2020 2273 726e 223a 2022 314a        "srn": "1J
+00023a60: 4b69 4c33 5453 5871 4b31 2d4b 6850 6641  KiL3TSXqK1-KhPfA
+00023a70: 774d 4b30 7571 7739 3057 457a 6737 4d22  wMK0uqw90WEzg7M"
+00023a80: 2c0a 2020 2020 2020 2020 2020 2020 2273  ,.            "s
+00023a90: 7322 3a20 2231 6530 7175 4e45 7341 3164  s": "1e0quNEsA1d
+00023aa0: 6e35 372d 4962 696e 6346 3444 3832 6452  n57-IbincF4D82dR
+00023ab0: 5767 7a51 6c70 222c 0a20 2020 2020 2020  WgzQlp",.       
+00023ac0: 2020 2020 2022 7374 223a 2022 316e 792d       "st": "1ny-
+00023ad0: 4642 7a70 4271 4944 6776 366a 4d63 736f  FBzpBqIDgv6jMcso
+00023ae0: 4665 7633 4968 3635 464e 5a46 4f22 2c0a  Fev3Ih65FNZFO",.
+00023af0: 2020 2020 2020 2020 2020 2020 2273 7471              "stq
+00023b00: 223a 2022 3135 4678 3332 524f 7932 494d  ": "15Fx32ROy2IM
+00023b10: 366c 5371 4150 5579 6b6b 7233 4349 5452  6lSqAPUykkr3CITR
+00023b20: 3658 6437 7622 2c0a 2020 2020 2020 2020  6Xd7v",.        
+00023b30: 2020 2020 2273 7522 3a20 2231 4330 464a      "su": "1C0FJ
+00023b40: 756d 3762 595a 706e 7970 7442 7666 4167  um7bYZpnyptBvfAg
+00023b50: 774a 6230 5458 3268 6767 744f 222c 0a20  wJb0TX2hggtO",. 
+00023b60: 2020 2020 2020 2020 2020 2022 7376 223a             "sv":
+00023b70: 2022 3159 7971 7a4f 5358 7a4b 3579 7241   "1YyqzOSXzK5yrA
+00023b80: 6f75 397a 6554 4457 485f 3773 3536 396d  ou9zeTDWH_7s569m
+00023b90: 4463 7a22 2c0a 2020 2020 2020 2020 2020  Dcz",.          
+00023ba0: 2020 2273 7722 3a20 2231 5f62 4e54 6a36    "sw": "1_bNTj6
+00023bb0: 5438 6558 6c4e 4149 7548 6176 656c 6557  T8eXlNAIuHaveleW
+00023bc0: 6c48 425f 3232 616c 4a73 222c 0a20 2020  lHB_22alJs",.   
+00023bd0: 2020 2020 2020 2020 2022 737a 6c22 3a20           "szl": 
+00023be0: 2231 5f64 5845 6970 3173 6e4b 3443 5056  "1_dXEip1snK4CPV
+00023bf0: 4771 4838 7837 6c46 354f 2d36 4664 434e  GqH8x7lF5O-6FdCN
+00023c00: 4657 222c 0a20 2020 2020 2020 2020 2020  FW",.           
+00023c10: 2022 7461 223a 2022 315a 4654 4f4e 7378   "ta": "1ZFTONsx
+00023c20: 4774 536e 4339 5142 3652 7057 5376 6744  GtSnC9QB6RpWSvgD
+00023c30: 5f4d 625a 7749 6848 4822 2c0a 2020 2020  _MbZwIhHH",.    
+00023c40: 2020 2020 2020 2020 2274 6379 223a 2022          "tcy": "
+00023c50: 3135 5236 7537 4b51 7331 766d 4453 6d5f  15R6u7KQs1vmDSm_
+00023c60: 6153 4472 514d 4a33 5136 7133 4265 3072  aSDrQMJ3Q6q3Be0r
+00023c70: 3722 2c20 2023 206c 6565 720a 2020 2020  7",  # leer.    
+00023c80: 2020 2020 2020 2020 2274 6522 3a20 2231          "te": "1
+00023c90: 3153 782d 7042 4150 655a 4f58 4779 7634  1Sx-pBAPeZOXGyv4
+00023ca0: 3855 4e53 564d 4430 4148 3775 6634 594e  8UNSVMD0AH7uf4YN
+00023cb0: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+00023cc0: 7465 7422 3a20 2231 316d 7232 4d59 4c63  tet": "11mr2MYLc
+00023cd0: 7639 707a 376d 4868 4747 4e69 3569 4e43  v9pz7mHhGGNi5iNC
+00023ce0: 4f56 4572 5965 4f74 222c 0a20 2020 2020  OVErYeOt",.     
+00023cf0: 2020 2020 2020 2022 7467 223a 2022 3136         "tg": "16
+00023d00: 7474 4637 4857 714d 3943 6e6a 3471 6d67  ttF7HWqM9Cnj4qmg
+00023d10: 6633 5a66 4e6e 6969 4f4a 665a 3532 7722  f3ZfNniiOJfZ52w"
+00023d20: 2c0a 2020 2020 2020 2020 2020 2020 2274  ,.            "t
+00023d30: 6822 3a20 2231 3478 6849 742d 7872 356e  h": "14xhIt-xr5n
+00023d40: 396e 4d75 7663 7761 7943 474d 312d 7a42  9nMuvcwayCGM1-zB
+00023d50: 4346 5a71 7557 222c 0a20 2020 2020 2020  CFZquW",.       
+00023d60: 2020 2020 2022 7469 223a 2022 3132 3371       "ti": "123q
+00023d70: 3565 394d 5374 4d53 6870 3865 4553 4774  5e9MStMShp8eESGt
+00023d80: 4864 5342 474c 4472 434b 664a 5522 2c0a  HdSBGLDrCKfJU",.
+00023d90: 2020 2020 2020 2020 2020 2020 2274 6b22              "tk"
+00023da0: 3a20 2231 582d 4a4e 496e 7433 3442 4e47  : "1X-JNInt34BNG
+00023db0: 6867 3841 3850 6579 6a77 3257 6a73 414c  hg8A8Peyjw2WjsAL
+00023dc0: 6458 7344 222c 0a20 2020 2020 2020 2020  dXsD",.         
+00023dd0: 2020 2022 746c 223a 2022 3157 6b51 4862     "tl": "1WkQHb
+00023de0: 5764 3963 7174 546e 5348 4176 3044 7055  Wd9cqtTnSHAv0DpU
+00023df0: 5468 6142 6e7a 6553 5054 4a22 2c0a 2020  ThaBnzeSPTJ",.  
+00023e00: 2020 2020 2020 2020 2020 2274 6e22 3a20            "tn": 
+00023e10: 2231 6648 6651 4865 745a 6e38 2d66 4c75  "1fHfQHetZn8-fLu
+00023e20: 525a 4575 2d63 7673 2d6b 5159 7750 766a  RZEu-cvs-kQYwPvj
+00023e30: 794c 222c 0a20 2020 2020 2020 2020 2020  yL",.           
+00023e40: 2022 746f 223a 2022 3163 484f 4c61 637a   "to": "1cHOLacz
+00023e50: 594a 3868 2d4f 7151 6778 656f 4839 764d  YJ8h-OqQgxeoH9vM
+00023e60: 4733 697a 6736 6d75 5422 2c0a 2020 2020  G3izg6muT",.    
+00023e70: 2020 2020 2020 2020 2274 7069 223a 2022          "tpi": "
+00023e80: 3159 7352 6a78 5675 364e 594f 7258 5262  1YsRjxVu6NYOrXRb
+00023e90: 386f 714d 4f39 4650 6169 6365 6c46 4563  8oqMO9FPaicelFEc
+00023ea0: 7522 2c0a 2020 2020 2020 2020 2020 2020  u",.            
+00023eb0: 2274 7222 3a20 2231 4a31 5a79 3032 4978  "tr": "1J1Zy02Ix
+00023ec0: 7674 434b 3064 3142 6132 685f 556c 6974  vtCK0d1Ba2h_Ulit
+00023ed0: 316d 5662 3955 4958 222c 0a20 2020 2020  1mVb9UIX",.     
+00023ee0: 2020 2020 2020 2022 7473 223a 2022 3170         "ts": "1p
+00023ef0: 4963 6641 7433 4b6d 746d 446b 7968 4f6c  IcfAt3KmtmDkyhOl
+00023f00: 2d53 4d53 656f 4d38 6150 3862 4f70 6c22  -SMSeoM8aP8bOpl"
+00023f10: 2c0a 2020 2020 2020 2020 2020 2020 2274  ,.            "t
+00023f20: 7422 3a20 2231 7673 667a 436a 6a2d 5f62  t": "1vsfzCjj-_b
+00023f30: 4d4f 6e35 6a42 6169 3431 5446 3547 6a4b  MOn5jBai41TF5GjK
+00023f40: 4a4d 5f49 7573 222c 0a20 2020 2020 2020  JM_Ius",.       
+00023f50: 2020 2020 2022 7475 6d22 3a20 2231 4e57       "tum": "1NW
+00023f60: 6367 3635 6461 4932 4274 3061 7779 4567  cg65daI2Bt0awyEg
+00023f70: 5536 6170 5544 6242 6d69 7143 7573 222c  U6apUDbBmiqCus",
+00023f80: 0a20 2020 2020 2020 2020 2020 2022 7477  .            "tw
+00023f90: 223a 2022 3157 4359 4b5a 4971 5337 4161  ": "1WCYKZIqS7Aa
+00023fa0: 6753 3736 5146 5366 6274 6569 4f67 464e  gS76QFSfbteiOgFN
+00023fb0: 4276 4e6e 6522 2c0a 2020 2020 2020 2020  BvNne",.        
+00023fc0: 2020 2020 2274 7922 3a20 2231 4449 7161      "ty": "1DIqa
+00023fd0: 5031 6c2d 4e39 5658 544e 6f6b 726c 7236  P1l-N9VXTNokrlr6
+00023fe0: 4575 504d 4745 3736 356f 3468 222c 0a20  EuPMGE765o4h",. 
+00023ff0: 2020 2020 2020 2020 2020 2022 7479 7622             "tyv"
+00024000: 3a20 2231 4633 7161 3035 4f59 4c42 636a  : "1F3qa05OYLBcj
+00024010: 5431 6c58 4d75 7241 4a46 4458 505f 4565  T1lXMurAJFDXP_Ee
+00024020: 7343 764d 222c 0a20 2020 2020 2020 2020  sCvM",.         
+00024030: 2020 2022 7564 6d22 3a20 2231 5430 594d     "udm": "1T0YM
+00024040: 5441 504c 4f6b 3736 3873 7374 6e65 7779  TAPLOk768sstnewy
+00024050: 354a 7867 7832 5250 7533 5262 222c 0a20  5Jxgx2RPu3Rb",. 
+00024060: 2020 2020 2020 2020 2020 2022 7567 223a             "ug":
+00024070: 2022 3166 6a65 7a76 716c 7973 795a 6869   "1fjezvqlysyZhi
+00024080: 514d 5a64 617a 714c 4767 6b37 3250 7174  QMZdazqLGgk72Pqt
+00024090: 5841 7722 2c0a 2020 2020 2020 2020 2020  XAw",.          
+000240a0: 2020 2275 6b22 3a20 2231 554d 4a43 4874    "uk": "1UMJCHt
+000240b0: 7a78 6b66 4c44 424a 4537 4e74 664e 3546  zxkfLDBJE7NtfN5F
+000240c0: 654d 726e 6e55 5677 6f68 222c 0a20 2020  eMrnnUVwoh",.   
+000240d0: 2020 2020 2020 2020 2022 7572 223a 2022           "ur": "
+000240e0: 3157 4e61 4432 5475 4876 6473 462d 7a30  1WNaD2TuHvdsF-z0
+000240f0: 6b5f 656d 5159 6368 776f 5151 4446 6d52  k_emQYchwoQQDFmR
+00024100: 6b22 2c0a 2020 2020 2020 2020 2020 2020  k",.            
+00024110: 2275 7a22 3a20 2231 3177 7247 3246 5354  "uz": "11wrG2FST
+00024120: 7052 4a63 326a 6235 4d68 6776 786a 6b56  pRJc2jb5MhgvxjkV
+00024130: 4459 6854 384d 2d6c 222c 0a20 2020 2020  DYhT8M-l",.     
+00024140: 2020 2020 2020 2022 7665 223a 2022 3150         "ve": "1P
+00024150: 7563 4a37 704a 3443 5847 4558 5a35 705f  ucJ7pJ4CXGEXZ5p_
+00024160: 576c 655a 4473 3275 734e 7a37 3474 6f22  WleZDs2usNz74to"
+00024170: 2c0a 2020 2020 2020 2020 2020 2020 2276  ,.            "v
+00024180: 6563 223a 2022 3163 4156 6a6d 5f79 3365  ec": "1cAVjm_y3e
+00024190: 684e 7465 4451 4959 7a39 7979 6f71 3145  hNteDQIYz9yyoq1E
+000241a0: 4b6b 714f 585a 3022 2c0a 2020 2020 2020  KkqOXZ0",.      
+000241b0: 2020 2020 2020 2276 6570 223a 2022 314b        "vep": "1K
+000241c0: 5f65 7156 374f 3643 374b 504a 575a 746d  _eqV7O6C7KPJWZtm
+000241d0: 4975 7a46 4d4b 4161 676a 2d30 4f38 3522  IuzFMKAagj-0O85"
+000241e0: 2c0a 2020 2020 2020 2020 2020 2020 2276  ,.            "v
+000241f0: 6922 3a20 2231 7951 366e 686d 3142 6d47  i": "1yQ6nhm1BmG
+00024200: 396c 4434 5f4e 6147 3168 4535 5656 3662  9lD4_NaG1hE5VV6b
+00024210: 6945 6156 3566 222c 0a20 2020 2020 2020  iEaV5f",.       
+00024220: 2020 2020 2022 766c 7322 3a20 2231 6270       "vls": "1bp
+00024230: 5151 5736 704b 4872 754b 4a4a 614b 7475  QQW6pKHruKJJaKtu
+00024240: 6767 4835 7252 654d 5879 6556 5870 222c  ggH5rReMXyeVXp",
+00024250: 0a20 2020 2020 2020 2020 2020 2022 766f  .            "vo
+00024260: 223a 2022 3144 3830 5152 6454 7065 3748  ": "1D80QRdTpe7H
+00024270: 346d 4846 4b70 6675 6773 6373 6a58 3731  4mHFKpfugscsjX71
+00024280: 6b69 4d4a 4e22 2c0a 2020 2020 2020 2020  kiMJN",.        
+00024290: 2020 2020 2277 6122 3a20 2231 6d34 4238      "wa": "1m4B8
+000242a0: 3151 5962 6637 3468 7470 496e 4455 3570  1QYbf74htpInDU5p
+000242b0: 3764 306e 306f 7438 574c 505a 222c 0a20  7d0n0ot8WLPZ",. 
+000242c0: 2020 2020 2020 2020 2020 2022 7761 7222             "war"
+000242d0: 3a20 2231 4543 336a 7348 7475 3232 7448  : "1EC3jsHtu22tH
+000242e0: 4276 366a 585f 4934 7275 7043 3552 7756  Bv6jX_I4rupC5RwV
+000242f0: 334f 5964 222c 0a20 2020 2020 2020 2020  3OYd",.         
+00024300: 2020 2022 776f 223a 2022 3176 4368 7971     "wo": "1vChyq
+00024310: 4e4e 4c75 3578 5948 6479 4870 4143 7777  NNLu5xYHdyHpACww
+00024320: 7077 346c 3370 7469 4b6c 6f22 2c0a 2020  pw4l3ptiKlo",.  
+00024330: 2020 2020 2020 2020 2020 2277 7575 223a            "wuu":
+00024340: 2022 315f 4549 6e30 3278 4355 4263 774c   "1_EIn02xCUBcwL
+00024350: 4f77 596e 412d 6c53 636a 5332 4c68 3245  OwYnA-lScjS2Lh2E
+00024360: 4377 3622 2c0a 2020 2020 2020 2020 2020  Cw6",.          
+00024370: 2020 2278 616c 223a 2022 3139 624b 5873    "xal": "19bKXs
+00024380: 4c31 4432 5565 7362 4235 304a 5079 6339  L1D2UesbB50JPyc9
+00024390: 5470 4731 6c4e 6332 504f 7422 2c0a 2020  TpG1lNc2POt",.  
+000243a0: 2020 2020 2020 2020 2020 2278 6822 3a20            "xh": 
+000243b0: 2231 7050 5663 7842 4733 7873 437a 456e  "1pPVcxBG3xsCzEn
+000243c0: 557a 6c6f 6863 5f70 3839 6751 3964 534a  Uzlohc_p89gQ9dSJ
+000243d0: 4233 222c 0a20 2020 2020 2020 2020 2020  B3",.           
+000243e0: 2022 786d 6622 3a20 2231 534d 396c 6c6b   "xmf": "1SM9llk
+000243f0: 7536 495f 5a75 5a7a 3035 6d4f 4275 4c32  u6I_ZuZz05mOBuL2
+00024400: 6c78 2d4b 5158 7665 6872 222c 0a20 2020  lx-KQXvehr",.   
+00024410: 2020 2020 2020 2020 2022 7969 223a 2022           "yi": "
+00024420: 3157 4e57 7231 6f56 2d4e 6c37 6331 4a76  1WNWr1oV-Nl7c1Jv
+00024430: 3878 5f4d 6941 6a32 7678 5274 7951 6177  8x_MiAj2vxRtyQaw
+00024440: 7522 2c0a 2020 2020 2020 2020 2020 2020  u",.            
+00024450: 2279 6f22 3a20 2231 794e 564f 774d 4f57  "yo": "1yNVOwMOW
+00024460: 6567 6c62 4f63 526f 5a7a 6764 3475 776c  eglbOcRoZzgd4uwl
+00024470: 4e35 4a4d 796e 6e59 222c 0a20 2020 2020  N5JMynnY",.     
+00024480: 2020 2020 2020 2022 7a61 223a 2022 3169         "za": "1i
+00024490: 3770 6731 3632 6344 5f69 5539 6838 6467  7pg162cD_iU9h8dg
+000244a0: 7449 3241 6e38 5143 6362 7a55 416a 4222  tI2An8QCcbzUAjB"
+000244b0: 2c0a 2020 2020 2020 2020 2020 2020 227a  ,.            "z
+000244c0: 6561 223a 2022 3145 5753 6b69 536b 5042  ea": "1EWSkiSkPB
+000244d0: 6662 796a 576a 5a4b 3056 754b 6470 7146  fbyjWjZK0VuKdpqF
+000244e0: 6e46 4f70 5858 5122 2c0a 2020 2020 2020  nFOpXXQ",.      
+000244f0: 2020 2020 2020 227a 682d 636c 6173 7369        "zh-classi
+00024500: 6361 6c22 3a20 2231 7555 4b5a 616d 4e70  cal": "1uUKZamNp
+00024510: 3038 4b41 3773 3737 3934 734b 504f 7150  08KA7s7794sKPOqP
+00024520: 414c 766f 5f62 746c 222c 0a20 2020 2020  ALvo_btl",.     
+00024530: 2020 2020 2020 2022 7a68 2d6d 696e 2d6e         "zh-min-n
+00024540: 616e 223a 2022 316f 5367 7a33 5942 584c  an": "1oSgz3YBXL
+00024550: 4755 6749 376b 6c2d 754d 4f43 5f77 7736  GUgI7kl-uMOC_ww6
+00024560: 4c30 464e 466d 7022 2c0a 2020 2020 2020  L0FNFmp",.      
+00024570: 2020 2020 2020 227a 682d 7975 6522 3a20        "zh-yue": 
+00024580: 2231 7a68 776c 5565 6569 794f 4155 3151  "1zhwlUeeiyOAU1Q
+00024590: 7177 715a 386e 3931 7958 4952 5046 4137  qwqZ8n91yXIRPFA7
+000245a0: 5545 222c 0a20 2020 2020 2020 2020 2020  UE",.           
+000245b0: 2022 7a68 223a 2022 314c 5a39 3647 5568   "zh": "1LZ96GUh
+000245c0: 6b56 4851 552d 616a 3243 3357 4f72 7466  kVHQU-aj2C3WOrtf
+000245d0: 664f 7030 5533 5a37 6622 2c0a 2020 2020  fOp0U3Z7f",.    
+000245e0: 2020 2020 2020 2020 227a 7522 3a20 2231          "zu": "1
+000245f0: 4679 586c 5f55 4b31 3733 3758 4233 6472  FyXl_UK1737XB3dr
+00024600: 7151 4668 4758 694a 724a 636b 6942 3157  qQFhGXiJrJckiB1W
+00024610: 222c 0a20 2020 2020 2020 207d 0a20 2020  ",.        }.   
+00024620: 2020 2020 2072 6574 7572 6e20 6c61 6e67       return lang
+00024630: 7561 6765 735f 6964 735b 6c61 6e67 7561  uages_ids[langua
+00024640: 6765 5d0a 0a0a 636c 6173 7320 4e45 525f  ge]...class NER_
+00024650: 4d55 4c54 495f 5854 5245 4d45 284d 756c  MULTI_XTREME(Mul
+00024660: 7469 436f 7270 7573 293a 0a20 2020 2064  tiCorpus):.    d
+00024670: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
+00024680: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
+00024690: 2020 206c 616e 6775 6167 6573 3a20 556e     languages: Un
+000246a0: 696f 6e5b 7374 722c 204c 6973 745b 7374  ion[str, List[st
+000246b0: 725d 5d20 3d20 2265 6e22 2c0a 2020 2020  r]] = "en",.    
+000246c0: 2020 2020 6261 7365 5f70 6174 683a 204f      base_path: O
+000246d0: 7074 696f 6e61 6c5b 556e 696f 6e5b 7374  ptional[Union[st
+000246e0: 722c 2050 6174 685d 5d20 3d20 4e6f 6e65  r, Path]] = None
+000246f0: 2c0a 2020 2020 2020 2020 696e 5f6d 656d  ,.        in_mem
+00024700: 6f72 793a 2062 6f6f 6c20 3d20 4661 6c73  ory: bool = Fals
+00024710: 652c 0a20 2020 2020 2020 202a 2a63 6f72  e,.        **cor
+00024720: 7075 7361 7267 732c 0a20 2020 2029 202d  pusargs,.    ) -
+00024730: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+00024740: 2222 2258 7472 656d 6520 636f 7270 7573  """Xtreme corpus
+00024750: 2066 6f72 2063 726f 7373 2d6c 696e 6775   for cross-lingu
+00024760: 616c 204e 4552 2063 6f6e 7369 7374 696e  al NER consistin
+00024770: 6720 6f66 2064 6174 6173 6574 7320 6f66  g of datasets of
+00024780: 2061 2074 6f74 616c 206f 6620 3430 206c   a total of 40 l
+00024790: 616e 6775 6167 6573 2e0a 0a20 2020 2020  anguages...     
+000247a0: 2020 2054 6865 2064 6174 6120 636f 6d65     The data come
+000247b0: 7320 6672 6f6d 2074 6865 2067 6f6f 676c  s from the googl
+000247c0: 6520 7265 7365 6172 6368 2077 6f72 6b20  e research work 
+000247d0: 5854 5245 4d45 2068 7474 7073 3a2f 2f67  XTREME https://g
+000247e0: 6974 6875 622e 636f 6d2f 676f 6f67 6c65  ithub.com/google
+000247f0: 2d72 6573 6561 7263 682f 7874 7265 6d65  -research/xtreme
+00024800: 2e0a 2020 2020 2020 2020 5468 6520 6461  ..        The da
+00024810: 7461 2069 7320 6465 7269 7665 6420 6672  ta is derived fr
+00024820: 6f6d 2074 6865 2077 696b 6961 6e6e 2064  om the wikiann d
+00024830: 6174 6173 6574 2068 7474 7073 3a2f 2f65  ataset https://e
+00024840: 6c69 7361 2d69 652e 6769 7468 7562 2e69  lisa-ie.github.i
+00024850: 6f2f 7769 6b69 616e 6e2f 2028 6c69 6365  o/wikiann/ (lice
+00024860: 6e73 653a 2068 7474 7073 3a2f 2f6f 7065  nse: https://ope
+00024870: 6e64 6174 6163 6f6d 6d6f 6e73 2e6f 7267  ndatacommons.org
+00024880: 2f6c 6963 656e 7365 732f 6279 2f29 0a0a  /licenses/by/)..
+00024890: 2020 2020 2020 2020 5061 7261 6d65 7465          Paramete
+000248a0: 7273 0a20 2020 2020 2020 202d 2d2d 2d2d  rs.        -----
+000248b0: 2d2d 2d2d 2d0a 2020 2020 2020 2020 6c61  -----.        la
+000248c0: 6e67 7561 6765 7320 3a20 556e 696f 6e5b  nguages : Union[
+000248d0: 7374 722c 204c 6973 745b 7374 725d 5d2c  str, List[str]],
+000248e0: 206f 7074 696f 6e61 6c0a 2020 2020 2020   optional.      
+000248f0: 2020 2020 2020 5370 6563 6966 7920 7468        Specify th
+00024900: 6520 6c61 6e67 7561 6765 7320 796f 7520  e languages you 
+00024910: 7761 6e74 2074 6f20 6c6f 6164 2e20 5072  want to load. Pr
+00024920: 6f76 6964 6520 616e 2065 6d70 7479 206c  ovide an empty l
+00024930: 6973 7420 6f72 2073 7472 696e 6720 746f  ist or string to
+00024940: 2073 656c 6563 7420 616c 6c20 6c61 6e67   select all lang
+00024950: 7561 6765 732e 0a20 2020 2020 2020 2062  uages..        b
+00024960: 6173 655f 7061 7468 203a 2055 6e69 6f6e  ase_path : Union
+00024970: 5b73 7472 2c20 5061 7468 5d2c 206f 7074  [str, Path], opt
+00024980: 696f 6e61 6c0a 2020 2020 2020 2020 2020  ional.          
+00024990: 2020 4465 6661 756c 7420 6973 204e 6f6e    Default is Non
+000249a0: 652c 206d 6561 6e69 6e67 2074 6861 7420  e, meaning that 
+000249b0: 636f 7270 7573 2067 6574 7320 6175 746f  corpus gets auto
+000249c0: 2d64 6f77 6e6c 6f61 6465 6420 616e 6420  -downloaded and 
+000249d0: 6c6f 6164 6564 2e20 596f 7520 6361 6e20  loaded. You can 
+000249e0: 6f76 6572 7269 6465 2074 6869 7320 746f  override this to
+000249f0: 2070 6f69 6e74 2074 6f20 6120 6469 6666   point to a diff
+00024a00: 6572 656e 7420 666f 6c64 6572 2062 7574  erent folder but
+00024a10: 2074 7970 6963 616c 6c79 2074 6869 7320   typically this 
+00024a20: 7368 6f75 6c64 206e 6f74 2062 6520 6e65  should not be ne
+00024a30: 6365 7373 6172 792e 0a20 2020 2020 2020  cessary..       
+00024a40: 2069 6e5f 6d65 6d6f 7279 203a 2062 6f6f   in_memory : boo
+00024a50: 6c2c 206f 7074 696f 6e61 6c0a 2020 2020  l, optional.    
+00024a60: 2020 2020 2020 2020 5370 6563 6966 7920          Specify 
+00024a70: 7468 6174 2074 6865 2064 6174 6173 6574  that the dataset
+00024a80: 2073 686f 756c 6420 6265 206c 6f61 6465   should be loade
+00024a90: 6420 696e 206d 656d 6f72 792c 2077 6869  d in memory, whi
+00024aa0: 6368 2073 7065 6564 7320 7570 2074 6865  ch speeds up the
+00024ab0: 2074 7261 696e 696e 6720 7072 6f63 6573   training proces
+00024ac0: 7320 6275 7420 7461 6b65 7320 696e 6372  s but takes incr
+00024ad0: 6561 7365 7320 7468 6520 5241 4d20 7573  eases the RAM us
+00024ae0: 6167 6520 7369 676e 6966 6963 616e 746c  age significantl
+00024af0: 792e 0a20 2020 2020 2020 2022 2222 0a20  y..        """. 
+00024b00: 2020 2020 2020 2023 2069 6620 6e6f 206c         # if no l
+00024b10: 616e 6775 6167 6573 2061 7265 2067 6976  anguages are giv
+00024b20: 656e 2061 7320 6172 6775 6d65 6e74 2061  en as argument a
+00024b30: 6c6c 206c 616e 6775 6167 6573 2075 7365  ll languages use
+00024b40: 6420 696e 2058 5452 454d 4520 7769 6c6c  d in XTREME will
+00024b50: 2062 6520 6c6f 6164 6564 0a20 2020 2020   be loaded.     
+00024b60: 2020 2069 6620 6e6f 7420 6c61 6e67 7561     if not langua
+00024b70: 6765 733a 0a20 2020 2020 2020 2020 2020  ges:.           
+00024b80: 206c 616e 6775 6167 6573 203d 205b 0a20   languages = [. 
+00024b90: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00024ba0: 6166 222c 0a20 2020 2020 2020 2020 2020  af",.           
+00024bb0: 2020 2020 2022 6172 222c 0a20 2020 2020       "ar",.     
+00024bc0: 2020 2020 2020 2020 2020 2022 6267 222c             "bg",
+00024bd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00024be0: 2022 626e 222c 0a20 2020 2020 2020 2020   "bn",.         
+00024bf0: 2020 2020 2020 2022 6465 222c 0a20 2020         "de",.   
+00024c00: 2020 2020 2020 2020 2020 2020 2022 656c               "el
+00024c10: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+00024c20: 2020 2022 656e 222c 0a20 2020 2020 2020     "en",.       
+00024c30: 2020 2020 2020 2020 2022 6573 222c 0a20           "es",. 
+00024c40: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00024c50: 6574 222c 0a20 2020 2020 2020 2020 2020  et",.           
+00024c60: 2020 2020 2022 6575 222c 0a20 2020 2020       "eu",.     
+00024c70: 2020 2020 2020 2020 2020 2022 6661 222c             "fa",
+00024c80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00024c90: 2022 6669 222c 0a20 2020 2020 2020 2020   "fi",.         
+00024ca0: 2020 2020 2020 2022 6672 222c 0a20 2020         "fr",.   
+00024cb0: 2020 2020 2020 2020 2020 2020 2022 6865               "he
+00024cc0: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+00024cd0: 2020 2022 6869 222c 0a20 2020 2020 2020     "hi",.       
+00024ce0: 2020 2020 2020 2020 2022 6875 222c 0a20           "hu",. 
+00024cf0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00024d00: 6964 222c 0a20 2020 2020 2020 2020 2020  id",.           
+00024d10: 2020 2020 2022 6974 222c 0a20 2020 2020       "it",.     
+00024d20: 2020 2020 2020 2020 2020 2022 6a61 222c             "ja",
+00024d30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00024d40: 2022 6a76 222c 0a20 2020 2020 2020 2020   "jv",.         
+00024d50: 2020 2020 2020 2022 6b61 222c 0a20 2020         "ka",.   
+00024d60: 2020 2020 2020 2020 2020 2020 2022 6b6b               "kk
+00024d70: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+00024d80: 2020 2022 6b6f 222c 0a20 2020 2020 2020     "ko",.       
+00024d90: 2020 2020 2020 2020 2022 6d6c 222c 0a20           "ml",. 
+00024da0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00024db0: 6d72 222c 0a20 2020 2020 2020 2020 2020  mr",.           
+00024dc0: 2020 2020 2022 6d73 222c 0a20 2020 2020       "ms",.     
+00024dd0: 2020 2020 2020 2020 2020 2022 6d79 222c             "my",
+00024de0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00024df0: 2022 6e6c 222c 0a20 2020 2020 2020 2020   "nl",.         
+00024e00: 2020 2020 2020 2022 7074 222c 0a20 2020         "pt",.   
+00024e10: 2020 2020 2020 2020 2020 2020 2022 7275               "ru
+00024e20: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+00024e30: 2020 2022 7377 222c 0a20 2020 2020 2020     "sw",.       
+00024e40: 2020 2020 2020 2020 2022 7461 222c 0a20           "ta",. 
+00024e50: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00024e60: 7465 222c 0a20 2020 2020 2020 2020 2020  te",.           
+00024e70: 2020 2020 2022 7468 222c 0a20 2020 2020       "th",.     
+00024e80: 2020 2020 2020 2020 2020 2022 746c 222c             "tl",
+00024e90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00024ea0: 2022 7472 222c 0a20 2020 2020 2020 2020   "tr",.         
+00024eb0: 2020 2020 2020 2022 7572 222c 0a20 2020         "ur",.   
+00024ec0: 2020 2020 2020 2020 2020 2020 2022 7669               "vi
+00024ed0: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+00024ee0: 2020 2022 796f 222c 0a20 2020 2020 2020     "yo",.       
+00024ef0: 2020 2020 2020 2020 2022 7a68 222c 0a20           "zh",. 
+00024f00: 2020 2020 2020 2020 2020 205d 0a0a 2020             ]..  
+00024f10: 2020 2020 2020 2320 6966 206f 6e6c 7920        # if only 
+00024f20: 6f6e 6520 6c61 6e67 7561 6765 2069 7320  one language is 
+00024f30: 6769 7665 6e0a 2020 2020 2020 2020 6966  given.        if
+00024f40: 2069 7369 6e73 7461 6e63 6528 6c61 6e67   isinstance(lang
+00024f50: 7561 6765 732c 2073 7472 293a 0a20 2020  uages, str):.   
+00024f60: 2020 2020 2020 2020 206c 616e 6775 6167           languag
+00024f70: 6573 203d 205b 6c61 6e67 7561 6765 735d  es = [languages]
+00024f80: 0a0a 2020 2020 2020 2020 6261 7365 5f70  ..        base_p
+00024f90: 6174 6820 3d20 6b6f 6c69 6272 692e 6361  ath = kolibri.ca
+00024fa0: 6368 655f 726f 6f74 202f 2022 6461 7461  che_root / "data
+00024fb0: 7365 7473 2220 6966 206e 6f74 2062 6173  sets" if not bas
+00024fc0: 655f 7061 7468 2065 6c73 6520 5061 7468  e_path else Path
+00024fd0: 2862 6173 655f 7061 7468 290a 0a20 2020  (base_path)..   
+00024fe0: 2020 2020 2023 2063 6f6c 756d 6e20 666f       # column fo
+00024ff0: 726d 6174 0a20 2020 2020 2020 2063 6f6c  rmat.        col
+00025000: 756d 6e73 203d 207b 303a 2022 7465 7874  umns = {0: "text
+00025010: 222c 2031 3a20 226e 6572 227d 0a0a 2020  ", 1: "ner"}..  
+00025020: 2020 2020 2020 2320 7468 6973 2064 6174        # this dat
+00025030: 6173 6574 206e 616d 650a 2020 2020 2020  aset name.      
+00025040: 2020 6461 7461 7365 745f 6e61 6d65 203d    dataset_name =
+00025050: 2073 656c 662e 5f5f 636c 6173 735f 5f2e   self.__class__.
+00025060: 5f5f 6e61 6d65 5f5f 2e6c 6f77 6572 2829  __name__.lower()
+00025070: 0a0a 2020 2020 2020 2020 6461 7461 5f66  ..        data_f
+00025080: 6f6c 6465 7220 3d20 6261 7365 5f70 6174  older = base_pat
+00025090: 6820 2f20 6461 7461 7365 745f 6e61 6d65  h / dataset_name
+000250a0: 0a0a 2020 2020 2020 2020 2320 466f 7220  ..        # For 
+000250b0: 6561 6368 206c 616e 6775 6167 6520 696e  each language in
+000250c0: 206c 616e 6775 6167 6573 2c20 7468 6520   languages, the 
+000250d0: 6669 6c65 2069 7320 646f 776e 6c6f 6164  file is download
+000250e0: 6564 2069 6620 6e6f 7420 6578 6973 7465  ed if not existe
+000250f0: 6e74 0a20 2020 2020 2020 2023 2054 6865  nt.        # The
+00025100: 6e20 6120 636f 6d6c 756d 6e63 6f72 7075  n a comlumncorpu
+00025110: 7320 6f66 2074 6861 7420 6461 7461 2069  s of that data i
+00025120: 7320 6372 6561 7465 6420 616e 6420 7361  s created and sa
+00025130: 7665 6420 696e 2061 206c 6973 740a 2020  ved in a list.  
+00025140: 2020 2020 2020 2320 5468 6973 206c 6973        # This lis
+00025150: 7420 6973 2068 616e 6465 6420 746f 2074  t is handed to t
+00025160: 6865 206d 756c 7469 636f 7270 7573 0a0a  he multicorpus..
+00025170: 2020 2020 2020 2020 2320 6c69 7374 2074          # list t
+00025180: 6861 7420 636f 6e74 6169 6e73 2074 6865  hat contains the
+00025190: 2063 6f6c 756d 6e63 6f70 6f72 610a 2020   columncopora.  
+000251a0: 2020 2020 2020 636f 7270 6f72 613a 204c        corpora: L
+000251b0: 6973 745b 436f 7270 7573 5d20 3d20 5b5d  ist[Corpus] = []
+000251c0: 0a0a 2020 2020 2020 2020 6875 5f70 6174  ..        hu_pat
+000251d0: 6820 3d20 2268 7474 7073 3a2f 2f6e 6c70  h = "https://nlp
+000251e0: 2e69 6e66 6f72 6d61 7469 6b2e 6875 2d62  .informatik.hu-b
+000251f0: 6572 6c69 6e2e 6465 2f72 6573 6f75 7263  erlin.de/resourc
+00025200: 6573 2f64 6174 6173 6574 732f 7061 6e78  es/datasets/panx
+00025210: 5f64 6174 6173 6574 220a 0a20 2020 2020  _dataset"..     
+00025220: 2020 2023 2064 6f77 6e6c 6f61 6420 6461     # download da
+00025230: 7461 2069 6620 6e65 6365 7373 6172 790a  ta if necessary.
+00025240: 2020 2020 2020 2020 666f 7220 6c61 6e67          for lang
+00025250: 7561 6765 2069 6e20 6c61 6e67 7561 6765  uage in language
+00025260: 733a 0a20 2020 2020 2020 2020 2020 206c  s:.            l
+00025270: 616e 6775 6167 655f 666f 6c64 6572 203d  anguage_folder =
+00025280: 2064 6174 615f 666f 6c64 6572 202f 206c   data_folder / l
+00025290: 616e 6775 6167 650a 0a20 2020 2020 2020  anguage..       
+000252a0: 2020 2020 2023 2069 6620 6c61 6e67 7561       # if langua
+000252b0: 6765 206e 6f74 2064 6f77 6e6c 6f61 6465  ge not downloade
+000252c0: 6420 7965 742c 2064 6f77 6e6c 6f61 6420  d yet, download 
+000252d0: 6974 0a20 2020 2020 2020 2020 2020 2069  it.            i
+000252e0: 6620 6e6f 7420 6c61 6e67 7561 6765 5f66  f not language_f
+000252f0: 6f6c 6465 722e 6578 6973 7473 2829 3a0a  older.exists():.
+00025300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025310: 6669 6c65 5f6e 616d 6520 3d20 6c61 6e67  file_name = lang
+00025320: 7561 6765 202b 2022 2e74 6172 2e67 7a22  uage + ".tar.gz"
+00025330: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00025340: 2023 2063 7265 6174 6520 666f 6c64 6572   # create folder
+00025350: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00025360: 206f 732e 6d61 6b65 6469 7273 286c 616e   os.makedirs(lan
+00025370: 6775 6167 655f 666f 6c64 6572 290a 0a20  guage_folder).. 
+00025380: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00025390: 2064 6f77 6e6c 6f61 6420 6672 6f6d 2048   download from H
+000253a0: 5520 5365 7276 6572 0a20 2020 2020 2020  U Server.       
+000253b0: 2020 2020 2020 2020 2074 656d 705f 6669           temp_fi
+000253c0: 6c65 203d 2063 6163 6865 645f 7061 7468  le = cached_path
+000253d0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000253e0: 2020 2020 2020 6875 5f70 6174 6820 2b20        hu_path + 
+000253f0: 222f 2220 2b20 6669 6c65 5f6e 616d 652c  "/" + file_name,
+00025400: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00025410: 2020 2020 2050 6174 6828 2264 6174 6173       Path("datas
+00025420: 6574 7322 2920 2f20 6461 7461 7365 745f  ets") / dataset_
+00025430: 6e61 6d65 202f 206c 616e 6775 6167 652c  name / language,
+00025440: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00025450: 2029 0a0a 2020 2020 2020 2020 2020 2020   )..            
+00025460: 2020 2020 2320 756e 7a69 700a 2020 2020      # unzip.    
+00025470: 2020 2020 2020 2020 2020 2020 6c6f 672e              log.
+00025480: 696e 666f 2822 4578 7472 6163 7469 6e67  info("Extracting
+00025490: 2064 6174 612e 2e2e 2229 0a20 2020 2020   data...").     
+000254a0: 2020 2020 2020 2020 2020 2069 6d70 6f72             impor
+000254b0: 7420 7461 7266 696c 650a 0a20 2020 2020  t tarfile..     
+000254c0: 2020 2020 2020 2020 2020 2074 6172 203d             tar =
+000254d0: 2074 6172 6669 6c65 2e6f 7065 6e28 7374   tarfile.open(st
+000254e0: 7228 7465 6d70 5f66 696c 6529 2c20 2272  r(temp_file), "r
+000254f0: 3a67 7a22 290a 2020 2020 2020 2020 2020  :gz").          
+00025500: 2020 2020 2020 666f 7220 7061 7274 2069        for part i
+00025510: 6e20 5b22 7472 6169 6e22 2c20 2274 6573  n ["train", "tes
+00025520: 7422 2c20 2264 6576 225d 3a0a 2020 2020  t", "dev"]:.    
+00025530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025540: 7461 722e 6578 7472 6163 7428 7061 7274  tar.extract(part
+00025550: 2c20 7374 7228 6c61 6e67 7561 6765 5f66  , str(language_f
+00025560: 6f6c 6465 7229 290a 2020 2020 2020 2020  older)).        
+00025570: 2020 2020 2020 2020 7461 722e 636c 6f73          tar.clos
+00025580: 6528 290a 2020 2020 2020 2020 2020 2020  e().            
+00025590: 2020 2020 6c6f 672e 696e 666f 2822 2e2e      log.info("..
+000255a0: 2e64 6f6e 652e 2229 0a0a 2020 2020 2020  .done.")..      
+000255b0: 2020 2020 2020 2020 2020 2320 7472 616e            # tran
+000255c0: 7366 6f72 6d20 6461 7461 2069 6e74 6f20  sform data into 
+000255d0: 7265 7175 6972 6564 2066 6f72 6d61 740a  required format.
+000255e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000255f0: 6c6f 672e 696e 666f 2822 5072 6f63 6573  log.info("Proces
+00025600: 7369 6e67 2064 6174 6173 6574 2e2e 2e22  sing dataset..."
+00025610: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00025620: 2020 666f 7220 7061 7274 2069 6e20 5b22    for part in ["
+00025630: 7472 6169 6e22 2c20 2274 6573 7422 2c20  train", "test", 
+00025640: 2264 6576 225d 3a0a 2020 2020 2020 2020  "dev"]:.        
+00025650: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00025660: 2e5f 7874 7265 6d65 5f74 6f5f 7369 6d70  ._xtreme_to_simp
+00025670: 6c65 5f6e 6572 5f61 6e6e 6f74 6174 696f  le_ner_annotatio
+00025680: 6e28 7374 7228 6c61 6e67 7561 6765 5f66  n(str(language_f
+00025690: 6f6c 6465 7220 2f20 7061 7274 2929 0a20  older / part)). 
+000256a0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+000256b0: 6f67 2e69 6e66 6f28 222e 2e2e 646f 6e65  og.info("...done
+000256c0: 2e22 290a 0a20 2020 2020 2020 2020 2020  .")..           
+000256d0: 2023 2069 6e69 7469 616c 697a 6520 636f   # initialize co
+000256e0: 6d6c 756d 6e63 6f72 7075 7320 616e 6420  mlumncorpus and 
+000256f0: 6164 6420 6974 2074 6f20 6c69 7374 0a20  add it to list. 
+00025700: 2020 2020 2020 2020 2020 206c 6f67 2e69             log.i
+00025710: 6e66 6f28 6622 5265 6164 696e 6720 6461  nfo(f"Reading da
+00025720: 7461 2066 6f72 206c 616e 6775 6167 6520  ta for language 
+00025730: 7b6c 616e 6775 6167 657d 2229 0a20 2020  {language}").   
+00025740: 2020 2020 2020 2020 2063 6f72 7020 3d20           corp = 
+00025750: 436f 6c75 6d6e 436f 7270 7573 280a 2020  ColumnCorpus(.  
+00025760: 2020 2020 2020 2020 2020 2020 2020 6461                da
+00025770: 7461 5f66 6f6c 6465 723d 6c61 6e67 7561  ta_folder=langua
+00025780: 6765 5f66 6f6c 6465 722c 0a20 2020 2020  ge_folder,.     
+00025790: 2020 2020 2020 2020 2020 2063 6f6c 756d             colum
+000257a0: 6e5f 666f 726d 6174 3d63 6f6c 756d 6e73  n_format=columns
+000257b0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000257c0: 2020 696e 5f6d 656d 6f72 793d 696e 5f6d    in_memory=in_m
+000257d0: 656d 6f72 792c 0a20 2020 2020 2020 2020  emory,.         
+000257e0: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
+000257f0: 7267 732c 0a20 2020 2020 2020 2020 2020  rgs,.           
+00025800: 2029 0a20 2020 2020 2020 2020 2020 2063   ).            c
+00025810: 6f72 706f 7261 2e61 7070 656e 6428 636f  orpora.append(co
+00025820: 7270 290a 0a20 2020 2020 2020 2073 7570  rp)..        sup
+00025830: 6572 2829 2e5f 5f69 6e69 745f 5f28 0a20  er().__init__(. 
+00025840: 2020 2020 2020 2020 2020 2063 6f72 706f             corpo
+00025850: 7261 2c0a 2020 2020 2020 2020 2020 2020  ra,.            
+00025860: 6e61 6d65 3d22 7874 7265 6d65 222c 0a20  name="xtreme",. 
+00025870: 2020 2020 2020 2029 0a0a 2020 2020 6465         )..    de
+00025880: 6620 5f78 7472 656d 655f 746f 5f73 696d  f _xtreme_to_sim
+00025890: 706c 655f 6e65 725f 616e 6e6f 7461 7469  ple_ner_annotati
+000258a0: 6f6e 2873 656c 662c 2064 6174 615f 6669  on(self, data_fi
+000258b0: 6c65 3a20 556e 696f 6e5b 7374 722c 2050  le: Union[str, P
+000258c0: 6174 685d 293a 0a20 2020 2020 2020 2077  ath]):.        w
+000258d0: 6974 6820 6f70 656e 2864 6174 615f 6669  ith open(data_fi
+000258e0: 6c65 2c20 656e 636f 6469 6e67 3d22 7574  le, encoding="ut
+000258f0: 662d 3822 2920 6173 2066 3a0a 2020 2020  f-8") as f:.    
+00025900: 2020 2020 2020 2020 6c69 6e65 7320 3d20          lines = 
+00025910: 662e 7265 6164 6c69 6e65 7328 290a 2020  f.readlines().  
+00025920: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
+00025930: 6461 7461 5f66 696c 652c 2022 7722 2c20  data_file, "w", 
+00025940: 656e 636f 6469 6e67 3d22 7574 662d 3822  encoding="utf-8"
+00025950: 2920 6173 2066 3a0a 2020 2020 2020 2020  ) as f:.        
+00025960: 2020 2020 666f 7220 6c69 6e65 2069 6e20      for line in 
+00025970: 6c69 6e65 733a 0a20 2020 2020 2020 2020  lines:.         
+00025980: 2020 2020 2020 2069 6620 6c69 6e65 203d         if line =
+00025990: 3d20 225c 6e22 3a0a 2020 2020 2020 2020  = "\n":.        
+000259a0: 2020 2020 2020 2020 2020 2020 662e 7772              f.wr
+000259b0: 6974 6528 6c69 6e65 290a 2020 2020 2020  ite(line).      
+000259c0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+000259d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000259e0: 2020 2020 6c69 7374 6520 3d20 6c69 6e65      liste = line
+000259f0: 2e73 706c 6974 2829 0a20 2020 2020 2020  .split().       
+00025a00: 2020 2020 2020 2020 2020 2020 2066 2e77               f.w
+00025a10: 7269 7465 286c 6973 7465 5b30 5d2e 7370  rite(liste[0].sp
+00025a20: 6c69 7428 223a 222c 2031 295b 315d 202b  lit(":", 1)[1] +
+00025a30: 2022 2022 202b 206c 6973 7465 5b31 5d20   " " + liste[1] 
+00025a40: 2b20 225c 6e22 290a 0a0a 636c 6173 7320  + "\n")...class 
+00025a50: 4e45 525f 4d55 4c54 495f 5749 4b49 4e45  NER_MULTI_WIKINE
+00025a60: 5228 4d75 6c74 6943 6f72 7075 7329 3a0a  R(MultiCorpus):.
+00025a70: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+00025a80: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
+00025a90: 2020 2020 2020 2020 6c61 6e67 7561 6765          language
+00025aa0: 733a 2055 6e69 6f6e 5b73 7472 2c20 4c69  s: Union[str, Li
+00025ab0: 7374 5b73 7472 5d5d 203d 2022 656e 222c  st[str]] = "en",
+00025ac0: 0a20 2020 2020 2020 2062 6173 655f 7061  .        base_pa
+00025ad0: 7468 3a20 4f70 7469 6f6e 616c 5b55 6e69  th: Optional[Uni
+00025ae0: 6f6e 5b73 7472 2c20 5061 7468 5d5d 203d  on[str, Path]] =
+00025af0: 204e 6f6e 652c 0a20 2020 2020 2020 2069   None,.        i
+00025b00: 6e5f 6d65 6d6f 7279 3a20 626f 6f6c 203d  n_memory: bool =
+00025b10: 2046 616c 7365 2c0a 2020 2020 2020 2020   False,.        
+00025b20: 2a2a 636f 7270 7573 6172 6773 2c0a 2020  **corpusargs,.  
+00025b30: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
+00025b40: 2020 2020 2062 6173 655f 7061 7468 203d       base_path =
+00025b50: 206b 6f6c 6962 7269 2e63 6163 6865 5f72   kolibri.cache_r
+00025b60: 6f6f 7420 2f20 2264 6174 6173 6574 7322  oot / "datasets"
+00025b70: 2069 6620 6e6f 7420 6261 7365 5f70 6174   if not base_pat
+00025b80: 6820 656c 7365 2050 6174 6828 6261 7365  h else Path(base
+00025b90: 5f70 6174 6829 0a0a 2020 2020 2020 2020  _path)..        
+00025ba0: 2320 6966 206f 6e6c 7920 6f6e 6520 6c61  # if only one la
+00025bb0: 6e67 7561 6765 2069 7320 6769 7665 6e0a  nguage is given.
+00025bc0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00025bd0: 7461 6e63 6528 6c61 6e67 7561 6765 732c  tance(languages,
+00025be0: 2073 7472 293a 0a20 2020 2020 2020 2020   str):.         
+00025bf0: 2020 206c 616e 6775 6167 6573 203d 205b     languages = [
+00025c00: 6c61 6e67 7561 6765 735d 0a0a 2020 2020  languages]..    
+00025c10: 2020 2020 2320 636f 6c75 6d6e 2066 6f72      # column for
+00025c20: 6d61 740a 2020 2020 2020 2020 636f 6c75  mat.        colu
+00025c30: 6d6e 7320 3d20 7b30 3a20 2274 6578 7422  mns = {0: "text"
+00025c40: 2c20 313a 2022 706f 7322 2c20 323a 2022  , 1: "pos", 2: "
+00025c50: 6e65 7222 7d0a 0a20 2020 2020 2020 2023  ner"}..        #
+00025c60: 2074 6869 7320 6461 7461 7365 7420 6e61   this dataset na
+00025c70: 6d65 0a20 2020 2020 2020 2064 6174 6173  me.        datas
+00025c80: 6574 5f6e 616d 6520 3d20 7365 6c66 2e5f  et_name = self._
+00025c90: 5f63 6c61 7373 5f5f 2e5f 5f6e 616d 655f  _class__.__name_
+00025ca0: 5f2e 6c6f 7765 7228 290a 0a20 2020 2020  _.lower()..     
+00025cb0: 2020 2064 6174 615f 666f 6c64 6572 203d     data_folder =
+00025cc0: 2062 6173 655f 7061 7468 202f 2064 6174   base_path / dat
+00025cd0: 6173 6574 5f6e 616d 650a 0a20 2020 2020  aset_name..     
+00025ce0: 2020 2063 6f72 706f 7261 3a20 4c69 7374     corpora: List
+00025cf0: 5b43 6f72 7075 735d 203d 205b 5d0a 2020  [Corpus] = [].  
+00025d00: 2020 2020 2020 666f 7220 6c61 6e67 7561        for langua
+00025d10: 6765 2069 6e20 6c61 6e67 7561 6765 733a  ge in languages:
+00025d20: 0a20 2020 2020 2020 2020 2020 206c 616e  .            lan
+00025d30: 6775 6167 655f 666f 6c64 6572 203d 2064  guage_folder = d
+00025d40: 6174 615f 666f 6c64 6572 202f 206c 616e  ata_folder / lan
+00025d50: 6775 6167 650a 0a20 2020 2020 2020 2020  guage..         
+00025d60: 2020 2023 2064 6f77 6e6c 6f61 6420 6461     # download da
+00025d70: 7461 2069 6620 6e65 6365 7373 6172 790a  ta if necessary.
+00025d80: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00025d90: 2e5f 646f 776e 6c6f 6164 5f77 696b 696e  ._download_wikin
+00025da0: 6572 286c 616e 6775 6167 652c 2073 7472  er(language, str
+00025db0: 286c 616e 6775 6167 655f 666f 6c64 6572  (language_folder
+00025dc0: 2929 0a0a 2020 2020 2020 2020 2020 2020  ))..            
+00025dd0: 2320 696e 6974 6961 6c69 7a65 2063 6f6d  # initialize com
+00025de0: 6c75 6d6e 636f 7270 7573 2061 6e64 2061  lumncorpus and a
+00025df0: 6464 2069 7420 746f 206c 6973 740a 2020  dd it to list.  
+00025e00: 2020 2020 2020 2020 2020 6c6f 672e 696e            log.in
+00025e10: 666f 2866 2252 6561 6420 6461 7461 2066  fo(f"Read data f
+00025e20: 6f72 206c 616e 6775 6167 6520 7b6c 616e  or language {lan
+00025e30: 6775 6167 657d 2229 0a20 2020 2020 2020  guage}").       
+00025e40: 2020 2020 2063 6f72 7020 3d20 436f 6c75       corp = Colu
+00025e50: 6d6e 436f 7270 7573 280a 2020 2020 2020  mnCorpus(.      
+00025e60: 2020 2020 2020 2020 2020 6461 7461 5f66            data_f
+00025e70: 6f6c 6465 723d 6c61 6e67 7561 6765 5f66  older=language_f
+00025e80: 6f6c 6465 722c 0a20 2020 2020 2020 2020  older,.         
+00025e90: 2020 2020 2020 2063 6f6c 756d 6e5f 666f         column_fo
+00025ea0: 726d 6174 3d63 6f6c 756d 6e73 2c0a 2020  rmat=columns,.  
+00025eb0: 2020 2020 2020 2020 2020 2020 2020 696e                in
+00025ec0: 5f6d 656d 6f72 793d 696e 5f6d 656d 6f72  _memory=in_memor
+00025ed0: 792c 0a20 2020 2020 2020 2020 2020 2020  y,.             
+00025ee0: 2020 202a 2a63 6f72 7075 7361 7267 732c     **corpusargs,
+00025ef0: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
+00025f00: 2020 2020 2020 2020 2020 2063 6f72 706f             corpo
+00025f10: 7261 2e61 7070 656e 6428 636f 7270 290a  ra.append(corp).
+00025f20: 0a20 2020 2020 2020 2073 7570 6572 2829  .        super()
+00025f30: 2e5f 5f69 6e69 745f 5f28 0a20 2020 2020  .__init__(.     
+00025f40: 2020 2020 2020 2063 6f72 706f 7261 2c0a         corpora,.
+00025f50: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
+00025f60: 3d22 7769 6b69 6e65 7222 2c0a 2020 2020  ="wikiner",.    
+00025f70: 2020 2020 290a 0a20 2020 2064 6566 205f      )..    def _
+00025f80: 646f 776e 6c6f 6164 5f77 696b 696e 6572  download_wikiner
+00025f90: 2873 656c 662c 206c 616e 6775 6167 655f  (self, language_
+00025fa0: 636f 6465 3a20 7374 722c 2064 6174 6173  code: str, datas
+00025fb0: 6574 5f6e 616d 653a 2073 7472 293a 0a20  et_name: str):. 
+00025fc0: 2020 2020 2020 2023 2064 6f77 6e6c 6f61         # downloa
+00025fd0: 6420 6461 7461 2069 6620 6e65 6365 7373  d data if necess
+00025fe0: 6172 790a 2020 2020 2020 2020 7769 6b69  ary.        wiki
+00025ff0: 6e65 725f 7061 7468 203d 2022 6874 7470  ner_path = "http
+00026000: 733a 2f2f 7261 772e 6769 7468 7562 7573  s://raw.githubus
+00026010: 6572 636f 6e74 656e 742e 636f 6d2f 6469  ercontent.com/di
+00026020: 6365 2d67 726f 7570 2f46 4f58 2f6d 6173  ce-group/FOX/mas
+00026030: 7465 722f 696e 7075 742f 5769 6b69 6e65  ter/input/Wikine
+00026040: 722f 220a 2020 2020 2020 2020 6c63 203d  r/".        lc =
+00026050: 206c 616e 6775 6167 655f 636f 6465 0a0a   language_code..
+00026060: 2020 2020 2020 2020 6461 7461 5f66 696c          data_fil
+00026070: 6520 3d20 6b6f 6c69 6272 692e 6361 6368  e = kolibri.cach
+00026080: 655f 726f 6f74 202f 2022 6461 7461 7365  e_root / "datase
+00026090: 7473 2220 2f20 6461 7461 7365 745f 6e61  ts" / dataset_na
+000260a0: 6d65 202f 2066 2261 696a 2d77 696b 696e  me / f"aij-wikin
+000260b0: 6572 2d7b 6c63 7d2d 7770 332e 7472 6169  er-{lc}-wp3.trai
+000260c0: 6e22 0a20 2020 2020 2020 2069 6620 6e6f  n".        if no
+000260d0: 7420 6461 7461 5f66 696c 652e 6973 5f66  t data_file.is_f
+000260e0: 696c 6528 293a 0a20 2020 2020 2020 2020  ile():.         
+000260f0: 2020 2063 6163 6865 645f 7061 7468 280a     cached_path(.
+00026100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026110: 6622 7b77 696b 696e 6572 5f70 6174 687d  f"{wikiner_path}
+00026120: 6169 6a2d 7769 6b69 6e65 722d 7b6c 637d  aij-wikiner-{lc}
+00026130: 2d77 7033 2e62 7a32 222c 0a20 2020 2020  -wp3.bz2",.     
+00026140: 2020 2020 2020 2020 2020 2050 6174 6828             Path(
+00026150: 2264 6174 6173 6574 7322 2920 2f20 6461  "datasets") / da
+00026160: 7461 7365 745f 6e61 6d65 2c0a 2020 2020  taset_name,.    
+00026170: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00026180: 2020 2020 2020 696d 706f 7274 2062 7a32        import bz2
+00026190: 0a0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+000261a0: 756e 7061 636b 2061 6e64 2077 7269 7465  unpack and write
+000261b0: 206f 7574 2069 6e20 436f 4e4c 4c20 636f   out in CoNLL co
+000261c0: 6c75 6d6e 2d6c 696b 6520 666f 726d 6174  lumn-like format
+000261d0: 0a20 2020 2020 2020 2020 2020 2062 7a5f  .            bz_
+000261e0: 6669 6c65 203d 2062 7a32 2e42 5a32 4669  file = bz2.BZ2Fi
+000261f0: 6c65 280a 2020 2020 2020 2020 2020 2020  le(.            
+00026200: 2020 2020 6b6f 6c69 6272 692e 6361 6368      kolibri.cach
+00026210: 655f 726f 6f74 202f 2022 6461 7461 7365  e_root / "datase
+00026220: 7473 2220 2f20 6461 7461 7365 745f 6e61  ts" / dataset_na
+00026230: 6d65 202f 2066 2261 696a 2d77 696b 696e  me / f"aij-wikin
+00026240: 6572 2d7b 6c63 7d2d 7770 332e 627a 3222  er-{lc}-wp3.bz2"
+00026250: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00026260: 2020 2272 6222 2c0a 2020 2020 2020 2020    "rb",.        
+00026270: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+00026280: 2020 7769 7468 2062 7a5f 6669 6c65 2061    with bz_file a
+00026290: 7320 662c 206f 7065 6e28 0a20 2020 2020  s f, open(.     
+000262a0: 2020 2020 2020 2020 2020 206b 6f6c 6962             kolib
+000262b0: 7269 2e63 6163 6865 5f72 6f6f 7420 2f20  ri.cache_root / 
+000262c0: 2264 6174 6173 6574 7322 202f 2064 6174  "datasets" / dat
+000262d0: 6173 6574 5f6e 616d 6520 2f20 6622 6169  aset_name / f"ai
+000262e0: 6a2d 7769 6b69 6e65 722d 7b6c 637d 2d77  j-wikiner-{lc}-w
+000262f0: 7033 2e74 7261 696e 222c 0a20 2020 2020  p3.train",.     
+00026300: 2020 2020 2020 2020 2020 2022 7722 2c0a             "w",.
+00026310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026320: 656e 636f 6469 6e67 3d22 7574 662d 3822  encoding="utf-8"
+00026330: 2c0a 2020 2020 2020 2020 2020 2020 2920  ,.            ) 
+00026340: 6173 206f 7574 3a0a 2020 2020 2020 2020  as out:.        
+00026350: 2020 2020 2020 2020 666f 7220 6c69 6e65          for line
+00026360: 6220 696e 2066 3a0a 2020 2020 2020 2020  b in f:.        
+00026370: 2020 2020 2020 2020 2020 2020 6c69 6e65              line
+00026380: 203d 206c 696e 6562 2e64 6563 6f64 6528   = lineb.decode(
+00026390: 2275 7466 2d38 2229 0a20 2020 2020 2020  "utf-8").       
+000263a0: 2020 2020 2020 2020 2020 2020 2077 6f72               wor
+000263b0: 6473 203d 206c 696e 652e 7370 6c69 7428  ds = line.split(
+000263c0: 2220 2229 0a20 2020 2020 2020 2020 2020  " ").           
+000263d0: 2020 2020 2020 2020 2066 6f72 2077 6f72           for wor
+000263e0: 6420 696e 2077 6f72 6473 3a0a 2020 2020  d in words:.    
+000263f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026400: 2020 2020 6f75 742e 7772 6974 6528 225c      out.write("\
+00026410: 7422 2e6a 6f69 6e28 776f 7264 2e73 706c  t".join(word.spl
+00026420: 6974 2822 7c22 2929 202b 2022 5c6e 2229  it("|")) + "\n")
+00026430: 0a0a 0a63 6c61 7373 204e 4552 5f53 5745  ...class NER_SWE
+00026440: 4449 5348 2843 6f6c 756d 6e43 6f72 7075  DISH(ColumnCorpu
+00026450: 7329 3a0a 2020 2020 6465 6620 5f5f 696e  s):.    def __in
+00026460: 6974 5f5f 280a 2020 2020 2020 2020 7365  it__(.        se
+00026470: 6c66 2c0a 2020 2020 2020 2020 6261 7365  lf,.        base
+00026480: 5f70 6174 683a 204f 7074 696f 6e61 6c5b  _path: Optional[
+00026490: 556e 696f 6e5b 7374 722c 2050 6174 685d  Union[str, Path]
+000264a0: 5d20 3d20 4e6f 6e65 2c0a 2020 2020 2020  ] = None,.      
+000264b0: 2020 696e 5f6d 656d 6f72 793a 2062 6f6f    in_memory: boo
+000264c0: 6c20 3d20 5472 7565 2c0a 2020 2020 2020  l = True,.      
+000264d0: 2020 2a2a 636f 7270 7573 6172 6773 2c0a    **corpusargs,.
+000264e0: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
+000264f0: 2020 2020 2020 2022 2222 496e 6974 6961         """Initia
+00026500: 6c69 7a65 2074 6865 204e 4552 5f53 5745  lize the NER_SWE
+00026510: 4449 5348 2063 6f72 7075 7320 666f 7220  DISH corpus for 
+00026520: 5377 6564 6973 682e 0a0a 2020 2020 2020  Swedish...      
+00026530: 2020 5468 6520 6669 7273 7420 7469 6d65    The first time
+00026540: 2079 6f75 2063 616c 6c20 7468 6973 2063   you call this c
+00026550: 6f6e 7374 7275 6374 6f72 2069 7420 7769  onstructor it wi
+00026560: 6c6c 2061 7574 6f6d 6174 6963 616c 6c79  ll automatically
+00026570: 2064 6f77 6e6c 6f61 6420 7468 6520 6461   download the da
+00026580: 7461 7365 742e 0a20 2020 2020 2020 203a  taset..        :
+00026590: 7061 7261 6d20 6261 7365 5f70 6174 683a  param base_path:
+000265a0: 2044 6566 6175 6c74 2069 7320 4e6f 6e65   Default is None
+000265b0: 2c20 6d65 616e 696e 6720 7468 6174 2063  , meaning that c
+000265c0: 6f72 7075 7320 6765 7473 2061 7574 6f2d  orpus gets auto-
+000265d0: 646f 776e 6c6f 6164 6564 2061 6e64 206c  downloaded and l
+000265e0: 6f61 6465 642e 2059 6f75 2063 616e 206f  oaded. You can o
+000265f0: 7665 7272 6964 6520 7468 6973 0a20 2020  verride this.   
+00026600: 2020 2020 2074 6f20 706f 696e 7420 746f       to point to
+00026610: 2061 2064 6966 6665 7265 6e74 2066 6f6c   a different fol
+00026620: 6465 7220 6275 7420 7479 7069 6361 6c6c  der but typicall
+00026630: 7920 7468 6973 2073 686f 756c 6420 6e6f  y this should no
+00026640: 7420 6265 206e 6563 6573 7361 7279 2e0a  t be necessary..
+00026650: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+00026660: 6e5f 6d65 6d6f 7279 3a20 4966 2054 7275  n_memory: If Tru
+00026670: 652c 206b 6565 7073 2064 6174 6173 6574  e, keeps dataset
+00026680: 2069 6e20 6d65 6d6f 7279 2067 6976 696e   in memory givin
+00026690: 6720 7370 6565 6475 7073 2069 6e20 7472  g speedups in tr
+000266a0: 6169 6e69 6e67 2e0a 2020 2020 2020 2020  aining..        
+000266b0: 3a70 6172 616d 2064 6f63 756d 656e 745f  :param document_
+000266c0: 6173 5f73 6571 7565 6e63 653a 2049 6620  as_sequence: If 
+000266d0: 5472 7565 2c20 616c 6c20 7365 6e74 656e  True, all senten
+000266e0: 6365 7320 6f66 2061 2064 6f63 756d 656e  ces of a documen
+000266f0: 7420 6172 6520 7265 6164 2069 6e74 6f20  t are read into 
+00026700: 6120 7369 6e67 6c65 2053 656e 7465 6e63  a single Sentenc
+00026710: 6520 6f62 6a65 6374 0a20 2020 2020 2020  e object.       
+00026720: 2022 2222 0a20 2020 2020 2020 2062 6173   """.        bas
+00026730: 655f 7061 7468 203d 206b 6f6c 6962 7269  e_path = kolibri
+00026740: 2e63 6163 6865 5f72 6f6f 7420 2f20 2264  .cache_root / "d
+00026750: 6174 6173 6574 7322 2069 6620 6e6f 7420  atasets" if not 
+00026760: 6261 7365 5f70 6174 6820 656c 7365 2050  base_path else P
+00026770: 6174 6828 6261 7365 5f70 6174 6829 0a0a  ath(base_path)..
+00026780: 2020 2020 2020 2020 2320 636f 6c75 6d6e          # column
+00026790: 2066 6f72 6d61 740a 2020 2020 2020 2020   format.        
+000267a0: 636f 6c75 6d6e 7320 3d20 7b30 3a20 2274  columns = {0: "t
+000267b0: 6578 7422 2c20 313a 2022 6e65 7222 7d0a  ext", 1: "ner"}.
+000267c0: 0a20 2020 2020 2020 2023 2074 6869 7320  .        # this 
+000267d0: 6461 7461 7365 7420 6e61 6d65 0a20 2020  dataset name.   
+000267e0: 2020 2020 2064 6174 6173 6574 5f6e 616d       dataset_nam
+000267f0: 6520 3d20 7365 6c66 2e5f 5f63 6c61 7373  e = self.__class
+00026800: 5f5f 2e5f 5f6e 616d 655f 5f2e 6c6f 7765  __.__name__.lowe
+00026810: 7228 290a 0a20 2020 2020 2020 2064 6174  r()..        dat
+00026820: 615f 666f 6c64 6572 203d 2062 6173 655f  a_folder = base_
+00026830: 7061 7468 202f 2064 6174 6173 6574 5f6e  path / dataset_n
+00026840: 616d 650a 0a20 2020 2020 2020 2023 2064  ame..        # d
+00026850: 6f77 6e6c 6f61 6420 6461 7461 2069 6620  ownload data if 
+00026860: 6e65 6365 7373 6172 790a 2020 2020 2020  necessary.      
+00026870: 2020 6e65 725f 7370 7261 616b 6261 6e6b    ner_spraakbank
+00026880: 656e 5f70 6174 6820 3d20 2268 7474 7073  en_path = "https
+00026890: 3a2f 2f72 6177 2e67 6974 6875 6275 7365  ://raw.githubuse
+000268a0: 7263 6f6e 7465 6e74 2e63 6f6d 2f6b 6c69  rcontent.com/kli
+000268b0: 6e74 616e 2f73 7765 6469 7368 2d6e 6572  ntan/swedish-ner
+000268c0: 2d63 6f72 7075 732f 6d61 7374 6572 2f22  -corpus/master/"
+000268d0: 0a20 2020 2020 2020 2063 6163 6865 645f  .        cached_
+000268e0: 7061 7468 2866 227b 6e65 725f 7370 7261  path(f"{ner_spra
+000268f0: 616b 6261 6e6b 656e 5f70 6174 687d 7465  akbanken_path}te
+00026900: 7374 5f63 6f72 7075 732e 7478 7422 2c20  st_corpus.txt", 
+00026910: 5061 7468 2822 6461 7461 7365 7473 2229  Path("datasets")
+00026920: 202f 2064 6174 6173 6574 5f6e 616d 6529   / dataset_name)
+00026930: 0a20 2020 2020 2020 2063 6163 6865 645f  .        cached_
+00026940: 7061 7468 2866 227b 6e65 725f 7370 7261  path(f"{ner_spra
+00026950: 616b 6261 6e6b 656e 5f70 6174 687d 7472  akbanken_path}tr
+00026960: 6169 6e5f 636f 7270 7573 2e74 7874 222c  ain_corpus.txt",
+00026970: 2050 6174 6828 2264 6174 6173 6574 7322   Path("datasets"
+00026980: 2920 2f20 6461 7461 7365 745f 6e61 6d65  ) / dataset_name
+00026990: 290a 0a20 2020 2020 2020 2023 2064 6174  )..        # dat
+000269a0: 6120 6973 206e 6f74 2069 6e20 494f 4232  a is not in IOB2
+000269b0: 2066 6f72 6d61 742e 2054 6875 7320 7765   format. Thus we
+000269c0: 2074 7261 6e73 666f 726d 2069 7420 746f   transform it to
+000269d0: 2049 4f42 320a 2020 2020 2020 2020 7365   IOB2.        se
+000269e0: 6c66 2e5f 6164 645f 494f 4232 5f74 6167  lf._add_IOB2_tag
+000269f0: 7328 6461 7461 5f66 696c 653d 5061 7468  s(data_file=Path
+00026a00: 2864 6174 615f 666f 6c64 6572 202f 2022  (data_folder / "
+00026a10: 7465 7374 5f63 6f72 7075 732e 7478 7422  test_corpus.txt"
+00026a20: 2929 0a20 2020 2020 2020 2073 656c 662e  )).        self.
+00026a30: 5f61 6464 5f49 4f42 325f 7461 6773 2864  _add_IOB2_tags(d
+00026a40: 6174 615f 6669 6c65 3d50 6174 6828 6461  ata_file=Path(da
+00026a50: 7461 5f66 6f6c 6465 7220 2f20 2274 7261  ta_folder / "tra
+00026a60: 696e 5f63 6f72 7075 732e 7478 7422 2929  in_corpus.txt"))
+00026a70: 0a0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
+00026a80: 292e 5f5f 696e 6974 5f5f 280a 2020 2020  ).__init__(.    
+00026a90: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
+00026aa0: 6465 722c 0a20 2020 2020 2020 2020 2020  der,.           
+00026ab0: 2063 6f6c 756d 6e73 2c0a 2020 2020 2020   columns,.      
+00026ac0: 2020 2020 2020 696e 5f6d 656d 6f72 793d        in_memory=
+00026ad0: 696e 5f6d 656d 6f72 792c 0a20 2020 2020  in_memory,.     
+00026ae0: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
+00026af0: 7267 732c 0a20 2020 2020 2020 2029 0a0a  rgs,.        )..
+00026b00: 2020 2020 6465 6620 5f61 6464 5f49 4f42      def _add_IOB
+00026b10: 325f 7461 6773 2873 656c 662c 2064 6174  2_tags(self, dat
+00026b20: 615f 6669 6c65 3a20 556e 696f 6e5b 7374  a_file: Union[st
+00026b30: 722c 2050 6174 685d 2c20 656e 636f 6469  r, Path], encodi
+00026b40: 6e67 3a20 7374 7220 3d20 2275 7466 3822  ng: str = "utf8"
+00026b50: 293a 0a20 2020 2020 2020 2022 2222 4675  ):.        """Fu
+00026b60: 6e63 7469 6f6e 2074 6861 7420 6164 6473  nction that adds
+00026b70: 2049 4f42 3220 7461 6773 2069 6620 6f6e   IOB2 tags if on
+00026b80: 6c79 2063 6875 6e6b 206e 616d 6573 2061  ly chunk names a
+00026b90: 7265 2070 726f 7669 6465 642e 0a0a 2020  re provided...  
+00026ba0: 2020 2020 2020 652e 672e 2077 6f72 6473        e.g. words
+00026bb0: 2061 7265 2074 6167 6765 6420 5045 5220   are tagged PER 
+00026bc0: 696e 7374 6561 6420 6f66 2042 2d50 4552  instead of B-PER
+00026bd0: 206f 7220 492d 5045 522e 2052 6570 6c61   or I-PER. Repla
+00026be0: 6365 7320 2730 2720 7769 7468 2027 4f27  ces '0' with 'O'
+00026bf0: 2061 7320 7468 6520 6e6f 2d63 6875 6e6b   as the no-chunk
+00026c00: 2074 6167 2073 696e 6365 2043 6f6c 756d   tag since Colum
+00026c10: 6e43 6f72 7075 7320 6578 7065 6374 730a  nCorpus expects.
+00026c20: 2020 2020 2020 2020 7468 6520 6c65 7474          the lett
+00026c30: 6572 2027 4f27 2e20 4164 6469 7469 6f6e  er 'O'. Addition
+00026c40: 616c 6c79 2069 7420 7265 6d6f 7665 7320  ally it removes 
+00026c50: 6c69 6e65 7320 7769 7468 206e 6f20 7461  lines with no ta
+00026c60: 6773 2069 6e20 7468 6520 6461 7461 2066  gs in the data f
+00026c70: 696c 6520 616e 6420 6361 6e20 616c 736f  ile and can also
+00026c80: 0a20 2020 2020 2020 2062 6520 7573 6564  .        be used
+00026c90: 2069 6620 7468 6520 6461 7461 2069 7320   if the data is 
+00026ca0: 6f6e 6c79 2070 6172 7469 616c 6c79 2049  only partially I
+00026cb0: 4f42 2074 6167 6765 642e 0a0a 2020 2020  OB tagged...    
+00026cc0: 2020 2020 5061 7261 6d65 7465 7273 0a20      Parameters. 
+00026cd0: 2020 2020 2020 202d 2d2d 2d2d 2d2d 2d2d         ---------
+00026ce0: 2d0a 2020 2020 2020 2020 6461 7461 5f66  -.        data_f
+00026cf0: 696c 6520 3a20 556e 696f 6e5b 7374 722c  ile : Union[str,
+00026d00: 2050 6174 685d 0a20 2020 2020 2020 2020   Path].         
+00026d10: 2020 2050 6174 6820 746f 2074 6865 2064     Path to the d
+00026d20: 6174 6120 6669 6c65 2e0a 2020 2020 2020  ata file..      
+00026d30: 2020 656e 636f 6469 6e67 203a 2073 7472    encoding : str
+00026d40: 2c20 6f70 7469 6f6e 616c 0a20 2020 2020  , optional.     
+00026d50: 2020 2020 2020 2045 6e63 6f64 696e 6720         Encoding 
+00026d60: 7573 6564 2069 6e20 6f70 656e 2066 756e  used in open fun
+00026d70: 6374 696f 6e2e 2054 6865 2064 6566 6175  ction. The defau
+00026d80: 6c74 2069 7320 2275 7466 3822 2e0a 2020  lt is "utf8"..  
+00026d90: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00026da0: 2020 7769 7468 206f 7065 6e28 6669 6c65    with open(file
+00026db0: 3d64 6174 615f 6669 6c65 2c20 656e 636f  =data_file, enco
+00026dc0: 6469 6e67 3d65 6e63 6f64 696e 6729 2061  ding=encoding) a
+00026dd0: 7320 663a 0a20 2020 2020 2020 2020 2020  s f:.           
+00026de0: 206c 696e 6573 203d 2066 2e72 6561 646c   lines = f.readl
+00026df0: 696e 6573 2829 0a20 2020 2020 2020 2077  ines().        w
+00026e00: 6974 6820 6f70 656e 2866 696c 653d 6461  ith open(file=da
+00026e10: 7461 5f66 696c 652c 206d 6f64 653d 2277  ta_file, mode="w
+00026e20: 222c 2065 6e63 6f64 696e 673d 656e 636f  ", encoding=enco
+00026e30: 6469 6e67 2920 6173 2066 3a0a 2020 2020  ding) as f:.    
+00026e40: 2020 2020 2020 2020 7072 6564 203d 2022          pred = "
+00026e50: 4f22 2020 2320 7265 6d65 6d62 6572 7320  O"  # remembers 
+00026e60: 7461 6720 6f66 2070 7265 6465 6365 7373  tag of predecess
+00026e70: 696e 6720 6c69 6e65 0a20 2020 2020 2020  ing line.       
+00026e80: 2020 2020 2066 6f72 206c 696e 6520 696e       for line in
+00026e90: 206c 696e 6573 3a0a 2020 2020 2020 2020   lines:.        
+00026ea0: 2020 2020 2020 2020 6c69 6e65 5f6c 6973          line_lis
+00026eb0: 7420 3d20 6c69 6e65 2e73 706c 6974 2829  t = line.split()
+00026ec0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00026ed0: 2069 6620 6c65 6e28 6c69 6e65 5f6c 6973   if len(line_lis
+00026ee0: 7429 203d 3d20 323a 2020 2320 776f 7264  t) == 2:  # word
+00026ef0: 2077 6974 6820 7461 670a 2020 2020 2020   with tag.      
+00026f00: 2020 2020 2020 2020 2020 2020 2020 776f                wo
+00026f10: 7264 203d 206c 696e 655f 6c69 7374 5b30  rd = line_list[0
+00026f20: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+00026f30: 2020 2020 2020 7461 6720 3d20 6c69 6e65        tag = line
+00026f40: 5f6c 6973 745b 315d 0a20 2020 2020 2020  _list[1].       
+00026f50: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00026f60: 7461 6720 696e 205b 2230 222c 2022 4f22  tag in ["0", "O"
+00026f70: 5d3a 2020 2320 6e6f 2063 6875 6e6b 0a20  ]:  # no chunk. 
+00026f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026f90: 2020 2020 2020 2066 2e77 7269 7465 2877         f.write(w
+00026fa0: 6f72 6420 2b20 2220 4f5c 6e22 290a 2020  ord + " O\n").  
+00026fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00026fc0: 2020 2020 2020 7072 6564 203d 2022 4f22        pred = "O"
+00026fd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00026fe0: 2020 2020 2065 6c69 6620 222d 2220 6e6f       elif "-" no
+00026ff0: 7420 696e 2074 6167 3a20 2023 206e 6f20  t in tag:  # no 
+00027000: 494f 4220 7461 6773 0a20 2020 2020 2020  IOB tags.       
+00027010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027020: 2069 6620 7072 6564 203d 3d20 224f 223a   if pred == "O":
+00027030: 2020 2320 666f 756e 6420 6120 6e65 7720    # found a new 
+00027040: 6368 756e 6b0a 2020 2020 2020 2020 2020  chunk.          
+00027050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027060: 2020 662e 7772 6974 6528 776f 7264 202b    f.write(word +
+00027070: 2022 2042 2d22 202b 2074 6167 202b 2022   " B-" + tag + "
+00027080: 5c6e 2229 0a20 2020 2020 2020 2020 2020  \n").           
+00027090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000270a0: 2070 7265 6420 3d20 7461 670a 2020 2020   pred = tag.    
+000270b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000270c0: 2020 2020 656c 7365 3a20 2023 2066 6f75      else:  # fou
+000270d0: 6e64 2066 7572 7468 6572 2070 6172 7420  nd further part 
+000270e0: 6f66 2063 6875 6e6b 206f 7220 6e65 7720  of chunk or new 
+000270f0: 6368 756e 6b20 6469 7265 6374 6c79 2061  chunk directly a
+00027100: 6674 6572 206f 6c64 2063 6875 6e6b 0a20  fter old chunk. 
+00027110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027120: 2020 2020 2020 2020 2020 2069 6620 7072             if pr
+00027130: 6564 203d 3d20 7461 673a 0a20 2020 2020  ed == tag:.     
+00027140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027150: 2020 2020 2020 2020 2020 2066 2e77 7269             f.wri
+00027160: 7465 2877 6f72 6420 2b20 2220 492d 2220  te(word + " I-" 
+00027170: 2b20 7461 6720 2b20 225c 6e22 290a 2020  + tag + "\n").  
+00027180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027190: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+000271a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000271b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000271c0: 662e 7772 6974 6528 776f 7264 202b 2022  f.write(word + "
+000271d0: 2042 2d22 202b 2074 6167 202b 2022 5c6e   B-" + tag + "\n
+000271e0: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
+000271f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027200: 2020 2070 7265 6420 3d20 7461 670a 2020     pred = tag.  
+00027210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027220: 2020 656c 7365 3a20 2023 206c 696e 6520    else:  # line 
+00027230: 616c 7265 6164 7920 6861 7320 494f 4220  already has IOB 
+00027240: 7461 6720 2874 6167 2063 6f6e 7461 696e  tag (tag contain
+00027250: 7320 272d 2729 0a20 2020 2020 2020 2020  s '-').         
+00027260: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00027270: 2e77 7269 7465 286c 696e 6529 0a20 2020  .write(line).   
+00027280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00027290: 2020 2020 2070 7265 6420 3d20 7461 672e       pred = tag.
+000272a0: 7370 6c69 7428 222d 2229 5b31 5d0a 2020  split("-")[1].  
+000272b0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+000272c0: 6966 206c 656e 286c 696e 655f 6c69 7374  if len(line_list
+000272d0: 2920 3d3d 2030 3a20 2023 2065 6d70 7479  ) == 0:  # empty
+000272e0: 206c 696e 650a 2020 2020 2020 2020 2020   line.          
+000272f0: 2020 2020 2020 2020 2020 662e 7772 6974            f.writ
+00027300: 6528 225c 6e22 290a 2020 2020 2020 2020  e("\n").        
+00027310: 2020 2020 2020 2020 2020 2020 7072 6564              pred
+00027320: 203d 2022 4f22 0a0a 0a63 6c61 7373 204e   = "O"...class N
+00027330: 4552 5f54 5552 4b55 2843 6f6c 756d 6e43  ER_TURKU(ColumnC
+00027340: 6f72 7075 7329 3a0a 2020 2020 6465 6620  orpus):.    def 
+00027350: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
+00027360: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
+00027370: 6261 7365 5f70 6174 683a 204f 7074 696f  base_path: Optio
+00027380: 6e61 6c5b 556e 696f 6e5b 7374 722c 2050  nal[Union[str, P
+00027390: 6174 685d 5d20 3d20 4e6f 6e65 2c0a 2020  ath]] = None,.  
+000273a0: 2020 2020 2020 696e 5f6d 656d 6f72 793a        in_memory:
+000273b0: 2062 6f6f 6c20 3d20 5472 7565 2c0a 2020   bool = True,.  
+000273c0: 2020 2020 2020 2a2a 636f 7270 7573 6172        **corpusar
+000273d0: 6773 2c0a 2020 2020 2920 2d3e 204e 6f6e  gs,.    ) -> Non
+000273e0: 653a 0a20 2020 2020 2020 2022 2222 496e  e:.        """In
+000273f0: 6974 6961 6c69 7a65 2074 6865 2046 696e  itialize the Fin
+00027400: 6e69 7368 2054 7572 6b75 4e45 5220 636f  nish TurkuNER co
+00027410: 7270 7573 2e0a 0a20 2020 2020 2020 2054  rpus...        T
+00027420: 6865 2066 6972 7374 2074 696d 6520 796f  he first time yo
+00027430: 7520 6361 6c6c 2074 6869 7320 636f 6e73  u call this cons
+00027440: 7472 7563 746f 7220 6974 2077 696c 6c20  tructor it will 
+00027450: 6175 746f 6d61 7469 6361 6c6c 7920 646f  automatically do
+00027460: 776e 6c6f 6164 2074 6865 2064 6174 6173  wnload the datas
+00027470: 6574 2e0a 2020 2020 2020 2020 3a70 6172  et..        :par
+00027480: 616d 2062 6173 655f 7061 7468 3a20 4465  am base_path: De
+00027490: 6661 756c 7420 6973 204e 6f6e 652c 206d  fault is None, m
+000274a0: 6561 6e69 6e67 2074 6861 7420 636f 7270  eaning that corp
+000274b0: 7573 2067 6574 7320 6175 746f 2d64 6f77  us gets auto-dow
+000274c0: 6e6c 6f61 6465 6420 616e 6420 6c6f 6164  nloaded and load
+000274d0: 6564 2e20 596f 7520 6361 6e20 6f76 6572  ed. You can over
+000274e0: 7269 6465 2074 6869 730a 2020 2020 2020  ride this.      
+000274f0: 2020 746f 2070 6f69 6e74 2074 6f20 6120    to point to a 
+00027500: 6469 6666 6572 656e 7420 666f 6c64 6572  different folder
+00027510: 2062 7574 2074 7970 6963 616c 6c79 2074   but typically t
+00027520: 6869 7320 7368 6f75 6c64 206e 6f74 2062  his should not b
+00027530: 6520 6e65 6365 7373 6172 792e 0a20 2020  e necessary..   
+00027540: 2020 2020 2050 4f53 2074 6167 7320 696e       POS tags in
+00027550: 7374 6561 640a 2020 2020 2020 2020 3a70  stead.        :p
+00027560: 6172 616d 2069 6e5f 6d65 6d6f 7279 3a20  aram in_memory: 
+00027570: 4966 2054 7275 652c 206b 6565 7073 2064  If True, keeps d
+00027580: 6174 6173 6574 2069 6e20 6d65 6d6f 7279  ataset in memory
+00027590: 2067 6976 696e 6720 7370 6565 6475 7073   giving speedups
+000275a0: 2069 6e20 7472 6169 6e69 6e67 2e0a 2020   in training..  
+000275b0: 2020 2020 2020 3a70 6172 616d 2064 6f63        :param doc
+000275c0: 756d 656e 745f 6173 5f73 6571 7565 6e63  ument_as_sequenc
+000275d0: 653a 2049 6620 5472 7565 2c20 616c 6c20  e: If True, all 
+000275e0: 7365 6e74 656e 6365 7320 6f66 2061 2064  sentences of a d
+000275f0: 6f63 756d 656e 7420 6172 6520 7265 6164  ocument are read
+00027600: 2069 6e74 6f20 6120 7369 6e67 6c65 2053   into a single S
+00027610: 656e 7465 6e63 6520 6f62 6a65 6374 0a20  entence object. 
+00027620: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00027630: 2020 2062 6173 655f 7061 7468 203d 206b     base_path = k
+00027640: 6f6c 6962 7269 2e63 6163 6865 5f72 6f6f  olibri.cache_roo
+00027650: 7420 2f20 2264 6174 6173 6574 7322 2069  t / "datasets" i
+00027660: 6620 6e6f 7420 6261 7365 5f70 6174 6820  f not base_path 
+00027670: 656c 7365 2050 6174 6828 6261 7365 5f70  else Path(base_p
+00027680: 6174 6829 0a0a 2020 2020 2020 2020 2320  ath)..        # 
+00027690: 636f 6c75 6d6e 2066 6f72 6d61 740a 2020  column format.  
+000276a0: 2020 2020 2020 636f 6c75 6d6e 7320 3d20        columns = 
+000276b0: 7b30 3a20 2274 6578 7422 2c20 313a 2022  {0: "text", 1: "
+000276c0: 6e65 7222 7d0a 0a20 2020 2020 2020 2023  ner"}..        #
+000276d0: 2074 6869 7320 6461 7461 7365 7420 6e61   this dataset na
+000276e0: 6d65 0a20 2020 2020 2020 2064 6174 6173  me.        datas
+000276f0: 6574 5f6e 616d 6520 3d20 7365 6c66 2e5f  et_name = self._
+00027700: 5f63 6c61 7373 5f5f 2e5f 5f6e 616d 655f  _class__.__name_
+00027710: 5f2e 6c6f 7765 7228 290a 0a20 2020 2020  _.lower()..     
+00027720: 2020 2064 6174 615f 666f 6c64 6572 203d     data_folder =
+00027730: 2062 6173 655f 7061 7468 202f 2064 6174   base_path / dat
+00027740: 6173 6574 5f6e 616d 650a 0a20 2020 2020  aset_name..     
+00027750: 2020 2023 2064 6f77 6e6c 6f61 6420 6461     # download da
+00027760: 7461 2069 6620 6e65 6365 7373 6172 790a  ta if necessary.
+00027770: 2020 2020 2020 2020 636f 6e6c 6c5f 7061          conll_pa
+00027780: 7468 203d 2022 6874 7470 733a 2f2f 7261  th = "https://ra
+00027790: 772e 6769 7468 7562 7573 6572 636f 6e74  w.githubusercont
+000277a0: 656e 742e 636f 6d2f 5475 726b 754e 4c50  ent.com/TurkuNLP
+000277b0: 2f74 7572 6b75 2d6e 6572 2d63 6f72 7075  /turku-ner-corpu
+000277c0: 732f 6d61 7374 6572 2f64 6174 612f 636f  s/master/data/co
+000277d0: 6e6c 6c22 0a20 2020 2020 2020 2064 6576  nll".        dev
+000277e0: 5f66 696c 6520 3d20 2264 6576 2e74 7376  _file = "dev.tsv
+000277f0: 220a 2020 2020 2020 2020 7465 7374 5f66  ".        test_f
+00027800: 696c 6520 3d20 2274 6573 742e 7473 7622  ile = "test.tsv"
+00027810: 0a20 2020 2020 2020 2074 7261 696e 5f66  .        train_f
+00027820: 696c 6520 3d20 2274 7261 696e 2e74 7376  ile = "train.tsv
+00027830: 220a 2020 2020 2020 2020 6361 6368 6564  ".        cached
+00027840: 5f70 6174 6828 6622 7b63 6f6e 6c6c 5f70  _path(f"{conll_p
+00027850: 6174 687d 2f7b 6465 765f 6669 6c65 7d22  ath}/{dev_file}"
+00027860: 2c20 5061 7468 2822 6461 7461 7365 7473  , Path("datasets
+00027870: 2229 202f 2064 6174 6173 6574 5f6e 616d  ") / dataset_nam
+00027880: 6529 0a20 2020 2020 2020 2063 6163 6865  e).        cache
+00027890: 645f 7061 7468 2866 227b 636f 6e6c 6c5f  d_path(f"{conll_
+000278a0: 7061 7468 7d2f 7b74 6573 745f 6669 6c65  path}/{test_file
+000278b0: 7d22 2c20 5061 7468 2822 6461 7461 7365  }", Path("datase
+000278c0: 7473 2229 202f 2064 6174 6173 6574 5f6e  ts") / dataset_n
+000278d0: 616d 6529 0a20 2020 2020 2020 2063 6163  ame).        cac
+000278e0: 6865 645f 7061 7468 2866 227b 636f 6e6c  hed_path(f"{conl
+000278f0: 6c5f 7061 7468 7d2f 7b74 7261 696e 5f66  l_path}/{train_f
+00027900: 696c 657d 222c 2050 6174 6828 2264 6174  ile}", Path("dat
+00027910: 6173 6574 7322 2920 2f20 6461 7461 7365  asets") / datase
+00027920: 745f 6e61 6d65 290a 0a20 2020 2020 2020  t_name)..       
+00027930: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
+00027940: 5f28 0a20 2020 2020 2020 2020 2020 2064  _(.            d
+00027950: 6174 615f 666f 6c64 6572 2c0a 2020 2020  ata_folder,.    
+00027960: 2020 2020 2020 2020 636f 6c75 6d6e 732c          columns,
+00027970: 0a20 2020 2020 2020 2020 2020 2064 6576  .            dev
+00027980: 5f66 696c 653d 6465 765f 6669 6c65 2c0a  _file=dev_file,.
+00027990: 2020 2020 2020 2020 2020 2020 7465 7374              test
+000279a0: 5f66 696c 653d 7465 7374 5f66 696c 652c  _file=test_file,
+000279b0: 0a20 2020 2020 2020 2020 2020 2074 7261  .            tra
+000279c0: 696e 5f66 696c 653d 7472 6169 6e5f 6669  in_file=train_fi
+000279d0: 6c65 2c0a 2020 2020 2020 2020 2020 2020  le,.            
+000279e0: 636f 6c75 6d6e 5f64 656c 696d 6974 6572  column_delimiter
+000279f0: 3d22 5c74 222c 0a20 2020 2020 2020 2020  ="\t",.         
+00027a00: 2020 2065 6e63 6f64 696e 673d 226c 6174     encoding="lat
+00027a10: 696e 2d31 222c 0a20 2020 2020 2020 2020  in-1",.         
+00027a20: 2020 2069 6e5f 6d65 6d6f 7279 3d69 6e5f     in_memory=in_
+00027a30: 6d65 6d6f 7279 2c0a 2020 2020 2020 2020  memory,.        
+00027a40: 2020 2020 646f 6375 6d65 6e74 5f73 6570      document_sep
+00027a50: 6172 6174 6f72 5f74 6f6b 656e 3d22 2d44  arator_token="-D
+00027a60: 4f43 5354 4152 542d 222c 0a20 2020 2020  OCSTART-",.     
+00027a70: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
+00027a80: 7267 732c 0a20 2020 2020 2020 2029 0a0a  rgs,.        )..
+00027a90: 0a63 6c61 7373 204e 4552 5f55 4b52 4149  .class NER_UKRAI
+00027aa0: 4e49 414e 2843 6f6c 756d 6e43 6f72 7075  NIAN(ColumnCorpu
+00027ab0: 7329 3a0a 2020 2020 6465 6620 5f5f 696e  s):.    def __in
+00027ac0: 6974 5f5f 280a 2020 2020 2020 2020 7365  it__(.        se
+00027ad0: 6c66 2c0a 2020 2020 2020 2020 6261 7365  lf,.        base
+00027ae0: 5f70 6174 683a 204f 7074 696f 6e61 6c5b  _path: Optional[
+00027af0: 556e 696f 6e5b 7374 722c 2050 6174 685d  Union[str, Path]
+00027b00: 5d20 3d20 4e6f 6e65 2c0a 2020 2020 2020  ] = None,.      
+00027b10: 2020 696e 5f6d 656d 6f72 793a 2062 6f6f    in_memory: boo
+00027b20: 6c20 3d20 5472 7565 2c0a 2020 2020 2020  l = True,.      
+00027b30: 2020 2a2a 636f 7270 7573 6172 6773 2c0a    **corpusargs,.
+00027b40: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
+00027b50: 2020 2020 2020 2022 2222 496e 6974 6961         """Initia
+00027b60: 6c69 7a65 2074 6865 2055 6b72 6169 6e69  lize the Ukraini
+00027b70: 616e 204e 4552 2063 6f72 7075 7320 6672  an NER corpus fr
+00027b80: 6f6d 206c 616e 672d 756b 2070 726f 6a65  om lang-uk proje
+00027b90: 6374 2e0a 0a20 2020 2020 2020 2054 6865  ct...        The
+00027ba0: 2066 6972 7374 2074 696d 6520 796f 7520   first time you 
+00027bb0: 6361 6c6c 2074 6869 7320 636f 6e73 7472  call this constr
+00027bc0: 7563 746f 7220 6974 2077 696c 6c20 6175  uctor it will au
+00027bd0: 746f 6d61 7469 6361 6c6c 7920 646f 776e  tomatically down
+00027be0: 6c6f 6164 2074 6865 2064 6174 6173 6574  load the dataset
+00027bf0: 2e0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
+00027c00: 2062 6173 655f 7061 7468 3a20 4465 6661   base_path: Defa
+00027c10: 756c 7420 6973 204e 6f6e 652c 206d 6561  ult is None, mea
+00027c20: 6e69 6e67 2074 6861 7420 636f 7270 7573  ning that corpus
+00027c30: 2067 6574 7320 6175 746f 2d64 6f77 6e6c   gets auto-downl
+00027c40: 6f61 6465 6420 616e 6420 6c6f 6164 6564  oaded and loaded
+00027c50: 2e20 596f 7520 6361 6e20 6f76 6572 7269  . You can overri
+00027c60: 6465 2074 6869 730a 2020 2020 2020 2020  de this.        
+00027c70: 746f 2070 6f69 6e74 2074 6f20 6120 6469  to point to a di
+00027c80: 6666 6572 656e 7420 666f 6c64 6572 2062  fferent folder b
+00027c90: 7574 2074 7970 6963 616c 6c79 2074 6869  ut typically thi
+00027ca0: 7320 7368 6f75 6c64 206e 6f74 2062 6520  s should not be 
+00027cb0: 6e65 6365 7373 6172 792e 0a20 2020 2020  necessary..     
+00027cc0: 2020 2050 4f53 2074 6167 7320 696e 7374     POS tags inst
+00027cd0: 6561 640a 2020 2020 2020 2020 3a70 6172  ead.        :par
+00027ce0: 616d 2069 6e5f 6d65 6d6f 7279 3a20 4966  am in_memory: If
+00027cf0: 2054 7275 652c 206b 6565 7073 2064 6174   True, keeps dat
+00027d00: 6173 6574 2069 6e20 6d65 6d6f 7279 2067  aset in memory g
+00027d10: 6976 696e 6720 7370 6565 6475 7073 2069  iving speedups i
+00027d20: 6e20 7472 6169 6e69 6e67 2e0a 2020 2020  n training..    
+00027d30: 2020 2020 3a70 6172 616d 2064 6f63 756d      :param docum
+00027d40: 656e 745f 6173 5f73 6571 7565 6e63 653a  ent_as_sequence:
+00027d50: 2049 6620 5472 7565 2c20 616c 6c20 7365   If True, all se
+00027d60: 6e74 656e 6365 7320 6f66 2061 2064 6f63  ntences of a doc
+00027d70: 756d 656e 7420 6172 6520 7265 6164 2069  ument are read i
+00027d80: 6e74 6f20 6120 7369 6e67 6c65 2053 656e  nto a single Sen
+00027d90: 7465 6e63 6520 6f62 6a65 6374 0a20 2020  tence object.   
+00027da0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00027db0: 2062 6173 655f 7061 7468 203d 206b 6f6c   base_path = kol
+00027dc0: 6962 7269 2e63 6163 6865 5f72 6f6f 7420  ibri.cache_root 
+00027dd0: 2f20 2264 6174 6173 6574 7322 2069 6620  / "datasets" if 
+00027de0: 6e6f 7420 6261 7365 5f70 6174 6820 656c  not base_path el
+00027df0: 7365 2050 6174 6828 6261 7365 5f70 6174  se Path(base_pat
+00027e00: 6829 0a0a 2020 2020 2020 2020 2320 636f  h)..        # co
+00027e10: 6c75 6d6e 2066 6f72 6d61 740a 2020 2020  lumn format.    
+00027e20: 2020 2020 636f 6c75 6d6e 7320 3d20 7b30      columns = {0
+00027e30: 3a20 2274 6578 7422 2c20 313a 2022 6e65  : "text", 1: "ne
+00027e40: 7222 7d0a 0a20 2020 2020 2020 2023 2074  r"}..        # t
+00027e50: 6869 7320 6461 7461 7365 7420 6e61 6d65  his dataset name
+00027e60: 0a20 2020 2020 2020 2064 6174 6173 6574  .        dataset
+00027e70: 5f6e 616d 6520 3d20 7365 6c66 2e5f 5f63  _name = self.__c
+00027e80: 6c61 7373 5f5f 2e5f 5f6e 616d 655f 5f2e  lass__.__name__.
+00027e90: 6c6f 7765 7228 290a 0a20 2020 2020 2020  lower()..       
+00027ea0: 2064 6174 615f 666f 6c64 6572 203d 2062   data_folder = b
+00027eb0: 6173 655f 7061 7468 202f 2064 6174 6173  ase_path / datas
+00027ec0: 6574 5f6e 616d 650a 0a20 2020 2020 2020  et_name..       
+00027ed0: 2023 2064 6f77 6e6c 6f61 6420 6461 7461   # download data
+00027ee0: 2069 6620 6e65 6365 7373 6172 790a 2020   if necessary.  
+00027ef0: 2020 2020 2020 636f 6e6c 6c5f 7061 7468        conll_path
+00027f00: 203d 2022 6874 7470 733a 2f2f 7261 772e   = "https://raw.
+00027f10: 6769 7468 7562 7573 6572 636f 6e74 656e  githubuserconten
+00027f20: 742e 636f 6d2f 6c61 6e67 2d75 6b2f 666c  t.com/lang-uk/fl
+00027f30: 6169 722d 6e65 722f 6d61 7374 6572 2f66  air-ner/master/f
+00027f40: 6978 6564 2d73 706c 6974 220a 2020 2020  ixed-split".    
+00027f50: 2020 2020 7465 7374 5f66 696c 6520 3d20      test_file = 
+00027f60: 2274 6573 742e 696f 6222 0a20 2020 2020  "test.iob".     
+00027f70: 2020 2074 7261 696e 5f66 696c 6520 3d20     train_file = 
+00027f80: 2274 7261 696e 2e69 6f62 220a 2020 2020  "train.iob".    
+00027f90: 2020 2020 6361 6368 6564 5f70 6174 6828      cached_path(
+00027fa0: 6622 7b63 6f6e 6c6c 5f70 6174 687d 2f7b  f"{conll_path}/{
+00027fb0: 7465 7374 5f66 696c 657d 222c 2050 6174  test_file}", Pat
+00027fc0: 6828 2264 6174 6173 6574 7322 2920 2f20  h("datasets") / 
+00027fd0: 6461 7461 7365 745f 6e61 6d65 290a 2020  dataset_name).  
+00027fe0: 2020 2020 2020 6361 6368 6564 5f70 6174        cached_pat
+00027ff0: 6828 6622 7b63 6f6e 6c6c 5f70 6174 687d  h(f"{conll_path}
+00028000: 2f7b 7472 6169 6e5f 6669 6c65 7d22 2c20  /{train_file}", 
+00028010: 5061 7468 2822 6461 7461 7365 7473 2229  Path("datasets")
+00028020: 202f 2064 6174 6173 6574 5f6e 616d 6529   / dataset_name)
+00028030: 0a0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
+00028040: 292e 5f5f 696e 6974 5f5f 280a 2020 2020  ).__init__(.    
+00028050: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
+00028060: 6465 722c 0a20 2020 2020 2020 2020 2020  der,.           
+00028070: 2063 6f6c 756d 6e73 2c0a 2020 2020 2020   columns,.      
+00028080: 2020 2020 2020 7465 7374 5f66 696c 653d        test_file=
+00028090: 7465 7374 5f66 696c 652c 0a20 2020 2020  test_file,.     
+000280a0: 2020 2020 2020 2074 7261 696e 5f66 696c         train_fil
+000280b0: 653d 7472 6169 6e5f 6669 6c65 2c0a 2020  e=train_file,.  
+000280c0: 2020 2020 2020 2020 2020 636f 6c75 6d6e            column
+000280d0: 5f64 656c 696d 6974 6572 3d22 2022 2c0a  _delimiter=" ",.
+000280e0: 2020 2020 2020 2020 2020 2020 656e 636f              enco
+000280f0: 6469 6e67 3d22 7574 662d 3822 2c0a 2020  ding="utf-8",.  
+00028100: 2020 2020 2020 2020 2020 696e 5f6d 656d            in_mem
+00028110: 6f72 793d 696e 5f6d 656d 6f72 792c 0a20  ory=in_memory,. 
+00028120: 2020 2020 2020 2020 2020 202a 2a63 6f72             **cor
+00028130: 7075 7361 7267 732c 0a20 2020 2020 2020  pusargs,.       
+00028140: 2029 0a0a 0a63 6c61 7373 204b 4559 5048   )...class KEYPH
+00028150: 5241 5345 5f53 454d 4556 414c 3230 3137  RASE_SEMEVAL2017
+00028160: 2843 6f6c 756d 6e43 6f72 7075 7329 3a0a  (ColumnCorpus):.
+00028170: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+00028180: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
+00028190: 2020 2020 2020 2020 6261 7365 5f70 6174          base_pat
+000281a0: 683a 204f 7074 696f 6e61 6c5b 556e 696f  h: Optional[Unio
+000281b0: 6e5b 7374 722c 2050 6174 685d 5d20 3d20  n[str, Path]] = 
+000281c0: 4e6f 6e65 2c0a 2020 2020 2020 2020 696e  None,.        in
+000281d0: 5f6d 656d 6f72 793a 2062 6f6f 6c20 3d20  _memory: bool = 
+000281e0: 5472 7565 2c0a 2020 2020 2020 2020 2a2a  True,.        **
+000281f0: 636f 7270 7573 6172 6773 2c0a 2020 2020  corpusargs,.    
+00028200: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+00028210: 2020 2062 6173 655f 7061 7468 203d 206b     base_path = k
+00028220: 6f6c 6962 7269 2e63 6163 6865 5f72 6f6f  olibri.cache_roo
+00028230: 7420 2f20 2264 6174 6173 6574 7322 2069  t / "datasets" i
+00028240: 6620 6e6f 7420 6261 7365 5f70 6174 6820  f not base_path 
+00028250: 656c 7365 2050 6174 6828 6261 7365 5f70  else Path(base_p
+00028260: 6174 6829 0a0a 2020 2020 2020 2020 2320  ath)..        # 
+00028270: 636f 6c75 6d6e 2066 6f72 6d61 740a 2020  column format.  
+00028280: 2020 2020 2020 636f 6c75 6d6e 7320 3d20        columns = 
+00028290: 7b30 3a20 2274 6578 7422 2c20 313a 2022  {0: "text", 1: "
+000282a0: 6b65 7977 6f72 6422 7d0a 0a20 2020 2020  keyword"}..     
+000282b0: 2020 2023 2074 6869 7320 6461 7461 7365     # this datase
+000282c0: 7420 6e61 6d65 0a20 2020 2020 2020 2064  t name.        d
+000282d0: 6174 6173 6574 5f6e 616d 6520 3d20 7365  ataset_name = se
+000282e0: 6c66 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e  lf.__class__.__n
+000282f0: 616d 655f 5f2e 6c6f 7765 7228 290a 0a20  ame__.lower().. 
+00028300: 2020 2020 2020 2064 6174 615f 666f 6c64         data_fold
+00028310: 6572 203d 2062 6173 655f 7061 7468 202f  er = base_path /
+00028320: 2064 6174 6173 6574 5f6e 616d 650a 0a20   dataset_name.. 
+00028330: 2020 2020 2020 2073 656d 6576 616c 3230         semeval20
+00028340: 3137 5f70 6174 6820 3d20 2268 7474 7073  17_path = "https
+00028350: 3a2f 2f72 6177 2e67 6974 6875 6275 7365  ://raw.githubuse
+00028360: 7263 6f6e 7465 6e74 2e63 6f6d 2f6d 6964  rcontent.com/mid
+00028370: 6173 2d72 6573 6561 7263 682f 6b65 7970  as-research/keyp
+00028380: 6872 6173 652d 6578 7472 6163 7469 6f6e  hrase-extraction
+00028390: 2d61 732d 7365 7175 656e 6365 2d6c 6162  -as-sequence-lab
+000283a0: 656c 696e 672d 6461 7461 2f6d 6173 7465  eling-data/maste
+000283b0: 722f 5365 6d45 7661 6c2d 3230 3137 220a  r/SemEval-2017".
+000283c0: 2020 2020 2020 2020 6361 6368 6564 5f70          cached_p
+000283d0: 6174 6828 6622 7b73 656d 6576 616c 3230  ath(f"{semeval20
+000283e0: 3137 5f70 6174 687d 2f74 7261 696e 2e74  17_path}/train.t
+000283f0: 7874 222c 2050 6174 6828 2264 6174 6173  xt", Path("datas
+00028400: 6574 7322 2920 2f20 6461 7461 7365 745f  ets") / dataset_
+00028410: 6e61 6d65 290a 2020 2020 2020 2020 6361  name).        ca
+00028420: 6368 6564 5f70 6174 6828 6622 7b73 656d  ched_path(f"{sem
+00028430: 6576 616c 3230 3137 5f70 6174 687d 2f74  eval2017_path}/t
+00028440: 6573 742e 7478 7422 2c20 5061 7468 2822  est.txt", Path("
+00028450: 6461 7461 7365 7473 2229 202f 2064 6174  datasets") / dat
+00028460: 6173 6574 5f6e 616d 6529 0a20 2020 2020  aset_name).     
+00028470: 2020 2063 6163 6865 645f 7061 7468 2866     cached_path(f
+00028480: 227b 7365 6d65 7661 6c32 3031 375f 7061  "{semeval2017_pa
+00028490: 7468 7d2f 6465 762e 7478 7422 2c20 5061  th}/dev.txt", Pa
+000284a0: 7468 2822 6461 7461 7365 7473 2229 202f  th("datasets") /
+000284b0: 2064 6174 6173 6574 5f6e 616d 6529 0a0a   dataset_name)..
+000284c0: 2020 2020 2020 2020 7375 7065 7228 292e          super().
+000284d0: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
+000284e0: 2020 2020 2020 6461 7461 5f66 6f6c 6465        data_folde
+000284f0: 722c 0a20 2020 2020 2020 2020 2020 2063  r,.            c
+00028500: 6f6c 756d 6e73 2c0a 2020 2020 2020 2020  olumns,.        
+00028510: 2020 2020 696e 5f6d 656d 6f72 793d 696e      in_memory=in
+00028520: 5f6d 656d 6f72 792c 0a20 2020 2020 2020  _memory,.       
+00028530: 2020 2020 202a 2a63 6f72 7075 7361 7267       **corpusarg
+00028540: 732c 0a20 2020 2020 2020 2029 0a0a 0a63  s,.        )...c
+00028550: 6c61 7373 204b 4559 5048 5241 5345 5f49  lass KEYPHRASE_I
+00028560: 4e53 5045 4328 436f 6c75 6d6e 436f 7270  NSPEC(ColumnCorp
+00028570: 7573 293a 0a20 2020 2064 6566 205f 5f69  us):.    def __i
+00028580: 6e69 745f 5f28 0a20 2020 2020 2020 2073  nit__(.        s
+00028590: 656c 662c 0a20 2020 2020 2020 2062 6173  elf,.        bas
+000285a0: 655f 7061 7468 3a20 4f70 7469 6f6e 616c  e_path: Optional
+000285b0: 5b55 6e69 6f6e 5b73 7472 2c20 5061 7468  [Union[str, Path
+000285c0: 5d5d 203d 204e 6f6e 652c 0a20 2020 2020  ]] = None,.     
+000285d0: 2020 2069 6e5f 6d65 6d6f 7279 3a20 626f     in_memory: bo
+000285e0: 6f6c 203d 2054 7275 652c 0a20 2020 2020  ol = True,.     
+000285f0: 2020 202a 2a63 6f72 7075 7361 7267 732c     **corpusargs,
+00028600: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
+00028610: 2020 2020 2020 2020 6261 7365 5f70 6174          base_pat
+00028620: 6820 3d20 6b6f 6c69 6272 692e 6361 6368  h = kolibri.cach
+00028630: 655f 726f 6f74 202f 2022 6461 7461 7365  e_root / "datase
+00028640: 7473 2220 6966 206e 6f74 2062 6173 655f  ts" if not base_
+00028650: 7061 7468 2065 6c73 6520 5061 7468 2862  path else Path(b
+00028660: 6173 655f 7061 7468 290a 0a20 2020 2020  ase_path)..     
+00028670: 2020 2023 2063 6f6c 756d 6e20 666f 726d     # column form
+00028680: 6174 0a20 2020 2020 2020 2063 6f6c 756d  at.        colum
+00028690: 6e73 203d 207b 303a 2022 7465 7874 222c  ns = {0: "text",
+000286a0: 2031 3a20 226b 6579 776f 7264 227d 0a0a   1: "keyword"}..
 000286b0: 2020 2020 2020 2020 2320 7468 6973 2064          # this d
 000286c0: 6174 6173 6574 206e 616d 650a 2020 2020  ataset name.    
 000286d0: 2020 2020 6461 7461 7365 745f 6e61 6d65      dataset_name
 000286e0: 203d 2073 656c 662e 5f5f 636c 6173 735f   = self.__class_
 000286f0: 5f2e 5f5f 6e61 6d65 5f5f 2e6c 6f77 6572  _.__name__.lower
 00028700: 2829 0a0a 2020 2020 2020 2020 6461 7461  ()..        data
 00028710: 5f66 6f6c 6465 7220 3d20 6261 7365 5f70  _folder = base_p
 00028720: 6174 6820 2f20 6461 7461 7365 745f 6e61  ath / dataset_na
-00028730: 6d65 0a0a 2020 2020 2020 2020 2320 646f  me..        # do
-00028740: 776e 6c6f 6164 2064 6174 6120 6966 206e  wnload data if n
-00028750: 6563 6573 7361 7279 0a20 2020 2020 2020  ecessary.       
-00028760: 2063 6f6e 6c6c 5f70 6174 6820 3d20 2268   conll_path = "h
-00028770: 7474 7073 3a2f 2f72 6177 2e67 6974 6875  ttps://raw.githu
-00028780: 6275 7365 7263 6f6e 7465 6e74 2e63 6f6d  busercontent.com
-00028790: 2f6c 616e 672d 756b 2f66 6c61 6972 2d6e  /lang-uk/flair-n
-000287a0: 6572 2f6d 6173 7465 722f 6669 7865 642d  er/master/fixed-
-000287b0: 7370 6c69 7422 0a20 2020 2020 2020 2074  split".        t
-000287c0: 6573 745f 6669 6c65 203d 2022 7465 7374  est_file = "test
-000287d0: 2e69 6f62 220a 2020 2020 2020 2020 7472  .iob".        tr
-000287e0: 6169 6e5f 6669 6c65 203d 2022 7472 6169  ain_file = "trai
-000287f0: 6e2e 696f 6222 0a20 2020 2020 2020 2063  n.iob".        c
-00028800: 6163 6865 645f 7061 7468 2866 227b 636f  ached_path(f"{co
-00028810: 6e6c 6c5f 7061 7468 7d2f 7b74 6573 745f  nll_path}/{test_
-00028820: 6669 6c65 7d22 2c20 5061 7468 2822 6461  file}", Path("da
-00028830: 7461 7365 7473 2229 202f 2064 6174 6173  tasets") / datas
-00028840: 6574 5f6e 616d 6529 0a20 2020 2020 2020  et_name).       
-00028850: 2063 6163 6865 645f 7061 7468 2866 227b   cached_path(f"{
-00028860: 636f 6e6c 6c5f 7061 7468 7d2f 7b74 7261  conll_path}/{tra
-00028870: 696e 5f66 696c 657d 222c 2050 6174 6828  in_file}", Path(
-00028880: 2264 6174 6173 6574 7322 2920 2f20 6461  "datasets") / da
-00028890: 7461 7365 745f 6e61 6d65 290a 0a20 2020  taset_name)..   
-000288a0: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
-000288b0: 6e69 745f 5f28 0a20 2020 2020 2020 2020  nit__(.         
-000288c0: 2020 2064 6174 615f 666f 6c64 6572 2c0a     data_folder,.
-000288d0: 2020 2020 2020 2020 2020 2020 636f 6c75              colu
-000288e0: 6d6e 732c 0a20 2020 2020 2020 2020 2020  mns,.           
-000288f0: 2074 6573 745f 6669 6c65 3d74 6573 745f   test_file=test_
-00028900: 6669 6c65 2c0a 2020 2020 2020 2020 2020  file,.          
-00028910: 2020 7472 6169 6e5f 6669 6c65 3d74 7261    train_file=tra
-00028920: 696e 5f66 696c 652c 0a20 2020 2020 2020  in_file,.       
-00028930: 2020 2020 2063 6f6c 756d 6e5f 6465 6c69       column_deli
-00028940: 6d69 7465 723d 2220 222c 0a20 2020 2020  miter=" ",.     
-00028950: 2020 2020 2020 2065 6e63 6f64 696e 673d         encoding=
-00028960: 2275 7466 2d38 222c 0a20 2020 2020 2020  "utf-8",.       
-00028970: 2020 2020 2069 6e5f 6d65 6d6f 7279 3d69       in_memory=i
-00028980: 6e5f 6d65 6d6f 7279 2c0a 2020 2020 2020  n_memory,.      
-00028990: 2020 2020 2020 2a2a 636f 7270 7573 6172        **corpusar
-000289a0: 6773 2c0a 2020 2020 2020 2020 290a 0a0a  gs,.        )...
-000289b0: 636c 6173 7320 4b45 5950 4852 4153 455f  class KEYPHRASE_
-000289c0: 5345 4d45 5641 4c32 3031 3728 436f 6c75  SEMEVAL2017(Colu
-000289d0: 6d6e 436f 7270 7573 293a 0a20 2020 2064  mnCorpus):.    d
-000289e0: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
-000289f0: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
-00028a00: 2020 2062 6173 655f 7061 7468 3a20 4f70     base_path: Op
-00028a10: 7469 6f6e 616c 5b55 6e69 6f6e 5b73 7472  tional[Union[str
-00028a20: 2c20 5061 7468 5d5d 203d 204e 6f6e 652c  , Path]] = None,
-00028a30: 0a20 2020 2020 2020 2069 6e5f 6d65 6d6f  .        in_memo
-00028a40: 7279 3a20 626f 6f6c 203d 2054 7275 652c  ry: bool = True,
-00028a50: 0a20 2020 2020 2020 202a 2a63 6f72 7075  .        **corpu
-00028a60: 7361 7267 732c 0a20 2020 2029 202d 3e20  sargs,.    ) -> 
-00028a70: 4e6f 6e65 3a0a 2020 2020 2020 2020 6261  None:.        ba
-00028a80: 7365 5f70 6174 6820 3d20 6b6f 6c69 6272  se_path = kolibr
-00028a90: 692e 6361 6368 655f 726f 6f74 202f 2022  i.cache_root / "
-00028aa0: 6461 7461 7365 7473 2220 6966 206e 6f74  datasets" if not
-00028ab0: 2062 6173 655f 7061 7468 2065 6c73 6520   base_path else 
-00028ac0: 5061 7468 2862 6173 655f 7061 7468 290a  Path(base_path).
-00028ad0: 0a20 2020 2020 2020 2023 2063 6f6c 756d  .        # colum
-00028ae0: 6e20 666f 726d 6174 0a20 2020 2020 2020  n format.       
-00028af0: 2063 6f6c 756d 6e73 203d 207b 303a 2022   columns = {0: "
-00028b00: 7465 7874 222c 2031 3a20 226b 6579 776f  text", 1: "keywo
-00028b10: 7264 227d 0a0a 2020 2020 2020 2020 2320  rd"}..        # 
-00028b20: 7468 6973 2064 6174 6173 6574 206e 616d  this dataset nam
-00028b30: 650a 2020 2020 2020 2020 6461 7461 7365  e.        datase
-00028b40: 745f 6e61 6d65 203d 2073 656c 662e 5f5f  t_name = self.__
-00028b50: 636c 6173 735f 5f2e 5f5f 6e61 6d65 5f5f  class__.__name__
-00028b60: 2e6c 6f77 6572 2829 0a0a 2020 2020 2020  .lower()..      
-00028b70: 2020 6461 7461 5f66 6f6c 6465 7220 3d20    data_folder = 
-00028b80: 6261 7365 5f70 6174 6820 2f20 6461 7461  base_path / data
-00028b90: 7365 745f 6e61 6d65 0a0a 2020 2020 2020  set_name..      
-00028ba0: 2020 7365 6d65 7661 6c32 3031 375f 7061    semeval2017_pa
-00028bb0: 7468 203d 2022 6874 7470 733a 2f2f 7261  th = "https://ra
-00028bc0: 772e 6769 7468 7562 7573 6572 636f 6e74  w.githubusercont
-00028bd0: 656e 742e 636f 6d2f 6d69 6461 732d 7265  ent.com/midas-re
-00028be0: 7365 6172 6368 2f6b 6579 7068 7261 7365  search/keyphrase
-00028bf0: 2d65 7874 7261 6374 696f 6e2d 6173 2d73  -extraction-as-s
-00028c00: 6571 7565 6e63 652d 6c61 6265 6c69 6e67  equence-labeling
-00028c10: 2d64 6174 612f 6d61 7374 6572 2f53 656d  -data/master/Sem
-00028c20: 4576 616c 2d32 3031 3722 0a20 2020 2020  Eval-2017".     
-00028c30: 2020 2063 6163 6865 645f 7061 7468 2866     cached_path(f
-00028c40: 227b 7365 6d65 7661 6c32 3031 375f 7061  "{semeval2017_pa
-00028c50: 7468 7d2f 7472 6169 6e2e 7478 7422 2c20  th}/train.txt", 
-00028c60: 5061 7468 2822 6461 7461 7365 7473 2229  Path("datasets")
-00028c70: 202f 2064 6174 6173 6574 5f6e 616d 6529   / dataset_name)
-00028c80: 0a20 2020 2020 2020 2063 6163 6865 645f  .        cached_
-00028c90: 7061 7468 2866 227b 7365 6d65 7661 6c32  path(f"{semeval2
-00028ca0: 3031 375f 7061 7468 7d2f 7465 7374 2e74  017_path}/test.t
-00028cb0: 7874 222c 2050 6174 6828 2264 6174 6173  xt", Path("datas
-00028cc0: 6574 7322 2920 2f20 6461 7461 7365 745f  ets") / dataset_
-00028cd0: 6e61 6d65 290a 2020 2020 2020 2020 6361  name).        ca
-00028ce0: 6368 6564 5f70 6174 6828 6622 7b73 656d  ched_path(f"{sem
-00028cf0: 6576 616c 3230 3137 5f70 6174 687d 2f64  eval2017_path}/d
-00028d00: 6576 2e74 7874 222c 2050 6174 6828 2264  ev.txt", Path("d
-00028d10: 6174 6173 6574 7322 2920 2f20 6461 7461  atasets") / data
-00028d20: 7365 745f 6e61 6d65 290a 0a20 2020 2020  set_name)..     
-00028d30: 2020 2073 7570 6572 2829 2e5f 5f69 6e69     super().__ini
-00028d40: 745f 5f28 0a20 2020 2020 2020 2020 2020  t__(.           
-00028d50: 2064 6174 615f 666f 6c64 6572 2c0a 2020   data_folder,.  
-00028d60: 2020 2020 2020 2020 2020 636f 6c75 6d6e            column
-00028d70: 732c 0a20 2020 2020 2020 2020 2020 2069  s,.            i
-00028d80: 6e5f 6d65 6d6f 7279 3d69 6e5f 6d65 6d6f  n_memory=in_memo
-00028d90: 7279 2c0a 2020 2020 2020 2020 2020 2020  ry,.            
-00028da0: 2a2a 636f 7270 7573 6172 6773 2c0a 2020  **corpusargs,.  
-00028db0: 2020 2020 2020 290a 0a0a 636c 6173 7320        )...class 
-00028dc0: 4b45 5950 4852 4153 455f 494e 5350 4543  KEYPHRASE_INSPEC
-00028dd0: 2843 6f6c 756d 6e43 6f72 7075 7329 3a0a  (ColumnCorpus):.
-00028de0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-00028df0: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
-00028e00: 2020 2020 2020 2020 6261 7365 5f70 6174          base_pat
-00028e10: 683a 204f 7074 696f 6e61 6c5b 556e 696f  h: Optional[Unio
-00028e20: 6e5b 7374 722c 2050 6174 685d 5d20 3d20  n[str, Path]] = 
-00028e30: 4e6f 6e65 2c0a 2020 2020 2020 2020 696e  None,.        in
-00028e40: 5f6d 656d 6f72 793a 2062 6f6f 6c20 3d20  _memory: bool = 
-00028e50: 5472 7565 2c0a 2020 2020 2020 2020 2a2a  True,.        **
-00028e60: 636f 7270 7573 6172 6773 2c0a 2020 2020  corpusargs,.    
-00028e70: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
-00028e80: 2020 2062 6173 655f 7061 7468 203d 206b     base_path = k
-00028e90: 6f6c 6962 7269 2e63 6163 6865 5f72 6f6f  olibri.cache_roo
-00028ea0: 7420 2f20 2264 6174 6173 6574 7322 2069  t / "datasets" i
-00028eb0: 6620 6e6f 7420 6261 7365 5f70 6174 6820  f not base_path 
-00028ec0: 656c 7365 2050 6174 6828 6261 7365 5f70  else Path(base_p
-00028ed0: 6174 6829 0a0a 2020 2020 2020 2020 2320  ath)..        # 
-00028ee0: 636f 6c75 6d6e 2066 6f72 6d61 740a 2020  column format.  
-00028ef0: 2020 2020 2020 636f 6c75 6d6e 7320 3d20        columns = 
-00028f00: 7b30 3a20 2274 6578 7422 2c20 313a 2022  {0: "text", 1: "
-00028f10: 6b65 7977 6f72 6422 7d0a 0a20 2020 2020  keyword"}..     
-00028f20: 2020 2023 2074 6869 7320 6461 7461 7365     # this datase
-00028f30: 7420 6e61 6d65 0a20 2020 2020 2020 2064  t name.        d
-00028f40: 6174 6173 6574 5f6e 616d 6520 3d20 7365  ataset_name = se
-00028f50: 6c66 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e  lf.__class__.__n
-00028f60: 616d 655f 5f2e 6c6f 7765 7228 290a 0a20  ame__.lower().. 
-00028f70: 2020 2020 2020 2064 6174 615f 666f 6c64         data_fold
-00028f80: 6572 203d 2062 6173 655f 7061 7468 202f  er = base_path /
-00028f90: 2064 6174 6173 6574 5f6e 616d 650a 0a20   dataset_name.. 
-00028fa0: 2020 2020 2020 2069 6e73 7065 635f 7061         inspec_pa
-00028fb0: 7468 203d 2022 6874 7470 733a 2f2f 7261  th = "https://ra
-00028fc0: 772e 6769 7468 7562 7573 6572 636f 6e74  w.githubusercont
-00028fd0: 656e 742e 636f 6d2f 6d69 6461 732d 7265  ent.com/midas-re
-00028fe0: 7365 6172 6368 2f6b 6579 7068 7261 7365  search/keyphrase
-00028ff0: 2d65 7874 7261 6374 696f 6e2d 6173 2d73  -extraction-as-s
-00029000: 6571 7565 6e63 652d 6c61 6265 6c69 6e67  equence-labeling
-00029010: 2d64 6174 612f 6d61 7374 6572 2f49 6e73  -data/master/Ins
-00029020: 7065 6322 0a20 2020 2020 2020 2063 6163  pec".        cac
-00029030: 6865 645f 7061 7468 2866 227b 696e 7370  hed_path(f"{insp
-00029040: 6563 5f70 6174 687d 2f74 7261 696e 2e74  ec_path}/train.t
-00029050: 7874 222c 2050 6174 6828 2264 6174 6173  xt", Path("datas
-00029060: 6574 7322 2920 2f20 6461 7461 7365 745f  ets") / dataset_
-00029070: 6e61 6d65 290a 2020 2020 2020 2020 6361  name).        ca
-00029080: 6368 6564 5f70 6174 6828 6622 7b69 6e73  ched_path(f"{ins
-00029090: 7065 635f 7061 7468 7d2f 7465 7374 2e74  pec_path}/test.t
-000290a0: 7874 222c 2050 6174 6828 2264 6174 6173  xt", Path("datas
-000290b0: 6574 7322 2920 2f20 6461 7461 7365 745f  ets") / dataset_
-000290c0: 6e61 6d65 290a 2020 2020 2020 2020 6966  name).        if
-000290d0: 2022 6465 762e 7478 7422 206e 6f74 2069   "dev.txt" not i
-000290e0: 6e20 6f73 2e6c 6973 7464 6972 2864 6174  n os.listdir(dat
-000290f0: 615f 666f 6c64 6572 293a 0a20 2020 2020  a_folder):.     
-00029100: 2020 2020 2020 2063 6163 6865 645f 7061         cached_pa
-00029110: 7468 2866 227b 696e 7370 6563 5f70 6174  th(f"{inspec_pat
-00029120: 687d 2f76 616c 6964 2e74 7874 222c 2050  h}/valid.txt", P
-00029130: 6174 6828 2264 6174 6173 6574 7322 2920  ath("datasets") 
-00029140: 2f20 6461 7461 7365 745f 6e61 6d65 290a  / dataset_name).
-00029150: 2020 2020 2020 2020 2020 2020 2320 7265              # re
-00029160: 6e61 6d65 2061 6363 6f72 6469 6e67 2074  name according t
-00029170: 6f20 7472 6169 6e20 2d20 7465 7374 202d  o train - test -
-00029180: 2064 6576 202d 2063 6f6e 7665 6e74 696f   dev - conventio
-00029190: 6e0a 2020 2020 2020 2020 2020 2020 6f73  n.            os
-000291a0: 2e72 656e 616d 6528 6461 7461 5f66 6f6c  .rename(data_fol
-000291b0: 6465 7220 2f20 2276 616c 6964 2e74 7874  der / "valid.txt
-000291c0: 222c 2064 6174 615f 666f 6c64 6572 202f  ", data_folder /
-000291d0: 2022 6465 762e 7478 7422 290a 0a20 2020   "dev.txt")..   
-000291e0: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
-000291f0: 6e69 745f 5f28 0a20 2020 2020 2020 2020  nit__(.         
-00029200: 2020 2064 6174 615f 666f 6c64 6572 2c0a     data_folder,.
-00029210: 2020 2020 2020 2020 2020 2020 636f 6c75              colu
-00029220: 6d6e 732c 0a20 2020 2020 2020 2020 2020  mns,.           
-00029230: 2069 6e5f 6d65 6d6f 7279 3d69 6e5f 6d65   in_memory=in_me
-00029240: 6d6f 7279 2c0a 2020 2020 2020 2020 2020  mory,.          
-00029250: 2020 2a2a 636f 7270 7573 6172 6773 2c0a    **corpusargs,.
-00029260: 2020 2020 2020 2020 290a 0a0a 636c 6173          )...clas
-00029270: 7320 4b45 5950 4852 4153 455f 5345 4d45  s KEYPHRASE_SEME
-00029280: 5641 4c32 3031 3028 436f 6c75 6d6e 436f  VAL2010(ColumnCo
-00029290: 7270 7573 293a 0a20 2020 2064 6566 205f  rpus):.    def _
-000292a0: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
-000292b0: 2073 656c 662c 0a20 2020 2020 2020 2062   self,.        b
-000292c0: 6173 655f 7061 7468 3a20 4f70 7469 6f6e  ase_path: Option
-000292d0: 616c 5b55 6e69 6f6e 5b73 7472 2c20 5061  al[Union[str, Pa
-000292e0: 7468 5d5d 203d 204e 6f6e 652c 0a20 2020  th]] = None,.   
-000292f0: 2020 2020 2069 6e5f 6d65 6d6f 7279 3a20       in_memory: 
-00029300: 626f 6f6c 203d 2054 7275 652c 0a20 2020  bool = True,.   
-00029310: 2020 2020 202a 2a63 6f72 7075 7361 7267       **corpusarg
-00029320: 732c 0a20 2020 2029 202d 3e20 4e6f 6e65  s,.    ) -> None
-00029330: 3a0a 2020 2020 2020 2020 6261 7365 5f70  :.        base_p
-00029340: 6174 6820 3d20 6b6f 6c69 6272 692e 6361  ath = kolibri.ca
-00029350: 6368 655f 726f 6f74 202f 2022 6461 7461  che_root / "data
-00029360: 7365 7473 2220 6966 206e 6f74 2062 6173  sets" if not bas
-00029370: 655f 7061 7468 2065 6c73 6520 5061 7468  e_path else Path
-00029380: 2862 6173 655f 7061 7468 290a 0a20 2020  (base_path)..   
-00029390: 2020 2020 2023 2063 6f6c 756d 6e20 666f       # column fo
-000293a0: 726d 6174 0a20 2020 2020 2020 2063 6f6c  rmat.        col
-000293b0: 756d 6e73 203d 207b 303a 2022 7465 7874  umns = {0: "text
-000293c0: 222c 2031 3a20 226b 6579 776f 7264 227d  ", 1: "keyword"}
-000293d0: 0a0a 2020 2020 2020 2020 2320 7468 6973  ..        # this
-000293e0: 2064 6174 6173 6574 206e 616d 650a 2020   dataset name.  
-000293f0: 2020 2020 2020 6461 7461 7365 745f 6e61        dataset_na
-00029400: 6d65 203d 2073 656c 662e 5f5f 636c 6173  me = self.__clas
-00029410: 735f 5f2e 5f5f 6e61 6d65 5f5f 2e6c 6f77  s__.__name__.low
-00029420: 6572 2829 0a0a 2020 2020 2020 2020 6461  er()..        da
-00029430: 7461 5f66 6f6c 6465 7220 3d20 6261 7365  ta_folder = base
-00029440: 5f70 6174 6820 2f20 6461 7461 7365 745f  _path / dataset_
-00029450: 6e61 6d65 0a0a 2020 2020 2020 2020 7365  name..        se
-00029460: 6d65 7661 6c32 3031 305f 7061 7468 203d  meval2010_path =
-00029470: 2022 6874 7470 733a 2f2f 7261 772e 6769   "https://raw.gi
-00029480: 7468 7562 7573 6572 636f 6e74 656e 742e  thubusercontent.
-00029490: 636f 6d2f 6d69 6461 732d 7265 7365 6172  com/midas-resear
-000294a0: 6368 2f6b 6579 7068 7261 7365 2d65 7874  ch/keyphrase-ext
-000294b0: 7261 6374 696f 6e2d 6173 2d73 6571 7565  raction-as-seque
-000294c0: 6e63 652d 6c61 6265 6c69 6e67 2d64 6174  nce-labeling-dat
-000294d0: 612f 6d61 7374 6572 2f70 726f 6365 7373  a/master/process
-000294e0: 6564 5f73 656d 6576 616c 2d32 3031 3022  ed_semeval-2010"
-000294f0: 0a20 2020 2020 2020 2063 6163 6865 645f  .        cached_
-00029500: 7061 7468 2866 227b 7365 6d65 7661 6c32  path(f"{semeval2
-00029510: 3031 305f 7061 7468 7d2f 7472 6169 6e2e  010_path}/train.
-00029520: 7478 7422 2c20 5061 7468 2822 6461 7461  txt", Path("data
-00029530: 7365 7473 2229 202f 2064 6174 6173 6574  sets") / dataset
-00029540: 5f6e 616d 6529 0a20 2020 2020 2020 2063  _name).        c
-00029550: 6163 6865 645f 7061 7468 2866 227b 7365  ached_path(f"{se
-00029560: 6d65 7661 6c32 3031 305f 7061 7468 7d2f  meval2010_path}/
-00029570: 7465 7374 2e74 7874 222c 2050 6174 6828  test.txt", Path(
-00029580: 2264 6174 6173 6574 7322 2920 2f20 6461  "datasets") / da
-00029590: 7461 7365 745f 6e61 6d65 290a 0a20 2020  taset_name)..   
-000295a0: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
-000295b0: 6e69 745f 5f28 0a20 2020 2020 2020 2020  nit__(.         
-000295c0: 2020 2064 6174 615f 666f 6c64 6572 2c0a     data_folder,.
-000295d0: 2020 2020 2020 2020 2020 2020 636f 6c75              colu
-000295e0: 6d6e 732c 0a20 2020 2020 2020 2020 2020  mns,.           
-000295f0: 2069 6e5f 6d65 6d6f 7279 3d69 6e5f 6d65   in_memory=in_me
-00029600: 6d6f 7279 2c0a 2020 2020 2020 2020 2020  mory,.          
-00029610: 2020 2a2a 636f 7270 7573 6172 6773 2c0a    **corpusargs,.
-00029620: 2020 2020 2020 2020 290a 0a0a 636c 6173          )...clas
-00029630: 7320 5550 5f43 4849 4e45 5345 2843 6f6c  s UP_CHINESE(Col
-00029640: 756d 6e43 6f72 7075 7329 3a0a 2020 2020  umnCorpus):.    
-00029650: 6465 6620 5f5f 696e 6974 5f5f 280a 2020  def __init__(.  
-00029660: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
-00029670: 2020 2020 6261 7365 5f70 6174 683a 204f      base_path: O
-00029680: 7074 696f 6e61 6c5b 556e 696f 6e5b 7374  ptional[Union[st
-00029690: 722c 2050 6174 685d 5d20 3d20 4e6f 6e65  r, Path]] = None
-000296a0: 2c0a 2020 2020 2020 2020 696e 5f6d 656d  ,.        in_mem
-000296b0: 6f72 793a 2062 6f6f 6c20 3d20 5472 7565  ory: bool = True
-000296c0: 2c0a 2020 2020 2020 2020 646f 6375 6d65  ,.        docume
-000296d0: 6e74 5f61 735f 7365 7175 656e 6365 3a20  nt_as_sequence: 
-000296e0: 626f 6f6c 203d 2046 616c 7365 2c0a 2020  bool = False,.  
-000296f0: 2020 2020 2020 2a2a 636f 7270 7573 6172        **corpusar
-00029700: 6773 2c0a 2020 2020 2920 2d3e 204e 6f6e  gs,.    ) -> Non
-00029710: 653a 0a20 2020 2020 2020 2022 2222 496e  e:.        """In
-00029720: 6974 6961 6c69 7a65 2074 6865 2043 6869  itialize the Chi
-00029730: 6e65 7365 2064 6174 6173 6574 2066 726f  nese dataset fro
-00029740: 6d20 7468 6520 556e 6976 6572 7361 6c20  m the Universal 
-00029750: 5072 6f70 6f73 6974 696f 6e73 2042 616e  Propositions Ban
-00029760: 6b2e 0a0a 2020 2020 2020 2020 5468 6520  k...        The 
-00029770: 6461 7461 7365 7420 6973 2064 6f77 6e6c  dataset is downl
-00029780: 6f61 6465 6420 6672 6f6d 2020 6874 7470  oaded from  http
-00029790: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f53  s://github.com/S
-000297a0: 7973 7465 6d2d 542f 556e 6976 6572 7361  ystem-T/Universa
-000297b0: 6c50 726f 706f 7369 7469 6f6e 730a 0a20  lPropositions.. 
-000297c0: 2020 2020 2020 2041 7267 733a 0a20 2020         Args:.   
-000297d0: 2020 2020 2020 2020 2062 6173 655f 7061           base_pa
-000297e0: 7468 3a20 4465 6661 756c 7420 6973 204e  th: Default is N
-000297f0: 6f6e 652c 206d 6561 6e69 6e67 2074 6861  one, meaning tha
-00029800: 7420 636f 7270 7573 2067 6574 7320 6175  t corpus gets au
-00029810: 746f 2d64 6f77 6e6c 6f61 6465 6420 616e  to-downloaded an
-00029820: 6420 6c6f 6164 6564 2e20 596f 7520 6361  d loaded. You ca
-00029830: 6e20 6f76 6572 7269 6465 2074 6869 7320  n override this 
-00029840: 746f 2070 6f69 6e74 2074 6f20 6120 6469  to point to a di
-00029850: 6666 6572 656e 7420 666f 6c64 6572 2062  fferent folder b
-00029860: 7574 2074 7970 6963 616c 6c79 2074 6869  ut typically thi
-00029870: 7320 7368 6f75 6c64 206e 6f74 2062 6520  s should not be 
-00029880: 6e65 6365 7373 6172 792e 0a20 2020 2020  necessary..     
-00029890: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
-000298a0: 3a20 4966 2054 7275 652c 206b 6565 7073  : If True, keeps
-000298b0: 2064 6174 6173 6574 2069 6e20 6d65 6d6f   dataset in memo
-000298c0: 7279 2067 6976 696e 6720 7370 6565 6475  ry giving speedu
-000298d0: 7073 2069 6e20 7472 6169 6e69 6e67 2e0a  ps in training..
-000298e0: 2020 2020 2020 2020 2020 2020 646f 6375              docu
-000298f0: 6d65 6e74 5f61 735f 7365 7175 656e 6365  ment_as_sequence
-00029900: 3a20 4966 2054 7275 652c 2061 6c6c 2073  : If True, all s
-00029910: 656e 7465 6e63 6573 206f 6620 6120 646f  entences of a do
-00029920: 6375 6d65 6e74 2061 7265 2072 6561 6420  cument are read 
-00029930: 696e 746f 2061 2073 696e 676c 6520 5365  into a single Se
-00029940: 6e74 656e 6365 206f 626a 6563 740a 2020  ntence object.  
-00029950: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-00029960: 2020 6261 7365 5f70 6174 6820 3d20 6b6f    base_path = ko
-00029970: 6c69 6272 692e 6361 6368 655f 726f 6f74  libri.cache_root
-00029980: 202f 2022 6461 7461 7365 7473 2220 6966   / "datasets" if
-00029990: 206e 6f74 2062 6173 655f 7061 7468 2065   not base_path e
-000299a0: 6c73 6520 5061 7468 2862 6173 655f 7061  lse Path(base_pa
-000299b0: 7468 290a 0a20 2020 2020 2020 2023 2063  th)..        # c
-000299c0: 6f6c 756d 6e20 666f 726d 6174 0a20 2020  olumn format.   
-000299d0: 2020 2020 2063 6f6c 756d 6e73 203d 207b       columns = {
-000299e0: 313a 2022 7465 7874 222c 2039 3a20 2266  1: "text", 9: "f
-000299f0: 7261 6d65 227d 0a0a 2020 2020 2020 2020  rame"}..        
-00029a00: 2320 7468 6973 2064 6174 6173 6574 206e  # this dataset n
-00029a10: 616d 650a 2020 2020 2020 2020 6461 7461  ame.        data
-00029a20: 7365 745f 6e61 6d65 203d 2073 656c 662e  set_name = self.
-00029a30: 5f5f 636c 6173 735f 5f2e 5f5f 6e61 6d65  __class__.__name
-00029a40: 5f5f 2e6c 6f77 6572 2829 0a0a 2020 2020  __.lower()..    
-00029a50: 2020 2020 6461 7461 5f66 6f6c 6465 7220      data_folder 
-00029a60: 3d20 6261 7365 5f70 6174 6820 2f20 6461  = base_path / da
-00029a70: 7461 7365 745f 6e61 6d65 0a0a 2020 2020  taset_name..    
-00029a80: 2020 2020 2320 646f 776e 6c6f 6164 2064      # download d
-00029a90: 6174 6120 6966 206e 6563 6573 7361 7279  ata if necessary
-00029aa0: 0a20 2020 2020 2020 2075 705f 7a68 5f70  .        up_zh_p
-00029ab0: 6174 6820 3d20 2268 7474 7073 3a2f 2f72  ath = "https://r
-00029ac0: 6177 2e67 6974 6875 6275 7365 7263 6f6e  aw.githubusercon
-00029ad0: 7465 6e74 2e63 6f6d 2f53 7973 7465 6d2d  tent.com/System-
-00029ae0: 542f 556e 6976 6572 7361 6c50 726f 706f  T/UniversalPropo
-00029af0: 7369 7469 6f6e 732f 6d61 7374 6572 2f55  sitions/master/U
-00029b00: 505f 4368 696e 6573 652f 220a 2020 2020  P_Chinese/".    
-00029b10: 2020 2020 6361 6368 6564 5f70 6174 6828      cached_path(
-00029b20: 6622 7b75 705f 7a68 5f70 6174 687d 7a68  f"{up_zh_path}zh
-00029b30: 2d75 702d 7472 6169 6e2e 636f 6e6c 6c75  -up-train.conllu
-00029b40: 222c 2050 6174 6828 2264 6174 6173 6574  ", Path("dataset
-00029b50: 7322 2920 2f20 6461 7461 7365 745f 6e61  s") / dataset_na
-00029b60: 6d65 290a 2020 2020 2020 2020 6361 6368  me).        cach
-00029b70: 6564 5f70 6174 6828 6622 7b75 705f 7a68  ed_path(f"{up_zh
-00029b80: 5f70 6174 687d 7a68 2d75 702d 6465 762e  _path}zh-up-dev.
-00029b90: 636f 6e6c 6c75 222c 2050 6174 6828 2264  conllu", Path("d
-00029ba0: 6174 6173 6574 7322 2920 2f20 6461 7461  atasets") / data
-00029bb0: 7365 745f 6e61 6d65 290a 2020 2020 2020  set_name).      
-00029bc0: 2020 6361 6368 6564 5f70 6174 6828 6622    cached_path(f"
-00029bd0: 7b75 705f 7a68 5f70 6174 687d 7a68 2d75  {up_zh_path}zh-u
-00029be0: 702d 7465 7374 2e63 6f6e 6c6c 7522 2c20  p-test.conllu", 
-00029bf0: 5061 7468 2822 6461 7461 7365 7473 2229  Path("datasets")
-00029c00: 202f 2064 6174 6173 6574 5f6e 616d 6529   / dataset_name)
-00029c10: 0a0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
-00029c20: 292e 5f5f 696e 6974 5f5f 280a 2020 2020  ).__init__(.    
-00029c30: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
-00029c40: 6465 722c 0a20 2020 2020 2020 2020 2020  der,.           
-00029c50: 2063 6f6c 756d 6e73 2c0a 2020 2020 2020   columns,.      
-00029c60: 2020 2020 2020 656e 636f 6469 6e67 3d22        encoding="
-00029c70: 7574 662d 3822 2c0a 2020 2020 2020 2020  utf-8",.        
-00029c80: 2020 2020 7472 6169 6e5f 6669 6c65 3d22      train_file="
-00029c90: 7a68 2d75 702d 7472 6169 6e2e 636f 6e6c  zh-up-train.conl
-00029ca0: 6c75 222c 0a20 2020 2020 2020 2020 2020  lu",.           
-00029cb0: 2074 6573 745f 6669 6c65 3d22 7a68 2d75   test_file="zh-u
-00029cc0: 702d 7465 7374 2e63 6f6e 6c6c 7522 2c0a  p-test.conllu",.
-00029cd0: 2020 2020 2020 2020 2020 2020 6465 765f              dev_
-00029ce0: 6669 6c65 3d22 7a68 2d75 702d 6465 762e  file="zh-up-dev.
-00029cf0: 636f 6e6c 6c75 222c 0a20 2020 2020 2020  conllu",.       
-00029d00: 2020 2020 2069 6e5f 6d65 6d6f 7279 3d69       in_memory=i
-00029d10: 6e5f 6d65 6d6f 7279 2c0a 2020 2020 2020  n_memory,.      
-00029d20: 2020 2020 2020 646f 6375 6d65 6e74 5f73        document_s
-00029d30: 6570 6172 6174 6f72 5f74 6f6b 656e 3d4e  eparator_token=N
-00029d40: 6f6e 6520 6966 206e 6f74 2064 6f63 756d  one if not docum
-00029d50: 656e 745f 6173 5f73 6571 7565 6e63 6520  ent_as_sequence 
-00029d60: 656c 7365 2022 2d44 4f43 5354 4152 542d  else "-DOCSTART-
-00029d70: 222c 0a20 2020 2020 2020 2020 2020 2063  ",.            c
-00029d80: 6f6d 6d65 6e74 5f73 796d 626f 6c3d 2223  omment_symbol="#
-00029d90: 222c 0a20 2020 2020 2020 2020 2020 202a  ",.            *
-00029da0: 2a63 6f72 7075 7361 7267 732c 0a20 2020  *corpusargs,.   
-00029db0: 2020 2020 2029 0a0a 0a63 6c61 7373 2055       )...class U
-00029dc0: 505f 454e 474c 4953 4828 436f 6c75 6d6e  P_ENGLISH(Column
-00029dd0: 436f 7270 7573 293a 0a20 2020 2064 6566  Corpus):.    def
-00029de0: 205f 5f69 6e69 745f 5f28 0a20 2020 2020   __init__(.     
-00029df0: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
-00029e00: 2062 6173 655f 7061 7468 3a20 4f70 7469   base_path: Opti
-00029e10: 6f6e 616c 5b55 6e69 6f6e 5b73 7472 2c20  onal[Union[str, 
-00029e20: 5061 7468 5d5d 203d 204e 6f6e 652c 0a20  Path]] = None,. 
-00029e30: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
-00029e40: 3a20 626f 6f6c 203d 2054 7275 652c 0a20  : bool = True,. 
-00029e50: 2020 2020 2020 2064 6f63 756d 656e 745f         document_
-00029e60: 6173 5f73 6571 7565 6e63 653a 2062 6f6f  as_sequence: boo
-00029e70: 6c20 3d20 4661 6c73 652c 0a20 2020 2020  l = False,.     
-00029e80: 2020 202a 2a63 6f72 7075 7361 7267 732c     **corpusargs,
-00029e90: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
-00029ea0: 2020 2020 2020 2020 2222 2249 6e69 7469          """Initi
-00029eb0: 616c 697a 6520 7468 6520 456e 676c 6973  alize the Englis
-00029ec0: 6820 6461 7461 7365 7420 6672 6f6d 2074  h dataset from t
-00029ed0: 6865 2055 6e69 7665 7273 616c 2050 726f  he Universal Pro
-00029ee0: 706f 7369 7469 6f6e 7320 4261 6e6b 2e0a  positions Bank..
-00029ef0: 0a20 2020 2020 2020 2054 6865 2064 6174  .        The dat
-00029f00: 6173 6574 2069 7320 646f 776e 6c6f 6164  aset is download
-00029f10: 6564 2066 726f 6d20 2068 7474 7073 3a2f  ed from  https:/
-00029f20: 2f67 6974 6875 622e 636f 6d2f 5379 7374  /github.com/Syst
-00029f30: 656d 2d54 2f55 6e69 7665 7273 616c 5072  em-T/UniversalPr
-00029f40: 6f70 6f73 6974 696f 6e73 0a0a 2020 2020  opositions..    
-00029f50: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
-00029f60: 2020 2020 2020 6261 7365 5f70 6174 683a        base_path:
-00029f70: 2044 6566 6175 6c74 2069 7320 4e6f 6e65   Default is None
-00029f80: 2c20 6d65 616e 696e 6720 7468 6174 2063  , meaning that c
-00029f90: 6f72 7075 7320 6765 7473 2061 7574 6f2d  orpus gets auto-
-00029fa0: 646f 776e 6c6f 6164 6564 2061 6e64 206c  downloaded and l
-00029fb0: 6f61 6465 642e 2059 6f75 2063 616e 206f  oaded. You can o
-00029fc0: 7665 7272 6964 6520 7468 6973 2074 6f20  verride this to 
-00029fd0: 706f 696e 7420 746f 2061 2064 6966 6665  point to a diffe
-00029fe0: 7265 6e74 2066 6f6c 6465 7220 6275 7420  rent folder but 
-00029ff0: 7479 7069 6361 6c6c 7920 7468 6973 2073  typically this s
-0002a000: 686f 756c 6420 6e6f 7420 6265 206e 6563  hould not be nec
-0002a010: 6573 7361 7279 2e0a 2020 2020 2020 2020  essary..        
-0002a020: 2020 2020 696e 5f6d 656d 6f72 793a 2049      in_memory: I
-0002a030: 6620 5472 7565 2c20 6b65 6570 7320 6461  f True, keeps da
-0002a040: 7461 7365 7420 696e 206d 656d 6f72 7920  taset in memory 
-0002a050: 6769 7669 6e67 2073 7065 6564 7570 7320  giving speedups 
-0002a060: 696e 2074 7261 696e 696e 672e 0a20 2020  in training..   
-0002a070: 2020 2020 2020 2020 2064 6f63 756d 656e           documen
-0002a080: 745f 6173 5f73 6571 7565 6e63 653a 2049  t_as_sequence: I
-0002a090: 6620 5472 7565 2c20 616c 6c20 7365 6e74  f True, all sent
-0002a0a0: 656e 6365 7320 6f66 2061 2064 6f63 756d  ences of a docum
-0002a0b0: 656e 7420 6172 6520 7265 6164 2069 6e74  ent are read int
-0002a0c0: 6f20 6120 7369 6e67 6c65 2053 656e 7465  o a single Sente
-0002a0d0: 6e63 6520 6f62 6a65 6374 0a20 2020 2020  nce object.     
-0002a0e0: 2020 2022 2222 0a20 2020 2020 2020 2062     """.        b
-0002a0f0: 6173 655f 7061 7468 203d 206b 6f6c 6962  ase_path = kolib
-0002a100: 7269 2e63 6163 6865 5f72 6f6f 7420 2f20  ri.cache_root / 
-0002a110: 2264 6174 6173 6574 7322 2069 6620 6e6f  "datasets" if no
-0002a120: 7420 6261 7365 5f70 6174 6820 656c 7365  t base_path else
-0002a130: 2050 6174 6828 6261 7365 5f70 6174 6829   Path(base_path)
-0002a140: 0a0a 2020 2020 2020 2020 2320 636f 6c75  ..        # colu
-0002a150: 6d6e 2066 6f72 6d61 740a 2020 2020 2020  mn format.      
-0002a160: 2020 636f 6c75 6d6e 7320 3d20 7b31 3a20    columns = {1: 
-0002a170: 2274 6578 7422 2c20 3130 3a20 2266 7261  "text", 10: "fra
-0002a180: 6d65 227d 0a0a 2020 2020 2020 2020 2320  me"}..        # 
-0002a190: 7468 6973 2064 6174 6173 6574 206e 616d  this dataset nam
-0002a1a0: 650a 2020 2020 2020 2020 6461 7461 7365  e.        datase
-0002a1b0: 745f 6e61 6d65 203d 2073 656c 662e 5f5f  t_name = self.__
-0002a1c0: 636c 6173 735f 5f2e 5f5f 6e61 6d65 5f5f  class__.__name__
-0002a1d0: 2e6c 6f77 6572 2829 0a0a 2020 2020 2020  .lower()..      
-0002a1e0: 2020 6461 7461 5f66 6f6c 6465 7220 3d20    data_folder = 
-0002a1f0: 6261 7365 5f70 6174 6820 2f20 6461 7461  base_path / data
-0002a200: 7365 745f 6e61 6d65 0a0a 2020 2020 2020  set_name..      
-0002a210: 2020 2320 646f 776e 6c6f 6164 2064 6174    # download dat
-0002a220: 6120 6966 206e 6563 6573 7361 7279 0a20  a if necessary. 
-0002a230: 2020 2020 2020 2075 705f 656e 5f70 6174         up_en_pat
-0002a240: 6820 3d20 2268 7474 7073 3a2f 2f72 6177  h = "https://raw
-0002a250: 2e67 6974 6875 6275 7365 7263 6f6e 7465  .githubuserconte
-0002a260: 6e74 2e63 6f6d 2f53 7973 7465 6d2d 542f  nt.com/System-T/
-0002a270: 556e 6976 6572 7361 6c50 726f 706f 7369  UniversalProposi
-0002a280: 7469 6f6e 732f 6d61 7374 6572 2f55 505f  tions/master/UP_
-0002a290: 456e 676c 6973 682d 4557 542f 220a 2020  English-EWT/".  
-0002a2a0: 2020 2020 2020 6361 6368 6564 5f70 6174        cached_pat
-0002a2b0: 6828 6622 7b75 705f 656e 5f70 6174 687d  h(f"{up_en_path}
-0002a2c0: 656e 5f65 7774 2d75 702d 7472 6169 6e2e  en_ewt-up-train.
-0002a2d0: 636f 6e6c 6c75 222c 2050 6174 6828 2264  conllu", Path("d
-0002a2e0: 6174 6173 6574 7322 2920 2f20 6461 7461  atasets") / data
-0002a2f0: 7365 745f 6e61 6d65 290a 2020 2020 2020  set_name).      
-0002a300: 2020 6361 6368 6564 5f70 6174 6828 6622    cached_path(f"
-0002a310: 7b75 705f 656e 5f70 6174 687d 656e 5f65  {up_en_path}en_e
-0002a320: 7774 2d75 702d 6465 762e 636f 6e6c 6c75  wt-up-dev.conllu
-0002a330: 222c 2050 6174 6828 2264 6174 6173 6574  ", Path("dataset
-0002a340: 7322 2920 2f20 6461 7461 7365 745f 6e61  s") / dataset_na
-0002a350: 6d65 290a 2020 2020 2020 2020 6361 6368  me).        cach
-0002a360: 6564 5f70 6174 6828 6622 7b75 705f 656e  ed_path(f"{up_en
-0002a370: 5f70 6174 687d 656e 5f65 7774 2d75 702d  _path}en_ewt-up-
-0002a380: 7465 7374 2e63 6f6e 6c6c 7522 2c20 5061  test.conllu", Pa
-0002a390: 7468 2822 6461 7461 7365 7473 2229 202f  th("datasets") /
-0002a3a0: 2064 6174 6173 6574 5f6e 616d 6529 0a0a   dataset_name)..
-0002a3b0: 2020 2020 2020 2020 7375 7065 7228 292e          super().
-0002a3c0: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
-0002a3d0: 2020 2020 2020 6461 7461 5f66 6f6c 6465        data_folde
-0002a3e0: 722c 0a20 2020 2020 2020 2020 2020 2063  r,.            c
-0002a3f0: 6f6c 756d 6e73 2c0a 2020 2020 2020 2020  olumns,.        
-0002a400: 2020 2020 656e 636f 6469 6e67 3d22 7574      encoding="ut
-0002a410: 662d 3822 2c0a 2020 2020 2020 2020 2020  f-8",.          
-0002a420: 2020 7472 6169 6e5f 6669 6c65 3d22 656e    train_file="en
-0002a430: 5f65 7774 2d75 702d 7472 6169 6e2e 636f  _ewt-up-train.co
-0002a440: 6e6c 6c75 222c 0a20 2020 2020 2020 2020  nllu",.         
-0002a450: 2020 2074 6573 745f 6669 6c65 3d22 656e     test_file="en
-0002a460: 5f65 7774 2d75 702d 7465 7374 2e63 6f6e  _ewt-up-test.con
-0002a470: 6c6c 7522 2c0a 2020 2020 2020 2020 2020  llu",.          
-0002a480: 2020 6465 765f 6669 6c65 3d22 656e 5f65    dev_file="en_e
-0002a490: 7774 2d75 702d 6465 762e 636f 6e6c 6c75  wt-up-dev.conllu
-0002a4a0: 222c 0a20 2020 2020 2020 2020 2020 2069  ",.            i
-0002a4b0: 6e5f 6d65 6d6f 7279 3d69 6e5f 6d65 6d6f  n_memory=in_memo
-0002a4c0: 7279 2c0a 2020 2020 2020 2020 2020 2020  ry,.            
-0002a4d0: 646f 6375 6d65 6e74 5f73 6570 6172 6174  document_separat
-0002a4e0: 6f72 5f74 6f6b 656e 3d4e 6f6e 6520 6966  or_token=None if
-0002a4f0: 206e 6f74 2064 6f63 756d 656e 745f 6173   not document_as
-0002a500: 5f73 6571 7565 6e63 6520 656c 7365 2022  _sequence else "
-0002a510: 2d44 4f43 5354 4152 542d 222c 0a20 2020  -DOCSTART-",.   
-0002a520: 2020 2020 2020 2020 2063 6f6d 6d65 6e74           comment
-0002a530: 5f73 796d 626f 6c3d 2223 222c 0a20 2020  _symbol="#",.   
-0002a540: 2020 2020 2020 2020 206c 6162 656c 5f6e           label_n
-0002a550: 616d 655f 6d61 703d 7b22 5f22 3a20 224f  ame_map={"_": "O
-0002a560: 227d 2c0a 2020 2020 2020 2020 2020 2020  "},.            
-0002a570: 2a2a 636f 7270 7573 6172 6773 2c0a 2020  **corpusargs,.  
-0002a580: 2020 2020 2020 290a 0a0a 636c 6173 7320        )...class 
-0002a590: 5550 5f46 5245 4e43 4828 436f 6c75 6d6e  UP_FRENCH(Column
-0002a5a0: 436f 7270 7573 293a 0a20 2020 2064 6566  Corpus):.    def
-0002a5b0: 205f 5f69 6e69 745f 5f28 0a20 2020 2020   __init__(.     
-0002a5c0: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
-0002a5d0: 2062 6173 655f 7061 7468 3a20 4f70 7469   base_path: Opti
-0002a5e0: 6f6e 616c 5b55 6e69 6f6e 5b73 7472 2c20  onal[Union[str, 
-0002a5f0: 5061 7468 5d5d 203d 204e 6f6e 652c 0a20  Path]] = None,. 
-0002a600: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
-0002a610: 3a20 626f 6f6c 203d 2054 7275 652c 0a20  : bool = True,. 
-0002a620: 2020 2020 2020 2064 6f63 756d 656e 745f         document_
-0002a630: 6173 5f73 6571 7565 6e63 653a 2062 6f6f  as_sequence: boo
-0002a640: 6c20 3d20 4661 6c73 652c 0a20 2020 2020  l = False,.     
-0002a650: 2020 202a 2a63 6f72 7075 7361 7267 732c     **corpusargs,
-0002a660: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
-0002a670: 2020 2020 2020 2020 2222 2249 6e69 7469          """Initi
-0002a680: 616c 697a 6520 7468 6520 4672 656e 6368  alize the French
-0002a690: 2064 6174 6173 6574 2066 726f 6d20 7468   dataset from th
-0002a6a0: 6520 556e 6976 6572 7361 6c20 5072 6f70  e Universal Prop
-0002a6b0: 6f73 6974 696f 6e73 2042 616e 6b2e 0a0a  ositions Bank...
-0002a6c0: 2020 2020 2020 2020 5468 6520 6461 7461          The data
-0002a6d0: 7365 7420 6973 2064 6f77 6e6c 6f61 6465  set is downloade
-0002a6e0: 6420 6672 6f6d 2020 6874 7470 733a 2f2f  d from  https://
-0002a6f0: 6769 7468 7562 2e63 6f6d 2f53 7973 7465  github.com/Syste
-0002a700: 6d2d 542f 556e 6976 6572 7361 6c50 726f  m-T/UniversalPro
-0002a710: 706f 7369 7469 6f6e 730a 0a20 2020 2020  positions..     
-0002a720: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
-0002a730: 2020 2020 2062 6173 655f 7061 7468 3a20       base_path: 
-0002a740: 4465 6661 756c 7420 6973 204e 6f6e 652c  Default is None,
-0002a750: 206d 6561 6e69 6e67 2074 6861 7420 636f   meaning that co
-0002a760: 7270 7573 2067 6574 7320 6175 746f 2d64  rpus gets auto-d
-0002a770: 6f77 6e6c 6f61 6465 6420 616e 6420 6c6f  ownloaded and lo
-0002a780: 6164 6564 2e20 596f 7520 6361 6e20 6f76  aded. You can ov
-0002a790: 6572 7269 6465 2074 6869 7320 746f 2070  erride this to p
-0002a7a0: 6f69 6e74 2074 6f20 6120 6469 6666 6572  oint to a differ
-0002a7b0: 656e 7420 666f 6c64 6572 2062 7574 2074  ent folder but t
-0002a7c0: 7970 6963 616c 6c79 2074 6869 7320 7368  ypically this sh
-0002a7d0: 6f75 6c64 206e 6f74 2062 6520 6e65 6365  ould not be nece
-0002a7e0: 7373 6172 792e 0a20 2020 2020 2020 2020  ssary..         
-0002a7f0: 2020 2069 6e5f 6d65 6d6f 7279 3a20 4966     in_memory: If
-0002a800: 2054 7275 652c 206b 6565 7073 2064 6174   True, keeps dat
-0002a810: 6173 6574 2069 6e20 6d65 6d6f 7279 2067  aset in memory g
-0002a820: 6976 696e 6720 7370 6565 6475 7073 2069  iving speedups i
-0002a830: 6e20 7472 6169 6e69 6e67 2e0a 2020 2020  n training..    
-0002a840: 2020 2020 2020 2020 646f 6375 6d65 6e74          document
-0002a850: 5f61 735f 7365 7175 656e 6365 3a20 4966  _as_sequence: If
-0002a860: 2054 7275 652c 2061 6c6c 2073 656e 7465   True, all sente
-0002a870: 6e63 6573 206f 6620 6120 646f 6375 6d65  nces of a docume
-0002a880: 6e74 2061 7265 2072 6561 6420 696e 746f  nt are read into
-0002a890: 2061 2073 696e 676c 6520 5365 6e74 656e   a single Senten
-0002a8a0: 6365 206f 626a 6563 740a 2020 2020 2020  ce object.      
-0002a8b0: 2020 2222 220a 2020 2020 2020 2020 6261    """.        ba
-0002a8c0: 7365 5f70 6174 6820 3d20 6b6f 6c69 6272  se_path = kolibr
-0002a8d0: 692e 6361 6368 655f 726f 6f74 202f 2022  i.cache_root / "
-0002a8e0: 6461 7461 7365 7473 2220 6966 206e 6f74  datasets" if not
-0002a8f0: 2062 6173 655f 7061 7468 2065 6c73 6520   base_path else 
-0002a900: 5061 7468 2862 6173 655f 7061 7468 290a  Path(base_path).
-0002a910: 0a20 2020 2020 2020 2023 2063 6f6c 756d  .        # colum
-0002a920: 6e20 666f 726d 6174 0a20 2020 2020 2020  n format.       
-0002a930: 2063 6f6c 756d 6e73 203d 207b 313a 2022   columns = {1: "
-0002a940: 7465 7874 222c 2039 3a20 2266 7261 6d65  text", 9: "frame
-0002a950: 227d 0a0a 2020 2020 2020 2020 2320 7468  "}..        # th
-0002a960: 6973 2064 6174 6173 6574 206e 616d 650a  is dataset name.
-0002a970: 2020 2020 2020 2020 6461 7461 7365 745f          dataset_
-0002a980: 6e61 6d65 203d 2073 656c 662e 5f5f 636c  name = self.__cl
-0002a990: 6173 735f 5f2e 5f5f 6e61 6d65 5f5f 2e6c  ass__.__name__.l
-0002a9a0: 6f77 6572 2829 0a0a 2020 2020 2020 2020  ower()..        
-0002a9b0: 6461 7461 5f66 6f6c 6465 7220 3d20 6261  data_folder = ba
-0002a9c0: 7365 5f70 6174 6820 2f20 6461 7461 7365  se_path / datase
-0002a9d0: 745f 6e61 6d65 0a0a 2020 2020 2020 2020  t_name..        
-0002a9e0: 2320 646f 776e 6c6f 6164 2064 6174 6120  # download data 
-0002a9f0: 6966 206e 6563 6573 7361 7279 0a20 2020  if necessary.   
-0002aa00: 2020 2020 2075 705f 6672 5f70 6174 6820       up_fr_path 
-0002aa10: 3d20 2268 7474 7073 3a2f 2f72 6177 2e67  = "https://raw.g
-0002aa20: 6974 6875 6275 7365 7263 6f6e 7465 6e74  ithubusercontent
-0002aa30: 2e63 6f6d 2f53 7973 7465 6d2d 542f 556e  .com/System-T/Un
-0002aa40: 6976 6572 7361 6c50 726f 706f 7369 7469  iversalPropositi
-0002aa50: 6f6e 732f 6d61 7374 6572 2f55 505f 4672  ons/master/UP_Fr
-0002aa60: 656e 6368 2f22 0a20 2020 2020 2020 2063  ench/".        c
-0002aa70: 6163 6865 645f 7061 7468 2866 227b 7570  ached_path(f"{up
-0002aa80: 5f66 725f 7061 7468 7d66 722d 7570 2d74  _fr_path}fr-up-t
-0002aa90: 7261 696e 2e63 6f6e 6c6c 7522 2c20 5061  rain.conllu", Pa
-0002aaa0: 7468 2822 6461 7461 7365 7473 2229 202f  th("datasets") /
-0002aab0: 2064 6174 6173 6574 5f6e 616d 6529 0a20   dataset_name). 
-0002aac0: 2020 2020 2020 2063 6163 6865 645f 7061         cached_pa
-0002aad0: 7468 2866 227b 7570 5f66 725f 7061 7468  th(f"{up_fr_path
-0002aae0: 7d66 722d 7570 2d64 6576 2e63 6f6e 6c6c  }fr-up-dev.conll
-0002aaf0: 7522 2c20 5061 7468 2822 6461 7461 7365  u", Path("datase
-0002ab00: 7473 2229 202f 2064 6174 6173 6574 5f6e  ts") / dataset_n
-0002ab10: 616d 6529 0a20 2020 2020 2020 2063 6163  ame).        cac
-0002ab20: 6865 645f 7061 7468 2866 227b 7570 5f66  hed_path(f"{up_f
-0002ab30: 725f 7061 7468 7d66 722d 7570 2d74 6573  r_path}fr-up-tes
-0002ab40: 742e 636f 6e6c 6c75 222c 2050 6174 6828  t.conllu", Path(
-0002ab50: 2264 6174 6173 6574 7322 2920 2f20 6461  "datasets") / da
-0002ab60: 7461 7365 745f 6e61 6d65 290a 0a20 2020  taset_name)..   
-0002ab70: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
-0002ab80: 6e69 745f 5f28 0a20 2020 2020 2020 2020  nit__(.         
-0002ab90: 2020 2064 6174 615f 666f 6c64 6572 2c0a     data_folder,.
-0002aba0: 2020 2020 2020 2020 2020 2020 636f 6c75              colu
-0002abb0: 6d6e 732c 0a20 2020 2020 2020 2020 2020  mns,.           
-0002abc0: 2065 6e63 6f64 696e 673d 2275 7466 2d38   encoding="utf-8
-0002abd0: 222c 0a20 2020 2020 2020 2020 2020 2074  ",.            t
-0002abe0: 7261 696e 5f66 696c 653d 2266 722d 7570  rain_file="fr-up
-0002abf0: 2d74 7261 696e 2e63 6f6e 6c6c 7522 2c0a  -train.conllu",.
-0002ac00: 2020 2020 2020 2020 2020 2020 7465 7374              test
-0002ac10: 5f66 696c 653d 2266 722d 7570 2d74 6573  _file="fr-up-tes
-0002ac20: 742e 636f 6e6c 6c75 222c 0a20 2020 2020  t.conllu",.     
-0002ac30: 2020 2020 2020 2064 6576 5f66 696c 653d         dev_file=
-0002ac40: 2266 722d 7570 2d64 6576 2e63 6f6e 6c6c  "fr-up-dev.conll
-0002ac50: 7522 2c0a 2020 2020 2020 2020 2020 2020  u",.            
-0002ac60: 696e 5f6d 656d 6f72 793d 696e 5f6d 656d  in_memory=in_mem
-0002ac70: 6f72 792c 0a20 2020 2020 2020 2020 2020  ory,.           
-0002ac80: 2064 6f63 756d 656e 745f 7365 7061 7261   document_separa
-0002ac90: 746f 725f 746f 6b65 6e3d 4e6f 6e65 2069  tor_token=None i
-0002aca0: 6620 6e6f 7420 646f 6375 6d65 6e74 5f61  f not document_a
-0002acb0: 735f 7365 7175 656e 6365 2065 6c73 6520  s_sequence else 
-0002acc0: 222d 444f 4353 5441 5254 2d22 2c0a 2020  "-DOCSTART-",.  
-0002acd0: 2020 2020 2020 2020 2020 636f 6d6d 656e            commen
-0002ace0: 745f 7379 6d62 6f6c 3d22 2322 2c0a 2020  t_symbol="#",.  
-0002acf0: 2020 2020 2020 2020 2020 2a2a 636f 7270            **corp
-0002ad00: 7573 6172 6773 2c0a 2020 2020 2020 2020  usargs,.        
-0002ad10: 290a 0a0a 636c 6173 7320 5550 5f46 494e  )...class UP_FIN
-0002ad20: 4e49 5348 2843 6f6c 756d 6e43 6f72 7075  NISH(ColumnCorpu
-0002ad30: 7329 3a0a 2020 2020 6465 6620 5f5f 696e  s):.    def __in
-0002ad40: 6974 5f5f 280a 2020 2020 2020 2020 7365  it__(.        se
-0002ad50: 6c66 2c0a 2020 2020 2020 2020 6261 7365  lf,.        base
-0002ad60: 5f70 6174 683a 204f 7074 696f 6e61 6c5b  _path: Optional[
-0002ad70: 556e 696f 6e5b 7374 722c 2050 6174 685d  Union[str, Path]
-0002ad80: 5d20 3d20 4e6f 6e65 2c0a 2020 2020 2020  ] = None,.      
-0002ad90: 2020 696e 5f6d 656d 6f72 793a 2062 6f6f    in_memory: boo
-0002ada0: 6c20 3d20 5472 7565 2c0a 2020 2020 2020  l = True,.      
-0002adb0: 2020 646f 6375 6d65 6e74 5f61 735f 7365    document_as_se
-0002adc0: 7175 656e 6365 3a20 626f 6f6c 203d 2046  quence: bool = F
-0002add0: 616c 7365 2c0a 2020 2020 2020 2020 2a2a  alse,.        **
-0002ade0: 636f 7270 7573 6172 6773 2c0a 2020 2020  corpusargs,.    
-0002adf0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
-0002ae00: 2020 2022 2222 496e 6974 6961 6c69 7a65     """Initialize
-0002ae10: 2074 6865 2046 696e 6e69 7368 2064 6174   the Finnish dat
-0002ae20: 6173 6574 2066 726f 6d20 7468 6520 556e  aset from the Un
-0002ae30: 6976 6572 7361 6c20 5072 6f70 6f73 6974  iversal Proposit
-0002ae40: 696f 6e73 2042 616e 6b2e 0a0a 2020 2020  ions Bank...    
-0002ae50: 2020 2020 5468 6520 6461 7461 7365 7420      The dataset 
-0002ae60: 6973 2064 6f77 6e6c 6f61 6465 6420 6672  is downloaded fr
-0002ae70: 6f6d 2020 6874 7470 733a 2f2f 6769 7468  om  https://gith
-0002ae80: 7562 2e63 6f6d 2f53 7973 7465 6d2d 542f  ub.com/System-T/
-0002ae90: 556e 6976 6572 7361 6c50 726f 706f 7369  UniversalProposi
-0002aea0: 7469 6f6e 730a 0a20 2020 2020 2020 2041  tions..        A
-0002aeb0: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
-0002aec0: 2062 6173 655f 7061 7468 3a20 4465 6661   base_path: Defa
-0002aed0: 756c 7420 6973 204e 6f6e 652c 206d 6561  ult is None, mea
-0002aee0: 6e69 6e67 2074 6861 7420 636f 7270 7573  ning that corpus
-0002aef0: 2067 6574 7320 6175 746f 2d64 6f77 6e6c   gets auto-downl
-0002af00: 6f61 6465 6420 616e 6420 6c6f 6164 6564  oaded and loaded
-0002af10: 2e20 596f 7520 6361 6e20 6f76 6572 7269  . You can overri
-0002af20: 6465 2074 6869 7320 746f 2070 6f69 6e74  de this to point
-0002af30: 2074 6f20 6120 6469 6666 6572 656e 7420   to a different 
-0002af40: 666f 6c64 6572 2062 7574 2074 7970 6963  folder but typic
-0002af50: 616c 6c79 2074 6869 7320 7368 6f75 6c64  ally this should
-0002af60: 206e 6f74 2062 6520 6e65 6365 7373 6172   not be necessar
-0002af70: 792e 0a20 2020 2020 2020 2020 2020 2069  y..            i
-0002af80: 6e5f 6d65 6d6f 7279 3a20 4966 2054 7275  n_memory: If Tru
-0002af90: 652c 206b 6565 7073 2064 6174 6173 6574  e, keeps dataset
-0002afa0: 2069 6e20 6d65 6d6f 7279 2067 6976 696e   in memory givin
-0002afb0: 6720 7370 6565 6475 7073 2069 6e20 7472  g speedups in tr
-0002afc0: 6169 6e69 6e67 2e0a 2020 2020 2020 2020  aining..        
-0002afd0: 2020 2020 646f 6375 6d65 6e74 5f61 735f      document_as_
-0002afe0: 7365 7175 656e 6365 3a20 4966 2054 7275  sequence: If Tru
-0002aff0: 652c 2061 6c6c 2073 656e 7465 6e63 6573  e, all sentences
-0002b000: 206f 6620 6120 646f 6375 6d65 6e74 2061   of a document a
-0002b010: 7265 2072 6561 6420 696e 746f 2061 2073  re read into a s
-0002b020: 696e 676c 6520 5365 6e74 656e 6365 206f  ingle Sentence o
-0002b030: 626a 6563 740a 2020 2020 2020 2020 2222  bject.        ""
-0002b040: 220a 2020 2020 2020 2020 6261 7365 5f70  ".        base_p
-0002b050: 6174 6820 3d20 6b6f 6c69 6272 692e 6361  ath = kolibri.ca
-0002b060: 6368 655f 726f 6f74 202f 2022 6461 7461  che_root / "data
-0002b070: 7365 7473 2220 6966 206e 6f74 2062 6173  sets" if not bas
-0002b080: 655f 7061 7468 2065 6c73 6520 5061 7468  e_path else Path
-0002b090: 2862 6173 655f 7061 7468 290a 0a20 2020  (base_path)..   
-0002b0a0: 2020 2020 2023 2063 6f6c 756d 6e20 666f       # column fo
-0002b0b0: 726d 6174 0a20 2020 2020 2020 2063 6f6c  rmat.        col
-0002b0c0: 756d 6e73 203d 207b 313a 2022 7465 7874  umns = {1: "text
-0002b0d0: 222c 2039 3a20 2266 7261 6d65 227d 0a0a  ", 9: "frame"}..
-0002b0e0: 2020 2020 2020 2020 2320 7468 6973 2064          # this d
-0002b0f0: 6174 6173 6574 206e 616d 650a 2020 2020  ataset name.    
-0002b100: 2020 2020 6461 7461 7365 745f 6e61 6d65      dataset_name
-0002b110: 203d 2073 656c 662e 5f5f 636c 6173 735f   = self.__class_
-0002b120: 5f2e 5f5f 6e61 6d65 5f5f 2e6c 6f77 6572  _.__name__.lower
-0002b130: 2829 0a0a 2020 2020 2020 2020 6461 7461  ()..        data
-0002b140: 5f66 6f6c 6465 7220 3d20 6261 7365 5f70  _folder = base_p
-0002b150: 6174 6820 2f20 6461 7461 7365 745f 6e61  ath / dataset_na
-0002b160: 6d65 0a0a 2020 2020 2020 2020 2320 646f  me..        # do
-0002b170: 776e 6c6f 6164 2064 6174 6120 6966 206e  wnload data if n
-0002b180: 6563 6573 7361 7279 0a20 2020 2020 2020  ecessary.       
-0002b190: 2075 705f 6669 5f70 6174 6820 3d20 2268   up_fi_path = "h
-0002b1a0: 7474 7073 3a2f 2f72 6177 2e67 6974 6875  ttps://raw.githu
-0002b1b0: 6275 7365 7263 6f6e 7465 6e74 2e63 6f6d  busercontent.com
-0002b1c0: 2f53 7973 7465 6d2d 542f 556e 6976 6572  /System-T/Univer
-0002b1d0: 7361 6c50 726f 706f 7369 7469 6f6e 732f  salPropositions/
-0002b1e0: 6d61 7374 6572 2f55 505f 4669 6e6e 6973  master/UP_Finnis
-0002b1f0: 682f 220a 2020 2020 2020 2020 6361 6368  h/".        cach
-0002b200: 6564 5f70 6174 6828 6622 7b75 705f 6669  ed_path(f"{up_fi
-0002b210: 5f70 6174 687d 6669 2d75 702d 7472 6169  _path}fi-up-trai
-0002b220: 6e2e 636f 6e6c 6c75 222c 2050 6174 6828  n.conllu", Path(
-0002b230: 2264 6174 6173 6574 7322 2920 2f20 6461  "datasets") / da
-0002b240: 7461 7365 745f 6e61 6d65 290a 2020 2020  taset_name).    
-0002b250: 2020 2020 6361 6368 6564 5f70 6174 6828      cached_path(
-0002b260: 6622 7b75 705f 6669 5f70 6174 687d 6669  f"{up_fi_path}fi
-0002b270: 2d75 702d 6465 762e 636f 6e6c 6c75 222c  -up-dev.conllu",
-0002b280: 2050 6174 6828 2264 6174 6173 6574 7322   Path("datasets"
-0002b290: 2920 2f20 6461 7461 7365 745f 6e61 6d65  ) / dataset_name
-0002b2a0: 290a 2020 2020 2020 2020 6361 6368 6564  ).        cached
-0002b2b0: 5f70 6174 6828 6622 7b75 705f 6669 5f70  _path(f"{up_fi_p
-0002b2c0: 6174 687d 6669 2d75 702d 7465 7374 2e63  ath}fi-up-test.c
-0002b2d0: 6f6e 6c6c 7522 2c20 5061 7468 2822 6461  onllu", Path("da
-0002b2e0: 7461 7365 7473 2229 202f 2064 6174 6173  tasets") / datas
-0002b2f0: 6574 5f6e 616d 6529 0a0a 2020 2020 2020  et_name)..      
-0002b300: 2020 7375 7065 7228 292e 5f5f 696e 6974    super().__init
-0002b310: 5f5f 280a 2020 2020 2020 2020 2020 2020  __(.            
-0002b320: 6461 7461 5f66 6f6c 6465 722c 0a20 2020  data_folder,.   
-0002b330: 2020 2020 2020 2020 2063 6f6c 756d 6e73           columns
-0002b340: 2c0a 2020 2020 2020 2020 2020 2020 656e  ,.            en
-0002b350: 636f 6469 6e67 3d22 7574 662d 3822 2c0a  coding="utf-8",.
-0002b360: 2020 2020 2020 2020 2020 2020 7472 6169              trai
-0002b370: 6e5f 6669 6c65 3d22 6669 2d75 702d 7472  n_file="fi-up-tr
-0002b380: 6169 6e2e 636f 6e6c 6c75 222c 0a20 2020  ain.conllu",.   
-0002b390: 2020 2020 2020 2020 2074 6573 745f 6669           test_fi
-0002b3a0: 6c65 3d22 6669 2d75 702d 7465 7374 2e63  le="fi-up-test.c
-0002b3b0: 6f6e 6c6c 7522 2c0a 2020 2020 2020 2020  onllu",.        
-0002b3c0: 2020 2020 6465 765f 6669 6c65 3d22 6669      dev_file="fi
-0002b3d0: 2d75 702d 6465 762e 636f 6e6c 6c75 222c  -up-dev.conllu",
-0002b3e0: 0a20 2020 2020 2020 2020 2020 2069 6e5f  .            in_
-0002b3f0: 6d65 6d6f 7279 3d69 6e5f 6d65 6d6f 7279  memory=in_memory
-0002b400: 2c0a 2020 2020 2020 2020 2020 2020 646f  ,.            do
-0002b410: 6375 6d65 6e74 5f73 6570 6172 6174 6f72  cument_separator
-0002b420: 5f74 6f6b 656e 3d4e 6f6e 6520 6966 206e  _token=None if n
-0002b430: 6f74 2064 6f63 756d 656e 745f 6173 5f73  ot document_as_s
-0002b440: 6571 7565 6e63 6520 656c 7365 2022 2d44  equence else "-D
-0002b450: 4f43 5354 4152 542d 222c 0a20 2020 2020  OCSTART-",.     
-0002b460: 2020 2020 2020 2063 6f6d 6d65 6e74 5f73         comment_s
-0002b470: 796d 626f 6c3d 2223 222c 0a20 2020 2020  ymbol="#",.     
-0002b480: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
-0002b490: 7267 732c 0a20 2020 2020 2020 2029 0a0a  rgs,.        )..
-0002b4a0: 0a63 6c61 7373 2055 505f 4745 524d 414e  .class UP_GERMAN
-0002b4b0: 2843 6f6c 756d 6e43 6f72 7075 7329 3a0a  (ColumnCorpus):.
-0002b4c0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-0002b4d0: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
-0002b4e0: 2020 2020 2020 2020 6261 7365 5f70 6174          base_pat
-0002b4f0: 683a 204f 7074 696f 6e61 6c5b 556e 696f  h: Optional[Unio
-0002b500: 6e5b 7374 722c 2050 6174 685d 5d20 3d20  n[str, Path]] = 
-0002b510: 4e6f 6e65 2c0a 2020 2020 2020 2020 696e  None,.        in
-0002b520: 5f6d 656d 6f72 793a 2062 6f6f 6c20 3d20  _memory: bool = 
-0002b530: 5472 7565 2c0a 2020 2020 2020 2020 646f  True,.        do
-0002b540: 6375 6d65 6e74 5f61 735f 7365 7175 656e  cument_as_sequen
-0002b550: 6365 3a20 626f 6f6c 203d 2046 616c 7365  ce: bool = False
-0002b560: 2c0a 2020 2020 2020 2020 2a2a 636f 7270  ,.        **corp
-0002b570: 7573 6172 6773 2c0a 2020 2020 2920 2d3e  usargs,.    ) ->
-0002b580: 204e 6f6e 653a 0a20 2020 2020 2020 2022   None:.        "
-0002b590: 2222 496e 6974 6961 6c69 7a65 2074 6865  ""Initialize the
-0002b5a0: 2047 6572 6d61 6e20 6461 7461 7365 7420   German dataset 
-0002b5b0: 6672 6f6d 2074 6865 2055 6e69 7665 7273  from the Univers
-0002b5c0: 616c 2050 726f 706f 7369 7469 6f6e 7320  al Propositions 
-0002b5d0: 4261 6e6b 2e0a 0a20 2020 2020 2020 2054  Bank...        T
-0002b5e0: 6865 2064 6174 6173 6574 2069 7320 646f  he dataset is do
-0002b5f0: 776e 6c6f 6164 6564 2066 726f 6d20 2068  wnloaded from  h
-0002b600: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
-0002b610: 6d2f 5379 7374 656d 2d54 2f55 6e69 7665  m/System-T/Unive
-0002b620: 7273 616c 5072 6f70 6f73 6974 696f 6e73  rsalPropositions
-0002b630: 0a0a 2020 2020 2020 2020 4172 6773 3a0a  ..        Args:.
-0002b640: 2020 2020 2020 2020 2020 2020 6261 7365              base
-0002b650: 5f70 6174 683a 2044 6566 6175 6c74 2069  _path: Default i
-0002b660: 7320 4e6f 6e65 2c20 6d65 616e 696e 6720  s None, meaning 
-0002b670: 7468 6174 2063 6f72 7075 7320 6765 7473  that corpus gets
-0002b680: 2061 7574 6f2d 646f 776e 6c6f 6164 6564   auto-downloaded
-0002b690: 2061 6e64 206c 6f61 6465 642e 2059 6f75   and loaded. You
-0002b6a0: 2063 616e 206f 7665 7272 6964 6520 7468   can override th
-0002b6b0: 6973 2074 6f20 706f 696e 7420 746f 2061  is to point to a
-0002b6c0: 2064 6966 6665 7265 6e74 2066 6f6c 6465   different folde
-0002b6d0: 7220 6275 7420 7479 7069 6361 6c6c 7920  r but typically 
-0002b6e0: 7468 6973 2073 686f 756c 6420 6e6f 7420  this should not 
-0002b6f0: 6265 206e 6563 6573 7361 7279 2e0a 2020  be necessary..  
-0002b700: 2020 2020 2020 2020 2020 696e 5f6d 656d            in_mem
-0002b710: 6f72 793a 2049 6620 5472 7565 2c20 6b65  ory: If True, ke
-0002b720: 6570 7320 6461 7461 7365 7420 696e 206d  eps dataset in m
-0002b730: 656d 6f72 7920 6769 7669 6e67 2073 7065  emory giving spe
-0002b740: 6564 7570 7320 696e 2074 7261 696e 696e  edups in trainin
-0002b750: 672e 0a20 2020 2020 2020 2020 2020 2064  g..            d
-0002b760: 6f63 756d 656e 745f 6173 5f73 6571 7565  ocument_as_seque
-0002b770: 6e63 653a 2049 6620 5472 7565 2c20 616c  nce: If True, al
-0002b780: 6c20 7365 6e74 656e 6365 7320 6f66 2061  l sentences of a
-0002b790: 2064 6f63 756d 656e 7420 6172 6520 7265   document are re
-0002b7a0: 6164 2069 6e74 6f20 6120 7369 6e67 6c65  ad into a single
-0002b7b0: 2053 656e 7465 6e63 6520 6f62 6a65 6374   Sentence object
-0002b7c0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-0002b7d0: 2020 2020 2062 6173 655f 7061 7468 203d       base_path =
-0002b7e0: 206b 6f6c 6962 7269 2e63 6163 6865 5f72   kolibri.cache_r
-0002b7f0: 6f6f 7420 2f20 2264 6174 6173 6574 7322  oot / "datasets"
-0002b800: 2069 6620 6e6f 7420 6261 7365 5f70 6174   if not base_pat
-0002b810: 6820 656c 7365 2050 6174 6828 6261 7365  h else Path(base
-0002b820: 5f70 6174 6829 0a0a 2020 2020 2020 2020  _path)..        
-0002b830: 2320 636f 6c75 6d6e 2066 6f72 6d61 740a  # column format.
-0002b840: 2020 2020 2020 2020 636f 6c75 6d6e 7320          columns 
-0002b850: 3d20 7b31 3a20 2274 6578 7422 2c20 393a  = {1: "text", 9:
-0002b860: 2022 6672 616d 6522 7d0a 0a20 2020 2020   "frame"}..     
-0002b870: 2020 2023 2074 6869 7320 6461 7461 7365     # this datase
-0002b880: 7420 6e61 6d65 0a20 2020 2020 2020 2064  t name.        d
-0002b890: 6174 6173 6574 5f6e 616d 6520 3d20 7365  ataset_name = se
-0002b8a0: 6c66 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e  lf.__class__.__n
-0002b8b0: 616d 655f 5f2e 6c6f 7765 7228 290a 0a20  ame__.lower().. 
-0002b8c0: 2020 2020 2020 2064 6174 615f 666f 6c64         data_fold
-0002b8d0: 6572 203d 2062 6173 655f 7061 7468 202f  er = base_path /
-0002b8e0: 2064 6174 6173 6574 5f6e 616d 650a 0a20   dataset_name.. 
-0002b8f0: 2020 2020 2020 2023 2064 6f77 6e6c 6f61         # downloa
-0002b900: 6420 6461 7461 2069 6620 6e65 6365 7373  d data if necess
-0002b910: 6172 790a 2020 2020 2020 2020 7570 5f64  ary.        up_d
-0002b920: 655f 7061 7468 203d 2022 6874 7470 733a  e_path = "https:
-0002b930: 2f2f 7261 772e 6769 7468 7562 7573 6572  //raw.githubuser
-0002b940: 636f 6e74 656e 742e 636f 6d2f 5379 7374  content.com/Syst
-0002b950: 656d 2d54 2f55 6e69 7665 7273 616c 5072  em-T/UniversalPr
-0002b960: 6f70 6f73 6974 696f 6e73 2f6d 6173 7465  opositions/maste
-0002b970: 722f 5550 5f47 6572 6d61 6e2f 220a 2020  r/UP_German/".  
-0002b980: 2020 2020 2020 6361 6368 6564 5f70 6174        cached_pat
-0002b990: 6828 6622 7b75 705f 6465 5f70 6174 687d  h(f"{up_de_path}
-0002b9a0: 6465 2d75 702d 7472 6169 6e2e 636f 6e6c  de-up-train.conl
-0002b9b0: 6c75 222c 2050 6174 6828 2264 6174 6173  lu", Path("datas
-0002b9c0: 6574 7322 2920 2f20 6461 7461 7365 745f  ets") / dataset_
-0002b9d0: 6e61 6d65 290a 2020 2020 2020 2020 6361  name).        ca
-0002b9e0: 6368 6564 5f70 6174 6828 6622 7b75 705f  ched_path(f"{up_
-0002b9f0: 6465 5f70 6174 687d 6465 2d75 702d 6465  de_path}de-up-de
-0002ba00: 762e 636f 6e6c 6c75 222c 2050 6174 6828  v.conllu", Path(
-0002ba10: 2264 6174 6173 6574 7322 2920 2f20 6461  "datasets") / da
-0002ba20: 7461 7365 745f 6e61 6d65 290a 2020 2020  taset_name).    
-0002ba30: 2020 2020 6361 6368 6564 5f70 6174 6828      cached_path(
-0002ba40: 6622 7b75 705f 6465 5f70 6174 687d 6465  f"{up_de_path}de
-0002ba50: 2d75 702d 7465 7374 2e63 6f6e 6c6c 7522  -up-test.conllu"
-0002ba60: 2c20 5061 7468 2822 6461 7461 7365 7473  , Path("datasets
-0002ba70: 2229 202f 2064 6174 6173 6574 5f6e 616d  ") / dataset_nam
-0002ba80: 6529 0a0a 2020 2020 2020 2020 7375 7065  e)..        supe
-0002ba90: 7228 292e 5f5f 696e 6974 5f5f 280a 2020  r().__init__(.  
-0002baa0: 2020 2020 2020 2020 2020 6461 7461 5f66            data_f
-0002bab0: 6f6c 6465 722c 0a20 2020 2020 2020 2020  older,.         
-0002bac0: 2020 2063 6f6c 756d 6e73 2c0a 2020 2020     columns,.    
-0002bad0: 2020 2020 2020 2020 656e 636f 6469 6e67          encoding
-0002bae0: 3d22 7574 662d 3822 2c0a 2020 2020 2020  ="utf-8",.      
-0002baf0: 2020 2020 2020 7472 6169 6e5f 6669 6c65        train_file
-0002bb00: 3d22 6465 2d75 702d 7472 6169 6e2e 636f  ="de-up-train.co
-0002bb10: 6e6c 6c75 222c 0a20 2020 2020 2020 2020  nllu",.         
-0002bb20: 2020 2074 6573 745f 6669 6c65 3d22 6465     test_file="de
-0002bb30: 2d75 702d 7465 7374 2e63 6f6e 6c6c 7522  -up-test.conllu"
-0002bb40: 2c0a 2020 2020 2020 2020 2020 2020 6465  ,.            de
-0002bb50: 765f 6669 6c65 3d22 6465 2d75 702d 6465  v_file="de-up-de
-0002bb60: 762e 636f 6e6c 6c75 222c 0a20 2020 2020  v.conllu",.     
-0002bb70: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
-0002bb80: 3d69 6e5f 6d65 6d6f 7279 2c0a 2020 2020  =in_memory,.    
-0002bb90: 2020 2020 2020 2020 646f 6375 6d65 6e74          document
-0002bba0: 5f73 6570 6172 6174 6f72 5f74 6f6b 656e  _separator_token
-0002bbb0: 3d4e 6f6e 6520 6966 206e 6f74 2064 6f63  =None if not doc
-0002bbc0: 756d 656e 745f 6173 5f73 6571 7565 6e63  ument_as_sequenc
-0002bbd0: 6520 656c 7365 2022 2d44 4f43 5354 4152  e else "-DOCSTAR
-0002bbe0: 542d 222c 0a20 2020 2020 2020 2020 2020  T-",.           
-0002bbf0: 2063 6f6d 6d65 6e74 5f73 796d 626f 6c3d   comment_symbol=
-0002bc00: 2223 222c 0a20 2020 2020 2020 2020 2020  "#",.           
-0002bc10: 202a 2a63 6f72 7075 7361 7267 732c 0a20   **corpusargs,. 
-0002bc20: 2020 2020 2020 2029 0a0a 0a63 6c61 7373         )...class
-0002bc30: 2055 505f 4954 414c 4941 4e28 436f 6c75   UP_ITALIAN(Colu
-0002bc40: 6d6e 436f 7270 7573 293a 0a20 2020 2064  mnCorpus):.    d
-0002bc50: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
-0002bc60: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
-0002bc70: 2020 2062 6173 655f 7061 7468 3a20 4f70     base_path: Op
-0002bc80: 7469 6f6e 616c 5b55 6e69 6f6e 5b73 7472  tional[Union[str
-0002bc90: 2c20 5061 7468 5d5d 203d 204e 6f6e 652c  , Path]] = None,
-0002bca0: 0a20 2020 2020 2020 2069 6e5f 6d65 6d6f  .        in_memo
-0002bcb0: 7279 3a20 626f 6f6c 203d 2054 7275 652c  ry: bool = True,
-0002bcc0: 0a20 2020 2020 2020 2064 6f63 756d 656e  .        documen
-0002bcd0: 745f 6173 5f73 6571 7565 6e63 653a 2062  t_as_sequence: b
-0002bce0: 6f6f 6c20 3d20 4661 6c73 652c 0a20 2020  ool = False,.   
-0002bcf0: 2020 2020 202a 2a63 6f72 7075 7361 7267       **corpusarg
-0002bd00: 732c 0a20 2020 2029 202d 3e20 4e6f 6e65  s,.    ) -> None
-0002bd10: 3a0a 2020 2020 2020 2020 2222 2249 6e69  :.        """Ini
-0002bd20: 7469 616c 697a 6520 7468 6520 4974 616c  tialize the Ital
-0002bd30: 6961 6e20 6461 7461 7365 7420 6672 6f6d  ian dataset from
-0002bd40: 2074 6865 2055 6e69 7665 7273 616c 2050   the Universal P
-0002bd50: 726f 706f 7369 7469 6f6e 7320 4261 6e6b  ropositions Bank
-0002bd60: 2e0a 0a20 2020 2020 2020 2054 6865 2064  ...        The d
-0002bd70: 6174 6173 6574 2069 7320 646f 776e 6c6f  ataset is downlo
-0002bd80: 6164 6564 2066 726f 6d20 2068 7474 7073  aded from  https
-0002bd90: 3a2f 2f67 6974 6875 622e 636f 6d2f 5379  ://github.com/Sy
-0002bda0: 7374 656d 2d54 2f55 6e69 7665 7273 616c  stem-T/Universal
-0002bdb0: 5072 6f70 6f73 6974 696f 6e73 0a0a 2020  Propositions..  
-0002bdc0: 2020 2020 2020 4172 6773 3a0a 2020 2020        Args:.    
-0002bdd0: 2020 2020 2020 2020 6261 7365 5f70 6174          base_pat
-0002bde0: 683a 2044 6566 6175 6c74 2069 7320 4e6f  h: Default is No
-0002bdf0: 6e65 2c20 6d65 616e 696e 6720 7468 6174  ne, meaning that
-0002be00: 2063 6f72 7075 7320 6765 7473 2061 7574   corpus gets aut
-0002be10: 6f2d 646f 776e 6c6f 6164 6564 2061 6e64  o-downloaded and
-0002be20: 206c 6f61 6465 642e 2059 6f75 2063 616e   loaded. You can
-0002be30: 206f 7665 7272 6964 6520 7468 6973 2074   override this t
-0002be40: 6f20 706f 696e 7420 746f 2061 2064 6966  o point to a dif
-0002be50: 6665 7265 6e74 2066 6f6c 6465 7220 6275  ferent folder bu
-0002be60: 7420 7479 7069 6361 6c6c 7920 7468 6973  t typically this
-0002be70: 2073 686f 756c 6420 6e6f 7420 6265 206e   should not be n
-0002be80: 6563 6573 7361 7279 2e0a 2020 2020 2020  ecessary..      
-0002be90: 2020 2020 2020 696e 5f6d 656d 6f72 793a        in_memory:
-0002bea0: 2049 6620 5472 7565 2c20 6b65 6570 7320   If True, keeps 
-0002beb0: 6461 7461 7365 7420 696e 206d 656d 6f72  dataset in memor
-0002bec0: 7920 6769 7669 6e67 2073 7065 6564 7570  y giving speedup
-0002bed0: 7320 696e 2074 7261 696e 696e 672e 0a20  s in training.. 
-0002bee0: 2020 2020 2020 2020 2020 2064 6f63 756d             docum
-0002bef0: 656e 745f 6173 5f73 6571 7565 6e63 653a  ent_as_sequence:
-0002bf00: 2049 6620 5472 7565 2c20 616c 6c20 7365   If True, all se
-0002bf10: 6e74 656e 6365 7320 6f66 2061 2064 6f63  ntences of a doc
-0002bf20: 756d 656e 7420 6172 6520 7265 6164 2069  ument are read i
-0002bf30: 6e74 6f20 6120 7369 6e67 6c65 2053 656e  nto a single Sen
-0002bf40: 7465 6e63 6520 6f62 6a65 6374 0a20 2020  tence object.   
-0002bf50: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-0002bf60: 2062 6173 655f 7061 7468 203d 206b 6f6c   base_path = kol
-0002bf70: 6962 7269 2e63 6163 6865 5f72 6f6f 7420  ibri.cache_root 
-0002bf80: 2f20 2264 6174 6173 6574 7322 2069 6620  / "datasets" if 
-0002bf90: 6e6f 7420 6261 7365 5f70 6174 6820 656c  not base_path el
-0002bfa0: 7365 2050 6174 6828 6261 7365 5f70 6174  se Path(base_pat
-0002bfb0: 6829 0a0a 2020 2020 2020 2020 2320 636f  h)..        # co
-0002bfc0: 6c75 6d6e 2066 6f72 6d61 740a 2020 2020  lumn format.    
-0002bfd0: 2020 2020 636f 6c75 6d6e 7320 3d20 7b31      columns = {1
-0002bfe0: 3a20 2274 6578 7422 2c20 393a 2022 6672  : "text", 9: "fr
-0002bff0: 616d 6522 7d0a 0a20 2020 2020 2020 2023  ame"}..        #
-0002c000: 2074 6869 7320 6461 7461 7365 7420 6e61   this dataset na
-0002c010: 6d65 0a20 2020 2020 2020 2064 6174 6173  me.        datas
-0002c020: 6574 5f6e 616d 6520 3d20 7365 6c66 2e5f  et_name = self._
-0002c030: 5f63 6c61 7373 5f5f 2e5f 5f6e 616d 655f  _class__.__name_
-0002c040: 5f2e 6c6f 7765 7228 290a 0a20 2020 2020  _.lower()..     
-0002c050: 2020 2064 6174 615f 666f 6c64 6572 203d     data_folder =
-0002c060: 2062 6173 655f 7061 7468 202f 2064 6174   base_path / dat
-0002c070: 6173 6574 5f6e 616d 650a 0a20 2020 2020  aset_name..     
-0002c080: 2020 2023 2064 6f77 6e6c 6f61 6420 6461     # download da
-0002c090: 7461 2069 6620 6e65 6365 7373 6172 790a  ta if necessary.
-0002c0a0: 2020 2020 2020 2020 7570 5f69 745f 7061          up_it_pa
-0002c0b0: 7468 203d 2022 6874 7470 733a 2f2f 7261  th = "https://ra
-0002c0c0: 772e 6769 7468 7562 7573 6572 636f 6e74  w.githubusercont
-0002c0d0: 656e 742e 636f 6d2f 5379 7374 656d 2d54  ent.com/System-T
-0002c0e0: 2f55 6e69 7665 7273 616c 5072 6f70 6f73  /UniversalPropos
-0002c0f0: 6974 696f 6e73 2f6d 6173 7465 722f 5550  itions/master/UP
-0002c100: 5f49 7461 6c69 616e 2f22 0a20 2020 2020  _Italian/".     
-0002c110: 2020 2063 6163 6865 645f 7061 7468 2866     cached_path(f
-0002c120: 227b 7570 5f69 745f 7061 7468 7d69 742d  "{up_it_path}it-
-0002c130: 7570 2d74 7261 696e 2e63 6f6e 6c6c 7522  up-train.conllu"
-0002c140: 2c20 5061 7468 2822 6461 7461 7365 7473  , Path("datasets
-0002c150: 2229 202f 2064 6174 6173 6574 5f6e 616d  ") / dataset_nam
-0002c160: 6529 0a20 2020 2020 2020 2063 6163 6865  e).        cache
-0002c170: 645f 7061 7468 2866 227b 7570 5f69 745f  d_path(f"{up_it_
-0002c180: 7061 7468 7d69 742d 7570 2d64 6576 2e63  path}it-up-dev.c
-0002c190: 6f6e 6c6c 7522 2c20 5061 7468 2822 6461  onllu", Path("da
-0002c1a0: 7461 7365 7473 2229 202f 2064 6174 6173  tasets") / datas
-0002c1b0: 6574 5f6e 616d 6529 0a20 2020 2020 2020  et_name).       
-0002c1c0: 2063 6163 6865 645f 7061 7468 2866 227b   cached_path(f"{
-0002c1d0: 7570 5f69 745f 7061 7468 7d69 742d 7570  up_it_path}it-up
-0002c1e0: 2d74 6573 742e 636f 6e6c 6c75 222c 2050  -test.conllu", P
-0002c1f0: 6174 6828 2264 6174 6173 6574 7322 2920  ath("datasets") 
-0002c200: 2f20 6461 7461 7365 745f 6e61 6d65 290a  / dataset_name).
-0002c210: 0a20 2020 2020 2020 2073 7570 6572 2829  .        super()
-0002c220: 2e5f 5f69 6e69 745f 5f28 0a20 2020 2020  .__init__(.     
-0002c230: 2020 2020 2020 2064 6174 615f 666f 6c64         data_fold
-0002c240: 6572 2c0a 2020 2020 2020 2020 2020 2020  er,.            
-0002c250: 636f 6c75 6d6e 732c 0a20 2020 2020 2020  columns,.       
-0002c260: 2020 2020 2065 6e63 6f64 696e 673d 2275       encoding="u
-0002c270: 7466 2d38 222c 0a20 2020 2020 2020 2020  tf-8",.         
-0002c280: 2020 2074 7261 696e 5f66 696c 653d 2269     train_file="i
-0002c290: 742d 7570 2d74 7261 696e 2e63 6f6e 6c6c  t-up-train.conll
-0002c2a0: 7522 2c0a 2020 2020 2020 2020 2020 2020  u",.            
-0002c2b0: 7465 7374 5f66 696c 653d 2269 742d 7570  test_file="it-up
-0002c2c0: 2d74 6573 742e 636f 6e6c 6c75 222c 0a20  -test.conllu",. 
-0002c2d0: 2020 2020 2020 2020 2020 2064 6576 5f66             dev_f
-0002c2e0: 696c 653d 2269 742d 7570 2d64 6576 2e63  ile="it-up-dev.c
-0002c2f0: 6f6e 6c6c 7522 2c0a 2020 2020 2020 2020  onllu",.        
-0002c300: 2020 2020 696e 5f6d 656d 6f72 793d 696e      in_memory=in
-0002c310: 5f6d 656d 6f72 792c 0a20 2020 2020 2020  _memory,.       
-0002c320: 2020 2020 2064 6f63 756d 656e 745f 7365       document_se
-0002c330: 7061 7261 746f 725f 746f 6b65 6e3d 4e6f  parator_token=No
-0002c340: 6e65 2069 6620 6e6f 7420 646f 6375 6d65  ne if not docume
-0002c350: 6e74 5f61 735f 7365 7175 656e 6365 2065  nt_as_sequence e
-0002c360: 6c73 6520 222d 444f 4353 5441 5254 2d22  lse "-DOCSTART-"
-0002c370: 2c0a 2020 2020 2020 2020 2020 2020 636f  ,.            co
-0002c380: 6d6d 656e 745f 7379 6d62 6f6c 3d22 2322  mment_symbol="#"
-0002c390: 2c0a 2020 2020 2020 2020 2020 2020 2a2a  ,.            **
-0002c3a0: 636f 7270 7573 6172 6773 2c0a 2020 2020  corpusargs,.    
-0002c3b0: 2020 2020 290a 0a0a 636c 6173 7320 5550      )...class UP
-0002c3c0: 5f53 5041 4e49 5348 2843 6f6c 756d 6e43  _SPANISH(ColumnC
-0002c3d0: 6f72 7075 7329 3a0a 2020 2020 6465 6620  orpus):.    def 
-0002c3e0: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
-0002c3f0: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
-0002c400: 6261 7365 5f70 6174 683a 204f 7074 696f  base_path: Optio
-0002c410: 6e61 6c5b 556e 696f 6e5b 7374 722c 2050  nal[Union[str, P
-0002c420: 6174 685d 5d20 3d20 4e6f 6e65 2c0a 2020  ath]] = None,.  
-0002c430: 2020 2020 2020 696e 5f6d 656d 6f72 793a        in_memory:
-0002c440: 2062 6f6f 6c20 3d20 5472 7565 2c0a 2020   bool = True,.  
-0002c450: 2020 2020 2020 646f 6375 6d65 6e74 5f61        document_a
-0002c460: 735f 7365 7175 656e 6365 3a20 626f 6f6c  s_sequence: bool
-0002c470: 203d 2046 616c 7365 2c0a 2020 2020 2020   = False,.      
-0002c480: 2020 2a2a 636f 7270 7573 6172 6773 2c0a    **corpusargs,.
-0002c490: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
-0002c4a0: 2020 2020 2020 2022 2222 496e 6974 6961         """Initia
-0002c4b0: 6c69 7a65 2074 6865 2053 7061 6e69 7368  lize the Spanish
-0002c4c0: 2064 6174 6173 6574 2066 726f 6d20 7468   dataset from th
-0002c4d0: 6520 556e 6976 6572 7361 6c20 5072 6f70  e Universal Prop
-0002c4e0: 6f73 6974 696f 6e73 2042 616e 6b2e 0a0a  ositions Bank...
-0002c4f0: 2020 2020 2020 2020 5468 6520 6461 7461          The data
-0002c500: 7365 7420 6973 2064 6f77 6e6c 6f61 6465  set is downloade
-0002c510: 6420 6672 6f6d 2020 6874 7470 733a 2f2f  d from  https://
-0002c520: 6769 7468 7562 2e63 6f6d 2f53 7973 7465  github.com/Syste
-0002c530: 6d2d 542f 556e 6976 6572 7361 6c50 726f  m-T/UniversalPro
-0002c540: 706f 7369 7469 6f6e 730a 0a20 2020 2020  positions..     
-0002c550: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
-0002c560: 2020 2020 2062 6173 655f 7061 7468 3a20       base_path: 
-0002c570: 4465 6661 756c 7420 6973 204e 6f6e 652c  Default is None,
-0002c580: 206d 6561 6e69 6e67 2074 6861 7420 636f   meaning that co
-0002c590: 7270 7573 2067 6574 7320 6175 746f 2d64  rpus gets auto-d
-0002c5a0: 6f77 6e6c 6f61 6465 6420 616e 6420 6c6f  ownloaded and lo
-0002c5b0: 6164 6564 2e20 596f 7520 6361 6e20 6f76  aded. You can ov
-0002c5c0: 6572 7269 6465 2074 6869 7320 746f 2070  erride this to p
-0002c5d0: 6f69 6e74 2074 6f20 6120 6469 6666 6572  oint to a differ
-0002c5e0: 656e 7420 666f 6c64 6572 2062 7574 2074  ent folder but t
-0002c5f0: 7970 6963 616c 6c79 2074 6869 7320 7368  ypically this sh
-0002c600: 6f75 6c64 206e 6f74 2062 6520 6e65 6365  ould not be nece
-0002c610: 7373 6172 792e 0a20 2020 2020 2020 2020  ssary..         
-0002c620: 2020 2069 6e5f 6d65 6d6f 7279 3a20 4966     in_memory: If
-0002c630: 2054 7275 652c 206b 6565 7073 2064 6174   True, keeps dat
-0002c640: 6173 6574 2069 6e20 6d65 6d6f 7279 2067  aset in memory g
-0002c650: 6976 696e 6720 7370 6565 6475 7073 2069  iving speedups i
-0002c660: 6e20 7472 6169 6e69 6e67 2e0a 2020 2020  n training..    
-0002c670: 2020 2020 2020 2020 646f 6375 6d65 6e74          document
-0002c680: 5f61 735f 7365 7175 656e 6365 3a20 4966  _as_sequence: If
-0002c690: 2054 7275 652c 2061 6c6c 2073 656e 7465   True, all sente
-0002c6a0: 6e63 6573 206f 6620 6120 646f 6375 6d65  nces of a docume
-0002c6b0: 6e74 2061 7265 2072 6561 6420 696e 746f  nt are read into
-0002c6c0: 2061 2073 696e 676c 6520 5365 6e74 656e   a single Senten
-0002c6d0: 6365 206f 626a 6563 740a 2020 2020 2020  ce object.      
-0002c6e0: 2020 2222 220a 2020 2020 2020 2020 6261    """.        ba
-0002c6f0: 7365 5f70 6174 6820 3d20 6b6f 6c69 6272  se_path = kolibr
-0002c700: 692e 6361 6368 655f 726f 6f74 202f 2022  i.cache_root / "
-0002c710: 6461 7461 7365 7473 2220 6966 206e 6f74  datasets" if not
-0002c720: 2062 6173 655f 7061 7468 2065 6c73 6520   base_path else 
-0002c730: 5061 7468 2862 6173 655f 7061 7468 290a  Path(base_path).
-0002c740: 0a20 2020 2020 2020 2023 2063 6f6c 756d  .        # colum
-0002c750: 6e20 666f 726d 6174 0a20 2020 2020 2020  n format.       
-0002c760: 2063 6f6c 756d 6e73 203d 207b 313a 2022   columns = {1: "
-0002c770: 7465 7874 222c 2039 3a20 2266 7261 6d65  text", 9: "frame
-0002c780: 227d 0a0a 2020 2020 2020 2020 2320 7468  "}..        # th
-0002c790: 6973 2064 6174 6173 6574 206e 616d 650a  is dataset name.
-0002c7a0: 2020 2020 2020 2020 6461 7461 7365 745f          dataset_
-0002c7b0: 6e61 6d65 203d 2073 656c 662e 5f5f 636c  name = self.__cl
-0002c7c0: 6173 735f 5f2e 5f5f 6e61 6d65 5f5f 2e6c  ass__.__name__.l
-0002c7d0: 6f77 6572 2829 0a0a 2020 2020 2020 2020  ower()..        
-0002c7e0: 6461 7461 5f66 6f6c 6465 7220 3d20 6261  data_folder = ba
-0002c7f0: 7365 5f70 6174 6820 2f20 6461 7461 7365  se_path / datase
-0002c800: 745f 6e61 6d65 0a0a 2020 2020 2020 2020  t_name..        
-0002c810: 2320 646f 776e 6c6f 6164 2064 6174 6120  # download data 
-0002c820: 6966 206e 6563 6573 7361 7279 0a20 2020  if necessary.   
-0002c830: 2020 2020 2075 705f 6573 5f70 6174 6820       up_es_path 
-0002c840: 3d20 2268 7474 7073 3a2f 2f72 6177 2e67  = "https://raw.g
-0002c850: 6974 6875 6275 7365 7263 6f6e 7465 6e74  ithubusercontent
-0002c860: 2e63 6f6d 2f53 7973 7465 6d2d 542f 556e  .com/System-T/Un
-0002c870: 6976 6572 7361 6c50 726f 706f 7369 7469  iversalPropositi
-0002c880: 6f6e 732f 6d61 7374 6572 2f55 505f 5370  ons/master/UP_Sp
-0002c890: 616e 6973 682f 220a 2020 2020 2020 2020  anish/".        
-0002c8a0: 6361 6368 6564 5f70 6174 6828 6622 7b75  cached_path(f"{u
-0002c8b0: 705f 6573 5f70 6174 687d 6573 2d75 702d  p_es_path}es-up-
-0002c8c0: 7472 6169 6e2e 636f 6e6c 6c75 222c 2050  train.conllu", P
-0002c8d0: 6174 6828 2264 6174 6173 6574 7322 2920  ath("datasets") 
-0002c8e0: 2f20 6461 7461 7365 745f 6e61 6d65 290a  / dataset_name).
-0002c8f0: 2020 2020 2020 2020 6361 6368 6564 5f70          cached_p
-0002c900: 6174 6828 6622 7b75 705f 6573 5f70 6174  ath(f"{up_es_pat
-0002c910: 687d 6573 2d75 702d 6465 762e 636f 6e6c  h}es-up-dev.conl
-0002c920: 6c75 222c 2050 6174 6828 2264 6174 6173  lu", Path("datas
-0002c930: 6574 7322 2920 2f20 6461 7461 7365 745f  ets") / dataset_
-0002c940: 6e61 6d65 290a 2020 2020 2020 2020 6361  name).        ca
-0002c950: 6368 6564 5f70 6174 6828 6622 7b75 705f  ched_path(f"{up_
-0002c960: 6573 5f70 6174 687d 6573 2d75 702d 7465  es_path}es-up-te
-0002c970: 7374 2e63 6f6e 6c6c 7522 2c20 5061 7468  st.conllu", Path
-0002c980: 2822 6461 7461 7365 7473 2229 202f 2064  ("datasets") / d
-0002c990: 6174 6173 6574 5f6e 616d 6529 0a0a 2020  ataset_name)..  
-0002c9a0: 2020 2020 2020 7375 7065 7228 292e 5f5f        super().__
-0002c9b0: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
-0002c9c0: 2020 2020 6461 7461 5f66 6f6c 6465 722c      data_folder,
-0002c9d0: 0a20 2020 2020 2020 2020 2020 2063 6f6c  .            col
-0002c9e0: 756d 6e73 2c0a 2020 2020 2020 2020 2020  umns,.          
-0002c9f0: 2020 656e 636f 6469 6e67 3d22 7574 662d    encoding="utf-
-0002ca00: 3822 2c0a 2020 2020 2020 2020 2020 2020  8",.            
-0002ca10: 7472 6169 6e5f 6669 6c65 3d22 6573 2d75  train_file="es-u
-0002ca20: 702d 7472 6169 6e2e 636f 6e6c 6c75 222c  p-train.conllu",
-0002ca30: 0a20 2020 2020 2020 2020 2020 2074 6573  .            tes
-0002ca40: 745f 6669 6c65 3d22 6573 2d75 702d 7465  t_file="es-up-te
-0002ca50: 7374 2e63 6f6e 6c6c 7522 2c0a 2020 2020  st.conllu",.    
-0002ca60: 2020 2020 2020 2020 6465 765f 6669 6c65          dev_file
-0002ca70: 3d22 6573 2d75 702d 6465 762e 636f 6e6c  ="es-up-dev.conl
-0002ca80: 6c75 222c 0a20 2020 2020 2020 2020 2020  lu",.           
-0002ca90: 2069 6e5f 6d65 6d6f 7279 3d69 6e5f 6d65   in_memory=in_me
-0002caa0: 6d6f 7279 2c0a 2020 2020 2020 2020 2020  mory,.          
-0002cab0: 2020 646f 6375 6d65 6e74 5f73 6570 6172    document_separ
-0002cac0: 6174 6f72 5f74 6f6b 656e 3d4e 6f6e 6520  ator_token=None 
-0002cad0: 6966 206e 6f74 2064 6f63 756d 656e 745f  if not document_
-0002cae0: 6173 5f73 6571 7565 6e63 6520 656c 7365  as_sequence else
-0002caf0: 2022 2d44 4f43 5354 4152 542d 222c 0a20   "-DOCSTART-",. 
-0002cb00: 2020 2020 2020 2020 2020 2063 6f6d 6d65             comme
-0002cb10: 6e74 5f73 796d 626f 6c3d 2223 222c 0a20  nt_symbol="#",. 
-0002cb20: 2020 2020 2020 2020 2020 202a 2a63 6f72             **cor
-0002cb30: 7075 7361 7267 732c 0a20 2020 2020 2020  pusargs,.       
-0002cb40: 2029 0a0a 0a63 6c61 7373 2055 505f 5350   )...class UP_SP
-0002cb50: 414e 4953 485f 414e 434f 5241 2843 6f6c  ANISH_ANCORA(Col
-0002cb60: 756d 6e43 6f72 7075 7329 3a0a 2020 2020  umnCorpus):.    
-0002cb70: 6465 6620 5f5f 696e 6974 5f5f 280a 2020  def __init__(.  
-0002cb80: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
-0002cb90: 2020 2020 6261 7365 5f70 6174 683a 204f      base_path: O
-0002cba0: 7074 696f 6e61 6c5b 556e 696f 6e5b 7374  ptional[Union[st
-0002cbb0: 722c 2050 6174 685d 5d20 3d20 4e6f 6e65  r, Path]] = None
-0002cbc0: 2c0a 2020 2020 2020 2020 696e 5f6d 656d  ,.        in_mem
-0002cbd0: 6f72 793a 2062 6f6f 6c20 3d20 5472 7565  ory: bool = True
-0002cbe0: 2c0a 2020 2020 2020 2020 646f 6375 6d65  ,.        docume
-0002cbf0: 6e74 5f61 735f 7365 7175 656e 6365 3a20  nt_as_sequence: 
-0002cc00: 626f 6f6c 203d 2046 616c 7365 2c0a 2020  bool = False,.  
-0002cc10: 2020 2020 2020 2a2a 636f 7270 7573 6172        **corpusar
-0002cc20: 6773 2c0a 2020 2020 2920 2d3e 204e 6f6e  gs,.    ) -> Non
-0002cc30: 653a 0a20 2020 2020 2020 2022 2222 496e  e:.        """In
-0002cc40: 6974 6961 6c69 7a65 2074 6865 2053 7061  itialize the Spa
-0002cc50: 6e69 7368 2041 6e43 6f72 6120 6461 7461  nish AnCora data
-0002cc60: 7365 7420 6672 6f6d 2074 6865 2055 6e69  set from the Uni
-0002cc70: 7665 7273 616c 2050 726f 706f 7369 7469  versal Propositi
-0002cc80: 6f6e 7320 4261 6e6b 2e0a 0a20 2020 2020  ons Bank...     
-0002cc90: 2020 2054 6865 2064 6174 6173 6574 2069     The dataset i
-0002cca0: 7320 646f 776e 6c6f 6164 6564 2066 726f  s downloaded fro
-0002ccb0: 6d20 6874 7470 733a 2f2f 6769 7468 7562  m https://github
-0002ccc0: 2e63 6f6d 2f53 7973 7465 6d2d 542f 556e  .com/System-T/Un
-0002ccd0: 6976 6572 7361 6c50 726f 706f 7369 7469  iversalPropositi
-0002cce0: 6f6e 730a 0a20 2020 2020 2020 2041 7267  ons..        Arg
-0002ccf0: 733a 0a20 2020 2020 2020 2020 2020 2062  s:.            b
-0002cd00: 6173 655f 7061 7468 3a20 4465 6661 756c  ase_path: Defaul
-0002cd10: 7420 6973 204e 6f6e 652c 206d 6561 6e69  t is None, meani
-0002cd20: 6e67 2074 6861 7420 636f 7270 7573 2067  ng that corpus g
-0002cd30: 6574 7320 6175 746f 2d64 6f77 6e6c 6f61  ets auto-downloa
-0002cd40: 6465 6420 616e 6420 6c6f 6164 6564 2e20  ded and loaded. 
-0002cd50: 596f 7520 6361 6e20 6f76 6572 7269 6465  You can override
-0002cd60: 2074 6869 7320 746f 2070 6f69 6e74 2074   this to point t
-0002cd70: 6f20 6120 6469 6666 6572 656e 7420 666f  o a different fo
-0002cd80: 6c64 6572 2062 7574 2074 7970 6963 616c  lder but typical
-0002cd90: 6c79 2074 6869 7320 7368 6f75 6c64 206e  ly this should n
-0002cda0: 6f74 2062 6520 6e65 6365 7373 6172 792e  ot be necessary.
-0002cdb0: 0a20 2020 2020 2020 2020 2020 2069 6e5f  .            in_
-0002cdc0: 6d65 6d6f 7279 3a20 4966 2054 7275 652c  memory: If True,
-0002cdd0: 206b 6565 7073 2064 6174 6173 6574 2069   keeps dataset i
-0002cde0: 6e20 6d65 6d6f 7279 2067 6976 696e 6720  n memory giving 
-0002cdf0: 7370 6565 6475 7073 2069 6e20 7472 6169  speedups in trai
-0002ce00: 6e69 6e67 2e0a 2020 2020 2020 2020 2020  ning..          
-0002ce10: 2020 646f 6375 6d65 6e74 5f61 735f 7365    document_as_se
-0002ce20: 7175 656e 6365 3a20 4966 2054 7275 652c  quence: If True,
-0002ce30: 2061 6c6c 2073 656e 7465 6e63 6573 206f   all sentences o
-0002ce40: 6620 6120 646f 6375 6d65 6e74 2061 7265  f a document are
-0002ce50: 2072 6561 6420 696e 746f 2061 2073 696e   read into a sin
-0002ce60: 676c 6520 5365 6e74 656e 6365 206f 626a  gle Sentence obj
-0002ce70: 6563 740a 2020 2020 2020 2020 2222 220a  ect.        """.
-0002ce80: 2020 2020 2020 2020 6261 7365 5f70 6174          base_pat
-0002ce90: 6820 3d20 6b6f 6c69 6272 692e 6361 6368  h = kolibri.cach
-0002cea0: 655f 726f 6f74 202f 2022 6461 7461 7365  e_root / "datase
-0002ceb0: 7473 2220 6966 206e 6f74 2062 6173 655f  ts" if not base_
-0002cec0: 7061 7468 2065 6c73 6520 5061 7468 2862  path else Path(b
-0002ced0: 6173 655f 7061 7468 290a 0a20 2020 2020  ase_path)..     
-0002cee0: 2020 2023 2063 6f6c 756d 6e20 666f 726d     # column form
-0002cef0: 6174 0a20 2020 2020 2020 2063 6f6c 756d  at.        colum
-0002cf00: 6e73 203d 207b 313a 2022 7465 7874 222c  ns = {1: "text",
-0002cf10: 2039 3a20 2266 7261 6d65 227d 0a0a 2020   9: "frame"}..  
-0002cf20: 2020 2020 2020 2320 7468 6973 2064 6174        # this dat
-0002cf30: 6173 6574 206e 616d 650a 2020 2020 2020  aset name.      
-0002cf40: 2020 6461 7461 7365 745f 6e61 6d65 203d    dataset_name =
-0002cf50: 2073 656c 662e 5f5f 636c 6173 735f 5f2e   self.__class__.
-0002cf60: 5f5f 6e61 6d65 5f5f 2e6c 6f77 6572 2829  __name__.lower()
-0002cf70: 0a0a 2020 2020 2020 2020 6461 7461 5f66  ..        data_f
-0002cf80: 6f6c 6465 7220 3d20 6261 7365 5f70 6174  older = base_pat
-0002cf90: 6820 2f20 6461 7461 7365 745f 6e61 6d65  h / dataset_name
-0002cfa0: 0a0a 2020 2020 2020 2020 2320 646f 776e  ..        # down
-0002cfb0: 6c6f 6164 2064 6174 6120 6966 206e 6563  load data if nec
-0002cfc0: 6573 7361 7279 0a20 2020 2020 2020 2075  essary.        u
-0002cfd0: 705f 6573 5f70 6174 6820 3d20 2268 7474  p_es_path = "htt
-0002cfe0: 7073 3a2f 2f72 6177 2e67 6974 6875 6275  ps://raw.githubu
-0002cff0: 7365 7263 6f6e 7465 6e74 2e63 6f6d 2f53  sercontent.com/S
-0002d000: 7973 7465 6d2d 542f 556e 6976 6572 7361  ystem-T/Universa
-0002d010: 6c50 726f 706f 7369 7469 6f6e 732f 6d61  lPropositions/ma
-0002d020: 7374 6572 2f55 505f 5370 616e 6973 682d  ster/UP_Spanish-
-0002d030: 416e 436f 7261 2f22 0a20 2020 2020 2020  AnCora/".       
-0002d040: 2063 6163 6865 645f 7061 7468 2866 227b   cached_path(f"{
-0002d050: 7570 5f65 735f 7061 7468 7d65 735f 616e  up_es_path}es_an
-0002d060: 636f 7261 2d75 702d 7472 6169 6e2e 636f  cora-up-train.co
-0002d070: 6e6c 6c75 222c 2050 6174 6828 2264 6174  nllu", Path("dat
-0002d080: 6173 6574 7322 2920 2f20 6461 7461 7365  asets") / datase
-0002d090: 745f 6e61 6d65 290a 2020 2020 2020 2020  t_name).        
-0002d0a0: 6361 6368 6564 5f70 6174 6828 6622 7b75  cached_path(f"{u
-0002d0b0: 705f 6573 5f70 6174 687d 6573 5f61 6e63  p_es_path}es_anc
-0002d0c0: 6f72 612d 7570 2d64 6576 2e63 6f6e 6c6c  ora-up-dev.conll
-0002d0d0: 7522 2c20 5061 7468 2822 6461 7461 7365  u", Path("datase
-0002d0e0: 7473 2229 202f 2064 6174 6173 6574 5f6e  ts") / dataset_n
-0002d0f0: 616d 6529 0a20 2020 2020 2020 2063 6163  ame).        cac
-0002d100: 6865 645f 7061 7468 2866 227b 7570 5f65  hed_path(f"{up_e
-0002d110: 735f 7061 7468 7d65 735f 616e 636f 7261  s_path}es_ancora
-0002d120: 2d75 702d 7465 7374 2e63 6f6e 6c6c 7522  -up-test.conllu"
-0002d130: 2c20 5061 7468 2822 6461 7461 7365 7473  , Path("datasets
-0002d140: 2229 202f 2064 6174 6173 6574 5f6e 616d  ") / dataset_nam
-0002d150: 6529 0a0a 2020 2020 2020 2020 7375 7065  e)..        supe
-0002d160: 7228 292e 5f5f 696e 6974 5f5f 280a 2020  r().__init__(.  
-0002d170: 2020 2020 2020 2020 2020 6461 7461 5f66            data_f
-0002d180: 6f6c 6465 722c 0a20 2020 2020 2020 2020  older,.         
-0002d190: 2020 2063 6f6c 756d 6e73 2c0a 2020 2020     columns,.    
-0002d1a0: 2020 2020 2020 2020 656e 636f 6469 6e67          encoding
-0002d1b0: 3d22 7574 662d 3822 2c0a 2020 2020 2020  ="utf-8",.      
-0002d1c0: 2020 2020 2020 7472 6169 6e5f 6669 6c65        train_file
-0002d1d0: 3d22 6573 5f61 6e63 6f72 612d 7570 2d74  ="es_ancora-up-t
-0002d1e0: 7261 696e 2e63 6f6e 6c6c 7522 2c0a 2020  rain.conllu",.  
-0002d1f0: 2020 2020 2020 2020 2020 7465 7374 5f66            test_f
-0002d200: 696c 653d 2265 735f 616e 636f 7261 2d75  ile="es_ancora-u
-0002d210: 702d 7465 7374 2e63 6f6e 6c6c 7522 2c0a  p-test.conllu",.
-0002d220: 2020 2020 2020 2020 2020 2020 6465 765f              dev_
-0002d230: 6669 6c65 3d22 6573 5f61 6e63 6f72 612d  file="es_ancora-
-0002d240: 7570 2d64 6576 2e63 6f6e 6c6c 7522 2c0a  up-dev.conllu",.
-0002d250: 2020 2020 2020 2020 2020 2020 696e 5f6d              in_m
-0002d260: 656d 6f72 793d 696e 5f6d 656d 6f72 792c  emory=in_memory,
-0002d270: 0a20 2020 2020 2020 2020 2020 2064 6f63  .            doc
-0002d280: 756d 656e 745f 7365 7061 7261 746f 725f  ument_separator_
-0002d290: 746f 6b65 6e3d 4e6f 6e65 2069 6620 6e6f  token=None if no
-0002d2a0: 7420 646f 6375 6d65 6e74 5f61 735f 7365  t document_as_se
-0002d2b0: 7175 656e 6365 2065 6c73 6520 222d 444f  quence else "-DO
-0002d2c0: 4353 5441 5254 2d22 2c0a 2020 2020 2020  CSTART-",.      
-0002d2d0: 2020 2020 2020 636f 6d6d 656e 745f 7379        comment_sy
-0002d2e0: 6d62 6f6c 3d22 2322 2c0a 2020 2020 2020  mbol="#",.      
-0002d2f0: 2020 2020 2020 2a2a 636f 7270 7573 6172        **corpusar
-0002d300: 6773 2c0a 2020 2020 2020 2020 290a 0a0a  gs,.        )...
-0002d310: 636c 6173 7320 4e45 525f 4849 5045 5f32  class NER_HIPE_2
-0002d320: 3032 3228 436f 6c75 6d6e 436f 7270 7573  022(ColumnCorpus
-0002d330: 293a 0a20 2020 2040 7374 6174 6963 6d65  ):.    @staticme
-0002d340: 7468 6f64 0a20 2020 2064 6566 205f 7072  thod.    def _pr
-0002d350: 6570 6172 655f 636f 7270 7573 280a 2020  epare_corpus(.  
-0002d360: 2020 2020 2020 6669 6c65 5f69 6e3a 2050        file_in: P
-0002d370: 6174 682c 2066 696c 655f 6f75 743a 2050  ath, file_out: P
-0002d380: 6174 682c 2065 6f73 5f6d 6172 6b65 723a  ath, eos_marker:
-0002d390: 2073 7472 2c20 646f 6375 6d65 6e74 5f73   str, document_s
-0002d3a0: 6570 6172 6174 6f72 3a20 7374 722c 2061  eparator: str, a
-0002d3b0: 6464 5f64 6f63 756d 656e 745f 7365 7061  dd_document_sepa
-0002d3c0: 7261 746f 723a 2062 6f6f 6c0a 2020 2020  rator: bool.    
-0002d3d0: 293a 0a20 2020 2020 2020 2077 6974 6820  ):.        with 
-0002d3e0: 6f70 656e 2866 696c 655f 696e 2c20 656e  open(file_in, en
-0002d3f0: 636f 6469 6e67 3d22 7574 662d 3822 2920  coding="utf-8") 
-0002d400: 6173 2066 5f70 3a0a 2020 2020 2020 2020  as f_p:.        
-0002d410: 2020 2020 6c69 6e65 7320 3d20 665f 702e      lines = f_p.
-0002d420: 7265 6164 6c69 6e65 7328 290a 0a20 2020  readlines()..   
-0002d430: 2020 2020 2077 6974 6820 6f70 656e 2866       with open(f
-0002d440: 696c 655f 6f75 742c 2022 7722 2c20 656e  ile_out, "w", en
-0002d450: 636f 6469 6e67 3d22 7574 662d 3822 2920  coding="utf-8") 
-0002d460: 6173 2066 5f6f 7574 3a0a 2020 2020 2020  as f_out:.      
-0002d470: 2020 2020 2020 2320 4164 6420 6d69 7373        # Add miss
-0002d480: 696e 6720 6e65 776c 696e 6520 6166 7465  ing newline afte
-0002d490: 7220 6865 6164 6572 0a20 2020 2020 2020  r header.       
-0002d4a0: 2020 2020 2066 5f6f 7574 2e77 7269 7465       f_out.write
-0002d4b0: 286c 696e 6573 5b30 5d20 2b20 225c 6e22  (lines[0] + "\n"
-0002d4c0: 290a 0a20 2020 2020 2020 2020 2020 2066  )..            f
-0002d4d0: 6f72 206c 696e 6520 696e 206c 696e 6573  or line in lines
-0002d4e0: 5b31 3a5d 3a0a 2020 2020 2020 2020 2020  [1:]:.          
-0002d4f0: 2020 2020 2020 6966 206c 696e 652e 7374        if line.st
-0002d500: 6172 7473 7769 7468 2822 205c 7422 293a  artswith(" \t"):
-0002d510: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d520: 2020 2020 2023 2057 6f72 6b61 726f 756e       # Workaroun
-0002d530: 6420 666f 7220 656d 7074 7920 746f 6b65  d for empty toke
-0002d540: 6e73 0a20 2020 2020 2020 2020 2020 2020  ns.             
-0002d550: 2020 2020 2020 2063 6f6e 7469 6e75 650a         continue.
-0002d560: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002d570: 206c 696e 6520 3d20 6c69 6e65 2e73 7472   line = line.str
-0002d580: 6970 2829 0a0a 2020 2020 2020 2020 2020  ip()..          
-0002d590: 2020 2020 2020 2320 4164 6420 2272 6561        # Add "rea
-0002d5a0: 6c22 2064 6f63 756d 656e 7420 6d61 726b  l" document mark
-0002d5b0: 6572 0a20 2020 2020 2020 2020 2020 2020  er.             
-0002d5c0: 2020 2069 6620 6164 645f 646f 6375 6d65     if add_docume
-0002d5d0: 6e74 5f73 6570 6172 6174 6f72 2061 6e64  nt_separator and
-0002d5e0: 206c 696e 652e 7374 6172 7473 7769 7468   line.startswith
-0002d5f0: 2864 6f63 756d 656e 745f 7365 7061 7261  (document_separa
-0002d600: 746f 7229 3a0a 2020 2020 2020 2020 2020  tor):.          
-0002d610: 2020 2020 2020 2020 2020 665f 6f75 742e            f_out.
-0002d620: 7772 6974 6528 222d 444f 4353 5441 5254  write("-DOCSTART
-0002d630: 2d20 4f5c 6e5c 6e22 290a 0a20 2020 2020  - O\n\n")..     
-0002d640: 2020 2020 2020 2020 2020 2066 5f6f 7574             f_out
-0002d650: 2e77 7269 7465 286c 696e 6520 2b20 225c  .write(line + "\
-0002d660: 6e22 290a 0a20 2020 2020 2020 2020 2020  n")..           
-0002d670: 2020 2020 2069 6620 656f 735f 6d61 726b       if eos_mark
-0002d680: 6572 2069 6e20 6c69 6e65 3a0a 2020 2020  er in line:.    
-0002d690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002d6a0: 665f 6f75 742e 7772 6974 6528 225c 6e22  f_out.write("\n"
-0002d6b0: 290a 0a20 2020 2064 6566 205f 5f69 6e69  )..    def __ini
-0002d6c0: 745f 5f28 0a20 2020 2020 2020 2073 656c  t__(.        sel
-0002d6d0: 662c 0a20 2020 2020 2020 2064 6174 6173  f,.        datas
-0002d6e0: 6574 5f6e 616d 653a 2073 7472 2c0a 2020  et_name: str,.  
-0002d6f0: 2020 2020 2020 6c61 6e67 7561 6765 3a20        language: 
-0002d700: 7374 722c 0a20 2020 2020 2020 2062 6173  str,.        bas
-0002d710: 655f 7061 7468 3a20 4f70 7469 6f6e 616c  e_path: Optional
-0002d720: 5b55 6e69 6f6e 5b73 7472 2c20 5061 7468  [Union[str, Path
-0002d730: 5d5d 203d 204e 6f6e 652c 0a20 2020 2020  ]] = None,.     
-0002d740: 2020 2069 6e5f 6d65 6d6f 7279 3a20 626f     in_memory: bo
-0002d750: 6f6c 203d 2054 7275 652c 0a20 2020 2020  ol = True,.     
-0002d760: 2020 2076 6572 7369 6f6e 3a20 7374 7220     version: str 
-0002d770: 3d20 2276 322e 3122 2c0a 2020 2020 2020  = "v2.1",.      
-0002d780: 2020 6272 616e 6368 5f6e 616d 653a 2073    branch_name: s
-0002d790: 7472 203d 2022 6d61 696e 222c 0a20 2020  tr = "main",.   
-0002d7a0: 2020 2020 2064 6576 5f73 706c 6974 5f6e       dev_split_n
-0002d7b0: 616d 653d 2264 6576 222c 0a20 2020 2020  ame="dev",.     
-0002d7c0: 2020 2061 6464 5f64 6f63 756d 656e 745f     add_document_
-0002d7d0: 7365 7061 7261 746f 723d 4661 6c73 652c  separator=False,
-0002d7e0: 0a20 2020 2020 2020 2073 616d 706c 655f  .        sample_
-0002d7f0: 6d69 7373 696e 675f 7370 6c69 7473 3d46  missing_splits=F
-0002d800: 616c 7365 2c0a 2020 2020 2020 2020 7072  alse,.        pr
-0002d810: 6570 726f 635f 666e 3d4e 6f6e 652c 0a20  eproc_fn=None,. 
-0002d820: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
-0002d830: 7267 732c 0a20 2020 2029 202d 3e20 4e6f  rgs,.    ) -> No
-0002d840: 6e65 3a0a 2020 2020 2020 2020 2222 2249  ne:.        """I
-0002d850: 6e69 7469 616c 697a 6520 7468 6520 434c  nitialize the CL
-0002d860: 4546 2d48 4950 4520 3230 3232 204e 4552  EF-HIPE 2022 NER
-0002d870: 2064 6174 6173 6574 2e0a 0a20 2020 2020   dataset...     
-0002d880: 2020 2054 6865 2066 6972 7374 2074 696d     The first tim
-0002d890: 6520 796f 7520 6361 6c6c 2074 6869 7320  e you call this 
-0002d8a0: 636f 6e73 7472 7563 746f 7220 6974 2077  constructor it w
-0002d8b0: 696c 6c20 6175 746f 6d61 7469 6361 6c6c  ill automaticall
-0002d8c0: 790a 2020 2020 2020 2020 646f 776e 6c6f  y.        downlo
-0002d8d0: 6164 2074 6865 2073 7065 6369 6669 6564  ad the specified
-0002d8e0: 2064 6174 6173 6574 2028 6279 2067 6976   dataset (by giv
-0002d8f0: 656e 2061 206c 616e 6775 6167 6529 2e0a  en a language)..
-0002d900: 2020 2020 2020 2020 3a64 6174 6173 6574          :dataset
-0002d910: 5f6e 616d 653a 2053 7570 706f 7274 6564  _name: Supported
-0002d920: 2064 6174 6173 6574 7320 6172 653a 2061   datasets are: a
-0002d930: 6a6d 632c 2068 6970 6532 3032 302c 206c  jmc, hipe2020, l
-0002d940: 6574 656d 7073 2c20 6e65 7773 6579 652c  etemps, newseye,
-0002d950: 2073 6f6e 6172 2061 6e64 2074 6f70 7265   sonar and topre
-0002d960: 7331 3974 682e 0a20 2020 2020 2020 203a  s19th..        :
-0002d970: 6c61 6e67 7561 6765 3a20 4c61 6e67 7561  language: Langua
-0002d980: 6765 2066 6f72 2061 2073 7570 706f 7274  ge for a support
-0002d990: 6564 2064 6174 6173 6574 2e0a 2020 2020  ed dataset..    
-0002d9a0: 2020 2020 3a62 6173 655f 7061 7468 3a20      :base_path: 
-0002d9b0: 4465 6661 756c 7420 6973 204e 6f6e 652c  Default is None,
-0002d9c0: 206d 6561 6e69 6e67 2074 6861 7420 636f   meaning that co
-0002d9d0: 7270 7573 2067 6574 7320 6175 746f 2d64  rpus gets auto-d
-0002d9e0: 6f77 6e6c 6f61 6465 6420 616e 6420 6c6f  ownloaded and lo
-0002d9f0: 6164 6564 2e20 596f 7520 6361 6e20 6f76  aded. You can ov
-0002da00: 6572 7269 6465 2074 6869 730a 2020 2020  erride this.    
-0002da10: 2020 2020 746f 2070 6f69 6e74 2074 6f20      to point to 
-0002da20: 6120 6469 6666 6572 656e 7420 666f 6c64  a different fold
-0002da30: 6572 2062 7574 2074 7970 6963 616c 6c79  er but typically
-0002da40: 2074 6869 7320 7368 6f75 6c64 206e 6f74   this should not
-0002da50: 2062 6520 6e65 6365 7373 6172 792e 0a20   be necessary.. 
-0002da60: 2020 2020 2020 203a 696e 5f6d 656d 6f72         :in_memor
-0002da70: 793a 2049 6620 5472 7565 2c20 6b65 6570  y: If True, keep
-0002da80: 7320 6461 7461 7365 7420 696e 206d 656d  s dataset in mem
-0002da90: 6f72 7920 6769 7669 6e67 2073 7065 6564  ory giving speed
-0002daa0: 7570 7320 696e 2074 7261 696e 696e 672e  ups in training.
-0002dab0: 0a20 2020 2020 2020 203a 7665 7273 696f  .        :versio
-0002dac0: 6e3a 2056 6572 7369 6f6e 206f 6620 434c  n: Version of CL
-0002dad0: 4546 2d48 4950 4520 6461 7461 7365 742e  EF-HIPE dataset.
-0002dae0: 2043 7572 7265 6e74 6c79 206f 6e6c 7920   Currently only 
-0002daf0: 7631 2e30 2069 7320 7375 7070 6f72 7465  v1.0 is supporte
-0002db00: 6420 616e 6420 6176 6169 6c61 626c 652e  d and available.
-0002db10: 0a20 2020 2020 2020 203a 6272 616e 6368  .        :branch
-0002db20: 5f6e 616d 653a 2044 6566 696e 6573 2067  _name: Defines g
-0002db30: 6974 2062 7261 6e63 6820 6e61 6d65 206f  it branch name o
-0002db40: 6620 4849 5045 2064 6174 6120 7265 706f  f HIPE data repo
-0002db50: 7369 746f 7279 2028 6d61 696e 2062 7920  sitory (main by 
-0002db60: 6465 6661 756c 7429 2e0a 2020 2020 2020  default)..      
-0002db70: 2020 3a64 6576 5f73 706c 6974 5f6e 616d    :dev_split_nam
-0002db80: 653a 2044 6566 696e 6573 2064 6566 6175  e: Defines defau
-0002db90: 6c74 206e 616d 6520 6f66 2064 6576 656c  lt name of devel
-0002dba0: 6f70 6d65 6e74 2073 706c 6974 2028 6465  opment split (de
-0002dbb0: 7620 6279 2064 6566 6175 6c74 292e 204f  v by default). O
-0002dbc0: 6e6c 7920 7468 6520 4e65 7773 4579 6520  nly the NewsEye 
-0002dbd0: 6461 7461 7365 7420 6861 730a 2020 2020  dataset has.    
-0002dbe0: 2020 2020 6375 7272 656e 746c 7920 7477      currently tw
-0002dbf0: 6f20 6465 7665 6c6f 706d 656e 7420 7370  o development sp
-0002dc00: 6c69 7473 3a20 6465 7620 616e 6420 6465  lits: dev and de
-0002dc10: 7632 2e0a 2020 2020 2020 2020 3a61 6464  v2..        :add
-0002dc20: 5f64 6f63 756d 656e 745f 7365 7061 7261  _document_separa
-0002dc30: 746f 723a 2049 6620 5472 7565 2c20 6120  tor: If True, a 
-0002dc40: 7370 6563 6961 6c20 646f 6375 6d65 6e74  special document
-0002dc50: 2073 6570 6572 6174 6f72 2077 696c 6c20   seperator will 
-0002dc60: 6265 2069 6e74 726f 6475 6365 642e 2054  be introduced. T
-0002dc70: 6869 7320 6973 2068 6967 686c 790a 2020  his is highly.  
-0002dc80: 2020 2020 2020 7265 636f 6d6d 656e 6465        recommende
-0002dc90: 6420 7768 656e 2075 7369 6e67 206f 7572  d when using our
-0002dca0: 2046 4c45 5254 2061 7070 726f 6163 682e   FLERT approach.
-0002dcb0: 0a20 2020 2020 2020 203a 7361 6d70 6c65  .        :sample
-0002dcc0: 5f6d 6973 7369 6e67 5f73 706c 6974 733a  _missing_splits:
-0002dcd0: 2049 6620 5472 7565 2c20 6461 7461 2069   If True, data i
-0002dce0: 7320 6175 746f 6d61 7469 6361 6c6c 7920  s automatically 
-0002dcf0: 7361 6d70 6c65 6420 7768 656e 2063 6572  sampled when cer
-0002dd00: 7461 696e 2064 6174 6120 7370 6c69 7473  tain data splits
-0002dd10: 2061 7265 204e 6f6e 652e 0a20 2020 2020   are None..     
-0002dd20: 2020 203a 7072 6570 726f 635f 666e 3a20     :preproc_fn: 
-0002dd30: 4675 6e63 7469 6f6e 2074 6861 7420 6973  Function that is
-0002dd40: 2075 7365 6420 666f 7220 6461 7461 7365   used for datase
-0002dd50: 7420 7072 6570 726f 6365 7373 696e 672e  t preprocessing.
-0002dd60: 2049 6620 4e6f 6e65 2c20 6465 6661 756c   If None, defaul
-0002dd70: 7420 7072 6570 726f 6365 7373 696e 6720  t preprocessing 
-0002dd80: 7769 6c6c 2062 6520 7065 7266 6f72 6d65  will be performe
-0002dd90: 642e 0a20 2020 2020 2020 2022 2222 0a20  d..        """. 
-0002dda0: 2020 2020 2020 2062 6173 655f 7061 7468         base_path
-0002ddb0: 203d 206b 6f6c 6962 7269 2e63 6163 6865   = kolibri.cache
-0002ddc0: 5f72 6f6f 7420 2f20 2264 6174 6173 6574  _root / "dataset
-0002ddd0: 7322 2069 6620 6e6f 7420 6261 7365 5f70  s" if not base_p
-0002dde0: 6174 6820 656c 7365 2050 6174 6828 6261  ath else Path(ba
-0002ddf0: 7365 5f70 6174 6829 0a0a 2020 2020 2020  se_path)..      
-0002de00: 2020 2320 4461 7461 7365 7420 7370 6c69    # Dataset spli
-0002de10: 7420 6d61 7070 696e 670a 2020 2020 2020  t mapping.      
-0002de20: 2020 6869 7065 5f61 7661 696c 6162 6c65    hipe_available
-0002de30: 5f73 706c 6974 7320 3d20 7b0a 2020 2020  _splits = {.    
-0002de40: 2020 2020 2020 2020 2276 312e 3022 3a20          "v1.0": 
-0002de50: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-0002de60: 2020 2261 6a6d 6322 3a20 7b22 6465 223a    "ajmc": {"de":
-0002de70: 205b 2273 616d 706c 6522 5d2c 2022 656e   ["sample"], "en
-0002de80: 223a 205b 2273 616d 706c 6522 5d7d 2c0a  ": ["sample"]},.
-0002de90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002dea0: 2268 6970 6532 3032 3022 3a20 7b22 6465  "hipe2020": {"de
-0002deb0: 223a 205b 2274 7261 696e 222c 2022 6465  ": ["train", "de
-0002dec0: 7622 5d2c 2022 656e 223a 205b 2264 6576  v"], "en": ["dev
-0002ded0: 225d 2c20 2266 7222 3a20 5b22 7472 6169  "], "fr": ["trai
-0002dee0: 6e22 2c20 2264 6576 225d 7d2c 0a20 2020  n", "dev"]},.   
-0002def0: 2020 2020 2020 2020 2020 2020 2022 6c65               "le
-0002df00: 7465 6d70 7322 3a20 7b22 6672 223a 205b  temps": {"fr": [
-0002df10: 2274 7261 696e 222c 2022 6465 7622 5d7d  "train", "dev"]}
-0002df20: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0002df30: 2020 226e 6577 7365 7965 223a 207b 0a20    "newseye": {. 
-0002df40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002df50: 2020 2022 6465 223a 205b 2274 7261 696e     "de": ["train
-0002df60: 222c 2022 6465 7622 2c20 2264 6576 3222  ", "dev", "dev2"
-0002df70: 5d2c 0a20 2020 2020 2020 2020 2020 2020  ],.             
-0002df80: 2020 2020 2020 2022 6669 223a 205b 2274         "fi": ["t
-0002df90: 7261 696e 222c 2022 6465 7622 2c20 2264  rain", "dev", "d
-0002dfa0: 6576 3222 5d2c 0a20 2020 2020 2020 2020  ev2"],.         
-0002dfb0: 2020 2020 2020 2020 2020 2022 6672 223a             "fr":
-0002dfc0: 205b 2274 7261 696e 222c 2022 6465 7622   ["train", "dev"
-0002dfd0: 2c20 2264 6576 3222 5d2c 0a20 2020 2020  , "dev2"],.     
-0002dfe0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0002dff0: 7376 223a 205b 2274 7261 696e 222c 2022  sv": ["train", "
-0002e000: 6465 7622 2c20 2264 6576 3222 5d2c 0a20  dev", "dev2"],. 
-0002e010: 2020 2020 2020 2020 2020 2020 2020 207d                 }
-0002e020: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0002e030: 2020 2273 6f6e 6172 223a 207b 2264 6522    "sonar": {"de"
-0002e040: 3a20 5b22 6465 7622 5d7d 2c0a 2020 2020  : ["dev"]},.    
-0002e050: 2020 2020 2020 2020 2020 2020 2274 6f70              "top
-0002e060: 7265 7331 3974 6822 3a20 7b22 656e 223a  res19th": {"en":
-0002e070: 205b 2274 7261 696e 222c 2022 6465 7622   ["train", "dev"
-0002e080: 5d7d 2c0a 2020 2020 2020 2020 2020 2020  ]},.            
-0002e090: 7d0a 2020 2020 2020 2020 7d0a 0a20 2020  }.        }..   
-0002e0a0: 2020 2020 2023 2076 322e 3020 6f6e 6c79       # v2.0 only
-0002e0b0: 2061 6464 7320 6e65 7720 6c61 6e67 7561   adds new langua
-0002e0c0: 6765 2061 6e64 2073 706c 6974 7320 666f  ge and splits fo
-0002e0d0: 7220 414a 4d43 2064 6174 6173 6574 0a20  r AJMC dataset. 
-0002e0e0: 2020 2020 2020 2068 6970 655f 6176 6169         hipe_avai
-0002e0f0: 6c61 626c 655f 7370 6c69 7473 5b22 7632  lable_splits["v2
-0002e100: 2e30 225d 203d 2063 6f70 792e 6465 6570  .0"] = copy.deep
-0002e110: 636f 7079 2868 6970 655f 6176 6169 6c61  copy(hipe_availa
-0002e120: 626c 655f 7370 6c69 7473 5b22 7631 2e30  ble_splits["v1.0
-0002e130: 225d 290a 2020 2020 2020 2020 6869 7065  "]).        hipe
-0002e140: 5f61 7661 696c 6162 6c65 5f73 706c 6974  _available_split
-0002e150: 735b 2276 322e 3022 5d5b 2261 6a6d 6322  s["v2.0"]["ajmc"
-0002e160: 5d20 3d20 7b22 6465 223a 205b 2274 7261  ] = {"de": ["tra
-0002e170: 696e 222c 2022 6465 7622 5d2c 2022 656e  in", "dev"], "en
-0002e180: 223a 205b 2274 7261 696e 222c 2022 6465  ": ["train", "de
-0002e190: 7622 5d2c 2022 6672 223a 205b 2274 7261  v"], "fr": ["tra
-0002e1a0: 696e 222c 2022 6465 7622 5d7d 0a0a 2020  in", "dev"]}..  
-0002e1b0: 2020 2020 2020 6869 7065 5f61 7661 696c        hipe_avail
-0002e1c0: 6162 6c65 5f73 706c 6974 735b 2276 322e  able_splits["v2.
-0002e1d0: 3122 5d20 3d20 636f 7079 2e64 6565 7063  1"] = copy.deepc
-0002e1e0: 6f70 7928 6869 7065 5f61 7661 696c 6162  opy(hipe_availab
-0002e1f0: 6c65 5f73 706c 6974 735b 2276 322e 3022  le_splits["v2.0"
-0002e200: 5d29 0a20 2020 2020 2020 2066 6f72 2064  ]).        for d
-0002e210: 6174 6173 6574 5f6e 616d 655f 7661 6c75  ataset_name_valu
-0002e220: 6573 2069 6e20 6869 7065 5f61 7661 696c  es in hipe_avail
-0002e230: 6162 6c65 5f73 706c 6974 735b 2276 322e  able_splits["v2.
-0002e240: 3122 5d2e 7661 6c75 6573 2829 3a0a 2020  1"].values():.  
-0002e250: 2020 2020 2020 2020 2020 666f 7220 7370            for sp
-0002e260: 6c69 7473 2069 6e20 6461 7461 7365 745f  lits in dataset_
-0002e270: 6e61 6d65 5f76 616c 7565 732e 7661 6c75  name_values.valu
-0002e280: 6573 2829 3a0a 2020 2020 2020 2020 2020  es():.          
-0002e290: 2020 2020 2020 7370 6c69 7473 2e61 7070        splits.app
-0002e2a0: 656e 6428 2274 6573 7422 2920 2023 2074  end("test")  # t
-0002e2b0: 6573 7420 6461 7461 7365 7473 2061 7265  est datasets are
-0002e2c0: 206f 6e6c 7920 6176 6169 6c61 626c 6520   only available 
-0002e2d0: 666f 7220 3e3d 2076 322e 310a 0a20 2020  for >= v2.1..   
-0002e2e0: 2020 2020 2065 6f73 5f6d 6172 6b65 7220       eos_marker 
-0002e2f0: 3d20 2245 6e64 4f66 5365 6e74 656e 6365  = "EndOfSentence
-0002e300: 220a 2020 2020 2020 2020 646f 6375 6d65  ".        docume
-0002e310: 6e74 5f73 6570 6172 6174 6f72 203d 2022  nt_separator = "
-0002e320: 2320 6869 7065 3230 3232 3a64 6f63 756d  # hipe2022:docum
-0002e330: 656e 745f 6964 220a 0a20 2020 2020 2020  ent_id"..       
-0002e340: 2023 2053 7065 6369 616c 2064 6f63 756d   # Special docum
-0002e350: 656e 7420 6d61 726b 6572 2066 6f72 2073  ent marker for s
-0002e360: 616d 706c 6520 7370 6c69 7473 2069 6e20  ample splits in 
-0002e370: 414a 4d43 2064 6174 6173 6574 0a20 2020  AJMC dataset.   
-0002e380: 2020 2020 2069 6620 6622 7b64 6174 6173       if f"{datas
-0002e390: 6574 5f6e 616d 657d 2220 3d3d 2022 616a  et_name}" == "aj
-0002e3a0: 6d63 223a 0a20 2020 2020 2020 2020 2020  mc":.           
-0002e3b0: 2064 6f63 756d 656e 745f 7365 7061 7261   document_separa
-0002e3c0: 746f 7220 3d20 2223 2068 6970 6532 3032  tor = "# hipe202
-0002e3d0: 323a 6f72 6967 696e 616c 5f73 6f75 7263  2:original_sourc
-0002e3e0: 6522 0a0a 2020 2020 2020 2020 636f 6c75  e"..        colu
-0002e3f0: 6d6e 7320 3d20 7b30 3a20 2274 6578 7422  mns = {0: "text"
-0002e400: 2c20 313a 2022 6e65 7222 7d0a 0a20 2020  , 1: "ner"}..   
-0002e410: 2020 2020 2064 6174 6173 6574 5f62 6173       dataset_bas
-0002e420: 6520 3d20 7365 6c66 2e5f 5f63 6c61 7373  e = self.__class
-0002e430: 5f5f 2e5f 5f6e 616d 655f 5f2e 6c6f 7765  __.__name__.lowe
-0002e440: 7228 290a 2020 2020 2020 2020 6461 7461  r().        data
-0002e450: 5f66 6f6c 6465 7220 3d20 6261 7365 5f70  _folder = base_p
-0002e460: 6174 6820 2f20 6461 7461 7365 745f 6261  ath / dataset_ba
-0002e470: 7365 202f 2076 6572 7369 6f6e 202f 2064  se / version / d
-0002e480: 6174 6173 6574 5f6e 616d 6520 2f20 6c61  ataset_name / la
-0002e490: 6e67 7561 6765 0a0a 2020 2020 2020 2020  nguage..        
-0002e4a0: 6461 7461 5f75 726c 203d 2028 0a20 2020  data_url = (.   
-0002e4b0: 2020 2020 2020 2020 2066 2268 7474 7073           f"https
-0002e4c0: 3a2f 2f67 6974 6875 622e 636f 6d2f 6869  ://github.com/hi
-0002e4d0: 7065 2d65 7661 6c2f 4849 5045 2d32 3032  pe-eval/HIPE-202
-0002e4e0: 322d 6461 7461 2f72 6177 2f7b 6272 616e  2-data/raw/{bran
-0002e4f0: 6368 5f6e 616d 657d 2f64 6174 612f 7b76  ch_name}/data/{v
-0002e500: 6572 7369 6f6e 7d2f 7b64 6174 6173 6574  ersion}/{dataset
-0002e510: 5f6e 616d 657d 2f7b 6c61 6e67 7561 6765  _name}/{language
-0002e520: 7d22 0a20 2020 2020 2020 2029 0a0a 2020  }".        )..  
-0002e530: 2020 2020 2020 6461 7461 7365 745f 7370        dataset_sp
-0002e540: 6c69 7473 203d 2068 6970 655f 6176 6169  lits = hipe_avai
-0002e550: 6c61 626c 655f 7370 6c69 7473 5b76 6572  lable_splits[ver
-0002e560: 7369 6f6e 5d5b 6461 7461 7365 745f 6e61  sion][dataset_na
-0002e570: 6d65 5d5b 6c61 6e67 7561 6765 5d0a 0a20  me][language].. 
-0002e580: 2020 2020 2020 2066 6f72 2073 706c 6974         for split
-0002e590: 2069 6e20 6461 7461 7365 745f 7370 6c69   in dataset_spli
-0002e5a0: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
-0002e5b0: 6361 6368 6564 5f70 6174 6828 0a20 2020  cached_path(.   
-0002e5c0: 2020 2020 2020 2020 2020 2020 2066 227b               f"{
-0002e5d0: 6461 7461 5f75 726c 7d2f 4849 5045 2d32  data_url}/HIPE-2
-0002e5e0: 3032 322d 7b76 6572 7369 6f6e 7d2d 7b64  022-{version}-{d
-0002e5f0: 6174 6173 6574 5f6e 616d 657d 2d7b 7370  ataset_name}-{sp
-0002e600: 6c69 747d 2d7b 6c61 6e67 7561 6765 7d2e  lit}-{language}.
-0002e610: 7473 7622 2c20 6461 7461 5f66 6f6c 6465  tsv", data_folde
-0002e620: 7220 2f20 226f 7269 6769 6e61 6c22 0a20  r / "original". 
-0002e630: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
-0002e640: 2020 2020 2020 7472 6169 6e5f 6669 6c65        train_file
-0002e650: 203d 2022 7472 6169 6e2e 7478 7422 2069   = "train.txt" i
-0002e660: 6620 2274 7261 696e 2220 696e 2064 6174  f "train" in dat
-0002e670: 6173 6574 5f73 706c 6974 7320 656c 7365  aset_splits else
-0002e680: 204e 6f6e 650a 2020 2020 2020 2020 6465   None.        de
-0002e690: 765f 6669 6c65 203d 2066 227b 6465 765f  v_file = f"{dev_
-0002e6a0: 7370 6c69 745f 6e61 6d65 7d2e 7478 7422  split_name}.txt"
-0002e6b0: 2069 6620 2273 616d 706c 6522 206e 6f74   if "sample" not
-0002e6c0: 2069 6e20 6461 7461 7365 745f 7370 6c69   in dataset_spli
-0002e6d0: 7473 2065 6c73 6520 2273 616d 706c 652e  ts else "sample.
-0002e6e0: 7478 7422 0a20 2020 2020 2020 2074 6573  txt".        tes
-0002e6f0: 745f 6669 6c65 203d 2022 7465 7374 2e74  t_file = "test.t
-0002e700: 7874 2220 6966 2022 7465 7374 2220 696e  xt" if "test" in
-0002e710: 2064 6174 6173 6574 5f73 706c 6974 7320   dataset_splits 
-0002e720: 656c 7365 204e 6f6e 650a 0a20 2020 2020  else None..     
-0002e730: 2020 206e 6577 5f64 6174 615f 666f 6c64     new_data_fold
-0002e740: 6572 203d 2064 6174 615f 666f 6c64 6572  er = data_folder
-0002e750: 0a0a 2020 2020 2020 2020 6966 2061 6464  ..        if add
-0002e760: 5f64 6f63 756d 656e 745f 7365 7061 7261  _document_separa
-0002e770: 746f 723a 0a20 2020 2020 2020 2020 2020  tor:.           
-0002e780: 206e 6577 5f64 6174 615f 666f 6c64 6572   new_data_folder
-0002e790: 203d 206e 6577 5f64 6174 615f 666f 6c64   = new_data_fold
-0002e7a0: 6572 202f 2022 7769 7468 5f64 6f63 5f73  er / "with_doc_s
-0002e7b0: 6570 6572 6174 6f72 220a 2020 2020 2020  eperator".      
-0002e7c0: 2020 2020 2020 6e65 775f 6461 7461 5f66        new_data_f
-0002e7d0: 6f6c 6465 722e 6d6b 6469 7228 7061 7265  older.mkdir(pare
-0002e7e0: 6e74 733d 5472 7565 2c20 6578 6973 745f  nts=True, exist_
-0002e7f0: 6f6b 3d54 7275 6529 0a0a 2020 2020 2020  ok=True)..      
-0002e800: 2020 7365 6c66 2e70 7265 7072 6f63 5f66    self.preproc_f
-0002e810: 6e20 3d20 7072 6570 726f 635f 666e 2069  n = preproc_fn i
-0002e820: 6620 7072 6570 726f 635f 666e 2065 6c73  f preproc_fn els
-0002e830: 6520 7365 6c66 2e5f 7072 6570 6172 655f  e self._prepare_
-0002e840: 636f 7270 7573 0a0a 2020 2020 2020 2020  corpus..        
-0002e850: 6966 206e 6f74 2061 6c6c 2820 2023 204f  if not all(  # O
-0002e860: 6e6c 7920 7265 7072 6f63 6573 7320 6966  nly reprocess if
-0002e870: 2073 6f6d 6520 6669 6c65 7320 6172 6520   some files are 
-0002e880: 6e6f 7420 7468 6572 6520 7965 740a 2020  not there yet.  
-0002e890: 2020 2020 2020 2020 2020 7370 6c69 745f            split_
-0002e8a0: 7061 7468 2e65 7869 7374 7328 290a 2020  path.exists().  
-0002e8b0: 2020 2020 2020 2020 2020 666f 7220 7370            for sp
-0002e8c0: 6c69 745f 7061 7468 2069 6e20 5b6e 6577  lit_path in [new
-0002e8d0: 5f64 6174 615f 666f 6c64 6572 202f 2066  _data_folder / f
-0002e8e0: 227b 7370 6c69 745f 6669 6c65 7d2e 7478  "{split_file}.tx
-0002e8f0: 7422 2066 6f72 2073 706c 6974 5f66 696c  t" for split_fil
-0002e900: 6520 696e 2064 6174 6173 6574 5f73 706c  e in dataset_spl
-0002e910: 6974 735d 0a20 2020 2020 2020 2029 3a0a  its].        ):.
-0002e920: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0002e930: 7370 6c69 7420 696e 2064 6174 6173 6574  split in dataset
-0002e940: 5f73 706c 6974 733a 0a20 2020 2020 2020  _splits:.       
-0002e950: 2020 2020 2020 2020 206f 7269 6769 6e61           origina
-0002e960: 6c5f 6669 6c65 6e61 6d65 203d 2066 2248  l_filename = f"H
-0002e970: 4950 452d 3230 3232 2d7b 7665 7273 696f  IPE-2022-{versio
-0002e980: 6e7d 2d7b 6461 7461 7365 745f 6e61 6d65  n}-{dataset_name
-0002e990: 7d2d 7b73 706c 6974 7d2d 7b6c 616e 6775  }-{split}-{langu
-0002e9a0: 6167 657d 2e74 7376 220a 2020 2020 2020  age}.tsv".      
-0002e9b0: 2020 2020 2020 2020 2020 7365 6c66 2e70            self.p
-0002e9c0: 7265 7072 6f63 5f66 6e28 0a20 2020 2020  reproc_fn(.     
-0002e9d0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-0002e9e0: 6174 615f 666f 6c64 6572 202f 2022 6f72  ata_folder / "or
-0002e9f0: 6967 696e 616c 2220 2f20 6f72 6967 696e  iginal" / origin
-0002ea00: 616c 5f66 696c 656e 616d 652c 0a20 2020  al_filename,.   
-0002ea10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002ea20: 206e 6577 5f64 6174 615f 666f 6c64 6572   new_data_folder
-0002ea30: 202f 2066 227b 7370 6c69 747d 2e74 7874   / f"{split}.txt
-0002ea40: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
-0002ea50: 2020 2020 2020 2065 6f73 5f6d 6172 6b65         eos_marke
-0002ea60: 722c 0a20 2020 2020 2020 2020 2020 2020  r,.             
-0002ea70: 2020 2020 2020 2064 6f63 756d 656e 745f         document_
-0002ea80: 7365 7061 7261 746f 722c 0a20 2020 2020  separator,.     
-0002ea90: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0002eaa0: 6464 5f64 6f63 756d 656e 745f 7365 7061  dd_document_sepa
-0002eab0: 7261 746f 722c 0a20 2020 2020 2020 2020  rator,.         
-0002eac0: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-0002ead0: 2020 7375 7065 7228 292e 5f5f 696e 6974    super().__init
-0002eae0: 5f5f 280a 2020 2020 2020 2020 2020 2020  __(.            
-0002eaf0: 6e65 775f 6461 7461 5f66 6f6c 6465 722c  new_data_folder,
-0002eb00: 0a20 2020 2020 2020 2020 2020 2063 6f6c  .            col
-0002eb10: 756d 6e73 2c0a 2020 2020 2020 2020 2020  umns,.          
-0002eb20: 2020 7472 6169 6e5f 6669 6c65 3d74 7261    train_file=tra
-0002eb30: 696e 5f66 696c 652c 0a20 2020 2020 2020  in_file,.       
-0002eb40: 2020 2020 2064 6576 5f66 696c 653d 6465       dev_file=de
-0002eb50: 765f 6669 6c65 2c0a 2020 2020 2020 2020  v_file,.        
-0002eb60: 2020 2020 7465 7374 5f66 696c 653d 7465      test_file=te
-0002eb70: 7374 5f66 696c 652c 0a20 2020 2020 2020  st_file,.       
-0002eb80: 2020 2020 2069 6e5f 6d65 6d6f 7279 3d69       in_memory=i
-0002eb90: 6e5f 6d65 6d6f 7279 2c0a 2020 2020 2020  n_memory,.      
-0002eba0: 2020 2020 2020 646f 6375 6d65 6e74 5f73        document_s
-0002ebb0: 6570 6172 6174 6f72 5f74 6f6b 656e 3d22  eparator_token="
-0002ebc0: 2d44 4f43 5354 4152 542d 222c 0a20 2020  -DOCSTART-",.   
-0002ebd0: 2020 2020 2020 2020 2073 6b69 705f 6669           skip_fi
-0002ebe0: 7273 745f 6c69 6e65 3d54 7275 652c 0a20  rst_line=True,. 
-0002ebf0: 2020 2020 2020 2020 2020 2063 6f6c 756d             colum
-0002ec00: 6e5f 6465 6c69 6d69 7465 723d 225c 7422  n_delimiter="\t"
-0002ec10: 2c0a 2020 2020 2020 2020 2020 2020 636f  ,.            co
-0002ec20: 6d6d 656e 745f 7379 6d62 6f6c 3d22 2320  mment_symbol="# 
-0002ec30: 222c 0a20 2020 2020 2020 2020 2020 2073  ",.            s
-0002ec40: 616d 706c 655f 6d69 7373 696e 675f 7370  ample_missing_sp
-0002ec50: 6c69 7473 3d73 616d 706c 655f 6d69 7373  lits=sample_miss
-0002ec60: 696e 675f 7370 6c69 7473 2c0a 2020 2020  ing_splits,.    
-0002ec70: 2020 2020 2020 2020 2a2a 636f 7270 7573          **corpus
-0002ec80: 6172 6773 2c0a 2020 2020 2020 2020 290a  args,.        ).
-0002ec90: 0a0a 636c 6173 7320 4e45 525f 4943 4441  ..class NER_ICDA
-0002eca0: 525f 4555 524f 5045 414e 4128 436f 6c75  R_EUROPEANA(Colu
-0002ecb0: 6d6e 436f 7270 7573 293a 0a20 2020 2064  mnCorpus):.    d
-0002ecc0: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
-0002ecd0: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
-0002ece0: 2020 206c 616e 6775 6167 653a 2073 7472     language: str
-0002ecf0: 2c0a 2020 2020 2020 2020 6261 7365 5f70  ,.        base_p
-0002ed00: 6174 683a 204f 7074 696f 6e61 6c5b 556e  ath: Optional[Un
-0002ed10: 696f 6e5b 7374 722c 2050 6174 685d 5d20  ion[str, Path]] 
-0002ed20: 3d20 4e6f 6e65 2c0a 2020 2020 2020 2020  = None,.        
-0002ed30: 696e 5f6d 656d 6f72 793a 2062 6f6f 6c20  in_memory: bool 
-0002ed40: 3d20 5472 7565 2c0a 2020 2020 2020 2020  = True,.        
-0002ed50: 2a2a 636f 7270 7573 6172 6773 2c0a 2020  **corpusargs,.  
-0002ed60: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-0002ed70: 2020 2020 2022 2222 496e 6974 6961 6c69       """Initiali
-0002ed80: 7a65 2074 6865 2049 4344 4152 2045 7572  ze the ICDAR Eur
-0002ed90: 6f70 6561 6e61 204e 4552 2064 6174 6173  opeana NER datas
-0002eda0: 6574 2e0a 0a20 2020 2020 2020 2054 6865  et...        The
-0002edb0: 2064 6174 6173 6574 2069 7320 6261 7365   dataset is base
-0002edc0: 6420 6f6e 2074 6865 2046 7265 6e63 6820  d on the French 
-0002edd0: 616e 6420 4475 7463 6820 4575 726f 7065  and Dutch Europe
-0002ede0: 616e 6120 4e45 5220 636f 7270 6f72 610a  ana NER corpora.
-0002edf0: 2020 2020 2020 2020 6672 6f6d 2074 6865          from the
-0002ee00: 2045 7572 6f70 6561 6e61 204e 6577 7370   Europeana Newsp
-0002ee10: 6170 6572 7320 4e45 5220 6461 7461 7365  apers NER datase
-0002ee20: 7420 2868 7474 7073 3a2f 2f6c 6162 2e6b  t (https://lab.k
-0002ee30: 622e 6e6c 2f64 6174 6173 6574 2f65 7572  b.nl/dataset/eur
-0002ee40: 6f70 6561 6e61 2d6e 6577 7370 6170 6572  opeana-newspaper
-0002ee50: 732d 6e65 7229 2c20 7769 7468 2061 6464  s-ner), with add
-0002ee60: 6974 696f 6e61 6c0a 2020 2020 2020 2020  itional.        
-0002ee70: 7072 6570 726f 6365 7373 696e 6720 7374  preprocessing st
-0002ee80: 6570 7320 6265 696e 6720 7065 7266 6f72  eps being perfor
-0002ee90: 6d65 6420 2873 656e 7465 6e63 6520 7370  med (sentence sp
-0002eea0: 6c69 7474 696e 672c 2070 756e 6374 7561  litting, punctua
-0002eeb0: 7469 6f6e 206e 6f72 6d61 6c69 7a69 6e67  tion normalizing
-0002eec0: 2c20 7472 6169 6e69 6e67 2f64 6576 656c  , training/devel
-0002eed0: 6f70 6d65 6e74 2f74 6573 7420 7370 6c69  opment/test spli
-0002eee0: 7473 292e 0a20 2020 2020 2020 2054 6865  ts)..        The
-0002eef0: 2072 6573 756c 7469 6e67 2064 6174 6173   resulting datas
-0002ef00: 6574 2069 7320 7265 6c65 6173 6564 2069  et is released i
-0002ef10: 6e20 7468 6520 2244 6174 6120 4365 6e74  n the "Data Cent
-0002ef20: 7269 6320 446f 6d61 696e 2041 6461 7074  ric Domain Adapt
-0002ef30: 6174 696f 6e20 666f 7220 4869 7374 6f72  ation for Histor
-0002ef40: 6963 616c 2054 6578 7420 7769 7468 204f  ical Text with O
-0002ef50: 4352 2045 7272 6f72 7322 2049 4344 4152  CR Errors" ICDAR
-0002ef60: 2070 6170 6572 0a20 2020 2020 2020 2062   paper.        b
-0002ef70: 7920 4c75 6973 6120 4dc3 a472 7a2c 2053  y Luisa M..rz, S
-0002ef80: 7465 6661 6e20 5363 6877 6574 6572 2c20  tefan Schweter, 
-0002ef90: 4e69 6e61 2050 6f65 726e 6572 2c20 4265  Nina Poerner, Be
-0002efa0: 6e6a 616d 696e 2052 6f74 6820 616e 6420  njamin Roth and 
-0002efb0: 4869 6e72 6963 6820 5363 68c3 bc74 7a65  Hinrich Sch..tze
-0002efc0: 2e0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
-0002efd0: 206c 616e 6775 6167 653a 204c 616e 6775   language: Langu
-0002efe0: 6167 6520 666f 7220 6120 7375 7070 6f72  age for a suppor
-0002eff0: 7465 6420 6461 7461 7365 742e 2053 7570  ted dataset. Sup
-0002f000: 706f 7274 6564 206c 616e 6775 6167 6573  ported languages
-0002f010: 2061 7265 2022 6672 2220 2846 7265 6e63   are "fr" (Frenc
-0002f020: 6829 2061 6e64 2022 6e6c 2220 2844 7574  h) and "nl" (Dut
-0002f030: 6368 292e 0a20 2020 2020 2020 203a 7061  ch)..        :pa
-0002f040: 7261 6d20 6261 7365 5f70 6174 683a 2044  ram base_path: D
-0002f050: 6566 6175 6c74 2069 7320 4e6f 6e65 2c20  efault is None, 
-0002f060: 6d65 616e 696e 6720 7468 6174 2063 6f72  meaning that cor
-0002f070: 7075 7320 6765 7473 2061 7574 6f2d 646f  pus gets auto-do
-0002f080: 776e 6c6f 6164 6564 2061 6e64 206c 6f61  wnloaded and loa
-0002f090: 6465 642e 2059 6f75 2063 616e 206f 7665  ded. You can ove
-0002f0a0: 7272 6964 6520 7468 6973 0a20 2020 2020  rride this.     
-0002f0b0: 2020 2074 6f20 706f 696e 7420 746f 2061     to point to a
-0002f0c0: 2064 6966 6665 7265 6e74 2066 6f6c 6465   different folde
-0002f0d0: 7220 6275 7420 7479 7069 6361 6c6c 7920  r but typically 
-0002f0e0: 7468 6973 2073 686f 756c 6420 6e6f 7420  this should not 
-0002f0f0: 6265 206e 6563 6573 7361 7279 2e0a 2020  be necessary..  
-0002f100: 2020 2020 2020 3a70 6172 616d 2069 6e5f        :param in_
-0002f110: 6d65 6d6f 7279 3a20 4966 2054 7275 652c  memory: If True,
-0002f120: 206b 6565 7073 2064 6174 6173 6574 2069   keeps dataset i
-0002f130: 6e20 6d65 6d6f 7279 2067 6976 696e 6720  n memory giving 
-0002f140: 7370 6565 6475 7073 2069 6e20 7472 6169  speedups in trai
-0002f150: 6e69 6e67 2e20 4e6f 7420 7265 636f 6d6d  ning. Not recomm
-0002f160: 656e 6465 6420 6475 6520 746f 2068 6561  ended due to hea
-0002f170: 7679 2052 414d 2075 7361 6765 2e0a 2020  vy RAM usage..  
-0002f180: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0002f190: 2020 7375 7070 6f72 7465 645f 6c61 6e67    supported_lang
-0002f1a0: 7561 6765 7320 3d20 5b22 6672 222c 2022  uages = ["fr", "
-0002f1b0: 6e6c 225d 0a0a 2020 2020 2020 2020 6966  nl"]..        if
-0002f1c0: 206c 616e 6775 6167 6520 6e6f 7420 696e   language not in
-0002f1d0: 2073 7570 706f 7274 6564 5f6c 616e 6775   supported_langu
-0002f1e0: 6167 6573 3a0a 2020 2020 2020 2020 2020  ages:.          
-0002f1f0: 2020 6c6f 672e 6572 726f 7228 6622 4c61    log.error(f"La
-0002f200: 6e67 7561 6765 2027 7b6c 616e 6775 6167  nguage '{languag
-0002f210: 657d 2720 6973 206e 6f74 2069 6e20 6c69  e}' is not in li
-0002f220: 7374 206f 6620 7375 7070 6f72 7465 6420  st of supported 
-0002f230: 6c61 6e67 7561 6765 7321 2229 0a20 2020  languages!").   
-0002f240: 2020 2020 2020 2020 206c 6f67 2e65 7272           log.err
-0002f250: 6f72 2866 2253 7570 706f 7274 6564 2061  or(f"Supported a
-0002f260: 7265 2027 7b73 7570 706f 7274 6564 5f6c  re '{supported_l
-0002f270: 616e 6775 6167 6573 7d27 2122 290a 2020  anguages}'!").  
-0002f280: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-0002f290: 4578 6365 7074 696f 6e0a 0a20 2020 2020  Exception..     
-0002f2a0: 2020 2062 6173 655f 7061 7468 203d 206b     base_path = k
-0002f2b0: 6f6c 6962 7269 2e63 6163 6865 5f72 6f6f  olibri.cache_roo
-0002f2c0: 7420 2f20 2264 6174 6173 6574 7322 2069  t / "datasets" i
-0002f2d0: 6620 6e6f 7420 6261 7365 5f70 6174 6820  f not base_path 
-0002f2e0: 656c 7365 2050 6174 6828 6261 7365 5f70  else Path(base_p
-0002f2f0: 6174 6829 0a0a 2020 2020 2020 2020 2320  ath)..        # 
-0002f300: 636f 6c75 6d6e 2066 6f72 6d61 740a 2020  column format.  
-0002f310: 2020 2020 2020 636f 6c75 6d6e 7320 3d20        columns = 
-0002f320: 7b30 3a20 2274 6578 7422 2c20 313a 2022  {0: "text", 1: "
-0002f330: 6e65 7222 7d0a 0a20 2020 2020 2020 2023  ner"}..        #
-0002f340: 2074 6869 7320 6461 7461 7365 7420 6e61   this dataset na
-0002f350: 6d65 0a20 2020 2020 2020 2064 6174 6173  me.        datas
-0002f360: 6574 5f6e 616d 6520 3d20 7365 6c66 2e5f  et_name = self._
-0002f370: 5f63 6c61 7373 5f5f 2e5f 5f6e 616d 655f  _class__.__name_
-0002f380: 5f2e 6c6f 7765 7228 290a 0a20 2020 2020  _.lower()..     
-0002f390: 2020 2064 6174 615f 666f 6c64 6572 203d     data_folder =
-0002f3a0: 2062 6173 655f 7061 7468 202f 2064 6174   base_path / dat
-0002f3b0: 6173 6574 5f6e 616d 6520 2f20 6c61 6e67  aset_name / lang
-0002f3c0: 7561 6765 0a0a 2020 2020 2020 2020 2320  uage..        # 
-0002f3d0: 646f 776e 6c6f 6164 2064 6174 6120 6966  download data if
-0002f3e0: 206e 6563 6573 7361 7279 0a20 2020 2020   necessary.     
-0002f3f0: 2020 2067 6974 6875 625f 7061 7468 203d     github_path =
-0002f400: 2022 6874 7470 733a 2f2f 7261 772e 6769   "https://raw.gi
-0002f410: 7468 7562 7573 6572 636f 6e74 656e 742e  thubusercontent.
-0002f420: 636f 6d2f 7374 6566 616e 2d69 742f 6869  com/stefan-it/hi
-0002f430: 7374 6f72 6963 2d64 6f6d 6169 6e2d 6164  storic-domain-ad
-0002f440: 6170 7461 7469 6f6e 2d69 6364 6172 2f6d  aptation-icdar/m
-0002f450: 6169 6e2f 6461 7461 220a 0a20 2020 2020  ain/data"..     
-0002f460: 2020 2066 6f72 2073 706c 6974 2069 6e20     for split in 
-0002f470: 5b22 7472 6169 6e22 2c20 2264 6576 222c  ["train", "dev",
-0002f480: 2022 7465 7374 225d 3a0a 2020 2020 2020   "test"]:.      
-0002f490: 2020 2020 2020 6361 6368 6564 5f70 6174        cached_pat
-0002f4a0: 6828 6622 7b67 6974 6875 625f 7061 7468  h(f"{github_path
-0002f4b0: 7d2f 7b6c 616e 6775 6167 657d 2f7b 7370  }/{language}/{sp
-0002f4c0: 6c69 747d 2e74 7874 222c 2064 6174 615f  lit}.txt", data_
-0002f4d0: 666f 6c64 6572 290a 0a20 2020 2020 2020  folder)..       
-0002f4e0: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
-0002f4f0: 5f28 0a20 2020 2020 2020 2020 2020 2064  _(.            d
-0002f500: 6174 615f 666f 6c64 6572 2c0a 2020 2020  ata_folder,.    
-0002f510: 2020 2020 2020 2020 636f 6c75 6d6e 732c          columns,
-0002f520: 0a20 2020 2020 2020 2020 2020 2069 6e5f  .            in_
-0002f530: 6d65 6d6f 7279 3d69 6e5f 6d65 6d6f 7279  memory=in_memory
-0002f540: 2c0a 2020 2020 2020 2020 2020 2020 7472  ,.            tr
-0002f550: 6169 6e5f 6669 6c65 3d22 7472 6169 6e2e  ain_file="train.
-0002f560: 7478 7422 2c0a 2020 2020 2020 2020 2020  txt",.          
-0002f570: 2020 6465 765f 6669 6c65 3d22 6465 762e    dev_file="dev.
-0002f580: 7478 7422 2c0a 2020 2020 2020 2020 2020  txt",.          
-0002f590: 2020 7465 7374 5f66 696c 653d 2274 6573    test_file="tes
-0002f5a0: 742e 7478 7422 2c0a 2020 2020 2020 2020  t.txt",.        
-0002f5b0: 2020 2020 636f 6d6d 656e 745f 7379 6d62      comment_symb
-0002f5c0: 6f6c 3d22 2320 222c 0a20 2020 2020 2020  ol="# ",.       
-0002f5d0: 2020 2020 2063 6f6c 756d 6e5f 6465 6c69       column_deli
-0002f5e0: 6d69 7465 723d 225c 7422 2c0a 2020 2020  miter="\t",.    
-0002f5f0: 2020 2020 2020 2020 2a2a 636f 7270 7573          **corpus
-0002f600: 6172 6773 2c0a 2020 2020 2020 2020 290a  args,.        ).
-0002f610: 0a0a 636c 6173 7320 4e45 525f 4e45 524d  ..class NER_NERM
-0002f620: 5544 284d 756c 7469 436f 7270 7573 293a  UD(MultiCorpus):
-0002f630: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
-0002f640: 5f28 0a20 2020 2020 2020 2073 656c 662c  _(.        self,
-0002f650: 0a20 2020 2020 2020 2064 6f6d 6169 6e73  .        domains
-0002f660: 3a20 556e 696f 6e5b 7374 722c 204c 6973  : Union[str, Lis
-0002f670: 745b 7374 725d 5d20 3d20 2261 6c6c 222c  t[str]] = "all",
-0002f680: 0a20 2020 2020 2020 2062 6173 655f 7061  .        base_pa
-0002f690: 7468 3a20 4f70 7469 6f6e 616c 5b55 6e69  th: Optional[Uni
-0002f6a0: 6f6e 5b73 7472 2c20 5061 7468 5d5d 203d  on[str, Path]] =
-0002f6b0: 204e 6f6e 652c 0a20 2020 2020 2020 2069   None,.        i
-0002f6c0: 6e5f 6d65 6d6f 7279 3a20 626f 6f6c 203d  n_memory: bool =
-0002f6d0: 2046 616c 7365 2c0a 2020 2020 2020 2020   False,.        
-0002f6e0: 2a2a 636f 7270 7573 6172 6773 2c0a 2020  **corpusargs,.  
-0002f6f0: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-0002f700: 2020 2020 2022 2222 496e 6974 696c 697a       """Initiliz
-0002f710: 6520 7468 6520 4e45 524d 7544 2032 3032  e the NERMuD 202
-0002f720: 3320 6461 7461 7365 742e 0a0a 2020 2020  3 dataset...    
-0002f730: 2020 2020 4e45 524d 7544 2069 7320 6120      NERMuD is a 
-0002f740: 7461 736b 2070 7265 7365 6e74 6564 2061  task presented a
-0002f750: 7420 4556 414c 4954 4120 3230 3233 2063  t EVALITA 2023 c
-0002f760: 6f6e 7369 7374 696e 6720 696e 2074 6865  onsisting in the
-0002f770: 2065 7874 7261 6374 696f 6e20 616e 6420   extraction and 
-0002f780: 636c 6173 7369 6669 6361 7469 6f6e 0a20  classification. 
-0002f790: 2020 2020 2020 206f 6620 6e61 6d65 642d         of named-
-0002f7a0: 656e 7469 7469 6573 2069 6e20 6120 646f  entities in a do
-0002f7b0: 6375 6d65 6e74 2c20 7375 6368 2061 7320  cument, such as 
-0002f7c0: 7065 7273 6f6e 732c 206f 7267 616e 697a  persons, organiz
-0002f7d0: 6174 696f 6e73 2c20 616e 6420 6c6f 6361  ations, and loca
-0002f7e0: 7469 6f6e 732e 204e 4552 4d75 4420 3230  tions. NERMuD 20
-0002f7f0: 3233 2077 696c 6c20 696e 636c 7564 6520  23 will include 
-0002f800: 7477 6f20 6469 6666 6572 656e 7420 7375  two different su
-0002f810: 622d 7461 736b 733a 0a0a 2020 2020 2020  b-tasks:..      
-0002f820: 2020 2d20 446f 6d61 696e 2d61 676e 6f73    - Domain-agnos
-0002f830: 7469 6320 636c 6173 7369 6669 6361 7469  tic classificati
-0002f840: 6f6e 2028 4441 4329 2e20 5061 7274 6963  on (DAC). Partic
-0002f850: 6970 616e 7473 2077 696c 6c20 6265 2061  ipants will be a
-0002f860: 736b 6564 2074 6f20 7365 6c65 6374 2061  sked to select a
-0002f870: 6e64 2063 6c61 7373 6966 7920 656e 7469  nd classify enti
-0002f880: 7469 6573 2061 6d6f 6e67 2074 6872 6565  ties among three
-0002f890: 2063 6174 6567 6f72 6965 730a 2020 2020   categories.    
-0002f8a0: 2020 2020 2020 2870 6572 736f 6e2c 206f        (person, o
-0002f8b0: 7267 616e 697a 6174 696f 6e2c 206c 6f63  rganization, loc
-0002f8c0: 6174 696f 6e29 2069 6e20 6469 6666 6572  ation) in differ
-0002f8d0: 656e 7420 7479 7065 7320 6f66 2074 6578  ent types of tex
-0002f8e0: 7473 2028 6e65 7773 2c20 6669 6374 696f  ts (news, fictio
-0002f8f0: 6e2c 2070 6f6c 6974 6963 616c 2073 7065  n, political spe
-0002f900: 6563 6865 7329 2075 7369 6e67 206f 6e65  eches) using one
-0002f910: 2073 696e 676c 6520 6765 6e65 7261 6c20   single general 
-0002f920: 6d6f 6465 6c2e 0a0a 2020 2020 2020 2020  model...        
-0002f930: 2d20 446f 6d61 696e 2d73 7065 6369 6669  - Domain-specifi
-0002f940: 6320 636c 6173 7369 6669 6361 7469 6f6e  c classification
-0002f950: 2028 4453 4329 2e20 5061 7274 6963 6970   (DSC). Particip
-0002f960: 616e 7473 2077 696c 6c20 6265 2061 736b  ants will be ask
-0002f970: 6564 2074 6f20 6465 706c 6f79 2061 2064  ed to deploy a d
-0002f980: 6966 6665 7265 6e74 206d 6f64 656c 2066  ifferent model f
-0002f990: 6f72 2065 6163 6820 6f66 2074 6865 2061  or each of the a
-0002f9a0: 626f 7665 2074 7970 6573 2c0a 2020 2020  bove types,.    
-0002f9b0: 2020 2020 2020 7472 7969 6e67 2074 6f20        trying to 
-0002f9c0: 696e 6372 6561 7365 2074 6865 2061 6363  increase the acc
-0002f9d0: 7572 6163 7920 666f 7220 6561 6368 2063  uracy for each c
-0002f9e0: 6f6e 7369 6465 7265 6420 7479 7065 2e0a  onsidered type..
-0002f9f0: 0a20 2020 2020 2020 2041 7267 733a 0a20  .        Args:. 
-0002fa00: 2020 2020 2020 2020 2020 2064 6f6d 6169             domai
-0002fa10: 6e73 3a20 446f 6d61 696e 7320 746f 2062  ns: Domains to b
-0002fa20: 6520 7573 6564 2e20 5375 7070 6f72 7465  e used. Supporte
-0002fa30: 6420 6172 6520 2257 4e22 2028 5769 6b69  d are "WN" (Wiki
-0002fa40: 6e65 7773 292c 2022 4649 4322 2028 6669  news), "FIC" (fi
-0002fa50: 6374 696f 6e29 2c20 2241 4447 2220 2844  ction), "ADG" (D
-0002fa60: 6520 4761 7370 6572 6920 7375 6273 6574  e Gasperi subset
-0002fa70: 2920 616e 6420 2261 6c6c 222e 0a20 2020  ) and "all"..   
-0002fa80: 2020 2020 2020 2020 2062 6173 655f 7061           base_pa
-0002fa90: 7468 3a20 4465 6661 756c 7420 6973 204e  th: Default is N
-0002faa0: 6f6e 652c 206d 6561 6e69 6e67 2074 6861  one, meaning tha
-0002fab0: 7420 636f 7270 7573 2067 6574 7320 6175  t corpus gets au
-0002fac0: 746f 2d64 6f77 6e6c 6f61 6465 6420 616e  to-downloaded an
-0002fad0: 6420 6c6f 6164 6564 2e20 596f 7520 6361  d loaded. You ca
-0002fae0: 6e20 6f76 6572 7269 6465 2074 6869 7320  n override this 
-0002faf0: 746f 2070 6f69 6e74 2074 6f20 6120 6469  to point to a di
-0002fb00: 6666 6572 656e 7420 666f 6c64 6572 2062  fferent folder b
-0002fb10: 7574 2074 7970 6963 616c 6c79 2074 6869  ut typically thi
-0002fb20: 7320 7368 6f75 6c64 206e 6f74 2062 6520  s should not be 
-0002fb30: 6e65 6365 7373 6172 792e 0a20 2020 2020  necessary..     
-0002fb40: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
-0002fb50: 3a20 4966 2054 7275 652c 206b 6565 7073  : If True, keeps
-0002fb60: 2064 6174 6173 6574 2069 6e20 6d65 6d6f   dataset in memo
-0002fb70: 7279 2067 6976 696e 6720 7370 6565 6475  ry giving speedu
-0002fb80: 7073 2069 6e20 7472 6169 6e69 6e67 2e20  ps in training. 
-0002fb90: 4e6f 7420 7265 636f 6d6d 656e 6465 6420  Not recommended 
-0002fba0: 6475 6520 746f 2068 6561 7679 2052 414d  due to heavy RAM
-0002fbb0: 2075 7361 6765 2e0a 2020 2020 2020 2020   usage..        
-0002fbc0: 2222 220a 2020 2020 2020 2020 7375 7070  """.        supp
-0002fbd0: 6f72 7465 645f 646f 6d61 696e 7320 3d20  orted_domains = 
-0002fbe0: 5b22 574e 222c 2022 4649 4322 2c20 2241  ["WN", "FIC", "A
-0002fbf0: 4447 225d 0a0a 2020 2020 2020 2020 6966  DG"]..        if
-0002fc00: 2069 7369 6e73 7461 6e63 6528 646f 6d61   isinstance(doma
-0002fc10: 696e 732c 2073 7472 2920 616e 6420 646f  ins, str) and do
-0002fc20: 6d61 696e 7320 3d3d 2022 616c 6c22 3a0a  mains == "all":.
-0002fc30: 2020 2020 2020 2020 2020 2020 646f 6d61              doma
-0002fc40: 696e 7320 3d20 7375 7070 6f72 7465 645f  ins = supported_
-0002fc50: 646f 6d61 696e 730a 0a20 2020 2020 2020  domains..       
-0002fc60: 2069 6620 6973 696e 7374 616e 6365 2864   if isinstance(d
-0002fc70: 6f6d 6169 6e73 2c20 7374 7229 3a0a 2020  omains, str):.  
-0002fc80: 2020 2020 2020 2020 2020 646f 6d61 696e            domain
-0002fc90: 7320 3d20 5b64 6f6d 6169 6e73 5d0a 0a20  s = [domains].. 
-0002fca0: 2020 2020 2020 2062 6173 655f 7061 7468         base_path
-0002fcb0: 203d 206b 6f6c 6962 7269 2e63 6163 6865   = kolibri.cache
-0002fcc0: 5f72 6f6f 7420 2f20 2264 6174 6173 6574  _root / "dataset
-0002fcd0: 7322 2069 6620 6e6f 7420 6261 7365 5f70  s" if not base_p
-0002fce0: 6174 6820 656c 7365 2050 6174 6828 6261  ath else Path(ba
-0002fcf0: 7365 5f70 6174 6829 0a0a 2020 2020 2020  se_path)..      
-0002fd00: 2020 2320 636f 6c75 6d6e 2066 6f72 6d61    # column forma
-0002fd10: 740a 2020 2020 2020 2020 636f 6c75 6d6e  t.        column
-0002fd20: 7320 3d20 7b30 3a20 2274 6578 7422 2c20  s = {0: "text", 
-0002fd30: 313a 2022 6e65 7222 7d0a 0a20 2020 2020  1: "ner"}..     
-0002fd40: 2020 2023 2074 6869 7320 6461 7461 7365     # this datase
-0002fd50: 7420 6e61 6d65 0a20 2020 2020 2020 2064  t name.        d
-0002fd60: 6174 6173 6574 5f6e 616d 6520 3d20 7365  ataset_name = se
-0002fd70: 6c66 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e  lf.__class__.__n
-0002fd80: 616d 655f 5f2e 6c6f 7765 7228 290a 0a20  ame__.lower().. 
-0002fd90: 2020 2020 2020 2064 6174 615f 666f 6c64         data_fold
-0002fda0: 6572 203d 2062 6173 655f 7061 7468 202f  er = base_path /
-0002fdb0: 2064 6174 6173 6574 5f6e 616d 650a 0a20   dataset_name.. 
-0002fdc0: 2020 2020 2020 2063 6f72 706f 7261 3a20         corpora: 
-0002fdd0: 4c69 7374 5b43 6f72 7075 735d 203d 205b  List[Corpus] = [
-0002fde0: 5d0a 0a20 2020 2020 2020 2067 6974 6875  ]..        githu
-0002fdf0: 625f 7061 7468 203d 2022 6874 7470 733a  b_path = "https:
-0002fe00: 2f2f 7261 772e 6769 7468 7562 7573 6572  //raw.githubuser
-0002fe10: 636f 6e74 656e 742e 636f 6d2f 6468 6662  content.com/dhfb
-0002fe20: 6b2f 4b49 4e44 2f6d 6169 6e2f 6576 616c  k/KIND/main/eval
-0002fe30: 6974 612d 3230 3233 220a 0a20 2020 2020  ita-2023"..     
-0002fe40: 2020 2066 6f72 2064 6f6d 6169 6e20 696e     for domain in
-0002fe50: 2064 6f6d 6169 6e73 3a0a 2020 2020 2020   domains:.      
-0002fe60: 2020 2020 2020 6966 2064 6f6d 6169 6e20        if domain 
-0002fe70: 6e6f 7420 696e 2073 7570 706f 7274 6564  not in supported
-0002fe80: 5f64 6f6d 6169 6e73 3a0a 2020 2020 2020  _domains:.      
-0002fe90: 2020 2020 2020 2020 2020 6c6f 672e 6572            log.er
-0002fea0: 726f 7228 6622 446f 6d61 696e 2027 7b64  ror(f"Domain '{d
-0002feb0: 6f6d 6169 6e7d 2720 6973 206e 6f74 2069  omain}' is not i
-0002fec0: 6e20 6c69 7374 206f 6620 7375 7070 6f72  n list of suppor
-0002fed0: 7465 6420 646f 6d61 696e 7321 2229 0a20  ted domains!"). 
-0002fee0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-0002fef0: 6f67 2e65 7272 6f72 2866 2253 7570 706f  og.error(f"Suppo
-0002ff00: 7274 6564 2061 7265 2027 7b73 7570 706f  rted are '{suppo
-0002ff10: 7274 6564 5f64 6f6d 6169 6e73 7d27 2122  rted_domains}'!"
-0002ff20: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0002ff30: 2020 7261 6973 6520 4578 6365 7074 696f    raise Exceptio
-0002ff40: 6e0a 0a20 2020 2020 2020 2020 2020 2064  n..            d
-0002ff50: 6f6d 6169 6e5f 666f 6c64 6572 203d 2064  omain_folder = d
-0002ff60: 6174 615f 666f 6c64 6572 202f 2064 6f6d  ata_folder / dom
-0002ff70: 6169 6e2e 6c6f 7765 7228 290a 0a20 2020  ain.lower()..   
-0002ff80: 2020 2020 2020 2020 2066 6f72 2073 706c           for spl
-0002ff90: 6974 2069 6e20 5b22 7472 6169 6e22 2c20  it in ["train", 
-0002ffa0: 2264 6576 225d 3a0a 2020 2020 2020 2020  "dev"]:.        
-0002ffb0: 2020 2020 2020 2020 6361 6368 6564 5f70          cached_p
-0002ffc0: 6174 6828 6622 7b67 6974 6875 625f 7061  ath(f"{github_pa
-0002ffd0: 7468 7d2f 7b64 6f6d 6169 6e7d 5f7b 7370  th}/{domain}_{sp
-0002ffe0: 6c69 747d 2e74 7376 222c 2064 6f6d 6169  lit}.tsv", domai
-0002fff0: 6e5f 666f 6c64 6572 290a 0a20 2020 2020  n_folder)..     
-00030000: 2020 2020 2020 2063 6f72 7075 7320 3d20         corpus = 
-00030010: 436f 6c75 6d6e 436f 7270 7573 280a 2020  ColumnCorpus(.  
-00030020: 2020 2020 2020 2020 2020 2020 2020 6461                da
-00030030: 7461 5f66 6f6c 6465 723d 646f 6d61 696e  ta_folder=domain
-00030040: 5f66 6f6c 6465 722c 0a20 2020 2020 2020  _folder,.       
-00030050: 2020 2020 2020 2020 2074 7261 696e 5f66           train_f
-00030060: 696c 653d 6622 7b64 6f6d 6169 6e7d 5f74  ile=f"{domain}_t
-00030070: 7261 696e 2e74 7376 222c 0a20 2020 2020  rain.tsv",.     
-00030080: 2020 2020 2020 2020 2020 2064 6576 5f66             dev_f
-00030090: 696c 653d 6622 7b64 6f6d 6169 6e7d 5f64  ile=f"{domain}_d
-000300a0: 6576 2e74 7376 222c 0a20 2020 2020 2020  ev.tsv",.       
-000300b0: 2020 2020 2020 2020 2074 6573 745f 6669           test_fi
-000300c0: 6c65 3d4e 6f6e 652c 0a20 2020 2020 2020  le=None,.       
-000300d0: 2020 2020 2020 2020 2063 6f6c 756d 6e5f           column_
-000300e0: 666f 726d 6174 3d63 6f6c 756d 6e73 2c0a  format=columns,.
-000300f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00030100: 696e 5f6d 656d 6f72 793d 696e 5f6d 656d  in_memory=in_mem
-00030110: 6f72 792c 0a20 2020 2020 2020 2020 2020  ory,.           
-00030120: 2020 2020 2073 616d 706c 655f 6d69 7373       sample_miss
-00030130: 696e 675f 7370 6c69 7473 3d46 616c 7365  ing_splits=False
-00030140: 2c20 2023 204e 6f20 7465 7374 2064 6174  ,  # No test dat
-00030150: 6120 6973 2061 7661 696c 6162 6c65 2c20  a is available, 
-00030160: 736f 2064 6f20 6e6f 7420 7368 7269 6e6b  so do not shrink
-00030170: 2064 6576 2064 6174 6120 666f 7220 7368   dev data for sh
-00030180: 6172 6564 2074 6173 6b20 7072 6570 6172  ared task prepar
-00030190: 6174 696f 6e21 0a20 2020 2020 2020 2020  ation!.         
-000301a0: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
-000301b0: 7267 732c 0a20 2020 2020 2020 2020 2020  rgs,.           
-000301c0: 2029 0a20 2020 2020 2020 2020 2020 2063   ).            c
-000301d0: 6f72 706f 7261 2e61 7070 656e 6428 636f  orpora.append(co
-000301e0: 7270 7573 290a 2020 2020 2020 2020 7375  rpus).        su
-000301f0: 7065 7228 292e 5f5f 696e 6974 5f5f 280a  per().__init__(.
-00030200: 2020 2020 2020 2020 2020 2020 636f 7270              corp
-00030210: 6f72 612c 0a20 2020 2020 2020 2020 2020  ora,.           
-00030220: 2073 616d 706c 655f 6d69 7373 696e 675f   sample_missing_
-00030230: 7370 6c69 7473 3d46 616c 7365 2c0a 2020  splits=False,.  
-00030240: 2020 2020 2020 2020 2020 6e61 6d65 3d22            name="
-00030250: 6e65 726d 7564 222c 0a20 2020 2020 2020  nermud",.       
-00030260: 2029 0a0a 0a63 6c61 7373 204e 4552 5f47   )...class NER_G
-00030270: 4552 4d41 4e5f 4d4f 4249 4528 436f 6c75  ERMAN_MOBIE(Colu
-00030280: 6d6e 436f 7270 7573 293a 0a20 2020 2064  mnCorpus):.    d
-00030290: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
-000302a0: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
-000302b0: 2020 2062 6173 655f 7061 7468 3a20 4f70     base_path: Op
-000302c0: 7469 6f6e 616c 5b55 6e69 6f6e 5b73 7472  tional[Union[str
-000302d0: 2c20 5061 7468 5d5d 203d 204e 6f6e 652c  , Path]] = None,
-000302e0: 0a20 2020 2020 2020 2069 6e5f 6d65 6d6f  .        in_memo
-000302f0: 7279 3a20 626f 6f6c 203d 2054 7275 652c  ry: bool = True,
-00030300: 0a20 2020 2020 2020 202a 2a63 6f72 7075  .        **corpu
-00030310: 7361 7267 732c 0a20 2020 2029 202d 3e20  sargs,.    ) -> 
-00030320: 4e6f 6e65 3a0a 2020 2020 2020 2020 2222  None:.        ""
-00030330: 2249 6e69 7469 616c 697a 6520 7468 6520  "Initialize the 
-00030340: 4765 726d 616e 204d 6f62 4945 204e 4552  German MobIE NER
-00030350: 2064 6174 6173 6574 2e0a 0a20 2020 2020   dataset...     
-00030360: 2020 2054 6865 2047 6572 6d61 6e20 4d6f     The German Mo
-00030370: 6249 4520 4461 7461 7365 7420 7761 7320  bIE Dataset was 
-00030380: 696e 7472 6f64 7563 6564 2069 6e20 7468  introduced in th
-00030390: 6520 4d6f 6249 4520 7061 7065 7220 2868  e MobIE paper (h
-000303a0: 7474 7073 3a2f 2f61 636c 616e 7468 6f6c  ttps://aclanthol
-000303b0: 6f67 792e 6f72 672f 3230 3231 2e6b 6f6e  ogy.org/2021.kon
-000303c0: 7665 6e73 2d31 2e32 322f 292e 0a0a 2020  vens-1.22/)...  
-000303d0: 2020 2020 2020 5468 6973 2069 7320 6120        This is a 
-000303e0: 4765 726d 616e 2d6c 616e 6775 6167 6520  German-language 
-000303f0: 6461 7461 7365 7420 7468 6174 2068 6173  dataset that has
-00030400: 2062 6565 6e20 6875 6d61 6e2d 616e 6e6f   been human-anno
-00030410: 7461 7465 6420 7769 7468 2032 3020 636f  tated with 20 co
-00030420: 6172 7365 2d20 616e 6420 6669 6e65 2d67  arse- and fine-g
-00030430: 7261 696e 6564 2065 6e74 6974 7920 7479  rained entity ty
-00030440: 7065 732c 0a20 2020 2020 2020 2061 6e64  pes,.        and
-00030450: 2069 7420 696e 636c 7564 6573 2065 6e74   it includes ent
-00030460: 6974 7920 6c69 6e6b 696e 6720 696e 666f  ity linking info
-00030470: 726d 6174 696f 6e20 666f 7220 6765 6f67  rmation for geog
-00030480: 7261 7068 6963 616c 6c79 206c 696e 6b61  raphically linka
-00030490: 626c 6520 656e 7469 7469 6573 2e20 5468  ble entities. Th
-000304a0: 6520 6461 7461 7365 7420 636f 6d70 7269  e dataset compri
-000304b0: 7365 7320 332c 3233 320a 2020 2020 2020  ses 3,232.      
-000304c0: 2020 736f 6369 616c 206d 6564 6961 2074    social media t
-000304d0: 6578 7473 2061 6e64 2074 7261 6666 6963  exts and traffic
-000304e0: 2072 6570 6f72 7473 2c20 746f 7461 6c69   reports, totali
-000304f0: 6e67 2039 314b 2074 6f6b 656e 732c 2077  ng 91K tokens, w
-00030500: 6974 6820 3230 2e35 4b20 616e 6e6f 7461  ith 20.5K annota
-00030510: 7465 6420 656e 7469 7469 6573 2c20 6f66  ted entities, of
-00030520: 2077 6869 6368 2031 332e 314b 2061 7265   which 13.1K are
-00030530: 0a20 2020 2020 2020 206c 696e 6b65 6420  .        linked 
-00030540: 746f 2061 206b 6e6f 776c 6564 6765 2062  to a knowledge b
-00030550: 6173 652e 2049 6e20 746f 7461 6c2c 2032  ase. In total, 2
-00030560: 3020 6469 6666 6572 656e 7420 6e61 6d65  0 different name
-00030570: 6420 656e 7469 7469 6573 2061 7265 2061  d entities are a
-00030580: 6e6e 6f74 6174 6564 2e0a 2020 2020 2020  nnotated..      
-00030590: 2020 3a70 6172 616d 2062 6173 655f 7061    :param base_pa
-000305a0: 7468 3a20 4465 6661 756c 7420 6973 204e  th: Default is N
-000305b0: 6f6e 652c 206d 6561 6e69 6e67 2074 6861  one, meaning tha
-000305c0: 7420 636f 7270 7573 2067 6574 7320 6175  t corpus gets au
-000305d0: 746f 2d64 6f77 6e6c 6f61 6465 6420 616e  to-downloaded an
-000305e0: 6420 6c6f 6164 6564 2e20 596f 7520 6361  d loaded. You ca
-000305f0: 6e20 6f76 6572 7269 6465 2074 6869 730a  n override this.
-00030600: 2020 2020 2020 2020 746f 2070 6f69 6e74          to point
-00030610: 2074 6f20 6120 6469 6666 6572 656e 7420   to a different 
-00030620: 666f 6c64 6572 2062 7574 2074 7970 6963  folder but typic
-00030630: 616c 6c79 2074 6869 7320 7368 6f75 6c64  ally this should
-00030640: 206e 6f74 2062 6520 6e65 6365 7373 6172   not be necessar
-00030650: 792e 0a20 2020 2020 2020 203a 7061 7261  y..        :para
-00030660: 6d20 696e 5f6d 656d 6f72 793a 2049 6620  m in_memory: If 
-00030670: 5472 7565 2c20 6b65 6570 7320 6461 7461  True, keeps data
-00030680: 7365 7420 696e 206d 656d 6f72 7920 6769  set in memory gi
-00030690: 7669 6e67 2073 7065 6564 7570 7320 696e  ving speedups in
-000306a0: 2074 7261 696e 696e 672e 204e 6f74 2072   training. Not r
-000306b0: 6563 6f6d 6d65 6e64 6564 2064 7565 2074  ecommended due t
-000306c0: 6f20 6865 6176 7920 5241 4d20 7573 6167  o heavy RAM usag
-000306d0: 652e 0a20 2020 2020 2020 2022 2222 0a20  e..        """. 
-000306e0: 2020 2020 2020 2062 6173 655f 7061 7468         base_path
-000306f0: 203d 206b 6f6c 6962 7269 2e63 6163 6865   = kolibri.cache
-00030700: 5f72 6f6f 7420 2f20 2264 6174 6173 6574  _root / "dataset
-00030710: 7322 2069 6620 6e6f 7420 6261 7365 5f70  s" if not base_p
-00030720: 6174 6820 656c 7365 2050 6174 6828 6261  ath else Path(ba
-00030730: 7365 5f70 6174 6829 0a20 2020 2020 2020  se_path).       
-00030740: 2064 6174 6173 6574 5f6e 616d 6520 3d20   dataset_name = 
-00030750: 7365 6c66 2e5f 5f63 6c61 7373 5f5f 2e5f  self.__class__._
-00030760: 5f6e 616d 655f 5f2e 6c6f 7765 7228 290a  _name__.lower().
-00030770: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
-00030780: 6465 7220 3d20 6261 7365 5f70 6174 6820  der = base_path 
-00030790: 2f20 6461 7461 7365 745f 6e61 6d65 0a20  / dataset_name. 
-000307a0: 2020 2020 2020 2064 6174 615f 7061 7468         data_path
-000307b0: 203d 206b 6f6c 6962 7269 2e63 6163 6865   = kolibri.cache
-000307c0: 5f72 6f6f 7420 2f20 2264 6174 6173 6574  _root / "dataset
-000307d0: 7322 202f 2064 6174 6173 6574 5f6e 616d  s" / dataset_nam
-000307e0: 650a 0a20 2020 2020 2020 2063 6f6c 756d  e..        colum
-000307f0: 6e73 203d 207b 303a 2022 7465 7874 222c  ns = {0: "text",
-00030800: 2033 3a20 226e 6572 227d 0a0a 2020 2020   3: "ner"}..    
-00030810: 2020 2020 7472 6169 6e5f 6461 7461 5f66      train_data_f
-00030820: 696c 6520 3d20 6461 7461 5f70 6174 6820  ile = data_path 
-00030830: 2f20 2274 7261 696e 2e63 6f6e 6c6c 3230  / "train.conll20
-00030840: 3033 220a 2020 2020 2020 2020 6966 206e  03".        if n
-00030850: 6f74 2074 7261 696e 5f64 6174 615f 6669  ot train_data_fi
-00030860: 6c65 2e69 735f 6669 6c65 2829 3a0a 2020  le.is_file():.  
-00030870: 2020 2020 2020 2020 2020 7465 6d70 5f66            temp_f
-00030880: 696c 6520 3d20 6361 6368 6564 5f70 6174  ile = cached_pat
-00030890: 6828 0a20 2020 2020 2020 2020 2020 2020  h(.             
-000308a0: 2020 2022 6874 7470 733a 2f2f 6769 7468     "https://gith
-000308b0: 7562 2e63 6f6d 2f44 464b 492d 4e4c 502f  ub.com/DFKI-NLP/
-000308c0: 4d6f 6249 452f 7261 772f 6d61 7374 6572  MobIE/raw/master
-000308d0: 2f76 315f 3230 3231 3038 3131 2f6e 6572  /v1_20210811/ner
-000308e0: 5f63 6f6e 6c6c 3033 5f66 6f72 6d61 7474  _conll03_formatt
-000308f0: 6564 2e7a 6970 222c 0a20 2020 2020 2020  ed.zip",.       
-00030900: 2020 2020 2020 2020 2050 6174 6828 2264           Path("d
-00030910: 6174 6173 6574 7322 2920 2f20 6461 7461  atasets") / data
-00030920: 7365 745f 6e61 6d65 2c0a 2020 2020 2020  set_name,.      
-00030930: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00030940: 2020 2020 6672 6f6d 207a 6970 6669 6c65      from zipfile
-00030950: 2069 6d70 6f72 7420 5a69 7046 696c 650a   import ZipFile.
-00030960: 0a20 2020 2020 2020 2020 2020 2077 6974  .            wit
-00030970: 6820 5a69 7046 696c 6528 7465 6d70 5f66  h ZipFile(temp_f
-00030980: 696c 652c 2022 7222 2920 6173 207a 6970  ile, "r") as zip
-00030990: 5f66 696c 653a 0a20 2020 2020 2020 2020  _file:.         
-000309a0: 2020 2020 2020 207a 6970 5f66 696c 652e         zip_file.
-000309b0: 6578 7472 6163 7461 6c6c 2870 6174 683d  extractall(path=
-000309c0: 6461 7461 5f70 6174 6829 0a0a 2020 2020  data_path)..    
-000309d0: 2020 2020 7375 7065 7228 292e 5f5f 696e      super().__in
-000309e0: 6974 5f5f 280a 2020 2020 2020 2020 2020  it__(.          
-000309f0: 2020 6461 7461 5f66 6f6c 6465 722c 0a20    data_folder,. 
-00030a00: 2020 2020 2020 2020 2020 2063 6f6c 756d             colum
-00030a10: 6e73 2c0a 2020 2020 2020 2020 2020 2020  ns,.            
-00030a20: 696e 5f6d 656d 6f72 793d 696e 5f6d 656d  in_memory=in_mem
-00030a30: 6f72 792c 0a20 2020 2020 2020 2020 2020  ory,.           
-00030a40: 2063 6f6d 6d65 6e74 5f73 796d 626f 6c3d   comment_symbol=
-00030a50: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
-00030a60: 2020 646f 6375 6d65 6e74 5f73 6570 6172    document_separ
-00030a70: 6174 6f72 5f74 6f6b 656e 3d22 2d44 4f43  ator_token="-DOC
-00030a80: 5354 4152 542d 222c 0a20 2020 2020 2020  START-",.       
-00030a90: 2020 2020 202a 2a63 6f72 7075 7361 7267       **corpusarg
-00030aa0: 732c 0a20 2020 2020 2020 2029 0a0a 0a63  s,.        )...c
-00030ab0: 6c61 7373 204d 4153 414b 4841 5f50 4f53  lass MASAKHA_POS
-00030ac0: 284d 756c 7469 436f 7270 7573 293a 0a20  (MultiCorpus):. 
-00030ad0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-00030ae0: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
-00030af0: 2020 2020 2020 206c 616e 6775 6167 6573         languages
-00030b00: 3a20 556e 696f 6e5b 7374 722c 204c 6973  : Union[str, Lis
-00030b10: 745b 7374 725d 5d20 3d20 2262 616d 222c  t[str]] = "bam",
-00030b20: 0a20 2020 2020 2020 2076 6572 7369 6f6e  .        version
-00030b30: 3a20 7374 7220 3d20 2276 3122 2c0a 2020  : str = "v1",.  
-00030b40: 2020 2020 2020 6261 7365 5f70 6174 683a        base_path:
-00030b50: 204f 7074 696f 6e61 6c5b 556e 696f 6e5b   Optional[Union[
-00030b60: 7374 722c 2050 6174 685d 5d20 3d20 4e6f  str, Path]] = No
-00030b70: 6e65 2c0a 2020 2020 2020 2020 696e 5f6d  ne,.        in_m
-00030b80: 656d 6f72 793a 2062 6f6f 6c20 3d20 5472  emory: bool = Tr
-00030b90: 7565 2c0a 2020 2020 2020 2020 2a2a 636f  ue,.        **co
-00030ba0: 7270 7573 6172 6773 2c0a 2020 2020 2920  rpusargs,.    ) 
-00030bb0: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
-00030bc0: 2022 2222 496e 6974 6961 6c69 7a65 2074   """Initialize t
-00030bd0: 6865 204d 6173 616b 6861 504f 5320 636f  he MasakhaPOS co
-00030be0: 7270 7573 2061 7661 696c 6162 6c65 206f  rpus available o
-00030bf0: 6e20 6874 7470 733a 2f2f 6769 7468 7562  n https://github
-00030c00: 2e63 6f6d 2f6d 6173 616b 6861 6e65 2d69  .com/masakhane-i
-00030c10: 6f2f 6d61 7361 6b68 616e 652d 706f 732e  o/masakhane-pos.
-00030c20: 0a0a 2020 2020 2020 2020 4974 2063 6f6e  ..        It con
-00030c30: 7369 7374 7320 6f66 2032 3020 4166 7269  sists of 20 Afri
-00030c40: 6361 6e20 6c61 6e67 7561 6765 732e 2050  can languages. P
-00030c50: 6173 7320 6120 6c61 6e67 7561 6765 2063  ass a language c
-00030c60: 6f64 6520 6f72 2061 206c 6973 7420 6f66  ode or a list of
-00030c70: 206c 616e 6775 6167 6520 636f 6465 7320   language codes 
-00030c80: 746f 2069 6e69 7469 616c 697a 6520 7468  to initialize th
-00030c90: 6520 636f 7270 7573 0a20 2020 2020 2020  e corpus.       
-00030ca0: 2077 6974 6820 7468 6520 6c61 6e67 7561   with the langua
-00030cb0: 6765 7320 796f 7520 7265 7175 6972 652e  ges you require.
-00030cc0: 2049 6620 796f 7520 7061 7373 2022 616c   If you pass "al
-00030cd0: 6c22 2c20 616c 6c20 6c61 6e67 7561 6765  l", all language
-00030ce0: 7320 7769 6c6c 2062 6520 696e 6974 6961  s will be initia
-00030cf0: 6c69 7a65 642e 0a20 2020 2020 2020 203a  lized..        :
-00030d00: 7665 7273 696f 6e3a 2053 7065 6369 6669  version: Specifi
-00030d10: 6573 2076 6572 7369 6f6e 206f 6620 7468  es version of th
-00030d20: 6520 6461 7461 7365 742e 2043 7572 7265  e dataset. Curre
-00030d30: 6e74 6c79 2c20 6f6e 6c79 2022 7631 2220  ntly, only "v1" 
-00030d40: 6973 2073 7570 706f 7274 6564 2e0a 2020  is supported..  
-00030d50: 2020 2020 2020 3a70 6172 616d 2062 6173        :param bas
-00030d60: 655f 7061 7468 3a20 4465 6661 756c 7420  e_path: Default 
-00030d70: 6973 204e 6f6e 652c 206d 6561 6e69 6e67  is None, meaning
-00030d80: 2074 6861 7420 636f 7270 7573 2067 6574   that corpus get
-00030d90: 7320 6175 746f 2d64 6f77 6e6c 6f61 6465  s auto-downloade
-00030da0: 6420 616e 6420 6c6f 6164 6564 2e20 596f  d and loaded. Yo
-00030db0: 7520 6361 6e20 6f76 6572 7269 6465 2074  u can override t
-00030dc0: 6869 730a 2020 2020 2020 2020 746f 2070  his.        to p
-00030dd0: 6f69 6e74 2074 6f20 6120 6469 6666 6572  oint to a differ
-00030de0: 656e 7420 666f 6c64 6572 2062 7574 2074  ent folder but t
-00030df0: 7970 6963 616c 6c79 2074 6869 7320 7368  ypically this sh
-00030e00: 6f75 6c64 206e 6f74 2062 6520 6e65 6365  ould not be nece
-00030e10: 7373 6172 792e 0a20 2020 2020 2020 203a  ssary..        :
-00030e20: 7061 7261 6d20 696e 5f6d 656d 6f72 793a  param in_memory:
-00030e30: 2049 6620 5472 7565 2c20 6b65 6570 7320   If True, keeps 
-00030e40: 6461 7461 7365 7420 696e 206d 656d 6f72  dataset in memor
-00030e50: 7920 6769 7669 6e67 2073 7065 6564 7570  y giving speedup
-00030e60: 7320 696e 2074 7261 696e 696e 672e 0a20  s in training.. 
-00030e70: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00030e80: 2020 2062 6173 655f 7061 7468 203d 206b     base_path = k
-00030e90: 6f6c 6962 7269 2e63 6163 6865 5f72 6f6f  olibri.cache_roo
-00030ea0: 7420 2f20 2264 6174 6173 6574 7322 2069  t / "datasets" i
-00030eb0: 6620 6e6f 7420 6261 7365 5f70 6174 6820  f not base_path 
-00030ec0: 656c 7365 2050 6174 6828 6261 7365 5f70  else Path(base_p
-00030ed0: 6174 6829 0a0a 2020 2020 2020 2020 2320  ath)..        # 
-00030ee0: 6966 206f 6e6c 7920 6f6e 6520 6c61 6e67  if only one lang
-00030ef0: 7561 6765 2069 7320 6769 7665 6e0a 2020  uage is given.  
-00030f00: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-00030f10: 6e63 6528 6c61 6e67 7561 6765 732c 2073  nce(languages, s
-00030f20: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
-00030f30: 206c 616e 6775 6167 6573 203d 205b 6c61   languages = [la
-00030f40: 6e67 7561 6765 735d 0a0a 2020 2020 2020  nguages]..      
-00030f50: 2020 2320 636f 6c75 6d6e 2066 6f72 6d61    # column forma
-00030f60: 740a 2020 2020 2020 2020 636f 6c75 6d6e  t.        column
-00030f70: 7320 3d20 7b30 3a20 2274 6578 7422 2c20  s = {0: "text", 
-00030f80: 313a 2022 706f 7322 7d0a 0a20 2020 2020  1: "pos"}..     
-00030f90: 2020 2023 2074 6869 7320 6461 7461 7365     # this datase
-00030fa0: 7420 6e61 6d65 0a20 2020 2020 2020 2064  t name.        d
-00030fb0: 6174 6173 6574 5f6e 616d 6520 3d20 7365  ataset_name = se
-00030fc0: 6c66 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e  lf.__class__.__n
-00030fd0: 616d 655f 5f2e 6c6f 7765 7228 290a 0a20  ame__.lower().. 
-00030fe0: 2020 2020 2020 2073 7570 706f 7274 6564         supported
-00030ff0: 5f76 6572 7369 6f6e 7320 3d20 5b22 7631  _versions = ["v1
-00031000: 225d 0a0a 2020 2020 2020 2020 6966 2076  "]..        if v
-00031010: 6572 7369 6f6e 206e 6f74 2069 6e20 7375  ersion not in su
-00031020: 7070 6f72 7465 645f 7665 7273 696f 6e73  pported_versions
-00031030: 3a0a 2020 2020 2020 2020 2020 2020 6c6f  :.            lo
-00031040: 672e 6572 726f 7228 6622 5468 6520 7370  g.error(f"The sp
-00031050: 6563 6966 6965 6420 7665 7273 696f 6e20  ecified version 
-00031060: 277b 7665 7273 696f 6e7d 2720 6973 206e  '{version}' is n
-00031070: 6f74 2069 6e20 7468 6520 6c69 7374 206f  ot in the list o
-00031080: 6620 7375 7070 6f72 7465 6420 7665 7273  f supported vers
-00031090: 696f 6e21 2229 0a20 2020 2020 2020 2020  ion!").         
-000310a0: 2020 206c 6f67 2e65 7272 6f72 2866 2253     log.error(f"S
-000310b0: 7570 706f 7274 6564 2076 6572 7369 6f6e  upported version
-000310c0: 7320 6172 6520 277b 7375 7070 6f72 7465  s are '{supporte
-000310d0: 645f 7665 7273 696f 6e73 7d27 2122 290a  d_versions}'!").
-000310e0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-000310f0: 6520 4578 6365 7074 696f 6e0a 0a20 2020  e Exception..   
-00031100: 2020 2020 2064 6174 615f 666f 6c64 6572       data_folder
-00031110: 203d 2062 6173 655f 7061 7468 202f 2064   = base_path / d
-00031120: 6174 6173 6574 5f6e 616d 6520 2f20 7665  ataset_name / ve
-00031130: 7273 696f 6e0a 0a20 2020 2020 2020 2073  rsion..        s
-00031140: 7570 706f 7274 6564 5f6c 616e 6775 6167  upported_languag
-00031150: 6573 203d 205b 0a20 2020 2020 2020 2020  es = [.         
-00031160: 2020 2022 6261 6d22 2c0a 2020 2020 2020     "bam",.      
-00031170: 2020 2020 2020 2262 626a 222c 0a20 2020        "bbj",.   
-00031180: 2020 2020 2020 2020 2022 6577 6522 2c0a           "ewe",.
-00031190: 2020 2020 2020 2020 2020 2020 2266 6f6e              "fon
-000311a0: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-000311b0: 6861 7522 2c0a 2020 2020 2020 2020 2020  hau",.          
-000311c0: 2020 2269 626f 222c 0a20 2020 2020 2020    "ibo",.       
-000311d0: 2020 2020 2022 6b69 6e22 2c0a 2020 2020       "kin",.    
-000311e0: 2020 2020 2020 2020 226c 7567 222c 0a20          "lug",. 
-000311f0: 2020 2020 2020 2020 2020 2022 6d6f 7322             "mos"
-00031200: 2c0a 2020 2020 2020 2020 2020 2020 2270  ,.            "p
-00031210: 636d 222c 0a20 2020 2020 2020 2020 2020  cm",.           
-00031220: 2022 6e79 6122 2c0a 2020 2020 2020 2020   "nya",.        
-00031230: 2020 2020 2273 6e61 222c 0a20 2020 2020      "sna",.     
-00031240: 2020 2020 2020 2022 7377 6122 2c0a 2020         "swa",.  
-00031250: 2020 2020 2020 2020 2020 2274 7769 222c            "twi",
-00031260: 0a20 2020 2020 2020 2020 2020 2022 776f  .            "wo
-00031270: 6c22 2c0a 2020 2020 2020 2020 2020 2020  l",.            
-00031280: 2278 686f 222c 0a20 2020 2020 2020 2020  "xho",.         
-00031290: 2020 2022 796f 7222 2c0a 2020 2020 2020     "yor",.      
-000312a0: 2020 2020 2020 227a 756c 222c 0a20 2020        "zul",.   
-000312b0: 2020 2020 205d 0a0a 2020 2020 2020 2020       ]..        
-000312c0: 6461 7461 5f70 6174 6873 203d 207b 0a20  data_paths = {. 
-000312d0: 2020 2020 2020 2020 2020 2022 7631 223a             "v1":
-000312e0: 2022 6874 7470 733a 2f2f 7261 772e 6769   "https://raw.gi
-000312f0: 7468 7562 7573 6572 636f 6e74 656e 742e  thubusercontent.
-00031300: 636f 6d2f 6d61 7361 6b68 616e 652d 696f  com/masakhane-io
-00031310: 2f6d 6173 616b 6861 6e65 2d70 6f73 2f6d  /masakhane-pos/m
-00031320: 6169 6e2f 6461 7461 222c 0a20 2020 2020  ain/data",.     
-00031330: 2020 207d 0a0a 2020 2020 2020 2020 2320     }..        # 
-00031340: 7573 6520 616c 6c20 6c61 6e67 7561 6765  use all language
-00031350: 7320 6966 2065 7870 6c69 6369 746c 7920  s if explicitly 
-00031360: 7365 7420 746f 2022 616c 6c22 0a20 2020  set to "all".   
-00031370: 2020 2020 2069 6620 6c61 6e67 7561 6765       if language
-00031380: 7320 3d3d 205b 2261 6c6c 225d 3a0a 2020  s == ["all"]:.  
-00031390: 2020 2020 2020 2020 2020 6c61 6e67 7561            langua
-000313a0: 6765 7320 3d20 7375 7070 6f72 7465 645f  ges = supported_
-000313b0: 6c61 6e67 7561 6765 730a 0a20 2020 2020  languages..     
-000313c0: 2020 2063 6f72 706f 7261 3a20 4c69 7374     corpora: List
-000313d0: 5b43 6f72 7075 735d 203d 205b 5d0a 2020  [Corpus] = [].  
-000313e0: 2020 2020 2020 666f 7220 6c61 6e67 7561        for langua
-000313f0: 6765 2069 6e20 6c61 6e67 7561 6765 733a  ge in languages:
-00031400: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00031410: 6c61 6e67 7561 6765 206e 6f74 2069 6e20  language not in 
-00031420: 7375 7070 6f72 7465 645f 6c61 6e67 7561  supported_langua
-00031430: 6765 733a 0a20 2020 2020 2020 2020 2020  ges:.           
-00031440: 2020 2020 206c 6f67 2e65 7272 6f72 2866       log.error(f
-00031450: 224c 616e 6775 6167 6520 277b 6c61 6e67  "Language '{lang
-00031460: 7561 6765 7d27 2069 7320 6e6f 7420 696e  uage}' is not in
-00031470: 206c 6973 7420 6f66 2073 7570 706f 7274   list of support
-00031480: 6564 206c 616e 6775 6167 6573 2122 290a  ed languages!").
-00031490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000314a0: 6c6f 672e 6572 726f 7228 6622 5375 7070  log.error(f"Supp
-000314b0: 6f72 7465 6420 6172 6520 277b 7375 7070  orted are '{supp
-000314c0: 6f72 7465 645f 6c61 6e67 7561 6765 737d  orted_languages}
-000314d0: 2721 2229 0a20 2020 2020 2020 2020 2020  '!").           
-000314e0: 2020 2020 206c 6f67 2e65 7272 6f72 2822       log.error("
-000314f0: 496e 7374 616e 7469 6174 6520 7468 6973  Instantiate this
-00031500: 2043 6f72 7075 7320 666f 7220 696e 7374   Corpus for inst
-00031510: 616e 6365 206c 696b 6520 736f 2027 636f  ance like so 'co
-00031520: 7270 7573 203d 204d 4153 414b 4841 5f50  rpus = MASAKHA_P
-00031530: 4f53 286c 616e 6775 6167 6573 3d27 6261  OS(languages='ba
-00031540: 6d27 2927 2229 0a20 2020 2020 2020 2020  m')'").         
-00031550: 2020 2020 2020 2072 6169 7365 2045 7863         raise Exc
-00031560: 6570 7469 6f6e 0a0a 2020 2020 2020 2020  eption..        
-00031570: 2020 2020 6c61 6e67 7561 6765 5f66 6f6c      language_fol
-00031580: 6465 7220 3d20 6461 7461 5f66 6f6c 6465  der = data_folde
-00031590: 7220 2f20 6c61 6e67 7561 6765 0a0a 2020  r / language..  
-000315a0: 2020 2020 2020 2020 2020 2320 646f 776e            # down
-000315b0: 6c6f 6164 2064 6174 6120 6966 206e 6563  load data if nec
-000315c0: 6573 7361 7279 0a20 2020 2020 2020 2020  essary.         
-000315d0: 2020 2064 6174 615f 7061 7468 203d 2066     data_path = f
-000315e0: 227b 6461 7461 5f70 6174 6873 5b76 6572  "{data_paths[ver
-000315f0: 7369 6f6e 5d7d 2f7b 6c61 6e67 7561 6765  sion]}/{language
-00031600: 7d22 0a20 2020 2020 2020 2020 2020 2063  }".            c
-00031610: 6163 6865 645f 7061 7468 2866 227b 6461  ached_path(f"{da
-00031620: 7461 5f70 6174 687d 2f64 6576 2e74 7874  ta_path}/dev.txt
-00031630: 222c 206c 616e 6775 6167 655f 666f 6c64  ", language_fold
-00031640: 6572 290a 2020 2020 2020 2020 2020 2020  er).            
-00031650: 6361 6368 6564 5f70 6174 6828 6622 7b64  cached_path(f"{d
-00031660: 6174 615f 7061 7468 7d2f 7465 7374 2e74  ata_path}/test.t
-00031670: 7874 222c 206c 616e 6775 6167 655f 666f  xt", language_fo
-00031680: 6c64 6572 290a 2020 2020 2020 2020 2020  lder).          
-00031690: 2020 6361 6368 6564 5f70 6174 6828 6622    cached_path(f"
-000316a0: 7b64 6174 615f 7061 7468 7d2f 7472 6169  {data_path}/trai
-000316b0: 6e2e 7478 7422 2c20 6c61 6e67 7561 6765  n.txt", language
-000316c0: 5f66 6f6c 6465 7229 0a0a 2020 2020 2020  _folder)..      
-000316d0: 2020 2020 2020 2320 696e 6974 6961 6c69        # initiali
-000316e0: 7a65 2063 6f6d 6c75 6d6e 636f 7270 7573  ze comlumncorpus
-000316f0: 2061 6e64 2061 6464 2069 7420 746f 206c   and add it to l
-00031700: 6973 740a 2020 2020 2020 2020 2020 2020  ist.            
-00031710: 6c6f 672e 696e 666f 2866 2252 6561 6469  log.info(f"Readi
-00031720: 6e67 2064 6174 6120 666f 7220 6c61 6e67  ng data for lang
-00031730: 7561 6765 207b 6c61 6e67 7561 6765 7d40  uage {language}@
-00031740: 7b76 6572 7369 6f6e 7d22 290a 2020 2020  {version}").    
-00031750: 2020 2020 2020 2020 636f 7270 203d 2043          corp = C
-00031760: 6f6c 756d 6e43 6f72 7075 7328 0a20 2020  olumnCorpus(.   
-00031770: 2020 2020 2020 2020 2020 2020 2064 6174               dat
-00031780: 615f 666f 6c64 6572 3d6c 616e 6775 6167  a_folder=languag
-00031790: 655f 666f 6c64 6572 2c0a 2020 2020 2020  e_folder,.      
-000317a0: 2020 2020 2020 2020 2020 636f 6c75 6d6e            column
-000317b0: 5f66 6f72 6d61 743d 636f 6c75 6d6e 732c  _format=columns,
-000317c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000317d0: 2065 6e63 6f64 696e 673d 2275 7466 2d38   encoding="utf-8
-000317e0: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
-000317f0: 2020 2069 6e5f 6d65 6d6f 7279 3d69 6e5f     in_memory=in_
-00031800: 6d65 6d6f 7279 2c0a 2020 2020 2020 2020  memory,.        
-00031810: 2020 2020 2020 2020 6e61 6d65 3d6c 616e          name=lan
-00031820: 6775 6167 652c 0a20 2020 2020 2020 2020  guage,.         
-00031830: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
-00031840: 7267 732c 0a20 2020 2020 2020 2020 2020  rgs,.           
-00031850: 2029 0a20 2020 2020 2020 2020 2020 2063   ).            c
-00031860: 6f72 706f 7261 2e61 7070 656e 6428 636f  orpora.append(co
-00031870: 7270 290a 2020 2020 2020 2020 7375 7065  rp).        supe
-00031880: 7228 292e 5f5f 696e 6974 5f5f 280a 2020  r().__init__(.  
-00031890: 2020 2020 2020 2020 2020 636f 7270 6f72            corpor
-000318a0: 612c 0a20 2020 2020 2020 2020 2020 206e  a,.            n
-000318b0: 616d 653d 2261 6672 6963 612d 706f 732d  ame="africa-pos-
-000318c0: 2220 2b20 222d 222e 6a6f 696e 286c 616e  " + "-".join(lan
-000318d0: 6775 6167 6573 292c 0a20 2020 2020 2020  guages),.       
-000318e0: 2029 0a                                   ).
+00028730: 6d65 0a0a 2020 2020 2020 2020 696e 7370  me..        insp
+00028740: 6563 5f70 6174 6820 3d20 2268 7474 7073  ec_path = "https
+00028750: 3a2f 2f72 6177 2e67 6974 6875 6275 7365  ://raw.githubuse
+00028760: 7263 6f6e 7465 6e74 2e63 6f6d 2f6d 6964  rcontent.com/mid
+00028770: 6173 2d72 6573 6561 7263 682f 6b65 7970  as-research/keyp
+00028780: 6872 6173 652d 6578 7472 6163 7469 6f6e  hrase-extraction
+00028790: 2d61 732d 7365 7175 656e 6365 2d6c 6162  -as-sequence-lab
+000287a0: 656c 696e 672d 6461 7461 2f6d 6173 7465  eling-data/maste
+000287b0: 722f 496e 7370 6563 220a 2020 2020 2020  r/Inspec".      
+000287c0: 2020 6361 6368 6564 5f70 6174 6828 6622    cached_path(f"
+000287d0: 7b69 6e73 7065 635f 7061 7468 7d2f 7472  {inspec_path}/tr
+000287e0: 6169 6e2e 7478 7422 2c20 5061 7468 2822  ain.txt", Path("
+000287f0: 6461 7461 7365 7473 2229 202f 2064 6174  datasets") / dat
+00028800: 6173 6574 5f6e 616d 6529 0a20 2020 2020  aset_name).     
+00028810: 2020 2063 6163 6865 645f 7061 7468 2866     cached_path(f
+00028820: 227b 696e 7370 6563 5f70 6174 687d 2f74  "{inspec_path}/t
+00028830: 6573 742e 7478 7422 2c20 5061 7468 2822  est.txt", Path("
+00028840: 6461 7461 7365 7473 2229 202f 2064 6174  datasets") / dat
+00028850: 6173 6574 5f6e 616d 6529 0a20 2020 2020  aset_name).     
+00028860: 2020 2069 6620 2264 6576 2e74 7874 2220     if "dev.txt" 
+00028870: 6e6f 7420 696e 206f 732e 6c69 7374 6469  not in os.listdi
+00028880: 7228 6461 7461 5f66 6f6c 6465 7229 3a0a  r(data_folder):.
+00028890: 2020 2020 2020 2020 2020 2020 6361 6368              cach
+000288a0: 6564 5f70 6174 6828 6622 7b69 6e73 7065  ed_path(f"{inspe
+000288b0: 635f 7061 7468 7d2f 7661 6c69 642e 7478  c_path}/valid.tx
+000288c0: 7422 2c20 5061 7468 2822 6461 7461 7365  t", Path("datase
+000288d0: 7473 2229 202f 2064 6174 6173 6574 5f6e  ts") / dataset_n
+000288e0: 616d 6529 0a20 2020 2020 2020 2020 2020  ame).           
+000288f0: 2023 2072 656e 616d 6520 6163 636f 7264   # rename accord
+00028900: 696e 6720 746f 2074 7261 696e 202d 2074  ing to train - t
+00028910: 6573 7420 2d20 6465 7620 2d20 636f 6e76  est - dev - conv
+00028920: 656e 7469 6f6e 0a20 2020 2020 2020 2020  ention.         
+00028930: 2020 206f 732e 7265 6e61 6d65 2864 6174     os.rename(dat
+00028940: 615f 666f 6c64 6572 202f 2022 7661 6c69  a_folder / "vali
+00028950: 642e 7478 7422 2c20 6461 7461 5f66 6f6c  d.txt", data_fol
+00028960: 6465 7220 2f20 2264 6576 2e74 7874 2229  der / "dev.txt")
+00028970: 0a0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
+00028980: 292e 5f5f 696e 6974 5f5f 280a 2020 2020  ).__init__(.    
+00028990: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
+000289a0: 6465 722c 0a20 2020 2020 2020 2020 2020  der,.           
+000289b0: 2063 6f6c 756d 6e73 2c0a 2020 2020 2020   columns,.      
+000289c0: 2020 2020 2020 696e 5f6d 656d 6f72 793d        in_memory=
+000289d0: 696e 5f6d 656d 6f72 792c 0a20 2020 2020  in_memory,.     
+000289e0: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
+000289f0: 7267 732c 0a20 2020 2020 2020 2029 0a0a  rgs,.        )..
+00028a00: 0a63 6c61 7373 204b 4559 5048 5241 5345  .class KEYPHRASE
+00028a10: 5f53 454d 4556 414c 3230 3130 2843 6f6c  _SEMEVAL2010(Col
+00028a20: 756d 6e43 6f72 7075 7329 3a0a 2020 2020  umnCorpus):.    
+00028a30: 6465 6620 5f5f 696e 6974 5f5f 280a 2020  def __init__(.  
+00028a40: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
+00028a50: 2020 2020 6261 7365 5f70 6174 683a 204f      base_path: O
+00028a60: 7074 696f 6e61 6c5b 556e 696f 6e5b 7374  ptional[Union[st
+00028a70: 722c 2050 6174 685d 5d20 3d20 4e6f 6e65  r, Path]] = None
+00028a80: 2c0a 2020 2020 2020 2020 696e 5f6d 656d  ,.        in_mem
+00028a90: 6f72 793a 2062 6f6f 6c20 3d20 5472 7565  ory: bool = True
+00028aa0: 2c0a 2020 2020 2020 2020 2a2a 636f 7270  ,.        **corp
+00028ab0: 7573 6172 6773 2c0a 2020 2020 2920 2d3e  usargs,.    ) ->
+00028ac0: 204e 6f6e 653a 0a20 2020 2020 2020 2062   None:.        b
+00028ad0: 6173 655f 7061 7468 203d 206b 6f6c 6962  ase_path = kolib
+00028ae0: 7269 2e63 6163 6865 5f72 6f6f 7420 2f20  ri.cache_root / 
+00028af0: 2264 6174 6173 6574 7322 2069 6620 6e6f  "datasets" if no
+00028b00: 7420 6261 7365 5f70 6174 6820 656c 7365  t base_path else
+00028b10: 2050 6174 6828 6261 7365 5f70 6174 6829   Path(base_path)
+00028b20: 0a0a 2020 2020 2020 2020 2320 636f 6c75  ..        # colu
+00028b30: 6d6e 2066 6f72 6d61 740a 2020 2020 2020  mn format.      
+00028b40: 2020 636f 6c75 6d6e 7320 3d20 7b30 3a20    columns = {0: 
+00028b50: 2274 6578 7422 2c20 313a 2022 6b65 7977  "text", 1: "keyw
+00028b60: 6f72 6422 7d0a 0a20 2020 2020 2020 2023  ord"}..        #
+00028b70: 2074 6869 7320 6461 7461 7365 7420 6e61   this dataset na
+00028b80: 6d65 0a20 2020 2020 2020 2064 6174 6173  me.        datas
+00028b90: 6574 5f6e 616d 6520 3d20 7365 6c66 2e5f  et_name = self._
+00028ba0: 5f63 6c61 7373 5f5f 2e5f 5f6e 616d 655f  _class__.__name_
+00028bb0: 5f2e 6c6f 7765 7228 290a 0a20 2020 2020  _.lower()..     
+00028bc0: 2020 2064 6174 615f 666f 6c64 6572 203d     data_folder =
+00028bd0: 2062 6173 655f 7061 7468 202f 2064 6174   base_path / dat
+00028be0: 6173 6574 5f6e 616d 650a 0a20 2020 2020  aset_name..     
+00028bf0: 2020 2073 656d 6576 616c 3230 3130 5f70     semeval2010_p
+00028c00: 6174 6820 3d20 2268 7474 7073 3a2f 2f72  ath = "https://r
+00028c10: 6177 2e67 6974 6875 6275 7365 7263 6f6e  aw.githubusercon
+00028c20: 7465 6e74 2e63 6f6d 2f6d 6964 6173 2d72  tent.com/midas-r
+00028c30: 6573 6561 7263 682f 6b65 7970 6872 6173  esearch/keyphras
+00028c40: 652d 6578 7472 6163 7469 6f6e 2d61 732d  e-extraction-as-
+00028c50: 7365 7175 656e 6365 2d6c 6162 656c 696e  sequence-labelin
+00028c60: 672d 6461 7461 2f6d 6173 7465 722f 7072  g-data/master/pr
+00028c70: 6f63 6573 7365 645f 7365 6d65 7661 6c2d  ocessed_semeval-
+00028c80: 3230 3130 220a 2020 2020 2020 2020 6361  2010".        ca
+00028c90: 6368 6564 5f70 6174 6828 6622 7b73 656d  ched_path(f"{sem
+00028ca0: 6576 616c 3230 3130 5f70 6174 687d 2f74  eval2010_path}/t
+00028cb0: 7261 696e 2e74 7874 222c 2050 6174 6828  rain.txt", Path(
+00028cc0: 2264 6174 6173 6574 7322 2920 2f20 6461  "datasets") / da
+00028cd0: 7461 7365 745f 6e61 6d65 290a 2020 2020  taset_name).    
+00028ce0: 2020 2020 6361 6368 6564 5f70 6174 6828      cached_path(
+00028cf0: 6622 7b73 656d 6576 616c 3230 3130 5f70  f"{semeval2010_p
+00028d00: 6174 687d 2f74 6573 742e 7478 7422 2c20  ath}/test.txt", 
+00028d10: 5061 7468 2822 6461 7461 7365 7473 2229  Path("datasets")
+00028d20: 202f 2064 6174 6173 6574 5f6e 616d 6529   / dataset_name)
+00028d30: 0a0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
+00028d40: 292e 5f5f 696e 6974 5f5f 280a 2020 2020  ).__init__(.    
+00028d50: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
+00028d60: 6465 722c 0a20 2020 2020 2020 2020 2020  der,.           
+00028d70: 2063 6f6c 756d 6e73 2c0a 2020 2020 2020   columns,.      
+00028d80: 2020 2020 2020 696e 5f6d 656d 6f72 793d        in_memory=
+00028d90: 696e 5f6d 656d 6f72 792c 0a20 2020 2020  in_memory,.     
+00028da0: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
+00028db0: 7267 732c 0a20 2020 2020 2020 2029 0a0a  rgs,.        )..
+00028dc0: 0a63 6c61 7373 2055 505f 4348 494e 4553  .class UP_CHINES
+00028dd0: 4528 436f 6c75 6d6e 436f 7270 7573 293a  E(ColumnCorpus):
+00028de0: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+00028df0: 5f28 0a20 2020 2020 2020 2073 656c 662c  _(.        self,
+00028e00: 0a20 2020 2020 2020 2062 6173 655f 7061  .        base_pa
+00028e10: 7468 3a20 4f70 7469 6f6e 616c 5b55 6e69  th: Optional[Uni
+00028e20: 6f6e 5b73 7472 2c20 5061 7468 5d5d 203d  on[str, Path]] =
+00028e30: 204e 6f6e 652c 0a20 2020 2020 2020 2069   None,.        i
+00028e40: 6e5f 6d65 6d6f 7279 3a20 626f 6f6c 203d  n_memory: bool =
+00028e50: 2054 7275 652c 0a20 2020 2020 2020 2064   True,.        d
+00028e60: 6f63 756d 656e 745f 6173 5f73 6571 7565  ocument_as_seque
+00028e70: 6e63 653a 2062 6f6f 6c20 3d20 4661 6c73  nce: bool = Fals
+00028e80: 652c 0a20 2020 2020 2020 202a 2a63 6f72  e,.        **cor
+00028e90: 7075 7361 7267 732c 0a20 2020 2029 202d  pusargs,.    ) -
+00028ea0: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+00028eb0: 2222 2249 6e69 7469 616c 697a 6520 7468  """Initialize th
+00028ec0: 6520 4368 696e 6573 6520 6461 7461 7365  e Chinese datase
+00028ed0: 7420 6672 6f6d 2074 6865 2055 6e69 7665  t from the Unive
+00028ee0: 7273 616c 2050 726f 706f 7369 7469 6f6e  rsal Proposition
+00028ef0: 7320 4261 6e6b 2e0a 0a20 2020 2020 2020  s Bank...       
+00028f00: 2054 6865 2064 6174 6173 6574 2069 7320   The dataset is 
+00028f10: 646f 776e 6c6f 6164 6564 2066 726f 6d20  downloaded from 
+00028f20: 2068 7474 7073 3a2f 2f67 6974 6875 622e   https://github.
+00028f30: 636f 6d2f 5379 7374 656d 2d54 2f55 6e69  com/System-T/Uni
+00028f40: 7665 7273 616c 5072 6f70 6f73 6974 696f  versalPropositio
+00028f50: 6e73 0a0a 2020 2020 2020 2020 4172 6773  ns..        Args
+00028f60: 3a0a 2020 2020 2020 2020 2020 2020 6261  :.            ba
+00028f70: 7365 5f70 6174 683a 2044 6566 6175 6c74  se_path: Default
+00028f80: 2069 7320 4e6f 6e65 2c20 6d65 616e 696e   is None, meanin
+00028f90: 6720 7468 6174 2063 6f72 7075 7320 6765  g that corpus ge
+00028fa0: 7473 2061 7574 6f2d 646f 776e 6c6f 6164  ts auto-download
+00028fb0: 6564 2061 6e64 206c 6f61 6465 642e 2059  ed and loaded. Y
+00028fc0: 6f75 2063 616e 206f 7665 7272 6964 6520  ou can override 
+00028fd0: 7468 6973 2074 6f20 706f 696e 7420 746f  this to point to
+00028fe0: 2061 2064 6966 6665 7265 6e74 2066 6f6c   a different fol
+00028ff0: 6465 7220 6275 7420 7479 7069 6361 6c6c  der but typicall
+00029000: 7920 7468 6973 2073 686f 756c 6420 6e6f  y this should no
+00029010: 7420 6265 206e 6563 6573 7361 7279 2e0a  t be necessary..
+00029020: 2020 2020 2020 2020 2020 2020 696e 5f6d              in_m
+00029030: 656d 6f72 793a 2049 6620 5472 7565 2c20  emory: If True, 
+00029040: 6b65 6570 7320 6461 7461 7365 7420 696e  keeps dataset in
+00029050: 206d 656d 6f72 7920 6769 7669 6e67 2073   memory giving s
+00029060: 7065 6564 7570 7320 696e 2074 7261 696e  peedups in train
+00029070: 696e 672e 0a20 2020 2020 2020 2020 2020  ing..           
+00029080: 2064 6f63 756d 656e 745f 6173 5f73 6571   document_as_seq
+00029090: 7565 6e63 653a 2049 6620 5472 7565 2c20  uence: If True, 
+000290a0: 616c 6c20 7365 6e74 656e 6365 7320 6f66  all sentences of
+000290b0: 2061 2064 6f63 756d 656e 7420 6172 6520   a document are 
+000290c0: 7265 6164 2069 6e74 6f20 6120 7369 6e67  read into a sing
+000290d0: 6c65 2053 656e 7465 6e63 6520 6f62 6a65  le Sentence obje
+000290e0: 6374 0a20 2020 2020 2020 2022 2222 0a20  ct.        """. 
+000290f0: 2020 2020 2020 2062 6173 655f 7061 7468         base_path
+00029100: 203d 206b 6f6c 6962 7269 2e63 6163 6865   = kolibri.cache
+00029110: 5f72 6f6f 7420 2f20 2264 6174 6173 6574  _root / "dataset
+00029120: 7322 2069 6620 6e6f 7420 6261 7365 5f70  s" if not base_p
+00029130: 6174 6820 656c 7365 2050 6174 6828 6261  ath else Path(ba
+00029140: 7365 5f70 6174 6829 0a0a 2020 2020 2020  se_path)..      
+00029150: 2020 2320 636f 6c75 6d6e 2066 6f72 6d61    # column forma
+00029160: 740a 2020 2020 2020 2020 636f 6c75 6d6e  t.        column
+00029170: 7320 3d20 7b31 3a20 2274 6578 7422 2c20  s = {1: "text", 
+00029180: 393a 2022 6672 616d 6522 7d0a 0a20 2020  9: "frame"}..   
+00029190: 2020 2020 2023 2074 6869 7320 6461 7461       # this data
+000291a0: 7365 7420 6e61 6d65 0a20 2020 2020 2020  set name.       
+000291b0: 2064 6174 6173 6574 5f6e 616d 6520 3d20   dataset_name = 
+000291c0: 7365 6c66 2e5f 5f63 6c61 7373 5f5f 2e5f  self.__class__._
+000291d0: 5f6e 616d 655f 5f2e 6c6f 7765 7228 290a  _name__.lower().
+000291e0: 0a20 2020 2020 2020 2064 6174 615f 666f  .        data_fo
+000291f0: 6c64 6572 203d 2062 6173 655f 7061 7468  lder = base_path
+00029200: 202f 2064 6174 6173 6574 5f6e 616d 650a   / dataset_name.
+00029210: 0a20 2020 2020 2020 2023 2064 6f77 6e6c  .        # downl
+00029220: 6f61 6420 6461 7461 2069 6620 6e65 6365  oad data if nece
+00029230: 7373 6172 790a 2020 2020 2020 2020 7570  ssary.        up
+00029240: 5f7a 685f 7061 7468 203d 2022 6874 7470  _zh_path = "http
+00029250: 733a 2f2f 7261 772e 6769 7468 7562 7573  s://raw.githubus
+00029260: 6572 636f 6e74 656e 742e 636f 6d2f 5379  ercontent.com/Sy
+00029270: 7374 656d 2d54 2f55 6e69 7665 7273 616c  stem-T/Universal
+00029280: 5072 6f70 6f73 6974 696f 6e73 2f6d 6173  Propositions/mas
+00029290: 7465 722f 5550 5f43 6869 6e65 7365 2f22  ter/UP_Chinese/"
+000292a0: 0a20 2020 2020 2020 2063 6163 6865 645f  .        cached_
+000292b0: 7061 7468 2866 227b 7570 5f7a 685f 7061  path(f"{up_zh_pa
+000292c0: 7468 7d7a 682d 7570 2d74 7261 696e 2e63  th}zh-up-train.c
+000292d0: 6f6e 6c6c 7522 2c20 5061 7468 2822 6461  onllu", Path("da
+000292e0: 7461 7365 7473 2229 202f 2064 6174 6173  tasets") / datas
+000292f0: 6574 5f6e 616d 6529 0a20 2020 2020 2020  et_name).       
+00029300: 2063 6163 6865 645f 7061 7468 2866 227b   cached_path(f"{
+00029310: 7570 5f7a 685f 7061 7468 7d7a 682d 7570  up_zh_path}zh-up
+00029320: 2d64 6576 2e63 6f6e 6c6c 7522 2c20 5061  -dev.conllu", Pa
+00029330: 7468 2822 6461 7461 7365 7473 2229 202f  th("datasets") /
+00029340: 2064 6174 6173 6574 5f6e 616d 6529 0a20   dataset_name). 
+00029350: 2020 2020 2020 2063 6163 6865 645f 7061         cached_pa
+00029360: 7468 2866 227b 7570 5f7a 685f 7061 7468  th(f"{up_zh_path
+00029370: 7d7a 682d 7570 2d74 6573 742e 636f 6e6c  }zh-up-test.conl
+00029380: 6c75 222c 2050 6174 6828 2264 6174 6173  lu", Path("datas
+00029390: 6574 7322 2920 2f20 6461 7461 7365 745f  ets") / dataset_
+000293a0: 6e61 6d65 290a 0a20 2020 2020 2020 2073  name)..        s
+000293b0: 7570 6572 2829 2e5f 5f69 6e69 745f 5f28  uper().__init__(
+000293c0: 0a20 2020 2020 2020 2020 2020 2064 6174  .            dat
+000293d0: 615f 666f 6c64 6572 2c0a 2020 2020 2020  a_folder,.      
+000293e0: 2020 2020 2020 636f 6c75 6d6e 732c 0a20        columns,. 
+000293f0: 2020 2020 2020 2020 2020 2065 6e63 6f64             encod
+00029400: 696e 673d 2275 7466 2d38 222c 0a20 2020  ing="utf-8",.   
+00029410: 2020 2020 2020 2020 2074 7261 696e 5f66           train_f
+00029420: 696c 653d 227a 682d 7570 2d74 7261 696e  ile="zh-up-train
+00029430: 2e63 6f6e 6c6c 7522 2c0a 2020 2020 2020  .conllu",.      
+00029440: 2020 2020 2020 7465 7374 5f66 696c 653d        test_file=
+00029450: 227a 682d 7570 2d74 6573 742e 636f 6e6c  "zh-up-test.conl
+00029460: 6c75 222c 0a20 2020 2020 2020 2020 2020  lu",.           
+00029470: 2064 6576 5f66 696c 653d 227a 682d 7570   dev_file="zh-up
+00029480: 2d64 6576 2e63 6f6e 6c6c 7522 2c0a 2020  -dev.conllu",.  
+00029490: 2020 2020 2020 2020 2020 696e 5f6d 656d            in_mem
+000294a0: 6f72 793d 696e 5f6d 656d 6f72 792c 0a20  ory=in_memory,. 
+000294b0: 2020 2020 2020 2020 2020 2064 6f63 756d             docum
+000294c0: 656e 745f 7365 7061 7261 746f 725f 746f  ent_separator_to
+000294d0: 6b65 6e3d 4e6f 6e65 2069 6620 6e6f 7420  ken=None if not 
+000294e0: 646f 6375 6d65 6e74 5f61 735f 7365 7175  document_as_sequ
+000294f0: 656e 6365 2065 6c73 6520 222d 444f 4353  ence else "-DOCS
+00029500: 5441 5254 2d22 2c0a 2020 2020 2020 2020  TART-",.        
+00029510: 2020 2020 636f 6d6d 656e 745f 7379 6d62      comment_symb
+00029520: 6f6c 3d22 2322 2c0a 2020 2020 2020 2020  ol="#",.        
+00029530: 2020 2020 2a2a 636f 7270 7573 6172 6773      **corpusargs
+00029540: 2c0a 2020 2020 2020 2020 290a 0a0a 636c  ,.        )...cl
+00029550: 6173 7320 5550 5f45 4e47 4c49 5348 2843  ass UP_ENGLISH(C
+00029560: 6f6c 756d 6e43 6f72 7075 7329 3a0a 2020  olumnCorpus):.  
+00029570: 2020 6465 6620 5f5f 696e 6974 5f5f 280a    def __init__(.
+00029580: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
+00029590: 2020 2020 2020 6261 7365 5f70 6174 683a        base_path:
+000295a0: 204f 7074 696f 6e61 6c5b 556e 696f 6e5b   Optional[Union[
+000295b0: 7374 722c 2050 6174 685d 5d20 3d20 4e6f  str, Path]] = No
+000295c0: 6e65 2c0a 2020 2020 2020 2020 696e 5f6d  ne,.        in_m
+000295d0: 656d 6f72 793a 2062 6f6f 6c20 3d20 5472  emory: bool = Tr
+000295e0: 7565 2c0a 2020 2020 2020 2020 646f 6375  ue,.        docu
+000295f0: 6d65 6e74 5f61 735f 7365 7175 656e 6365  ment_as_sequence
+00029600: 3a20 626f 6f6c 203d 2046 616c 7365 2c0a  : bool = False,.
+00029610: 2020 2020 2020 2020 2a2a 636f 7270 7573          **corpus
+00029620: 6172 6773 2c0a 2020 2020 2920 2d3e 204e  args,.    ) -> N
+00029630: 6f6e 653a 0a20 2020 2020 2020 2022 2222  one:.        """
+00029640: 496e 6974 6961 6c69 7a65 2074 6865 2045  Initialize the E
+00029650: 6e67 6c69 7368 2064 6174 6173 6574 2066  nglish dataset f
+00029660: 726f 6d20 7468 6520 556e 6976 6572 7361  rom the Universa
+00029670: 6c20 5072 6f70 6f73 6974 696f 6e73 2042  l Propositions B
+00029680: 616e 6b2e 0a0a 2020 2020 2020 2020 5468  ank...        Th
+00029690: 6520 6461 7461 7365 7420 6973 2064 6f77  e dataset is dow
+000296a0: 6e6c 6f61 6465 6420 6672 6f6d 2020 6874  nloaded from  ht
+000296b0: 7470 733a 2f2f 6769 7468 7562 2e63 6f6d  tps://github.com
+000296c0: 2f53 7973 7465 6d2d 542f 556e 6976 6572  /System-T/Univer
+000296d0: 7361 6c50 726f 706f 7369 7469 6f6e 730a  salPropositions.
+000296e0: 0a20 2020 2020 2020 2041 7267 733a 0a20  .        Args:. 
+000296f0: 2020 2020 2020 2020 2020 2062 6173 655f             base_
+00029700: 7061 7468 3a20 4465 6661 756c 7420 6973  path: Default is
+00029710: 204e 6f6e 652c 206d 6561 6e69 6e67 2074   None, meaning t
+00029720: 6861 7420 636f 7270 7573 2067 6574 7320  hat corpus gets 
+00029730: 6175 746f 2d64 6f77 6e6c 6f61 6465 6420  auto-downloaded 
+00029740: 616e 6420 6c6f 6164 6564 2e20 596f 7520  and loaded. You 
+00029750: 6361 6e20 6f76 6572 7269 6465 2074 6869  can override thi
+00029760: 7320 746f 2070 6f69 6e74 2074 6f20 6120  s to point to a 
+00029770: 6469 6666 6572 656e 7420 666f 6c64 6572  different folder
+00029780: 2062 7574 2074 7970 6963 616c 6c79 2074   but typically t
+00029790: 6869 7320 7368 6f75 6c64 206e 6f74 2062  his should not b
+000297a0: 6520 6e65 6365 7373 6172 792e 0a20 2020  e necessary..   
+000297b0: 2020 2020 2020 2020 2069 6e5f 6d65 6d6f           in_memo
+000297c0: 7279 3a20 4966 2054 7275 652c 206b 6565  ry: If True, kee
+000297d0: 7073 2064 6174 6173 6574 2069 6e20 6d65  ps dataset in me
+000297e0: 6d6f 7279 2067 6976 696e 6720 7370 6565  mory giving spee
+000297f0: 6475 7073 2069 6e20 7472 6169 6e69 6e67  dups in training
+00029800: 2e0a 2020 2020 2020 2020 2020 2020 646f  ..            do
+00029810: 6375 6d65 6e74 5f61 735f 7365 7175 656e  cument_as_sequen
+00029820: 6365 3a20 4966 2054 7275 652c 2061 6c6c  ce: If True, all
+00029830: 2073 656e 7465 6e63 6573 206f 6620 6120   sentences of a 
+00029840: 646f 6375 6d65 6e74 2061 7265 2072 6561  document are rea
+00029850: 6420 696e 746f 2061 2073 696e 676c 6520  d into a single 
+00029860: 5365 6e74 656e 6365 206f 626a 6563 740a  Sentence object.
+00029870: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00029880: 2020 2020 6261 7365 5f70 6174 6820 3d20      base_path = 
+00029890: 6b6f 6c69 6272 692e 6361 6368 655f 726f  kolibri.cache_ro
+000298a0: 6f74 202f 2022 6461 7461 7365 7473 2220  ot / "datasets" 
+000298b0: 6966 206e 6f74 2062 6173 655f 7061 7468  if not base_path
+000298c0: 2065 6c73 6520 5061 7468 2862 6173 655f   else Path(base_
+000298d0: 7061 7468 290a 0a20 2020 2020 2020 2023  path)..        #
+000298e0: 2063 6f6c 756d 6e20 666f 726d 6174 0a20   column format. 
+000298f0: 2020 2020 2020 2063 6f6c 756d 6e73 203d         columns =
+00029900: 207b 313a 2022 7465 7874 222c 2031 303a   {1: "text", 10:
+00029910: 2022 6672 616d 6522 7d0a 0a20 2020 2020   "frame"}..     
+00029920: 2020 2023 2074 6869 7320 6461 7461 7365     # this datase
+00029930: 7420 6e61 6d65 0a20 2020 2020 2020 2064  t name.        d
+00029940: 6174 6173 6574 5f6e 616d 6520 3d20 7365  ataset_name = se
+00029950: 6c66 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e  lf.__class__.__n
+00029960: 616d 655f 5f2e 6c6f 7765 7228 290a 0a20  ame__.lower().. 
+00029970: 2020 2020 2020 2064 6174 615f 666f 6c64         data_fold
+00029980: 6572 203d 2062 6173 655f 7061 7468 202f  er = base_path /
+00029990: 2064 6174 6173 6574 5f6e 616d 650a 0a20   dataset_name.. 
+000299a0: 2020 2020 2020 2023 2064 6f77 6e6c 6f61         # downloa
+000299b0: 6420 6461 7461 2069 6620 6e65 6365 7373  d data if necess
+000299c0: 6172 790a 2020 2020 2020 2020 7570 5f65  ary.        up_e
+000299d0: 6e5f 7061 7468 203d 2022 6874 7470 733a  n_path = "https:
+000299e0: 2f2f 7261 772e 6769 7468 7562 7573 6572  //raw.githubuser
+000299f0: 636f 6e74 656e 742e 636f 6d2f 5379 7374  content.com/Syst
+00029a00: 656d 2d54 2f55 6e69 7665 7273 616c 5072  em-T/UniversalPr
+00029a10: 6f70 6f73 6974 696f 6e73 2f6d 6173 7465  opositions/maste
+00029a20: 722f 5550 5f45 6e67 6c69 7368 2d45 5754  r/UP_English-EWT
+00029a30: 2f22 0a20 2020 2020 2020 2063 6163 6865  /".        cache
+00029a40: 645f 7061 7468 2866 227b 7570 5f65 6e5f  d_path(f"{up_en_
+00029a50: 7061 7468 7d65 6e5f 6577 742d 7570 2d74  path}en_ewt-up-t
+00029a60: 7261 696e 2e63 6f6e 6c6c 7522 2c20 5061  rain.conllu", Pa
+00029a70: 7468 2822 6461 7461 7365 7473 2229 202f  th("datasets") /
+00029a80: 2064 6174 6173 6574 5f6e 616d 6529 0a20   dataset_name). 
+00029a90: 2020 2020 2020 2063 6163 6865 645f 7061         cached_pa
+00029aa0: 7468 2866 227b 7570 5f65 6e5f 7061 7468  th(f"{up_en_path
+00029ab0: 7d65 6e5f 6577 742d 7570 2d64 6576 2e63  }en_ewt-up-dev.c
+00029ac0: 6f6e 6c6c 7522 2c20 5061 7468 2822 6461  onllu", Path("da
+00029ad0: 7461 7365 7473 2229 202f 2064 6174 6173  tasets") / datas
+00029ae0: 6574 5f6e 616d 6529 0a20 2020 2020 2020  et_name).       
+00029af0: 2063 6163 6865 645f 7061 7468 2866 227b   cached_path(f"{
+00029b00: 7570 5f65 6e5f 7061 7468 7d65 6e5f 6577  up_en_path}en_ew
+00029b10: 742d 7570 2d74 6573 742e 636f 6e6c 6c75  t-up-test.conllu
+00029b20: 222c 2050 6174 6828 2264 6174 6173 6574  ", Path("dataset
+00029b30: 7322 2920 2f20 6461 7461 7365 745f 6e61  s") / dataset_na
+00029b40: 6d65 290a 0a20 2020 2020 2020 2073 7570  me)..        sup
+00029b50: 6572 2829 2e5f 5f69 6e69 745f 5f28 0a20  er().__init__(. 
+00029b60: 2020 2020 2020 2020 2020 2064 6174 615f             data_
+00029b70: 666f 6c64 6572 2c0a 2020 2020 2020 2020  folder,.        
+00029b80: 2020 2020 636f 6c75 6d6e 732c 0a20 2020      columns,.   
+00029b90: 2020 2020 2020 2020 2065 6e63 6f64 696e           encodin
+00029ba0: 673d 2275 7466 2d38 222c 0a20 2020 2020  g="utf-8",.     
+00029bb0: 2020 2020 2020 2074 7261 696e 5f66 696c         train_fil
+00029bc0: 653d 2265 6e5f 6577 742d 7570 2d74 7261  e="en_ewt-up-tra
+00029bd0: 696e 2e63 6f6e 6c6c 7522 2c0a 2020 2020  in.conllu",.    
+00029be0: 2020 2020 2020 2020 7465 7374 5f66 696c          test_fil
+00029bf0: 653d 2265 6e5f 6577 742d 7570 2d74 6573  e="en_ewt-up-tes
+00029c00: 742e 636f 6e6c 6c75 222c 0a20 2020 2020  t.conllu",.     
+00029c10: 2020 2020 2020 2064 6576 5f66 696c 653d         dev_file=
+00029c20: 2265 6e5f 6577 742d 7570 2d64 6576 2e63  "en_ewt-up-dev.c
+00029c30: 6f6e 6c6c 7522 2c0a 2020 2020 2020 2020  onllu",.        
+00029c40: 2020 2020 696e 5f6d 656d 6f72 793d 696e      in_memory=in
+00029c50: 5f6d 656d 6f72 792c 0a20 2020 2020 2020  _memory,.       
+00029c60: 2020 2020 2064 6f63 756d 656e 745f 7365       document_se
+00029c70: 7061 7261 746f 725f 746f 6b65 6e3d 4e6f  parator_token=No
+00029c80: 6e65 2069 6620 6e6f 7420 646f 6375 6d65  ne if not docume
+00029c90: 6e74 5f61 735f 7365 7175 656e 6365 2065  nt_as_sequence e
+00029ca0: 6c73 6520 222d 444f 4353 5441 5254 2d22  lse "-DOCSTART-"
+00029cb0: 2c0a 2020 2020 2020 2020 2020 2020 636f  ,.            co
+00029cc0: 6d6d 656e 745f 7379 6d62 6f6c 3d22 2322  mment_symbol="#"
+00029cd0: 2c0a 2020 2020 2020 2020 2020 2020 6c61  ,.            la
+00029ce0: 6265 6c5f 6e61 6d65 5f6d 6170 3d7b 225f  bel_name_map={"_
+00029cf0: 223a 2022 4f22 7d2c 0a20 2020 2020 2020  ": "O"},.       
+00029d00: 2020 2020 202a 2a63 6f72 7075 7361 7267       **corpusarg
+00029d10: 732c 0a20 2020 2020 2020 2029 0a0a 0a63  s,.        )...c
+00029d20: 6c61 7373 2055 505f 4652 454e 4348 2843  lass UP_FRENCH(C
+00029d30: 6f6c 756d 6e43 6f72 7075 7329 3a0a 2020  olumnCorpus):.  
+00029d40: 2020 6465 6620 5f5f 696e 6974 5f5f 280a    def __init__(.
+00029d50: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
+00029d60: 2020 2020 2020 6261 7365 5f70 6174 683a        base_path:
+00029d70: 204f 7074 696f 6e61 6c5b 556e 696f 6e5b   Optional[Union[
+00029d80: 7374 722c 2050 6174 685d 5d20 3d20 4e6f  str, Path]] = No
+00029d90: 6e65 2c0a 2020 2020 2020 2020 696e 5f6d  ne,.        in_m
+00029da0: 656d 6f72 793a 2062 6f6f 6c20 3d20 5472  emory: bool = Tr
+00029db0: 7565 2c0a 2020 2020 2020 2020 646f 6375  ue,.        docu
+00029dc0: 6d65 6e74 5f61 735f 7365 7175 656e 6365  ment_as_sequence
+00029dd0: 3a20 626f 6f6c 203d 2046 616c 7365 2c0a  : bool = False,.
+00029de0: 2020 2020 2020 2020 2a2a 636f 7270 7573          **corpus
+00029df0: 6172 6773 2c0a 2020 2020 2920 2d3e 204e  args,.    ) -> N
+00029e00: 6f6e 653a 0a20 2020 2020 2020 2022 2222  one:.        """
+00029e10: 496e 6974 6961 6c69 7a65 2074 6865 2046  Initialize the F
+00029e20: 7265 6e63 6820 6461 7461 7365 7420 6672  rench dataset fr
+00029e30: 6f6d 2074 6865 2055 6e69 7665 7273 616c  om the Universal
+00029e40: 2050 726f 706f 7369 7469 6f6e 7320 4261   Propositions Ba
+00029e50: 6e6b 2e0a 0a20 2020 2020 2020 2054 6865  nk...        The
+00029e60: 2064 6174 6173 6574 2069 7320 646f 776e   dataset is down
+00029e70: 6c6f 6164 6564 2066 726f 6d20 2068 7474  loaded from  htt
+00029e80: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
+00029e90: 5379 7374 656d 2d54 2f55 6e69 7665 7273  System-T/Univers
+00029ea0: 616c 5072 6f70 6f73 6974 696f 6e73 0a0a  alPropositions..
+00029eb0: 2020 2020 2020 2020 4172 6773 3a0a 2020          Args:.  
+00029ec0: 2020 2020 2020 2020 2020 6261 7365 5f70            base_p
+00029ed0: 6174 683a 2044 6566 6175 6c74 2069 7320  ath: Default is 
+00029ee0: 4e6f 6e65 2c20 6d65 616e 696e 6720 7468  None, meaning th
+00029ef0: 6174 2063 6f72 7075 7320 6765 7473 2061  at corpus gets a
+00029f00: 7574 6f2d 646f 776e 6c6f 6164 6564 2061  uto-downloaded a
+00029f10: 6e64 206c 6f61 6465 642e 2059 6f75 2063  nd loaded. You c
+00029f20: 616e 206f 7665 7272 6964 6520 7468 6973  an override this
+00029f30: 2074 6f20 706f 696e 7420 746f 2061 2064   to point to a d
+00029f40: 6966 6665 7265 6e74 2066 6f6c 6465 7220  ifferent folder 
+00029f50: 6275 7420 7479 7069 6361 6c6c 7920 7468  but typically th
+00029f60: 6973 2073 686f 756c 6420 6e6f 7420 6265  is should not be
+00029f70: 206e 6563 6573 7361 7279 2e0a 2020 2020   necessary..    
+00029f80: 2020 2020 2020 2020 696e 5f6d 656d 6f72          in_memor
+00029f90: 793a 2049 6620 5472 7565 2c20 6b65 6570  y: If True, keep
+00029fa0: 7320 6461 7461 7365 7420 696e 206d 656d  s dataset in mem
+00029fb0: 6f72 7920 6769 7669 6e67 2073 7065 6564  ory giving speed
+00029fc0: 7570 7320 696e 2074 7261 696e 696e 672e  ups in training.
+00029fd0: 0a20 2020 2020 2020 2020 2020 2064 6f63  .            doc
+00029fe0: 756d 656e 745f 6173 5f73 6571 7565 6e63  ument_as_sequenc
+00029ff0: 653a 2049 6620 5472 7565 2c20 616c 6c20  e: If True, all 
+0002a000: 7365 6e74 656e 6365 7320 6f66 2061 2064  sentences of a d
+0002a010: 6f63 756d 656e 7420 6172 6520 7265 6164  ocument are read
+0002a020: 2069 6e74 6f20 6120 7369 6e67 6c65 2053   into a single S
+0002a030: 656e 7465 6e63 6520 6f62 6a65 6374 0a20  entence object. 
+0002a040: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0002a050: 2020 2062 6173 655f 7061 7468 203d 206b     base_path = k
+0002a060: 6f6c 6962 7269 2e63 6163 6865 5f72 6f6f  olibri.cache_roo
+0002a070: 7420 2f20 2264 6174 6173 6574 7322 2069  t / "datasets" i
+0002a080: 6620 6e6f 7420 6261 7365 5f70 6174 6820  f not base_path 
+0002a090: 656c 7365 2050 6174 6828 6261 7365 5f70  else Path(base_p
+0002a0a0: 6174 6829 0a0a 2020 2020 2020 2020 2320  ath)..        # 
+0002a0b0: 636f 6c75 6d6e 2066 6f72 6d61 740a 2020  column format.  
+0002a0c0: 2020 2020 2020 636f 6c75 6d6e 7320 3d20        columns = 
+0002a0d0: 7b31 3a20 2274 6578 7422 2c20 393a 2022  {1: "text", 9: "
+0002a0e0: 6672 616d 6522 7d0a 0a20 2020 2020 2020  frame"}..       
+0002a0f0: 2023 2074 6869 7320 6461 7461 7365 7420   # this dataset 
+0002a100: 6e61 6d65 0a20 2020 2020 2020 2064 6174  name.        dat
+0002a110: 6173 6574 5f6e 616d 6520 3d20 7365 6c66  aset_name = self
+0002a120: 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e 616d  .__class__.__nam
+0002a130: 655f 5f2e 6c6f 7765 7228 290a 0a20 2020  e__.lower()..   
+0002a140: 2020 2020 2064 6174 615f 666f 6c64 6572       data_folder
+0002a150: 203d 2062 6173 655f 7061 7468 202f 2064   = base_path / d
+0002a160: 6174 6173 6574 5f6e 616d 650a 0a20 2020  ataset_name..   
+0002a170: 2020 2020 2023 2064 6f77 6e6c 6f61 6420       # download 
+0002a180: 6461 7461 2069 6620 6e65 6365 7373 6172  data if necessar
+0002a190: 790a 2020 2020 2020 2020 7570 5f66 725f  y.        up_fr_
+0002a1a0: 7061 7468 203d 2022 6874 7470 733a 2f2f  path = "https://
+0002a1b0: 7261 772e 6769 7468 7562 7573 6572 636f  raw.githubuserco
+0002a1c0: 6e74 656e 742e 636f 6d2f 5379 7374 656d  ntent.com/System
+0002a1d0: 2d54 2f55 6e69 7665 7273 616c 5072 6f70  -T/UniversalProp
+0002a1e0: 6f73 6974 696f 6e73 2f6d 6173 7465 722f  ositions/master/
+0002a1f0: 5550 5f46 7265 6e63 682f 220a 2020 2020  UP_French/".    
+0002a200: 2020 2020 6361 6368 6564 5f70 6174 6828      cached_path(
+0002a210: 6622 7b75 705f 6672 5f70 6174 687d 6672  f"{up_fr_path}fr
+0002a220: 2d75 702d 7472 6169 6e2e 636f 6e6c 6c75  -up-train.conllu
+0002a230: 222c 2050 6174 6828 2264 6174 6173 6574  ", Path("dataset
+0002a240: 7322 2920 2f20 6461 7461 7365 745f 6e61  s") / dataset_na
+0002a250: 6d65 290a 2020 2020 2020 2020 6361 6368  me).        cach
+0002a260: 6564 5f70 6174 6828 6622 7b75 705f 6672  ed_path(f"{up_fr
+0002a270: 5f70 6174 687d 6672 2d75 702d 6465 762e  _path}fr-up-dev.
+0002a280: 636f 6e6c 6c75 222c 2050 6174 6828 2264  conllu", Path("d
+0002a290: 6174 6173 6574 7322 2920 2f20 6461 7461  atasets") / data
+0002a2a0: 7365 745f 6e61 6d65 290a 2020 2020 2020  set_name).      
+0002a2b0: 2020 6361 6368 6564 5f70 6174 6828 6622    cached_path(f"
+0002a2c0: 7b75 705f 6672 5f70 6174 687d 6672 2d75  {up_fr_path}fr-u
+0002a2d0: 702d 7465 7374 2e63 6f6e 6c6c 7522 2c20  p-test.conllu", 
+0002a2e0: 5061 7468 2822 6461 7461 7365 7473 2229  Path("datasets")
+0002a2f0: 202f 2064 6174 6173 6574 5f6e 616d 6529   / dataset_name)
+0002a300: 0a0a 2020 2020 2020 2020 7375 7065 7228  ..        super(
+0002a310: 292e 5f5f 696e 6974 5f5f 280a 2020 2020  ).__init__(.    
+0002a320: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
+0002a330: 6465 722c 0a20 2020 2020 2020 2020 2020  der,.           
+0002a340: 2063 6f6c 756d 6e73 2c0a 2020 2020 2020   columns,.      
+0002a350: 2020 2020 2020 656e 636f 6469 6e67 3d22        encoding="
+0002a360: 7574 662d 3822 2c0a 2020 2020 2020 2020  utf-8",.        
+0002a370: 2020 2020 7472 6169 6e5f 6669 6c65 3d22      train_file="
+0002a380: 6672 2d75 702d 7472 6169 6e2e 636f 6e6c  fr-up-train.conl
+0002a390: 6c75 222c 0a20 2020 2020 2020 2020 2020  lu",.           
+0002a3a0: 2074 6573 745f 6669 6c65 3d22 6672 2d75   test_file="fr-u
+0002a3b0: 702d 7465 7374 2e63 6f6e 6c6c 7522 2c0a  p-test.conllu",.
+0002a3c0: 2020 2020 2020 2020 2020 2020 6465 765f              dev_
+0002a3d0: 6669 6c65 3d22 6672 2d75 702d 6465 762e  file="fr-up-dev.
+0002a3e0: 636f 6e6c 6c75 222c 0a20 2020 2020 2020  conllu",.       
+0002a3f0: 2020 2020 2069 6e5f 6d65 6d6f 7279 3d69       in_memory=i
+0002a400: 6e5f 6d65 6d6f 7279 2c0a 2020 2020 2020  n_memory,.      
+0002a410: 2020 2020 2020 646f 6375 6d65 6e74 5f73        document_s
+0002a420: 6570 6172 6174 6f72 5f74 6f6b 656e 3d4e  eparator_token=N
+0002a430: 6f6e 6520 6966 206e 6f74 2064 6f63 756d  one if not docum
+0002a440: 656e 745f 6173 5f73 6571 7565 6e63 6520  ent_as_sequence 
+0002a450: 656c 7365 2022 2d44 4f43 5354 4152 542d  else "-DOCSTART-
+0002a460: 222c 0a20 2020 2020 2020 2020 2020 2063  ",.            c
+0002a470: 6f6d 6d65 6e74 5f73 796d 626f 6c3d 2223  omment_symbol="#
+0002a480: 222c 0a20 2020 2020 2020 2020 2020 202a  ",.            *
+0002a490: 2a63 6f72 7075 7361 7267 732c 0a20 2020  *corpusargs,.   
+0002a4a0: 2020 2020 2029 0a0a 0a63 6c61 7373 2055       )...class U
+0002a4b0: 505f 4649 4e4e 4953 4828 436f 6c75 6d6e  P_FINNISH(Column
+0002a4c0: 436f 7270 7573 293a 0a20 2020 2064 6566  Corpus):.    def
+0002a4d0: 205f 5f69 6e69 745f 5f28 0a20 2020 2020   __init__(.     
+0002a4e0: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
+0002a4f0: 2062 6173 655f 7061 7468 3a20 4f70 7469   base_path: Opti
+0002a500: 6f6e 616c 5b55 6e69 6f6e 5b73 7472 2c20  onal[Union[str, 
+0002a510: 5061 7468 5d5d 203d 204e 6f6e 652c 0a20  Path]] = None,. 
+0002a520: 2020 2020 2020 2069 6e5f 6d65 6d6f 7279         in_memory
+0002a530: 3a20 626f 6f6c 203d 2054 7275 652c 0a20  : bool = True,. 
+0002a540: 2020 2020 2020 2064 6f63 756d 656e 745f         document_
+0002a550: 6173 5f73 6571 7565 6e63 653a 2062 6f6f  as_sequence: boo
+0002a560: 6c20 3d20 4661 6c73 652c 0a20 2020 2020  l = False,.     
+0002a570: 2020 202a 2a63 6f72 7075 7361 7267 732c     **corpusargs,
+0002a580: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
+0002a590: 2020 2020 2020 2020 2222 2249 6e69 7469          """Initi
+0002a5a0: 616c 697a 6520 7468 6520 4669 6e6e 6973  alize the Finnis
+0002a5b0: 6820 6461 7461 7365 7420 6672 6f6d 2074  h dataset from t
+0002a5c0: 6865 2055 6e69 7665 7273 616c 2050 726f  he Universal Pro
+0002a5d0: 706f 7369 7469 6f6e 7320 4261 6e6b 2e0a  positions Bank..
+0002a5e0: 0a20 2020 2020 2020 2054 6865 2064 6174  .        The dat
+0002a5f0: 6173 6574 2069 7320 646f 776e 6c6f 6164  aset is download
+0002a600: 6564 2066 726f 6d20 2068 7474 7073 3a2f  ed from  https:/
+0002a610: 2f67 6974 6875 622e 636f 6d2f 5379 7374  /github.com/Syst
+0002a620: 656d 2d54 2f55 6e69 7665 7273 616c 5072  em-T/UniversalPr
+0002a630: 6f70 6f73 6974 696f 6e73 0a0a 2020 2020  opositions..    
+0002a640: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
+0002a650: 2020 2020 2020 6261 7365 5f70 6174 683a        base_path:
+0002a660: 2044 6566 6175 6c74 2069 7320 4e6f 6e65   Default is None
+0002a670: 2c20 6d65 616e 696e 6720 7468 6174 2063  , meaning that c
+0002a680: 6f72 7075 7320 6765 7473 2061 7574 6f2d  orpus gets auto-
+0002a690: 646f 776e 6c6f 6164 6564 2061 6e64 206c  downloaded and l
+0002a6a0: 6f61 6465 642e 2059 6f75 2063 616e 206f  oaded. You can o
+0002a6b0: 7665 7272 6964 6520 7468 6973 2074 6f20  verride this to 
+0002a6c0: 706f 696e 7420 746f 2061 2064 6966 6665  point to a diffe
+0002a6d0: 7265 6e74 2066 6f6c 6465 7220 6275 7420  rent folder but 
+0002a6e0: 7479 7069 6361 6c6c 7920 7468 6973 2073  typically this s
+0002a6f0: 686f 756c 6420 6e6f 7420 6265 206e 6563  hould not be nec
+0002a700: 6573 7361 7279 2e0a 2020 2020 2020 2020  essary..        
+0002a710: 2020 2020 696e 5f6d 656d 6f72 793a 2049      in_memory: I
+0002a720: 6620 5472 7565 2c20 6b65 6570 7320 6461  f True, keeps da
+0002a730: 7461 7365 7420 696e 206d 656d 6f72 7920  taset in memory 
+0002a740: 6769 7669 6e67 2073 7065 6564 7570 7320  giving speedups 
+0002a750: 696e 2074 7261 696e 696e 672e 0a20 2020  in training..   
+0002a760: 2020 2020 2020 2020 2064 6f63 756d 656e           documen
+0002a770: 745f 6173 5f73 6571 7565 6e63 653a 2049  t_as_sequence: I
+0002a780: 6620 5472 7565 2c20 616c 6c20 7365 6e74  f True, all sent
+0002a790: 656e 6365 7320 6f66 2061 2064 6f63 756d  ences of a docum
+0002a7a0: 656e 7420 6172 6520 7265 6164 2069 6e74  ent are read int
+0002a7b0: 6f20 6120 7369 6e67 6c65 2053 656e 7465  o a single Sente
+0002a7c0: 6e63 6520 6f62 6a65 6374 0a20 2020 2020  nce object.     
+0002a7d0: 2020 2022 2222 0a20 2020 2020 2020 2062     """.        b
+0002a7e0: 6173 655f 7061 7468 203d 206b 6f6c 6962  ase_path = kolib
+0002a7f0: 7269 2e63 6163 6865 5f72 6f6f 7420 2f20  ri.cache_root / 
+0002a800: 2264 6174 6173 6574 7322 2069 6620 6e6f  "datasets" if no
+0002a810: 7420 6261 7365 5f70 6174 6820 656c 7365  t base_path else
+0002a820: 2050 6174 6828 6261 7365 5f70 6174 6829   Path(base_path)
+0002a830: 0a0a 2020 2020 2020 2020 2320 636f 6c75  ..        # colu
+0002a840: 6d6e 2066 6f72 6d61 740a 2020 2020 2020  mn format.      
+0002a850: 2020 636f 6c75 6d6e 7320 3d20 7b31 3a20    columns = {1: 
+0002a860: 2274 6578 7422 2c20 393a 2022 6672 616d  "text", 9: "fram
+0002a870: 6522 7d0a 0a20 2020 2020 2020 2023 2074  e"}..        # t
+0002a880: 6869 7320 6461 7461 7365 7420 6e61 6d65  his dataset name
+0002a890: 0a20 2020 2020 2020 2064 6174 6173 6574  .        dataset
+0002a8a0: 5f6e 616d 6520 3d20 7365 6c66 2e5f 5f63  _name = self.__c
+0002a8b0: 6c61 7373 5f5f 2e5f 5f6e 616d 655f 5f2e  lass__.__name__.
+0002a8c0: 6c6f 7765 7228 290a 0a20 2020 2020 2020  lower()..       
+0002a8d0: 2064 6174 615f 666f 6c64 6572 203d 2062   data_folder = b
+0002a8e0: 6173 655f 7061 7468 202f 2064 6174 6173  ase_path / datas
+0002a8f0: 6574 5f6e 616d 650a 0a20 2020 2020 2020  et_name..       
+0002a900: 2023 2064 6f77 6e6c 6f61 6420 6461 7461   # download data
+0002a910: 2069 6620 6e65 6365 7373 6172 790a 2020   if necessary.  
+0002a920: 2020 2020 2020 7570 5f66 695f 7061 7468        up_fi_path
+0002a930: 203d 2022 6874 7470 733a 2f2f 7261 772e   = "https://raw.
+0002a940: 6769 7468 7562 7573 6572 636f 6e74 656e  githubuserconten
+0002a950: 742e 636f 6d2f 5379 7374 656d 2d54 2f55  t.com/System-T/U
+0002a960: 6e69 7665 7273 616c 5072 6f70 6f73 6974  niversalProposit
+0002a970: 696f 6e73 2f6d 6173 7465 722f 5550 5f46  ions/master/UP_F
+0002a980: 696e 6e69 7368 2f22 0a20 2020 2020 2020  innish/".       
+0002a990: 2063 6163 6865 645f 7061 7468 2866 227b   cached_path(f"{
+0002a9a0: 7570 5f66 695f 7061 7468 7d66 692d 7570  up_fi_path}fi-up
+0002a9b0: 2d74 7261 696e 2e63 6f6e 6c6c 7522 2c20  -train.conllu", 
+0002a9c0: 5061 7468 2822 6461 7461 7365 7473 2229  Path("datasets")
+0002a9d0: 202f 2064 6174 6173 6574 5f6e 616d 6529   / dataset_name)
+0002a9e0: 0a20 2020 2020 2020 2063 6163 6865 645f  .        cached_
+0002a9f0: 7061 7468 2866 227b 7570 5f66 695f 7061  path(f"{up_fi_pa
+0002aa00: 7468 7d66 692d 7570 2d64 6576 2e63 6f6e  th}fi-up-dev.con
+0002aa10: 6c6c 7522 2c20 5061 7468 2822 6461 7461  llu", Path("data
+0002aa20: 7365 7473 2229 202f 2064 6174 6173 6574  sets") / dataset
+0002aa30: 5f6e 616d 6529 0a20 2020 2020 2020 2063  _name).        c
+0002aa40: 6163 6865 645f 7061 7468 2866 227b 7570  ached_path(f"{up
+0002aa50: 5f66 695f 7061 7468 7d66 692d 7570 2d74  _fi_path}fi-up-t
+0002aa60: 6573 742e 636f 6e6c 6c75 222c 2050 6174  est.conllu", Pat
+0002aa70: 6828 2264 6174 6173 6574 7322 2920 2f20  h("datasets") / 
+0002aa80: 6461 7461 7365 745f 6e61 6d65 290a 0a20  dataset_name).. 
+0002aa90: 2020 2020 2020 2073 7570 6572 2829 2e5f         super()._
+0002aaa0: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
+0002aab0: 2020 2020 2064 6174 615f 666f 6c64 6572       data_folder
+0002aac0: 2c0a 2020 2020 2020 2020 2020 2020 636f  ,.            co
+0002aad0: 6c75 6d6e 732c 0a20 2020 2020 2020 2020  lumns,.         
+0002aae0: 2020 2065 6e63 6f64 696e 673d 2275 7466     encoding="utf
+0002aaf0: 2d38 222c 0a20 2020 2020 2020 2020 2020  -8",.           
+0002ab00: 2074 7261 696e 5f66 696c 653d 2266 692d   train_file="fi-
+0002ab10: 7570 2d74 7261 696e 2e63 6f6e 6c6c 7522  up-train.conllu"
+0002ab20: 2c0a 2020 2020 2020 2020 2020 2020 7465  ,.            te
+0002ab30: 7374 5f66 696c 653d 2266 692d 7570 2d74  st_file="fi-up-t
+0002ab40: 6573 742e 636f 6e6c 6c75 222c 0a20 2020  est.conllu",.   
+0002ab50: 2020 2020 2020 2020 2064 6576 5f66 696c           dev_fil
+0002ab60: 653d 2266 692d 7570 2d64 6576 2e63 6f6e  e="fi-up-dev.con
+0002ab70: 6c6c 7522 2c0a 2020 2020 2020 2020 2020  llu",.          
+0002ab80: 2020 696e 5f6d 656d 6f72 793d 696e 5f6d    in_memory=in_m
+0002ab90: 656d 6f72 792c 0a20 2020 2020 2020 2020  emory,.         
+0002aba0: 2020 2064 6f63 756d 656e 745f 7365 7061     document_sepa
+0002abb0: 7261 746f 725f 746f 6b65 6e3d 4e6f 6e65  rator_token=None
+0002abc0: 2069 6620 6e6f 7420 646f 6375 6d65 6e74   if not document
+0002abd0: 5f61 735f 7365 7175 656e 6365 2065 6c73  _as_sequence els
+0002abe0: 6520 222d 444f 4353 5441 5254 2d22 2c0a  e "-DOCSTART-",.
+0002abf0: 2020 2020 2020 2020 2020 2020 636f 6d6d              comm
+0002ac00: 656e 745f 7379 6d62 6f6c 3d22 2322 2c0a  ent_symbol="#",.
+0002ac10: 2020 2020 2020 2020 2020 2020 2a2a 636f              **co
+0002ac20: 7270 7573 6172 6773 2c0a 2020 2020 2020  rpusargs,.      
+0002ac30: 2020 290a 0a0a 636c 6173 7320 5550 5f47    )...class UP_G
+0002ac40: 4552 4d41 4e28 436f 6c75 6d6e 436f 7270  ERMAN(ColumnCorp
+0002ac50: 7573 293a 0a20 2020 2064 6566 205f 5f69  us):.    def __i
+0002ac60: 6e69 745f 5f28 0a20 2020 2020 2020 2073  nit__(.        s
+0002ac70: 656c 662c 0a20 2020 2020 2020 2062 6173  elf,.        bas
+0002ac80: 655f 7061 7468 3a20 4f70 7469 6f6e 616c  e_path: Optional
+0002ac90: 5b55 6e69 6f6e 5b73 7472 2c20 5061 7468  [Union[str, Path
+0002aca0: 5d5d 203d 204e 6f6e 652c 0a20 2020 2020  ]] = None,.     
+0002acb0: 2020 2069 6e5f 6d65 6d6f 7279 3a20 626f     in_memory: bo
+0002acc0: 6f6c 203d 2054 7275 652c 0a20 2020 2020  ol = True,.     
+0002acd0: 2020 2064 6f63 756d 656e 745f 6173 5f73     document_as_s
+0002ace0: 6571 7565 6e63 653a 2062 6f6f 6c20 3d20  equence: bool = 
+0002acf0: 4661 6c73 652c 0a20 2020 2020 2020 202a  False,.        *
+0002ad00: 2a63 6f72 7075 7361 7267 732c 0a20 2020  *corpusargs,.   
+0002ad10: 2029 202d 3e20 4e6f 6e65 3a0a 2020 2020   ) -> None:.    
+0002ad20: 2020 2020 2222 2249 6e69 7469 616c 697a      """Initializ
+0002ad30: 6520 7468 6520 4765 726d 616e 2064 6174  e the German dat
+0002ad40: 6173 6574 2066 726f 6d20 7468 6520 556e  aset from the Un
+0002ad50: 6976 6572 7361 6c20 5072 6f70 6f73 6974  iversal Proposit
+0002ad60: 696f 6e73 2042 616e 6b2e 0a0a 2020 2020  ions Bank...    
+0002ad70: 2020 2020 5468 6520 6461 7461 7365 7420      The dataset 
+0002ad80: 6973 2064 6f77 6e6c 6f61 6465 6420 6672  is downloaded fr
+0002ad90: 6f6d 2020 6874 7470 733a 2f2f 6769 7468  om  https://gith
+0002ada0: 7562 2e63 6f6d 2f53 7973 7465 6d2d 542f  ub.com/System-T/
+0002adb0: 556e 6976 6572 7361 6c50 726f 706f 7369  UniversalProposi
+0002adc0: 7469 6f6e 730a 0a20 2020 2020 2020 2041  tions..        A
+0002add0: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
+0002ade0: 2062 6173 655f 7061 7468 3a20 4465 6661   base_path: Defa
+0002adf0: 756c 7420 6973 204e 6f6e 652c 206d 6561  ult is None, mea
+0002ae00: 6e69 6e67 2074 6861 7420 636f 7270 7573  ning that corpus
+0002ae10: 2067 6574 7320 6175 746f 2d64 6f77 6e6c   gets auto-downl
+0002ae20: 6f61 6465 6420 616e 6420 6c6f 6164 6564  oaded and loaded
+0002ae30: 2e20 596f 7520 6361 6e20 6f76 6572 7269  . You can overri
+0002ae40: 6465 2074 6869 7320 746f 2070 6f69 6e74  de this to point
+0002ae50: 2074 6f20 6120 6469 6666 6572 656e 7420   to a different 
+0002ae60: 666f 6c64 6572 2062 7574 2074 7970 6963  folder but typic
+0002ae70: 616c 6c79 2074 6869 7320 7368 6f75 6c64  ally this should
+0002ae80: 206e 6f74 2062 6520 6e65 6365 7373 6172   not be necessar
+0002ae90: 792e 0a20 2020 2020 2020 2020 2020 2069  y..            i
+0002aea0: 6e5f 6d65 6d6f 7279 3a20 4966 2054 7275  n_memory: If Tru
+0002aeb0: 652c 206b 6565 7073 2064 6174 6173 6574  e, keeps dataset
+0002aec0: 2069 6e20 6d65 6d6f 7279 2067 6976 696e   in memory givin
+0002aed0: 6720 7370 6565 6475 7073 2069 6e20 7472  g speedups in tr
+0002aee0: 6169 6e69 6e67 2e0a 2020 2020 2020 2020  aining..        
+0002aef0: 2020 2020 646f 6375 6d65 6e74 5f61 735f      document_as_
+0002af00: 7365 7175 656e 6365 3a20 4966 2054 7275  sequence: If Tru
+0002af10: 652c 2061 6c6c 2073 656e 7465 6e63 6573  e, all sentences
+0002af20: 206f 6620 6120 646f 6375 6d65 6e74 2061   of a document a
+0002af30: 7265 2072 6561 6420 696e 746f 2061 2073  re read into a s
+0002af40: 696e 676c 6520 5365 6e74 656e 6365 206f  ingle Sentence o
+0002af50: 626a 6563 740a 2020 2020 2020 2020 2222  bject.        ""
+0002af60: 220a 2020 2020 2020 2020 6261 7365 5f70  ".        base_p
+0002af70: 6174 6820 3d20 6b6f 6c69 6272 692e 6361  ath = kolibri.ca
+0002af80: 6368 655f 726f 6f74 202f 2022 6461 7461  che_root / "data
+0002af90: 7365 7473 2220 6966 206e 6f74 2062 6173  sets" if not bas
+0002afa0: 655f 7061 7468 2065 6c73 6520 5061 7468  e_path else Path
+0002afb0: 2862 6173 655f 7061 7468 290a 0a20 2020  (base_path)..   
+0002afc0: 2020 2020 2023 2063 6f6c 756d 6e20 666f       # column fo
+0002afd0: 726d 6174 0a20 2020 2020 2020 2063 6f6c  rmat.        col
+0002afe0: 756d 6e73 203d 207b 313a 2022 7465 7874  umns = {1: "text
+0002aff0: 222c 2039 3a20 2266 7261 6d65 227d 0a0a  ", 9: "frame"}..
+0002b000: 2020 2020 2020 2020 2320 7468 6973 2064          # this d
+0002b010: 6174 6173 6574 206e 616d 650a 2020 2020  ataset name.    
+0002b020: 2020 2020 6461 7461 7365 745f 6e61 6d65      dataset_name
+0002b030: 203d 2073 656c 662e 5f5f 636c 6173 735f   = self.__class_
+0002b040: 5f2e 5f5f 6e61 6d65 5f5f 2e6c 6f77 6572  _.__name__.lower
+0002b050: 2829 0a0a 2020 2020 2020 2020 6461 7461  ()..        data
+0002b060: 5f66 6f6c 6465 7220 3d20 6261 7365 5f70  _folder = base_p
+0002b070: 6174 6820 2f20 6461 7461 7365 745f 6e61  ath / dataset_na
+0002b080: 6d65 0a0a 2020 2020 2020 2020 2320 646f  me..        # do
+0002b090: 776e 6c6f 6164 2064 6174 6120 6966 206e  wnload data if n
+0002b0a0: 6563 6573 7361 7279 0a20 2020 2020 2020  ecessary.       
+0002b0b0: 2075 705f 6465 5f70 6174 6820 3d20 2268   up_de_path = "h
+0002b0c0: 7474 7073 3a2f 2f72 6177 2e67 6974 6875  ttps://raw.githu
+0002b0d0: 6275 7365 7263 6f6e 7465 6e74 2e63 6f6d  busercontent.com
+0002b0e0: 2f53 7973 7465 6d2d 542f 556e 6976 6572  /System-T/Univer
+0002b0f0: 7361 6c50 726f 706f 7369 7469 6f6e 732f  salPropositions/
+0002b100: 6d61 7374 6572 2f55 505f 4765 726d 616e  master/UP_German
+0002b110: 2f22 0a20 2020 2020 2020 2063 6163 6865  /".        cache
+0002b120: 645f 7061 7468 2866 227b 7570 5f64 655f  d_path(f"{up_de_
+0002b130: 7061 7468 7d64 652d 7570 2d74 7261 696e  path}de-up-train
+0002b140: 2e63 6f6e 6c6c 7522 2c20 5061 7468 2822  .conllu", Path("
+0002b150: 6461 7461 7365 7473 2229 202f 2064 6174  datasets") / dat
+0002b160: 6173 6574 5f6e 616d 6529 0a20 2020 2020  aset_name).     
+0002b170: 2020 2063 6163 6865 645f 7061 7468 2866     cached_path(f
+0002b180: 227b 7570 5f64 655f 7061 7468 7d64 652d  "{up_de_path}de-
+0002b190: 7570 2d64 6576 2e63 6f6e 6c6c 7522 2c20  up-dev.conllu", 
+0002b1a0: 5061 7468 2822 6461 7461 7365 7473 2229  Path("datasets")
+0002b1b0: 202f 2064 6174 6173 6574 5f6e 616d 6529   / dataset_name)
+0002b1c0: 0a20 2020 2020 2020 2063 6163 6865 645f  .        cached_
+0002b1d0: 7061 7468 2866 227b 7570 5f64 655f 7061  path(f"{up_de_pa
+0002b1e0: 7468 7d64 652d 7570 2d74 6573 742e 636f  th}de-up-test.co
+0002b1f0: 6e6c 6c75 222c 2050 6174 6828 2264 6174  nllu", Path("dat
+0002b200: 6173 6574 7322 2920 2f20 6461 7461 7365  asets") / datase
+0002b210: 745f 6e61 6d65 290a 0a20 2020 2020 2020  t_name)..       
+0002b220: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
+0002b230: 5f28 0a20 2020 2020 2020 2020 2020 2064  _(.            d
+0002b240: 6174 615f 666f 6c64 6572 2c0a 2020 2020  ata_folder,.    
+0002b250: 2020 2020 2020 2020 636f 6c75 6d6e 732c          columns,
+0002b260: 0a20 2020 2020 2020 2020 2020 2065 6e63  .            enc
+0002b270: 6f64 696e 673d 2275 7466 2d38 222c 0a20  oding="utf-8",. 
+0002b280: 2020 2020 2020 2020 2020 2074 7261 696e             train
+0002b290: 5f66 696c 653d 2264 652d 7570 2d74 7261  _file="de-up-tra
+0002b2a0: 696e 2e63 6f6e 6c6c 7522 2c0a 2020 2020  in.conllu",.    
+0002b2b0: 2020 2020 2020 2020 7465 7374 5f66 696c          test_fil
+0002b2c0: 653d 2264 652d 7570 2d74 6573 742e 636f  e="de-up-test.co
+0002b2d0: 6e6c 6c75 222c 0a20 2020 2020 2020 2020  nllu",.         
+0002b2e0: 2020 2064 6576 5f66 696c 653d 2264 652d     dev_file="de-
+0002b2f0: 7570 2d64 6576 2e63 6f6e 6c6c 7522 2c0a  up-dev.conllu",.
+0002b300: 2020 2020 2020 2020 2020 2020 696e 5f6d              in_m
+0002b310: 656d 6f72 793d 696e 5f6d 656d 6f72 792c  emory=in_memory,
+0002b320: 0a20 2020 2020 2020 2020 2020 2064 6f63  .            doc
+0002b330: 756d 656e 745f 7365 7061 7261 746f 725f  ument_separator_
+0002b340: 746f 6b65 6e3d 4e6f 6e65 2069 6620 6e6f  token=None if no
+0002b350: 7420 646f 6375 6d65 6e74 5f61 735f 7365  t document_as_se
+0002b360: 7175 656e 6365 2065 6c73 6520 222d 444f  quence else "-DO
+0002b370: 4353 5441 5254 2d22 2c0a 2020 2020 2020  CSTART-",.      
+0002b380: 2020 2020 2020 636f 6d6d 656e 745f 7379        comment_sy
+0002b390: 6d62 6f6c 3d22 2322 2c0a 2020 2020 2020  mbol="#",.      
+0002b3a0: 2020 2020 2020 2a2a 636f 7270 7573 6172        **corpusar
+0002b3b0: 6773 2c0a 2020 2020 2020 2020 290a 0a0a  gs,.        )...
+0002b3c0: 636c 6173 7320 5550 5f49 5441 4c49 414e  class UP_ITALIAN
+0002b3d0: 2843 6f6c 756d 6e43 6f72 7075 7329 3a0a  (ColumnCorpus):.
+0002b3e0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+0002b3f0: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
+0002b400: 2020 2020 2020 2020 6261 7365 5f70 6174          base_pat
+0002b410: 683a 204f 7074 696f 6e61 6c5b 556e 696f  h: Optional[Unio
+0002b420: 6e5b 7374 722c 2050 6174 685d 5d20 3d20  n[str, Path]] = 
+0002b430: 4e6f 6e65 2c0a 2020 2020 2020 2020 696e  None,.        in
+0002b440: 5f6d 656d 6f72 793a 2062 6f6f 6c20 3d20  _memory: bool = 
+0002b450: 5472 7565 2c0a 2020 2020 2020 2020 646f  True,.        do
+0002b460: 6375 6d65 6e74 5f61 735f 7365 7175 656e  cument_as_sequen
+0002b470: 6365 3a20 626f 6f6c 203d 2046 616c 7365  ce: bool = False
+0002b480: 2c0a 2020 2020 2020 2020 2a2a 636f 7270  ,.        **corp
+0002b490: 7573 6172 6773 2c0a 2020 2020 2920 2d3e  usargs,.    ) ->
+0002b4a0: 204e 6f6e 653a 0a20 2020 2020 2020 2022   None:.        "
+0002b4b0: 2222 496e 6974 6961 6c69 7a65 2074 6865  ""Initialize the
+0002b4c0: 2049 7461 6c69 616e 2064 6174 6173 6574   Italian dataset
+0002b4d0: 2066 726f 6d20 7468 6520 556e 6976 6572   from the Univer
+0002b4e0: 7361 6c20 5072 6f70 6f73 6974 696f 6e73  sal Propositions
+0002b4f0: 2042 616e 6b2e 0a0a 2020 2020 2020 2020   Bank...        
+0002b500: 5468 6520 6461 7461 7365 7420 6973 2064  The dataset is d
+0002b510: 6f77 6e6c 6f61 6465 6420 6672 6f6d 2020  ownloaded from  
+0002b520: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
+0002b530: 6f6d 2f53 7973 7465 6d2d 542f 556e 6976  om/System-T/Univ
+0002b540: 6572 7361 6c50 726f 706f 7369 7469 6f6e  ersalProposition
+0002b550: 730a 0a20 2020 2020 2020 2041 7267 733a  s..        Args:
+0002b560: 0a20 2020 2020 2020 2020 2020 2062 6173  .            bas
+0002b570: 655f 7061 7468 3a20 4465 6661 756c 7420  e_path: Default 
+0002b580: 6973 204e 6f6e 652c 206d 6561 6e69 6e67  is None, meaning
+0002b590: 2074 6861 7420 636f 7270 7573 2067 6574   that corpus get
+0002b5a0: 7320 6175 746f 2d64 6f77 6e6c 6f61 6465  s auto-downloade
+0002b5b0: 6420 616e 6420 6c6f 6164 6564 2e20 596f  d and loaded. Yo
+0002b5c0: 7520 6361 6e20 6f76 6572 7269 6465 2074  u can override t
+0002b5d0: 6869 7320 746f 2070 6f69 6e74 2074 6f20  his to point to 
+0002b5e0: 6120 6469 6666 6572 656e 7420 666f 6c64  a different fold
+0002b5f0: 6572 2062 7574 2074 7970 6963 616c 6c79  er but typically
+0002b600: 2074 6869 7320 7368 6f75 6c64 206e 6f74   this should not
+0002b610: 2062 6520 6e65 6365 7373 6172 792e 0a20   be necessary.. 
+0002b620: 2020 2020 2020 2020 2020 2069 6e5f 6d65             in_me
+0002b630: 6d6f 7279 3a20 4966 2054 7275 652c 206b  mory: If True, k
+0002b640: 6565 7073 2064 6174 6173 6574 2069 6e20  eeps dataset in 
+0002b650: 6d65 6d6f 7279 2067 6976 696e 6720 7370  memory giving sp
+0002b660: 6565 6475 7073 2069 6e20 7472 6169 6e69  eedups in traini
+0002b670: 6e67 2e0a 2020 2020 2020 2020 2020 2020  ng..            
+0002b680: 646f 6375 6d65 6e74 5f61 735f 7365 7175  document_as_sequ
+0002b690: 656e 6365 3a20 4966 2054 7275 652c 2061  ence: If True, a
+0002b6a0: 6c6c 2073 656e 7465 6e63 6573 206f 6620  ll sentences of 
+0002b6b0: 6120 646f 6375 6d65 6e74 2061 7265 2072  a document are r
+0002b6c0: 6561 6420 696e 746f 2061 2073 696e 676c  ead into a singl
+0002b6d0: 6520 5365 6e74 656e 6365 206f 626a 6563  e Sentence objec
+0002b6e0: 740a 2020 2020 2020 2020 2222 220a 2020  t.        """.  
+0002b6f0: 2020 2020 2020 6261 7365 5f70 6174 6820        base_path 
+0002b700: 3d20 6b6f 6c69 6272 692e 6361 6368 655f  = kolibri.cache_
+0002b710: 726f 6f74 202f 2022 6461 7461 7365 7473  root / "datasets
+0002b720: 2220 6966 206e 6f74 2062 6173 655f 7061  " if not base_pa
+0002b730: 7468 2065 6c73 6520 5061 7468 2862 6173  th else Path(bas
+0002b740: 655f 7061 7468 290a 0a20 2020 2020 2020  e_path)..       
+0002b750: 2023 2063 6f6c 756d 6e20 666f 726d 6174   # column format
+0002b760: 0a20 2020 2020 2020 2063 6f6c 756d 6e73  .        columns
+0002b770: 203d 207b 313a 2022 7465 7874 222c 2039   = {1: "text", 9
+0002b780: 3a20 2266 7261 6d65 227d 0a0a 2020 2020  : "frame"}..    
+0002b790: 2020 2020 2320 7468 6973 2064 6174 6173      # this datas
+0002b7a0: 6574 206e 616d 650a 2020 2020 2020 2020  et name.        
+0002b7b0: 6461 7461 7365 745f 6e61 6d65 203d 2073  dataset_name = s
+0002b7c0: 656c 662e 5f5f 636c 6173 735f 5f2e 5f5f  elf.__class__.__
+0002b7d0: 6e61 6d65 5f5f 2e6c 6f77 6572 2829 0a0a  name__.lower()..
+0002b7e0: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
+0002b7f0: 6465 7220 3d20 6261 7365 5f70 6174 6820  der = base_path 
+0002b800: 2f20 6461 7461 7365 745f 6e61 6d65 0a0a  / dataset_name..
+0002b810: 2020 2020 2020 2020 2320 646f 776e 6c6f          # downlo
+0002b820: 6164 2064 6174 6120 6966 206e 6563 6573  ad data if neces
+0002b830: 7361 7279 0a20 2020 2020 2020 2075 705f  sary.        up_
+0002b840: 6974 5f70 6174 6820 3d20 2268 7474 7073  it_path = "https
+0002b850: 3a2f 2f72 6177 2e67 6974 6875 6275 7365  ://raw.githubuse
+0002b860: 7263 6f6e 7465 6e74 2e63 6f6d 2f53 7973  rcontent.com/Sys
+0002b870: 7465 6d2d 542f 556e 6976 6572 7361 6c50  tem-T/UniversalP
+0002b880: 726f 706f 7369 7469 6f6e 732f 6d61 7374  ropositions/mast
+0002b890: 6572 2f55 505f 4974 616c 6961 6e2f 220a  er/UP_Italian/".
+0002b8a0: 2020 2020 2020 2020 6361 6368 6564 5f70          cached_p
+0002b8b0: 6174 6828 6622 7b75 705f 6974 5f70 6174  ath(f"{up_it_pat
+0002b8c0: 687d 6974 2d75 702d 7472 6169 6e2e 636f  h}it-up-train.co
+0002b8d0: 6e6c 6c75 222c 2050 6174 6828 2264 6174  nllu", Path("dat
+0002b8e0: 6173 6574 7322 2920 2f20 6461 7461 7365  asets") / datase
+0002b8f0: 745f 6e61 6d65 290a 2020 2020 2020 2020  t_name).        
+0002b900: 6361 6368 6564 5f70 6174 6828 6622 7b75  cached_path(f"{u
+0002b910: 705f 6974 5f70 6174 687d 6974 2d75 702d  p_it_path}it-up-
+0002b920: 6465 762e 636f 6e6c 6c75 222c 2050 6174  dev.conllu", Pat
+0002b930: 6828 2264 6174 6173 6574 7322 2920 2f20  h("datasets") / 
+0002b940: 6461 7461 7365 745f 6e61 6d65 290a 2020  dataset_name).  
+0002b950: 2020 2020 2020 6361 6368 6564 5f70 6174        cached_pat
+0002b960: 6828 6622 7b75 705f 6974 5f70 6174 687d  h(f"{up_it_path}
+0002b970: 6974 2d75 702d 7465 7374 2e63 6f6e 6c6c  it-up-test.conll
+0002b980: 7522 2c20 5061 7468 2822 6461 7461 7365  u", Path("datase
+0002b990: 7473 2229 202f 2064 6174 6173 6574 5f6e  ts") / dataset_n
+0002b9a0: 616d 6529 0a0a 2020 2020 2020 2020 7375  ame)..        su
+0002b9b0: 7065 7228 292e 5f5f 696e 6974 5f5f 280a  per().__init__(.
+0002b9c0: 2020 2020 2020 2020 2020 2020 6461 7461              data
+0002b9d0: 5f66 6f6c 6465 722c 0a20 2020 2020 2020  _folder,.       
+0002b9e0: 2020 2020 2063 6f6c 756d 6e73 2c0a 2020       columns,.  
+0002b9f0: 2020 2020 2020 2020 2020 656e 636f 6469            encodi
+0002ba00: 6e67 3d22 7574 662d 3822 2c0a 2020 2020  ng="utf-8",.    
+0002ba10: 2020 2020 2020 2020 7472 6169 6e5f 6669          train_fi
+0002ba20: 6c65 3d22 6974 2d75 702d 7472 6169 6e2e  le="it-up-train.
+0002ba30: 636f 6e6c 6c75 222c 0a20 2020 2020 2020  conllu",.       
+0002ba40: 2020 2020 2074 6573 745f 6669 6c65 3d22       test_file="
+0002ba50: 6974 2d75 702d 7465 7374 2e63 6f6e 6c6c  it-up-test.conll
+0002ba60: 7522 2c0a 2020 2020 2020 2020 2020 2020  u",.            
+0002ba70: 6465 765f 6669 6c65 3d22 6974 2d75 702d  dev_file="it-up-
+0002ba80: 6465 762e 636f 6e6c 6c75 222c 0a20 2020  dev.conllu",.   
+0002ba90: 2020 2020 2020 2020 2069 6e5f 6d65 6d6f           in_memo
+0002baa0: 7279 3d69 6e5f 6d65 6d6f 7279 2c0a 2020  ry=in_memory,.  
+0002bab0: 2020 2020 2020 2020 2020 646f 6375 6d65            docume
+0002bac0: 6e74 5f73 6570 6172 6174 6f72 5f74 6f6b  nt_separator_tok
+0002bad0: 656e 3d4e 6f6e 6520 6966 206e 6f74 2064  en=None if not d
+0002bae0: 6f63 756d 656e 745f 6173 5f73 6571 7565  ocument_as_seque
+0002baf0: 6e63 6520 656c 7365 2022 2d44 4f43 5354  nce else "-DOCST
+0002bb00: 4152 542d 222c 0a20 2020 2020 2020 2020  ART-",.         
+0002bb10: 2020 2063 6f6d 6d65 6e74 5f73 796d 626f     comment_symbo
+0002bb20: 6c3d 2223 222c 0a20 2020 2020 2020 2020  l="#",.         
+0002bb30: 2020 202a 2a63 6f72 7075 7361 7267 732c     **corpusargs,
+0002bb40: 0a20 2020 2020 2020 2029 0a0a 0a63 6c61  .        )...cla
+0002bb50: 7373 2055 505f 5350 414e 4953 4828 436f  ss UP_SPANISH(Co
+0002bb60: 6c75 6d6e 436f 7270 7573 293a 0a20 2020  lumnCorpus):.   
+0002bb70: 2064 6566 205f 5f69 6e69 745f 5f28 0a20   def __init__(. 
+0002bb80: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
+0002bb90: 2020 2020 2062 6173 655f 7061 7468 3a20       base_path: 
+0002bba0: 4f70 7469 6f6e 616c 5b55 6e69 6f6e 5b73  Optional[Union[s
+0002bbb0: 7472 2c20 5061 7468 5d5d 203d 204e 6f6e  tr, Path]] = Non
+0002bbc0: 652c 0a20 2020 2020 2020 2069 6e5f 6d65  e,.        in_me
+0002bbd0: 6d6f 7279 3a20 626f 6f6c 203d 2054 7275  mory: bool = Tru
+0002bbe0: 652c 0a20 2020 2020 2020 2064 6f63 756d  e,.        docum
+0002bbf0: 656e 745f 6173 5f73 6571 7565 6e63 653a  ent_as_sequence:
+0002bc00: 2062 6f6f 6c20 3d20 4661 6c73 652c 0a20   bool = False,. 
+0002bc10: 2020 2020 2020 202a 2a63 6f72 7075 7361         **corpusa
+0002bc20: 7267 732c 0a20 2020 2029 202d 3e20 4e6f  rgs,.    ) -> No
+0002bc30: 6e65 3a0a 2020 2020 2020 2020 2222 2249  ne:.        """I
+0002bc40: 6e69 7469 616c 697a 6520 7468 6520 5370  nitialize the Sp
+0002bc50: 616e 6973 6820 6461 7461 7365 7420 6672  anish dataset fr
+0002bc60: 6f6d 2074 6865 2055 6e69 7665 7273 616c  om the Universal
+0002bc70: 2050 726f 706f 7369 7469 6f6e 7320 4261   Propositions Ba
+0002bc80: 6e6b 2e0a 0a20 2020 2020 2020 2054 6865  nk...        The
+0002bc90: 2064 6174 6173 6574 2069 7320 646f 776e   dataset is down
+0002bca0: 6c6f 6164 6564 2066 726f 6d20 2068 7474  loaded from  htt
+0002bcb0: 7073 3a2f 2f67 6974 6875 622e 636f 6d2f  ps://github.com/
+0002bcc0: 5379 7374 656d 2d54 2f55 6e69 7665 7273  System-T/Univers
+0002bcd0: 616c 5072 6f70 6f73 6974 696f 6e73 0a0a  alPropositions..
+0002bce0: 2020 2020 2020 2020 4172 6773 3a0a 2020          Args:.  
+0002bcf0: 2020 2020 2020 2020 2020 6261 7365 5f70            base_p
+0002bd00: 6174 683a 2044 6566 6175 6c74 2069 7320  ath: Default is 
+0002bd10: 4e6f 6e65 2c20 6d65 616e 696e 6720 7468  None, meaning th
+0002bd20: 6174 2063 6f72 7075 7320 6765 7473 2061  at corpus gets a
+0002bd30: 7574 6f2d 646f 776e 6c6f 6164 6564 2061  uto-downloaded a
+0002bd40: 6e64 206c 6f61 6465 642e 2059 6f75 2063  nd loaded. You c
+0002bd50: 616e 206f 7665 7272 6964 6520 7468 6973  an override this
+0002bd60: 2074 6f20 706f 696e 7420 746f 2061 2064   to point to a d
+0002bd70: 6966 6665 7265 6e74 2066 6f6c 6465 7220  ifferent folder 
+0002bd80: 6275 7420 7479 7069 6361 6c6c 7920 7468  but typically th
+0002bd90: 6973 2073 686f 756c 6420 6e6f 7420 6265  is should not be
+0002bda0: 206e 6563 6573 7361 7279 2e0a 2020 2020   necessary..    
+0002bdb0: 2020 2020 2020 2020 696e 5f6d 656d 6f72          in_memor
+0002bdc0: 793a 2049 6620 5472 7565 2c20 6b65 6570  y: If True, keep
+0002bdd0: 7320 6461 7461 7365 7420 696e 206d 656d  s dataset in mem
+0002bde0: 6f72 7920 6769 7669 6e67 2073 7065 6564  ory giving speed
+0002bdf0: 7570 7320 696e 2074 7261 696e 696e 672e  ups in training.
+0002be00: 0a20 2020 2020 2020 2020 2020 2064 6f63  .            doc
+0002be10: 756d 656e 745f 6173 5f73 6571 7565 6e63  ument_as_sequenc
+0002be20: 653a 2049 6620 5472 7565 2c20 616c 6c20  e: If True, all 
+0002be30: 7365 6e74 656e 6365 7320 6f66 2061 2064  sentences of a d
+0002be40: 6f63 756d 656e 7420 6172 6520 7265 6164  ocument are read
+0002be50: 2069 6e74 6f20 6120 7369 6e67 6c65 2053   into a single S
+0002be60: 656e 7465 6e63 6520 6f62 6a65 6374 0a20  entence object. 
+0002be70: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0002be80: 2020 2062 6173 655f 7061 7468 203d 206b     base_path = k
+0002be90: 6f6c 6962 7269 2e63 6163 6865 5f72 6f6f  olibri.cache_roo
+0002bea0: 7420 2f20 2264 6174 6173 6574 7322 2069  t / "datasets" i
+0002beb0: 6620 6e6f 7420 6261 7365 5f70 6174 6820  f not base_path 
+0002bec0: 656c 7365 2050 6174 6828 6261 7365 5f70  else Path(base_p
+0002bed0: 6174 6829 0a0a 2020 2020 2020 2020 2320  ath)..        # 
+0002bee0: 636f 6c75 6d6e 2066 6f72 6d61 740a 2020  column format.  
+0002bef0: 2020 2020 2020 636f 6c75 6d6e 7320 3d20        columns = 
+0002bf00: 7b31 3a20 2274 6578 7422 2c20 393a 2022  {1: "text", 9: "
+0002bf10: 6672 616d 6522 7d0a 0a20 2020 2020 2020  frame"}..       
+0002bf20: 2023 2074 6869 7320 6461 7461 7365 7420   # this dataset 
+0002bf30: 6e61 6d65 0a20 2020 2020 2020 2064 6174  name.        dat
+0002bf40: 6173 6574 5f6e 616d 6520 3d20 7365 6c66  aset_name = self
+0002bf50: 2e5f 5f63 6c61 7373 5f5f 2e5f 5f6e 616d  .__class__.__nam
+0002bf60: 655f 5f2e 6c6f 7765 7228 290a 0a20 2020  e__.lower()..   
+0002bf70: 2020 2020 2064 6174 615f 666f 6c64 6572       data_folder
+0002bf80: 203d 2062 6173 655f 7061 7468 202f 2064   = base_path / d
+0002bf90: 6174 6173 6574 5f6e 616d 650a 0a20 2020  ataset_name..   
+0002bfa0: 2020 2020 2023 2064 6f77 6e6c 6f61 6420       # download 
+0002bfb0: 6461 7461 2069 6620 6e65 6365 7373 6172  data if necessar
+0002bfc0: 790a 2020 2020 2020 2020 7570 5f65 735f  y.        up_es_
+0002bfd0: 7061 7468 203d 2022 6874 7470 733a 2f2f  path = "https://
+0002bfe0: 7261 772e 6769 7468 7562 7573 6572 636f  raw.githubuserco
+0002bff0: 6e74 656e 742e 636f 6d2f 5379 7374 656d  ntent.com/System
+0002c000: 2d54 2f55 6e69 7665 7273 616c 5072 6f70  -T/UniversalProp
+0002c010: 6f73 6974 696f 6e73 2f6d 6173 7465 722f  ositions/master/
+0002c020: 5550 5f53 7061 6e69 7368 2f22 0a20 2020  UP_Spanish/".   
+0002c030: 2020 2020 2063 6163 6865 645f 7061 7468       cached_path
+0002c040: 2866 227b 7570 5f65 735f 7061 7468 7d65  (f"{up_es_path}e
+0002c050: 732d 7570 2d74 7261 696e 2e63 6f6e 6c6c  s-up-train.conll
+0002c060: 7522 2c20 5061 7468 2822 6461 7461 7365  u", Path("datase
+0002c070: 7473 2229 202f 2064 6174 6173 6574 5f6e  ts") / dataset_n
+0002c080: 616d 6529 0a20 2020 2020 2020 2063 6163  ame).        cac
+0002c090: 6865 645f 7061 7468 2866 227b 7570 5f65  hed_path(f"{up_e
+0002c0a0: 735f 7061 7468 7d65 732d 7570 2d64 6576  s_path}es-up-dev
+0002c0b0: 2e63 6f6e 6c6c 7522 2c20 5061 7468 2822  .conllu", Path("
+0002c0c0: 6461 7461 7365 7473 2229 202f 2064 6174  datasets") / dat
+0002c0d0: 6173 6574 5f6e 616d 6529 0a20 2020 2020  aset_name).     
+0002c0e0: 2020 2063 6163 6865 645f 7061 7468 2866     cached_path(f
+0002c0f0: 227b 7570 5f65 735f 7061 7468 7d65 732d  "{up_es_path}es-
+0002c100: 7570 2d74 6573 742e 636f 6e6c 6c75 222c  up-test.conllu",
+0002c110: 2050 6174 6828 2264 6174 6173 6574 7322   Path("datasets"
+0002c120: 2920 2f20 6461 7461 7365 745f 6e61 6d65  ) / dataset_name
+0002c130: 290a 0a20 2020 2020 2020 2073 7570 6572  )..        super
+0002c140: 2829 2e5f 5f69 6e69 745f 5f28 0a20 2020  ().__init__(.   
+0002c150: 2020 2020 2020 2020 2064 6174 615f 666f           data_fo
+0002c160: 6c64 6572 2c0a 2020 2020 2020 2020 2020  lder,.          
+0002c170: 2020 636f 6c75 6d6e 732c 0a20 2020 2020    columns,.     
+0002c180: 2020 2020 2020 2065 6e63 6f64 696e 673d         encoding=
+0002c190: 2275 7466 2d38 222c 0a20 2020 2020 2020  "utf-8",.       
+0002c1a0: 2020 2020 2074 7261 696e 5f66 696c 653d       train_file=
+0002c1b0: 2265 732d 7570 2d74 7261 696e 2e63 6f6e  "es-up-train.con
+0002c1c0: 6c6c 7522 2c0a 2020 2020 2020 2020 2020  llu",.          
+0002c1d0: 2020 7465 7374 5f66 696c 653d 2265 732d    test_file="es-
+0002c1e0: 7570 2d74 6573 742e 636f 6e6c 6c75 222c  up-test.conllu",
+0002c1f0: 0a20 2020 2020 2020 2020 2020 2064 6576  .            dev
+0002c200: 5f66 696c 653d 2265 732d 7570 2d64 6576  _file="es-up-dev
+0002c210: 2e63 6f6e 6c6c 7522 2c0a 2020 2020 2020  .conllu",.      
+0002c220: 2020 2020 2020 696e 5f6d 656d 6f72 793d        in_memory=
+0002c230: 696e 5f6d 656d 6f72 792c 0a20 2020 2020  in_memory,.     
+0002c240: 2020 2020 2020 2064 6f63 756d 656e 745f         document_
+0002c250: 7365 7061 7261 746f 725f 746f 6b65 6e3d  separator_token=
+0002c260: 4e6f 6e65 2069 6620 6e6f 7420 646f 6375  None if not docu
+0002c270: 6d65 6e74 5f61 735f 7365 7175 656e 6365  ment_as_sequence
+0002c280: 2065 6c73 6520 222d 444f 4353 5441 5254   else "-DOCSTART
+0002c290: 2d22 2c0a 2020 2020 2020 2020 2020 2020  -",.            
+0002c2a0: 636f 6d6d 656e 745f 7379 6d62 6f6c 3d22  comment_symbol="
+0002c2b0: 2322 2c0a 2020 2020 2020 2020 2020 2020  #",.            
+0002c2c0: 2a2a 636f 7270 7573 6172 6773 2c0a 2020  **corpusargs,.  
+0002c2d0: 2020 2020 2020 290a 0a0a 636c 6173 7320        )...class 
+0002c2e0: 5550 5f53 5041 4e49 5348 5f41 4e43 4f52  UP_SPANISH_ANCOR
+0002c2f0: 4128 436f 6c75 6d6e 436f 7270 7573 293a  A(ColumnCorpus):
+0002c300: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+0002c310: 5f28 0a20 2020 2020 2020 2073 656c 662c  _(.        self,
+0002c320: 0a20 2020 2020 2020 2062 6173 655f 7061  .        base_pa
+0002c330: 7468 3a20 4f70 7469 6f6e 616c 5b55 6e69  th: Optional[Uni
+0002c340: 6f6e 5b73 7472 2c20 5061 7468 5d5d 203d  on[str, Path]] =
+0002c350: 204e 6f6e 652c 0a20 2020 2020 2020 2069   None,.        i
+0002c360: 6e5f 6d65 6d6f 7279 3a20 626f 6f6c 203d  n_memory: bool =
+0002c370: 2054 7275 652c 0a20 2020 2020 2020 2064   True,.        d
+0002c380: 6f63 756d 656e 745f 6173 5f73 6571 7565  ocument_as_seque
+0002c390: 6e63 653a 2062 6f6f 6c20 3d20 4661 6c73  nce: bool = Fals
+0002c3a0: 652c 0a20 2020 2020 2020 202a 2a63 6f72  e,.        **cor
+0002c3b0: 7075 7361 7267 732c 0a20 2020 2029 202d  pusargs,.    ) -
+0002c3c0: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+0002c3d0: 2222 2249 6e69 7469 616c 697a 6520 7468  """Initialize th
+0002c3e0: 6520 5370 616e 6973 6820 416e 436f 7261  e Spanish AnCora
+0002c3f0: 2064 6174 6173 6574 2066 726f 6d20 7468   dataset from th
+0002c400: 6520 556e 6976 6572 7361 6c20 5072 6f70  e Universal Prop
+0002c410: 6f73 6974 696f 6e73 2042 616e 6b2e 0a0a  ositions Bank...
+0002c420: 2020 2020 2020 2020 5468 6520 6461 7461          The data
+0002c430: 7365 7420 6973 2064 6f77 6e6c 6f61 6465  set is downloade
+0002c440: 6420 6672 6f6d 2068 7474 7073 3a2f 2f67  d from https://g
+0002c450: 6974 6875 622e 636f 6d2f 5379 7374 656d  ithub.com/System
+0002c460: 2d54 2f55 6e69 7665 7273 616c 5072 6f70  -T/UniversalProp
+0002c470: 6f73 6974 696f 6e73 0a0a 2020 2020 2020  ositions..      
+0002c480: 2020 4172 6773 3a0a 2020 2020 2020 2020    Args:.        
+0002c490: 2020 2020 6261 7365 5f70 6174 683a 2044      base_path: D
+0002c4a0: 6566 6175 6c74 2069 7320 4e6f 6e65 2c20  efault is None, 
+0002c4b0: 6d65 616e 696e 6720 7468 6174 2063 6f72  meaning that cor
+0002c4c0: 7075 7320 6765 7473 2061 7574 6f2d 646f  pus gets auto-do
+0002c4d0: 776e 6c6f 6164 6564 2061 6e64 206c 6f61  wnloaded and loa
+0002c4e0: 6465 642e 2059 6f75 2063 616e 206f 7665  ded. You can ove
+0002c4f0: 7272 6964 6520 7468 6973 2074 6f20 706f  rride this to po
+0002c500: 696e 7420 746f 2061 2064 6966 6665 7265  int to a differe
+0002c510: 6e74 2066 6f6c 6465 7220 6275 7420 7479  nt folder but ty
+0002c520: 7069 6361 6c6c 7920 7468 6973 2073 686f  pically this sho
+0002c530: 756c 6420 6e6f 7420 6265 206e 6563 6573  uld not be neces
+0002c540: 7361 7279 2e0a 2020 2020 2020 2020 2020  sary..          
+0002c550: 2020 696e 5f6d 656d 6f72 793a 2049 6620    in_memory: If 
+0002c560: 5472 7565 2c20 6b65 6570 7320 6461 7461  True, keeps data
+0002c570: 7365 7420 696e 206d 656d 6f72 7920 6769  set in memory gi
+0002c580: 7669 6e67 2073 7065 6564 7570 7320 696e  ving speedups in
+0002c590: 2074 7261 696e 696e 672e 0a20 2020 2020   training..     
+0002c5a0: 2020 2020 2020 2064 6f63 756d 656e 745f         document_
+0002c5b0: 6173 5f73 6571 7565 6e63 653a 2049 6620  as_sequence: If 
+0002c5c0: 5472 7565 2c20 616c 6c20 7365 6e74 656e  True, all senten
+0002c5d0: 6365 7320 6f66 2061 2064 6f63 756d 656e  ces of a documen
+0002c5e0: 7420 6172 6520 7265 6164 2069 6e74 6f20  t are read into 
+0002c5f0: 6120 7369 6e67 6c65 2053 656e 7465 6e63  a single Sentenc
+0002c600: 6520 6f62 6a65 6374 0a20 2020 2020 2020  e object.       
+0002c610: 2022 2222 0a20 2020 2020 2020 2062 6173   """.        bas
+0002c620: 655f 7061 7468 203d 206b 6f6c 6962 7269  e_path = kolibri
+0002c630: 2e63 6163 6865 5f72 6f6f 7420 2f20 2264  .cache_root / "d
+0002c640: 6174 6173 6574 7322 2069 6620 6e6f 7420  atasets" if not 
+0002c650: 6261 7365 5f70 6174 6820 656c 7365 2050  base_path else P
+0002c660: 6174 6828 6261 7365 5f70 6174 6829 0a0a  ath(base_path)..
+0002c670: 2020 2020 2020 2020 2320 636f 6c75 6d6e          # column
+0002c680: 2066 6f72 6d61 740a 2020 2020 2020 2020   format.        
+0002c690: 636f 6c75 6d6e 7320 3d20 7b31 3a20 2274  columns = {1: "t
+0002c6a0: 6578 7422 2c20 393a 2022 6672 616d 6522  ext", 9: "frame"
+0002c6b0: 7d0a 0a20 2020 2020 2020 2023 2074 6869  }..        # thi
+0002c6c0: 7320 6461 7461 7365 7420 6e61 6d65 0a20  s dataset name. 
+0002c6d0: 2020 2020 2020 2064 6174 6173 6574 5f6e         dataset_n
+0002c6e0: 616d 6520 3d20 7365 6c66 2e5f 5f63 6c61  ame = self.__cla
+0002c6f0: 7373 5f5f 2e5f 5f6e 616d 655f 5f2e 6c6f  ss__.__name__.lo
+0002c700: 7765 7228 290a 0a20 2020 2020 2020 2064  wer()..        d
+0002c710: 6174 615f 666f 6c64 6572 203d 2062 6173  ata_folder = bas
+0002c720: 655f 7061 7468 202f 2064 6174 6173 6574  e_path / dataset
+0002c730: 5f6e 616d 650a 0a20 2020 2020 2020 2023  _name..        #
+0002c740: 2064 6f77 6e6c 6f61 6420 6461 7461 2069   download data i
+0002c750: 6620 6e65 6365 7373 6172 790a 2020 2020  f necessary.    
+0002c760: 2020 2020 7570 5f65 735f 7061 7468 203d      up_es_path =
+0002c770: 2022 6874 7470 733a 2f2f 7261 772e 6769   "https://raw.gi
+0002c780: 7468 7562 7573 6572 636f 6e74 656e 742e  thubusercontent.
+0002c790: 636f 6d2f 5379 7374 656d 2d54 2f55 6e69  com/System-T/Uni
+0002c7a0: 7665 7273 616c 5072 6f70 6f73 6974 696f  versalPropositio
+0002c7b0: 6e73 2f6d 6173 7465 722f 5550 5f53 7061  ns/master/UP_Spa
+0002c7c0: 6e69 7368 2d41 6e43 6f72 612f 220a 2020  nish-AnCora/".  
+0002c7d0: 2020 2020 2020 6361 6368 6564 5f70 6174        cached_pat
+0002c7e0: 6828 6622 7b75 705f 6573 5f70 6174 687d  h(f"{up_es_path}
+0002c7f0: 6573 5f61 6e63 6f72 612d 7570 2d74 7261  es_ancora-up-tra
+0002c800: 696e 2e63 6f6e 6c6c 7522 2c20 5061 7468  in.conllu", Path
+0002c810: 2822 6461 7461 7365 7473 2229 202f 2064  ("datasets") / d
+0002c820: 6174 6173 6574 5f6e 616d 6529 0a20 2020  ataset_name).   
+0002c830: 2020 2020 2063 6163 6865 645f 7061 7468       cached_path
+0002c840: 2866 227b 7570 5f65 735f 7061 7468 7d65  (f"{up_es_path}e
+0002c850: 735f 616e 636f 7261 2d75 702d 6465 762e  s_ancora-up-dev.
+0002c860: 636f 6e6c 6c75 222c 2050 6174 6828 2264  conllu", Path("d
+0002c870: 6174 6173 6574 7322 2920 2f20 6461 7461  atasets") / data
+0002c880: 7365 745f 6e61 6d65 290a 2020 2020 2020  set_name).      
+0002c890: 2020 6361 6368 6564 5f70 6174 6828 6622    cached_path(f"
+0002c8a0: 7b75 705f 6573 5f70 6174 687d 6573 5f61  {up_es_path}es_a
+0002c8b0: 6e63 6f72 612d 7570 2d74 6573 742e 636f  ncora-up-test.co
+0002c8c0: 6e6c 6c75 222c 2050 6174 6828 2264 6174  nllu", Path("dat
+0002c8d0: 6173 6574 7322 2920 2f20 6461 7461 7365  asets") / datase
+0002c8e0: 745f 6e61 6d65 290a 0a20 2020 2020 2020  t_name)..       
+0002c8f0: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
+0002c900: 5f28 0a20 2020 2020 2020 2020 2020 2064  _(.            d
+0002c910: 6174 615f 666f 6c64 6572 2c0a 2020 2020  ata_folder,.    
+0002c920: 2020 2020 2020 2020 636f 6c75 6d6e 732c          columns,
+0002c930: 0a20 2020 2020 2020 2020 2020 2065 6e63  .            enc
+0002c940: 6f64 696e 673d 2275 7466 2d38 222c 0a20  oding="utf-8",. 
+0002c950: 2020 2020 2020 2020 2020 2074 7261 696e             train
+0002c960: 5f66 696c 653d 2265 735f 616e 636f 7261  _file="es_ancora
+0002c970: 2d75 702d 7472 6169 6e2e 636f 6e6c 6c75  -up-train.conllu
+0002c980: 222c 0a20 2020 2020 2020 2020 2020 2074  ",.            t
+0002c990: 6573 745f 6669 6c65 3d22 6573 5f61 6e63  est_file="es_anc
+0002c9a0: 6f72 612d 7570 2d74 6573 742e 636f 6e6c  ora-up-test.conl
+0002c9b0: 6c75 222c 0a20 2020 2020 2020 2020 2020  lu",.           
+0002c9c0: 2064 6576 5f66 696c 653d 2265 735f 616e   dev_file="es_an
+0002c9d0: 636f 7261 2d75 702d 6465 762e 636f 6e6c  cora-up-dev.conl
+0002c9e0: 6c75 222c 0a20 2020 2020 2020 2020 2020  lu",.           
+0002c9f0: 2069 6e5f 6d65 6d6f 7279 3d69 6e5f 6d65   in_memory=in_me
+0002ca00: 6d6f 7279 2c0a 2020 2020 2020 2020 2020  mory,.          
+0002ca10: 2020 646f 6375 6d65 6e74 5f73 6570 6172    document_separ
+0002ca20: 6174 6f72 5f74 6f6b 656e 3d4e 6f6e 6520  ator_token=None 
+0002ca30: 6966 206e 6f74 2064 6f63 756d 656e 745f  if not document_
+0002ca40: 6173 5f73 6571 7565 6e63 6520 656c 7365  as_sequence else
+0002ca50: 2022 2d44 4f43 5354 4152 542d 222c 0a20   "-DOCSTART-",. 
+0002ca60: 2020 2020 2020 2020 2020 2063 6f6d 6d65             comme
+0002ca70: 6e74 5f73 796d 626f 6c3d 2223 222c 0a20  nt_symbol="#",. 
+0002ca80: 2020 2020 2020 2020 2020 202a 2a63 6f72             **cor
+0002ca90: 7075 7361 7267 732c 0a20 2020 2020 2020  pusargs,.       
+0002caa0: 2029 0a0a 0a63 6c61 7373 204e 4552 5f48   )...class NER_H
+0002cab0: 4950 455f 3230 3232 2843 6f6c 756d 6e43  IPE_2022(ColumnC
+0002cac0: 6f72 7075 7329 3a0a 2020 2020 4073 7461  orpus):.    @sta
+0002cad0: 7469 636d 6574 686f 640a 2020 2020 6465  ticmethod.    de
+0002cae0: 6620 5f70 7265 7061 7265 5f63 6f72 7075  f _prepare_corpu
+0002caf0: 7328 0a20 2020 2020 2020 2066 696c 655f  s(.        file_
+0002cb00: 696e 3a20 5061 7468 2c20 6669 6c65 5f6f  in: Path, file_o
+0002cb10: 7574 3a20 5061 7468 2c20 656f 735f 6d61  ut: Path, eos_ma
+0002cb20: 726b 6572 3a20 7374 722c 2064 6f63 756d  rker: str, docum
+0002cb30: 656e 745f 7365 7061 7261 746f 723a 2073  ent_separator: s
+0002cb40: 7472 2c20 6164 645f 646f 6375 6d65 6e74  tr, add_document
+0002cb50: 5f73 6570 6172 6174 6f72 3a20 626f 6f6c  _separator: bool
+0002cb60: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
+0002cb70: 7769 7468 206f 7065 6e28 6669 6c65 5f69  with open(file_i
+0002cb80: 6e2c 2065 6e63 6f64 696e 673d 2275 7466  n, encoding="utf
+0002cb90: 2d38 2229 2061 7320 665f 703a 0a20 2020  -8") as f_p:.   
+0002cba0: 2020 2020 2020 2020 206c 696e 6573 203d           lines =
+0002cbb0: 2066 5f70 2e72 6561 646c 696e 6573 2829   f_p.readlines()
+0002cbc0: 0a0a 2020 2020 2020 2020 7769 7468 206f  ..        with o
+0002cbd0: 7065 6e28 6669 6c65 5f6f 7574 2c20 2277  pen(file_out, "w
+0002cbe0: 222c 2065 6e63 6f64 696e 673d 2275 7466  ", encoding="utf
+0002cbf0: 2d38 2229 2061 7320 665f 6f75 743a 0a20  -8") as f_out:. 
+0002cc00: 2020 2020 2020 2020 2020 2023 2041 6464             # Add
+0002cc10: 206d 6973 7369 6e67 206e 6577 6c69 6e65   missing newline
+0002cc20: 2061 6674 6572 2068 6561 6465 720a 2020   after header.  
+0002cc30: 2020 2020 2020 2020 2020 665f 6f75 742e            f_out.
+0002cc40: 7772 6974 6528 6c69 6e65 735b 305d 202b  write(lines[0] +
+0002cc50: 2022 5c6e 2229 0a0a 2020 2020 2020 2020   "\n")..        
+0002cc60: 2020 2020 666f 7220 6c69 6e65 2069 6e20      for line in 
+0002cc70: 6c69 6e65 735b 313a 5d3a 0a20 2020 2020  lines[1:]:.     
+0002cc80: 2020 2020 2020 2020 2020 2069 6620 6c69             if li
+0002cc90: 6e65 2e73 7461 7274 7377 6974 6828 2220  ne.startswith(" 
+0002cca0: 5c74 2229 3a0a 2020 2020 2020 2020 2020  \t"):.          
+0002ccb0: 2020 2020 2020 2020 2020 2320 576f 726b            # Work
+0002ccc0: 6172 6f75 6e64 2066 6f72 2065 6d70 7479  around for empty
+0002ccd0: 2074 6f6b 656e 730a 2020 2020 2020 2020   tokens.        
+0002cce0: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+0002ccf0: 696e 7565 0a0a 2020 2020 2020 2020 2020  inue..          
+0002cd00: 2020 2020 2020 6c69 6e65 203d 206c 696e        line = lin
+0002cd10: 652e 7374 7269 7028 290a 0a20 2020 2020  e.strip()..     
+0002cd20: 2020 2020 2020 2020 2020 2023 2041 6464             # Add
+0002cd30: 2022 7265 616c 2220 646f 6375 6d65 6e74   "real" document
+0002cd40: 206d 6172 6b65 720a 2020 2020 2020 2020   marker.        
+0002cd50: 2020 2020 2020 2020 6966 2061 6464 5f64          if add_d
+0002cd60: 6f63 756d 656e 745f 7365 7061 7261 746f  ocument_separato
+0002cd70: 7220 616e 6420 6c69 6e65 2e73 7461 7274  r and line.start
+0002cd80: 7377 6974 6828 646f 6375 6d65 6e74 5f73  swith(document_s
+0002cd90: 6570 6172 6174 6f72 293a 0a20 2020 2020  eparator):.     
+0002cda0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0002cdb0: 5f6f 7574 2e77 7269 7465 2822 2d44 4f43  _out.write("-DOC
+0002cdc0: 5354 4152 542d 204f 5c6e 5c6e 2229 0a0a  START- O\n\n")..
+0002cdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002cde0: 665f 6f75 742e 7772 6974 6528 6c69 6e65  f_out.write(line
+0002cdf0: 202b 2022 5c6e 2229 0a0a 2020 2020 2020   + "\n")..      
+0002ce00: 2020 2020 2020 2020 2020 6966 2065 6f73            if eos
+0002ce10: 5f6d 6172 6b65 7220 696e 206c 696e 653a  _marker in line:
+0002ce20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002ce30: 2020 2020 2066 5f6f 7574 2e77 7269 7465       f_out.write
+0002ce40: 2822 5c6e 2229 0a0a 2020 2020 6465 6620  ("\n")..    def 
+0002ce50: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
+0002ce60: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
+0002ce70: 6461 7461 7365 745f 6e61 6d65 3a20 7374  dataset_name: st
+0002ce80: 722c 0a20 2020 2020 2020 206c 616e 6775  r,.        langu
+0002ce90: 6167 653a 2073 7472 2c0a 2020 2020 2020  age: str,.      
+0002cea0: 2020 6261 7365 5f70 6174 683a 204f 7074    base_path: Opt
+0002ceb0: 696f 6e61 6c5b 556e 696f 6e5b 7374 722c  ional[Union[str,
+0002cec0: 2050 6174 685d 5d20 3d20 4e6f 6e65 2c0a   Path]] = None,.
+0002ced0: 2020 2020 2020 2020 696e 5f6d 656d 6f72          in_memor
+0002cee0: 793a 2062 6f6f 6c20 3d20 5472 7565 2c0a  y: bool = True,.
+0002cef0: 2020 2020 2020 2020 7665 7273 696f 6e3a          version:
+0002cf00: 2073 7472 203d 2022 7632 2e31 222c 0a20   str = "v2.1",. 
+0002cf10: 2020 2020 2020 2062 7261 6e63 685f 6e61         branch_na
+0002cf20: 6d65 3a20 7374 7220 3d20 226d 6169 6e22  me: str = "main"
+0002cf30: 2c0a 2020 2020 2020 2020 6465 765f 7370  ,.        dev_sp
+0002cf40: 6c69 745f 6e61 6d65 3d22 6465 7622 2c0a  lit_name="dev",.
+0002cf50: 2020 2020 2020 2020 6164 645f 646f 6375          add_docu
+0002cf60: 6d65 6e74 5f73 6570 6172 6174 6f72 3d46  ment_separator=F
+0002cf70: 616c 7365 2c0a 2020 2020 2020 2020 7361  alse,.        sa
+0002cf80: 6d70 6c65 5f6d 6973 7369 6e67 5f73 706c  mple_missing_spl
+0002cf90: 6974 733d 4661 6c73 652c 0a20 2020 2020  its=False,.     
+0002cfa0: 2020 2070 7265 7072 6f63 5f66 6e3d 4e6f     preproc_fn=No
+0002cfb0: 6e65 2c0a 2020 2020 2020 2020 2a2a 636f  ne,.        **co
+0002cfc0: 7270 7573 6172 6773 2c0a 2020 2020 2920  rpusargs,.    ) 
+0002cfd0: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+0002cfe0: 2022 2222 496e 6974 6961 6c69 7a65 2074   """Initialize t
+0002cff0: 6865 2043 4c45 462d 4849 5045 2032 3032  he CLEF-HIPE 202
+0002d000: 3220 4e45 5220 6461 7461 7365 742e 0a0a  2 NER dataset...
+0002d010: 2020 2020 2020 2020 5468 6520 6669 7273          The firs
+0002d020: 7420 7469 6d65 2079 6f75 2063 616c 6c20  t time you call 
+0002d030: 7468 6973 2063 6f6e 7374 7275 6374 6f72  this constructor
+0002d040: 2069 7420 7769 6c6c 2061 7574 6f6d 6174   it will automat
+0002d050: 6963 616c 6c79 0a20 2020 2020 2020 2064  ically.        d
+0002d060: 6f77 6e6c 6f61 6420 7468 6520 7370 6563  ownload the spec
+0002d070: 6966 6965 6420 6461 7461 7365 7420 2862  ified dataset (b
+0002d080: 7920 6769 7665 6e20 6120 6c61 6e67 7561  y given a langua
+0002d090: 6765 292e 0a20 2020 2020 2020 203a 6461  ge)..        :da
+0002d0a0: 7461 7365 745f 6e61 6d65 3a20 5375 7070  taset_name: Supp
+0002d0b0: 6f72 7465 6420 6461 7461 7365 7473 2061  orted datasets a
+0002d0c0: 7265 3a20 616a 6d63 2c20 6869 7065 3230  re: ajmc, hipe20
+0002d0d0: 3230 2c20 6c65 7465 6d70 732c 206e 6577  20, letemps, new
+0002d0e0: 7365 7965 2c20 736f 6e61 7220 616e 6420  seye, sonar and 
+0002d0f0: 746f 7072 6573 3139 7468 2e0a 2020 2020  topres19th..    
+0002d100: 2020 2020 3a6c 616e 6775 6167 653a 204c      :language: L
+0002d110: 616e 6775 6167 6520 666f 7220 6120 7375  anguage for a su
+0002d120: 7070 6f72 7465 6420 6461 7461 7365 742e  pported dataset.
+0002d130: 0a20 2020 2020 2020 203a 6261 7365 5f70  .        :base_p
+0002d140: 6174 683a 2044 6566 6175 6c74 2069 7320  ath: Default is 
+0002d150: 4e6f 6e65 2c20 6d65 616e 696e 6720 7468  None, meaning th
+0002d160: 6174 2063 6f72 7075 7320 6765 7473 2061  at corpus gets a
+0002d170: 7574 6f2d 646f 776e 6c6f 6164 6564 2061  uto-downloaded a
+0002d180: 6e64 206c 6f61 6465 642e 2059 6f75 2063  nd loaded. You c
+0002d190: 616e 206f 7665 7272 6964 6520 7468 6973  an override this
+0002d1a0: 0a20 2020 2020 2020 2074 6f20 706f 696e  .        to poin
+0002d1b0: 7420 746f 2061 2064 6966 6665 7265 6e74  t to a different
+0002d1c0: 2066 6f6c 6465 7220 6275 7420 7479 7069   folder but typi
+0002d1d0: 6361 6c6c 7920 7468 6973 2073 686f 756c  cally this shoul
+0002d1e0: 6420 6e6f 7420 6265 206e 6563 6573 7361  d not be necessa
+0002d1f0: 7279 2e0a 2020 2020 2020 2020 3a69 6e5f  ry..        :in_
+0002d200: 6d65 6d6f 7279 3a20 4966 2054 7275 652c  memory: If True,
+0002d210: 206b 6565 7073 2064 6174 6173 6574 2069   keeps dataset i
+0002d220: 6e20 6d65 6d6f 7279 2067 6976 696e 6720  n memory giving 
+0002d230: 7370 6565 6475 7073 2069 6e20 7472 6169  speedups in trai
+0002d240: 6e69 6e67 2e0a 2020 2020 2020 2020 3a76  ning..        :v
+0002d250: 6572 7369 6f6e 3a20 5665 7273 696f 6e20  ersion: Version 
+0002d260: 6f66 2043 4c45 462d 4849 5045 2064 6174  of CLEF-HIPE dat
+0002d270: 6173 6574 2e20 4375 7272 656e 746c 7920  aset. Currently 
+0002d280: 6f6e 6c79 2076 312e 3020 6973 2073 7570  only v1.0 is sup
+0002d290: 706f 7274 6564 2061 6e64 2061 7661 696c  ported and avail
+0002d2a0: 6162 6c65 2e0a 2020 2020 2020 2020 3a62  able..        :b
+0002d2b0: 7261 6e63 685f 6e61 6d65 3a20 4465 6669  ranch_name: Defi
+0002d2c0: 6e65 7320 6769 7420 6272 616e 6368 206e  nes git branch n
+0002d2d0: 616d 6520 6f66 2048 4950 4520 6461 7461  ame of HIPE data
+0002d2e0: 2072 6570 6f73 6974 6f72 7920 286d 6169   repository (mai
+0002d2f0: 6e20 6279 2064 6566 6175 6c74 292e 0a20  n by default).. 
+0002d300: 2020 2020 2020 203a 6465 765f 7370 6c69         :dev_spli
+0002d310: 745f 6e61 6d65 3a20 4465 6669 6e65 7320  t_name: Defines 
+0002d320: 6465 6661 756c 7420 6e61 6d65 206f 6620  default name of 
+0002d330: 6465 7665 6c6f 706d 656e 7420 7370 6c69  development spli
+0002d340: 7420 2864 6576 2062 7920 6465 6661 756c  t (dev by defaul
+0002d350: 7429 2e20 4f6e 6c79 2074 6865 204e 6577  t). Only the New
+0002d360: 7345 7965 2064 6174 6173 6574 2068 6173  sEye dataset has
+0002d370: 0a20 2020 2020 2020 2063 7572 7265 6e74  .        current
+0002d380: 6c79 2074 776f 2064 6576 656c 6f70 6d65  ly two developme
+0002d390: 6e74 2073 706c 6974 733a 2064 6576 2061  nt splits: dev a
+0002d3a0: 6e64 2064 6576 322e 0a20 2020 2020 2020  nd dev2..       
+0002d3b0: 203a 6164 645f 646f 6375 6d65 6e74 5f73   :add_document_s
+0002d3c0: 6570 6172 6174 6f72 3a20 4966 2054 7275  eparator: If Tru
+0002d3d0: 652c 2061 2073 7065 6369 616c 2064 6f63  e, a special doc
+0002d3e0: 756d 656e 7420 7365 7065 7261 746f 7220  ument seperator 
+0002d3f0: 7769 6c6c 2062 6520 696e 7472 6f64 7563  will be introduc
+0002d400: 6564 2e20 5468 6973 2069 7320 6869 6768  ed. This is high
+0002d410: 6c79 0a20 2020 2020 2020 2072 6563 6f6d  ly.        recom
+0002d420: 6d65 6e64 6564 2077 6865 6e20 7573 696e  mended when usin
+0002d430: 6720 6f75 7220 464c 4552 5420 6170 7072  g our FLERT appr
+0002d440: 6f61 6368 2e0a 2020 2020 2020 2020 3a73  oach..        :s
+0002d450: 616d 706c 655f 6d69 7373 696e 675f 7370  ample_missing_sp
+0002d460: 6c69 7473 3a20 4966 2054 7275 652c 2064  lits: If True, d
+0002d470: 6174 6120 6973 2061 7574 6f6d 6174 6963  ata is automatic
+0002d480: 616c 6c79 2073 616d 706c 6564 2077 6865  ally sampled whe
+0002d490: 6e20 6365 7274 6169 6e20 6461 7461 2073  n certain data s
+0002d4a0: 706c 6974 7320 6172 6520 4e6f 6e65 2e0a  plits are None..
+0002d4b0: 2020 2020 2020 2020 3a70 7265 7072 6f63          :preproc
+0002d4c0: 5f66 6e3a 2046 756e 6374 696f 6e20 7468  _fn: Function th
+0002d4d0: 6174 2069 7320 7573 6564 2066 6f72 2064  at is used for d
+0002d4e0: 6174 6173 6574 2070 7265 7072 6f63 6573  ataset preproces
+0002d4f0: 7369 6e67 2e20 4966 204e 6f6e 652c 2064  sing. If None, d
+0002d500: 6566 6175 6c74 2070 7265 7072 6f63 6573  efault preproces
+0002d510: 7369 6e67 2077 696c 6c20 6265 2070 6572  sing will be per
+0002d520: 666f 726d 6564 2e0a 2020 2020 2020 2020  formed..        
+0002d530: 2222 220a 2020 2020 2020 2020 6261 7365  """.        base
+0002d540: 5f70 6174 6820 3d20 6b6f 6c69 6272 692e  _path = kolibri.
+0002d550: 6361 6368 655f 726f 6f74 202f 2022 6461  cache_root / "da
+0002d560: 7461 7365 7473 2220 6966 206e 6f74 2062  tasets" if not b
+0002d570: 6173 655f 7061 7468 2065 6c73 6520 5061  ase_path else Pa
+0002d580: 7468 2862 6173 655f 7061 7468 290a 0a20  th(base_path).. 
+0002d590: 2020 2020 2020 2023 2044 6174 6173 6574         # Dataset
+0002d5a0: 2073 706c 6974 206d 6170 7069 6e67 0a20   split mapping. 
+0002d5b0: 2020 2020 2020 2068 6970 655f 6176 6169         hipe_avai
+0002d5c0: 6c61 626c 655f 7370 6c69 7473 203d 207b  lable_splits = {
+0002d5d0: 0a20 2020 2020 2020 2020 2020 2022 7631  .            "v1
+0002d5e0: 2e30 223a 207b 0a20 2020 2020 2020 2020  .0": {.         
+0002d5f0: 2020 2020 2020 2022 616a 6d63 223a 207b         "ajmc": {
+0002d600: 2264 6522 3a20 5b22 7361 6d70 6c65 225d  "de": ["sample"]
+0002d610: 2c20 2265 6e22 3a20 5b22 7361 6d70 6c65  , "en": ["sample
+0002d620: 225d 7d2c 0a20 2020 2020 2020 2020 2020  "]},.           
+0002d630: 2020 2020 2022 6869 7065 3230 3230 223a       "hipe2020":
+0002d640: 207b 2264 6522 3a20 5b22 7472 6169 6e22   {"de": ["train"
+0002d650: 2c20 2264 6576 225d 2c20 2265 6e22 3a20  , "dev"], "en": 
+0002d660: 5b22 6465 7622 5d2c 2022 6672 223a 205b  ["dev"], "fr": [
+0002d670: 2274 7261 696e 222c 2022 6465 7622 5d7d  "train", "dev"]}
+0002d680: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0002d690: 2020 226c 6574 656d 7073 223a 207b 2266    "letemps": {"f
+0002d6a0: 7222 3a20 5b22 7472 6169 6e22 2c20 2264  r": ["train", "d
+0002d6b0: 6576 225d 7d2c 0a20 2020 2020 2020 2020  ev"]},.         
+0002d6c0: 2020 2020 2020 2022 6e65 7773 6579 6522         "newseye"
+0002d6d0: 3a20 7b0a 2020 2020 2020 2020 2020 2020  : {.            
+0002d6e0: 2020 2020 2020 2020 2264 6522 3a20 5b22          "de": ["
+0002d6f0: 7472 6169 6e22 2c20 2264 6576 222c 2022  train", "dev", "
+0002d700: 6465 7632 225d 2c0a 2020 2020 2020 2020  dev2"],.        
+0002d710: 2020 2020 2020 2020 2020 2020 2266 6922              "fi"
+0002d720: 3a20 5b22 7472 6169 6e22 2c20 2264 6576  : ["train", "dev
+0002d730: 222c 2022 6465 7632 225d 2c0a 2020 2020  ", "dev2"],.    
+0002d740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d750: 2266 7222 3a20 5b22 7472 6169 6e22 2c20  "fr": ["train", 
+0002d760: 2264 6576 222c 2022 6465 7632 225d 2c0a  "dev", "dev2"],.
+0002d770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d780: 2020 2020 2273 7622 3a20 5b22 7472 6169      "sv": ["trai
+0002d790: 6e22 2c20 2264 6576 222c 2022 6465 7632  n", "dev", "dev2
+0002d7a0: 225d 2c0a 2020 2020 2020 2020 2020 2020  "],.            
+0002d7b0: 2020 2020 7d2c 0a20 2020 2020 2020 2020      },.         
+0002d7c0: 2020 2020 2020 2022 736f 6e61 7222 3a20         "sonar": 
+0002d7d0: 7b22 6465 223a 205b 2264 6576 225d 7d2c  {"de": ["dev"]},
+0002d7e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002d7f0: 2022 746f 7072 6573 3139 7468 223a 207b   "topres19th": {
+0002d800: 2265 6e22 3a20 5b22 7472 6169 6e22 2c20  "en": ["train", 
+0002d810: 2264 6576 225d 7d2c 0a20 2020 2020 2020  "dev"]},.       
+0002d820: 2020 2020 207d 0a20 2020 2020 2020 207d       }.        }
+0002d830: 0a0a 2020 2020 2020 2020 2320 7632 2e30  ..        # v2.0
+0002d840: 206f 6e6c 7920 6164 6473 206e 6577 206c   only adds new l
+0002d850: 616e 6775 6167 6520 616e 6420 7370 6c69  anguage and spli
+0002d860: 7473 2066 6f72 2041 4a4d 4320 6461 7461  ts for AJMC data
+0002d870: 7365 740a 2020 2020 2020 2020 6869 7065  set.        hipe
+0002d880: 5f61 7661 696c 6162 6c65 5f73 706c 6974  _available_split
+0002d890: 735b 2276 322e 3022 5d20 3d20 636f 7079  s["v2.0"] = copy
+0002d8a0: 2e64 6565 7063 6f70 7928 6869 7065 5f61  .deepcopy(hipe_a
+0002d8b0: 7661 696c 6162 6c65 5f73 706c 6974 735b  vailable_splits[
+0002d8c0: 2276 312e 3022 5d29 0a20 2020 2020 2020  "v1.0"]).       
+0002d8d0: 2068 6970 655f 6176 6169 6c61 626c 655f   hipe_available_
+0002d8e0: 7370 6c69 7473 5b22 7632 2e30 225d 5b22  splits["v2.0"]["
+0002d8f0: 616a 6d63 225d 203d 207b 2264 6522 3a20  ajmc"] = {"de": 
+0002d900: 5b22 7472 6169 6e22 2c20 2264 6576 225d  ["train", "dev"]
+0002d910: 2c20 2265 6e22 3a20 5b22 7472 6169 6e22  , "en": ["train"
+0002d920: 2c20 2264 6576 225d 2c20 2266 7222 3a20  , "dev"], "fr": 
+0002d930: 5b22 7472 6169 6e22 2c20 2264 6576 225d  ["train", "dev"]
+0002d940: 7d0a 0a20 2020 2020 2020 2068 6970 655f  }..        hipe_
+0002d950: 6176 6169 6c61 626c 655f 7370 6c69 7473  available_splits
+0002d960: 5b22 7632 2e31 225d 203d 2063 6f70 792e  ["v2.1"] = copy.
+0002d970: 6465 6570 636f 7079 2868 6970 655f 6176  deepcopy(hipe_av
+0002d980: 6169 6c61 626c 655f 7370 6c69 7473 5b22  ailable_splits["
+0002d990: 7632 2e30 225d 290a 2020 2020 2020 2020  v2.0"]).        
+0002d9a0: 666f 7220 6461 7461 7365 745f 6e61 6d65  for dataset_name
+0002d9b0: 5f76 616c 7565 7320 696e 2068 6970 655f  _values in hipe_
+0002d9c0: 6176 6169 6c61 626c 655f 7370 6c69 7473  available_splits
+0002d9d0: 5b22 7632 2e31 225d 2e76 616c 7565 7328  ["v2.1"].values(
+0002d9e0: 293a 0a20 2020 2020 2020 2020 2020 2066  ):.            f
+0002d9f0: 6f72 2073 706c 6974 7320 696e 2064 6174  or splits in dat
+0002da00: 6173 6574 5f6e 616d 655f 7661 6c75 6573  aset_name_values
+0002da10: 2e76 616c 7565 7328 293a 0a20 2020 2020  .values():.     
+0002da20: 2020 2020 2020 2020 2020 2073 706c 6974             split
+0002da30: 732e 6170 7065 6e64 2822 7465 7374 2229  s.append("test")
+0002da40: 2020 2320 7465 7374 2064 6174 6173 6574    # test dataset
+0002da50: 7320 6172 6520 6f6e 6c79 2061 7661 696c  s are only avail
+0002da60: 6162 6c65 2066 6f72 203e 3d20 7632 2e31  able for >= v2.1
+0002da70: 0a0a 2020 2020 2020 2020 656f 735f 6d61  ..        eos_ma
+0002da80: 726b 6572 203d 2022 456e 644f 6653 656e  rker = "EndOfSen
+0002da90: 7465 6e63 6522 0a20 2020 2020 2020 2064  tence".        d
+0002daa0: 6f63 756d 656e 745f 7365 7061 7261 746f  ocument_separato
+0002dab0: 7220 3d20 2223 2068 6970 6532 3032 323a  r = "# hipe2022:
+0002dac0: 646f 6375 6d65 6e74 5f69 6422 0a0a 2020  document_id"..  
+0002dad0: 2020 2020 2020 2320 5370 6563 6961 6c20        # Special 
+0002dae0: 646f 6375 6d65 6e74 206d 6172 6b65 7220  document marker 
+0002daf0: 666f 7220 7361 6d70 6c65 2073 706c 6974  for sample split
+0002db00: 7320 696e 2041 4a4d 4320 6461 7461 7365  s in AJMC datase
+0002db10: 740a 2020 2020 2020 2020 6966 2066 227b  t.        if f"{
+0002db20: 6461 7461 7365 745f 6e61 6d65 7d22 203d  dataset_name}" =
+0002db30: 3d20 2261 6a6d 6322 3a0a 2020 2020 2020  = "ajmc":.      
+0002db40: 2020 2020 2020 646f 6375 6d65 6e74 5f73        document_s
+0002db50: 6570 6172 6174 6f72 203d 2022 2320 6869  eparator = "# hi
+0002db60: 7065 3230 3232 3a6f 7269 6769 6e61 6c5f  pe2022:original_
+0002db70: 736f 7572 6365 220a 0a20 2020 2020 2020  source"..       
+0002db80: 2063 6f6c 756d 6e73 203d 207b 303a 2022   columns = {0: "
+0002db90: 7465 7874 222c 2031 3a20 226e 6572 227d  text", 1: "ner"}
+0002dba0: 0a0a 2020 2020 2020 2020 6461 7461 7365  ..        datase
+0002dbb0: 745f 6261 7365 203d 2073 656c 662e 5f5f  t_base = self.__
+0002dbc0: 636c 6173 735f 5f2e 5f5f 6e61 6d65 5f5f  class__.__name__
+0002dbd0: 2e6c 6f77 6572 2829 0a20 2020 2020 2020  .lower().       
+0002dbe0: 2064 6174 615f 666f 6c64 6572 203d 2062   data_folder = b
+0002dbf0: 6173 655f 7061 7468 202f 2064 6174 6173  ase_path / datas
+0002dc00: 6574 5f62 6173 6520 2f20 7665 7273 696f  et_base / versio
+0002dc10: 6e20 2f20 6461 7461 7365 745f 6e61 6d65  n / dataset_name
+0002dc20: 202f 206c 616e 6775 6167 650a 0a20 2020   / language..   
+0002dc30: 2020 2020 2064 6174 615f 7572 6c20 3d20       data_url = 
+0002dc40: 280a 2020 2020 2020 2020 2020 2020 6622  (.            f"
+0002dc50: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
+0002dc60: 6f6d 2f68 6970 652d 6576 616c 2f48 4950  om/hipe-eval/HIP
+0002dc70: 452d 3230 3232 2d64 6174 612f 7261 772f  E-2022-data/raw/
+0002dc80: 7b62 7261 6e63 685f 6e61 6d65 7d2f 6461  {branch_name}/da
+0002dc90: 7461 2f7b 7665 7273 696f 6e7d 2f7b 6461  ta/{version}/{da
+0002dca0: 7461 7365 745f 6e61 6d65 7d2f 7b6c 616e  taset_name}/{lan
+0002dcb0: 6775 6167 657d 220a 2020 2020 2020 2020  guage}".        
+0002dcc0: 290a 0a20 2020 2020 2020 2064 6174 6173  )..        datas
+0002dcd0: 6574 5f73 706c 6974 7320 3d20 6869 7065  et_splits = hipe
+0002dce0: 5f61 7661 696c 6162 6c65 5f73 706c 6974  _available_split
+0002dcf0: 735b 7665 7273 696f 6e5d 5b64 6174 6173  s[version][datas
+0002dd00: 6574 5f6e 616d 655d 5b6c 616e 6775 6167  et_name][languag
+0002dd10: 655d 0a0a 2020 2020 2020 2020 666f 7220  e]..        for 
+0002dd20: 7370 6c69 7420 696e 2064 6174 6173 6574  split in dataset
+0002dd30: 5f73 706c 6974 733a 0a20 2020 2020 2020  _splits:.       
+0002dd40: 2020 2020 2063 6163 6865 645f 7061 7468       cached_path
+0002dd50: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0002dd60: 2020 6622 7b64 6174 615f 7572 6c7d 2f48    f"{data_url}/H
+0002dd70: 4950 452d 3230 3232 2d7b 7665 7273 696f  IPE-2022-{versio
+0002dd80: 6e7d 2d7b 6461 7461 7365 745f 6e61 6d65  n}-{dataset_name
+0002dd90: 7d2d 7b73 706c 6974 7d2d 7b6c 616e 6775  }-{split}-{langu
+0002dda0: 6167 657d 2e74 7376 222c 2064 6174 615f  age}.tsv", data_
+0002ddb0: 666f 6c64 6572 202f 2022 6f72 6967 696e  folder / "origin
+0002ddc0: 616c 220a 2020 2020 2020 2020 2020 2020  al".            
+0002ddd0: 290a 0a20 2020 2020 2020 2074 7261 696e  )..        train
+0002dde0: 5f66 696c 6520 3d20 2274 7261 696e 2e74  _file = "train.t
+0002ddf0: 7874 2220 6966 2022 7472 6169 6e22 2069  xt" if "train" i
+0002de00: 6e20 6461 7461 7365 745f 7370 6c69 7473  n dataset_splits
+0002de10: 2065 6c73 6520 4e6f 6e65 0a20 2020 2020   else None.     
+0002de20: 2020 2064 6576 5f66 696c 6520 3d20 6622     dev_file = f"
+0002de30: 7b64 6576 5f73 706c 6974 5f6e 616d 657d  {dev_split_name}
+0002de40: 2e74 7874 2220 6966 2022 7361 6d70 6c65  .txt" if "sample
+0002de50: 2220 6e6f 7420 696e 2064 6174 6173 6574  " not in dataset
+0002de60: 5f73 706c 6974 7320 656c 7365 2022 7361  _splits else "sa
+0002de70: 6d70 6c65 2e74 7874 220a 2020 2020 2020  mple.txt".      
+0002de80: 2020 7465 7374 5f66 696c 6520 3d20 2274    test_file = "t
+0002de90: 6573 742e 7478 7422 2069 6620 2274 6573  est.txt" if "tes
+0002dea0: 7422 2069 6e20 6461 7461 7365 745f 7370  t" in dataset_sp
+0002deb0: 6c69 7473 2065 6c73 6520 4e6f 6e65 0a0a  lits else None..
+0002dec0: 2020 2020 2020 2020 6e65 775f 6461 7461          new_data
+0002ded0: 5f66 6f6c 6465 7220 3d20 6461 7461 5f66  _folder = data_f
+0002dee0: 6f6c 6465 720a 0a20 2020 2020 2020 2069  older..        i
+0002def0: 6620 6164 645f 646f 6375 6d65 6e74 5f73  f add_document_s
+0002df00: 6570 6172 6174 6f72 3a0a 2020 2020 2020  eparator:.      
+0002df10: 2020 2020 2020 6e65 775f 6461 7461 5f66        new_data_f
+0002df20: 6f6c 6465 7220 3d20 6e65 775f 6461 7461  older = new_data
+0002df30: 5f66 6f6c 6465 7220 2f20 2277 6974 685f  _folder / "with_
+0002df40: 646f 635f 7365 7065 7261 746f 7222 0a20  doc_seperator". 
+0002df50: 2020 2020 2020 2020 2020 206e 6577 5f64             new_d
+0002df60: 6174 615f 666f 6c64 6572 2e6d 6b64 6972  ata_folder.mkdir
+0002df70: 2870 6172 656e 7473 3d54 7275 652c 2065  (parents=True, e
+0002df80: 7869 7374 5f6f 6b3d 5472 7565 290a 0a20  xist_ok=True).. 
+0002df90: 2020 2020 2020 2073 656c 662e 7072 6570         self.prep
+0002dfa0: 726f 635f 666e 203d 2070 7265 7072 6f63  roc_fn = preproc
+0002dfb0: 5f66 6e20 6966 2070 7265 7072 6f63 5f66  _fn if preproc_f
+0002dfc0: 6e20 656c 7365 2073 656c 662e 5f70 7265  n else self._pre
+0002dfd0: 7061 7265 5f63 6f72 7075 730a 0a20 2020  pare_corpus..   
+0002dfe0: 2020 2020 2069 6620 6e6f 7420 616c 6c28       if not all(
+0002dff0: 2020 2320 4f6e 6c79 2072 6570 726f 6365    # Only reproce
+0002e000: 7373 2069 6620 736f 6d65 2066 696c 6573  ss if some files
+0002e010: 2061 7265 206e 6f74 2074 6865 7265 2079   are not there y
+0002e020: 6574 0a20 2020 2020 2020 2020 2020 2073  et.            s
+0002e030: 706c 6974 5f70 6174 682e 6578 6973 7473  plit_path.exists
+0002e040: 2829 0a20 2020 2020 2020 2020 2020 2066  ().            f
+0002e050: 6f72 2073 706c 6974 5f70 6174 6820 696e  or split_path in
+0002e060: 205b 6e65 775f 6461 7461 5f66 6f6c 6465   [new_data_folde
+0002e070: 7220 2f20 6622 7b73 706c 6974 5f66 696c  r / f"{split_fil
+0002e080: 657d 2e74 7874 2220 666f 7220 7370 6c69  e}.txt" for spli
+0002e090: 745f 6669 6c65 2069 6e20 6461 7461 7365  t_file in datase
+0002e0a0: 745f 7370 6c69 7473 5d0a 2020 2020 2020  t_splits].      
+0002e0b0: 2020 293a 0a20 2020 2020 2020 2020 2020    ):.           
+0002e0c0: 2066 6f72 2073 706c 6974 2069 6e20 6461   for split in da
+0002e0d0: 7461 7365 745f 7370 6c69 7473 3a0a 2020  taset_splits:.  
+0002e0e0: 2020 2020 2020 2020 2020 2020 2020 6f72                or
+0002e0f0: 6967 696e 616c 5f66 696c 656e 616d 6520  iginal_filename 
+0002e100: 3d20 6622 4849 5045 2d32 3032 322d 7b76  = f"HIPE-2022-{v
+0002e110: 6572 7369 6f6e 7d2d 7b64 6174 6173 6574  ersion}-{dataset
+0002e120: 5f6e 616d 657d 2d7b 7370 6c69 747d 2d7b  _name}-{split}-{
+0002e130: 6c61 6e67 7561 6765 7d2e 7473 7622 0a20  language}.tsv". 
+0002e140: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0002e150: 656c 662e 7072 6570 726f 635f 666e 280a  elf.preproc_fn(.
+0002e160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e170: 2020 2020 6461 7461 5f66 6f6c 6465 7220      data_folder 
+0002e180: 2f20 226f 7269 6769 6e61 6c22 202f 206f  / "original" / o
+0002e190: 7269 6769 6e61 6c5f 6669 6c65 6e61 6d65  riginal_filename
+0002e1a0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0002e1b0: 2020 2020 2020 6e65 775f 6461 7461 5f66        new_data_f
+0002e1c0: 6f6c 6465 7220 2f20 6622 7b73 706c 6974  older / f"{split
+0002e1d0: 7d2e 7478 7422 2c0a 2020 2020 2020 2020  }.txt",.        
+0002e1e0: 2020 2020 2020 2020 2020 2020 656f 735f              eos_
+0002e1f0: 6d61 726b 6572 2c0a 2020 2020 2020 2020  marker,.        
+0002e200: 2020 2020 2020 2020 2020 2020 646f 6375              docu
+0002e210: 6d65 6e74 5f73 6570 6172 6174 6f72 2c0a  ment_separator,.
+0002e220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002e230: 2020 2020 6164 645f 646f 6375 6d65 6e74      add_document
+0002e240: 5f73 6570 6172 6174 6f72 2c0a 2020 2020  _separator,.    
+0002e250: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
+0002e260: 2020 2020 2020 2073 7570 6572 2829 2e5f         super()._
+0002e270: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
+0002e280: 2020 2020 206e 6577 5f64 6174 615f 666f       new_data_fo
+0002e290: 6c64 6572 2c0a 2020 2020 2020 2020 2020  lder,.          
+0002e2a0: 2020 636f 6c75 6d6e 732c 0a20 2020 2020    columns,.     
+0002e2b0: 2020 2020 2020 2074 7261 696e 5f66 696c         train_fil
+0002e2c0: 653d 7472 6169 6e5f 6669 6c65 2c0a 2020  e=train_file,.  
+0002e2d0: 2020 2020 2020 2020 2020 6465 765f 6669            dev_fi
+0002e2e0: 6c65 3d64 6576 5f66 696c 652c 0a20 2020  le=dev_file,.   
+0002e2f0: 2020 2020 2020 2020 2074 6573 745f 6669           test_fi
+0002e300: 6c65 3d74 6573 745f 6669 6c65 2c0a 2020  le=test_file,.  
+0002e310: 2020 2020 2020 2020 2020 696e 5f6d 656d            in_mem
+0002e320: 6f72 793d 696e 5f6d 656d 6f72 792c 0a20  ory=in_memory,. 
+0002e330: 2020 2020 2020 2020 2020 2064 6f63 756d             docum
+0002e340: 656e 745f 7365 7061 7261 746f 725f 746f  ent_separator_to
+0002e350: 6b65 6e3d 222d 444f 4353 5441 5254 2d22  ken="-DOCSTART-"
+0002e360: 2c0a 2020 2020 2020 2020 2020 2020 736b  ,.            sk
+0002e370: 6970 5f66 6972 7374 5f6c 696e 653d 5472  ip_first_line=Tr
+0002e380: 7565 2c0a 2020 2020 2020 2020 2020 2020  ue,.            
+0002e390: 636f 6c75 6d6e 5f64 656c 696d 6974 6572  column_delimiter
+0002e3a0: 3d22 5c74 222c 0a20 2020 2020 2020 2020  ="\t",.         
+0002e3b0: 2020 2063 6f6d 6d65 6e74 5f73 796d 626f     comment_symbo
+0002e3c0: 6c3d 2223 2022 2c0a 2020 2020 2020 2020  l="# ",.        
+0002e3d0: 2020 2020 7361 6d70 6c65 5f6d 6973 7369      sample_missi
+0002e3e0: 6e67 5f73 706c 6974 733d 7361 6d70 6c65  ng_splits=sample
+0002e3f0: 5f6d 6973 7369 6e67 5f73 706c 6974 732c  _missing_splits,
+0002e400: 0a20 2020 2020 2020 2020 2020 202a 2a63  .            **c
+0002e410: 6f72 7075 7361 7267 732c 0a20 2020 2020  orpusargs,.     
+0002e420: 2020 2029 0a0a 0a63 6c61 7373 204e 4552     )...class NER
+0002e430: 5f49 4344 4152 5f45 5552 4f50 4541 4e41  _ICDAR_EUROPEANA
+0002e440: 2843 6f6c 756d 6e43 6f72 7075 7329 3a0a  (ColumnCorpus):.
+0002e450: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+0002e460: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
+0002e470: 2020 2020 2020 2020 6c61 6e67 7561 6765          language
+0002e480: 3a20 7374 722c 0a20 2020 2020 2020 2062  : str,.        b
+0002e490: 6173 655f 7061 7468 3a20 4f70 7469 6f6e  ase_path: Option
+0002e4a0: 616c 5b55 6e69 6f6e 5b73 7472 2c20 5061  al[Union[str, Pa
+0002e4b0: 7468 5d5d 203d 204e 6f6e 652c 0a20 2020  th]] = None,.   
+0002e4c0: 2020 2020 2069 6e5f 6d65 6d6f 7279 3a20       in_memory: 
+0002e4d0: 626f 6f6c 203d 2054 7275 652c 0a20 2020  bool = True,.   
+0002e4e0: 2020 2020 202a 2a63 6f72 7075 7361 7267       **corpusarg
+0002e4f0: 732c 0a20 2020 2029 202d 3e20 4e6f 6e65  s,.    ) -> None
+0002e500: 3a0a 2020 2020 2020 2020 2222 2249 6e69  :.        """Ini
+0002e510: 7469 616c 697a 6520 7468 6520 4943 4441  tialize the ICDA
+0002e520: 5220 4575 726f 7065 616e 6120 4e45 5220  R Europeana NER 
+0002e530: 6461 7461 7365 742e 0a0a 2020 2020 2020  dataset...      
+0002e540: 2020 5468 6520 6461 7461 7365 7420 6973    The dataset is
+0002e550: 2062 6173 6564 206f 6e20 7468 6520 4672   based on the Fr
+0002e560: 656e 6368 2061 6e64 2044 7574 6368 2045  ench and Dutch E
+0002e570: 7572 6f70 6561 6e61 204e 4552 2063 6f72  uropeana NER cor
+0002e580: 706f 7261 0a20 2020 2020 2020 2066 726f  pora.        fro
+0002e590: 6d20 7468 6520 4575 726f 7065 616e 6120  m the Europeana 
+0002e5a0: 4e65 7773 7061 7065 7273 204e 4552 2064  Newspapers NER d
+0002e5b0: 6174 6173 6574 2028 6874 7470 733a 2f2f  ataset (https://
+0002e5c0: 6c61 622e 6b62 2e6e 6c2f 6461 7461 7365  lab.kb.nl/datase
+0002e5d0: 742f 6575 726f 7065 616e 612d 6e65 7773  t/europeana-news
+0002e5e0: 7061 7065 7273 2d6e 6572 292c 2077 6974  papers-ner), wit
+0002e5f0: 6820 6164 6469 7469 6f6e 616c 0a20 2020  h additional.   
+0002e600: 2020 2020 2070 7265 7072 6f63 6573 7369       preprocessi
+0002e610: 6e67 2073 7465 7073 2062 6569 6e67 2070  ng steps being p
+0002e620: 6572 666f 726d 6564 2028 7365 6e74 656e  erformed (senten
+0002e630: 6365 2073 706c 6974 7469 6e67 2c20 7075  ce splitting, pu
+0002e640: 6e63 7475 6174 696f 6e20 6e6f 726d 616c  nctuation normal
+0002e650: 697a 696e 672c 2074 7261 696e 696e 672f  izing, training/
+0002e660: 6465 7665 6c6f 706d 656e 742f 7465 7374  development/test
+0002e670: 2073 706c 6974 7329 2e0a 2020 2020 2020   splits)..      
+0002e680: 2020 5468 6520 7265 7375 6c74 696e 6720    The resulting 
+0002e690: 6461 7461 7365 7420 6973 2072 656c 6561  dataset is relea
+0002e6a0: 7365 6420 696e 2074 6865 2022 4461 7461  sed in the "Data
+0002e6b0: 2043 656e 7472 6963 2044 6f6d 6169 6e20   Centric Domain 
+0002e6c0: 4164 6170 7461 7469 6f6e 2066 6f72 2048  Adaptation for H
+0002e6d0: 6973 746f 7269 6361 6c20 5465 7874 2077  istorical Text w
+0002e6e0: 6974 6820 4f43 5220 4572 726f 7273 2220  ith OCR Errors" 
+0002e6f0: 4943 4441 5220 7061 7065 720a 2020 2020  ICDAR paper.    
+0002e700: 2020 2020 6279 204c 7569 7361 204d c3a4      by Luisa M..
+0002e710: 727a 2c20 5374 6566 616e 2053 6368 7765  rz, Stefan Schwe
+0002e720: 7465 722c 204e 696e 6120 506f 6572 6e65  ter, Nina Poerne
+0002e730: 722c 2042 656e 6a61 6d69 6e20 526f 7468  r, Benjamin Roth
+0002e740: 2061 6e64 2048 696e 7269 6368 2053 6368   and Hinrich Sch
+0002e750: c3bc 747a 652e 0a20 2020 2020 2020 203a  ..tze..        :
+0002e760: 7061 7261 6d20 6c61 6e67 7561 6765 3a20  param language: 
+0002e770: 4c61 6e67 7561 6765 2066 6f72 2061 2073  Language for a s
+0002e780: 7570 706f 7274 6564 2064 6174 6173 6574  upported dataset
+0002e790: 2e20 5375 7070 6f72 7465 6420 6c61 6e67  . Supported lang
+0002e7a0: 7561 6765 7320 6172 6520 2266 7222 2028  uages are "fr" (
+0002e7b0: 4672 656e 6368 2920 616e 6420 226e 6c22  French) and "nl"
+0002e7c0: 2028 4475 7463 6829 2e0a 2020 2020 2020   (Dutch)..      
+0002e7d0: 2020 3a70 6172 616d 2062 6173 655f 7061    :param base_pa
+0002e7e0: 7468 3a20 4465 6661 756c 7420 6973 204e  th: Default is N
+0002e7f0: 6f6e 652c 206d 6561 6e69 6e67 2074 6861  one, meaning tha
+0002e800: 7420 636f 7270 7573 2067 6574 7320 6175  t corpus gets au
+0002e810: 746f 2d64 6f77 6e6c 6f61 6465 6420 616e  to-downloaded an
+0002e820: 6420 6c6f 6164 6564 2e20 596f 7520 6361  d loaded. You ca
+0002e830: 6e20 6f76 6572 7269 6465 2074 6869 730a  n override this.
+0002e840: 2020 2020 2020 2020 746f 2070 6f69 6e74          to point
+0002e850: 2074 6f20 6120 6469 6666 6572 656e 7420   to a different 
+0002e860: 666f 6c64 6572 2062 7574 2074 7970 6963  folder but typic
+0002e870: 616c 6c79 2074 6869 7320 7368 6f75 6c64  ally this should
+0002e880: 206e 6f74 2062 6520 6e65 6365 7373 6172   not be necessar
+0002e890: 792e 0a20 2020 2020 2020 203a 7061 7261  y..        :para
+0002e8a0: 6d20 696e 5f6d 656d 6f72 793a 2049 6620  m in_memory: If 
+0002e8b0: 5472 7565 2c20 6b65 6570 7320 6461 7461  True, keeps data
+0002e8c0: 7365 7420 696e 206d 656d 6f72 7920 6769  set in memory gi
+0002e8d0: 7669 6e67 2073 7065 6564 7570 7320 696e  ving speedups in
+0002e8e0: 2074 7261 696e 696e 672e 204e 6f74 2072   training. Not r
+0002e8f0: 6563 6f6d 6d65 6e64 6564 2064 7565 2074  ecommended due t
+0002e900: 6f20 6865 6176 7920 5241 4d20 7573 6167  o heavy RAM usag
+0002e910: 652e 0a20 2020 2020 2020 2022 2222 0a20  e..        """. 
+0002e920: 2020 2020 2020 2073 7570 706f 7274 6564         supported
+0002e930: 5f6c 616e 6775 6167 6573 203d 205b 2266  _languages = ["f
+0002e940: 7222 2c20 226e 6c22 5d0a 0a20 2020 2020  r", "nl"]..     
+0002e950: 2020 2069 6620 6c61 6e67 7561 6765 206e     if language n
+0002e960: 6f74 2069 6e20 7375 7070 6f72 7465 645f  ot in supported_
+0002e970: 6c61 6e67 7561 6765 733a 0a20 2020 2020  languages:.     
+0002e980: 2020 2020 2020 206c 6f67 2e65 7272 6f72         log.error
+0002e990: 2866 224c 616e 6775 6167 6520 277b 6c61  (f"Language '{la
+0002e9a0: 6e67 7561 6765 7d27 2069 7320 6e6f 7420  nguage}' is not 
+0002e9b0: 696e 206c 6973 7420 6f66 2073 7570 706f  in list of suppo
+0002e9c0: 7274 6564 206c 616e 6775 6167 6573 2122  rted languages!"
+0002e9d0: 290a 2020 2020 2020 2020 2020 2020 6c6f  ).            lo
+0002e9e0: 672e 6572 726f 7228 6622 5375 7070 6f72  g.error(f"Suppor
+0002e9f0: 7465 6420 6172 6520 277b 7375 7070 6f72  ted are '{suppor
+0002ea00: 7465 645f 6c61 6e67 7561 6765 737d 2721  ted_languages}'!
+0002ea10: 2229 0a20 2020 2020 2020 2020 2020 2072  ").            r
+0002ea20: 6169 7365 2045 7863 6570 7469 6f6e 0a0a  aise Exception..
+0002ea30: 2020 2020 2020 2020 6261 7365 5f70 6174          base_pat
+0002ea40: 6820 3d20 6b6f 6c69 6272 692e 6361 6368  h = kolibri.cach
+0002ea50: 655f 726f 6f74 202f 2022 6461 7461 7365  e_root / "datase
+0002ea60: 7473 2220 6966 206e 6f74 2062 6173 655f  ts" if not base_
+0002ea70: 7061 7468 2065 6c73 6520 5061 7468 2862  path else Path(b
+0002ea80: 6173 655f 7061 7468 290a 0a20 2020 2020  ase_path)..     
+0002ea90: 2020 2023 2063 6f6c 756d 6e20 666f 726d     # column form
+0002eaa0: 6174 0a20 2020 2020 2020 2063 6f6c 756d  at.        colum
+0002eab0: 6e73 203d 207b 303a 2022 7465 7874 222c  ns = {0: "text",
+0002eac0: 2031 3a20 226e 6572 227d 0a0a 2020 2020   1: "ner"}..    
+0002ead0: 2020 2020 2320 7468 6973 2064 6174 6173      # this datas
+0002eae0: 6574 206e 616d 650a 2020 2020 2020 2020  et name.        
+0002eaf0: 6461 7461 7365 745f 6e61 6d65 203d 2073  dataset_name = s
+0002eb00: 656c 662e 5f5f 636c 6173 735f 5f2e 5f5f  elf.__class__.__
+0002eb10: 6e61 6d65 5f5f 2e6c 6f77 6572 2829 0a0a  name__.lower()..
+0002eb20: 2020 2020 2020 2020 6461 7461 5f66 6f6c          data_fol
+0002eb30: 6465 7220 3d20 6261 7365 5f70 6174 6820  der = base_path 
+0002eb40: 2f20 6461 7461 7365 745f 6e61 6d65 202f  / dataset_name /
+0002eb50: 206c 616e 6775 6167 650a 0a20 2020 2020   language..     
+0002eb60: 2020 2023 2064 6f77 6e6c 6f61 6420 6461     # download da
+0002eb70: 7461 2069 6620 6e65 6365 7373 6172 790a  ta if necessary.
+0002eb80: 2020 2020 2020 2020 6769 7468 7562 5f70          github_p
+0002eb90: 6174 6820 3d20 2268 7474 7073 3a2f 2f72  ath = "https://r
+0002eba0: 6177 2e67 6974 6875 6275 7365 7263 6f6e  aw.githubusercon
+0002ebb0: 7465 6e74 2e63 6f6d 2f73 7465 6661 6e2d  tent.com/stefan-
+0002ebc0: 6974 2f68 6973 746f 7269 632d 646f 6d61  it/historic-doma
+0002ebd0: 696e 2d61 6461 7074 6174 696f 6e2d 6963  in-adaptation-ic
+0002ebe0: 6461 722f 6d61 696e 2f64 6174 6122 0a0a  dar/main/data"..
+0002ebf0: 2020 2020 2020 2020 666f 7220 7370 6c69          for spli
+0002ec00: 7420 696e 205b 2274 7261 696e 222c 2022  t in ["train", "
+0002ec10: 6465 7622 2c20 2274 6573 7422 5d3a 0a20  dev", "test"]:. 
+0002ec20: 2020 2020 2020 2020 2020 2063 6163 6865             cache
+0002ec30: 645f 7061 7468 2866 227b 6769 7468 7562  d_path(f"{github
+0002ec40: 5f70 6174 687d 2f7b 6c61 6e67 7561 6765  _path}/{language
+0002ec50: 7d2f 7b73 706c 6974 7d2e 7478 7422 2c20  }/{split}.txt", 
+0002ec60: 6461 7461 5f66 6f6c 6465 7229 0a0a 2020  data_folder)..  
+0002ec70: 2020 2020 2020 7375 7065 7228 292e 5f5f        super().__
+0002ec80: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
+0002ec90: 2020 2020 6461 7461 5f66 6f6c 6465 722c      data_folder,
+0002eca0: 0a20 2020 2020 2020 2020 2020 2063 6f6c  .            col
+0002ecb0: 756d 6e73 2c0a 2020 2020 2020 2020 2020  umns,.          
+0002ecc0: 2020 696e 5f6d 656d 6f72 793d 696e 5f6d    in_memory=in_m
+0002ecd0: 656d 6f72 792c 0a20 2020 2020 2020 2020  emory,.         
+0002ece0: 2020 2074 7261 696e 5f66 696c 653d 2274     train_file="t
+0002ecf0: 7261 696e 2e74 7874 222c 0a20 2020 2020  rain.txt",.     
+0002ed00: 2020 2020 2020 2064 6576 5f66 696c 653d         dev_file=
+0002ed10: 2264 6576 2e74 7874 222c 0a20 2020 2020  "dev.txt",.     
+0002ed20: 2020 2020 2020 2074 6573 745f 6669 6c65         test_file
+0002ed30: 3d22 7465 7374 2e74 7874 222c 0a20 2020  ="test.txt",.   
+0002ed40: 2020 2020 2020 2020 2063 6f6d 6d65 6e74           comment
+0002ed50: 5f73 796d 626f 6c3d 2223 2022 2c0a 2020  _symbol="# ",.  
+0002ed60: 2020 2020 2020 2020 2020 636f 6c75 6d6e            column
+0002ed70: 5f64 656c 696d 6974 6572 3d22 5c74 222c  _delimiter="\t",
+0002ed80: 0a20 2020 2020 2020 2020 2020 202a 2a63  .            **c
+0002ed90: 6f72 7075 7361 7267 732c 0a20 2020 2020  orpusargs,.     
+0002eda0: 2020 2029 0a0a 0a63 6c61 7373 204e 4552     )...class NER
+0002edb0: 5f4e 4552 4d55 4428 4d75 6c74 6943 6f72  _NERMUD(MultiCor
+0002edc0: 7075 7329 3a0a 2020 2020 6465 6620 5f5f  pus):.    def __
+0002edd0: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
+0002ede0: 7365 6c66 2c0a 2020 2020 2020 2020 646f  self,.        do
+0002edf0: 6d61 696e 733a 2055 6e69 6f6e 5b73 7472  mains: Union[str
+0002ee00: 2c20 4c69 7374 5b73 7472 5d5d 203d 2022  , List[str]] = "
+0002ee10: 616c 6c22 2c0a 2020 2020 2020 2020 6261  all",.        ba
+0002ee20: 7365 5f70 6174 683a 204f 7074 696f 6e61  se_path: Optiona
+0002ee30: 6c5b 556e 696f 6e5b 7374 722c 2050 6174  l[Union[str, Pat
+0002ee40: 685d 5d20 3d20 4e6f 6e65 2c0a 2020 2020  h]] = None,.    
+0002ee50: 2020 2020 696e 5f6d 656d 6f72 793a 2062      in_memory: b
+0002ee60: 6f6f 6c20 3d20 4661 6c73 652c 0a20 2020  ool = False,.   
+0002ee70: 2020 2020 202a 2a63 6f72 7075 7361 7267       **corpusarg
+0002ee80: 732c 0a20 2020 2029 202d 3e20 4e6f 6e65  s,.    ) -> None
+0002ee90: 3a0a 2020 2020 2020 2020 2222 2249 6e69  :.        """Ini
+0002eea0: 7469 6c69 7a65 2074 6865 204e 4552 4d75  tilize the NERMu
+0002eeb0: 4420 3230 3233 2064 6174 6173 6574 2e0a  D 2023 dataset..
+0002eec0: 0a20 2020 2020 2020 204e 4552 4d75 4420  .        NERMuD 
+0002eed0: 6973 2061 2074 6173 6b20 7072 6573 656e  is a task presen
+0002eee0: 7465 6420 6174 2045 5641 4c49 5441 2032  ted at EVALITA 2
+0002eef0: 3032 3320 636f 6e73 6973 7469 6e67 2069  023 consisting i
+0002ef00: 6e20 7468 6520 6578 7472 6163 7469 6f6e  n the extraction
+0002ef10: 2061 6e64 2063 6c61 7373 6966 6963 6174   and classificat
+0002ef20: 696f 6e0a 2020 2020 2020 2020 6f66 206e  ion.        of n
+0002ef30: 616d 6564 2d65 6e74 6974 6965 7320 696e  amed-entities in
+0002ef40: 2061 2064 6f63 756d 656e 742c 2073 7563   a document, suc
+0002ef50: 6820 6173 2070 6572 736f 6e73 2c20 6f72  h as persons, or
+0002ef60: 6761 6e69 7a61 7469 6f6e 732c 2061 6e64  ganizations, and
+0002ef70: 206c 6f63 6174 696f 6e73 2e20 4e45 524d   locations. NERM
+0002ef80: 7544 2032 3032 3320 7769 6c6c 2069 6e63  uD 2023 will inc
+0002ef90: 6c75 6465 2074 776f 2064 6966 6665 7265  lude two differe
+0002efa0: 6e74 2073 7562 2d74 6173 6b73 3a0a 0a20  nt sub-tasks:.. 
+0002efb0: 2020 2020 2020 202d 2044 6f6d 6169 6e2d         - Domain-
+0002efc0: 6167 6e6f 7374 6963 2063 6c61 7373 6966  agnostic classif
+0002efd0: 6963 6174 696f 6e20 2844 4143 292e 2050  ication (DAC). P
+0002efe0: 6172 7469 6369 7061 6e74 7320 7769 6c6c  articipants will
+0002eff0: 2062 6520 6173 6b65 6420 746f 2073 656c   be asked to sel
+0002f000: 6563 7420 616e 6420 636c 6173 7369 6679  ect and classify
+0002f010: 2065 6e74 6974 6965 7320 616d 6f6e 6720   entities among 
+0002f020: 7468 7265 6520 6361 7465 676f 7269 6573  three categories
+0002f030: 0a20 2020 2020 2020 2020 2028 7065 7273  .          (pers
+0002f040: 6f6e 2c20 6f72 6761 6e69 7a61 7469 6f6e  on, organization
+0002f050: 2c20 6c6f 6361 7469 6f6e 2920 696e 2064  , location) in d
+0002f060: 6966 6665 7265 6e74 2074 7970 6573 206f  ifferent types o
+0002f070: 6620 7465 7874 7320 286e 6577 732c 2066  f texts (news, f
+0002f080: 6963 7469 6f6e 2c20 706f 6c69 7469 6361  iction, politica
+0002f090: 6c20 7370 6565 6368 6573 2920 7573 696e  l speeches) usin
+0002f0a0: 6720 6f6e 6520 7369 6e67 6c65 2067 656e  g one single gen
+0002f0b0: 6572 616c 206d 6f64 656c 2e0a 0a20 2020  eral model...   
+0002f0c0: 2020 2020 202d 2044 6f6d 6169 6e2d 7370       - Domain-sp
+0002f0d0: 6563 6966 6963 2063 6c61 7373 6966 6963  ecific classific
+0002f0e0: 6174 696f 6e20 2844 5343 292e 2050 6172  ation (DSC). Par
+0002f0f0: 7469 6369 7061 6e74 7320 7769 6c6c 2062  ticipants will b
+0002f100: 6520 6173 6b65 6420 746f 2064 6570 6c6f  e asked to deplo
+0002f110: 7920 6120 6469 6666 6572 656e 7420 6d6f  y a different mo
+0002f120: 6465 6c20 666f 7220 6561 6368 206f 6620  del for each of 
+0002f130: 7468 6520 6162 6f76 6520 7479 7065 732c  the above types,
+0002f140: 0a20 2020 2020 2020 2020 2074 7279 696e  .          tryin
+0002f150: 6720 746f 2069 6e63 7265 6173 6520 7468  g to increase th
+0002f160: 6520 6163 6375 7261 6379 2066 6f72 2065  e accuracy for e
+0002f170: 6163 6820 636f 6e73 6964 6572 6564 2074  ach considered t
+0002f180: 7970 652e 0a0a 2020 2020 2020 2020 4172  ype...        Ar
+0002f190: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
+0002f1a0: 646f 6d61 696e 733a 2044 6f6d 6169 6e73  domains: Domains
+0002f1b0: 2074 6f20 6265 2075 7365 642e 2053 7570   to be used. Sup
+0002f1c0: 706f 7274 6564 2061 7265 2022 574e 2220  ported are "WN" 
+0002f1d0: 2857 696b 696e 6577 7329 2c20 2246 4943  (Wikinews), "FIC
+0002f1e0: 2220 2866 6963 7469 6f6e 292c 2022 4144  " (fiction), "AD
+0002f1f0: 4722 2028 4465 2047 6173 7065 7269 2073  G" (De Gasperi s
+0002f200: 7562 7365 7429 2061 6e64 2022 616c 6c22  ubset) and "all"
+0002f210: 2e0a 2020 2020 2020 2020 2020 2020 6261  ..            ba
+0002f220: 7365 5f70 6174 683a 2044 6566 6175 6c74  se_path: Default
+0002f230: 2069 7320 4e6f 6e65 2c20 6d65 616e 696e   is None, meanin
+0002f240: 6720 7468 6174 2063 6f72 7075 7320 6765  g that corpus ge
+0002f250: 7473 2061 7574 6f2d 646f 776e 6c6f 6164  ts auto-download
+0002f260: 6564 2061 6e64 206c 6f61 6465 642e 2059  ed and loaded. Y
+0002f270: 6f75 2063 616e 206f 7665 7272 6964 6520  ou can override 
+0002f280: 7468 6973 2074 6f20 706f 696e 7420 746f  this to point to
+0002f290: 2061 2064 6966 6665 7265 6e74 2066 6f6c   a different fol
+0002f2a0: 6465 7220 6275 7420 7479 7069 6361 6c6c  der but typicall
+0002f2b0: 7920 7468 6973 2073 686f 756c 6420 6e6f  y this should no
+0002f2c0: 7420 6265 206e 6563 6573 7361 7279 2e0a  t be necessary..
+0002f2d0: 2020 2020 2020 2020 2020 2020 696e 5f6d              in_m
+0002f2e0: 656d 6f72 793a 2049 6620 5472 7565 2c20  emory: If True, 
+0002f2f0: 6b65 6570 7320 6461 7461 7365 7420 696e  keeps dataset in
+0002f300: 206d 656d 6f72 7920 6769 7669 6e67 2073   memory giving s
+0002f310: 7065 6564 7570 7320 696e 2074 7261 696e  peedups in train
+0002f320: 696e 672e 204e 6f74 2072 6563 6f6d 6d65  ing. Not recomme
+0002f330: 6e64 6564 2064 7565 2074 6f20 6865 6176  nded due to heav
+0002f340: 7920 5241 4d20 7573 6167 652e 0a20 2020  y RAM usage..   
+0002f350: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0002f360: 2073 7570 706f 7274 6564 5f64 6f6d 6169   supported_domai
+0002f370: 6e73 203d 205b 2257 4e22 2c20 2246 4943  ns = ["WN", "FIC
+0002f380: 222c 2022 4144 4722 5d0a 0a20 2020 2020  ", "ADG"]..     
+0002f390: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+0002f3a0: 2864 6f6d 6169 6e73 2c20 7374 7229 2061  (domains, str) a
+0002f3b0: 6e64 2064 6f6d 6169 6e73 203d 3d20 2261  nd domains == "a
+0002f3c0: 6c6c 223a 0a20 2020 2020 2020 2020 2020  ll":.           
+0002f3d0: 2064 6f6d 6169 6e73 203d 2073 7570 706f   domains = suppo
+0002f3e0: 7274 6564 5f64 6f6d 6169 6e73 0a0a 2020  rted_domains..  
+0002f3f0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+0002f400: 6e63 6528 646f 6d61 696e 732c 2073 7472  nce(domains, str
+0002f410: 293a 0a20 2020 2020 2020 2020 2020 2064  ):.            d
+0002f420: 6f6d 6169 6e73 203d 205b 646f 6d61 696e  omains = [domain
+0002f430: 735d 0a0a 2020 2020 2020 2020 6261 7365  s]..        base
+0002f440: 5f70 6174 6820 3d20 6b6f 6c69 6272 692e  _path = kolibri.
+0002f450: 6361 6368 655f 726f 6f74 202f 2022 6461  cache_root / "da
+0002f460: 7461 7365 7473 2220 6966 206e 6f74 2062  tasets" if not b
+0002f470: 6173 655f 7061 7468 2065 6c73 6520 5061  ase_path else Pa
+0002f480: 7468 2862 6173 655f 7061 7468 290a 0a20  th(base_path).. 
+0002f490: 2020 2020 2020 2023 2063 6f6c 756d 6e20         # column 
+0002f4a0: 666f 726d 6174 0a20 2020 2020 2020 2063  format.        c
+0002f4b0: 6f6c 756d 6e73 203d 207b 303a 2022 7465  olumns = {0: "te
+0002f4c0: 7874 222c 2031 3a20 226e 6572 227d 0a0a  xt", 1: "ner"}..
+0002f4d0: 2020 2020 2020 2020 2320 7468 6973 2064          # this d
+0002f4e0: 6174 6173 6574 206e 616d 650a 2020 2020  ataset name.    
+0002f4f0: 2020 2020 6461 7461 7365 745f 6e61 6d65      dataset_name
+0002f500: 203d 2073 656c 662e 5f5f 636c 6173 735f   = self.__class_
+0002f510: 5f2e 5f5f 6e61 6d65 5f5f 2e6c 6f77 6572  _.__name__.lower
+0002f520: 2829 0a0a 2020 2020 2020 2020 6461 7461  ()..        data
+0002f530: 5f66 6f6c 6465 7220 3d20 6261 7365 5f70  _folder = base_p
+0002f540: 6174 6820 2f20 6461 7461 7365 745f 6e61  ath / dataset_na
+0002f550: 6d65 0a0a 2020 2020 2020 2020 636f 7270  me..        corp
+0002f560: 6f72 613a 204c 6973 745b 436f 7270 7573  ora: List[Corpus
+0002f570: 5d20 3d20 5b5d 0a0a 2020 2020 2020 2020  ] = []..        
+0002f580: 6769 7468 7562 5f70 6174 6820 3d20 2268  github_path = "h
+0002f590: 7474 7073 3a2f 2f72 6177 2e67 6974 6875  ttps://raw.githu
+0002f5a0: 6275 7365 7263 6f6e 7465 6e74 2e63 6f6d  busercontent.com
+0002f5b0: 2f64 6866 626b 2f4b 494e 442f 6d61 696e  /dhfbk/KIND/main
+0002f5c0: 2f65 7661 6c69 7461 2d32 3032 3322 0a0a  /evalita-2023"..
+0002f5d0: 2020 2020 2020 2020 666f 7220 646f 6d61          for doma
+0002f5e0: 696e 2069 6e20 646f 6d61 696e 733a 0a20  in in domains:. 
+0002f5f0: 2020 2020 2020 2020 2020 2069 6620 646f             if do
+0002f600: 6d61 696e 206e 6f74 2069 6e20 7375 7070  main not in supp
+0002f610: 6f72 7465 645f 646f 6d61 696e 733a 0a20  orted_domains:. 
+0002f620: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+0002f630: 6f67 2e65 7272 6f72 2866 2244 6f6d 6169  og.error(f"Domai
+0002f640: 6e20 277b 646f 6d61 696e 7d27 2069 7320  n '{domain}' is 
+0002f650: 6e6f 7420 696e 206c 6973 7420 6f66 2073  not in list of s
+0002f660: 7570 706f 7274 6564 2064 6f6d 6169 6e73  upported domains
+0002f670: 2122 290a 2020 2020 2020 2020 2020 2020  !").            
+0002f680: 2020 2020 6c6f 672e 6572 726f 7228 6622      log.error(f"
+0002f690: 5375 7070 6f72 7465 6420 6172 6520 277b  Supported are '{
+0002f6a0: 7375 7070 6f72 7465 645f 646f 6d61 696e  supported_domain
+0002f6b0: 737d 2721 2229 0a20 2020 2020 2020 2020  s}'!").         
+0002f6c0: 2020 2020 2020 2072 6169 7365 2045 7863         raise Exc
+0002f6d0: 6570 7469 6f6e 0a0a 2020 2020 2020 2020  eption..        
+0002f6e0: 2020 2020 646f 6d61 696e 5f66 6f6c 6465      domain_folde
+0002f6f0: 7220 3d20 6461 7461 5f66 6f6c 6465 7220  r = data_folder 
+0002f700: 2f20 646f 6d61 696e 2e6c 6f77 6572 2829  / domain.lower()
+0002f710: 0a0a 2020 2020 2020 2020 2020 2020 666f  ..            fo
+0002f720: 7220 7370 6c69 7420 696e 205b 2274 7261  r split in ["tra
+0002f730: 696e 222c 2022 6465 7622 5d3a 0a20 2020  in", "dev"]:.   
+0002f740: 2020 2020 2020 2020 2020 2020 2063 6163               cac
+0002f750: 6865 645f 7061 7468 2866 227b 6769 7468  hed_path(f"{gith
+0002f760: 7562 5f70 6174 687d 2f7b 646f 6d61 696e  ub_path}/{domain
+0002f770: 7d5f 7b73 706c 6974 7d2e 7473 7622 2c20  }_{split}.tsv", 
+0002f780: 646f 6d61 696e 5f66 6f6c 6465 7229 0a0a  domain_folder)..
+0002f790: 2020 2020 2020 2020 2020 2020 636f 7270              corp
+0002f7a0: 7573 203d 2043 6f6c 756d 6e43 6f72 7075  us = ColumnCorpu
+0002f7b0: 7328 0a20 2020 2020 2020 2020 2020 2020  s(.             
+0002f7c0: 2020 2064 6174 615f 666f 6c64 6572 3d64     data_folder=d
+0002f7d0: 6f6d 6169 6e5f 666f 6c64 6572 2c0a 2020  omain_folder,.  
+0002f7e0: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+0002f7f0: 6169 6e5f 6669 6c65 3d66 227b 646f 6d61  ain_file=f"{doma
+0002f800: 696e 7d5f 7472 6169 6e2e 7473 7622 2c0a  in}_train.tsv",.
+0002f810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f820: 6465 765f 6669 6c65 3d66 227b 646f 6d61  dev_file=f"{doma
+0002f830: 696e 7d5f 6465 762e 7473 7622 2c0a 2020  in}_dev.tsv",.  
+0002f840: 2020 2020 2020 2020 2020 2020 2020 7465                te
+0002f850: 7374 5f66 696c 653d 4e6f 6e65 2c0a 2020  st_file=None,.  
+0002f860: 2020 2020 2020 2020 2020 2020 2020 636f                co
+0002f870: 6c75 6d6e 5f66 6f72 6d61 743d 636f 6c75  lumn_format=colu
+0002f880: 6d6e 732c 0a20 2020 2020 2020 2020 2020  mns,.           
+0002f890: 2020 2020 2069 6e5f 6d65 6d6f 7279 3d69       in_memory=i
+0002f8a0: 6e5f 6d65 6d6f 7279 2c0a 2020 2020 2020  n_memory,.      
+0002f8b0: 2020 2020 2020 2020 2020 7361 6d70 6c65            sample
+0002f8c0: 5f6d 6973 7369 6e67 5f73 706c 6974 733d  _missing_splits=
+0002f8d0: 4661 6c73 652c 2020 2320 4e6f 2074 6573  False,  # No tes
+0002f8e0: 7420 6461 7461 2069 7320 6176 6169 6c61  t data is availa
+0002f8f0: 626c 652c 2073 6f20 646f 206e 6f74 2073  ble, so do not s
+0002f900: 6872 696e 6b20 6465 7620 6461 7461 2066  hrink dev data f
+0002f910: 6f72 2073 6861 7265 6420 7461 736b 2070  or shared task p
+0002f920: 7265 7061 7261 7469 6f6e 210a 2020 2020  reparation!.    
+0002f930: 2020 2020 2020 2020 2020 2020 2a2a 636f              **co
+0002f940: 7270 7573 6172 6773 2c0a 2020 2020 2020  rpusargs,.      
+0002f950: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0002f960: 2020 2020 636f 7270 6f72 612e 6170 7065      corpora.appe
+0002f970: 6e64 2863 6f72 7075 7329 0a20 2020 2020  nd(corpus).     
+0002f980: 2020 2073 7570 6572 2829 2e5f 5f69 6e69     super().__ini
+0002f990: 745f 5f28 0a20 2020 2020 2020 2020 2020  t__(.           
+0002f9a0: 2063 6f72 706f 7261 2c0a 2020 2020 2020   corpora,.      
+0002f9b0: 2020 2020 2020 7361 6d70 6c65 5f6d 6973        sample_mis
+0002f9c0: 7369 6e67 5f73 706c 6974 733d 4661 6c73  sing_splits=Fals
+0002f9d0: 652c 0a20 2020 2020 2020 2020 2020 206e  e,.            n
+0002f9e0: 616d 653d 226e 6572 6d75 6422 2c0a 2020  ame="nermud",.  
+0002f9f0: 2020 2020 2020 290a 0a0a 636c 6173 7320        )...class 
+0002fa00: 4e45 525f 4745 524d 414e 5f4d 4f42 4945  NER_GERMAN_MOBIE
+0002fa10: 2843 6f6c 756d 6e43 6f72 7075 7329 3a0a  (ColumnCorpus):.
+0002fa20: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+0002fa30: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
+0002fa40: 2020 2020 2020 2020 6261 7365 5f70 6174          base_pat
+0002fa50: 683a 204f 7074 696f 6e61 6c5b 556e 696f  h: Optional[Unio
+0002fa60: 6e5b 7374 722c 2050 6174 685d 5d20 3d20  n[str, Path]] = 
+0002fa70: 4e6f 6e65 2c0a 2020 2020 2020 2020 696e  None,.        in
+0002fa80: 5f6d 656d 6f72 793a 2062 6f6f 6c20 3d20  _memory: bool = 
+0002fa90: 5472 7565 2c0a 2020 2020 2020 2020 2a2a  True,.        **
+0002faa0: 636f 7270 7573 6172 6773 2c0a 2020 2020  corpusargs,.    
+0002fab0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+0002fac0: 2020 2022 2222 496e 6974 6961 6c69 7a65     """Initialize
+0002fad0: 2074 6865 2047 6572 6d61 6e20 4d6f 6249   the German MobI
+0002fae0: 4520 4e45 5220 6461 7461 7365 742e 0a0a  E NER dataset...
+0002faf0: 2020 2020 2020 2020 5468 6520 4765 726d          The Germ
+0002fb00: 616e 204d 6f62 4945 2044 6174 6173 6574  an MobIE Dataset
+0002fb10: 2077 6173 2069 6e74 726f 6475 6365 6420   was introduced 
+0002fb20: 696e 2074 6865 204d 6f62 4945 2070 6170  in the MobIE pap
+0002fb30: 6572 2028 6874 7470 733a 2f2f 6163 6c61  er (https://acla
+0002fb40: 6e74 686f 6c6f 6779 2e6f 7267 2f32 3032  nthology.org/202
+0002fb50: 312e 6b6f 6e76 656e 732d 312e 3232 2f29  1.konvens-1.22/)
+0002fb60: 2e0a 0a20 2020 2020 2020 2054 6869 7320  ...        This 
+0002fb70: 6973 2061 2047 6572 6d61 6e2d 6c61 6e67  is a German-lang
+0002fb80: 7561 6765 2064 6174 6173 6574 2074 6861  uage dataset tha
+0002fb90: 7420 6861 7320 6265 656e 2068 756d 616e  t has been human
+0002fba0: 2d61 6e6e 6f74 6174 6564 2077 6974 6820  -annotated with 
+0002fbb0: 3230 2063 6f61 7273 652d 2061 6e64 2066  20 coarse- and f
+0002fbc0: 696e 652d 6772 6169 6e65 6420 656e 7469  ine-grained enti
+0002fbd0: 7479 2074 7970 6573 2c0a 2020 2020 2020  ty types,.      
+0002fbe0: 2020 616e 6420 6974 2069 6e63 6c75 6465    and it include
+0002fbf0: 7320 656e 7469 7479 206c 696e 6b69 6e67  s entity linking
+0002fc00: 2069 6e66 6f72 6d61 7469 6f6e 2066 6f72   information for
+0002fc10: 2067 656f 6772 6170 6869 6361 6c6c 7920   geographically 
+0002fc20: 6c69 6e6b 6162 6c65 2065 6e74 6974 6965  linkable entitie
+0002fc30: 732e 2054 6865 2064 6174 6173 6574 2063  s. The dataset c
+0002fc40: 6f6d 7072 6973 6573 2033 2c32 3332 0a20  omprises 3,232. 
+0002fc50: 2020 2020 2020 2073 6f63 6961 6c20 6d65         social me
+0002fc60: 6469 6120 7465 7874 7320 616e 6420 7472  dia texts and tr
+0002fc70: 6166 6669 6320 7265 706f 7274 732c 2074  affic reports, t
+0002fc80: 6f74 616c 696e 6720 3931 4b20 746f 6b65  otaling 91K toke
+0002fc90: 6e73 2c20 7769 7468 2032 302e 354b 2061  ns, with 20.5K a
+0002fca0: 6e6e 6f74 6174 6564 2065 6e74 6974 6965  nnotated entitie
+0002fcb0: 732c 206f 6620 7768 6963 6820 3133 2e31  s, of which 13.1
+0002fcc0: 4b20 6172 650a 2020 2020 2020 2020 6c69  K are.        li
+0002fcd0: 6e6b 6564 2074 6f20 6120 6b6e 6f77 6c65  nked to a knowle
+0002fce0: 6467 6520 6261 7365 2e20 496e 2074 6f74  dge base. In tot
+0002fcf0: 616c 2c20 3230 2064 6966 6665 7265 6e74  al, 20 different
+0002fd00: 206e 616d 6564 2065 6e74 6974 6965 7320   named entities 
+0002fd10: 6172 6520 616e 6e6f 7461 7465 642e 0a20  are annotated.. 
+0002fd20: 2020 2020 2020 203a 7061 7261 6d20 6261         :param ba
+0002fd30: 7365 5f70 6174 683a 2044 6566 6175 6c74  se_path: Default
+0002fd40: 2069 7320 4e6f 6e65 2c20 6d65 616e 696e   is None, meanin
+0002fd50: 6720 7468 6174 2063 6f72 7075 7320 6765  g that corpus ge
+0002fd60: 7473 2061 7574 6f2d 646f 776e 6c6f 6164  ts auto-download
+0002fd70: 6564 2061 6e64 206c 6f61 6465 642e 2059  ed and loaded. Y
+0002fd80: 6f75 2063 616e 206f 7665 7272 6964 6520  ou can override 
+0002fd90: 7468 6973 0a20 2020 2020 2020 2074 6f20  this.        to 
+0002fda0: 706f 696e 7420 746f 2061 2064 6966 6665  point to a diffe
+0002fdb0: 7265 6e74 2066 6f6c 6465 7220 6275 7420  rent folder but 
+0002fdc0: 7479 7069 6361 6c6c 7920 7468 6973 2073  typically this s
+0002fdd0: 686f 756c 6420 6e6f 7420 6265 206e 6563  hould not be nec
+0002fde0: 6573 7361 7279 2e0a 2020 2020 2020 2020  essary..        
+0002fdf0: 3a70 6172 616d 2069 6e5f 6d65 6d6f 7279  :param in_memory
+0002fe00: 3a20 4966 2054 7275 652c 206b 6565 7073  : If True, keeps
+0002fe10: 2064 6174 6173 6574 2069 6e20 6d65 6d6f   dataset in memo
+0002fe20: 7279 2067 6976 696e 6720 7370 6565 6475  ry giving speedu
+0002fe30: 7073 2069 6e20 7472 6169 6e69 6e67 2e20  ps in training. 
+0002fe40: 4e6f 7420 7265 636f 6d6d 656e 6465 6420  Not recommended 
+0002fe50: 6475 6520 746f 2068 6561 7679 2052 414d  due to heavy RAM
+0002fe60: 2075 7361 6765 2e0a 2020 2020 2020 2020   usage..        
+0002fe70: 2222 220a 2020 2020 2020 2020 6261 7365  """.        base
+0002fe80: 5f70 6174 6820 3d20 6b6f 6c69 6272 692e  _path = kolibri.
+0002fe90: 6361 6368 655f 726f 6f74 202f 2022 6461  cache_root / "da
+0002fea0: 7461 7365 7473 2220 6966 206e 6f74 2062  tasets" if not b
+0002feb0: 6173 655f 7061 7468 2065 6c73 6520 5061  ase_path else Pa
+0002fec0: 7468 2862 6173 655f 7061 7468 290a 2020  th(base_path).  
+0002fed0: 2020 2020 2020 6461 7461 7365 745f 6e61        dataset_na
+0002fee0: 6d65 203d 2073 656c 662e 5f5f 636c 6173  me = self.__clas
+0002fef0: 735f 5f2e 5f5f 6e61 6d65 5f5f 2e6c 6f77  s__.__name__.low
+0002ff00: 6572 2829 0a20 2020 2020 2020 2064 6174  er().        dat
+0002ff10: 615f 666f 6c64 6572 203d 2062 6173 655f  a_folder = base_
+0002ff20: 7061 7468 202f 2064 6174 6173 6574 5f6e  path / dataset_n
+0002ff30: 616d 650a 2020 2020 2020 2020 6461 7461  ame.        data
+0002ff40: 5f70 6174 6820 3d20 6b6f 6c69 6272 692e  _path = kolibri.
+0002ff50: 6361 6368 655f 726f 6f74 202f 2022 6461  cache_root / "da
+0002ff60: 7461 7365 7473 2220 2f20 6461 7461 7365  tasets" / datase
+0002ff70: 745f 6e61 6d65 0a0a 2020 2020 2020 2020  t_name..        
+0002ff80: 636f 6c75 6d6e 7320 3d20 7b30 3a20 2274  columns = {0: "t
+0002ff90: 6578 7422 2c20 333a 2022 6e65 7222 7d0a  ext", 3: "ner"}.
+0002ffa0: 0a20 2020 2020 2020 2074 7261 696e 5f64  .        train_d
+0002ffb0: 6174 615f 6669 6c65 203d 2064 6174 615f  ata_file = data_
+0002ffc0: 7061 7468 202f 2022 7472 6169 6e2e 636f  path / "train.co
+0002ffd0: 6e6c 6c32 3030 3322 0a20 2020 2020 2020  nll2003".       
+0002ffe0: 2069 6620 6e6f 7420 7472 6169 6e5f 6461   if not train_da
+0002fff0: 7461 5f66 696c 652e 6973 5f66 696c 6528  ta_file.is_file(
+00030000: 293a 0a20 2020 2020 2020 2020 2020 2074  ):.            t
+00030010: 656d 705f 6669 6c65 203d 2063 6163 6865  emp_file = cache
+00030020: 645f 7061 7468 280a 2020 2020 2020 2020  d_path(.        
+00030030: 2020 2020 2020 2020 2268 7474 7073 3a2f          "https:/
+00030040: 2f67 6974 6875 622e 636f 6d2f 4446 4b49  /github.com/DFKI
+00030050: 2d4e 4c50 2f4d 6f62 4945 2f72 6177 2f6d  -NLP/MobIE/raw/m
+00030060: 6173 7465 722f 7631 5f32 3032 3130 3831  aster/v1_2021081
+00030070: 312f 6e65 725f 636f 6e6c 6c30 335f 666f  1/ner_conll03_fo
+00030080: 726d 6174 7465 642e 7a69 7022 2c0a 2020  rmatted.zip",.  
+00030090: 2020 2020 2020 2020 2020 2020 2020 5061                Pa
+000300a0: 7468 2822 6461 7461 7365 7473 2229 202f  th("datasets") /
+000300b0: 2064 6174 6173 6574 5f6e 616d 652c 0a20   dataset_name,. 
+000300c0: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+000300d0: 2020 2020 2020 2020 2066 726f 6d20 7a69           from zi
+000300e0: 7066 696c 6520 696d 706f 7274 205a 6970  pfile import Zip
+000300f0: 4669 6c65 0a0a 2020 2020 2020 2020 2020  File..          
+00030100: 2020 7769 7468 205a 6970 4669 6c65 2874    with ZipFile(t
+00030110: 656d 705f 6669 6c65 2c20 2272 2229 2061  emp_file, "r") a
+00030120: 7320 7a69 705f 6669 6c65 3a0a 2020 2020  s zip_file:.    
+00030130: 2020 2020 2020 2020 2020 2020 7a69 705f              zip_
+00030140: 6669 6c65 2e65 7874 7261 6374 616c 6c28  file.extractall(
+00030150: 7061 7468 3d64 6174 615f 7061 7468 290a  path=data_path).
+00030160: 0a20 2020 2020 2020 2073 7570 6572 2829  .        super()
+00030170: 2e5f 5f69 6e69 745f 5f28 0a20 2020 2020  .__init__(.     
+00030180: 2020 2020 2020 2064 6174 615f 666f 6c64         data_fold
+00030190: 6572 2c0a 2020 2020 2020 2020 2020 2020  er,.            
+000301a0: 636f 6c75 6d6e 732c 0a20 2020 2020 2020  columns,.       
+000301b0: 2020 2020 2069 6e5f 6d65 6d6f 7279 3d69       in_memory=i
+000301c0: 6e5f 6d65 6d6f 7279 2c0a 2020 2020 2020  n_memory,.      
+000301d0: 2020 2020 2020 636f 6d6d 656e 745f 7379        comment_sy
+000301e0: 6d62 6f6c 3d4e 6f6e 652c 0a20 2020 2020  mbol=None,.     
+000301f0: 2020 2020 2020 2064 6f63 756d 656e 745f         document_
+00030200: 7365 7061 7261 746f 725f 746f 6b65 6e3d  separator_token=
+00030210: 222d 444f 4353 5441 5254 2d22 2c0a 2020  "-DOCSTART-",.  
+00030220: 2020 2020 2020 2020 2020 2a2a 636f 7270            **corp
+00030230: 7573 6172 6773 2c0a 2020 2020 2020 2020  usargs,.        
+00030240: 290a 0a0a 636c 6173 7320 4d41 5341 4b48  )...class MASAKH
+00030250: 415f 504f 5328 4d75 6c74 6943 6f72 7075  A_POS(MultiCorpu
+00030260: 7329 3a0a 2020 2020 6465 6620 5f5f 696e  s):.    def __in
+00030270: 6974 5f5f 280a 2020 2020 2020 2020 7365  it__(.        se
+00030280: 6c66 2c0a 2020 2020 2020 2020 6c61 6e67  lf,.        lang
+00030290: 7561 6765 733a 2055 6e69 6f6e 5b73 7472  uages: Union[str
+000302a0: 2c20 4c69 7374 5b73 7472 5d5d 203d 2022  , List[str]] = "
+000302b0: 6261 6d22 2c0a 2020 2020 2020 2020 7665  bam",.        ve
+000302c0: 7273 696f 6e3a 2073 7472 203d 2022 7631  rsion: str = "v1
+000302d0: 222c 0a20 2020 2020 2020 2062 6173 655f  ",.        base_
+000302e0: 7061 7468 3a20 4f70 7469 6f6e 616c 5b55  path: Optional[U
+000302f0: 6e69 6f6e 5b73 7472 2c20 5061 7468 5d5d  nion[str, Path]]
+00030300: 203d 204e 6f6e 652c 0a20 2020 2020 2020   = None,.       
+00030310: 2069 6e5f 6d65 6d6f 7279 3a20 626f 6f6c   in_memory: bool
+00030320: 203d 2054 7275 652c 0a20 2020 2020 2020   = True,.       
+00030330: 202a 2a63 6f72 7075 7361 7267 732c 0a20   **corpusargs,. 
+00030340: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
+00030350: 2020 2020 2020 2222 2249 6e69 7469 616c        """Initial
+00030360: 697a 6520 7468 6520 4d61 7361 6b68 6150  ize the MasakhaP
+00030370: 4f53 2063 6f72 7075 7320 6176 6169 6c61  OS corpus availa
+00030380: 626c 6520 6f6e 2068 7474 7073 3a2f 2f67  ble on https://g
+00030390: 6974 6875 622e 636f 6d2f 6d61 7361 6b68  ithub.com/masakh
+000303a0: 616e 652d 696f 2f6d 6173 616b 6861 6e65  ane-io/masakhane
+000303b0: 2d70 6f73 2e0a 0a20 2020 2020 2020 2049  -pos...        I
+000303c0: 7420 636f 6e73 6973 7473 206f 6620 3230  t consists of 20
+000303d0: 2041 6672 6963 616e 206c 616e 6775 6167   African languag
+000303e0: 6573 2e20 5061 7373 2061 206c 616e 6775  es. Pass a langu
+000303f0: 6167 6520 636f 6465 206f 7220 6120 6c69  age code or a li
+00030400: 7374 206f 6620 6c61 6e67 7561 6765 2063  st of language c
+00030410: 6f64 6573 2074 6f20 696e 6974 6961 6c69  odes to initiali
+00030420: 7a65 2074 6865 2063 6f72 7075 730a 2020  ze the corpus.  
+00030430: 2020 2020 2020 7769 7468 2074 6865 206c        with the l
+00030440: 616e 6775 6167 6573 2079 6f75 2072 6571  anguages you req
+00030450: 7569 7265 2e20 4966 2079 6f75 2070 6173  uire. If you pas
+00030460: 7320 2261 6c6c 222c 2061 6c6c 206c 616e  s "all", all lan
+00030470: 6775 6167 6573 2077 696c 6c20 6265 2069  guages will be i
+00030480: 6e69 7469 616c 697a 6564 2e0a 2020 2020  nitialized..    
+00030490: 2020 2020 3a76 6572 7369 6f6e 3a20 5370      :version: Sp
+000304a0: 6563 6966 6965 7320 7665 7273 696f 6e20  ecifies version 
+000304b0: 6f66 2074 6865 2064 6174 6173 6574 2e20  of the dataset. 
+000304c0: 4375 7272 656e 746c 792c 206f 6e6c 7920  Currently, only 
+000304d0: 2276 3122 2069 7320 7375 7070 6f72 7465  "v1" is supporte
+000304e0: 642e 0a20 2020 2020 2020 203a 7061 7261  d..        :para
+000304f0: 6d20 6261 7365 5f70 6174 683a 2044 6566  m base_path: Def
+00030500: 6175 6c74 2069 7320 4e6f 6e65 2c20 6d65  ault is None, me
+00030510: 616e 696e 6720 7468 6174 2063 6f72 7075  aning that corpu
+00030520: 7320 6765 7473 2061 7574 6f2d 646f 776e  s gets auto-down
+00030530: 6c6f 6164 6564 2061 6e64 206c 6f61 6465  loaded and loade
+00030540: 642e 2059 6f75 2063 616e 206f 7665 7272  d. You can overr
+00030550: 6964 6520 7468 6973 0a20 2020 2020 2020  ide this.       
+00030560: 2074 6f20 706f 696e 7420 746f 2061 2064   to point to a d
+00030570: 6966 6665 7265 6e74 2066 6f6c 6465 7220  ifferent folder 
+00030580: 6275 7420 7479 7069 6361 6c6c 7920 7468  but typically th
+00030590: 6973 2073 686f 756c 6420 6e6f 7420 6265  is should not be
+000305a0: 206e 6563 6573 7361 7279 2e0a 2020 2020   necessary..    
+000305b0: 2020 2020 3a70 6172 616d 2069 6e5f 6d65      :param in_me
+000305c0: 6d6f 7279 3a20 4966 2054 7275 652c 206b  mory: If True, k
+000305d0: 6565 7073 2064 6174 6173 6574 2069 6e20  eeps dataset in 
+000305e0: 6d65 6d6f 7279 2067 6976 696e 6720 7370  memory giving sp
+000305f0: 6565 6475 7073 2069 6e20 7472 6169 6e69  eedups in traini
+00030600: 6e67 2e0a 2020 2020 2020 2020 2222 220a  ng..        """.
+00030610: 2020 2020 2020 2020 6261 7365 5f70 6174          base_pat
+00030620: 6820 3d20 6b6f 6c69 6272 692e 6361 6368  h = kolibri.cach
+00030630: 655f 726f 6f74 202f 2022 6461 7461 7365  e_root / "datase
+00030640: 7473 2220 6966 206e 6f74 2062 6173 655f  ts" if not base_
+00030650: 7061 7468 2065 6c73 6520 5061 7468 2862  path else Path(b
+00030660: 6173 655f 7061 7468 290a 0a20 2020 2020  ase_path)..     
+00030670: 2020 2023 2069 6620 6f6e 6c79 206f 6e65     # if only one
+00030680: 206c 616e 6775 6167 6520 6973 2067 6976   language is giv
+00030690: 656e 0a20 2020 2020 2020 2069 6620 6973  en.        if is
+000306a0: 696e 7374 616e 6365 286c 616e 6775 6167  instance(languag
+000306b0: 6573 2c20 7374 7229 3a0a 2020 2020 2020  es, str):.      
+000306c0: 2020 2020 2020 6c61 6e67 7561 6765 7320        languages 
+000306d0: 3d20 5b6c 616e 6775 6167 6573 5d0a 0a20  = [languages].. 
+000306e0: 2020 2020 2020 2023 2063 6f6c 756d 6e20         # column 
+000306f0: 666f 726d 6174 0a20 2020 2020 2020 2063  format.        c
+00030700: 6f6c 756d 6e73 203d 207b 303a 2022 7465  olumns = {0: "te
+00030710: 7874 222c 2031 3a20 2270 6f73 227d 0a0a  xt", 1: "pos"}..
+00030720: 2020 2020 2020 2020 2320 7468 6973 2064          # this d
+00030730: 6174 6173 6574 206e 616d 650a 2020 2020  ataset name.    
+00030740: 2020 2020 6461 7461 7365 745f 6e61 6d65      dataset_name
+00030750: 203d 2073 656c 662e 5f5f 636c 6173 735f   = self.__class_
+00030760: 5f2e 5f5f 6e61 6d65 5f5f 2e6c 6f77 6572  _.__name__.lower
+00030770: 2829 0a0a 2020 2020 2020 2020 7375 7070  ()..        supp
+00030780: 6f72 7465 645f 7665 7273 696f 6e73 203d  orted_versions =
+00030790: 205b 2276 3122 5d0a 0a20 2020 2020 2020   ["v1"]..       
+000307a0: 2069 6620 7665 7273 696f 6e20 6e6f 7420   if version not 
+000307b0: 696e 2073 7570 706f 7274 6564 5f76 6572  in supported_ver
+000307c0: 7369 6f6e 733a 0a20 2020 2020 2020 2020  sions:.         
+000307d0: 2020 206c 6f67 2e65 7272 6f72 2866 2254     log.error(f"T
+000307e0: 6865 2073 7065 6369 6669 6564 2076 6572  he specified ver
+000307f0: 7369 6f6e 2027 7b76 6572 7369 6f6e 7d27  sion '{version}'
+00030800: 2069 7320 6e6f 7420 696e 2074 6865 206c   is not in the l
+00030810: 6973 7420 6f66 2073 7570 706f 7274 6564  ist of supported
+00030820: 2076 6572 7369 6f6e 2122 290a 2020 2020   version!").    
+00030830: 2020 2020 2020 2020 6c6f 672e 6572 726f          log.erro
+00030840: 7228 6622 5375 7070 6f72 7465 6420 7665  r(f"Supported ve
+00030850: 7273 696f 6e73 2061 7265 2027 7b73 7570  rsions are '{sup
+00030860: 706f 7274 6564 5f76 6572 7369 6f6e 737d  ported_versions}
+00030870: 2721 2229 0a20 2020 2020 2020 2020 2020  '!").           
+00030880: 2072 6169 7365 2045 7863 6570 7469 6f6e   raise Exception
+00030890: 0a0a 2020 2020 2020 2020 6461 7461 5f66  ..        data_f
+000308a0: 6f6c 6465 7220 3d20 6261 7365 5f70 6174  older = base_pat
+000308b0: 6820 2f20 6461 7461 7365 745f 6e61 6d65  h / dataset_name
+000308c0: 202f 2076 6572 7369 6f6e 0a0a 2020 2020   / version..    
+000308d0: 2020 2020 7375 7070 6f72 7465 645f 6c61      supported_la
+000308e0: 6e67 7561 6765 7320 3d20 5b0a 2020 2020  nguages = [.    
+000308f0: 2020 2020 2020 2020 2262 616d 222c 0a20          "bam",. 
+00030900: 2020 2020 2020 2020 2020 2022 6262 6a22             "bbj"
+00030910: 2c0a 2020 2020 2020 2020 2020 2020 2265  ,.            "e
+00030920: 7765 222c 0a20 2020 2020 2020 2020 2020  we",.           
+00030930: 2022 666f 6e22 2c0a 2020 2020 2020 2020   "fon",.        
+00030940: 2020 2020 2268 6175 222c 0a20 2020 2020      "hau",.     
+00030950: 2020 2020 2020 2022 6962 6f22 2c0a 2020         "ibo",.  
+00030960: 2020 2020 2020 2020 2020 226b 696e 222c            "kin",
+00030970: 0a20 2020 2020 2020 2020 2020 2022 6c75  .            "lu
+00030980: 6722 2c0a 2020 2020 2020 2020 2020 2020  g",.            
+00030990: 226d 6f73 222c 0a20 2020 2020 2020 2020  "mos",.         
+000309a0: 2020 2022 7063 6d22 2c0a 2020 2020 2020     "pcm",.      
+000309b0: 2020 2020 2020 226e 7961 222c 0a20 2020        "nya",.   
+000309c0: 2020 2020 2020 2020 2022 736e 6122 2c0a           "sna",.
+000309d0: 2020 2020 2020 2020 2020 2020 2273 7761              "swa
+000309e0: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+000309f0: 7477 6922 2c0a 2020 2020 2020 2020 2020  twi",.          
+00030a00: 2020 2277 6f6c 222c 0a20 2020 2020 2020    "wol",.       
+00030a10: 2020 2020 2022 7868 6f22 2c0a 2020 2020       "xho",.    
+00030a20: 2020 2020 2020 2020 2279 6f72 222c 0a20          "yor",. 
+00030a30: 2020 2020 2020 2020 2020 2022 7a75 6c22             "zul"
+00030a40: 2c0a 2020 2020 2020 2020 5d0a 0a20 2020  ,.        ]..   
+00030a50: 2020 2020 2064 6174 615f 7061 7468 7320       data_paths 
+00030a60: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+00030a70: 2276 3122 3a20 2268 7474 7073 3a2f 2f72  "v1": "https://r
+00030a80: 6177 2e67 6974 6875 6275 7365 7263 6f6e  aw.githubusercon
+00030a90: 7465 6e74 2e63 6f6d 2f6d 6173 616b 6861  tent.com/masakha
+00030aa0: 6e65 2d69 6f2f 6d61 7361 6b68 616e 652d  ne-io/masakhane-
+00030ab0: 706f 732f 6d61 696e 2f64 6174 6122 2c0a  pos/main/data",.
+00030ac0: 2020 2020 2020 2020 7d0a 0a20 2020 2020          }..     
+00030ad0: 2020 2023 2075 7365 2061 6c6c 206c 616e     # use all lan
+00030ae0: 6775 6167 6573 2069 6620 6578 706c 6963  guages if explic
+00030af0: 6974 6c79 2073 6574 2074 6f20 2261 6c6c  itly set to "all
+00030b00: 220a 2020 2020 2020 2020 6966 206c 616e  ".        if lan
+00030b10: 6775 6167 6573 203d 3d20 5b22 616c 6c22  guages == ["all"
+00030b20: 5d3a 0a20 2020 2020 2020 2020 2020 206c  ]:.            l
+00030b30: 616e 6775 6167 6573 203d 2073 7570 706f  anguages = suppo
+00030b40: 7274 6564 5f6c 616e 6775 6167 6573 0a0a  rted_languages..
+00030b50: 2020 2020 2020 2020 636f 7270 6f72 613a          corpora:
+00030b60: 204c 6973 745b 436f 7270 7573 5d20 3d20   List[Corpus] = 
+00030b70: 5b5d 0a20 2020 2020 2020 2066 6f72 206c  [].        for l
+00030b80: 616e 6775 6167 6520 696e 206c 616e 6775  anguage in langu
+00030b90: 6167 6573 3a0a 2020 2020 2020 2020 2020  ages:.          
+00030ba0: 2020 6966 206c 616e 6775 6167 6520 6e6f    if language no
+00030bb0: 7420 696e 2073 7570 706f 7274 6564 5f6c  t in supported_l
+00030bc0: 616e 6775 6167 6573 3a0a 2020 2020 2020  anguages:.      
+00030bd0: 2020 2020 2020 2020 2020 6c6f 672e 6572            log.er
+00030be0: 726f 7228 6622 4c61 6e67 7561 6765 2027  ror(f"Language '
+00030bf0: 7b6c 616e 6775 6167 657d 2720 6973 206e  {language}' is n
+00030c00: 6f74 2069 6e20 6c69 7374 206f 6620 7375  ot in list of su
+00030c10: 7070 6f72 7465 6420 6c61 6e67 7561 6765  pported language
+00030c20: 7321 2229 0a20 2020 2020 2020 2020 2020  s!").           
+00030c30: 2020 2020 206c 6f67 2e65 7272 6f72 2866       log.error(f
+00030c40: 2253 7570 706f 7274 6564 2061 7265 2027  "Supported are '
+00030c50: 7b73 7570 706f 7274 6564 5f6c 616e 6775  {supported_langu
+00030c60: 6167 6573 7d27 2122 290a 2020 2020 2020  ages}'!").      
+00030c70: 2020 2020 2020 2020 2020 6c6f 672e 6572            log.er
+00030c80: 726f 7228 2249 6e73 7461 6e74 6961 7465  ror("Instantiate
+00030c90: 2074 6869 7320 436f 7270 7573 2066 6f72   this Corpus for
+00030ca0: 2069 6e73 7461 6e63 6520 6c69 6b65 2073   instance like s
+00030cb0: 6f20 2763 6f72 7075 7320 3d20 4d41 5341  o 'corpus = MASA
+00030cc0: 4b48 415f 504f 5328 6c61 6e67 7561 6765  KHA_POS(language
+00030cd0: 733d 2762 616d 2729 2722 290a 2020 2020  s='bam')'").    
+00030ce0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00030cf0: 6520 4578 6365 7074 696f 6e0a 0a20 2020  e Exception..   
+00030d00: 2020 2020 2020 2020 206c 616e 6775 6167           languag
+00030d10: 655f 666f 6c64 6572 203d 2064 6174 615f  e_folder = data_
+00030d20: 666f 6c64 6572 202f 206c 616e 6775 6167  folder / languag
+00030d30: 650a 0a20 2020 2020 2020 2020 2020 2023  e..            #
+00030d40: 2064 6f77 6e6c 6f61 6420 6461 7461 2069   download data i
+00030d50: 6620 6e65 6365 7373 6172 790a 2020 2020  f necessary.    
+00030d60: 2020 2020 2020 2020 6461 7461 5f70 6174          data_pat
+00030d70: 6820 3d20 6622 7b64 6174 615f 7061 7468  h = f"{data_path
+00030d80: 735b 7665 7273 696f 6e5d 7d2f 7b6c 616e  s[version]}/{lan
+00030d90: 6775 6167 657d 220a 2020 2020 2020 2020  guage}".        
+00030da0: 2020 2020 6361 6368 6564 5f70 6174 6828      cached_path(
+00030db0: 6622 7b64 6174 615f 7061 7468 7d2f 6465  f"{data_path}/de
+00030dc0: 762e 7478 7422 2c20 6c61 6e67 7561 6765  v.txt", language
+00030dd0: 5f66 6f6c 6465 7229 0a20 2020 2020 2020  _folder).       
+00030de0: 2020 2020 2063 6163 6865 645f 7061 7468       cached_path
+00030df0: 2866 227b 6461 7461 5f70 6174 687d 2f74  (f"{data_path}/t
+00030e00: 6573 742e 7478 7422 2c20 6c61 6e67 7561  est.txt", langua
+00030e10: 6765 5f66 6f6c 6465 7229 0a20 2020 2020  ge_folder).     
+00030e20: 2020 2020 2020 2063 6163 6865 645f 7061         cached_pa
+00030e30: 7468 2866 227b 6461 7461 5f70 6174 687d  th(f"{data_path}
+00030e40: 2f74 7261 696e 2e74 7874 222c 206c 616e  /train.txt", lan
+00030e50: 6775 6167 655f 666f 6c64 6572 290a 0a20  guage_folder).. 
+00030e60: 2020 2020 2020 2020 2020 2023 2069 6e69             # ini
+00030e70: 7469 616c 697a 6520 636f 6d6c 756d 6e63  tialize comlumnc
+00030e80: 6f72 7075 7320 616e 6420 6164 6420 6974  orpus and add it
+00030e90: 2074 6f20 6c69 7374 0a20 2020 2020 2020   to list.       
+00030ea0: 2020 2020 206c 6f67 2e69 6e66 6f28 6622       log.info(f"
+00030eb0: 5265 6164 696e 6720 6461 7461 2066 6f72  Reading data for
+00030ec0: 206c 616e 6775 6167 6520 7b6c 616e 6775   language {langu
+00030ed0: 6167 657d 407b 7665 7273 696f 6e7d 2229  age}@{version}")
+00030ee0: 0a20 2020 2020 2020 2020 2020 2063 6f72  .            cor
+00030ef0: 7020 3d20 436f 6c75 6d6e 436f 7270 7573  p = ColumnCorpus
+00030f00: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00030f10: 2020 6461 7461 5f66 6f6c 6465 723d 6c61    data_folder=la
+00030f20: 6e67 7561 6765 5f66 6f6c 6465 722c 0a20  nguage_folder,. 
+00030f30: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00030f40: 6f6c 756d 6e5f 666f 726d 6174 3d63 6f6c  olumn_format=col
+00030f50: 756d 6e73 2c0a 2020 2020 2020 2020 2020  umns,.          
+00030f60: 2020 2020 2020 656e 636f 6469 6e67 3d22        encoding="
+00030f70: 7574 662d 3822 2c0a 2020 2020 2020 2020  utf-8",.        
+00030f80: 2020 2020 2020 2020 696e 5f6d 656d 6f72          in_memor
+00030f90: 793d 696e 5f6d 656d 6f72 792c 0a20 2020  y=in_memory,.   
+00030fa0: 2020 2020 2020 2020 2020 2020 206e 616d               nam
+00030fb0: 653d 6c61 6e67 7561 6765 2c0a 2020 2020  e=language,.    
+00030fc0: 2020 2020 2020 2020 2020 2020 2a2a 636f              **co
+00030fd0: 7270 7573 6172 6773 2c0a 2020 2020 2020  rpusargs,.      
+00030fe0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00030ff0: 2020 2020 636f 7270 6f72 612e 6170 7065      corpora.appe
+00031000: 6e64 2863 6f72 7029 0a20 2020 2020 2020  nd(corp).       
+00031010: 2073 7570 6572 2829 2e5f 5f69 6e69 745f   super().__init_
+00031020: 5f28 0a20 2020 2020 2020 2020 2020 2063  _(.            c
+00031030: 6f72 706f 7261 2c0a 2020 2020 2020 2020  orpora,.        
+00031040: 2020 2020 6e61 6d65 3d22 6166 7269 6361      name="africa
+00031050: 2d70 6f73 2d22 202b 2022 2d22 2e6a 6f69  -pos-" + "-".joi
+00031060: 6e28 6c61 6e67 7561 6765 7329 2c0a 2020  n(languages),.  
+00031070: 2020 2020 2020 290a                            ).
```

## kolibri/backend/pytorch/trainers/trainer.py

```diff
@@ -594,15 +594,19 @@
 
                         batch_steps = self.get_batch_steps(batch, mini_batch_chunk_size=mini_batch_chunk_size)
 
                         # forward and backward for batch
                         for batch_step in batch_steps:
                             # forward pass
                             with torch.autocast(device_type=kolibri.backend.pytorch.device.type, enabled=use_amp):
-                                loss, datapoint_count = self.model.forward_loss(batch_step)
+                                if isinstance(self.model, torch.nn.DataParallel):
+                                    loss, datapoint_count = self.model.forward(batch_step)
+                                else:
+                                    loss, datapoint_count = self.model.forward_loss(batch_step)
+
 
                             batch_train_samples += datapoint_count
                             batch_train_loss += loss.item()
 
                             self._backward(scaler.scale(loss))
 
                             # identify dynamic embeddings (always deleted) on first sentence
```

## Comparing `kolibri_light-0.3.0.dist-info/LICENCE.txt` & `kolibri_light-0.3.1.dist-info/LICENCE.txt`

 * *Files identical despite different names*

## Comparing `kolibri_light-0.3.0.dist-info/METADATA` & `kolibri_light-0.3.1.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: kolibri-light
-Version: 0.3.0
+Version: 0.3.1
 Summary: Deep Learning and more NLP toolkit
 Home-page: 
 Author: Mohamed Ben Haddou
 Author-email: mbenhaddou@mentis.io
 Classifier: Programming Language :: Python :: 3.7
 Classifier: Operating System :: OS Independent
 Classifier: Development Status :: 4 - Beta
@@ -23,23 +23,23 @@
 Requires-Dist: networkx ==3.1
 Requires-Dist: pypickle ==1.1.0
 Requires-Dist: tf-agents ==0.12.0
 Requires-Dist: tensorflow-probability ==0.16.0
 Requires-Dist: numpy ==1.23.5
 Requires-Dist: openpyxl
 Provides-Extra: all
-Requires-Dist: tensorflow ==2.8.0 ; extra == 'all'
 Requires-Dist: gensim ; extra == 'all'
-Requires-Dist: pyLDAvis ; extra == 'all'
-Requires-Dist: fasttext ; extra == 'all'
-Requires-Dist: dateparser ; extra == 'all'
+Requires-Dist: tensorflow ==2.8.0 ; extra == 'all'
 Requires-Dist: sonopy ; extra == 'all'
-Requires-Dist: ipywidgets ; extra == 'all'
+Requires-Dist: dateparser ; extra == 'all'
 Requires-Dist: wordcloud ; extra == 'all'
 Requires-Dist: eml-parser ; extra == 'all'
+Requires-Dist: ipywidgets ; extra == 'all'
+Requires-Dist: pyLDAvis ; extra == 'all'
+Requires-Dist: fasttext ; extra == 'all'
 Provides-Extra: audio
 Requires-Dist: sonopy ; extra == 'audio'
 Provides-Extra: dnn
 Requires-Dist: tensorflow ==2.8.0 ; extra == 'dnn'
 Provides-Extra: nlp
 Requires-Dist: gensim ; extra == 'nlp'
 Requires-Dist: fasttext ; extra == 'nlp'
```

## Comparing `kolibri_light-0.3.0.dist-info/RECORD` & `kolibri_light-0.3.1.dist-info/RECORD`

 * *Files 1% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-kolibri/VERSION,sha256=VQYTU3_EiPOzcq90pAAYefASyEZbgW8bhcbTRGss-0k,5
+kolibri/VERSION,sha256=9PyVbsYbGHzRh5DAsKb6XR06MN5KVJPjJ3RgSF7RiPI,5
 kolibri/__init__.py,sha256=Kj4Mdf5ZWI8E5q-2EZwaLyZxpQVOMwnXEH3BQY1nkYA,4514
 kolibri/app.py,sha256=b_vLL8hIcbXgW_F-zOQfllebEiN-VdHsN7nEivYkZBA,16782
 kolibri/config.py,sha256=L1xrnHExgtg3gjE-pl67-BsOTJCtd9a-Gk8cG9FOo6M,3190
 kolibri/config_loader.py,sha256=gsdbv6fd6DU0HHd8aSOOMnOJL5dZJy8_pP2fqBWH_os,1902
 kolibri/default_configs.py,sha256=dGMN3ps9j_GD5C2KVWN5kFhVsIRHY8j5m4LsM3d4Gto,3814
 kolibri/errors.py,sha256=w4CWaoHWprc4NwaG9OmG0QKy8TsjzW40wx6x_p24dT8,5968
 kolibri/logger.py,sha256=bfFKEoKSshW41L2TCOTRDM03uP0RKJJ6ksyjToYaoYc,795
@@ -109,26 +109,26 @@
 kolibri/backend/bn/structure/structure_model.py,sha256=0IDc08xa5o-TygQ0iySFRPjXHFnpisMBRR0XUjsV1ls,13671
 kolibri/backend/generators/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kolibri/backend/model_abstractions/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kolibri/backend/model_abstractions/model_object.py,sha256=l69ka3VlcJlLZUb4sAUkYFTq2DmJ2v-EIY4Zk7mq7eo,7922
 kolibri/backend/model_abstractions/model_params.py,sha256=quoXN7aqV04BtHfrVW2FIRyGm5i-Y1h2XXlXg_JnxXg,3106
 kolibri/backend/pytorch/__init__.py,sha256=nk18vKnCr9E1Mu_FqK2pEe7IPfqxNkOhu1aeOLGKFYc,2611
 kolibri/backend/pytorch/class_utils.py,sha256=U_GrPjNhG-r6d8r2SMXYd77oSjUx5d9F5b5oRZWkPdU,618
-kolibri/backend/pytorch/data.py,sha256=krsTUgSP5kj6PGDaqYJSMzK7Wpj3vdoX44-jPPyA-1o,69867
+kolibri/backend/pytorch/data.py,sha256=vBdYXsqnblog1sv0vsNO4aKDxXmadv0ooOixICCku7I,69940
 kolibri/backend/pytorch/file_utils.py,sha256=hui4dFiuUbV09TKniuU_Zun3o6PzzpEmu4b7OkcKEgg,13971
 kolibri/backend/pytorch/inference_utils.py,sha256=-HMgMu9n_5uNQXtPmOTNsQbdpDRZXdPfqfawvA2CJKU,12239
 kolibri/backend/pytorch/optim.py,sha256=LMiUa4dxH52iXxfd1uPJJIUahdgDNBcVxlUJogeiO30,10900
 kolibri/backend/pytorch/samplers.py,sha256=M1PRkwcnN_KPYD3azFzrt4wSGEplMxmtMMBlT5nHGbs,3674
-kolibri/backend/pytorch/splitter.py,sha256=_wPS9bF7bAJRMTlkOnY7xkSo6CE0Dkb2rdaerfQNZnk,8216
-kolibri/backend/pytorch/tokenization.py,sha256=GbMeCzqGICz52Lxl2L6i_nhSgYtuSOUnngRbJZuQhNM,9749
+kolibri/backend/pytorch/splitter.py,sha256=dhaaqrQG096PxLAagUGCyCXHI3BizSwXofRf7hpo5Os,7098
+kolibri/backend/pytorch/tokenization.py,sha256=2BDAbLt-6bG7ljARjA0_Q___yVupnH0n8X4xpC55aq0,8365
 kolibri/backend/pytorch/training_utils.py,sha256=TQWMy8taOyvT8X5ylWyPKEpQTJ_J45hEGwVVIMzcwJU,14087
-kolibri/backend/pytorch/datasets/__init__.py,sha256=UGCYhAvXRP8MKatUMwkMXPOrGF0snWTAN8NRMkm4iLU,4333
+kolibri/backend/pytorch/datasets/__init__.py,sha256=8eJc1jQNt9xK_dg6lPSY4ZKgaRDQ3tUCb56HN5RFBgE,4332
 kolibri/backend/pytorch/datasets/base.py,sha256=CYqEOAVWi7Z8ovg-8QC4oXRgfURZ1Yuv2HxTbGBOagk,9448
 kolibri/backend/pytorch/datasets/document_classification.py,sha256=Z01ZyrhUyJiGBpEAs-Ygxaf4v9ee1KRFbVzt8RAGUjk,91543
-kolibri/backend/pytorch/datasets/sequence_labeling.py,sha256=aICSryJgEi5XzhhK73h1rvBWpiD_Sz7VkHUQmpbHViY,202979
+kolibri/backend/pytorch/datasets/sequence_labeling.py,sha256=rMJbP80HUz4Zp6eDXK_uADiMM-bUZBMC6uDKEFkaON4,200824
 kolibri/backend/pytorch/embeddings/__init__.py,sha256=66GF8LlPHhVyMQWhLXo8ExbbSw_J-Olq2fLIKi2fENI,2473
 kolibri/backend/pytorch/embeddings/base.py,sha256=1_JSaARJKrLoRsX23QX5z04eaSpwOaD1G4i05jgR6wE,8074
 kolibri/backend/pytorch/embeddings/document.py,sha256=2pRx4pFtuhIc4FPher-vULaFhHBSBRxAAW_mOEnPGkw,30840
 kolibri/backend/pytorch/embeddings/image.py,sha256=XKXIfqkY22N67tqsWNh0B_Br6dWSE0uU0RlLW24COj8,10954
 kolibri/backend/pytorch/embeddings/legacy.py,sha256=UNsXDLsLqgMsBSQa9Y-nD9wopdU1uu9KqS3CvcEv1YU,29250
 kolibri/backend/pytorch/embeddings/token.py,sha256=imdw2YRIQWLAg90A-CfuNEC9Mv67NdOnCLTOXWsYeiU,66585
 kolibri/backend/pytorch/embeddings/transformer.py,sha256=_B_8a5dYfiZAl4_vZTiPKW8mbvrTjY6_E4JLw-cqVDY,63311
@@ -157,15 +157,15 @@
 kolibri/backend/pytorch/nn/recurrent.py,sha256=JnFOm003rQsQa_hYiWivMd2JX_lBMoNEk32wQv4ViD0,437
 kolibri/backend/pytorch/nn/distance/__init__.py,sha256=I6402vwzEcQJogMLnF43QWApYf4Gqy6S6dbF_pvvK_4,387
 kolibri/backend/pytorch/nn/distance/cosine.py,sha256=4O9xnkHhB-mT7YjAd3GX4j-NRcuzf3Kyec2s-lAk_XM,1191
 kolibri/backend/pytorch/nn/distance/euclidean.py,sha256=8WRMT2oK_881jPYCxde611xysIt0TBo096g5u6cxRQo,1838
 kolibri/backend/pytorch/nn/distance/hyperbolic.py,sha256=rhOcNwYeFbz1uHjxVK0wyII6ozp2tFHRXImgzIp3HBU,3718
 kolibri/backend/pytorch/trainers/__init__.py,sha256=M6sO42oCF2_NWSHDxdvsBCWSp0Eab29G4Bv2kYDmevA,169
 kolibri/backend/pytorch/trainers/language_model_trainer.py,sha256=vChlkumM2JeHpftDQaaG-6qmchjLE6Mexx4kceJNoAg,17302
-kolibri/backend/pytorch/trainers/trainer.py,sha256=DwymYiNbOkh1cnQGnDLEEcZ5_r_ESZspYekvOm_x5ow,39933
+kolibri/backend/pytorch/trainers/trainer.py,sha256=BojVij7nPKAtARJ5cjRiekKX89O6fRZjyFZIHdDj0mo,40149
 kolibri/backend/pytorch/trainers/plugins/__init__.py,sha256=2NQzrZssYUq_ORl-5ypKCvYPIRjlRFS7dV1ab70HTB8,1092
 kolibri/backend/pytorch/trainers/plugins/base.py,sha256=tNEdF2k8K8-Zzmgncuj5SyE1VbzUzOsL-7pOPpyDP1o,8498
 kolibri/backend/pytorch/trainers/plugins/metric_records.py,sha256=sPvYyte8JhZB0fNtFFm8mBPJW37dP2ZpS0PQLuCSQoc,4386
 kolibri/backend/pytorch/trainers/plugins/functional/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kolibri/backend/pytorch/trainers/plugins/functional/anneal_on_plateau.py,sha256=zJTSlWh3DY82PQvv_IqQGWYRsfZhshs2tlzdhGu1A5E,4279
 kolibri/backend/pytorch/trainers/plugins/functional/checkpoints.py,sha256=px9eQtw71w7UcjrIRAke9bP0KMtK2hHSmx4xyWITD_w,1340
 kolibri/backend/pytorch/trainers/plugins/functional/linear_scheduler.py,sha256=M1pnnbenZBCeAQsfWW7xs3DVsH9TWrlB24HZ6k2-89s,2389
@@ -769,12 +769,12 @@
 tests/synthesizer/losses/test_conditional_loss.py,sha256=0M-0-jADLCloslFs13GBqpLch_qvH7hatu3VvnaebhE,1128
 tests/synthesizer/losses/test_gradient_penalty.py,sha256=59gDBEWqfW91QiijmW1oAZJNY_r0T8lu2CINX-z_bhU,812
 tests/synthesizer/models/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 tests/synthesizer/models/test_critic.py,sha256=A3Kgay2o4n0HkbIu9n1TDxRMw8G37r3HLdhb2qh0eSk,1214
 tests/synthesizer/models/test_generator.py,sha256=RI3E5_RKcCxnMSN4y0am6ar4ey-pxp5DQ8_LhHXa4ZQ,4972
 tests/synthesizer/synthesizer/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 tests/synthesizer/synthesizer/test_synthesizer.py,sha256=qfsM8Okg8bW8V5NTKe657OiBFc7xKcD2dvkbqFm3_qg,4090
-kolibri_light-0.3.0.dist-info/LICENCE.txt,sha256=eKw0ToK5-JtbuPy1tofBiXFxGgk1zhq5x0mB7gnTxc8,34572
-kolibri_light-0.3.0.dist-info/METADATA,sha256=hklliuiowLHWEyfopOQf3aHR2iFvFUMFVw__bgKF23I,4840
-kolibri_light-0.3.0.dist-info/WHEEL,sha256=yQN5g4mg4AybRjkgi-9yy4iQEFibGQmlz78Pik5Or-A,92
-kolibri_light-0.3.0.dist-info/top_level.txt,sha256=yZ09x7U41HE_HCr8pIum9-4eicynuHE26_L6DqI97b8,14
-kolibri_light-0.3.0.dist-info/RECORD,,
+kolibri_light-0.3.1.dist-info/LICENCE.txt,sha256=eKw0ToK5-JtbuPy1tofBiXFxGgk1zhq5x0mB7gnTxc8,34572
+kolibri_light-0.3.1.dist-info/METADATA,sha256=XDzmJzjKTqaSYbWIRxEsVBZQpPeXhuvJPV9rp_lvhqE,4840
+kolibri_light-0.3.1.dist-info/WHEEL,sha256=yQN5g4mg4AybRjkgi-9yy4iQEFibGQmlz78Pik5Or-A,92
+kolibri_light-0.3.1.dist-info/top_level.txt,sha256=yZ09x7U41HE_HCr8pIum9-4eicynuHE26_L6DqI97b8,14
+kolibri_light-0.3.1.dist-info/RECORD,,
```

