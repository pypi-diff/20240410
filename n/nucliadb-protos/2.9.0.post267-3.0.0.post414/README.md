# Comparing `tmp/nucliadb_protos-2.9.0.post267-py3-none-any.whl.zip` & `tmp/nucliadb_protos-3.0.0.post414-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,41 +1,47 @@
-Zip file size: 90717 bytes, number of entries: 39
--rw-r--r--  2.0 unx        0 b- defN 23-May-15 13:40 nucliadb_protos/__init__.py
--rw-r--r--  2.0 unx     5005 b- defN 23-May-15 13:40 nucliadb_protos/audit_pb2.py
--rw-r--r--  2.0 unx     9871 b- defN 23-May-15 13:40 nucliadb_protos/audit_pb2.pyi
--rw-r--r--  2.0 unx     3332 b- defN 23-May-15 13:40 nucliadb_protos/dataset_pb2.py
--rw-r--r--  2.0 unx     8855 b- defN 23-May-15 13:40 nucliadb_protos/dataset_pb2.pyi
--rw-r--r--  2.0 unx     7790 b- defN 23-May-15 13:40 nucliadb_protos/knowledgebox_pb2.py
--rw-r--r--  2.0 unx    21745 b- defN 23-May-15 13:40 nucliadb_protos/knowledgebox_pb2.pyi
--rw-r--r--  2.0 unx    18500 b- defN 23-May-15 13:40 nucliadb_protos/nodereader_pb2.py
--rw-r--r--  2.0 unx    55239 b- defN 23-May-15 13:40 nucliadb_protos/nodereader_pb2.pyi
--rw-r--r--  2.0 unx    27422 b- defN 23-May-15 13:40 nucliadb_protos/nodereader_pb2_grpc.py
--rw-r--r--  2.0 unx     8103 b- defN 23-May-15 13:40 nucliadb_protos/nodereader_pb2_grpc.pyi
--rw-r--r--  2.0 unx    11071 b- defN 23-May-15 13:40 nucliadb_protos/noderesources_pb2.py
--rw-r--r--  2.0 unx    32020 b- defN 23-May-15 13:40 nucliadb_protos/noderesources_pb2.pyi
--rw-r--r--  2.0 unx     1649 b- defN 23-May-15 13:40 nucliadb_protos/nodesidecar_pb2.py
--rw-r--r--  2.0 unx     1799 b- defN 23-May-15 13:40 nucliadb_protos/nodesidecar_pb2.pyi
--rw-r--r--  2.0 unx     2676 b- defN 23-May-15 13:40 nucliadb_protos/nodesidecar_pb2_grpc.py
--rw-r--r--  2.0 unx     1556 b- defN 23-May-15 13:40 nucliadb_protos/nodesidecar_pb2_grpc.pyi
--rw-r--r--  2.0 unx     5553 b- defN 23-May-15 13:40 nucliadb_protos/nodewriter_pb2.py
--rw-r--r--  2.0 unx    10675 b- defN 23-May-15 13:40 nucliadb_protos/nodewriter_pb2.pyi
--rw-r--r--  2.0 unx    27404 b- defN 23-May-15 13:40 nucliadb_protos/nodewriter_pb2_grpc.py
--rw-r--r--  2.0 unx     7260 b- defN 23-May-15 13:40 nucliadb_protos/nodewriter_pb2_grpc.pyi
--rw-r--r--  2.0 unx        0 b- defN 23-May-15 13:40 nucliadb_protos/py.typed
--rw-r--r--  2.0 unx    27613 b- defN 23-May-15 13:40 nucliadb_protos/resources_pb2.py
--rw-r--r--  2.0 unx    80568 b- defN 23-May-15 13:40 nucliadb_protos/resources_pb2.pyi
--rw-r--r--  2.0 unx    11475 b- defN 23-May-15 13:40 nucliadb_protos/train_pb2.py
--rw-r--r--  2.0 unx    28365 b- defN 23-May-15 13:40 nucliadb_protos/train_pb2.pyi
--rw-r--r--  2.0 unx    13970 b- defN 23-May-15 13:40 nucliadb_protos/train_pb2_grpc.py
--rw-r--r--  2.0 unx     8941 b- defN 23-May-15 13:40 nucliadb_protos/train_pb2_grpc.pyi
--rw-r--r--  2.0 unx     6674 b- defN 23-May-15 13:40 nucliadb_protos/utils_pb2.py
--rw-r--r--  2.0 unx    20355 b- defN 23-May-15 13:40 nucliadb_protos/utils_pb2.pyi
--rw-r--r--  2.0 unx    29383 b- defN 23-May-15 13:40 nucliadb_protos/writer_pb2.py
--rw-r--r--  2.0 unx    77734 b- defN 23-May-15 13:40 nucliadb_protos/writer_pb2.pyi
--rw-r--r--  2.0 unx    59091 b- defN 23-May-15 13:40 nucliadb_protos/writer_pb2_grpc.py
--rw-r--r--  2.0 unx    18295 b- defN 23-May-15 13:40 nucliadb_protos/writer_pb2_grpc.pyi
--rw-r--r--  2.0 unx      381 b- defN 23-May-15 13:42 nucliadb_protos-2.9.0.post267.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-May-15 13:42 nucliadb_protos-2.9.0.post267.dist-info/WHEEL
--rw-r--r--  2.0 unx       16 b- defN 23-May-15 13:42 nucliadb_protos-2.9.0.post267.dist-info/top_level.txt
--rw-r--r--  2.0 unx        1 b- defN 23-May-15 13:40 nucliadb_protos-2.9.0.post267.dist-info/zip-safe
--rw-rw-r--  2.0 unx     3536 b- defN 23-May-15 13:42 nucliadb_protos-2.9.0.post267.dist-info/RECORD
-39 files, 654015 bytes uncompressed, 85005 bytes compressed:  87.0%
+Zip file size: 107693 bytes, number of entries: 45
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-10 13:42 nucliadb_protos/__init__.py
+-rw-r--r--  2.0 unx     5672 b- defN 24-Apr-10 13:42 nucliadb_protos/audit_pb2.py
+-rw-r--r--  2.0 unx    11653 b- defN 24-Apr-10 13:42 nucliadb_protos/audit_pb2.pyi
+-rw-r--r--  2.0 unx     5708 b- defN 24-Apr-10 13:42 nucliadb_protos/dataset_pb2.py
+-rw-r--r--  2.0 unx    14791 b- defN 24-Apr-10 13:42 nucliadb_protos/dataset_pb2.pyi
+-rw-r--r--  2.0 unx    12384 b- defN 24-Apr-10 13:42 nucliadb_protos/knowledgebox_pb2.py
+-rw-r--r--  2.0 unx    30186 b- defN 24-Apr-10 13:42 nucliadb_protos/knowledgebox_pb2.pyi
+-rw-r--r--  2.0 unx     1152 b- defN 24-Apr-10 13:42 nucliadb_protos/migrations_pb2.py
+-rw-r--r--  2.0 unx      968 b- defN 24-Apr-10 13:42 nucliadb_protos/migrations_pb2.pyi
+-rw-r--r--  2.0 unx    22751 b- defN 24-Apr-10 13:42 nucliadb_protos/nodereader_pb2.py
+-rw-r--r--  2.0 unx    61401 b- defN 24-Apr-10 13:42 nucliadb_protos/nodereader_pb2.pyi
+-rw-r--r--  2.0 unx    27532 b- defN 24-Apr-10 13:42 nucliadb_protos/nodereader_pb2_grpc.py
+-rw-r--r--  2.0 unx    12819 b- defN 24-Apr-10 13:42 nucliadb_protos/nodereader_pb2_grpc.pyi
+-rw-r--r--  2.0 unx    12672 b- defN 24-Apr-10 13:42 nucliadb_protos/noderesources_pb2.py
+-rw-r--r--  2.0 unx    33608 b- defN 24-Apr-10 13:42 nucliadb_protos/noderesources_pb2.pyi
+-rw-r--r--  2.0 unx     5583 b- defN 24-Apr-10 13:42 nucliadb_protos/nodewriter_pb2.py
+-rw-r--r--  2.0 unx    10730 b- defN 24-Apr-10 13:42 nucliadb_protos/nodewriter_pb2.pyi
+-rw-r--r--  2.0 unx    19087 b- defN 24-Apr-10 13:42 nucliadb_protos/nodewriter_pb2_grpc.py
+-rw-r--r--  2.0 unx     8412 b- defN 24-Apr-10 13:42 nucliadb_protos/nodewriter_pb2_grpc.pyi
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-10 13:42 nucliadb_protos/py.typed
+-rw-r--r--  2.0 unx     4528 b- defN 24-Apr-10 13:42 nucliadb_protos/replication_pb2.py
+-rw-r--r--  2.0 unx     8433 b- defN 24-Apr-10 13:42 nucliadb_protos/replication_pb2.pyi
+-rw-r--r--  2.0 unx     6379 b- defN 24-Apr-10 13:42 nucliadb_protos/replication_pb2_grpc.py
+-rw-r--r--  2.0 unx     3904 b- defN 24-Apr-10 13:42 nucliadb_protos/replication_pb2_grpc.pyi
+-rw-r--r--  2.0 unx    35647 b- defN 24-Apr-10 13:42 nucliadb_protos/resources_pb2.py
+-rw-r--r--  2.0 unx    96135 b- defN 24-Apr-10 13:42 nucliadb_protos/resources_pb2.pyi
+-rw-r--r--  2.0 unx     2192 b- defN 24-Apr-10 13:42 nucliadb_protos/standalone_pb2.py
+-rw-r--r--  2.0 unx     2712 b- defN 24-Apr-10 13:42 nucliadb_protos/standalone_pb2.pyi
+-rw-r--r--  2.0 unx     4407 b- defN 24-Apr-10 13:42 nucliadb_protos/standalone_pb2_grpc.py
+-rw-r--r--  2.0 unx     2129 b- defN 24-Apr-10 13:42 nucliadb_protos/standalone_pb2_grpc.pyi
+-rw-r--r--  2.0 unx    12223 b- defN 24-Apr-10 13:42 nucliadb_protos/train_pb2.py
+-rw-r--r--  2.0 unx    29135 b- defN 24-Apr-10 13:42 nucliadb_protos/train_pb2.pyi
+-rw-r--r--  2.0 unx    13970 b- defN 24-Apr-10 13:42 nucliadb_protos/train_pb2_grpc.py
+-rw-r--r--  2.0 unx    12020 b- defN 24-Apr-10 13:42 nucliadb_protos/train_pb2_grpc.pyi
+-rw-r--r--  2.0 unx     6683 b- defN 24-Apr-10 13:42 nucliadb_protos/utils_pb2.py
+-rw-r--r--  2.0 unx    18828 b- defN 24-Apr-10 13:42 nucliadb_protos/utils_pb2.pyi
+-rw-r--r--  2.0 unx    33587 b- defN 24-Apr-10 13:42 nucliadb_protos/writer_pb2.py
+-rw-r--r--  2.0 unx    82205 b- defN 24-Apr-10 13:42 nucliadb_protos/writer_pb2.pyi
+-rw-r--r--  2.0 unx    52287 b- defN 24-Apr-10 13:42 nucliadb_protos/writer_pb2_grpc.py
+-rw-r--r--  2.0 unx    25555 b- defN 24-Apr-10 13:42 nucliadb_protos/writer_pb2_grpc.pyi
+-rw-r--r--  2.0 unx      332 b- defN 24-Apr-10 13:44 nucliadb_protos-3.0.0.post414.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-10 13:44 nucliadb_protos-3.0.0.post414.dist-info/WHEEL
+-rw-r--r--  2.0 unx       16 b- defN 24-Apr-10 13:44 nucliadb_protos-3.0.0.post414.dist-info/top_level.txt
+-rw-r--r--  2.0 unx        1 b- defN 24-Apr-10 13:43 nucliadb_protos-3.0.0.post414.dist-info/zip-safe
+-rw-rw-r--  2.0 unx     4093 b- defN 24-Apr-10 13:44 nucliadb_protos-3.0.0.post414.dist-info/RECORD
+45 files, 754602 bytes uncompressed, 101103 bytes compressed:  86.6%
```

## zipnote {}

```diff
@@ -15,14 +15,20 @@
 
 Filename: nucliadb_protos/knowledgebox_pb2.py
 Comment: 
 
 Filename: nucliadb_protos/knowledgebox_pb2.pyi
 Comment: 
 
+Filename: nucliadb_protos/migrations_pb2.py
+Comment: 
+
+Filename: nucliadb_protos/migrations_pb2.pyi
+Comment: 
+
 Filename: nucliadb_protos/nodereader_pb2.py
 Comment: 
 
 Filename: nucliadb_protos/nodereader_pb2.pyi
 Comment: 
 
 Filename: nucliadb_protos/nodereader_pb2_grpc.py
@@ -33,47 +39,59 @@
 
 Filename: nucliadb_protos/noderesources_pb2.py
 Comment: 
 
 Filename: nucliadb_protos/noderesources_pb2.pyi
 Comment: 
 
-Filename: nucliadb_protos/nodesidecar_pb2.py
+Filename: nucliadb_protos/nodewriter_pb2.py
 Comment: 
 
-Filename: nucliadb_protos/nodesidecar_pb2.pyi
+Filename: nucliadb_protos/nodewriter_pb2.pyi
 Comment: 
 
-Filename: nucliadb_protos/nodesidecar_pb2_grpc.py
+Filename: nucliadb_protos/nodewriter_pb2_grpc.py
 Comment: 
 
-Filename: nucliadb_protos/nodesidecar_pb2_grpc.pyi
+Filename: nucliadb_protos/nodewriter_pb2_grpc.pyi
 Comment: 
 
-Filename: nucliadb_protos/nodewriter_pb2.py
+Filename: nucliadb_protos/py.typed
 Comment: 
 
-Filename: nucliadb_protos/nodewriter_pb2.pyi
+Filename: nucliadb_protos/replication_pb2.py
 Comment: 
 
-Filename: nucliadb_protos/nodewriter_pb2_grpc.py
+Filename: nucliadb_protos/replication_pb2.pyi
 Comment: 
 
-Filename: nucliadb_protos/nodewriter_pb2_grpc.pyi
+Filename: nucliadb_protos/replication_pb2_grpc.py
 Comment: 
 
-Filename: nucliadb_protos/py.typed
+Filename: nucliadb_protos/replication_pb2_grpc.pyi
 Comment: 
 
 Filename: nucliadb_protos/resources_pb2.py
 Comment: 
 
 Filename: nucliadb_protos/resources_pb2.pyi
 Comment: 
 
+Filename: nucliadb_protos/standalone_pb2.py
+Comment: 
+
+Filename: nucliadb_protos/standalone_pb2.pyi
+Comment: 
+
+Filename: nucliadb_protos/standalone_pb2_grpc.py
+Comment: 
+
+Filename: nucliadb_protos/standalone_pb2_grpc.pyi
+Comment: 
+
 Filename: nucliadb_protos/train_pb2.py
 Comment: 
 
 Filename: nucliadb_protos/train_pb2.pyi
 Comment: 
 
 Filename: nucliadb_protos/train_pb2_grpc.py
@@ -96,23 +114,23 @@
 
 Filename: nucliadb_protos/writer_pb2_grpc.py
 Comment: 
 
 Filename: nucliadb_protos/writer_pb2_grpc.pyi
 Comment: 
 
-Filename: nucliadb_protos-2.9.0.post267.dist-info/METADATA
+Filename: nucliadb_protos-3.0.0.post414.dist-info/METADATA
 Comment: 
 
-Filename: nucliadb_protos-2.9.0.post267.dist-info/WHEEL
+Filename: nucliadb_protos-3.0.0.post414.dist-info/WHEEL
 Comment: 
 
-Filename: nucliadb_protos-2.9.0.post267.dist-info/top_level.txt
+Filename: nucliadb_protos-3.0.0.post414.dist-info/top_level.txt
 Comment: 
 
-Filename: nucliadb_protos-2.9.0.post267.dist-info/zip-safe
+Filename: nucliadb_protos-3.0.0.post414.dist-info/zip-safe
 Comment: 
 
-Filename: nucliadb_protos-2.9.0.post267.dist-info/RECORD
+Filename: nucliadb_protos-3.0.0.post414.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## nucliadb_protos/audit_pb2.py

```diff
@@ -1,15 +1,16 @@
 # -*- coding: utf-8 -*-
 # Generated by the protocol buffer compiler.  DO NOT EDIT!
 # source: nucliadb_protos/audit.proto
+# Protobuf Python Version: 4.25.0
 """Generated protocol buffer code."""
-from google.protobuf.internal import builder as _builder
 from google.protobuf import descriptor as _descriptor
 from google.protobuf import descriptor_pool as _descriptor_pool
 from google.protobuf import symbol_database as _symbol_database
+from google.protobuf.internal import builder as _builder
 # @@protoc_insertion_point(imports)
 
 _sym_db = _symbol_database.Default()
 
 
 from google.protobuf import timestamp_pb2 as google_dot_protobuf_dot_timestamp__pb2
 from nucliadb_protos import nodereader_pb2 as nucliadb__protos_dot_nodereader__pb2
@@ -28,31 +29,33 @@
 from nucliadb_protos import resources_pb2 as nucliadb__protos_dot_resources__pb2
 try:
   nucliadb__protos_dot_utils__pb2 = nucliadb__protos_dot_resources__pb2.nucliadb__protos_dot_utils__pb2
 except AttributeError:
   nucliadb__protos_dot_utils__pb2 = nucliadb__protos_dot_resources__pb2.nucliadb_protos.utils_pb2
 
 
-DESCRIPTOR = _descriptor_pool.Default().AddSerializedFile(b'\n\x1bnucliadb_protos/audit.proto\x1a\x1fgoogle/protobuf/timestamp.proto\x1a nucliadb_protos/nodereader.proto\x1a\x1fnucliadb_protos/resources.proto\"\xde\x01\n\nAuditField\x12\'\n\x06\x61\x63tion\x18\x01 \x01(\x0e\x32\x17.AuditField.FieldAction\x12\x0c\n\x04size\x18\x02 \x01(\x05\x12\x16\n\nsize_delta\x18\x03 \x01(\x05\x42\x02\x18\x01\x12\x10\n\x08\x66ield_id\x18\x04 \x01(\t\x12(\n\nfield_type\x18\x05 \x01(\x0e\x32\x14.resources.FieldType\x12\x10\n\x08\x66ilename\x18\x06 \x01(\t\"3\n\x0b\x46ieldAction\x12\t\n\x05\x41\x44\x44\x45\x44\x10\x00\x12\x0c\n\x08MODIFIED\x10\x01\x12\x0b\n\x07\x44\x45LETED\x10\x02\"F\n\x11\x41uditShardCounter\x12\r\n\x05shard\x18\x01 \x01(\t\x12\x12\n\nparagraphs\x18\x02 \x01(\x03\x12\x0e\n\x06\x66ields\x18\x03 \x01(\x03\"4\n\x0e\x41uditKBCounter\x12\x12\n\nparagraphs\x18\x02 \x01(\x03\x12\x0e\n\x06\x66ields\x18\x03 \x01(\x03\"\xf1\x04\n\x0c\x41uditRequest\x12%\n\x04type\x18\x01 \x01(\x0e\x32\x17.AuditRequest.AuditType\x12\x0c\n\x04kbid\x18\x02 \x01(\t\x12\x0e\n\x06userid\x18\x04 \x01(\t\x12(\n\x04time\x18\x05 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\x0e\n\x06\x66ields\x18\x06 \x03(\t\x12)\n\x06search\x18\x07 \x01(\x0b\x32\x19.nodereader.SearchRequest\x12\x0e\n\x06timeit\x18\x08 \x01(\x02\x12\x0e\n\x06origin\x18\t \x01(\t\x12\x0b\n\x03rid\x18\n \x01(\t\x12\x0c\n\x04task\x18\x0b \x01(\t\x12\x11\n\tresources\x18\x0c \x01(\x05\x12*\n\x0e\x66ield_metadata\x18\r \x03(\x0b\x32\x12.resources.FieldID\x12!\n\x0c\x66ields_audit\x18\x0e \x03(\x0b\x32\x0b.AuditField\x12#\n\x07\x63ounter\x18\x0f \x01(\x0b\x32\x12.AuditShardCounter\x12 \n\x0b\x63lient_type\x18\x10 \x01(\x0e\x32\x0b.ClientType\x12\x10\n\x08trace_id\x18\x11 \x01(\t\x12#\n\nkb_counter\x18\x12 \x01(\x0b\x32\x0f.AuditKBCounter\"\x9b\x01\n\tAuditType\x12\x0b\n\x07VISITED\x10\x00\x12\x0c\n\x08MODIFIED\x10\x01\x12\x0b\n\x07\x44\x45LETED\x10\x02\x12\x07\n\x03NEW\x10\x03\x12\x0b\n\x07STARTED\x10\x04\x12\x0b\n\x07STOPPED\x10\x05\x12\n\n\x06SEARCH\x10\x06\x12\r\n\tPROCESSED\x10\x07\x12\x0e\n\nKB_DELETED\x10\x08\x12\x0b\n\x07SUGGEST\x10\t\x12\x0b\n\x07INDEXED\x10\n*\\\n\nClientType\x12\x07\n\x03\x41PI\x10\x00\x12\x07\n\x03WEB\x10\x01\x12\n\n\x06WIDGET\x10\x02\x12\x0b\n\x07\x44\x45SKTOP\x10\x03\x12\r\n\tDASHBOARD\x10\x04\x12\x14\n\x10\x43HROME_EXTENSION\x10\x05\x62\x06proto3')
+DESCRIPTOR = _descriptor_pool.Default().AddSerializedFile(b'\n\x1bnucliadb_protos/audit.proto\x1a\x1fgoogle/protobuf/timestamp.proto\x1a nucliadb_protos/nodereader.proto\x1a\x1fnucliadb_protos/resources.proto\"\xde\x01\n\nAuditField\x12\'\n\x06\x61\x63tion\x18\x01 \x01(\x0e\x32\x17.AuditField.FieldAction\x12\x0c\n\x04size\x18\x02 \x01(\x05\x12\x16\n\nsize_delta\x18\x03 \x01(\x05\x42\x02\x18\x01\x12\x10\n\x08\x66ield_id\x18\x04 \x01(\t\x12(\n\nfield_type\x18\x05 \x01(\x0e\x32\x14.resources.FieldType\x12\x10\n\x08\x66ilename\x18\x06 \x01(\t\"3\n\x0b\x46ieldAction\x12\t\n\x05\x41\x44\x44\x45\x44\x10\x00\x12\x0c\n\x08MODIFIED\x10\x01\x12\x0b\n\x07\x44\x45LETED\x10\x02\"4\n\x0e\x41uditKBCounter\x12\x12\n\nparagraphs\x18\x02 \x01(\x03\x12\x0e\n\x06\x66ields\x18\x03 \x01(\x03\"+\n\x0b\x43hatContext\x12\x0e\n\x06\x61uthor\x18\x01 \x01(\t\x12\x0c\n\x04text\x18\x02 \x01(\t\"\xa9\x01\n\tChatAudit\x12\x10\n\x08question\x18\x01 \x01(\t\x12\x13\n\x06\x61nswer\x18\x02 \x01(\tH\x00\x88\x01\x01\x12\x1f\n\x12rephrased_question\x18\x03 \x01(\tH\x01\x88\x01\x01\x12\x1d\n\x07\x63ontext\x18\x04 \x03(\x0b\x32\x0c.ChatContext\x12\x13\n\x0blearning_id\x18\x05 \x01(\tB\t\n\x07_answerB\x15\n\x13_rephrased_question\"\x81\x05\n\x0c\x41uditRequest\x12%\n\x04type\x18\x01 \x01(\x0e\x32\x17.AuditRequest.AuditType\x12\x0c\n\x04kbid\x18\x02 \x01(\t\x12\x0e\n\x06userid\x18\x04 \x01(\t\x12(\n\x04time\x18\x05 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\x0e\n\x06\x66ields\x18\x06 \x03(\t\x12)\n\x06search\x18\x07 \x01(\x0b\x32\x19.nodereader.SearchRequest\x12\x0e\n\x06timeit\x18\x08 \x01(\x02\x12\x0e\n\x06origin\x18\t \x01(\t\x12\x0b\n\x03rid\x18\n \x01(\t\x12\x0c\n\x04task\x18\x0b \x01(\t\x12\x11\n\tresources\x18\x0c \x01(\x05\x12*\n\x0e\x66ield_metadata\x18\r \x03(\x0b\x32\x12.resources.FieldID\x12!\n\x0c\x66ields_audit\x18\x0e \x03(\x0b\x32\x0b.AuditField\x12 \n\x0b\x63lient_type\x18\x10 \x01(\x0e\x32\x0b.ClientType\x12\x10\n\x08trace_id\x18\x11 \x01(\t\x12#\n\nkb_counter\x18\x12 \x01(\x0b\x32\x0f.AuditKBCounter\x12\x18\n\x04\x63hat\x18\x13 \x01(\x0b\x32\n.ChatAudit\x12\x0f\n\x07success\x18\x14 \x01(\x08\"\xa5\x01\n\tAuditType\x12\x0b\n\x07VISITED\x10\x00\x12\x0c\n\x08MODIFIED\x10\x01\x12\x0b\n\x07\x44\x45LETED\x10\x02\x12\x07\n\x03NEW\x10\x03\x12\x0b\n\x07STARTED\x10\x04\x12\x0b\n\x07STOPPED\x10\x05\x12\n\n\x06SEARCH\x10\x06\x12\r\n\tPROCESSED\x10\x07\x12\x0e\n\nKB_DELETED\x10\x08\x12\x0b\n\x07SUGGEST\x10\t\x12\x0b\n\x07INDEXED\x10\n\x12\x08\n\x04\x43HAT\x10\x0b*\\\n\nClientType\x12\x07\n\x03\x41PI\x10\x00\x12\x07\n\x03WEB\x10\x01\x12\n\n\x06WIDGET\x10\x02\x12\x0b\n\x07\x44\x45SKTOP\x10\x03\x12\r\n\tDASHBOARD\x10\x04\x12\x14\n\x10\x43HROME_EXTENSION\x10\x05\x62\x06proto3')
 
-_builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, globals())
-_builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, 'nucliadb_protos.audit_pb2', globals())
+_globals = globals()
+_builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, _globals)
+_builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, 'nucliadb_protos.audit_pb2', _globals)
 if _descriptor._USE_C_DESCRIPTORS == False:
-
   DESCRIPTOR._options = None
-  _AUDITFIELD.fields_by_name['size_delta']._options = None
-  _AUDITFIELD.fields_by_name['size_delta']._serialized_options = b'\030\001'
-  _CLIENTTYPE._serialized_start=1110
-  _CLIENTTYPE._serialized_end=1202
-  _AUDITFIELD._serialized_start=132
-  _AUDITFIELD._serialized_end=354
-  _AUDITFIELD_FIELDACTION._serialized_start=303
-  _AUDITFIELD_FIELDACTION._serialized_end=354
-  _AUDITSHARDCOUNTER._serialized_start=356
-  _AUDITSHARDCOUNTER._serialized_end=426
-  _AUDITKBCOUNTER._serialized_start=428
-  _AUDITKBCOUNTER._serialized_end=480
-  _AUDITREQUEST._serialized_start=483
-  _AUDITREQUEST._serialized_end=1108
-  _AUDITREQUEST_AUDITTYPE._serialized_start=953
-  _AUDITREQUEST_AUDITTYPE._serialized_end=1108
+  _globals['_AUDITFIELD'].fields_by_name['size_delta']._options = None
+  _globals['_AUDITFIELD'].fields_by_name['size_delta']._serialized_options = b'\030\001'
+  _globals['_CLIENTTYPE']._serialized_start=1271
+  _globals['_CLIENTTYPE']._serialized_end=1363
+  _globals['_AUDITFIELD']._serialized_start=132
+  _globals['_AUDITFIELD']._serialized_end=354
+  _globals['_AUDITFIELD_FIELDACTION']._serialized_start=303
+  _globals['_AUDITFIELD_FIELDACTION']._serialized_end=354
+  _globals['_AUDITKBCOUNTER']._serialized_start=356
+  _globals['_AUDITKBCOUNTER']._serialized_end=408
+  _globals['_CHATCONTEXT']._serialized_start=410
+  _globals['_CHATCONTEXT']._serialized_end=453
+  _globals['_CHATAUDIT']._serialized_start=456
+  _globals['_CHATAUDIT']._serialized_end=625
+  _globals['_AUDITREQUEST']._serialized_start=628
+  _globals['_AUDITREQUEST']._serialized_end=1269
+  _globals['_AUDITREQUEST_AUDITTYPE']._serialized_start=1104
+  _globals['_AUDITREQUEST_AUDITTYPE']._serialized_end=1269
 # @@protoc_insertion_point(module_scope)
```

## nucliadb_protos/audit_pb2.pyi

```diff
@@ -48,15 +48,15 @@
 class AuditField(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _FieldAction:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _FieldActionEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[AuditField._FieldAction.ValueType], builtins.type):  # noqa: F821
+    class _FieldActionEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[AuditField._FieldAction.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         ADDED: AuditField._FieldAction.ValueType  # 0
         MODIFIED: AuditField._FieldAction.ValueType  # 1
         DELETED: AuditField._FieldAction.ValueType  # 2
 
     class FieldAction(_FieldAction, metaclass=_FieldActionEnumTypeWrapper): ...
     ADDED: AuditField.FieldAction.ValueType  # 0
@@ -87,105 +87,137 @@
         filename: builtins.str = ...,
     ) -> None: ...
     def ClearField(self, field_name: typing_extensions.Literal["action", b"action", "field_id", b"field_id", "field_type", b"field_type", "filename", b"filename", "size", b"size", "size_delta", b"size_delta"]) -> None: ...
 
 global___AuditField = AuditField
 
 @typing_extensions.final
-class AuditShardCounter(google.protobuf.message.Message):
+class AuditKBCounter(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
-    SHARD_FIELD_NUMBER: builtins.int
     PARAGRAPHS_FIELD_NUMBER: builtins.int
     FIELDS_FIELD_NUMBER: builtins.int
-    shard: builtins.str
-    """XXX deprecated class"""
     paragraphs: builtins.int
     fields: builtins.int
     def __init__(
         self,
         *,
-        shard: builtins.str = ...,
         paragraphs: builtins.int = ...,
         fields: builtins.int = ...,
     ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["fields", b"fields", "paragraphs", b"paragraphs", "shard", b"shard"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["fields", b"fields", "paragraphs", b"paragraphs"]) -> None: ...
 
-global___AuditShardCounter = AuditShardCounter
+global___AuditKBCounter = AuditKBCounter
 
 @typing_extensions.final
-class AuditKBCounter(google.protobuf.message.Message):
+class ChatContext(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
-    PARAGRAPHS_FIELD_NUMBER: builtins.int
-    FIELDS_FIELD_NUMBER: builtins.int
-    paragraphs: builtins.int
-    fields: builtins.int
+    AUTHOR_FIELD_NUMBER: builtins.int
+    TEXT_FIELD_NUMBER: builtins.int
+    author: builtins.str
+    text: builtins.str
     def __init__(
         self,
         *,
-        paragraphs: builtins.int = ...,
-        fields: builtins.int = ...,
+        author: builtins.str = ...,
+        text: builtins.str = ...,
     ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["fields", b"fields", "paragraphs", b"paragraphs"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["author", b"author", "text", b"text"]) -> None: ...
 
-global___AuditKBCounter = AuditKBCounter
+global___ChatContext = ChatContext
+
+@typing_extensions.final
+class ChatAudit(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    QUESTION_FIELD_NUMBER: builtins.int
+    ANSWER_FIELD_NUMBER: builtins.int
+    REPHRASED_QUESTION_FIELD_NUMBER: builtins.int
+    CONTEXT_FIELD_NUMBER: builtins.int
+    LEARNING_ID_FIELD_NUMBER: builtins.int
+    question: builtins.str
+    answer: builtins.str
+    rephrased_question: builtins.str
+    @property
+    def context(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___ChatContext]: ...
+    learning_id: builtins.str
+    def __init__(
+        self,
+        *,
+        question: builtins.str = ...,
+        answer: builtins.str | None = ...,
+        rephrased_question: builtins.str | None = ...,
+        context: collections.abc.Iterable[global___ChatContext] | None = ...,
+        learning_id: builtins.str = ...,
+    ) -> None: ...
+    def HasField(self, field_name: typing_extensions.Literal["_answer", b"_answer", "_rephrased_question", b"_rephrased_question", "answer", b"answer", "rephrased_question", b"rephrased_question"]) -> builtins.bool: ...
+    def ClearField(self, field_name: typing_extensions.Literal["_answer", b"_answer", "_rephrased_question", b"_rephrased_question", "answer", b"answer", "context", b"context", "learning_id", b"learning_id", "question", b"question", "rephrased_question", b"rephrased_question"]) -> None: ...
+    @typing.overload
+    def WhichOneof(self, oneof_group: typing_extensions.Literal["_answer", b"_answer"]) -> typing_extensions.Literal["answer"] | None: ...
+    @typing.overload
+    def WhichOneof(self, oneof_group: typing_extensions.Literal["_rephrased_question", b"_rephrased_question"]) -> typing_extensions.Literal["rephrased_question"] | None: ...
+
+global___ChatAudit = ChatAudit
 
 @typing_extensions.final
 class AuditRequest(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _AuditType:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _AuditTypeEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[AuditRequest._AuditType.ValueType], builtins.type):  # noqa: F821
+    class _AuditTypeEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[AuditRequest._AuditType.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         VISITED: AuditRequest._AuditType.ValueType  # 0
         MODIFIED: AuditRequest._AuditType.ValueType  # 1
         DELETED: AuditRequest._AuditType.ValueType  # 2
         NEW: AuditRequest._AuditType.ValueType  # 3
         STARTED: AuditRequest._AuditType.ValueType  # 4
         STOPPED: AuditRequest._AuditType.ValueType  # 5
         SEARCH: AuditRequest._AuditType.ValueType  # 6
         PROCESSED: AuditRequest._AuditType.ValueType  # 7
         KB_DELETED: AuditRequest._AuditType.ValueType  # 8
         SUGGEST: AuditRequest._AuditType.ValueType  # 9
         INDEXED: AuditRequest._AuditType.ValueType  # 10
+        CHAT: AuditRequest._AuditType.ValueType  # 11
 
     class AuditType(_AuditType, metaclass=_AuditTypeEnumTypeWrapper): ...
     VISITED: AuditRequest.AuditType.ValueType  # 0
     MODIFIED: AuditRequest.AuditType.ValueType  # 1
     DELETED: AuditRequest.AuditType.ValueType  # 2
     NEW: AuditRequest.AuditType.ValueType  # 3
     STARTED: AuditRequest.AuditType.ValueType  # 4
     STOPPED: AuditRequest.AuditType.ValueType  # 5
     SEARCH: AuditRequest.AuditType.ValueType  # 6
     PROCESSED: AuditRequest.AuditType.ValueType  # 7
     KB_DELETED: AuditRequest.AuditType.ValueType  # 8
     SUGGEST: AuditRequest.AuditType.ValueType  # 9
     INDEXED: AuditRequest.AuditType.ValueType  # 10
+    CHAT: AuditRequest.AuditType.ValueType  # 11
 
     TYPE_FIELD_NUMBER: builtins.int
     KBID_FIELD_NUMBER: builtins.int
     USERID_FIELD_NUMBER: builtins.int
     TIME_FIELD_NUMBER: builtins.int
     FIELDS_FIELD_NUMBER: builtins.int
     SEARCH_FIELD_NUMBER: builtins.int
     TIMEIT_FIELD_NUMBER: builtins.int
     ORIGIN_FIELD_NUMBER: builtins.int
     RID_FIELD_NUMBER: builtins.int
     TASK_FIELD_NUMBER: builtins.int
     RESOURCES_FIELD_NUMBER: builtins.int
     FIELD_METADATA_FIELD_NUMBER: builtins.int
     FIELDS_AUDIT_FIELD_NUMBER: builtins.int
-    COUNTER_FIELD_NUMBER: builtins.int
     CLIENT_TYPE_FIELD_NUMBER: builtins.int
     TRACE_ID_FIELD_NUMBER: builtins.int
     KB_COUNTER_FIELD_NUMBER: builtins.int
+    CHAT_FIELD_NUMBER: builtins.int
+    SUCCESS_FIELD_NUMBER: builtins.int
     type: global___AuditRequest.AuditType.ValueType
     kbid: builtins.str
     userid: builtins.str
     @property
     def time(self) -> google.protobuf.timestamp_pb2.Timestamp: ...
     @property
     def fields(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
@@ -196,20 +228,21 @@
     rid: builtins.str
     task: builtins.str
     resources: builtins.int
     @property
     def field_metadata(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[nucliadb_protos.resources_pb2.FieldID]: ...
     @property
     def fields_audit(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___AuditField]: ...
-    @property
-    def counter(self) -> global___AuditShardCounter: ...
     client_type: global___ClientType.ValueType
     trace_id: builtins.str
     @property
     def kb_counter(self) -> global___AuditKBCounter: ...
+    @property
+    def chat(self) -> global___ChatAudit: ...
+    success: builtins.bool
     def __init__(
         self,
         *,
         type: global___AuditRequest.AuditType.ValueType = ...,
         kbid: builtins.str = ...,
         userid: builtins.str = ...,
         time: google.protobuf.timestamp_pb2.Timestamp | None = ...,
@@ -218,16 +251,17 @@
         timeit: builtins.float = ...,
         origin: builtins.str = ...,
         rid: builtins.str = ...,
         task: builtins.str = ...,
         resources: builtins.int = ...,
         field_metadata: collections.abc.Iterable[nucliadb_protos.resources_pb2.FieldID] | None = ...,
         fields_audit: collections.abc.Iterable[global___AuditField] | None = ...,
-        counter: global___AuditShardCounter | None = ...,
         client_type: global___ClientType.ValueType = ...,
         trace_id: builtins.str = ...,
         kb_counter: global___AuditKBCounter | None = ...,
+        chat: global___ChatAudit | None = ...,
+        success: builtins.bool = ...,
     ) -> None: ...
-    def HasField(self, field_name: typing_extensions.Literal["counter", b"counter", "kb_counter", b"kb_counter", "search", b"search", "time", b"time"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["client_type", b"client_type", "counter", b"counter", "field_metadata", b"field_metadata", "fields", b"fields", "fields_audit", b"fields_audit", "kb_counter", b"kb_counter", "kbid", b"kbid", "origin", b"origin", "resources", b"resources", "rid", b"rid", "search", b"search", "task", b"task", "time", b"time", "timeit", b"timeit", "trace_id", b"trace_id", "type", b"type", "userid", b"userid"]) -> None: ...
+    def HasField(self, field_name: typing_extensions.Literal["chat", b"chat", "kb_counter", b"kb_counter", "search", b"search", "time", b"time"]) -> builtins.bool: ...
+    def ClearField(self, field_name: typing_extensions.Literal["chat", b"chat", "client_type", b"client_type", "field_metadata", b"field_metadata", "fields", b"fields", "fields_audit", b"fields_audit", "kb_counter", b"kb_counter", "kbid", b"kbid", "origin", b"origin", "resources", b"resources", "rid", b"rid", "search", b"search", "success", b"success", "task", b"task", "time", b"time", "timeit", b"timeit", "trace_id", b"trace_id", "type", b"type", "userid", b"userid"]) -> None: ...
 
 global___AuditRequest = AuditRequest
```

## nucliadb_protos/dataset_pb2.py

```diff
@@ -1,47 +1,64 @@
 # -*- coding: utf-8 -*-
 # Generated by the protocol buffer compiler.  DO NOT EDIT!
 # source: nucliadb_protos/dataset.proto
+# Protobuf Python Version: 4.25.0
 """Generated protocol buffer code."""
-from google.protobuf.internal import builder as _builder
 from google.protobuf import descriptor as _descriptor
 from google.protobuf import descriptor_pool as _descriptor_pool
 from google.protobuf import symbol_database as _symbol_database
+from google.protobuf.internal import builder as _builder
 # @@protoc_insertion_point(imports)
 
 _sym_db = _symbol_database.Default()
 
 
 
 
-DESCRIPTOR = _descriptor_pool.Default().AddSerializedFile(b'\n\x1dnucliadb_protos/dataset.proto\x12\x07\x64\x61taset\"\x83\x01\n\x08TrainSet\x12\x1f\n\x04type\x18\x01 \x01(\x0e\x32\x11.dataset.TaskType\x12(\n\x06\x66ilter\x18\x02 \x01(\x0b\x32\x18.dataset.TrainSet.Filter\x12\x12\n\nbatch_size\x18\x03 \x01(\x05\x1a\x18\n\x06\x46ilter\x12\x0e\n\x06labels\x18\x01 \x03(\t\"L\n\x05Label\x12\x10\n\x08labelset\x18\x01 \x01(\t\x12\r\n\x05label\x18\x02 \x01(\t\x12\"\n\x06origin\x18\x03 \x01(\x0e\x32\x12.dataset.LabelFrom\"9\n\tTextLabel\x12\x0c\n\x04text\x18\x01 \x01(\t\x12\x1e\n\x06labels\x18\x02 \x03(\x0b\x32\x0e.dataset.Label\"F\n\x16MultipleTextSameLabels\x12\x0c\n\x04text\x18\x01 \x03(\t\x12\x1e\n\x06labels\x18\x02 \x03(\x0b\x32\x0e.dataset.Label\"<\n\x18\x46ieldClassificationBatch\x12 \n\x04\x64\x61ta\x18\x01 \x03(\x0b\x32\x12.dataset.TextLabel\"@\n\x1cParagraphClassificationBatch\x12 \n\x04\x64\x61ta\x18\x01 \x03(\x0b\x32\x12.dataset.TextLabel\"L\n\x1bSentenceClassificationBatch\x12-\n\x04\x64\x61ta\x18\x01 \x03(\x0b\x32\x1f.dataset.MultipleTextSameLabels\"4\n\x14TokensClassification\x12\r\n\x05token\x18\x01 \x03(\t\x12\r\n\x05label\x18\x02 \x03(\t\"G\n\x18TokenClassificationBatch\x12+\n\x04\x64\x61ta\x18\x01 \x03(\x0b\x32\x1d.dataset.TokensClassification*y\n\x08TaskType\x12\x18\n\x14\x46IELD_CLASSIFICATION\x10\x00\x12\x1c\n\x18PARAGRAPH_CLASSIFICATION\x10\x01\x12\x1b\n\x17SENTENCE_CLASSIFICATION\x10\x02\x12\x18\n\x14TOKEN_CLASSIFICATION\x10\x03*3\n\tLabelFrom\x12\r\n\tPARAGRAPH\x10\x00\x12\t\n\x05\x46IELD\x10\x01\x12\x0c\n\x08RESOURCE\x10\x02\x62\x06proto3')
+DESCRIPTOR = _descriptor_pool.Default().AddSerializedFile(b'\n\x1dnucliadb_protos/dataset.proto\x12\x07\x64\x61taset\"\x83\x01\n\x08TrainSet\x12\x1f\n\x04type\x18\x01 \x01(\x0e\x32\x11.dataset.TaskType\x12(\n\x06\x66ilter\x18\x02 \x01(\x0b\x32\x18.dataset.TrainSet.Filter\x12\x12\n\nbatch_size\x18\x03 \x01(\x05\x1a\x18\n\x06\x46ilter\x12\x0e\n\x06labels\x18\x01 \x03(\t\"L\n\x05Label\x12\x10\n\x08labelset\x18\x01 \x01(\t\x12\r\n\x05label\x18\x02 \x01(\t\x12\"\n\x06origin\x18\x03 \x01(\x0e\x32\x12.dataset.LabelFrom\"9\n\tTextLabel\x12\x0c\n\x04text\x18\x01 \x01(\t\x12\x1e\n\x06labels\x18\x02 \x03(\x0b\x32\x0e.dataset.Label\"F\n\x16MultipleTextSameLabels\x12\x0c\n\x04text\x18\x01 \x03(\t\x12\x1e\n\x06labels\x18\x02 \x03(\x0b\x32\x0e.dataset.Label\"<\n\x18\x46ieldClassificationBatch\x12 \n\x04\x64\x61ta\x18\x01 \x03(\x0b\x32\x12.dataset.TextLabel\"@\n\x1cParagraphClassificationBatch\x12 \n\x04\x64\x61ta\x18\x01 \x03(\x0b\x32\x12.dataset.TextLabel\"L\n\x1bSentenceClassificationBatch\x12-\n\x04\x64\x61ta\x18\x01 \x03(\x0b\x32\x1f.dataset.MultipleTextSameLabels\"4\n\x14TokensClassification\x12\r\n\x05token\x18\x01 \x03(\t\x12\r\n\x05label\x18\x02 \x03(\t\"G\n\x18TokenClassificationBatch\x12+\n\x04\x64\x61ta\x18\x01 \x03(\x0b\x32\x1d.dataset.TokensClassification\";\n\x13ImageClassification\x12\x12\n\nselections\x18\x01 \x01(\t\x12\x10\n\x08page_uri\x18\x02 \x01(\t\"F\n\x18ImageClassificationBatch\x12*\n\x04\x64\x61ta\x18\x01 \x03(\x0b\x32\x1c.dataset.ImageClassification\"/\n\x13ParagraphStreamItem\x12\n\n\x02id\x18\x01 \x01(\t\x12\x0c\n\x04text\x18\x02 \x01(\t\"E\n\x17ParagraphStreamingBatch\x12*\n\x04\x64\x61ta\x18\x01 \x03(\x0b\x32\x1c.dataset.ParagraphStreamItem\">\n\x08Question\x12\x0c\n\x04text\x18\x01 \x01(\t\x12\x10\n\x08language\x18\x02 \x01(\t\x12\x12\n\nparagraphs\x18\x03 \x03(\t\"<\n\x06\x41nswer\x12\x0c\n\x04text\x18\x01 \x01(\t\x12\x10\n\x08language\x18\x02 \x01(\t\x12\x12\n\nparagraphs\x18\x03 \x03(\t\"{\n\x18QuestionAnswerStreamItem\x12#\n\x08question\x18\x01 \x01(\x0b\x32\x11.dataset.Question\x12\x1f\n\x06\x61nswer\x18\x02 \x01(\x0b\x32\x0f.dataset.Answer\x12\x19\n\x11\x63\x61ncelled_by_user\x18\x03 \x01(\x08\"O\n\x1cQuestionAnswerStreamingBatch\x12/\n\x04\x64\x61ta\x18\x01 \x03(\x0b\x32!.dataset.QuestionAnswerStreamItem*\xcb\x01\n\x08TaskType\x12\x18\n\x14\x46IELD_CLASSIFICATION\x10\x00\x12\x1c\n\x18PARAGRAPH_CLASSIFICATION\x10\x01\x12\x1b\n\x17SENTENCE_CLASSIFICATION\x10\x02\x12\x18\n\x14TOKEN_CLASSIFICATION\x10\x03\x12\x18\n\x14IMAGE_CLASSIFICATION\x10\x04\x12\x17\n\x13PARAGRAPH_STREAMING\x10\x05\x12\x1d\n\x19QUESTION_ANSWER_STREAMING\x10\x06*3\n\tLabelFrom\x12\r\n\tPARAGRAPH\x10\x00\x12\t\n\x05\x46IELD\x10\x01\x12\x0c\n\x08RESOURCE\x10\x02\x62\x06proto3')
 
-_builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, globals())
-_builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, 'nucliadb_protos.dataset_pb2', globals())
+_globals = globals()
+_builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, _globals)
+_builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, 'nucliadb_protos.dataset_pb2', _globals)
 if _descriptor._USE_C_DESCRIPTORS == False:
-
   DESCRIPTOR._options = None
-  _TASKTYPE._serialized_start=718
-  _TASKTYPE._serialized_end=839
-  _LABELFROM._serialized_start=841
-  _LABELFROM._serialized_end=892
-  _TRAINSET._serialized_start=43
-  _TRAINSET._serialized_end=174
-  _TRAINSET_FILTER._serialized_start=150
-  _TRAINSET_FILTER._serialized_end=174
-  _LABEL._serialized_start=176
-  _LABEL._serialized_end=252
-  _TEXTLABEL._serialized_start=254
-  _TEXTLABEL._serialized_end=311
-  _MULTIPLETEXTSAMELABELS._serialized_start=313
-  _MULTIPLETEXTSAMELABELS._serialized_end=383
-  _FIELDCLASSIFICATIONBATCH._serialized_start=385
-  _FIELDCLASSIFICATIONBATCH._serialized_end=445
-  _PARAGRAPHCLASSIFICATIONBATCH._serialized_start=447
-  _PARAGRAPHCLASSIFICATIONBATCH._serialized_end=511
-  _SENTENCECLASSIFICATIONBATCH._serialized_start=513
-  _SENTENCECLASSIFICATIONBATCH._serialized_end=589
-  _TOKENSCLASSIFICATION._serialized_start=591
-  _TOKENSCLASSIFICATION._serialized_end=643
-  _TOKENCLASSIFICATIONBATCH._serialized_start=645
-  _TOKENCLASSIFICATIONBATCH._serialized_end=716
+  _globals['_TASKTYPE']._serialized_start=1304
+  _globals['_TASKTYPE']._serialized_end=1507
+  _globals['_LABELFROM']._serialized_start=1509
+  _globals['_LABELFROM']._serialized_end=1560
+  _globals['_TRAINSET']._serialized_start=43
+  _globals['_TRAINSET']._serialized_end=174
+  _globals['_TRAINSET_FILTER']._serialized_start=150
+  _globals['_TRAINSET_FILTER']._serialized_end=174
+  _globals['_LABEL']._serialized_start=176
+  _globals['_LABEL']._serialized_end=252
+  _globals['_TEXTLABEL']._serialized_start=254
+  _globals['_TEXTLABEL']._serialized_end=311
+  _globals['_MULTIPLETEXTSAMELABELS']._serialized_start=313
+  _globals['_MULTIPLETEXTSAMELABELS']._serialized_end=383
+  _globals['_FIELDCLASSIFICATIONBATCH']._serialized_start=385
+  _globals['_FIELDCLASSIFICATIONBATCH']._serialized_end=445
+  _globals['_PARAGRAPHCLASSIFICATIONBATCH']._serialized_start=447
+  _globals['_PARAGRAPHCLASSIFICATIONBATCH']._serialized_end=511
+  _globals['_SENTENCECLASSIFICATIONBATCH']._serialized_start=513
+  _globals['_SENTENCECLASSIFICATIONBATCH']._serialized_end=589
+  _globals['_TOKENSCLASSIFICATION']._serialized_start=591
+  _globals['_TOKENSCLASSIFICATION']._serialized_end=643
+  _globals['_TOKENCLASSIFICATIONBATCH']._serialized_start=645
+  _globals['_TOKENCLASSIFICATIONBATCH']._serialized_end=716
+  _globals['_IMAGECLASSIFICATION']._serialized_start=718
+  _globals['_IMAGECLASSIFICATION']._serialized_end=777
+  _globals['_IMAGECLASSIFICATIONBATCH']._serialized_start=779
+  _globals['_IMAGECLASSIFICATIONBATCH']._serialized_end=849
+  _globals['_PARAGRAPHSTREAMITEM']._serialized_start=851
+  _globals['_PARAGRAPHSTREAMITEM']._serialized_end=898
+  _globals['_PARAGRAPHSTREAMINGBATCH']._serialized_start=900
+  _globals['_PARAGRAPHSTREAMINGBATCH']._serialized_end=969
+  _globals['_QUESTION']._serialized_start=971
+  _globals['_QUESTION']._serialized_end=1033
+  _globals['_ANSWER']._serialized_start=1035
+  _globals['_ANSWER']._serialized_end=1095
+  _globals['_QUESTIONANSWERSTREAMITEM']._serialized_start=1097
+  _globals['_QUESTIONANSWERSTREAMITEM']._serialized_end=1220
+  _globals['_QUESTIONANSWERSTREAMINGBATCH']._serialized_start=1222
+  _globals['_QUESTIONANSWERSTREAMINGBATCH']._serialized_end=1301
 # @@protoc_insertion_point(module_scope)
```

## nucliadb_protos/dataset_pb2.pyi

```diff
@@ -24,22 +24,28 @@
 
 class _TaskTypeEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[_TaskType.ValueType], builtins.type):
     DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
     FIELD_CLASSIFICATION: _TaskType.ValueType  # 0
     PARAGRAPH_CLASSIFICATION: _TaskType.ValueType  # 1
     SENTENCE_CLASSIFICATION: _TaskType.ValueType  # 2
     TOKEN_CLASSIFICATION: _TaskType.ValueType  # 3
+    IMAGE_CLASSIFICATION: _TaskType.ValueType  # 4
+    PARAGRAPH_STREAMING: _TaskType.ValueType  # 5
+    QUESTION_ANSWER_STREAMING: _TaskType.ValueType  # 6
 
 class TaskType(_TaskType, metaclass=_TaskTypeEnumTypeWrapper):
     """Train API V2"""
 
 FIELD_CLASSIFICATION: TaskType.ValueType  # 0
 PARAGRAPH_CLASSIFICATION: TaskType.ValueType  # 1
 SENTENCE_CLASSIFICATION: TaskType.ValueType  # 2
 TOKEN_CLASSIFICATION: TaskType.ValueType  # 3
+IMAGE_CLASSIFICATION: TaskType.ValueType  # 4
+PARAGRAPH_STREAMING: TaskType.ValueType  # 5
+QUESTION_ANSWER_STREAMING: TaskType.ValueType  # 6
 global___TaskType = TaskType
 
 class _LabelFrom:
     ValueType = typing.NewType("ValueType", builtins.int)
     V: typing_extensions.TypeAlias = ValueType
 
 class _LabelFromEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[_LabelFrom.ValueType], builtins.type):
@@ -231,7 +237,159 @@
         self,
         *,
         data: collections.abc.Iterable[global___TokensClassification] | None = ...,
     ) -> None: ...
     def ClearField(self, field_name: typing_extensions.Literal["data", b"data"]) -> None: ...
 
 global___TokenClassificationBatch = TokenClassificationBatch
+
+@typing_extensions.final
+class ImageClassification(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    SELECTIONS_FIELD_NUMBER: builtins.int
+    PAGE_URI_FIELD_NUMBER: builtins.int
+    selections: builtins.str
+    page_uri: builtins.str
+    def __init__(
+        self,
+        *,
+        selections: builtins.str = ...,
+        page_uri: builtins.str = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["page_uri", b"page_uri", "selections", b"selections"]) -> None: ...
+
+global___ImageClassification = ImageClassification
+
+@typing_extensions.final
+class ImageClassificationBatch(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    DATA_FIELD_NUMBER: builtins.int
+    @property
+    def data(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___ImageClassification]: ...
+    def __init__(
+        self,
+        *,
+        data: collections.abc.Iterable[global___ImageClassification] | None = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["data", b"data"]) -> None: ...
+
+global___ImageClassificationBatch = ImageClassificationBatch
+
+@typing_extensions.final
+class ParagraphStreamItem(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    ID_FIELD_NUMBER: builtins.int
+    TEXT_FIELD_NUMBER: builtins.int
+    id: builtins.str
+    text: builtins.str
+    def __init__(
+        self,
+        *,
+        id: builtins.str = ...,
+        text: builtins.str = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["id", b"id", "text", b"text"]) -> None: ...
+
+global___ParagraphStreamItem = ParagraphStreamItem
+
+@typing_extensions.final
+class ParagraphStreamingBatch(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    DATA_FIELD_NUMBER: builtins.int
+    @property
+    def data(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___ParagraphStreamItem]: ...
+    def __init__(
+        self,
+        *,
+        data: collections.abc.Iterable[global___ParagraphStreamItem] | None = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["data", b"data"]) -> None: ...
+
+global___ParagraphStreamingBatch = ParagraphStreamingBatch
+
+@typing_extensions.final
+class Question(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    TEXT_FIELD_NUMBER: builtins.int
+    LANGUAGE_FIELD_NUMBER: builtins.int
+    PARAGRAPHS_FIELD_NUMBER: builtins.int
+    text: builtins.str
+    language: builtins.str
+    @property
+    def paragraphs(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
+    def __init__(
+        self,
+        *,
+        text: builtins.str = ...,
+        language: builtins.str = ...,
+        paragraphs: collections.abc.Iterable[builtins.str] | None = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["language", b"language", "paragraphs", b"paragraphs", "text", b"text"]) -> None: ...
+
+global___Question = Question
+
+@typing_extensions.final
+class Answer(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    TEXT_FIELD_NUMBER: builtins.int
+    LANGUAGE_FIELD_NUMBER: builtins.int
+    PARAGRAPHS_FIELD_NUMBER: builtins.int
+    text: builtins.str
+    language: builtins.str
+    @property
+    def paragraphs(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
+    def __init__(
+        self,
+        *,
+        text: builtins.str = ...,
+        language: builtins.str = ...,
+        paragraphs: collections.abc.Iterable[builtins.str] | None = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["language", b"language", "paragraphs", b"paragraphs", "text", b"text"]) -> None: ...
+
+global___Answer = Answer
+
+@typing_extensions.final
+class QuestionAnswerStreamItem(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    QUESTION_FIELD_NUMBER: builtins.int
+    ANSWER_FIELD_NUMBER: builtins.int
+    CANCELLED_BY_USER_FIELD_NUMBER: builtins.int
+    @property
+    def question(self) -> global___Question: ...
+    @property
+    def answer(self) -> global___Answer: ...
+    cancelled_by_user: builtins.bool
+    def __init__(
+        self,
+        *,
+        question: global___Question | None = ...,
+        answer: global___Answer | None = ...,
+        cancelled_by_user: builtins.bool = ...,
+    ) -> None: ...
+    def HasField(self, field_name: typing_extensions.Literal["answer", b"answer", "question", b"question"]) -> builtins.bool: ...
+    def ClearField(self, field_name: typing_extensions.Literal["answer", b"answer", "cancelled_by_user", b"cancelled_by_user", "question", b"question"]) -> None: ...
+
+global___QuestionAnswerStreamItem = QuestionAnswerStreamItem
+
+@typing_extensions.final
+class QuestionAnswerStreamingBatch(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    DATA_FIELD_NUMBER: builtins.int
+    @property
+    def data(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___QuestionAnswerStreamItem]: ...
+    def __init__(
+        self,
+        *,
+        data: collections.abc.Iterable[global___QuestionAnswerStreamItem] | None = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["data", b"data"]) -> None: ...
+
+global___QuestionAnswerStreamingBatch = QuestionAnswerStreamingBatch
```

## nucliadb_protos/knowledgebox_pb2.py

```diff
@@ -1,89 +1,114 @@
 # -*- coding: utf-8 -*-
 # Generated by the protocol buffer compiler.  DO NOT EDIT!
 # source: nucliadb_protos/knowledgebox.proto
+# Protobuf Python Version: 4.25.0
 """Generated protocol buffer code."""
-from google.protobuf.internal import builder as _builder
 from google.protobuf import descriptor as _descriptor
 from google.protobuf import descriptor_pool as _descriptor_pool
 from google.protobuf import symbol_database as _symbol_database
+from google.protobuf.internal import builder as _builder
 # @@protoc_insertion_point(imports)
 
 _sym_db = _symbol_database.Default()
 
 
 from nucliadb_protos import utils_pb2 as nucliadb__protos_dot_utils__pb2
 
 from nucliadb_protos.utils_pb2 import *
 
-DESCRIPTOR = _descriptor_pool.Default().AddSerializedFile(b'\n\"nucliadb_protos/knowledgebox.proto\x12\x0cknowledgebox\x1a\x1bnucliadb_protos/utils.proto\",\n\x0eKnowledgeBoxID\x12\x0c\n\x04slug\x18\x01 \x01(\t\x12\x0c\n\x04uuid\x18\x02 \x01(\t\"\x96\x01\n\x0cKnowledgeBox\x12\x0c\n\x04slug\x18\x01 \x01(\t\x12\x0c\n\x04uuid\x18\x02 \x01(\t\x12\x38\n\x06status\x18\x03 \x01(\x0e\x32(.knowledgebox.KnowledgeBoxResponseStatus\x12\x30\n\x06\x63onfig\x18\x04 \x01(\x0b\x32 .knowledgebox.KnowledgeBoxConfig\"\x92\x01\n\x12KnowledgeBoxConfig\x12\r\n\x05title\x18\x01 \x01(\t\x12\x13\n\x0b\x64\x65scription\x18\x02 \x01(\t\x12\x17\n\x0f\x65nabled_filters\x18\x03 \x03(\t\x12\x18\n\x10\x65nabled_insights\x18\x04 \x03(\t\x12\x0c\n\x04slug\x18\x05 \x01(\t\x12\x17\n\x0f\x64isable_vectors\x18\x06 \x01(\x08\"\x91\x01\n\x0fKnowledgeBoxNew\x12\x0c\n\x04slug\x18\x01 \x01(\t\x12\x30\n\x06\x63onfig\x18\x02 \x01(\x0b\x32 .knowledgebox.KnowledgeBoxConfig\x12\x11\n\tforceuuid\x18\x03 \x01(\t\x12+\n\nsimilarity\x18\x04 \x01(\x0e\x32\x17.utils.VectorSimilarity\"a\n\x17NewKnowledgeBoxResponse\x12\x38\n\x06status\x18\x01 \x01(\x0e\x32(.knowledgebox.KnowledgeBoxResponseStatus\x12\x0c\n\x04uuid\x18\x02 \x01(\t\"$\n\x12KnowledgeBoxPrefix\x12\x0e\n\x06prefix\x18\x01 \x01(\t\"b\n\x12KnowledgeBoxUpdate\x12\x0c\n\x04slug\x18\x01 \x01(\t\x12\x0c\n\x04uuid\x18\x02 \x01(\t\x12\x30\n\x06\x63onfig\x18\x03 \x01(\x0b\x32 .knowledgebox.KnowledgeBoxConfig\"d\n\x1aUpdateKnowledgeBoxResponse\x12\x38\n\x06status\x18\x01 \x01(\x0e\x32(.knowledgebox.KnowledgeBoxResponseStatus\x12\x0c\n\x04uuid\x18\x02 \x01(\t\"\x18\n\x16GCKnowledgeBoxResponse\"V\n\x1a\x44\x65leteKnowledgeBoxResponse\x12\x38\n\x06status\x18\x01 \x01(\x0e\x32(.knowledgebox.KnowledgeBoxResponseStatus\"\x1d\n\x1b\x43leanedKnowledgeBoxResponse\"B\n\x05Label\x12\r\n\x05title\x18\x02 \x01(\t\x12\x0f\n\x07related\x18\x03 \x01(\t\x12\x0c\n\x04text\x18\x04 \x01(\t\x12\x0b\n\x03uri\x18\x05 \x01(\t\"\xd0\x01\n\x08LabelSet\x12\r\n\x05title\x18\x01 \x01(\t\x12\r\n\x05\x63olor\x18\x02 \x01(\t\x12#\n\x06labels\x18\x03 \x03(\x0b\x32\x13.knowledgebox.Label\x12\x10\n\x08multiple\x18\x04 \x01(\x08\x12\x31\n\x04kind\x18\x05 \x03(\x0e\x32#.knowledgebox.LabelSet.LabelSetKind\"<\n\x0cLabelSetKind\x12\r\n\tRESOURCES\x10\x00\x12\x0e\n\nPARAGRAPHS\x10\x01\x12\r\n\tSENTENCES\x10\x02\"\x87\x01\n\x06Labels\x12\x34\n\x08labelset\x18\x01 \x03(\x0b\x32\".knowledgebox.Labels.LabelsetEntry\x1aG\n\rLabelsetEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12%\n\x05value\x18\x02 \x01(\x0b\x32\x16.knowledgebox.LabelSet:\x02\x38\x01\"L\n\x06\x45ntity\x12\r\n\x05value\x18\x02 \x01(\t\x12\x12\n\nrepresents\x18\x04 \x03(\t\x12\x0e\n\x06merged\x18\x03 \x01(\x08\x12\x0f\n\x07\x64\x65leted\x18\x05 \x01(\x08\"D\n\x14\x45ntitiesGroupSummary\x12\r\n\x05title\x18\x02 \x01(\t\x12\r\n\x05\x63olor\x18\x03 \x01(\t\x12\x0e\n\x06\x63ustom\x18\x04 \x01(\x08\"\xc1\x01\n\rEntitiesGroup\x12;\n\x08\x65ntities\x18\x01 \x03(\x0b\x32).knowledgebox.EntitiesGroup.EntitiesEntry\x12\r\n\x05title\x18\x02 \x01(\t\x12\r\n\x05\x63olor\x18\x03 \x01(\t\x12\x0e\n\x06\x63ustom\x18\x04 \x01(\x08\x1a\x45\n\rEntitiesEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12#\n\x05value\x18\x02 \x01(\x0b\x32\x14.knowledgebox.Entity:\x02\x38\x01\"0\n\x15\x44\x65letedEntitiesGroups\x12\x17\n\x0f\x65ntities_groups\x18\x01 \x03(\t\"K\n\tVectorSet\x12\x11\n\tdimension\x18\x01 \x01(\x05\x12+\n\nsimilarity\x18\x02 \x01(\x0e\x32\x17.utils.VectorSimilarity\"\x96\x01\n\nVectorSets\x12<\n\nvectorsets\x18\x01 \x03(\x0b\x32(.knowledgebox.VectorSets.VectorsetsEntry\x1aJ\n\x0fVectorsetsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12&\n\x05value\x18\x02 \x01(\x0b\x32\x17.knowledgebox.VectorSet:\x02\x38\x01\" \n\x0cTermSynonyms\x12\x10\n\x08synonyms\x18\x01 \x03(\t\"\x86\x01\n\x08Synonyms\x12\x30\n\x05terms\x18\x01 \x03(\x0b\x32!.knowledgebox.Synonyms.TermsEntry\x1aH\n\nTermsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12)\n\x05value\x18\x02 \x01(\x0b\x32\x1a.knowledgebox.TermSynonyms:\x02\x38\x01*K\n\x1aKnowledgeBoxResponseStatus\x12\x06\n\x02OK\x10\x00\x12\x0c\n\x08\x43ONFLICT\x10\x01\x12\x0c\n\x08NOTFOUND\x10\x02\x12\t\n\x05\x45RROR\x10\x03P\x00\x62\x06proto3')
+DESCRIPTOR = _descriptor_pool.Default().AddSerializedFile(b'\n\"nucliadb_protos/knowledgebox.proto\x12\x0cknowledgebox\x1a\x1bnucliadb_protos/utils.proto\",\n\x0eKnowledgeBoxID\x12\x0c\n\x04slug\x18\x01 \x01(\t\x12\x0c\n\x04uuid\x18\x02 \x01(\t\"\xe9\x01\n\x12KnowledgeBoxConfig\x12\r\n\x05title\x18\x01 \x01(\t\x12\x13\n\x0b\x64\x65scription\x18\x02 \x01(\t\x12\x1b\n\x0f\x65nabled_filters\x18\x03 \x03(\tB\x02\x18\x01\x12\x1c\n\x10\x65nabled_insights\x18\x04 \x03(\tB\x02\x18\x01\x12\x0c\n\x04slug\x18\x05 \x01(\t\x12\x1b\n\x0f\x64isable_vectors\x18\x06 \x01(\x08\x42\x02\x18\x01\x12\x19\n\x11migration_version\x18\x07 \x01(\x03\x12.\n\x0frelease_channel\x18\x08 \x01(\x0e\x32\x15.utils.ReleaseChannel\"\xc4\x02\n\x0fKnowledgeBoxNew\x12\x0c\n\x04slug\x18\x01 \x01(\t\x12\x30\n\x06\x63onfig\x18\x02 \x01(\x0b\x32 .knowledgebox.KnowledgeBoxConfig\x12\x11\n\tforceuuid\x18\x03 \x01(\t\x12+\n\nsimilarity\x18\x04 \x01(\x0e\x32\x17.utils.VectorSimilarity\x12\x1d\n\x10vector_dimension\x18\x05 \x01(\x05H\x00\x88\x01\x01\x12\x1e\n\x11\x64\x65\x66\x61ult_min_score\x18\x06 \x01(\x02H\x01\x88\x01\x01\x12.\n\x0frelease_channel\x18\x07 \x01(\x0e\x32\x15.utils.ReleaseChannel\x12\x17\n\x0flearning_config\x18\x08 \x01(\tB\x13\n\x11_vector_dimensionB\x14\n\x12_default_min_score\"a\n\x17NewKnowledgeBoxResponse\x12\x38\n\x06status\x18\x01 \x01(\x0e\x32(.knowledgebox.KnowledgeBoxResponseStatus\x12\x0c\n\x04uuid\x18\x02 \x01(\t\"b\n\x12KnowledgeBoxUpdate\x12\x0c\n\x04slug\x18\x01 \x01(\t\x12\x0c\n\x04uuid\x18\x02 \x01(\t\x12\x30\n\x06\x63onfig\x18\x03 \x01(\x0b\x32 .knowledgebox.KnowledgeBoxConfig\"d\n\x1aUpdateKnowledgeBoxResponse\x12\x38\n\x06status\x18\x01 \x01(\x0e\x32(.knowledgebox.KnowledgeBoxResponseStatus\x12\x0c\n\x04uuid\x18\x02 \x01(\t\"\x18\n\x16GCKnowledgeBoxResponse\"V\n\x1a\x44\x65leteKnowledgeBoxResponse\x12\x38\n\x06status\x18\x01 \x01(\x0e\x32(.knowledgebox.KnowledgeBoxResponseStatus\"B\n\x05Label\x12\r\n\x05title\x18\x02 \x01(\t\x12\x0f\n\x07related\x18\x03 \x01(\t\x12\x0c\n\x04text\x18\x04 \x01(\t\x12\x0b\n\x03uri\x18\x05 \x01(\t\"\xe0\x01\n\x08LabelSet\x12\r\n\x05title\x18\x01 \x01(\t\x12\r\n\x05\x63olor\x18\x02 \x01(\t\x12#\n\x06labels\x18\x03 \x03(\x0b\x32\x13.knowledgebox.Label\x12\x10\n\x08multiple\x18\x04 \x01(\x08\x12\x31\n\x04kind\x18\x05 \x03(\x0e\x32#.knowledgebox.LabelSet.LabelSetKind\"L\n\x0cLabelSetKind\x12\r\n\tRESOURCES\x10\x00\x12\x0e\n\nPARAGRAPHS\x10\x01\x12\r\n\tSENTENCES\x10\x02\x12\x0e\n\nSELECTIONS\x10\x03\"\x87\x01\n\x06Labels\x12\x34\n\x08labelset\x18\x01 \x03(\x0b\x32\".knowledgebox.Labels.LabelsetEntry\x1aG\n\rLabelsetEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12%\n\x05value\x18\x02 \x01(\x0b\x32\x16.knowledgebox.LabelSet:\x02\x38\x01\"L\n\x06\x45ntity\x12\r\n\x05value\x18\x02 \x01(\t\x12\x12\n\nrepresents\x18\x04 \x03(\t\x12\x0e\n\x06merged\x18\x03 \x01(\x08\x12\x0f\n\x07\x64\x65leted\x18\x05 \x01(\x08\"D\n\x14\x45ntitiesGroupSummary\x12\r\n\x05title\x18\x02 \x01(\t\x12\r\n\x05\x63olor\x18\x03 \x01(\t\x12\x0e\n\x06\x63ustom\x18\x04 \x01(\x08\"\xc1\x01\n\rEntitiesGroup\x12;\n\x08\x65ntities\x18\x01 \x03(\x0b\x32).knowledgebox.EntitiesGroup.EntitiesEntry\x12\r\n\x05title\x18\x02 \x01(\t\x12\r\n\x05\x63olor\x18\x03 \x01(\t\x12\x0e\n\x06\x63ustom\x18\x04 \x01(\x08\x1a\x45\n\rEntitiesEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12#\n\x05value\x18\x02 \x01(\x0b\x32\x14.knowledgebox.Entity:\x02\x38\x01\"0\n\x15\x44\x65letedEntitiesGroups\x12\x17\n\x0f\x65ntities_groups\x18\x01 \x03(\t\"\xaf\x01\n\x0e\x45ntitiesGroups\x12I\n\x0f\x65ntities_groups\x18\x01 \x03(\x0b\x32\x30.knowledgebox.EntitiesGroups.EntitiesGroupsEntry\x1aR\n\x13\x45ntitiesGroupsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12*\n\x05value\x18\x02 \x01(\x0b\x32\x1b.knowledgebox.EntitiesGroup:\x02\x38\x01\"\xf3\x03\n\x19\x45ntityGroupDuplicateIndex\x12T\n\x0f\x65ntities_groups\x18\x01 \x03(\x0b\x32;.knowledgebox.EntityGroupDuplicateIndex.EntitiesGroupsEntry\x1a&\n\x10\x45ntityDuplicates\x12\x12\n\nduplicates\x18\x01 \x03(\t\x1a\xe1\x01\n\x15\x45ntityGroupDuplicates\x12]\n\x08\x65ntities\x18\x01 \x03(\x0b\x32K.knowledgebox.EntityGroupDuplicateIndex.EntityGroupDuplicates.EntitiesEntry\x1ai\n\rEntitiesEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12G\n\x05value\x18\x02 \x01(\x0b\x32\x38.knowledgebox.EntityGroupDuplicateIndex.EntityDuplicates:\x02\x38\x01\x1at\n\x13\x45ntitiesGroupsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12L\n\x05value\x18\x02 \x01(\x0b\x32=.knowledgebox.EntityGroupDuplicateIndex.EntityGroupDuplicates:\x02\x38\x01\"K\n\tVectorSet\x12\x11\n\tdimension\x18\x01 \x01(\x05\x12+\n\nsimilarity\x18\x02 \x01(\x0e\x32\x17.utils.VectorSimilarity\"\x96\x01\n\nVectorSets\x12<\n\nvectorsets\x18\x01 \x03(\x0b\x32(.knowledgebox.VectorSets.VectorsetsEntry\x1aJ\n\x0fVectorsetsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12&\n\x05value\x18\x02 \x01(\x0b\x32\x17.knowledgebox.VectorSet:\x02\x38\x01\" \n\x0cTermSynonyms\x12\x10\n\x08synonyms\x18\x01 \x03(\t\"\x86\x01\n\x08Synonyms\x12\x30\n\x05terms\x18\x01 \x03(\x0b\x32!.knowledgebox.Synonyms.TermsEntry\x1aH\n\nTermsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12)\n\x05value\x18\x02 \x01(\x0b\x32\x1a.knowledgebox.TermSynonyms:\x02\x38\x01\"\xb7\x01\n\x15SemanticModelMetadata\x12\x34\n\x13similarity_function\x18\x01 \x01(\x0e\x32\x17.utils.VectorSimilarity\x12\x1d\n\x10vector_dimension\x18\x02 \x01(\x05H\x00\x88\x01\x01\x12\x1e\n\x11\x64\x65\x66\x61ult_min_score\x18\x03 \x01(\x02H\x01\x88\x01\x01\x42\x13\n\x11_vector_dimensionB\x14\n\x12_default_min_score\"\x8c\x01\n\x0fKBConfiguration\x12\x16\n\x0esemantic_model\x18\x02 \x01(\t\x12\x18\n\x10generative_model\x18\x03 \x01(\t\x12\x11\n\tner_model\x18\x04 \x01(\t\x12\x1b\n\x13\x61nonymization_model\x18\x05 \x01(\t\x12\x17\n\x0fvisual_labeling\x18\x06 \x01(\t*K\n\x1aKnowledgeBoxResponseStatus\x12\x06\n\x02OK\x10\x00\x12\x0c\n\x08\x43ONFLICT\x10\x01\x12\x0c\n\x08NOTFOUND\x10\x02\x12\t\n\x05\x45RROR\x10\x03P\x00\x62\x06proto3')
 
-_builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, globals())
-_builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, 'nucliadb_protos.knowledgebox_pb2', globals())
+_globals = globals()
+_builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, _globals)
+_builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, 'nucliadb_protos.knowledgebox_pb2', _globals)
 if _descriptor._USE_C_DESCRIPTORS == False:
-
   DESCRIPTOR._options = None
-  _LABELS_LABELSETENTRY._options = None
-  _LABELS_LABELSETENTRY._serialized_options = b'8\001'
-  _ENTITIESGROUP_ENTITIESENTRY._options = None
-  _ENTITIESGROUP_ENTITIESENTRY._serialized_options = b'8\001'
-  _VECTORSETS_VECTORSETSENTRY._options = None
-  _VECTORSETS_VECTORSETSENTRY._serialized_options = b'8\001'
-  _SYNONYMS_TERMSENTRY._options = None
-  _SYNONYMS_TERMSENTRY._serialized_options = b'8\001'
-  _KNOWLEDGEBOXRESPONSESTATUS._serialized_start=2273
-  _KNOWLEDGEBOXRESPONSESTATUS._serialized_end=2348
-  _KNOWLEDGEBOXID._serialized_start=81
-  _KNOWLEDGEBOXID._serialized_end=125
-  _KNOWLEDGEBOX._serialized_start=128
-  _KNOWLEDGEBOX._serialized_end=278
-  _KNOWLEDGEBOXCONFIG._serialized_start=281
-  _KNOWLEDGEBOXCONFIG._serialized_end=427
-  _KNOWLEDGEBOXNEW._serialized_start=430
-  _KNOWLEDGEBOXNEW._serialized_end=575
-  _NEWKNOWLEDGEBOXRESPONSE._serialized_start=577
-  _NEWKNOWLEDGEBOXRESPONSE._serialized_end=674
-  _KNOWLEDGEBOXPREFIX._serialized_start=676
-  _KNOWLEDGEBOXPREFIX._serialized_end=712
-  _KNOWLEDGEBOXUPDATE._serialized_start=714
-  _KNOWLEDGEBOXUPDATE._serialized_end=812
-  _UPDATEKNOWLEDGEBOXRESPONSE._serialized_start=814
-  _UPDATEKNOWLEDGEBOXRESPONSE._serialized_end=914
-  _GCKNOWLEDGEBOXRESPONSE._serialized_start=916
-  _GCKNOWLEDGEBOXRESPONSE._serialized_end=940
-  _DELETEKNOWLEDGEBOXRESPONSE._serialized_start=942
-  _DELETEKNOWLEDGEBOXRESPONSE._serialized_end=1028
-  _CLEANEDKNOWLEDGEBOXRESPONSE._serialized_start=1030
-  _CLEANEDKNOWLEDGEBOXRESPONSE._serialized_end=1059
-  _LABEL._serialized_start=1061
-  _LABEL._serialized_end=1127
-  _LABELSET._serialized_start=1130
-  _LABELSET._serialized_end=1338
-  _LABELSET_LABELSETKIND._serialized_start=1278
-  _LABELSET_LABELSETKIND._serialized_end=1338
-  _LABELS._serialized_start=1341
-  _LABELS._serialized_end=1476
-  _LABELS_LABELSETENTRY._serialized_start=1405
-  _LABELS_LABELSETENTRY._serialized_end=1476
-  _ENTITY._serialized_start=1478
-  _ENTITY._serialized_end=1554
-  _ENTITIESGROUPSUMMARY._serialized_start=1556
-  _ENTITIESGROUPSUMMARY._serialized_end=1624
-  _ENTITIESGROUP._serialized_start=1627
-  _ENTITIESGROUP._serialized_end=1820
-  _ENTITIESGROUP_ENTITIESENTRY._serialized_start=1751
-  _ENTITIESGROUP_ENTITIESENTRY._serialized_end=1820
-  _DELETEDENTITIESGROUPS._serialized_start=1822
-  _DELETEDENTITIESGROUPS._serialized_end=1870
-  _VECTORSET._serialized_start=1872
-  _VECTORSET._serialized_end=1947
-  _VECTORSETS._serialized_start=1950
-  _VECTORSETS._serialized_end=2100
-  _VECTORSETS_VECTORSETSENTRY._serialized_start=2026
-  _VECTORSETS_VECTORSETSENTRY._serialized_end=2100
-  _TERMSYNONYMS._serialized_start=2102
-  _TERMSYNONYMS._serialized_end=2134
-  _SYNONYMS._serialized_start=2137
-  _SYNONYMS._serialized_end=2271
-  _SYNONYMS_TERMSENTRY._serialized_start=2199
-  _SYNONYMS_TERMSENTRY._serialized_end=2271
+  _globals['_KNOWLEDGEBOXCONFIG'].fields_by_name['enabled_filters']._options = None
+  _globals['_KNOWLEDGEBOXCONFIG'].fields_by_name['enabled_filters']._serialized_options = b'\030\001'
+  _globals['_KNOWLEDGEBOXCONFIG'].fields_by_name['enabled_insights']._options = None
+  _globals['_KNOWLEDGEBOXCONFIG'].fields_by_name['enabled_insights']._serialized_options = b'\030\001'
+  _globals['_KNOWLEDGEBOXCONFIG'].fields_by_name['disable_vectors']._options = None
+  _globals['_KNOWLEDGEBOXCONFIG'].fields_by_name['disable_vectors']._serialized_options = b'\030\001'
+  _globals['_LABELS_LABELSETENTRY']._options = None
+  _globals['_LABELS_LABELSETENTRY']._serialized_options = b'8\001'
+  _globals['_ENTITIESGROUP_ENTITIESENTRY']._options = None
+  _globals['_ENTITIESGROUP_ENTITIESENTRY']._serialized_options = b'8\001'
+  _globals['_ENTITIESGROUPS_ENTITIESGROUPSENTRY']._options = None
+  _globals['_ENTITIESGROUPS_ENTITIESGROUPSENTRY']._serialized_options = b'8\001'
+  _globals['_ENTITYGROUPDUPLICATEINDEX_ENTITYGROUPDUPLICATES_ENTITIESENTRY']._options = None
+  _globals['_ENTITYGROUPDUPLICATEINDEX_ENTITYGROUPDUPLICATES_ENTITIESENTRY']._serialized_options = b'8\001'
+  _globals['_ENTITYGROUPDUPLICATEINDEX_ENTITIESGROUPSENTRY']._options = None
+  _globals['_ENTITYGROUPDUPLICATEINDEX_ENTITIESGROUPSENTRY']._serialized_options = b'8\001'
+  _globals['_VECTORSETS_VECTORSETSENTRY']._options = None
+  _globals['_VECTORSETS_VECTORSETSENTRY']._serialized_options = b'8\001'
+  _globals['_SYNONYMS_TERMSENTRY']._options = None
+  _globals['_SYNONYMS_TERMSENTRY']._serialized_options = b'8\001'
+  _globals['_KNOWLEDGEBOXRESPONSESTATUS']._serialized_start=3342
+  _globals['_KNOWLEDGEBOXRESPONSESTATUS']._serialized_end=3417
+  _globals['_KNOWLEDGEBOXID']._serialized_start=81
+  _globals['_KNOWLEDGEBOXID']._serialized_end=125
+  _globals['_KNOWLEDGEBOXCONFIG']._serialized_start=128
+  _globals['_KNOWLEDGEBOXCONFIG']._serialized_end=361
+  _globals['_KNOWLEDGEBOXNEW']._serialized_start=364
+  _globals['_KNOWLEDGEBOXNEW']._serialized_end=688
+  _globals['_NEWKNOWLEDGEBOXRESPONSE']._serialized_start=690
+  _globals['_NEWKNOWLEDGEBOXRESPONSE']._serialized_end=787
+  _globals['_KNOWLEDGEBOXUPDATE']._serialized_start=789
+  _globals['_KNOWLEDGEBOXUPDATE']._serialized_end=887
+  _globals['_UPDATEKNOWLEDGEBOXRESPONSE']._serialized_start=889
+  _globals['_UPDATEKNOWLEDGEBOXRESPONSE']._serialized_end=989
+  _globals['_GCKNOWLEDGEBOXRESPONSE']._serialized_start=991
+  _globals['_GCKNOWLEDGEBOXRESPONSE']._serialized_end=1015
+  _globals['_DELETEKNOWLEDGEBOXRESPONSE']._serialized_start=1017
+  _globals['_DELETEKNOWLEDGEBOXRESPONSE']._serialized_end=1103
+  _globals['_LABEL']._serialized_start=1105
+  _globals['_LABEL']._serialized_end=1171
+  _globals['_LABELSET']._serialized_start=1174
+  _globals['_LABELSET']._serialized_end=1398
+  _globals['_LABELSET_LABELSETKIND']._serialized_start=1322
+  _globals['_LABELSET_LABELSETKIND']._serialized_end=1398
+  _globals['_LABELS']._serialized_start=1401
+  _globals['_LABELS']._serialized_end=1536
+  _globals['_LABELS_LABELSETENTRY']._serialized_start=1465
+  _globals['_LABELS_LABELSETENTRY']._serialized_end=1536
+  _globals['_ENTITY']._serialized_start=1538
+  _globals['_ENTITY']._serialized_end=1614
+  _globals['_ENTITIESGROUPSUMMARY']._serialized_start=1616
+  _globals['_ENTITIESGROUPSUMMARY']._serialized_end=1684
+  _globals['_ENTITIESGROUP']._serialized_start=1687
+  _globals['_ENTITIESGROUP']._serialized_end=1880
+  _globals['_ENTITIESGROUP_ENTITIESENTRY']._serialized_start=1811
+  _globals['_ENTITIESGROUP_ENTITIESENTRY']._serialized_end=1880
+  _globals['_DELETEDENTITIESGROUPS']._serialized_start=1882
+  _globals['_DELETEDENTITIESGROUPS']._serialized_end=1930
+  _globals['_ENTITIESGROUPS']._serialized_start=1933
+  _globals['_ENTITIESGROUPS']._serialized_end=2108
+  _globals['_ENTITIESGROUPS_ENTITIESGROUPSENTRY']._serialized_start=2026
+  _globals['_ENTITIESGROUPS_ENTITIESGROUPSENTRY']._serialized_end=2108
+  _globals['_ENTITYGROUPDUPLICATEINDEX']._serialized_start=2111
+  _globals['_ENTITYGROUPDUPLICATEINDEX']._serialized_end=2610
+  _globals['_ENTITYGROUPDUPLICATEINDEX_ENTITYDUPLICATES']._serialized_start=2226
+  _globals['_ENTITYGROUPDUPLICATEINDEX_ENTITYDUPLICATES']._serialized_end=2264
+  _globals['_ENTITYGROUPDUPLICATEINDEX_ENTITYGROUPDUPLICATES']._serialized_start=2267
+  _globals['_ENTITYGROUPDUPLICATEINDEX_ENTITYGROUPDUPLICATES']._serialized_end=2492
+  _globals['_ENTITYGROUPDUPLICATEINDEX_ENTITYGROUPDUPLICATES_ENTITIESENTRY']._serialized_start=2387
+  _globals['_ENTITYGROUPDUPLICATEINDEX_ENTITYGROUPDUPLICATES_ENTITIESENTRY']._serialized_end=2492
+  _globals['_ENTITYGROUPDUPLICATEINDEX_ENTITIESGROUPSENTRY']._serialized_start=2494
+  _globals['_ENTITYGROUPDUPLICATEINDEX_ENTITIESGROUPSENTRY']._serialized_end=2610
+  _globals['_VECTORSET']._serialized_start=2612
+  _globals['_VECTORSET']._serialized_end=2687
+  _globals['_VECTORSETS']._serialized_start=2690
+  _globals['_VECTORSETS']._serialized_end=2840
+  _globals['_VECTORSETS_VECTORSETSENTRY']._serialized_start=2766
+  _globals['_VECTORSETS_VECTORSETSENTRY']._serialized_end=2840
+  _globals['_TERMSYNONYMS']._serialized_start=2842
+  _globals['_TERMSYNONYMS']._serialized_end=2874
+  _globals['_SYNONYMS']._serialized_start=2877
+  _globals['_SYNONYMS']._serialized_end=3011
+  _globals['_SYNONYMS_TERMSENTRY']._serialized_start=2939
+  _globals['_SYNONYMS_TERMSENTRY']._serialized_end=3011
+  _globals['_SEMANTICMODELMETADATA']._serialized_start=3014
+  _globals['_SEMANTICMODELMETADATA']._serialized_end=3197
+  _globals['_KBCONFIGURATION']._serialized_start=3200
+  _globals['_KBCONFIGURATION']._serialized_end=3340
 # @@protoc_insertion_point(module_scope)
```

## nucliadb_protos/knowledgebox_pb2.pyi

```diff
@@ -15,20 +15,22 @@
 if sys.version_info >= (3, 10):
     import typing as typing_extensions
 else:
     import typing_extensions
 from nucliadb_protos.utils_pb2 import (
     COSINE as COSINE,
     DOT as DOT,
+    EXPERIMENTAL as EXPERIMENTAL,
     ExtractedText as ExtractedText,
-    JoinGraph as JoinGraph,
-    JoinGraphEdge as JoinGraphEdge,
     Relation as Relation,
     RelationMetadata as RelationMetadata,
     RelationNode as RelationNode,
+    ReleaseChannel as ReleaseChannel,
+    STABLE as STABLE,
+    Security as Security,
     UserVector as UserVector,
     UserVectorSet as UserVectorSet,
     UserVectors as UserVectors,
     UserVectorsList as UserVectorsList,
     Vector as Vector,
     VectorObject as VectorObject,
     VectorSimilarity as VectorSimilarity,
@@ -73,98 +75,94 @@
         uuid: builtins.str = ...,
     ) -> None: ...
     def ClearField(self, field_name: typing_extensions.Literal["slug", b"slug", "uuid", b"uuid"]) -> None: ...
 
 global___KnowledgeBoxID = KnowledgeBoxID
 
 @typing_extensions.final
-class KnowledgeBox(google.protobuf.message.Message):
-    """GET"""
-
-    DESCRIPTOR: google.protobuf.descriptor.Descriptor
-
-    SLUG_FIELD_NUMBER: builtins.int
-    UUID_FIELD_NUMBER: builtins.int
-    STATUS_FIELD_NUMBER: builtins.int
-    CONFIG_FIELD_NUMBER: builtins.int
-    slug: builtins.str
-    uuid: builtins.str
-    status: global___KnowledgeBoxResponseStatus.ValueType
-    @property
-    def config(self) -> global___KnowledgeBoxConfig: ...
-    def __init__(
-        self,
-        *,
-        slug: builtins.str = ...,
-        uuid: builtins.str = ...,
-        status: global___KnowledgeBoxResponseStatus.ValueType = ...,
-        config: global___KnowledgeBoxConfig | None = ...,
-    ) -> None: ...
-    def HasField(self, field_name: typing_extensions.Literal["config", b"config"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["config", b"config", "slug", b"slug", "status", b"status", "uuid", b"uuid"]) -> None: ...
-
-global___KnowledgeBox = KnowledgeBox
-
-@typing_extensions.final
 class KnowledgeBoxConfig(google.protobuf.message.Message):
+    """CONFIG"""
+
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     TITLE_FIELD_NUMBER: builtins.int
     DESCRIPTION_FIELD_NUMBER: builtins.int
     ENABLED_FILTERS_FIELD_NUMBER: builtins.int
     ENABLED_INSIGHTS_FIELD_NUMBER: builtins.int
     SLUG_FIELD_NUMBER: builtins.int
     DISABLE_VECTORS_FIELD_NUMBER: builtins.int
+    MIGRATION_VERSION_FIELD_NUMBER: builtins.int
+    RELEASE_CHANNEL_FIELD_NUMBER: builtins.int
     title: builtins.str
     description: builtins.str
     @property
     def enabled_filters(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
     @property
     def enabled_insights(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
     slug: builtins.str
     disable_vectors: builtins.bool
+    migration_version: builtins.int
+    release_channel: nucliadb_protos.utils_pb2.ReleaseChannel.ValueType
     def __init__(
         self,
         *,
         title: builtins.str = ...,
         description: builtins.str = ...,
         enabled_filters: collections.abc.Iterable[builtins.str] | None = ...,
         enabled_insights: collections.abc.Iterable[builtins.str] | None = ...,
         slug: builtins.str = ...,
         disable_vectors: builtins.bool = ...,
+        migration_version: builtins.int = ...,
+        release_channel: nucliadb_protos.utils_pb2.ReleaseChannel.ValueType = ...,
     ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["description", b"description", "disable_vectors", b"disable_vectors", "enabled_filters", b"enabled_filters", "enabled_insights", b"enabled_insights", "slug", b"slug", "title", b"title"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["description", b"description", "disable_vectors", b"disable_vectors", "enabled_filters", b"enabled_filters", "enabled_insights", b"enabled_insights", "migration_version", b"migration_version", "release_channel", b"release_channel", "slug", b"slug", "title", b"title"]) -> None: ...
 
 global___KnowledgeBoxConfig = KnowledgeBoxConfig
 
 @typing_extensions.final
 class KnowledgeBoxNew(google.protobuf.message.Message):
     """NEW"""
 
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     SLUG_FIELD_NUMBER: builtins.int
     CONFIG_FIELD_NUMBER: builtins.int
     FORCEUUID_FIELD_NUMBER: builtins.int
     SIMILARITY_FIELD_NUMBER: builtins.int
+    VECTOR_DIMENSION_FIELD_NUMBER: builtins.int
+    DEFAULT_MIN_SCORE_FIELD_NUMBER: builtins.int
+    RELEASE_CHANNEL_FIELD_NUMBER: builtins.int
+    LEARNING_CONFIG_FIELD_NUMBER: builtins.int
     slug: builtins.str
     @property
     def config(self) -> global___KnowledgeBoxConfig: ...
     forceuuid: builtins.str
     similarity: nucliadb_protos.utils_pb2.VectorSimilarity.ValueType
+    vector_dimension: builtins.int
+    default_min_score: builtins.float
+    release_channel: nucliadb_protos.utils_pb2.ReleaseChannel.ValueType
+    learning_config: builtins.str
     def __init__(
         self,
         *,
         slug: builtins.str = ...,
         config: global___KnowledgeBoxConfig | None = ...,
         forceuuid: builtins.str = ...,
         similarity: nucliadb_protos.utils_pb2.VectorSimilarity.ValueType = ...,
-    ) -> None: ...
-    def HasField(self, field_name: typing_extensions.Literal["config", b"config"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["config", b"config", "forceuuid", b"forceuuid", "similarity", b"similarity", "slug", b"slug"]) -> None: ...
+        vector_dimension: builtins.int | None = ...,
+        default_min_score: builtins.float | None = ...,
+        release_channel: nucliadb_protos.utils_pb2.ReleaseChannel.ValueType = ...,
+        learning_config: builtins.str = ...,
+    ) -> None: ...
+    def HasField(self, field_name: typing_extensions.Literal["_default_min_score", b"_default_min_score", "_vector_dimension", b"_vector_dimension", "config", b"config", "default_min_score", b"default_min_score", "vector_dimension", b"vector_dimension"]) -> builtins.bool: ...
+    def ClearField(self, field_name: typing_extensions.Literal["_default_min_score", b"_default_min_score", "_vector_dimension", b"_vector_dimension", "config", b"config", "default_min_score", b"default_min_score", "forceuuid", b"forceuuid", "learning_config", b"learning_config", "release_channel", b"release_channel", "similarity", b"similarity", "slug", b"slug", "vector_dimension", b"vector_dimension"]) -> None: ...
+    @typing.overload
+    def WhichOneof(self, oneof_group: typing_extensions.Literal["_default_min_score", b"_default_min_score"]) -> typing_extensions.Literal["default_min_score"] | None: ...
+    @typing.overload
+    def WhichOneof(self, oneof_group: typing_extensions.Literal["_vector_dimension", b"_vector_dimension"]) -> typing_extensions.Literal["vector_dimension"] | None: ...
 
 global___KnowledgeBoxNew = KnowledgeBoxNew
 
 @typing_extensions.final
 class NewKnowledgeBoxResponse(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
@@ -179,31 +177,14 @@
         uuid: builtins.str = ...,
     ) -> None: ...
     def ClearField(self, field_name: typing_extensions.Literal["status", b"status", "uuid", b"uuid"]) -> None: ...
 
 global___NewKnowledgeBoxResponse = NewKnowledgeBoxResponse
 
 @typing_extensions.final
-class KnowledgeBoxPrefix(google.protobuf.message.Message):
-    """SEARCH / LIST"""
-
-    DESCRIPTOR: google.protobuf.descriptor.Descriptor
-
-    PREFIX_FIELD_NUMBER: builtins.int
-    prefix: builtins.str
-    def __init__(
-        self,
-        *,
-        prefix: builtins.str = ...,
-    ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["prefix", b"prefix"]) -> None: ...
-
-global___KnowledgeBoxPrefix = KnowledgeBoxPrefix
-
-@typing_extensions.final
 class KnowledgeBoxUpdate(google.protobuf.message.Message):
     """UPDATE"""
 
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     SLUG_FIELD_NUMBER: builtins.int
     UUID_FIELD_NUMBER: builtins.int
@@ -268,26 +249,14 @@
         status: global___KnowledgeBoxResponseStatus.ValueType = ...,
     ) -> None: ...
     def ClearField(self, field_name: typing_extensions.Literal["status", b"status"]) -> None: ...
 
 global___DeleteKnowledgeBoxResponse = DeleteKnowledgeBoxResponse
 
 @typing_extensions.final
-class CleanedKnowledgeBoxResponse(google.protobuf.message.Message):
-    """Clean Index"""
-
-    DESCRIPTOR: google.protobuf.descriptor.Descriptor
-
-    def __init__(
-        self,
-    ) -> None: ...
-
-global___CleanedKnowledgeBoxResponse = CleanedKnowledgeBoxResponse
-
-@typing_extensions.final
 class Label(google.protobuf.message.Message):
     """Labels on a Knowledge Box"""
 
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     TITLE_FIELD_NUMBER: builtins.int
     RELATED_FIELD_NUMBER: builtins.int
@@ -313,24 +282,26 @@
 class LabelSet(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _LabelSetKind:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _LabelSetKindEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[LabelSet._LabelSetKind.ValueType], builtins.type):  # noqa: F821
+    class _LabelSetKindEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[LabelSet._LabelSetKind.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         RESOURCES: LabelSet._LabelSetKind.ValueType  # 0
         PARAGRAPHS: LabelSet._LabelSetKind.ValueType  # 1
         SENTENCES: LabelSet._LabelSetKind.ValueType  # 2
+        SELECTIONS: LabelSet._LabelSetKind.ValueType  # 3
 
     class LabelSetKind(_LabelSetKind, metaclass=_LabelSetKindEnumTypeWrapper): ...
     RESOURCES: LabelSet.LabelSetKind.ValueType  # 0
     PARAGRAPHS: LabelSet.LabelSetKind.ValueType  # 1
     SENTENCES: LabelSet.LabelSetKind.ValueType  # 2
+    SELECTIONS: LabelSet.LabelSetKind.ValueType  # 3
 
     TITLE_FIELD_NUMBER: builtins.int
     COLOR_FIELD_NUMBER: builtins.int
     LABELS_FIELD_NUMBER: builtins.int
     MULTIPLE_FIELD_NUMBER: builtins.int
     KIND_FIELD_NUMBER: builtins.int
     title: builtins.str
@@ -491,14 +462,134 @@
         entities_groups: collections.abc.Iterable[builtins.str] | None = ...,
     ) -> None: ...
     def ClearField(self, field_name: typing_extensions.Literal["entities_groups", b"entities_groups"]) -> None: ...
 
 global___DeletedEntitiesGroups = DeletedEntitiesGroups
 
 @typing_extensions.final
+class EntitiesGroups(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    @typing_extensions.final
+    class EntitiesGroupsEntry(google.protobuf.message.Message):
+        DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+        KEY_FIELD_NUMBER: builtins.int
+        VALUE_FIELD_NUMBER: builtins.int
+        key: builtins.str
+        @property
+        def value(self) -> global___EntitiesGroup: ...
+        def __init__(
+            self,
+            *,
+            key: builtins.str = ...,
+            value: global___EntitiesGroup | None = ...,
+        ) -> None: ...
+        def HasField(self, field_name: typing_extensions.Literal["value", b"value"]) -> builtins.bool: ...
+        def ClearField(self, field_name: typing_extensions.Literal["key", b"key", "value", b"value"]) -> None: ...
+
+    ENTITIES_GROUPS_FIELD_NUMBER: builtins.int
+    @property
+    def entities_groups(self) -> google.protobuf.internal.containers.MessageMap[builtins.str, global___EntitiesGroup]: ...
+    def __init__(
+        self,
+        *,
+        entities_groups: collections.abc.Mapping[builtins.str, global___EntitiesGroup] | None = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["entities_groups", b"entities_groups"]) -> None: ...
+
+global___EntitiesGroups = EntitiesGroups
+
+@typing_extensions.final
+class EntityGroupDuplicateIndex(google.protobuf.message.Message):
+    """
+    Structure to represent all duplicates defined in a kb
+        - call it an "Index" because it should include flattened version of all duplicated entries
+        - this allows 1 call to pull all duplicates
+    """
+
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    @typing_extensions.final
+    class EntityDuplicates(google.protobuf.message.Message):
+        DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+        DUPLICATES_FIELD_NUMBER: builtins.int
+        @property
+        def duplicates(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
+        def __init__(
+            self,
+            *,
+            duplicates: collections.abc.Iterable[builtins.str] | None = ...,
+        ) -> None: ...
+        def ClearField(self, field_name: typing_extensions.Literal["duplicates", b"duplicates"]) -> None: ...
+
+    @typing_extensions.final
+    class EntityGroupDuplicates(google.protobuf.message.Message):
+        DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+        @typing_extensions.final
+        class EntitiesEntry(google.protobuf.message.Message):
+            DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+            KEY_FIELD_NUMBER: builtins.int
+            VALUE_FIELD_NUMBER: builtins.int
+            key: builtins.str
+            @property
+            def value(self) -> global___EntityGroupDuplicateIndex.EntityDuplicates: ...
+            def __init__(
+                self,
+                *,
+                key: builtins.str = ...,
+                value: global___EntityGroupDuplicateIndex.EntityDuplicates | None = ...,
+            ) -> None: ...
+            def HasField(self, field_name: typing_extensions.Literal["value", b"value"]) -> builtins.bool: ...
+            def ClearField(self, field_name: typing_extensions.Literal["key", b"key", "value", b"value"]) -> None: ...
+
+        ENTITIES_FIELD_NUMBER: builtins.int
+        @property
+        def entities(self) -> google.protobuf.internal.containers.MessageMap[builtins.str, global___EntityGroupDuplicateIndex.EntityDuplicates]: ...
+        def __init__(
+            self,
+            *,
+            entities: collections.abc.Mapping[builtins.str, global___EntityGroupDuplicateIndex.EntityDuplicates] | None = ...,
+        ) -> None: ...
+        def ClearField(self, field_name: typing_extensions.Literal["entities", b"entities"]) -> None: ...
+
+    @typing_extensions.final
+    class EntitiesGroupsEntry(google.protobuf.message.Message):
+        DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+        KEY_FIELD_NUMBER: builtins.int
+        VALUE_FIELD_NUMBER: builtins.int
+        key: builtins.str
+        @property
+        def value(self) -> global___EntityGroupDuplicateIndex.EntityGroupDuplicates: ...
+        def __init__(
+            self,
+            *,
+            key: builtins.str = ...,
+            value: global___EntityGroupDuplicateIndex.EntityGroupDuplicates | None = ...,
+        ) -> None: ...
+        def HasField(self, field_name: typing_extensions.Literal["value", b"value"]) -> builtins.bool: ...
+        def ClearField(self, field_name: typing_extensions.Literal["key", b"key", "value", b"value"]) -> None: ...
+
+    ENTITIES_GROUPS_FIELD_NUMBER: builtins.int
+    @property
+    def entities_groups(self) -> google.protobuf.internal.containers.MessageMap[builtins.str, global___EntityGroupDuplicateIndex.EntityGroupDuplicates]: ...
+    def __init__(
+        self,
+        *,
+        entities_groups: collections.abc.Mapping[builtins.str, global___EntityGroupDuplicateIndex.EntityGroupDuplicates] | None = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["entities_groups", b"entities_groups"]) -> None: ...
+
+global___EntityGroupDuplicateIndex = EntityGroupDuplicateIndex
+
+@typing_extensions.final
 class VectorSet(google.protobuf.message.Message):
     """Vectorsets"""
 
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     DIMENSION_FIELD_NUMBER: builtins.int
     SIMILARITY_FIELD_NUMBER: builtins.int
@@ -595,7 +686,67 @@
         self,
         *,
         terms: collections.abc.Mapping[builtins.str, global___TermSynonyms] | None = ...,
     ) -> None: ...
     def ClearField(self, field_name: typing_extensions.Literal["terms", b"terms"]) -> None: ...
 
 global___Synonyms = Synonyms
+
+@typing_extensions.final
+class SemanticModelMetadata(google.protobuf.message.Message):
+    """Metadata of the model associated to the KB"""
+
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    SIMILARITY_FUNCTION_FIELD_NUMBER: builtins.int
+    VECTOR_DIMENSION_FIELD_NUMBER: builtins.int
+    DEFAULT_MIN_SCORE_FIELD_NUMBER: builtins.int
+    similarity_function: nucliadb_protos.utils_pb2.VectorSimilarity.ValueType
+    vector_dimension: builtins.int
+    default_min_score: builtins.float
+    def __init__(
+        self,
+        *,
+        similarity_function: nucliadb_protos.utils_pb2.VectorSimilarity.ValueType = ...,
+        vector_dimension: builtins.int | None = ...,
+        default_min_score: builtins.float | None = ...,
+    ) -> None: ...
+    def HasField(self, field_name: typing_extensions.Literal["_default_min_score", b"_default_min_score", "_vector_dimension", b"_vector_dimension", "default_min_score", b"default_min_score", "vector_dimension", b"vector_dimension"]) -> builtins.bool: ...
+    def ClearField(self, field_name: typing_extensions.Literal["_default_min_score", b"_default_min_score", "_vector_dimension", b"_vector_dimension", "default_min_score", b"default_min_score", "similarity_function", b"similarity_function", "vector_dimension", b"vector_dimension"]) -> None: ...
+    @typing.overload
+    def WhichOneof(self, oneof_group: typing_extensions.Literal["_default_min_score", b"_default_min_score"]) -> typing_extensions.Literal["default_min_score"] | None: ...
+    @typing.overload
+    def WhichOneof(self, oneof_group: typing_extensions.Literal["_vector_dimension", b"_vector_dimension"]) -> typing_extensions.Literal["vector_dimension"] | None: ...
+
+global___SemanticModelMetadata = SemanticModelMetadata
+
+@typing_extensions.final
+class KBConfiguration(google.protobuf.message.Message):
+    """Do not update this model without confirmation of internal Learning Config API
+
+    Deprecated
+    """
+
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    SEMANTIC_MODEL_FIELD_NUMBER: builtins.int
+    GENERATIVE_MODEL_FIELD_NUMBER: builtins.int
+    NER_MODEL_FIELD_NUMBER: builtins.int
+    ANONYMIZATION_MODEL_FIELD_NUMBER: builtins.int
+    VISUAL_LABELING_FIELD_NUMBER: builtins.int
+    semantic_model: builtins.str
+    generative_model: builtins.str
+    ner_model: builtins.str
+    anonymization_model: builtins.str
+    visual_labeling: builtins.str
+    def __init__(
+        self,
+        *,
+        semantic_model: builtins.str = ...,
+        generative_model: builtins.str = ...,
+        ner_model: builtins.str = ...,
+        anonymization_model: builtins.str = ...,
+        visual_labeling: builtins.str = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["anonymization_model", b"anonymization_model", "generative_model", b"generative_model", "ner_model", b"ner_model", "semantic_model", b"semantic_model", "visual_labeling", b"visual_labeling"]) -> None: ...
+
+global___KBConfiguration = KBConfiguration
```

## nucliadb_protos/nodereader_pb2.py

```diff
@@ -1,15 +1,16 @@
 # -*- coding: utf-8 -*-
 # Generated by the protocol buffer compiler.  DO NOT EDIT!
 # source: nucliadb_protos/nodereader.proto
+# Protobuf Python Version: 4.25.0
 """Generated protocol buffer code."""
-from google.protobuf.internal import builder as _builder
 from google.protobuf import descriptor as _descriptor
 from google.protobuf import descriptor_pool as _descriptor_pool
 from google.protobuf import symbol_database as _symbol_database
+from google.protobuf.internal import builder as _builder
 # @@protoc_insertion_point(imports)
 
 _sym_db = _symbol_database.Default()
 
 
 from nucliadb_protos import noderesources_pb2 as nucliadb__protos_dot_noderesources__pb2
 try:
@@ -18,117 +19,139 @@
   nucliadb__protos_dot_utils__pb2 = nucliadb__protos_dot_noderesources__pb2.nucliadb_protos.utils_pb2
 from google.protobuf import timestamp_pb2 as google_dot_protobuf_dot_timestamp__pb2
 from nucliadb_protos import utils_pb2 as nucliadb__protos_dot_utils__pb2
 
 from nucliadb_protos.noderesources_pb2 import *
 from nucliadb_protos.utils_pb2 import *
 
-DESCRIPTOR = _descriptor_pool.Default().AddSerializedFile(b'\n nucliadb_protos/nodereader.proto\x12\nnodereader\x1a#nucliadb_protos/noderesources.proto\x1a\x1fgoogle/protobuf/timestamp.proto\x1a\x1bnucliadb_protos/utils.proto\"\x16\n\x06\x46ilter\x12\x0c\n\x04tags\x18\x01 \x03(\t\"\x80\x01\n\x0cStreamFilter\x12\x39\n\x0b\x63onjunction\x18\x01 \x01(\x0e\x32$.nodereader.StreamFilter.Conjunction\x12\x0c\n\x04tags\x18\x02 \x03(\t\"\'\n\x0b\x43onjunction\x12\x07\n\x03\x41ND\x10\x00\x12\x06\n\x02OR\x10\x01\x12\x07\n\x03NOT\x10\x02\"\x17\n\x07\x46\x61\x63\x65ted\x12\x0c\n\x04tags\x18\x01 \x03(\t\"\xc3\x01\n\x07OrderBy\x12\x11\n\x05\x66ield\x18\x01 \x01(\tB\x02\x18\x01\x12+\n\x04type\x18\x02 \x01(\x0e\x32\x1d.nodereader.OrderBy.OrderType\x12/\n\x07sort_by\x18\x03 \x01(\x0e\x32\x1e.nodereader.OrderBy.OrderField\"\x1e\n\tOrderType\x12\x08\n\x04\x44\x45SC\x10\x00\x12\x07\n\x03\x41SC\x10\x01\"\'\n\nOrderField\x12\x0b\n\x07\x43REATED\x10\x00\x12\x0c\n\x08MODIFIED\x10\x01\"\xd2\x01\n\nTimestamps\x12\x31\n\rfrom_modified\x18\x01 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12/\n\x0bto_modified\x18\x02 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\x30\n\x0c\x66rom_created\x18\x03 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12.\n\nto_created\x18\x04 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\")\n\x0b\x46\x61\x63\x65tResult\x12\x0b\n\x03tag\x18\x01 \x01(\t\x12\r\n\x05total\x18\x02 \x01(\x05\"=\n\x0c\x46\x61\x63\x65tResults\x12-\n\x0c\x66\x61\x63\x65tresults\x18\x01 \x03(\x0b\x32\x17.nodereader.FacetResult\"\xb1\x03\n\x15\x44ocumentSearchRequest\x12\n\n\x02id\x18\x01 \x01(\t\x12\x0c\n\x04\x62ody\x18\x02 \x01(\t\x12\x0e\n\x06\x66ields\x18\x03 \x03(\t\x12\"\n\x06\x66ilter\x18\x04 \x01(\x0b\x32\x12.nodereader.Filter\x12\"\n\x05order\x18\x05 \x01(\x0b\x32\x13.nodereader.OrderBy\x12$\n\x07\x66\x61\x63\x65ted\x18\x06 \x01(\x0b\x32\x13.nodereader.Faceted\x12\x13\n\x0bpage_number\x18\x07 \x01(\x05\x12\x17\n\x0fresult_per_page\x18\x08 \x01(\x05\x12*\n\ntimestamps\x18\t \x01(\x0b\x32\x16.nodereader.Timestamps\x12\x0e\n\x06reload\x18\n \x01(\x08\x12\x14\n\x0conly_faceted\x18\x0f \x01(\x08\x12@\n\x0bwith_status\x18\x10 \x01(\x0e\x32&.noderesources.Resource.ResourceStatusH\x00\x88\x01\x01\x12\x1b\n\x0e\x61\x64vanced_query\x18\x11 \x01(\tH\x01\x88\x01\x01\x42\x0e\n\x0c_with_statusB\x11\n\x0f_advanced_query\"\x87\x03\n\x16ParagraphSearchRequest\x12\n\n\x02id\x18\x01 \x01(\t\x12\x0c\n\x04uuid\x18\x02 \x01(\t\x12\x0e\n\x06\x66ields\x18\x03 \x03(\t\x12\x0c\n\x04\x62ody\x18\x04 \x01(\t\x12\"\n\x06\x66ilter\x18\x05 \x01(\x0b\x32\x12.nodereader.Filter\x12\"\n\x05order\x18\x07 \x01(\x0b\x32\x13.nodereader.OrderBy\x12$\n\x07\x66\x61\x63\x65ted\x18\x08 \x01(\x0b\x32\x13.nodereader.Faceted\x12\x13\n\x0bpage_number\x18\n \x01(\x05\x12\x17\n\x0fresult_per_page\x18\x0b \x01(\x05\x12*\n\ntimestamps\x18\x0c \x01(\x0b\x32\x16.nodereader.Timestamps\x12\x0e\n\x06reload\x18\r \x01(\x08\x12\x17\n\x0fwith_duplicates\x18\x0e \x01(\x08\x12\x14\n\x0conly_faceted\x18\x0f \x01(\x08\x12\x1b\n\x0e\x61\x64vanced_query\x18\x10 \x01(\tH\x00\x88\x01\x01\x42\x11\n\x0f_advanced_query\",\n\x0bResultScore\x12\x0c\n\x04\x62m25\x18\x01 \x01(\x02\x12\x0f\n\x07\x62ooster\x18\x02 \x01(\x02\"e\n\x0e\x44ocumentResult\x12\x0c\n\x04uuid\x18\x01 \x01(\t\x12&\n\x05score\x18\x03 \x01(\x0b\x32\x17.nodereader.ResultScore\x12\r\n\x05\x66ield\x18\x04 \x01(\t\x12\x0e\n\x06labels\x18\x05 \x03(\t\"\xbb\x02\n\x16\x44ocumentSearchResponse\x12\r\n\x05total\x18\x01 \x01(\x05\x12+\n\x07results\x18\x02 \x03(\x0b\x32\x1a.nodereader.DocumentResult\x12>\n\x06\x66\x61\x63\x65ts\x18\x03 \x03(\x0b\x32..nodereader.DocumentSearchResponse.FacetsEntry\x12\x13\n\x0bpage_number\x18\x04 \x01(\x05\x12\x17\n\x0fresult_per_page\x18\x05 \x01(\x05\x12\r\n\x05query\x18\x06 \x01(\t\x12\x11\n\tnext_page\x18\x07 \x01(\x08\x12\x0c\n\x04\x62m25\x18\x08 \x01(\x08\x1aG\n\x0b\x46\x61\x63\x65tsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\'\n\x05value\x18\x02 \x01(\x0b\x32\x18.nodereader.FacetResults:\x02\x38\x01\"\xf8\x01\n\x0fParagraphResult\x12\x0c\n\x04uuid\x18\x01 \x01(\t\x12\r\n\x05\x66ield\x18\x03 \x01(\t\x12\r\n\x05start\x18\x04 \x01(\x04\x12\x0b\n\x03\x65nd\x18\x05 \x01(\x04\x12\x11\n\tparagraph\x18\x06 \x01(\t\x12\r\n\x05split\x18\x07 \x01(\t\x12\r\n\x05index\x18\x08 \x01(\x04\x12&\n\x05score\x18\t \x01(\x0b\x32\x17.nodereader.ResultScore\x12\x0f\n\x07matches\x18\n \x03(\t\x12\x32\n\x08metadata\x18\x0b \x01(\x0b\x32 .noderesources.ParagraphMetadata\x12\x0e\n\x06labels\x18\x0c \x03(\t\"\xe8\x02\n\x17ParagraphSearchResponse\x12\x16\n\x0e\x66uzzy_distance\x18\n \x01(\x05\x12\r\n\x05total\x18\x01 \x01(\x05\x12,\n\x07results\x18\x02 \x03(\x0b\x32\x1b.nodereader.ParagraphResult\x12?\n\x06\x66\x61\x63\x65ts\x18\x03 \x03(\x0b\x32/.nodereader.ParagraphSearchResponse.FacetsEntry\x12\x13\n\x0bpage_number\x18\x04 \x01(\x05\x12\x17\n\x0fresult_per_page\x18\x05 \x01(\x05\x12\r\n\x05query\x18\x06 \x01(\t\x12\x11\n\tnext_page\x18\x07 \x01(\x08\x12\x0c\n\x04\x62m25\x18\x08 \x01(\x08\x12\x10\n\x08\x65matches\x18\t \x03(\t\x1aG\n\x0b\x46\x61\x63\x65tsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\'\n\x05value\x18\x02 \x01(\x0b\x32\x18.nodereader.FacetResults:\x02\x38\x01\"\xaa\x01\n\x13VectorSearchRequest\x12\n\n\x02id\x18\x01 \x01(\t\x12\x12\n\nvector_set\x18\x0f \x01(\t\x12\x0e\n\x06vector\x18\x02 \x03(\x02\x12\x0c\n\x04tags\x18\x03 \x03(\t\x12\x13\n\x0bpage_number\x18\x04 \x01(\x05\x12\x17\n\x0fresult_per_page\x18\x05 \x01(\x05\x12\x17\n\x0fwith_duplicates\x18\x0e \x01(\x08\x12\x0e\n\x06reload\x18\r \x01(\x08\"&\n\x18\x44ocumentVectorIdentifier\x12\n\n\x02id\x18\x01 \x01(\t\"\x98\x01\n\x0e\x44ocumentScored\x12\x34\n\x06\x64oc_id\x18\x01 \x01(\x0b\x32$.nodereader.DocumentVectorIdentifier\x12\r\n\x05score\x18\x02 \x01(\x02\x12\x31\n\x08metadata\x18\x03 \x01(\x0b\x32\x1f.noderesources.SentenceMetadata\x12\x0e\n\x06labels\x18\x04 \x03(\t\"s\n\x14VectorSearchResponse\x12-\n\tdocuments\x18\x01 \x03(\x0b\x32\x1a.nodereader.DocumentScored\x12\x13\n\x0bpage_number\x18\x04 \x01(\x05\x12\x17\n\x0fresult_per_page\x18\x05 \x01(\x05\"q\n\x12RelationNodeFilter\x12/\n\tnode_type\x18\x01 \x01(\x0e\x32\x1c.utils.RelationNode.NodeType\x12\x19\n\x0cnode_subtype\x18\x02 \x01(\tH\x00\x88\x01\x01\x42\x0f\n\r_node_subtype\"}\n\x12RelationEdgeFilter\x12\x33\n\rrelation_type\x18\x01 \x01(\x0e\x32\x1c.utils.Relation.RelationType\x12\x1d\n\x10relation_subtype\x18\x02 \x01(\tH\x00\x88\x01\x01\x42\x13\n\x11_relation_subtype\"c\n\x1bRelationPrefixSearchRequest\x12\x0e\n\x06prefix\x18\x01 \x01(\t\x12\x34\n\x0cnode_filters\x18\x02 \x03(\x0b\x32\x1e.nodereader.RelationNodeFilter\"B\n\x1cRelationPrefixSearchResponse\x12\"\n\x05nodes\x18\x01 \x03(\x0b\x32\x13.utils.RelationNode\"\xce\x01\n\x17\x45ntitiesSubgraphRequest\x12)\n\x0c\x65ntry_points\x18\x01 \x03(\x0b\x32\x13.utils.RelationNode\x12\x34\n\x0cnode_filters\x18\x02 \x03(\x0b\x32\x1e.nodereader.RelationNodeFilter\x12\x34\n\x0c\x65\x64ge_filters\x18\x04 \x03(\x0b\x32\x1e.nodereader.RelationEdgeFilter\x12\x12\n\x05\x64\x65pth\x18\x03 \x01(\x05H\x00\x88\x01\x01\x42\x08\n\x06_depth\">\n\x18\x45ntitiesSubgraphResponse\x12\"\n\trelations\x18\x01 \x03(\x0b\x32\x0f.utils.Relation\"\xa9\x01\n\x15RelationSearchRequest\x12\x10\n\x08shard_id\x18\x01 \x01(\t\x12\x0e\n\x06reload\x18\x05 \x01(\x08\x12\x37\n\x06prefix\x18\x0b \x01(\x0b\x32\'.nodereader.RelationPrefixSearchRequest\x12\x35\n\x08subgraph\x18\x0c \x01(\x0b\x32#.nodereader.EntitiesSubgraphRequest\"\x8a\x01\n\x16RelationSearchResponse\x12\x38\n\x06prefix\x18\x0b \x01(\x0b\x32(.nodereader.RelationPrefixSearchResponse\x12\x36\n\x08subgraph\x18\x0c \x01(\x0b\x32$.nodereader.EntitiesSubgraphResponse\"\xc9\x05\n\rSearchRequest\x12\r\n\x05shard\x18\x01 \x01(\t\x12\x0e\n\x06\x66ields\x18\x02 \x03(\t\x12\x0c\n\x04\x62ody\x18\x03 \x01(\t\x12\"\n\x06\x66ilter\x18\x04 \x01(\x0b\x32\x12.nodereader.Filter\x12\"\n\x05order\x18\x05 \x01(\x0b\x32\x13.nodereader.OrderBy\x12$\n\x07\x66\x61\x63\x65ted\x18\x06 \x01(\x0b\x32\x13.nodereader.Faceted\x12\x13\n\x0bpage_number\x18\x07 \x01(\x05\x12\x17\n\x0fresult_per_page\x18\x08 \x01(\x05\x12*\n\ntimestamps\x18\t \x01(\x0b\x32\x16.nodereader.Timestamps\x12\x0e\n\x06vector\x18\n \x03(\x02\x12\x11\n\tvectorset\x18\x0f \x01(\t\x12\x0e\n\x06reload\x18\x0b \x01(\x08\x12\x11\n\tparagraph\x18\x0c \x01(\x08\x12\x10\n\x08\x64ocument\x18\r \x01(\x08\x12\x17\n\x0fwith_duplicates\x18\x0e \x01(\x08\x12\x14\n\x0conly_faceted\x18\x10 \x01(\x08\x12\x1b\n\x0e\x61\x64vanced_query\x18\x12 \x01(\tH\x00\x88\x01\x01\x12@\n\x0bwith_status\x18\x11 \x01(\x0e\x32&.noderesources.Resource.ResourceStatusH\x01\x88\x01\x01\x12\x38\n\trelations\x18\x13 \x01(\x0b\x32!.nodereader.RelationSearchRequestB\x02\x18\x01\x12@\n\x0frelation_prefix\x18\x14 \x01(\x0b\x32\'.nodereader.RelationPrefixSearchRequest\x12>\n\x11relation_subgraph\x18\x15 \x01(\x0b\x32#.nodereader.EntitiesSubgraphRequestB\x11\n\x0f_advanced_queryB\x0e\n\x0c_with_status\"\x8d\x01\n\x0eSuggestRequest\x12\r\n\x05shard\x18\x01 \x01(\t\x12\x0c\n\x04\x62ody\x18\x02 \x01(\t\x12\"\n\x06\x66ilter\x18\x03 \x01(\x0b\x32\x12.nodereader.Filter\x12*\n\ntimestamps\x18\x04 \x01(\x0b\x32\x16.nodereader.Timestamps\x12\x0e\n\x06\x66ields\x18\x05 \x03(\t\"2\n\x0fRelatedEntities\x12\x10\n\x08\x65ntities\x18\x01 \x03(\t\x12\r\n\x05total\x18\x02 \x01(\r\"\x9e\x01\n\x0fSuggestResponse\x12\r\n\x05total\x18\x01 \x01(\x05\x12,\n\x07results\x18\x02 \x03(\x0b\x32\x1b.nodereader.ParagraphResult\x12\r\n\x05query\x18\x03 \x01(\t\x12\x10\n\x08\x65matches\x18\x04 \x03(\t\x12-\n\x08\x65ntities\x18\x05 \x01(\x0b\x32\x1b.nodereader.RelatedEntities\"\xe6\x01\n\x0eSearchResponse\x12\x34\n\x08\x64ocument\x18\x01 \x01(\x0b\x32\".nodereader.DocumentSearchResponse\x12\x36\n\tparagraph\x18\x02 \x01(\x0b\x32#.nodereader.ParagraphSearchResponse\x12\x30\n\x06vector\x18\x03 \x01(\x0b\x32 .nodereader.VectorSearchResponse\x12\x34\n\x08relation\x18\x04 \x01(\x0b\x32\".nodereader.RelationSearchResponse\"\x1b\n\x0cIdCollection\x12\x0b\n\x03ids\x18\x01 \x03(\t\"Q\n\x0cRelationEdge\x12/\n\tedge_type\x18\x01 \x01(\x0e\x32\x1c.utils.Relation.RelationType\x12\x10\n\x08property\x18\x02 \x01(\t\"2\n\x08\x45\x64geList\x12&\n\x04list\x18\x01 \x03(\x0b\x32\x18.nodereader.RelationEdge\"_\n\x16RelationTypeListMember\x12/\n\twith_type\x18\x01 \x01(\x0e\x32\x1c.utils.RelationNode.NodeType\x12\x14\n\x0cwith_subtype\x18\x02 \x01(\t\"<\n\x08TypeList\x12\x30\n\x04list\x18\x01 \x03(\x0b\x32\".nodereader.RelationTypeListMember\"N\n\x0fGetShardRequest\x12(\n\x08shard_id\x18\x01 \x01(\x0b\x32\x16.noderesources.ShardId\x12\x11\n\tvectorset\x18\x02 \x01(\t\"+\n\rParagraphItem\x12\n\n\x02id\x18\x01 \x01(\t\x12\x0e\n\x06labels\x18\x02 \x03(\t\";\n\x0c\x44ocumentItem\x12\x0c\n\x04uuid\x18\x01 \x01(\t\x12\r\n\x05\x66ield\x18\x02 \x01(\t\x12\x0e\n\x06labels\x18\x03 \x03(\t\"\xa7\x01\n\rStreamRequest\x12\x32\n\x12\x66ilter__deprecated\x18\x01 \x01(\x0b\x32\x12.nodereader.FilterB\x02\x18\x01\x12\x0e\n\x06reload\x18\x02 \x01(\x08\x12(\n\x08shard_id\x18\x03 \x01(\x0b\x32\x16.noderesources.ShardId\x12(\n\x06\x66ilter\x18\x04 \x01(\x0b\x32\x18.nodereader.StreamFilter2\x9e\t\n\nNodeReader\x12?\n\x08GetShard\x12\x1b.nodereader.GetShardRequest\x1a\x14.noderesources.Shard\"\x00\x12\x42\n\tGetShards\x12\x19.noderesources.EmptyQuery\x1a\x18.noderesources.ShardList\"\x00\x12Y\n\x0e\x44ocumentSearch\x12!.nodereader.DocumentSearchRequest\x1a\".nodereader.DocumentSearchResponse\"\x00\x12\\\n\x0fParagraphSearch\x12\".nodereader.ParagraphSearchRequest\x1a#.nodereader.ParagraphSearchResponse\"\x00\x12S\n\x0cVectorSearch\x12\x1f.nodereader.VectorSearchRequest\x1a .nodereader.VectorSearchResponse\"\x00\x12Y\n\x0eRelationSearch\x12!.nodereader.RelationSearchRequest\x1a\".nodereader.RelationSearchResponse\"\x00\x12\x41\n\x0b\x44ocumentIds\x12\x16.noderesources.ShardId\x1a\x18.nodereader.IdCollection\"\x00\x12\x42\n\x0cParagraphIds\x12\x16.noderesources.ShardId\x1a\x18.nodereader.IdCollection\"\x00\x12?\n\tVectorIds\x12\x16.noderesources.ShardId\x1a\x18.nodereader.IdCollection\"\x00\x12\x41\n\x0bRelationIds\x12\x16.noderesources.ShardId\x1a\x18.nodereader.IdCollection\"\x00\x12?\n\rRelationEdges\x12\x16.noderesources.ShardId\x1a\x14.nodereader.EdgeList\"\x00\x12?\n\rRelationTypes\x12\x16.noderesources.ShardId\x1a\x14.nodereader.TypeList\"\x00\x12\x41\n\x06Search\x12\x19.nodereader.SearchRequest\x1a\x1a.nodereader.SearchResponse\"\x00\x12\x44\n\x07Suggest\x12\x1a.nodereader.SuggestRequest\x1a\x1b.nodereader.SuggestResponse\"\x00\x12\x46\n\nParagraphs\x12\x19.nodereader.StreamRequest\x1a\x19.nodereader.ParagraphItem\"\x00\x30\x01\x12\x44\n\tDocuments\x12\x19.nodereader.StreamRequest\x1a\x18.nodereader.DocumentItem\"\x00\x30\x01P\x00P\x02\x62\x06proto3')
+DESCRIPTOR = _descriptor_pool.Default().AddSerializedFile(b'\n nucliadb_protos/nodereader.proto\x12\nnodereader\x1a#nucliadb_protos/noderesources.proto\x1a\x1fgoogle/protobuf/timestamp.proto\x1a\x1bnucliadb_protos/utils.proto\"L\n\x06\x46ilter\x12\x14\n\x0c\x66ield_labels\x18\x01 \x03(\t\x12\x18\n\x10paragraph_labels\x18\x02 \x03(\t\x12\x12\n\nexpression\x18\x03 \x01(\t\"\x82\x01\n\x0cStreamFilter\x12\x39\n\x0b\x63onjunction\x18\x01 \x01(\x0e\x32$.nodereader.StreamFilter.Conjunction\x12\x0e\n\x06labels\x18\x02 \x03(\t\"\'\n\x0b\x43onjunction\x12\x07\n\x03\x41ND\x10\x00\x12\x06\n\x02OR\x10\x01\x12\x07\n\x03NOT\x10\x02\"\x19\n\x07\x46\x61\x63\x65ted\x12\x0e\n\x06labels\x18\x01 \x03(\t\"\xc3\x01\n\x07OrderBy\x12\x11\n\x05\x66ield\x18\x01 \x01(\tB\x02\x18\x01\x12+\n\x04type\x18\x02 \x01(\x0e\x32\x1d.nodereader.OrderBy.OrderType\x12/\n\x07sort_by\x18\x03 \x01(\x0e\x32\x1e.nodereader.OrderBy.OrderField\"\x1e\n\tOrderType\x12\x08\n\x04\x44\x45SC\x10\x00\x12\x07\n\x03\x41SC\x10\x01\"\'\n\nOrderField\x12\x0b\n\x07\x43REATED\x10\x00\x12\x0c\n\x08MODIFIED\x10\x01\"\xd2\x01\n\nTimestamps\x12\x31\n\rfrom_modified\x18\x01 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12/\n\x0bto_modified\x18\x02 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\x30\n\x0c\x66rom_created\x18\x03 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12.\n\nto_created\x18\x04 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\")\n\x0b\x46\x61\x63\x65tResult\x12\x0b\n\x03tag\x18\x01 \x01(\t\x12\r\n\x05total\x18\x02 \x01(\x05\"=\n\x0c\x46\x61\x63\x65tResults\x12-\n\x0c\x66\x61\x63\x65tresults\x18\x01 \x03(\x0b\x32\x17.nodereader.FacetResult\"\xc8\x03\n\x15\x44ocumentSearchRequest\x12\n\n\x02id\x18\x01 \x01(\t\x12\x0c\n\x04\x62ody\x18\x02 \x01(\t\x12\x0e\n\x06\x66ields\x18\x03 \x03(\t\x12\"\n\x06\x66ilter\x18\x04 \x01(\x0b\x32\x12.nodereader.Filter\x12\"\n\x05order\x18\x05 \x01(\x0b\x32\x13.nodereader.OrderBy\x12$\n\x07\x66\x61\x63\x65ted\x18\x06 \x01(\x0b\x32\x13.nodereader.Faceted\x12\x13\n\x0bpage_number\x18\x07 \x01(\x05\x12\x17\n\x0fresult_per_page\x18\x08 \x01(\x05\x12*\n\ntimestamps\x18\t \x01(\x0b\x32\x16.nodereader.Timestamps\x12\x12\n\x06reload\x18\n \x01(\x08\x42\x02\x18\x01\x12\x14\n\x0conly_faceted\x18\x0f \x01(\x08\x12@\n\x0bwith_status\x18\x10 \x01(\x0e\x32&.noderesources.Resource.ResourceStatusH\x00\x88\x01\x01\x12\x1b\n\x0e\x61\x64vanced_query\x18\x11 \x01(\tH\x01\x88\x01\x01\x12\x11\n\tmin_score\x18\x12 \x01(\x02\x42\x0e\n\x0c_with_statusB\x11\n\x0f_advanced_query\"\xe8\x03\n\x16ParagraphSearchRequest\x12\n\n\x02id\x18\x01 \x01(\t\x12\x0c\n\x04uuid\x18\x02 \x01(\t\x12\x0e\n\x06\x66ields\x18\x03 \x03(\t\x12\x0c\n\x04\x62ody\x18\x04 \x01(\t\x12\"\n\x06\x66ilter\x18\x05 \x01(\x0b\x32\x12.nodereader.Filter\x12\"\n\x05order\x18\x07 \x01(\x0b\x32\x13.nodereader.OrderBy\x12$\n\x07\x66\x61\x63\x65ted\x18\x08 \x01(\x0b\x32\x13.nodereader.Faceted\x12\x13\n\x0bpage_number\x18\n \x01(\x05\x12\x17\n\x0fresult_per_page\x18\x0b \x01(\x05\x12*\n\ntimestamps\x18\x0c \x01(\x0b\x32\x16.nodereader.Timestamps\x12\x12\n\x06reload\x18\r \x01(\x08\x42\x02\x18\x01\x12\x17\n\x0fwith_duplicates\x18\x0e \x01(\x08\x12\x14\n\x0conly_faceted\x18\x0f \x01(\x08\x12\x1b\n\x0e\x61\x64vanced_query\x18\x10 \x01(\tH\x00\x88\x01\x01\x12\x13\n\x0bkey_filters\x18\x11 \x03(\t\x12\x11\n\tmin_score\x18\x12 \x01(\x02\x12&\n\x08security\x18\x13 \x01(\x0b\x32\x0f.utils.SecurityH\x01\x88\x01\x01\x42\x11\n\x0f_advanced_queryB\x0b\n\t_security\",\n\x0bResultScore\x12\x0c\n\x04\x62m25\x18\x01 \x01(\x02\x12\x0f\n\x07\x62ooster\x18\x02 \x01(\x02\"e\n\x0e\x44ocumentResult\x12\x0c\n\x04uuid\x18\x01 \x01(\t\x12&\n\x05score\x18\x03 \x01(\x0b\x32\x17.nodereader.ResultScore\x12\r\n\x05\x66ield\x18\x04 \x01(\t\x12\x0e\n\x06labels\x18\x05 \x03(\t\"\xbb\x02\n\x16\x44ocumentSearchResponse\x12\r\n\x05total\x18\x01 \x01(\x05\x12+\n\x07results\x18\x02 \x03(\x0b\x32\x1a.nodereader.DocumentResult\x12>\n\x06\x66\x61\x63\x65ts\x18\x03 \x03(\x0b\x32..nodereader.DocumentSearchResponse.FacetsEntry\x12\x13\n\x0bpage_number\x18\x04 \x01(\x05\x12\x17\n\x0fresult_per_page\x18\x05 \x01(\x05\x12\r\n\x05query\x18\x06 \x01(\t\x12\x11\n\tnext_page\x18\x07 \x01(\x08\x12\x0c\n\x04\x62m25\x18\x08 \x01(\x08\x1aG\n\x0b\x46\x61\x63\x65tsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\'\n\x05value\x18\x02 \x01(\x0b\x32\x18.nodereader.FacetResults:\x02\x38\x01\"\xf8\x01\n\x0fParagraphResult\x12\x0c\n\x04uuid\x18\x01 \x01(\t\x12\r\n\x05\x66ield\x18\x03 \x01(\t\x12\r\n\x05start\x18\x04 \x01(\x04\x12\x0b\n\x03\x65nd\x18\x05 \x01(\x04\x12\x11\n\tparagraph\x18\x06 \x01(\t\x12\r\n\x05split\x18\x07 \x01(\t\x12\r\n\x05index\x18\x08 \x01(\x04\x12&\n\x05score\x18\t \x01(\x0b\x32\x17.nodereader.ResultScore\x12\x0f\n\x07matches\x18\n \x03(\t\x12\x32\n\x08metadata\x18\x0b \x01(\x0b\x32 .noderesources.ParagraphMetadata\x12\x0e\n\x06labels\x18\x0c \x03(\t\"\xe8\x02\n\x17ParagraphSearchResponse\x12\x16\n\x0e\x66uzzy_distance\x18\n \x01(\x05\x12\r\n\x05total\x18\x01 \x01(\x05\x12,\n\x07results\x18\x02 \x03(\x0b\x32\x1b.nodereader.ParagraphResult\x12?\n\x06\x66\x61\x63\x65ts\x18\x03 \x03(\x0b\x32/.nodereader.ParagraphSearchResponse.FacetsEntry\x12\x13\n\x0bpage_number\x18\x04 \x01(\x05\x12\x17\n\x0fresult_per_page\x18\x05 \x01(\x05\x12\r\n\x05query\x18\x06 \x01(\t\x12\x11\n\tnext_page\x18\x07 \x01(\x08\x12\x0c\n\x04\x62m25\x18\x08 \x01(\x08\x12\x10\n\x08\x65matches\x18\t \x03(\t\x1aG\n\x0b\x46\x61\x63\x65tsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\'\n\x05value\x18\x02 \x01(\x0b\x32\x18.nodereader.FacetResults:\x02\x38\x01\"\xf8\x01\n\x13VectorSearchRequest\x12\n\n\x02id\x18\x01 \x01(\t\x12\x0e\n\x06vector\x18\x02 \x03(\x02\x12\x14\n\x0c\x66ield_labels\x18\x03 \x03(\t\x12\x18\n\x10paragraph_labels\x18\x12 \x03(\t\x12\x13\n\x0bpage_number\x18\x04 \x01(\x05\x12\x17\n\x0fresult_per_page\x18\x05 \x01(\x05\x12\x12\n\x06reload\x18\r \x01(\x08\x42\x02\x18\x01\x12\x17\n\x0fwith_duplicates\x18\x0e \x01(\x08\x12\x12\n\nvector_set\x18\x0f \x01(\t\x12\x13\n\x0bkey_filters\x18\x10 \x03(\t\x12\x11\n\tmin_score\x18\x11 \x01(\x02\"&\n\x18\x44ocumentVectorIdentifier\x12\n\n\x02id\x18\x01 \x01(\t\"\x98\x01\n\x0e\x44ocumentScored\x12\x34\n\x06\x64oc_id\x18\x01 \x01(\x0b\x32$.nodereader.DocumentVectorIdentifier\x12\r\n\x05score\x18\x02 \x01(\x02\x12\x31\n\x08metadata\x18\x03 \x01(\x0b\x32\x1f.noderesources.SentenceMetadata\x12\x0e\n\x06labels\x18\x04 \x03(\t\"s\n\x14VectorSearchResponse\x12-\n\tdocuments\x18\x01 \x03(\x0b\x32\x1a.nodereader.DocumentScored\x12\x13\n\x0bpage_number\x18\x04 \x01(\x05\x12\x17\n\x0fresult_per_page\x18\x05 \x01(\x05\"q\n\x12RelationNodeFilter\x12/\n\tnode_type\x18\x01 \x01(\x0e\x32\x1c.utils.RelationNode.NodeType\x12\x19\n\x0cnode_subtype\x18\x02 \x01(\tH\x00\x88\x01\x01\x42\x0f\n\r_node_subtype\"\x95\x01\n\x12RelationEdgeFilter\x12\x33\n\rrelation_type\x18\x01 \x01(\x0e\x32\x1c.utils.Relation.RelationType\x12\x1d\n\x10relation_subtype\x18\x02 \x01(\tH\x00\x88\x01\x01\x12\x16\n\x0erelation_value\x18\x03 \x03(\tB\x13\n\x11_relation_subtype\"c\n\x1bRelationPrefixSearchRequest\x12\x0e\n\x06prefix\x18\x01 \x01(\t\x12\x34\n\x0cnode_filters\x18\x02 \x03(\x0b\x32\x1e.nodereader.RelationNodeFilter\"B\n\x1cRelationPrefixSearchResponse\x12\"\n\x05nodes\x18\x01 \x03(\x0b\x32\x13.utils.RelationNode\"\x87\x02\n\x17\x45ntitiesSubgraphRequest\x12)\n\x0c\x65ntry_points\x18\x01 \x03(\x0b\x32\x13.utils.RelationNode\x12\x12\n\x05\x64\x65pth\x18\x03 \x01(\x05H\x00\x88\x01\x01\x12M\n\x10\x64\x65leted_entities\x18\x04 \x03(\x0b\x32\x33.nodereader.EntitiesSubgraphRequest.DeletedEntities\x12\x16\n\x0e\x64\x65leted_groups\x18\x05 \x03(\t\x1a<\n\x0f\x44\x65letedEntities\x12\x14\n\x0cnode_subtype\x18\x01 \x01(\t\x12\x13\n\x0bnode_values\x18\x02 \x03(\tB\x08\n\x06_depth\">\n\x18\x45ntitiesSubgraphResponse\x12\"\n\trelations\x18\x01 \x03(\x0b\x32\x0f.utils.Relation\"\xad\x01\n\x15RelationSearchRequest\x12\x10\n\x08shard_id\x18\x01 \x01(\t\x12\x12\n\x06reload\x18\x05 \x01(\x08\x42\x02\x18\x01\x12\x37\n\x06prefix\x18\x0b \x01(\x0b\x32\'.nodereader.RelationPrefixSearchRequest\x12\x35\n\x08subgraph\x18\x0c \x01(\x0b\x32#.nodereader.EntitiesSubgraphRequest\"\x8a\x01\n\x16RelationSearchResponse\x12\x38\n\x06prefix\x18\x0b \x01(\x0b\x32(.nodereader.RelationPrefixSearchResponse\x12\x36\n\x08subgraph\x18\x0c \x01(\x0b\x32$.nodereader.EntitiesSubgraphResponse\"\xcb\x06\n\rSearchRequest\x12\r\n\x05shard\x18\x01 \x01(\t\x12\x0e\n\x06\x66ields\x18\x02 \x03(\t\x12\x0c\n\x04\x62ody\x18\x03 \x01(\t\x12\"\n\x06\x66ilter\x18\x04 \x01(\x0b\x32\x12.nodereader.Filter\x12\"\n\x05order\x18\x05 \x01(\x0b\x32\x13.nodereader.OrderBy\x12$\n\x07\x66\x61\x63\x65ted\x18\x06 \x01(\x0b\x32\x13.nodereader.Faceted\x12\x13\n\x0bpage_number\x18\x07 \x01(\x05\x12\x17\n\x0fresult_per_page\x18\x08 \x01(\x05\x12*\n\ntimestamps\x18\t \x01(\x0b\x32\x16.nodereader.Timestamps\x12\x0e\n\x06vector\x18\n \x03(\x02\x12\x11\n\tvectorset\x18\x0f \x01(\t\x12\x12\n\x06reload\x18\x0b \x01(\x08\x42\x02\x18\x01\x12\x11\n\tparagraph\x18\x0c \x01(\x08\x12\x10\n\x08\x64ocument\x18\r \x01(\x08\x12\x17\n\x0fwith_duplicates\x18\x0e \x01(\x08\x12\x14\n\x0conly_faceted\x18\x10 \x01(\x08\x12\x1b\n\x0e\x61\x64vanced_query\x18\x12 \x01(\tH\x00\x88\x01\x01\x12@\n\x0bwith_status\x18\x11 \x01(\x0e\x32&.noderesources.Resource.ResourceStatusH\x01\x88\x01\x01\x12\x38\n\trelations\x18\x13 \x01(\x0b\x32!.nodereader.RelationSearchRequestB\x02\x18\x01\x12@\n\x0frelation_prefix\x18\x14 \x01(\x0b\x32\'.nodereader.RelationPrefixSearchRequest\x12>\n\x11relation_subgraph\x18\x15 \x01(\x0b\x32#.nodereader.EntitiesSubgraphRequest\x12\x13\n\x0bkey_filters\x18\x16 \x03(\t\x12\x1a\n\x12min_score_semantic\x18\x17 \x01(\x02\x12\x16\n\x0emin_score_bm25\x18\x19 \x01(\x02\x12&\n\x08security\x18\x18 \x01(\x0b\x32\x0f.utils.SecurityH\x02\x88\x01\x01\x42\x11\n\x0f_advanced_queryB\x0e\n\x0c_with_statusB\x0b\n\t_security\"\xbc\x01\n\x0eSuggestRequest\x12\r\n\x05shard\x18\x01 \x01(\t\x12\x0c\n\x04\x62ody\x18\x02 \x01(\t\x12-\n\x08\x66\x65\x61tures\x18\x06 \x03(\x0e\x32\x1b.nodereader.SuggestFeatures\x12\"\n\x06\x66ilter\x18\x03 \x01(\x0b\x32\x12.nodereader.Filter\x12*\n\ntimestamps\x18\x04 \x01(\x0b\x32\x16.nodereader.Timestamps\x12\x0e\n\x06\x66ields\x18\x05 \x03(\t\"2\n\x0fRelatedEntities\x12\x10\n\x08\x65ntities\x18\x01 \x03(\t\x12\r\n\x05total\x18\x02 \x01(\r\"\xb1\x01\n\x0fSuggestResponse\x12\r\n\x05total\x18\x01 \x01(\x05\x12,\n\x07results\x18\x02 \x03(\x0b\x32\x1b.nodereader.ParagraphResult\x12\r\n\x05query\x18\x03 \x01(\t\x12\x10\n\x08\x65matches\x18\x04 \x03(\t\x12@\n\x0e\x65ntity_results\x18\x06 \x01(\x0b\x32(.nodereader.RelationPrefixSearchResponse\"\xe6\x01\n\x0eSearchResponse\x12\x34\n\x08\x64ocument\x18\x01 \x01(\x0b\x32\".nodereader.DocumentSearchResponse\x12\x36\n\tparagraph\x18\x02 \x01(\x0b\x32#.nodereader.ParagraphSearchResponse\x12\x30\n\x06vector\x18\x03 \x01(\x0b\x32 .nodereader.VectorSearchResponse\x12\x34\n\x08relation\x18\x04 \x01(\x0b\x32\".nodereader.RelationSearchResponse\"\x1b\n\x0cIdCollection\x12\x0b\n\x03ids\x18\x01 \x03(\t\"Q\n\x0cRelationEdge\x12/\n\tedge_type\x18\x01 \x01(\x0e\x32\x1c.utils.Relation.RelationType\x12\x10\n\x08property\x18\x02 \x01(\t\"2\n\x08\x45\x64geList\x12&\n\x04list\x18\x01 \x03(\x0b\x32\x18.nodereader.RelationEdge\"N\n\x0fGetShardRequest\x12(\n\x08shard_id\x18\x01 \x01(\x0b\x32\x16.noderesources.ShardId\x12\x11\n\tvectorset\x18\x02 \x01(\t\"+\n\rParagraphItem\x12\n\n\x02id\x18\x01 \x01(\t\x12\x0e\n\x06labels\x18\x02 \x03(\t\";\n\x0c\x44ocumentItem\x12\x0c\n\x04uuid\x18\x01 \x01(\t\x12\r\n\x05\x66ield\x18\x02 \x01(\t\x12\x0e\n\x06labels\x18\x03 \x03(\t\"\xab\x01\n\rStreamRequest\x12\x32\n\x12\x66ilter__deprecated\x18\x01 \x01(\x0b\x32\x12.nodereader.FilterB\x02\x18\x01\x12\x12\n\x06reload\x18\x02 \x01(\x08\x42\x02\x18\x01\x12(\n\x08shard_id\x18\x03 \x01(\x0b\x32\x16.noderesources.ShardId\x12(\n\x06\x66ilter\x18\x04 \x01(\x0b\x32\x18.nodereader.StreamFilter\"(\n\x14GetShardFilesRequest\x12\x10\n\x08shard_id\x18\x01 \x01(\t\"5\n\rShardFileList\x12$\n\x05\x66iles\x18\x02 \x03(\x0b\x32\x15.nodereader.ShardFile\"0\n\tShardFile\x12\x15\n\rrelative_path\x18\x01 \x01(\t\x12\x0c\n\x04size\x18\x02 \x01(\x04\"C\n\x18\x44ownloadShardFileRequest\x12\x10\n\x08shard_id\x18\x01 \x01(\t\x12\x15\n\rrelative_path\x18\x02 \x01(\t\"-\n\x0eShardFileChunk\x12\x0c\n\x04\x64\x61ta\x18\x01 \x01(\x0c\x12\r\n\x05index\x18\x02 \x01(\x05*/\n\x0fSuggestFeatures\x12\x0c\n\x08\x45NTITIES\x10\x00\x12\x0e\n\nPARAGRAPHS\x10\x01\x32\xc4\t\n\nNodeReader\x12?\n\x08GetShard\x12\x1b.nodereader.GetShardRequest\x1a\x14.noderesources.Shard\"\x00\x12Y\n\x0e\x44ocumentSearch\x12!.nodereader.DocumentSearchRequest\x1a\".nodereader.DocumentSearchResponse\"\x00\x12\\\n\x0fParagraphSearch\x12\".nodereader.ParagraphSearchRequest\x1a#.nodereader.ParagraphSearchResponse\"\x00\x12S\n\x0cVectorSearch\x12\x1f.nodereader.VectorSearchRequest\x1a .nodereader.VectorSearchResponse\"\x00\x12Y\n\x0eRelationSearch\x12!.nodereader.RelationSearchRequest\x1a\".nodereader.RelationSearchResponse\"\x00\x12\x41\n\x0b\x44ocumentIds\x12\x16.noderesources.ShardId\x1a\x18.nodereader.IdCollection\"\x00\x12\x42\n\x0cParagraphIds\x12\x16.noderesources.ShardId\x1a\x18.nodereader.IdCollection\"\x00\x12?\n\tVectorIds\x12\x16.noderesources.ShardId\x1a\x18.nodereader.IdCollection\"\x00\x12\x41\n\x0bRelationIds\x12\x16.noderesources.ShardId\x1a\x18.nodereader.IdCollection\"\x00\x12?\n\rRelationEdges\x12\x16.noderesources.ShardId\x1a\x14.nodereader.EdgeList\"\x00\x12\x41\n\x06Search\x12\x19.nodereader.SearchRequest\x1a\x1a.nodereader.SearchResponse\"\x00\x12\x44\n\x07Suggest\x12\x1a.nodereader.SuggestRequest\x1a\x1b.nodereader.SuggestResponse\"\x00\x12\x46\n\nParagraphs\x12\x19.nodereader.StreamRequest\x1a\x19.nodereader.ParagraphItem\"\x00\x30\x01\x12\x44\n\tDocuments\x12\x19.nodereader.StreamRequest\x1a\x18.nodereader.DocumentItem\"\x00\x30\x01\x12N\n\rGetShardFiles\x12 .nodereader.GetShardFilesRequest\x1a\x19.nodereader.ShardFileList\"\x00\x12Y\n\x11\x44ownloadShardFile\x12$.nodereader.DownloadShardFileRequest\x1a\x1a.nodereader.ShardFileChunk\"\x00\x30\x01P\x00P\x02\x62\x06proto3')
 
-_builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, globals())
-_builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, 'nucliadb_protos.nodereader_pb2', globals())
+_globals = globals()
+_builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, _globals)
+_builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, 'nucliadb_protos.nodereader_pb2', _globals)
 if _descriptor._USE_C_DESCRIPTORS == False:
-
   DESCRIPTOR._options = None
-  _ORDERBY.fields_by_name['field']._options = None
-  _ORDERBY.fields_by_name['field']._serialized_options = b'\030\001'
-  _DOCUMENTSEARCHRESPONSE_FACETSENTRY._options = None
-  _DOCUMENTSEARCHRESPONSE_FACETSENTRY._serialized_options = b'8\001'
-  _PARAGRAPHSEARCHRESPONSE_FACETSENTRY._options = None
-  _PARAGRAPHSEARCHRESPONSE_FACETSENTRY._serialized_options = b'8\001'
-  _SEARCHREQUEST.fields_by_name['relations']._options = None
-  _SEARCHREQUEST.fields_by_name['relations']._serialized_options = b'\030\001'
-  _STREAMREQUEST.fields_by_name['filter__deprecated']._options = None
-  _STREAMREQUEST.fields_by_name['filter__deprecated']._serialized_options = b'\030\001'
-  _FILTER._serialized_start=147
-  _FILTER._serialized_end=169
-  _STREAMFILTER._serialized_start=172
-  _STREAMFILTER._serialized_end=300
-  _STREAMFILTER_CONJUNCTION._serialized_start=261
-  _STREAMFILTER_CONJUNCTION._serialized_end=300
-  _FACETED._serialized_start=302
-  _FACETED._serialized_end=325
-  _ORDERBY._serialized_start=328
-  _ORDERBY._serialized_end=523
-  _ORDERBY_ORDERTYPE._serialized_start=452
-  _ORDERBY_ORDERTYPE._serialized_end=482
-  _ORDERBY_ORDERFIELD._serialized_start=484
-  _ORDERBY_ORDERFIELD._serialized_end=523
-  _TIMESTAMPS._serialized_start=526
-  _TIMESTAMPS._serialized_end=736
-  _FACETRESULT._serialized_start=738
-  _FACETRESULT._serialized_end=779
-  _FACETRESULTS._serialized_start=781
-  _FACETRESULTS._serialized_end=842
-  _DOCUMENTSEARCHREQUEST._serialized_start=845
-  _DOCUMENTSEARCHREQUEST._serialized_end=1278
-  _PARAGRAPHSEARCHREQUEST._serialized_start=1281
-  _PARAGRAPHSEARCHREQUEST._serialized_end=1672
-  _RESULTSCORE._serialized_start=1674
-  _RESULTSCORE._serialized_end=1718
-  _DOCUMENTRESULT._serialized_start=1720
-  _DOCUMENTRESULT._serialized_end=1821
-  _DOCUMENTSEARCHRESPONSE._serialized_start=1824
-  _DOCUMENTSEARCHRESPONSE._serialized_end=2139
-  _DOCUMENTSEARCHRESPONSE_FACETSENTRY._serialized_start=2068
-  _DOCUMENTSEARCHRESPONSE_FACETSENTRY._serialized_end=2139
-  _PARAGRAPHRESULT._serialized_start=2142
-  _PARAGRAPHRESULT._serialized_end=2390
-  _PARAGRAPHSEARCHRESPONSE._serialized_start=2393
-  _PARAGRAPHSEARCHRESPONSE._serialized_end=2753
-  _PARAGRAPHSEARCHRESPONSE_FACETSENTRY._serialized_start=2068
-  _PARAGRAPHSEARCHRESPONSE_FACETSENTRY._serialized_end=2139
-  _VECTORSEARCHREQUEST._serialized_start=2756
-  _VECTORSEARCHREQUEST._serialized_end=2926
-  _DOCUMENTVECTORIDENTIFIER._serialized_start=2928
-  _DOCUMENTVECTORIDENTIFIER._serialized_end=2966
-  _DOCUMENTSCORED._serialized_start=2969
-  _DOCUMENTSCORED._serialized_end=3121
-  _VECTORSEARCHRESPONSE._serialized_start=3123
-  _VECTORSEARCHRESPONSE._serialized_end=3238
-  _RELATIONNODEFILTER._serialized_start=3240
-  _RELATIONNODEFILTER._serialized_end=3353
-  _RELATIONEDGEFILTER._serialized_start=3355
-  _RELATIONEDGEFILTER._serialized_end=3480
-  _RELATIONPREFIXSEARCHREQUEST._serialized_start=3482
-  _RELATIONPREFIXSEARCHREQUEST._serialized_end=3581
-  _RELATIONPREFIXSEARCHRESPONSE._serialized_start=3583
-  _RELATIONPREFIXSEARCHRESPONSE._serialized_end=3649
-  _ENTITIESSUBGRAPHREQUEST._serialized_start=3652
-  _ENTITIESSUBGRAPHREQUEST._serialized_end=3858
-  _ENTITIESSUBGRAPHRESPONSE._serialized_start=3860
-  _ENTITIESSUBGRAPHRESPONSE._serialized_end=3922
-  _RELATIONSEARCHREQUEST._serialized_start=3925
-  _RELATIONSEARCHREQUEST._serialized_end=4094
-  _RELATIONSEARCHRESPONSE._serialized_start=4097
-  _RELATIONSEARCHRESPONSE._serialized_end=4235
-  _SEARCHREQUEST._serialized_start=4238
-  _SEARCHREQUEST._serialized_end=4951
-  _SUGGESTREQUEST._serialized_start=4954
-  _SUGGESTREQUEST._serialized_end=5095
-  _RELATEDENTITIES._serialized_start=5097
-  _RELATEDENTITIES._serialized_end=5147
-  _SUGGESTRESPONSE._serialized_start=5150
-  _SUGGESTRESPONSE._serialized_end=5308
-  _SEARCHRESPONSE._serialized_start=5311
-  _SEARCHRESPONSE._serialized_end=5541
-  _IDCOLLECTION._serialized_start=5543
-  _IDCOLLECTION._serialized_end=5570
-  _RELATIONEDGE._serialized_start=5572
-  _RELATIONEDGE._serialized_end=5653
-  _EDGELIST._serialized_start=5655
-  _EDGELIST._serialized_end=5705
-  _RELATIONTYPELISTMEMBER._serialized_start=5707
-  _RELATIONTYPELISTMEMBER._serialized_end=5802
-  _TYPELIST._serialized_start=5804
-  _TYPELIST._serialized_end=5864
-  _GETSHARDREQUEST._serialized_start=5866
-  _GETSHARDREQUEST._serialized_end=5944
-  _PARAGRAPHITEM._serialized_start=5946
-  _PARAGRAPHITEM._serialized_end=5989
-  _DOCUMENTITEM._serialized_start=5991
-  _DOCUMENTITEM._serialized_end=6050
-  _STREAMREQUEST._serialized_start=6053
-  _STREAMREQUEST._serialized_end=6220
-  _NODEREADER._serialized_start=6223
-  _NODEREADER._serialized_end=7405
+  _globals['_ORDERBY'].fields_by_name['field']._options = None
+  _globals['_ORDERBY'].fields_by_name['field']._serialized_options = b'\030\001'
+  _globals['_DOCUMENTSEARCHREQUEST'].fields_by_name['reload']._options = None
+  _globals['_DOCUMENTSEARCHREQUEST'].fields_by_name['reload']._serialized_options = b'\030\001'
+  _globals['_PARAGRAPHSEARCHREQUEST'].fields_by_name['reload']._options = None
+  _globals['_PARAGRAPHSEARCHREQUEST'].fields_by_name['reload']._serialized_options = b'\030\001'
+  _globals['_DOCUMENTSEARCHRESPONSE_FACETSENTRY']._options = None
+  _globals['_DOCUMENTSEARCHRESPONSE_FACETSENTRY']._serialized_options = b'8\001'
+  _globals['_PARAGRAPHSEARCHRESPONSE_FACETSENTRY']._options = None
+  _globals['_PARAGRAPHSEARCHRESPONSE_FACETSENTRY']._serialized_options = b'8\001'
+  _globals['_VECTORSEARCHREQUEST'].fields_by_name['reload']._options = None
+  _globals['_VECTORSEARCHREQUEST'].fields_by_name['reload']._serialized_options = b'\030\001'
+  _globals['_RELATIONSEARCHREQUEST'].fields_by_name['reload']._options = None
+  _globals['_RELATIONSEARCHREQUEST'].fields_by_name['reload']._serialized_options = b'\030\001'
+  _globals['_SEARCHREQUEST'].fields_by_name['reload']._options = None
+  _globals['_SEARCHREQUEST'].fields_by_name['reload']._serialized_options = b'\030\001'
+  _globals['_SEARCHREQUEST'].fields_by_name['relations']._options = None
+  _globals['_SEARCHREQUEST'].fields_by_name['relations']._serialized_options = b'\030\001'
+  _globals['_STREAMREQUEST'].fields_by_name['filter__deprecated']._options = None
+  _globals['_STREAMREQUEST'].fields_by_name['filter__deprecated']._serialized_options = b'\030\001'
+  _globals['_STREAMREQUEST'].fields_by_name['reload']._options = None
+  _globals['_STREAMREQUEST'].fields_by_name['reload']._serialized_options = b'\030\001'
+  _globals['_SUGGESTFEATURES']._serialized_start=6868
+  _globals['_SUGGESTFEATURES']._serialized_end=6915
+  _globals['_FILTER']._serialized_start=147
+  _globals['_FILTER']._serialized_end=223
+  _globals['_STREAMFILTER']._serialized_start=226
+  _globals['_STREAMFILTER']._serialized_end=356
+  _globals['_STREAMFILTER_CONJUNCTION']._serialized_start=317
+  _globals['_STREAMFILTER_CONJUNCTION']._serialized_end=356
+  _globals['_FACETED']._serialized_start=358
+  _globals['_FACETED']._serialized_end=383
+  _globals['_ORDERBY']._serialized_start=386
+  _globals['_ORDERBY']._serialized_end=581
+  _globals['_ORDERBY_ORDERTYPE']._serialized_start=510
+  _globals['_ORDERBY_ORDERTYPE']._serialized_end=540
+  _globals['_ORDERBY_ORDERFIELD']._serialized_start=542
+  _globals['_ORDERBY_ORDERFIELD']._serialized_end=581
+  _globals['_TIMESTAMPS']._serialized_start=584
+  _globals['_TIMESTAMPS']._serialized_end=794
+  _globals['_FACETRESULT']._serialized_start=796
+  _globals['_FACETRESULT']._serialized_end=837
+  _globals['_FACETRESULTS']._serialized_start=839
+  _globals['_FACETRESULTS']._serialized_end=900
+  _globals['_DOCUMENTSEARCHREQUEST']._serialized_start=903
+  _globals['_DOCUMENTSEARCHREQUEST']._serialized_end=1359
+  _globals['_PARAGRAPHSEARCHREQUEST']._serialized_start=1362
+  _globals['_PARAGRAPHSEARCHREQUEST']._serialized_end=1850
+  _globals['_RESULTSCORE']._serialized_start=1852
+  _globals['_RESULTSCORE']._serialized_end=1896
+  _globals['_DOCUMENTRESULT']._serialized_start=1898
+  _globals['_DOCUMENTRESULT']._serialized_end=1999
+  _globals['_DOCUMENTSEARCHRESPONSE']._serialized_start=2002
+  _globals['_DOCUMENTSEARCHRESPONSE']._serialized_end=2317
+  _globals['_DOCUMENTSEARCHRESPONSE_FACETSENTRY']._serialized_start=2246
+  _globals['_DOCUMENTSEARCHRESPONSE_FACETSENTRY']._serialized_end=2317
+  _globals['_PARAGRAPHRESULT']._serialized_start=2320
+  _globals['_PARAGRAPHRESULT']._serialized_end=2568
+  _globals['_PARAGRAPHSEARCHRESPONSE']._serialized_start=2571
+  _globals['_PARAGRAPHSEARCHRESPONSE']._serialized_end=2931
+  _globals['_PARAGRAPHSEARCHRESPONSE_FACETSENTRY']._serialized_start=2246
+  _globals['_PARAGRAPHSEARCHRESPONSE_FACETSENTRY']._serialized_end=2317
+  _globals['_VECTORSEARCHREQUEST']._serialized_start=2934
+  _globals['_VECTORSEARCHREQUEST']._serialized_end=3182
+  _globals['_DOCUMENTVECTORIDENTIFIER']._serialized_start=3184
+  _globals['_DOCUMENTVECTORIDENTIFIER']._serialized_end=3222
+  _globals['_DOCUMENTSCORED']._serialized_start=3225
+  _globals['_DOCUMENTSCORED']._serialized_end=3377
+  _globals['_VECTORSEARCHRESPONSE']._serialized_start=3379
+  _globals['_VECTORSEARCHRESPONSE']._serialized_end=3494
+  _globals['_RELATIONNODEFILTER']._serialized_start=3496
+  _globals['_RELATIONNODEFILTER']._serialized_end=3609
+  _globals['_RELATIONEDGEFILTER']._serialized_start=3612
+  _globals['_RELATIONEDGEFILTER']._serialized_end=3761
+  _globals['_RELATIONPREFIXSEARCHREQUEST']._serialized_start=3763
+  _globals['_RELATIONPREFIXSEARCHREQUEST']._serialized_end=3862
+  _globals['_RELATIONPREFIXSEARCHRESPONSE']._serialized_start=3864
+  _globals['_RELATIONPREFIXSEARCHRESPONSE']._serialized_end=3930
+  _globals['_ENTITIESSUBGRAPHREQUEST']._serialized_start=3933
+  _globals['_ENTITIESSUBGRAPHREQUEST']._serialized_end=4196
+  _globals['_ENTITIESSUBGRAPHREQUEST_DELETEDENTITIES']._serialized_start=4126
+  _globals['_ENTITIESSUBGRAPHREQUEST_DELETEDENTITIES']._serialized_end=4186
+  _globals['_ENTITIESSUBGRAPHRESPONSE']._serialized_start=4198
+  _globals['_ENTITIESSUBGRAPHRESPONSE']._serialized_end=4260
+  _globals['_RELATIONSEARCHREQUEST']._serialized_start=4263
+  _globals['_RELATIONSEARCHREQUEST']._serialized_end=4436
+  _globals['_RELATIONSEARCHRESPONSE']._serialized_start=4439
+  _globals['_RELATIONSEARCHRESPONSE']._serialized_end=4577
+  _globals['_SEARCHREQUEST']._serialized_start=4580
+  _globals['_SEARCHREQUEST']._serialized_end=5423
+  _globals['_SUGGESTREQUEST']._serialized_start=5426
+  _globals['_SUGGESTREQUEST']._serialized_end=5614
+  _globals['_RELATEDENTITIES']._serialized_start=5616
+  _globals['_RELATEDENTITIES']._serialized_end=5666
+  _globals['_SUGGESTRESPONSE']._serialized_start=5669
+  _globals['_SUGGESTRESPONSE']._serialized_end=5846
+  _globals['_SEARCHRESPONSE']._serialized_start=5849
+  _globals['_SEARCHRESPONSE']._serialized_end=6079
+  _globals['_IDCOLLECTION']._serialized_start=6081
+  _globals['_IDCOLLECTION']._serialized_end=6108
+  _globals['_RELATIONEDGE']._serialized_start=6110
+  _globals['_RELATIONEDGE']._serialized_end=6191
+  _globals['_EDGELIST']._serialized_start=6193
+  _globals['_EDGELIST']._serialized_end=6243
+  _globals['_GETSHARDREQUEST']._serialized_start=6245
+  _globals['_GETSHARDREQUEST']._serialized_end=6323
+  _globals['_PARAGRAPHITEM']._serialized_start=6325
+  _globals['_PARAGRAPHITEM']._serialized_end=6368
+  _globals['_DOCUMENTITEM']._serialized_start=6370
+  _globals['_DOCUMENTITEM']._serialized_end=6429
+  _globals['_STREAMREQUEST']._serialized_start=6432
+  _globals['_STREAMREQUEST']._serialized_end=6603
+  _globals['_GETSHARDFILESREQUEST']._serialized_start=6605
+  _globals['_GETSHARDFILESREQUEST']._serialized_end=6645
+  _globals['_SHARDFILELIST']._serialized_start=6647
+  _globals['_SHARDFILELIST']._serialized_end=6700
+  _globals['_SHARDFILE']._serialized_start=6702
+  _globals['_SHARDFILE']._serialized_end=6750
+  _globals['_DOWNLOADSHARDFILEREQUEST']._serialized_start=6752
+  _globals['_DOWNLOADSHARDFILEREQUEST']._serialized_end=6819
+  _globals['_SHARDFILECHUNK']._serialized_start=6821
+  _globals['_SHARDFILECHUNK']._serialized_end=6866
+  _globals['_NODEREADER']._serialized_start=6918
+  _globals['_NODEREADER']._serialized_end=8138
 # @@protoc_insertion_point(module_scope)
```

## nucliadb_protos/nodereader_pb2.pyi

```diff
@@ -23,138 +23,162 @@
     EmptyResponse as EmptyResponse,
     IndexMetadata as IndexMetadata,
     IndexParagraph as IndexParagraph,
     IndexParagraphs as IndexParagraphs,
     NodeMetadata as NodeMetadata,
     ParagraphMetadata as ParagraphMetadata,
     Position as Position,
+    Representation as Representation,
     Resource as Resource,
     ResourceID as ResourceID,
     SentenceMetadata as SentenceMetadata,
     Shard as Shard,
-    ShardCleaned as ShardCleaned,
     ShardCreated as ShardCreated,
     ShardId as ShardId,
     ShardIds as ShardIds,
-    ShardList as ShardList,
     ShardMetadata as ShardMetadata,
     TextInformation as TextInformation,
     VectorSentence as VectorSentence,
     VectorSetID as VectorSetID,
     VectorSetList as VectorSetList,
 )
 from nucliadb_protos.utils_pb2 import (
     COSINE as COSINE,
     DOT as DOT,
+    EXPERIMENTAL as EXPERIMENTAL,
     ExtractedText as ExtractedText,
-    JoinGraph as JoinGraph,
-    JoinGraphEdge as JoinGraphEdge,
     Relation as Relation,
     RelationMetadata as RelationMetadata,
     RelationNode as RelationNode,
+    ReleaseChannel as ReleaseChannel,
+    STABLE as STABLE,
+    Security as Security,
     UserVector as UserVector,
     UserVectorSet as UserVectorSet,
     UserVectors as UserVectors,
     UserVectorsList as UserVectorsList,
     Vector as Vector,
     VectorObject as VectorObject,
     VectorSimilarity as VectorSimilarity,
     Vectors as Vectors,
 )
 
 DESCRIPTOR: google.protobuf.descriptor.FileDescriptor
 
+class _SuggestFeatures:
+    ValueType = typing.NewType("ValueType", builtins.int)
+    V: typing_extensions.TypeAlias = ValueType
+
+class _SuggestFeaturesEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[_SuggestFeatures.ValueType], builtins.type):
+    DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
+    ENTITIES: _SuggestFeatures.ValueType  # 0
+    PARAGRAPHS: _SuggestFeatures.ValueType  # 1
+
+class SuggestFeatures(_SuggestFeatures, metaclass=_SuggestFeaturesEnumTypeWrapper): ...
+
+ENTITIES: SuggestFeatures.ValueType  # 0
+PARAGRAPHS: SuggestFeatures.ValueType  # 1
+global___SuggestFeatures = SuggestFeatures
+
 @typing_extensions.final
 class Filter(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
-    TAGS_FIELD_NUMBER: builtins.int
+    FIELD_LABELS_FIELD_NUMBER: builtins.int
+    PARAGRAPH_LABELS_FIELD_NUMBER: builtins.int
+    EXPRESSION_FIELD_NUMBER: builtins.int
+    @property
+    def field_labels(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
     @property
-    def tags(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
+    def paragraph_labels(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
+    expression: builtins.str
+    """JSON string with the filter expression"""
     def __init__(
         self,
         *,
-        tags: collections.abc.Iterable[builtins.str] | None = ...,
+        field_labels: collections.abc.Iterable[builtins.str] | None = ...,
+        paragraph_labels: collections.abc.Iterable[builtins.str] | None = ...,
+        expression: builtins.str = ...,
     ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["tags", b"tags"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["expression", b"expression", "field_labels", b"field_labels", "paragraph_labels", b"paragraph_labels"]) -> None: ...
 
 global___Filter = Filter
 
 @typing_extensions.final
 class StreamFilter(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _Conjunction:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _ConjunctionEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[StreamFilter._Conjunction.ValueType], builtins.type):  # noqa: F821
+    class _ConjunctionEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[StreamFilter._Conjunction.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         AND: StreamFilter._Conjunction.ValueType  # 0
         OR: StreamFilter._Conjunction.ValueType  # 1
         NOT: StreamFilter._Conjunction.ValueType  # 2
 
     class Conjunction(_Conjunction, metaclass=_ConjunctionEnumTypeWrapper): ...
     AND: StreamFilter.Conjunction.ValueType  # 0
     OR: StreamFilter.Conjunction.ValueType  # 1
     NOT: StreamFilter.Conjunction.ValueType  # 2
 
     CONJUNCTION_FIELD_NUMBER: builtins.int
-    TAGS_FIELD_NUMBER: builtins.int
+    LABELS_FIELD_NUMBER: builtins.int
     conjunction: global___StreamFilter.Conjunction.ValueType
     @property
-    def tags(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
+    def labels(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
     def __init__(
         self,
         *,
         conjunction: global___StreamFilter.Conjunction.ValueType = ...,
-        tags: collections.abc.Iterable[builtins.str] | None = ...,
+        labels: collections.abc.Iterable[builtins.str] | None = ...,
     ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["conjunction", b"conjunction", "tags", b"tags"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["conjunction", b"conjunction", "labels", b"labels"]) -> None: ...
 
 global___StreamFilter = StreamFilter
 
 @typing_extensions.final
 class Faceted(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
-    TAGS_FIELD_NUMBER: builtins.int
+    LABELS_FIELD_NUMBER: builtins.int
     @property
-    def tags(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
+    def labels(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
     def __init__(
         self,
         *,
-        tags: collections.abc.Iterable[builtins.str] | None = ...,
+        labels: collections.abc.Iterable[builtins.str] | None = ...,
     ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["tags", b"tags"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["labels", b"labels"]) -> None: ...
 
 global___Faceted = Faceted
 
 @typing_extensions.final
 class OrderBy(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _OrderType:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _OrderTypeEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[OrderBy._OrderType.ValueType], builtins.type):  # noqa: F821
+    class _OrderTypeEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[OrderBy._OrderType.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         DESC: OrderBy._OrderType.ValueType  # 0
         ASC: OrderBy._OrderType.ValueType  # 1
 
     class OrderType(_OrderType, metaclass=_OrderTypeEnumTypeWrapper): ...
     DESC: OrderBy.OrderType.ValueType  # 0
     ASC: OrderBy.OrderType.ValueType  # 1
 
     class _OrderField:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _OrderFieldEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[OrderBy._OrderField.ValueType], builtins.type):  # noqa: F821
+    class _OrderFieldEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[OrderBy._OrderField.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         CREATED: OrderBy._OrderField.ValueType  # 0
         MODIFIED: OrderBy._OrderField.ValueType  # 1
 
     class OrderField(_OrderField, metaclass=_OrderFieldEnumTypeWrapper): ...
     CREATED: OrderBy.OrderField.ValueType  # 0
     MODIFIED: OrderBy.OrderField.ValueType  # 1
@@ -252,14 +276,15 @@
     PAGE_NUMBER_FIELD_NUMBER: builtins.int
     RESULT_PER_PAGE_FIELD_NUMBER: builtins.int
     TIMESTAMPS_FIELD_NUMBER: builtins.int
     RELOAD_FIELD_NUMBER: builtins.int
     ONLY_FACETED_FIELD_NUMBER: builtins.int
     WITH_STATUS_FIELD_NUMBER: builtins.int
     ADVANCED_QUERY_FIELD_NUMBER: builtins.int
+    MIN_SCORE_FIELD_NUMBER: builtins.int
     id: builtins.str
     body: builtins.str
     @property
     def fields(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
     @property
     def filter(self) -> global___Filter: ...
     @property
@@ -270,14 +295,15 @@
     result_per_page: builtins.int
     @property
     def timestamps(self) -> global___Timestamps: ...
     reload: builtins.bool
     only_faceted: builtins.bool
     with_status: nucliadb_protos.noderesources_pb2.Resource.ResourceStatus.ValueType
     advanced_query: builtins.str
+    min_score: builtins.float
     def __init__(
         self,
         *,
         id: builtins.str = ...,
         body: builtins.str = ...,
         fields: collections.abc.Iterable[builtins.str] | None = ...,
         filter: global___Filter | None = ...,
@@ -286,17 +312,18 @@
         page_number: builtins.int = ...,
         result_per_page: builtins.int = ...,
         timestamps: global___Timestamps | None = ...,
         reload: builtins.bool = ...,
         only_faceted: builtins.bool = ...,
         with_status: nucliadb_protos.noderesources_pb2.Resource.ResourceStatus.ValueType | None = ...,
         advanced_query: builtins.str | None = ...,
+        min_score: builtins.float = ...,
     ) -> None: ...
     def HasField(self, field_name: typing_extensions.Literal["_advanced_query", b"_advanced_query", "_with_status", b"_with_status", "advanced_query", b"advanced_query", "faceted", b"faceted", "filter", b"filter", "order", b"order", "timestamps", b"timestamps", "with_status", b"with_status"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["_advanced_query", b"_advanced_query", "_with_status", b"_with_status", "advanced_query", b"advanced_query", "body", b"body", "faceted", b"faceted", "fields", b"fields", "filter", b"filter", "id", b"id", "only_faceted", b"only_faceted", "order", b"order", "page_number", b"page_number", "reload", b"reload", "result_per_page", b"result_per_page", "timestamps", b"timestamps", "with_status", b"with_status"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["_advanced_query", b"_advanced_query", "_with_status", b"_with_status", "advanced_query", b"advanced_query", "body", b"body", "faceted", b"faceted", "fields", b"fields", "filter", b"filter", "id", b"id", "min_score", b"min_score", "only_faceted", b"only_faceted", "order", b"order", "page_number", b"page_number", "reload", b"reload", "result_per_page", b"result_per_page", "timestamps", b"timestamps", "with_status", b"with_status"]) -> None: ...
     @typing.overload
     def WhichOneof(self, oneof_group: typing_extensions.Literal["_advanced_query", b"_advanced_query"]) -> typing_extensions.Literal["advanced_query"] | None: ...
     @typing.overload
     def WhichOneof(self, oneof_group: typing_extensions.Literal["_with_status", b"_with_status"]) -> typing_extensions.Literal["with_status"] | None: ...
 
 global___DocumentSearchRequest = DocumentSearchRequest
 
@@ -314,35 +341,43 @@
     PAGE_NUMBER_FIELD_NUMBER: builtins.int
     RESULT_PER_PAGE_FIELD_NUMBER: builtins.int
     TIMESTAMPS_FIELD_NUMBER: builtins.int
     RELOAD_FIELD_NUMBER: builtins.int
     WITH_DUPLICATES_FIELD_NUMBER: builtins.int
     ONLY_FACETED_FIELD_NUMBER: builtins.int
     ADVANCED_QUERY_FIELD_NUMBER: builtins.int
+    KEY_FILTERS_FIELD_NUMBER: builtins.int
+    MIN_SCORE_FIELD_NUMBER: builtins.int
+    SECURITY_FIELD_NUMBER: builtins.int
     id: builtins.str
     uuid: builtins.str
     @property
     def fields(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
     body: builtins.str
     """query this text in all the paragraphs"""
     @property
     def filter(self) -> global___Filter: ...
     @property
     def order(self) -> global___OrderBy: ...
     @property
     def faceted(self) -> global___Faceted:
-        """Faceted{ tags: Vec<String>}"""
+        """Faceted{ labels: Vec<String>}"""
     page_number: builtins.int
     result_per_page: builtins.int
     @property
     def timestamps(self) -> global___Timestamps: ...
     reload: builtins.bool
     with_duplicates: builtins.bool
     only_faceted: builtins.bool
     advanced_query: builtins.str
+    @property
+    def key_filters(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
+    min_score: builtins.float
+    @property
+    def security(self) -> nucliadb_protos.utils_pb2.Security: ...
     def __init__(
         self,
         *,
         id: builtins.str = ...,
         uuid: builtins.str = ...,
         fields: collections.abc.Iterable[builtins.str] | None = ...,
         body: builtins.str = ...,
@@ -352,30 +387,36 @@
         page_number: builtins.int = ...,
         result_per_page: builtins.int = ...,
         timestamps: global___Timestamps | None = ...,
         reload: builtins.bool = ...,
         with_duplicates: builtins.bool = ...,
         only_faceted: builtins.bool = ...,
         advanced_query: builtins.str | None = ...,
+        key_filters: collections.abc.Iterable[builtins.str] | None = ...,
+        min_score: builtins.float = ...,
+        security: nucliadb_protos.utils_pb2.Security | None = ...,
     ) -> None: ...
-    def HasField(self, field_name: typing_extensions.Literal["_advanced_query", b"_advanced_query", "advanced_query", b"advanced_query", "faceted", b"faceted", "filter", b"filter", "order", b"order", "timestamps", b"timestamps"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["_advanced_query", b"_advanced_query", "advanced_query", b"advanced_query", "body", b"body", "faceted", b"faceted", "fields", b"fields", "filter", b"filter", "id", b"id", "only_faceted", b"only_faceted", "order", b"order", "page_number", b"page_number", "reload", b"reload", "result_per_page", b"result_per_page", "timestamps", b"timestamps", "uuid", b"uuid", "with_duplicates", b"with_duplicates"]) -> None: ...
+    def HasField(self, field_name: typing_extensions.Literal["_advanced_query", b"_advanced_query", "_security", b"_security", "advanced_query", b"advanced_query", "faceted", b"faceted", "filter", b"filter", "order", b"order", "security", b"security", "timestamps", b"timestamps"]) -> builtins.bool: ...
+    def ClearField(self, field_name: typing_extensions.Literal["_advanced_query", b"_advanced_query", "_security", b"_security", "advanced_query", b"advanced_query", "body", b"body", "faceted", b"faceted", "fields", b"fields", "filter", b"filter", "id", b"id", "key_filters", b"key_filters", "min_score", b"min_score", "only_faceted", b"only_faceted", "order", b"order", "page_number", b"page_number", "reload", b"reload", "result_per_page", b"result_per_page", "security", b"security", "timestamps", b"timestamps", "uuid", b"uuid", "with_duplicates", b"with_duplicates"]) -> None: ...
+    @typing.overload
     def WhichOneof(self, oneof_group: typing_extensions.Literal["_advanced_query", b"_advanced_query"]) -> typing_extensions.Literal["advanced_query"] | None: ...
+    @typing.overload
+    def WhichOneof(self, oneof_group: typing_extensions.Literal["_security", b"_security"]) -> typing_extensions.Literal["security"] | None: ...
 
 global___ParagraphSearchRequest = ParagraphSearchRequest
 
 @typing_extensions.final
 class ResultScore(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     BM25_FIELD_NUMBER: builtins.int
     BOOSTER_FIELD_NUMBER: builtins.int
     bm25: builtins.float
     booster: builtins.float
-    """In the case of two equal bm25 scores, booster 
+    """In the case of two equal bm25 scores, booster
     decides
     """
     def __init__(
         self,
         *,
         bm25: builtins.float = ...,
         booster: builtins.float = ...,
@@ -590,52 +631,64 @@
 global___ParagraphSearchResponse = ParagraphSearchResponse
 
 @typing_extensions.final
 class VectorSearchRequest(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     ID_FIELD_NUMBER: builtins.int
-    VECTOR_SET_FIELD_NUMBER: builtins.int
     VECTOR_FIELD_NUMBER: builtins.int
-    TAGS_FIELD_NUMBER: builtins.int
+    FIELD_LABELS_FIELD_NUMBER: builtins.int
+    PARAGRAPH_LABELS_FIELD_NUMBER: builtins.int
     PAGE_NUMBER_FIELD_NUMBER: builtins.int
     RESULT_PER_PAGE_FIELD_NUMBER: builtins.int
-    WITH_DUPLICATES_FIELD_NUMBER: builtins.int
     RELOAD_FIELD_NUMBER: builtins.int
+    WITH_DUPLICATES_FIELD_NUMBER: builtins.int
+    VECTOR_SET_FIELD_NUMBER: builtins.int
+    KEY_FILTERS_FIELD_NUMBER: builtins.int
+    MIN_SCORE_FIELD_NUMBER: builtins.int
     id: builtins.str
     """Shard ID"""
-    vector_set: builtins.str
-    """ID for the vector set.
-    Empty for searching on the original index
-    """
     @property
     def vector(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.float]:
         """Embedded vector search."""
     @property
-    def tags(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]:
-        """tags to filter"""
+    def field_labels(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]:
+        """labels to filter"""
+    @property
+    def paragraph_labels(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]:
+        """paragraph labels to filter"""
     page_number: builtins.int
     """What page is the answer."""
     result_per_page: builtins.int
     """How many results are in this page."""
-    with_duplicates: builtins.bool
     reload: builtins.bool
+    with_duplicates: builtins.bool
+    vector_set: builtins.str
+    """ID for the vector set.
+    Empty for searching on the original index
+    """
+    @property
+    def key_filters(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
+    min_score: builtins.float
     def __init__(
         self,
         *,
         id: builtins.str = ...,
-        vector_set: builtins.str = ...,
         vector: collections.abc.Iterable[builtins.float] | None = ...,
-        tags: collections.abc.Iterable[builtins.str] | None = ...,
+        field_labels: collections.abc.Iterable[builtins.str] | None = ...,
+        paragraph_labels: collections.abc.Iterable[builtins.str] | None = ...,
         page_number: builtins.int = ...,
         result_per_page: builtins.int = ...,
-        with_duplicates: builtins.bool = ...,
         reload: builtins.bool = ...,
+        with_duplicates: builtins.bool = ...,
+        vector_set: builtins.str = ...,
+        key_filters: collections.abc.Iterable[builtins.str] | None = ...,
+        min_score: builtins.float = ...,
     ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["id", b"id", "page_number", b"page_number", "reload", b"reload", "result_per_page", b"result_per_page", "tags", b"tags", "vector", b"vector", "vector_set", b"vector_set", "with_duplicates", b"with_duplicates"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["field_labels", b"field_labels", "id", b"id", "key_filters", b"key_filters", "min_score", b"min_score", "page_number", b"page_number", "paragraph_labels", b"paragraph_labels", "reload", b"reload", "result_per_page", b"result_per_page", "vector", b"vector", "vector_set", b"vector_set", "with_duplicates", b"with_duplicates"]) -> None: ...
 
 global___VectorSearchRequest = VectorSearchRequest
 
 @typing_extensions.final
 class DocumentVectorIdentifier(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
@@ -725,25 +778,29 @@
 
 @typing_extensions.final
 class RelationEdgeFilter(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     RELATION_TYPE_FIELD_NUMBER: builtins.int
     RELATION_SUBTYPE_FIELD_NUMBER: builtins.int
+    RELATION_VALUE_FIELD_NUMBER: builtins.int
     relation_type: nucliadb_protos.utils_pb2.Relation.RelationType.ValueType
     """Will filter the search to edges of type ntype."""
     relation_subtype: builtins.str
+    @property
+    def relation_value(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
     def __init__(
         self,
         *,
         relation_type: nucliadb_protos.utils_pb2.Relation.RelationType.ValueType = ...,
         relation_subtype: builtins.str | None = ...,
+        relation_value: collections.abc.Iterable[builtins.str] | None = ...,
     ) -> None: ...
     def HasField(self, field_name: typing_extensions.Literal["_relation_subtype", b"_relation_subtype", "relation_subtype", b"relation_subtype"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["_relation_subtype", b"_relation_subtype", "relation_subtype", b"relation_subtype", "relation_type", b"relation_type"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["_relation_subtype", b"_relation_subtype", "relation_subtype", b"relation_subtype", "relation_type", b"relation_type", "relation_value", b"relation_value"]) -> None: ...
     def WhichOneof(self, oneof_group: typing_extensions.Literal["_relation_subtype", b"_relation_subtype"]) -> typing_extensions.Literal["relation_subtype"] | None: ...
 
 global___RelationEdgeFilter = RelationEdgeFilter
 
 @typing_extensions.final
 class RelationPrefixSearchRequest(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
@@ -779,42 +836,53 @@
 
 global___RelationPrefixSearchResponse = RelationPrefixSearchResponse
 
 @typing_extensions.final
 class EntitiesSubgraphRequest(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
+    @typing_extensions.final
+    class DeletedEntities(google.protobuf.message.Message):
+        DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+        NODE_SUBTYPE_FIELD_NUMBER: builtins.int
+        NODE_VALUES_FIELD_NUMBER: builtins.int
+        node_subtype: builtins.str
+        @property
+        def node_values(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
+        def __init__(
+            self,
+            *,
+            node_subtype: builtins.str = ...,
+            node_values: collections.abc.Iterable[builtins.str] | None = ...,
+        ) -> None: ...
+        def ClearField(self, field_name: typing_extensions.Literal["node_subtype", b"node_subtype", "node_values", b"node_values"]) -> None: ...
+
     ENTRY_POINTS_FIELD_NUMBER: builtins.int
-    NODE_FILTERS_FIELD_NUMBER: builtins.int
-    EDGE_FILTERS_FIELD_NUMBER: builtins.int
     DEPTH_FIELD_NUMBER: builtins.int
+    DELETED_ENTITIES_FIELD_NUMBER: builtins.int
+    DELETED_GROUPS_FIELD_NUMBER: builtins.int
     @property
     def entry_points(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[nucliadb_protos.utils_pb2.RelationNode]:
         """List of vertices where search will trigger"""
+    depth: builtins.int
     @property
-    def node_filters(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___RelationNodeFilter]:
-        """Filters to apply while searching. It's an OR filtering: any
-        node (vertex) satisfying one condition will be returned
-        """
+    def deleted_entities(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___EntitiesSubgraphRequest.DeletedEntities]: ...
     @property
-    def edge_filters(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___RelationEdgeFilter]:
-        """Filters to apply while searching. It's an OR filtering: any
-        edge satisfying one condition will be returned
-        """
-    depth: builtins.int
+    def deleted_groups(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
     def __init__(
         self,
         *,
         entry_points: collections.abc.Iterable[nucliadb_protos.utils_pb2.RelationNode] | None = ...,
-        node_filters: collections.abc.Iterable[global___RelationNodeFilter] | None = ...,
-        edge_filters: collections.abc.Iterable[global___RelationEdgeFilter] | None = ...,
         depth: builtins.int | None = ...,
+        deleted_entities: collections.abc.Iterable[global___EntitiesSubgraphRequest.DeletedEntities] | None = ...,
+        deleted_groups: collections.abc.Iterable[builtins.str] | None = ...,
     ) -> None: ...
     def HasField(self, field_name: typing_extensions.Literal["_depth", b"_depth", "depth", b"depth"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["_depth", b"_depth", "depth", b"depth", "edge_filters", b"edge_filters", "entry_points", b"entry_points", "node_filters", b"node_filters"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["_depth", b"_depth", "deleted_entities", b"deleted_entities", "deleted_groups", b"deleted_groups", "depth", b"depth", "entry_points", b"entry_points"]) -> None: ...
     def WhichOneof(self, oneof_group: typing_extensions.Literal["_depth", b"_depth"]) -> typing_extensions.Literal["depth"] | None: ...
 
 global___EntitiesSubgraphRequest = EntitiesSubgraphRequest
 
 @typing_extensions.final
 class EntitiesSubgraphResponse(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
@@ -829,47 +897,34 @@
     ) -> None: ...
     def ClearField(self, field_name: typing_extensions.Literal["relations", b"relations"]) -> None: ...
 
 global___EntitiesSubgraphResponse = EntitiesSubgraphResponse
 
 @typing_extensions.final
 class RelationSearchRequest(google.protobuf.message.Message):
-    """TODO: uncomment and implement (next iteration)
-    message RelationPathsSearchRequest {
-        message PathEndpoints {
-            utils.RelationNode origin = 1;
-            utils.RelationNode destination = 2;
-        }
-        repeated PathEndpoints paths = 1;
-    }
-
-    Query relation index to obtain different information about the
+    """Query relation index to obtain different information about the
     knowledge graph. It can be queried using the following strategies:
 
     - prefix search over vertex (node) names
     - graph search:
       - given some entry vertices, get the filtered subgraph around them
-      - (TODO) given some vertices, get paths between them
     """
 
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     SHARD_ID_FIELD_NUMBER: builtins.int
     RELOAD_FIELD_NUMBER: builtins.int
     PREFIX_FIELD_NUMBER: builtins.int
     SUBGRAPH_FIELD_NUMBER: builtins.int
     shard_id: builtins.str
     reload: builtins.bool
     @property
     def prefix(self) -> global___RelationPrefixSearchRequest: ...
     @property
-    def subgraph(self) -> global___EntitiesSubgraphRequest:
-        """TODO: uncomment and implement (next iteration)
-        RelationPathsSearchRequest paths = 13;
-        """
+    def subgraph(self) -> global___EntitiesSubgraphRequest: ...
     def __init__(
         self,
         *,
         shard_id: builtins.str = ...,
         reload: builtins.bool = ...,
         prefix: global___RelationPrefixSearchRequest | None = ...,
         subgraph: global___EntitiesSubgraphRequest | None = ...,
@@ -884,18 +939,15 @@
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     PREFIX_FIELD_NUMBER: builtins.int
     SUBGRAPH_FIELD_NUMBER: builtins.int
     @property
     def prefix(self) -> global___RelationPrefixSearchResponse: ...
     @property
-    def subgraph(self) -> global___EntitiesSubgraphResponse:
-        """TODO: uncomment and implement (next iteration)
-        repeated utils.RelationPath paths = 13;
-        """
+    def subgraph(self) -> global___EntitiesSubgraphResponse: ...
     def __init__(
         self,
         *,
         prefix: global___RelationPrefixSearchResponse | None = ...,
         subgraph: global___EntitiesSubgraphResponse | None = ...,
     ) -> None: ...
     def HasField(self, field_name: typing_extensions.Literal["prefix", b"prefix", "subgraph", b"subgraph"]) -> builtins.bool: ...
@@ -924,26 +976,29 @@
     WITH_DUPLICATES_FIELD_NUMBER: builtins.int
     ONLY_FACETED_FIELD_NUMBER: builtins.int
     ADVANCED_QUERY_FIELD_NUMBER: builtins.int
     WITH_STATUS_FIELD_NUMBER: builtins.int
     RELATIONS_FIELD_NUMBER: builtins.int
     RELATION_PREFIX_FIELD_NUMBER: builtins.int
     RELATION_SUBGRAPH_FIELD_NUMBER: builtins.int
+    KEY_FILTERS_FIELD_NUMBER: builtins.int
+    MIN_SCORE_SEMANTIC_FIELD_NUMBER: builtins.int
+    MIN_SCORE_BM25_FIELD_NUMBER: builtins.int
+    SECURITY_FIELD_NUMBER: builtins.int
     shard: builtins.str
     @property
     def fields(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
     body: builtins.str
     """query this text in all the paragraphs"""
     @property
     def filter(self) -> global___Filter: ...
     @property
     def order(self) -> global___OrderBy: ...
     @property
-    def faceted(self) -> global___Faceted:
-        """Faceted{ tags: Vec<String>}"""
+    def faceted(self) -> global___Faceted: ...
     page_number: builtins.int
     result_per_page: builtins.int
     @property
     def timestamps(self) -> global___Timestamps: ...
     @property
     def vector(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.float]:
         """Embedded vector search."""
@@ -960,14 +1015,20 @@
         """if provided, search metadata for this nodes (nodes at distance
         one) and get the shortest path between nodes
         """
     @property
     def relation_prefix(self) -> global___RelationPrefixSearchRequest: ...
     @property
     def relation_subgraph(self) -> global___EntitiesSubgraphRequest: ...
+    @property
+    def key_filters(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
+    min_score_semantic: builtins.float
+    min_score_bm25: builtins.float
+    @property
+    def security(self) -> nucliadb_protos.utils_pb2.Security: ...
     def __init__(
         self,
         *,
         shard: builtins.str = ...,
         fields: collections.abc.Iterable[builtins.str] | None = ...,
         body: builtins.str = ...,
         filter: global___Filter | None = ...,
@@ -984,52 +1045,62 @@
         with_duplicates: builtins.bool = ...,
         only_faceted: builtins.bool = ...,
         advanced_query: builtins.str | None = ...,
         with_status: nucliadb_protos.noderesources_pb2.Resource.ResourceStatus.ValueType | None = ...,
         relations: global___RelationSearchRequest | None = ...,
         relation_prefix: global___RelationPrefixSearchRequest | None = ...,
         relation_subgraph: global___EntitiesSubgraphRequest | None = ...,
+        key_filters: collections.abc.Iterable[builtins.str] | None = ...,
+        min_score_semantic: builtins.float = ...,
+        min_score_bm25: builtins.float = ...,
+        security: nucliadb_protos.utils_pb2.Security | None = ...,
     ) -> None: ...
-    def HasField(self, field_name: typing_extensions.Literal["_advanced_query", b"_advanced_query", "_with_status", b"_with_status", "advanced_query", b"advanced_query", "faceted", b"faceted", "filter", b"filter", "order", b"order", "relation_prefix", b"relation_prefix", "relation_subgraph", b"relation_subgraph", "relations", b"relations", "timestamps", b"timestamps", "with_status", b"with_status"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["_advanced_query", b"_advanced_query", "_with_status", b"_with_status", "advanced_query", b"advanced_query", "body", b"body", "document", b"document", "faceted", b"faceted", "fields", b"fields", "filter", b"filter", "only_faceted", b"only_faceted", "order", b"order", "page_number", b"page_number", "paragraph", b"paragraph", "relation_prefix", b"relation_prefix", "relation_subgraph", b"relation_subgraph", "relations", b"relations", "reload", b"reload", "result_per_page", b"result_per_page", "shard", b"shard", "timestamps", b"timestamps", "vector", b"vector", "vectorset", b"vectorset", "with_duplicates", b"with_duplicates", "with_status", b"with_status"]) -> None: ...
+    def HasField(self, field_name: typing_extensions.Literal["_advanced_query", b"_advanced_query", "_security", b"_security", "_with_status", b"_with_status", "advanced_query", b"advanced_query", "faceted", b"faceted", "filter", b"filter", "order", b"order", "relation_prefix", b"relation_prefix", "relation_subgraph", b"relation_subgraph", "relations", b"relations", "security", b"security", "timestamps", b"timestamps", "with_status", b"with_status"]) -> builtins.bool: ...
+    def ClearField(self, field_name: typing_extensions.Literal["_advanced_query", b"_advanced_query", "_security", b"_security", "_with_status", b"_with_status", "advanced_query", b"advanced_query", "body", b"body", "document", b"document", "faceted", b"faceted", "fields", b"fields", "filter", b"filter", "key_filters", b"key_filters", "min_score_bm25", b"min_score_bm25", "min_score_semantic", b"min_score_semantic", "only_faceted", b"only_faceted", "order", b"order", "page_number", b"page_number", "paragraph", b"paragraph", "relation_prefix", b"relation_prefix", "relation_subgraph", b"relation_subgraph", "relations", b"relations", "reload", b"reload", "result_per_page", b"result_per_page", "security", b"security", "shard", b"shard", "timestamps", b"timestamps", "vector", b"vector", "vectorset", b"vectorset", "with_duplicates", b"with_duplicates", "with_status", b"with_status"]) -> None: ...
     @typing.overload
     def WhichOneof(self, oneof_group: typing_extensions.Literal["_advanced_query", b"_advanced_query"]) -> typing_extensions.Literal["advanced_query"] | None: ...
     @typing.overload
+    def WhichOneof(self, oneof_group: typing_extensions.Literal["_security", b"_security"]) -> typing_extensions.Literal["security"] | None: ...
+    @typing.overload
     def WhichOneof(self, oneof_group: typing_extensions.Literal["_with_status", b"_with_status"]) -> typing_extensions.Literal["with_status"] | None: ...
 
 global___SearchRequest = SearchRequest
 
 @typing_extensions.final
 class SuggestRequest(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     SHARD_FIELD_NUMBER: builtins.int
     BODY_FIELD_NUMBER: builtins.int
+    FEATURES_FIELD_NUMBER: builtins.int
     FILTER_FIELD_NUMBER: builtins.int
     TIMESTAMPS_FIELD_NUMBER: builtins.int
     FIELDS_FIELD_NUMBER: builtins.int
     shard: builtins.str
     body: builtins.str
     @property
+    def features(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[global___SuggestFeatures.ValueType]: ...
+    @property
     def filter(self) -> global___Filter: ...
     @property
     def timestamps(self) -> global___Timestamps: ...
     @property
     def fields(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
     def __init__(
         self,
         *,
         shard: builtins.str = ...,
         body: builtins.str = ...,
+        features: collections.abc.Iterable[global___SuggestFeatures.ValueType] | None = ...,
         filter: global___Filter | None = ...,
         timestamps: global___Timestamps | None = ...,
         fields: collections.abc.Iterable[builtins.str] | None = ...,
     ) -> None: ...
     def HasField(self, field_name: typing_extensions.Literal["filter", b"filter", "timestamps", b"timestamps"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["body", b"body", "fields", b"fields", "filter", b"filter", "shard", b"shard", "timestamps", b"timestamps"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["body", b"body", "features", b"features", "fields", b"fields", "filter", b"filter", "shard", b"shard", "timestamps", b"timestamps"]) -> None: ...
 
 global___SuggestRequest = SuggestRequest
 
 @typing_extensions.final
 class RelatedEntities(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
@@ -1052,36 +1123,36 @@
 class SuggestResponse(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     TOTAL_FIELD_NUMBER: builtins.int
     RESULTS_FIELD_NUMBER: builtins.int
     QUERY_FIELD_NUMBER: builtins.int
     EMATCHES_FIELD_NUMBER: builtins.int
-    ENTITIES_FIELD_NUMBER: builtins.int
+    ENTITY_RESULTS_FIELD_NUMBER: builtins.int
     total: builtins.int
     @property
     def results(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___ParagraphResult]: ...
     query: builtins.str
     """The text that lead to this results"""
     @property
     def ematches(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
     @property
-    def entities(self) -> global___RelatedEntities:
+    def entity_results(self) -> global___RelationPrefixSearchResponse:
         """Entities related with the query"""
     def __init__(
         self,
         *,
         total: builtins.int = ...,
         results: collections.abc.Iterable[global___ParagraphResult] | None = ...,
         query: builtins.str = ...,
         ematches: collections.abc.Iterable[builtins.str] | None = ...,
-        entities: global___RelatedEntities | None = ...,
+        entity_results: global___RelationPrefixSearchResponse | None = ...,
     ) -> None: ...
-    def HasField(self, field_name: typing_extensions.Literal["entities", b"entities"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["ematches", b"ematches", "entities", b"entities", "query", b"query", "results", b"results", "total", b"total"]) -> None: ...
+    def HasField(self, field_name: typing_extensions.Literal["entity_results", b"entity_results"]) -> builtins.bool: ...
+    def ClearField(self, field_name: typing_extensions.Literal["ematches", b"ematches", "entity_results", b"entity_results", "query", b"query", "results", b"results", "total", b"total"]) -> None: ...
 
 global___SuggestResponse = SuggestResponse
 
 @typing_extensions.final
 class SearchResponse(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
@@ -1157,48 +1228,14 @@
         list: collections.abc.Iterable[global___RelationEdge] | None = ...,
     ) -> None: ...
     def ClearField(self, field_name: typing_extensions.Literal["list", b"list"]) -> None: ...
 
 global___EdgeList = EdgeList
 
 @typing_extensions.final
-class RelationTypeListMember(google.protobuf.message.Message):
-    DESCRIPTOR: google.protobuf.descriptor.Descriptor
-
-    WITH_TYPE_FIELD_NUMBER: builtins.int
-    WITH_SUBTYPE_FIELD_NUMBER: builtins.int
-    with_type: nucliadb_protos.utils_pb2.RelationNode.NodeType.ValueType
-    with_subtype: builtins.str
-    def __init__(
-        self,
-        *,
-        with_type: nucliadb_protos.utils_pb2.RelationNode.NodeType.ValueType = ...,
-        with_subtype: builtins.str = ...,
-    ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["with_subtype", b"with_subtype", "with_type", b"with_type"]) -> None: ...
-
-global___RelationTypeListMember = RelationTypeListMember
-
-@typing_extensions.final
-class TypeList(google.protobuf.message.Message):
-    DESCRIPTOR: google.protobuf.descriptor.Descriptor
-
-    LIST_FIELD_NUMBER: builtins.int
-    @property
-    def list(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___RelationTypeListMember]: ...
-    def __init__(
-        self,
-        *,
-        list: collections.abc.Iterable[global___RelationTypeListMember] | None = ...,
-    ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["list", b"list"]) -> None: ...
-
-global___TypeList = TypeList
-
-@typing_extensions.final
 class GetShardRequest(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     SHARD_ID_FIELD_NUMBER: builtins.int
     VECTORSET_FIELD_NUMBER: builtins.int
     @property
     def shard_id(self) -> nucliadb_protos.noderesources_pb2.ShardId: ...
@@ -1278,7 +1315,92 @@
         shard_id: nucliadb_protos.noderesources_pb2.ShardId | None = ...,
         filter: global___StreamFilter | None = ...,
     ) -> None: ...
     def HasField(self, field_name: typing_extensions.Literal["filter", b"filter", "filter__deprecated", b"filter__deprecated", "shard_id", b"shard_id"]) -> builtins.bool: ...
     def ClearField(self, field_name: typing_extensions.Literal["filter", b"filter", "filter__deprecated", b"filter__deprecated", "reload", b"reload", "shard_id", b"shard_id"]) -> None: ...
 
 global___StreamRequest = StreamRequest
+
+@typing_extensions.final
+class GetShardFilesRequest(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    SHARD_ID_FIELD_NUMBER: builtins.int
+    shard_id: builtins.str
+    def __init__(
+        self,
+        *,
+        shard_id: builtins.str = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["shard_id", b"shard_id"]) -> None: ...
+
+global___GetShardFilesRequest = GetShardFilesRequest
+
+@typing_extensions.final
+class ShardFileList(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    FILES_FIELD_NUMBER: builtins.int
+    @property
+    def files(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___ShardFile]: ...
+    def __init__(
+        self,
+        *,
+        files: collections.abc.Iterable[global___ShardFile] | None = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["files", b"files"]) -> None: ...
+
+global___ShardFileList = ShardFileList
+
+@typing_extensions.final
+class ShardFile(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    RELATIVE_PATH_FIELD_NUMBER: builtins.int
+    SIZE_FIELD_NUMBER: builtins.int
+    relative_path: builtins.str
+    size: builtins.int
+    def __init__(
+        self,
+        *,
+        relative_path: builtins.str = ...,
+        size: builtins.int = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["relative_path", b"relative_path", "size", b"size"]) -> None: ...
+
+global___ShardFile = ShardFile
+
+@typing_extensions.final
+class DownloadShardFileRequest(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    SHARD_ID_FIELD_NUMBER: builtins.int
+    RELATIVE_PATH_FIELD_NUMBER: builtins.int
+    shard_id: builtins.str
+    relative_path: builtins.str
+    def __init__(
+        self,
+        *,
+        shard_id: builtins.str = ...,
+        relative_path: builtins.str = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["relative_path", b"relative_path", "shard_id", b"shard_id"]) -> None: ...
+
+global___DownloadShardFileRequest = DownloadShardFileRequest
+
+@typing_extensions.final
+class ShardFileChunk(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    DATA_FIELD_NUMBER: builtins.int
+    INDEX_FIELD_NUMBER: builtins.int
+    data: builtins.bytes
+    index: builtins.int
+    def __init__(
+        self,
+        *,
+        data: builtins.bytes = ...,
+        index: builtins.int = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["data", b"data", "index", b"index"]) -> None: ...
+
+global___ShardFileChunk = ShardFileChunk
```

## nucliadb_protos/nodereader_pb2_grpc.py

```diff
@@ -18,19 +18,14 @@
             channel: A grpc.Channel.
         """
         self.GetShard = channel.unary_unary(
                 '/nodereader.NodeReader/GetShard',
                 request_serializer=nucliadb__protos_dot_nodereader__pb2.GetShardRequest.SerializeToString,
                 response_deserializer=nucliadb__protos_dot_noderesources__pb2.Shard.FromString,
                 )
-        self.GetShards = channel.unary_unary(
-                '/nodereader.NodeReader/GetShards',
-                request_serializer=nucliadb__protos_dot_noderesources__pb2.EmptyQuery.SerializeToString,
-                response_deserializer=nucliadb__protos_dot_noderesources__pb2.ShardList.FromString,
-                )
         self.DocumentSearch = channel.unary_unary(
                 '/nodereader.NodeReader/DocumentSearch',
                 request_serializer=nucliadb__protos_dot_nodereader__pb2.DocumentSearchRequest.SerializeToString,
                 response_deserializer=nucliadb__protos_dot_nodereader__pb2.DocumentSearchResponse.FromString,
                 )
         self.ParagraphSearch = channel.unary_unary(
                 '/nodereader.NodeReader/ParagraphSearch',
@@ -68,19 +63,14 @@
                 response_deserializer=nucliadb__protos_dot_nodereader__pb2.IdCollection.FromString,
                 )
         self.RelationEdges = channel.unary_unary(
                 '/nodereader.NodeReader/RelationEdges',
                 request_serializer=nucliadb__protos_dot_noderesources__pb2.ShardId.SerializeToString,
                 response_deserializer=nucliadb__protos_dot_nodereader__pb2.EdgeList.FromString,
                 )
-        self.RelationTypes = channel.unary_unary(
-                '/nodereader.NodeReader/RelationTypes',
-                request_serializer=nucliadb__protos_dot_noderesources__pb2.ShardId.SerializeToString,
-                response_deserializer=nucliadb__protos_dot_nodereader__pb2.TypeList.FromString,
-                )
         self.Search = channel.unary_unary(
                 '/nodereader.NodeReader/Search',
                 request_serializer=nucliadb__protos_dot_nodereader__pb2.SearchRequest.SerializeToString,
                 response_deserializer=nucliadb__protos_dot_nodereader__pb2.SearchResponse.FromString,
                 )
         self.Suggest = channel.unary_unary(
                 '/nodereader.NodeReader/Suggest',
@@ -93,33 +83,37 @@
                 response_deserializer=nucliadb__protos_dot_nodereader__pb2.ParagraphItem.FromString,
                 )
         self.Documents = channel.unary_stream(
                 '/nodereader.NodeReader/Documents',
                 request_serializer=nucliadb__protos_dot_nodereader__pb2.StreamRequest.SerializeToString,
                 response_deserializer=nucliadb__protos_dot_nodereader__pb2.DocumentItem.FromString,
                 )
+        self.GetShardFiles = channel.unary_unary(
+                '/nodereader.NodeReader/GetShardFiles',
+                request_serializer=nucliadb__protos_dot_nodereader__pb2.GetShardFilesRequest.SerializeToString,
+                response_deserializer=nucliadb__protos_dot_nodereader__pb2.ShardFileList.FromString,
+                )
+        self.DownloadShardFile = channel.unary_stream(
+                '/nodereader.NodeReader/DownloadShardFile',
+                request_serializer=nucliadb__protos_dot_nodereader__pb2.DownloadShardFileRequest.SerializeToString,
+                response_deserializer=nucliadb__protos_dot_nodereader__pb2.ShardFileChunk.FromString,
+                )
 
 
 class NodeReaderServicer(object):
     """Implemented at nucliadb_object_storage
 
     """
 
     def GetShard(self, request, context):
         """Missing associated documentation comment in .proto file."""
         context.set_code(grpc.StatusCode.UNIMPLEMENTED)
         context.set_details('Method not implemented!')
         raise NotImplementedError('Method not implemented!')
 
-    def GetShards(self, request, context):
-        """Missing associated documentation comment in .proto file."""
-        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
-        context.set_details('Method not implemented!')
-        raise NotImplementedError('Method not implemented!')
-
     def DocumentSearch(self, request, context):
         """Missing associated documentation comment in .proto file."""
         context.set_code(grpc.StatusCode.UNIMPLEMENTED)
         context.set_details('Method not implemented!')
         raise NotImplementedError('Method not implemented!')
 
     def ParagraphSearch(self, request, context):
@@ -166,20 +160,14 @@
 
     def RelationEdges(self, request, context):
         """Missing associated documentation comment in .proto file."""
         context.set_code(grpc.StatusCode.UNIMPLEMENTED)
         context.set_details('Method not implemented!')
         raise NotImplementedError('Method not implemented!')
 
-    def RelationTypes(self, request, context):
-        """Missing associated documentation comment in .proto file."""
-        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
-        context.set_details('Method not implemented!')
-        raise NotImplementedError('Method not implemented!')
-
     def Search(self, request, context):
         """Missing associated documentation comment in .proto file."""
         context.set_code(grpc.StatusCode.UNIMPLEMENTED)
         context.set_details('Method not implemented!')
         raise NotImplementedError('Method not implemented!')
 
     def Suggest(self, request, context):
@@ -197,27 +185,35 @@
 
     def Documents(self, request, context):
         """Missing associated documentation comment in .proto file."""
         context.set_code(grpc.StatusCode.UNIMPLEMENTED)
         context.set_details('Method not implemented!')
         raise NotImplementedError('Method not implemented!')
 
+    def GetShardFiles(self, request, context):
+        """Shard Download
+        """
+        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
+        context.set_details('Method not implemented!')
+        raise NotImplementedError('Method not implemented!')
+
+    def DownloadShardFile(self, request, context):
+        """Missing associated documentation comment in .proto file."""
+        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
+        context.set_details('Method not implemented!')
+        raise NotImplementedError('Method not implemented!')
+
 
 def add_NodeReaderServicer_to_server(servicer, server):
     rpc_method_handlers = {
             'GetShard': grpc.unary_unary_rpc_method_handler(
                     servicer.GetShard,
                     request_deserializer=nucliadb__protos_dot_nodereader__pb2.GetShardRequest.FromString,
                     response_serializer=nucliadb__protos_dot_noderesources__pb2.Shard.SerializeToString,
             ),
-            'GetShards': grpc.unary_unary_rpc_method_handler(
-                    servicer.GetShards,
-                    request_deserializer=nucliadb__protos_dot_noderesources__pb2.EmptyQuery.FromString,
-                    response_serializer=nucliadb__protos_dot_noderesources__pb2.ShardList.SerializeToString,
-            ),
             'DocumentSearch': grpc.unary_unary_rpc_method_handler(
                     servicer.DocumentSearch,
                     request_deserializer=nucliadb__protos_dot_nodereader__pb2.DocumentSearchRequest.FromString,
                     response_serializer=nucliadb__protos_dot_nodereader__pb2.DocumentSearchResponse.SerializeToString,
             ),
             'ParagraphSearch': grpc.unary_unary_rpc_method_handler(
                     servicer.ParagraphSearch,
@@ -255,19 +251,14 @@
                     response_serializer=nucliadb__protos_dot_nodereader__pb2.IdCollection.SerializeToString,
             ),
             'RelationEdges': grpc.unary_unary_rpc_method_handler(
                     servicer.RelationEdges,
                     request_deserializer=nucliadb__protos_dot_noderesources__pb2.ShardId.FromString,
                     response_serializer=nucliadb__protos_dot_nodereader__pb2.EdgeList.SerializeToString,
             ),
-            'RelationTypes': grpc.unary_unary_rpc_method_handler(
-                    servicer.RelationTypes,
-                    request_deserializer=nucliadb__protos_dot_noderesources__pb2.ShardId.FromString,
-                    response_serializer=nucliadb__protos_dot_nodereader__pb2.TypeList.SerializeToString,
-            ),
             'Search': grpc.unary_unary_rpc_method_handler(
                     servicer.Search,
                     request_deserializer=nucliadb__protos_dot_nodereader__pb2.SearchRequest.FromString,
                     response_serializer=nucliadb__protos_dot_nodereader__pb2.SearchResponse.SerializeToString,
             ),
             'Suggest': grpc.unary_unary_rpc_method_handler(
                     servicer.Suggest,
@@ -280,14 +271,24 @@
                     response_serializer=nucliadb__protos_dot_nodereader__pb2.ParagraphItem.SerializeToString,
             ),
             'Documents': grpc.unary_stream_rpc_method_handler(
                     servicer.Documents,
                     request_deserializer=nucliadb__protos_dot_nodereader__pb2.StreamRequest.FromString,
                     response_serializer=nucliadb__protos_dot_nodereader__pb2.DocumentItem.SerializeToString,
             ),
+            'GetShardFiles': grpc.unary_unary_rpc_method_handler(
+                    servicer.GetShardFiles,
+                    request_deserializer=nucliadb__protos_dot_nodereader__pb2.GetShardFilesRequest.FromString,
+                    response_serializer=nucliadb__protos_dot_nodereader__pb2.ShardFileList.SerializeToString,
+            ),
+            'DownloadShardFile': grpc.unary_stream_rpc_method_handler(
+                    servicer.DownloadShardFile,
+                    request_deserializer=nucliadb__protos_dot_nodereader__pb2.DownloadShardFileRequest.FromString,
+                    response_serializer=nucliadb__protos_dot_nodereader__pb2.ShardFileChunk.SerializeToString,
+            ),
     }
     generic_handler = grpc.method_handlers_generic_handler(
             'nodereader.NodeReader', rpc_method_handlers)
     server.add_generic_rpc_handlers((generic_handler,))
 
 
  # This class is part of an EXPERIMENTAL API.
@@ -310,31 +311,14 @@
         return grpc.experimental.unary_unary(request, target, '/nodereader.NodeReader/GetShard',
             nucliadb__protos_dot_nodereader__pb2.GetShardRequest.SerializeToString,
             nucliadb__protos_dot_noderesources__pb2.Shard.FromString,
             options, channel_credentials,
             insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
 
     @staticmethod
-    def GetShards(request,
-            target,
-            options=(),
-            channel_credentials=None,
-            call_credentials=None,
-            insecure=False,
-            compression=None,
-            wait_for_ready=None,
-            timeout=None,
-            metadata=None):
-        return grpc.experimental.unary_unary(request, target, '/nodereader.NodeReader/GetShards',
-            nucliadb__protos_dot_noderesources__pb2.EmptyQuery.SerializeToString,
-            nucliadb__protos_dot_noderesources__pb2.ShardList.FromString,
-            options, channel_credentials,
-            insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
-
-    @staticmethod
     def DocumentSearch(request,
             target,
             options=(),
             channel_credentials=None,
             call_credentials=None,
             insecure=False,
             compression=None,
@@ -480,31 +464,14 @@
         return grpc.experimental.unary_unary(request, target, '/nodereader.NodeReader/RelationEdges',
             nucliadb__protos_dot_noderesources__pb2.ShardId.SerializeToString,
             nucliadb__protos_dot_nodereader__pb2.EdgeList.FromString,
             options, channel_credentials,
             insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
 
     @staticmethod
-    def RelationTypes(request,
-            target,
-            options=(),
-            channel_credentials=None,
-            call_credentials=None,
-            insecure=False,
-            compression=None,
-            wait_for_ready=None,
-            timeout=None,
-            metadata=None):
-        return grpc.experimental.unary_unary(request, target, '/nodereader.NodeReader/RelationTypes',
-            nucliadb__protos_dot_noderesources__pb2.ShardId.SerializeToString,
-            nucliadb__protos_dot_nodereader__pb2.TypeList.FromString,
-            options, channel_credentials,
-            insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
-
-    @staticmethod
     def Search(request,
             target,
             options=(),
             channel_credentials=None,
             call_credentials=None,
             insecure=False,
             compression=None,
@@ -563,7 +530,41 @@
             timeout=None,
             metadata=None):
         return grpc.experimental.unary_stream(request, target, '/nodereader.NodeReader/Documents',
             nucliadb__protos_dot_nodereader__pb2.StreamRequest.SerializeToString,
             nucliadb__protos_dot_nodereader__pb2.DocumentItem.FromString,
             options, channel_credentials,
             insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
+
+    @staticmethod
+    def GetShardFiles(request,
+            target,
+            options=(),
+            channel_credentials=None,
+            call_credentials=None,
+            insecure=False,
+            compression=None,
+            wait_for_ready=None,
+            timeout=None,
+            metadata=None):
+        return grpc.experimental.unary_unary(request, target, '/nodereader.NodeReader/GetShardFiles',
+            nucliadb__protos_dot_nodereader__pb2.GetShardFilesRequest.SerializeToString,
+            nucliadb__protos_dot_nodereader__pb2.ShardFileList.FromString,
+            options, channel_credentials,
+            insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
+
+    @staticmethod
+    def DownloadShardFile(request,
+            target,
+            options=(),
+            channel_credentials=None,
+            call_credentials=None,
+            insecure=False,
+            compression=None,
+            wait_for_ready=None,
+            timeout=None,
+            metadata=None):
+        return grpc.experimental.unary_stream(request, target, '/nodereader.NodeReader/DownloadShardFile',
+            nucliadb__protos_dot_nodereader__pb2.DownloadShardFileRequest.SerializeToString,
+            nucliadb__protos_dot_nodereader__pb2.ShardFileChunk.FromString,
+            options, channel_credentials,
+            insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
```

## nucliadb_protos/nodereader_pb2_grpc.pyi

```diff
@@ -1,71 +1,78 @@
 """
 @generated by mypy-protobuf.  Do not edit manually!
 isort:skip_file
 """
 import abc
 import collections.abc
 import grpc
+import grpc.aio
 import nucliadb_protos.nodereader_pb2
 import nucliadb_protos.noderesources_pb2
+import typing
 from nucliadb_protos.noderesources_pb2 import (
     EmptyQuery as EmptyQuery,
     EmptyResponse as EmptyResponse,
     IndexMetadata as IndexMetadata,
     IndexParagraph as IndexParagraph,
     IndexParagraphs as IndexParagraphs,
     NodeMetadata as NodeMetadata,
     ParagraphMetadata as ParagraphMetadata,
     Position as Position,
+    Representation as Representation,
     Resource as Resource,
     ResourceID as ResourceID,
     SentenceMetadata as SentenceMetadata,
     Shard as Shard,
-    ShardCleaned as ShardCleaned,
     ShardCreated as ShardCreated,
     ShardId as ShardId,
     ShardIds as ShardIds,
-    ShardList as ShardList,
     ShardMetadata as ShardMetadata,
     TextInformation as TextInformation,
     VectorSentence as VectorSentence,
     VectorSetID as VectorSetID,
     VectorSetList as VectorSetList,
 )
 from nucliadb_protos.utils_pb2 import (
     COSINE as COSINE,
     DOT as DOT,
+    EXPERIMENTAL as EXPERIMENTAL,
     ExtractedText as ExtractedText,
-    JoinGraph as JoinGraph,
-    JoinGraphEdge as JoinGraphEdge,
     Relation as Relation,
     RelationMetadata as RelationMetadata,
     RelationNode as RelationNode,
+    ReleaseChannel as ReleaseChannel,
+    STABLE as STABLE,
+    Security as Security,
     UserVector as UserVector,
     UserVectorSet as UserVectorSet,
     UserVectors as UserVectors,
     UserVectorsList as UserVectorsList,
     Vector as Vector,
     VectorObject as VectorObject,
     VectorSimilarity as VectorSimilarity,
     Vectors as Vectors,
 )
 
+_T = typing.TypeVar('_T')
+
+class _MaybeAsyncIterator(collections.abc.AsyncIterator[_T], collections.abc.Iterator[_T], metaclass=abc.ABCMeta):
+    ...
+
+class _ServicerContext(grpc.ServicerContext, grpc.aio.ServicerContext):  # type: ignore
+    ...
+
 class NodeReaderStub:
     """Implemented at nucliadb_object_storage"""
 
-    def __init__(self, channel: grpc.Channel) -> None: ...
+    def __init__(self, channel: typing.Union[grpc.Channel, grpc.aio.Channel]) -> None: ...
     GetShard: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.nodereader_pb2.GetShardRequest,
         nucliadb_protos.noderesources_pb2.Shard,
     ]
-    GetShards: grpc.UnaryUnaryMultiCallable[
-        nucliadb_protos.noderesources_pb2.EmptyQuery,
-        nucliadb_protos.noderesources_pb2.ShardList,
-    ]
     DocumentSearch: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.nodereader_pb2.DocumentSearchRequest,
         nucliadb_protos.nodereader_pb2.DocumentSearchResponse,
     ]
     ParagraphSearch: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.nodereader_pb2.ParagraphSearchRequest,
         nucliadb_protos.nodereader_pb2.ParagraphSearchResponse,
@@ -94,18 +101,14 @@
         nucliadb_protos.noderesources_pb2.ShardId,
         nucliadb_protos.nodereader_pb2.IdCollection,
     ]
     RelationEdges: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.noderesources_pb2.ShardId,
         nucliadb_protos.nodereader_pb2.EdgeList,
     ]
-    RelationTypes: grpc.UnaryUnaryMultiCallable[
-        nucliadb_protos.noderesources_pb2.ShardId,
-        nucliadb_protos.nodereader_pb2.TypeList,
-    ]
     Search: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.nodereader_pb2.SearchRequest,
         nucliadb_protos.nodereader_pb2.SearchResponse,
     ]
     Suggest: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.nodereader_pb2.SuggestRequest,
         nucliadb_protos.nodereader_pb2.SuggestResponse,
@@ -115,110 +118,190 @@
         nucliadb_protos.nodereader_pb2.ParagraphItem,
     ]
     """Streams"""
     Documents: grpc.UnaryStreamMultiCallable[
         nucliadb_protos.nodereader_pb2.StreamRequest,
         nucliadb_protos.nodereader_pb2.DocumentItem,
     ]
+    GetShardFiles: grpc.UnaryUnaryMultiCallable[
+        nucliadb_protos.nodereader_pb2.GetShardFilesRequest,
+        nucliadb_protos.nodereader_pb2.ShardFileList,
+    ]
+    """Shard Download"""
+    DownloadShardFile: grpc.UnaryStreamMultiCallable[
+        nucliadb_protos.nodereader_pb2.DownloadShardFileRequest,
+        nucliadb_protos.nodereader_pb2.ShardFileChunk,
+    ]
+
+class NodeReaderAsyncStub:
+    """Implemented at nucliadb_object_storage"""
+
+    GetShard: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.nodereader_pb2.GetShardRequest,
+        nucliadb_protos.noderesources_pb2.Shard,
+    ]
+    DocumentSearch: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.nodereader_pb2.DocumentSearchRequest,
+        nucliadb_protos.nodereader_pb2.DocumentSearchResponse,
+    ]
+    ParagraphSearch: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.nodereader_pb2.ParagraphSearchRequest,
+        nucliadb_protos.nodereader_pb2.ParagraphSearchResponse,
+    ]
+    VectorSearch: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.nodereader_pb2.VectorSearchRequest,
+        nucliadb_protos.nodereader_pb2.VectorSearchResponse,
+    ]
+    RelationSearch: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.nodereader_pb2.RelationSearchRequest,
+        nucliadb_protos.nodereader_pb2.RelationSearchResponse,
+    ]
+    DocumentIds: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.noderesources_pb2.ShardId,
+        nucliadb_protos.nodereader_pb2.IdCollection,
+    ]
+    ParagraphIds: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.noderesources_pb2.ShardId,
+        nucliadb_protos.nodereader_pb2.IdCollection,
+    ]
+    VectorIds: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.noderesources_pb2.ShardId,
+        nucliadb_protos.nodereader_pb2.IdCollection,
+    ]
+    RelationIds: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.noderesources_pb2.ShardId,
+        nucliadb_protos.nodereader_pb2.IdCollection,
+    ]
+    RelationEdges: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.noderesources_pb2.ShardId,
+        nucliadb_protos.nodereader_pb2.EdgeList,
+    ]
+    Search: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.nodereader_pb2.SearchRequest,
+        nucliadb_protos.nodereader_pb2.SearchResponse,
+    ]
+    Suggest: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.nodereader_pb2.SuggestRequest,
+        nucliadb_protos.nodereader_pb2.SuggestResponse,
+    ]
+    Paragraphs: grpc.aio.UnaryStreamMultiCallable[
+        nucliadb_protos.nodereader_pb2.StreamRequest,
+        nucliadb_protos.nodereader_pb2.ParagraphItem,
+    ]
+    """Streams"""
+    Documents: grpc.aio.UnaryStreamMultiCallable[
+        nucliadb_protos.nodereader_pb2.StreamRequest,
+        nucliadb_protos.nodereader_pb2.DocumentItem,
+    ]
+    GetShardFiles: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.nodereader_pb2.GetShardFilesRequest,
+        nucliadb_protos.nodereader_pb2.ShardFileList,
+    ]
+    """Shard Download"""
+    DownloadShardFile: grpc.aio.UnaryStreamMultiCallable[
+        nucliadb_protos.nodereader_pb2.DownloadShardFileRequest,
+        nucliadb_protos.nodereader_pb2.ShardFileChunk,
+    ]
 
 class NodeReaderServicer(metaclass=abc.ABCMeta):
     """Implemented at nucliadb_object_storage"""
 
     @abc.abstractmethod
     def GetShard(
         self,
         request: nucliadb_protos.nodereader_pb2.GetShardRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.noderesources_pb2.Shard: ...
-    @abc.abstractmethod
-    def GetShards(
-        self,
-        request: nucliadb_protos.noderesources_pb2.EmptyQuery,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.noderesources_pb2.ShardList: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.noderesources_pb2.Shard, collections.abc.Awaitable[nucliadb_protos.noderesources_pb2.Shard]]: ...
     @abc.abstractmethod
     def DocumentSearch(
         self,
         request: nucliadb_protos.nodereader_pb2.DocumentSearchRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.nodereader_pb2.DocumentSearchResponse: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.nodereader_pb2.DocumentSearchResponse, collections.abc.Awaitable[nucliadb_protos.nodereader_pb2.DocumentSearchResponse]]: ...
     @abc.abstractmethod
     def ParagraphSearch(
         self,
         request: nucliadb_protos.nodereader_pb2.ParagraphSearchRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.nodereader_pb2.ParagraphSearchResponse: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.nodereader_pb2.ParagraphSearchResponse, collections.abc.Awaitable[nucliadb_protos.nodereader_pb2.ParagraphSearchResponse]]: ...
     @abc.abstractmethod
     def VectorSearch(
         self,
         request: nucliadb_protos.nodereader_pb2.VectorSearchRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.nodereader_pb2.VectorSearchResponse: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.nodereader_pb2.VectorSearchResponse, collections.abc.Awaitable[nucliadb_protos.nodereader_pb2.VectorSearchResponse]]: ...
     @abc.abstractmethod
     def RelationSearch(
         self,
         request: nucliadb_protos.nodereader_pb2.RelationSearchRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.nodereader_pb2.RelationSearchResponse: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.nodereader_pb2.RelationSearchResponse, collections.abc.Awaitable[nucliadb_protos.nodereader_pb2.RelationSearchResponse]]: ...
     @abc.abstractmethod
     def DocumentIds(
         self,
         request: nucliadb_protos.noderesources_pb2.ShardId,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.nodereader_pb2.IdCollection: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.nodereader_pb2.IdCollection, collections.abc.Awaitable[nucliadb_protos.nodereader_pb2.IdCollection]]: ...
     @abc.abstractmethod
     def ParagraphIds(
         self,
         request: nucliadb_protos.noderesources_pb2.ShardId,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.nodereader_pb2.IdCollection: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.nodereader_pb2.IdCollection, collections.abc.Awaitable[nucliadb_protos.nodereader_pb2.IdCollection]]: ...
     @abc.abstractmethod
     def VectorIds(
         self,
         request: nucliadb_protos.noderesources_pb2.ShardId,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.nodereader_pb2.IdCollection: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.nodereader_pb2.IdCollection, collections.abc.Awaitable[nucliadb_protos.nodereader_pb2.IdCollection]]: ...
     @abc.abstractmethod
     def RelationIds(
         self,
         request: nucliadb_protos.noderesources_pb2.ShardId,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.nodereader_pb2.IdCollection: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.nodereader_pb2.IdCollection, collections.abc.Awaitable[nucliadb_protos.nodereader_pb2.IdCollection]]: ...
     @abc.abstractmethod
     def RelationEdges(
         self,
         request: nucliadb_protos.noderesources_pb2.ShardId,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.nodereader_pb2.EdgeList: ...
-    @abc.abstractmethod
-    def RelationTypes(
-        self,
-        request: nucliadb_protos.noderesources_pb2.ShardId,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.nodereader_pb2.TypeList: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.nodereader_pb2.EdgeList, collections.abc.Awaitable[nucliadb_protos.nodereader_pb2.EdgeList]]: ...
     @abc.abstractmethod
     def Search(
         self,
         request: nucliadb_protos.nodereader_pb2.SearchRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.nodereader_pb2.SearchResponse: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.nodereader_pb2.SearchResponse, collections.abc.Awaitable[nucliadb_protos.nodereader_pb2.SearchResponse]]: ...
     @abc.abstractmethod
     def Suggest(
         self,
         request: nucliadb_protos.nodereader_pb2.SuggestRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.nodereader_pb2.SuggestResponse: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.nodereader_pb2.SuggestResponse, collections.abc.Awaitable[nucliadb_protos.nodereader_pb2.SuggestResponse]]: ...
     @abc.abstractmethod
     def Paragraphs(
         self,
         request: nucliadb_protos.nodereader_pb2.StreamRequest,
-        context: grpc.ServicerContext,
-    ) -> collections.abc.Iterator[nucliadb_protos.nodereader_pb2.ParagraphItem]:
+        context: _ServicerContext,
+    ) -> typing.Union[collections.abc.Iterator[nucliadb_protos.nodereader_pb2.ParagraphItem], collections.abc.AsyncIterator[nucliadb_protos.nodereader_pb2.ParagraphItem]]:
         """Streams"""
     @abc.abstractmethod
     def Documents(
         self,
         request: nucliadb_protos.nodereader_pb2.StreamRequest,
-        context: grpc.ServicerContext,
-    ) -> collections.abc.Iterator[nucliadb_protos.nodereader_pb2.DocumentItem]: ...
+        context: _ServicerContext,
+    ) -> typing.Union[collections.abc.Iterator[nucliadb_protos.nodereader_pb2.DocumentItem], collections.abc.AsyncIterator[nucliadb_protos.nodereader_pb2.DocumentItem]]: ...
+    @abc.abstractmethod
+    def GetShardFiles(
+        self,
+        request: nucliadb_protos.nodereader_pb2.GetShardFilesRequest,
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.nodereader_pb2.ShardFileList, collections.abc.Awaitable[nucliadb_protos.nodereader_pb2.ShardFileList]]:
+        """Shard Download"""
+    @abc.abstractmethod
+    def DownloadShardFile(
+        self,
+        request: nucliadb_protos.nodereader_pb2.DownloadShardFileRequest,
+        context: _ServicerContext,
+    ) -> typing.Union[collections.abc.Iterator[nucliadb_protos.nodereader_pb2.ShardFileChunk], collections.abc.AsyncIterator[nucliadb_protos.nodereader_pb2.ShardFileChunk]]: ...
 
-def add_NodeReaderServicer_to_server(servicer: NodeReaderServicer, server: grpc.Server) -> None: ...
+def add_NodeReaderServicer_to_server(servicer: NodeReaderServicer, server: typing.Union[grpc.Server, grpc.aio.Server]) -> None: ...
```

## nucliadb_protos/noderesources_pb2.py

```diff
@@ -1,114 +1,115 @@
 # -*- coding: utf-8 -*-
 # Generated by the protocol buffer compiler.  DO NOT EDIT!
 # source: nucliadb_protos/noderesources.proto
+# Protobuf Python Version: 4.25.0
 """Generated protocol buffer code."""
-from google.protobuf.internal import builder as _builder
 from google.protobuf import descriptor as _descriptor
 from google.protobuf import descriptor_pool as _descriptor_pool
 from google.protobuf import symbol_database as _symbol_database
+from google.protobuf.internal import builder as _builder
 # @@protoc_insertion_point(imports)
 
 _sym_db = _symbol_database.Default()
 
 
 from google.protobuf import timestamp_pb2 as google_dot_protobuf_dot_timestamp__pb2
 from nucliadb_protos import utils_pb2 as nucliadb__protos_dot_utils__pb2
 
 from nucliadb_protos.utils_pb2 import *
 
-DESCRIPTOR = _descriptor_pool.Default().AddSerializedFile(b'\n#nucliadb_protos/noderesources.proto\x12\rnoderesources\x1a\x1fgoogle/protobuf/timestamp.proto\x1a\x1bnucliadb_protos/utils.proto\"/\n\x0fTextInformation\x12\x0c\n\x04text\x18\x01 \x01(\t\x12\x0e\n\x06labels\x18\x02 \x03(\t\"j\n\rIndexMetadata\x12,\n\x08modified\x18\x01 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12+\n\x07\x63reated\x18\x02 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\"\x15\n\x07ShardId\x12\n\n\x02id\x18\x01 \x01(\t\"/\n\x08ShardIds\x12#\n\x03ids\x18\x01 \x03(\x0b\x32\x16.noderesources.ShardId\"\x85\x04\n\x0cShardCreated\x12\n\n\x02id\x18\x01 \x01(\t\x12\x45\n\x10\x64ocument_service\x18\x02 \x01(\x0e\x32+.noderesources.ShardCreated.DocumentService\x12G\n\x11paragraph_service\x18\x03 \x01(\x0e\x32,.noderesources.ShardCreated.ParagraphService\x12\x41\n\x0evector_service\x18\x04 \x01(\x0e\x32).noderesources.ShardCreated.VectorService\x12\x45\n\x10relation_service\x18\x05 \x01(\x0e\x32+.noderesources.ShardCreated.RelationService\"3\n\x0f\x44ocumentService\x12\x0f\n\x0b\x44OCUMENT_V0\x10\x00\x12\x0f\n\x0b\x44OCUMENT_V1\x10\x01\"6\n\x10ParagraphService\x12\x10\n\x0cPARAGRAPH_V0\x10\x00\x12\x10\n\x0cPARAGRAPH_V1\x10\x01\"-\n\rVectorService\x12\r\n\tVECTOR_V0\x10\x00\x12\r\n\tVECTOR_V1\x10\x01\"3\n\x0fRelationService\x12\x0f\n\x0bRELATION_V0\x10\x00\x12\x0f\n\x0bRELATION_V1\x10\x01\"\xa8\x02\n\x0cShardCleaned\x12\x45\n\x10\x64ocument_service\x18\x02 \x01(\x0e\x32+.noderesources.ShardCreated.DocumentService\x12G\n\x11paragraph_service\x18\x03 \x01(\x0e\x32,.noderesources.ShardCreated.ParagraphService\x12\x41\n\x0evector_service\x18\x04 \x01(\x0e\x32).noderesources.ShardCreated.VectorService\x12\x45\n\x10relation_service\x18\x05 \x01(\x0e\x32+.noderesources.ShardCreated.RelationService\",\n\nResourceID\x12\x10\n\x08shard_id\x18\x01 \x01(\t\x12\x0c\n\x04uuid\x18\x02 \x01(\t\"\x83\x01\n\x05Shard\x12.\n\x08metadata\x18\x05 \x01(\x0b\x32\x1c.noderesources.ShardMetadata\x12\x10\n\x08shard_id\x18\x01 \x01(\t\x12\x11\n\tresources\x18\x02 \x01(\x04\x12\x12\n\nparagraphs\x18\x03 \x01(\x04\x12\x11\n\tsentences\x18\x04 \x01(\x04\"1\n\tShardList\x12$\n\x06shards\x18\x01 \x03(\x0b\x32\x14.noderesources.Shard\"\x0f\n\rEmptyResponse\"\x0c\n\nEmptyQuery\"v\n\x08Position\x12\r\n\x05index\x18\x01 \x01(\x04\x12\r\n\x05start\x18\x02 \x01(\x04\x12\x0b\n\x03\x65nd\x18\x03 \x01(\x04\x12\x13\n\x0bpage_number\x18\x04 \x01(\x04\x12\x15\n\rstart_seconds\x18\x05 \x03(\r\x12\x13\n\x0b\x65nd_seconds\x18\x06 \x03(\r\"=\n\x10SentenceMetadata\x12)\n\x08position\x18\x01 \x01(\x0b\x32\x17.noderesources.Position\"S\n\x0eVectorSentence\x12\x0e\n\x06vector\x18\x01 \x03(\x02\x12\x31\n\x08metadata\x18\t \x01(\x0b\x32\x1f.noderesources.SentenceMetadata\">\n\x11ParagraphMetadata\x12)\n\x08position\x18\x01 \x01(\x0b\x32\x17.noderesources.Position\"\xca\x02\n\x0eIndexParagraph\x12\r\n\x05start\x18\x01 \x01(\x05\x12\x0b\n\x03\x65nd\x18\x02 \x01(\x05\x12\x0e\n\x06labels\x18\x03 \x03(\t\x12?\n\tsentences\x18\x04 \x03(\x0b\x32,.noderesources.IndexParagraph.SentencesEntry\x12\r\n\x05\x66ield\x18\x05 \x01(\t\x12\r\n\x05split\x18\x06 \x01(\t\x12\r\n\x05index\x18\x07 \x01(\x04\x12\x19\n\x11repeated_in_field\x18\x08 \x01(\x08\x12\x32\n\x08metadata\x18\t \x01(\x0b\x32 .noderesources.ParagraphMetadata\x1aO\n\x0eSentencesEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12,\n\x05value\x18\x02 \x01(\x0b\x32\x1d.noderesources.VectorSentence:\x02\x38\x01\"G\n\x0bVectorSetID\x12%\n\x05shard\x18\x01 \x01(\x0b\x32\x16.noderesources.ShardId\x12\x11\n\tvectorset\x18\x02 \x01(\t\"I\n\rVectorSetList\x12%\n\x05shard\x18\x01 \x01(\x0b\x32\x16.noderesources.ShardId\x12\x11\n\tvectorset\x18\x02 \x03(\t\"\xa7\x01\n\x0fIndexParagraphs\x12\x42\n\nparagraphs\x18\x01 \x03(\x0b\x32..noderesources.IndexParagraphs.ParagraphsEntry\x1aP\n\x0fParagraphsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12,\n\x05value\x18\x02 \x01(\x0b\x32\x1d.noderesources.IndexParagraph:\x02\x38\x01\"\xc3\x07\n\x08Resource\x12+\n\x08resource\x18\x01 \x01(\x0b\x32\x19.noderesources.ResourceID\x12.\n\x08metadata\x18\x02 \x01(\x0b\x32\x1c.noderesources.IndexMetadata\x12\x31\n\x05texts\x18\x03 \x03(\x0b\x32\".noderesources.Resource.TextsEntry\x12\x0e\n\x06labels\x18\x04 \x03(\t\x12\x36\n\x06status\x18\x05 \x01(\x0e\x32&.noderesources.Resource.ResourceStatus\x12;\n\nparagraphs\x18\x06 \x03(\x0b\x32\'.noderesources.Resource.ParagraphsEntry\x12\x1c\n\x14paragraphs_to_delete\x18\x07 \x03(\t\x12\x1b\n\x13sentences_to_delete\x18\x08 \x03(\t\x12\"\n\trelations\x18\t \x03(\x0b\x32\x0f.utils.Relation\x12,\n\x13relations_to_delete\x18\n \x03(\x0b\x32\x0f.utils.Relation\x12\x10\n\x08shard_id\x18\x0b \x01(\t\x12\x35\n\x07vectors\x18\x0c \x03(\x0b\x32$.noderesources.Resource.VectorsEntry\x12G\n\x11vectors_to_delete\x18\r \x03(\x0b\x32,.noderesources.Resource.VectorsToDeleteEntry\x1aL\n\nTextsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12-\n\x05value\x18\x02 \x01(\x0b\x32\x1e.noderesources.TextInformation:\x02\x38\x01\x1aQ\n\x0fParagraphsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12-\n\x05value\x18\x02 \x01(\x0b\x32\x1e.noderesources.IndexParagraphs:\x02\x38\x01\x1a\x42\n\x0cVectorsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12!\n\x05value\x18\x02 \x01(\x0b\x32\x12.utils.UserVectors:\x02\x38\x01\x1aN\n\x14VectorsToDeleteEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12%\n\x05value\x18\x02 \x01(\x0b\x32\x16.utils.UserVectorsList:\x02\x38\x01\"N\n\x0eResourceStatus\x12\r\n\tPROCESSED\x10\x00\x12\t\n\x05\x45MPTY\x10\x01\x12\t\n\x05\x45RROR\x10\x02\x12\n\n\x06\x44\x45LETE\x10\x03\x12\x0b\n\x07PENDING\x10\x04\"\x1d\n\rShardMetadata\x12\x0c\n\x04kbid\x18\x01 \x01(\t\"\x85\x02\n\x0cNodeMetadata\x12\x16\n\nload_score\x18\x01 \x01(\x02\x42\x02\x18\x01\x12\x13\n\x0bshard_count\x18\x02 \x01(\x04\x12\x37\n\x06shards\x18\x03 \x03(\x0b\x32\'.noderesources.NodeMetadata.ShardsEntry\x1a\x35\n\rShardMetadata\x12\x0c\n\x04kbid\x18\x01 \x01(\t\x12\x16\n\nload_score\x18\x02 \x01(\x02\x42\x02\x18\x01\x1aX\n\x0bShardsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\x38\n\x05value\x18\x02 \x01(\x0b\x32).noderesources.NodeMetadata.ShardMetadata:\x02\x38\x01P\x01\x62\x06proto3')
+DESCRIPTOR = _descriptor_pool.Default().AddSerializedFile(b'\n#nucliadb_protos/noderesources.proto\x12\rnoderesources\x1a\x1fgoogle/protobuf/timestamp.proto\x1a\x1bnucliadb_protos/utils.proto\"/\n\x0fTextInformation\x12\x0c\n\x04text\x18\x01 \x01(\t\x12\x0e\n\x06labels\x18\x02 \x03(\t\"j\n\rIndexMetadata\x12,\n\x08modified\x18\x01 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12+\n\x07\x63reated\x18\x02 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\"\x15\n\x07ShardId\x12\n\n\x02id\x18\x01 \x01(\t\"/\n\x08ShardIds\x12#\n\x03ids\x18\x01 \x03(\x0b\x32\x16.noderesources.ShardId\"\xb9\x04\n\x0cShardCreated\x12\n\n\x02id\x18\x01 \x01(\t\x12\x45\n\x10\x64ocument_service\x18\x02 \x01(\x0e\x32+.noderesources.ShardCreated.DocumentService\x12G\n\x11paragraph_service\x18\x03 \x01(\x0e\x32,.noderesources.ShardCreated.ParagraphService\x12\x41\n\x0evector_service\x18\x04 \x01(\x0e\x32).noderesources.ShardCreated.VectorService\x12\x45\n\x10relation_service\x18\x05 \x01(\x0e\x32+.noderesources.ShardCreated.RelationService\"D\n\x0f\x44ocumentService\x12\x0f\n\x0b\x44OCUMENT_V0\x10\x00\x12\x0f\n\x0b\x44OCUMENT_V1\x10\x01\x12\x0f\n\x0b\x44OCUMENT_V2\x10\x02\"H\n\x10ParagraphService\x12\x10\n\x0cPARAGRAPH_V0\x10\x00\x12\x10\n\x0cPARAGRAPH_V1\x10\x01\x12\x10\n\x0cPARAGRAPH_V2\x10\x02\"-\n\rVectorService\x12\r\n\tVECTOR_V0\x10\x00\x12\r\n\tVECTOR_V1\x10\x01\"D\n\x0fRelationService\x12\x0f\n\x0bRELATION_V0\x10\x00\x12\x0f\n\x0bRELATION_V1\x10\x01\x12\x0f\n\x0bRELATION_V2\x10\x02\",\n\nResourceID\x12\x10\n\x08shard_id\x18\x01 \x01(\t\x12\x0c\n\x04uuid\x18\x02 \x01(\t\"\x80\x01\n\x05Shard\x12.\n\x08metadata\x18\x05 \x01(\x0b\x32\x1c.noderesources.ShardMetadata\x12\x10\n\x08shard_id\x18\x01 \x01(\t\x12\x0e\n\x06\x66ields\x18\x02 \x01(\x04\x12\x12\n\nparagraphs\x18\x03 \x01(\x04\x12\x11\n\tsentences\x18\x04 \x01(\x04\"\x0f\n\rEmptyResponse\"\x0c\n\nEmptyQuery\"\x87\x01\n\x08Position\x12\r\n\x05index\x18\x01 \x01(\x04\x12\r\n\x05start\x18\x02 \x01(\x04\x12\x0b\n\x03\x65nd\x18\x03 \x01(\x04\x12\x13\n\x0bpage_number\x18\x04 \x01(\x04\x12\x0f\n\x07in_page\x18\x07 \x01(\x08\x12\x15\n\rstart_seconds\x18\x05 \x03(\r\x12\x13\n\x0b\x65nd_seconds\x18\x06 \x03(\r\"2\n\x0eRepresentation\x12\x12\n\nis_a_table\x18\x01 \x01(\x08\x12\x0c\n\x04\x66ile\x18\x02 \x01(\t\"\x8e\x01\n\x10SentenceMetadata\x12)\n\x08position\x18\x01 \x01(\x0b\x32\x17.noderesources.Position\x12\x18\n\x10page_with_visual\x18\x02 \x01(\x08\x12\x35\n\x0erepresentation\x18\x03 \x01(\x0b\x32\x1d.noderesources.Representation\"S\n\x0eVectorSentence\x12\x0e\n\x06vector\x18\x01 \x03(\x02\x12\x31\n\x08metadata\x18\t \x01(\x0b\x32\x1f.noderesources.SentenceMetadata\"\x8f\x01\n\x11ParagraphMetadata\x12)\n\x08position\x18\x01 \x01(\x0b\x32\x17.noderesources.Position\x12\x18\n\x10page_with_visual\x18\x02 \x01(\x08\x12\x35\n\x0erepresentation\x18\x03 \x01(\x0b\x32\x1d.noderesources.Representation\"\xca\x02\n\x0eIndexParagraph\x12\r\n\x05start\x18\x01 \x01(\x05\x12\x0b\n\x03\x65nd\x18\x02 \x01(\x05\x12\x0e\n\x06labels\x18\x03 \x03(\t\x12?\n\tsentences\x18\x04 \x03(\x0b\x32,.noderesources.IndexParagraph.SentencesEntry\x12\r\n\x05\x66ield\x18\x05 \x01(\t\x12\r\n\x05split\x18\x06 \x01(\t\x12\r\n\x05index\x18\x07 \x01(\x04\x12\x19\n\x11repeated_in_field\x18\x08 \x01(\x08\x12\x32\n\x08metadata\x18\t \x01(\x0b\x32 .noderesources.ParagraphMetadata\x1aO\n\x0eSentencesEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12,\n\x05value\x18\x02 \x01(\x0b\x32\x1d.noderesources.VectorSentence:\x02\x38\x01\"G\n\x0bVectorSetID\x12%\n\x05shard\x18\x01 \x01(\x0b\x32\x16.noderesources.ShardId\x12\x11\n\tvectorset\x18\x02 \x01(\t\"I\n\rVectorSetList\x12%\n\x05shard\x18\x01 \x01(\x0b\x32\x16.noderesources.ShardId\x12\x11\n\tvectorset\x18\x02 \x03(\t\"\xa7\x01\n\x0fIndexParagraphs\x12\x42\n\nparagraphs\x18\x01 \x03(\x0b\x32..noderesources.IndexParagraphs.ParagraphsEntry\x1aP\n\x0fParagraphsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12,\n\x05value\x18\x02 \x01(\x0b\x32\x1d.noderesources.IndexParagraph:\x02\x38\x01\"\xe4\x07\n\x08Resource\x12+\n\x08resource\x18\x01 \x01(\x0b\x32\x19.noderesources.ResourceID\x12.\n\x08metadata\x18\x02 \x01(\x0b\x32\x1c.noderesources.IndexMetadata\x12\x31\n\x05texts\x18\x03 \x03(\x0b\x32\".noderesources.Resource.TextsEntry\x12\x0e\n\x06labels\x18\x04 \x03(\t\x12\x36\n\x06status\x18\x05 \x01(\x0e\x32&.noderesources.Resource.ResourceStatus\x12;\n\nparagraphs\x18\x06 \x03(\x0b\x32\'.noderesources.Resource.ParagraphsEntry\x12\x1c\n\x14paragraphs_to_delete\x18\x07 \x03(\t\x12\x1b\n\x13sentences_to_delete\x18\x08 \x03(\t\x12\"\n\trelations\x18\t \x03(\x0b\x32\x0f.utils.Relation\x12\x10\n\x08shard_id\x18\x0b \x01(\t\x12\x35\n\x07vectors\x18\x0c \x03(\x0b\x32$.noderesources.Resource.VectorsEntry\x12G\n\x11vectors_to_delete\x18\r \x03(\x0b\x32,.noderesources.Resource.VectorsToDeleteEntry\x12&\n\x08security\x18\x0e \x01(\x0b\x32\x0f.utils.SecurityH\x00\x88\x01\x01\x1aL\n\nTextsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12-\n\x05value\x18\x02 \x01(\x0b\x32\x1e.noderesources.TextInformation:\x02\x38\x01\x1aQ\n\x0fParagraphsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12-\n\x05value\x18\x02 \x01(\x0b\x32\x1e.noderesources.IndexParagraphs:\x02\x38\x01\x1a\x42\n\x0cVectorsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12!\n\x05value\x18\x02 \x01(\x0b\x32\x12.utils.UserVectors:\x02\x38\x01\x1aN\n\x14VectorsToDeleteEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12%\n\x05value\x18\x02 \x01(\x0b\x32\x16.utils.UserVectorsList:\x02\x38\x01\"h\n\x0eResourceStatus\x12\r\n\tPROCESSED\x10\x00\x12\t\n\x05\x45MPTY\x10\x01\x12\t\n\x05\x45RROR\x10\x02\x12\n\n\x06\x44\x45LETE\x10\x03\x12\x0b\n\x07PENDING\x10\x04\x12\x0b\n\x07\x42LOCKED\x10\x05\x12\x0b\n\x07\x45XPIRED\x10\x06\x42\x0b\n\t_security\"M\n\rShardMetadata\x12\x0c\n\x04kbid\x18\x01 \x01(\t\x12.\n\x0frelease_channel\x18\x02 \x01(\x0e\x32\x15.utils.ReleaseChannel\"\xf8\x02\n\x0cNodeMetadata\x12\x16\n\nload_score\x18\x01 \x01(\x02\x42\x02\x18\x01\x12\x13\n\x0bshard_count\x18\x02 \x01(\x04\x12;\n\x06shards\x18\x03 \x03(\x0b\x32\'.noderesources.NodeMetadata.ShardsEntryB\x02\x18\x01\x12\x0f\n\x07node_id\x18\x04 \x01(\t\x12\x1c\n\x0fprimary_node_id\x18\x05 \x01(\tH\x00\x88\x01\x01\x12\x16\n\x0e\x61vailable_disk\x18\x06 \x01(\x04\x12\x12\n\ntotal_disk\x18\x07 \x01(\x04\x1a\x35\n\rShardMetadata\x12\x0c\n\x04kbid\x18\x01 \x01(\t\x12\x16\n\nload_score\x18\x02 \x01(\x02\x42\x02\x18\x01\x1aX\n\x0bShardsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\x38\n\x05value\x18\x02 \x01(\x0b\x32).noderesources.NodeMetadata.ShardMetadata:\x02\x38\x01\x42\x12\n\x10_primary_node_idP\x01\x62\x06proto3')
 
-_builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, globals())
-_builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, 'nucliadb_protos.noderesources_pb2', globals())
+_globals = globals()
+_builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, _globals)
+_builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, 'nucliadb_protos.noderesources_pb2', _globals)
 if _descriptor._USE_C_DESCRIPTORS == False:
-
   DESCRIPTOR._options = None
-  _INDEXPARAGRAPH_SENTENCESENTRY._options = None
-  _INDEXPARAGRAPH_SENTENCESENTRY._serialized_options = b'8\001'
-  _INDEXPARAGRAPHS_PARAGRAPHSENTRY._options = None
-  _INDEXPARAGRAPHS_PARAGRAPHSENTRY._serialized_options = b'8\001'
-  _RESOURCE_TEXTSENTRY._options = None
-  _RESOURCE_TEXTSENTRY._serialized_options = b'8\001'
-  _RESOURCE_PARAGRAPHSENTRY._options = None
-  _RESOURCE_PARAGRAPHSENTRY._serialized_options = b'8\001'
-  _RESOURCE_VECTORSENTRY._options = None
-  _RESOURCE_VECTORSENTRY._serialized_options = b'8\001'
-  _RESOURCE_VECTORSTODELETEENTRY._options = None
-  _RESOURCE_VECTORSTODELETEENTRY._serialized_options = b'8\001'
-  _NODEMETADATA_SHARDMETADATA.fields_by_name['load_score']._options = None
-  _NODEMETADATA_SHARDMETADATA.fields_by_name['load_score']._serialized_options = b'\030\001'
-  _NODEMETADATA_SHARDSENTRY._options = None
-  _NODEMETADATA_SHARDSENTRY._serialized_options = b'8\001'
-  _NODEMETADATA.fields_by_name['load_score']._options = None
-  _NODEMETADATA.fields_by_name['load_score']._serialized_options = b'\030\001'
-  _TEXTINFORMATION._serialized_start=116
-  _TEXTINFORMATION._serialized_end=163
-  _INDEXMETADATA._serialized_start=165
-  _INDEXMETADATA._serialized_end=271
-  _SHARDID._serialized_start=273
-  _SHARDID._serialized_end=294
-  _SHARDIDS._serialized_start=296
-  _SHARDIDS._serialized_end=343
-  _SHARDCREATED._serialized_start=346
-  _SHARDCREATED._serialized_end=863
-  _SHARDCREATED_DOCUMENTSERVICE._serialized_start=656
-  _SHARDCREATED_DOCUMENTSERVICE._serialized_end=707
-  _SHARDCREATED_PARAGRAPHSERVICE._serialized_start=709
-  _SHARDCREATED_PARAGRAPHSERVICE._serialized_end=763
-  _SHARDCREATED_VECTORSERVICE._serialized_start=765
-  _SHARDCREATED_VECTORSERVICE._serialized_end=810
-  _SHARDCREATED_RELATIONSERVICE._serialized_start=812
-  _SHARDCREATED_RELATIONSERVICE._serialized_end=863
-  _SHARDCLEANED._serialized_start=866
-  _SHARDCLEANED._serialized_end=1162
-  _RESOURCEID._serialized_start=1164
-  _RESOURCEID._serialized_end=1208
-  _SHARD._serialized_start=1211
-  _SHARD._serialized_end=1342
-  _SHARDLIST._serialized_start=1344
-  _SHARDLIST._serialized_end=1393
-  _EMPTYRESPONSE._serialized_start=1395
-  _EMPTYRESPONSE._serialized_end=1410
-  _EMPTYQUERY._serialized_start=1412
-  _EMPTYQUERY._serialized_end=1424
-  _POSITION._serialized_start=1426
-  _POSITION._serialized_end=1544
-  _SENTENCEMETADATA._serialized_start=1546
-  _SENTENCEMETADATA._serialized_end=1607
-  _VECTORSENTENCE._serialized_start=1609
-  _VECTORSENTENCE._serialized_end=1692
-  _PARAGRAPHMETADATA._serialized_start=1694
-  _PARAGRAPHMETADATA._serialized_end=1756
-  _INDEXPARAGRAPH._serialized_start=1759
-  _INDEXPARAGRAPH._serialized_end=2089
-  _INDEXPARAGRAPH_SENTENCESENTRY._serialized_start=2010
-  _INDEXPARAGRAPH_SENTENCESENTRY._serialized_end=2089
-  _VECTORSETID._serialized_start=2091
-  _VECTORSETID._serialized_end=2162
-  _VECTORSETLIST._serialized_start=2164
-  _VECTORSETLIST._serialized_end=2237
-  _INDEXPARAGRAPHS._serialized_start=2240
-  _INDEXPARAGRAPHS._serialized_end=2407
-  _INDEXPARAGRAPHS_PARAGRAPHSENTRY._serialized_start=2327
-  _INDEXPARAGRAPHS_PARAGRAPHSENTRY._serialized_end=2407
-  _RESOURCE._serialized_start=2410
-  _RESOURCE._serialized_end=3373
-  _RESOURCE_TEXTSENTRY._serialized_start=2986
-  _RESOURCE_TEXTSENTRY._serialized_end=3062
-  _RESOURCE_PARAGRAPHSENTRY._serialized_start=3064
-  _RESOURCE_PARAGRAPHSENTRY._serialized_end=3145
-  _RESOURCE_VECTORSENTRY._serialized_start=3147
-  _RESOURCE_VECTORSENTRY._serialized_end=3213
-  _RESOURCE_VECTORSTODELETEENTRY._serialized_start=3215
-  _RESOURCE_VECTORSTODELETEENTRY._serialized_end=3293
-  _RESOURCE_RESOURCESTATUS._serialized_start=3295
-  _RESOURCE_RESOURCESTATUS._serialized_end=3373
-  _SHARDMETADATA._serialized_start=3375
-  _SHARDMETADATA._serialized_end=3404
-  _NODEMETADATA._serialized_start=3407
-  _NODEMETADATA._serialized_end=3668
-  _NODEMETADATA_SHARDMETADATA._serialized_start=3525
-  _NODEMETADATA_SHARDMETADATA._serialized_end=3578
-  _NODEMETADATA_SHARDSENTRY._serialized_start=3580
-  _NODEMETADATA_SHARDSENTRY._serialized_end=3668
+  _globals['_INDEXPARAGRAPH_SENTENCESENTRY']._options = None
+  _globals['_INDEXPARAGRAPH_SENTENCESENTRY']._serialized_options = b'8\001'
+  _globals['_INDEXPARAGRAPHS_PARAGRAPHSENTRY']._options = None
+  _globals['_INDEXPARAGRAPHS_PARAGRAPHSENTRY']._serialized_options = b'8\001'
+  _globals['_RESOURCE_TEXTSENTRY']._options = None
+  _globals['_RESOURCE_TEXTSENTRY']._serialized_options = b'8\001'
+  _globals['_RESOURCE_PARAGRAPHSENTRY']._options = None
+  _globals['_RESOURCE_PARAGRAPHSENTRY']._serialized_options = b'8\001'
+  _globals['_RESOURCE_VECTORSENTRY']._options = None
+  _globals['_RESOURCE_VECTORSENTRY']._serialized_options = b'8\001'
+  _globals['_RESOURCE_VECTORSTODELETEENTRY']._options = None
+  _globals['_RESOURCE_VECTORSTODELETEENTRY']._serialized_options = b'8\001'
+  _globals['_NODEMETADATA_SHARDMETADATA'].fields_by_name['load_score']._options = None
+  _globals['_NODEMETADATA_SHARDMETADATA'].fields_by_name['load_score']._serialized_options = b'\030\001'
+  _globals['_NODEMETADATA_SHARDSENTRY']._options = None
+  _globals['_NODEMETADATA_SHARDSENTRY']._serialized_options = b'8\001'
+  _globals['_NODEMETADATA'].fields_by_name['load_score']._options = None
+  _globals['_NODEMETADATA'].fields_by_name['load_score']._serialized_options = b'\030\001'
+  _globals['_NODEMETADATA'].fields_by_name['shards']._options = None
+  _globals['_NODEMETADATA'].fields_by_name['shards']._serialized_options = b'\030\001'
+  _globals['_TEXTINFORMATION']._serialized_start=116
+  _globals['_TEXTINFORMATION']._serialized_end=163
+  _globals['_INDEXMETADATA']._serialized_start=165
+  _globals['_INDEXMETADATA']._serialized_end=271
+  _globals['_SHARDID']._serialized_start=273
+  _globals['_SHARDID']._serialized_end=294
+  _globals['_SHARDIDS']._serialized_start=296
+  _globals['_SHARDIDS']._serialized_end=343
+  _globals['_SHARDCREATED']._serialized_start=346
+  _globals['_SHARDCREATED']._serialized_end=915
+  _globals['_SHARDCREATED_DOCUMENTSERVICE']._serialized_start=656
+  _globals['_SHARDCREATED_DOCUMENTSERVICE']._serialized_end=724
+  _globals['_SHARDCREATED_PARAGRAPHSERVICE']._serialized_start=726
+  _globals['_SHARDCREATED_PARAGRAPHSERVICE']._serialized_end=798
+  _globals['_SHARDCREATED_VECTORSERVICE']._serialized_start=800
+  _globals['_SHARDCREATED_VECTORSERVICE']._serialized_end=845
+  _globals['_SHARDCREATED_RELATIONSERVICE']._serialized_start=847
+  _globals['_SHARDCREATED_RELATIONSERVICE']._serialized_end=915
+  _globals['_RESOURCEID']._serialized_start=917
+  _globals['_RESOURCEID']._serialized_end=961
+  _globals['_SHARD']._serialized_start=964
+  _globals['_SHARD']._serialized_end=1092
+  _globals['_EMPTYRESPONSE']._serialized_start=1094
+  _globals['_EMPTYRESPONSE']._serialized_end=1109
+  _globals['_EMPTYQUERY']._serialized_start=1111
+  _globals['_EMPTYQUERY']._serialized_end=1123
+  _globals['_POSITION']._serialized_start=1126
+  _globals['_POSITION']._serialized_end=1261
+  _globals['_REPRESENTATION']._serialized_start=1263
+  _globals['_REPRESENTATION']._serialized_end=1313
+  _globals['_SENTENCEMETADATA']._serialized_start=1316
+  _globals['_SENTENCEMETADATA']._serialized_end=1458
+  _globals['_VECTORSENTENCE']._serialized_start=1460
+  _globals['_VECTORSENTENCE']._serialized_end=1543
+  _globals['_PARAGRAPHMETADATA']._serialized_start=1546
+  _globals['_PARAGRAPHMETADATA']._serialized_end=1689
+  _globals['_INDEXPARAGRAPH']._serialized_start=1692
+  _globals['_INDEXPARAGRAPH']._serialized_end=2022
+  _globals['_INDEXPARAGRAPH_SENTENCESENTRY']._serialized_start=1943
+  _globals['_INDEXPARAGRAPH_SENTENCESENTRY']._serialized_end=2022
+  _globals['_VECTORSETID']._serialized_start=2024
+  _globals['_VECTORSETID']._serialized_end=2095
+  _globals['_VECTORSETLIST']._serialized_start=2097
+  _globals['_VECTORSETLIST']._serialized_end=2170
+  _globals['_INDEXPARAGRAPHS']._serialized_start=2173
+  _globals['_INDEXPARAGRAPHS']._serialized_end=2340
+  _globals['_INDEXPARAGRAPHS_PARAGRAPHSENTRY']._serialized_start=2260
+  _globals['_INDEXPARAGRAPHS_PARAGRAPHSENTRY']._serialized_end=2340
+  _globals['_RESOURCE']._serialized_start=2343
+  _globals['_RESOURCE']._serialized_end=3339
+  _globals['_RESOURCE_TEXTSENTRY']._serialized_start=2913
+  _globals['_RESOURCE_TEXTSENTRY']._serialized_end=2989
+  _globals['_RESOURCE_PARAGRAPHSENTRY']._serialized_start=2991
+  _globals['_RESOURCE_PARAGRAPHSENTRY']._serialized_end=3072
+  _globals['_RESOURCE_VECTORSENTRY']._serialized_start=3074
+  _globals['_RESOURCE_VECTORSENTRY']._serialized_end=3140
+  _globals['_RESOURCE_VECTORSTODELETEENTRY']._serialized_start=3142
+  _globals['_RESOURCE_VECTORSTODELETEENTRY']._serialized_end=3220
+  _globals['_RESOURCE_RESOURCESTATUS']._serialized_start=3222
+  _globals['_RESOURCE_RESOURCESTATUS']._serialized_end=3326
+  _globals['_SHARDMETADATA']._serialized_start=3341
+  _globals['_SHARDMETADATA']._serialized_end=3418
+  _globals['_NODEMETADATA']._serialized_start=3421
+  _globals['_NODEMETADATA']._serialized_end=3797
+  _globals['_NODEMETADATA_SHARDMETADATA']._serialized_start=3634
+  _globals['_NODEMETADATA_SHARDMETADATA']._serialized_end=3687
+  _globals['_NODEMETADATA_SHARDSENTRY']._serialized_start=3689
+  _globals['_NODEMETADATA_SHARDSENTRY']._serialized_end=3777
 # @@protoc_insertion_point(module_scope)
```

## nucliadb_protos/noderesources_pb2.pyi

```diff
@@ -16,20 +16,22 @@
 if sys.version_info >= (3, 10):
     import typing as typing_extensions
 else:
     import typing_extensions
 from nucliadb_protos.utils_pb2 import (
     COSINE as COSINE,
     DOT as DOT,
+    EXPERIMENTAL as EXPERIMENTAL,
     ExtractedText as ExtractedText,
-    JoinGraph as JoinGraph,
-    JoinGraphEdge as JoinGraphEdge,
     Relation as Relation,
     RelationMetadata as RelationMetadata,
     RelationNode as RelationNode,
+    ReleaseChannel as ReleaseChannel,
+    STABLE as STABLE,
+    Security as Security,
     UserVector as UserVector,
     UserVectorSet as UserVectorSet,
     UserVectors as UserVectors,
     UserVectorsList as UserVectorsList,
     Vector as Vector,
     VectorObject as VectorObject,
     VectorSimilarity as VectorSimilarity,
@@ -115,61 +117,67 @@
 class ShardCreated(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _DocumentService:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _DocumentServiceEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[ShardCreated._DocumentService.ValueType], builtins.type):  # noqa: F821
+    class _DocumentServiceEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[ShardCreated._DocumentService.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         DOCUMENT_V0: ShardCreated._DocumentService.ValueType  # 0
         DOCUMENT_V1: ShardCreated._DocumentService.ValueType  # 1
+        DOCUMENT_V2: ShardCreated._DocumentService.ValueType  # 2
 
     class DocumentService(_DocumentService, metaclass=_DocumentServiceEnumTypeWrapper): ...
     DOCUMENT_V0: ShardCreated.DocumentService.ValueType  # 0
     DOCUMENT_V1: ShardCreated.DocumentService.ValueType  # 1
+    DOCUMENT_V2: ShardCreated.DocumentService.ValueType  # 2
 
     class _ParagraphService:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _ParagraphServiceEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[ShardCreated._ParagraphService.ValueType], builtins.type):  # noqa: F821
+    class _ParagraphServiceEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[ShardCreated._ParagraphService.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         PARAGRAPH_V0: ShardCreated._ParagraphService.ValueType  # 0
         PARAGRAPH_V1: ShardCreated._ParagraphService.ValueType  # 1
+        PARAGRAPH_V2: ShardCreated._ParagraphService.ValueType  # 2
 
     class ParagraphService(_ParagraphService, metaclass=_ParagraphServiceEnumTypeWrapper): ...
     PARAGRAPH_V0: ShardCreated.ParagraphService.ValueType  # 0
     PARAGRAPH_V1: ShardCreated.ParagraphService.ValueType  # 1
+    PARAGRAPH_V2: ShardCreated.ParagraphService.ValueType  # 2
 
     class _VectorService:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _VectorServiceEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[ShardCreated._VectorService.ValueType], builtins.type):  # noqa: F821
+    class _VectorServiceEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[ShardCreated._VectorService.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         VECTOR_V0: ShardCreated._VectorService.ValueType  # 0
         VECTOR_V1: ShardCreated._VectorService.ValueType  # 1
 
     class VectorService(_VectorService, metaclass=_VectorServiceEnumTypeWrapper): ...
     VECTOR_V0: ShardCreated.VectorService.ValueType  # 0
     VECTOR_V1: ShardCreated.VectorService.ValueType  # 1
 
     class _RelationService:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _RelationServiceEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[ShardCreated._RelationService.ValueType], builtins.type):  # noqa: F821
+    class _RelationServiceEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[ShardCreated._RelationService.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         RELATION_V0: ShardCreated._RelationService.ValueType  # 0
         RELATION_V1: ShardCreated._RelationService.ValueType  # 1
+        RELATION_V2: ShardCreated._RelationService.ValueType  # 2
 
     class RelationService(_RelationService, metaclass=_RelationServiceEnumTypeWrapper): ...
     RELATION_V0: ShardCreated.RelationService.ValueType  # 0
     RELATION_V1: ShardCreated.RelationService.ValueType  # 1
+    RELATION_V2: ShardCreated.RelationService.ValueType  # 2
 
     ID_FIELD_NUMBER: builtins.int
     DOCUMENT_SERVICE_FIELD_NUMBER: builtins.int
     PARAGRAPH_SERVICE_FIELD_NUMBER: builtins.int
     VECTOR_SERVICE_FIELD_NUMBER: builtins.int
     RELATION_SERVICE_FIELD_NUMBER: builtins.int
     id: builtins.str
@@ -187,38 +195,14 @@
         relation_service: global___ShardCreated.RelationService.ValueType = ...,
     ) -> None: ...
     def ClearField(self, field_name: typing_extensions.Literal["document_service", b"document_service", "id", b"id", "paragraph_service", b"paragraph_service", "relation_service", b"relation_service", "vector_service", b"vector_service"]) -> None: ...
 
 global___ShardCreated = ShardCreated
 
 @typing_extensions.final
-class ShardCleaned(google.protobuf.message.Message):
-    DESCRIPTOR: google.protobuf.descriptor.Descriptor
-
-    DOCUMENT_SERVICE_FIELD_NUMBER: builtins.int
-    PARAGRAPH_SERVICE_FIELD_NUMBER: builtins.int
-    VECTOR_SERVICE_FIELD_NUMBER: builtins.int
-    RELATION_SERVICE_FIELD_NUMBER: builtins.int
-    document_service: global___ShardCreated.DocumentService.ValueType
-    paragraph_service: global___ShardCreated.ParagraphService.ValueType
-    vector_service: global___ShardCreated.VectorService.ValueType
-    relation_service: global___ShardCreated.RelationService.ValueType
-    def __init__(
-        self,
-        *,
-        document_service: global___ShardCreated.DocumentService.ValueType = ...,
-        paragraph_service: global___ShardCreated.ParagraphService.ValueType = ...,
-        vector_service: global___ShardCreated.VectorService.ValueType = ...,
-        relation_service: global___ShardCreated.RelationService.ValueType = ...,
-    ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["document_service", b"document_service", "paragraph_service", b"paragraph_service", "relation_service", b"relation_service", "vector_service", b"vector_service"]) -> None: ...
-
-global___ShardCleaned = ShardCleaned
-
-@typing_extensions.final
 class ResourceID(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     SHARD_ID_FIELD_NUMBER: builtins.int
     UUID_FIELD_NUMBER: builtins.int
     shard_id: builtins.str
     uuid: builtins.str
@@ -234,54 +218,38 @@
 
 @typing_extensions.final
 class Shard(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     METADATA_FIELD_NUMBER: builtins.int
     SHARD_ID_FIELD_NUMBER: builtins.int
-    RESOURCES_FIELD_NUMBER: builtins.int
+    FIELDS_FIELD_NUMBER: builtins.int
     PARAGRAPHS_FIELD_NUMBER: builtins.int
     SENTENCES_FIELD_NUMBER: builtins.int
     @property
     def metadata(self) -> global___ShardMetadata: ...
     shard_id: builtins.str
-    resources: builtins.int
+    fields: builtins.int
     paragraphs: builtins.int
     sentences: builtins.int
     def __init__(
         self,
         *,
         metadata: global___ShardMetadata | None = ...,
         shard_id: builtins.str = ...,
-        resources: builtins.int = ...,
+        fields: builtins.int = ...,
         paragraphs: builtins.int = ...,
         sentences: builtins.int = ...,
     ) -> None: ...
     def HasField(self, field_name: typing_extensions.Literal["metadata", b"metadata"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["metadata", b"metadata", "paragraphs", b"paragraphs", "resources", b"resources", "sentences", b"sentences", "shard_id", b"shard_id"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["fields", b"fields", "metadata", b"metadata", "paragraphs", b"paragraphs", "sentences", b"sentences", "shard_id", b"shard_id"]) -> None: ...
 
 global___Shard = Shard
 
 @typing_extensions.final
-class ShardList(google.protobuf.message.Message):
-    DESCRIPTOR: google.protobuf.descriptor.Descriptor
-
-    SHARDS_FIELD_NUMBER: builtins.int
-    @property
-    def shards(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___Shard]: ...
-    def __init__(
-        self,
-        *,
-        shards: collections.abc.Iterable[global___Shard] | None = ...,
-    ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["shards", b"shards"]) -> None: ...
-
-global___ShardList = ShardList
-
-@typing_extensions.final
 class EmptyResponse(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     def __init__(
         self,
     ) -> None: ...
 
@@ -301,54 +269,82 @@
 class Position(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     INDEX_FIELD_NUMBER: builtins.int
     START_FIELD_NUMBER: builtins.int
     END_FIELD_NUMBER: builtins.int
     PAGE_NUMBER_FIELD_NUMBER: builtins.int
+    IN_PAGE_FIELD_NUMBER: builtins.int
     START_SECONDS_FIELD_NUMBER: builtins.int
     END_SECONDS_FIELD_NUMBER: builtins.int
     index: builtins.int
     start: builtins.int
     end: builtins.int
     page_number: builtins.int
     """For pdfs/documents only"""
+    in_page: builtins.bool
     @property
     def start_seconds(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.int]:
         """For multimedia only"""
     @property
     def end_seconds(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.int]: ...
     def __init__(
         self,
         *,
         index: builtins.int = ...,
         start: builtins.int = ...,
         end: builtins.int = ...,
         page_number: builtins.int = ...,
+        in_page: builtins.bool = ...,
         start_seconds: collections.abc.Iterable[builtins.int] | None = ...,
         end_seconds: collections.abc.Iterable[builtins.int] | None = ...,
     ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["end", b"end", "end_seconds", b"end_seconds", "index", b"index", "page_number", b"page_number", "start", b"start", "start_seconds", b"start_seconds"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["end", b"end", "end_seconds", b"end_seconds", "in_page", b"in_page", "index", b"index", "page_number", b"page_number", "start", b"start", "start_seconds", b"start_seconds"]) -> None: ...
 
 global___Position = Position
 
 @typing_extensions.final
+class Representation(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    IS_A_TABLE_FIELD_NUMBER: builtins.int
+    FILE_FIELD_NUMBER: builtins.int
+    is_a_table: builtins.bool
+    file: builtins.str
+    def __init__(
+        self,
+        *,
+        is_a_table: builtins.bool = ...,
+        file: builtins.str = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["file", b"file", "is_a_table", b"is_a_table"]) -> None: ...
+
+global___Representation = Representation
+
+@typing_extensions.final
 class SentenceMetadata(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     POSITION_FIELD_NUMBER: builtins.int
+    PAGE_WITH_VISUAL_FIELD_NUMBER: builtins.int
+    REPRESENTATION_FIELD_NUMBER: builtins.int
     @property
     def position(self) -> global___Position: ...
+    page_with_visual: builtins.bool
+    @property
+    def representation(self) -> global___Representation: ...
     def __init__(
         self,
         *,
         position: global___Position | None = ...,
+        page_with_visual: builtins.bool = ...,
+        representation: global___Representation | None = ...,
     ) -> None: ...
-    def HasField(self, field_name: typing_extensions.Literal["position", b"position"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["position", b"position"]) -> None: ...
+    def HasField(self, field_name: typing_extensions.Literal["position", b"position", "representation", b"representation"]) -> builtins.bool: ...
+    def ClearField(self, field_name: typing_extensions.Literal["page_with_visual", b"page_with_visual", "position", b"position", "representation", b"representation"]) -> None: ...
 
 global___SentenceMetadata = SentenceMetadata
 
 @typing_extensions.final
 class VectorSentence(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
@@ -370,23 +366,30 @@
 global___VectorSentence = VectorSentence
 
 @typing_extensions.final
 class ParagraphMetadata(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     POSITION_FIELD_NUMBER: builtins.int
+    PAGE_WITH_VISUAL_FIELD_NUMBER: builtins.int
+    REPRESENTATION_FIELD_NUMBER: builtins.int
     @property
     def position(self) -> global___Position: ...
+    page_with_visual: builtins.bool
+    @property
+    def representation(self) -> global___Representation: ...
     def __init__(
         self,
         *,
         position: global___Position | None = ...,
+        page_with_visual: builtins.bool = ...,
+        representation: global___Representation | None = ...,
     ) -> None: ...
-    def HasField(self, field_name: typing_extensions.Literal["position", b"position"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["position", b"position"]) -> None: ...
+    def HasField(self, field_name: typing_extensions.Literal["position", b"position", "representation", b"representation"]) -> builtins.bool: ...
+    def ClearField(self, field_name: typing_extensions.Literal["page_with_visual", b"page_with_visual", "position", b"position", "representation", b"representation"]) -> None: ...
 
 global___ParagraphMetadata = ParagraphMetadata
 
 @typing_extensions.final
 class IndexParagraph(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
@@ -532,28 +535,32 @@
 class Resource(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _ResourceStatus:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _ResourceStatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Resource._ResourceStatus.ValueType], builtins.type):  # noqa: F821
+    class _ResourceStatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Resource._ResourceStatus.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         PROCESSED: Resource._ResourceStatus.ValueType  # 0
         EMPTY: Resource._ResourceStatus.ValueType  # 1
         ERROR: Resource._ResourceStatus.ValueType  # 2
         DELETE: Resource._ResourceStatus.ValueType  # 3
         PENDING: Resource._ResourceStatus.ValueType  # 4
+        BLOCKED: Resource._ResourceStatus.ValueType  # 5
+        EXPIRED: Resource._ResourceStatus.ValueType  # 6
 
     class ResourceStatus(_ResourceStatus, metaclass=_ResourceStatusEnumTypeWrapper): ...
     PROCESSED: Resource.ResourceStatus.ValueType  # 0
     EMPTY: Resource.ResourceStatus.ValueType  # 1
     ERROR: Resource.ResourceStatus.ValueType  # 2
     DELETE: Resource.ResourceStatus.ValueType  # 3
     PENDING: Resource.ResourceStatus.ValueType  # 4
+    BLOCKED: Resource.ResourceStatus.ValueType  # 5
+    EXPIRED: Resource.ResourceStatus.ValueType  # 6
 
     @typing_extensions.final
     class TextsEntry(google.protobuf.message.Message):
         DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
         KEY_FIELD_NUMBER: builtins.int
         VALUE_FIELD_NUMBER: builtins.int
@@ -628,18 +635,18 @@
     TEXTS_FIELD_NUMBER: builtins.int
     LABELS_FIELD_NUMBER: builtins.int
     STATUS_FIELD_NUMBER: builtins.int
     PARAGRAPHS_FIELD_NUMBER: builtins.int
     PARAGRAPHS_TO_DELETE_FIELD_NUMBER: builtins.int
     SENTENCES_TO_DELETE_FIELD_NUMBER: builtins.int
     RELATIONS_FIELD_NUMBER: builtins.int
-    RELATIONS_TO_DELETE_FIELD_NUMBER: builtins.int
     SHARD_ID_FIELD_NUMBER: builtins.int
     VECTORS_FIELD_NUMBER: builtins.int
     VECTORS_TO_DELETE_FIELD_NUMBER: builtins.int
+    SECURITY_FIELD_NUMBER: builtins.int
     @property
     def resource(self) -> global___ResourceID: ...
     @property
     def metadata(self) -> global___IndexMetadata: ...
     @property
     def texts(self) -> google.protobuf.internal.containers.MessageMap[builtins.str, global___TextInformation]:
         """Doc index
@@ -661,57 +668,61 @@
     @property
     def paragraphs_to_delete(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
     @property
     def sentences_to_delete(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
     @property
     def relations(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[nucliadb_protos.utils_pb2.Relation]:
         """Relations"""
-    @property
-    def relations_to_delete(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[nucliadb_protos.utils_pb2.Relation]: ...
     shard_id: builtins.str
     @property
     def vectors(self) -> google.protobuf.internal.containers.MessageMap[builtins.str, nucliadb_protos.utils_pb2.UserVectors]:
         """vectorset is the key"""
     @property
     def vectors_to_delete(self) -> google.protobuf.internal.containers.MessageMap[builtins.str, nucliadb_protos.utils_pb2.UserVectorsList]:
         """Vectorset prefix vector id"""
+    @property
+    def security(self) -> nucliadb_protos.utils_pb2.Security: ...
     def __init__(
         self,
         *,
         resource: global___ResourceID | None = ...,
         metadata: global___IndexMetadata | None = ...,
         texts: collections.abc.Mapping[builtins.str, global___TextInformation] | None = ...,
         labels: collections.abc.Iterable[builtins.str] | None = ...,
         status: global___Resource.ResourceStatus.ValueType = ...,
         paragraphs: collections.abc.Mapping[builtins.str, global___IndexParagraphs] | None = ...,
         paragraphs_to_delete: collections.abc.Iterable[builtins.str] | None = ...,
         sentences_to_delete: collections.abc.Iterable[builtins.str] | None = ...,
         relations: collections.abc.Iterable[nucliadb_protos.utils_pb2.Relation] | None = ...,
-        relations_to_delete: collections.abc.Iterable[nucliadb_protos.utils_pb2.Relation] | None = ...,
         shard_id: builtins.str = ...,
         vectors: collections.abc.Mapping[builtins.str, nucliadb_protos.utils_pb2.UserVectors] | None = ...,
         vectors_to_delete: collections.abc.Mapping[builtins.str, nucliadb_protos.utils_pb2.UserVectorsList] | None = ...,
+        security: nucliadb_protos.utils_pb2.Security | None = ...,
     ) -> None: ...
-    def HasField(self, field_name: typing_extensions.Literal["metadata", b"metadata", "resource", b"resource"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["labels", b"labels", "metadata", b"metadata", "paragraphs", b"paragraphs", "paragraphs_to_delete", b"paragraphs_to_delete", "relations", b"relations", "relations_to_delete", b"relations_to_delete", "resource", b"resource", "sentences_to_delete", b"sentences_to_delete", "shard_id", b"shard_id", "status", b"status", "texts", b"texts", "vectors", b"vectors", "vectors_to_delete", b"vectors_to_delete"]) -> None: ...
+    def HasField(self, field_name: typing_extensions.Literal["_security", b"_security", "metadata", b"metadata", "resource", b"resource", "security", b"security"]) -> builtins.bool: ...
+    def ClearField(self, field_name: typing_extensions.Literal["_security", b"_security", "labels", b"labels", "metadata", b"metadata", "paragraphs", b"paragraphs", "paragraphs_to_delete", b"paragraphs_to_delete", "relations", b"relations", "resource", b"resource", "security", b"security", "sentences_to_delete", b"sentences_to_delete", "shard_id", b"shard_id", "status", b"status", "texts", b"texts", "vectors", b"vectors", "vectors_to_delete", b"vectors_to_delete"]) -> None: ...
+    def WhichOneof(self, oneof_group: typing_extensions.Literal["_security", b"_security"]) -> typing_extensions.Literal["security"] | None: ...
 
 global___Resource = Resource
 
 @typing_extensions.final
 class ShardMetadata(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     KBID_FIELD_NUMBER: builtins.int
+    RELEASE_CHANNEL_FIELD_NUMBER: builtins.int
     kbid: builtins.str
+    release_channel: nucliadb_protos.utils_pb2.ReleaseChannel.ValueType
     def __init__(
         self,
         *,
         kbid: builtins.str = ...,
+        release_channel: nucliadb_protos.utils_pb2.ReleaseChannel.ValueType = ...,
     ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["kbid", b"kbid"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["kbid", b"kbid", "release_channel", b"release_channel"]) -> None: ...
 
 global___ShardMetadata = ShardMetadata
 
 @typing_extensions.final
 class NodeMetadata(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
@@ -748,21 +759,35 @@
         ) -> None: ...
         def HasField(self, field_name: typing_extensions.Literal["value", b"value"]) -> builtins.bool: ...
         def ClearField(self, field_name: typing_extensions.Literal["key", b"key", "value", b"value"]) -> None: ...
 
     LOAD_SCORE_FIELD_NUMBER: builtins.int
     SHARD_COUNT_FIELD_NUMBER: builtins.int
     SHARDS_FIELD_NUMBER: builtins.int
+    NODE_ID_FIELD_NUMBER: builtins.int
+    PRIMARY_NODE_ID_FIELD_NUMBER: builtins.int
+    AVAILABLE_DISK_FIELD_NUMBER: builtins.int
+    TOTAL_DISK_FIELD_NUMBER: builtins.int
     load_score: builtins.float
     shard_count: builtins.int
     @property
     def shards(self) -> google.protobuf.internal.containers.MessageMap[builtins.str, global___NodeMetadata.ShardMetadata]: ...
+    node_id: builtins.str
+    primary_node_id: builtins.str
+    available_disk: builtins.int
+    total_disk: builtins.int
     def __init__(
         self,
         *,
         load_score: builtins.float = ...,
         shard_count: builtins.int = ...,
         shards: collections.abc.Mapping[builtins.str, global___NodeMetadata.ShardMetadata] | None = ...,
-    ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["load_score", b"load_score", "shard_count", b"shard_count", "shards", b"shards"]) -> None: ...
+        node_id: builtins.str = ...,
+        primary_node_id: builtins.str | None = ...,
+        available_disk: builtins.int = ...,
+        total_disk: builtins.int = ...,
+    ) -> None: ...
+    def HasField(self, field_name: typing_extensions.Literal["_primary_node_id", b"_primary_node_id", "primary_node_id", b"primary_node_id"]) -> builtins.bool: ...
+    def ClearField(self, field_name: typing_extensions.Literal["_primary_node_id", b"_primary_node_id", "available_disk", b"available_disk", "load_score", b"load_score", "node_id", b"node_id", "primary_node_id", b"primary_node_id", "shard_count", b"shard_count", "shards", b"shards", "total_disk", b"total_disk"]) -> None: ...
+    def WhichOneof(self, oneof_group: typing_extensions.Literal["_primary_node_id", b"_primary_node_id"]) -> typing_extensions.Literal["primary_node_id"] | None: ...
 
 global___NodeMetadata = NodeMetadata
```

## nucliadb_protos/nodewriter_pb2.py

```diff
@@ -1,51 +1,54 @@
 # -*- coding: utf-8 -*-
 # Generated by the protocol buffer compiler.  DO NOT EDIT!
 # source: nucliadb_protos/nodewriter.proto
+# Protobuf Python Version: 4.25.0
 """Generated protocol buffer code."""
-from google.protobuf.internal import builder as _builder
 from google.protobuf import descriptor as _descriptor
 from google.protobuf import descriptor_pool as _descriptor_pool
 from google.protobuf import symbol_database as _symbol_database
+from google.protobuf.internal import builder as _builder
 # @@protoc_insertion_point(imports)
 
 _sym_db = _symbol_database.Default()
 
 
 from nucliadb_protos import noderesources_pb2 as nucliadb__protos_dot_noderesources__pb2
 try:
   nucliadb__protos_dot_utils__pb2 = nucliadb__protos_dot_noderesources__pb2.nucliadb__protos_dot_utils__pb2
 except AttributeError:
   nucliadb__protos_dot_utils__pb2 = nucliadb__protos_dot_noderesources__pb2.nucliadb_protos.utils_pb2
 
 from nucliadb_protos.noderesources_pb2 import *
 
-DESCRIPTOR = _descriptor_pool.Default().AddSerializedFile(b'\n nucliadb_protos/nodewriter.proto\x12\nnodewriter\x1a#nucliadb_protos/noderesources.proto\"\xc5\x01\n\x08OpStatus\x12+\n\x06status\x18\x01 \x01(\x0e\x32\x1b.nodewriter.OpStatus.Status\x12\x0e\n\x06\x64\x65tail\x18\x02 \x01(\t\x12\r\n\x05\x63ount\x18\x03 \x01(\x04\x12\x18\n\x10\x63ount_paragraphs\x18\x05 \x01(\x04\x12\x17\n\x0f\x63ount_sentences\x18\x06 \x01(\x04\x12\x10\n\x08shard_id\x18\x04 \x01(\t\"(\n\x06Status\x12\x06\n\x02OK\x10\x00\x12\x0b\n\x07WARNING\x10\x01\x12\t\n\x05\x45RROR\x10\x02\"\xd6\x01\n\x0cIndexMessage\x12\x0c\n\x04node\x18\x01 \x01(\t\x12\r\n\x05shard\x18\x02 \x01(\t\x12\x0c\n\x04txid\x18\x03 \x01(\x04\x12\x10\n\x08resource\x18\x04 \x01(\t\x12,\n\x0btypemessage\x18\x05 \x01(\x0e\x32\x17.nodewriter.TypeMessage\x12\x12\n\nreindex_id\x18\x06 \x01(\t\x12\x16\n\tpartition\x18\x07 \x01(\tH\x00\x88\x01\x01\x12\x13\n\x0bstorage_key\x18\x08 \x01(\t\x12\x0c\n\x04kbid\x18\t \x01(\tB\x0c\n\n_partition\"U\n\x08SetGraph\x12(\n\x08shard_id\x18\x01 \x01(\x0b\x32\x16.noderesources.ShardId\x12\x1f\n\x05graph\x18\x02 \x01(\x0b\x32\x10.utils.JoinGraph\"`\n\x10\x44\x65leteGraphNodes\x12(\n\x08shard_id\x18\x02 \x01(\x0b\x32\x16.noderesources.ShardId\x12\"\n\x05nodes\x18\x01 \x03(\x0b\x32\x13.utils.RelationNode\"M\n\x10MoveShardRequest\x12(\n\x08shard_id\x18\x01 \x01(\x0b\x32\x16.noderesources.ShardId\x12\x0f\n\x07\x61\x64\x64ress\x18\x02 \x01(\t\"d\n\x12\x41\x63\x63\x65ptShardRequest\x12(\n\x08shard_id\x18\x01 \x01(\x0b\x32\x16.noderesources.ShardId\x12\x0c\n\x04port\x18\x02 \x01(\r\x12\x16\n\x0eoverride_shard\x18\x03 \x01(\x08\"L\n\x0fNewShardRequest\x12+\n\nsimilarity\x18\x01 \x01(\x0e\x32\x17.utils.VectorSimilarity\x12\x0c\n\x04kbid\x18\x02 \x01(\t\"j\n\x13NewVectorSetRequest\x12&\n\x02id\x18\x01 \x01(\x0b\x32\x1a.noderesources.VectorSetID\x12+\n\nsimilarity\x18\x02 \x01(\x0e\x32\x17.utils.VectorSimilarity*)\n\x0bTypeMessage\x12\x0c\n\x08\x43REATION\x10\x00\x12\x0c\n\x08\x44\x45LETION\x10\x01\x32\xee\x08\n\nNodeWriter\x12<\n\x08GetShard\x12\x16.noderesources.ShardId\x1a\x16.noderesources.ShardId\"\x00\x12\x46\n\x08NewShard\x12\x1b.nodewriter.NewShardRequest\x1a\x1b.noderesources.ShardCreated\"\x00\x12M\n\x14\x43leanAndUpgradeShard\x12\x16.noderesources.ShardId\x1a\x1b.noderesources.ShardCleaned\"\x00\x12?\n\x0b\x44\x65leteShard\x12\x16.noderesources.ShardId\x1a\x16.noderesources.ShardId\"\x00\x12\x42\n\nListShards\x12\x19.noderesources.EmptyQuery\x1a\x17.noderesources.ShardIds\"\x00\x12<\n\x02GC\x12\x16.noderesources.ShardId\x1a\x1c.noderesources.EmptyResponse\"\x00\x12>\n\x0bSetResource\x12\x17.noderesources.Resource\x1a\x14.nodewriter.OpStatus\"\x00\x12K\n\x13\x44\x65leteRelationNodes\x12\x1c.nodewriter.DeleteGraphNodes\x1a\x14.nodewriter.OpStatus\"\x00\x12\x39\n\tJoinGraph\x12\x14.nodewriter.SetGraph\x1a\x14.nodewriter.OpStatus\"\x00\x12\x43\n\x0eRemoveResource\x12\x19.noderesources.ResourceID\x1a\x14.nodewriter.OpStatus\"\x00\x12G\n\x0c\x41\x64\x64VectorSet\x12\x1f.nodewriter.NewVectorSetRequest\x1a\x14.nodewriter.OpStatus\"\x00\x12\x45\n\x0fRemoveVectorSet\x12\x1a.noderesources.VectorSetID\x1a\x14.nodewriter.OpStatus\"\x00\x12H\n\x0eListVectorSets\x12\x16.noderesources.ShardId\x1a\x1c.noderesources.VectorSetList\"\x00\x12I\n\tMoveShard\x12\x1c.nodewriter.MoveShardRequest\x1a\x1c.noderesources.EmptyResponse\"\x00\x12M\n\x0b\x41\x63\x63\x65ptShard\x12\x1e.nodewriter.AcceptShardRequest\x1a\x1c.noderesources.EmptyResponse\"\x00\x12G\n\x0bGetMetadata\x12\x19.noderesources.EmptyQuery\x1a\x1b.noderesources.NodeMetadata\"\x00P\x00\x62\x06proto3')
+DESCRIPTOR = _descriptor_pool.Default().AddSerializedFile(b'\n nucliadb_protos/nodewriter.proto\x12\nnodewriter\x1a#nucliadb_protos/noderesources.proto\"\xc9\x01\n\x08OpStatus\x12+\n\x06status\x18\x01 \x01(\x0e\x32\x1b.nodewriter.OpStatus.Status\x12\x0e\n\x06\x64\x65tail\x18\x02 \x01(\t\x12\x13\n\x0b\x66ield_count\x18\x03 \x01(\x04\x12\x17\n\x0fparagraph_count\x18\x05 \x01(\x04\x12\x16\n\x0esentence_count\x18\x06 \x01(\x04\x12\x10\n\x08shard_id\x18\x04 \x01(\t\"(\n\x06Status\x12\x06\n\x02OK\x10\x00\x12\x0b\n\x07WARNING\x10\x01\x12\t\n\x05\x45RROR\x10\x02\"\x86\x02\n\x0cIndexMessage\x12\x0c\n\x04node\x18\x01 \x01(\t\x12\r\n\x05shard\x18\x02 \x01(\t\x12\x0c\n\x04txid\x18\x03 \x01(\x04\x12\x10\n\x08resource\x18\x04 \x01(\t\x12,\n\x0btypemessage\x18\x05 \x01(\x0e\x32\x17.nodewriter.TypeMessage\x12\x12\n\nreindex_id\x18\x06 \x01(\t\x12\x16\n\tpartition\x18\x07 \x01(\tH\x00\x88\x01\x01\x12\x13\n\x0bstorage_key\x18\x08 \x01(\t\x12\x0c\n\x04kbid\x18\t \x01(\t\x12.\n\x06source\x18\n \x01(\x0e\x32\x1e.nodewriter.IndexMessageSourceB\x0c\n\n_partition\"x\n\x18GarbageCollectorResponse\x12;\n\x06status\x18\x01 \x01(\x0e\x32+.nodewriter.GarbageCollectorResponse.Status\"\x1f\n\x06Status\x12\x06\n\x02OK\x10\x00\x12\r\n\tTRY_LATER\x10\x01\"|\n\x0fNewShardRequest\x12+\n\nsimilarity\x18\x01 \x01(\x0e\x32\x17.utils.VectorSimilarity\x12\x0c\n\x04kbid\x18\x02 \x01(\t\x12.\n\x0frelease_channel\x18\x03 \x01(\x0e\x32\x15.utils.ReleaseChannel\"j\n\x13NewVectorSetRequest\x12&\n\x02id\x18\x01 \x01(\x0b\x32\x1a.noderesources.VectorSetID\x12+\n\nsimilarity\x18\x02 \x01(\x0e\x32\x17.utils.VectorSimilarity\"\x92\x01\n\rMergeResponse\x12\x35\n\x06status\x18\x01 \x01(\x0e\x32%.nodewriter.MergeResponse.MergeStatus\x12\x17\n\x0fmerged_segments\x18\x02 \x01(\r\x12\x1a\n\x12remaining_segments\x18\x03 \x01(\r\"\x15\n\x0bMergeStatus\x12\x06\n\x02OK\x10\x00*)\n\x0bTypeMessage\x12\x0c\n\x08\x43REATION\x10\x00\x12\x0c\n\x08\x44\x45LETION\x10\x01*/\n\x12IndexMessageSource\x12\r\n\tPROCESSOR\x10\x00\x12\n\n\x06WRITER\x10\x01\x32\x85\x06\n\nNodeWriter\x12\x46\n\x08NewShard\x12\x1b.nodewriter.NewShardRequest\x1a\x1b.noderesources.ShardCreated\"\x00\x12?\n\x0b\x44\x65leteShard\x12\x16.noderesources.ShardId\x1a\x16.noderesources.ShardId\"\x00\x12\x42\n\nListShards\x12\x19.noderesources.EmptyQuery\x1a\x17.noderesources.ShardIds\"\x00\x12\x44\n\x02GC\x12\x16.noderesources.ShardId\x1a$.nodewriter.GarbageCollectorResponse\"\x00\x12<\n\x05Merge\x12\x16.noderesources.ShardId\x1a\x19.nodewriter.MergeResponse\"\x00\x12>\n\x0bSetResource\x12\x17.noderesources.Resource\x1a\x14.nodewriter.OpStatus\"\x00\x12\x43\n\x0eRemoveResource\x12\x19.noderesources.ResourceID\x1a\x14.nodewriter.OpStatus\"\x00\x12G\n\x0c\x41\x64\x64VectorSet\x12\x1f.nodewriter.NewVectorSetRequest\x1a\x14.nodewriter.OpStatus\"\x00\x12\x45\n\x0fRemoveVectorSet\x12\x1a.noderesources.VectorSetID\x1a\x14.nodewriter.OpStatus\"\x00\x12H\n\x0eListVectorSets\x12\x16.noderesources.ShardId\x1a\x1c.noderesources.VectorSetList\"\x00\x12G\n\x0bGetMetadata\x12\x19.noderesources.EmptyQuery\x1a\x1b.noderesources.NodeMetadata\"\x00P\x00\x62\x06proto3')
 
-_builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, globals())
-_builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, 'nucliadb_protos.nodewriter_pb2', globals())
+_globals = globals()
+_builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, _globals)
+_builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, 'nucliadb_protos.nodewriter_pb2', _globals)
 if _descriptor._USE_C_DESCRIPTORS == False:
-
   DESCRIPTOR._options = None
-  _TYPEMESSAGE._serialized_start=1054
-  _TYPEMESSAGE._serialized_end=1095
-  _OPSTATUS._serialized_start=86
-  _OPSTATUS._serialized_end=283
-  _OPSTATUS_STATUS._serialized_start=243
-  _OPSTATUS_STATUS._serialized_end=283
-  _INDEXMESSAGE._serialized_start=286
-  _INDEXMESSAGE._serialized_end=500
-  _SETGRAPH._serialized_start=502
-  _SETGRAPH._serialized_end=587
-  _DELETEGRAPHNODES._serialized_start=589
-  _DELETEGRAPHNODES._serialized_end=685
-  _MOVESHARDREQUEST._serialized_start=687
-  _MOVESHARDREQUEST._serialized_end=764
-  _ACCEPTSHARDREQUEST._serialized_start=766
-  _ACCEPTSHARDREQUEST._serialized_end=866
-  _NEWSHARDREQUEST._serialized_start=868
-  _NEWSHARDREQUEST._serialized_end=944
-  _NEWVECTORSETREQUEST._serialized_start=946
-  _NEWVECTORSETREQUEST._serialized_end=1052
-  _NODEWRITER._serialized_start=1098
-  _NODEWRITER._serialized_end=2232
+  _globals['_TYPEMESSAGE']._serialized_start=1059
+  _globals['_TYPEMESSAGE']._serialized_end=1100
+  _globals['_INDEXMESSAGESOURCE']._serialized_start=1102
+  _globals['_INDEXMESSAGESOURCE']._serialized_end=1149
+  _globals['_OPSTATUS']._serialized_start=86
+  _globals['_OPSTATUS']._serialized_end=287
+  _globals['_OPSTATUS_STATUS']._serialized_start=247
+  _globals['_OPSTATUS_STATUS']._serialized_end=287
+  _globals['_INDEXMESSAGE']._serialized_start=290
+  _globals['_INDEXMESSAGE']._serialized_end=552
+  _globals['_GARBAGECOLLECTORRESPONSE']._serialized_start=554
+  _globals['_GARBAGECOLLECTORRESPONSE']._serialized_end=674
+  _globals['_GARBAGECOLLECTORRESPONSE_STATUS']._serialized_start=643
+  _globals['_GARBAGECOLLECTORRESPONSE_STATUS']._serialized_end=674
+  _globals['_NEWSHARDREQUEST']._serialized_start=676
+  _globals['_NEWSHARDREQUEST']._serialized_end=800
+  _globals['_NEWVECTORSETREQUEST']._serialized_start=802
+  _globals['_NEWVECTORSETREQUEST']._serialized_end=908
+  _globals['_MERGERESPONSE']._serialized_start=911
+  _globals['_MERGERESPONSE']._serialized_end=1057
+  _globals['_MERGERESPONSE_MERGESTATUS']._serialized_start=1036
+  _globals['_MERGERESPONSE_MERGESTATUS']._serialized_end=1057
+  _globals['_NODEWRITER']._serialized_start=1152
+  _globals['_NODEWRITER']._serialized_end=1925
 # @@protoc_insertion_point(module_scope)
```

## nucliadb_protos/nodewriter_pb2.pyi

```diff
@@ -1,15 +1,13 @@
 """
 @generated by mypy-protobuf.  Do not edit manually!
 isort:skip_file
 """
 import builtins
-import collections.abc
 import google.protobuf.descriptor
-import google.protobuf.internal.containers
 import google.protobuf.internal.enum_type_wrapper
 import google.protobuf.message
 import nucliadb_protos.noderesources_pb2
 import nucliadb_protos.utils_pb2
 import sys
 import typing
 
@@ -22,23 +20,22 @@
     EmptyResponse as EmptyResponse,
     IndexMetadata as IndexMetadata,
     IndexParagraph as IndexParagraph,
     IndexParagraphs as IndexParagraphs,
     NodeMetadata as NodeMetadata,
     ParagraphMetadata as ParagraphMetadata,
     Position as Position,
+    Representation as Representation,
     Resource as Resource,
     ResourceID as ResourceID,
     SentenceMetadata as SentenceMetadata,
     Shard as Shard,
-    ShardCleaned as ShardCleaned,
     ShardCreated as ShardCreated,
     ShardId as ShardId,
     ShardIds as ShardIds,
-    ShardList as ShardList,
     ShardMetadata as ShardMetadata,
     TextInformation as TextInformation,
     VectorSentence as VectorSentence,
     VectorSetID as VectorSetID,
     VectorSetList as VectorSetList,
 )
 
@@ -56,56 +53,71 @@
 class TypeMessage(_TypeMessage, metaclass=_TypeMessageEnumTypeWrapper):
     """Implemented at nucliadb_object_storage"""
 
 CREATION: TypeMessage.ValueType  # 0
 DELETION: TypeMessage.ValueType  # 1
 global___TypeMessage = TypeMessage
 
+class _IndexMessageSource:
+    ValueType = typing.NewType("ValueType", builtins.int)
+    V: typing_extensions.TypeAlias = ValueType
+
+class _IndexMessageSourceEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[_IndexMessageSource.ValueType], builtins.type):
+    DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
+    PROCESSOR: _IndexMessageSource.ValueType  # 0
+    WRITER: _IndexMessageSource.ValueType  # 1
+
+class IndexMessageSource(_IndexMessageSource, metaclass=_IndexMessageSourceEnumTypeWrapper): ...
+
+PROCESSOR: IndexMessageSource.ValueType  # 0
+WRITER: IndexMessageSource.ValueType  # 1
+global___IndexMessageSource = IndexMessageSource
+
 @typing_extensions.final
 class OpStatus(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _Status:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[OpStatus._Status.ValueType], builtins.type):  # noqa: F821
+    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[OpStatus._Status.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         OK: OpStatus._Status.ValueType  # 0
         WARNING: OpStatus._Status.ValueType  # 1
         ERROR: OpStatus._Status.ValueType  # 2
 
     class Status(_Status, metaclass=_StatusEnumTypeWrapper): ...
     OK: OpStatus.Status.ValueType  # 0
     WARNING: OpStatus.Status.ValueType  # 1
     ERROR: OpStatus.Status.ValueType  # 2
 
     STATUS_FIELD_NUMBER: builtins.int
     DETAIL_FIELD_NUMBER: builtins.int
-    COUNT_FIELD_NUMBER: builtins.int
-    COUNT_PARAGRAPHS_FIELD_NUMBER: builtins.int
-    COUNT_SENTENCES_FIELD_NUMBER: builtins.int
+    FIELD_COUNT_FIELD_NUMBER: builtins.int
+    PARAGRAPH_COUNT_FIELD_NUMBER: builtins.int
+    SENTENCE_COUNT_FIELD_NUMBER: builtins.int
     SHARD_ID_FIELD_NUMBER: builtins.int
     status: global___OpStatus.Status.ValueType
     detail: builtins.str
-    count: builtins.int
-    count_paragraphs: builtins.int
-    count_sentences: builtins.int
+    field_count: builtins.int
+    paragraph_count: builtins.int
+    sentence_count: builtins.int
     shard_id: builtins.str
     def __init__(
         self,
         *,
         status: global___OpStatus.Status.ValueType = ...,
         detail: builtins.str = ...,
-        count: builtins.int = ...,
-        count_paragraphs: builtins.int = ...,
-        count_sentences: builtins.int = ...,
+        field_count: builtins.int = ...,
+        paragraph_count: builtins.int = ...,
+        sentence_count: builtins.int = ...,
         shard_id: builtins.str = ...,
     ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["count", b"count", "count_paragraphs", b"count_paragraphs", "count_sentences", b"count_sentences", "detail", b"detail", "shard_id", b"shard_id", "status", b"status"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["detail", b"detail", "field_count", b"field_count", "paragraph_count", b"paragraph_count", "sentence_count", b"sentence_count", "shard_id", b"shard_id", "status", b"status"]) -> None: ...
 
 global___OpStatus = OpStatus
 
 @typing_extensions.final
 class IndexMessage(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
@@ -114,143 +126,92 @@
     TXID_FIELD_NUMBER: builtins.int
     RESOURCE_FIELD_NUMBER: builtins.int
     TYPEMESSAGE_FIELD_NUMBER: builtins.int
     REINDEX_ID_FIELD_NUMBER: builtins.int
     PARTITION_FIELD_NUMBER: builtins.int
     STORAGE_KEY_FIELD_NUMBER: builtins.int
     KBID_FIELD_NUMBER: builtins.int
+    SOURCE_FIELD_NUMBER: builtins.int
     node: builtins.str
     shard: builtins.str
     """physical shard message is for"""
     txid: builtins.int
     resource: builtins.str
     typemessage: global___TypeMessage.ValueType
     reindex_id: builtins.str
     partition: builtins.str
     storage_key: builtins.str
     kbid: builtins.str
+    source: global___IndexMessageSource.ValueType
     def __init__(
         self,
         *,
         node: builtins.str = ...,
         shard: builtins.str = ...,
         txid: builtins.int = ...,
         resource: builtins.str = ...,
         typemessage: global___TypeMessage.ValueType = ...,
         reindex_id: builtins.str = ...,
         partition: builtins.str | None = ...,
         storage_key: builtins.str = ...,
         kbid: builtins.str = ...,
+        source: global___IndexMessageSource.ValueType = ...,
     ) -> None: ...
     def HasField(self, field_name: typing_extensions.Literal["_partition", b"_partition", "partition", b"partition"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["_partition", b"_partition", "kbid", b"kbid", "node", b"node", "partition", b"partition", "reindex_id", b"reindex_id", "resource", b"resource", "shard", b"shard", "storage_key", b"storage_key", "txid", b"txid", "typemessage", b"typemessage"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["_partition", b"_partition", "kbid", b"kbid", "node", b"node", "partition", b"partition", "reindex_id", b"reindex_id", "resource", b"resource", "shard", b"shard", "source", b"source", "storage_key", b"storage_key", "txid", b"txid", "typemessage", b"typemessage"]) -> None: ...
     def WhichOneof(self, oneof_group: typing_extensions.Literal["_partition", b"_partition"]) -> typing_extensions.Literal["partition"] | None: ...
 
 global___IndexMessage = IndexMessage
 
 @typing_extensions.final
-class SetGraph(google.protobuf.message.Message):
-    DESCRIPTOR: google.protobuf.descriptor.Descriptor
-
-    SHARD_ID_FIELD_NUMBER: builtins.int
-    GRAPH_FIELD_NUMBER: builtins.int
-    @property
-    def shard_id(self) -> nucliadb_protos.noderesources_pb2.ShardId: ...
-    @property
-    def graph(self) -> nucliadb_protos.utils_pb2.JoinGraph: ...
-    def __init__(
-        self,
-        *,
-        shard_id: nucliadb_protos.noderesources_pb2.ShardId | None = ...,
-        graph: nucliadb_protos.utils_pb2.JoinGraph | None = ...,
-    ) -> None: ...
-    def HasField(self, field_name: typing_extensions.Literal["graph", b"graph", "shard_id", b"shard_id"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["graph", b"graph", "shard_id", b"shard_id"]) -> None: ...
-
-global___SetGraph = SetGraph
-
-@typing_extensions.final
-class DeleteGraphNodes(google.protobuf.message.Message):
-    DESCRIPTOR: google.protobuf.descriptor.Descriptor
-
-    SHARD_ID_FIELD_NUMBER: builtins.int
-    NODES_FIELD_NUMBER: builtins.int
-    @property
-    def shard_id(self) -> nucliadb_protos.noderesources_pb2.ShardId: ...
-    @property
-    def nodes(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[nucliadb_protos.utils_pb2.RelationNode]: ...
-    def __init__(
-        self,
-        *,
-        shard_id: nucliadb_protos.noderesources_pb2.ShardId | None = ...,
-        nodes: collections.abc.Iterable[nucliadb_protos.utils_pb2.RelationNode] | None = ...,
-    ) -> None: ...
-    def HasField(self, field_name: typing_extensions.Literal["shard_id", b"shard_id"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["nodes", b"nodes", "shard_id", b"shard_id"]) -> None: ...
-
-global___DeleteGraphNodes = DeleteGraphNodes
-
-@typing_extensions.final
-class MoveShardRequest(google.protobuf.message.Message):
+class GarbageCollectorResponse(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
-    SHARD_ID_FIELD_NUMBER: builtins.int
-    ADDRESS_FIELD_NUMBER: builtins.int
-    @property
-    def shard_id(self) -> nucliadb_protos.noderesources_pb2.ShardId: ...
-    address: builtins.str
-    def __init__(
-        self,
-        *,
-        shard_id: nucliadb_protos.noderesources_pb2.ShardId | None = ...,
-        address: builtins.str = ...,
-    ) -> None: ...
-    def HasField(self, field_name: typing_extensions.Literal["shard_id", b"shard_id"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["address", b"address", "shard_id", b"shard_id"]) -> None: ...
+    class _Status:
+        ValueType = typing.NewType("ValueType", builtins.int)
+        V: typing_extensions.TypeAlias = ValueType
 
-global___MoveShardRequest = MoveShardRequest
+    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[GarbageCollectorResponse._Status.ValueType], builtins.type):
+        DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
+        OK: GarbageCollectorResponse._Status.ValueType  # 0
+        TRY_LATER: GarbageCollectorResponse._Status.ValueType  # 1
 
-@typing_extensions.final
-class AcceptShardRequest(google.protobuf.message.Message):
-    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+    class Status(_Status, metaclass=_StatusEnumTypeWrapper): ...
+    OK: GarbageCollectorResponse.Status.ValueType  # 0
+    TRY_LATER: GarbageCollectorResponse.Status.ValueType  # 1
 
-    SHARD_ID_FIELD_NUMBER: builtins.int
-    PORT_FIELD_NUMBER: builtins.int
-    OVERRIDE_SHARD_FIELD_NUMBER: builtins.int
-    @property
-    def shard_id(self) -> nucliadb_protos.noderesources_pb2.ShardId: ...
-    port: builtins.int
-    override_shard: builtins.bool
+    STATUS_FIELD_NUMBER: builtins.int
+    status: global___GarbageCollectorResponse.Status.ValueType
     def __init__(
         self,
         *,
-        shard_id: nucliadb_protos.noderesources_pb2.ShardId | None = ...,
-        port: builtins.int = ...,
-        override_shard: builtins.bool = ...,
+        status: global___GarbageCollectorResponse.Status.ValueType = ...,
     ) -> None: ...
-    def HasField(self, field_name: typing_extensions.Literal["shard_id", b"shard_id"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["override_shard", b"override_shard", "port", b"port", "shard_id", b"shard_id"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["status", b"status"]) -> None: ...
 
-global___AcceptShardRequest = AcceptShardRequest
+global___GarbageCollectorResponse = GarbageCollectorResponse
 
 @typing_extensions.final
 class NewShardRequest(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     SIMILARITY_FIELD_NUMBER: builtins.int
     KBID_FIELD_NUMBER: builtins.int
+    RELEASE_CHANNEL_FIELD_NUMBER: builtins.int
     similarity: nucliadb_protos.utils_pb2.VectorSimilarity.ValueType
     kbid: builtins.str
+    release_channel: nucliadb_protos.utils_pb2.ReleaseChannel.ValueType
     def __init__(
         self,
         *,
         similarity: nucliadb_protos.utils_pb2.VectorSimilarity.ValueType = ...,
         kbid: builtins.str = ...,
+        release_channel: nucliadb_protos.utils_pb2.ReleaseChannel.ValueType = ...,
     ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["kbid", b"kbid", "similarity", b"similarity"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["kbid", b"kbid", "release_channel", b"release_channel", "similarity", b"similarity"]) -> None: ...
 
 global___NewShardRequest = NewShardRequest
 
 @typing_extensions.final
 class NewVectorSetRequest(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
@@ -265,7 +226,39 @@
         id: nucliadb_protos.noderesources_pb2.VectorSetID | None = ...,
         similarity: nucliadb_protos.utils_pb2.VectorSimilarity.ValueType = ...,
     ) -> None: ...
     def HasField(self, field_name: typing_extensions.Literal["id", b"id"]) -> builtins.bool: ...
     def ClearField(self, field_name: typing_extensions.Literal["id", b"id", "similarity", b"similarity"]) -> None: ...
 
 global___NewVectorSetRequest = NewVectorSetRequest
+
+@typing_extensions.final
+class MergeResponse(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    class _MergeStatus:
+        ValueType = typing.NewType("ValueType", builtins.int)
+        V: typing_extensions.TypeAlias = ValueType
+
+    class _MergeStatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[MergeResponse._MergeStatus.ValueType], builtins.type):
+        DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
+        OK: MergeResponse._MergeStatus.ValueType  # 0
+
+    class MergeStatus(_MergeStatus, metaclass=_MergeStatusEnumTypeWrapper): ...
+    OK: MergeResponse.MergeStatus.ValueType  # 0
+
+    STATUS_FIELD_NUMBER: builtins.int
+    MERGED_SEGMENTS_FIELD_NUMBER: builtins.int
+    REMAINING_SEGMENTS_FIELD_NUMBER: builtins.int
+    status: global___MergeResponse.MergeStatus.ValueType
+    merged_segments: builtins.int
+    remaining_segments: builtins.int
+    def __init__(
+        self,
+        *,
+        status: global___MergeResponse.MergeStatus.ValueType = ...,
+        merged_segments: builtins.int = ...,
+        remaining_segments: builtins.int = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["merged_segments", b"merged_segments", "remaining_segments", b"remaining_segments", "status", b"status"]) -> None: ...
+
+global___MergeResponse = MergeResponse
```

## nucliadb_protos/nodewriter_pb2_grpc.py

```diff
@@ -11,59 +11,44 @@
 
     def __init__(self, channel):
         """Constructor.
 
         Args:
             channel: A grpc.Channel.
         """
-        self.GetShard = channel.unary_unary(
-                '/nodewriter.NodeWriter/GetShard',
-                request_serializer=nucliadb__protos_dot_noderesources__pb2.ShardId.SerializeToString,
-                response_deserializer=nucliadb__protos_dot_noderesources__pb2.ShardId.FromString,
-                )
         self.NewShard = channel.unary_unary(
                 '/nodewriter.NodeWriter/NewShard',
                 request_serializer=nucliadb__protos_dot_nodewriter__pb2.NewShardRequest.SerializeToString,
                 response_deserializer=nucliadb__protos_dot_noderesources__pb2.ShardCreated.FromString,
                 )
-        self.CleanAndUpgradeShard = channel.unary_unary(
-                '/nodewriter.NodeWriter/CleanAndUpgradeShard',
-                request_serializer=nucliadb__protos_dot_noderesources__pb2.ShardId.SerializeToString,
-                response_deserializer=nucliadb__protos_dot_noderesources__pb2.ShardCleaned.FromString,
-                )
         self.DeleteShard = channel.unary_unary(
                 '/nodewriter.NodeWriter/DeleteShard',
                 request_serializer=nucliadb__protos_dot_noderesources__pb2.ShardId.SerializeToString,
                 response_deserializer=nucliadb__protos_dot_noderesources__pb2.ShardId.FromString,
                 )
         self.ListShards = channel.unary_unary(
                 '/nodewriter.NodeWriter/ListShards',
                 request_serializer=nucliadb__protos_dot_noderesources__pb2.EmptyQuery.SerializeToString,
                 response_deserializer=nucliadb__protos_dot_noderesources__pb2.ShardIds.FromString,
                 )
         self.GC = channel.unary_unary(
                 '/nodewriter.NodeWriter/GC',
                 request_serializer=nucliadb__protos_dot_noderesources__pb2.ShardId.SerializeToString,
-                response_deserializer=nucliadb__protos_dot_noderesources__pb2.EmptyResponse.FromString,
+                response_deserializer=nucliadb__protos_dot_nodewriter__pb2.GarbageCollectorResponse.FromString,
+                )
+        self.Merge = channel.unary_unary(
+                '/nodewriter.NodeWriter/Merge',
+                request_serializer=nucliadb__protos_dot_noderesources__pb2.ShardId.SerializeToString,
+                response_deserializer=nucliadb__protos_dot_nodewriter__pb2.MergeResponse.FromString,
                 )
         self.SetResource = channel.unary_unary(
                 '/nodewriter.NodeWriter/SetResource',
                 request_serializer=nucliadb__protos_dot_noderesources__pb2.Resource.SerializeToString,
                 response_deserializer=nucliadb__protos_dot_nodewriter__pb2.OpStatus.FromString,
                 )
-        self.DeleteRelationNodes = channel.unary_unary(
-                '/nodewriter.NodeWriter/DeleteRelationNodes',
-                request_serializer=nucliadb__protos_dot_nodewriter__pb2.DeleteGraphNodes.SerializeToString,
-                response_deserializer=nucliadb__protos_dot_nodewriter__pb2.OpStatus.FromString,
-                )
-        self.JoinGraph = channel.unary_unary(
-                '/nodewriter.NodeWriter/JoinGraph',
-                request_serializer=nucliadb__protos_dot_nodewriter__pb2.SetGraph.SerializeToString,
-                response_deserializer=nucliadb__protos_dot_nodewriter__pb2.OpStatus.FromString,
-                )
         self.RemoveResource = channel.unary_unary(
                 '/nodewriter.NodeWriter/RemoveResource',
                 request_serializer=nucliadb__protos_dot_noderesources__pb2.ResourceID.SerializeToString,
                 response_deserializer=nucliadb__protos_dot_nodewriter__pb2.OpStatus.FromString,
                 )
         self.AddVectorSet = channel.unary_unary(
                 '/nodewriter.NodeWriter/AddVectorSet',
@@ -76,52 +61,30 @@
                 response_deserializer=nucliadb__protos_dot_nodewriter__pb2.OpStatus.FromString,
                 )
         self.ListVectorSets = channel.unary_unary(
                 '/nodewriter.NodeWriter/ListVectorSets',
                 request_serializer=nucliadb__protos_dot_noderesources__pb2.ShardId.SerializeToString,
                 response_deserializer=nucliadb__protos_dot_noderesources__pb2.VectorSetList.FromString,
                 )
-        self.MoveShard = channel.unary_unary(
-                '/nodewriter.NodeWriter/MoveShard',
-                request_serializer=nucliadb__protos_dot_nodewriter__pb2.MoveShardRequest.SerializeToString,
-                response_deserializer=nucliadb__protos_dot_noderesources__pb2.EmptyResponse.FromString,
-                )
-        self.AcceptShard = channel.unary_unary(
-                '/nodewriter.NodeWriter/AcceptShard',
-                request_serializer=nucliadb__protos_dot_nodewriter__pb2.AcceptShardRequest.SerializeToString,
-                response_deserializer=nucliadb__protos_dot_noderesources__pb2.EmptyResponse.FromString,
-                )
         self.GetMetadata = channel.unary_unary(
                 '/nodewriter.NodeWriter/GetMetadata',
                 request_serializer=nucliadb__protos_dot_noderesources__pb2.EmptyQuery.SerializeToString,
                 response_deserializer=nucliadb__protos_dot_noderesources__pb2.NodeMetadata.FromString,
                 )
 
 
 class NodeWriterServicer(object):
     """Missing associated documentation comment in .proto file."""
 
-    def GetShard(self, request, context):
-        """Missing associated documentation comment in .proto file."""
-        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
-        context.set_details('Method not implemented!')
-        raise NotImplementedError('Method not implemented!')
-
     def NewShard(self, request, context):
         """Missing associated documentation comment in .proto file."""
         context.set_code(grpc.StatusCode.UNIMPLEMENTED)
         context.set_details('Method not implemented!')
         raise NotImplementedError('Method not implemented!')
 
-    def CleanAndUpgradeShard(self, request, context):
-        """Missing associated documentation comment in .proto file."""
-        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
-        context.set_details('Method not implemented!')
-        raise NotImplementedError('Method not implemented!')
-
     def DeleteShard(self, request, context):
         """Missing associated documentation comment in .proto file."""
         context.set_code(grpc.StatusCode.UNIMPLEMENTED)
         context.set_details('Method not implemented!')
         raise NotImplementedError('Method not implemented!')
 
     def ListShards(self, request, context):
@@ -132,27 +95,21 @@
 
     def GC(self, request, context):
         """Missing associated documentation comment in .proto file."""
         context.set_code(grpc.StatusCode.UNIMPLEMENTED)
         context.set_details('Method not implemented!')
         raise NotImplementedError('Method not implemented!')
 
-    def SetResource(self, request, context):
-        """Missing associated documentation comment in .proto file."""
-        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
-        context.set_details('Method not implemented!')
-        raise NotImplementedError('Method not implemented!')
-
-    def DeleteRelationNodes(self, request, context):
+    def Merge(self, request, context):
         """Missing associated documentation comment in .proto file."""
         context.set_code(grpc.StatusCode.UNIMPLEMENTED)
         context.set_details('Method not implemented!')
         raise NotImplementedError('Method not implemented!')
 
-    def JoinGraph(self, request, context):
+    def SetResource(self, request, context):
         """Missing associated documentation comment in .proto file."""
         context.set_code(grpc.StatusCode.UNIMPLEMENTED)
         context.set_details('Method not implemented!')
         raise NotImplementedError('Method not implemented!')
 
     def RemoveResource(self, request, context):
         """Missing associated documentation comment in .proto file."""
@@ -174,80 +131,53 @@
 
     def ListVectorSets(self, request, context):
         """Missing associated documentation comment in .proto file."""
         context.set_code(grpc.StatusCode.UNIMPLEMENTED)
         context.set_details('Method not implemented!')
         raise NotImplementedError('Method not implemented!')
 
-    def MoveShard(self, request, context):
-        """Missing associated documentation comment in .proto file."""
-        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
-        context.set_details('Method not implemented!')
-        raise NotImplementedError('Method not implemented!')
-
-    def AcceptShard(self, request, context):
-        """Missing associated documentation comment in .proto file."""
-        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
-        context.set_details('Method not implemented!')
-        raise NotImplementedError('Method not implemented!')
-
     def GetMetadata(self, request, context):
         """Missing associated documentation comment in .proto file."""
         context.set_code(grpc.StatusCode.UNIMPLEMENTED)
         context.set_details('Method not implemented!')
         raise NotImplementedError('Method not implemented!')
 
 
 def add_NodeWriterServicer_to_server(servicer, server):
     rpc_method_handlers = {
-            'GetShard': grpc.unary_unary_rpc_method_handler(
-                    servicer.GetShard,
-                    request_deserializer=nucliadb__protos_dot_noderesources__pb2.ShardId.FromString,
-                    response_serializer=nucliadb__protos_dot_noderesources__pb2.ShardId.SerializeToString,
-            ),
             'NewShard': grpc.unary_unary_rpc_method_handler(
                     servicer.NewShard,
                     request_deserializer=nucliadb__protos_dot_nodewriter__pb2.NewShardRequest.FromString,
                     response_serializer=nucliadb__protos_dot_noderesources__pb2.ShardCreated.SerializeToString,
             ),
-            'CleanAndUpgradeShard': grpc.unary_unary_rpc_method_handler(
-                    servicer.CleanAndUpgradeShard,
-                    request_deserializer=nucliadb__protos_dot_noderesources__pb2.ShardId.FromString,
-                    response_serializer=nucliadb__protos_dot_noderesources__pb2.ShardCleaned.SerializeToString,
-            ),
             'DeleteShard': grpc.unary_unary_rpc_method_handler(
                     servicer.DeleteShard,
                     request_deserializer=nucliadb__protos_dot_noderesources__pb2.ShardId.FromString,
                     response_serializer=nucliadb__protos_dot_noderesources__pb2.ShardId.SerializeToString,
             ),
             'ListShards': grpc.unary_unary_rpc_method_handler(
                     servicer.ListShards,
                     request_deserializer=nucliadb__protos_dot_noderesources__pb2.EmptyQuery.FromString,
                     response_serializer=nucliadb__protos_dot_noderesources__pb2.ShardIds.SerializeToString,
             ),
             'GC': grpc.unary_unary_rpc_method_handler(
                     servicer.GC,
                     request_deserializer=nucliadb__protos_dot_noderesources__pb2.ShardId.FromString,
-                    response_serializer=nucliadb__protos_dot_noderesources__pb2.EmptyResponse.SerializeToString,
+                    response_serializer=nucliadb__protos_dot_nodewriter__pb2.GarbageCollectorResponse.SerializeToString,
+            ),
+            'Merge': grpc.unary_unary_rpc_method_handler(
+                    servicer.Merge,
+                    request_deserializer=nucliadb__protos_dot_noderesources__pb2.ShardId.FromString,
+                    response_serializer=nucliadb__protos_dot_nodewriter__pb2.MergeResponse.SerializeToString,
             ),
             'SetResource': grpc.unary_unary_rpc_method_handler(
                     servicer.SetResource,
                     request_deserializer=nucliadb__protos_dot_noderesources__pb2.Resource.FromString,
                     response_serializer=nucliadb__protos_dot_nodewriter__pb2.OpStatus.SerializeToString,
             ),
-            'DeleteRelationNodes': grpc.unary_unary_rpc_method_handler(
-                    servicer.DeleteRelationNodes,
-                    request_deserializer=nucliadb__protos_dot_nodewriter__pb2.DeleteGraphNodes.FromString,
-                    response_serializer=nucliadb__protos_dot_nodewriter__pb2.OpStatus.SerializeToString,
-            ),
-            'JoinGraph': grpc.unary_unary_rpc_method_handler(
-                    servicer.JoinGraph,
-                    request_deserializer=nucliadb__protos_dot_nodewriter__pb2.SetGraph.FromString,
-                    response_serializer=nucliadb__protos_dot_nodewriter__pb2.OpStatus.SerializeToString,
-            ),
             'RemoveResource': grpc.unary_unary_rpc_method_handler(
                     servicer.RemoveResource,
                     request_deserializer=nucliadb__protos_dot_noderesources__pb2.ResourceID.FromString,
                     response_serializer=nucliadb__protos_dot_nodewriter__pb2.OpStatus.SerializeToString,
             ),
             'AddVectorSet': grpc.unary_unary_rpc_method_handler(
                     servicer.AddVectorSet,
@@ -260,24 +190,14 @@
                     response_serializer=nucliadb__protos_dot_nodewriter__pb2.OpStatus.SerializeToString,
             ),
             'ListVectorSets': grpc.unary_unary_rpc_method_handler(
                     servicer.ListVectorSets,
                     request_deserializer=nucliadb__protos_dot_noderesources__pb2.ShardId.FromString,
                     response_serializer=nucliadb__protos_dot_noderesources__pb2.VectorSetList.SerializeToString,
             ),
-            'MoveShard': grpc.unary_unary_rpc_method_handler(
-                    servicer.MoveShard,
-                    request_deserializer=nucliadb__protos_dot_nodewriter__pb2.MoveShardRequest.FromString,
-                    response_serializer=nucliadb__protos_dot_noderesources__pb2.EmptyResponse.SerializeToString,
-            ),
-            'AcceptShard': grpc.unary_unary_rpc_method_handler(
-                    servicer.AcceptShard,
-                    request_deserializer=nucliadb__protos_dot_nodewriter__pb2.AcceptShardRequest.FromString,
-                    response_serializer=nucliadb__protos_dot_noderesources__pb2.EmptyResponse.SerializeToString,
-            ),
             'GetMetadata': grpc.unary_unary_rpc_method_handler(
                     servicer.GetMetadata,
                     request_deserializer=nucliadb__protos_dot_noderesources__pb2.EmptyQuery.FromString,
                     response_serializer=nucliadb__protos_dot_noderesources__pb2.NodeMetadata.SerializeToString,
             ),
     }
     generic_handler = grpc.method_handlers_generic_handler(
@@ -286,31 +206,14 @@
 
 
  # This class is part of an EXPERIMENTAL API.
 class NodeWriter(object):
     """Missing associated documentation comment in .proto file."""
 
     @staticmethod
-    def GetShard(request,
-            target,
-            options=(),
-            channel_credentials=None,
-            call_credentials=None,
-            insecure=False,
-            compression=None,
-            wait_for_ready=None,
-            timeout=None,
-            metadata=None):
-        return grpc.experimental.unary_unary(request, target, '/nodewriter.NodeWriter/GetShard',
-            nucliadb__protos_dot_noderesources__pb2.ShardId.SerializeToString,
-            nucliadb__protos_dot_noderesources__pb2.ShardId.FromString,
-            options, channel_credentials,
-            insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
-
-    @staticmethod
     def NewShard(request,
             target,
             options=(),
             channel_credentials=None,
             call_credentials=None,
             insecure=False,
             compression=None,
@@ -320,31 +223,14 @@
         return grpc.experimental.unary_unary(request, target, '/nodewriter.NodeWriter/NewShard',
             nucliadb__protos_dot_nodewriter__pb2.NewShardRequest.SerializeToString,
             nucliadb__protos_dot_noderesources__pb2.ShardCreated.FromString,
             options, channel_credentials,
             insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
 
     @staticmethod
-    def CleanAndUpgradeShard(request,
-            target,
-            options=(),
-            channel_credentials=None,
-            call_credentials=None,
-            insecure=False,
-            compression=None,
-            wait_for_ready=None,
-            timeout=None,
-            metadata=None):
-        return grpc.experimental.unary_unary(request, target, '/nodewriter.NodeWriter/CleanAndUpgradeShard',
-            nucliadb__protos_dot_noderesources__pb2.ShardId.SerializeToString,
-            nucliadb__protos_dot_noderesources__pb2.ShardCleaned.FromString,
-            options, channel_credentials,
-            insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
-
-    @staticmethod
     def DeleteShard(request,
             target,
             options=(),
             channel_credentials=None,
             call_credentials=None,
             insecure=False,
             compression=None,
@@ -383,65 +269,48 @@
             insecure=False,
             compression=None,
             wait_for_ready=None,
             timeout=None,
             metadata=None):
         return grpc.experimental.unary_unary(request, target, '/nodewriter.NodeWriter/GC',
             nucliadb__protos_dot_noderesources__pb2.ShardId.SerializeToString,
-            nucliadb__protos_dot_noderesources__pb2.EmptyResponse.FromString,
-            options, channel_credentials,
-            insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
-
-    @staticmethod
-    def SetResource(request,
-            target,
-            options=(),
-            channel_credentials=None,
-            call_credentials=None,
-            insecure=False,
-            compression=None,
-            wait_for_ready=None,
-            timeout=None,
-            metadata=None):
-        return grpc.experimental.unary_unary(request, target, '/nodewriter.NodeWriter/SetResource',
-            nucliadb__protos_dot_noderesources__pb2.Resource.SerializeToString,
-            nucliadb__protos_dot_nodewriter__pb2.OpStatus.FromString,
+            nucliadb__protos_dot_nodewriter__pb2.GarbageCollectorResponse.FromString,
             options, channel_credentials,
             insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
 
     @staticmethod
-    def DeleteRelationNodes(request,
+    def Merge(request,
             target,
             options=(),
             channel_credentials=None,
             call_credentials=None,
             insecure=False,
             compression=None,
             wait_for_ready=None,
             timeout=None,
             metadata=None):
-        return grpc.experimental.unary_unary(request, target, '/nodewriter.NodeWriter/DeleteRelationNodes',
-            nucliadb__protos_dot_nodewriter__pb2.DeleteGraphNodes.SerializeToString,
-            nucliadb__protos_dot_nodewriter__pb2.OpStatus.FromString,
+        return grpc.experimental.unary_unary(request, target, '/nodewriter.NodeWriter/Merge',
+            nucliadb__protos_dot_noderesources__pb2.ShardId.SerializeToString,
+            nucliadb__protos_dot_nodewriter__pb2.MergeResponse.FromString,
             options, channel_credentials,
             insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
 
     @staticmethod
-    def JoinGraph(request,
+    def SetResource(request,
             target,
             options=(),
             channel_credentials=None,
             call_credentials=None,
             insecure=False,
             compression=None,
             wait_for_ready=None,
             timeout=None,
             metadata=None):
-        return grpc.experimental.unary_unary(request, target, '/nodewriter.NodeWriter/JoinGraph',
-            nucliadb__protos_dot_nodewriter__pb2.SetGraph.SerializeToString,
+        return grpc.experimental.unary_unary(request, target, '/nodewriter.NodeWriter/SetResource',
+            nucliadb__protos_dot_noderesources__pb2.Resource.SerializeToString,
             nucliadb__protos_dot_nodewriter__pb2.OpStatus.FromString,
             options, channel_credentials,
             insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
 
     @staticmethod
     def RemoveResource(request,
             target,
@@ -507,48 +376,14 @@
         return grpc.experimental.unary_unary(request, target, '/nodewriter.NodeWriter/ListVectorSets',
             nucliadb__protos_dot_noderesources__pb2.ShardId.SerializeToString,
             nucliadb__protos_dot_noderesources__pb2.VectorSetList.FromString,
             options, channel_credentials,
             insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
 
     @staticmethod
-    def MoveShard(request,
-            target,
-            options=(),
-            channel_credentials=None,
-            call_credentials=None,
-            insecure=False,
-            compression=None,
-            wait_for_ready=None,
-            timeout=None,
-            metadata=None):
-        return grpc.experimental.unary_unary(request, target, '/nodewriter.NodeWriter/MoveShard',
-            nucliadb__protos_dot_nodewriter__pb2.MoveShardRequest.SerializeToString,
-            nucliadb__protos_dot_noderesources__pb2.EmptyResponse.FromString,
-            options, channel_credentials,
-            insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
-
-    @staticmethod
-    def AcceptShard(request,
-            target,
-            options=(),
-            channel_credentials=None,
-            call_credentials=None,
-            insecure=False,
-            compression=None,
-            wait_for_ready=None,
-            timeout=None,
-            metadata=None):
-        return grpc.experimental.unary_unary(request, target, '/nodewriter.NodeWriter/AcceptShard',
-            nucliadb__protos_dot_nodewriter__pb2.AcceptShardRequest.SerializeToString,
-            nucliadb__protos_dot_noderesources__pb2.EmptyResponse.FromString,
-            options, channel_credentials,
-            insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
-
-    @staticmethod
     def GetMetadata(request,
             target,
             options=(),
             channel_credentials=None,
             call_credentials=None,
             insecure=False,
             compression=None,
```

## nucliadb_protos/nodewriter_pb2_grpc.pyi

```diff
@@ -1,78 +1,76 @@
 """
 @generated by mypy-protobuf.  Do not edit manually!
 isort:skip_file
 """
 import abc
+import collections.abc
 import grpc
+import grpc.aio
 import nucliadb_protos.noderesources_pb2
 import nucliadb_protos.nodewriter_pb2
+import typing
 from nucliadb_protos.noderesources_pb2 import (
     EmptyQuery as EmptyQuery,
     EmptyResponse as EmptyResponse,
     IndexMetadata as IndexMetadata,
     IndexParagraph as IndexParagraph,
     IndexParagraphs as IndexParagraphs,
     NodeMetadata as NodeMetadata,
     ParagraphMetadata as ParagraphMetadata,
     Position as Position,
+    Representation as Representation,
     Resource as Resource,
     ResourceID as ResourceID,
     SentenceMetadata as SentenceMetadata,
     Shard as Shard,
-    ShardCleaned as ShardCleaned,
     ShardCreated as ShardCreated,
     ShardId as ShardId,
     ShardIds as ShardIds,
-    ShardList as ShardList,
     ShardMetadata as ShardMetadata,
     TextInformation as TextInformation,
     VectorSentence as VectorSentence,
     VectorSetID as VectorSetID,
     VectorSetList as VectorSetList,
 )
 
+_T = typing.TypeVar('_T')
+
+class _MaybeAsyncIterator(collections.abc.AsyncIterator[_T], collections.abc.Iterator[_T], metaclass=abc.ABCMeta):
+    ...
+
+class _ServicerContext(grpc.ServicerContext, grpc.aio.ServicerContext):  # type: ignore
+    ...
+
 class NodeWriterStub:
-    def __init__(self, channel: grpc.Channel) -> None: ...
-    GetShard: grpc.UnaryUnaryMultiCallable[
-        nucliadb_protos.noderesources_pb2.ShardId,
-        nucliadb_protos.noderesources_pb2.ShardId,
-    ]
+    def __init__(self, channel: typing.Union[grpc.Channel, grpc.aio.Channel]) -> None: ...
     NewShard: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.nodewriter_pb2.NewShardRequest,
         nucliadb_protos.noderesources_pb2.ShardCreated,
     ]
-    CleanAndUpgradeShard: grpc.UnaryUnaryMultiCallable[
-        nucliadb_protos.noderesources_pb2.ShardId,
-        nucliadb_protos.noderesources_pb2.ShardCleaned,
-    ]
     DeleteShard: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.noderesources_pb2.ShardId,
         nucliadb_protos.noderesources_pb2.ShardId,
     ]
     ListShards: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.noderesources_pb2.EmptyQuery,
         nucliadb_protos.noderesources_pb2.ShardIds,
     ]
     GC: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.noderesources_pb2.ShardId,
-        nucliadb_protos.noderesources_pb2.EmptyResponse,
+        nucliadb_protos.nodewriter_pb2.GarbageCollectorResponse,
+    ]
+    Merge: grpc.UnaryUnaryMultiCallable[
+        nucliadb_protos.noderesources_pb2.ShardId,
+        nucliadb_protos.nodewriter_pb2.MergeResponse,
     ]
     SetResource: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.noderesources_pb2.Resource,
         nucliadb_protos.nodewriter_pb2.OpStatus,
     ]
-    DeleteRelationNodes: grpc.UnaryUnaryMultiCallable[
-        nucliadb_protos.nodewriter_pb2.DeleteGraphNodes,
-        nucliadb_protos.nodewriter_pb2.OpStatus,
-    ]
-    JoinGraph: grpc.UnaryUnaryMultiCallable[
-        nucliadb_protos.nodewriter_pb2.SetGraph,
-        nucliadb_protos.nodewriter_pb2.OpStatus,
-    ]
     RemoveResource: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.noderesources_pb2.ResourceID,
         nucliadb_protos.nodewriter_pb2.OpStatus,
     ]
     AddVectorSet: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.nodewriter_pb2.NewVectorSetRequest,
         nucliadb_protos.nodewriter_pb2.OpStatus,
@@ -81,119 +79,127 @@
         nucliadb_protos.noderesources_pb2.VectorSetID,
         nucliadb_protos.nodewriter_pb2.OpStatus,
     ]
     ListVectorSets: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.noderesources_pb2.ShardId,
         nucliadb_protos.noderesources_pb2.VectorSetList,
     ]
-    MoveShard: grpc.UnaryUnaryMultiCallable[
-        nucliadb_protos.nodewriter_pb2.MoveShardRequest,
-        nucliadb_protos.noderesources_pb2.EmptyResponse,
-    ]
-    AcceptShard: grpc.UnaryUnaryMultiCallable[
-        nucliadb_protos.nodewriter_pb2.AcceptShardRequest,
-        nucliadb_protos.noderesources_pb2.EmptyResponse,
-    ]
     GetMetadata: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.noderesources_pb2.EmptyQuery,
         nucliadb_protos.noderesources_pb2.NodeMetadata,
     ]
 
+class NodeWriterAsyncStub:
+    NewShard: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.nodewriter_pb2.NewShardRequest,
+        nucliadb_protos.noderesources_pb2.ShardCreated,
+    ]
+    DeleteShard: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.noderesources_pb2.ShardId,
+        nucliadb_protos.noderesources_pb2.ShardId,
+    ]
+    ListShards: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.noderesources_pb2.EmptyQuery,
+        nucliadb_protos.noderesources_pb2.ShardIds,
+    ]
+    GC: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.noderesources_pb2.ShardId,
+        nucliadb_protos.nodewriter_pb2.GarbageCollectorResponse,
+    ]
+    Merge: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.noderesources_pb2.ShardId,
+        nucliadb_protos.nodewriter_pb2.MergeResponse,
+    ]
+    SetResource: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.noderesources_pb2.Resource,
+        nucliadb_protos.nodewriter_pb2.OpStatus,
+    ]
+    RemoveResource: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.noderesources_pb2.ResourceID,
+        nucliadb_protos.nodewriter_pb2.OpStatus,
+    ]
+    AddVectorSet: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.nodewriter_pb2.NewVectorSetRequest,
+        nucliadb_protos.nodewriter_pb2.OpStatus,
+    ]
+    RemoveVectorSet: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.noderesources_pb2.VectorSetID,
+        nucliadb_protos.nodewriter_pb2.OpStatus,
+    ]
+    ListVectorSets: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.noderesources_pb2.ShardId,
+        nucliadb_protos.noderesources_pb2.VectorSetList,
+    ]
+    GetMetadata: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.noderesources_pb2.EmptyQuery,
+        nucliadb_protos.noderesources_pb2.NodeMetadata,
+    ]
+
 class NodeWriterServicer(metaclass=abc.ABCMeta):
     @abc.abstractmethod
-    def GetShard(
-        self,
-        request: nucliadb_protos.noderesources_pb2.ShardId,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.noderesources_pb2.ShardId: ...
-    @abc.abstractmethod
     def NewShard(
         self,
         request: nucliadb_protos.nodewriter_pb2.NewShardRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.noderesources_pb2.ShardCreated: ...
-    @abc.abstractmethod
-    def CleanAndUpgradeShard(
-        self,
-        request: nucliadb_protos.noderesources_pb2.ShardId,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.noderesources_pb2.ShardCleaned: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.noderesources_pb2.ShardCreated, collections.abc.Awaitable[nucliadb_protos.noderesources_pb2.ShardCreated]]: ...
     @abc.abstractmethod
     def DeleteShard(
         self,
         request: nucliadb_protos.noderesources_pb2.ShardId,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.noderesources_pb2.ShardId: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.noderesources_pb2.ShardId, collections.abc.Awaitable[nucliadb_protos.noderesources_pb2.ShardId]]: ...
     @abc.abstractmethod
     def ListShards(
         self,
         request: nucliadb_protos.noderesources_pb2.EmptyQuery,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.noderesources_pb2.ShardIds: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.noderesources_pb2.ShardIds, collections.abc.Awaitable[nucliadb_protos.noderesources_pb2.ShardIds]]: ...
     @abc.abstractmethod
     def GC(
         self,
         request: nucliadb_protos.noderesources_pb2.ShardId,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.noderesources_pb2.EmptyResponse: ...
-    @abc.abstractmethod
-    def SetResource(
-        self,
-        request: nucliadb_protos.noderesources_pb2.Resource,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.nodewriter_pb2.OpStatus: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.nodewriter_pb2.GarbageCollectorResponse, collections.abc.Awaitable[nucliadb_protos.nodewriter_pb2.GarbageCollectorResponse]]: ...
     @abc.abstractmethod
-    def DeleteRelationNodes(
+    def Merge(
         self,
-        request: nucliadb_protos.nodewriter_pb2.DeleteGraphNodes,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.nodewriter_pb2.OpStatus: ...
+        request: nucliadb_protos.noderesources_pb2.ShardId,
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.nodewriter_pb2.MergeResponse, collections.abc.Awaitable[nucliadb_protos.nodewriter_pb2.MergeResponse]]: ...
     @abc.abstractmethod
-    def JoinGraph(
+    def SetResource(
         self,
-        request: nucliadb_protos.nodewriter_pb2.SetGraph,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.nodewriter_pb2.OpStatus: ...
+        request: nucliadb_protos.noderesources_pb2.Resource,
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.nodewriter_pb2.OpStatus, collections.abc.Awaitable[nucliadb_protos.nodewriter_pb2.OpStatus]]: ...
     @abc.abstractmethod
     def RemoveResource(
         self,
         request: nucliadb_protos.noderesources_pb2.ResourceID,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.nodewriter_pb2.OpStatus: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.nodewriter_pb2.OpStatus, collections.abc.Awaitable[nucliadb_protos.nodewriter_pb2.OpStatus]]: ...
     @abc.abstractmethod
     def AddVectorSet(
         self,
         request: nucliadb_protos.nodewriter_pb2.NewVectorSetRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.nodewriter_pb2.OpStatus: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.nodewriter_pb2.OpStatus, collections.abc.Awaitable[nucliadb_protos.nodewriter_pb2.OpStatus]]: ...
     @abc.abstractmethod
     def RemoveVectorSet(
         self,
         request: nucliadb_protos.noderesources_pb2.VectorSetID,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.nodewriter_pb2.OpStatus: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.nodewriter_pb2.OpStatus, collections.abc.Awaitable[nucliadb_protos.nodewriter_pb2.OpStatus]]: ...
     @abc.abstractmethod
     def ListVectorSets(
         self,
         request: nucliadb_protos.noderesources_pb2.ShardId,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.noderesources_pb2.VectorSetList: ...
-    @abc.abstractmethod
-    def MoveShard(
-        self,
-        request: nucliadb_protos.nodewriter_pb2.MoveShardRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.noderesources_pb2.EmptyResponse: ...
-    @abc.abstractmethod
-    def AcceptShard(
-        self,
-        request: nucliadb_protos.nodewriter_pb2.AcceptShardRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.noderesources_pb2.EmptyResponse: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.noderesources_pb2.VectorSetList, collections.abc.Awaitable[nucliadb_protos.noderesources_pb2.VectorSetList]]: ...
     @abc.abstractmethod
     def GetMetadata(
         self,
         request: nucliadb_protos.noderesources_pb2.EmptyQuery,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.noderesources_pb2.NodeMetadata: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.noderesources_pb2.NodeMetadata, collections.abc.Awaitable[nucliadb_protos.noderesources_pb2.NodeMetadata]]: ...
 
-def add_NodeWriterServicer_to_server(servicer: NodeWriterServicer, server: grpc.Server) -> None: ...
+def add_NodeWriterServicer_to_server(servicer: NodeWriterServicer, server: typing.Union[grpc.Server, grpc.aio.Server]) -> None: ...
```

## nucliadb_protos/resources_pb2.py

```diff
@@ -1,234 +1,272 @@
 # -*- coding: utf-8 -*-
 # Generated by the protocol buffer compiler.  DO NOT EDIT!
 # source: nucliadb_protos/resources.proto
+# Protobuf Python Version: 4.25.0
 """Generated protocol buffer code."""
-from google.protobuf.internal import builder as _builder
 from google.protobuf import descriptor as _descriptor
 from google.protobuf import descriptor_pool as _descriptor_pool
 from google.protobuf import symbol_database as _symbol_database
+from google.protobuf.internal import builder as _builder
 # @@protoc_insertion_point(imports)
 
 _sym_db = _symbol_database.Default()
 
 
 from nucliadb_protos import utils_pb2 as nucliadb__protos_dot_utils__pb2
 from google.protobuf import timestamp_pb2 as google_dot_protobuf_dot_timestamp__pb2
+from google.protobuf import struct_pb2 as google_dot_protobuf_dot_struct__pb2
 
 from nucliadb_protos.utils_pb2 import *
 
-DESCRIPTOR = _descriptor_pool.Default().AddSerializedFile(b'\n\x1fnucliadb_protos/resources.proto\x12\tresources\x1a\x1bnucliadb_protos/utils.proto\x1a\x1fgoogle/protobuf/timestamp.proto\"\xf0\x02\n\tCloudFile\x12\x0b\n\x03uri\x18\x01 \x01(\t\x12\x0c\n\x04size\x18\x02 \x01(\x05\x12\x14\n\x0c\x63ontent_type\x18\x03 \x01(\t\x12\x13\n\x0b\x62ucket_name\x18\x04 \x01(\t\x12+\n\x06source\x18\x05 \x01(\x0e\x32\x1b.resources.CloudFile.Source\x12\x10\n\x08\x66ilename\x18\x06 \x01(\t\x12\x15\n\rresumable_uri\x18\x07 \x01(\t\x12\x0e\n\x06offset\x18\x08 \x01(\x03\x12\x12\n\nupload_uri\x18\t \x01(\t\x12\r\n\x05parts\x18\n \x03(\t\x12\x0f\n\x07old_uri\x18\x0b \x01(\t\x12\x12\n\nold_bucket\x18\x0c \x01(\t\x12\x0b\n\x03md5\x18\r \x01(\t\"b\n\x06Source\x12\t\n\x05\x46LAPS\x10\x00\x12\x07\n\x03GCS\x10\x01\x12\x06\n\x02S3\x10\x02\x12\t\n\x05LOCAL\x10\x03\x12\x0c\n\x08\x45XTERNAL\x10\x04\x12\t\n\x05\x45MPTY\x10\x05\x12\n\n\x06\x45XPORT\x10\x06\x12\x0c\n\x08POSTGRES\x10\x07\"\xa0\x04\n\x05\x42\x61sic\x12\x0c\n\x04slug\x18\x01 \x01(\t\x12\x0c\n\x04icon\x18\x02 \x01(\t\x12\r\n\x05title\x18\x03 \x01(\t\x12\x0f\n\x07summary\x18\x04 \x01(\t\x12\x11\n\tthumbnail\x18\x05 \x01(\t\x12\x0e\n\x06layout\x18\x06 \x01(\t\x12+\n\x07\x63reated\x18\x07 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12,\n\x08modified\x18\x08 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12%\n\x08metadata\x18\t \x01(\x0b\x32\x13.resources.Metadata\x12-\n\x0cusermetadata\x18\n \x01(\x0b\x32\x17.resources.UserMetadata\x12\x33\n\rfieldmetadata\x18\x0b \x03(\x0b\x32\x1c.resources.UserFieldMetadata\x12\x35\n\x10\x63omputedmetadata\x18\x0f \x01(\x0b\x32\x1b.resources.ComputedMetadata\x12\x0c\n\x04uuid\x18\x0c \x01(\t\x12\x0e\n\x06labels\x18\r \x03(\t\x12\x12\n\nlast_seqid\x18\x0e \x01(\x03\x12\x18\n\x10last_account_seq\x18# \x01(\x03\x12)\n\x05queue\x18$ \x01(\x0e\x32\x1a.resources.Basic.QueueType\"$\n\tQueueType\x12\x0b\n\x07PRIVATE\x10\x00\x12\n\n\x06SHARED\x10\x01\"\x81\x03\n\x06Origin\x12(\n\x06source\x18\x01 \x01(\x0e\x32\x18.resources.Origin.Source\x12\x11\n\tsource_id\x18\x02 \x01(\t\x12\x0b\n\x03url\x18\x03 \x01(\t\x12+\n\x07\x63reated\x18\x04 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12,\n\x08modified\x18\x05 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\x31\n\x08metadata\x18\x06 \x03(\x0b\x32\x1f.resources.Origin.MetadataEntry\x12\x0c\n\x04tags\x18\x07 \x03(\t\x12\x14\n\x0c\x63olaborators\x18\x08 \x03(\t\x12\x10\n\x08\x66ilename\x18\t \x01(\t\x12\x0f\n\x07related\x18\n \x03(\t\x1a/\n\rMetadataEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\"\'\n\x06Source\x12\x07\n\x03WEB\x10\x00\x12\x0b\n\x07\x44\x45SKTOP\x10\x01\x12\x07\n\x03\x41PI\x10\x02\"/\n\tRelations\x12\"\n\trelations\x18\x01 \x03(\x0b\x32\x0f.utils.Relation\"\xb1\x01\n\x0eMessageContent\x12\x0c\n\x04text\x18\x01 \x01(\t\x12\x30\n\x06\x66ormat\x18\x02 \x01(\x0e\x32 .resources.MessageContent.Format\x12)\n\x0b\x61ttachments\x18\x04 \x03(\x0b\x32\x14.resources.CloudFile\"4\n\x06\x46ormat\x12\t\n\x05PLAIN\x10\x00\x12\x08\n\x04HTML\x10\x01\x12\x0c\n\x08MARKDOWN\x10\x02\x12\x07\n\x03RST\x10\x03\"\x8c\x01\n\x07Message\x12-\n\ttimestamp\x18\x01 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\x0b\n\x03who\x18\x02 \x01(\t\x12\n\n\x02to\x18\x03 \x03(\t\x12*\n\x07\x63ontent\x18\x04 \x01(\x0b\x32\x19.resources.MessageContent\x12\r\n\x05ident\x18\x05 \x01(\t\"4\n\x0c\x43onversation\x12$\n\x08messages\x18\x01 \x03(\x0b\x32\x12.resources.Message\"?\n\x11\x46ieldConversation\x12\r\n\x05pages\x18\x01 \x01(\x05\x12\x0c\n\x04size\x18\x02 \x01(\x05\x12\r\n\x05total\x18\x03 \x01(\x05\":\n\x0eNestedPosition\x12\r\n\x05start\x18\x01 \x01(\x03\x12\x0b\n\x03\x65nd\x18\x02 \x01(\x03\x12\x0c\n\x04page\x18\x03 \x01(\x03\"B\n\x12NestedListPosition\x12,\n\tpositions\x18\x01 \x03(\x0b\x32\x19.resources.NestedPosition\"\xb9\x08\n\x11\x46ileExtractedData\x12\x10\n\x08language\x18\x01 \x01(\t\x12\x0b\n\x03md5\x18\x02 \x01(\t\x12<\n\x08metadata\x18\x03 \x03(\x0b\x32*.resources.FileExtractedData.MetadataEntry\x12\x38\n\x06nested\x18\x04 \x03(\x0b\x32(.resources.FileExtractedData.NestedEntry\x12G\n\x0e\x66ile_generated\x18\x05 \x03(\x0b\x32/.resources.FileExtractedData.FileGeneratedEntry\x12N\n\x12\x66ile_rows_previews\x18\x06 \x03(\x0b\x32\x32.resources.FileExtractedData.FileRowsPreviewsEntry\x12*\n\x0c\x66ile_preview\x18\x07 \x01(\x0b\x32\x14.resources.CloudFile\x12\x31\n\x13\x66ile_pages_previews\x18\x08 \x01(\x0b\x32\x14.resources.FilePages\x12,\n\x0e\x66ile_thumbnail\x18\t \x01(\x0b\x32\x14.resources.CloudFile\x12\r\n\x05\x66ield\x18\n \x01(\t\x12\x0c\n\x04icon\x18\x0b \x01(\t\x12M\n\x0fnested_position\x18\x0c \x03(\x0b\x32\x30.resources.FileExtractedData.NestedPositionEntryB\x02\x18\x01\x12R\n\x14nested_list_position\x18\r \x03(\x0b\x32\x34.resources.FileExtractedData.NestedListPositionEntry\x1a/\n\rMetadataEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\x1a-\n\x0bNestedEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\x1aJ\n\x12\x46ileGeneratedEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12#\n\x05value\x18\x02 \x01(\x0b\x32\x14.resources.CloudFile:\x02\x38\x01\x1aO\n\x15\x46ileRowsPreviewsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12%\n\x05value\x18\x02 \x01(\x0b\x32\x16.resources.RowsPreview:\x02\x38\x01\x1aP\n\x13NestedPositionEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12(\n\x05value\x18\x02 \x01(\x0b\x32\x19.resources.NestedPosition:\x02\x38\x01\x1aX\n\x17NestedListPositionEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12,\n\x05value\x18\x02 \x01(\x0b\x32\x1d.resources.NestedListPosition:\x02\x38\x01\"\x92\x03\n\x11LinkExtractedData\x12(\n\x04\x64\x61te\x18\x01 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\x10\n\x08language\x18\x02 \x01(\t\x12\r\n\x05title\x18\x04 \x01(\t\x12<\n\x08metadata\x18\x05 \x03(\x0b\x32*.resources.LinkExtractedData.MetadataEntry\x12,\n\x0elink_thumbnail\x18\x06 \x01(\x0b\x32\x14.resources.CloudFile\x12*\n\x0clink_preview\x18\x07 \x01(\x0b\x32\x14.resources.CloudFile\x12\r\n\x05\x66ield\x18\x08 \x01(\t\x12(\n\nlink_image\x18\t \x01(\x0b\x32\x14.resources.CloudFile\x12\x13\n\x0b\x64\x65scription\x18\n \x01(\t\x12\x0c\n\x04type\x18\x0b \x01(\t\x12\r\n\x05\x65mbed\x18\x0c \x01(\t\x1a/\n\rMetadataEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\"\x95\x01\n\x14\x45xtractedTextWrapper\x12$\n\x04\x62ody\x18\x01 \x01(\x0b\x32\x14.utils.ExtractedTextH\x00\x12$\n\x04\x66ile\x18\x02 \x01(\x0b\x32\x14.resources.CloudFileH\x00\x12!\n\x05\x66ield\x18\x03 \x01(\x0b\x32\x12.resources.FieldIDB\x0e\n\x0c\x66ile_or_data\"\x9a\x01\n\x17\x45xtractedVectorsWrapper\x12&\n\x07vectors\x18\x01 \x01(\x0b\x32\x13.utils.VectorObjectH\x00\x12$\n\x04\x66ile\x18\x02 \x01(\x0b\x32\x14.resources.CloudFileH\x00\x12!\n\x05\x66ield\x18\x03 \x01(\x0b\x32\x12.resources.FieldIDB\x0e\n\x0c\x66ile_or_data\"\xfd\x01\n\x12UserVectorsWrapper\x12%\n\x07vectors\x18\x01 \x01(\x0b\x32\x14.utils.UserVectorSet\x12M\n\x11vectors_to_delete\x18\r \x03(\x0b\x32\x32.resources.UserVectorsWrapper.VectorsToDeleteEntry\x12!\n\x05\x66ield\x18\x03 \x01(\x0b\x32\x12.resources.FieldID\x1aN\n\x14VectorsToDeleteEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12%\n\x05value\x18\x02 \x01(\x0b\x32\x16.utils.UserVectorsList:\x02\x38\x01\"3\n\x08Sentence\x12\r\n\x05start\x18\x01 \x01(\x05\x12\x0b\n\x03\x65nd\x18\x02 \x01(\x05\x12\x0b\n\x03key\x18\x03 \x01(\t\"\xdb\x02\n\tParagraph\x12\r\n\x05start\x18\x01 \x01(\r\x12\x0b\n\x03\x65nd\x18\x02 \x01(\r\x12\x15\n\rstart_seconds\x18\x03 \x03(\r\x12\x13\n\x0b\x65nd_seconds\x18\x04 \x03(\r\x12\x30\n\x04kind\x18\x05 \x01(\x0e\x32\".resources.Paragraph.TypeParagraph\x12\x32\n\x0f\x63lassifications\x18\x06 \x03(\x0b\x32\x19.resources.Classification\x12&\n\tsentences\x18\x07 \x03(\x0b\x32\x13.resources.Sentence\x12\x0b\n\x03key\x18\x08 \x01(\t\x12\x0c\n\x04text\x18\t \x01(\t\"]\n\rTypeParagraph\x12\x08\n\x04TEXT\x10\x00\x12\x07\n\x03OCR\x10\x01\x12\r\n\tINCEPTION\x10\x02\x12\x0f\n\x0b\x44\x45SCRIPTION\x10\x03\x12\x0e\n\nTRANSCRIPT\x10\x04\x12\t\n\x05TITLE\x10\x05\"&\n\x08Position\x12\r\n\x05start\x18\x01 \x01(\x03\x12\x0b\n\x03\x65nd\x18\x02 \x01(\x03\"B\n\tPositions\x12%\n\x08position\x18\x01 \x03(\x0b\x32\x13.resources.Position\x12\x0e\n\x06\x65ntity\x18\x02 \x01(\t\"\x9d\x05\n\rFieldMetadata\x12\r\n\x05links\x18\x01 \x03(\t\x12(\n\nparagraphs\x18\x02 \x03(\x0b\x32\x14.resources.Paragraph\x12.\n\x03ner\x18\x03 \x03(\x0b\x32!.resources.FieldMetadata.NerEntry\x12\x32\n\x0f\x63lassifications\x18\x04 \x03(\x0b\x32\x19.resources.Classification\x12.\n\nlast_index\x18\x05 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\x36\n\x12last_understanding\x18\x06 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\x30\n\x0clast_extract\x18\x07 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\x30\n\x0clast_summary\x18\x08 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\'\n\tthumbnail\x18\t \x01(\x0b\x32\x14.resources.CloudFile\x12\x10\n\x08language\x18\n \x01(\t\x12\x0f\n\x07summary\x18\x0b \x01(\t\x12:\n\tpositions\x18\x0c \x03(\x0b\x32\'.resources.FieldMetadata.PositionsEntry\x12\'\n\trelations\x18\r \x03(\x0b\x32\x14.resources.Relations\x1a*\n\x08NerEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\x1a\x46\n\x0ePositionsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12#\n\x05value\x18\x02 \x01(\x0b\x32\x14.resources.Positions:\x02\x38\x01\"\xf8\x01\n\x15\x46ieldComputedMetadata\x12*\n\x08metadata\x18\x01 \x01(\x0b\x32\x18.resources.FieldMetadata\x12K\n\x0esplit_metadata\x18\x02 \x03(\x0b\x32\x33.resources.FieldComputedMetadata.SplitMetadataEntry\x12\x16\n\x0e\x64\x65leted_splits\x18\x03 \x03(\t\x1aN\n\x12SplitMetadataEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\'\n\x05value\x18\x02 \x01(\x0b\x32\x18.resources.FieldMetadata:\x02\x38\x01\"u\n\x1c\x46ieldComputedMetadataWrapper\x12\x32\n\x08metadata\x18\x01 \x01(\x0b\x32 .resources.FieldComputedMetadata\x12!\n\x05\x66ield\x18\x04 \x01(\x0b\x32\x12.resources.FieldID\"\x9c\x02\n\x08Metadata\x12\x33\n\x08metadata\x18\x01 \x03(\x0b\x32!.resources.Metadata.MetadataEntry\x12\x10\n\x08language\x18\x02 \x01(\t\x12\x11\n\tlanguages\x18\x03 \x03(\t\x12\x0e\n\x06useful\x18\x04 \x01(\x08\x12*\n\x06status\x18\x05 \x01(\x0e\x32\x1a.resources.Metadata.Status\x1a/\n\rMetadataEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\"I\n\x06Status\x12\x0b\n\x07PENDING\x10\x00\x12\r\n\tPROCESSED\x10\x01\x12\t\n\x05\x45RROR\x10\x02\x12\x0b\n\x07\x42LOCKED\x10\x03\x12\x0b\n\x07\x45XPIRED\x10\x04\"\x89\x01\n\tFieldText\x12\x0c\n\x04\x62ody\x18\x01 \x01(\t\x12+\n\x06\x66ormat\x18\x02 \x01(\x0e\x32\x1b.resources.FieldText.Format\x12\x0b\n\x03md5\x18\x03 \x01(\t\"4\n\x06\x46ormat\x12\t\n\x05PLAIN\x10\x00\x12\x08\n\x04HTML\x10\x01\x12\x07\n\x03RST\x10\x02\x12\x0c\n\x08MARKDOWN\x10\x03\"\x9c\x02\n\x05\x42lock\x12\t\n\x01x\x18\x01 \x01(\x05\x12\t\n\x01y\x18\x02 \x01(\x05\x12\x0c\n\x04\x63ols\x18\x03 \x01(\x05\x12\x0c\n\x04rows\x18\x04 \x01(\x05\x12(\n\x04type\x18\x05 \x01(\x0e\x32\x1a.resources.Block.TypeBlock\x12\r\n\x05ident\x18\x06 \x01(\t\x12\x0f\n\x07payload\x18\x07 \x01(\t\x12\"\n\x04\x66ile\x18\x08 \x01(\x0b\x32\x14.resources.CloudFile\"s\n\tTypeBlock\x12\t\n\x05TITLE\x10\x00\x12\x0f\n\x0b\x44\x45SCRIPTION\x10\x01\x12\x0c\n\x08RICHTEXT\x10\x02\x12\x08\n\x04TEXT\x10\x03\x12\x0f\n\x0b\x41TTACHMENTS\x10\x04\x12\x0c\n\x08\x43OMMENTS\x10\x05\x12\x13\n\x0f\x43LASSIFICATIONS\x10\x06\"\x9e\x01\n\rLayoutContent\x12\x34\n\x06\x62locks\x18\x01 \x03(\x0b\x32$.resources.LayoutContent.BlocksEntry\x12\x16\n\x0e\x64\x65leted_blocks\x18\x02 \x03(\t\x1a?\n\x0b\x42locksEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\x1f\n\x05value\x18\x02 \x01(\x0b\x32\x10.resources.Block:\x02\x38\x01\"|\n\x0b\x46ieldLayout\x12&\n\x04\x62ody\x18\x01 \x01(\x0b\x32\x18.resources.LayoutContent\x12-\n\x06\x66ormat\x18\x02 \x01(\x0e\x32\x1d.resources.FieldLayout.Format\"\x16\n\x06\x46ormat\x12\x0c\n\x08NUCLIAv1\x10\x00\"[\n\x0e\x43lassification\x12\x10\n\x08labelset\x18\x01 \x01(\t\x12\r\n\x05label\x18\x02 \x01(\t\x12\x19\n\x11\x63\x61ncelled_by_user\x18\x03 \x01(\x08\x12\r\n\x05split\x18\x04 \x01(\t\"f\n\x0cUserMetadata\x12\x32\n\x0f\x63lassifications\x18\x01 \x03(\x0b\x32\x19.resources.Classification\x12\"\n\trelations\x18\x03 \x03(\x0b\x32\x0f.utils.Relation\"m\n\x14\x46ieldClassifications\x12!\n\x05\x66ield\x18\x01 \x01(\x0b\x32\x12.resources.FieldID\x12\x32\n\x0f\x63lassifications\x18\x02 \x03(\x0b\x32\x19.resources.Classification\"R\n\x10\x43omputedMetadata\x12>\n\x15\x66ield_classifications\x18\x01 \x03(\x0b\x32\x1f.resources.FieldClassifications\"p\n\nTokenSplit\x12\r\n\x05token\x18\x01 \x01(\t\x12\r\n\x05klass\x18\x02 \x01(\t\x12\r\n\x05start\x18\x03 \x01(\r\x12\x0b\n\x03\x65nd\x18\x04 \x01(\r\x12\x19\n\x11\x63\x61ncelled_by_user\x18\x05 \x01(\x08\x12\r\n\x05split\x18\x06 \x01(\t\"V\n\x13ParagraphAnnotation\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\x32\n\x0f\x63lassifications\x18\x02 \x03(\x0b\x32\x19.resources.Classification\"\x90\x01\n\x11UserFieldMetadata\x12$\n\x05token\x18\x01 \x03(\x0b\x32\x15.resources.TokenSplit\x12\x32\n\nparagraphs\x18\x02 \x03(\x0b\x32\x1e.resources.ParagraphAnnotation\x12!\n\x05\x66ield\x18\x03 \x01(\x0b\x32\x12.resources.FieldID\"\x90\x03\n\tFieldLink\x12)\n\x05\x61\x64\x64\x65\x64\x18\x01 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\x32\n\x07headers\x18\x02 \x03(\x0b\x32!.resources.FieldLink.HeadersEntry\x12\x32\n\x07\x63ookies\x18\x03 \x03(\x0b\x32!.resources.FieldLink.CookiesEntry\x12\x0b\n\x03uri\x18\x04 \x01(\t\x12\x10\n\x08language\x18\x05 \x01(\t\x12<\n\x0clocalstorage\x18\x06 \x03(\x0b\x32&.resources.FieldLink.LocalstorageEntry\x1a.\n\x0cHeadersEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\x1a.\n\x0c\x43ookiesEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\x1a\x33\n\x11LocalstorageEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\"\x18\n\x07Keyword\x12\r\n\x05value\x18\x01 \x01(\t\"7\n\x0f\x46ieldKeywordset\x12$\n\x08keywords\x18\x01 \x03(\x0b\x32\x12.resources.Keyword\":\n\rFieldDatetime\x12)\n\x05value\x18\x01 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\"\xd3\x02\n\tFieldFile\x12)\n\x05\x61\x64\x64\x65\x64\x18\x01 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\"\n\x04\x66ile\x18\x02 \x01(\x0b\x32\x14.resources.CloudFile\x12\x10\n\x08language\x18\x03 \x01(\t\x12\x10\n\x08password\x18\x04 \x01(\t\x12\x0b\n\x03url\x18\x05 \x01(\t\x12\x32\n\x07headers\x18\x06 \x03(\x0b\x32!.resources.FieldFile.HeadersEntry\x12\x32\n\x07\x63ookies\x18\x07 \x03(\x0b\x32!.resources.FieldFile.CookiesEntry\x1a.\n\x0cHeadersEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\x1a.\n\x0c\x43ookiesEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\"3\n\x06\x45ntity\x12\r\n\x05token\x18\x01 \x01(\t\x12\x0c\n\x04root\x18\x02 \x01(\t\x12\x0c\n\x04type\x18\x03 \x01(\t\"\xa3\x01\n\x12\x46ieldLargeMetadata\x12#\n\x08\x65ntities\x18\x01 \x03(\x0b\x32\x11.resources.Entity\x12\x39\n\x06tokens\x18\x02 \x03(\x0b\x32).resources.FieldLargeMetadata.TokensEntry\x1a-\n\x0bTokensEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\x05:\x02\x38\x01\"\x82\x02\n\x15LargeComputedMetadata\x12/\n\x08metadata\x18\x01 \x01(\x0b\x32\x1d.resources.FieldLargeMetadata\x12K\n\x0esplit_metadata\x18\x02 \x03(\x0b\x32\x33.resources.LargeComputedMetadata.SplitMetadataEntry\x12\x16\n\x0e\x64\x65leted_splits\x18\x03 \x03(\t\x1aS\n\x12SplitMetadataEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12,\n\x05value\x18\x02 \x01(\x0b\x32\x1d.resources.FieldLargeMetadata:\x02\x38\x01\"\xa9\x01\n\x1cLargeComputedMetadataWrapper\x12\x30\n\x04real\x18\x01 \x01(\x0b\x32 .resources.LargeComputedMetadataH\x00\x12$\n\x04\x66ile\x18\x02 \x01(\x0b\x32\x14.resources.CloudFileH\x00\x12!\n\x05\x66ield\x18\x03 \x01(\x0b\x32\x12.resources.FieldIDB\x0e\n\x0c\x66ile_or_data\"+\n\rPagePositions\x12\r\n\x05start\x18\x01 \x01(\x03\x12\x0b\n\x03\x65nd\x18\x02 \x01(\x03\"]\n\tFilePages\x12#\n\x05pages\x18\x01 \x03(\x0b\x32\x14.resources.CloudFile\x12+\n\tpositions\x18\x02 \x03(\x0b\x32\x18.resources.PagePositions\"\xdc\x01\n\x0bRowsPreview\x12\x32\n\x06sheets\x18\x01 \x03(\x0b\x32\".resources.RowsPreview.SheetsEntry\x1aL\n\x05Sheet\x12.\n\x04rows\x18\x01 \x03(\x0b\x32 .resources.RowsPreview.Sheet.Row\x1a\x13\n\x03Row\x12\x0c\n\x04\x63\x65ll\x18\x01 \x03(\t\x1aK\n\x0bSheetsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12+\n\x05value\x18\x02 \x01(\x0b\x32\x1c.resources.RowsPreview.Sheet:\x02\x38\x01\"B\n\x07\x46ieldID\x12(\n\nfield_type\x18\x01 \x01(\x0e\x32\x14.resources.FieldType\x12\r\n\x05\x66ield\x18\x02 \x01(\t*r\n\tFieldType\x12\x08\n\x04\x46ILE\x10\x00\x12\x08\n\x04LINK\x10\x01\x12\x0c\n\x08\x44\x41TETIME\x10\x02\x12\x0e\n\nKEYWORDSET\x10\x03\x12\x08\n\x04TEXT\x10\x04\x12\n\n\x06LAYOUT\x10\x05\x12\x0b\n\x07GENERIC\x10\x06\x12\x10\n\x0c\x43ONVERSATION\x10\x07P\x00\x62\x06proto3')
+DESCRIPTOR = _descriptor_pool.Default().AddSerializedFile(b'\n\x1fnucliadb_protos/resources.proto\x12\tresources\x1a\x1bnucliadb_protos/utils.proto\x1a\x1fgoogle/protobuf/timestamp.proto\x1a\x1cgoogle/protobuf/struct.proto\"\xf0\x02\n\tCloudFile\x12\x0b\n\x03uri\x18\x01 \x01(\t\x12\x0c\n\x04size\x18\x02 \x01(\x04\x12\x14\n\x0c\x63ontent_type\x18\x03 \x01(\t\x12\x13\n\x0b\x62ucket_name\x18\x04 \x01(\t\x12+\n\x06source\x18\x05 \x01(\x0e\x32\x1b.resources.CloudFile.Source\x12\x10\n\x08\x66ilename\x18\x06 \x01(\t\x12\x15\n\rresumable_uri\x18\x07 \x01(\t\x12\x0e\n\x06offset\x18\x08 \x01(\x04\x12\x12\n\nupload_uri\x18\t \x01(\t\x12\r\n\x05parts\x18\n \x03(\t\x12\x0f\n\x07old_uri\x18\x0b \x01(\t\x12\x12\n\nold_bucket\x18\x0c \x01(\t\x12\x0b\n\x03md5\x18\r \x01(\t\"b\n\x06Source\x12\t\n\x05\x46LAPS\x10\x00\x12\x07\n\x03GCS\x10\x01\x12\x06\n\x02S3\x10\x02\x12\t\n\x05LOCAL\x10\x03\x12\x0c\n\x08\x45XTERNAL\x10\x04\x12\t\n\x05\x45MPTY\x10\x05\x12\n\n\x06\x45XPORT\x10\x06\x12\x0c\n\x08POSTGRES\x10\x07\"\xa0\x04\n\x05\x42\x61sic\x12\x0c\n\x04slug\x18\x01 \x01(\t\x12\x0c\n\x04icon\x18\x02 \x01(\t\x12\r\n\x05title\x18\x03 \x01(\t\x12\x0f\n\x07summary\x18\x04 \x01(\t\x12\x11\n\tthumbnail\x18\x05 \x01(\t\x12\x0e\n\x06layout\x18\x06 \x01(\t\x12+\n\x07\x63reated\x18\x07 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12,\n\x08modified\x18\x08 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12%\n\x08metadata\x18\t \x01(\x0b\x32\x13.resources.Metadata\x12-\n\x0cusermetadata\x18\n \x01(\x0b\x32\x17.resources.UserMetadata\x12\x33\n\rfieldmetadata\x18\x0b \x03(\x0b\x32\x1c.resources.UserFieldMetadata\x12\x35\n\x10\x63omputedmetadata\x18\x0f \x01(\x0b\x32\x1b.resources.ComputedMetadata\x12\x0c\n\x04uuid\x18\x0c \x01(\t\x12\x0e\n\x06labels\x18\r \x03(\t\x12\x12\n\nlast_seqid\x18\x0e \x01(\x03\x12\x18\n\x10last_account_seq\x18# \x01(\x03\x12)\n\x05queue\x18$ \x01(\x0e\x32\x1a.resources.Basic.QueueType\"$\n\tQueueType\x12\x0b\n\x07PRIVATE\x10\x00\x12\n\n\x06SHARED\x10\x01\"\x8f\x03\n\x06Origin\x12(\n\x06source\x18\x01 \x01(\x0e\x32\x18.resources.Origin.Source\x12\x11\n\tsource_id\x18\x02 \x01(\t\x12\x0b\n\x03url\x18\x03 \x01(\t\x12+\n\x07\x63reated\x18\x04 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12,\n\x08modified\x18\x05 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\x31\n\x08metadata\x18\x06 \x03(\x0b\x32\x1f.resources.Origin.MetadataEntry\x12\x0c\n\x04tags\x18\x07 \x03(\t\x12\x14\n\x0c\x63olaborators\x18\x08 \x03(\t\x12\x10\n\x08\x66ilename\x18\t \x01(\t\x12\x0f\n\x07related\x18\n \x03(\t\x12\x0c\n\x04path\x18\x0b \x01(\t\x1a/\n\rMetadataEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\"\'\n\x06Source\x12\x07\n\x03WEB\x10\x00\x12\x0b\n\x07\x44\x45SKTOP\x10\x01\x12\x07\n\x03\x41PI\x10\x02\"2\n\x05\x45xtra\x12)\n\x08metadata\x18\x01 \x01(\x0b\x32\x17.google.protobuf.Struct\"/\n\tRelations\x12\"\n\trelations\x18\x01 \x03(\x0b\x32\x0f.utils.Relation\"\xc4\x01\n\x0eMessageContent\x12\x0c\n\x04text\x18\x01 \x01(\t\x12\x30\n\x06\x66ormat\x18\x02 \x01(\x0e\x32 .resources.MessageContent.Format\x12)\n\x0b\x61ttachments\x18\x04 \x03(\x0b\x32\x14.resources.CloudFile\"G\n\x06\x46ormat\x12\t\n\x05PLAIN\x10\x00\x12\x08\n\x04HTML\x10\x01\x12\x0c\n\x08MARKDOWN\x10\x02\x12\x07\n\x03RST\x10\x03\x12\x11\n\rKEEP_MARKDOWN\x10\x04\"\xee\x01\n\x07Message\x12-\n\ttimestamp\x18\x01 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\x0b\n\x03who\x18\x02 \x01(\t\x12\n\n\x02to\x18\x03 \x03(\t\x12*\n\x07\x63ontent\x18\x04 \x01(\x0b\x32\x19.resources.MessageContent\x12\r\n\x05ident\x18\x05 \x01(\t\x12,\n\x04type\x18\x06 \x01(\x0e\x32\x1e.resources.Message.MessageType\"2\n\x0bMessageType\x12\t\n\x05UNSET\x10\x00\x12\x0c\n\x08QUESTION\x10\x01\x12\n\n\x06\x41NSWER\x10\x02\"4\n\x0c\x43onversation\x12$\n\x08messages\x18\x01 \x03(\x0b\x32\x12.resources.Message\"?\n\x11\x46ieldConversation\x12\r\n\x05pages\x18\x01 \x01(\x05\x12\x0c\n\x04size\x18\x02 \x01(\x05\x12\r\n\x05total\x18\x03 \x01(\x05\":\n\x0eNestedPosition\x12\r\n\x05start\x18\x01 \x01(\x03\x12\x0b\n\x03\x65nd\x18\x02 \x01(\x03\x12\x0c\n\x04page\x18\x03 \x01(\x03\"B\n\x12NestedListPosition\x12,\n\tpositions\x18\x01 \x03(\x0b\x32\x19.resources.NestedPosition\"\xb9\x08\n\x11\x46ileExtractedData\x12\x10\n\x08language\x18\x01 \x01(\t\x12\x0b\n\x03md5\x18\x02 \x01(\t\x12<\n\x08metadata\x18\x03 \x03(\x0b\x32*.resources.FileExtractedData.MetadataEntry\x12\x38\n\x06nested\x18\x04 \x03(\x0b\x32(.resources.FileExtractedData.NestedEntry\x12G\n\x0e\x66ile_generated\x18\x05 \x03(\x0b\x32/.resources.FileExtractedData.FileGeneratedEntry\x12N\n\x12\x66ile_rows_previews\x18\x06 \x03(\x0b\x32\x32.resources.FileExtractedData.FileRowsPreviewsEntry\x12*\n\x0c\x66ile_preview\x18\x07 \x01(\x0b\x32\x14.resources.CloudFile\x12\x31\n\x13\x66ile_pages_previews\x18\x08 \x01(\x0b\x32\x14.resources.FilePages\x12,\n\x0e\x66ile_thumbnail\x18\t \x01(\x0b\x32\x14.resources.CloudFile\x12\r\n\x05\x66ield\x18\n \x01(\t\x12\x0c\n\x04icon\x18\x0b \x01(\t\x12M\n\x0fnested_position\x18\x0c \x03(\x0b\x32\x30.resources.FileExtractedData.NestedPositionEntryB\x02\x18\x01\x12R\n\x14nested_list_position\x18\r \x03(\x0b\x32\x34.resources.FileExtractedData.NestedListPositionEntry\x1a/\n\rMetadataEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\x1a-\n\x0bNestedEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\x1aJ\n\x12\x46ileGeneratedEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12#\n\x05value\x18\x02 \x01(\x0b\x32\x14.resources.CloudFile:\x02\x38\x01\x1aO\n\x15\x46ileRowsPreviewsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12%\n\x05value\x18\x02 \x01(\x0b\x32\x16.resources.RowsPreview:\x02\x38\x01\x1aP\n\x13NestedPositionEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12(\n\x05value\x18\x02 \x01(\x0b\x32\x19.resources.NestedPosition:\x02\x38\x01\x1aX\n\x17NestedListPositionEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12,\n\x05value\x18\x02 \x01(\x0b\x32\x1d.resources.NestedListPosition:\x02\x38\x01\"\xc3\x03\n\x11LinkExtractedData\x12(\n\x04\x64\x61te\x18\x01 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\x10\n\x08language\x18\x02 \x01(\t\x12\r\n\x05title\x18\x04 \x01(\t\x12<\n\x08metadata\x18\x05 \x03(\x0b\x32*.resources.LinkExtractedData.MetadataEntry\x12,\n\x0elink_thumbnail\x18\x06 \x01(\x0b\x32\x14.resources.CloudFile\x12*\n\x0clink_preview\x18\x07 \x01(\x0b\x32\x14.resources.CloudFile\x12\r\n\x05\x66ield\x18\x08 \x01(\t\x12(\n\nlink_image\x18\t \x01(\x0b\x32\x14.resources.CloudFile\x12\x13\n\x0b\x64\x65scription\x18\n \x01(\t\x12\x0c\n\x04type\x18\x0b \x01(\t\x12\r\n\x05\x65mbed\x18\x0c \x01(\t\x12/\n\rpdf_structure\x18\r \x01(\x0b\x32\x18.resources.PageStructure\x1a/\n\rMetadataEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\"\x95\x01\n\x14\x45xtractedTextWrapper\x12$\n\x04\x62ody\x18\x01 \x01(\x0b\x32\x14.utils.ExtractedTextH\x00\x12$\n\x04\x66ile\x18\x02 \x01(\x0b\x32\x14.resources.CloudFileH\x00\x12!\n\x05\x66ield\x18\x03 \x01(\x0b\x32\x12.resources.FieldIDB\x0e\n\x0c\x66ile_or_data\"\x9a\x01\n\x17\x45xtractedVectorsWrapper\x12&\n\x07vectors\x18\x01 \x01(\x0b\x32\x13.utils.VectorObjectH\x00\x12$\n\x04\x66ile\x18\x02 \x01(\x0b\x32\x14.resources.CloudFileH\x00\x12!\n\x05\x66ield\x18\x03 \x01(\x0b\x32\x12.resources.FieldIDB\x0e\n\x0c\x66ile_or_data\"\xfd\x01\n\x12UserVectorsWrapper\x12%\n\x07vectors\x18\x01 \x01(\x0b\x32\x14.utils.UserVectorSet\x12M\n\x11vectors_to_delete\x18\r \x03(\x0b\x32\x32.resources.UserVectorsWrapper.VectorsToDeleteEntry\x12!\n\x05\x66ield\x18\x03 \x01(\x0b\x32\x12.resources.FieldID\x1aN\n\x14VectorsToDeleteEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12%\n\x05value\x18\x02 \x01(\x0b\x32\x16.utils.UserVectorsList:\x02\x38\x01\"3\n\x08Sentence\x12\r\n\x05start\x18\x01 \x01(\x05\x12\x0b\n\x03\x65nd\x18\x02 \x01(\x05\x12\x0b\n\x03key\x18\x03 \x01(\t\"9\n\x0fPageInformation\x12\x0c\n\x04page\x18\x01 \x01(\r\x12\x18\n\x10page_with_visual\x18\x02 \x01(\x08\"<\n\x0eRepresentation\x12\x12\n\nis_a_table\x18\x01 \x01(\x08\x12\x16\n\x0ereference_file\x18\x02 \x01(\t\"\xb8\x03\n\tParagraph\x12\r\n\x05start\x18\x01 \x01(\r\x12\x0b\n\x03\x65nd\x18\x02 \x01(\r\x12\x15\n\rstart_seconds\x18\x03 \x03(\r\x12\x13\n\x0b\x65nd_seconds\x18\x04 \x03(\r\x12\x30\n\x04kind\x18\x05 \x01(\x0e\x32\".resources.Paragraph.TypeParagraph\x12\x32\n\x0f\x63lassifications\x18\x06 \x03(\x0b\x32\x19.resources.Classification\x12&\n\tsentences\x18\x07 \x03(\x0b\x32\x13.resources.Sentence\x12\x0b\n\x03key\x18\x08 \x01(\t\x12\x0c\n\x04text\x18\t \x01(\t\x12(\n\x04page\x18\n \x01(\x0b\x32\x1a.resources.PageInformation\x12\x31\n\x0erepresentation\x18\x0b \x01(\x0b\x32\x19.resources.Representation\"]\n\rTypeParagraph\x12\x08\n\x04TEXT\x10\x00\x12\x07\n\x03OCR\x10\x01\x12\r\n\tINCEPTION\x10\x02\x12\x0f\n\x0b\x44\x45SCRIPTION\x10\x03\x12\x0e\n\nTRANSCRIPT\x10\x04\x12\t\n\x05TITLE\x10\x05\"&\n\x08Position\x12\r\n\x05start\x18\x01 \x01(\x03\x12\x0b\n\x03\x65nd\x18\x02 \x01(\x03\"B\n\tPositions\x12%\n\x08position\x18\x01 \x03(\x0b\x32\x13.resources.Position\x12\x0e\n\x06\x65ntity\x18\x02 \x01(\t\"\x9d\x05\n\rFieldMetadata\x12\r\n\x05links\x18\x01 \x03(\t\x12(\n\nparagraphs\x18\x02 \x03(\x0b\x32\x14.resources.Paragraph\x12.\n\x03ner\x18\x03 \x03(\x0b\x32!.resources.FieldMetadata.NerEntry\x12\x32\n\x0f\x63lassifications\x18\x04 \x03(\x0b\x32\x19.resources.Classification\x12.\n\nlast_index\x18\x05 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\x36\n\x12last_understanding\x18\x06 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\x30\n\x0clast_extract\x18\x07 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\x30\n\x0clast_summary\x18\x08 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\'\n\tthumbnail\x18\t \x01(\x0b\x32\x14.resources.CloudFile\x12\x10\n\x08language\x18\n \x01(\t\x12\x0f\n\x07summary\x18\x0b \x01(\t\x12:\n\tpositions\x18\x0c \x03(\x0b\x32\'.resources.FieldMetadata.PositionsEntry\x12\'\n\trelations\x18\r \x03(\x0b\x32\x14.resources.Relations\x1a*\n\x08NerEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\x1a\x46\n\x0ePositionsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12#\n\x05value\x18\x02 \x01(\x0b\x32\x14.resources.Positions:\x02\x38\x01\"B\n\x08Question\x12\x0c\n\x04text\x18\x01 \x01(\t\x12\x10\n\x08language\x18\x02 \x01(\t\x12\x16\n\x0eids_paragraphs\x18\x03 \x03(\t\"A\n\x07\x41nswers\x12\x0c\n\x04text\x18\x01 \x01(\t\x12\x10\n\x08language\x18\x02 \x01(\t\x12\x16\n\x0eids_paragraphs\x18\x03 \x03(\t\"\\\n\x0eQuestionAnswer\x12%\n\x08question\x18\x01 \x01(\x0b\x32\x13.resources.Question\x12#\n\x07\x61nswers\x18\x02 \x03(\x0b\x32\x12.resources.Answers\"E\n\x0fQuestionAnswers\x12\x32\n\x0fquestion_answer\x18\x01 \x03(\x0b\x32\x19.resources.QuestionAnswer\"\xad\x01\n\x1a\x46ieldQuestionAnswerWrapper\x12\x36\n\x10question_answers\x18\x01 \x01(\x0b\x32\x1a.resources.QuestionAnswersH\x00\x12$\n\x04\x66ile\x18\x02 \x01(\x0b\x32\x14.resources.CloudFileH\x00\x12!\n\x05\x66ield\x18\x03 \x01(\x0b\x32\x12.resources.FieldIDB\x0e\n\x0c\x66ile_or_data\"\xf8\x01\n\x15\x46ieldComputedMetadata\x12*\n\x08metadata\x18\x01 \x01(\x0b\x32\x18.resources.FieldMetadata\x12K\n\x0esplit_metadata\x18\x02 \x03(\x0b\x32\x33.resources.FieldComputedMetadata.SplitMetadataEntry\x12\x16\n\x0e\x64\x65leted_splits\x18\x03 \x03(\t\x1aN\n\x12SplitMetadataEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\'\n\x05value\x18\x02 \x01(\x0b\x32\x18.resources.FieldMetadata:\x02\x38\x01\"u\n\x1c\x46ieldComputedMetadataWrapper\x12\x32\n\x08metadata\x18\x01 \x01(\x0b\x32 .resources.FieldComputedMetadata\x12!\n\x05\x66ield\x18\x04 \x01(\x0b\x32\x12.resources.FieldID\"\x9c\x02\n\x08Metadata\x12\x33\n\x08metadata\x18\x01 \x03(\x0b\x32!.resources.Metadata.MetadataEntry\x12\x10\n\x08language\x18\x02 \x01(\t\x12\x11\n\tlanguages\x18\x03 \x03(\t\x12\x0e\n\x06useful\x18\x04 \x01(\x08\x12*\n\x06status\x18\x05 \x01(\x0e\x32\x1a.resources.Metadata.Status\x1a/\n\rMetadataEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\"I\n\x06Status\x12\x0b\n\x07PENDING\x10\x00\x12\r\n\tPROCESSED\x10\x01\x12\t\n\x05\x45RROR\x10\x02\x12\x0b\n\x07\x42LOCKED\x10\x03\x12\x0b\n\x07\x45XPIRED\x10\x04\"\xa6\x01\n\tFieldText\x12\x0c\n\x04\x62ody\x18\x01 \x01(\t\x12+\n\x06\x66ormat\x18\x02 \x01(\x0e\x32\x1b.resources.FieldText.Format\x12\x0b\n\x03md5\x18\x03 \x01(\t\"Q\n\x06\x46ormat\x12\t\n\x05PLAIN\x10\x00\x12\x08\n\x04HTML\x10\x01\x12\x07\n\x03RST\x10\x02\x12\x0c\n\x08MARKDOWN\x10\x03\x12\x08\n\x04JSON\x10\x04\x12\x11\n\rKEEP_MARKDOWN\x10\x05\"\x9c\x02\n\x05\x42lock\x12\t\n\x01x\x18\x01 \x01(\x05\x12\t\n\x01y\x18\x02 \x01(\x05\x12\x0c\n\x04\x63ols\x18\x03 \x01(\x05\x12\x0c\n\x04rows\x18\x04 \x01(\x05\x12(\n\x04type\x18\x05 \x01(\x0e\x32\x1a.resources.Block.TypeBlock\x12\r\n\x05ident\x18\x06 \x01(\t\x12\x0f\n\x07payload\x18\x07 \x01(\t\x12\"\n\x04\x66ile\x18\x08 \x01(\x0b\x32\x14.resources.CloudFile\"s\n\tTypeBlock\x12\t\n\x05TITLE\x10\x00\x12\x0f\n\x0b\x44\x45SCRIPTION\x10\x01\x12\x0c\n\x08RICHTEXT\x10\x02\x12\x08\n\x04TEXT\x10\x03\x12\x0f\n\x0b\x41TTACHMENTS\x10\x04\x12\x0c\n\x08\x43OMMENTS\x10\x05\x12\x13\n\x0f\x43LASSIFICATIONS\x10\x06\"\x9e\x01\n\rLayoutContent\x12\x34\n\x06\x62locks\x18\x01 \x03(\x0b\x32$.resources.LayoutContent.BlocksEntry\x12\x16\n\x0e\x64\x65leted_blocks\x18\x02 \x03(\t\x1a?\n\x0b\x42locksEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\x1f\n\x05value\x18\x02 \x01(\x0b\x32\x10.resources.Block:\x02\x38\x01\"|\n\x0b\x46ieldLayout\x12&\n\x04\x62ody\x18\x01 \x01(\x0b\x32\x18.resources.LayoutContent\x12-\n\x06\x66ormat\x18\x02 \x01(\x0e\x32\x1d.resources.FieldLayout.Format\"\x16\n\x06\x46ormat\x12\x0c\n\x08NUCLIAv1\x10\x00\"[\n\x0e\x43lassification\x12\x10\n\x08labelset\x18\x01 \x01(\t\x12\r\n\x05label\x18\x02 \x01(\t\x12\x19\n\x11\x63\x61ncelled_by_user\x18\x03 \x01(\x08\x12\r\n\x05split\x18\x04 \x01(\t\"f\n\x0cUserMetadata\x12\x32\n\x0f\x63lassifications\x18\x01 \x03(\x0b\x32\x19.resources.Classification\x12\"\n\trelations\x18\x03 \x03(\x0b\x32\x0f.utils.Relation\"m\n\x14\x46ieldClassifications\x12!\n\x05\x66ield\x18\x01 \x01(\x0b\x32\x12.resources.FieldID\x12\x32\n\x0f\x63lassifications\x18\x02 \x03(\x0b\x32\x19.resources.Classification\"R\n\x10\x43omputedMetadata\x12>\n\x15\x66ield_classifications\x18\x01 \x03(\x0b\x32\x1f.resources.FieldClassifications\"p\n\nTokenSplit\x12\r\n\x05token\x18\x01 \x01(\t\x12\r\n\x05klass\x18\x02 \x01(\t\x12\r\n\x05start\x18\x03 \x01(\r\x12\x0b\n\x03\x65nd\x18\x04 \x01(\r\x12\x19\n\x11\x63\x61ncelled_by_user\x18\x05 \x01(\x08\x12\r\n\x05split\x18\x06 \x01(\t\"V\n\x13ParagraphAnnotation\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\x32\n\x0f\x63lassifications\x18\x02 \x03(\x0b\x32\x19.resources.Classification\"i\n\x18QuestionAnswerAnnotation\x12\x32\n\x0fquestion_answer\x18\x01 \x01(\x0b\x32\x19.resources.QuestionAnswer\x12\x19\n\x11\x63\x61ncelled_by_user\x18\x02 \x01(\x08\"m\n\x0fVisualSelection\x12\r\n\x05label\x18\x01 \x01(\t\x12\x0b\n\x03top\x18\x02 \x01(\x02\x12\x0c\n\x04left\x18\x03 \x01(\x02\x12\r\n\x05right\x18\x04 \x01(\x02\x12\x0e\n\x06\x62ottom\x18\x05 \x01(\x02\x12\x11\n\ttoken_ids\x18\x06 \x03(\r\"J\n\x0ePageSelections\x12\x0c\n\x04page\x18\x01 \x01(\r\x12*\n\x06visual\x18\x02 \x03(\x0b\x32\x1a.resources.VisualSelection\"\x83\x02\n\x11UserFieldMetadata\x12$\n\x05token\x18\x01 \x03(\x0b\x32\x15.resources.TokenSplit\x12\x32\n\nparagraphs\x18\x02 \x03(\x0b\x32\x1e.resources.ParagraphAnnotation\x12\x32\n\x0fpage_selections\x18\x04 \x03(\x0b\x32\x19.resources.PageSelections\x12=\n\x10question_answers\x18\x05 \x03(\x0b\x32#.resources.QuestionAnswerAnnotation\x12!\n\x05\x66ield\x18\x03 \x01(\x0b\x32\x12.resources.FieldID\"\xb5\x03\n\tFieldLink\x12)\n\x05\x61\x64\x64\x65\x64\x18\x01 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\x32\n\x07headers\x18\x02 \x03(\x0b\x32!.resources.FieldLink.HeadersEntry\x12\x32\n\x07\x63ookies\x18\x03 \x03(\x0b\x32!.resources.FieldLink.CookiesEntry\x12\x0b\n\x03uri\x18\x04 \x01(\t\x12\x10\n\x08language\x18\x05 \x01(\t\x12<\n\x0clocalstorage\x18\x06 \x03(\x0b\x32&.resources.FieldLink.LocalstorageEntry\x12\x14\n\x0c\x63ss_selector\x18\x07 \x01(\t\x12\r\n\x05xpath\x18\x08 \x01(\t\x1a.\n\x0cHeadersEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\x1a.\n\x0c\x43ookiesEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\x1a\x33\n\x11LocalstorageEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\"\x18\n\x07Keyword\x12\r\n\x05value\x18\x01 \x01(\t\"7\n\x0f\x46ieldKeywordset\x12$\n\x08keywords\x18\x01 \x03(\x0b\x32\x12.resources.Keyword\":\n\rFieldDatetime\x12)\n\x05value\x18\x01 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\"\xef\x01\n\tFieldFile\x12)\n\x05\x61\x64\x64\x65\x64\x18\x01 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\"\n\x04\x66ile\x18\x02 \x01(\x0b\x32\x14.resources.CloudFile\x12\x10\n\x08language\x18\x03 \x01(\t\x12\x10\n\x08password\x18\x04 \x01(\t\x12\x0b\n\x03url\x18\x05 \x01(\t\x12\x32\n\x07headers\x18\x06 \x03(\x0b\x32!.resources.FieldFile.HeadersEntry\x1a.\n\x0cHeadersEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\"3\n\x06\x45ntity\x12\r\n\x05token\x18\x01 \x01(\t\x12\x0c\n\x04root\x18\x02 \x01(\t\x12\x0c\n\x04type\x18\x03 \x01(\t\"\xa3\x01\n\x12\x46ieldLargeMetadata\x12#\n\x08\x65ntities\x18\x01 \x03(\x0b\x32\x11.resources.Entity\x12\x39\n\x06tokens\x18\x02 \x03(\x0b\x32).resources.FieldLargeMetadata.TokensEntry\x1a-\n\x0bTokensEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\x05:\x02\x38\x01\"\x82\x02\n\x15LargeComputedMetadata\x12/\n\x08metadata\x18\x01 \x01(\x0b\x32\x1d.resources.FieldLargeMetadata\x12K\n\x0esplit_metadata\x18\x02 \x03(\x0b\x32\x33.resources.LargeComputedMetadata.SplitMetadataEntry\x12\x16\n\x0e\x64\x65leted_splits\x18\x03 \x03(\t\x1aS\n\x12SplitMetadataEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12,\n\x05value\x18\x02 \x01(\x0b\x32\x1d.resources.FieldLargeMetadata:\x02\x38\x01\"\xa9\x01\n\x1cLargeComputedMetadataWrapper\x12\x30\n\x04real\x18\x01 \x01(\x0b\x32 .resources.LargeComputedMetadataH\x00\x12$\n\x04\x66ile\x18\x02 \x01(\x0b\x32\x14.resources.CloudFileH\x00\x12!\n\x05\x66ield\x18\x03 \x01(\x0b\x32\x12.resources.FieldIDB\x0e\n\x0c\x66ile_or_data\"+\n\rPagePositions\x12\r\n\x05start\x18\x01 \x01(\x03\x12\x0b\n\x03\x65nd\x18\x02 \x01(\x03\"2\n\x11PageStructurePage\x12\r\n\x05width\x18\x01 \x01(\x03\x12\x0e\n\x06height\x18\x02 \x01(\x03\"\xe2\x01\n\x12PageStructureToken\x12\x1b\n\x0f__x__deprecated\x18\x01 \x01(\x03\x42\x02\x18\x01\x12\x1b\n\x0f__y__deprecated\x18\x02 \x01(\x03\x42\x02\x18\x01\x12\x1f\n\x13__width__deprecated\x18\x03 \x01(\x03\x42\x02\x18\x01\x12 \n\x14__height__deprecated\x18\x04 \x01(\x03\x42\x02\x18\x01\x12\t\n\x01x\x18\x07 \x01(\x02\x12\t\n\x01y\x18\x08 \x01(\x02\x12\r\n\x05width\x18\t \x01(\x02\x12\x0e\n\x06height\x18\n \x01(\x02\x12\x0c\n\x04text\x18\x05 \x01(\t\x12\x0c\n\x04line\x18\x06 \x01(\x02\"j\n\rPageStructure\x12*\n\x04page\x18\x01 \x01(\x0b\x32\x1c.resources.PageStructurePage\x12-\n\x06tokens\x18\x02 \x03(\x0b\x32\x1d.resources.PageStructureToken\"\x8b\x01\n\tFilePages\x12#\n\x05pages\x18\x01 \x03(\x0b\x32\x14.resources.CloudFile\x12+\n\tpositions\x18\x02 \x03(\x0b\x32\x18.resources.PagePositions\x12,\n\nstructures\x18\x03 \x03(\x0b\x32\x18.resources.PageStructure\"\xdc\x01\n\x0bRowsPreview\x12\x32\n\x06sheets\x18\x01 \x03(\x0b\x32\".resources.RowsPreview.SheetsEntry\x1aL\n\x05Sheet\x12.\n\x04rows\x18\x01 \x03(\x0b\x32 .resources.RowsPreview.Sheet.Row\x1a\x13\n\x03Row\x12\x0c\n\x04\x63\x65ll\x18\x01 \x03(\t\x1aK\n\x0bSheetsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12+\n\x05value\x18\x02 \x01(\x0b\x32\x1c.resources.RowsPreview.Sheet:\x02\x38\x01\"B\n\x07\x46ieldID\x12(\n\nfield_type\x18\x01 \x01(\x0e\x32\x14.resources.FieldType\x12\r\n\x05\x66ield\x18\x02 \x01(\t\"1\n\x0b\x41llFieldIDs\x12\"\n\x06\x66ields\x18\x01 \x03(\x0b\x32\x12.resources.FieldID*r\n\tFieldType\x12\x08\n\x04\x46ILE\x10\x00\x12\x08\n\x04LINK\x10\x01\x12\x0c\n\x08\x44\x41TETIME\x10\x02\x12\x0e\n\nKEYWORDSET\x10\x03\x12\x08\n\x04TEXT\x10\x04\x12\n\n\x06LAYOUT\x10\x05\x12\x0b\n\x07GENERIC\x10\x06\x12\x10\n\x0c\x43ONVERSATION\x10\x07P\x00\x62\x06proto3')
 
-_builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, globals())
-_builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, 'nucliadb_protos.resources_pb2', globals())
+_globals = globals()
+_builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, _globals)
+_builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, 'nucliadb_protos.resources_pb2', _globals)
 if _descriptor._USE_C_DESCRIPTORS == False:
-
   DESCRIPTOR._options = None
-  _ORIGIN_METADATAENTRY._options = None
-  _ORIGIN_METADATAENTRY._serialized_options = b'8\001'
-  _FILEEXTRACTEDDATA_METADATAENTRY._options = None
-  _FILEEXTRACTEDDATA_METADATAENTRY._serialized_options = b'8\001'
-  _FILEEXTRACTEDDATA_NESTEDENTRY._options = None
-  _FILEEXTRACTEDDATA_NESTEDENTRY._serialized_options = b'8\001'
-  _FILEEXTRACTEDDATA_FILEGENERATEDENTRY._options = None
-  _FILEEXTRACTEDDATA_FILEGENERATEDENTRY._serialized_options = b'8\001'
-  _FILEEXTRACTEDDATA_FILEROWSPREVIEWSENTRY._options = None
-  _FILEEXTRACTEDDATA_FILEROWSPREVIEWSENTRY._serialized_options = b'8\001'
-  _FILEEXTRACTEDDATA_NESTEDPOSITIONENTRY._options = None
-  _FILEEXTRACTEDDATA_NESTEDPOSITIONENTRY._serialized_options = b'8\001'
-  _FILEEXTRACTEDDATA_NESTEDLISTPOSITIONENTRY._options = None
-  _FILEEXTRACTEDDATA_NESTEDLISTPOSITIONENTRY._serialized_options = b'8\001'
-  _FILEEXTRACTEDDATA.fields_by_name['nested_position']._options = None
-  _FILEEXTRACTEDDATA.fields_by_name['nested_position']._serialized_options = b'\030\001'
-  _LINKEXTRACTEDDATA_METADATAENTRY._options = None
-  _LINKEXTRACTEDDATA_METADATAENTRY._serialized_options = b'8\001'
-  _USERVECTORSWRAPPER_VECTORSTODELETEENTRY._options = None
-  _USERVECTORSWRAPPER_VECTORSTODELETEENTRY._serialized_options = b'8\001'
-  _FIELDMETADATA_NERENTRY._options = None
-  _FIELDMETADATA_NERENTRY._serialized_options = b'8\001'
-  _FIELDMETADATA_POSITIONSENTRY._options = None
-  _FIELDMETADATA_POSITIONSENTRY._serialized_options = b'8\001'
-  _FIELDCOMPUTEDMETADATA_SPLITMETADATAENTRY._options = None
-  _FIELDCOMPUTEDMETADATA_SPLITMETADATAENTRY._serialized_options = b'8\001'
-  _METADATA_METADATAENTRY._options = None
-  _METADATA_METADATAENTRY._serialized_options = b'8\001'
-  _LAYOUTCONTENT_BLOCKSENTRY._options = None
-  _LAYOUTCONTENT_BLOCKSENTRY._serialized_options = b'8\001'
-  _FIELDLINK_HEADERSENTRY._options = None
-  _FIELDLINK_HEADERSENTRY._serialized_options = b'8\001'
-  _FIELDLINK_COOKIESENTRY._options = None
-  _FIELDLINK_COOKIESENTRY._serialized_options = b'8\001'
-  _FIELDLINK_LOCALSTORAGEENTRY._options = None
-  _FIELDLINK_LOCALSTORAGEENTRY._serialized_options = b'8\001'
-  _FIELDFILE_HEADERSENTRY._options = None
-  _FIELDFILE_HEADERSENTRY._serialized_options = b'8\001'
-  _FIELDFILE_COOKIESENTRY._options = None
-  _FIELDFILE_COOKIESENTRY._serialized_options = b'8\001'
-  _FIELDLARGEMETADATA_TOKENSENTRY._options = None
-  _FIELDLARGEMETADATA_TOKENSENTRY._serialized_options = b'8\001'
-  _LARGECOMPUTEDMETADATA_SPLITMETADATAENTRY._options = None
-  _LARGECOMPUTEDMETADATA_SPLITMETADATAENTRY._serialized_options = b'8\001'
-  _ROWSPREVIEW_SHEETSENTRY._options = None
-  _ROWSPREVIEW_SHEETSENTRY._serialized_options = b'8\001'
-  _FIELDTYPE._serialized_start=9353
-  _FIELDTYPE._serialized_end=9467
-  _CLOUDFILE._serialized_start=109
-  _CLOUDFILE._serialized_end=477
-  _CLOUDFILE_SOURCE._serialized_start=379
-  _CLOUDFILE_SOURCE._serialized_end=477
-  _BASIC._serialized_start=480
-  _BASIC._serialized_end=1024
-  _BASIC_QUEUETYPE._serialized_start=988
-  _BASIC_QUEUETYPE._serialized_end=1024
-  _ORIGIN._serialized_start=1027
-  _ORIGIN._serialized_end=1412
-  _ORIGIN_METADATAENTRY._serialized_start=1324
-  _ORIGIN_METADATAENTRY._serialized_end=1371
-  _ORIGIN_SOURCE._serialized_start=1373
-  _ORIGIN_SOURCE._serialized_end=1412
-  _RELATIONS._serialized_start=1414
-  _RELATIONS._serialized_end=1461
-  _MESSAGECONTENT._serialized_start=1464
-  _MESSAGECONTENT._serialized_end=1641
-  _MESSAGECONTENT_FORMAT._serialized_start=1589
-  _MESSAGECONTENT_FORMAT._serialized_end=1641
-  _MESSAGE._serialized_start=1644
-  _MESSAGE._serialized_end=1784
-  _CONVERSATION._serialized_start=1786
-  _CONVERSATION._serialized_end=1838
-  _FIELDCONVERSATION._serialized_start=1840
-  _FIELDCONVERSATION._serialized_end=1903
-  _NESTEDPOSITION._serialized_start=1905
-  _NESTEDPOSITION._serialized_end=1963
-  _NESTEDLISTPOSITION._serialized_start=1965
-  _NESTEDLISTPOSITION._serialized_end=2031
-  _FILEEXTRACTEDDATA._serialized_start=2034
-  _FILEEXTRACTEDDATA._serialized_end=3115
-  _FILEEXTRACTEDDATA_METADATAENTRY._serialized_start=1324
-  _FILEEXTRACTEDDATA_METADATAENTRY._serialized_end=1371
-  _FILEEXTRACTEDDATA_NESTEDENTRY._serialized_start=2741
-  _FILEEXTRACTEDDATA_NESTEDENTRY._serialized_end=2786
-  _FILEEXTRACTEDDATA_FILEGENERATEDENTRY._serialized_start=2788
-  _FILEEXTRACTEDDATA_FILEGENERATEDENTRY._serialized_end=2862
-  _FILEEXTRACTEDDATA_FILEROWSPREVIEWSENTRY._serialized_start=2864
-  _FILEEXTRACTEDDATA_FILEROWSPREVIEWSENTRY._serialized_end=2943
-  _FILEEXTRACTEDDATA_NESTEDPOSITIONENTRY._serialized_start=2945
-  _FILEEXTRACTEDDATA_NESTEDPOSITIONENTRY._serialized_end=3025
-  _FILEEXTRACTEDDATA_NESTEDLISTPOSITIONENTRY._serialized_start=3027
-  _FILEEXTRACTEDDATA_NESTEDLISTPOSITIONENTRY._serialized_end=3115
-  _LINKEXTRACTEDDATA._serialized_start=3118
-  _LINKEXTRACTEDDATA._serialized_end=3520
-  _LINKEXTRACTEDDATA_METADATAENTRY._serialized_start=1324
-  _LINKEXTRACTEDDATA_METADATAENTRY._serialized_end=1371
-  _EXTRACTEDTEXTWRAPPER._serialized_start=3523
-  _EXTRACTEDTEXTWRAPPER._serialized_end=3672
-  _EXTRACTEDVECTORSWRAPPER._serialized_start=3675
-  _EXTRACTEDVECTORSWRAPPER._serialized_end=3829
-  _USERVECTORSWRAPPER._serialized_start=3832
-  _USERVECTORSWRAPPER._serialized_end=4085
-  _USERVECTORSWRAPPER_VECTORSTODELETEENTRY._serialized_start=4007
-  _USERVECTORSWRAPPER_VECTORSTODELETEENTRY._serialized_end=4085
-  _SENTENCE._serialized_start=4087
-  _SENTENCE._serialized_end=4138
-  _PARAGRAPH._serialized_start=4141
-  _PARAGRAPH._serialized_end=4488
-  _PARAGRAPH_TYPEPARAGRAPH._serialized_start=4395
-  _PARAGRAPH_TYPEPARAGRAPH._serialized_end=4488
-  _POSITION._serialized_start=4490
-  _POSITION._serialized_end=4528
-  _POSITIONS._serialized_start=4530
-  _POSITIONS._serialized_end=4596
-  _FIELDMETADATA._serialized_start=4599
-  _FIELDMETADATA._serialized_end=5268
-  _FIELDMETADATA_NERENTRY._serialized_start=5154
-  _FIELDMETADATA_NERENTRY._serialized_end=5196
-  _FIELDMETADATA_POSITIONSENTRY._serialized_start=5198
-  _FIELDMETADATA_POSITIONSENTRY._serialized_end=5268
-  _FIELDCOMPUTEDMETADATA._serialized_start=5271
-  _FIELDCOMPUTEDMETADATA._serialized_end=5519
-  _FIELDCOMPUTEDMETADATA_SPLITMETADATAENTRY._serialized_start=5441
-  _FIELDCOMPUTEDMETADATA_SPLITMETADATAENTRY._serialized_end=5519
-  _FIELDCOMPUTEDMETADATAWRAPPER._serialized_start=5521
-  _FIELDCOMPUTEDMETADATAWRAPPER._serialized_end=5638
-  _METADATA._serialized_start=5641
-  _METADATA._serialized_end=5925
-  _METADATA_METADATAENTRY._serialized_start=1324
-  _METADATA_METADATAENTRY._serialized_end=1371
-  _METADATA_STATUS._serialized_start=5852
-  _METADATA_STATUS._serialized_end=5925
-  _FIELDTEXT._serialized_start=5928
-  _FIELDTEXT._serialized_end=6065
-  _FIELDTEXT_FORMAT._serialized_start=6013
-  _FIELDTEXT_FORMAT._serialized_end=6065
-  _BLOCK._serialized_start=6068
-  _BLOCK._serialized_end=6352
-  _BLOCK_TYPEBLOCK._serialized_start=6237
-  _BLOCK_TYPEBLOCK._serialized_end=6352
-  _LAYOUTCONTENT._serialized_start=6355
-  _LAYOUTCONTENT._serialized_end=6513
-  _LAYOUTCONTENT_BLOCKSENTRY._serialized_start=6450
-  _LAYOUTCONTENT_BLOCKSENTRY._serialized_end=6513
-  _FIELDLAYOUT._serialized_start=6515
-  _FIELDLAYOUT._serialized_end=6639
-  _FIELDLAYOUT_FORMAT._serialized_start=6617
-  _FIELDLAYOUT_FORMAT._serialized_end=6639
-  _CLASSIFICATION._serialized_start=6641
-  _CLASSIFICATION._serialized_end=6732
-  _USERMETADATA._serialized_start=6734
-  _USERMETADATA._serialized_end=6836
-  _FIELDCLASSIFICATIONS._serialized_start=6838
-  _FIELDCLASSIFICATIONS._serialized_end=6947
-  _COMPUTEDMETADATA._serialized_start=6949
-  _COMPUTEDMETADATA._serialized_end=7031
-  _TOKENSPLIT._serialized_start=7033
-  _TOKENSPLIT._serialized_end=7145
-  _PARAGRAPHANNOTATION._serialized_start=7147
-  _PARAGRAPHANNOTATION._serialized_end=7233
-  _USERFIELDMETADATA._serialized_start=7236
-  _USERFIELDMETADATA._serialized_end=7380
-  _FIELDLINK._serialized_start=7383
-  _FIELDLINK._serialized_end=7783
-  _FIELDLINK_HEADERSENTRY._serialized_start=7636
-  _FIELDLINK_HEADERSENTRY._serialized_end=7682
-  _FIELDLINK_COOKIESENTRY._serialized_start=7684
-  _FIELDLINK_COOKIESENTRY._serialized_end=7730
-  _FIELDLINK_LOCALSTORAGEENTRY._serialized_start=7732
-  _FIELDLINK_LOCALSTORAGEENTRY._serialized_end=7783
-  _KEYWORD._serialized_start=7785
-  _KEYWORD._serialized_end=7809
-  _FIELDKEYWORDSET._serialized_start=7811
-  _FIELDKEYWORDSET._serialized_end=7866
-  _FIELDDATETIME._serialized_start=7868
-  _FIELDDATETIME._serialized_end=7926
-  _FIELDFILE._serialized_start=7929
-  _FIELDFILE._serialized_end=8268
-  _FIELDFILE_HEADERSENTRY._serialized_start=7636
-  _FIELDFILE_HEADERSENTRY._serialized_end=7682
-  _FIELDFILE_COOKIESENTRY._serialized_start=7684
-  _FIELDFILE_COOKIESENTRY._serialized_end=7730
-  _ENTITY._serialized_start=8270
-  _ENTITY._serialized_end=8321
-  _FIELDLARGEMETADATA._serialized_start=8324
-  _FIELDLARGEMETADATA._serialized_end=8487
-  _FIELDLARGEMETADATA_TOKENSENTRY._serialized_start=8442
-  _FIELDLARGEMETADATA_TOKENSENTRY._serialized_end=8487
-  _LARGECOMPUTEDMETADATA._serialized_start=8490
-  _LARGECOMPUTEDMETADATA._serialized_end=8748
-  _LARGECOMPUTEDMETADATA_SPLITMETADATAENTRY._serialized_start=8665
-  _LARGECOMPUTEDMETADATA_SPLITMETADATAENTRY._serialized_end=8748
-  _LARGECOMPUTEDMETADATAWRAPPER._serialized_start=8751
-  _LARGECOMPUTEDMETADATAWRAPPER._serialized_end=8920
-  _PAGEPOSITIONS._serialized_start=8922
-  _PAGEPOSITIONS._serialized_end=8965
-  _FILEPAGES._serialized_start=8967
-  _FILEPAGES._serialized_end=9060
-  _ROWSPREVIEW._serialized_start=9063
-  _ROWSPREVIEW._serialized_end=9283
-  _ROWSPREVIEW_SHEET._serialized_start=9130
-  _ROWSPREVIEW_SHEET._serialized_end=9206
-  _ROWSPREVIEW_SHEET_ROW._serialized_start=9187
-  _ROWSPREVIEW_SHEET_ROW._serialized_end=9206
-  _ROWSPREVIEW_SHEETSENTRY._serialized_start=9208
-  _ROWSPREVIEW_SHEETSENTRY._serialized_end=9283
-  _FIELDID._serialized_start=9285
-  _FIELDID._serialized_end=9351
+  _globals['_ORIGIN_METADATAENTRY']._options = None
+  _globals['_ORIGIN_METADATAENTRY']._serialized_options = b'8\001'
+  _globals['_FILEEXTRACTEDDATA_METADATAENTRY']._options = None
+  _globals['_FILEEXTRACTEDDATA_METADATAENTRY']._serialized_options = b'8\001'
+  _globals['_FILEEXTRACTEDDATA_NESTEDENTRY']._options = None
+  _globals['_FILEEXTRACTEDDATA_NESTEDENTRY']._serialized_options = b'8\001'
+  _globals['_FILEEXTRACTEDDATA_FILEGENERATEDENTRY']._options = None
+  _globals['_FILEEXTRACTEDDATA_FILEGENERATEDENTRY']._serialized_options = b'8\001'
+  _globals['_FILEEXTRACTEDDATA_FILEROWSPREVIEWSENTRY']._options = None
+  _globals['_FILEEXTRACTEDDATA_FILEROWSPREVIEWSENTRY']._serialized_options = b'8\001'
+  _globals['_FILEEXTRACTEDDATA_NESTEDPOSITIONENTRY']._options = None
+  _globals['_FILEEXTRACTEDDATA_NESTEDPOSITIONENTRY']._serialized_options = b'8\001'
+  _globals['_FILEEXTRACTEDDATA_NESTEDLISTPOSITIONENTRY']._options = None
+  _globals['_FILEEXTRACTEDDATA_NESTEDLISTPOSITIONENTRY']._serialized_options = b'8\001'
+  _globals['_FILEEXTRACTEDDATA'].fields_by_name['nested_position']._options = None
+  _globals['_FILEEXTRACTEDDATA'].fields_by_name['nested_position']._serialized_options = b'\030\001'
+  _globals['_LINKEXTRACTEDDATA_METADATAENTRY']._options = None
+  _globals['_LINKEXTRACTEDDATA_METADATAENTRY']._serialized_options = b'8\001'
+  _globals['_USERVECTORSWRAPPER_VECTORSTODELETEENTRY']._options = None
+  _globals['_USERVECTORSWRAPPER_VECTORSTODELETEENTRY']._serialized_options = b'8\001'
+  _globals['_FIELDMETADATA_NERENTRY']._options = None
+  _globals['_FIELDMETADATA_NERENTRY']._serialized_options = b'8\001'
+  _globals['_FIELDMETADATA_POSITIONSENTRY']._options = None
+  _globals['_FIELDMETADATA_POSITIONSENTRY']._serialized_options = b'8\001'
+  _globals['_FIELDCOMPUTEDMETADATA_SPLITMETADATAENTRY']._options = None
+  _globals['_FIELDCOMPUTEDMETADATA_SPLITMETADATAENTRY']._serialized_options = b'8\001'
+  _globals['_METADATA_METADATAENTRY']._options = None
+  _globals['_METADATA_METADATAENTRY']._serialized_options = b'8\001'
+  _globals['_LAYOUTCONTENT_BLOCKSENTRY']._options = None
+  _globals['_LAYOUTCONTENT_BLOCKSENTRY']._serialized_options = b'8\001'
+  _globals['_FIELDLINK_HEADERSENTRY']._options = None
+  _globals['_FIELDLINK_HEADERSENTRY']._serialized_options = b'8\001'
+  _globals['_FIELDLINK_COOKIESENTRY']._options = None
+  _globals['_FIELDLINK_COOKIESENTRY']._serialized_options = b'8\001'
+  _globals['_FIELDLINK_LOCALSTORAGEENTRY']._options = None
+  _globals['_FIELDLINK_LOCALSTORAGEENTRY']._serialized_options = b'8\001'
+  _globals['_FIELDFILE_HEADERSENTRY']._options = None
+  _globals['_FIELDFILE_HEADERSENTRY']._serialized_options = b'8\001'
+  _globals['_FIELDLARGEMETADATA_TOKENSENTRY']._options = None
+  _globals['_FIELDLARGEMETADATA_TOKENSENTRY']._serialized_options = b'8\001'
+  _globals['_LARGECOMPUTEDMETADATA_SPLITMETADATAENTRY']._options = None
+  _globals['_LARGECOMPUTEDMETADATA_SPLITMETADATAENTRY']._serialized_options = b'8\001'
+  _globals['_PAGESTRUCTURETOKEN'].fields_by_name['__x__deprecated']._options = None
+  _globals['_PAGESTRUCTURETOKEN'].fields_by_name['__x__deprecated']._serialized_options = b'\030\001'
+  _globals['_PAGESTRUCTURETOKEN'].fields_by_name['__y__deprecated']._options = None
+  _globals['_PAGESTRUCTURETOKEN'].fields_by_name['__y__deprecated']._serialized_options = b'\030\001'
+  _globals['_PAGESTRUCTURETOKEN'].fields_by_name['__width__deprecated']._options = None
+  _globals['_PAGESTRUCTURETOKEN'].fields_by_name['__width__deprecated']._serialized_options = b'\030\001'
+  _globals['_PAGESTRUCTURETOKEN'].fields_by_name['__height__deprecated']._options = None
+  _globals['_PAGESTRUCTURETOKEN'].fields_by_name['__height__deprecated']._serialized_options = b'\030\001'
+  _globals['_ROWSPREVIEW_SHEETSENTRY']._options = None
+  _globals['_ROWSPREVIEW_SHEETSENTRY']._serialized_options = b'8\001'
+  _globals['_FIELDTYPE']._serialized_start=11167
+  _globals['_FIELDTYPE']._serialized_end=11281
+  _globals['_CLOUDFILE']._serialized_start=139
+  _globals['_CLOUDFILE']._serialized_end=507
+  _globals['_CLOUDFILE_SOURCE']._serialized_start=409
+  _globals['_CLOUDFILE_SOURCE']._serialized_end=507
+  _globals['_BASIC']._serialized_start=510
+  _globals['_BASIC']._serialized_end=1054
+  _globals['_BASIC_QUEUETYPE']._serialized_start=1018
+  _globals['_BASIC_QUEUETYPE']._serialized_end=1054
+  _globals['_ORIGIN']._serialized_start=1057
+  _globals['_ORIGIN']._serialized_end=1456
+  _globals['_ORIGIN_METADATAENTRY']._serialized_start=1368
+  _globals['_ORIGIN_METADATAENTRY']._serialized_end=1415
+  _globals['_ORIGIN_SOURCE']._serialized_start=1417
+  _globals['_ORIGIN_SOURCE']._serialized_end=1456
+  _globals['_EXTRA']._serialized_start=1458
+  _globals['_EXTRA']._serialized_end=1508
+  _globals['_RELATIONS']._serialized_start=1510
+  _globals['_RELATIONS']._serialized_end=1557
+  _globals['_MESSAGECONTENT']._serialized_start=1560
+  _globals['_MESSAGECONTENT']._serialized_end=1756
+  _globals['_MESSAGECONTENT_FORMAT']._serialized_start=1685
+  _globals['_MESSAGECONTENT_FORMAT']._serialized_end=1756
+  _globals['_MESSAGE']._serialized_start=1759
+  _globals['_MESSAGE']._serialized_end=1997
+  _globals['_MESSAGE_MESSAGETYPE']._serialized_start=1947
+  _globals['_MESSAGE_MESSAGETYPE']._serialized_end=1997
+  _globals['_CONVERSATION']._serialized_start=1999
+  _globals['_CONVERSATION']._serialized_end=2051
+  _globals['_FIELDCONVERSATION']._serialized_start=2053
+  _globals['_FIELDCONVERSATION']._serialized_end=2116
+  _globals['_NESTEDPOSITION']._serialized_start=2118
+  _globals['_NESTEDPOSITION']._serialized_end=2176
+  _globals['_NESTEDLISTPOSITION']._serialized_start=2178
+  _globals['_NESTEDLISTPOSITION']._serialized_end=2244
+  _globals['_FILEEXTRACTEDDATA']._serialized_start=2247
+  _globals['_FILEEXTRACTEDDATA']._serialized_end=3328
+  _globals['_FILEEXTRACTEDDATA_METADATAENTRY']._serialized_start=1368
+  _globals['_FILEEXTRACTEDDATA_METADATAENTRY']._serialized_end=1415
+  _globals['_FILEEXTRACTEDDATA_NESTEDENTRY']._serialized_start=2954
+  _globals['_FILEEXTRACTEDDATA_NESTEDENTRY']._serialized_end=2999
+  _globals['_FILEEXTRACTEDDATA_FILEGENERATEDENTRY']._serialized_start=3001
+  _globals['_FILEEXTRACTEDDATA_FILEGENERATEDENTRY']._serialized_end=3075
+  _globals['_FILEEXTRACTEDDATA_FILEROWSPREVIEWSENTRY']._serialized_start=3077
+  _globals['_FILEEXTRACTEDDATA_FILEROWSPREVIEWSENTRY']._serialized_end=3156
+  _globals['_FILEEXTRACTEDDATA_NESTEDPOSITIONENTRY']._serialized_start=3158
+  _globals['_FILEEXTRACTEDDATA_NESTEDPOSITIONENTRY']._serialized_end=3238
+  _globals['_FILEEXTRACTEDDATA_NESTEDLISTPOSITIONENTRY']._serialized_start=3240
+  _globals['_FILEEXTRACTEDDATA_NESTEDLISTPOSITIONENTRY']._serialized_end=3328
+  _globals['_LINKEXTRACTEDDATA']._serialized_start=3331
+  _globals['_LINKEXTRACTEDDATA']._serialized_end=3782
+  _globals['_LINKEXTRACTEDDATA_METADATAENTRY']._serialized_start=1368
+  _globals['_LINKEXTRACTEDDATA_METADATAENTRY']._serialized_end=1415
+  _globals['_EXTRACTEDTEXTWRAPPER']._serialized_start=3785
+  _globals['_EXTRACTEDTEXTWRAPPER']._serialized_end=3934
+  _globals['_EXTRACTEDVECTORSWRAPPER']._serialized_start=3937
+  _globals['_EXTRACTEDVECTORSWRAPPER']._serialized_end=4091
+  _globals['_USERVECTORSWRAPPER']._serialized_start=4094
+  _globals['_USERVECTORSWRAPPER']._serialized_end=4347
+  _globals['_USERVECTORSWRAPPER_VECTORSTODELETEENTRY']._serialized_start=4269
+  _globals['_USERVECTORSWRAPPER_VECTORSTODELETEENTRY']._serialized_end=4347
+  _globals['_SENTENCE']._serialized_start=4349
+  _globals['_SENTENCE']._serialized_end=4400
+  _globals['_PAGEINFORMATION']._serialized_start=4402
+  _globals['_PAGEINFORMATION']._serialized_end=4459
+  _globals['_REPRESENTATION']._serialized_start=4461
+  _globals['_REPRESENTATION']._serialized_end=4521
+  _globals['_PARAGRAPH']._serialized_start=4524
+  _globals['_PARAGRAPH']._serialized_end=4964
+  _globals['_PARAGRAPH_TYPEPARAGRAPH']._serialized_start=4871
+  _globals['_PARAGRAPH_TYPEPARAGRAPH']._serialized_end=4964
+  _globals['_POSITION']._serialized_start=4966
+  _globals['_POSITION']._serialized_end=5004
+  _globals['_POSITIONS']._serialized_start=5006
+  _globals['_POSITIONS']._serialized_end=5072
+  _globals['_FIELDMETADATA']._serialized_start=5075
+  _globals['_FIELDMETADATA']._serialized_end=5744
+  _globals['_FIELDMETADATA_NERENTRY']._serialized_start=5630
+  _globals['_FIELDMETADATA_NERENTRY']._serialized_end=5672
+  _globals['_FIELDMETADATA_POSITIONSENTRY']._serialized_start=5674
+  _globals['_FIELDMETADATA_POSITIONSENTRY']._serialized_end=5744
+  _globals['_QUESTION']._serialized_start=5746
+  _globals['_QUESTION']._serialized_end=5812
+  _globals['_ANSWERS']._serialized_start=5814
+  _globals['_ANSWERS']._serialized_end=5879
+  _globals['_QUESTIONANSWER']._serialized_start=5881
+  _globals['_QUESTIONANSWER']._serialized_end=5973
+  _globals['_QUESTIONANSWERS']._serialized_start=5975
+  _globals['_QUESTIONANSWERS']._serialized_end=6044
+  _globals['_FIELDQUESTIONANSWERWRAPPER']._serialized_start=6047
+  _globals['_FIELDQUESTIONANSWERWRAPPER']._serialized_end=6220
+  _globals['_FIELDCOMPUTEDMETADATA']._serialized_start=6223
+  _globals['_FIELDCOMPUTEDMETADATA']._serialized_end=6471
+  _globals['_FIELDCOMPUTEDMETADATA_SPLITMETADATAENTRY']._serialized_start=6393
+  _globals['_FIELDCOMPUTEDMETADATA_SPLITMETADATAENTRY']._serialized_end=6471
+  _globals['_FIELDCOMPUTEDMETADATAWRAPPER']._serialized_start=6473
+  _globals['_FIELDCOMPUTEDMETADATAWRAPPER']._serialized_end=6590
+  _globals['_METADATA']._serialized_start=6593
+  _globals['_METADATA']._serialized_end=6877
+  _globals['_METADATA_METADATAENTRY']._serialized_start=1368
+  _globals['_METADATA_METADATAENTRY']._serialized_end=1415
+  _globals['_METADATA_STATUS']._serialized_start=6804
+  _globals['_METADATA_STATUS']._serialized_end=6877
+  _globals['_FIELDTEXT']._serialized_start=6880
+  _globals['_FIELDTEXT']._serialized_end=7046
+  _globals['_FIELDTEXT_FORMAT']._serialized_start=6965
+  _globals['_FIELDTEXT_FORMAT']._serialized_end=7046
+  _globals['_BLOCK']._serialized_start=7049
+  _globals['_BLOCK']._serialized_end=7333
+  _globals['_BLOCK_TYPEBLOCK']._serialized_start=7218
+  _globals['_BLOCK_TYPEBLOCK']._serialized_end=7333
+  _globals['_LAYOUTCONTENT']._serialized_start=7336
+  _globals['_LAYOUTCONTENT']._serialized_end=7494
+  _globals['_LAYOUTCONTENT_BLOCKSENTRY']._serialized_start=7431
+  _globals['_LAYOUTCONTENT_BLOCKSENTRY']._serialized_end=7494
+  _globals['_FIELDLAYOUT']._serialized_start=7496
+  _globals['_FIELDLAYOUT']._serialized_end=7620
+  _globals['_FIELDLAYOUT_FORMAT']._serialized_start=7598
+  _globals['_FIELDLAYOUT_FORMAT']._serialized_end=7620
+  _globals['_CLASSIFICATION']._serialized_start=7622
+  _globals['_CLASSIFICATION']._serialized_end=7713
+  _globals['_USERMETADATA']._serialized_start=7715
+  _globals['_USERMETADATA']._serialized_end=7817
+  _globals['_FIELDCLASSIFICATIONS']._serialized_start=7819
+  _globals['_FIELDCLASSIFICATIONS']._serialized_end=7928
+  _globals['_COMPUTEDMETADATA']._serialized_start=7930
+  _globals['_COMPUTEDMETADATA']._serialized_end=8012
+  _globals['_TOKENSPLIT']._serialized_start=8014
+  _globals['_TOKENSPLIT']._serialized_end=8126
+  _globals['_PARAGRAPHANNOTATION']._serialized_start=8128
+  _globals['_PARAGRAPHANNOTATION']._serialized_end=8214
+  _globals['_QUESTIONANSWERANNOTATION']._serialized_start=8216
+  _globals['_QUESTIONANSWERANNOTATION']._serialized_end=8321
+  _globals['_VISUALSELECTION']._serialized_start=8323
+  _globals['_VISUALSELECTION']._serialized_end=8432
+  _globals['_PAGESELECTIONS']._serialized_start=8434
+  _globals['_PAGESELECTIONS']._serialized_end=8508
+  _globals['_USERFIELDMETADATA']._serialized_start=8511
+  _globals['_USERFIELDMETADATA']._serialized_end=8770
+  _globals['_FIELDLINK']._serialized_start=8773
+  _globals['_FIELDLINK']._serialized_end=9210
+  _globals['_FIELDLINK_HEADERSENTRY']._serialized_start=9063
+  _globals['_FIELDLINK_HEADERSENTRY']._serialized_end=9109
+  _globals['_FIELDLINK_COOKIESENTRY']._serialized_start=9111
+  _globals['_FIELDLINK_COOKIESENTRY']._serialized_end=9157
+  _globals['_FIELDLINK_LOCALSTORAGEENTRY']._serialized_start=9159
+  _globals['_FIELDLINK_LOCALSTORAGEENTRY']._serialized_end=9210
+  _globals['_KEYWORD']._serialized_start=9212
+  _globals['_KEYWORD']._serialized_end=9236
+  _globals['_FIELDKEYWORDSET']._serialized_start=9238
+  _globals['_FIELDKEYWORDSET']._serialized_end=9293
+  _globals['_FIELDDATETIME']._serialized_start=9295
+  _globals['_FIELDDATETIME']._serialized_end=9353
+  _globals['_FIELDFILE']._serialized_start=9356
+  _globals['_FIELDFILE']._serialized_end=9595
+  _globals['_FIELDFILE_HEADERSENTRY']._serialized_start=9063
+  _globals['_FIELDFILE_HEADERSENTRY']._serialized_end=9109
+  _globals['_ENTITY']._serialized_start=9597
+  _globals['_ENTITY']._serialized_end=9648
+  _globals['_FIELDLARGEMETADATA']._serialized_start=9651
+  _globals['_FIELDLARGEMETADATA']._serialized_end=9814
+  _globals['_FIELDLARGEMETADATA_TOKENSENTRY']._serialized_start=9769
+  _globals['_FIELDLARGEMETADATA_TOKENSENTRY']._serialized_end=9814
+  _globals['_LARGECOMPUTEDMETADATA']._serialized_start=9817
+  _globals['_LARGECOMPUTEDMETADATA']._serialized_end=10075
+  _globals['_LARGECOMPUTEDMETADATA_SPLITMETADATAENTRY']._serialized_start=9992
+  _globals['_LARGECOMPUTEDMETADATA_SPLITMETADATAENTRY']._serialized_end=10075
+  _globals['_LARGECOMPUTEDMETADATAWRAPPER']._serialized_start=10078
+  _globals['_LARGECOMPUTEDMETADATAWRAPPER']._serialized_end=10247
+  _globals['_PAGEPOSITIONS']._serialized_start=10249
+  _globals['_PAGEPOSITIONS']._serialized_end=10292
+  _globals['_PAGESTRUCTUREPAGE']._serialized_start=10294
+  _globals['_PAGESTRUCTUREPAGE']._serialized_end=10344
+  _globals['_PAGESTRUCTURETOKEN']._serialized_start=10347
+  _globals['_PAGESTRUCTURETOKEN']._serialized_end=10573
+  _globals['_PAGESTRUCTURE']._serialized_start=10575
+  _globals['_PAGESTRUCTURE']._serialized_end=10681
+  _globals['_FILEPAGES']._serialized_start=10684
+  _globals['_FILEPAGES']._serialized_end=10823
+  _globals['_ROWSPREVIEW']._serialized_start=10826
+  _globals['_ROWSPREVIEW']._serialized_end=11046
+  _globals['_ROWSPREVIEW_SHEET']._serialized_start=10893
+  _globals['_ROWSPREVIEW_SHEET']._serialized_end=10969
+  _globals['_ROWSPREVIEW_SHEET_ROW']._serialized_start=10950
+  _globals['_ROWSPREVIEW_SHEET_ROW']._serialized_end=10969
+  _globals['_ROWSPREVIEW_SHEETSENTRY']._serialized_start=10971
+  _globals['_ROWSPREVIEW_SHEETSENTRY']._serialized_end=11046
+  _globals['_FIELDID']._serialized_start=11048
+  _globals['_FIELDID']._serialized_end=11114
+  _globals['_ALLFIELDIDS']._serialized_start=11116
+  _globals['_ALLFIELDIDS']._serialized_end=11165
 # @@protoc_insertion_point(module_scope)
```

## nucliadb_protos/resources_pb2.pyi

```diff
@@ -4,32 +4,35 @@
 """
 import builtins
 import collections.abc
 import google.protobuf.descriptor
 import google.protobuf.internal.containers
 import google.protobuf.internal.enum_type_wrapper
 import google.protobuf.message
+import google.protobuf.struct_pb2
 import google.protobuf.timestamp_pb2
 import nucliadb_protos.utils_pb2
 import sys
 import typing
 
 if sys.version_info >= (3, 10):
     import typing as typing_extensions
 else:
     import typing_extensions
 from nucliadb_protos.utils_pb2 import (
     COSINE as COSINE,
     DOT as DOT,
+    EXPERIMENTAL as EXPERIMENTAL,
     ExtractedText as ExtractedText,
-    JoinGraph as JoinGraph,
-    JoinGraphEdge as JoinGraphEdge,
     Relation as Relation,
     RelationMetadata as RelationMetadata,
     RelationNode as RelationNode,
+    ReleaseChannel as ReleaseChannel,
+    STABLE as STABLE,
+    Security as Security,
     UserVector as UserVector,
     UserVectorSet as UserVectorSet,
     UserVectors as UserVectors,
     UserVectorsList as UserVectorsList,
     Vector as Vector,
     VectorObject as VectorObject,
     VectorSimilarity as VectorSimilarity,
@@ -71,15 +74,15 @@
 class CloudFile(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _Source:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _SourceEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[CloudFile._Source.ValueType], builtins.type):  # noqa: F821
+    class _SourceEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[CloudFile._Source.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         FLAPS: CloudFile._Source.ValueType  # 0
         GCS: CloudFile._Source.ValueType  # 1
         S3: CloudFile._Source.ValueType  # 2
         LOCAL: CloudFile._Source.ValueType  # 3
         EXTERNAL: CloudFile._Source.ValueType  # 4
         EMPTY: CloudFile._Source.ValueType  # 5
@@ -149,15 +152,15 @@
 class Basic(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _QueueType:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _QueueTypeEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Basic._QueueType.ValueType], builtins.type):  # noqa: F821
+    class _QueueTypeEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Basic._QueueType.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         PRIVATE: Basic._QueueType.ValueType  # 0
         SHARED: Basic._QueueType.ValueType  # 1
 
     class QueueType(_QueueType, metaclass=_QueueTypeEnumTypeWrapper): ...
     PRIVATE: Basic.QueueType.ValueType  # 0
     SHARED: Basic.QueueType.ValueType  # 1
@@ -240,15 +243,15 @@
 
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _Source:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _SourceEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Origin._Source.ValueType], builtins.type):  # noqa: F821
+    class _SourceEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Origin._Source.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         WEB: Origin._Source.ValueType  # 0
         DESKTOP: Origin._Source.ValueType  # 1
         API: Origin._Source.ValueType  # 2
 
     class Source(_Source, metaclass=_SourceEnumTypeWrapper): ...
     WEB: Origin.Source.ValueType  # 0
@@ -277,14 +280,15 @@
     CREATED_FIELD_NUMBER: builtins.int
     MODIFIED_FIELD_NUMBER: builtins.int
     METADATA_FIELD_NUMBER: builtins.int
     TAGS_FIELD_NUMBER: builtins.int
     COLABORATORS_FIELD_NUMBER: builtins.int
     FILENAME_FIELD_NUMBER: builtins.int
     RELATED_FIELD_NUMBER: builtins.int
+    PATH_FIELD_NUMBER: builtins.int
     source: global___Origin.Source.ValueType
     source_id: builtins.str
     url: builtins.str
     @property
     def created(self) -> google.protobuf.timestamp_pb2.Timestamp: ...
     @property
     def modified(self) -> google.protobuf.timestamp_pb2.Timestamp: ...
@@ -293,34 +297,53 @@
     @property
     def tags(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
     @property
     def colaborators(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
     filename: builtins.str
     @property
     def related(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
+    path: builtins.str
     def __init__(
         self,
         *,
         source: global___Origin.Source.ValueType = ...,
         source_id: builtins.str = ...,
         url: builtins.str = ...,
         created: google.protobuf.timestamp_pb2.Timestamp | None = ...,
         modified: google.protobuf.timestamp_pb2.Timestamp | None = ...,
         metadata: collections.abc.Mapping[builtins.str, builtins.str] | None = ...,
         tags: collections.abc.Iterable[builtins.str] | None = ...,
         colaborators: collections.abc.Iterable[builtins.str] | None = ...,
         filename: builtins.str = ...,
         related: collections.abc.Iterable[builtins.str] | None = ...,
+        path: builtins.str = ...,
     ) -> None: ...
     def HasField(self, field_name: typing_extensions.Literal["created", b"created", "modified", b"modified"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["colaborators", b"colaborators", "created", b"created", "filename", b"filename", "metadata", b"metadata", "modified", b"modified", "related", b"related", "source", b"source", "source_id", b"source_id", "tags", b"tags", "url", b"url"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["colaborators", b"colaborators", "created", b"created", "filename", b"filename", "metadata", b"metadata", "modified", b"modified", "path", b"path", "related", b"related", "source", b"source", "source_id", b"source_id", "tags", b"tags", "url", b"url"]) -> None: ...
 
 global___Origin = Origin
 
 @typing_extensions.final
+class Extra(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    METADATA_FIELD_NUMBER: builtins.int
+    @property
+    def metadata(self) -> google.protobuf.struct_pb2.Struct: ...
+    def __init__(
+        self,
+        *,
+        metadata: google.protobuf.struct_pb2.Struct | None = ...,
+    ) -> None: ...
+    def HasField(self, field_name: typing_extensions.Literal["metadata", b"metadata"]) -> builtins.bool: ...
+    def ClearField(self, field_name: typing_extensions.Literal["metadata", b"metadata"]) -> None: ...
+
+global___Extra = Extra
+
+@typing_extensions.final
 class Relations(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     RELATIONS_FIELD_NUMBER: builtins.int
     @property
     def relations(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[nucliadb_protos.utils_pb2.Relation]: ...
     def __init__(
@@ -336,26 +359,28 @@
 class MessageContent(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _Format:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _FormatEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[MessageContent._Format.ValueType], builtins.type):  # noqa: F821
+    class _FormatEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[MessageContent._Format.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         PLAIN: MessageContent._Format.ValueType  # 0
         HTML: MessageContent._Format.ValueType  # 1
         MARKDOWN: MessageContent._Format.ValueType  # 2
         RST: MessageContent._Format.ValueType  # 3
+        KEEP_MARKDOWN: MessageContent._Format.ValueType  # 4
 
     class Format(_Format, metaclass=_FormatEnumTypeWrapper): ...
     PLAIN: MessageContent.Format.ValueType  # 0
     HTML: MessageContent.Format.ValueType  # 1
     MARKDOWN: MessageContent.Format.ValueType  # 2
     RST: MessageContent.Format.ValueType  # 3
+    KEEP_MARKDOWN: MessageContent.Format.ValueType  # 4
 
     TEXT_FIELD_NUMBER: builtins.int
     FORMAT_FIELD_NUMBER: builtins.int
     ATTACHMENTS_FIELD_NUMBER: builtins.int
     text: builtins.str
     format: global___MessageContent.Format.ValueType
     @property
@@ -371,38 +396,56 @@
 
 global___MessageContent = MessageContent
 
 @typing_extensions.final
 class Message(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
+    class _MessageType:
+        ValueType = typing.NewType("ValueType", builtins.int)
+        V: typing_extensions.TypeAlias = ValueType
+
+    class _MessageTypeEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Message._MessageType.ValueType], builtins.type):
+        DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
+        UNSET: Message._MessageType.ValueType  # 0
+        QUESTION: Message._MessageType.ValueType  # 1
+        ANSWER: Message._MessageType.ValueType  # 2
+
+    class MessageType(_MessageType, metaclass=_MessageTypeEnumTypeWrapper): ...
+    UNSET: Message.MessageType.ValueType  # 0
+    QUESTION: Message.MessageType.ValueType  # 1
+    ANSWER: Message.MessageType.ValueType  # 2
+
     TIMESTAMP_FIELD_NUMBER: builtins.int
     WHO_FIELD_NUMBER: builtins.int
     TO_FIELD_NUMBER: builtins.int
     CONTENT_FIELD_NUMBER: builtins.int
     IDENT_FIELD_NUMBER: builtins.int
+    TYPE_FIELD_NUMBER: builtins.int
     @property
     def timestamp(self) -> google.protobuf.timestamp_pb2.Timestamp: ...
     who: builtins.str
     @property
     def to(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
     @property
     def content(self) -> global___MessageContent: ...
     ident: builtins.str
+    type: global___Message.MessageType.ValueType
     def __init__(
         self,
         *,
         timestamp: google.protobuf.timestamp_pb2.Timestamp | None = ...,
         who: builtins.str = ...,
         to: collections.abc.Iterable[builtins.str] | None = ...,
         content: global___MessageContent | None = ...,
         ident: builtins.str = ...,
+        type: global___Message.MessageType.ValueType = ...,
     ) -> None: ...
     def HasField(self, field_name: typing_extensions.Literal["content", b"content", "timestamp", b"timestamp"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["content", b"content", "ident", b"ident", "timestamp", b"timestamp", "to", b"to", "who", b"who"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["content", b"content", "ident", b"ident", "timestamp", b"timestamp", "to", b"to", "type", b"type", "who", b"who"]) -> None: ...
 
 global___Message = Message
 
 @typing_extensions.final
 class Conversation(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
@@ -422,16 +465,19 @@
 class FieldConversation(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     PAGES_FIELD_NUMBER: builtins.int
     SIZE_FIELD_NUMBER: builtins.int
     TOTAL_FIELD_NUMBER: builtins.int
     pages: builtins.int
+    """Total number of pages"""
     size: builtins.int
+    """Max page size"""
     total: builtins.int
+    """Total number of messages"""
     def __init__(
         self,
         *,
         pages: builtins.int = ...,
         size: builtins.int = ...,
         total: builtins.int = ...,
     ) -> None: ...
@@ -668,14 +714,15 @@
     LINK_THUMBNAIL_FIELD_NUMBER: builtins.int
     LINK_PREVIEW_FIELD_NUMBER: builtins.int
     FIELD_FIELD_NUMBER: builtins.int
     LINK_IMAGE_FIELD_NUMBER: builtins.int
     DESCRIPTION_FIELD_NUMBER: builtins.int
     TYPE_FIELD_NUMBER: builtins.int
     EMBED_FIELD_NUMBER: builtins.int
+    PDF_STRUCTURE_FIELD_NUMBER: builtins.int
     @property
     def date(self) -> google.protobuf.timestamp_pb2.Timestamp: ...
     language: builtins.str
     title: builtins.str
     @property
     def metadata(self) -> google.protobuf.internal.containers.ScalarMap[builtins.str, builtins.str]: ...
     @property
@@ -684,31 +731,34 @@
     def link_preview(self) -> global___CloudFile: ...
     field: builtins.str
     @property
     def link_image(self) -> global___CloudFile: ...
     description: builtins.str
     type: builtins.str
     embed: builtins.str
+    @property
+    def pdf_structure(self) -> global___PageStructure: ...
     def __init__(
         self,
         *,
         date: google.protobuf.timestamp_pb2.Timestamp | None = ...,
         language: builtins.str = ...,
         title: builtins.str = ...,
         metadata: collections.abc.Mapping[builtins.str, builtins.str] | None = ...,
         link_thumbnail: global___CloudFile | None = ...,
         link_preview: global___CloudFile | None = ...,
         field: builtins.str = ...,
         link_image: global___CloudFile | None = ...,
         description: builtins.str = ...,
         type: builtins.str = ...,
         embed: builtins.str = ...,
+        pdf_structure: global___PageStructure | None = ...,
     ) -> None: ...
-    def HasField(self, field_name: typing_extensions.Literal["date", b"date", "link_image", b"link_image", "link_preview", b"link_preview", "link_thumbnail", b"link_thumbnail"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["date", b"date", "description", b"description", "embed", b"embed", "field", b"field", "language", b"language", "link_image", b"link_image", "link_preview", b"link_preview", "link_thumbnail", b"link_thumbnail", "metadata", b"metadata", "title", b"title", "type", b"type"]) -> None: ...
+    def HasField(self, field_name: typing_extensions.Literal["date", b"date", "link_image", b"link_image", "link_preview", b"link_preview", "link_thumbnail", b"link_thumbnail", "pdf_structure", b"pdf_structure"]) -> builtins.bool: ...
+    def ClearField(self, field_name: typing_extensions.Literal["date", b"date", "description", b"description", "embed", b"embed", "field", b"field", "language", b"language", "link_image", b"link_image", "link_preview", b"link_preview", "link_thumbnail", b"link_thumbnail", "metadata", b"metadata", "pdf_structure", b"pdf_structure", "title", b"title", "type", b"type"]) -> None: ...
 
 global___LinkExtractedData = LinkExtractedData
 
 @typing_extensions.final
 class ExtractedTextWrapper(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
@@ -822,22 +872,58 @@
         key: builtins.str = ...,
     ) -> None: ...
     def ClearField(self, field_name: typing_extensions.Literal["end", b"end", "key", b"key", "start", b"start"]) -> None: ...
 
 global___Sentence = Sentence
 
 @typing_extensions.final
+class PageInformation(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    PAGE_FIELD_NUMBER: builtins.int
+    PAGE_WITH_VISUAL_FIELD_NUMBER: builtins.int
+    page: builtins.int
+    page_with_visual: builtins.bool
+    def __init__(
+        self,
+        *,
+        page: builtins.int = ...,
+        page_with_visual: builtins.bool = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["page", b"page", "page_with_visual", b"page_with_visual"]) -> None: ...
+
+global___PageInformation = PageInformation
+
+@typing_extensions.final
+class Representation(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    IS_A_TABLE_FIELD_NUMBER: builtins.int
+    REFERENCE_FILE_FIELD_NUMBER: builtins.int
+    is_a_table: builtins.bool
+    reference_file: builtins.str
+    def __init__(
+        self,
+        *,
+        is_a_table: builtins.bool = ...,
+        reference_file: builtins.str = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["is_a_table", b"is_a_table", "reference_file", b"reference_file"]) -> None: ...
+
+global___Representation = Representation
+
+@typing_extensions.final
 class Paragraph(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _TypeParagraph:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _TypeParagraphEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Paragraph._TypeParagraph.ValueType], builtins.type):  # noqa: F821
+    class _TypeParagraphEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Paragraph._TypeParagraph.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         TEXT: Paragraph._TypeParagraph.ValueType  # 0
         OCR: Paragraph._TypeParagraph.ValueType  # 1
         INCEPTION: Paragraph._TypeParagraph.ValueType  # 2
         DESCRIPTION: Paragraph._TypeParagraph.ValueType  # 3
         TRANSCRIPT: Paragraph._TypeParagraph.ValueType  # 4
         TITLE: Paragraph._TypeParagraph.ValueType  # 5
@@ -855,42 +941,51 @@
     START_SECONDS_FIELD_NUMBER: builtins.int
     END_SECONDS_FIELD_NUMBER: builtins.int
     KIND_FIELD_NUMBER: builtins.int
     CLASSIFICATIONS_FIELD_NUMBER: builtins.int
     SENTENCES_FIELD_NUMBER: builtins.int
     KEY_FIELD_NUMBER: builtins.int
     TEXT_FIELD_NUMBER: builtins.int
+    PAGE_FIELD_NUMBER: builtins.int
+    REPRESENTATION_FIELD_NUMBER: builtins.int
     start: builtins.int
     end: builtins.int
     @property
     def start_seconds(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.int]: ...
     @property
     def end_seconds(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.int]: ...
     kind: global___Paragraph.TypeParagraph.ValueType
     @property
     def classifications(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___Classification]: ...
     @property
     def sentences(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___Sentence]: ...
     key: builtins.str
     text: builtins.str
     """Optional, as a computed value"""
+    @property
+    def page(self) -> global___PageInformation: ...
+    @property
+    def representation(self) -> global___Representation: ...
     def __init__(
         self,
         *,
         start: builtins.int = ...,
         end: builtins.int = ...,
         start_seconds: collections.abc.Iterable[builtins.int] | None = ...,
         end_seconds: collections.abc.Iterable[builtins.int] | None = ...,
         kind: global___Paragraph.TypeParagraph.ValueType = ...,
         classifications: collections.abc.Iterable[global___Classification] | None = ...,
         sentences: collections.abc.Iterable[global___Sentence] | None = ...,
         key: builtins.str = ...,
         text: builtins.str = ...,
+        page: global___PageInformation | None = ...,
+        representation: global___Representation | None = ...,
     ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["classifications", b"classifications", "end", b"end", "end_seconds", b"end_seconds", "key", b"key", "kind", b"kind", "sentences", b"sentences", "start", b"start", "start_seconds", b"start_seconds", "text", b"text"]) -> None: ...
+    def HasField(self, field_name: typing_extensions.Literal["page", b"page", "representation", b"representation"]) -> builtins.bool: ...
+    def ClearField(self, field_name: typing_extensions.Literal["classifications", b"classifications", "end", b"end", "end_seconds", b"end_seconds", "key", b"key", "kind", b"kind", "page", b"page", "representation", b"representation", "sentences", b"sentences", "start", b"start", "start_seconds", b"start_seconds", "text", b"text"]) -> None: ...
 
 global___Paragraph = Paragraph
 
 @typing_extensions.final
 class Position(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
@@ -1023,14 +1118,121 @@
     ) -> None: ...
     def HasField(self, field_name: typing_extensions.Literal["last_extract", b"last_extract", "last_index", b"last_index", "last_summary", b"last_summary", "last_understanding", b"last_understanding", "thumbnail", b"thumbnail"]) -> builtins.bool: ...
     def ClearField(self, field_name: typing_extensions.Literal["classifications", b"classifications", "language", b"language", "last_extract", b"last_extract", "last_index", b"last_index", "last_summary", b"last_summary", "last_understanding", b"last_understanding", "links", b"links", "ner", b"ner", "paragraphs", b"paragraphs", "positions", b"positions", "relations", b"relations", "summary", b"summary", "thumbnail", b"thumbnail"]) -> None: ...
 
 global___FieldMetadata = FieldMetadata
 
 @typing_extensions.final
+class Question(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    TEXT_FIELD_NUMBER: builtins.int
+    LANGUAGE_FIELD_NUMBER: builtins.int
+    IDS_PARAGRAPHS_FIELD_NUMBER: builtins.int
+    text: builtins.str
+    language: builtins.str
+    @property
+    def ids_paragraphs(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
+    def __init__(
+        self,
+        *,
+        text: builtins.str = ...,
+        language: builtins.str = ...,
+        ids_paragraphs: collections.abc.Iterable[builtins.str] | None = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["ids_paragraphs", b"ids_paragraphs", "language", b"language", "text", b"text"]) -> None: ...
+
+global___Question = Question
+
+@typing_extensions.final
+class Answers(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    TEXT_FIELD_NUMBER: builtins.int
+    LANGUAGE_FIELD_NUMBER: builtins.int
+    IDS_PARAGRAPHS_FIELD_NUMBER: builtins.int
+    text: builtins.str
+    language: builtins.str
+    @property
+    def ids_paragraphs(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
+    def __init__(
+        self,
+        *,
+        text: builtins.str = ...,
+        language: builtins.str = ...,
+        ids_paragraphs: collections.abc.Iterable[builtins.str] | None = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["ids_paragraphs", b"ids_paragraphs", "language", b"language", "text", b"text"]) -> None: ...
+
+global___Answers = Answers
+
+@typing_extensions.final
+class QuestionAnswer(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    QUESTION_FIELD_NUMBER: builtins.int
+    ANSWERS_FIELD_NUMBER: builtins.int
+    @property
+    def question(self) -> global___Question: ...
+    @property
+    def answers(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___Answers]: ...
+    def __init__(
+        self,
+        *,
+        question: global___Question | None = ...,
+        answers: collections.abc.Iterable[global___Answers] | None = ...,
+    ) -> None: ...
+    def HasField(self, field_name: typing_extensions.Literal["question", b"question"]) -> builtins.bool: ...
+    def ClearField(self, field_name: typing_extensions.Literal["answers", b"answers", "question", b"question"]) -> None: ...
+
+global___QuestionAnswer = QuestionAnswer
+
+@typing_extensions.final
+class QuestionAnswers(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    QUESTION_ANSWER_FIELD_NUMBER: builtins.int
+    @property
+    def question_answer(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___QuestionAnswer]: ...
+    def __init__(
+        self,
+        *,
+        question_answer: collections.abc.Iterable[global___QuestionAnswer] | None = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["question_answer", b"question_answer"]) -> None: ...
+
+global___QuestionAnswers = QuestionAnswers
+
+@typing_extensions.final
+class FieldQuestionAnswerWrapper(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    QUESTION_ANSWERS_FIELD_NUMBER: builtins.int
+    FILE_FIELD_NUMBER: builtins.int
+    FIELD_FIELD_NUMBER: builtins.int
+    @property
+    def question_answers(self) -> global___QuestionAnswers: ...
+    @property
+    def file(self) -> global___CloudFile: ...
+    @property
+    def field(self) -> global___FieldID: ...
+    def __init__(
+        self,
+        *,
+        question_answers: global___QuestionAnswers | None = ...,
+        file: global___CloudFile | None = ...,
+        field: global___FieldID | None = ...,
+    ) -> None: ...
+    def HasField(self, field_name: typing_extensions.Literal["field", b"field", "file", b"file", "file_or_data", b"file_or_data", "question_answers", b"question_answers"]) -> builtins.bool: ...
+    def ClearField(self, field_name: typing_extensions.Literal["field", b"field", "file", b"file", "file_or_data", b"file_or_data", "question_answers", b"question_answers"]) -> None: ...
+    def WhichOneof(self, oneof_group: typing_extensions.Literal["file_or_data", b"file_or_data"]) -> typing_extensions.Literal["question_answers", "file"] | None: ...
+
+global___FieldQuestionAnswerWrapper = FieldQuestionAnswerWrapper
+
+@typing_extensions.final
 class FieldComputedMetadata(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     @typing_extensions.final
     class SplitMetadataEntry(google.protobuf.message.Message):
         DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
@@ -1096,15 +1298,15 @@
 
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _Status:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Metadata._Status.ValueType], builtins.type):  # noqa: F821
+    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Metadata._Status.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         PENDING: Metadata._Status.ValueType  # 0
         PROCESSED: Metadata._Status.ValueType  # 1
         ERROR: Metadata._Status.ValueType  # 2
         BLOCKED: Metadata._Status.ValueType  # 3
         EXPIRED: Metadata._Status.ValueType  # 4
 
@@ -1160,26 +1362,32 @@
 class FieldText(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _Format:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _FormatEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[FieldText._Format.ValueType], builtins.type):  # noqa: F821
+    class _FormatEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[FieldText._Format.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         PLAIN: FieldText._Format.ValueType  # 0
         HTML: FieldText._Format.ValueType  # 1
         RST: FieldText._Format.ValueType  # 2
         MARKDOWN: FieldText._Format.ValueType  # 3
+        JSON: FieldText._Format.ValueType  # 4
+        KEEP_MARKDOWN: FieldText._Format.ValueType  # 5
+        """Markdown to be kept"""
 
     class Format(_Format, metaclass=_FormatEnumTypeWrapper): ...
     PLAIN: FieldText.Format.ValueType  # 0
     HTML: FieldText.Format.ValueType  # 1
     RST: FieldText.Format.ValueType  # 2
     MARKDOWN: FieldText.Format.ValueType  # 3
+    JSON: FieldText.Format.ValueType  # 4
+    KEEP_MARKDOWN: FieldText.Format.ValueType  # 5
+    """Markdown to be kept"""
 
     BODY_FIELD_NUMBER: builtins.int
     FORMAT_FIELD_NUMBER: builtins.int
     MD5_FIELD_NUMBER: builtins.int
     body: builtins.str
     format: global___FieldText.Format.ValueType
     md5: builtins.str
@@ -1198,15 +1406,15 @@
 class Block(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _TypeBlock:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _TypeBlockEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Block._TypeBlock.ValueType], builtins.type):  # noqa: F821
+    class _TypeBlockEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Block._TypeBlock.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         TITLE: Block._TypeBlock.ValueType  # 0
         DESCRIPTION: Block._TypeBlock.ValueType  # 1
         RICHTEXT: Block._TypeBlock.ValueType  # 2
         TEXT: Block._TypeBlock.ValueType  # 3
         ATTACHMENTS: Block._TypeBlock.ValueType  # 4
         COMMENTS: Block._TypeBlock.ValueType  # 5
@@ -1297,15 +1505,15 @@
 class FieldLayout(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _Format:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _FormatEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[FieldLayout._Format.ValueType], builtins.type):  # noqa: F821
+    class _FormatEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[FieldLayout._Format.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         NUCLIAv1: FieldLayout._Format.ValueType  # 0
 
     class Format(_Format, metaclass=_FormatEnumTypeWrapper): ...
     NUCLIAv1: FieldLayout.Format.ValueType  # 0
 
     BODY_FIELD_NUMBER: builtins.int
@@ -1452,35 +1660,114 @@
         classifications: collections.abc.Iterable[global___Classification] | None = ...,
     ) -> None: ...
     def ClearField(self, field_name: typing_extensions.Literal["classifications", b"classifications", "key", b"key"]) -> None: ...
 
 global___ParagraphAnnotation = ParagraphAnnotation
 
 @typing_extensions.final
+class QuestionAnswerAnnotation(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    QUESTION_ANSWER_FIELD_NUMBER: builtins.int
+    CANCELLED_BY_USER_FIELD_NUMBER: builtins.int
+    @property
+    def question_answer(self) -> global___QuestionAnswer: ...
+    cancelled_by_user: builtins.bool
+    def __init__(
+        self,
+        *,
+        question_answer: global___QuestionAnswer | None = ...,
+        cancelled_by_user: builtins.bool = ...,
+    ) -> None: ...
+    def HasField(self, field_name: typing_extensions.Literal["question_answer", b"question_answer"]) -> builtins.bool: ...
+    def ClearField(self, field_name: typing_extensions.Literal["cancelled_by_user", b"cancelled_by_user", "question_answer", b"question_answer"]) -> None: ...
+
+global___QuestionAnswerAnnotation = QuestionAnswerAnnotation
+
+@typing_extensions.final
+class VisualSelection(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    LABEL_FIELD_NUMBER: builtins.int
+    TOP_FIELD_NUMBER: builtins.int
+    LEFT_FIELD_NUMBER: builtins.int
+    RIGHT_FIELD_NUMBER: builtins.int
+    BOTTOM_FIELD_NUMBER: builtins.int
+    TOKEN_IDS_FIELD_NUMBER: builtins.int
+    label: builtins.str
+    top: builtins.float
+    left: builtins.float
+    right: builtins.float
+    bottom: builtins.float
+    @property
+    def token_ids(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.int]:
+        """Token IDs are the indexes in PageStructure"""
+    def __init__(
+        self,
+        *,
+        label: builtins.str = ...,
+        top: builtins.float = ...,
+        left: builtins.float = ...,
+        right: builtins.float = ...,
+        bottom: builtins.float = ...,
+        token_ids: collections.abc.Iterable[builtins.int] | None = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["bottom", b"bottom", "label", b"label", "left", b"left", "right", b"right", "token_ids", b"token_ids", "top", b"top"]) -> None: ...
+
+global___VisualSelection = VisualSelection
+
+@typing_extensions.final
+class PageSelections(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    PAGE_FIELD_NUMBER: builtins.int
+    VISUAL_FIELD_NUMBER: builtins.int
+    page: builtins.int
+    @property
+    def visual(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___VisualSelection]: ...
+    def __init__(
+        self,
+        *,
+        page: builtins.int = ...,
+        visual: collections.abc.Iterable[global___VisualSelection] | None = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["page", b"page", "visual", b"visual"]) -> None: ...
+
+global___PageSelections = PageSelections
+
+@typing_extensions.final
 class UserFieldMetadata(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     TOKEN_FIELD_NUMBER: builtins.int
     PARAGRAPHS_FIELD_NUMBER: builtins.int
+    PAGE_SELECTIONS_FIELD_NUMBER: builtins.int
+    QUESTION_ANSWERS_FIELD_NUMBER: builtins.int
     FIELD_FIELD_NUMBER: builtins.int
     @property
     def token(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___TokenSplit]: ...
     @property
     def paragraphs(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___ParagraphAnnotation]: ...
     @property
+    def page_selections(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___PageSelections]: ...
+    @property
+    def question_answers(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___QuestionAnswerAnnotation]: ...
+    @property
     def field(self) -> global___FieldID: ...
     def __init__(
         self,
         *,
         token: collections.abc.Iterable[global___TokenSplit] | None = ...,
         paragraphs: collections.abc.Iterable[global___ParagraphAnnotation] | None = ...,
+        page_selections: collections.abc.Iterable[global___PageSelections] | None = ...,
+        question_answers: collections.abc.Iterable[global___QuestionAnswerAnnotation] | None = ...,
         field: global___FieldID | None = ...,
     ) -> None: ...
     def HasField(self, field_name: typing_extensions.Literal["field", b"field"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["field", b"field", "paragraphs", b"paragraphs", "token", b"token"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["field", b"field", "page_selections", b"page_selections", "paragraphs", b"paragraphs", "question_answers", b"question_answers", "token", b"token"]) -> None: ...
 
 global___UserFieldMetadata = UserFieldMetadata
 
 @typing_extensions.final
 class FieldLink(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
@@ -1534,36 +1821,42 @@
 
     ADDED_FIELD_NUMBER: builtins.int
     HEADERS_FIELD_NUMBER: builtins.int
     COOKIES_FIELD_NUMBER: builtins.int
     URI_FIELD_NUMBER: builtins.int
     LANGUAGE_FIELD_NUMBER: builtins.int
     LOCALSTORAGE_FIELD_NUMBER: builtins.int
+    CSS_SELECTOR_FIELD_NUMBER: builtins.int
+    XPATH_FIELD_NUMBER: builtins.int
     @property
     def added(self) -> google.protobuf.timestamp_pb2.Timestamp: ...
     @property
     def headers(self) -> google.protobuf.internal.containers.ScalarMap[builtins.str, builtins.str]: ...
     @property
     def cookies(self) -> google.protobuf.internal.containers.ScalarMap[builtins.str, builtins.str]: ...
     uri: builtins.str
     language: builtins.str
     @property
     def localstorage(self) -> google.protobuf.internal.containers.ScalarMap[builtins.str, builtins.str]: ...
+    css_selector: builtins.str
+    xpath: builtins.str
     def __init__(
         self,
         *,
         added: google.protobuf.timestamp_pb2.Timestamp | None = ...,
         headers: collections.abc.Mapping[builtins.str, builtins.str] | None = ...,
         cookies: collections.abc.Mapping[builtins.str, builtins.str] | None = ...,
         uri: builtins.str = ...,
         language: builtins.str = ...,
         localstorage: collections.abc.Mapping[builtins.str, builtins.str] | None = ...,
+        css_selector: builtins.str = ...,
+        xpath: builtins.str = ...,
     ) -> None: ...
     def HasField(self, field_name: typing_extensions.Literal["added", b"added"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["added", b"added", "cookies", b"cookies", "headers", b"headers", "language", b"language", "localstorage", b"localstorage", "uri", b"uri"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["added", b"added", "cookies", b"cookies", "css_selector", b"css_selector", "headers", b"headers", "language", b"language", "localstorage", b"localstorage", "uri", b"uri", "xpath", b"xpath"]) -> None: ...
 
 global___FieldLink = FieldLink
 
 @typing_extensions.final
 class Keyword(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
@@ -1627,61 +1920,41 @@
             self,
             *,
             key: builtins.str = ...,
             value: builtins.str = ...,
         ) -> None: ...
         def ClearField(self, field_name: typing_extensions.Literal["key", b"key", "value", b"value"]) -> None: ...
 
-    @typing_extensions.final
-    class CookiesEntry(google.protobuf.message.Message):
-        DESCRIPTOR: google.protobuf.descriptor.Descriptor
-
-        KEY_FIELD_NUMBER: builtins.int
-        VALUE_FIELD_NUMBER: builtins.int
-        key: builtins.str
-        value: builtins.str
-        def __init__(
-            self,
-            *,
-            key: builtins.str = ...,
-            value: builtins.str = ...,
-        ) -> None: ...
-        def ClearField(self, field_name: typing_extensions.Literal["key", b"key", "value", b"value"]) -> None: ...
-
     ADDED_FIELD_NUMBER: builtins.int
     FILE_FIELD_NUMBER: builtins.int
     LANGUAGE_FIELD_NUMBER: builtins.int
     PASSWORD_FIELD_NUMBER: builtins.int
     URL_FIELD_NUMBER: builtins.int
     HEADERS_FIELD_NUMBER: builtins.int
-    COOKIES_FIELD_NUMBER: builtins.int
     @property
     def added(self) -> google.protobuf.timestamp_pb2.Timestamp: ...
     @property
     def file(self) -> global___CloudFile: ...
     language: builtins.str
     password: builtins.str
     url: builtins.str
     @property
     def headers(self) -> google.protobuf.internal.containers.ScalarMap[builtins.str, builtins.str]: ...
-    @property
-    def cookies(self) -> google.protobuf.internal.containers.ScalarMap[builtins.str, builtins.str]: ...
     def __init__(
         self,
         *,
         added: google.protobuf.timestamp_pb2.Timestamp | None = ...,
         file: global___CloudFile | None = ...,
         language: builtins.str = ...,
         password: builtins.str = ...,
         url: builtins.str = ...,
         headers: collections.abc.Mapping[builtins.str, builtins.str] | None = ...,
-        cookies: collections.abc.Mapping[builtins.str, builtins.str] | None = ...,
     ) -> None: ...
     def HasField(self, field_name: typing_extensions.Literal["added", b"added", "file", b"file"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["added", b"added", "cookies", b"cookies", "file", b"file", "headers", b"headers", "language", b"language", "password", b"password", "url", b"url"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["added", b"added", "file", b"file", "headers", b"headers", "language", b"language", "password", b"password", "url", b"url"]) -> None: ...
 
 global___FieldFile = FieldFile
 
 @typing_extensions.final
 class Entity(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
@@ -1822,30 +2095,115 @@
         end: builtins.int = ...,
     ) -> None: ...
     def ClearField(self, field_name: typing_extensions.Literal["end", b"end", "start", b"start"]) -> None: ...
 
 global___PagePositions = PagePositions
 
 @typing_extensions.final
+class PageStructurePage(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    WIDTH_FIELD_NUMBER: builtins.int
+    HEIGHT_FIELD_NUMBER: builtins.int
+    width: builtins.int
+    height: builtins.int
+    def __init__(
+        self,
+        *,
+        width: builtins.int = ...,
+        height: builtins.int = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["height", b"height", "width", b"width"]) -> None: ...
+
+global___PageStructurePage = PageStructurePage
+
+@typing_extensions.final
+class PageStructureToken(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    __X__DEPRECATED_FIELD_NUMBER: builtins.int
+    __Y__DEPRECATED_FIELD_NUMBER: builtins.int
+    __WIDTH__DEPRECATED_FIELD_NUMBER: builtins.int
+    __HEIGHT__DEPRECATED_FIELD_NUMBER: builtins.int
+    X_FIELD_NUMBER: builtins.int
+    Y_FIELD_NUMBER: builtins.int
+    WIDTH_FIELD_NUMBER: builtins.int
+    HEIGHT_FIELD_NUMBER: builtins.int
+    TEXT_FIELD_NUMBER: builtins.int
+    LINE_FIELD_NUMBER: builtins.int
+    __x__deprecated: builtins.int
+    __y__deprecated: builtins.int
+    __width__deprecated: builtins.int
+    __height__deprecated: builtins.int
+    x: builtins.float
+    y: builtins.float
+    width: builtins.float
+    height: builtins.float
+    text: builtins.str
+    line: builtins.float
+    def __init__(
+        self,
+        *,
+        __x__deprecated: builtins.int = ...,
+        __y__deprecated: builtins.int = ...,
+        __width__deprecated: builtins.int = ...,
+        __height__deprecated: builtins.int = ...,
+        x: builtins.float = ...,
+        y: builtins.float = ...,
+        width: builtins.float = ...,
+        height: builtins.float = ...,
+        text: builtins.str = ...,
+        line: builtins.float = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["__height__deprecated", b"__height__deprecated", "__width__deprecated", b"__width__deprecated", "__x__deprecated", b"__x__deprecated", "__y__deprecated", b"__y__deprecated", "height", b"height", "line", b"line", "text", b"text", "width", b"width", "x", b"x", "y", b"y"]) -> None: ...
+
+global___PageStructureToken = PageStructureToken
+
+@typing_extensions.final
+class PageStructure(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    PAGE_FIELD_NUMBER: builtins.int
+    TOKENS_FIELD_NUMBER: builtins.int
+    @property
+    def page(self) -> global___PageStructurePage: ...
+    @property
+    def tokens(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___PageStructureToken]: ...
+    def __init__(
+        self,
+        *,
+        page: global___PageStructurePage | None = ...,
+        tokens: collections.abc.Iterable[global___PageStructureToken] | None = ...,
+    ) -> None: ...
+    def HasField(self, field_name: typing_extensions.Literal["page", b"page"]) -> builtins.bool: ...
+    def ClearField(self, field_name: typing_extensions.Literal["page", b"page", "tokens", b"tokens"]) -> None: ...
+
+global___PageStructure = PageStructure
+
+@typing_extensions.final
 class FilePages(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     PAGES_FIELD_NUMBER: builtins.int
     POSITIONS_FIELD_NUMBER: builtins.int
+    STRUCTURES_FIELD_NUMBER: builtins.int
     @property
     def pages(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___CloudFile]: ...
     @property
     def positions(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___PagePositions]: ...
+    @property
+    def structures(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___PageStructure]: ...
     def __init__(
         self,
         *,
         pages: collections.abc.Iterable[global___CloudFile] | None = ...,
         positions: collections.abc.Iterable[global___PagePositions] | None = ...,
+        structures: collections.abc.Iterable[global___PageStructure] | None = ...,
     ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["pages", b"pages", "positions", b"positions"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["pages", b"pages", "positions", b"positions", "structures", b"structures"]) -> None: ...
 
 global___FilePages = FilePages
 
 @typing_extensions.final
 class RowsPreview(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
@@ -1920,7 +2278,27 @@
         *,
         field_type: global___FieldType.ValueType = ...,
         field: builtins.str = ...,
     ) -> None: ...
     def ClearField(self, field_name: typing_extensions.Literal["field", b"field", "field_type", b"field_type"]) -> None: ...
 
 global___FieldID = FieldID
+
+@typing_extensions.final
+class AllFieldIDs(google.protobuf.message.Message):
+    """This message is used to store a list of all field ids of a particular
+    resource. Note that title and summary fields are not included.
+    """
+
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    FIELDS_FIELD_NUMBER: builtins.int
+    @property
+    def fields(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___FieldID]: ...
+    def __init__(
+        self,
+        *,
+        fields: collections.abc.Iterable[global___FieldID] | None = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["fields", b"fields"]) -> None: ...
+
+global___AllFieldIDs = AllFieldIDs
```

## nucliadb_protos/train_pb2.py

```diff
@@ -1,15 +1,16 @@
 # -*- coding: utf-8 -*-
 # Generated by the protocol buffer compiler.  DO NOT EDIT!
 # source: nucliadb_protos/train.proto
+# Protobuf Python Version: 4.25.0
 """Generated protocol buffer code."""
-from google.protobuf.internal import builder as _builder
 from google.protobuf import descriptor as _descriptor
 from google.protobuf import descriptor_pool as _descriptor_pool
 from google.protobuf import symbol_database as _symbol_database
+from google.protobuf.internal import builder as _builder
 # @@protoc_insertion_point(imports)
 
 _sym_db = _symbol_database.Default()
 
 
 from google.protobuf import timestamp_pb2 as google_dot_protobuf_dot_timestamp__pb2
 from nucliadb_protos import knowledgebox_pb2 as nucliadb__protos_dot_knowledgebox__pb2
@@ -50,71 +51,71 @@
 
 from nucliadb_protos.knowledgebox_pb2 import *
 from nucliadb_protos.resources_pb2 import *
 from nucliadb_protos.writer_pb2 import *
 
 DESCRIPTOR = _descriptor_pool.Default().AddSerializedFile(b'\n\x1bnucliadb_protos/train.proto\x12\x05train\x1a\x1fgoogle/protobuf/timestamp.proto\x1a\"nucliadb_protos/knowledgebox.proto\x1a\x1fnucliadb_protos/resources.proto\x1a\x1cnucliadb_protos/writer.proto\"Q\n\x0f\x45nabledMetadata\x12\x0c\n\x04text\x18\x01 \x01(\x08\x12\x10\n\x08\x65ntities\x18\x02 \x01(\x08\x12\x0e\n\x06labels\x18\x03 \x01(\x08\x12\x0e\n\x06vector\x18\x04 \x01(\x08\"\x92\x01\n\x0bTrainLabels\x12+\n\x08resource\x18\x01 \x03(\x0b\x32\x19.resources.Classification\x12(\n\x05\x66ield\x18\x02 \x03(\x0b\x32\x19.resources.Classification\x12,\n\tparagraph\x18\x03 \x03(\x0b\x32\x19.resources.Classification\"&\n\x08Position\x12\r\n\x05start\x18\x01 \x01(\x03\x12\x0b\n\x03\x65nd\x18\x02 \x01(\x03\"E\n\x0f\x45ntityPositions\x12\x0e\n\x06\x65ntity\x18\x01 \x01(\t\x12\"\n\tpositions\x18\x02 \x03(\x0b\x32\x0f.train.Position\"\xcd\x02\n\rTrainMetadata\x12\x0c\n\x04text\x18\x01 \x01(\t\x12\x34\n\x08\x65ntities\x18\x02 \x03(\x0b\x32\".train.TrainMetadata.EntitiesEntry\x12\x43\n\x10\x65ntity_positions\x18\x05 \x03(\x0b\x32).train.TrainMetadata.EntityPositionsEntry\x12\"\n\x06labels\x18\x03 \x01(\x0b\x32\x12.train.TrainLabels\x12\x0e\n\x06vector\x18\x04 \x03(\x02\x1a/\n\rEntitiesEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\x1aN\n\x14\x45ntityPositionsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12%\n\x05value\x18\x02 \x01(\x0b\x32\x16.train.EntityPositions:\x02\x38\x01\":\n\x0eGetInfoRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\"}\n\x18GetLabelsetsCountRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\x1b\n\x13paragraph_labelsets\x18\x02 \x03(\t\x12\x1a\n\x12resource_labelsets\x18\x03 \x03(\t\"\x87\x01\n\x13GetResourcesRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12(\n\x08metadata\x18\x02 \x01(\x0b\x32\x16.train.EnabledMetadata\x12\x0c\n\x04size\x18\x03 \x01(\x04\x12\x0e\n\x06random\x18\x04 \x01(\x08\"\xb9\x01\n\x14GetParagraphsRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\x0c\n\x04uuid\x18\x02 \x01(\t\x12!\n\x05\x66ield\x18\x03 \x01(\x0b\x32\x12.resources.FieldID\x12(\n\x08metadata\x18\x04 \x01(\x0b\x32\x16.train.EnabledMetadata\x12\x0c\n\x04size\x18\x05 \x01(\x04\x12\x0e\n\x06random\x18\x06 \x01(\x08\"\xb8\x01\n\x13GetSentencesRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\x0c\n\x04uuid\x18\x02 \x01(\t\x12!\n\x05\x66ield\x18\x03 \x01(\x0b\x32\x12.resources.FieldID\x12(\n\x08metadata\x18\x04 \x01(\x0b\x32\x16.train.EnabledMetadata\x12\x0c\n\x04size\x18\x05 \x01(\x04\x12\x0e\n\x06random\x18\x06 \x01(\x08\"\xb5\x01\n\x10GetFieldsRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\x0c\n\x04uuid\x18\x02 \x01(\t\x12!\n\x05\x66ield\x18\x03 \x01(\x0b\x32\x12.resources.FieldID\x12(\n\x08metadata\x18\x04 \x01(\x0b\x32\x16.train.EnabledMetadata\x12\x0c\n\x04size\x18\x05 \x01(\x04\x12\x0e\n\x06random\x18\x06 \x01(\x08\"U\n\tTrainInfo\x12\x11\n\tresources\x18\x01 \x01(\x04\x12\x0e\n\x06\x66ields\x18\x02 \x01(\x04\x12\x12\n\nparagraphs\x18\x03 \x01(\x04\x12\x11\n\tsentences\x18\x04 \x01(\x04\"\x8d\x01\n\rTrainSentence\x12\x0c\n\x04uuid\x18\x01 \x01(\t\x12!\n\x05\x66ield\x18\x02 \x01(\x0b\x32\x12.resources.FieldID\x12\x11\n\tparagraph\x18\x03 \x01(\t\x12\x10\n\x08sentence\x18\x04 \x01(\t\x12&\n\x08metadata\x18\x05 \x01(\x0b\x32\x14.train.TrainMetadata\"|\n\x0eTrainParagraph\x12\x0c\n\x04uuid\x18\x01 \x01(\t\x12!\n\x05\x66ield\x18\x02 \x01(\x0b\x32\x12.resources.FieldID\x12\x11\n\tparagraph\x18\x03 \x01(\t\x12&\n\x08metadata\x18\x04 \x01(\x0b\x32\x14.train.TrainMetadata\"w\n\nTrainField\x12\x0c\n\x04uuid\x18\x01 \x01(\t\x12!\n\x05\x66ield\x18\x02 \x01(\x0b\x32\x12.resources.FieldID\x12\x10\n\x08subfield\x18\x03 \x01(\t\x12&\n\x08metadata\x18\x04 \x01(\x0b\x32\x14.train.TrainMetadata\"\xcb\x01\n\rTrainResource\x12\x0c\n\x04uuid\x18\x01 \x01(\t\x12\r\n\x05title\x18\x02 \x01(\t\x12\x0c\n\x04icon\x18\x03 \x01(\t\x12\x0c\n\x04slug\x18\x04 \x01(\t\x12+\n\x07\x63reated\x18\x05 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12,\n\x08modified\x18\x06 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12&\n\x08metadata\x18\x07 \x01(\x0b\x32\x14.train.TrainMetadata\"\xe6\x01\n\rLabelsetCount\x12\x38\n\nparagraphs\x18\x01 \x03(\x0b\x32$.train.LabelsetCount.ParagraphsEntry\x12\x36\n\tresources\x18\x02 \x03(\x0b\x32#.train.LabelsetCount.ResourcesEntry\x1a\x31\n\x0fParagraphsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\x03:\x02\x38\x01\x1a\x30\n\x0eResourcesEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\x03:\x02\x38\x01\"\x91\x01\n\x0eLabelsetsCount\x12\x37\n\tlabelsets\x18\x02 \x03(\x0b\x32$.train.LabelsetsCount.LabelsetsEntry\x1a\x46\n\x0eLabelsetsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12#\n\x05value\x18\x02 \x01(\x0b\x32\x14.train.LabelsetCount:\x02\x38\x01\x32\xb9\x04\n\x05Train\x12\x34\n\x07GetInfo\x12\x15.train.GetInfoRequest\x1a\x10.train.TrainInfo\"\x00\x12\x44\n\x0cGetSentences\x12\x1a.train.GetSentencesRequest\x1a\x14.train.TrainSentence\"\x00\x30\x01\x12G\n\rGetParagraphs\x12\x1b.train.GetParagraphsRequest\x1a\x15.train.TrainParagraph\"\x00\x30\x01\x12;\n\tGetFields\x12\x17.train.GetFieldsRequest\x1a\x11.train.TrainField\"\x00\x30\x01\x12\x44\n\x0cGetResources\x12\x1a.train.GetResourcesRequest\x1a\x14.train.TrainResource\"\x00\x30\x01\x12J\n\x0bGetOntology\x12\x1b.fdbwriter.GetLabelsRequest\x1a\x1c.fdbwriter.GetLabelsResponse\"\x00\x12N\n\x0bGetEntities\x12\x1d.fdbwriter.GetEntitiesRequest\x1a\x1e.fdbwriter.GetEntitiesResponse\"\x00\x12L\n\x10GetOntologyCount\x12\x1f.train.GetLabelsetsCountRequest\x1a\x15.train.LabelsetsCount\"\x00P\x01P\x02P\x03\x62\x06proto3')
 
-_builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, globals())
-_builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, 'nucliadb_protos.train_pb2', globals())
+_globals = globals()
+_builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, _globals)
+_builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, 'nucliadb_protos.train_pb2', _globals)
 if _descriptor._USE_C_DESCRIPTORS == False:
-
   DESCRIPTOR._options = None
-  _TRAINMETADATA_ENTITIESENTRY._options = None
-  _TRAINMETADATA_ENTITIESENTRY._serialized_options = b'8\001'
-  _TRAINMETADATA_ENTITYPOSITIONSENTRY._options = None
-  _TRAINMETADATA_ENTITYPOSITIONSENTRY._serialized_options = b'8\001'
-  _LABELSETCOUNT_PARAGRAPHSENTRY._options = None
-  _LABELSETCOUNT_PARAGRAPHSENTRY._serialized_options = b'8\001'
-  _LABELSETCOUNT_RESOURCESENTRY._options = None
-  _LABELSETCOUNT_RESOURCESENTRY._serialized_options = b'8\001'
-  _LABELSETSCOUNT_LABELSETSENTRY._options = None
-  _LABELSETSCOUNT_LABELSETSENTRY._serialized_options = b'8\001'
-  _ENABLEDMETADATA._serialized_start=170
-  _ENABLEDMETADATA._serialized_end=251
-  _TRAINLABELS._serialized_start=254
-  _TRAINLABELS._serialized_end=400
-  _POSITION._serialized_start=402
-  _POSITION._serialized_end=440
-  _ENTITYPOSITIONS._serialized_start=442
-  _ENTITYPOSITIONS._serialized_end=511
-  _TRAINMETADATA._serialized_start=514
-  _TRAINMETADATA._serialized_end=847
-  _TRAINMETADATA_ENTITIESENTRY._serialized_start=720
-  _TRAINMETADATA_ENTITIESENTRY._serialized_end=767
-  _TRAINMETADATA_ENTITYPOSITIONSENTRY._serialized_start=769
-  _TRAINMETADATA_ENTITYPOSITIONSENTRY._serialized_end=847
-  _GETINFOREQUEST._serialized_start=849
-  _GETINFOREQUEST._serialized_end=907
-  _GETLABELSETSCOUNTREQUEST._serialized_start=909
-  _GETLABELSETSCOUNTREQUEST._serialized_end=1034
-  _GETRESOURCESREQUEST._serialized_start=1037
-  _GETRESOURCESREQUEST._serialized_end=1172
-  _GETPARAGRAPHSREQUEST._serialized_start=1175
-  _GETPARAGRAPHSREQUEST._serialized_end=1360
-  _GETSENTENCESREQUEST._serialized_start=1363
-  _GETSENTENCESREQUEST._serialized_end=1547
-  _GETFIELDSREQUEST._serialized_start=1550
-  _GETFIELDSREQUEST._serialized_end=1731
-  _TRAININFO._serialized_start=1733
-  _TRAININFO._serialized_end=1818
-  _TRAINSENTENCE._serialized_start=1821
-  _TRAINSENTENCE._serialized_end=1962
-  _TRAINPARAGRAPH._serialized_start=1964
-  _TRAINPARAGRAPH._serialized_end=2088
-  _TRAINFIELD._serialized_start=2090
-  _TRAINFIELD._serialized_end=2209
-  _TRAINRESOURCE._serialized_start=2212
-  _TRAINRESOURCE._serialized_end=2415
-  _LABELSETCOUNT._serialized_start=2418
-  _LABELSETCOUNT._serialized_end=2648
-  _LABELSETCOUNT_PARAGRAPHSENTRY._serialized_start=2549
-  _LABELSETCOUNT_PARAGRAPHSENTRY._serialized_end=2598
-  _LABELSETCOUNT_RESOURCESENTRY._serialized_start=2600
-  _LABELSETCOUNT_RESOURCESENTRY._serialized_end=2648
-  _LABELSETSCOUNT._serialized_start=2651
-  _LABELSETSCOUNT._serialized_end=2796
-  _LABELSETSCOUNT_LABELSETSENTRY._serialized_start=2726
-  _LABELSETSCOUNT_LABELSETSENTRY._serialized_end=2796
-  _TRAIN._serialized_start=2799
-  _TRAIN._serialized_end=3368
+  _globals['_TRAINMETADATA_ENTITIESENTRY']._options = None
+  _globals['_TRAINMETADATA_ENTITIESENTRY']._serialized_options = b'8\001'
+  _globals['_TRAINMETADATA_ENTITYPOSITIONSENTRY']._options = None
+  _globals['_TRAINMETADATA_ENTITYPOSITIONSENTRY']._serialized_options = b'8\001'
+  _globals['_LABELSETCOUNT_PARAGRAPHSENTRY']._options = None
+  _globals['_LABELSETCOUNT_PARAGRAPHSENTRY']._serialized_options = b'8\001'
+  _globals['_LABELSETCOUNT_RESOURCESENTRY']._options = None
+  _globals['_LABELSETCOUNT_RESOURCESENTRY']._serialized_options = b'8\001'
+  _globals['_LABELSETSCOUNT_LABELSETSENTRY']._options = None
+  _globals['_LABELSETSCOUNT_LABELSETSENTRY']._serialized_options = b'8\001'
+  _globals['_ENABLEDMETADATA']._serialized_start=170
+  _globals['_ENABLEDMETADATA']._serialized_end=251
+  _globals['_TRAINLABELS']._serialized_start=254
+  _globals['_TRAINLABELS']._serialized_end=400
+  _globals['_POSITION']._serialized_start=402
+  _globals['_POSITION']._serialized_end=440
+  _globals['_ENTITYPOSITIONS']._serialized_start=442
+  _globals['_ENTITYPOSITIONS']._serialized_end=511
+  _globals['_TRAINMETADATA']._serialized_start=514
+  _globals['_TRAINMETADATA']._serialized_end=847
+  _globals['_TRAINMETADATA_ENTITIESENTRY']._serialized_start=720
+  _globals['_TRAINMETADATA_ENTITIESENTRY']._serialized_end=767
+  _globals['_TRAINMETADATA_ENTITYPOSITIONSENTRY']._serialized_start=769
+  _globals['_TRAINMETADATA_ENTITYPOSITIONSENTRY']._serialized_end=847
+  _globals['_GETINFOREQUEST']._serialized_start=849
+  _globals['_GETINFOREQUEST']._serialized_end=907
+  _globals['_GETLABELSETSCOUNTREQUEST']._serialized_start=909
+  _globals['_GETLABELSETSCOUNTREQUEST']._serialized_end=1034
+  _globals['_GETRESOURCESREQUEST']._serialized_start=1037
+  _globals['_GETRESOURCESREQUEST']._serialized_end=1172
+  _globals['_GETPARAGRAPHSREQUEST']._serialized_start=1175
+  _globals['_GETPARAGRAPHSREQUEST']._serialized_end=1360
+  _globals['_GETSENTENCESREQUEST']._serialized_start=1363
+  _globals['_GETSENTENCESREQUEST']._serialized_end=1547
+  _globals['_GETFIELDSREQUEST']._serialized_start=1550
+  _globals['_GETFIELDSREQUEST']._serialized_end=1731
+  _globals['_TRAININFO']._serialized_start=1733
+  _globals['_TRAININFO']._serialized_end=1818
+  _globals['_TRAINSENTENCE']._serialized_start=1821
+  _globals['_TRAINSENTENCE']._serialized_end=1962
+  _globals['_TRAINPARAGRAPH']._serialized_start=1964
+  _globals['_TRAINPARAGRAPH']._serialized_end=2088
+  _globals['_TRAINFIELD']._serialized_start=2090
+  _globals['_TRAINFIELD']._serialized_end=2209
+  _globals['_TRAINRESOURCE']._serialized_start=2212
+  _globals['_TRAINRESOURCE']._serialized_end=2415
+  _globals['_LABELSETCOUNT']._serialized_start=2418
+  _globals['_LABELSETCOUNT']._serialized_end=2648
+  _globals['_LABELSETCOUNT_PARAGRAPHSENTRY']._serialized_start=2549
+  _globals['_LABELSETCOUNT_PARAGRAPHSENTRY']._serialized_end=2598
+  _globals['_LABELSETCOUNT_RESOURCESENTRY']._serialized_start=2600
+  _globals['_LABELSETCOUNT_RESOURCESENTRY']._serialized_end=2648
+  _globals['_LABELSETSCOUNT']._serialized_start=2651
+  _globals['_LABELSETSCOUNT']._serialized_end=2796
+  _globals['_LABELSETSCOUNT_LABELSETSENTRY']._serialized_start=2726
+  _globals['_LABELSETSCOUNT_LABELSETSENTRY']._serialized_end=2796
+  _globals['_TRAIN']._serialized_start=2799
+  _globals['_TRAIN']._serialized_end=3368
 # @@protoc_insertion_point(module_scope)
```

## nucliadb_protos/train_pb2.pyi

```diff
@@ -14,51 +14,55 @@
 
 if sys.version_info >= (3, 8):
     import typing as typing_extensions
 else:
     import typing_extensions
 from nucliadb_protos.knowledgebox_pb2 import (
     CONFLICT as CONFLICT,
-    CleanedKnowledgeBoxResponse as CleanedKnowledgeBoxResponse,
     DeleteKnowledgeBoxResponse as DeleteKnowledgeBoxResponse,
     DeletedEntitiesGroups as DeletedEntitiesGroups,
     ERROR as ERROR,
     EntitiesGroup as EntitiesGroup,
     EntitiesGroupSummary as EntitiesGroupSummary,
+    EntitiesGroups as EntitiesGroups,
     Entity as Entity,
+    EntityGroupDuplicateIndex as EntityGroupDuplicateIndex,
     GCKnowledgeBoxResponse as GCKnowledgeBoxResponse,
-    KnowledgeBox as KnowledgeBox,
+    KBConfiguration as KBConfiguration,
     KnowledgeBoxConfig as KnowledgeBoxConfig,
     KnowledgeBoxID as KnowledgeBoxID,
     KnowledgeBoxNew as KnowledgeBoxNew,
-    KnowledgeBoxPrefix as KnowledgeBoxPrefix,
     KnowledgeBoxResponseStatus as KnowledgeBoxResponseStatus,
     KnowledgeBoxUpdate as KnowledgeBoxUpdate,
     Label as Label,
     LabelSet as LabelSet,
     Labels as Labels,
     NOTFOUND as NOTFOUND,
     NewKnowledgeBoxResponse as NewKnowledgeBoxResponse,
     OK as OK,
+    SemanticModelMetadata as SemanticModelMetadata,
     Synonyms as Synonyms,
     TermSynonyms as TermSynonyms,
     UpdateKnowledgeBoxResponse as UpdateKnowledgeBoxResponse,
     VectorSet as VectorSet,
     VectorSets as VectorSets,
 )
 from nucliadb_protos.resources_pb2 import (
+    AllFieldIDs as AllFieldIDs,
+    Answers as Answers,
     Basic as Basic,
     Block as Block,
     CONVERSATION as CONVERSATION,
     Classification as Classification,
     CloudFile as CloudFile,
     ComputedMetadata as ComputedMetadata,
     Conversation as Conversation,
     DATETIME as DATETIME,
     Entity as Entity,
+    Extra as Extra,
     ExtractedTextWrapper as ExtractedTextWrapper,
     ExtractedVectorsWrapper as ExtractedVectorsWrapper,
     FILE as FILE,
     FieldClassifications as FieldClassifications,
     FieldComputedMetadata as FieldComputedMetadata,
     FieldComputedMetadataWrapper as FieldComputedMetadataWrapper,
     FieldConversation as FieldConversation,
@@ -66,14 +70,15 @@
     FieldFile as FieldFile,
     FieldID as FieldID,
     FieldKeywordset as FieldKeywordset,
     FieldLargeMetadata as FieldLargeMetadata,
     FieldLayout as FieldLayout,
     FieldLink as FieldLink,
     FieldMetadata as FieldMetadata,
+    FieldQuestionAnswerWrapper as FieldQuestionAnswerWrapper,
     FieldText as FieldText,
     FieldType as FieldType,
     FileExtractedData as FileExtractedData,
     FilePages as FilePages,
     GENERIC as GENERIC,
     KEYWORDSET as KEYWORDSET,
     Keyword as Keyword,
@@ -85,38 +90,49 @@
     LinkExtractedData as LinkExtractedData,
     Message as Message,
     MessageContent as MessageContent,
     Metadata as Metadata,
     NestedListPosition as NestedListPosition,
     NestedPosition as NestedPosition,
     Origin as Origin,
+    PageInformation as PageInformation,
     PagePositions as PagePositions,
+    PageSelections as PageSelections,
+    PageStructure as PageStructure,
+    PageStructurePage as PageStructurePage,
+    PageStructureToken as PageStructureToken,
     Paragraph as Paragraph,
     ParagraphAnnotation as ParagraphAnnotation,
     Position as Position,
     Positions as Positions,
+    Question as Question,
+    QuestionAnswer as QuestionAnswer,
+    QuestionAnswerAnnotation as QuestionAnswerAnnotation,
+    QuestionAnswers as QuestionAnswers,
     Relations as Relations,
+    Representation as Representation,
     RowsPreview as RowsPreview,
     Sentence as Sentence,
     TEXT as TEXT,
     TokenSplit as TokenSplit,
     UserFieldMetadata as UserFieldMetadata,
     UserMetadata as UserMetadata,
     UserVectorsWrapper as UserVectorsWrapper,
+    VisualSelection as VisualSelection,
 )
 from nucliadb_protos.writer_pb2 import (
     Audit as Audit,
     BinaryData as BinaryData,
     BinaryMetadata as BinaryMetadata,
     BrokerMessage as BrokerMessage,
+    BrokerMessageBlobReference as BrokerMessageBlobReference,
     DelEntitiesRequest as DelEntitiesRequest,
     DelLabelsRequest as DelLabelsRequest,
     DelVectorSetRequest as DelVectorSetRequest,
     Error as Error,
-    ExportRequest as ExportRequest,
     FileRequest as FileRequest,
     FileUploaded as FileUploaded,
     GetEntitiesGroupRequest as GetEntitiesGroupRequest,
     GetEntitiesGroupResponse as GetEntitiesGroupResponse,
     GetEntitiesRequest as GetEntitiesRequest,
     GetEntitiesResponse as GetEntitiesResponse,
     GetLabelSetRequest as GetLabelSetRequest,
@@ -133,32 +149,36 @@
     ListMembersRequest as ListMembersRequest,
     ListMembersResponse as ListMembersResponse,
     Member as Member,
     MergeEntitiesRequest as MergeEntitiesRequest,
     NewEntitiesGroupRequest as NewEntitiesGroupRequest,
     NewEntitiesGroupResponse as NewEntitiesGroupResponse,
     Notification as Notification,
+    NotificationSource as NotificationSource,
     OpStatusWriter as OpStatusWriter,
+    PROCESSOR as PROCESSOR,
     ResourceFieldExistsResponse as ResourceFieldExistsResponse,
     ResourceFieldId as ResourceFieldId,
     ResourceIdRequest as ResourceIdRequest,
     ResourceIdResponse as ResourceIdResponse,
     SetEntitiesRequest as SetEntitiesRequest,
     SetLabelsRequest as SetLabelsRequest,
     SetSynonymsRequest as SetSynonymsRequest,
     SetVectorSetRequest as SetVectorSetRequest,
     SetVectorsRequest as SetVectorsRequest,
     SetVectorsResponse as SetVectorsResponse,
     ShardObject as ShardObject,
     ShardReplica as ShardReplica,
     Shards as Shards,
     SynonymsRequest as SynonymsRequest,
+    UNSET as UNSET,
     UpdateEntitiesGroupRequest as UpdateEntitiesGroupRequest,
     UpdateEntitiesGroupResponse as UpdateEntitiesGroupResponse,
     UploadBinaryData as UploadBinaryData,
+    WRITER as WRITER,
     WriterStatusRequest as WriterStatusRequest,
     WriterStatusResponse as WriterStatusResponse,
 )
 
 DESCRIPTOR: google.protobuf.descriptor.FileDescriptor
 
 @typing_extensions.final
```

## nucliadb_protos/train_pb2_grpc.pyi

```diff
@@ -1,55 +1,61 @@
 """
 @generated by mypy-protobuf.  Do not edit manually!
 isort:skip_file
 """
 import abc
 import collections.abc
 import grpc
+import grpc.aio
 import nucliadb_protos.train_pb2
 import nucliadb_protos.writer_pb2
+import typing
 from nucliadb_protos.knowledgebox_pb2 import (
     CONFLICT as CONFLICT,
-    CleanedKnowledgeBoxResponse as CleanedKnowledgeBoxResponse,
     DeleteKnowledgeBoxResponse as DeleteKnowledgeBoxResponse,
     DeletedEntitiesGroups as DeletedEntitiesGroups,
     ERROR as ERROR,
     EntitiesGroup as EntitiesGroup,
     EntitiesGroupSummary as EntitiesGroupSummary,
+    EntitiesGroups as EntitiesGroups,
     Entity as Entity,
+    EntityGroupDuplicateIndex as EntityGroupDuplicateIndex,
     GCKnowledgeBoxResponse as GCKnowledgeBoxResponse,
-    KnowledgeBox as KnowledgeBox,
+    KBConfiguration as KBConfiguration,
     KnowledgeBoxConfig as KnowledgeBoxConfig,
     KnowledgeBoxID as KnowledgeBoxID,
     KnowledgeBoxNew as KnowledgeBoxNew,
-    KnowledgeBoxPrefix as KnowledgeBoxPrefix,
     KnowledgeBoxResponseStatus as KnowledgeBoxResponseStatus,
     KnowledgeBoxUpdate as KnowledgeBoxUpdate,
     Label as Label,
     LabelSet as LabelSet,
     Labels as Labels,
     NOTFOUND as NOTFOUND,
     NewKnowledgeBoxResponse as NewKnowledgeBoxResponse,
     OK as OK,
+    SemanticModelMetadata as SemanticModelMetadata,
     Synonyms as Synonyms,
     TermSynonyms as TermSynonyms,
     UpdateKnowledgeBoxResponse as UpdateKnowledgeBoxResponse,
     VectorSet as VectorSet,
     VectorSets as VectorSets,
 )
 from nucliadb_protos.resources_pb2 import (
+    AllFieldIDs as AllFieldIDs,
+    Answers as Answers,
     Basic as Basic,
     Block as Block,
     CONVERSATION as CONVERSATION,
     Classification as Classification,
     CloudFile as CloudFile,
     ComputedMetadata as ComputedMetadata,
     Conversation as Conversation,
     DATETIME as DATETIME,
     Entity as Entity,
+    Extra as Extra,
     ExtractedTextWrapper as ExtractedTextWrapper,
     ExtractedVectorsWrapper as ExtractedVectorsWrapper,
     FILE as FILE,
     FieldClassifications as FieldClassifications,
     FieldComputedMetadata as FieldComputedMetadata,
     FieldComputedMetadataWrapper as FieldComputedMetadataWrapper,
     FieldConversation as FieldConversation,
@@ -57,14 +63,15 @@
     FieldFile as FieldFile,
     FieldID as FieldID,
     FieldKeywordset as FieldKeywordset,
     FieldLargeMetadata as FieldLargeMetadata,
     FieldLayout as FieldLayout,
     FieldLink as FieldLink,
     FieldMetadata as FieldMetadata,
+    FieldQuestionAnswerWrapper as FieldQuestionAnswerWrapper,
     FieldText as FieldText,
     FieldType as FieldType,
     FileExtractedData as FileExtractedData,
     FilePages as FilePages,
     GENERIC as GENERIC,
     KEYWORDSET as KEYWORDSET,
     Keyword as Keyword,
@@ -76,38 +83,49 @@
     LinkExtractedData as LinkExtractedData,
     Message as Message,
     MessageContent as MessageContent,
     Metadata as Metadata,
     NestedListPosition as NestedListPosition,
     NestedPosition as NestedPosition,
     Origin as Origin,
+    PageInformation as PageInformation,
     PagePositions as PagePositions,
+    PageSelections as PageSelections,
+    PageStructure as PageStructure,
+    PageStructurePage as PageStructurePage,
+    PageStructureToken as PageStructureToken,
     Paragraph as Paragraph,
     ParagraphAnnotation as ParagraphAnnotation,
     Position as Position,
     Positions as Positions,
+    Question as Question,
+    QuestionAnswer as QuestionAnswer,
+    QuestionAnswerAnnotation as QuestionAnswerAnnotation,
+    QuestionAnswers as QuestionAnswers,
     Relations as Relations,
+    Representation as Representation,
     RowsPreview as RowsPreview,
     Sentence as Sentence,
     TEXT as TEXT,
     TokenSplit as TokenSplit,
     UserFieldMetadata as UserFieldMetadata,
     UserMetadata as UserMetadata,
     UserVectorsWrapper as UserVectorsWrapper,
+    VisualSelection as VisualSelection,
 )
 from nucliadb_protos.writer_pb2 import (
     Audit as Audit,
     BinaryData as BinaryData,
     BinaryMetadata as BinaryMetadata,
     BrokerMessage as BrokerMessage,
+    BrokerMessageBlobReference as BrokerMessageBlobReference,
     DelEntitiesRequest as DelEntitiesRequest,
     DelLabelsRequest as DelLabelsRequest,
     DelVectorSetRequest as DelVectorSetRequest,
     Error as Error,
-    ExportRequest as ExportRequest,
     FileRequest as FileRequest,
     FileUploaded as FileUploaded,
     GetEntitiesGroupRequest as GetEntitiesGroupRequest,
     GetEntitiesGroupResponse as GetEntitiesGroupResponse,
     GetEntitiesRequest as GetEntitiesRequest,
     GetEntitiesResponse as GetEntitiesResponse,
     GetLabelSetRequest as GetLabelSetRequest,
@@ -124,38 +142,50 @@
     ListMembersRequest as ListMembersRequest,
     ListMembersResponse as ListMembersResponse,
     Member as Member,
     MergeEntitiesRequest as MergeEntitiesRequest,
     NewEntitiesGroupRequest as NewEntitiesGroupRequest,
     NewEntitiesGroupResponse as NewEntitiesGroupResponse,
     Notification as Notification,
+    NotificationSource as NotificationSource,
     OpStatusWriter as OpStatusWriter,
+    PROCESSOR as PROCESSOR,
     ResourceFieldExistsResponse as ResourceFieldExistsResponse,
     ResourceFieldId as ResourceFieldId,
     ResourceIdRequest as ResourceIdRequest,
     ResourceIdResponse as ResourceIdResponse,
     SetEntitiesRequest as SetEntitiesRequest,
     SetLabelsRequest as SetLabelsRequest,
     SetSynonymsRequest as SetSynonymsRequest,
     SetVectorSetRequest as SetVectorSetRequest,
     SetVectorsRequest as SetVectorsRequest,
     SetVectorsResponse as SetVectorsResponse,
     ShardObject as ShardObject,
     ShardReplica as ShardReplica,
     Shards as Shards,
     SynonymsRequest as SynonymsRequest,
+    UNSET as UNSET,
     UpdateEntitiesGroupRequest as UpdateEntitiesGroupRequest,
     UpdateEntitiesGroupResponse as UpdateEntitiesGroupResponse,
     UploadBinaryData as UploadBinaryData,
+    WRITER as WRITER,
     WriterStatusRequest as WriterStatusRequest,
     WriterStatusResponse as WriterStatusResponse,
 )
 
+_T = typing.TypeVar('_T')
+
+class _MaybeAsyncIterator(collections.abc.AsyncIterator[_T], collections.abc.Iterator[_T], metaclass=abc.ABCMeta):
+    ...
+
+class _ServicerContext(grpc.ServicerContext, grpc.aio.ServicerContext):  # type: ignore
+    ...
+
 class TrainStub:
-    def __init__(self, channel: grpc.Channel) -> None: ...
+    def __init__(self, channel: typing.Union[grpc.Channel, grpc.aio.Channel]) -> None: ...
     GetInfo: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.train_pb2.GetInfoRequest,
         nucliadb_protos.train_pb2.TrainInfo,
     ]
     GetSentences: grpc.UnaryStreamMultiCallable[
         nucliadb_protos.train_pb2.GetSentencesRequest,
         nucliadb_protos.train_pb2.TrainSentence,
@@ -181,58 +211,92 @@
         nucliadb_protos.writer_pb2.GetEntitiesResponse,
     ]
     GetOntologyCount: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.train_pb2.GetLabelsetsCountRequest,
         nucliadb_protos.train_pb2.LabelsetsCount,
     ]
 
+class TrainAsyncStub:
+    GetInfo: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.train_pb2.GetInfoRequest,
+        nucliadb_protos.train_pb2.TrainInfo,
+    ]
+    GetSentences: grpc.aio.UnaryStreamMultiCallable[
+        nucliadb_protos.train_pb2.GetSentencesRequest,
+        nucliadb_protos.train_pb2.TrainSentence,
+    ]
+    GetParagraphs: grpc.aio.UnaryStreamMultiCallable[
+        nucliadb_protos.train_pb2.GetParagraphsRequest,
+        nucliadb_protos.train_pb2.TrainParagraph,
+    ]
+    GetFields: grpc.aio.UnaryStreamMultiCallable[
+        nucliadb_protos.train_pb2.GetFieldsRequest,
+        nucliadb_protos.train_pb2.TrainField,
+    ]
+    GetResources: grpc.aio.UnaryStreamMultiCallable[
+        nucliadb_protos.train_pb2.GetResourcesRequest,
+        nucliadb_protos.train_pb2.TrainResource,
+    ]
+    GetOntology: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.GetLabelsRequest,
+        nucliadb_protos.writer_pb2.GetLabelsResponse,
+    ]
+    GetEntities: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.GetEntitiesRequest,
+        nucliadb_protos.writer_pb2.GetEntitiesResponse,
+    ]
+    GetOntologyCount: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.train_pb2.GetLabelsetsCountRequest,
+        nucliadb_protos.train_pb2.LabelsetsCount,
+    ]
+
 class TrainServicer(metaclass=abc.ABCMeta):
     @abc.abstractmethod
     def GetInfo(
         self,
         request: nucliadb_protos.train_pb2.GetInfoRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.train_pb2.TrainInfo: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.train_pb2.TrainInfo, collections.abc.Awaitable[nucliadb_protos.train_pb2.TrainInfo]]: ...
     @abc.abstractmethod
     def GetSentences(
         self,
         request: nucliadb_protos.train_pb2.GetSentencesRequest,
-        context: grpc.ServicerContext,
-    ) -> collections.abc.Iterator[nucliadb_protos.train_pb2.TrainSentence]: ...
+        context: _ServicerContext,
+    ) -> typing.Union[collections.abc.Iterator[nucliadb_protos.train_pb2.TrainSentence], collections.abc.AsyncIterator[nucliadb_protos.train_pb2.TrainSentence]]: ...
     @abc.abstractmethod
     def GetParagraphs(
         self,
         request: nucliadb_protos.train_pb2.GetParagraphsRequest,
-        context: grpc.ServicerContext,
-    ) -> collections.abc.Iterator[nucliadb_protos.train_pb2.TrainParagraph]: ...
+        context: _ServicerContext,
+    ) -> typing.Union[collections.abc.Iterator[nucliadb_protos.train_pb2.TrainParagraph], collections.abc.AsyncIterator[nucliadb_protos.train_pb2.TrainParagraph]]: ...
     @abc.abstractmethod
     def GetFields(
         self,
         request: nucliadb_protos.train_pb2.GetFieldsRequest,
-        context: grpc.ServicerContext,
-    ) -> collections.abc.Iterator[nucliadb_protos.train_pb2.TrainField]: ...
+        context: _ServicerContext,
+    ) -> typing.Union[collections.abc.Iterator[nucliadb_protos.train_pb2.TrainField], collections.abc.AsyncIterator[nucliadb_protos.train_pb2.TrainField]]: ...
     @abc.abstractmethod
     def GetResources(
         self,
         request: nucliadb_protos.train_pb2.GetResourcesRequest,
-        context: grpc.ServicerContext,
-    ) -> collections.abc.Iterator[nucliadb_protos.train_pb2.TrainResource]: ...
+        context: _ServicerContext,
+    ) -> typing.Union[collections.abc.Iterator[nucliadb_protos.train_pb2.TrainResource], collections.abc.AsyncIterator[nucliadb_protos.train_pb2.TrainResource]]: ...
     @abc.abstractmethod
     def GetOntology(
         self,
         request: nucliadb_protos.writer_pb2.GetLabelsRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.GetLabelsResponse: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.GetLabelsResponse, collections.abc.Awaitable[nucliadb_protos.writer_pb2.GetLabelsResponse]]: ...
     @abc.abstractmethod
     def GetEntities(
         self,
         request: nucliadb_protos.writer_pb2.GetEntitiesRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.GetEntitiesResponse: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.GetEntitiesResponse, collections.abc.Awaitable[nucliadb_protos.writer_pb2.GetEntitiesResponse]]: ...
     @abc.abstractmethod
     def GetOntologyCount(
         self,
         request: nucliadb_protos.train_pb2.GetLabelsetsCountRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.train_pb2.LabelsetsCount: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.train_pb2.LabelsetsCount, collections.abc.Awaitable[nucliadb_protos.train_pb2.LabelsetsCount]]: ...
 
-def add_TrainServicer_to_server(servicer: TrainServicer, server: grpc.Server) -> None: ...
+def add_TrainServicer_to_server(servicer: TrainServicer, server: typing.Union[grpc.Server, grpc.aio.Server]) -> None: ...
```

## nucliadb_protos/utils_pb2.py

```diff
@@ -1,75 +1,72 @@
 # -*- coding: utf-8 -*-
 # Generated by the protocol buffer compiler.  DO NOT EDIT!
 # source: nucliadb_protos/utils.proto
+# Protobuf Python Version: 4.25.0
 """Generated protocol buffer code."""
-from google.protobuf.internal import builder as _builder
 from google.protobuf import descriptor as _descriptor
 from google.protobuf import descriptor_pool as _descriptor_pool
 from google.protobuf import symbol_database as _symbol_database
+from google.protobuf.internal import builder as _builder
 # @@protoc_insertion_point(imports)
 
 _sym_db = _symbol_database.Default()
 
 
 
 
-DESCRIPTOR = _descriptor_pool.Default().AddSerializedFile(b'\n\x1bnucliadb_protos/utils.proto\x12\x05utils\"\x98\x02\n\x08Relation\x12#\n\x06source\x18\x06 \x01(\x0b\x32\x13.utils.RelationNode\x12\x1f\n\x02to\x18\x07 \x01(\x0b\x32\x13.utils.RelationNode\x12.\n\x08relation\x18\x05 \x01(\x0e\x32\x1c.utils.Relation.RelationType\x12\x16\n\x0erelation_label\x18\x08 \x01(\t\x12)\n\x08metadata\x18\t \x01(\x0b\x32\x17.utils.RelationMetadata\"S\n\x0cRelationType\x12\t\n\x05\x43HILD\x10\x00\x12\t\n\x05\x41\x42OUT\x10\x01\x12\n\n\x06\x45NTITY\x10\x02\x12\t\n\x05\x43OLAB\x10\x03\x12\x0b\n\x07SYNONYM\x10\x04\x12\t\n\x05OTHER\x10\x05\"\xd6\x01\n\x10RelationMetadata\x12\x19\n\x0cparagraph_id\x18\x01 \x01(\tH\x00\x88\x01\x01\x12\x19\n\x0csource_start\x18\x02 \x01(\x05H\x01\x88\x01\x01\x12\x17\n\nsource_end\x18\x03 \x01(\x05H\x02\x88\x01\x01\x12\x15\n\x08to_start\x18\x04 \x01(\x05H\x03\x88\x01\x01\x12\x13\n\x06to_end\x18\x05 \x01(\x05H\x04\x88\x01\x01\x42\x0f\n\r_paragraph_idB\x0f\n\r_source_startB\r\n\x0b_source_endB\x0b\n\t_to_startB\t\n\x07_to_end\"\x96\x01\n\x0cRelationNode\x12\r\n\x05value\x18\x04 \x01(\t\x12+\n\x05ntype\x18\x05 \x01(\x0e\x32\x1c.utils.RelationNode.NodeType\x12\x0f\n\x07subtype\x18\x06 \x01(\t\"9\n\x08NodeType\x12\n\n\x06\x45NTITY\x10\x00\x12\t\n\x05LABEL\x10\x01\x12\x0c\n\x08RESOURCE\x10\x02\x12\x08\n\x04USER\x10\x03\"\x99\x01\n\rJoinGraphEdge\x12\x0e\n\x06source\x18\x04 \x01(\x05\x12\x0e\n\x06target\x18\x01 \x01(\x05\x12+\n\x05rtype\x18\x02 \x01(\x0e\x32\x1c.utils.Relation.RelationType\x12\x10\n\x08rsubtype\x18\x03 \x01(\t\x12)\n\x08metadata\x18\x05 \x01(\x0b\x32\x17.utils.RelationMetadata\"\x9f\x01\n\tJoinGraph\x12*\n\x05nodes\x18\x01 \x03(\x0b\x32\x1b.utils.JoinGraph.NodesEntry\x12#\n\x05\x65\x64ges\x18\x02 \x03(\x0b\x32\x14.utils.JoinGraphEdge\x1a\x41\n\nNodesEntry\x12\x0b\n\x03key\x18\x01 \x01(\x05\x12\"\n\x05value\x18\x02 \x01(\x0b\x32\x13.utils.RelationNode:\x02\x38\x01\"\xa0\x01\n\rExtractedText\x12\x0c\n\x04text\x18\x01 \x01(\t\x12\x37\n\nsplit_text\x18\x02 \x03(\x0b\x32#.utils.ExtractedText.SplitTextEntry\x12\x16\n\x0e\x64\x65leted_splits\x18\x03 \x03(\t\x1a\x30\n\x0eSplitTextEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\"d\n\x06Vector\x12\r\n\x05start\x18\x01 \x01(\x05\x12\x0b\n\x03\x65nd\x18\x02 \x01(\x05\x12\x17\n\x0fstart_paragraph\x18\x03 \x01(\x05\x12\x15\n\rend_paragraph\x18\x04 \x01(\x05\x12\x0e\n\x06vector\x18\x05 \x03(\x02\")\n\x07Vectors\x12\x1e\n\x07vectors\x18\x01 \x03(\x0b\x32\r.utils.Vector\"\xca\x01\n\x0cVectorObject\x12\x1f\n\x07vectors\x18\x01 \x01(\x0b\x32\x0e.utils.Vectors\x12<\n\rsplit_vectors\x18\x02 \x03(\x0b\x32%.utils.VectorObject.SplitVectorsEntry\x12\x16\n\x0e\x64\x65leted_splits\x18\x03 \x03(\t\x1a\x43\n\x11SplitVectorsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\x1d\n\x05value\x18\x02 \x01(\x0b\x32\x0e.utils.Vectors:\x02\x38\x01\"H\n\nUserVector\x12\x0e\n\x06vector\x18\x01 \x03(\x02\x12\x0e\n\x06labels\x18\x02 \x03(\t\x12\r\n\x05start\x18\x03 \x01(\x05\x12\x0b\n\x03\x65nd\x18\x04 \x01(\x05\"\x82\x01\n\x0bUserVectors\x12\x30\n\x07vectors\x18\x01 \x03(\x0b\x32\x1f.utils.UserVectors.VectorsEntry\x1a\x41\n\x0cVectorsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12 \n\x05value\x18\x02 \x01(\x0b\x32\x11.utils.UserVector:\x02\x38\x01\"\x87\x01\n\rUserVectorSet\x12\x32\n\x07vectors\x18\x01 \x03(\x0b\x32!.utils.UserVectorSet.VectorsEntry\x1a\x42\n\x0cVectorsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12!\n\x05value\x18\x02 \x01(\x0b\x32\x12.utils.UserVectors:\x02\x38\x01\"\"\n\x0fUserVectorsList\x12\x0f\n\x07vectors\x18\x01 \x03(\t*\'\n\x10VectorSimilarity\x12\n\n\x06\x43OSINE\x10\x00\x12\x07\n\x03\x44OT\x10\x01\x62\x06proto3')
+DESCRIPTOR = _descriptor_pool.Default().AddSerializedFile(b'\n\x1bnucliadb_protos/utils.proto\x12\x05utils\"\x98\x02\n\x08Relation\x12#\n\x06source\x18\x06 \x01(\x0b\x32\x13.utils.RelationNode\x12\x1f\n\x02to\x18\x07 \x01(\x0b\x32\x13.utils.RelationNode\x12.\n\x08relation\x18\x05 \x01(\x0e\x32\x1c.utils.Relation.RelationType\x12\x16\n\x0erelation_label\x18\x08 \x01(\t\x12)\n\x08metadata\x18\t \x01(\x0b\x32\x17.utils.RelationMetadata\"S\n\x0cRelationType\x12\t\n\x05\x43HILD\x10\x00\x12\t\n\x05\x41\x42OUT\x10\x01\x12\n\n\x06\x45NTITY\x10\x02\x12\t\n\x05\x43OLAB\x10\x03\x12\x0b\n\x07SYNONYM\x10\x04\x12\t\n\x05OTHER\x10\x05\"\xd6\x01\n\x10RelationMetadata\x12\x19\n\x0cparagraph_id\x18\x01 \x01(\tH\x00\x88\x01\x01\x12\x19\n\x0csource_start\x18\x02 \x01(\x05H\x01\x88\x01\x01\x12\x17\n\nsource_end\x18\x03 \x01(\x05H\x02\x88\x01\x01\x12\x15\n\x08to_start\x18\x04 \x01(\x05H\x03\x88\x01\x01\x12\x13\n\x06to_end\x18\x05 \x01(\x05H\x04\x88\x01\x01\x42\x0f\n\r_paragraph_idB\x0f\n\r_source_startB\r\n\x0b_source_endB\x0b\n\t_to_startB\t\n\x07_to_end\"\x96\x01\n\x0cRelationNode\x12\r\n\x05value\x18\x04 \x01(\t\x12+\n\x05ntype\x18\x05 \x01(\x0e\x32\x1c.utils.RelationNode.NodeType\x12\x0f\n\x07subtype\x18\x06 \x01(\t\"9\n\x08NodeType\x12\n\n\x06\x45NTITY\x10\x00\x12\t\n\x05LABEL\x10\x01\x12\x0c\n\x08RESOURCE\x10\x02\x12\x08\n\x04USER\x10\x03\"\xa0\x01\n\rExtractedText\x12\x0c\n\x04text\x18\x01 \x01(\t\x12\x37\n\nsplit_text\x18\x02 \x03(\x0b\x32#.utils.ExtractedText.SplitTextEntry\x12\x16\n\x0e\x64\x65leted_splits\x18\x03 \x03(\t\x1a\x30\n\x0eSplitTextEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\"d\n\x06Vector\x12\r\n\x05start\x18\x01 \x01(\x05\x12\x0b\n\x03\x65nd\x18\x02 \x01(\x05\x12\x17\n\x0fstart_paragraph\x18\x03 \x01(\x05\x12\x15\n\rend_paragraph\x18\x04 \x01(\x05\x12\x0e\n\x06vector\x18\x05 \x03(\x02\")\n\x07Vectors\x12\x1e\n\x07vectors\x18\x01 \x03(\x0b\x32\r.utils.Vector\"\xca\x01\n\x0cVectorObject\x12\x1f\n\x07vectors\x18\x01 \x01(\x0b\x32\x0e.utils.Vectors\x12<\n\rsplit_vectors\x18\x02 \x03(\x0b\x32%.utils.VectorObject.SplitVectorsEntry\x12\x16\n\x0e\x64\x65leted_splits\x18\x03 \x03(\t\x1a\x43\n\x11SplitVectorsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\x1d\n\x05value\x18\x02 \x01(\x0b\x32\x0e.utils.Vectors:\x02\x38\x01\"H\n\nUserVector\x12\x0e\n\x06vector\x18\x01 \x03(\x02\x12\x0e\n\x06labels\x18\x02 \x03(\t\x12\r\n\x05start\x18\x03 \x01(\x05\x12\x0b\n\x03\x65nd\x18\x04 \x01(\x05\"\x82\x01\n\x0bUserVectors\x12\x30\n\x07vectors\x18\x01 \x03(\x0b\x32\x1f.utils.UserVectors.VectorsEntry\x1a\x41\n\x0cVectorsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12 \n\x05value\x18\x02 \x01(\x0b\x32\x11.utils.UserVector:\x02\x38\x01\"\x87\x01\n\rUserVectorSet\x12\x32\n\x07vectors\x18\x01 \x03(\x0b\x32!.utils.UserVectorSet.VectorsEntry\x1a\x42\n\x0cVectorsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12!\n\x05value\x18\x02 \x01(\x0b\x32\x12.utils.UserVectors:\x02\x38\x01\"\"\n\x0fUserVectorsList\x12\x0f\n\x07vectors\x18\x01 \x03(\t\"!\n\x08Security\x12\x15\n\raccess_groups\x18\x01 \x03(\t*\'\n\x10VectorSimilarity\x12\n\n\x06\x43OSINE\x10\x00\x12\x07\n\x03\x44OT\x10\x01*.\n\x0eReleaseChannel\x12\n\n\x06STABLE\x10\x00\x12\x10\n\x0c\x45XPERIMENTAL\x10\x01\x62\x06proto3')
 
-_builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, globals())
-_builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, 'nucliadb_protos.utils_pb2', globals())
+_globals = globals()
+_builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, _globals)
+_builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, 'nucliadb_protos.utils_pb2', _globals)
 if _descriptor._USE_C_DESCRIPTORS == False:
-
   DESCRIPTOR._options = None
-  _JOINGRAPH_NODESENTRY._options = None
-  _JOINGRAPH_NODESENTRY._serialized_options = b'8\001'
-  _EXTRACTEDTEXT_SPLITTEXTENTRY._options = None
-  _EXTRACTEDTEXT_SPLITTEXTENTRY._serialized_options = b'8\001'
-  _VECTOROBJECT_SPLITVECTORSENTRY._options = None
-  _VECTOROBJECT_SPLITVECTORSENTRY._serialized_options = b'8\001'
-  _USERVECTORS_VECTORSENTRY._options = None
-  _USERVECTORS_VECTORSENTRY._serialized_options = b'8\001'
-  _USERVECTORSET_VECTORSENTRY._options = None
-  _USERVECTORSET_VECTORSENTRY._serialized_options = b'8\001'
-  _VECTORSIMILARITY._serialized_start=1903
-  _VECTORSIMILARITY._serialized_end=1942
-  _RELATION._serialized_start=39
-  _RELATION._serialized_end=319
-  _RELATION_RELATIONTYPE._serialized_start=236
-  _RELATION_RELATIONTYPE._serialized_end=319
-  _RELATIONMETADATA._serialized_start=322
-  _RELATIONMETADATA._serialized_end=536
-  _RELATIONNODE._serialized_start=539
-  _RELATIONNODE._serialized_end=689
-  _RELATIONNODE_NODETYPE._serialized_start=632
-  _RELATIONNODE_NODETYPE._serialized_end=689
-  _JOINGRAPHEDGE._serialized_start=692
-  _JOINGRAPHEDGE._serialized_end=845
-  _JOINGRAPH._serialized_start=848
-  _JOINGRAPH._serialized_end=1007
-  _JOINGRAPH_NODESENTRY._serialized_start=942
-  _JOINGRAPH_NODESENTRY._serialized_end=1007
-  _EXTRACTEDTEXT._serialized_start=1010
-  _EXTRACTEDTEXT._serialized_end=1170
-  _EXTRACTEDTEXT_SPLITTEXTENTRY._serialized_start=1122
-  _EXTRACTEDTEXT_SPLITTEXTENTRY._serialized_end=1170
-  _VECTOR._serialized_start=1172
-  _VECTOR._serialized_end=1272
-  _VECTORS._serialized_start=1274
-  _VECTORS._serialized_end=1315
-  _VECTOROBJECT._serialized_start=1318
-  _VECTOROBJECT._serialized_end=1520
-  _VECTOROBJECT_SPLITVECTORSENTRY._serialized_start=1453
-  _VECTOROBJECT_SPLITVECTORSENTRY._serialized_end=1520
-  _USERVECTOR._serialized_start=1522
-  _USERVECTOR._serialized_end=1594
-  _USERVECTORS._serialized_start=1597
-  _USERVECTORS._serialized_end=1727
-  _USERVECTORS_VECTORSENTRY._serialized_start=1662
-  _USERVECTORS_VECTORSENTRY._serialized_end=1727
-  _USERVECTORSET._serialized_start=1730
-  _USERVECTORSET._serialized_end=1865
-  _USERVECTORSET_VECTORSENTRY._serialized_start=1799
-  _USERVECTORSET_VECTORSENTRY._serialized_end=1865
-  _USERVECTORSLIST._serialized_start=1867
-  _USERVECTORSLIST._serialized_end=1901
+  _globals['_EXTRACTEDTEXT_SPLITTEXTENTRY']._options = None
+  _globals['_EXTRACTEDTEXT_SPLITTEXTENTRY']._serialized_options = b'8\001'
+  _globals['_VECTOROBJECT_SPLITVECTORSENTRY']._options = None
+  _globals['_VECTOROBJECT_SPLITVECTORSENTRY']._serialized_options = b'8\001'
+  _globals['_USERVECTORS_VECTORSENTRY']._options = None
+  _globals['_USERVECTORS_VECTORSENTRY']._serialized_options = b'8\001'
+  _globals['_USERVECTORSET_VECTORSENTRY']._options = None
+  _globals['_USERVECTORSET_VECTORSENTRY']._serialized_options = b'8\001'
+  _globals['_VECTORSIMILARITY']._serialized_start=1620
+  _globals['_VECTORSIMILARITY']._serialized_end=1659
+  _globals['_RELEASECHANNEL']._serialized_start=1661
+  _globals['_RELEASECHANNEL']._serialized_end=1707
+  _globals['_RELATION']._serialized_start=39
+  _globals['_RELATION']._serialized_end=319
+  _globals['_RELATION_RELATIONTYPE']._serialized_start=236
+  _globals['_RELATION_RELATIONTYPE']._serialized_end=319
+  _globals['_RELATIONMETADATA']._serialized_start=322
+  _globals['_RELATIONMETADATA']._serialized_end=536
+  _globals['_RELATIONNODE']._serialized_start=539
+  _globals['_RELATIONNODE']._serialized_end=689
+  _globals['_RELATIONNODE_NODETYPE']._serialized_start=632
+  _globals['_RELATIONNODE_NODETYPE']._serialized_end=689
+  _globals['_EXTRACTEDTEXT']._serialized_start=692
+  _globals['_EXTRACTEDTEXT']._serialized_end=852
+  _globals['_EXTRACTEDTEXT_SPLITTEXTENTRY']._serialized_start=804
+  _globals['_EXTRACTEDTEXT_SPLITTEXTENTRY']._serialized_end=852
+  _globals['_VECTOR']._serialized_start=854
+  _globals['_VECTOR']._serialized_end=954
+  _globals['_VECTORS']._serialized_start=956
+  _globals['_VECTORS']._serialized_end=997
+  _globals['_VECTOROBJECT']._serialized_start=1000
+  _globals['_VECTOROBJECT']._serialized_end=1202
+  _globals['_VECTOROBJECT_SPLITVECTORSENTRY']._serialized_start=1135
+  _globals['_VECTOROBJECT_SPLITVECTORSENTRY']._serialized_end=1202
+  _globals['_USERVECTOR']._serialized_start=1204
+  _globals['_USERVECTOR']._serialized_end=1276
+  _globals['_USERVECTORS']._serialized_start=1279
+  _globals['_USERVECTORS']._serialized_end=1409
+  _globals['_USERVECTORS_VECTORSENTRY']._serialized_start=1344
+  _globals['_USERVECTORS_VECTORSENTRY']._serialized_end=1409
+  _globals['_USERVECTORSET']._serialized_start=1412
+  _globals['_USERVECTORSET']._serialized_end=1547
+  _globals['_USERVECTORSET_VECTORSENTRY']._serialized_start=1481
+  _globals['_USERVECTORSET_VECTORSENTRY']._serialized_end=1547
+  _globals['_USERVECTORSLIST']._serialized_start=1549
+  _globals['_USERVECTORSLIST']._serialized_end=1583
+  _globals['_SECURITY']._serialized_start=1585
+  _globals['_SECURITY']._serialized_end=1618
 # @@protoc_insertion_point(module_scope)
```

## nucliadb_protos/utils_pb2.pyi

```diff
@@ -29,27 +29,42 @@
 
 class VectorSimilarity(_VectorSimilarity, metaclass=_VectorSimilarityEnumTypeWrapper): ...
 
 COSINE: VectorSimilarity.ValueType  # 0
 DOT: VectorSimilarity.ValueType  # 1
 global___VectorSimilarity = VectorSimilarity
 
+class _ReleaseChannel:
+    ValueType = typing.NewType("ValueType", builtins.int)
+    V: typing_extensions.TypeAlias = ValueType
+
+class _ReleaseChannelEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[_ReleaseChannel.ValueType], builtins.type):
+    DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
+    STABLE: _ReleaseChannel.ValueType  # 0
+    EXPERIMENTAL: _ReleaseChannel.ValueType  # 1
+
+class ReleaseChannel(_ReleaseChannel, metaclass=_ReleaseChannelEnumTypeWrapper): ...
+
+STABLE: ReleaseChannel.ValueType  # 0
+EXPERIMENTAL: ReleaseChannel.ValueType  # 1
+global___ReleaseChannel = ReleaseChannel
+
 @typing_extensions.final
 class Relation(google.protobuf.message.Message):
     """Relations are connexions between nodes in the relation index.
     They are tuplets (Source, Relation Type, Relation Label, To).
     """
 
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _RelationType:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _RelationTypeEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Relation._RelationType.ValueType], builtins.type):  # noqa: F821
+    class _RelationTypeEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Relation._RelationType.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         CHILD: Relation._RelationType.ValueType  # 0
         """Child resource"""
         ABOUT: Relation._RelationType.ValueType  # 1
         """related with label (GENERATED)"""
         ENTITY: Relation._RelationType.ValueType  # 2
         """related with an entity (GENERATED)"""
@@ -145,15 +160,15 @@
 
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _NodeType:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _NodeTypeEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[RelationNode._NodeType.ValueType], builtins.type):  # noqa: F821
+    class _NodeTypeEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[RelationNode._NodeType.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         ENTITY: RelationNode._NodeType.ValueType  # 0
         LABEL: RelationNode._NodeType.ValueType  # 1
         RESOURCE: RelationNode._NodeType.ValueType  # 2
         USER: RelationNode._NodeType.ValueType  # 3
 
     class NodeType(_NodeType, metaclass=_NodeTypeEnumTypeWrapper): ...
@@ -179,81 +194,14 @@
         subtype: builtins.str = ...,
     ) -> None: ...
     def ClearField(self, field_name: typing_extensions.Literal["ntype", b"ntype", "subtype", b"subtype", "value", b"value"]) -> None: ...
 
 global___RelationNode = RelationNode
 
 @typing_extensions.final
-class JoinGraphEdge(google.protobuf.message.Message):
-    DESCRIPTOR: google.protobuf.descriptor.Descriptor
-
-    SOURCE_FIELD_NUMBER: builtins.int
-    TARGET_FIELD_NUMBER: builtins.int
-    RTYPE_FIELD_NUMBER: builtins.int
-    RSUBTYPE_FIELD_NUMBER: builtins.int
-    METADATA_FIELD_NUMBER: builtins.int
-    source: builtins.int
-    target: builtins.int
-    rtype: global___Relation.RelationType.ValueType
-    rsubtype: builtins.str
-    @property
-    def metadata(self) -> global___RelationMetadata: ...
-    def __init__(
-        self,
-        *,
-        source: builtins.int = ...,
-        target: builtins.int = ...,
-        rtype: global___Relation.RelationType.ValueType = ...,
-        rsubtype: builtins.str = ...,
-        metadata: global___RelationMetadata | None = ...,
-    ) -> None: ...
-    def HasField(self, field_name: typing_extensions.Literal["metadata", b"metadata"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["metadata", b"metadata", "rsubtype", b"rsubtype", "rtype", b"rtype", "source", b"source", "target", b"target"]) -> None: ...
-
-global___JoinGraphEdge = JoinGraphEdge
-
-@typing_extensions.final
-class JoinGraph(google.protobuf.message.Message):
-    DESCRIPTOR: google.protobuf.descriptor.Descriptor
-
-    @typing_extensions.final
-    class NodesEntry(google.protobuf.message.Message):
-        DESCRIPTOR: google.protobuf.descriptor.Descriptor
-
-        KEY_FIELD_NUMBER: builtins.int
-        VALUE_FIELD_NUMBER: builtins.int
-        key: builtins.int
-        @property
-        def value(self) -> global___RelationNode: ...
-        def __init__(
-            self,
-            *,
-            key: builtins.int = ...,
-            value: global___RelationNode | None = ...,
-        ) -> None: ...
-        def HasField(self, field_name: typing_extensions.Literal["value", b"value"]) -> builtins.bool: ...
-        def ClearField(self, field_name: typing_extensions.Literal["key", b"key", "value", b"value"]) -> None: ...
-
-    NODES_FIELD_NUMBER: builtins.int
-    EDGES_FIELD_NUMBER: builtins.int
-    @property
-    def nodes(self) -> google.protobuf.internal.containers.MessageMap[builtins.int, global___RelationNode]: ...
-    @property
-    def edges(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___JoinGraphEdge]: ...
-    def __init__(
-        self,
-        *,
-        nodes: collections.abc.Mapping[builtins.int, global___RelationNode] | None = ...,
-        edges: collections.abc.Iterable[global___JoinGraphEdge] | None = ...,
-    ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["edges", b"edges", "nodes", b"nodes"]) -> None: ...
-
-global___JoinGraph = JoinGraph
-
-@typing_extensions.final
 class ExtractedText(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     @typing_extensions.final
     class SplitTextEntry(google.protobuf.message.Message):
         DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
@@ -482,7 +430,23 @@
         self,
         *,
         vectors: collections.abc.Iterable[builtins.str] | None = ...,
     ) -> None: ...
     def ClearField(self, field_name: typing_extensions.Literal["vectors", b"vectors"]) -> None: ...
 
 global___UserVectorsList = UserVectorsList
+
+@typing_extensions.final
+class Security(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    ACCESS_GROUPS_FIELD_NUMBER: builtins.int
+    @property
+    def access_groups(self) -> google.protobuf.internal.containers.RepeatedScalarFieldContainer[builtins.str]: ...
+    def __init__(
+        self,
+        *,
+        access_groups: collections.abc.Iterable[builtins.str] | None = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["access_groups", b"access_groups"]) -> None: ...
+
+global___Security = Security
```

## nucliadb_protos/writer_pb2.py

```diff
@@ -1,15 +1,16 @@
 # -*- coding: utf-8 -*-
 # Generated by the protocol buffer compiler.  DO NOT EDIT!
 # source: nucliadb_protos/writer.proto
+# Protobuf Python Version: 4.25.0
 """Generated protocol buffer code."""
-from google.protobuf.internal import builder as _builder
 from google.protobuf import descriptor as _descriptor
 from google.protobuf import descriptor_pool as _descriptor_pool
 from google.protobuf import symbol_database as _symbol_database
+from google.protobuf.internal import builder as _builder
 # @@protoc_insertion_point(imports)
 
 _sym_db = _symbol_database.Default()
 
 
 from google.protobuf import timestamp_pb2 as google_dot_protobuf_dot_timestamp__pb2
 from nucliadb_protos import noderesources_pb2 as nucliadb__protos_dot_noderesources__pb2
@@ -28,209 +29,227 @@
 except AttributeError:
   nucliadb__protos_dot_utils__pb2 = nucliadb__protos_dot_knowledgebox__pb2.nucliadb_protos.utils_pb2
 
 from nucliadb_protos.noderesources_pb2 import *
 from nucliadb_protos.resources_pb2 import *
 from nucliadb_protos.knowledgebox_pb2 import *
 
-DESCRIPTOR = _descriptor_pool.Default().AddSerializedFile(b'\n\x1cnucliadb_protos/writer.proto\x12\tfdbwriter\x1a\x1fgoogle/protobuf/timestamp.proto\x1a#nucliadb_protos/noderesources.proto\x1a\x1fnucliadb_protos/resources.proto\x1a\"nucliadb_protos/knowledgebox.proto\"\xa8\x01\n\x05\x41udit\x12\x0c\n\x04user\x18\x01 \x01(\t\x12(\n\x04when\x18\x02 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\x0e\n\x06origin\x18\x03 \x01(\t\x12\'\n\x06source\x18\x04 \x01(\x0e\x32\x17.fdbwriter.Audit.Source\".\n\x06Source\x12\x08\n\x04HTTP\x10\x00\x12\r\n\tDASHBOARD\x10\x01\x12\x0b\n\x07\x44\x45SKTOP\x10\x02\"\xad\x01\n\x05\x45rror\x12\r\n\x05\x66ield\x18\x01 \x01(\t\x12(\n\nfield_type\x18\x02 \x01(\x0e\x32\x14.resources.FieldType\x12\r\n\x05\x65rror\x18\x03 \x01(\t\x12(\n\x04\x63ode\x18\x04 \x01(\x0e\x32\x1a.fdbwriter.Error.ErrorCode\"2\n\tErrorCode\x12\x0b\n\x07GENERIC\x10\x00\x12\x0b\n\x07\x45XTRACT\x10\x01\x12\x0b\n\x07PROCESS\x10\x02\"\x92\x10\n\rBrokerMessage\x12\x0c\n\x04kbid\x18\x01 \x01(\t\x12\x0c\n\x04uuid\x18\x03 \x01(\t\x12\x0c\n\x04slug\x18\x04 \x01(\t\x12\x1f\n\x05\x61udit\x18\x05 \x01(\x0b\x32\x10.fdbwriter.Audit\x12\x32\n\x04type\x18\x06 \x01(\x0e\x32$.fdbwriter.BrokerMessage.MessageType\x12\x0f\n\x07multiid\x18\x07 \x01(\t\x12\x1f\n\x05\x62\x61sic\x18\x08 \x01(\x0b\x32\x10.resources.Basic\x12!\n\x06origin\x18\t \x01(\x0b\x32\x11.resources.Origin\x12\"\n\trelations\x18\n \x03(\x0b\x32\x0f.utils.Relation\x12\x42\n\rconversations\x18\x0b \x03(\x0b\x32+.fdbwriter.BrokerMessage.ConversationsEntry\x12\x36\n\x07layouts\x18\x0c \x03(\x0b\x32%.fdbwriter.BrokerMessage.LayoutsEntry\x12\x32\n\x05texts\x18\r \x03(\x0b\x32#.fdbwriter.BrokerMessage.TextsEntry\x12>\n\x0bkeywordsets\x18\x0e \x03(\x0b\x32).fdbwriter.BrokerMessage.KeywordsetsEntry\x12:\n\tdatetimes\x18\x0f \x03(\x0b\x32\'.fdbwriter.BrokerMessage.DatetimesEntry\x12\x32\n\x05links\x18\x10 \x03(\x0b\x32#.fdbwriter.BrokerMessage.LinksEntry\x12\x32\n\x05\x66iles\x18\x11 \x03(\x0b\x32#.fdbwriter.BrokerMessage.FilesEntry\x12\x39\n\x13link_extracted_data\x18\x12 \x03(\x0b\x32\x1c.resources.LinkExtractedData\x12\x39\n\x13\x66ile_extracted_data\x18\x13 \x03(\x0b\x32\x1c.resources.FileExtractedData\x12\x37\n\x0e\x65xtracted_text\x18\x14 \x03(\x0b\x32\x1f.resources.ExtractedTextWrapper\x12?\n\x0e\x66ield_metadata\x18\x15 \x03(\x0b\x32\'.resources.FieldComputedMetadataWrapper\x12\x39\n\rfield_vectors\x18\x16 \x03(\x0b\x32\".resources.ExtractedVectorsWrapper\x12\x45\n\x14\x66ield_large_metadata\x18\x17 \x03(\x0b\x32\'.resources.LargeComputedMetadataWrapper\x12)\n\rdelete_fields\x18\x18 \x03(\x0b\x32\x12.resources.FieldID\x12\x12\n\norigin_seq\x18\x19 \x01(\x05\x12\x1c\n\x14slow_processing_time\x18\x1a \x01(\x02\x12\x1b\n\x13pre_processing_time\x18\x1c \x01(\x02\x12-\n\tdone_time\x18\x1d \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\x13\n\x07txseqid\x18\x1e \x01(\x03\x42\x02\x18\x01\x12 \n\x06\x65rrors\x18\x1f \x03(\x0b\x32\x10.fdbwriter.Error\x12\x15\n\rprocessing_id\x18  \x01(\t\x12\x36\n\x06source\x18! \x01(\x0e\x32&.fdbwriter.BrokerMessage.MessageSource\x12\x13\n\x0b\x61\x63\x63ount_seq\x18\" \x01(\x03\x12\x33\n\x0cuser_vectors\x18# \x03(\x0b\x32\x1d.resources.UserVectorsWrapper\x12\x0f\n\x07reindex\x18$ \x01(\x08\x1aM\n\x12\x43onversationsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12&\n\x05value\x18\x02 \x01(\x0b\x32\x17.resources.Conversation:\x02\x38\x01\x1a\x46\n\x0cLayoutsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12%\n\x05value\x18\x02 \x01(\x0b\x32\x16.resources.FieldLayout:\x02\x38\x01\x1a\x42\n\nTextsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12#\n\x05value\x18\x02 \x01(\x0b\x32\x14.resources.FieldText:\x02\x38\x01\x1aN\n\x10KeywordsetsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12)\n\x05value\x18\x02 \x01(\x0b\x32\x1a.resources.FieldKeywordset:\x02\x38\x01\x1aJ\n\x0e\x44\x61tetimesEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\'\n\x05value\x18\x02 \x01(\x0b\x32\x18.resources.FieldDatetime:\x02\x38\x01\x1a\x42\n\nLinksEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12#\n\x05value\x18\x02 \x01(\x0b\x32\x14.resources.FieldLink:\x02\x38\x01\x1a\x42\n\nFilesEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12#\n\x05value\x18\x02 \x01(\x0b\x32\x14.resources.FieldFile:\x02\x38\x01\"N\n\x0bMessageType\x12\x0e\n\nAUTOCOMMIT\x10\x00\x12\t\n\x05MULTI\x10\x01\x12\n\n\x06\x43OMMIT\x10\x02\x12\x0c\n\x08ROLLBACK\x10\x03\x12\n\n\x06\x44\x45LETE\x10\x04\"*\n\rMessageSource\x12\n\n\x06WRITER\x10\x00\x12\r\n\tPROCESSOR\x10\x01\"\x97\x01\n\x14WriterStatusResponse\x12\x16\n\x0eknowledgeboxes\x18\x01 \x03(\t\x12\x39\n\x05msgid\x18\x02 \x03(\x0b\x32*.fdbwriter.WriterStatusResponse.MsgidEntry\x1a,\n\nMsgidEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\x03:\x02\x38\x01\"\x15\n\x13WriterStatusRequest\"r\n\x10SetLabelsRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\n\n\x02id\x18\x02 \x01(\t\x12(\n\x08labelset\x18\x03 \x01(\x0b\x32\x16.knowledgebox.LabelSet\"H\n\x10\x44\x65lLabelsRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\n\n\x02id\x18\x02 \x01(\t\"\xb8\x01\n\x11GetLabelsResponse\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12$\n\x06labels\x18\x02 \x01(\x0b\x32\x14.knowledgebox.Labels\x12\x33\n\x06status\x18\x03 \x01(\x0e\x32#.fdbwriter.GetLabelsResponse.Status\"\x1e\n\x06Status\x12\x06\n\x02OK\x10\x00\x12\x0c\n\x08NOTFOUND\x10\x01\"<\n\x10GetLabelsRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\"\x81\x01\n\x17NewEntitiesGroupRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\r\n\x05group\x18\x02 \x01(\t\x12-\n\x08\x65ntities\x18\x03 \x01(\x0b\x32\x1b.knowledgebox.EntitiesGroup\"\x99\x01\n\x18NewEntitiesGroupResponse\x12:\n\x06status\x18\x01 \x01(\x0e\x32*.fdbwriter.NewEntitiesGroupResponse.Status\"A\n\x06Status\x12\x06\n\x02OK\x10\x00\x12\t\n\x05\x45RROR\x10\x01\x12\x10\n\x0cKB_NOT_FOUND\x10\x02\x12\x12\n\x0e\x41LREADY_EXISTS\x10\x03\"|\n\x12SetEntitiesRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\r\n\x05group\x18\x02 \x01(\t\x12-\n\x08\x65ntities\x18\x03 \x01(\x0b\x32\x1b.knowledgebox.EntitiesGroup\"\x8a\x03\n\x1aUpdateEntitiesGroupRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\r\n\x05group\x18\x02 \x01(\t\x12;\n\x03\x61\x64\x64\x18\x03 \x03(\x0b\x32..fdbwriter.UpdateEntitiesGroupRequest.AddEntry\x12\x41\n\x06update\x18\x04 \x03(\x0b\x32\x31.fdbwriter.UpdateEntitiesGroupRequest.UpdateEntry\x12\x0e\n\x06\x64\x65lete\x18\x05 \x03(\t\x12\r\n\x05title\x18\x06 \x01(\t\x12\r\n\x05\x63olor\x18\x07 \x01(\t\x1a@\n\x08\x41\x64\x64\x45ntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12#\n\x05value\x18\x02 \x01(\x0b\x32\x14.knowledgebox.Entity:\x02\x38\x01\x1a\x43\n\x0bUpdateEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12#\n\x05value\x18\x02 \x01(\x0b\x32\x14.knowledgebox.Entity:\x02\x38\x01\"\xa9\x01\n\x1bUpdateEntitiesGroupResponse\x12=\n\x06status\x18\x01 \x01(\x0e\x32-.fdbwriter.UpdateEntitiesGroupResponse.Status\"K\n\x06Status\x12\x06\n\x02OK\x10\x00\x12\t\n\x05\x45RROR\x10\x01\x12\x10\n\x0cKB_NOT_FOUND\x10\x02\x12\x1c\n\x18\x45NTITIES_GROUP_NOT_FOUND\x10\x03\"E\n\x19ListEntitiesGroupsRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\"\x9b\x02\n\x1aListEntitiesGroupsResponse\x12\x41\n\x06groups\x18\x01 \x03(\x0b\x32\x31.fdbwriter.ListEntitiesGroupsResponse.GroupsEntry\x12<\n\x06status\x18\x02 \x01(\x0e\x32,.fdbwriter.ListEntitiesGroupsResponse.Status\x1aQ\n\x0bGroupsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\x31\n\x05value\x18\x02 \x01(\x0b\x32\".knowledgebox.EntitiesGroupSummary:\x02\x38\x01\")\n\x06Status\x12\x06\n\x02OK\x10\x00\x12\x0c\n\x08NOTFOUND\x10\x01\x12\t\n\x05\x45RROR\x10\x02\">\n\x12GetEntitiesRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\"\xa9\x02\n\x13GetEntitiesResponse\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12:\n\x06groups\x18\x02 \x03(\x0b\x32*.fdbwriter.GetEntitiesResponse.GroupsEntry\x12\x35\n\x06status\x18\x03 \x01(\x0e\x32%.fdbwriter.GetEntitiesResponse.Status\x1aJ\n\x0bGroupsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12*\n\x05value\x18\x02 \x01(\x0b\x32\x1b.knowledgebox.EntitiesGroup:\x02\x38\x01\")\n\x06Status\x12\x06\n\x02OK\x10\x00\x12\x0c\n\x08NOTFOUND\x10\x01\x12\t\n\x05\x45RROR\x10\x02\"M\n\x12\x44\x65lEntitiesRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\r\n\x05group\x18\x02 \x01(\t\"\xd9\x01\n\x14MergeEntitiesRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\x36\n\x04\x66rom\x18\x02 \x01(\x0b\x32(.fdbwriter.MergeEntitiesRequest.EntityID\x12\x34\n\x02to\x18\x03 \x01(\x0b\x32(.fdbwriter.MergeEntitiesRequest.EntityID\x1a)\n\x08\x45ntityID\x12\r\n\x05group\x18\x01 \x01(\t\x12\x0e\n\x06\x65ntity\x18\x02 \x01(\t\"P\n\x12GetLabelSetRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\x10\n\x08labelset\x18\x02 \x01(\t\"\xc0\x01\n\x13GetLabelSetResponse\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12(\n\x08labelset\x18\x02 \x01(\x0b\x32\x16.knowledgebox.LabelSet\x12\x35\n\x06status\x18\x03 \x01(\x0e\x32%.fdbwriter.GetLabelSetResponse.Status\"\x1e\n\x06Status\x12\x06\n\x02OK\x10\x00\x12\x0c\n\x08NOTFOUND\x10\x01\"R\n\x17GetEntitiesGroupRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\r\n\x05group\x18\x02 \x01(\t\"\xf9\x01\n\x18GetEntitiesGroupResponse\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12*\n\x05group\x18\x02 \x01(\x0b\x32\x1b.knowledgebox.EntitiesGroup\x12:\n\x06status\x18\x03 \x01(\x0e\x32*.fdbwriter.GetEntitiesGroupResponse.Status\"K\n\x06Status\x12\x06\n\x02OK\x10\x00\x12\x10\n\x0cKB_NOT_FOUND\x10\x01\x12\x1c\n\x18\x45NTITIES_GROUP_NOT_FOUND\x10\x02\x12\t\n\x05\x45RROR\x10\x03\"@\n\x14GetVectorSetsRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\"\xd3\x01\n\x15GetVectorSetsResponse\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12,\n\nvectorsets\x18\x02 \x01(\x0b\x32\x18.knowledgebox.VectorSets\x12\x37\n\x06status\x18\x03 \x01(\x0e\x32\'.fdbwriter.GetVectorSetsResponse.Status\")\n\x06Status\x12\x06\n\x02OK\x10\x00\x12\x0c\n\x08NOTFOUND\x10\x01\x12\t\n\x05\x45RROR\x10\x02\"R\n\x13\x44\x65lVectorSetRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\x11\n\tvectorset\x18\x02 \x01(\t\"w\n\x13SetVectorSetRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\n\n\x02id\x18\x02 \x01(\t\x12*\n\tvectorset\x18\x03 \x01(\x0b\x32\x17.knowledgebox.VectorSet\"m\n\x0eOpStatusWriter\x12\x30\n\x06status\x18\x01 \x01(\x0e\x32 .fdbwriter.OpStatusWriter.Status\")\n\x06Status\x12\x06\n\x02OK\x10\x00\x12\t\n\x05\x45RROR\x10\x01\x12\x0c\n\x08NOTFOUND\x10\x02\"\xdb\x02\n\x0cNotification\x12\x11\n\tpartition\x18\x01 \x01(\x05\x12\r\n\x05multi\x18\x02 \x01(\t\x12\x0c\n\x04uuid\x18\x03 \x01(\t\x12\x0c\n\x04kbid\x18\x04 \x01(\t\x12\r\n\x05seqid\x18\x05 \x01(\x03\x12.\n\x06\x61\x63tion\x18\x06 \x01(\x0e\x32\x1e.fdbwriter.Notification.Action\x12\x35\n\nwrite_type\x18\x07 \x01(\x0e\x32!.fdbwriter.Notification.WriteType\x12)\n\x07message\x18\x08 \x01(\x0b\x32\x18.fdbwriter.BrokerMessage\",\n\x06\x41\x63tion\x12\n\n\x06\x43OMMIT\x10\x00\x12\t\n\x05\x41\x42ORT\x10\x01\x12\x0b\n\x07INDEXED\x10\x02\">\n\tWriteType\x12\t\n\x05UNSET\x10\x00\x12\x0b\n\x07\x43REATED\x10\x01\x12\x0c\n\x08MODIFIED\x10\x02\x12\x0b\n\x07\x44\x45LETED\x10\x03\"\xdf\x01\n\x06Member\x12\n\n\x02id\x18\x01 \x01(\t\x12\x16\n\x0elisten_address\x18\x02 \x01(\t\x12\x0f\n\x07is_self\x18\x03 \x01(\x08\x12$\n\x04type\x18\x04 \x01(\x0e\x32\x16.fdbwriter.Member.Type\x12\r\n\x05\x64ummy\x18\x05 \x01(\x08\x12\x16\n\nload_score\x18\x06 \x01(\x02\x42\x02\x18\x01\x12\x13\n\x0bshard_count\x18\x07 \x01(\r\">\n\x04Type\x12\x06\n\x02IO\x10\x00\x12\n\n\x06SEARCH\x10\x01\x12\n\n\x06INGEST\x10\x02\x12\t\n\x05TRAIN\x10\x03\x12\x0b\n\x07UNKNOWN\x10\x04\"\x14\n\x12ListMembersRequest\"9\n\x13ListMembersResponse\x12\"\n\x07members\x18\x01 \x03(\x0b\x32\x11.fdbwriter.Member\"H\n\x0cShardReplica\x12*\n\x05shard\x18\x01 \x01(\x0b\x32\x1b.noderesources.ShardCreated\x12\x0c\n\x04node\x18\x02 \x01(\t\"v\n\x0bShardObject\x12\r\n\x05shard\x18\x01 \x01(\t\x12)\n\x08replicas\x18\x03 \x03(\x0b\x32\x17.fdbwriter.ShardReplica\x12-\n\ttimestamp\x18\x04 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\"{\n\x06Shards\x12&\n\x06shards\x18\x01 \x03(\x0b\x32\x16.fdbwriter.ShardObject\x12\x0c\n\x04kbid\x18\x02 \x01(\t\x12\x0e\n\x06\x61\x63tual\x18\x03 \x01(\x05\x12+\n\nsimilarity\x18\x04 \x01(\x0e\x32\x17.utils.VectorSimilarity\"e\n\x0fResourceFieldId\x12\x0c\n\x04kbid\x18\x01 \x01(\t\x12\x0b\n\x03rid\x18\x02 \x01(\t\x12(\n\nfield_type\x18\x03 \x01(\x0e\x32\x14.resources.FieldType\x12\r\n\x05\x66ield\x18\x04 \x01(\t\"C\n\rIndexResource\x12\x0c\n\x04kbid\x18\x01 \x01(\t\x12\x0b\n\x03rid\x18\x02 \x01(\t\x12\x17\n\x0freindex_vectors\x18\x03 \x01(\x08\"\r\n\x0bIndexStatus\",\n\x1bResourceFieldExistsResponse\x12\r\n\x05\x66ound\x18\x01 \x01(\x08\"/\n\x11ResourceIdRequest\x12\x0c\n\x04kbid\x18\x01 \x01(\t\x12\x0c\n\x04slug\x18\x02 \x01(\t\"\"\n\x12ResourceIdResponse\x12\x0c\n\x04uuid\x18\x01 \x01(\t\"\x1d\n\rExportRequest\x12\x0c\n\x04kbid\x18\x01 \x01(\t\"w\n\x11SetVectorsRequest\x12$\n\x07vectors\x18\x01 \x01(\x0b\x32\x13.utils.VectorObject\x12\x0c\n\x04kbid\x18\x02 \x01(\t\x12\x0b\n\x03rid\x18\x03 \x01(\t\x12!\n\x05\x66ield\x18\x04 \x01(\x0b\x32\x12.resources.FieldID\"#\n\x12SetVectorsResponse\x12\r\n\x05\x66ound\x18\x01 \x01(\x08\"*\n\x0b\x46ileRequest\x12\x0e\n\x06\x62ucket\x18\x01 \x01(\t\x12\x0b\n\x03key\x18\x02 \x01(\t\"\x1a\n\nBinaryData\x12\x0c\n\x04\x64\x61ta\x18\x01 \x01(\x0c\"a\n\x0e\x42inaryMetadata\x12\x0c\n\x04kbid\x18\x02 \x01(\t\x12\x0b\n\x03key\x18\x03 \x01(\t\x12\x0c\n\x04size\x18\x04 \x01(\x05\x12\x10\n\x08\x66ilename\x18\x05 \x01(\t\x12\x14\n\x0c\x63ontent_type\x18\x06 \x01(\t\"k\n\x10UploadBinaryData\x12\r\n\x05\x63ount\x18\x01 \x01(\x05\x12-\n\x08metadata\x18\x02 \x01(\x0b\x32\x19.fdbwriter.BinaryMetadataH\x00\x12\x11\n\x07payload\x18\x03 \x01(\x0cH\x00\x42\x06\n\x04\x64\x61ta\"\x0e\n\x0c\x46ileUploaded\"\x1f\n\x0fSynonymsRequest\x12\x0c\n\x04kbid\x18\x01 \x01(\t\"j\n\x12SetSynonymsRequest\x12*\n\x04kbid\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12(\n\x08synonyms\x18\x02 \x01(\x0b\x32\x16.knowledgebox.Synonyms\"j\n\x13GetSynonymsResponse\x12)\n\x06status\x18\x01 \x01(\x0b\x32\x19.fdbwriter.OpStatusWriter\x12(\n\x08synonyms\x18\x02 \x01(\x0b\x32\x16.knowledgebox.Synonyms2\xab\x16\n\x06Writer\x12M\n\x0fGetKnowledgeBox\x12\x1c.knowledgebox.KnowledgeBoxID\x1a\x1a.knowledgebox.KnowledgeBox\"\x00\x12Y\n\x0fNewKnowledgeBox\x12\x1d.knowledgebox.KnowledgeBoxNew\x1a%.knowledgebox.NewKnowledgeBoxResponse\"\x00\x12^\n\x12\x44\x65leteKnowledgeBox\x12\x1c.knowledgebox.KnowledgeBoxID\x1a(.knowledgebox.DeleteKnowledgeBoxResponse\"\x00\x12\x62\n\x12UpdateKnowledgeBox\x12 .knowledgebox.KnowledgeBoxUpdate\x1a(.knowledgebox.UpdateKnowledgeBoxResponse\"\x00\x12m\n CleanAndUpgradeKnowledgeBoxIndex\x12\x1c.knowledgebox.KnowledgeBoxID\x1a).knowledgebox.CleanedKnowledgeBoxResponse\"\x00\x12V\n\x10ListKnowledgeBox\x12 .knowledgebox.KnowledgeBoxPrefix\x1a\x1c.knowledgebox.KnowledgeBoxID\"\x00\x30\x01\x12V\n\x0eGCKnowledgeBox\x12\x1c.knowledgebox.KnowledgeBoxID\x1a$.knowledgebox.GCKnowledgeBoxResponse\"\x00\x12K\n\nSetVectors\x12\x1c.fdbwriter.SetVectorsRequest\x1a\x1d.fdbwriter.SetVectorsResponse\"\x00\x12[\n\x13ResourceFieldExists\x12\x1a.fdbwriter.ResourceFieldId\x1a&.fdbwriter.ResourceFieldExistsResponse\"\x00\x12N\n\rGetResourceId\x12\x1c.fdbwriter.ResourceIdRequest\x1a\x1d.fdbwriter.ResourceIdResponse\"\x00\x12I\n\x0eProcessMessage\x12\x18.fdbwriter.BrokerMessage\x1a\x19.fdbwriter.OpStatusWriter\"\x00(\x01\x12H\n\tGetLabels\x12\x1b.fdbwriter.GetLabelsRequest\x1a\x1c.fdbwriter.GetLabelsResponse\"\x00\x12N\n\x0bGetLabelSet\x12\x1d.fdbwriter.GetLabelSetRequest\x1a\x1e.fdbwriter.GetLabelSetResponse\"\x00\x12\x45\n\tSetLabels\x12\x1b.fdbwriter.SetLabelsRequest\x1a\x19.fdbwriter.OpStatusWriter\"\x00\x12\x45\n\tDelLabels\x12\x1b.fdbwriter.DelLabelsRequest\x1a\x19.fdbwriter.OpStatusWriter\"\x00\x12T\n\rGetVectorSets\x12\x1f.fdbwriter.GetVectorSetsRequest\x1a .fdbwriter.GetVectorSetsResponse\"\x00\x12K\n\x0c\x44\x65lVectorSet\x12\x1e.fdbwriter.DelVectorSetRequest\x1a\x19.fdbwriter.OpStatusWriter\"\x00\x12K\n\x0cSetVectorSet\x12\x1e.fdbwriter.SetVectorSetRequest\x1a\x19.fdbwriter.OpStatusWriter\"\x00\x12]\n\x10NewEntitiesGroup\x12\".fdbwriter.NewEntitiesGroupRequest\x1a#.fdbwriter.NewEntitiesGroupResponse\"\x00\x12N\n\x0bGetEntities\x12\x1d.fdbwriter.GetEntitiesRequest\x1a\x1e.fdbwriter.GetEntitiesResponse\"\x00\x12]\n\x10GetEntitiesGroup\x12\".fdbwriter.GetEntitiesGroupRequest\x1a#.fdbwriter.GetEntitiesGroupResponse\"\x00\x12\x63\n\x12ListEntitiesGroups\x12$.fdbwriter.ListEntitiesGroupsRequest\x1a%.fdbwriter.ListEntitiesGroupsResponse\"\x00\x12I\n\x0bSetEntities\x12\x1d.fdbwriter.SetEntitiesRequest\x1a\x19.fdbwriter.OpStatusWriter\"\x00\x12\x66\n\x13UpdateEntitiesGroup\x12%.fdbwriter.UpdateEntitiesGroupRequest\x1a&.fdbwriter.UpdateEntitiesGroupResponse\"\x00\x12I\n\x0b\x44\x65lEntities\x12\x1d.fdbwriter.DelEntitiesRequest\x1a\x19.fdbwriter.OpStatusWriter\"\x00\x12M\n\x0bGetSynonyms\x12\x1c.knowledgebox.KnowledgeBoxID\x1a\x1e.fdbwriter.GetSynonymsResponse\"\x00\x12I\n\x0bSetSynonyms\x12\x1d.fdbwriter.SetSynonymsRequest\x1a\x19.fdbwriter.OpStatusWriter\"\x00\x12H\n\x0b\x44\x65lSynonyms\x12\x1c.knowledgebox.KnowledgeBoxID\x1a\x19.fdbwriter.OpStatusWriter\"\x00\x12K\n\x06Status\x12\x1e.fdbwriter.WriterStatusRequest\x1a\x1f.fdbwriter.WriterStatusResponse\"\x00\x12L\n\x0bListMembers\x12\x1d.fdbwriter.ListMembersRequest\x1a\x1e.fdbwriter.ListMembersResponse\x12;\n\x05Index\x12\x18.fdbwriter.IndexResource\x1a\x16.fdbwriter.IndexStatus\"\x00\x12=\n\x07ReIndex\x12\x18.fdbwriter.IndexResource\x1a\x16.fdbwriter.IndexStatus\"\x00\x12@\n\x06\x45xport\x12\x18.fdbwriter.ExportRequest\x1a\x18.fdbwriter.BrokerMessage\"\x00\x30\x01\x12\x41\n\x0c\x44ownloadFile\x12\x16.fdbwriter.FileRequest\x1a\x15.fdbwriter.BinaryData\"\x00\x30\x01\x12\x46\n\nUploadFile\x12\x1b.fdbwriter.UploadBinaryData\x1a\x17.fdbwriter.FileUploaded\"\x00(\x01P\x01P\x02P\x03\x62\x06proto3')
+DESCRIPTOR = _descriptor_pool.Default().AddSerializedFile(b'\n\x1cnucliadb_protos/writer.proto\x12\tfdbwriter\x1a\x1fgoogle/protobuf/timestamp.proto\x1a#nucliadb_protos/noderesources.proto\x1a\x1fnucliadb_protos/resources.proto\x1a\"nucliadb_protos/knowledgebox.proto\"\xa8\x01\n\x05\x41udit\x12\x0c\n\x04user\x18\x01 \x01(\t\x12(\n\x04when\x18\x02 \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\x0e\n\x06origin\x18\x03 \x01(\t\x12\'\n\x06source\x18\x04 \x01(\x0e\x32\x17.fdbwriter.Audit.Source\".\n\x06Source\x12\x08\n\x04HTTP\x10\x00\x12\r\n\tDASHBOARD\x10\x01\x12\x0b\n\x07\x44\x45SKTOP\x10\x02\"\xad\x01\n\x05\x45rror\x12\r\n\x05\x66ield\x18\x01 \x01(\t\x12(\n\nfield_type\x18\x02 \x01(\x0e\x32\x14.resources.FieldType\x12\r\n\x05\x65rror\x18\x03 \x01(\t\x12(\n\x04\x63ode\x18\x04 \x01(\x0e\x32\x1a.fdbwriter.Error.ErrorCode\"2\n\tErrorCode\x12\x0b\n\x07GENERIC\x10\x00\x12\x0b\n\x07\x45XTRACT\x10\x01\x12\x0b\n\x07PROCESS\x10\x02\"\x97\x11\n\rBrokerMessage\x12\x0c\n\x04kbid\x18\x01 \x01(\t\x12\x0c\n\x04uuid\x18\x03 \x01(\t\x12\x0c\n\x04slug\x18\x04 \x01(\t\x12\x1f\n\x05\x61udit\x18\x05 \x01(\x0b\x32\x10.fdbwriter.Audit\x12\x32\n\x04type\x18\x06 \x01(\x0e\x32$.fdbwriter.BrokerMessage.MessageType\x12\x0f\n\x07multiid\x18\x07 \x01(\t\x12\x1f\n\x05\x62\x61sic\x18\x08 \x01(\x0b\x32\x10.resources.Basic\x12!\n\x06origin\x18\t \x01(\x0b\x32\x11.resources.Origin\x12\"\n\trelations\x18\n \x03(\x0b\x32\x0f.utils.Relation\x12\x42\n\rconversations\x18\x0b \x03(\x0b\x32+.fdbwriter.BrokerMessage.ConversationsEntry\x12\x36\n\x07layouts\x18\x0c \x03(\x0b\x32%.fdbwriter.BrokerMessage.LayoutsEntry\x12\x32\n\x05texts\x18\r \x03(\x0b\x32#.fdbwriter.BrokerMessage.TextsEntry\x12>\n\x0bkeywordsets\x18\x0e \x03(\x0b\x32).fdbwriter.BrokerMessage.KeywordsetsEntry\x12:\n\tdatetimes\x18\x0f \x03(\x0b\x32\'.fdbwriter.BrokerMessage.DatetimesEntry\x12\x32\n\x05links\x18\x10 \x03(\x0b\x32#.fdbwriter.BrokerMessage.LinksEntry\x12\x32\n\x05\x66iles\x18\x11 \x03(\x0b\x32#.fdbwriter.BrokerMessage.FilesEntry\x12\x39\n\x13link_extracted_data\x18\x12 \x03(\x0b\x32\x1c.resources.LinkExtractedData\x12\x39\n\x13\x66ile_extracted_data\x18\x13 \x03(\x0b\x32\x1c.resources.FileExtractedData\x12\x37\n\x0e\x65xtracted_text\x18\x14 \x03(\x0b\x32\x1f.resources.ExtractedTextWrapper\x12?\n\x0e\x66ield_metadata\x18\x15 \x03(\x0b\x32\'.resources.FieldComputedMetadataWrapper\x12\x39\n\rfield_vectors\x18\x16 \x03(\x0b\x32\".resources.ExtractedVectorsWrapper\x12\x45\n\x14\x66ield_large_metadata\x18\x17 \x03(\x0b\x32\'.resources.LargeComputedMetadataWrapper\x12)\n\rdelete_fields\x18\x18 \x03(\x0b\x32\x12.resources.FieldID\x12\x12\n\norigin_seq\x18\x19 \x01(\x05\x12\x1c\n\x14slow_processing_time\x18\x1a \x01(\x02\x12\x1b\n\x13pre_processing_time\x18\x1c \x01(\x02\x12-\n\tdone_time\x18\x1d \x01(\x0b\x32\x1a.google.protobuf.Timestamp\x12\x13\n\x07txseqid\x18\x1e \x01(\x03\x42\x02\x18\x01\x12 \n\x06\x65rrors\x18\x1f \x03(\x0b\x32\x10.fdbwriter.Error\x12\x15\n\rprocessing_id\x18  \x01(\t\x12\x36\n\x06source\x18! \x01(\x0e\x32&.fdbwriter.BrokerMessage.MessageSource\x12\x13\n\x0b\x61\x63\x63ount_seq\x18\" \x01(\x03\x12\x33\n\x0cuser_vectors\x18# \x03(\x0b\x32\x1d.resources.UserVectorsWrapper\x12\x0f\n\x07reindex\x18$ \x01(\x08\x12\x1f\n\x05\x65xtra\x18% \x01(\x0b\x32\x10.resources.Extra\x12?\n\x10question_answers\x18& \x03(\x0b\x32%.resources.FieldQuestionAnswerWrapper\x12!\n\x08security\x18\' \x01(\x0b\x32\x0f.utils.Security\x1aM\n\x12\x43onversationsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12&\n\x05value\x18\x02 \x01(\x0b\x32\x17.resources.Conversation:\x02\x38\x01\x1a\x46\n\x0cLayoutsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12%\n\x05value\x18\x02 \x01(\x0b\x32\x16.resources.FieldLayout:\x02\x38\x01\x1a\x42\n\nTextsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12#\n\x05value\x18\x02 \x01(\x0b\x32\x14.resources.FieldText:\x02\x38\x01\x1aN\n\x10KeywordsetsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12)\n\x05value\x18\x02 \x01(\x0b\x32\x1a.resources.FieldKeywordset:\x02\x38\x01\x1aJ\n\x0e\x44\x61tetimesEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\'\n\x05value\x18\x02 \x01(\x0b\x32\x18.resources.FieldDatetime:\x02\x38\x01\x1a\x42\n\nLinksEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12#\n\x05value\x18\x02 \x01(\x0b\x32\x14.resources.FieldLink:\x02\x38\x01\x1a\x42\n\nFilesEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12#\n\x05value\x18\x02 \x01(\x0b\x32\x14.resources.FieldFile:\x02\x38\x01\"N\n\x0bMessageType\x12\x0e\n\nAUTOCOMMIT\x10\x00\x12\t\n\x05MULTI\x10\x01\x12\n\n\x06\x43OMMIT\x10\x02\x12\x0c\n\x08ROLLBACK\x10\x03\x12\n\n\x06\x44\x45LETE\x10\x04\"*\n\rMessageSource\x12\n\n\x06WRITER\x10\x00\x12\r\n\tPROCESSOR\x10\x01\"M\n\x1a\x42rokerMessageBlobReference\x12\x0c\n\x04kbid\x18\x01 \x01(\t\x12\x0c\n\x04uuid\x18\x02 \x01(\t\x12\x13\n\x0bstorage_key\x18\x03 \x01(\t\"\x97\x01\n\x14WriterStatusResponse\x12\x16\n\x0eknowledgeboxes\x18\x01 \x03(\t\x12\x39\n\x05msgid\x18\x02 \x03(\x0b\x32*.fdbwriter.WriterStatusResponse.MsgidEntry\x1a,\n\nMsgidEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\x03:\x02\x38\x01\"\x15\n\x13WriterStatusRequest\"r\n\x10SetLabelsRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\n\n\x02id\x18\x02 \x01(\t\x12(\n\x08labelset\x18\x03 \x01(\x0b\x32\x16.knowledgebox.LabelSet\"H\n\x10\x44\x65lLabelsRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\n\n\x02id\x18\x02 \x01(\t\"\xb8\x01\n\x11GetLabelsResponse\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12$\n\x06labels\x18\x02 \x01(\x0b\x32\x14.knowledgebox.Labels\x12\x33\n\x06status\x18\x03 \x01(\x0e\x32#.fdbwriter.GetLabelsResponse.Status\"\x1e\n\x06Status\x12\x06\n\x02OK\x10\x00\x12\x0c\n\x08NOTFOUND\x10\x01\"<\n\x10GetLabelsRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\"\x81\x01\n\x17NewEntitiesGroupRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\r\n\x05group\x18\x02 \x01(\t\x12-\n\x08\x65ntities\x18\x03 \x01(\x0b\x32\x1b.knowledgebox.EntitiesGroup\"\x99\x01\n\x18NewEntitiesGroupResponse\x12:\n\x06status\x18\x01 \x01(\x0e\x32*.fdbwriter.NewEntitiesGroupResponse.Status\"A\n\x06Status\x12\x06\n\x02OK\x10\x00\x12\t\n\x05\x45RROR\x10\x01\x12\x10\n\x0cKB_NOT_FOUND\x10\x02\x12\x12\n\x0e\x41LREADY_EXISTS\x10\x03\"|\n\x12SetEntitiesRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\r\n\x05group\x18\x02 \x01(\t\x12-\n\x08\x65ntities\x18\x03 \x01(\x0b\x32\x1b.knowledgebox.EntitiesGroup\"\x8a\x03\n\x1aUpdateEntitiesGroupRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\r\n\x05group\x18\x02 \x01(\t\x12;\n\x03\x61\x64\x64\x18\x03 \x03(\x0b\x32..fdbwriter.UpdateEntitiesGroupRequest.AddEntry\x12\x41\n\x06update\x18\x04 \x03(\x0b\x32\x31.fdbwriter.UpdateEntitiesGroupRequest.UpdateEntry\x12\x0e\n\x06\x64\x65lete\x18\x05 \x03(\t\x12\r\n\x05title\x18\x06 \x01(\t\x12\r\n\x05\x63olor\x18\x07 \x01(\t\x1a@\n\x08\x41\x64\x64\x45ntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12#\n\x05value\x18\x02 \x01(\x0b\x32\x14.knowledgebox.Entity:\x02\x38\x01\x1a\x43\n\x0bUpdateEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12#\n\x05value\x18\x02 \x01(\x0b\x32\x14.knowledgebox.Entity:\x02\x38\x01\"\xa9\x01\n\x1bUpdateEntitiesGroupResponse\x12=\n\x06status\x18\x01 \x01(\x0e\x32-.fdbwriter.UpdateEntitiesGroupResponse.Status\"K\n\x06Status\x12\x06\n\x02OK\x10\x00\x12\t\n\x05\x45RROR\x10\x01\x12\x10\n\x0cKB_NOT_FOUND\x10\x02\x12\x1c\n\x18\x45NTITIES_GROUP_NOT_FOUND\x10\x03\"E\n\x19ListEntitiesGroupsRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\"\x9b\x02\n\x1aListEntitiesGroupsResponse\x12\x41\n\x06groups\x18\x01 \x03(\x0b\x32\x31.fdbwriter.ListEntitiesGroupsResponse.GroupsEntry\x12<\n\x06status\x18\x02 \x01(\x0e\x32,.fdbwriter.ListEntitiesGroupsResponse.Status\x1aQ\n\x0bGroupsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\x31\n\x05value\x18\x02 \x01(\x0b\x32\".knowledgebox.EntitiesGroupSummary:\x02\x38\x01\")\n\x06Status\x12\x06\n\x02OK\x10\x00\x12\x0c\n\x08NOTFOUND\x10\x01\x12\t\n\x05\x45RROR\x10\x02\">\n\x12GetEntitiesRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\"\xa9\x02\n\x13GetEntitiesResponse\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12:\n\x06groups\x18\x02 \x03(\x0b\x32*.fdbwriter.GetEntitiesResponse.GroupsEntry\x12\x35\n\x06status\x18\x03 \x01(\x0e\x32%.fdbwriter.GetEntitiesResponse.Status\x1aJ\n\x0bGroupsEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12*\n\x05value\x18\x02 \x01(\x0b\x32\x1b.knowledgebox.EntitiesGroup:\x02\x38\x01\")\n\x06Status\x12\x06\n\x02OK\x10\x00\x12\x0c\n\x08NOTFOUND\x10\x01\x12\t\n\x05\x45RROR\x10\x02\"M\n\x12\x44\x65lEntitiesRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\r\n\x05group\x18\x02 \x01(\t\"\xd9\x01\n\x14MergeEntitiesRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\x36\n\x04\x66rom\x18\x02 \x01(\x0b\x32(.fdbwriter.MergeEntitiesRequest.EntityID\x12\x34\n\x02to\x18\x03 \x01(\x0b\x32(.fdbwriter.MergeEntitiesRequest.EntityID\x1a)\n\x08\x45ntityID\x12\r\n\x05group\x18\x01 \x01(\t\x12\x0e\n\x06\x65ntity\x18\x02 \x01(\t\"P\n\x12GetLabelSetRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\x10\n\x08labelset\x18\x02 \x01(\t\"\xc0\x01\n\x13GetLabelSetResponse\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12(\n\x08labelset\x18\x02 \x01(\x0b\x32\x16.knowledgebox.LabelSet\x12\x35\n\x06status\x18\x03 \x01(\x0e\x32%.fdbwriter.GetLabelSetResponse.Status\"\x1e\n\x06Status\x12\x06\n\x02OK\x10\x00\x12\x0c\n\x08NOTFOUND\x10\x01\"R\n\x17GetEntitiesGroupRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\r\n\x05group\x18\x02 \x01(\t\"\xf9\x01\n\x18GetEntitiesGroupResponse\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12*\n\x05group\x18\x02 \x01(\x0b\x32\x1b.knowledgebox.EntitiesGroup\x12:\n\x06status\x18\x03 \x01(\x0e\x32*.fdbwriter.GetEntitiesGroupResponse.Status\"K\n\x06Status\x12\x06\n\x02OK\x10\x00\x12\x10\n\x0cKB_NOT_FOUND\x10\x01\x12\x1c\n\x18\x45NTITIES_GROUP_NOT_FOUND\x10\x02\x12\t\n\x05\x45RROR\x10\x03\"@\n\x14GetVectorSetsRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\"\xd3\x01\n\x15GetVectorSetsResponse\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12,\n\nvectorsets\x18\x02 \x01(\x0b\x32\x18.knowledgebox.VectorSets\x12\x37\n\x06status\x18\x03 \x01(\x0e\x32\'.fdbwriter.GetVectorSetsResponse.Status\")\n\x06Status\x12\x06\n\x02OK\x10\x00\x12\x0c\n\x08NOTFOUND\x10\x01\x12\t\n\x05\x45RROR\x10\x02\"R\n\x13\x44\x65lVectorSetRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\x11\n\tvectorset\x18\x02 \x01(\t\"w\n\x13SetVectorSetRequest\x12(\n\x02kb\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12\n\n\x02id\x18\x02 \x01(\t\x12*\n\tvectorset\x18\x03 \x01(\x0b\x32\x17.knowledgebox.VectorSet\"m\n\x0eOpStatusWriter\x12\x30\n\x06status\x18\x01 \x01(\x0e\x32 .fdbwriter.OpStatusWriter.Status\")\n\x06Status\x12\x06\n\x02OK\x10\x00\x12\t\n\x05\x45RROR\x10\x01\x12\x0c\n\x08NOTFOUND\x10\x02\"\xa5\x03\n\x0cNotification\x12\x11\n\tpartition\x18\x01 \x01(\x05\x12\r\n\x05multi\x18\x02 \x01(\t\x12\x0c\n\x04uuid\x18\x03 \x01(\t\x12\x0c\n\x04kbid\x18\x04 \x01(\t\x12\r\n\x05seqid\x18\x05 \x01(\x03\x12.\n\x06\x61\x63tion\x18\x06 \x01(\x0e\x32\x1e.fdbwriter.Notification.Action\x12\x35\n\nwrite_type\x18\x07 \x01(\x0e\x32!.fdbwriter.Notification.WriteType\x12)\n\x07message\x18\x08 \x01(\x0b\x32\x18.fdbwriter.BrokerMessage\x12-\n\x06source\x18\t \x01(\x0e\x32\x1d.fdbwriter.NotificationSource\x12\x19\n\x11processing_errors\x18\n \x01(\x08\",\n\x06\x41\x63tion\x12\n\n\x06\x43OMMIT\x10\x00\x12\t\n\x05\x41\x42ORT\x10\x01\x12\x0b\n\x07INDEXED\x10\x02\">\n\tWriteType\x12\t\n\x05UNSET\x10\x00\x12\x0b\n\x07\x43REATED\x10\x01\x12\x0c\n\x08MODIFIED\x10\x02\x12\x0b\n\x07\x44\x45LETED\x10\x03\"\xff\x01\n\x06Member\x12\n\n\x02id\x18\x01 \x01(\t\x12\x16\n\x0elisten_address\x18\x02 \x01(\t\x12\x13\n\x07is_self\x18\x03 \x01(\x08\x42\x02\x18\x01\x12(\n\x04type\x18\x04 \x01(\x0e\x32\x16.fdbwriter.Member.TypeB\x02\x18\x01\x12\x11\n\x05\x64ummy\x18\x05 \x01(\x08\x42\x02\x18\x01\x12\x16\n\nload_score\x18\x06 \x01(\x02\x42\x02\x18\x01\x12\x13\n\x0bshard_count\x18\x07 \x01(\r\x12\x12\n\nprimary_id\x18\x08 \x01(\t\">\n\x04Type\x12\x06\n\x02IO\x10\x00\x12\n\n\x06SEARCH\x10\x01\x12\n\n\x06INGEST\x10\x02\x12\t\n\x05TRAIN\x10\x03\x12\x0b\n\x07UNKNOWN\x10\x04\"\x14\n\x12ListMembersRequest\"9\n\x13ListMembersResponse\x12\"\n\x07members\x18\x01 \x03(\x0b\x32\x11.fdbwriter.Member\"H\n\x0cShardReplica\x12*\n\x05shard\x18\x01 \x01(\x0b\x32\x1b.noderesources.ShardCreated\x12\x0c\n\x04node\x18\x02 \x01(\t\"\x8d\x01\n\x0bShardObject\x12\r\n\x05shard\x18\x01 \x01(\t\x12)\n\x08replicas\x18\x03 \x03(\x0b\x32\x17.fdbwriter.ShardReplica\x12\x31\n\ttimestamp\x18\x04 \x01(\x0b\x32\x1a.google.protobuf.TimestampB\x02\x18\x01\x12\x11\n\tread_only\x18\x05 \x01(\x08\"\xc2\x02\n\x06Shards\x12&\n\x06shards\x18\x01 \x03(\x0b\x32\x16.fdbwriter.ShardObject\x12\x0c\n\x04kbid\x18\x02 \x01(\t\x12\x12\n\x06\x61\x63tual\x18\x03 \x01(\x05\x42\x02\x18\x01\x12/\n\nsimilarity\x18\x04 \x01(\x0e\x32\x17.utils.VectorSimilarityB\x02\x18\x01\x12\x32\n\x05model\x18\x05 \x01(\x0b\x32#.knowledgebox.SemanticModelMetadata\x12.\n\x0frelease_channel\x18\x06 \x01(\x0e\x32\x15.utils.ReleaseChannel\x12+\n\x05\x65xtra\x18\x07 \x03(\x0b\x32\x1c.fdbwriter.Shards.ExtraEntry\x1a,\n\nExtraEntry\x12\x0b\n\x03key\x18\x01 \x01(\t\x12\r\n\x05value\x18\x02 \x01(\t:\x02\x38\x01\"e\n\x0fResourceFieldId\x12\x0c\n\x04kbid\x18\x01 \x01(\t\x12\x0b\n\x03rid\x18\x02 \x01(\t\x12(\n\nfield_type\x18\x03 \x01(\x0e\x32\x14.resources.FieldType\x12\r\n\x05\x66ield\x18\x04 \x01(\t\"C\n\rIndexResource\x12\x0c\n\x04kbid\x18\x01 \x01(\t\x12\x0b\n\x03rid\x18\x02 \x01(\t\x12\x17\n\x0freindex_vectors\x18\x03 \x01(\x08\"\r\n\x0bIndexStatus\",\n\x1bResourceFieldExistsResponse\x12\r\n\x05\x66ound\x18\x01 \x01(\x08\"/\n\x11ResourceIdRequest\x12\x0c\n\x04kbid\x18\x01 \x01(\t\x12\x0c\n\x04slug\x18\x02 \x01(\t\"\"\n\x12ResourceIdResponse\x12\x0c\n\x04uuid\x18\x01 \x01(\t\"w\n\x11SetVectorsRequest\x12$\n\x07vectors\x18\x01 \x01(\x0b\x32\x13.utils.VectorObject\x12\x0c\n\x04kbid\x18\x02 \x01(\t\x12\x0b\n\x03rid\x18\x03 \x01(\t\x12!\n\x05\x66ield\x18\x04 \x01(\x0b\x32\x12.resources.FieldID\"#\n\x12SetVectorsResponse\x12\r\n\x05\x66ound\x18\x01 \x01(\x08\"*\n\x0b\x46ileRequest\x12\x0e\n\x06\x62ucket\x18\x01 \x01(\t\x12\x0b\n\x03key\x18\x02 \x01(\t\"\x1a\n\nBinaryData\x12\x0c\n\x04\x64\x61ta\x18\x01 \x01(\x0c\"a\n\x0e\x42inaryMetadata\x12\x0c\n\x04kbid\x18\x02 \x01(\t\x12\x0b\n\x03key\x18\x03 \x01(\t\x12\x0c\n\x04size\x18\x04 \x01(\x05\x12\x10\n\x08\x66ilename\x18\x05 \x01(\t\x12\x14\n\x0c\x63ontent_type\x18\x06 \x01(\t\"k\n\x10UploadBinaryData\x12\r\n\x05\x63ount\x18\x01 \x01(\x05\x12-\n\x08metadata\x18\x02 \x01(\x0b\x32\x19.fdbwriter.BinaryMetadataH\x00\x12\x11\n\x07payload\x18\x03 \x01(\x0cH\x00\x42\x06\n\x04\x64\x61ta\"\x0e\n\x0c\x46ileUploaded\"\x1f\n\x0fSynonymsRequest\x12\x0c\n\x04kbid\x18\x01 \x01(\t\"j\n\x12SetSynonymsRequest\x12*\n\x04kbid\x18\x01 \x01(\x0b\x32\x1c.knowledgebox.KnowledgeBoxID\x12(\n\x08synonyms\x18\x02 \x01(\x0b\x32\x16.knowledgebox.Synonyms\"j\n\x13GetSynonymsResponse\x12)\n\x06status\x18\x01 \x01(\x0b\x32\x19.fdbwriter.OpStatusWriter\x12(\n\x08synonyms\x18\x02 \x01(\x0b\x32\x16.knowledgebox.Synonyms*:\n\x12NotificationSource\x12\t\n\x05UNSET\x10\x00\x12\n\n\x06WRITER\x10\x01\x12\r\n\tPROCESSOR\x10\x02\x32\xd3\x13\n\x06Writer\x12Y\n\x0fNewKnowledgeBox\x12\x1d.knowledgebox.KnowledgeBoxNew\x1a%.knowledgebox.NewKnowledgeBoxResponse\"\x00\x12^\n\x12\x44\x65leteKnowledgeBox\x12\x1c.knowledgebox.KnowledgeBoxID\x1a(.knowledgebox.DeleteKnowledgeBoxResponse\"\x00\x12\x62\n\x12UpdateKnowledgeBox\x12 .knowledgebox.KnowledgeBoxUpdate\x1a(.knowledgebox.UpdateKnowledgeBoxResponse\"\x00\x12V\n\x0eGCKnowledgeBox\x12\x1c.knowledgebox.KnowledgeBoxID\x1a$.knowledgebox.GCKnowledgeBoxResponse\"\x00\x12K\n\nSetVectors\x12\x1c.fdbwriter.SetVectorsRequest\x1a\x1d.fdbwriter.SetVectorsResponse\"\x00\x12[\n\x13ResourceFieldExists\x12\x1a.fdbwriter.ResourceFieldId\x1a&.fdbwriter.ResourceFieldExistsResponse\"\x00\x12N\n\rGetResourceId\x12\x1c.fdbwriter.ResourceIdRequest\x1a\x1d.fdbwriter.ResourceIdResponse\"\x00\x12I\n\x0eProcessMessage\x12\x18.fdbwriter.BrokerMessage\x1a\x19.fdbwriter.OpStatusWriter\"\x00(\x01\x12H\n\tGetLabels\x12\x1b.fdbwriter.GetLabelsRequest\x1a\x1c.fdbwriter.GetLabelsResponse\"\x00\x12N\n\x0bGetLabelSet\x12\x1d.fdbwriter.GetLabelSetRequest\x1a\x1e.fdbwriter.GetLabelSetResponse\"\x00\x12\x45\n\tSetLabels\x12\x1b.fdbwriter.SetLabelsRequest\x1a\x19.fdbwriter.OpStatusWriter\"\x00\x12\x45\n\tDelLabels\x12\x1b.fdbwriter.DelLabelsRequest\x1a\x19.fdbwriter.OpStatusWriter\"\x00\x12T\n\rGetVectorSets\x12\x1f.fdbwriter.GetVectorSetsRequest\x1a .fdbwriter.GetVectorSetsResponse\"\x00\x12K\n\x0c\x44\x65lVectorSet\x12\x1e.fdbwriter.DelVectorSetRequest\x1a\x19.fdbwriter.OpStatusWriter\"\x00\x12K\n\x0cSetVectorSet\x12\x1e.fdbwriter.SetVectorSetRequest\x1a\x19.fdbwriter.OpStatusWriter\"\x00\x12]\n\x10NewEntitiesGroup\x12\".fdbwriter.NewEntitiesGroupRequest\x1a#.fdbwriter.NewEntitiesGroupResponse\"\x00\x12N\n\x0bGetEntities\x12\x1d.fdbwriter.GetEntitiesRequest\x1a\x1e.fdbwriter.GetEntitiesResponse\"\x00\x12]\n\x10GetEntitiesGroup\x12\".fdbwriter.GetEntitiesGroupRequest\x1a#.fdbwriter.GetEntitiesGroupResponse\"\x00\x12\x63\n\x12ListEntitiesGroups\x12$.fdbwriter.ListEntitiesGroupsRequest\x1a%.fdbwriter.ListEntitiesGroupsResponse\"\x00\x12I\n\x0bSetEntities\x12\x1d.fdbwriter.SetEntitiesRequest\x1a\x19.fdbwriter.OpStatusWriter\"\x00\x12\x66\n\x13UpdateEntitiesGroup\x12%.fdbwriter.UpdateEntitiesGroupRequest\x1a&.fdbwriter.UpdateEntitiesGroupResponse\"\x00\x12I\n\x0b\x44\x65lEntities\x12\x1d.fdbwriter.DelEntitiesRequest\x1a\x19.fdbwriter.OpStatusWriter\"\x00\x12M\n\x0bGetSynonyms\x12\x1c.knowledgebox.KnowledgeBoxID\x1a\x1e.fdbwriter.GetSynonymsResponse\"\x00\x12I\n\x0bSetSynonyms\x12\x1d.fdbwriter.SetSynonymsRequest\x1a\x19.fdbwriter.OpStatusWriter\"\x00\x12H\n\x0b\x44\x65lSynonyms\x12\x1c.knowledgebox.KnowledgeBoxID\x1a\x19.fdbwriter.OpStatusWriter\"\x00\x12K\n\x06Status\x12\x1e.fdbwriter.WriterStatusRequest\x1a\x1f.fdbwriter.WriterStatusResponse\"\x00\x12L\n\x0bListMembers\x12\x1d.fdbwriter.ListMembersRequest\x1a\x1e.fdbwriter.ListMembersResponse\x12;\n\x05Index\x12\x18.fdbwriter.IndexResource\x1a\x16.fdbwriter.IndexStatus\"\x00\x12=\n\x07ReIndex\x12\x18.fdbwriter.IndexResource\x1a\x16.fdbwriter.IndexStatus\"\x00\x12\x41\n\x0c\x44ownloadFile\x12\x16.fdbwriter.FileRequest\x1a\x15.fdbwriter.BinaryData\"\x00\x30\x01\x12\x46\n\nUploadFile\x12\x1b.fdbwriter.UploadBinaryData\x1a\x17.fdbwriter.FileUploaded\"\x00(\x01P\x01P\x02P\x03\x62\x06proto3')
 
-_builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, globals())
-_builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, 'nucliadb_protos.writer_pb2', globals())
+_globals = globals()
+_builder.BuildMessageAndEnumDescriptors(DESCRIPTOR, _globals)
+_builder.BuildTopDescriptorsAndMessages(DESCRIPTOR, 'nucliadb_protos.writer_pb2', _globals)
 if _descriptor._USE_C_DESCRIPTORS == False:
-
   DESCRIPTOR._options = None
-  _BROKERMESSAGE_CONVERSATIONSENTRY._options = None
-  _BROKERMESSAGE_CONVERSATIONSENTRY._serialized_options = b'8\001'
-  _BROKERMESSAGE_LAYOUTSENTRY._options = None
-  _BROKERMESSAGE_LAYOUTSENTRY._serialized_options = b'8\001'
-  _BROKERMESSAGE_TEXTSENTRY._options = None
-  _BROKERMESSAGE_TEXTSENTRY._serialized_options = b'8\001'
-  _BROKERMESSAGE_KEYWORDSETSENTRY._options = None
-  _BROKERMESSAGE_KEYWORDSETSENTRY._serialized_options = b'8\001'
-  _BROKERMESSAGE_DATETIMESENTRY._options = None
-  _BROKERMESSAGE_DATETIMESENTRY._serialized_options = b'8\001'
-  _BROKERMESSAGE_LINKSENTRY._options = None
-  _BROKERMESSAGE_LINKSENTRY._serialized_options = b'8\001'
-  _BROKERMESSAGE_FILESENTRY._options = None
-  _BROKERMESSAGE_FILESENTRY._serialized_options = b'8\001'
-  _BROKERMESSAGE.fields_by_name['txseqid']._options = None
-  _BROKERMESSAGE.fields_by_name['txseqid']._serialized_options = b'\030\001'
-  _WRITERSTATUSRESPONSE_MSGIDENTRY._options = None
-  _WRITERSTATUSRESPONSE_MSGIDENTRY._serialized_options = b'8\001'
-  _UPDATEENTITIESGROUPREQUEST_ADDENTRY._options = None
-  _UPDATEENTITIESGROUPREQUEST_ADDENTRY._serialized_options = b'8\001'
-  _UPDATEENTITIESGROUPREQUEST_UPDATEENTRY._options = None
-  _UPDATEENTITIESGROUPREQUEST_UPDATEENTRY._serialized_options = b'8\001'
-  _LISTENTITIESGROUPSRESPONSE_GROUPSENTRY._options = None
-  _LISTENTITIESGROUPSRESPONSE_GROUPSENTRY._serialized_options = b'8\001'
-  _GETENTITIESRESPONSE_GROUPSENTRY._options = None
-  _GETENTITIESRESPONSE_GROUPSENTRY._serialized_options = b'8\001'
-  _MEMBER.fields_by_name['load_score']._options = None
-  _MEMBER.fields_by_name['load_score']._serialized_options = b'\030\001'
-  _AUDIT._serialized_start=183
-  _AUDIT._serialized_end=351
-  _AUDIT_SOURCE._serialized_start=305
-  _AUDIT_SOURCE._serialized_end=351
-  _ERROR._serialized_start=354
-  _ERROR._serialized_end=527
-  _ERROR_ERRORCODE._serialized_start=477
-  _ERROR_ERRORCODE._serialized_end=527
-  _BROKERMESSAGE._serialized_start=530
-  _BROKERMESSAGE._serialized_end=2596
-  _BROKERMESSAGE_CONVERSATIONSENTRY._serialized_start=1963
-  _BROKERMESSAGE_CONVERSATIONSENTRY._serialized_end=2040
-  _BROKERMESSAGE_LAYOUTSENTRY._serialized_start=2042
-  _BROKERMESSAGE_LAYOUTSENTRY._serialized_end=2112
-  _BROKERMESSAGE_TEXTSENTRY._serialized_start=2114
-  _BROKERMESSAGE_TEXTSENTRY._serialized_end=2180
-  _BROKERMESSAGE_KEYWORDSETSENTRY._serialized_start=2182
-  _BROKERMESSAGE_KEYWORDSETSENTRY._serialized_end=2260
-  _BROKERMESSAGE_DATETIMESENTRY._serialized_start=2262
-  _BROKERMESSAGE_DATETIMESENTRY._serialized_end=2336
-  _BROKERMESSAGE_LINKSENTRY._serialized_start=2338
-  _BROKERMESSAGE_LINKSENTRY._serialized_end=2404
-  _BROKERMESSAGE_FILESENTRY._serialized_start=2406
-  _BROKERMESSAGE_FILESENTRY._serialized_end=2472
-  _BROKERMESSAGE_MESSAGETYPE._serialized_start=2474
-  _BROKERMESSAGE_MESSAGETYPE._serialized_end=2552
-  _BROKERMESSAGE_MESSAGESOURCE._serialized_start=2554
-  _BROKERMESSAGE_MESSAGESOURCE._serialized_end=2596
-  _WRITERSTATUSRESPONSE._serialized_start=2599
-  _WRITERSTATUSRESPONSE._serialized_end=2750
-  _WRITERSTATUSRESPONSE_MSGIDENTRY._serialized_start=2706
-  _WRITERSTATUSRESPONSE_MSGIDENTRY._serialized_end=2750
-  _WRITERSTATUSREQUEST._serialized_start=2752
-  _WRITERSTATUSREQUEST._serialized_end=2773
-  _SETLABELSREQUEST._serialized_start=2775
-  _SETLABELSREQUEST._serialized_end=2889
-  _DELLABELSREQUEST._serialized_start=2891
-  _DELLABELSREQUEST._serialized_end=2963
-  _GETLABELSRESPONSE._serialized_start=2966
-  _GETLABELSRESPONSE._serialized_end=3150
-  _GETLABELSRESPONSE_STATUS._serialized_start=3120
-  _GETLABELSRESPONSE_STATUS._serialized_end=3150
-  _GETLABELSREQUEST._serialized_start=3152
-  _GETLABELSREQUEST._serialized_end=3212
-  _NEWENTITIESGROUPREQUEST._serialized_start=3215
-  _NEWENTITIESGROUPREQUEST._serialized_end=3344
-  _NEWENTITIESGROUPRESPONSE._serialized_start=3347
-  _NEWENTITIESGROUPRESPONSE._serialized_end=3500
-  _NEWENTITIESGROUPRESPONSE_STATUS._serialized_start=3435
-  _NEWENTITIESGROUPRESPONSE_STATUS._serialized_end=3500
-  _SETENTITIESREQUEST._serialized_start=3502
-  _SETENTITIESREQUEST._serialized_end=3626
-  _UPDATEENTITIESGROUPREQUEST._serialized_start=3629
-  _UPDATEENTITIESGROUPREQUEST._serialized_end=4023
-  _UPDATEENTITIESGROUPREQUEST_ADDENTRY._serialized_start=3890
-  _UPDATEENTITIESGROUPREQUEST_ADDENTRY._serialized_end=3954
-  _UPDATEENTITIESGROUPREQUEST_UPDATEENTRY._serialized_start=3956
-  _UPDATEENTITIESGROUPREQUEST_UPDATEENTRY._serialized_end=4023
-  _UPDATEENTITIESGROUPRESPONSE._serialized_start=4026
-  _UPDATEENTITIESGROUPRESPONSE._serialized_end=4195
-  _UPDATEENTITIESGROUPRESPONSE_STATUS._serialized_start=4120
-  _UPDATEENTITIESGROUPRESPONSE_STATUS._serialized_end=4195
-  _LISTENTITIESGROUPSREQUEST._serialized_start=4197
-  _LISTENTITIESGROUPSREQUEST._serialized_end=4266
-  _LISTENTITIESGROUPSRESPONSE._serialized_start=4269
-  _LISTENTITIESGROUPSRESPONSE._serialized_end=4552
-  _LISTENTITIESGROUPSRESPONSE_GROUPSENTRY._serialized_start=4428
-  _LISTENTITIESGROUPSRESPONSE_GROUPSENTRY._serialized_end=4509
-  _LISTENTITIESGROUPSRESPONSE_STATUS._serialized_start=4511
-  _LISTENTITIESGROUPSRESPONSE_STATUS._serialized_end=4552
-  _GETENTITIESREQUEST._serialized_start=4554
-  _GETENTITIESREQUEST._serialized_end=4616
-  _GETENTITIESRESPONSE._serialized_start=4619
-  _GETENTITIESRESPONSE._serialized_end=4916
-  _GETENTITIESRESPONSE_GROUPSENTRY._serialized_start=4799
-  _GETENTITIESRESPONSE_GROUPSENTRY._serialized_end=4873
-  _GETENTITIESRESPONSE_STATUS._serialized_start=4511
-  _GETENTITIESRESPONSE_STATUS._serialized_end=4552
-  _DELENTITIESREQUEST._serialized_start=4918
-  _DELENTITIESREQUEST._serialized_end=4995
-  _MERGEENTITIESREQUEST._serialized_start=4998
-  _MERGEENTITIESREQUEST._serialized_end=5215
-  _MERGEENTITIESREQUEST_ENTITYID._serialized_start=5174
-  _MERGEENTITIESREQUEST_ENTITYID._serialized_end=5215
-  _GETLABELSETREQUEST._serialized_start=5217
-  _GETLABELSETREQUEST._serialized_end=5297
-  _GETLABELSETRESPONSE._serialized_start=5300
-  _GETLABELSETRESPONSE._serialized_end=5492
-  _GETLABELSETRESPONSE_STATUS._serialized_start=3120
-  _GETLABELSETRESPONSE_STATUS._serialized_end=3150
-  _GETENTITIESGROUPREQUEST._serialized_start=5494
-  _GETENTITIESGROUPREQUEST._serialized_end=5576
-  _GETENTITIESGROUPRESPONSE._serialized_start=5579
-  _GETENTITIESGROUPRESPONSE._serialized_end=5828
-  _GETENTITIESGROUPRESPONSE_STATUS._serialized_start=5753
-  _GETENTITIESGROUPRESPONSE_STATUS._serialized_end=5828
-  _GETVECTORSETSREQUEST._serialized_start=5830
-  _GETVECTORSETSREQUEST._serialized_end=5894
-  _GETVECTORSETSRESPONSE._serialized_start=5897
-  _GETVECTORSETSRESPONSE._serialized_end=6108
-  _GETVECTORSETSRESPONSE_STATUS._serialized_start=4511
-  _GETVECTORSETSRESPONSE_STATUS._serialized_end=4552
-  _DELVECTORSETREQUEST._serialized_start=6110
-  _DELVECTORSETREQUEST._serialized_end=6192
-  _SETVECTORSETREQUEST._serialized_start=6194
-  _SETVECTORSETREQUEST._serialized_end=6313
-  _OPSTATUSWRITER._serialized_start=6315
-  _OPSTATUSWRITER._serialized_end=6424
-  _OPSTATUSWRITER_STATUS._serialized_start=6383
-  _OPSTATUSWRITER_STATUS._serialized_end=6424
-  _NOTIFICATION._serialized_start=6427
-  _NOTIFICATION._serialized_end=6774
-  _NOTIFICATION_ACTION._serialized_start=6666
-  _NOTIFICATION_ACTION._serialized_end=6710
-  _NOTIFICATION_WRITETYPE._serialized_start=6712
-  _NOTIFICATION_WRITETYPE._serialized_end=6774
-  _MEMBER._serialized_start=6777
-  _MEMBER._serialized_end=7000
-  _MEMBER_TYPE._serialized_start=6938
-  _MEMBER_TYPE._serialized_end=7000
-  _LISTMEMBERSREQUEST._serialized_start=7002
-  _LISTMEMBERSREQUEST._serialized_end=7022
-  _LISTMEMBERSRESPONSE._serialized_start=7024
-  _LISTMEMBERSRESPONSE._serialized_end=7081
-  _SHARDREPLICA._serialized_start=7083
-  _SHARDREPLICA._serialized_end=7155
-  _SHARDOBJECT._serialized_start=7157
-  _SHARDOBJECT._serialized_end=7275
-  _SHARDS._serialized_start=7277
-  _SHARDS._serialized_end=7400
-  _RESOURCEFIELDID._serialized_start=7402
-  _RESOURCEFIELDID._serialized_end=7503
-  _INDEXRESOURCE._serialized_start=7505
-  _INDEXRESOURCE._serialized_end=7572
-  _INDEXSTATUS._serialized_start=7574
-  _INDEXSTATUS._serialized_end=7587
-  _RESOURCEFIELDEXISTSRESPONSE._serialized_start=7589
-  _RESOURCEFIELDEXISTSRESPONSE._serialized_end=7633
-  _RESOURCEIDREQUEST._serialized_start=7635
-  _RESOURCEIDREQUEST._serialized_end=7682
-  _RESOURCEIDRESPONSE._serialized_start=7684
-  _RESOURCEIDRESPONSE._serialized_end=7718
-  _EXPORTREQUEST._serialized_start=7720
-  _EXPORTREQUEST._serialized_end=7749
-  _SETVECTORSREQUEST._serialized_start=7751
-  _SETVECTORSREQUEST._serialized_end=7870
-  _SETVECTORSRESPONSE._serialized_start=7872
-  _SETVECTORSRESPONSE._serialized_end=7907
-  _FILEREQUEST._serialized_start=7909
-  _FILEREQUEST._serialized_end=7951
-  _BINARYDATA._serialized_start=7953
-  _BINARYDATA._serialized_end=7979
-  _BINARYMETADATA._serialized_start=7981
-  _BINARYMETADATA._serialized_end=8078
-  _UPLOADBINARYDATA._serialized_start=8080
-  _UPLOADBINARYDATA._serialized_end=8187
-  _FILEUPLOADED._serialized_start=8189
-  _FILEUPLOADED._serialized_end=8203
-  _SYNONYMSREQUEST._serialized_start=8205
-  _SYNONYMSREQUEST._serialized_end=8236
-  _SETSYNONYMSREQUEST._serialized_start=8238
-  _SETSYNONYMSREQUEST._serialized_end=8344
-  _GETSYNONYMSRESPONSE._serialized_start=8346
-  _GETSYNONYMSRESPONSE._serialized_end=8452
-  _WRITER._serialized_start=8455
-  _WRITER._serialized_end=11314
+  _globals['_BROKERMESSAGE_CONVERSATIONSENTRY']._options = None
+  _globals['_BROKERMESSAGE_CONVERSATIONSENTRY']._serialized_options = b'8\001'
+  _globals['_BROKERMESSAGE_LAYOUTSENTRY']._options = None
+  _globals['_BROKERMESSAGE_LAYOUTSENTRY']._serialized_options = b'8\001'
+  _globals['_BROKERMESSAGE_TEXTSENTRY']._options = None
+  _globals['_BROKERMESSAGE_TEXTSENTRY']._serialized_options = b'8\001'
+  _globals['_BROKERMESSAGE_KEYWORDSETSENTRY']._options = None
+  _globals['_BROKERMESSAGE_KEYWORDSETSENTRY']._serialized_options = b'8\001'
+  _globals['_BROKERMESSAGE_DATETIMESENTRY']._options = None
+  _globals['_BROKERMESSAGE_DATETIMESENTRY']._serialized_options = b'8\001'
+  _globals['_BROKERMESSAGE_LINKSENTRY']._options = None
+  _globals['_BROKERMESSAGE_LINKSENTRY']._serialized_options = b'8\001'
+  _globals['_BROKERMESSAGE_FILESENTRY']._options = None
+  _globals['_BROKERMESSAGE_FILESENTRY']._serialized_options = b'8\001'
+  _globals['_BROKERMESSAGE'].fields_by_name['txseqid']._options = None
+  _globals['_BROKERMESSAGE'].fields_by_name['txseqid']._serialized_options = b'\030\001'
+  _globals['_WRITERSTATUSRESPONSE_MSGIDENTRY']._options = None
+  _globals['_WRITERSTATUSRESPONSE_MSGIDENTRY']._serialized_options = b'8\001'
+  _globals['_UPDATEENTITIESGROUPREQUEST_ADDENTRY']._options = None
+  _globals['_UPDATEENTITIESGROUPREQUEST_ADDENTRY']._serialized_options = b'8\001'
+  _globals['_UPDATEENTITIESGROUPREQUEST_UPDATEENTRY']._options = None
+  _globals['_UPDATEENTITIESGROUPREQUEST_UPDATEENTRY']._serialized_options = b'8\001'
+  _globals['_LISTENTITIESGROUPSRESPONSE_GROUPSENTRY']._options = None
+  _globals['_LISTENTITIESGROUPSRESPONSE_GROUPSENTRY']._serialized_options = b'8\001'
+  _globals['_GETENTITIESRESPONSE_GROUPSENTRY']._options = None
+  _globals['_GETENTITIESRESPONSE_GROUPSENTRY']._serialized_options = b'8\001'
+  _globals['_MEMBER'].fields_by_name['is_self']._options = None
+  _globals['_MEMBER'].fields_by_name['is_self']._serialized_options = b'\030\001'
+  _globals['_MEMBER'].fields_by_name['type']._options = None
+  _globals['_MEMBER'].fields_by_name['type']._serialized_options = b'\030\001'
+  _globals['_MEMBER'].fields_by_name['dummy']._options = None
+  _globals['_MEMBER'].fields_by_name['dummy']._serialized_options = b'\030\001'
+  _globals['_MEMBER'].fields_by_name['load_score']._options = None
+  _globals['_MEMBER'].fields_by_name['load_score']._serialized_options = b'\030\001'
+  _globals['_SHARDOBJECT'].fields_by_name['timestamp']._options = None
+  _globals['_SHARDOBJECT'].fields_by_name['timestamp']._serialized_options = b'\030\001'
+  _globals['_SHARDS_EXTRAENTRY']._options = None
+  _globals['_SHARDS_EXTRAENTRY']._serialized_options = b'8\001'
+  _globals['_SHARDS'].fields_by_name['actual']._options = None
+  _globals['_SHARDS'].fields_by_name['actual']._serialized_options = b'\030\001'
+  _globals['_SHARDS'].fields_by_name['similarity']._options = None
+  _globals['_SHARDS'].fields_by_name['similarity']._serialized_options = b'\030\001'
+  _globals['_NOTIFICATIONSOURCE']._serialized_start=8965
+  _globals['_NOTIFICATIONSOURCE']._serialized_end=9023
+  _globals['_AUDIT']._serialized_start=183
+  _globals['_AUDIT']._serialized_end=351
+  _globals['_AUDIT_SOURCE']._serialized_start=305
+  _globals['_AUDIT_SOURCE']._serialized_end=351
+  _globals['_ERROR']._serialized_start=354
+  _globals['_ERROR']._serialized_end=527
+  _globals['_ERROR_ERRORCODE']._serialized_start=477
+  _globals['_ERROR_ERRORCODE']._serialized_end=527
+  _globals['_BROKERMESSAGE']._serialized_start=530
+  _globals['_BROKERMESSAGE']._serialized_end=2729
+  _globals['_BROKERMESSAGE_CONVERSATIONSENTRY']._serialized_start=2096
+  _globals['_BROKERMESSAGE_CONVERSATIONSENTRY']._serialized_end=2173
+  _globals['_BROKERMESSAGE_LAYOUTSENTRY']._serialized_start=2175
+  _globals['_BROKERMESSAGE_LAYOUTSENTRY']._serialized_end=2245
+  _globals['_BROKERMESSAGE_TEXTSENTRY']._serialized_start=2247
+  _globals['_BROKERMESSAGE_TEXTSENTRY']._serialized_end=2313
+  _globals['_BROKERMESSAGE_KEYWORDSETSENTRY']._serialized_start=2315
+  _globals['_BROKERMESSAGE_KEYWORDSETSENTRY']._serialized_end=2393
+  _globals['_BROKERMESSAGE_DATETIMESENTRY']._serialized_start=2395
+  _globals['_BROKERMESSAGE_DATETIMESENTRY']._serialized_end=2469
+  _globals['_BROKERMESSAGE_LINKSENTRY']._serialized_start=2471
+  _globals['_BROKERMESSAGE_LINKSENTRY']._serialized_end=2537
+  _globals['_BROKERMESSAGE_FILESENTRY']._serialized_start=2539
+  _globals['_BROKERMESSAGE_FILESENTRY']._serialized_end=2605
+  _globals['_BROKERMESSAGE_MESSAGETYPE']._serialized_start=2607
+  _globals['_BROKERMESSAGE_MESSAGETYPE']._serialized_end=2685
+  _globals['_BROKERMESSAGE_MESSAGESOURCE']._serialized_start=2687
+  _globals['_BROKERMESSAGE_MESSAGESOURCE']._serialized_end=2729
+  _globals['_BROKERMESSAGEBLOBREFERENCE']._serialized_start=2731
+  _globals['_BROKERMESSAGEBLOBREFERENCE']._serialized_end=2808
+  _globals['_WRITERSTATUSRESPONSE']._serialized_start=2811
+  _globals['_WRITERSTATUSRESPONSE']._serialized_end=2962
+  _globals['_WRITERSTATUSRESPONSE_MSGIDENTRY']._serialized_start=2918
+  _globals['_WRITERSTATUSRESPONSE_MSGIDENTRY']._serialized_end=2962
+  _globals['_WRITERSTATUSREQUEST']._serialized_start=2964
+  _globals['_WRITERSTATUSREQUEST']._serialized_end=2985
+  _globals['_SETLABELSREQUEST']._serialized_start=2987
+  _globals['_SETLABELSREQUEST']._serialized_end=3101
+  _globals['_DELLABELSREQUEST']._serialized_start=3103
+  _globals['_DELLABELSREQUEST']._serialized_end=3175
+  _globals['_GETLABELSRESPONSE']._serialized_start=3178
+  _globals['_GETLABELSRESPONSE']._serialized_end=3362
+  _globals['_GETLABELSRESPONSE_STATUS']._serialized_start=3332
+  _globals['_GETLABELSRESPONSE_STATUS']._serialized_end=3362
+  _globals['_GETLABELSREQUEST']._serialized_start=3364
+  _globals['_GETLABELSREQUEST']._serialized_end=3424
+  _globals['_NEWENTITIESGROUPREQUEST']._serialized_start=3427
+  _globals['_NEWENTITIESGROUPREQUEST']._serialized_end=3556
+  _globals['_NEWENTITIESGROUPRESPONSE']._serialized_start=3559
+  _globals['_NEWENTITIESGROUPRESPONSE']._serialized_end=3712
+  _globals['_NEWENTITIESGROUPRESPONSE_STATUS']._serialized_start=3647
+  _globals['_NEWENTITIESGROUPRESPONSE_STATUS']._serialized_end=3712
+  _globals['_SETENTITIESREQUEST']._serialized_start=3714
+  _globals['_SETENTITIESREQUEST']._serialized_end=3838
+  _globals['_UPDATEENTITIESGROUPREQUEST']._serialized_start=3841
+  _globals['_UPDATEENTITIESGROUPREQUEST']._serialized_end=4235
+  _globals['_UPDATEENTITIESGROUPREQUEST_ADDENTRY']._serialized_start=4102
+  _globals['_UPDATEENTITIESGROUPREQUEST_ADDENTRY']._serialized_end=4166
+  _globals['_UPDATEENTITIESGROUPREQUEST_UPDATEENTRY']._serialized_start=4168
+  _globals['_UPDATEENTITIESGROUPREQUEST_UPDATEENTRY']._serialized_end=4235
+  _globals['_UPDATEENTITIESGROUPRESPONSE']._serialized_start=4238
+  _globals['_UPDATEENTITIESGROUPRESPONSE']._serialized_end=4407
+  _globals['_UPDATEENTITIESGROUPRESPONSE_STATUS']._serialized_start=4332
+  _globals['_UPDATEENTITIESGROUPRESPONSE_STATUS']._serialized_end=4407
+  _globals['_LISTENTITIESGROUPSREQUEST']._serialized_start=4409
+  _globals['_LISTENTITIESGROUPSREQUEST']._serialized_end=4478
+  _globals['_LISTENTITIESGROUPSRESPONSE']._serialized_start=4481
+  _globals['_LISTENTITIESGROUPSRESPONSE']._serialized_end=4764
+  _globals['_LISTENTITIESGROUPSRESPONSE_GROUPSENTRY']._serialized_start=4640
+  _globals['_LISTENTITIESGROUPSRESPONSE_GROUPSENTRY']._serialized_end=4721
+  _globals['_LISTENTITIESGROUPSRESPONSE_STATUS']._serialized_start=4723
+  _globals['_LISTENTITIESGROUPSRESPONSE_STATUS']._serialized_end=4764
+  _globals['_GETENTITIESREQUEST']._serialized_start=4766
+  _globals['_GETENTITIESREQUEST']._serialized_end=4828
+  _globals['_GETENTITIESRESPONSE']._serialized_start=4831
+  _globals['_GETENTITIESRESPONSE']._serialized_end=5128
+  _globals['_GETENTITIESRESPONSE_GROUPSENTRY']._serialized_start=5011
+  _globals['_GETENTITIESRESPONSE_GROUPSENTRY']._serialized_end=5085
+  _globals['_GETENTITIESRESPONSE_STATUS']._serialized_start=4723
+  _globals['_GETENTITIESRESPONSE_STATUS']._serialized_end=4764
+  _globals['_DELENTITIESREQUEST']._serialized_start=5130
+  _globals['_DELENTITIESREQUEST']._serialized_end=5207
+  _globals['_MERGEENTITIESREQUEST']._serialized_start=5210
+  _globals['_MERGEENTITIESREQUEST']._serialized_end=5427
+  _globals['_MERGEENTITIESREQUEST_ENTITYID']._serialized_start=5386
+  _globals['_MERGEENTITIESREQUEST_ENTITYID']._serialized_end=5427
+  _globals['_GETLABELSETREQUEST']._serialized_start=5429
+  _globals['_GETLABELSETREQUEST']._serialized_end=5509
+  _globals['_GETLABELSETRESPONSE']._serialized_start=5512
+  _globals['_GETLABELSETRESPONSE']._serialized_end=5704
+  _globals['_GETLABELSETRESPONSE_STATUS']._serialized_start=3332
+  _globals['_GETLABELSETRESPONSE_STATUS']._serialized_end=3362
+  _globals['_GETENTITIESGROUPREQUEST']._serialized_start=5706
+  _globals['_GETENTITIESGROUPREQUEST']._serialized_end=5788
+  _globals['_GETENTITIESGROUPRESPONSE']._serialized_start=5791
+  _globals['_GETENTITIESGROUPRESPONSE']._serialized_end=6040
+  _globals['_GETENTITIESGROUPRESPONSE_STATUS']._serialized_start=5965
+  _globals['_GETENTITIESGROUPRESPONSE_STATUS']._serialized_end=6040
+  _globals['_GETVECTORSETSREQUEST']._serialized_start=6042
+  _globals['_GETVECTORSETSREQUEST']._serialized_end=6106
+  _globals['_GETVECTORSETSRESPONSE']._serialized_start=6109
+  _globals['_GETVECTORSETSRESPONSE']._serialized_end=6320
+  _globals['_GETVECTORSETSRESPONSE_STATUS']._serialized_start=4723
+  _globals['_GETVECTORSETSRESPONSE_STATUS']._serialized_end=4764
+  _globals['_DELVECTORSETREQUEST']._serialized_start=6322
+  _globals['_DELVECTORSETREQUEST']._serialized_end=6404
+  _globals['_SETVECTORSETREQUEST']._serialized_start=6406
+  _globals['_SETVECTORSETREQUEST']._serialized_end=6525
+  _globals['_OPSTATUSWRITER']._serialized_start=6527
+  _globals['_OPSTATUSWRITER']._serialized_end=6636
+  _globals['_OPSTATUSWRITER_STATUS']._serialized_start=6595
+  _globals['_OPSTATUSWRITER_STATUS']._serialized_end=6636
+  _globals['_NOTIFICATION']._serialized_start=6639
+  _globals['_NOTIFICATION']._serialized_end=7060
+  _globals['_NOTIFICATION_ACTION']._serialized_start=6952
+  _globals['_NOTIFICATION_ACTION']._serialized_end=6996
+  _globals['_NOTIFICATION_WRITETYPE']._serialized_start=6998
+  _globals['_NOTIFICATION_WRITETYPE']._serialized_end=7060
+  _globals['_MEMBER']._serialized_start=7063
+  _globals['_MEMBER']._serialized_end=7318
+  _globals['_MEMBER_TYPE']._serialized_start=7256
+  _globals['_MEMBER_TYPE']._serialized_end=7318
+  _globals['_LISTMEMBERSREQUEST']._serialized_start=7320
+  _globals['_LISTMEMBERSREQUEST']._serialized_end=7340
+  _globals['_LISTMEMBERSRESPONSE']._serialized_start=7342
+  _globals['_LISTMEMBERSRESPONSE']._serialized_end=7399
+  _globals['_SHARDREPLICA']._serialized_start=7401
+  _globals['_SHARDREPLICA']._serialized_end=7473
+  _globals['_SHARDOBJECT']._serialized_start=7476
+  _globals['_SHARDOBJECT']._serialized_end=7617
+  _globals['_SHARDS']._serialized_start=7620
+  _globals['_SHARDS']._serialized_end=7942
+  _globals['_SHARDS_EXTRAENTRY']._serialized_start=7898
+  _globals['_SHARDS_EXTRAENTRY']._serialized_end=7942
+  _globals['_RESOURCEFIELDID']._serialized_start=7944
+  _globals['_RESOURCEFIELDID']._serialized_end=8045
+  _globals['_INDEXRESOURCE']._serialized_start=8047
+  _globals['_INDEXRESOURCE']._serialized_end=8114
+  _globals['_INDEXSTATUS']._serialized_start=8116
+  _globals['_INDEXSTATUS']._serialized_end=8129
+  _globals['_RESOURCEFIELDEXISTSRESPONSE']._serialized_start=8131
+  _globals['_RESOURCEFIELDEXISTSRESPONSE']._serialized_end=8175
+  _globals['_RESOURCEIDREQUEST']._serialized_start=8177
+  _globals['_RESOURCEIDREQUEST']._serialized_end=8224
+  _globals['_RESOURCEIDRESPONSE']._serialized_start=8226
+  _globals['_RESOURCEIDRESPONSE']._serialized_end=8260
+  _globals['_SETVECTORSREQUEST']._serialized_start=8262
+  _globals['_SETVECTORSREQUEST']._serialized_end=8381
+  _globals['_SETVECTORSRESPONSE']._serialized_start=8383
+  _globals['_SETVECTORSRESPONSE']._serialized_end=8418
+  _globals['_FILEREQUEST']._serialized_start=8420
+  _globals['_FILEREQUEST']._serialized_end=8462
+  _globals['_BINARYDATA']._serialized_start=8464
+  _globals['_BINARYDATA']._serialized_end=8490
+  _globals['_BINARYMETADATA']._serialized_start=8492
+  _globals['_BINARYMETADATA']._serialized_end=8589
+  _globals['_UPLOADBINARYDATA']._serialized_start=8591
+  _globals['_UPLOADBINARYDATA']._serialized_end=8698
+  _globals['_FILEUPLOADED']._serialized_start=8700
+  _globals['_FILEUPLOADED']._serialized_end=8714
+  _globals['_SYNONYMSREQUEST']._serialized_start=8716
+  _globals['_SYNONYMSREQUEST']._serialized_end=8747
+  _globals['_SETSYNONYMSREQUEST']._serialized_start=8749
+  _globals['_SETSYNONYMSREQUEST']._serialized_end=8855
+  _globals['_GETSYNONYMSRESPONSE']._serialized_start=8857
+  _globals['_GETSYNONYMSRESPONSE']._serialized_end=8963
+  _globals['_WRITER']._serialized_start=9026
+  _globals['_WRITER']._serialized_end=11541
 # @@protoc_insertion_point(module_scope)
```

## nucliadb_protos/writer_pb2.pyi

```diff
@@ -18,35 +18,36 @@
 
 if sys.version_info >= (3, 10):
     import typing as typing_extensions
 else:
     import typing_extensions
 from nucliadb_protos.knowledgebox_pb2 import (
     CONFLICT as CONFLICT,
-    CleanedKnowledgeBoxResponse as CleanedKnowledgeBoxResponse,
     DeleteKnowledgeBoxResponse as DeleteKnowledgeBoxResponse,
     DeletedEntitiesGroups as DeletedEntitiesGroups,
     ERROR as ERROR,
     EntitiesGroup as EntitiesGroup,
     EntitiesGroupSummary as EntitiesGroupSummary,
+    EntitiesGroups as EntitiesGroups,
     Entity as Entity,
+    EntityGroupDuplicateIndex as EntityGroupDuplicateIndex,
     GCKnowledgeBoxResponse as GCKnowledgeBoxResponse,
-    KnowledgeBox as KnowledgeBox,
+    KBConfiguration as KBConfiguration,
     KnowledgeBoxConfig as KnowledgeBoxConfig,
     KnowledgeBoxID as KnowledgeBoxID,
     KnowledgeBoxNew as KnowledgeBoxNew,
-    KnowledgeBoxPrefix as KnowledgeBoxPrefix,
     KnowledgeBoxResponseStatus as KnowledgeBoxResponseStatus,
     KnowledgeBoxUpdate as KnowledgeBoxUpdate,
     Label as Label,
     LabelSet as LabelSet,
     Labels as Labels,
     NOTFOUND as NOTFOUND,
     NewKnowledgeBoxResponse as NewKnowledgeBoxResponse,
     OK as OK,
+    SemanticModelMetadata as SemanticModelMetadata,
     Synonyms as Synonyms,
     TermSynonyms as TermSynonyms,
     UpdateKnowledgeBoxResponse as UpdateKnowledgeBoxResponse,
     VectorSet as VectorSet,
     VectorSets as VectorSets,
 )
 from nucliadb_protos.noderesources_pb2 import (
@@ -54,39 +55,41 @@
     EmptyResponse as EmptyResponse,
     IndexMetadata as IndexMetadata,
     IndexParagraph as IndexParagraph,
     IndexParagraphs as IndexParagraphs,
     NodeMetadata as NodeMetadata,
     ParagraphMetadata as ParagraphMetadata,
     Position as Position,
+    Representation as Representation,
     Resource as Resource,
     ResourceID as ResourceID,
     SentenceMetadata as SentenceMetadata,
     Shard as Shard,
-    ShardCleaned as ShardCleaned,
     ShardCreated as ShardCreated,
     ShardId as ShardId,
     ShardIds as ShardIds,
-    ShardList as ShardList,
     ShardMetadata as ShardMetadata,
     TextInformation as TextInformation,
     VectorSentence as VectorSentence,
     VectorSetID as VectorSetID,
     VectorSetList as VectorSetList,
 )
 from nucliadb_protos.resources_pb2 import (
+    AllFieldIDs as AllFieldIDs,
+    Answers as Answers,
     Basic as Basic,
     Block as Block,
     CONVERSATION as CONVERSATION,
     Classification as Classification,
     CloudFile as CloudFile,
     ComputedMetadata as ComputedMetadata,
     Conversation as Conversation,
     DATETIME as DATETIME,
     Entity as Entity,
+    Extra as Extra,
     ExtractedTextWrapper as ExtractedTextWrapper,
     ExtractedVectorsWrapper as ExtractedVectorsWrapper,
     FILE as FILE,
     FieldClassifications as FieldClassifications,
     FieldComputedMetadata as FieldComputedMetadata,
     FieldComputedMetadataWrapper as FieldComputedMetadataWrapper,
     FieldConversation as FieldConversation,
@@ -94,14 +97,15 @@
     FieldFile as FieldFile,
     FieldID as FieldID,
     FieldKeywordset as FieldKeywordset,
     FieldLargeMetadata as FieldLargeMetadata,
     FieldLayout as FieldLayout,
     FieldLink as FieldLink,
     FieldMetadata as FieldMetadata,
+    FieldQuestionAnswerWrapper as FieldQuestionAnswerWrapper,
     FieldText as FieldText,
     FieldType as FieldType,
     FileExtractedData as FileExtractedData,
     FilePages as FilePages,
     GENERIC as GENERIC,
     KEYWORDSET as KEYWORDSET,
     Keyword as Keyword,
@@ -113,42 +117,70 @@
     LinkExtractedData as LinkExtractedData,
     Message as Message,
     MessageContent as MessageContent,
     Metadata as Metadata,
     NestedListPosition as NestedListPosition,
     NestedPosition as NestedPosition,
     Origin as Origin,
+    PageInformation as PageInformation,
     PagePositions as PagePositions,
+    PageSelections as PageSelections,
+    PageStructure as PageStructure,
+    PageStructurePage as PageStructurePage,
+    PageStructureToken as PageStructureToken,
     Paragraph as Paragraph,
     ParagraphAnnotation as ParagraphAnnotation,
     Position as Position,
     Positions as Positions,
+    Question as Question,
+    QuestionAnswer as QuestionAnswer,
+    QuestionAnswerAnnotation as QuestionAnswerAnnotation,
+    QuestionAnswers as QuestionAnswers,
     Relations as Relations,
+    Representation as Representation,
     RowsPreview as RowsPreview,
     Sentence as Sentence,
     TEXT as TEXT,
     TokenSplit as TokenSplit,
     UserFieldMetadata as UserFieldMetadata,
     UserMetadata as UserMetadata,
     UserVectorsWrapper as UserVectorsWrapper,
+    VisualSelection as VisualSelection,
 )
 
 DESCRIPTOR: google.protobuf.descriptor.FileDescriptor
 
+class _NotificationSource:
+    ValueType = typing.NewType("ValueType", builtins.int)
+    V: typing_extensions.TypeAlias = ValueType
+
+class _NotificationSourceEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[_NotificationSource.ValueType], builtins.type):
+    DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
+    UNSET: _NotificationSource.ValueType  # 0
+    WRITER: _NotificationSource.ValueType  # 1
+    PROCESSOR: _NotificationSource.ValueType  # 2
+
+class NotificationSource(_NotificationSource, metaclass=_NotificationSourceEnumTypeWrapper): ...
+
+UNSET: NotificationSource.ValueType  # 0
+WRITER: NotificationSource.ValueType  # 1
+PROCESSOR: NotificationSource.ValueType  # 2
+global___NotificationSource = NotificationSource
+
 @typing_extensions.final
 class Audit(google.protobuf.message.Message):
     """We receive this information throw an stream system"""
 
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _Source:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _SourceEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Audit._Source.ValueType], builtins.type):  # noqa: F821
+    class _SourceEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Audit._Source.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         HTTP: Audit._Source.ValueType  # 0
         DASHBOARD: Audit._Source.ValueType  # 1
         DESKTOP: Audit._Source.ValueType  # 2
 
     class Source(_Source, metaclass=_SourceEnumTypeWrapper): ...
     HTTP: Audit.Source.ValueType  # 0
@@ -181,15 +213,15 @@
 class Error(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _ErrorCode:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _ErrorCodeEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Error._ErrorCode.ValueType], builtins.type):  # noqa: F821
+    class _ErrorCodeEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Error._ErrorCode.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         GENERIC: Error._ErrorCode.ValueType  # 0
         EXTRACT: Error._ErrorCode.ValueType  # 1
         PROCESS: Error._ErrorCode.ValueType  # 2
 
     class ErrorCode(_ErrorCode, metaclass=_ErrorCodeEnumTypeWrapper): ...
     GENERIC: Error.ErrorCode.ValueType  # 0
@@ -220,15 +252,15 @@
 class BrokerMessage(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _MessageType:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _MessageTypeEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[BrokerMessage._MessageType.ValueType], builtins.type):  # noqa: F821
+    class _MessageTypeEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[BrokerMessage._MessageType.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         AUTOCOMMIT: BrokerMessage._MessageType.ValueType  # 0
         MULTI: BrokerMessage._MessageType.ValueType  # 1
         COMMIT: BrokerMessage._MessageType.ValueType  # 2
         ROLLBACK: BrokerMessage._MessageType.ValueType  # 3
         DELETE: BrokerMessage._MessageType.ValueType  # 4
 
@@ -239,15 +271,15 @@
     ROLLBACK: BrokerMessage.MessageType.ValueType  # 3
     DELETE: BrokerMessage.MessageType.ValueType  # 4
 
     class _MessageSource:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _MessageSourceEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[BrokerMessage._MessageSource.ValueType], builtins.type):  # noqa: F821
+    class _MessageSourceEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[BrokerMessage._MessageSource.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         WRITER: BrokerMessage._MessageSource.ValueType  # 0
         PROCESSOR: BrokerMessage._MessageSource.ValueType  # 1
 
     class MessageSource(_MessageSource, metaclass=_MessageSourceEnumTypeWrapper): ...
     WRITER: BrokerMessage.MessageSource.ValueType  # 0
     PROCESSOR: BrokerMessage.MessageSource.ValueType  # 1
@@ -408,14 +440,17 @@
     TXSEQID_FIELD_NUMBER: builtins.int
     ERRORS_FIELD_NUMBER: builtins.int
     PROCESSING_ID_FIELD_NUMBER: builtins.int
     SOURCE_FIELD_NUMBER: builtins.int
     ACCOUNT_SEQ_FIELD_NUMBER: builtins.int
     USER_VECTORS_FIELD_NUMBER: builtins.int
     REINDEX_FIELD_NUMBER: builtins.int
+    EXTRA_FIELD_NUMBER: builtins.int
+    QUESTION_ANSWERS_FIELD_NUMBER: builtins.int
+    SECURITY_FIELD_NUMBER: builtins.int
     kbid: builtins.str
     uuid: builtins.str
     slug: builtins.str
     @property
     def audit(self) -> global___Audit: ...
     type: global___BrokerMessage.MessageType.ValueType
     multiid: builtins.str
@@ -476,14 +511,20 @@
     processing_id: builtins.str
     source: global___BrokerMessage.MessageSource.ValueType
     account_seq: builtins.int
     @property
     def user_vectors(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[nucliadb_protos.resources_pb2.UserVectorsWrapper]: ...
     reindex: builtins.bool
     """If true, force reindex all paragraphs in a resource"""
+    @property
+    def extra(self) -> nucliadb_protos.resources_pb2.Extra: ...
+    @property
+    def question_answers(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[nucliadb_protos.resources_pb2.FieldQuestionAnswerWrapper]: ...
+    @property
+    def security(self) -> nucliadb_protos.utils_pb2.Security: ...
     def __init__(
         self,
         *,
         kbid: builtins.str = ...,
         uuid: builtins.str = ...,
         slug: builtins.str = ...,
         audit: global___Audit | None = ...,
@@ -513,21 +554,45 @@
         txseqid: builtins.int = ...,
         errors: collections.abc.Iterable[global___Error] | None = ...,
         processing_id: builtins.str = ...,
         source: global___BrokerMessage.MessageSource.ValueType = ...,
         account_seq: builtins.int = ...,
         user_vectors: collections.abc.Iterable[nucliadb_protos.resources_pb2.UserVectorsWrapper] | None = ...,
         reindex: builtins.bool = ...,
+        extra: nucliadb_protos.resources_pb2.Extra | None = ...,
+        question_answers: collections.abc.Iterable[nucliadb_protos.resources_pb2.FieldQuestionAnswerWrapper] | None = ...,
+        security: nucliadb_protos.utils_pb2.Security | None = ...,
     ) -> None: ...
-    def HasField(self, field_name: typing_extensions.Literal["audit", b"audit", "basic", b"basic", "done_time", b"done_time", "origin", b"origin"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["account_seq", b"account_seq", "audit", b"audit", "basic", b"basic", "conversations", b"conversations", "datetimes", b"datetimes", "delete_fields", b"delete_fields", "done_time", b"done_time", "errors", b"errors", "extracted_text", b"extracted_text", "field_large_metadata", b"field_large_metadata", "field_metadata", b"field_metadata", "field_vectors", b"field_vectors", "file_extracted_data", b"file_extracted_data", "files", b"files", "kbid", b"kbid", "keywordsets", b"keywordsets", "layouts", b"layouts", "link_extracted_data", b"link_extracted_data", "links", b"links", "multiid", b"multiid", "origin", b"origin", "origin_seq", b"origin_seq", "pre_processing_time", b"pre_processing_time", "processing_id", b"processing_id", "reindex", b"reindex", "relations", b"relations", "slow_processing_time", b"slow_processing_time", "slug", b"slug", "source", b"source", "texts", b"texts", "txseqid", b"txseqid", "type", b"type", "user_vectors", b"user_vectors", "uuid", b"uuid"]) -> None: ...
+    def HasField(self, field_name: typing_extensions.Literal["audit", b"audit", "basic", b"basic", "done_time", b"done_time", "extra", b"extra", "origin", b"origin", "security", b"security"]) -> builtins.bool: ...
+    def ClearField(self, field_name: typing_extensions.Literal["account_seq", b"account_seq", "audit", b"audit", "basic", b"basic", "conversations", b"conversations", "datetimes", b"datetimes", "delete_fields", b"delete_fields", "done_time", b"done_time", "errors", b"errors", "extra", b"extra", "extracted_text", b"extracted_text", "field_large_metadata", b"field_large_metadata", "field_metadata", b"field_metadata", "field_vectors", b"field_vectors", "file_extracted_data", b"file_extracted_data", "files", b"files", "kbid", b"kbid", "keywordsets", b"keywordsets", "layouts", b"layouts", "link_extracted_data", b"link_extracted_data", "links", b"links", "multiid", b"multiid", "origin", b"origin", "origin_seq", b"origin_seq", "pre_processing_time", b"pre_processing_time", "processing_id", b"processing_id", "question_answers", b"question_answers", "reindex", b"reindex", "relations", b"relations", "security", b"security", "slow_processing_time", b"slow_processing_time", "slug", b"slug", "source", b"source", "texts", b"texts", "txseqid", b"txseqid", "type", b"type", "user_vectors", b"user_vectors", "uuid", b"uuid"]) -> None: ...
 
 global___BrokerMessage = BrokerMessage
 
 @typing_extensions.final
+class BrokerMessageBlobReference(google.protobuf.message.Message):
+    DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+    KBID_FIELD_NUMBER: builtins.int
+    UUID_FIELD_NUMBER: builtins.int
+    STORAGE_KEY_FIELD_NUMBER: builtins.int
+    kbid: builtins.str
+    uuid: builtins.str
+    storage_key: builtins.str
+    def __init__(
+        self,
+        *,
+        kbid: builtins.str = ...,
+        uuid: builtins.str = ...,
+        storage_key: builtins.str = ...,
+    ) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["kbid", b"kbid", "storage_key", b"storage_key", "uuid", b"uuid"]) -> None: ...
+
+global___BrokerMessageBlobReference = BrokerMessageBlobReference
+
+@typing_extensions.final
 class WriterStatusResponse(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     @typing_extensions.final
     class MsgidEntry(google.protobuf.message.Message):
         DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
@@ -618,15 +683,15 @@
 class GetLabelsResponse(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _Status:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[GetLabelsResponse._Status.ValueType], builtins.type):  # noqa: F821
+    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[GetLabelsResponse._Status.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         OK: GetLabelsResponse._Status.ValueType  # 0
         NOTFOUND: GetLabelsResponse._Status.ValueType  # 1
 
     class Status(_Status, metaclass=_StatusEnumTypeWrapper): ...
     OK: GetLabelsResponse.Status.ValueType  # 0
     NOTFOUND: GetLabelsResponse.Status.ValueType  # 1
@@ -696,15 +761,15 @@
 class NewEntitiesGroupResponse(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _Status:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[NewEntitiesGroupResponse._Status.ValueType], builtins.type):  # noqa: F821
+    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[NewEntitiesGroupResponse._Status.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         OK: NewEntitiesGroupResponse._Status.ValueType  # 0
         ERROR: NewEntitiesGroupResponse._Status.ValueType  # 1
         KB_NOT_FOUND: NewEntitiesGroupResponse._Status.ValueType  # 2
         ALREADY_EXISTS: NewEntitiesGroupResponse._Status.ValueType  # 3
 
     class Status(_Status, metaclass=_StatusEnumTypeWrapper): ...
@@ -829,15 +894,15 @@
 class UpdateEntitiesGroupResponse(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _Status:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[UpdateEntitiesGroupResponse._Status.ValueType], builtins.type):  # noqa: F821
+    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[UpdateEntitiesGroupResponse._Status.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         OK: UpdateEntitiesGroupResponse._Status.ValueType  # 0
         ERROR: UpdateEntitiesGroupResponse._Status.ValueType  # 1
         KB_NOT_FOUND: UpdateEntitiesGroupResponse._Status.ValueType  # 2
         ENTITIES_GROUP_NOT_FOUND: UpdateEntitiesGroupResponse._Status.ValueType  # 3
 
     class Status(_Status, metaclass=_StatusEnumTypeWrapper): ...
@@ -878,15 +943,15 @@
 class ListEntitiesGroupsResponse(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _Status:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[ListEntitiesGroupsResponse._Status.ValueType], builtins.type):  # noqa: F821
+    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[ListEntitiesGroupsResponse._Status.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         OK: ListEntitiesGroupsResponse._Status.ValueType  # 0
         NOTFOUND: ListEntitiesGroupsResponse._Status.ValueType  # 1
         ERROR: ListEntitiesGroupsResponse._Status.ValueType  # 2
 
     class Status(_Status, metaclass=_StatusEnumTypeWrapper): ...
     OK: ListEntitiesGroupsResponse.Status.ValueType  # 0
@@ -947,15 +1012,15 @@
 class GetEntitiesResponse(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _Status:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[GetEntitiesResponse._Status.ValueType], builtins.type):  # noqa: F821
+    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[GetEntitiesResponse._Status.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         OK: GetEntitiesResponse._Status.ValueType  # 0
         NOTFOUND: GetEntitiesResponse._Status.ValueType  # 1
         ERROR: GetEntitiesResponse._Status.ValueType  # 2
 
     class Status(_Status, metaclass=_StatusEnumTypeWrapper): ...
     OK: GetEntitiesResponse.Status.ValueType  # 0
@@ -1082,15 +1147,15 @@
 class GetLabelSetResponse(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _Status:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[GetLabelSetResponse._Status.ValueType], builtins.type):  # noqa: F821
+    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[GetLabelSetResponse._Status.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         OK: GetLabelSetResponse._Status.ValueType  # 0
         NOTFOUND: GetLabelSetResponse._Status.ValueType  # 1
 
     class Status(_Status, metaclass=_StatusEnumTypeWrapper): ...
     OK: GetLabelSetResponse.Status.ValueType  # 0
     NOTFOUND: GetLabelSetResponse.Status.ValueType  # 1
@@ -1139,15 +1204,15 @@
 class GetEntitiesGroupResponse(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _Status:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[GetEntitiesGroupResponse._Status.ValueType], builtins.type):  # noqa: F821
+    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[GetEntitiesGroupResponse._Status.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         OK: GetEntitiesGroupResponse._Status.ValueType  # 0
         KB_NOT_FOUND: GetEntitiesGroupResponse._Status.ValueType  # 1
         ENTITIES_GROUP_NOT_FOUND: GetEntitiesGroupResponse._Status.ValueType  # 2
         ERROR: GetEntitiesGroupResponse._Status.ValueType  # 3
 
     class Status(_Status, metaclass=_StatusEnumTypeWrapper): ...
@@ -1197,15 +1262,15 @@
 class GetVectorSetsResponse(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _Status:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[GetVectorSetsResponse._Status.ValueType], builtins.type):  # noqa: F821
+    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[GetVectorSetsResponse._Status.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         OK: GetVectorSetsResponse._Status.ValueType  # 0
         NOTFOUND: GetVectorSetsResponse._Status.ValueType  # 1
         ERROR: GetVectorSetsResponse._Status.ValueType  # 2
 
     class Status(_Status, metaclass=_StatusEnumTypeWrapper): ...
     OK: GetVectorSetsResponse.Status.ValueType  # 0
@@ -1280,15 +1345,15 @@
 class OpStatusWriter(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _Status:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[OpStatusWriter._Status.ValueType], builtins.type):  # noqa: F821
+    class _StatusEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[OpStatusWriter._Status.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         OK: OpStatusWriter._Status.ValueType  # 0
         ERROR: OpStatusWriter._Status.ValueType  # 1
         NOTFOUND: OpStatusWriter._Status.ValueType  # 2
 
     class Status(_Status, metaclass=_StatusEnumTypeWrapper): ...
     OK: OpStatusWriter.Status.ValueType  # 0
@@ -1310,30 +1375,30 @@
 class Notification(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _Action:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _ActionEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Notification._Action.ValueType], builtins.type):  # noqa: F821
+    class _ActionEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Notification._Action.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         COMMIT: Notification._Action.ValueType  # 0
         ABORT: Notification._Action.ValueType  # 1
         INDEXED: Notification._Action.ValueType  # 2
 
     class Action(_Action, metaclass=_ActionEnumTypeWrapper): ...
     COMMIT: Notification.Action.ValueType  # 0
     ABORT: Notification.Action.ValueType  # 1
     INDEXED: Notification.Action.ValueType  # 2
 
     class _WriteType:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _WriteTypeEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Notification._WriteType.ValueType], builtins.type):  # noqa: F821
+    class _WriteTypeEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Notification._WriteType.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         UNSET: Notification._WriteType.ValueType  # 0
         CREATED: Notification._WriteType.ValueType  # 1
         MODIFIED: Notification._WriteType.ValueType  # 2
         DELETED: Notification._WriteType.ValueType  # 3
 
     class WriteType(_WriteType, metaclass=_WriteTypeEnumTypeWrapper): ...
@@ -1346,51 +1411,57 @@
     MULTI_FIELD_NUMBER: builtins.int
     UUID_FIELD_NUMBER: builtins.int
     KBID_FIELD_NUMBER: builtins.int
     SEQID_FIELD_NUMBER: builtins.int
     ACTION_FIELD_NUMBER: builtins.int
     WRITE_TYPE_FIELD_NUMBER: builtins.int
     MESSAGE_FIELD_NUMBER: builtins.int
+    SOURCE_FIELD_NUMBER: builtins.int
+    PROCESSING_ERRORS_FIELD_NUMBER: builtins.int
     partition: builtins.int
     multi: builtins.str
     uuid: builtins.str
     kbid: builtins.str
     seqid: builtins.int
     action: global___Notification.Action.ValueType
     write_type: global___Notification.WriteType.ValueType
     @property
     def message(self) -> global___BrokerMessage: ...
+    source: global___NotificationSource.ValueType
+    processing_errors: builtins.bool
     def __init__(
         self,
         *,
         partition: builtins.int = ...,
         multi: builtins.str = ...,
         uuid: builtins.str = ...,
         kbid: builtins.str = ...,
         seqid: builtins.int = ...,
         action: global___Notification.Action.ValueType = ...,
         write_type: global___Notification.WriteType.ValueType = ...,
         message: global___BrokerMessage | None = ...,
+        source: global___NotificationSource.ValueType = ...,
+        processing_errors: builtins.bool = ...,
     ) -> None: ...
     def HasField(self, field_name: typing_extensions.Literal["message", b"message"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["action", b"action", "kbid", b"kbid", "message", b"message", "multi", b"multi", "partition", b"partition", "seqid", b"seqid", "uuid", b"uuid", "write_type", b"write_type"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["action", b"action", "kbid", b"kbid", "message", b"message", "multi", b"multi", "partition", b"partition", "processing_errors", b"processing_errors", "seqid", b"seqid", "source", b"source", "uuid", b"uuid", "write_type", b"write_type"]) -> None: ...
 
 global___Notification = Notification
 
 @typing_extensions.final
 class Member(google.protobuf.message.Message):
-    """/ The member information."""
+    """The member information."""
 
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     class _Type:
         ValueType = typing.NewType("ValueType", builtins.int)
         V: typing_extensions.TypeAlias = ValueType
 
-    class _TypeEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Member._Type.ValueType], builtins.type):  # noqa: F821
+    class _TypeEnumTypeWrapper(google.protobuf.internal.enum_type_wrapper._EnumTypeWrapper[Member._Type.ValueType], builtins.type):
         DESCRIPTOR: google.protobuf.descriptor.EnumDescriptor
         IO: Member._Type.ValueType  # 0
         SEARCH: Member._Type.ValueType  # 1
         INGEST: Member._Type.ValueType  # 2
         TRAIN: Member._Type.ValueType  # 3
         UNKNOWN: Member._Type.ValueType  # 4
 
@@ -1404,14 +1475,15 @@
     ID_FIELD_NUMBER: builtins.int
     LISTEN_ADDRESS_FIELD_NUMBER: builtins.int
     IS_SELF_FIELD_NUMBER: builtins.int
     TYPE_FIELD_NUMBER: builtins.int
     DUMMY_FIELD_NUMBER: builtins.int
     LOAD_SCORE_FIELD_NUMBER: builtins.int
     SHARD_COUNT_FIELD_NUMBER: builtins.int
+    PRIMARY_ID_FIELD_NUMBER: builtins.int
     id: builtins.str
     """/ Member ID.　A string of the UUID."""
     listen_address: builtins.str
     """/ Cluster listen address. string of IP and port number.
     / E.g. 127.0.0.1:5000
     """
     is_self: builtins.bool
@@ -1420,26 +1492,29 @@
     """/ Io, Ingest, Search, Train."""
     dummy: builtins.bool
     """/ Dummy Member"""
     load_score: builtins.float
     """/ The load score of the member."""
     shard_count: builtins.int
     """/ The number of shards in the node."""
+    primary_id: builtins.str
+    """/ The id of the primary node (if it is a secondary node)."""
     def __init__(
         self,
         *,
         id: builtins.str = ...,
         listen_address: builtins.str = ...,
         is_self: builtins.bool = ...,
         type: global___Member.Type.ValueType = ...,
         dummy: builtins.bool = ...,
         load_score: builtins.float = ...,
         shard_count: builtins.int = ...,
+        primary_id: builtins.str = ...,
     ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["dummy", b"dummy", "id", b"id", "is_self", b"is_self", "listen_address", b"listen_address", "load_score", b"load_score", "shard_count", b"shard_count", "type", b"type"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["dummy", b"dummy", "id", b"id", "is_self", b"is_self", "listen_address", b"listen_address", "load_score", b"load_score", "primary_id", b"primary_id", "shard_count", b"shard_count", "type", b"type"]) -> None: ...
 
 global___Member = Member
 
 @typing_extensions.final
 class ListMembersRequest(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
@@ -1488,54 +1563,88 @@
 @typing_extensions.final
 class ShardObject(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     SHARD_FIELD_NUMBER: builtins.int
     REPLICAS_FIELD_NUMBER: builtins.int
     TIMESTAMP_FIELD_NUMBER: builtins.int
+    READ_ONLY_FIELD_NUMBER: builtins.int
     shard: builtins.str
     @property
     def replicas(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___ShardReplica]: ...
     @property
     def timestamp(self) -> google.protobuf.timestamp_pb2.Timestamp: ...
+    read_only: builtins.bool
     def __init__(
         self,
         *,
         shard: builtins.str = ...,
         replicas: collections.abc.Iterable[global___ShardReplica] | None = ...,
         timestamp: google.protobuf.timestamp_pb2.Timestamp | None = ...,
+        read_only: builtins.bool = ...,
     ) -> None: ...
     def HasField(self, field_name: typing_extensions.Literal["timestamp", b"timestamp"]) -> builtins.bool: ...
-    def ClearField(self, field_name: typing_extensions.Literal["replicas", b"replicas", "shard", b"shard", "timestamp", b"timestamp"]) -> None: ...
+    def ClearField(self, field_name: typing_extensions.Literal["read_only", b"read_only", "replicas", b"replicas", "shard", b"shard", "timestamp", b"timestamp"]) -> None: ...
 
 global___ShardObject = ShardObject
 
 @typing_extensions.final
 class Shards(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
+    @typing_extensions.final
+    class ExtraEntry(google.protobuf.message.Message):
+        DESCRIPTOR: google.protobuf.descriptor.Descriptor
+
+        KEY_FIELD_NUMBER: builtins.int
+        VALUE_FIELD_NUMBER: builtins.int
+        key: builtins.str
+        value: builtins.str
+        def __init__(
+            self,
+            *,
+            key: builtins.str = ...,
+            value: builtins.str = ...,
+        ) -> None: ...
+        def ClearField(self, field_name: typing_extensions.Literal["key", b"key", "value", b"value"]) -> None: ...
+
     SHARDS_FIELD_NUMBER: builtins.int
     KBID_FIELD_NUMBER: builtins.int
     ACTUAL_FIELD_NUMBER: builtins.int
     SIMILARITY_FIELD_NUMBER: builtins.int
+    MODEL_FIELD_NUMBER: builtins.int
+    RELEASE_CHANNEL_FIELD_NUMBER: builtins.int
+    EXTRA_FIELD_NUMBER: builtins.int
     @property
     def shards(self) -> google.protobuf.internal.containers.RepeatedCompositeFieldContainer[global___ShardObject]: ...
     kbid: builtins.str
     actual: builtins.int
-    """current shard that resources index to"""
+    """DEPRECATED a KB know can have multiple alive shards and is tracked in
+    each ShardObject
+    """
     similarity: nucliadb_protos.utils_pb2.VectorSimilarity.ValueType
+    """DEPRECATED in favor of `model` to include more data"""
+    @property
+    def model(self) -> nucliadb_protos.knowledgebox_pb2.SemanticModelMetadata: ...
+    release_channel: nucliadb_protos.utils_pb2.ReleaseChannel.ValueType
+    @property
+    def extra(self) -> google.protobuf.internal.containers.ScalarMap[builtins.str, builtins.str]: ...
     def __init__(
         self,
         *,
         shards: collections.abc.Iterable[global___ShardObject] | None = ...,
         kbid: builtins.str = ...,
         actual: builtins.int = ...,
         similarity: nucliadb_protos.utils_pb2.VectorSimilarity.ValueType = ...,
+        model: nucliadb_protos.knowledgebox_pb2.SemanticModelMetadata | None = ...,
+        release_channel: nucliadb_protos.utils_pb2.ReleaseChannel.ValueType = ...,
+        extra: collections.abc.Mapping[builtins.str, builtins.str] | None = ...,
     ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["actual", b"actual", "kbid", b"kbid", "shards", b"shards", "similarity", b"similarity"]) -> None: ...
+    def HasField(self, field_name: typing_extensions.Literal["model", b"model"]) -> builtins.bool: ...
+    def ClearField(self, field_name: typing_extensions.Literal["actual", b"actual", "extra", b"extra", "kbid", b"kbid", "model", b"model", "release_channel", b"release_channel", "shards", b"shards", "similarity", b"similarity"]) -> None: ...
 
 global___Shards = Shards
 
 @typing_extensions.final
 class ResourceFieldId(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
@@ -1635,29 +1744,14 @@
         uuid: builtins.str = ...,
     ) -> None: ...
     def ClearField(self, field_name: typing_extensions.Literal["uuid", b"uuid"]) -> None: ...
 
 global___ResourceIdResponse = ResourceIdResponse
 
 @typing_extensions.final
-class ExportRequest(google.protobuf.message.Message):
-    DESCRIPTOR: google.protobuf.descriptor.Descriptor
-
-    KBID_FIELD_NUMBER: builtins.int
-    kbid: builtins.str
-    def __init__(
-        self,
-        *,
-        kbid: builtins.str = ...,
-    ) -> None: ...
-    def ClearField(self, field_name: typing_extensions.Literal["kbid", b"kbid"]) -> None: ...
-
-global___ExportRequest = ExportRequest
-
-@typing_extensions.final
 class SetVectorsRequest(google.protobuf.message.Message):
     DESCRIPTOR: google.protobuf.descriptor.Descriptor
 
     VECTORS_FIELD_NUMBER: builtins.int
     KBID_FIELD_NUMBER: builtins.int
     RID_FIELD_NUMBER: builtins.int
     FIELD_FIELD_NUMBER: builtins.int
```

## nucliadb_protos/writer_pb2_grpc.py

```diff
@@ -11,19 +11,14 @@
 
     def __init__(self, channel):
         """Constructor.
 
         Args:
             channel: A grpc.Channel.
         """
-        self.GetKnowledgeBox = channel.unary_unary(
-                '/fdbwriter.Writer/GetKnowledgeBox',
-                request_serializer=nucliadb__protos_dot_knowledgebox__pb2.KnowledgeBoxID.SerializeToString,
-                response_deserializer=nucliadb__protos_dot_knowledgebox__pb2.KnowledgeBox.FromString,
-                )
         self.NewKnowledgeBox = channel.unary_unary(
                 '/fdbwriter.Writer/NewKnowledgeBox',
                 request_serializer=nucliadb__protos_dot_knowledgebox__pb2.KnowledgeBoxNew.SerializeToString,
                 response_deserializer=nucliadb__protos_dot_knowledgebox__pb2.NewKnowledgeBoxResponse.FromString,
                 )
         self.DeleteKnowledgeBox = channel.unary_unary(
                 '/fdbwriter.Writer/DeleteKnowledgeBox',
@@ -31,24 +26,14 @@
                 response_deserializer=nucliadb__protos_dot_knowledgebox__pb2.DeleteKnowledgeBoxResponse.FromString,
                 )
         self.UpdateKnowledgeBox = channel.unary_unary(
                 '/fdbwriter.Writer/UpdateKnowledgeBox',
                 request_serializer=nucliadb__protos_dot_knowledgebox__pb2.KnowledgeBoxUpdate.SerializeToString,
                 response_deserializer=nucliadb__protos_dot_knowledgebox__pb2.UpdateKnowledgeBoxResponse.FromString,
                 )
-        self.CleanAndUpgradeKnowledgeBoxIndex = channel.unary_unary(
-                '/fdbwriter.Writer/CleanAndUpgradeKnowledgeBoxIndex',
-                request_serializer=nucliadb__protos_dot_knowledgebox__pb2.KnowledgeBoxID.SerializeToString,
-                response_deserializer=nucliadb__protos_dot_knowledgebox__pb2.CleanedKnowledgeBoxResponse.FromString,
-                )
-        self.ListKnowledgeBox = channel.unary_stream(
-                '/fdbwriter.Writer/ListKnowledgeBox',
-                request_serializer=nucliadb__protos_dot_knowledgebox__pb2.KnowledgeBoxPrefix.SerializeToString,
-                response_deserializer=nucliadb__protos_dot_knowledgebox__pb2.KnowledgeBoxID.FromString,
-                )
         self.GCKnowledgeBox = channel.unary_unary(
                 '/fdbwriter.Writer/GCKnowledgeBox',
                 request_serializer=nucliadb__protos_dot_knowledgebox__pb2.KnowledgeBoxID.SerializeToString,
                 response_deserializer=nucliadb__protos_dot_knowledgebox__pb2.GCKnowledgeBoxResponse.FromString,
                 )
         self.SetVectors = channel.unary_unary(
                 '/fdbwriter.Writer/SetVectors',
@@ -171,19 +156,14 @@
                 response_deserializer=nucliadb__protos_dot_writer__pb2.IndexStatus.FromString,
                 )
         self.ReIndex = channel.unary_unary(
                 '/fdbwriter.Writer/ReIndex',
                 request_serializer=nucliadb__protos_dot_writer__pb2.IndexResource.SerializeToString,
                 response_deserializer=nucliadb__protos_dot_writer__pb2.IndexStatus.FromString,
                 )
-        self.Export = channel.unary_stream(
-                '/fdbwriter.Writer/Export',
-                request_serializer=nucliadb__protos_dot_writer__pb2.ExportRequest.SerializeToString,
-                response_deserializer=nucliadb__protos_dot_writer__pb2.BrokerMessage.FromString,
-                )
         self.DownloadFile = channel.unary_stream(
                 '/fdbwriter.Writer/DownloadFile',
                 request_serializer=nucliadb__protos_dot_writer__pb2.FileRequest.SerializeToString,
                 response_deserializer=nucliadb__protos_dot_writer__pb2.BinaryData.FromString,
                 )
         self.UploadFile = channel.stream_unary(
                 '/fdbwriter.Writer/UploadFile',
@@ -191,20 +171,14 @@
                 response_deserializer=nucliadb__protos_dot_writer__pb2.FileUploaded.FromString,
                 )
 
 
 class WriterServicer(object):
     """Missing associated documentation comment in .proto file."""
 
-    def GetKnowledgeBox(self, request, context):
-        """Missing associated documentation comment in .proto file."""
-        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
-        context.set_details('Method not implemented!')
-        raise NotImplementedError('Method not implemented!')
-
     def NewKnowledgeBox(self, request, context):
         """Missing associated documentation comment in .proto file."""
         context.set_code(grpc.StatusCode.UNIMPLEMENTED)
         context.set_details('Method not implemented!')
         raise NotImplementedError('Method not implemented!')
 
     def DeleteKnowledgeBox(self, request, context):
@@ -215,26 +189,14 @@
 
     def UpdateKnowledgeBox(self, request, context):
         """Missing associated documentation comment in .proto file."""
         context.set_code(grpc.StatusCode.UNIMPLEMENTED)
         context.set_details('Method not implemented!')
         raise NotImplementedError('Method not implemented!')
 
-    def CleanAndUpgradeKnowledgeBoxIndex(self, request, context):
-        """Missing associated documentation comment in .proto file."""
-        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
-        context.set_details('Method not implemented!')
-        raise NotImplementedError('Method not implemented!')
-
-    def ListKnowledgeBox(self, request, context):
-        """Missing associated documentation comment in .proto file."""
-        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
-        context.set_details('Method not implemented!')
-        raise NotImplementedError('Method not implemented!')
-
     def GCKnowledgeBox(self, request, context):
         """Missing associated documentation comment in .proto file."""
         context.set_code(grpc.StatusCode.UNIMPLEMENTED)
         context.set_details('Method not implemented!')
         raise NotImplementedError('Method not implemented!')
 
     def SetVectors(self, request, context):
@@ -387,20 +349,14 @@
 
     def ReIndex(self, request, context):
         """Missing associated documentation comment in .proto file."""
         context.set_code(grpc.StatusCode.UNIMPLEMENTED)
         context.set_details('Method not implemented!')
         raise NotImplementedError('Method not implemented!')
 
-    def Export(self, request, context):
-        """Missing associated documentation comment in .proto file."""
-        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
-        context.set_details('Method not implemented!')
-        raise NotImplementedError('Method not implemented!')
-
     def DownloadFile(self, request, context):
         """Missing associated documentation comment in .proto file."""
         context.set_code(grpc.StatusCode.UNIMPLEMENTED)
         context.set_details('Method not implemented!')
         raise NotImplementedError('Method not implemented!')
 
     def UploadFile(self, request_iterator, context):
@@ -408,19 +364,14 @@
         context.set_code(grpc.StatusCode.UNIMPLEMENTED)
         context.set_details('Method not implemented!')
         raise NotImplementedError('Method not implemented!')
 
 
 def add_WriterServicer_to_server(servicer, server):
     rpc_method_handlers = {
-            'GetKnowledgeBox': grpc.unary_unary_rpc_method_handler(
-                    servicer.GetKnowledgeBox,
-                    request_deserializer=nucliadb__protos_dot_knowledgebox__pb2.KnowledgeBoxID.FromString,
-                    response_serializer=nucliadb__protos_dot_knowledgebox__pb2.KnowledgeBox.SerializeToString,
-            ),
             'NewKnowledgeBox': grpc.unary_unary_rpc_method_handler(
                     servicer.NewKnowledgeBox,
                     request_deserializer=nucliadb__protos_dot_knowledgebox__pb2.KnowledgeBoxNew.FromString,
                     response_serializer=nucliadb__protos_dot_knowledgebox__pb2.NewKnowledgeBoxResponse.SerializeToString,
             ),
             'DeleteKnowledgeBox': grpc.unary_unary_rpc_method_handler(
                     servicer.DeleteKnowledgeBox,
@@ -428,24 +379,14 @@
                     response_serializer=nucliadb__protos_dot_knowledgebox__pb2.DeleteKnowledgeBoxResponse.SerializeToString,
             ),
             'UpdateKnowledgeBox': grpc.unary_unary_rpc_method_handler(
                     servicer.UpdateKnowledgeBox,
                     request_deserializer=nucliadb__protos_dot_knowledgebox__pb2.KnowledgeBoxUpdate.FromString,
                     response_serializer=nucliadb__protos_dot_knowledgebox__pb2.UpdateKnowledgeBoxResponse.SerializeToString,
             ),
-            'CleanAndUpgradeKnowledgeBoxIndex': grpc.unary_unary_rpc_method_handler(
-                    servicer.CleanAndUpgradeKnowledgeBoxIndex,
-                    request_deserializer=nucliadb__protos_dot_knowledgebox__pb2.KnowledgeBoxID.FromString,
-                    response_serializer=nucliadb__protos_dot_knowledgebox__pb2.CleanedKnowledgeBoxResponse.SerializeToString,
-            ),
-            'ListKnowledgeBox': grpc.unary_stream_rpc_method_handler(
-                    servicer.ListKnowledgeBox,
-                    request_deserializer=nucliadb__protos_dot_knowledgebox__pb2.KnowledgeBoxPrefix.FromString,
-                    response_serializer=nucliadb__protos_dot_knowledgebox__pb2.KnowledgeBoxID.SerializeToString,
-            ),
             'GCKnowledgeBox': grpc.unary_unary_rpc_method_handler(
                     servicer.GCKnowledgeBox,
                     request_deserializer=nucliadb__protos_dot_knowledgebox__pb2.KnowledgeBoxID.FromString,
                     response_serializer=nucliadb__protos_dot_knowledgebox__pb2.GCKnowledgeBoxResponse.SerializeToString,
             ),
             'SetVectors': grpc.unary_unary_rpc_method_handler(
                     servicer.SetVectors,
@@ -568,19 +509,14 @@
                     response_serializer=nucliadb__protos_dot_writer__pb2.IndexStatus.SerializeToString,
             ),
             'ReIndex': grpc.unary_unary_rpc_method_handler(
                     servicer.ReIndex,
                     request_deserializer=nucliadb__protos_dot_writer__pb2.IndexResource.FromString,
                     response_serializer=nucliadb__protos_dot_writer__pb2.IndexStatus.SerializeToString,
             ),
-            'Export': grpc.unary_stream_rpc_method_handler(
-                    servicer.Export,
-                    request_deserializer=nucliadb__protos_dot_writer__pb2.ExportRequest.FromString,
-                    response_serializer=nucliadb__protos_dot_writer__pb2.BrokerMessage.SerializeToString,
-            ),
             'DownloadFile': grpc.unary_stream_rpc_method_handler(
                     servicer.DownloadFile,
                     request_deserializer=nucliadb__protos_dot_writer__pb2.FileRequest.FromString,
                     response_serializer=nucliadb__protos_dot_writer__pb2.BinaryData.SerializeToString,
             ),
             'UploadFile': grpc.stream_unary_rpc_method_handler(
                     servicer.UploadFile,
@@ -594,31 +530,14 @@
 
 
  # This class is part of an EXPERIMENTAL API.
 class Writer(object):
     """Missing associated documentation comment in .proto file."""
 
     @staticmethod
-    def GetKnowledgeBox(request,
-            target,
-            options=(),
-            channel_credentials=None,
-            call_credentials=None,
-            insecure=False,
-            compression=None,
-            wait_for_ready=None,
-            timeout=None,
-            metadata=None):
-        return grpc.experimental.unary_unary(request, target, '/fdbwriter.Writer/GetKnowledgeBox',
-            nucliadb__protos_dot_knowledgebox__pb2.KnowledgeBoxID.SerializeToString,
-            nucliadb__protos_dot_knowledgebox__pb2.KnowledgeBox.FromString,
-            options, channel_credentials,
-            insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
-
-    @staticmethod
     def NewKnowledgeBox(request,
             target,
             options=(),
             channel_credentials=None,
             call_credentials=None,
             insecure=False,
             compression=None,
@@ -662,48 +581,14 @@
         return grpc.experimental.unary_unary(request, target, '/fdbwriter.Writer/UpdateKnowledgeBox',
             nucliadb__protos_dot_knowledgebox__pb2.KnowledgeBoxUpdate.SerializeToString,
             nucliadb__protos_dot_knowledgebox__pb2.UpdateKnowledgeBoxResponse.FromString,
             options, channel_credentials,
             insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
 
     @staticmethod
-    def CleanAndUpgradeKnowledgeBoxIndex(request,
-            target,
-            options=(),
-            channel_credentials=None,
-            call_credentials=None,
-            insecure=False,
-            compression=None,
-            wait_for_ready=None,
-            timeout=None,
-            metadata=None):
-        return grpc.experimental.unary_unary(request, target, '/fdbwriter.Writer/CleanAndUpgradeKnowledgeBoxIndex',
-            nucliadb__protos_dot_knowledgebox__pb2.KnowledgeBoxID.SerializeToString,
-            nucliadb__protos_dot_knowledgebox__pb2.CleanedKnowledgeBoxResponse.FromString,
-            options, channel_credentials,
-            insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
-
-    @staticmethod
-    def ListKnowledgeBox(request,
-            target,
-            options=(),
-            channel_credentials=None,
-            call_credentials=None,
-            insecure=False,
-            compression=None,
-            wait_for_ready=None,
-            timeout=None,
-            metadata=None):
-        return grpc.experimental.unary_stream(request, target, '/fdbwriter.Writer/ListKnowledgeBox',
-            nucliadb__protos_dot_knowledgebox__pb2.KnowledgeBoxPrefix.SerializeToString,
-            nucliadb__protos_dot_knowledgebox__pb2.KnowledgeBoxID.FromString,
-            options, channel_credentials,
-            insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
-
-    @staticmethod
     def GCKnowledgeBox(request,
             target,
             options=(),
             channel_credentials=None,
             call_credentials=None,
             insecure=False,
             compression=None,
@@ -1138,31 +1023,14 @@
         return grpc.experimental.unary_unary(request, target, '/fdbwriter.Writer/ReIndex',
             nucliadb__protos_dot_writer__pb2.IndexResource.SerializeToString,
             nucliadb__protos_dot_writer__pb2.IndexStatus.FromString,
             options, channel_credentials,
             insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
 
     @staticmethod
-    def Export(request,
-            target,
-            options=(),
-            channel_credentials=None,
-            call_credentials=None,
-            insecure=False,
-            compression=None,
-            wait_for_ready=None,
-            timeout=None,
-            metadata=None):
-        return grpc.experimental.unary_stream(request, target, '/fdbwriter.Writer/Export',
-            nucliadb__protos_dot_writer__pb2.ExportRequest.SerializeToString,
-            nucliadb__protos_dot_writer__pb2.BrokerMessage.FromString,
-            options, channel_credentials,
-            insecure, call_credentials, compression, wait_for_ready, timeout, metadata)
-
-    @staticmethod
     def DownloadFile(request,
             target,
             options=(),
             channel_credentials=None,
             call_credentials=None,
             insecure=False,
             compression=None,
```

## nucliadb_protos/writer_pb2_grpc.pyi

```diff
@@ -1,39 +1,42 @@
 """
 @generated by mypy-protobuf.  Do not edit manually!
 isort:skip_file
 """
 import abc
 import collections.abc
 import grpc
+import grpc.aio
 import nucliadb_protos.knowledgebox_pb2
 import nucliadb_protos.writer_pb2
+import typing
 from nucliadb_protos.knowledgebox_pb2 import (
     CONFLICT as CONFLICT,
-    CleanedKnowledgeBoxResponse as CleanedKnowledgeBoxResponse,
     DeleteKnowledgeBoxResponse as DeleteKnowledgeBoxResponse,
     DeletedEntitiesGroups as DeletedEntitiesGroups,
     ERROR as ERROR,
     EntitiesGroup as EntitiesGroup,
     EntitiesGroupSummary as EntitiesGroupSummary,
+    EntitiesGroups as EntitiesGroups,
     Entity as Entity,
+    EntityGroupDuplicateIndex as EntityGroupDuplicateIndex,
     GCKnowledgeBoxResponse as GCKnowledgeBoxResponse,
-    KnowledgeBox as KnowledgeBox,
+    KBConfiguration as KBConfiguration,
     KnowledgeBoxConfig as KnowledgeBoxConfig,
     KnowledgeBoxID as KnowledgeBoxID,
     KnowledgeBoxNew as KnowledgeBoxNew,
-    KnowledgeBoxPrefix as KnowledgeBoxPrefix,
     KnowledgeBoxResponseStatus as KnowledgeBoxResponseStatus,
     KnowledgeBoxUpdate as KnowledgeBoxUpdate,
     Label as Label,
     LabelSet as LabelSet,
     Labels as Labels,
     NOTFOUND as NOTFOUND,
     NewKnowledgeBoxResponse as NewKnowledgeBoxResponse,
     OK as OK,
+    SemanticModelMetadata as SemanticModelMetadata,
     Synonyms as Synonyms,
     TermSynonyms as TermSynonyms,
     UpdateKnowledgeBoxResponse as UpdateKnowledgeBoxResponse,
     VectorSet as VectorSet,
     VectorSets as VectorSets,
 )
 from nucliadb_protos.noderesources_pb2 import (
@@ -41,39 +44,41 @@
     EmptyResponse as EmptyResponse,
     IndexMetadata as IndexMetadata,
     IndexParagraph as IndexParagraph,
     IndexParagraphs as IndexParagraphs,
     NodeMetadata as NodeMetadata,
     ParagraphMetadata as ParagraphMetadata,
     Position as Position,
+    Representation as Representation,
     Resource as Resource,
     ResourceID as ResourceID,
     SentenceMetadata as SentenceMetadata,
     Shard as Shard,
-    ShardCleaned as ShardCleaned,
     ShardCreated as ShardCreated,
     ShardId as ShardId,
     ShardIds as ShardIds,
-    ShardList as ShardList,
     ShardMetadata as ShardMetadata,
     TextInformation as TextInformation,
     VectorSentence as VectorSentence,
     VectorSetID as VectorSetID,
     VectorSetList as VectorSetList,
 )
 from nucliadb_protos.resources_pb2 import (
+    AllFieldIDs as AllFieldIDs,
+    Answers as Answers,
     Basic as Basic,
     Block as Block,
     CONVERSATION as CONVERSATION,
     Classification as Classification,
     CloudFile as CloudFile,
     ComputedMetadata as ComputedMetadata,
     Conversation as Conversation,
     DATETIME as DATETIME,
     Entity as Entity,
+    Extra as Extra,
     ExtractedTextWrapper as ExtractedTextWrapper,
     ExtractedVectorsWrapper as ExtractedVectorsWrapper,
     FILE as FILE,
     FieldClassifications as FieldClassifications,
     FieldComputedMetadata as FieldComputedMetadata,
     FieldComputedMetadataWrapper as FieldComputedMetadataWrapper,
     FieldConversation as FieldConversation,
@@ -81,14 +86,15 @@
     FieldFile as FieldFile,
     FieldID as FieldID,
     FieldKeywordset as FieldKeywordset,
     FieldLargeMetadata as FieldLargeMetadata,
     FieldLayout as FieldLayout,
     FieldLink as FieldLink,
     FieldMetadata as FieldMetadata,
+    FieldQuestionAnswerWrapper as FieldQuestionAnswerWrapper,
     FieldText as FieldText,
     FieldType as FieldType,
     FileExtractedData as FileExtractedData,
     FilePages as FilePages,
     GENERIC as GENERIC,
     KEYWORDSET as KEYWORDSET,
     Keyword as Keyword,
@@ -100,55 +106,62 @@
     LinkExtractedData as LinkExtractedData,
     Message as Message,
     MessageContent as MessageContent,
     Metadata as Metadata,
     NestedListPosition as NestedListPosition,
     NestedPosition as NestedPosition,
     Origin as Origin,
+    PageInformation as PageInformation,
     PagePositions as PagePositions,
+    PageSelections as PageSelections,
+    PageStructure as PageStructure,
+    PageStructurePage as PageStructurePage,
+    PageStructureToken as PageStructureToken,
     Paragraph as Paragraph,
     ParagraphAnnotation as ParagraphAnnotation,
     Position as Position,
     Positions as Positions,
+    Question as Question,
+    QuestionAnswer as QuestionAnswer,
+    QuestionAnswerAnnotation as QuestionAnswerAnnotation,
+    QuestionAnswers as QuestionAnswers,
     Relations as Relations,
+    Representation as Representation,
     RowsPreview as RowsPreview,
     Sentence as Sentence,
     TEXT as TEXT,
     TokenSplit as TokenSplit,
     UserFieldMetadata as UserFieldMetadata,
     UserMetadata as UserMetadata,
     UserVectorsWrapper as UserVectorsWrapper,
+    VisualSelection as VisualSelection,
 )
 
+_T = typing.TypeVar('_T')
+
+class _MaybeAsyncIterator(collections.abc.AsyncIterator[_T], collections.abc.Iterator[_T], metaclass=abc.ABCMeta):
+    ...
+
+class _ServicerContext(grpc.ServicerContext, grpc.aio.ServicerContext):  # type: ignore
+    ...
+
 class WriterStub:
-    def __init__(self, channel: grpc.Channel) -> None: ...
-    GetKnowledgeBox: grpc.UnaryUnaryMultiCallable[
-        nucliadb_protos.knowledgebox_pb2.KnowledgeBoxID,
-        nucliadb_protos.knowledgebox_pb2.KnowledgeBox,
-    ]
+    def __init__(self, channel: typing.Union[grpc.Channel, grpc.aio.Channel]) -> None: ...
     NewKnowledgeBox: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.knowledgebox_pb2.KnowledgeBoxNew,
         nucliadb_protos.knowledgebox_pb2.NewKnowledgeBoxResponse,
     ]
     DeleteKnowledgeBox: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.knowledgebox_pb2.KnowledgeBoxID,
         nucliadb_protos.knowledgebox_pb2.DeleteKnowledgeBoxResponse,
     ]
     UpdateKnowledgeBox: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.knowledgebox_pb2.KnowledgeBoxUpdate,
         nucliadb_protos.knowledgebox_pb2.UpdateKnowledgeBoxResponse,
     ]
-    CleanAndUpgradeKnowledgeBoxIndex: grpc.UnaryUnaryMultiCallable[
-        nucliadb_protos.knowledgebox_pb2.KnowledgeBoxID,
-        nucliadb_protos.knowledgebox_pb2.CleanedKnowledgeBoxResponse,
-    ]
-    ListKnowledgeBox: grpc.UnaryStreamMultiCallable[
-        nucliadb_protos.knowledgebox_pb2.KnowledgeBoxPrefix,
-        nucliadb_protos.knowledgebox_pb2.KnowledgeBoxID,
-    ]
     GCKnowledgeBox: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.knowledgebox_pb2.KnowledgeBoxID,
         nucliadb_protos.knowledgebox_pb2.GCKnowledgeBoxResponse,
     ]
     SetVectors: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.writer_pb2.SetVectorsRequest,
         nucliadb_protos.writer_pb2.SetVectorsResponse,
@@ -249,237 +262,339 @@
         nucliadb_protos.writer_pb2.IndexResource,
         nucliadb_protos.writer_pb2.IndexStatus,
     ]
     ReIndex: grpc.UnaryUnaryMultiCallable[
         nucliadb_protos.writer_pb2.IndexResource,
         nucliadb_protos.writer_pb2.IndexStatus,
     ]
-    Export: grpc.UnaryStreamMultiCallable[
-        nucliadb_protos.writer_pb2.ExportRequest,
-        nucliadb_protos.writer_pb2.BrokerMessage,
-    ]
     DownloadFile: grpc.UnaryStreamMultiCallable[
         nucliadb_protos.writer_pb2.FileRequest,
         nucliadb_protos.writer_pb2.BinaryData,
     ]
     UploadFile: grpc.StreamUnaryMultiCallable[
         nucliadb_protos.writer_pb2.UploadBinaryData,
         nucliadb_protos.writer_pb2.FileUploaded,
     ]
 
+class WriterAsyncStub:
+    NewKnowledgeBox: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.knowledgebox_pb2.KnowledgeBoxNew,
+        nucliadb_protos.knowledgebox_pb2.NewKnowledgeBoxResponse,
+    ]
+    DeleteKnowledgeBox: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.knowledgebox_pb2.KnowledgeBoxID,
+        nucliadb_protos.knowledgebox_pb2.DeleteKnowledgeBoxResponse,
+    ]
+    UpdateKnowledgeBox: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.knowledgebox_pb2.KnowledgeBoxUpdate,
+        nucliadb_protos.knowledgebox_pb2.UpdateKnowledgeBoxResponse,
+    ]
+    GCKnowledgeBox: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.knowledgebox_pb2.KnowledgeBoxID,
+        nucliadb_protos.knowledgebox_pb2.GCKnowledgeBoxResponse,
+    ]
+    SetVectors: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.SetVectorsRequest,
+        nucliadb_protos.writer_pb2.SetVectorsResponse,
+    ]
+    ResourceFieldExists: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.ResourceFieldId,
+        nucliadb_protos.writer_pb2.ResourceFieldExistsResponse,
+    ]
+    GetResourceId: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.ResourceIdRequest,
+        nucliadb_protos.writer_pb2.ResourceIdResponse,
+    ]
+    ProcessMessage: grpc.aio.StreamUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.BrokerMessage,
+        nucliadb_protos.writer_pb2.OpStatusWriter,
+    ]
+    GetLabels: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.GetLabelsRequest,
+        nucliadb_protos.writer_pb2.GetLabelsResponse,
+    ]
+    """Labels"""
+    GetLabelSet: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.GetLabelSetRequest,
+        nucliadb_protos.writer_pb2.GetLabelSetResponse,
+    ]
+    SetLabels: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.SetLabelsRequest,
+        nucliadb_protos.writer_pb2.OpStatusWriter,
+    ]
+    DelLabels: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.DelLabelsRequest,
+        nucliadb_protos.writer_pb2.OpStatusWriter,
+    ]
+    GetVectorSets: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.GetVectorSetsRequest,
+        nucliadb_protos.writer_pb2.GetVectorSetsResponse,
+    ]
+    """VectorSets"""
+    DelVectorSet: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.DelVectorSetRequest,
+        nucliadb_protos.writer_pb2.OpStatusWriter,
+    ]
+    SetVectorSet: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.SetVectorSetRequest,
+        nucliadb_protos.writer_pb2.OpStatusWriter,
+    ]
+    NewEntitiesGroup: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.NewEntitiesGroupRequest,
+        nucliadb_protos.writer_pb2.NewEntitiesGroupResponse,
+    ]
+    """Entities"""
+    GetEntities: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.GetEntitiesRequest,
+        nucliadb_protos.writer_pb2.GetEntitiesResponse,
+    ]
+    GetEntitiesGroup: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.GetEntitiesGroupRequest,
+        nucliadb_protos.writer_pb2.GetEntitiesGroupResponse,
+    ]
+    ListEntitiesGroups: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.ListEntitiesGroupsRequest,
+        nucliadb_protos.writer_pb2.ListEntitiesGroupsResponse,
+    ]
+    SetEntities: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.SetEntitiesRequest,
+        nucliadb_protos.writer_pb2.OpStatusWriter,
+    ]
+    UpdateEntitiesGroup: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.UpdateEntitiesGroupRequest,
+        nucliadb_protos.writer_pb2.UpdateEntitiesGroupResponse,
+    ]
+    DelEntities: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.DelEntitiesRequest,
+        nucliadb_protos.writer_pb2.OpStatusWriter,
+    ]
+    GetSynonyms: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.knowledgebox_pb2.KnowledgeBoxID,
+        nucliadb_protos.writer_pb2.GetSynonymsResponse,
+    ]
+    """Synonyms"""
+    SetSynonyms: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.SetSynonymsRequest,
+        nucliadb_protos.writer_pb2.OpStatusWriter,
+    ]
+    DelSynonyms: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.knowledgebox_pb2.KnowledgeBoxID,
+        nucliadb_protos.writer_pb2.OpStatusWriter,
+    ]
+    Status: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.WriterStatusRequest,
+        nucliadb_protos.writer_pb2.WriterStatusResponse,
+    ]
+    ListMembers: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.ListMembersRequest,
+        nucliadb_protos.writer_pb2.ListMembersResponse,
+    ]
+    Index: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.IndexResource,
+        nucliadb_protos.writer_pb2.IndexStatus,
+    ]
+    ReIndex: grpc.aio.UnaryUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.IndexResource,
+        nucliadb_protos.writer_pb2.IndexStatus,
+    ]
+    DownloadFile: grpc.aio.UnaryStreamMultiCallable[
+        nucliadb_protos.writer_pb2.FileRequest,
+        nucliadb_protos.writer_pb2.BinaryData,
+    ]
+    UploadFile: grpc.aio.StreamUnaryMultiCallable[
+        nucliadb_protos.writer_pb2.UploadBinaryData,
+        nucliadb_protos.writer_pb2.FileUploaded,
+    ]
+
 class WriterServicer(metaclass=abc.ABCMeta):
     @abc.abstractmethod
-    def GetKnowledgeBox(
-        self,
-        request: nucliadb_protos.knowledgebox_pb2.KnowledgeBoxID,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.knowledgebox_pb2.KnowledgeBox: ...
-    @abc.abstractmethod
     def NewKnowledgeBox(
         self,
         request: nucliadb_protos.knowledgebox_pb2.KnowledgeBoxNew,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.knowledgebox_pb2.NewKnowledgeBoxResponse: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.knowledgebox_pb2.NewKnowledgeBoxResponse, collections.abc.Awaitable[nucliadb_protos.knowledgebox_pb2.NewKnowledgeBoxResponse]]: ...
     @abc.abstractmethod
     def DeleteKnowledgeBox(
         self,
         request: nucliadb_protos.knowledgebox_pb2.KnowledgeBoxID,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.knowledgebox_pb2.DeleteKnowledgeBoxResponse: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.knowledgebox_pb2.DeleteKnowledgeBoxResponse, collections.abc.Awaitable[nucliadb_protos.knowledgebox_pb2.DeleteKnowledgeBoxResponse]]: ...
     @abc.abstractmethod
     def UpdateKnowledgeBox(
         self,
         request: nucliadb_protos.knowledgebox_pb2.KnowledgeBoxUpdate,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.knowledgebox_pb2.UpdateKnowledgeBoxResponse: ...
-    @abc.abstractmethod
-    def CleanAndUpgradeKnowledgeBoxIndex(
-        self,
-        request: nucliadb_protos.knowledgebox_pb2.KnowledgeBoxID,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.knowledgebox_pb2.CleanedKnowledgeBoxResponse: ...
-    @abc.abstractmethod
-    def ListKnowledgeBox(
-        self,
-        request: nucliadb_protos.knowledgebox_pb2.KnowledgeBoxPrefix,
-        context: grpc.ServicerContext,
-    ) -> collections.abc.Iterator[nucliadb_protos.knowledgebox_pb2.KnowledgeBoxID]: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.knowledgebox_pb2.UpdateKnowledgeBoxResponse, collections.abc.Awaitable[nucliadb_protos.knowledgebox_pb2.UpdateKnowledgeBoxResponse]]: ...
     @abc.abstractmethod
     def GCKnowledgeBox(
         self,
         request: nucliadb_protos.knowledgebox_pb2.KnowledgeBoxID,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.knowledgebox_pb2.GCKnowledgeBoxResponse: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.knowledgebox_pb2.GCKnowledgeBoxResponse, collections.abc.Awaitable[nucliadb_protos.knowledgebox_pb2.GCKnowledgeBoxResponse]]: ...
     @abc.abstractmethod
     def SetVectors(
         self,
         request: nucliadb_protos.writer_pb2.SetVectorsRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.SetVectorsResponse: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.SetVectorsResponse, collections.abc.Awaitable[nucliadb_protos.writer_pb2.SetVectorsResponse]]: ...
     @abc.abstractmethod
     def ResourceFieldExists(
         self,
         request: nucliadb_protos.writer_pb2.ResourceFieldId,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.ResourceFieldExistsResponse: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.ResourceFieldExistsResponse, collections.abc.Awaitable[nucliadb_protos.writer_pb2.ResourceFieldExistsResponse]]: ...
     @abc.abstractmethod
     def GetResourceId(
         self,
         request: nucliadb_protos.writer_pb2.ResourceIdRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.ResourceIdResponse: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.ResourceIdResponse, collections.abc.Awaitable[nucliadb_protos.writer_pb2.ResourceIdResponse]]: ...
     @abc.abstractmethod
     def ProcessMessage(
         self,
-        request_iterator: collections.abc.Iterator[nucliadb_protos.writer_pb2.BrokerMessage],
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.OpStatusWriter: ...
+        request_iterator: _MaybeAsyncIterator[nucliadb_protos.writer_pb2.BrokerMessage],
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.OpStatusWriter, collections.abc.Awaitable[nucliadb_protos.writer_pb2.OpStatusWriter]]: ...
     @abc.abstractmethod
     def GetLabels(
         self,
         request: nucliadb_protos.writer_pb2.GetLabelsRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.GetLabelsResponse:
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.GetLabelsResponse, collections.abc.Awaitable[nucliadb_protos.writer_pb2.GetLabelsResponse]]:
         """Labels"""
     @abc.abstractmethod
     def GetLabelSet(
         self,
         request: nucliadb_protos.writer_pb2.GetLabelSetRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.GetLabelSetResponse: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.GetLabelSetResponse, collections.abc.Awaitable[nucliadb_protos.writer_pb2.GetLabelSetResponse]]: ...
     @abc.abstractmethod
     def SetLabels(
         self,
         request: nucliadb_protos.writer_pb2.SetLabelsRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.OpStatusWriter: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.OpStatusWriter, collections.abc.Awaitable[nucliadb_protos.writer_pb2.OpStatusWriter]]: ...
     @abc.abstractmethod
     def DelLabels(
         self,
         request: nucliadb_protos.writer_pb2.DelLabelsRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.OpStatusWriter: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.OpStatusWriter, collections.abc.Awaitable[nucliadb_protos.writer_pb2.OpStatusWriter]]: ...
     @abc.abstractmethod
     def GetVectorSets(
         self,
         request: nucliadb_protos.writer_pb2.GetVectorSetsRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.GetVectorSetsResponse:
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.GetVectorSetsResponse, collections.abc.Awaitable[nucliadb_protos.writer_pb2.GetVectorSetsResponse]]:
         """VectorSets"""
     @abc.abstractmethod
     def DelVectorSet(
         self,
         request: nucliadb_protos.writer_pb2.DelVectorSetRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.OpStatusWriter: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.OpStatusWriter, collections.abc.Awaitable[nucliadb_protos.writer_pb2.OpStatusWriter]]: ...
     @abc.abstractmethod
     def SetVectorSet(
         self,
         request: nucliadb_protos.writer_pb2.SetVectorSetRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.OpStatusWriter: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.OpStatusWriter, collections.abc.Awaitable[nucliadb_protos.writer_pb2.OpStatusWriter]]: ...
     @abc.abstractmethod
     def NewEntitiesGroup(
         self,
         request: nucliadb_protos.writer_pb2.NewEntitiesGroupRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.NewEntitiesGroupResponse:
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.NewEntitiesGroupResponse, collections.abc.Awaitable[nucliadb_protos.writer_pb2.NewEntitiesGroupResponse]]:
         """Entities"""
     @abc.abstractmethod
     def GetEntities(
         self,
         request: nucliadb_protos.writer_pb2.GetEntitiesRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.GetEntitiesResponse: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.GetEntitiesResponse, collections.abc.Awaitable[nucliadb_protos.writer_pb2.GetEntitiesResponse]]: ...
     @abc.abstractmethod
     def GetEntitiesGroup(
         self,
         request: nucliadb_protos.writer_pb2.GetEntitiesGroupRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.GetEntitiesGroupResponse: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.GetEntitiesGroupResponse, collections.abc.Awaitable[nucliadb_protos.writer_pb2.GetEntitiesGroupResponse]]: ...
     @abc.abstractmethod
     def ListEntitiesGroups(
         self,
         request: nucliadb_protos.writer_pb2.ListEntitiesGroupsRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.ListEntitiesGroupsResponse: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.ListEntitiesGroupsResponse, collections.abc.Awaitable[nucliadb_protos.writer_pb2.ListEntitiesGroupsResponse]]: ...
     @abc.abstractmethod
     def SetEntities(
         self,
         request: nucliadb_protos.writer_pb2.SetEntitiesRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.OpStatusWriter: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.OpStatusWriter, collections.abc.Awaitable[nucliadb_protos.writer_pb2.OpStatusWriter]]: ...
     @abc.abstractmethod
     def UpdateEntitiesGroup(
         self,
         request: nucliadb_protos.writer_pb2.UpdateEntitiesGroupRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.UpdateEntitiesGroupResponse: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.UpdateEntitiesGroupResponse, collections.abc.Awaitable[nucliadb_protos.writer_pb2.UpdateEntitiesGroupResponse]]: ...
     @abc.abstractmethod
     def DelEntities(
         self,
         request: nucliadb_protos.writer_pb2.DelEntitiesRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.OpStatusWriter: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.OpStatusWriter, collections.abc.Awaitable[nucliadb_protos.writer_pb2.OpStatusWriter]]: ...
     @abc.abstractmethod
     def GetSynonyms(
         self,
         request: nucliadb_protos.knowledgebox_pb2.KnowledgeBoxID,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.GetSynonymsResponse:
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.GetSynonymsResponse, collections.abc.Awaitable[nucliadb_protos.writer_pb2.GetSynonymsResponse]]:
         """Synonyms"""
     @abc.abstractmethod
     def SetSynonyms(
         self,
         request: nucliadb_protos.writer_pb2.SetSynonymsRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.OpStatusWriter: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.OpStatusWriter, collections.abc.Awaitable[nucliadb_protos.writer_pb2.OpStatusWriter]]: ...
     @abc.abstractmethod
     def DelSynonyms(
         self,
         request: nucliadb_protos.knowledgebox_pb2.KnowledgeBoxID,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.OpStatusWriter: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.OpStatusWriter, collections.abc.Awaitable[nucliadb_protos.writer_pb2.OpStatusWriter]]: ...
     @abc.abstractmethod
     def Status(
         self,
         request: nucliadb_protos.writer_pb2.WriterStatusRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.WriterStatusResponse: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.WriterStatusResponse, collections.abc.Awaitable[nucliadb_protos.writer_pb2.WriterStatusResponse]]: ...
     @abc.abstractmethod
     def ListMembers(
         self,
         request: nucliadb_protos.writer_pb2.ListMembersRequest,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.ListMembersResponse: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.ListMembersResponse, collections.abc.Awaitable[nucliadb_protos.writer_pb2.ListMembersResponse]]: ...
     @abc.abstractmethod
     def Index(
         self,
         request: nucliadb_protos.writer_pb2.IndexResource,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.IndexStatus: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.IndexStatus, collections.abc.Awaitable[nucliadb_protos.writer_pb2.IndexStatus]]: ...
     @abc.abstractmethod
     def ReIndex(
         self,
         request: nucliadb_protos.writer_pb2.IndexResource,
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.IndexStatus: ...
-    @abc.abstractmethod
-    def Export(
-        self,
-        request: nucliadb_protos.writer_pb2.ExportRequest,
-        context: grpc.ServicerContext,
-    ) -> collections.abc.Iterator[nucliadb_protos.writer_pb2.BrokerMessage]: ...
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.IndexStatus, collections.abc.Awaitable[nucliadb_protos.writer_pb2.IndexStatus]]: ...
     @abc.abstractmethod
     def DownloadFile(
         self,
         request: nucliadb_protos.writer_pb2.FileRequest,
-        context: grpc.ServicerContext,
-    ) -> collections.abc.Iterator[nucliadb_protos.writer_pb2.BinaryData]: ...
+        context: _ServicerContext,
+    ) -> typing.Union[collections.abc.Iterator[nucliadb_protos.writer_pb2.BinaryData], collections.abc.AsyncIterator[nucliadb_protos.writer_pb2.BinaryData]]: ...
     @abc.abstractmethod
     def UploadFile(
         self,
-        request_iterator: collections.abc.Iterator[nucliadb_protos.writer_pb2.UploadBinaryData],
-        context: grpc.ServicerContext,
-    ) -> nucliadb_protos.writer_pb2.FileUploaded: ...
+        request_iterator: _MaybeAsyncIterator[nucliadb_protos.writer_pb2.UploadBinaryData],
+        context: _ServicerContext,
+    ) -> typing.Union[nucliadb_protos.writer_pb2.FileUploaded, collections.abc.Awaitable[nucliadb_protos.writer_pb2.FileUploaded]]: ...
 
-def add_WriterServicer_to_server(servicer: WriterServicer, server: grpc.Server) -> None: ...
+def add_WriterServicer_to_server(servicer: WriterServicer, server: typing.Union[grpc.Server, grpc.aio.Server]) -> None: ...
```

## Comparing `nucliadb_protos-2.9.0.post267.dist-info/RECORD` & `nucliadb_protos-3.0.0.post414.dist-info/RECORD`

 * *Files 15% similar despite different names*

```diff
@@ -1,39 +1,45 @@
 nucliadb_protos/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-nucliadb_protos/audit_pb2.py,sha256=BkShnwaFKWHUeBBa9uzmZFGES1OxUOVhgHA-3I2fZbs,5005
-nucliadb_protos/audit_pb2.pyi,sha256=ApjkoWl3G5DHdF8Phxprojlkc2DEV0pXMoKv0fmMkmg,9871
-nucliadb_protos/dataset_pb2.py,sha256=mJtH9Dkx587HR7dJluCE7MCcCU9suTukEc3wmQvoAfw,3332
-nucliadb_protos/dataset_pb2.pyi,sha256=iYfwiN5P6ziZ8rHEH_XZ7n64HkHbtz9Zdbzhm-tNjy0,8855
-nucliadb_protos/knowledgebox_pb2.py,sha256=sHnczUt-bRl7Vx8tog1iH2NSaFfWuQrpZPBYQqoV-2s,7790
-nucliadb_protos/knowledgebox_pb2.pyi,sha256=YVEGNyShh_WXgptoh6xwxCNjrZBGIrZZYVWBdS9jKL4,21745
-nucliadb_protos/nodereader_pb2.py,sha256=sb4WUYOGaTOP4nD7RtlzJ69Wb9eaQoeDAWWEp1optuY,18500
-nucliadb_protos/nodereader_pb2.pyi,sha256=H0H3BhS209t-TNfNacPLz72s3Ze1TVM5s1e3DzBICzg,55239
-nucliadb_protos/nodereader_pb2_grpc.py,sha256=3-m9KBDOQoxNIFmZ4-Kl6tMbbmaATCYGVuY5FKD9vu8,27422
-nucliadb_protos/nodereader_pb2_grpc.pyi,sha256=_BbGhRoIMK1fu1CieJeTJDIf4JAI8tsT1KTylAUjbEw,8103
-nucliadb_protos/noderesources_pb2.py,sha256=3IjcqWEUmc8KSxMpLBRtegXU8h4IENzMtfB1N9e6B9Q,11071
-nucliadb_protos/noderesources_pb2.pyi,sha256=Nj6B02IsVZJkI6cx-m4GbfAqzGWdUNgnlYhdOHcwffs,32020
-nucliadb_protos/nodesidecar_pb2.py,sha256=mHtm4SvizPH0X2_XviYQYzLRPkxOsKER5o_a4vlqmKo,1649
-nucliadb_protos/nodesidecar_pb2.pyi,sha256=UmfrOE5EBqEPKXKbwtsx0Fx4zsfJ9bLk-3IzbHcuL4k,1799
-nucliadb_protos/nodesidecar_pb2_grpc.py,sha256=wlm66GELIilesV-7u2nWqaVaCrgOYUfU65Lwc_MMK_M,2676
-nucliadb_protos/nodesidecar_pb2_grpc.pyi,sha256=oSuSJX_hxRFaWfwomhZMYof-SnRm_WQ36JTe4lmaEG8,1556
-nucliadb_protos/nodewriter_pb2.py,sha256=2rcEJq1CTm0R5hjKlCL5ZaXJ3O-ssig0adkPmCLjPzU,5553
-nucliadb_protos/nodewriter_pb2.pyi,sha256=Syzk1aBEHWbhc2WUOUwJUNJbx2Kq4iJ7CLErQZMpEvs,10675
-nucliadb_protos/nodewriter_pb2_grpc.py,sha256=Q4StEzeXzhvd_utHcwxwXd-ip8FDhBfwDifjE9wDHNk,27404
-nucliadb_protos/nodewriter_pb2_grpc.pyi,sha256=gVjXC8Rb890oxUpsuSSH29_6NBBuLYi0wFAWuKCeVpQ,7260
+nucliadb_protos/audit_pb2.py,sha256=_tO6VUzOz9BkANa_IEon_jnPzZkVjH9bPOrWMSjdOZo,5672
+nucliadb_protos/audit_pb2.pyi,sha256=XcQGRP1M1VhYJMujSR5gCYd6ymEnuIbZ3zmB4htSgqA,11653
+nucliadb_protos/dataset_pb2.py,sha256=njxhtKgkm6QpT-BZ6cPWJ9CK_Cqvy_sWvKvPaABL1II,5708
+nucliadb_protos/dataset_pb2.pyi,sha256=ueTxrREA9Jj0lc8jWkj0Go2WcRBJUEiq5fNCINe5P2I,14791
+nucliadb_protos/knowledgebox_pb2.py,sha256=L0rVtkrhTe9xkrvzPI_w7o5uV2z1jypldJHXXZOfkfQ,12384
+nucliadb_protos/knowledgebox_pb2.pyi,sha256=MhuDo_gQdEusipH1LnhqS5tIEF6_P3qEyljMwncpfPY,30186
+nucliadb_protos/migrations_pb2.py,sha256=v7ga1yU-MQozqSw--6zG0J1fxkNoQno6Zzd_Zl7_FX0,1152
+nucliadb_protos/migrations_pb2.pyi,sha256=bayV1fB2kpjmajItzSr0KdqKdF8k1ZnFLlI2LB4KIks,968
+nucliadb_protos/nodereader_pb2.py,sha256=v73jNV1LhPuSaDJrSTgIvGcuWQe5zk-1TsyH7ieTXI4,22751
+nucliadb_protos/nodereader_pb2.pyi,sha256=RTCWel1dE9VusrumwibuWIaopQ-xXWObAMskLQC2Q5k,61401
+nucliadb_protos/nodereader_pb2_grpc.py,sha256=SDVzMPdbZ4lDAvZVxEe3AxSJT6YRUVqllPCnwqtii2I,27532
+nucliadb_protos/nodereader_pb2_grpc.pyi,sha256=z12cbE6cWFP8ZQqNJyJjjr2y_1AU6WvGfEwPM_zXhvk,12819
+nucliadb_protos/noderesources_pb2.py,sha256=DMSo1hcZGNNU9B8M0QWq2qLRlDXvyahinwse-fbz3wo,12672
+nucliadb_protos/noderesources_pb2.pyi,sha256=LpPrfQOHMjD_7GGY_zI-m1jQBdtBjGSBI0-cyFCUEpU,33608
+nucliadb_protos/nodewriter_pb2.py,sha256=Eb5inbZ3VvetHmwr3TN8TLJ_3qkOTlSe-0LvdCDNHqU,5583
+nucliadb_protos/nodewriter_pb2.pyi,sha256=JVMO5lkvJ_J4oqmoI3Uc0CxGbqZPtmNFZlbkpH7IYRk,10730
+nucliadb_protos/nodewriter_pb2_grpc.py,sha256=PsBKb0ovyJm0otv_hgBFcJcq6xTkUutMMuaUEbHoe6Y,19087
+nucliadb_protos/nodewriter_pb2_grpc.pyi,sha256=FCE0oJYz_GATuylD1oSVYp3gC8Yt6UK63NxHtmMc3vY,8412
 nucliadb_protos/py.typed,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-nucliadb_protos/resources_pb2.py,sha256=LgFvQ9o6137vGA0KYovgg5CnDYlGxGd4X2UIr5IWMq8,27613
-nucliadb_protos/resources_pb2.pyi,sha256=MiFmjw-Vpj2uiIoOCzBX590Hrg9t-mdps5C6gvuNaos,80568
-nucliadb_protos/train_pb2.py,sha256=Xr3HVdwvVhNYuUe0gx2DmuF6Uo-txQMg_2oVyYcIAUU,11475
-nucliadb_protos/train_pb2.pyi,sha256=mVfQT3CdGvMLeM7GkD5QmGATZ_JDFqmj5YDyMHEEvUQ,28365
+nucliadb_protos/replication_pb2.py,sha256=p9dTKMKJzOsL-5vcDyauloXhpRllYooYI1hMQIvJybg,4528
+nucliadb_protos/replication_pb2.pyi,sha256=HkTrS3P3wgU4gXQ7EsrkIJKN3A-_rKBa57HAzgzIgIQ,8433
+nucliadb_protos/replication_pb2_grpc.py,sha256=64JFEgvnGLleLNiwprqIwV7DRINjPAFJcojS4nwN4LU,6379
+nucliadb_protos/replication_pb2_grpc.pyi,sha256=CyrObx1e7xD3zeY4wpibDNVwVpooXwc4303lv4o_9ZY,3904
+nucliadb_protos/resources_pb2.py,sha256=tq-KomhRwsn6Ii9aNiKIDYWv90YyFBly1dLG9bQKrKo,35647
+nucliadb_protos/resources_pb2.pyi,sha256=Bh63ZQRy80CUF1vGU_-PH6_n2mU-pG7ti-3QrIDF8Dk,96135
+nucliadb_protos/standalone_pb2.py,sha256=R2uKLhZWqmygVI7OkgCugfu415ZYILXBs-uRHBqQe2k,2192
+nucliadb_protos/standalone_pb2.pyi,sha256=LFERlOMtItEbws3IeDYZeRvMxPR0e1vtYM28Q3RkJQ0,2712
+nucliadb_protos/standalone_pb2_grpc.py,sha256=x5sVVBCe6r6r3NUSXm5xyQND98Rnz1Qfplry0crZ7ng,4407
+nucliadb_protos/standalone_pb2_grpc.pyi,sha256=6lqc3iJJAh3axfhs74FsdILJoUOT5e_CZtgu0ECYmWc,2129
+nucliadb_protos/train_pb2.py,sha256=5n02IRkoKeXNP_ntCeA_fslQ5LKBxWSd5hhZ6oYk-Ws,12223
+nucliadb_protos/train_pb2.pyi,sha256=LDJRi7_L00PIdX_v_pyfQz5WtfUjVn0aAvFIgtcJMZ0,29135
 nucliadb_protos/train_pb2_grpc.py,sha256=ZQ5TXiGOJ3CMQnlQ0nYMJG-ckVclv6WSMaUbm-tnriE,13970
-nucliadb_protos/train_pb2_grpc.pyi,sha256=zwvFEmsuPwAezZhXQbbPQNFoLwKwVnHf2CED_0sE-Lo,8941
-nucliadb_protos/utils_pb2.py,sha256=4izCMu-5l3azZgT3cBwpjW_f_2xS--iuNW1DUICSvbY,6674
-nucliadb_protos/utils_pb2.pyi,sha256=25k8NU04QExB2mJ1U_g8QkmIflNzRhdgjhb9qCpch-Q,20355
-nucliadb_protos/writer_pb2.py,sha256=bz3T-KBQ_kX6qH2lk2Y4cu8GVeqUqhB4RxFwUdEUBWA,29383
-nucliadb_protos/writer_pb2.pyi,sha256=KzsxUNKOuVzl-wZo039yr51OufAGoK7EHT2XVZGtvVM,77734
-nucliadb_protos/writer_pb2_grpc.py,sha256=RboNtt7x__wqXCciWFJCTuI7ULBdfbYNuFS27zK8FXg,59091
-nucliadb_protos/writer_pb2_grpc.pyi,sha256=Qw5cO2ASg6uWt-xwiTrhQkSyWh1PquPJdHtPfbFPHbc,18295
-nucliadb_protos-2.9.0.post267.dist-info/METADATA,sha256=5rFpflzJrgIYc2NDgGb8RAtwsC_Ylir9zF05gg8xgwo,381
-nucliadb_protos-2.9.0.post267.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-nucliadb_protos-2.9.0.post267.dist-info/top_level.txt,sha256=wRP-apvCCaxGnNKXTnYx6tpAPggTof4SZQyoI1b-sjU,16
-nucliadb_protos-2.9.0.post267.dist-info/zip-safe,sha256=AbpHGcgLb-kRsJGnwFEktk7uzpZOCcBY74-YBdrKVGs,1
-nucliadb_protos-2.9.0.post267.dist-info/RECORD,,
+nucliadb_protos/train_pb2_grpc.pyi,sha256=N8Af6SyQ8xp7TwKUw5iVSDzA42vKkwKgDTXYn3JuBQM,12020
+nucliadb_protos/utils_pb2.py,sha256=i3b7BK5msI4Uy_w91JG-gcZc54bgpdItWSsCq36GMyg,6683
+nucliadb_protos/utils_pb2.pyi,sha256=w98WWH8kXk0qJFIb-q3E0kWizqnSrZjSgPN0Can2emY,18828
+nucliadb_protos/writer_pb2.py,sha256=T9giVgJmv4cIBU03vl3bawzTPvyPu2r3kYZheEToYP0,33587
+nucliadb_protos/writer_pb2.pyi,sha256=ws-n3L4_hRzFOzsobVLAUp9tmJMxiDBGwXv5HMgdXDg,82205
+nucliadb_protos/writer_pb2_grpc.py,sha256=0y6ZSG7WmxIm73JCYopLrklKBHF8ACpDnKodgkTaz4U,52287
+nucliadb_protos/writer_pb2_grpc.pyi,sha256=rfbqfFnBoRGjsw2Hsg9doyrS7Jm35UD8bXi_OTJGZp0,25555
+nucliadb_protos-3.0.0.post414.dist-info/METADATA,sha256=9LShGHi4M0iP3z3_rvhARw9kh3jgL60SRLYFede2w7Y,332
+nucliadb_protos-3.0.0.post414.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+nucliadb_protos-3.0.0.post414.dist-info/top_level.txt,sha256=wRP-apvCCaxGnNKXTnYx6tpAPggTof4SZQyoI1b-sjU,16
+nucliadb_protos-3.0.0.post414.dist-info/zip-safe,sha256=AbpHGcgLb-kRsJGnwFEktk7uzpZOCcBY74-YBdrKVGs,1
+nucliadb_protos-3.0.0.post414.dist-info/RECORD,,
```

