# Comparing `tmp/odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0-py3-none-any.whl.zip` & `tmp/odoo14_addon_ssi_multiple_approval_mixin-14.0.1.8.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,21 +1,21 @@
-Zip file size: 64275 bytes, number of entries: 19
--rw-r--r--  2.0 unx     1302 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/README.rst
--rw-r--r--  2.0 unx      181 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/__init__.py
--rw-r--r--  2.0 unx      823 b- defN 24-Apr-08 04:44 odoo/addons/ssi_multiple_approval_mixin/__manifest__.py
--rw-r--r--  2.0 unx      342 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/menu.xml
--rw-r--r--  2.0 unx      274 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/models/__init__.py
--rw-r--r--  2.0 unx     4245 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/models/approval_approval.py
--rw-r--r--  2.0 unx     2322 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/models/approval_template.py
--rw-r--r--  2.0 unx     1599 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/models/approval_template_detail.py
--rw-r--r--  2.0 unx    20977 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/models/mixin_multiple_approval.py
--rw-r--r--  2.0 unx      641 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/security/ir.model.access.csv
--rw-r--r--  2.0 unx    48333 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/static/description/icon.png
--rw-r--r--  2.0 unx      490 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/templates/mixin_multiple_approval_templates.xml
--rw-r--r--  2.0 unx     1095 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/views/approval_approval_views.xml
--rw-r--r--  2.0 unx     3713 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/views/approval_template_detail_views.xml
--rw-r--r--  2.0 unx     5603 b- defN 24-Apr-08 04:43 odoo/addons/ssi_multiple_approval_mixin/views/approval_template_views.xml
--rw-r--r--  2.0 unx     1843 b- defN 24-Apr-08 04:44 odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Apr-08 04:44 odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 24-Apr-08 04:44 odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2291 b- defN 24-Apr-08 04:44 odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/RECORD
-19 files, 96171 bytes uncompressed, 60267 bytes compressed:  37.3%
+Zip file size: 64366 bytes, number of entries: 19
+-rw-r--r--  2.0 unx     1302 b- defN 24-Apr-09 23:59 odoo/addons/ssi_multiple_approval_mixin/README.rst
+-rw-r--r--  2.0 unx      181 b- defN 24-Apr-09 23:59 odoo/addons/ssi_multiple_approval_mixin/__init__.py
+-rw-r--r--  2.0 unx      823 b- defN 24-Apr-10 00:00 odoo/addons/ssi_multiple_approval_mixin/__manifest__.py
+-rw-r--r--  2.0 unx      342 b- defN 24-Apr-09 23:59 odoo/addons/ssi_multiple_approval_mixin/menu.xml
+-rw-r--r--  2.0 unx      274 b- defN 24-Apr-09 23:59 odoo/addons/ssi_multiple_approval_mixin/models/__init__.py
+-rw-r--r--  2.0 unx     4245 b- defN 24-Apr-09 23:59 odoo/addons/ssi_multiple_approval_mixin/models/approval_approval.py
+-rw-r--r--  2.0 unx     2341 b- defN 24-Apr-09 23:59 odoo/addons/ssi_multiple_approval_mixin/models/approval_template.py
+-rw-r--r--  2.0 unx     1599 b- defN 24-Apr-09 23:59 odoo/addons/ssi_multiple_approval_mixin/models/approval_template_detail.py
+-rw-r--r--  2.0 unx    21716 b- defN 24-Apr-09 23:59 odoo/addons/ssi_multiple_approval_mixin/models/mixin_multiple_approval.py
+-rw-r--r--  2.0 unx      641 b- defN 24-Apr-09 23:59 odoo/addons/ssi_multiple_approval_mixin/security/ir.model.access.csv
+-rw-r--r--  2.0 unx    48333 b- defN 24-Apr-09 23:59 odoo/addons/ssi_multiple_approval_mixin/static/description/icon.png
+-rw-r--r--  2.0 unx      517 b- defN 24-Apr-09 23:59 odoo/addons/ssi_multiple_approval_mixin/templates/mixin_multiple_approval_templates.xml
+-rw-r--r--  2.0 unx     1095 b- defN 24-Apr-09 23:59 odoo/addons/ssi_multiple_approval_mixin/views/approval_approval_views.xml
+-rw-r--r--  2.0 unx     3713 b- defN 24-Apr-09 23:59 odoo/addons/ssi_multiple_approval_mixin/views/approval_template_detail_views.xml
+-rw-r--r--  2.0 unx     5712 b- defN 24-Apr-09 23:59 odoo/addons/ssi_multiple_approval_mixin/views/approval_template_views.xml
+-rw-r--r--  2.0 unx     1843 b- defN 24-Apr-10 00:00 odoo14_addon_ssi_multiple_approval_mixin-14.0.1.8.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-10 00:00 odoo14_addon_ssi_multiple_approval_mixin-14.0.1.8.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 24-Apr-10 00:00 odoo14_addon_ssi_multiple_approval_mixin-14.0.1.8.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2291 b- defN 24-Apr-10 00:00 odoo14_addon_ssi_multiple_approval_mixin-14.0.1.8.0.dist-info/RECORD
+19 files, 97065 bytes uncompressed, 60358 bytes compressed:  37.8%
```

## zipnote {}

```diff
@@ -39,20 +39,20 @@
 
 Filename: odoo/addons/ssi_multiple_approval_mixin/views/approval_template_detail_views.xml
 Comment: 
 
 Filename: odoo/addons/ssi_multiple_approval_mixin/views/approval_template_views.xml
 Comment: 
 
-Filename: odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/METADATA
+Filename: odoo14_addon_ssi_multiple_approval_mixin-14.0.1.8.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/WHEEL
+Filename: odoo14_addon_ssi_multiple_approval_mixin-14.0.1.8.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/top_level.txt
+Filename: odoo14_addon_ssi_multiple_approval_mixin-14.0.1.8.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/RECORD
+Filename: odoo14_addon_ssi_multiple_approval_mixin-14.0.1.8.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/ssi_multiple_approval_mixin/__manifest__.py

```diff
@@ -1,14 +1,14 @@
 # Copyright 2022 OpenSynergy Indonesia
 # Copyright 2022 PT. Simetri Sinergi Indonesia
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
 # pylint: disable=locally-disabled, manifest-required-author
 {
     "name": "Multiple Approval",
-    "version": "14.0.1.7.0",
+    "version": "14.0.1.8.0",
     "category": "Administration",
     "website": "https://simetri-sinergi.id",
     "author": "OpenSynergy Indonesia, PT. Simetri Sinergi Indonesia",
     "license": "AGPL-3",
     "installable": True,
     "depends": [
         "base",
```

## odoo/addons/ssi_multiple_approval_mixin/models/approval_template.py

```diff
@@ -52,14 +52,15 @@
         string="Approval by Sequence",
         help="Approval by reviewer must be done by sequence.",
     )
     detail_ids = fields.One2many(
         string="Details",
         comodel_name="approval.template_detail",
         inverse_name="template_id",
+        copy=True,
     )
     computation_method = fields.Selection(
         string="Computation Method",
         selection=[
             ("use_domain", "Domain"),
             ("use_python", "Python Code"),
         ],
```

## odoo/addons/ssi_multiple_approval_mixin/models/mixin_multiple_approval.py

```diff
@@ -360,21 +360,24 @@
     def action_approve_approval(self):
         for rec in self.sudo():
             rec._check_approve_policy()
             rec._run_pre_approve_check()
             rec._run_pre_approve_action()
             rec._action_approval("approved")
             if rec._check_all_approve() and self._after_approved_method:
-                getattr(rec, self._after_approved_method)()
+                getattr(
+                    rec.with_context(bypass_policy_check=True),
+                    self._after_approved_method,
+                )()
             rec._run_post_approve_check()
             rec._run_post_approve_action()
 
     def _check_approve_policy(self):
         self.ensure_one()
-        if self.env.context.get("bypass_approve_policy", False):
+        if self.env.context.get("bypass_policy_check", False):
             return True
 
         if not self.approve_ok:
             error_message = """
             Context: Approve %s
             Database ID: %s
             Problem: Document is not allowed to approve
@@ -432,31 +435,49 @@
             rec._run_pre_reject_action()
             rec._action_approval("rejected")
             rec._run_post_reject_check()
             rec._run_post_reject_action()
 
     def _check_reject_policy(self):
         self.ensure_one()
-        if self.env.context.get("bypass_reject_policy", False):
+        if self.env.context.get("bypass_policy_check", False):
             return True
 
         if not self.reject_ok:
             error_message = """
             Context: Reject %s
             Database ID: %s
             Problem: Document is not allowed to reject
             Solution: Check reject policy prerequisite
             """ % (
                 self._description.lower(),
                 self.id,
             )
             raise UserError(_(error_message))
 
+    def _check_restart_approval_policy_policy(self):
+        self.ensure_one()
+        if self.env.context.get("bypass_policy_check", False):
+            return True
+
+        if not self.restart_approval_ok:
+            error_message = """
+            Context: Restart approval %s
+            Database ID: %s
+            Problem: Document is not allowed to restart approval
+            Solution: Check restart approval policy prerequisite
+            """ % (
+                self._description.lower(),
+                self.id,
+            )
+            raise UserError(_(error_message))
+
     def action_reload_approval_template(self):
         for rec in self.sudo():
+            rec._check_restart_approval_policy_policy()
             rec.mapped("approval_ids").unlink()
             rec.mapped("active_approver_partner_ids").unlink()
             rec.action_request_approval()
 
     def action_reload_approval(self):
         for rec in self.sudo():
             rec._reload_approval()
```

## odoo/addons/ssi_multiple_approval_mixin/templates/mixin_multiple_approval_templates.xml

### odoo/addons/ssi_multiple_approval_mixin/templates/mixin_multiple_approval_templates.xml

```diff
@@ -1,12 +1,12 @@
 <?xml version="1.0" encoding="utf-8"?>
 <odoo>
   <template id="multiple_approval">
     <page string="Approvals" name="tier_validation">
       <group>
-        <field name="approval_template_id"/>
+        <field name="approval_template_id" groups="base.group_system"/>
         <field name="active_approver_partner_ids" widget="many2many_tags"/>
       </group>
       <field name="approval_ids" attrs="{'invisible':[('approval_ids', '=', [])]}" nolabel="1"/>
     </page>
   </template>
 </odoo>
```

## odoo/addons/ssi_multiple_approval_mixin/views/approval_template_views.xml

### odoo/addons/ssi_multiple_approval_mixin/views/approval_template_views.xml

```diff
@@ -24,16 +24,18 @@
     </field>
   </record>
   <record id="approval_template_view_tree" model="ir.ui.view">
     <field name="name">approval.template.tree</field>
     <field name="model">approval.template</field>
     <field name="arch" type="xml">
       <tree>
+        <field name="sequence" widget="handle"/>
         <field name="name"/>
         <field name="model_id"/>
+        <field name="validate_sequence"/>
         <field name="active" widget="boolean_toggle"/>
       </tree>
     </field>
   </record>
   <record id="approval_template_view_form" model="ir.ui.view">
     <field name="name">approval.template.form</field>
     <field name="model">approval.template</field>
```

## Comparing `odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/METADATA` & `odoo14_addon_ssi_multiple_approval_mixin-14.0.1.8.0.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-ssi-multiple-approval-mixin
-Version: 14.0.1.7.0
+Version: 14.0.1.8.0
 Summary: Multiple Approval
 Home-page: https://simetri-sinergi.id
 Author: OpenSynergy Indonesia, PT. Simetri Sinergi Indonesia
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
```

## Comparing `odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/RECORD` & `odoo14_addon_ssi_multiple_approval_mixin-14.0.1.8.0.dist-info/RECORD`

 * *Files 14% similar despite different names*

```diff
@@ -1,19 +1,19 @@
 odoo/addons/ssi_multiple_approval_mixin/README.rst,sha256=LJU6dKTSwu2N369kY123CsDkY390lzcrv5xrTJdxZvQ,1302
 odoo/addons/ssi_multiple_approval_mixin/__init__.py,sha256=VAkFvJXefoz7CVUwbL97HBfpLAYmvQPYXfYs71LOpzU,181
-odoo/addons/ssi_multiple_approval_mixin/__manifest__.py,sha256=_KX0lpcd2Y8si84d1nmvB2unfVsNQ5E3h8UinxHvJsg,823
+odoo/addons/ssi_multiple_approval_mixin/__manifest__.py,sha256=HI3GdU0gH2mmmzRehMR6Xx9Fk8aUzgwuBIcOu3dIJic,823
 odoo/addons/ssi_multiple_approval_mixin/menu.xml,sha256=D88r1tUnup57cw-RD8BwMC_pKGm4N4P8dq3s4c4zuAM,342
 odoo/addons/ssi_multiple_approval_mixin/models/__init__.py,sha256=iycNXFypc74w67LOzd7uLp_w2kSgae7qd6sn4zsLWCM,274
 odoo/addons/ssi_multiple_approval_mixin/models/approval_approval.py,sha256=CMye_66N9HCpSp8da5EaT_U6ImK5mIu-CMIfMoydeCo,4245
-odoo/addons/ssi_multiple_approval_mixin/models/approval_template.py,sha256=XZsT2239rZ3pVlCKoQJLHHveoR62wAi0xiqKt_EpXHs,2322
+odoo/addons/ssi_multiple_approval_mixin/models/approval_template.py,sha256=1jkuPEZQoDy7E1sFvsqmK15-cVV7PKiBpheRo69zUTo,2341
 odoo/addons/ssi_multiple_approval_mixin/models/approval_template_detail.py,sha256=22KGnfCcfwmQrqiInT66sXDY_52BKAexEzAD83YIKAo,1599
-odoo/addons/ssi_multiple_approval_mixin/models/mixin_multiple_approval.py,sha256=wnVLjnn50A-uCQS8FDYOYLqvEMcNZ2u8RW22_ENeTXE,20977
+odoo/addons/ssi_multiple_approval_mixin/models/mixin_multiple_approval.py,sha256=hMRpAN66ohbtSSl8g3xKxHzQyEyhxQQvNraoubKqtGU,21716
 odoo/addons/ssi_multiple_approval_mixin/security/ir.model.access.csv,sha256=WKZFgSNIe9MQvZ-2lcaVNJCmzWu4v5_RyFiAo-EuTJ0,641
 odoo/addons/ssi_multiple_approval_mixin/static/description/icon.png,sha256=lNGJOSg4cMRfwPTfFKVT6d5B2N1N83iVpEEN1blqu1I,48333
-odoo/addons/ssi_multiple_approval_mixin/templates/mixin_multiple_approval_templates.xml,sha256=BrYQZ7S2KDGuVLOVltLvbH0bblQyHuygoCoM0XPaNZ0,490
+odoo/addons/ssi_multiple_approval_mixin/templates/mixin_multiple_approval_templates.xml,sha256=KJpeMbopza2pKE9MUKqgatC1pKj3yH2EZQSiUwk3OJE,517
 odoo/addons/ssi_multiple_approval_mixin/views/approval_approval_views.xml,sha256=3ox2Qc_FamM6N88UkidSV76M9uKrLy_s3TIF5_oJbnY,1095
 odoo/addons/ssi_multiple_approval_mixin/views/approval_template_detail_views.xml,sha256=yRqVFGJ72qas_7P-24HicDkKUTZ9QwYWccUZitMTALE,3713
-odoo/addons/ssi_multiple_approval_mixin/views/approval_template_views.xml,sha256=dRoaQbBRjxbX7wTsn02WTmznhwDgyb1eW6fI5VBNKOs,5603
-odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/METADATA,sha256=YAZBpc3slRZfLu6IZTbxeAW9OWvVx0ZcaUUlEfAS680,1843
-odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/WHEEL,sha256=oiQVh_5PnQM0E3gPdiz09WCNmwiHDMaGer_elqB3coM,92
-odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_ssi_multiple_approval_mixin-14.0.1.7.0.dist-info/RECORD,,
+odoo/addons/ssi_multiple_approval_mixin/views/approval_template_views.xml,sha256=LqinB4Ra7pO6oiySMm1-82z-WaqU2axPfzwNb5O9a2M,5712
+odoo14_addon_ssi_multiple_approval_mixin-14.0.1.8.0.dist-info/METADATA,sha256=PAyvZzZUsntdIYs1XjEa5cczzVPCgr8ekabd9IZGL2Y,1843
+odoo14_addon_ssi_multiple_approval_mixin-14.0.1.8.0.dist-info/WHEEL,sha256=oiQVh_5PnQM0E3gPdiz09WCNmwiHDMaGer_elqB3coM,92
+odoo14_addon_ssi_multiple_approval_mixin-14.0.1.8.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_ssi_multiple_approval_mixin-14.0.1.8.0.dist-info/RECORD,,
```

